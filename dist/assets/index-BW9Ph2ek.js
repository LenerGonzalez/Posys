var Xse=Object.defineProperty;var Jse=(e,t,r)=>t in e?Xse(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var _n=(e,t,r)=>Jse(e,typeof t!="symbol"?t+"":t,r);function Yse(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var Kze=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yA(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var i$={exports:{}},nE={},o$={exports:{}},rn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $1=Symbol.for("react.element"),Zse=Symbol.for("react.portal"),eie=Symbol.for("react.fragment"),tie=Symbol.for("react.strict_mode"),rie=Symbol.for("react.profiler"),nie=Symbol.for("react.provider"),aie=Symbol.for("react.context"),sie=Symbol.for("react.forward_ref"),iie=Symbol.for("react.suspense"),oie=Symbol.for("react.memo"),lie=Symbol.for("react.lazy"),IR=Symbol.iterator;function cie(e){return e===null||typeof e!="object"?null:(e=IR&&e[IR]||e["@@iterator"],typeof e=="function"?e:null)}var l$={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},c$=Object.assign,u$={};function Qg(e,t,r){this.props=e,this.context=t,this.refs=u$,this.updater=r||l$}Qg.prototype.isReactComponent={};Qg.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Qg.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function d$(){}d$.prototype=Qg.prototype;function UT(e,t,r){this.props=e,this.context=t,this.refs=u$,this.updater=r||l$}var QT=UT.prototype=new d$;QT.constructor=UT;c$(QT,Qg.prototype);QT.isPureReactComponent=!0;var BR=Array.isArray,A$=Object.prototype.hasOwnProperty,VT={current:null},h$={key:!0,ref:!0,__self:!0,__source:!0};function f$(e,t,r){var n,a={},s=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)A$.call(t,n)&&!h$.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:$1,type:e,key:s,ref:o,props:a,_owner:VT.current}}function uie(e,t){return{$$typeof:$1,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function HT(e){return typeof e=="object"&&e!==null&&e.$$typeof===$1}function die(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var jR=/\/+/g;function $I(e,t){return typeof e=="object"&&e!==null&&e.key!=null?die(""+e.key):t.toString(36)}function iN(e,t,r,n,a){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case $1:case Zse:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+$I(o,0):n,BR(a)?(r="",e!=null&&(r=e.replace(jR,"$&/")+"/"),iN(a,t,r,"",function(u){return u})):a!=null&&(HT(a)&&(a=uie(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(jR,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",BR(e))for(var l=0;l<e.length;l++){s=e[l];var c=n+$I(s,l);o+=iN(s,t,r,c,a)}else if(c=cie(e),typeof c=="function")for(e=c.call(e),l=0;!(s=e.next()).done;)s=s.value,c=n+$I(s,l++),o+=iN(s,t,r,c,a);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function hw(e,t,r){if(e==null)return e;var n=[],a=0;return iN(e,n,"","",function(s){return t.call(r,s,a++)}),n}function Aie(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Oo={current:null},oN={transition:null},hie={ReactCurrentDispatcher:Oo,ReactCurrentBatchConfig:oN,ReactCurrentOwner:VT};function m$(){throw Error("act(...) is not supported in production builds of React.")}rn.Children={map:hw,forEach:function(e,t,r){hw(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return hw(e,function(){t++}),t},toArray:function(e){return hw(e,function(t){return t})||[]},only:function(e){if(!HT(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};rn.Component=Qg;rn.Fragment=eie;rn.Profiler=rie;rn.PureComponent=UT;rn.StrictMode=tie;rn.Suspense=iie;rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hie;rn.act=m$;rn.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=c$({},e.props),a=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=VT.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)A$.call(t,c)&&!h$.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:$1,type:e.type,key:a,ref:s,props:n,_owner:o}};rn.createContext=function(e){return e={$$typeof:aie,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:nie,_context:e},e.Consumer=e};rn.createElement=f$;rn.createFactory=function(e){var t=f$.bind(null,e);return t.type=e,t};rn.createRef=function(){return{current:null}};rn.forwardRef=function(e){return{$$typeof:sie,render:e}};rn.isValidElement=HT;rn.lazy=function(e){return{$$typeof:lie,_payload:{_status:-1,_result:e},_init:Aie}};rn.memo=function(e,t){return{$$typeof:oie,type:e,compare:t===void 0?null:t}};rn.startTransition=function(e){var t=oN.transition;oN.transition={};try{e()}finally{oN.transition=t}};rn.unstable_act=m$;rn.useCallback=function(e,t){return Oo.current.useCallback(e,t)};rn.useContext=function(e){return Oo.current.useContext(e)};rn.useDebugValue=function(){};rn.useDeferredValue=function(e){return Oo.current.useDeferredValue(e)};rn.useEffect=function(e,t){return Oo.current.useEffect(e,t)};rn.useId=function(){return Oo.current.useId()};rn.useImperativeHandle=function(e,t,r){return Oo.current.useImperativeHandle(e,t,r)};rn.useInsertionEffect=function(e,t){return Oo.current.useInsertionEffect(e,t)};rn.useLayoutEffect=function(e,t){return Oo.current.useLayoutEffect(e,t)};rn.useMemo=function(e,t){return Oo.current.useMemo(e,t)};rn.useReducer=function(e,t,r){return Oo.current.useReducer(e,t,r)};rn.useRef=function(e){return Oo.current.useRef(e)};rn.useState=function(e){return Oo.current.useState(e)};rn.useSyncExternalStore=function(e,t,r){return Oo.current.useSyncExternalStore(e,t,r)};rn.useTransition=function(){return Oo.current.useTransition()};rn.version="18.3.1";o$.exports=rn;var v=o$.exports;const Ti=yA(v),fie=Yse({__proto__:null,default:Ti},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mie=v,pie=Symbol.for("react.element"),gie=Symbol.for("react.fragment"),xie=Object.prototype.hasOwnProperty,vie=mie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yie={key:!0,ref:!0,__self:!0,__source:!0};function p$(e,t,r){var n,a={},s=null,o=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)xie.call(t,n)&&!yie.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:pie,type:e,key:s,ref:o,props:a,_owner:vie.current}}nE.Fragment=gie;nE.jsx=p$;nE.jsxs=p$;i$.exports=nE;var i=i$.exports,v5={},g$={exports:{}},Ll={},x$={exports:{}},v$={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ce,J){var me=ce.length;ce.push(J);e:for(;0<me;){var Ee=me-1>>>1,k=ce[Ee];if(0<a(k,J))ce[Ee]=J,ce[me]=k,me=Ee;else break e}}function r(ce){return ce.length===0?null:ce[0]}function n(ce){if(ce.length===0)return null;var J=ce[0],me=ce.pop();if(me!==J){ce[0]=me;e:for(var Ee=0,k=ce.length,F=k>>>1;Ee<F;){var V=2*(Ee+1)-1,D=ce[V],M=V+1,G=ce[M];if(0>a(D,me))M<k&&0>a(G,D)?(ce[Ee]=G,ce[M]=me,Ee=M):(ce[Ee]=D,ce[V]=me,Ee=V);else if(M<k&&0>a(G,me))ce[Ee]=G,ce[M]=me,Ee=M;else break e}}return J}function a(ce,J){var me=ce.sortIndex-J.sortIndex;return me!==0?me:ce.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,A=null,f=3,h=!1,m=!1,p=!1,g=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(ce){for(var J=r(u);J!==null;){if(J.callback===null)n(u);else if(J.startTime<=ce)n(u),J.sortIndex=J.expirationTime,t(c,J);else break;J=r(u)}}function _(ce){if(p=!1,b(ce),!m)if(r(c)!==null)m=!0,te(T);else{var J=r(u);J!==null&&le(_,J.startTime-ce)}}function T(ce,J){m=!1,p&&(p=!1,x(S),S=-1),h=!0;var me=f;try{for(b(J),A=r(c);A!==null&&(!(A.expirationTime>J)||ce&&!E());){var Ee=A.callback;if(typeof Ee=="function"){A.callback=null,f=A.priorityLevel;var k=Ee(A.expirationTime<=J);J=e.unstable_now(),typeof k=="function"?A.callback=k:A===r(c)&&n(c),b(J)}else n(c);A=r(c)}if(A!==null)var F=!0;else{var V=r(u);V!==null&&le(_,V.startTime-J),F=!1}return F}finally{A=null,f=me,h=!1}}var P=!1,C=null,S=-1,I=5,L=-1;function E(){return!(e.unstable_now()-L<I)}function j(){if(C!==null){var ce=e.unstable_now();L=ce;var J=!0;try{J=C(!0,ce)}finally{J?R():(P=!1,C=null)}}else P=!1}var R;if(typeof y=="function")R=function(){y(j)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,de=W.port2;W.port1.onmessage=j,R=function(){de.postMessage(null)}}else R=function(){g(j,0)};function te(ce){C=ce,P||(P=!0,R())}function le(ce,J){S=g(function(){ce(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ce){ce.callback=null},e.unstable_continueExecution=function(){m||h||(m=!0,te(T))},e.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<ce?Math.floor(1e3/ce):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(ce){switch(f){case 1:case 2:case 3:var J=3;break;default:J=f}var me=f;f=J;try{return ce()}finally{f=me}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ce,J){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var me=f;f=ce;try{return J()}finally{f=me}},e.unstable_scheduleCallback=function(ce,J,me){var Ee=e.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Ee+me:Ee):me=Ee,ce){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=me+k,ce={id:d++,callback:J,priorityLevel:ce,startTime:me,expirationTime:k,sortIndex:-1},me>Ee?(ce.sortIndex=me,t(u,ce),r(c)===null&&ce===r(u)&&(p?(x(S),S=-1):p=!0,le(_,me-Ee))):(ce.sortIndex=k,t(c,ce),m||h||(m=!0,te(T))),ce},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(ce){var J=f;return function(){var me=f;f=J;try{return ce.apply(this,arguments)}finally{f=me}}}})(v$);x$.exports=v$;var bie=x$.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wie=v,Tl=bie;function Yt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y$=new Set,Ey={};function g0(e,t){dg(e,t),dg(e+"Capture",t)}function dg(e,t){for(Ey[e]=t,e=0;e<t.length;e++)y$.add(t[e])}var nA=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y5=Object.prototype.hasOwnProperty,Nie=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,PR={},kR={};function Cie(e){return y5.call(kR,e)?!0:y5.call(PR,e)?!1:Nie.test(e)?kR[e]=!0:(PR[e]=!0,!1)}function _ie(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Eie(e,t,r,n){if(t===null||typeof t>"u"||_ie(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Do(e,t,r,n,a,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Ui={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ui[e]=new Do(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ui[t]=new Do(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ui[e]=new Do(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ui[e]=new Do(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ui[e]=new Do(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ui[e]=new Do(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ui[e]=new Do(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ui[e]=new Do(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ui[e]=new Do(e,5,!1,e.toLowerCase(),null,!1,!1)});var $T=/[\-:]([a-z])/g;function KT(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace($T,KT);Ui[t]=new Do(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace($T,KT);Ui[t]=new Do(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace($T,KT);Ui[t]=new Do(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ui[e]=new Do(e,1,!1,e.toLowerCase(),null,!1,!1)});Ui.xlinkHref=new Do("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ui[e]=new Do(e,1,!1,e.toLowerCase(),null,!0,!0)});function qT(e,t,r,n){var a=Ui.hasOwnProperty(t)?Ui[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Eie(t,r,a,n)&&(r=null),n||a===null?Cie(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var bA=wie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fw=Symbol.for("react.element"),Pp=Symbol.for("react.portal"),kp=Symbol.for("react.fragment"),GT=Symbol.for("react.strict_mode"),b5=Symbol.for("react.profiler"),b$=Symbol.for("react.provider"),w$=Symbol.for("react.context"),zT=Symbol.for("react.forward_ref"),w5=Symbol.for("react.suspense"),N5=Symbol.for("react.suspense_list"),WT=Symbol.for("react.memo"),fh=Symbol.for("react.lazy"),N$=Symbol.for("react.offscreen"),TR=Symbol.iterator;function Rx(e){return e===null||typeof e!="object"?null:(e=TR&&e[TR]||e["@@iterator"],typeof e=="function"?e:null)}var $a=Object.assign,KI;function yv(e){if(KI===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);KI=t&&t[1]||""}return`
`+KI+e}var qI=!1;function GI(e,t){if(!e||qI)return"";qI=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),s=n.stack.split(`
`),o=a.length-1,l=s.length-1;1<=o&&0<=l&&a[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==s[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{qI=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?yv(e):""}function Sie(e){switch(e.tag){case 5:return yv(e.type);case 16:return yv("Lazy");case 13:return yv("Suspense");case 19:return yv("SuspenseList");case 0:case 2:case 15:return e=GI(e.type,!1),e;case 11:return e=GI(e.type.render,!1),e;case 1:return e=GI(e.type,!0),e;default:return""}}function C5(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case kp:return"Fragment";case Pp:return"Portal";case b5:return"Profiler";case GT:return"StrictMode";case w5:return"Suspense";case N5:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case w$:return(e.displayName||"Context")+".Consumer";case b$:return(e._context.displayName||"Context")+".Provider";case zT:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case WT:return t=e.displayName||null,t!==null?t:C5(e.type)||"Memo";case fh:t=e._payload,e=e._init;try{return C5(e(t))}catch{}}return null}function Iie(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return C5(t);case 8:return t===GT?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function tf(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function C$(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Bie(e){var t=C$(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function mw(e){e._valueTracker||(e._valueTracker=Bie(e))}function _$(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=C$(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function $N(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function _5(e,t){var r=t.checked;return $a({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function FR(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=tf(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function E$(e,t){t=t.checked,t!=null&&qT(e,"checked",t,!1)}function E5(e,t){E$(e,t);var r=tf(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?S5(e,t.type,r):t.hasOwnProperty("defaultValue")&&S5(e,t.type,tf(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function OR(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function S5(e,t,r){(t!=="number"||$N(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var bv=Array.isArray;function zp(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+tf(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function I5(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Yt(91));return $a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function DR(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Yt(92));if(bv(r)){if(1<r.length)throw Error(Yt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:tf(r)}}function S$(e,t){var r=tf(t.value),n=tf(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function RR(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function I$(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function B5(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?I$(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var pw,B$=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(pw=pw||document.createElement("div"),pw.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pw.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Sy(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Hv={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jie=["Webkit","ms","Moz","O"];Object.keys(Hv).forEach(function(e){jie.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Hv[t]=Hv[e]})});function j$(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Hv.hasOwnProperty(e)&&Hv[e]?(""+t).trim():t+"px"}function P$(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=j$(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var Pie=$a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function j5(e,t){if(t){if(Pie[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Yt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Yt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Yt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Yt(62))}}function P5(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var k5=null;function XT(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var T5=null,Wp=null,Xp=null;function LR(e){if(e=G1(e)){if(typeof T5!="function")throw Error(Yt(280));var t=e.stateNode;t&&(t=lE(t),T5(e.stateNode,e.type,t))}}function k$(e){Wp?Xp?Xp.push(e):Xp=[e]:Wp=e}function T$(){if(Wp){var e=Wp,t=Xp;if(Xp=Wp=null,LR(e),t)for(e=0;e<t.length;e++)LR(t[e])}}function F$(e,t){return e(t)}function O$(){}var zI=!1;function D$(e,t,r){if(zI)return e(t,r);zI=!0;try{return F$(e,t,r)}finally{zI=!1,(Wp!==null||Xp!==null)&&(O$(),T$())}}function Iy(e,t){var r=e.stateNode;if(r===null)return null;var n=lE(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Yt(231,t,typeof r));return r}var F5=!1;if(nA)try{var Lx={};Object.defineProperty(Lx,"passive",{get:function(){F5=!0}}),window.addEventListener("test",Lx,Lx),window.removeEventListener("test",Lx,Lx)}catch{F5=!1}function kie(e,t,r,n,a,s,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var $v=!1,KN=null,qN=!1,O5=null,Tie={onError:function(e){$v=!0,KN=e}};function Fie(e,t,r,n,a,s,o,l,c){$v=!1,KN=null,kie.apply(Tie,arguments)}function Oie(e,t,r,n,a,s,o,l,c){if(Fie.apply(this,arguments),$v){if($v){var u=KN;$v=!1,KN=null}else throw Error(Yt(198));qN||(qN=!0,O5=u)}}function x0(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function R$(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function MR(e){if(x0(e)!==e)throw Error(Yt(188))}function Die(e){var t=e.alternate;if(!t){if(t=x0(e),t===null)throw Error(Yt(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var s=a.alternate;if(s===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===r)return MR(a),e;if(s===n)return MR(a),t;s=s.sibling}throw Error(Yt(188))}if(r.return!==n.return)r=a,n=s;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=s;break}if(l===n){o=!0,n=a,r=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===r){o=!0,r=s,n=a;break}if(l===n){o=!0,n=s,r=a;break}l=l.sibling}if(!o)throw Error(Yt(189))}}if(r.alternate!==n)throw Error(Yt(190))}if(r.tag!==3)throw Error(Yt(188));return r.stateNode.current===r?e:t}function L$(e){return e=Die(e),e!==null?M$(e):null}function M$(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=M$(e);if(t!==null)return t;e=e.sibling}return null}var U$=Tl.unstable_scheduleCallback,UR=Tl.unstable_cancelCallback,Rie=Tl.unstable_shouldYield,Lie=Tl.unstable_requestPaint,ms=Tl.unstable_now,Mie=Tl.unstable_getCurrentPriorityLevel,JT=Tl.unstable_ImmediatePriority,Q$=Tl.unstable_UserBlockingPriority,GN=Tl.unstable_NormalPriority,Uie=Tl.unstable_LowPriority,V$=Tl.unstable_IdlePriority,aE=null,zu=null;function Qie(e){if(zu&&typeof zu.onCommitFiberRoot=="function")try{zu.onCommitFiberRoot(aE,e,void 0,(e.current.flags&128)===128)}catch{}}var tu=Math.clz32?Math.clz32:$ie,Vie=Math.log,Hie=Math.LN2;function $ie(e){return e>>>=0,e===0?32:31-(Vie(e)/Hie|0)|0}var gw=64,xw=4194304;function wv(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function zN(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,s=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=wv(l):(s&=o,s!==0&&(n=wv(s)))}else o=r&~a,o!==0?n=wv(o):s!==0&&(n=wv(s));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,s=t&-t,a>=s||a===16&&(s&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-tu(t),a=1<<r,n|=e[r],t&=~a;return n}function Kie(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qie(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-tu(s),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=Kie(l,t)):c<=t&&(e.expiredLanes|=l),s&=~l}}function D5(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function H$(){var e=gw;return gw<<=1,!(gw&4194240)&&(gw=64),e}function WI(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function K1(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-tu(t),e[t]=r}function Gie(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-tu(r),s=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~s}}function YT(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-tu(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Un=0;function $$(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var K$,ZT,q$,G$,z$,R5=!1,vw=[],Mh=null,Uh=null,Qh=null,By=new Map,jy=new Map,vh=[],zie="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function QR(e,t){switch(e){case"focusin":case"focusout":Mh=null;break;case"dragenter":case"dragleave":Uh=null;break;case"mouseover":case"mouseout":Qh=null;break;case"pointerover":case"pointerout":By.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":jy.delete(t.pointerId)}}function Mx(e,t,r,n,a,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[a]},t!==null&&(t=G1(t),t!==null&&ZT(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Wie(e,t,r,n,a){switch(t){case"focusin":return Mh=Mx(Mh,e,t,r,n,a),!0;case"dragenter":return Uh=Mx(Uh,e,t,r,n,a),!0;case"mouseover":return Qh=Mx(Qh,e,t,r,n,a),!0;case"pointerover":var s=a.pointerId;return By.set(s,Mx(By.get(s)||null,e,t,r,n,a)),!0;case"gotpointercapture":return s=a.pointerId,jy.set(s,Mx(jy.get(s)||null,e,t,r,n,a)),!0}return!1}function W$(e){var t=Am(e.target);if(t!==null){var r=x0(t);if(r!==null){if(t=r.tag,t===13){if(t=R$(r),t!==null){e.blockedOn=t,z$(e.priority,function(){q$(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function lN(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=L5(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);k5=n,r.target.dispatchEvent(n),k5=null}else return t=G1(r),t!==null&&ZT(t),e.blockedOn=r,!1;t.shift()}return!0}function VR(e,t,r){lN(e)&&r.delete(t)}function Xie(){R5=!1,Mh!==null&&lN(Mh)&&(Mh=null),Uh!==null&&lN(Uh)&&(Uh=null),Qh!==null&&lN(Qh)&&(Qh=null),By.forEach(VR),jy.forEach(VR)}function Ux(e,t){e.blockedOn===t&&(e.blockedOn=null,R5||(R5=!0,Tl.unstable_scheduleCallback(Tl.unstable_NormalPriority,Xie)))}function Py(e){function t(a){return Ux(a,e)}if(0<vw.length){Ux(vw[0],e);for(var r=1;r<vw.length;r++){var n=vw[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Mh!==null&&Ux(Mh,e),Uh!==null&&Ux(Uh,e),Qh!==null&&Ux(Qh,e),By.forEach(t),jy.forEach(t),r=0;r<vh.length;r++)n=vh[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<vh.length&&(r=vh[0],r.blockedOn===null);)W$(r),r.blockedOn===null&&vh.shift()}var Jp=bA.ReactCurrentBatchConfig,WN=!0;function Jie(e,t,r,n){var a=Un,s=Jp.transition;Jp.transition=null;try{Un=1,e4(e,t,r,n)}finally{Un=a,Jp.transition=s}}function Yie(e,t,r,n){var a=Un,s=Jp.transition;Jp.transition=null;try{Un=4,e4(e,t,r,n)}finally{Un=a,Jp.transition=s}}function e4(e,t,r,n){if(WN){var a=L5(e,t,r,n);if(a===null)sB(e,t,n,XN,r),QR(e,n);else if(Wie(a,e,t,r,n))n.stopPropagation();else if(QR(e,n),t&4&&-1<zie.indexOf(e)){for(;a!==null;){var s=G1(a);if(s!==null&&K$(s),s=L5(e,t,r,n),s===null&&sB(e,t,n,XN,r),s===a)break;a=s}a!==null&&n.stopPropagation()}else sB(e,t,n,null,r)}}var XN=null;function L5(e,t,r,n){if(XN=null,e=XT(n),e=Am(e),e!==null)if(t=x0(e),t===null)e=null;else if(r=t.tag,r===13){if(e=R$(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return XN=e,null}function X$(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Mie()){case JT:return 1;case Q$:return 4;case GN:case Uie:return 16;case V$:return 536870912;default:return 16}default:return 16}}var Bh=null,t4=null,cN=null;function J$(){if(cN)return cN;var e,t=t4,r=t.length,n,a="value"in Bh?Bh.value:Bh.textContent,s=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[s-n];n++);return cN=a.slice(e,1<n?1-n:void 0)}function uN(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function yw(){return!0}function HR(){return!1}function Ml(e){function t(r,n,a,s,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?yw:HR,this.isPropagationStopped=HR,this}return $a(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=yw)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=yw)},persist:function(){},isPersistent:yw}),t}var Vg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},r4=Ml(Vg),q1=$a({},Vg,{view:0,detail:0}),Zie=Ml(q1),XI,JI,Qx,sE=$a({},q1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:n4,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qx&&(Qx&&e.type==="mousemove"?(XI=e.screenX-Qx.screenX,JI=e.screenY-Qx.screenY):JI=XI=0,Qx=e),XI)},movementY:function(e){return"movementY"in e?e.movementY:JI}}),$R=Ml(sE),eoe=$a({},sE,{dataTransfer:0}),toe=Ml(eoe),roe=$a({},q1,{relatedTarget:0}),YI=Ml(roe),noe=$a({},Vg,{animationName:0,elapsedTime:0,pseudoElement:0}),aoe=Ml(noe),soe=$a({},Vg,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ioe=Ml(soe),ooe=$a({},Vg,{data:0}),KR=Ml(ooe),loe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},coe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uoe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function doe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=uoe[e])?!!t[e]:!1}function n4(){return doe}var Aoe=$a({},q1,{key:function(e){if(e.key){var t=loe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=uN(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?coe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:n4,charCode:function(e){return e.type==="keypress"?uN(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?uN(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hoe=Ml(Aoe),foe=$a({},sE,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qR=Ml(foe),moe=$a({},q1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:n4}),poe=Ml(moe),goe=$a({},Vg,{propertyName:0,elapsedTime:0,pseudoElement:0}),xoe=Ml(goe),voe=$a({},sE,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),yoe=Ml(voe),boe=[9,13,27,32],a4=nA&&"CompositionEvent"in window,Kv=null;nA&&"documentMode"in document&&(Kv=document.documentMode);var woe=nA&&"TextEvent"in window&&!Kv,Y$=nA&&(!a4||Kv&&8<Kv&&11>=Kv),GR=" ",zR=!1;function Z$(e,t){switch(e){case"keyup":return boe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eK(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Tp=!1;function Noe(e,t){switch(e){case"compositionend":return eK(t);case"keypress":return t.which!==32?null:(zR=!0,GR);case"textInput":return e=t.data,e===GR&&zR?null:e;default:return null}}function Coe(e,t){if(Tp)return e==="compositionend"||!a4&&Z$(e,t)?(e=J$(),cN=t4=Bh=null,Tp=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Y$&&t.locale!=="ko"?null:t.data;default:return null}}var _oe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function WR(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_oe[e.type]:t==="textarea"}function tK(e,t,r,n){k$(n),t=JN(t,"onChange"),0<t.length&&(r=new r4("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var qv=null,ky=null;function Eoe(e){AK(e,0)}function iE(e){var t=Dp(e);if(_$(t))return e}function Soe(e,t){if(e==="change")return t}var rK=!1;if(nA){var ZI;if(nA){var eB="oninput"in document;if(!eB){var XR=document.createElement("div");XR.setAttribute("oninput","return;"),eB=typeof XR.oninput=="function"}ZI=eB}else ZI=!1;rK=ZI&&(!document.documentMode||9<document.documentMode)}function JR(){qv&&(qv.detachEvent("onpropertychange",nK),ky=qv=null)}function nK(e){if(e.propertyName==="value"&&iE(ky)){var t=[];tK(t,ky,e,XT(e)),D$(Eoe,t)}}function Ioe(e,t,r){e==="focusin"?(JR(),qv=t,ky=r,qv.attachEvent("onpropertychange",nK)):e==="focusout"&&JR()}function Boe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return iE(ky)}function joe(e,t){if(e==="click")return iE(t)}function Poe(e,t){if(e==="input"||e==="change")return iE(t)}function koe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var lu=typeof Object.is=="function"?Object.is:koe;function Ty(e,t){if(lu(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!y5.call(t,a)||!lu(e[a],t[a]))return!1}return!0}function YR(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ZR(e,t){var r=YR(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=YR(r)}}function aK(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?aK(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function sK(){for(var e=window,t=$N();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=$N(e.document)}return t}function s4(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Toe(e){var t=sK(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&aK(r.ownerDocument.documentElement,r)){if(n!==null&&s4(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,s=Math.min(n.start,a);n=n.end===void 0?s:Math.min(n.end,a),!e.extend&&s>n&&(a=n,n=s,s=a),a=ZR(r,s);var o=ZR(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Foe=nA&&"documentMode"in document&&11>=document.documentMode,Fp=null,M5=null,Gv=null,U5=!1;function eL(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;U5||Fp==null||Fp!==$N(n)||(n=Fp,"selectionStart"in n&&s4(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Gv&&Ty(Gv,n)||(Gv=n,n=JN(M5,"onSelect"),0<n.length&&(t=new r4("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Fp)))}function bw(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Op={animationend:bw("Animation","AnimationEnd"),animationiteration:bw("Animation","AnimationIteration"),animationstart:bw("Animation","AnimationStart"),transitionend:bw("Transition","TransitionEnd")},tB={},iK={};nA&&(iK=document.createElement("div").style,"AnimationEvent"in window||(delete Op.animationend.animation,delete Op.animationiteration.animation,delete Op.animationstart.animation),"TransitionEvent"in window||delete Op.transitionend.transition);function oE(e){if(tB[e])return tB[e];if(!Op[e])return e;var t=Op[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in iK)return tB[e]=t[r];return e}var oK=oE("animationend"),lK=oE("animationiteration"),cK=oE("animationstart"),uK=oE("transitionend"),dK=new Map,tL="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yf(e,t){dK.set(e,t),g0(t,[e])}for(var rB=0;rB<tL.length;rB++){var nB=tL[rB],Ooe=nB.toLowerCase(),Doe=nB[0].toUpperCase()+nB.slice(1);yf(Ooe,"on"+Doe)}yf(oK,"onAnimationEnd");yf(lK,"onAnimationIteration");yf(cK,"onAnimationStart");yf("dblclick","onDoubleClick");yf("focusin","onFocus");yf("focusout","onBlur");yf(uK,"onTransitionEnd");dg("onMouseEnter",["mouseout","mouseover"]);dg("onMouseLeave",["mouseout","mouseover"]);dg("onPointerEnter",["pointerout","pointerover"]);dg("onPointerLeave",["pointerout","pointerover"]);g0("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));g0("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));g0("onBeforeInput",["compositionend","keypress","textInput","paste"]);g0("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));g0("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));g0("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Roe=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nv));function rL(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Oie(n,t,void 0,e),e.currentTarget=null}function AK(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&a.isPropagationStopped())break e;rL(a,l,u),s=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&a.isPropagationStopped())break e;rL(a,l,u),s=c}}}if(qN)throw e=O5,qN=!1,O5=null,e}function ha(e,t){var r=t[K5];r===void 0&&(r=t[K5]=new Set);var n=e+"__bubble";r.has(n)||(hK(t,e,2,!1),r.add(n))}function aB(e,t,r){var n=0;t&&(n|=4),hK(r,e,n,t)}var ww="_reactListening"+Math.random().toString(36).slice(2);function Fy(e){if(!e[ww]){e[ww]=!0,y$.forEach(function(r){r!=="selectionchange"&&(Roe.has(r)||aB(r,!1,e),aB(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ww]||(t[ww]=!0,aB("selectionchange",!1,t))}}function hK(e,t,r,n){switch(X$(t)){case 1:var a=Jie;break;case 4:a=Yie;break;default:a=e4}r=a.bind(null,t,r,e),a=void 0,!F5||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function sB(e,t,r,n,a){var s=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=Am(l),o===null)return;if(c=o.tag,c===5||c===6){n=s=o;continue e}l=l.parentNode}}n=n.return}D$(function(){var u=s,d=XT(r),A=[];e:{var f=dK.get(e);if(f!==void 0){var h=r4,m=e;switch(e){case"keypress":if(uN(r)===0)break e;case"keydown":case"keyup":h=hoe;break;case"focusin":m="focus",h=YI;break;case"focusout":m="blur",h=YI;break;case"beforeblur":case"afterblur":h=YI;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=$R;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=toe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=poe;break;case oK:case lK:case cK:h=aoe;break;case uK:h=xoe;break;case"scroll":h=Zie;break;case"wheel":h=yoe;break;case"copy":case"cut":case"paste":h=ioe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=qR}var p=(t&4)!==0,g=!p&&e==="scroll",x=p?f!==null?f+"Capture":null:f;p=[];for(var y=u,b;y!==null;){b=y;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,x!==null&&(_=Iy(y,x),_!=null&&p.push(Oy(y,_,b)))),g)break;y=y.return}0<p.length&&(f=new h(f,m,null,r,d),A.push({event:f,listeners:p}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",f&&r!==k5&&(m=r.relatedTarget||r.fromElement)&&(Am(m)||m[aA]))break e;if((h||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,h?(m=r.relatedTarget||r.toElement,h=u,m=m?Am(m):null,m!==null&&(g=x0(m),m!==g||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=u),h!==m)){if(p=$R,_="onMouseLeave",x="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(p=qR,_="onPointerLeave",x="onPointerEnter",y="pointer"),g=h==null?f:Dp(h),b=m==null?f:Dp(m),f=new p(_,y+"leave",h,r,d),f.target=g,f.relatedTarget=b,_=null,Am(d)===u&&(p=new p(x,y+"enter",m,r,d),p.target=b,p.relatedTarget=g,_=p),g=_,h&&m)t:{for(p=h,x=m,y=0,b=p;b;b=z0(b))y++;for(b=0,_=x;_;_=z0(_))b++;for(;0<y-b;)p=z0(p),y--;for(;0<b-y;)x=z0(x),b--;for(;y--;){if(p===x||x!==null&&p===x.alternate)break t;p=z0(p),x=z0(x)}p=null}else p=null;h!==null&&nL(A,f,h,p,!1),m!==null&&g!==null&&nL(A,g,m,p,!0)}}e:{if(f=u?Dp(u):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var T=Soe;else if(WR(f))if(rK)T=Poe;else{T=Boe;var P=Ioe}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=joe);if(T&&(T=T(e,u))){tK(A,T,r,d);break e}P&&P(e,f,u),e==="focusout"&&(P=f._wrapperState)&&P.controlled&&f.type==="number"&&S5(f,"number",f.value)}switch(P=u?Dp(u):window,e){case"focusin":(WR(P)||P.contentEditable==="true")&&(Fp=P,M5=u,Gv=null);break;case"focusout":Gv=M5=Fp=null;break;case"mousedown":U5=!0;break;case"contextmenu":case"mouseup":case"dragend":U5=!1,eL(A,r,d);break;case"selectionchange":if(Foe)break;case"keydown":case"keyup":eL(A,r,d)}var C;if(a4)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Tp?Z$(e,r)&&(S="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(S="onCompositionStart");S&&(Y$&&r.locale!=="ko"&&(Tp||S!=="onCompositionStart"?S==="onCompositionEnd"&&Tp&&(C=J$()):(Bh=d,t4="value"in Bh?Bh.value:Bh.textContent,Tp=!0)),P=JN(u,S),0<P.length&&(S=new KR(S,e,null,r,d),A.push({event:S,listeners:P}),C?S.data=C:(C=eK(r),C!==null&&(S.data=C)))),(C=woe?Noe(e,r):Coe(e,r))&&(u=JN(u,"onBeforeInput"),0<u.length&&(d=new KR("onBeforeInput","beforeinput",null,r,d),A.push({event:d,listeners:u}),d.data=C))}AK(A,t)})}function Oy(e,t,r){return{instance:e,listener:t,currentTarget:r}}function JN(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,s=a.stateNode;a.tag===5&&s!==null&&(a=s,s=Iy(e,r),s!=null&&n.unshift(Oy(e,s,a)),s=Iy(e,t),s!=null&&n.push(Oy(e,s,a))),e=e.return}return n}function z0(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function nL(e,t,r,n,a){for(var s=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=Iy(r,s),c!=null&&o.unshift(Oy(r,c,l))):a||(c=Iy(r,s),c!=null&&o.push(Oy(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Loe=/\r\n?/g,Moe=/\u0000|\uFFFD/g;function aL(e){return(typeof e=="string"?e:""+e).replace(Loe,`
`).replace(Moe,"")}function Nw(e,t,r){if(t=aL(t),aL(e)!==t&&r)throw Error(Yt(425))}function YN(){}var Q5=null,V5=null;function H5(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var $5=typeof setTimeout=="function"?setTimeout:void 0,Uoe=typeof clearTimeout=="function"?clearTimeout:void 0,sL=typeof Promise=="function"?Promise:void 0,Qoe=typeof queueMicrotask=="function"?queueMicrotask:typeof sL<"u"?function(e){return sL.resolve(null).then(e).catch(Voe)}:$5;function Voe(e){setTimeout(function(){throw e})}function iB(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),Py(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Py(t)}function Vh(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function iL(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Hg=Math.random().toString(36).slice(2),Qu="__reactFiber$"+Hg,Dy="__reactProps$"+Hg,aA="__reactContainer$"+Hg,K5="__reactEvents$"+Hg,Hoe="__reactListeners$"+Hg,$oe="__reactHandles$"+Hg;function Am(e){var t=e[Qu];if(t)return t;for(var r=e.parentNode;r;){if(t=r[aA]||r[Qu]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=iL(e);e!==null;){if(r=e[Qu])return r;e=iL(e)}return t}e=r,r=e.parentNode}return null}function G1(e){return e=e[Qu]||e[aA],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Dp(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Yt(33))}function lE(e){return e[Dy]||null}var q5=[],Rp=-1;function bf(e){return{current:e}}function ga(e){0>Rp||(e.current=q5[Rp],q5[Rp]=null,Rp--)}function la(e,t){Rp++,q5[Rp]=e.current,e.current=t}var rf={},Ao=bf(rf),Jo=bf(!1),Mm=rf;function Ag(e,t){var r=e.type.contextTypes;if(!r)return rf;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},s;for(s in r)a[s]=t[s];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Yo(e){return e=e.childContextTypes,e!=null}function ZN(){ga(Jo),ga(Ao)}function oL(e,t,r){if(Ao.current!==rf)throw Error(Yt(168));la(Ao,t),la(Jo,r)}function fK(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(Yt(108,Iie(e)||"Unknown",a));return $a({},r,n)}function eC(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||rf,Mm=Ao.current,la(Ao,e),la(Jo,Jo.current),!0}function lL(e,t,r){var n=e.stateNode;if(!n)throw Error(Yt(169));r?(e=fK(e,t,Mm),n.__reactInternalMemoizedMergedChildContext=e,ga(Jo),ga(Ao),la(Ao,e)):ga(Jo),la(Jo,r)}var kd=null,cE=!1,oB=!1;function mK(e){kd===null?kd=[e]:kd.push(e)}function Koe(e){cE=!0,mK(e)}function wf(){if(!oB&&kd!==null){oB=!0;var e=0,t=Un;try{var r=kd;for(Un=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}kd=null,cE=!1}catch(a){throw kd!==null&&(kd=kd.slice(e+1)),U$(JT,wf),a}finally{Un=t,oB=!1}}return null}var Lp=[],Mp=0,tC=null,rC=0,hc=[],fc=0,Um=null,Rd=1,Ld="";function Xf(e,t){Lp[Mp++]=rC,Lp[Mp++]=tC,tC=e,rC=t}function pK(e,t,r){hc[fc++]=Rd,hc[fc++]=Ld,hc[fc++]=Um,Um=e;var n=Rd;e=Ld;var a=32-tu(n)-1;n&=~(1<<a),r+=1;var s=32-tu(t)+a;if(30<s){var o=a-a%5;s=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Rd=1<<32-tu(t)+a|r<<a|n,Ld=s+e}else Rd=1<<s|r<<a|n,Ld=e}function i4(e){e.return!==null&&(Xf(e,1),pK(e,1,0))}function o4(e){for(;e===tC;)tC=Lp[--Mp],Lp[Mp]=null,rC=Lp[--Mp],Lp[Mp]=null;for(;e===Um;)Um=hc[--fc],hc[fc]=null,Ld=hc[--fc],hc[fc]=null,Rd=hc[--fc],hc[fc]=null}var Pl=null,Sl=null,Ea=!1,Wc=null;function gK(e,t){var r=pc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function cL(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Pl=e,Sl=Vh(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Pl=e,Sl=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Um!==null?{id:Rd,overflow:Ld}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=pc(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Pl=e,Sl=null,!0):!1;default:return!1}}function G5(e){return(e.mode&1)!==0&&(e.flags&128)===0}function z5(e){if(Ea){var t=Sl;if(t){var r=t;if(!cL(e,t)){if(G5(e))throw Error(Yt(418));t=Vh(r.nextSibling);var n=Pl;t&&cL(e,t)?gK(n,r):(e.flags=e.flags&-4097|2,Ea=!1,Pl=e)}}else{if(G5(e))throw Error(Yt(418));e.flags=e.flags&-4097|2,Ea=!1,Pl=e}}}function uL(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Pl=e}function Cw(e){if(e!==Pl)return!1;if(!Ea)return uL(e),Ea=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!H5(e.type,e.memoizedProps)),t&&(t=Sl)){if(G5(e))throw xK(),Error(Yt(418));for(;t;)gK(e,t),t=Vh(t.nextSibling)}if(uL(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Yt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Sl=Vh(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Sl=null}}else Sl=Pl?Vh(e.stateNode.nextSibling):null;return!0}function xK(){for(var e=Sl;e;)e=Vh(e.nextSibling)}function hg(){Sl=Pl=null,Ea=!1}function l4(e){Wc===null?Wc=[e]:Wc.push(e)}var qoe=bA.ReactCurrentBatchConfig;function Vx(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Yt(309));var n=r.stateNode}if(!n)throw Error(Yt(147,e));var a=n,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var l=a.refs;o===null?delete l[s]:l[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(Yt(284));if(!r._owner)throw Error(Yt(290,e))}return e}function _w(e,t){throw e=Object.prototype.toString.call(t),Error(Yt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function dL(e){var t=e._init;return t(e._payload)}function vK(e){function t(x,y){if(e){var b=x.deletions;b===null?(x.deletions=[y],x.flags|=16):b.push(y)}}function r(x,y){if(!e)return null;for(;y!==null;)t(x,y),y=y.sibling;return null}function n(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function a(x,y){return x=qh(x,y),x.index=0,x.sibling=null,x}function s(x,y,b){return x.index=b,e?(b=x.alternate,b!==null?(b=b.index,b<y?(x.flags|=2,y):b):(x.flags|=2,y)):(x.flags|=1048576,y)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,y,b,_){return y===null||y.tag!==6?(y=fB(b,x.mode,_),y.return=x,y):(y=a(y,b),y.return=x,y)}function c(x,y,b,_){var T=b.type;return T===kp?d(x,y,b.props.children,_,b.key):y!==null&&(y.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===fh&&dL(T)===y.type)?(_=a(y,b.props),_.ref=Vx(x,y,b),_.return=x,_):(_=gN(b.type,b.key,b.props,null,x.mode,_),_.ref=Vx(x,y,b),_.return=x,_)}function u(x,y,b,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=mB(b,x.mode,_),y.return=x,y):(y=a(y,b.children||[]),y.return=x,y)}function d(x,y,b,_,T){return y===null||y.tag!==7?(y=Nm(b,x.mode,_,T),y.return=x,y):(y=a(y,b),y.return=x,y)}function A(x,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=fB(""+y,x.mode,b),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case fw:return b=gN(y.type,y.key,y.props,null,x.mode,b),b.ref=Vx(x,null,y),b.return=x,b;case Pp:return y=mB(y,x.mode,b),y.return=x,y;case fh:var _=y._init;return A(x,_(y._payload),b)}if(bv(y)||Rx(y))return y=Nm(y,x.mode,b,null),y.return=x,y;_w(x,y)}return null}function f(x,y,b,_){var T=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return T!==null?null:l(x,y,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case fw:return b.key===T?c(x,y,b,_):null;case Pp:return b.key===T?u(x,y,b,_):null;case fh:return T=b._init,f(x,y,T(b._payload),_)}if(bv(b)||Rx(b))return T!==null?null:d(x,y,b,_,null);_w(x,b)}return null}function h(x,y,b,_,T){if(typeof _=="string"&&_!==""||typeof _=="number")return x=x.get(b)||null,l(y,x,""+_,T);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case fw:return x=x.get(_.key===null?b:_.key)||null,c(y,x,_,T);case Pp:return x=x.get(_.key===null?b:_.key)||null,u(y,x,_,T);case fh:var P=_._init;return h(x,y,b,P(_._payload),T)}if(bv(_)||Rx(_))return x=x.get(b)||null,d(y,x,_,T,null);_w(y,_)}return null}function m(x,y,b,_){for(var T=null,P=null,C=y,S=y=0,I=null;C!==null&&S<b.length;S++){C.index>S?(I=C,C=null):I=C.sibling;var L=f(x,C,b[S],_);if(L===null){C===null&&(C=I);break}e&&C&&L.alternate===null&&t(x,C),y=s(L,y,S),P===null?T=L:P.sibling=L,P=L,C=I}if(S===b.length)return r(x,C),Ea&&Xf(x,S),T;if(C===null){for(;S<b.length;S++)C=A(x,b[S],_),C!==null&&(y=s(C,y,S),P===null?T=C:P.sibling=C,P=C);return Ea&&Xf(x,S),T}for(C=n(x,C);S<b.length;S++)I=h(C,x,S,b[S],_),I!==null&&(e&&I.alternate!==null&&C.delete(I.key===null?S:I.key),y=s(I,y,S),P===null?T=I:P.sibling=I,P=I);return e&&C.forEach(function(E){return t(x,E)}),Ea&&Xf(x,S),T}function p(x,y,b,_){var T=Rx(b);if(typeof T!="function")throw Error(Yt(150));if(b=T.call(b),b==null)throw Error(Yt(151));for(var P=T=null,C=y,S=y=0,I=null,L=b.next();C!==null&&!L.done;S++,L=b.next()){C.index>S?(I=C,C=null):I=C.sibling;var E=f(x,C,L.value,_);if(E===null){C===null&&(C=I);break}e&&C&&E.alternate===null&&t(x,C),y=s(E,y,S),P===null?T=E:P.sibling=E,P=E,C=I}if(L.done)return r(x,C),Ea&&Xf(x,S),T;if(C===null){for(;!L.done;S++,L=b.next())L=A(x,L.value,_),L!==null&&(y=s(L,y,S),P===null?T=L:P.sibling=L,P=L);return Ea&&Xf(x,S),T}for(C=n(x,C);!L.done;S++,L=b.next())L=h(C,x,S,L.value,_),L!==null&&(e&&L.alternate!==null&&C.delete(L.key===null?S:L.key),y=s(L,y,S),P===null?T=L:P.sibling=L,P=L);return e&&C.forEach(function(j){return t(x,j)}),Ea&&Xf(x,S),T}function g(x,y,b,_){if(typeof b=="object"&&b!==null&&b.type===kp&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case fw:e:{for(var T=b.key,P=y;P!==null;){if(P.key===T){if(T=b.type,T===kp){if(P.tag===7){r(x,P.sibling),y=a(P,b.props.children),y.return=x,x=y;break e}}else if(P.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===fh&&dL(T)===P.type){r(x,P.sibling),y=a(P,b.props),y.ref=Vx(x,P,b),y.return=x,x=y;break e}r(x,P);break}else t(x,P);P=P.sibling}b.type===kp?(y=Nm(b.props.children,x.mode,_,b.key),y.return=x,x=y):(_=gN(b.type,b.key,b.props,null,x.mode,_),_.ref=Vx(x,y,b),_.return=x,x=_)}return o(x);case Pp:e:{for(P=b.key;y!==null;){if(y.key===P)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){r(x,y.sibling),y=a(y,b.children||[]),y.return=x,x=y;break e}else{r(x,y);break}else t(x,y);y=y.sibling}y=mB(b,x.mode,_),y.return=x,x=y}return o(x);case fh:return P=b._init,g(x,y,P(b._payload),_)}if(bv(b))return m(x,y,b,_);if(Rx(b))return p(x,y,b,_);_w(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(r(x,y.sibling),y=a(y,b),y.return=x,x=y):(r(x,y),y=fB(b,x.mode,_),y.return=x,x=y),o(x)):r(x,y)}return g}var fg=vK(!0),yK=vK(!1),nC=bf(null),aC=null,Up=null,c4=null;function u4(){c4=Up=aC=null}function d4(e){var t=nC.current;ga(nC),e._currentValue=t}function W5(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Yp(e,t){aC=e,c4=Up=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(zo=!0),e.firstContext=null)}function Cc(e){var t=e._currentValue;if(c4!==e)if(e={context:e,memoizedValue:t,next:null},Up===null){if(aC===null)throw Error(Yt(308));Up=e,aC.dependencies={lanes:0,firstContext:e}}else Up=Up.next=e;return t}var hm=null;function A4(e){hm===null?hm=[e]:hm.push(e)}function bK(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,A4(t)):(r.next=a.next,a.next=r),t.interleaved=r,sA(e,n)}function sA(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var mh=!1;function h4(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wK(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qd(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Hh(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,pn&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,sA(e,r)}return a=n.interleaved,a===null?(t.next=t,A4(n)):(t.next=a.next,a.next=t),n.interleaved=t,sA(e,r)}function dN(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,YT(e,r)}}function AL(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?a=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?a=s=t:s=s.next=t}else a=s=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function sC(e,t,r,n){var a=e.updateQueue;mh=!1;var s=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(s!==null){var A=a.baseState;o=0,d=u=c=null,l=s;do{var f=l.lane,h=l.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=e,p=l;switch(f=t,h=r,p.tag){case 1:if(m=p.payload,typeof m=="function"){A=m.call(h,A,f);break e}A=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=p.payload,f=typeof m=="function"?m.call(h,A,f):m,f==null)break e;A=$a({},A,f);break e;case 2:mh=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=a.effects,f===null?a.effects=[l]:f.push(l))}else h={eventTime:h,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=h,c=A):d=d.next=h,o|=f;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;f=l,l=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(!0);if(d===null&&(c=A),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else s===null&&(a.shared.lanes=0);Vm|=o,e.lanes=o,e.memoizedState=A}}function hL(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(Yt(191,a));a.call(n)}}}var z1={},Wu=bf(z1),Ry=bf(z1),Ly=bf(z1);function fm(e){if(e===z1)throw Error(Yt(174));return e}function f4(e,t){switch(la(Ly,t),la(Ry,e),la(Wu,z1),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:B5(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=B5(t,e)}ga(Wu),la(Wu,t)}function mg(){ga(Wu),ga(Ry),ga(Ly)}function NK(e){fm(Ly.current);var t=fm(Wu.current),r=B5(t,e.type);t!==r&&(la(Ry,e),la(Wu,r))}function m4(e){Ry.current===e&&(ga(Wu),ga(Ry))}var Ua=bf(0);function iC(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lB=[];function p4(){for(var e=0;e<lB.length;e++)lB[e]._workInProgressVersionPrimary=null;lB.length=0}var AN=bA.ReactCurrentDispatcher,cB=bA.ReactCurrentBatchConfig,Qm=0,Ha=null,Ls=null,li=null,oC=!1,zv=!1,My=0,Goe=0;function Ki(){throw Error(Yt(321))}function g4(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!lu(e[r],t[r]))return!1;return!0}function x4(e,t,r,n,a,s){if(Qm=s,Ha=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,AN.current=e===null||e.memoizedState===null?Joe:Yoe,e=r(n,a),zv){s=0;do{if(zv=!1,My=0,25<=s)throw Error(Yt(301));s+=1,li=Ls=null,t.updateQueue=null,AN.current=Zoe,e=r(n,a)}while(zv)}if(AN.current=lC,t=Ls!==null&&Ls.next!==null,Qm=0,li=Ls=Ha=null,oC=!1,t)throw Error(Yt(300));return e}function v4(){var e=My!==0;return My=0,e}function Uu(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return li===null?Ha.memoizedState=li=e:li=li.next=e,li}function _c(){if(Ls===null){var e=Ha.alternate;e=e!==null?e.memoizedState:null}else e=Ls.next;var t=li===null?Ha.memoizedState:li.next;if(t!==null)li=t,Ls=e;else{if(e===null)throw Error(Yt(310));Ls=e,e={memoizedState:Ls.memoizedState,baseState:Ls.baseState,baseQueue:Ls.baseQueue,queue:Ls.queue,next:null},li===null?Ha.memoizedState=li=e:li=li.next=e}return li}function Uy(e,t){return typeof t=="function"?t(e):t}function uB(e){var t=_c(),r=t.queue;if(r===null)throw Error(Yt(311));r.lastRenderedReducer=e;var n=Ls,a=n.baseQueue,s=r.pending;if(s!==null){if(a!==null){var o=a.next;a.next=s.next,s.next=o}n.baseQueue=a=s,r.pending=null}if(a!==null){s=a.next,n=n.baseState;var l=o=null,c=null,u=s;do{var d=u.lane;if((Qm&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var A={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=A,o=n):c=c.next=A,Ha.lanes|=d,Vm|=d}u=u.next}while(u!==null&&u!==s);c===null?o=n:c.next=l,lu(n,t.memoizedState)||(zo=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do s=a.lane,Ha.lanes|=s,Vm|=s,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function dB(e){var t=_c(),r=t.queue;if(r===null)throw Error(Yt(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,s=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do s=e(s,o.action),o=o.next;while(o!==a);lu(s,t.memoizedState)||(zo=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function CK(){}function _K(e,t){var r=Ha,n=_c(),a=t(),s=!lu(n.memoizedState,a);if(s&&(n.memoizedState=a,zo=!0),n=n.queue,y4(IK.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||li!==null&&li.memoizedState.tag&1){if(r.flags|=2048,Qy(9,SK.bind(null,r,n,a,t),void 0,null),di===null)throw Error(Yt(349));Qm&30||EK(r,t,a)}return a}function EK(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ha.updateQueue,t===null?(t={lastEffect:null,stores:null},Ha.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function SK(e,t,r,n){t.value=r,t.getSnapshot=n,BK(t)&&jK(e)}function IK(e,t,r){return r(function(){BK(t)&&jK(e)})}function BK(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!lu(e,r)}catch{return!0}}function jK(e){var t=sA(e,1);t!==null&&ru(t,e,1,-1)}function fL(e){var t=Uu();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uy,lastRenderedState:e},t.queue=e,e=e.dispatch=Xoe.bind(null,Ha,e),[t.memoizedState,e]}function Qy(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Ha.updateQueue,t===null?(t={lastEffect:null,stores:null},Ha.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function PK(){return _c().memoizedState}function hN(e,t,r,n){var a=Uu();Ha.flags|=e,a.memoizedState=Qy(1|t,r,void 0,n===void 0?null:n)}function uE(e,t,r,n){var a=_c();n=n===void 0?null:n;var s=void 0;if(Ls!==null){var o=Ls.memoizedState;if(s=o.destroy,n!==null&&g4(n,o.deps)){a.memoizedState=Qy(t,r,s,n);return}}Ha.flags|=e,a.memoizedState=Qy(1|t,r,s,n)}function mL(e,t){return hN(8390656,8,e,t)}function y4(e,t){return uE(2048,8,e,t)}function kK(e,t){return uE(4,2,e,t)}function TK(e,t){return uE(4,4,e,t)}function FK(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function OK(e,t,r){return r=r!=null?r.concat([e]):null,uE(4,4,FK.bind(null,t,e),r)}function b4(){}function DK(e,t){var r=_c();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&g4(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function RK(e,t){var r=_c();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&g4(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function LK(e,t,r){return Qm&21?(lu(r,t)||(r=H$(),Ha.lanes|=r,Vm|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,zo=!0),e.memoizedState=r)}function zoe(e,t){var r=Un;Un=r!==0&&4>r?r:4,e(!0);var n=cB.transition;cB.transition={};try{e(!1),t()}finally{Un=r,cB.transition=n}}function MK(){return _c().memoizedState}function Woe(e,t,r){var n=Kh(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},UK(e))QK(t,r);else if(r=bK(e,t,r,n),r!==null){var a=jo();ru(r,e,n,a),VK(r,t,n)}}function Xoe(e,t,r){var n=Kh(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(UK(e))QK(t,a);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,l=s(o,r);if(a.hasEagerState=!0,a.eagerState=l,lu(l,o)){var c=t.interleaved;c===null?(a.next=a,A4(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=bK(e,t,a,n),r!==null&&(a=jo(),ru(r,e,n,a),VK(r,t,n))}}function UK(e){var t=e.alternate;return e===Ha||t!==null&&t===Ha}function QK(e,t){zv=oC=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function VK(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,YT(e,r)}}var lC={readContext:Cc,useCallback:Ki,useContext:Ki,useEffect:Ki,useImperativeHandle:Ki,useInsertionEffect:Ki,useLayoutEffect:Ki,useMemo:Ki,useReducer:Ki,useRef:Ki,useState:Ki,useDebugValue:Ki,useDeferredValue:Ki,useTransition:Ki,useMutableSource:Ki,useSyncExternalStore:Ki,useId:Ki,unstable_isNewReconciler:!1},Joe={readContext:Cc,useCallback:function(e,t){return Uu().memoizedState=[e,t===void 0?null:t],e},useContext:Cc,useEffect:mL,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,hN(4194308,4,FK.bind(null,t,e),r)},useLayoutEffect:function(e,t){return hN(4194308,4,e,t)},useInsertionEffect:function(e,t){return hN(4,2,e,t)},useMemo:function(e,t){var r=Uu();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Uu();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Woe.bind(null,Ha,e),[n.memoizedState,e]},useRef:function(e){var t=Uu();return e={current:e},t.memoizedState=e},useState:fL,useDebugValue:b4,useDeferredValue:function(e){return Uu().memoizedState=e},useTransition:function(){var e=fL(!1),t=e[0];return e=zoe.bind(null,e[1]),Uu().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Ha,a=Uu();if(Ea){if(r===void 0)throw Error(Yt(407));r=r()}else{if(r=t(),di===null)throw Error(Yt(349));Qm&30||EK(n,t,r)}a.memoizedState=r;var s={value:r,getSnapshot:t};return a.queue=s,mL(IK.bind(null,n,s,e),[e]),n.flags|=2048,Qy(9,SK.bind(null,n,s,r,t),void 0,null),r},useId:function(){var e=Uu(),t=di.identifierPrefix;if(Ea){var r=Ld,n=Rd;r=(n&~(1<<32-tu(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=My++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Goe++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Yoe={readContext:Cc,useCallback:DK,useContext:Cc,useEffect:y4,useImperativeHandle:OK,useInsertionEffect:kK,useLayoutEffect:TK,useMemo:RK,useReducer:uB,useRef:PK,useState:function(){return uB(Uy)},useDebugValue:b4,useDeferredValue:function(e){var t=_c();return LK(t,Ls.memoizedState,e)},useTransition:function(){var e=uB(Uy)[0],t=_c().memoizedState;return[e,t]},useMutableSource:CK,useSyncExternalStore:_K,useId:MK,unstable_isNewReconciler:!1},Zoe={readContext:Cc,useCallback:DK,useContext:Cc,useEffect:y4,useImperativeHandle:OK,useInsertionEffect:kK,useLayoutEffect:TK,useMemo:RK,useReducer:dB,useRef:PK,useState:function(){return dB(Uy)},useDebugValue:b4,useDeferredValue:function(e){var t=_c();return Ls===null?t.memoizedState=e:LK(t,Ls.memoizedState,e)},useTransition:function(){var e=dB(Uy)[0],t=_c().memoizedState;return[e,t]},useMutableSource:CK,useSyncExternalStore:_K,useId:MK,unstable_isNewReconciler:!1};function Gc(e,t){if(e&&e.defaultProps){t=$a({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function X5(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:$a({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var dE={isMounted:function(e){return(e=e._reactInternals)?x0(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=jo(),a=Kh(e),s=qd(n,a);s.payload=t,r!=null&&(s.callback=r),t=Hh(e,s,a),t!==null&&(ru(t,e,a,n),dN(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=jo(),a=Kh(e),s=qd(n,a);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=Hh(e,s,a),t!==null&&(ru(t,e,a,n),dN(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=jo(),n=Kh(e),a=qd(r,n);a.tag=2,t!=null&&(a.callback=t),t=Hh(e,a,n),t!==null&&(ru(t,e,n,r),dN(t,e,n))}};function pL(e,t,r,n,a,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,s,o):t.prototype&&t.prototype.isPureReactComponent?!Ty(r,n)||!Ty(a,s):!0}function HK(e,t,r){var n=!1,a=rf,s=t.contextType;return typeof s=="object"&&s!==null?s=Cc(s):(a=Yo(t)?Mm:Ao.current,n=t.contextTypes,s=(n=n!=null)?Ag(e,a):rf),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=dE,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function gL(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&dE.enqueueReplaceState(t,t.state,null)}function J5(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},h4(e);var s=t.contextType;typeof s=="object"&&s!==null?a.context=Cc(s):(s=Yo(t)?Mm:Ao.current,a.context=Ag(e,s)),a.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(X5(e,t,s,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&dE.enqueueReplaceState(a,a.state,null),sC(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function pg(e,t){try{var r="",n=t;do r+=Sie(n),n=n.return;while(n);var a=r}catch(s){a=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:a,digest:null}}function AB(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Y5(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var ele=typeof WeakMap=="function"?WeakMap:Map;function $K(e,t,r){r=qd(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){uC||(uC=!0,lP=n),Y5(e,t)},r}function KK(e,t,r){r=qd(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){Y5(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){Y5(e,t),typeof n!="function"&&($h===null?$h=new Set([this]):$h.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function xL(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new ele;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=fle.bind(null,e,t,r),t.then(e,e))}function vL(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function yL(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=qd(-1,1),t.tag=2,Hh(r,t,1))),r.lanes|=1),e)}var tle=bA.ReactCurrentOwner,zo=!1;function Co(e,t,r,n){t.child=e===null?yK(t,null,r,n):fg(t,e.child,r,n)}function bL(e,t,r,n,a){r=r.render;var s=t.ref;return Yp(t,a),n=x4(e,t,r,n,s,a),r=v4(),e!==null&&!zo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,iA(e,t,a)):(Ea&&r&&i4(t),t.flags|=1,Co(e,t,n,a),t.child)}function wL(e,t,r,n,a){if(e===null){var s=r.type;return typeof s=="function"&&!B4(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,qK(e,t,s,n,a)):(e=gN(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&a)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:Ty,r(o,n)&&e.ref===t.ref)return iA(e,t,a)}return t.flags|=1,e=qh(s,n),e.ref=t.ref,e.return=t,t.child=e}function qK(e,t,r,n,a){if(e!==null){var s=e.memoizedProps;if(Ty(s,n)&&e.ref===t.ref)if(zo=!1,t.pendingProps=n=s,(e.lanes&a)!==0)e.flags&131072&&(zo=!0);else return t.lanes=e.lanes,iA(e,t,a)}return Z5(e,t,r,n,a)}function GK(e,t,r){var n=t.pendingProps,a=n.children,s=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},la(Vp,yl),yl|=r;else{if(!(r&1073741824))return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,la(Vp,yl),yl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,la(Vp,yl),yl|=n}else s!==null?(n=s.baseLanes|r,t.memoizedState=null):n=r,la(Vp,yl),yl|=n;return Co(e,t,a,r),t.child}function zK(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Z5(e,t,r,n,a){var s=Yo(r)?Mm:Ao.current;return s=Ag(t,s),Yp(t,a),r=x4(e,t,r,n,s,a),n=v4(),e!==null&&!zo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,iA(e,t,a)):(Ea&&n&&i4(t),t.flags|=1,Co(e,t,r,a),t.child)}function NL(e,t,r,n,a){if(Yo(r)){var s=!0;eC(t)}else s=!1;if(Yp(t,a),t.stateNode===null)fN(e,t),HK(t,r,n),J5(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Cc(u):(u=Yo(r)?Mm:Ao.current,u=Ag(t,u));var d=r.getDerivedStateFromProps,A=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";A||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&gL(t,o,n,u),mh=!1;var f=t.memoizedState;o.state=f,sC(t,n,o,a),c=t.memoizedState,l!==n||f!==c||Jo.current||mh?(typeof d=="function"&&(X5(t,r,d,n),c=t.memoizedState),(l=mh||pL(t,r,l,n,f,c,u))?(A||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,wK(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Gc(t.type,l),o.props=u,A=t.pendingProps,f=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Cc(c):(c=Yo(r)?Mm:Ao.current,c=Ag(t,c));var h=r.getDerivedStateFromProps;(d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==A||f!==c)&&gL(t,o,n,c),mh=!1,f=t.memoizedState,o.state=f,sC(t,n,o,a);var m=t.memoizedState;l!==A||f!==m||Jo.current||mh?(typeof h=="function"&&(X5(t,r,h,n),m=t.memoizedState),(u=mh||pL(t,r,u,n,f,m,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=m),o.props=n,o.state=m,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return eP(e,t,r,n,s,a)}function eP(e,t,r,n,a,s){zK(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&lL(t,r,!1),iA(e,t,s);n=t.stateNode,tle.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=fg(t,e.child,null,s),t.child=fg(t,null,l,s)):Co(e,t,l,s),t.memoizedState=n.state,a&&lL(t,r,!0),t.child}function WK(e){var t=e.stateNode;t.pendingContext?oL(e,t.pendingContext,t.pendingContext!==t.context):t.context&&oL(e,t.context,!1),f4(e,t.containerInfo)}function CL(e,t,r,n,a){return hg(),l4(a),t.flags|=256,Co(e,t,r,n),t.child}var tP={dehydrated:null,treeContext:null,retryLane:0};function rP(e){return{baseLanes:e,cachePool:null,transitions:null}}function XK(e,t,r){var n=t.pendingProps,a=Ua.current,s=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),la(Ua,a&1),e===null)return z5(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,s?(n=t.mode,s=t.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=fE(o,n,0,null),e=Nm(e,n,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=rP(r),t.memoizedState=tP,e):w4(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return rle(e,t,o,n,l,a,r);if(s){s=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=qh(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?s=qh(l,s):(s=Nm(s,o,r,null),s.flags|=2),s.return=t,n.return=t,n.sibling=s,t.child=n,n=s,s=t.child,o=e.child.memoizedState,o=o===null?rP(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~r,t.memoizedState=tP,n}return s=e.child,e=s.sibling,n=qh(s,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function w4(e,t){return t=fE({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ew(e,t,r,n){return n!==null&&l4(n),fg(t,e.child,null,r),e=w4(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function rle(e,t,r,n,a,s,o){if(r)return t.flags&256?(t.flags&=-257,n=AB(Error(Yt(422))),Ew(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=n.fallback,a=t.mode,n=fE({mode:"visible",children:n.children},a,0,null),s=Nm(s,a,o,null),s.flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,t.mode&1&&fg(t,e.child,null,o),t.child.memoizedState=rP(o),t.memoizedState=tP,s);if(!(t.mode&1))return Ew(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,s=Error(Yt(419)),n=AB(s,n,void 0),Ew(e,t,o,n)}if(l=(o&e.childLanes)!==0,zo||l){if(n=di,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==s.retryLane&&(s.retryLane=a,sA(e,a),ru(n,e,a,-1))}return I4(),n=AB(Error(Yt(421))),Ew(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=mle.bind(null,e),a._reactRetry=t,null):(e=s.treeContext,Sl=Vh(a.nextSibling),Pl=t,Ea=!0,Wc=null,e!==null&&(hc[fc++]=Rd,hc[fc++]=Ld,hc[fc++]=Um,Rd=e.id,Ld=e.overflow,Um=t),t=w4(t,n.children),t.flags|=4096,t)}function _L(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),W5(e.return,t,r)}function hB(e,t,r,n,a){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=a)}function JK(e,t,r){var n=t.pendingProps,a=n.revealOrder,s=n.tail;if(Co(e,t,n.children,r),n=Ua.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_L(e,r,t);else if(e.tag===19)_L(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(la(Ua,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&iC(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),hB(t,!1,a,r,s);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&iC(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}hB(t,!0,r,null,s);break;case"together":hB(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function fN(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function iA(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Vm|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Yt(153));if(t.child!==null){for(e=t.child,r=qh(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=qh(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function nle(e,t,r){switch(t.tag){case 3:WK(t),hg();break;case 5:NK(t);break;case 1:Yo(t.type)&&eC(t);break;case 4:f4(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;la(nC,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(la(Ua,Ua.current&1),t.flags|=128,null):r&t.child.childLanes?XK(e,t,r):(la(Ua,Ua.current&1),e=iA(e,t,r),e!==null?e.sibling:null);la(Ua,Ua.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return JK(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),la(Ua,Ua.current),n)break;return null;case 22:case 23:return t.lanes=0,GK(e,t,r)}return iA(e,t,r)}var YK,nP,ZK,eq;YK=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};nP=function(){};ZK=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,fm(Wu.current);var s=null;switch(r){case"input":a=_5(e,a),n=_5(e,n),s=[];break;case"select":a=$a({},a,{value:void 0}),n=$a({},n,{value:void 0}),s=[];break;case"textarea":a=I5(e,a),n=I5(e,n),s=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=YN)}j5(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ey.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var c=n[u];if(l=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(s||(s=[]),s.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ey.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ha("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}r&&(s=s||[]).push("style",r);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};eq=function(e,t,r,n){r!==n&&(t.flags|=4)};function Hx(e,t){if(!Ea)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function qi(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function ale(e,t,r){var n=t.pendingProps;switch(o4(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qi(t),null;case 1:return Yo(t.type)&&ZN(),qi(t),null;case 3:return n=t.stateNode,mg(),ga(Jo),ga(Ao),p4(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Cw(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Wc!==null&&(dP(Wc),Wc=null))),nP(e,t),qi(t),null;case 5:m4(t);var a=fm(Ly.current);if(r=t.type,e!==null&&t.stateNode!=null)ZK(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Yt(166));return qi(t),null}if(e=fm(Wu.current),Cw(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[Qu]=t,n[Dy]=s,e=(t.mode&1)!==0,r){case"dialog":ha("cancel",n),ha("close",n);break;case"iframe":case"object":case"embed":ha("load",n);break;case"video":case"audio":for(a=0;a<Nv.length;a++)ha(Nv[a],n);break;case"source":ha("error",n);break;case"img":case"image":case"link":ha("error",n),ha("load",n);break;case"details":ha("toggle",n);break;case"input":FR(n,s),ha("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},ha("invalid",n);break;case"textarea":DR(n,s),ha("invalid",n)}j5(r,s),a=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?n.textContent!==l&&(s.suppressHydrationWarning!==!0&&Nw(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Nw(n.textContent,l,e),a=["children",""+l]):Ey.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ha("scroll",n)}switch(r){case"input":mw(n),OR(n,s,!0);break;case"textarea":mw(n),RR(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=YN)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=I$(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Qu]=t,e[Dy]=n,YK(e,t,!1,!1),t.stateNode=e;e:{switch(o=P5(r,n),r){case"dialog":ha("cancel",e),ha("close",e),a=n;break;case"iframe":case"object":case"embed":ha("load",e),a=n;break;case"video":case"audio":for(a=0;a<Nv.length;a++)ha(Nv[a],e);a=n;break;case"source":ha("error",e),a=n;break;case"img":case"image":case"link":ha("error",e),ha("load",e),a=n;break;case"details":ha("toggle",e),a=n;break;case"input":FR(e,n),a=_5(e,n),ha("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=$a({},n,{value:void 0}),ha("invalid",e);break;case"textarea":DR(e,n),a=I5(e,n),ha("invalid",e);break;default:a=n}j5(r,a),l=a;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?P$(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&B$(e,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Sy(e,c):typeof c=="number"&&Sy(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ey.hasOwnProperty(s)?c!=null&&s==="onScroll"&&ha("scroll",e):c!=null&&qT(e,s,c,o))}switch(r){case"input":mw(e),OR(e,n,!1);break;case"textarea":mw(e),RR(e);break;case"option":n.value!=null&&e.setAttribute("value",""+tf(n.value));break;case"select":e.multiple=!!n.multiple,s=n.value,s!=null?zp(e,!!n.multiple,s,!1):n.defaultValue!=null&&zp(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=YN)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return qi(t),null;case 6:if(e&&t.stateNode!=null)eq(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Yt(166));if(r=fm(Ly.current),fm(Wu.current),Cw(t)){if(n=t.stateNode,r=t.memoizedProps,n[Qu]=t,(s=n.nodeValue!==r)&&(e=Pl,e!==null))switch(e.tag){case 3:Nw(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Nw(n.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Qu]=t,t.stateNode=n}return qi(t),null;case 13:if(ga(Ua),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ea&&Sl!==null&&t.mode&1&&!(t.flags&128))xK(),hg(),t.flags|=98560,s=!1;else if(s=Cw(t),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(Yt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Yt(317));s[Qu]=t}else hg(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;qi(t),s=!1}else Wc!==null&&(dP(Wc),Wc=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Ua.current&1?$s===0&&($s=3):I4())),t.updateQueue!==null&&(t.flags|=4),qi(t),null);case 4:return mg(),nP(e,t),e===null&&Fy(t.stateNode.containerInfo),qi(t),null;case 10:return d4(t.type._context),qi(t),null;case 17:return Yo(t.type)&&ZN(),qi(t),null;case 19:if(ga(Ua),s=t.memoizedState,s===null)return qi(t),null;if(n=(t.flags&128)!==0,o=s.rendering,o===null)if(n)Hx(s,!1);else{if($s!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=iC(e),o!==null){for(t.flags|=128,Hx(s,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)s=r,e=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return la(Ua,Ua.current&1|2),t.child}e=e.sibling}s.tail!==null&&ms()>gg&&(t.flags|=128,n=!0,Hx(s,!1),t.lanes=4194304)}else{if(!n)if(e=iC(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Hx(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ea)return qi(t),null}else 2*ms()-s.renderingStartTime>gg&&r!==1073741824&&(t.flags|=128,n=!0,Hx(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(r=s.last,r!==null?r.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ms(),t.sibling=null,r=Ua.current,la(Ua,n?r&1|2:r&1),t):(qi(t),null);case 22:case 23:return S4(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?yl&1073741824&&(qi(t),t.subtreeFlags&6&&(t.flags|=8192)):qi(t),null;case 24:return null;case 25:return null}throw Error(Yt(156,t.tag))}function sle(e,t){switch(o4(t),t.tag){case 1:return Yo(t.type)&&ZN(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return mg(),ga(Jo),ga(Ao),p4(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return m4(t),null;case 13:if(ga(Ua),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Yt(340));hg()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ga(Ua),null;case 4:return mg(),null;case 10:return d4(t.type._context),null;case 22:case 23:return S4(),null;case 24:return null;default:return null}}var Sw=!1,so=!1,ile=typeof WeakSet=="function"?WeakSet:Set,fr=null;function Qp(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){es(e,t,n)}else r.current=null}function aP(e,t,r){try{r()}catch(n){es(e,t,n)}}var EL=!1;function ole(e,t){if(Q5=WN,e=sK(),s4(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,A=e,f=null;t:for(;;){for(var h;A!==r||a!==0&&A.nodeType!==3||(l=o+a),A!==s||n!==0&&A.nodeType!==3||(c=o+n),A.nodeType===3&&(o+=A.nodeValue.length),(h=A.firstChild)!==null;)f=A,A=h;for(;;){if(A===e)break t;if(f===r&&++u===a&&(l=o),f===s&&++d===n&&(c=o),(h=A.nextSibling)!==null)break;A=f,f=A.parentNode}A=h}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(V5={focusedElem:e,selectionRange:r},WN=!1,fr=t;fr!==null;)if(t=fr,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,fr=e;else for(;fr!==null;){t=fr;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var p=m.memoizedProps,g=m.memoizedState,x=t.stateNode,y=x.getSnapshotBeforeUpdate(t.elementType===t.type?p:Gc(t.type,p),g);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Yt(163))}}catch(_){es(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,fr=e;break}fr=t.return}return m=EL,EL=!1,m}function Wv(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,s!==void 0&&aP(t,r,s)}a=a.next}while(a!==n)}}function AE(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function sP(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function tq(e){var t=e.alternate;t!==null&&(e.alternate=null,tq(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Qu],delete t[Dy],delete t[K5],delete t[Hoe],delete t[$oe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rq(e){return e.tag===5||e.tag===3||e.tag===4}function SL(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||rq(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function iP(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=YN));else if(n!==4&&(e=e.child,e!==null))for(iP(e,t,r),e=e.sibling;e!==null;)iP(e,t,r),e=e.sibling}function oP(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(oP(e,t,r),e=e.sibling;e!==null;)oP(e,t,r),e=e.sibling}var Si=null,zc=!1;function eh(e,t,r){for(r=r.child;r!==null;)nq(e,t,r),r=r.sibling}function nq(e,t,r){if(zu&&typeof zu.onCommitFiberUnmount=="function")try{zu.onCommitFiberUnmount(aE,r)}catch{}switch(r.tag){case 5:so||Qp(r,t);case 6:var n=Si,a=zc;Si=null,eh(e,t,r),Si=n,zc=a,Si!==null&&(zc?(e=Si,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Si.removeChild(r.stateNode));break;case 18:Si!==null&&(zc?(e=Si,r=r.stateNode,e.nodeType===8?iB(e.parentNode,r):e.nodeType===1&&iB(e,r),Py(e)):iB(Si,r.stateNode));break;case 4:n=Si,a=zc,Si=r.stateNode.containerInfo,zc=!0,eh(e,t,r),Si=n,zc=a;break;case 0:case 11:case 14:case 15:if(!so&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var s=a,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&aP(r,t,o),a=a.next}while(a!==n)}eh(e,t,r);break;case 1:if(!so&&(Qp(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){es(r,t,l)}eh(e,t,r);break;case 21:eh(e,t,r);break;case 22:r.mode&1?(so=(n=so)||r.memoizedState!==null,eh(e,t,r),so=n):eh(e,t,r);break;default:eh(e,t,r)}}function IL(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new ile),t.forEach(function(n){var a=ple.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Qc(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var s=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Si=l.stateNode,zc=!1;break e;case 3:Si=l.stateNode.containerInfo,zc=!0;break e;case 4:Si=l.stateNode.containerInfo,zc=!0;break e}l=l.return}if(Si===null)throw Error(Yt(160));nq(s,o,a),Si=null,zc=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){es(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)aq(t,e),t=t.sibling}function aq(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Qc(t,e),Pu(e),n&4){try{Wv(3,e,e.return),AE(3,e)}catch(p){es(e,e.return,p)}try{Wv(5,e,e.return)}catch(p){es(e,e.return,p)}}break;case 1:Qc(t,e),Pu(e),n&512&&r!==null&&Qp(r,r.return);break;case 5:if(Qc(t,e),Pu(e),n&512&&r!==null&&Qp(r,r.return),e.flags&32){var a=e.stateNode;try{Sy(a,"")}catch(p){es(e,e.return,p)}}if(n&4&&(a=e.stateNode,a!=null)){var s=e.memoizedProps,o=r!==null?r.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&E$(a,s),P5(l,o);var u=P5(l,s);for(o=0;o<c.length;o+=2){var d=c[o],A=c[o+1];d==="style"?P$(a,A):d==="dangerouslySetInnerHTML"?B$(a,A):d==="children"?Sy(a,A):qT(a,d,A,u)}switch(l){case"input":E5(a,s);break;case"textarea":S$(a,s);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?zp(a,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?zp(a,!!s.multiple,s.defaultValue,!0):zp(a,!!s.multiple,s.multiple?[]:"",!1))}a[Dy]=s}catch(p){es(e,e.return,p)}}break;case 6:if(Qc(t,e),Pu(e),n&4){if(e.stateNode===null)throw Error(Yt(162));a=e.stateNode,s=e.memoizedProps;try{a.nodeValue=s}catch(p){es(e,e.return,p)}}break;case 3:if(Qc(t,e),Pu(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Py(t.containerInfo)}catch(p){es(e,e.return,p)}break;case 4:Qc(t,e),Pu(e);break;case 13:Qc(t,e),Pu(e),a=e.child,a.flags&8192&&(s=a.memoizedState!==null,a.stateNode.isHidden=s,!s||a.alternate!==null&&a.alternate.memoizedState!==null||(_4=ms())),n&4&&IL(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(so=(u=so)||d,Qc(t,e),so=u):Qc(t,e),Pu(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(fr=e,d=e.child;d!==null;){for(A=fr=d;fr!==null;){switch(f=fr,h=f.child,f.tag){case 0:case 11:case 14:case 15:Wv(4,f,f.return);break;case 1:Qp(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(p){es(n,r,p)}}break;case 5:Qp(f,f.return);break;case 22:if(f.memoizedState!==null){jL(A);continue}}h!==null?(h.return=f,fr=h):jL(A)}d=d.sibling}e:for(d=null,A=e;;){if(A.tag===5){if(d===null){d=A;try{a=A.stateNode,u?(s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=A.stateNode,c=A.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=j$("display",o))}catch(p){es(e,e.return,p)}}}else if(A.tag===6){if(d===null)try{A.stateNode.nodeValue=u?"":A.memoizedProps}catch(p){es(e,e.return,p)}}else if((A.tag!==22&&A.tag!==23||A.memoizedState===null||A===e)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===e)break e;for(;A.sibling===null;){if(A.return===null||A.return===e)break e;d===A&&(d=null),A=A.return}d===A&&(d=null),A.sibling.return=A.return,A=A.sibling}}break;case 19:Qc(t,e),Pu(e),n&4&&IL(e);break;case 21:break;default:Qc(t,e),Pu(e)}}function Pu(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(rq(r)){var n=r;break e}r=r.return}throw Error(Yt(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Sy(a,""),n.flags&=-33);var s=SL(e);oP(e,s,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=SL(e);iP(e,l,o);break;default:throw Error(Yt(161))}}catch(c){es(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function lle(e,t,r){fr=e,sq(e)}function sq(e,t,r){for(var n=(e.mode&1)!==0;fr!==null;){var a=fr,s=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Sw;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||so;l=Sw;var u=so;if(Sw=o,(so=c)&&!u)for(fr=a;fr!==null;)o=fr,c=o.child,o.tag===22&&o.memoizedState!==null?PL(a):c!==null?(c.return=o,fr=c):PL(a);for(;s!==null;)fr=s,sq(s),s=s.sibling;fr=a,Sw=l,so=u}BL(e)}else a.subtreeFlags&8772&&s!==null?(s.return=a,fr=s):BL(e)}}function BL(e){for(;fr!==null;){var t=fr;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:so||AE(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!so)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Gc(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&hL(t,s,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}hL(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var A=d.dehydrated;A!==null&&Py(A)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Yt(163))}so||t.flags&512&&sP(t)}catch(f){es(t,t.return,f)}}if(t===e){fr=null;break}if(r=t.sibling,r!==null){r.return=t.return,fr=r;break}fr=t.return}}function jL(e){for(;fr!==null;){var t=fr;if(t===e){fr=null;break}var r=t.sibling;if(r!==null){r.return=t.return,fr=r;break}fr=t.return}}function PL(e){for(;fr!==null;){var t=fr;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{AE(4,t)}catch(c){es(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){es(t,a,c)}}var s=t.return;try{sP(t)}catch(c){es(t,s,c)}break;case 5:var o=t.return;try{sP(t)}catch(c){es(t,o,c)}}}catch(c){es(t,t.return,c)}if(t===e){fr=null;break}var l=t.sibling;if(l!==null){l.return=t.return,fr=l;break}fr=t.return}}var cle=Math.ceil,cC=bA.ReactCurrentDispatcher,N4=bA.ReactCurrentOwner,bc=bA.ReactCurrentBatchConfig,pn=0,di=null,Is=null,Mi=0,yl=0,Vp=bf(0),$s=0,Vy=null,Vm=0,hE=0,C4=0,Xv=null,Go=null,_4=0,gg=1/0,Pd=null,uC=!1,lP=null,$h=null,Iw=!1,jh=null,dC=0,Jv=0,cP=null,mN=-1,pN=0;function jo(){return pn&6?ms():mN!==-1?mN:mN=ms()}function Kh(e){return e.mode&1?pn&2&&Mi!==0?Mi&-Mi:qoe.transition!==null?(pN===0&&(pN=H$()),pN):(e=Un,e!==0||(e=window.event,e=e===void 0?16:X$(e.type)),e):1}function ru(e,t,r,n){if(50<Jv)throw Jv=0,cP=null,Error(Yt(185));K1(e,r,n),(!(pn&2)||e!==di)&&(e===di&&(!(pn&2)&&(hE|=r),$s===4&&yh(e,Mi)),Zo(e,n),r===1&&pn===0&&!(t.mode&1)&&(gg=ms()+500,cE&&wf()))}function Zo(e,t){var r=e.callbackNode;qie(e,t);var n=zN(e,e===di?Mi:0);if(n===0)r!==null&&UR(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&UR(r),t===1)e.tag===0?Koe(kL.bind(null,e)):mK(kL.bind(null,e)),Qoe(function(){!(pn&6)&&wf()}),r=null;else{switch($$(n)){case 1:r=JT;break;case 4:r=Q$;break;case 16:r=GN;break;case 536870912:r=V$;break;default:r=GN}r=hq(r,iq.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function iq(e,t){if(mN=-1,pN=0,pn&6)throw Error(Yt(327));var r=e.callbackNode;if(Zp()&&e.callbackNode!==r)return null;var n=zN(e,e===di?Mi:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=AC(e,n);else{t=n;var a=pn;pn|=2;var s=lq();(di!==e||Mi!==t)&&(Pd=null,gg=ms()+500,wm(e,t));do try{Ale();break}catch(l){oq(e,l)}while(!0);u4(),cC.current=s,pn=a,Is!==null?t=0:(di=null,Mi=0,t=$s)}if(t!==0){if(t===2&&(a=D5(e),a!==0&&(n=a,t=uP(e,a))),t===1)throw r=Vy,wm(e,0),yh(e,n),Zo(e,ms()),r;if(t===6)yh(e,n);else{if(a=e.current.alternate,!(n&30)&&!ule(a)&&(t=AC(e,n),t===2&&(s=D5(e),s!==0&&(n=s,t=uP(e,s))),t===1))throw r=Vy,wm(e,0),yh(e,n),Zo(e,ms()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(Yt(345));case 2:Jf(e,Go,Pd);break;case 3:if(yh(e,n),(n&130023424)===n&&(t=_4+500-ms(),10<t)){if(zN(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){jo(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=$5(Jf.bind(null,e,Go,Pd),t);break}Jf(e,Go,Pd);break;case 4:if(yh(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-tu(n);s=1<<o,o=t[o],o>a&&(a=o),n&=~s}if(n=a,n=ms()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*cle(n/1960))-n,10<n){e.timeoutHandle=$5(Jf.bind(null,e,Go,Pd),n);break}Jf(e,Go,Pd);break;case 5:Jf(e,Go,Pd);break;default:throw Error(Yt(329))}}}return Zo(e,ms()),e.callbackNode===r?iq.bind(null,e):null}function uP(e,t){var r=Xv;return e.current.memoizedState.isDehydrated&&(wm(e,t).flags|=256),e=AC(e,t),e!==2&&(t=Go,Go=r,t!==null&&dP(t)),e}function dP(e){Go===null?Go=e:Go.push.apply(Go,e)}function ule(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],s=a.getSnapshot;a=a.value;try{if(!lu(s(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function yh(e,t){for(t&=~C4,t&=~hE,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-tu(t),n=1<<r;e[r]=-1,t&=~n}}function kL(e){if(pn&6)throw Error(Yt(327));Zp();var t=zN(e,0);if(!(t&1))return Zo(e,ms()),null;var r=AC(e,t);if(e.tag!==0&&r===2){var n=D5(e);n!==0&&(t=n,r=uP(e,n))}if(r===1)throw r=Vy,wm(e,0),yh(e,t),Zo(e,ms()),r;if(r===6)throw Error(Yt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Jf(e,Go,Pd),Zo(e,ms()),null}function E4(e,t){var r=pn;pn|=1;try{return e(t)}finally{pn=r,pn===0&&(gg=ms()+500,cE&&wf())}}function Hm(e){jh!==null&&jh.tag===0&&!(pn&6)&&Zp();var t=pn;pn|=1;var r=bc.transition,n=Un;try{if(bc.transition=null,Un=1,e)return e()}finally{Un=n,bc.transition=r,pn=t,!(pn&6)&&wf()}}function S4(){yl=Vp.current,ga(Vp)}function wm(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Uoe(r)),Is!==null)for(r=Is.return;r!==null;){var n=r;switch(o4(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ZN();break;case 3:mg(),ga(Jo),ga(Ao),p4();break;case 5:m4(n);break;case 4:mg();break;case 13:ga(Ua);break;case 19:ga(Ua);break;case 10:d4(n.type._context);break;case 22:case 23:S4()}r=r.return}if(di=e,Is=e=qh(e.current,null),Mi=yl=t,$s=0,Vy=null,C4=hE=Vm=0,Go=Xv=null,hm!==null){for(t=0;t<hm.length;t++)if(r=hm[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=a,n.next=o}r.pending=n}hm=null}return e}function oq(e,t){do{var r=Is;try{if(u4(),AN.current=lC,oC){for(var n=Ha.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}oC=!1}if(Qm=0,li=Ls=Ha=null,zv=!1,My=0,N4.current=null,r===null||r.return===null){$s=1,Vy=t,Is=null;break}e:{var s=e,o=r.return,l=r,c=t;if(t=Mi,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,A=d.tag;if(!(d.mode&1)&&(A===0||A===11||A===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=vL(o);if(h!==null){h.flags&=-257,yL(h,o,l,s,t),h.mode&1&&xL(s,u,t),t=h,c=u;var m=t.updateQueue;if(m===null){var p=new Set;p.add(c),t.updateQueue=p}else m.add(c);break e}else{if(!(t&1)){xL(s,u,t),I4();break e}c=Error(Yt(426))}}else if(Ea&&l.mode&1){var g=vL(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),yL(g,o,l,s,t),l4(pg(c,l));break e}}s=c=pg(c,l),$s!==4&&($s=2),Xv===null?Xv=[s]:Xv.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var x=$K(s,c,t);AL(s,x);break e;case 1:l=c;var y=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&($h===null||!$h.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var _=KK(s,l,t);AL(s,_);break e}}s=s.return}while(s!==null)}uq(r)}catch(T){t=T,Is===r&&r!==null&&(Is=r=r.return);continue}break}while(!0)}function lq(){var e=cC.current;return cC.current=lC,e===null?lC:e}function I4(){($s===0||$s===3||$s===2)&&($s=4),di===null||!(Vm&268435455)&&!(hE&268435455)||yh(di,Mi)}function AC(e,t){var r=pn;pn|=2;var n=lq();(di!==e||Mi!==t)&&(Pd=null,wm(e,t));do try{dle();break}catch(a){oq(e,a)}while(!0);if(u4(),pn=r,cC.current=n,Is!==null)throw Error(Yt(261));return di=null,Mi=0,$s}function dle(){for(;Is!==null;)cq(Is)}function Ale(){for(;Is!==null&&!Rie();)cq(Is)}function cq(e){var t=Aq(e.alternate,e,yl);e.memoizedProps=e.pendingProps,t===null?uq(e):Is=t,N4.current=null}function uq(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=sle(r,t),r!==null){r.flags&=32767,Is=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{$s=6,Is=null;return}}else if(r=ale(r,t,yl),r!==null){Is=r;return}if(t=t.sibling,t!==null){Is=t;return}Is=t=e}while(t!==null);$s===0&&($s=5)}function Jf(e,t,r){var n=Un,a=bc.transition;try{bc.transition=null,Un=1,hle(e,t,r,n)}finally{bc.transition=a,Un=n}return null}function hle(e,t,r,n){do Zp();while(jh!==null);if(pn&6)throw Error(Yt(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Yt(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(Gie(e,s),e===di&&(Is=di=null,Mi=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Iw||(Iw=!0,hq(GN,function(){return Zp(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=bc.transition,bc.transition=null;var o=Un;Un=1;var l=pn;pn|=4,N4.current=null,ole(e,r),aq(r,e),Toe(V5),WN=!!Q5,V5=Q5=null,e.current=r,lle(r),Lie(),pn=l,Un=o,bc.transition=s}else e.current=r;if(Iw&&(Iw=!1,jh=e,dC=a),s=e.pendingLanes,s===0&&($h=null),Qie(r.stateNode),Zo(e,ms()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(uC)throw uC=!1,e=lP,lP=null,e;return dC&1&&e.tag!==0&&Zp(),s=e.pendingLanes,s&1?e===cP?Jv++:(Jv=0,cP=e):Jv=0,wf(),null}function Zp(){if(jh!==null){var e=$$(dC),t=bc.transition,r=Un;try{if(bc.transition=null,Un=16>e?16:e,jh===null)var n=!1;else{if(e=jh,jh=null,dC=0,pn&6)throw Error(Yt(331));var a=pn;for(pn|=4,fr=e.current;fr!==null;){var s=fr,o=s.child;if(fr.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(fr=u;fr!==null;){var d=fr;switch(d.tag){case 0:case 11:case 15:Wv(8,d,s)}var A=d.child;if(A!==null)A.return=d,fr=A;else for(;fr!==null;){d=fr;var f=d.sibling,h=d.return;if(tq(d),d===u){fr=null;break}if(f!==null){f.return=h,fr=f;break}fr=h}}}var m=s.alternate;if(m!==null){var p=m.child;if(p!==null){m.child=null;do{var g=p.sibling;p.sibling=null,p=g}while(p!==null)}}fr=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,fr=o;else e:for(;fr!==null;){if(s=fr,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Wv(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,fr=x;break e}fr=s.return}}var y=e.current;for(fr=y;fr!==null;){o=fr;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,fr=b;else e:for(o=y;fr!==null;){if(l=fr,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:AE(9,l)}}catch(T){es(l,l.return,T)}if(l===o){fr=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,fr=_;break e}fr=l.return}}if(pn=a,wf(),zu&&typeof zu.onPostCommitFiberRoot=="function")try{zu.onPostCommitFiberRoot(aE,e)}catch{}n=!0}return n}finally{Un=r,bc.transition=t}}return!1}function TL(e,t,r){t=pg(r,t),t=$K(e,t,1),e=Hh(e,t,1),t=jo(),e!==null&&(K1(e,1,t),Zo(e,t))}function es(e,t,r){if(e.tag===3)TL(e,e,r);else for(;t!==null;){if(t.tag===3){TL(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&($h===null||!$h.has(n))){e=pg(r,e),e=KK(t,e,1),t=Hh(t,e,1),e=jo(),t!==null&&(K1(t,1,e),Zo(t,e));break}}t=t.return}}function fle(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=jo(),e.pingedLanes|=e.suspendedLanes&r,di===e&&(Mi&r)===r&&($s===4||$s===3&&(Mi&130023424)===Mi&&500>ms()-_4?wm(e,0):C4|=r),Zo(e,t)}function dq(e,t){t===0&&(e.mode&1?(t=xw,xw<<=1,!(xw&130023424)&&(xw=4194304)):t=1);var r=jo();e=sA(e,t),e!==null&&(K1(e,t,r),Zo(e,r))}function mle(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),dq(e,r)}function ple(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Yt(314))}n!==null&&n.delete(t),dq(e,r)}var Aq;Aq=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Jo.current)zo=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return zo=!1,nle(e,t,r);zo=!!(e.flags&131072)}else zo=!1,Ea&&t.flags&1048576&&pK(t,rC,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;fN(e,t),e=t.pendingProps;var a=Ag(t,Ao.current);Yp(t,r),a=x4(null,t,n,e,a,r);var s=v4();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Yo(n)?(s=!0,eC(t)):s=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,h4(t),a.updater=dE,t.stateNode=a,a._reactInternals=t,J5(t,n,e,r),t=eP(null,t,n,!0,s,r)):(t.tag=0,Ea&&s&&i4(t),Co(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(fN(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=xle(n),e=Gc(n,e),a){case 0:t=Z5(null,t,n,e,r);break e;case 1:t=NL(null,t,n,e,r);break e;case 11:t=bL(null,t,n,e,r);break e;case 14:t=wL(null,t,n,Gc(n.type,e),r);break e}throw Error(Yt(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Gc(n,a),Z5(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Gc(n,a),NL(e,t,n,a,r);case 3:e:{if(WK(t),e===null)throw Error(Yt(387));n=t.pendingProps,s=t.memoizedState,a=s.element,wK(e,t),sC(t,n,null,r);var o=t.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){a=pg(Error(Yt(423)),t),t=CL(e,t,n,r,a);break e}else if(n!==a){a=pg(Error(Yt(424)),t),t=CL(e,t,n,r,a);break e}else for(Sl=Vh(t.stateNode.containerInfo.firstChild),Pl=t,Ea=!0,Wc=null,r=yK(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(hg(),n===a){t=iA(e,t,r);break e}Co(e,t,n,r)}t=t.child}return t;case 5:return NK(t),e===null&&z5(t),n=t.type,a=t.pendingProps,s=e!==null?e.memoizedProps:null,o=a.children,H5(n,a)?o=null:s!==null&&H5(n,s)&&(t.flags|=32),zK(e,t),Co(e,t,o,r),t.child;case 6:return e===null&&z5(t),null;case 13:return XK(e,t,r);case 4:return f4(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=fg(t,null,n,r):Co(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Gc(n,a),bL(e,t,n,a,r);case 7:return Co(e,t,t.pendingProps,r),t.child;case 8:return Co(e,t,t.pendingProps.children,r),t.child;case 12:return Co(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,s=t.memoizedProps,o=a.value,la(nC,n._currentValue),n._currentValue=o,s!==null)if(lu(s.value,o)){if(s.children===a.children&&!Jo.current){t=iA(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=qd(-1,r&-r),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),W5(s.return,r,t),l.lanes|=r;break}c=c.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Yt(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),W5(o,r,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Co(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Yp(t,r),a=Cc(a),n=n(a),t.flags|=1,Co(e,t,n,r),t.child;case 14:return n=t.type,a=Gc(n,t.pendingProps),a=Gc(n.type,a),wL(e,t,n,a,r);case 15:return qK(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Gc(n,a),fN(e,t),t.tag=1,Yo(n)?(e=!0,eC(t)):e=!1,Yp(t,r),HK(t,n,a),J5(t,n,a,r),eP(null,t,n,!0,e,r);case 19:return JK(e,t,r);case 22:return GK(e,t,r)}throw Error(Yt(156,t.tag))};function hq(e,t){return U$(e,t)}function gle(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pc(e,t,r,n){return new gle(e,t,r,n)}function B4(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xle(e){if(typeof e=="function")return B4(e)?1:0;if(e!=null){if(e=e.$$typeof,e===zT)return 11;if(e===WT)return 14}return 2}function qh(e,t){var r=e.alternate;return r===null?(r=pc(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function gN(e,t,r,n,a,s){var o=2;if(n=e,typeof e=="function")B4(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case kp:return Nm(r.children,a,s,t);case GT:o=8,a|=8;break;case b5:return e=pc(12,r,t,a|2),e.elementType=b5,e.lanes=s,e;case w5:return e=pc(13,r,t,a),e.elementType=w5,e.lanes=s,e;case N5:return e=pc(19,r,t,a),e.elementType=N5,e.lanes=s,e;case N$:return fE(r,a,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case b$:o=10;break e;case w$:o=9;break e;case zT:o=11;break e;case WT:o=14;break e;case fh:o=16,n=null;break e}throw Error(Yt(130,e==null?e:typeof e,""))}return t=pc(o,r,t,a),t.elementType=e,t.type=n,t.lanes=s,t}function Nm(e,t,r,n){return e=pc(7,e,n,t),e.lanes=r,e}function fE(e,t,r,n){return e=pc(22,e,n,t),e.elementType=N$,e.lanes=r,e.stateNode={isHidden:!1},e}function fB(e,t,r){return e=pc(6,e,null,t),e.lanes=r,e}function mB(e,t,r){return t=pc(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function vle(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=WI(0),this.expirationTimes=WI(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=WI(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function j4(e,t,r,n,a,s,o,l,c){return e=new vle(e,t,r,l,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=pc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},h4(s),e}function yle(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pp,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function fq(e){if(!e)return rf;e=e._reactInternals;e:{if(x0(e)!==e||e.tag!==1)throw Error(Yt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Yo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Yt(171))}if(e.tag===1){var r=e.type;if(Yo(r))return fK(e,r,t)}return t}function mq(e,t,r,n,a,s,o,l,c){return e=j4(r,n,!0,e,a,s,o,l,c),e.context=fq(null),r=e.current,n=jo(),a=Kh(r),s=qd(n,a),s.callback=t??null,Hh(r,s,a),e.current.lanes=a,K1(e,a,n),Zo(e,n),e}function mE(e,t,r,n){var a=t.current,s=jo(),o=Kh(a);return r=fq(r),t.context===null?t.context=r:t.pendingContext=r,t=qd(s,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Hh(a,t,o),e!==null&&(ru(e,a,o,s),dN(e,a,o)),o}function hC(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function FL(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function P4(e,t){FL(e,t),(e=e.alternate)&&FL(e,t)}function ble(){return null}var pq=typeof reportError=="function"?reportError:function(e){console.error(e)};function k4(e){this._internalRoot=e}pE.prototype.render=k4.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Yt(409));mE(e,t,null,null)};pE.prototype.unmount=k4.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Hm(function(){mE(null,e,null,null)}),t[aA]=null}};function pE(e){this._internalRoot=e}pE.prototype.unstable_scheduleHydration=function(e){if(e){var t=G$();e={blockedOn:null,target:e,priority:t};for(var r=0;r<vh.length&&t!==0&&t<vh[r].priority;r++);vh.splice(r,0,e),r===0&&W$(e)}};function T4(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function gE(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function OL(){}function wle(e,t,r,n,a){if(a){if(typeof n=="function"){var s=n;n=function(){var u=hC(o);s.call(u)}}var o=mq(t,n,e,0,null,!1,!1,"",OL);return e._reactRootContainer=o,e[aA]=o.current,Fy(e.nodeType===8?e.parentNode:e),Hm(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=hC(c);l.call(u)}}var c=j4(e,0,!1,null,null,!1,!1,"",OL);return e._reactRootContainer=c,e[aA]=c.current,Fy(e.nodeType===8?e.parentNode:e),Hm(function(){mE(t,c,r,n)}),c}function xE(e,t,r,n,a){var s=r._reactRootContainer;if(s){var o=s;if(typeof a=="function"){var l=a;a=function(){var c=hC(o);l.call(c)}}mE(t,o,e,a)}else o=wle(r,t,e,a,n);return hC(o)}K$=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=wv(t.pendingLanes);r!==0&&(YT(t,r|1),Zo(t,ms()),!(pn&6)&&(gg=ms()+500,wf()))}break;case 13:Hm(function(){var n=sA(e,1);if(n!==null){var a=jo();ru(n,e,1,a)}}),P4(e,1)}};ZT=function(e){if(e.tag===13){var t=sA(e,134217728);if(t!==null){var r=jo();ru(t,e,134217728,r)}P4(e,134217728)}};q$=function(e){if(e.tag===13){var t=Kh(e),r=sA(e,t);if(r!==null){var n=jo();ru(r,e,t,n)}P4(e,t)}};G$=function(){return Un};z$=function(e,t){var r=Un;try{return Un=e,t()}finally{Un=r}};T5=function(e,t,r){switch(t){case"input":if(E5(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=lE(n);if(!a)throw Error(Yt(90));_$(n),E5(n,a)}}}break;case"textarea":S$(e,r);break;case"select":t=r.value,t!=null&&zp(e,!!r.multiple,t,!1)}};F$=E4;O$=Hm;var Nle={usingClientEntryPoint:!1,Events:[G1,Dp,lE,k$,T$,E4]},$x={findFiberByHostInstance:Am,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Cle={bundleType:$x.bundleType,version:$x.version,rendererPackageName:$x.rendererPackageName,rendererConfig:$x.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bA.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=L$(e),e===null?null:e.stateNode},findFiberByHostInstance:$x.findFiberByHostInstance||ble,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bw.isDisabled&&Bw.supportsFiber)try{aE=Bw.inject(Cle),zu=Bw}catch{}}Ll.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nle;Ll.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!T4(t))throw Error(Yt(200));return yle(e,t,null,r)};Ll.createRoot=function(e,t){if(!T4(e))throw Error(Yt(299));var r=!1,n="",a=pq;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=j4(e,1,!1,null,null,r,!1,n,a),e[aA]=t.current,Fy(e.nodeType===8?e.parentNode:e),new k4(t)};Ll.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Yt(188)):(e=Object.keys(e).join(","),Error(Yt(268,e)));return e=L$(t),e=e===null?null:e.stateNode,e};Ll.flushSync=function(e){return Hm(e)};Ll.hydrate=function(e,t,r){if(!gE(t))throw Error(Yt(200));return xE(null,e,t,!0,r)};Ll.hydrateRoot=function(e,t,r){if(!T4(e))throw Error(Yt(405));var n=r!=null&&r.hydratedSources||null,a=!1,s="",o=pq;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=mq(t,null,e,1,r??null,a,!1,s,o),e[aA]=t.current,Fy(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new pE(t)};Ll.render=function(e,t,r){if(!gE(t))throw Error(Yt(200));return xE(null,e,t,!1,r)};Ll.unmountComponentAtNode=function(e){if(!gE(e))throw Error(Yt(40));return e._reactRootContainer?(Hm(function(){xE(null,null,e,!1,function(){e._reactRootContainer=null,e[aA]=null})}),!0):!1};Ll.unstable_batchedUpdates=E4;Ll.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!gE(r))throw Error(Yt(200));if(e==null||e._reactInternals===void 0)throw Error(Yt(38));return xE(e,t,r,!1,n)};Ll.version="18.3.1-next-f1338f8080-20240426";function gq(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gq)}catch(e){console.error(e)}}gq(),g$.exports=Ll;var nu=g$.exports,DL=nu;v5.createRoot=DL.createRoot,v5.hydrateRoot=DL.hydrateRoot;/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var RL="popstate";function _le(e={}){function t(n,a){let{pathname:s,search:o,hash:l}=n.location;return AP("",{pathname:s,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Hy(a)}return Sle(t,r,null,e)}function Pa(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function cu(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Ele(){return Math.random().toString(36).substring(2,10)}function LL(e,t){return{usr:e.state,key:e.key,idx:t}}function AP(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?$g(t):t,state:r,key:t&&t.key||n||Ele()}}function Hy({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function $g(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function Sle(e,t,r,n={}){let{window:a=document.defaultView,v5Compat:s=!1}=n,o=a.history,l="POP",c=null,u=d();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function d(){return(o.state||{idx:null}).idx}function A(){l="POP";let g=d(),x=g==null?null:g-u;u=g,c&&c({action:l,location:p.location,delta:x})}function f(g,x){l="PUSH";let y=AP(p.location,g,x);u=d()+1;let b=LL(y,u),_=p.createHref(y);try{o.pushState(b,"",_)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;a.location.assign(_)}s&&c&&c({action:l,location:p.location,delta:1})}function h(g,x){l="REPLACE";let y=AP(p.location,g,x);u=d();let b=LL(y,u),_=p.createHref(y);o.replaceState(b,"",_),s&&c&&c({action:l,location:p.location,delta:0})}function m(g){return Ile(g)}let p={get action(){return l},get location(){return e(a,o)},listen(g){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(RL,A),c=g,()=>{a.removeEventListener(RL,A),c=null}},createHref(g){return t(a,g)},createURL:m,encodeLocation(g){let x=m(g);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:h,go(g){return o.go(g)}};return p}function Ile(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Pa(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Hy(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function xq(e,t,r="/"){return Ble(e,t,r,!1)}function Ble(e,t,r,n){let a=typeof t=="string"?$g(t):t,s=oA(a.pathname||"/",r);if(s==null)return null;let o=vq(e);jle(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=Qle(s);l=Mle(o[c],u,n)}return l}function vq(e,t=[],r=[],n="",a=!1){let s=(o,l,c=a,u)=>{let d={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(n)&&c)return;Pa(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length)}let A=Gd([n,d.relativePath]),f=r.concat(d);o.children&&o.children.length>0&&(Pa(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${A}".`),vq(o.children,t,f,A,c)),!(o.path==null&&!o.index)&&t.push({path:A,score:Rle(A,o.index),routesMeta:f})};return e.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))s(o,l);else for(let u of yq(o.path))s(o,l,!0,u)}),t}function yq(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return a?[s,""]:[s];let o=yq(n.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function jle(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Lle(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var Ple=/^:[\w-]+$/,kle=3,Tle=2,Fle=1,Ole=10,Dle=-2,ML=e=>e==="*";function Rle(e,t){let r=e.split("/"),n=r.length;return r.some(ML)&&(n+=Dle),t&&(n+=Tle),r.filter(a=>!ML(a)).reduce((a,s)=>a+(Ple.test(s)?kle:s===""?Fle:Ole),n)}function Lle(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function Mle(e,t,r=!1){let{routesMeta:n}=e,a={},s="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=s==="/"?t:t.slice(s.length)||"/",A=fC({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!A&&u&&r&&!n[n.length-1].route.index&&(A=fC({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!A)return null;Object.assign(a,A.params),o.push({params:a,pathname:Gd([s,A.pathname]),pathnameBase:Kle(Gd([s,A.pathnameBase])),route:f}),A.pathnameBase!=="/"&&(s=Gd([s,A.pathnameBase]))}return o}function fC(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Ule(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let s=a[0],o=s.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:A},f)=>{if(d==="*"){let m=l[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const h=l[f];return A&&!h?u[d]=void 0:u[d]=(h||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:e}}function Ule(e,t=!1,r=!0){cu(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function Qle(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return cu(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function oA(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function Vle(e,t="/"){let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?$g(e):e;return{pathname:r?r.startsWith("/")?r:Hle(r,t):t,search:qle(n),hash:Gle(a)}}function Hle(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function pB(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function $le(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function F4(e){let t=$le(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function O4(e,t,r,n=!1){let a;typeof e=="string"?a=$g(e):(a={...e},Pa(!a.pathname||!a.pathname.includes("?"),pB("?","pathname","search",a)),Pa(!a.pathname||!a.pathname.includes("#"),pB("#","pathname","hash",a)),Pa(!a.search||!a.search.includes("#"),pB("#","search","hash",a)));let s=e===""||a.pathname==="",o=s?"/":a.pathname,l;if(o==null)l=r;else{let A=t.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),A-=1;a.pathname=f.join("/")}l=A>=0?t[A]:"/"}let c=Vle(a,l),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var Gd=e=>e.join("/").replace(/\/\/+/g,"/"),Kle=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),qle=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Gle=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function zle(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var bq=["POST","PUT","PATCH","DELETE"];new Set(bq);var Wle=["GET",...bq];new Set(Wle);var Kg=v.createContext(null);Kg.displayName="DataRouter";var vE=v.createContext(null);vE.displayName="DataRouterState";v.createContext(!1);var wq=v.createContext({isTransitioning:!1});wq.displayName="ViewTransition";var Xle=v.createContext(new Map);Xle.displayName="Fetchers";var Jle=v.createContext(null);Jle.displayName="Await";var fu=v.createContext(null);fu.displayName="Navigation";var W1=v.createContext(null);W1.displayName="Location";var mu=v.createContext({outlet:null,matches:[],isDataRoute:!1});mu.displayName="Route";var D4=v.createContext(null);D4.displayName="RouteError";function Yle(e,{relative:t}={}){Pa(qg(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=v.useContext(fu),{hash:a,pathname:s,search:o}=J1(e,{relative:t}),l=s;return r!=="/"&&(l=s==="/"?r:Gd([r,s])),n.createHref({pathname:l,search:o,hash:a})}function qg(){return v.useContext(W1)!=null}function Nf(){return Pa(qg(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(W1).location}var Nq="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Cq(e){v.useContext(fu).static||v.useLayoutEffect(e)}function X1(){let{isDataRoute:e}=v.useContext(mu);return e?hce():Zle()}function Zle(){Pa(qg(),"useNavigate() may be used only in the context of a <Router> component.");let e=v.useContext(Kg),{basename:t,navigator:r}=v.useContext(fu),{matches:n}=v.useContext(mu),{pathname:a}=Nf(),s=JSON.stringify(F4(n)),o=v.useRef(!1);return Cq(()=>{o.current=!0}),v.useCallback((c,u={})=>{if(cu(o.current,Nq),!o.current)return;if(typeof c=="number"){r.go(c);return}let d=O4(c,JSON.parse(s),a,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Gd([t,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[t,r,s,a,e])}var ece=v.createContext(null);function tce(e){let t=v.useContext(mu).outlet;return t&&v.createElement(ece.Provider,{value:e},t)}function J1(e,{relative:t}={}){let{matches:r}=v.useContext(mu),{pathname:n}=Nf(),a=JSON.stringify(F4(r));return v.useMemo(()=>O4(e,JSON.parse(a),n,t==="path"),[e,a,n,t])}function rce(e,t){return _q(e,t)}function _q(e,t,r,n){var x;Pa(qg(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=v.useContext(fu),{matches:s}=v.useContext(mu),o=s[s.length-1],l=o?o.params:{},c=o?o.pathname:"/",u=o?o.pathnameBase:"/",d=o&&o.route;{let y=d&&d.path||"";Eq(c,!d||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let A=Nf(),f;if(t){let y=typeof t=="string"?$g(t):t;Pa(u==="/"||((x=y.pathname)==null?void 0:x.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${y.pathname}" was given in the \`location\` prop.`),f=y}else f=A;let h=f.pathname||"/",m=h;if(u!=="/"){let y=u.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=xq(e,{pathname:m});cu(d||p!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),cu(p==null||p[p.length-1].route.element!==void 0||p[p.length-1].route.Component!==void 0||p[p.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=oce(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:Gd([u,a.encodeLocation?a.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?u:Gd([u,a.encodeLocation?a.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,r,n);return t&&g?v.createElement(W1.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},g):g}function nce(){let e=Ace(),t=zle(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:s},"ErrorBoundary")," or"," ",v.createElement("code",{style:s},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),r?v.createElement("pre",{style:a},r):null,o)}var ace=v.createElement(nce,null),sce=class extends v.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?v.createElement(mu.Provider,{value:this.props.routeContext},v.createElement(D4.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ice({routeContext:e,match:t,children:r}){let n=v.useContext(Kg);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),v.createElement(mu.Provider,{value:e},r)}function oce(e,t=[],r=null,n=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,s=r==null?void 0:r.errors;if(s!=null){let c=a.findIndex(u=>u.route.id&&(s==null?void 0:s[u.route.id])!==void 0);Pa(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,c+1))}let o=!1,l=-1;if(r)for(let c=0;c<a.length;c++){let u=a[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:d,errors:A}=r,f=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!A||A[u.route.id]===void 0);if(u.route.lazy||f){o=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((c,u,d)=>{let A,f=!1,h=null,m=null;r&&(A=s&&u.route.id?s[u.route.id]:void 0,h=u.route.errorElement||ace,o&&(l<0&&d===0?(Eq("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,m=null):l===d&&(f=!0,m=u.route.hydrateFallbackElement||null)));let p=t.concat(a.slice(0,d+1)),g=()=>{let x;return A?x=h:f?x=m:u.route.Component?x=v.createElement(u.route.Component,null):u.route.element?x=u.route.element:x=c,v.createElement(ice,{match:u,routeContext:{outlet:c,matches:p,isDataRoute:r!=null},children:x})};return r&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?v.createElement(sce,{location:r.location,revalidation:r.revalidation,component:h,error:A,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}function R4(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lce(e){let t=v.useContext(Kg);return Pa(t,R4(e)),t}function cce(e){let t=v.useContext(vE);return Pa(t,R4(e)),t}function uce(e){let t=v.useContext(mu);return Pa(t,R4(e)),t}function L4(e){let t=uce(e),r=t.matches[t.matches.length-1];return Pa(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function dce(){return L4("useRouteId")}function Ace(){var n;let e=v.useContext(D4),t=cce("useRouteError"),r=L4("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function hce(){let{router:e}=lce("useNavigate"),t=L4("useNavigate"),r=v.useRef(!1);return Cq(()=>{r.current=!0}),v.useCallback(async(a,s={})=>{cu(r.current,Nq),r.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:t,...s}))},[e,t])}var UL={};function Eq(e,t,r){!t&&!UL[e]&&(UL[e]=!0,cu(!1,r))}v.memo(fce);function fce({routes:e,future:t,state:r}){return _q(e,void 0,r,t)}function Yf({to:e,replace:t,state:r,relative:n}){Pa(qg(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=v.useContext(fu);cu(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=v.useContext(mu),{pathname:o}=Nf(),l=X1(),c=O4(e,F4(s),o,n==="path"),u=JSON.stringify(c);return v.useEffect(()=>{l(JSON.parse(u),{replace:t,state:r,relative:n})},[l,u,n,t,r]),null}function Sq(e){return tce(e.context)}function $r(e){Pa(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function mce({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:a,static:s=!1}){Pa(!qg(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=v.useMemo(()=>({basename:o,navigator:a,static:s,future:{}}),[o,a,s]);typeof r=="string"&&(r=$g(r));let{pathname:c="/",search:u="",hash:d="",state:A=null,key:f="default"}=r,h=v.useMemo(()=>{let m=oA(c,o);return m==null?null:{location:{pathname:m,search:u,hash:d,state:A,key:f},navigationType:n}},[o,c,u,d,A,f,n]);return cu(h!=null,`<Router basename="${o}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:v.createElement(fu.Provider,{value:l},v.createElement(W1.Provider,{children:t,value:h}))}function pce({children:e,location:t}){return rce(hP(e),t)}function hP(e,t=[]){let r=[];return v.Children.forEach(e,(n,a)=>{if(!v.isValidElement(n))return;let s=[...t,a];if(n.type===v.Fragment){r.push.apply(r,hP(n.props.children,s));return}Pa(n.type===$r,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Pa(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=hP(n.props.children,s)),r.push(o)}),r}var xN="get",vN="application/x-www-form-urlencoded";function yE(e){return e!=null&&typeof e.tagName=="string"}function gce(e){return yE(e)&&e.tagName.toLowerCase()==="button"}function xce(e){return yE(e)&&e.tagName.toLowerCase()==="form"}function vce(e){return yE(e)&&e.tagName.toLowerCase()==="input"}function yce(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function bce(e,t){return e.button===0&&(!t||t==="_self")&&!yce(e)}var jw=null;function wce(){if(jw===null)try{new FormData(document.createElement("form"),0),jw=!1}catch{jw=!0}return jw}var Nce=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gB(e){return e!=null&&!Nce.has(e)?(cu(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vN}"`),null):e}function Cce(e,t){let r,n,a,s,o;if(xce(e)){let l=e.getAttribute("action");n=l?oA(l,t):null,r=e.getAttribute("method")||xN,a=gB(e.getAttribute("enctype"))||vN,s=new FormData(e)}else if(gce(e)||vce(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(n=c?oA(c,t):null,r=e.getAttribute("formmethod")||l.getAttribute("method")||xN,a=gB(e.getAttribute("formenctype"))||gB(l.getAttribute("enctype"))||vN,s=new FormData(l,e),!wce()){let{name:u,type:d,value:A}=e;if(d==="image"){let f=u?`${u}.`:"";s.append(`${f}x`,"0"),s.append(`${f}y`,"0")}else u&&s.append(u,A)}}else{if(yE(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=xN,n=null,a=vN,o=e}return s&&a==="text/plain"&&(o=s,s=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function M4(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function _ce(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&oA(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function Ece(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Sce(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Ice(e,t,r){let n=await Promise.all(e.map(async a=>{let s=t.routes[a.route.id];if(s){let o=await Ece(s,r);return o.links?o.links():[]}return[]}));return kce(n.flat(1).filter(Sce).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function QL(e,t,r,n,a,s){let o=(c,u)=>r[u]?c.route.id!==r[u].route.id:!0,l=(c,u)=>{var d;return r[u].pathname!==c.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==c.params["*"]};return s==="assets"?t.filter((c,u)=>o(c,u)||l(c,u)):s==="data"?t.filter((c,u)=>{var A;let d=n.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(o(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((A=r[0])==null?void 0:A.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function Bce(e,t,{includeHydrateFallback:r}={}){return jce(e.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let s=[a.module];return a.clientActionModule&&(s=s.concat(a.clientActionModule)),a.clientLoaderModule&&(s=s.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(s=s.concat(a.hydrateFallbackModule)),a.imports&&(s=s.concat(a.imports)),s}).flat(1))}function jce(e){return[...new Set(e)]}function Pce(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function kce(e,t){let r=new Set;return new Set(t),e.reduce((n,a)=>{let s=JSON.stringify(Pce(a));return r.has(s)||(r.add(s),n.push({key:s,link:a})),n},[])}function Iq(){let e=v.useContext(Kg);return M4(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Tce(){let e=v.useContext(vE);return M4(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var U4=v.createContext(void 0);U4.displayName="FrameworkContext";function Bq(){let e=v.useContext(U4);return M4(e,"You must render this element inside a <HydratedRouter> element"),e}function Fce(e,t){let r=v.useContext(U4),[n,a]=v.useState(!1),[s,o]=v.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:A}=t,f=v.useRef(null);v.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let p=x=>{x.forEach(y=>{o(y.isIntersecting)})},g=new IntersectionObserver(p,{threshold:.5});return f.current&&g.observe(f.current),()=>{g.disconnect()}}},[e]),v.useEffect(()=>{if(n){let p=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(p)}}},[n]);let h=()=>{a(!0)},m=()=>{a(!1),o(!1)};return r?e!=="intent"?[s,f,{}]:[s,f,{onFocus:Kx(l,h),onBlur:Kx(c,m),onMouseEnter:Kx(u,h),onMouseLeave:Kx(d,m),onTouchStart:Kx(A,h)}]:[!1,f,{}]}function Kx(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function Oce({page:e,...t}){let{router:r}=Iq(),n=v.useMemo(()=>xq(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?v.createElement(Rce,{page:e,matches:n,...t}):null}function Dce(e){let{manifest:t,routeModules:r}=Bq(),[n,a]=v.useState([]);return v.useEffect(()=>{let s=!1;return Ice(e,t,r).then(o=>{s||a(o)}),()=>{s=!0}},[e,t,r]),n}function Rce({page:e,matches:t,...r}){let n=Nf(),{manifest:a,routeModules:s}=Bq(),{basename:o}=Iq(),{loaderData:l,matches:c}=Tce(),u=v.useMemo(()=>QL(e,t,c,a,n,"data"),[e,t,c,a,n]),d=v.useMemo(()=>QL(e,t,c,a,n,"assets"),[e,t,c,a,n]),A=v.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let m=new Set,p=!1;if(t.forEach(x=>{var b;let y=a.routes[x.route.id];!y||!y.hasLoader||(!u.some(_=>_.route.id===x.route.id)&&x.route.id in l&&((b=s[x.route.id])!=null&&b.shouldRevalidate)||y.hasClientLoader?p=!0:m.add(x.route.id))}),m.size===0)return[];let g=_ce(e,o,"data");return p&&m.size>0&&g.searchParams.set("_routes",t.filter(x=>m.has(x.route.id)).map(x=>x.route.id).join(",")),[g.pathname+g.search]},[o,l,n,a,u,t,e,s]),f=v.useMemo(()=>Bce(d,a),[d,a]),h=Dce(d);return v.createElement(v.Fragment,null,A.map(m=>v.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...r})),f.map(m=>v.createElement("link",{key:m,rel:"modulepreload",href:m,...r})),h.map(({key:m,link:p})=>v.createElement("link",{key:m,nonce:r.nonce,...p})))}function Lce(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var jq=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{jq&&(window.__reactRouterVersion="7.8.1")}catch{}function Mce({basename:e,children:t,window:r}){let n=v.useRef();n.current==null&&(n.current=_le({window:r,v5Compat:!0}));let a=n.current,[s,o]=v.useState({action:a.action,location:a.location}),l=v.useCallback(c=>{v.startTransition(()=>o(c))},[o]);return v.useLayoutEffect(()=>a.listen(l),[a,l]),v.createElement(mce,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:a})}var Pq=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kq=v.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:a,reloadDocument:s,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:A,...f},h){let{basename:m}=v.useContext(fu),p=typeof u=="string"&&Pq.test(u),g,x=!1;if(typeof u=="string"&&p&&(g=u,jq))try{let I=new URL(window.location.href),L=u.startsWith("//")?new URL(I.protocol+u):new URL(u),E=oA(L.pathname,m);L.origin===I.origin&&E!=null?u=E+L.search+L.hash:x=!0}catch{cu(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=Yle(u,{relative:a}),[b,_,T]=Fce(n,f),P=Vce(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:A});function C(I){t&&t(I),I.defaultPrevented||P(I)}let S=v.createElement("a",{...f,...T,href:g||y,onClick:x||s?t:C,ref:Lce(h,_),target:c,"data-discover":!p&&r==="render"?"true":void 0});return b&&!p?v.createElement(v.Fragment,null,S,v.createElement(Oce,{page:y})):S});kq.displayName="Link";var kr=v.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:a=!1,style:s,to:o,viewTransition:l,children:c,...u},d){let A=J1(o,{relative:u.relative}),f=Nf(),h=v.useContext(vE),{navigator:m,basename:p}=v.useContext(fu),g=h!=null&&Gce(A)&&l===!0,x=m.encodeLocation?m.encodeLocation(A).pathname:A.pathname,y=f.pathname,b=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;r||(y=y.toLowerCase(),b=b?b.toLowerCase():null,x=x.toLowerCase()),b&&p&&(b=oA(b,p)||b);const _=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let T=y===x||!a&&y.startsWith(x)&&y.charAt(_)==="/",P=b!=null&&(b===x||!a&&b.startsWith(x)&&b.charAt(x.length)==="/"),C={isActive:T,isPending:P,isTransitioning:g},S=T?t:void 0,I;typeof n=="function"?I=n(C):I=[n,T?"active":null,P?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let L=typeof s=="function"?s(C):s;return v.createElement(kq,{...u,"aria-current":S,className:I,ref:d,style:L,to:o,viewTransition:l},typeof c=="function"?c(C):c)});kr.displayName="NavLink";var Uce=v.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:a,state:s,method:o=xN,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:A,...f},h)=>{let m=Kce(),p=qce(l,{relative:u}),g=o.toLowerCase()==="get"?"get":"post",x=typeof l=="string"&&Pq.test(l),y=b=>{if(c&&c(b),b.defaultPrevented)return;b.preventDefault();let _=b.nativeEvent.submitter,T=(_==null?void 0:_.getAttribute("formmethod"))||o;m(_||b.currentTarget,{fetcherKey:t,method:T,navigate:r,replace:a,state:s,relative:u,preventScrollReset:d,viewTransition:A})};return v.createElement("form",{ref:h,method:g,action:p,onSubmit:n?c:y,...f,"data-discover":!x&&e==="render"?"true":void 0})});Uce.displayName="Form";function Qce(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Tq(e){let t=v.useContext(Kg);return Pa(t,Qce(e)),t}function Vce(e,{target:t,replace:r,state:n,preventScrollReset:a,relative:s,viewTransition:o}={}){let l=X1(),c=Nf(),u=J1(e,{relative:s});return v.useCallback(d=>{if(bce(d,t)){d.preventDefault();let A=r!==void 0?r:Hy(c)===Hy(u);l(e,{replace:A,state:n,preventScrollReset:a,relative:s,viewTransition:o})}},[c,l,u,r,n,t,e,a,s,o])}var Hce=0,$ce=()=>`__${String(++Hce)}__`;function Kce(){let{router:e}=Tq("useSubmit"),{basename:t}=v.useContext(fu),r=dce();return v.useCallback(async(n,a={})=>{let{action:s,method:o,encType:l,formData:c,body:u}=Cce(n,t);if(a.navigate===!1){let d=a.fetcherKey||$ce();await e.fetch(d,r,a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||o,formEncType:a.encType||l,flushSync:a.flushSync})}else await e.navigate(a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||o,formEncType:a.encType||l,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,r])}function qce(e,{relative:t}={}){let{basename:r}=v.useContext(fu),n=v.useContext(mu);Pa(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),s={...J1(e||".",{relative:t})},o=Nf();if(e==null){s.search=o.search;let l=new URLSearchParams(s.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(A=>A).forEach(A=>l.append("index",A));let d=l.toString();s.search=d?`?${d}`:""}}return(!e||e===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:Gd([r,s.pathname])),Hy(s)}function Gce(e,{relative:t}={}){let r=v.useContext(wq);Pa(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Tq("useViewTransitionState"),a=J1(e,{relative:t});if(!r.isTransitioning)return!1;let s=oA(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=oA(r.nextLocation.pathname,n)||r.nextLocation.pathname;return fC(a.pathname,o)!=null||fC(a.pathname,s)!=null}var VL={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fq=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let a=e.charCodeAt(n);a<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=a&63|128):(a&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=a&63|128):(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=a&63|128)}return t},zce=function(e){const t=[];let r=0,n=0;for(;r<e.length;){const a=e[r++];if(a<128)t[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=e[r++];t[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=e[r++],o=e[r++],l=e[r++],c=((a&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;t[n++]=String.fromCharCode(55296+(c>>10)),t[n++]=String.fromCharCode(56320+(c&1023))}else{const s=e[r++],o=e[r++];t[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|o&63)}}return t.join("")},Oq={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<e.length;a+=3){const s=e[a],o=a+1<e.length,l=o?e[a+1]:0,c=a+2<e.length,u=c?e[a+2]:0,d=s>>2,A=(s&3)<<4|l>>4;let f=(l&15)<<2|u>>6,h=u&63;c||(h=64,o||(f=64)),n.push(r[d],r[A],r[f],r[h])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Fq(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):zce(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<e.length;){const s=r[e.charAt(a++)],l=a<e.length?r[e.charAt(a)]:0;++a;const u=a<e.length?r[e.charAt(a)]:64;++a;const A=a<e.length?r[e.charAt(a)]:64;if(++a,s==null||l==null||u==null||A==null)throw new Wce;const f=s<<2|l>>4;if(n.push(f),u!==64){const h=l<<4&240|u>>2;if(n.push(h),A!==64){const m=u<<6&192|A;n.push(m)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Wce extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Xce=function(e){const t=Fq(e);return Oq.encodeByteArray(t,!0)},mC=function(e){return Xce(e).replace(/\./g,"")},Dq=function(e){try{return Oq.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jce(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yce=()=>Jce().__FIREBASE_DEFAULTS__,Zce=()=>{if(typeof process>"u"||typeof VL>"u")return;const e=VL.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},eue=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&Dq(e[1]);return t&&JSON.parse(t)},bE=()=>{try{return Yce()||Zce()||eue()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Rq=e=>{var t,r;return(r=(t=bE())===null||t===void 0?void 0:t.emulatorHosts)===null||r===void 0?void 0:r[e]},tue=e=>{const t=Rq(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),n]:[t.substring(0,r),n]},Lq=()=>{var e;return(e=bE())===null||e===void 0?void 0:e.config},Mq=e=>{var t;return(t=bE())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rue{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nue(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=t||"demo-project",a=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[mC(JSON.stringify(r)),mC(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aue(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qs())}function sue(){var e;const t=(e=bE())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iue(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oue(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function lue(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cue(){const e=qs();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Uq(){return!sue()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Qq(){try{return typeof indexedDB=="object"}catch{return!1}}function uue(){return new Promise((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;t(((s=a.error)===null||s===void 0?void 0:s.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const due="FirebaseError";class wA extends Error{constructor(t,r,n){super(r),this.code=t,this.customData=n,this.name=due,Object.setPrototypeOf(this,wA.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Y1.prototype.create)}}class Y1{constructor(t,r,n){this.service=t,this.serviceName=r,this.errors=n}create(t,...r){const n=r[0]||{},a=`${this.service}/${t}`,s=this.errors[t],o=s?Aue(s,n):"Error",l=`${this.serviceName}: ${o} (${a}).`;return new wA(a,l,n)}}function Aue(e,t){return e.replace(hue,(r,n)=>{const a=t[n];return a!=null?String(a):`<${n}?>`})}const hue=/\{\$([^}]+)}/g;function fue(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function pC(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const a of r){if(!n.includes(a))return!1;const s=e[a],o=t[a];if(HL(s)&&HL(o)){if(!pC(s,o))return!1}else if(s!==o)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function HL(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(a=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function Cv(e){const t={};return e.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");t[decodeURIComponent(a)]=decodeURIComponent(s)}}),t}function _v(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function mue(e,t){const r=new pue(e,t);return r.subscribe.bind(r)}class pue{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,n){let a;if(t===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");gue(t,["next","error","complete"])?a=t:a={next:t,error:r,complete:n},a.next===void 0&&(a.next=xB),a.error===void 0&&(a.error=xB),a.complete===void 0&&(a.complete=xB);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gue(e,t){if(typeof e!="object"||e===null)return!1;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}function xB(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(e){return e&&e._delegate?e._delegate:e}class $m{constructor(t,r,n){this.name=t,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xue=class{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const n=new rue;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){var r;const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),a=(r=t==null?void 0:t.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(a)return null;throw s}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(yue(t))try{this.getOrInitializeService({instanceIdentifier:Zf})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(t=Zf){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Zf){return this.instances.has(t)}getOptions(t=Zf){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);n===l&&o.resolve(a)}return a}onInit(t,r){var n;const a=this.normalizeInstanceIdentifier(r),s=(n=this.onInitCallbacks.get(a))!==null&&n!==void 0?n:new Set;s.add(t),this.onInitCallbacks.set(a,s);const o=this.instances.get(a);return o&&t(o,a),()=>{s.delete(t)}}invokeOnInitCallbacks(t,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:vue(t),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=Zf){return this.component?this.component.multipleInstances?t:Zf:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function vue(e){return e===Zf?void 0:e}function yue(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bue{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new xue(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ln;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ln||(ln={}));const wue={debug:ln.DEBUG,verbose:ln.VERBOSE,info:ln.INFO,warn:ln.WARN,error:ln.ERROR,silent:ln.SILENT},Nue=ln.INFO,Cue={[ln.DEBUG]:"log",[ln.VERBOSE]:"log",[ln.INFO]:"info",[ln.WARN]:"warn",[ln.ERROR]:"error"},_ue=(e,t,...r)=>{if(t<e.logLevel)return;const n=new Date().toISOString(),a=Cue[t];if(a)console[a](`[${n}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let Q4=class{constructor(t){this.name=t,this._logLevel=Nue,this._logHandler=_ue,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ln))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?wue[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ln.DEBUG,...t),this._logHandler(this,ln.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ln.VERBOSE,...t),this._logHandler(this,ln.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ln.INFO,...t),this._logHandler(this,ln.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ln.WARN,...t),this._logHandler(this,ln.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ln.ERROR,...t),this._logHandler(this,ln.ERROR,...t)}};const Eue=(e,t)=>t.some(r=>e instanceof r);let $L,KL;function Sue(){return $L||($L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Iue(){return KL||(KL=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Vq=new WeakMap,fP=new WeakMap,Hq=new WeakMap,vB=new WeakMap,V4=new WeakMap;function Bue(e){const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{r(Gh(e.result)),a()},o=()=>{n(e.error),a()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(r=>{r instanceof IDBCursor&&Vq.set(r,e)}).catch(()=>{}),V4.set(t,e),t}function jue(e){if(fP.has(e))return;const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{r(),a()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});fP.set(e,t)}let mP={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return fP.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Hq.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Gh(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Pue(e){mP=e(mP)}function kue(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(yB(this),t,...r);return Hq.set(n,t.sort?t.sort():[t]),Gh(n)}:Iue().includes(e)?function(...t){return e.apply(yB(this),t),Gh(Vq.get(this))}:function(...t){return Gh(e.apply(yB(this),t))}}function Tue(e){return typeof e=="function"?kue(e):(e instanceof IDBTransaction&&jue(e),Eue(e,Sue())?new Proxy(e,mP):e)}function Gh(e){if(e instanceof IDBRequest)return Bue(e);if(vB.has(e))return vB.get(e);const t=Tue(e);return t!==e&&(vB.set(e,t),V4.set(t,e)),t}const yB=e=>V4.get(e);function Fue(e,t,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const o=indexedDB.open(e,t),l=Gh(o);return n&&o.addEventListener("upgradeneeded",c=>{n(Gh(o.result),c.oldVersion,c.newVersion,Gh(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),a&&c.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const Oue=["get","getKey","getAll","getAllKeys","count"],Due=["put","add","delete","clear"],bB=new Map;function qL(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(bB.get(t))return bB.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,a=Due.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||Oue.includes(r)))return;const s=async function(o,...l){const c=this.transaction(o,a?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),a&&c.done]))[0]};return bB.set(t,s),s}Pue(e=>({...e,get:(t,r,n)=>qL(t,r)||e.get(t,r,n),has:(t,r)=>!!qL(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rue{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(Lue(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function Lue(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const pP="@firebase/app",GL="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA=new Q4("@firebase/app"),Mue="@firebase/app-compat",Uue="@firebase/analytics-compat",Que="@firebase/analytics",Vue="@firebase/app-check-compat",Hue="@firebase/app-check",$ue="@firebase/auth",Kue="@firebase/auth-compat",que="@firebase/database",Gue="@firebase/data-connect",zue="@firebase/database-compat",Wue="@firebase/functions",Xue="@firebase/functions-compat",Jue="@firebase/installations",Yue="@firebase/installations-compat",Zue="@firebase/messaging",ede="@firebase/messaging-compat",tde="@firebase/performance",rde="@firebase/performance-compat",nde="@firebase/remote-config",ade="@firebase/remote-config-compat",sde="@firebase/storage",ide="@firebase/storage-compat",ode="@firebase/firestore",lde="@firebase/vertexai-preview",cde="@firebase/firestore-compat",ude="firebase",dde="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP="[DEFAULT]",Ade={[pP]:"fire-core",[Mue]:"fire-core-compat",[Que]:"fire-analytics",[Uue]:"fire-analytics-compat",[Hue]:"fire-app-check",[Vue]:"fire-app-check-compat",[$ue]:"fire-auth",[Kue]:"fire-auth-compat",[que]:"fire-rtdb",[Gue]:"fire-data-connect",[zue]:"fire-rtdb-compat",[Wue]:"fire-fn",[Xue]:"fire-fn-compat",[Jue]:"fire-iid",[Yue]:"fire-iid-compat",[Zue]:"fire-fcm",[ede]:"fire-fcm-compat",[tde]:"fire-perf",[rde]:"fire-perf-compat",[nde]:"fire-rc",[ade]:"fire-rc-compat",[sde]:"fire-gcs",[ide]:"fire-gcs-compat",[ode]:"fire-fst",[cde]:"fire-fst-compat",[lde]:"fire-vertex","fire-js":"fire-js",[ude]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg=new Map,xP=new Map,vP=new Map;function zL(e,t){try{e.container.addComponent(t)}catch(r){lA.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function vg(e){const t=e.name;if(vP.has(t))return lA.debug(`There were multiple attempts to register component ${t}.`),!1;vP.set(t,e);for(const r of xg.values())zL(r,e);for(const r of xP.values())zL(r,e);return!0}function H4(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function Vu(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hde={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zh=new Y1("app","Firebase",hde);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fde{constructor(t,r,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new $m("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw zh.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg=dde;function $4(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const n=Object.assign({name:gP,automaticDataCollectionEnabled:!1},t),a=n.name;if(typeof a!="string"||!a)throw zh.create("bad-app-name",{appName:String(a)});if(r||(r=Lq()),!r)throw zh.create("no-options");const s=xg.get(a);if(s){if(pC(r,s.options)&&pC(n,s.config))return s;throw zh.create("duplicate-app",{appName:a})}const o=new bue(a);for(const c of vP.values())o.addComponent(c);const l=new fde(r,n,o);return xg.set(a,l),l}function K4(e=gP){const t=xg.get(e);if(!t&&e===gP&&Lq())return $4();if(!t)throw zh.create("no-app",{appName:e});return t}async function mde(e){let t=!1;const r=e.name;xg.has(r)?(t=!0,xg.delete(r)):xP.has(r)&&e.decRefCount()<=0&&(xP.delete(r),t=!0),t&&(await Promise.all(e.container.getProviders().map(n=>n.delete())),e.isDeleted=!0)}function Wh(e,t,r){var n;let a=(n=Ade[e])!==null&&n!==void 0?n:e;r&&(a+=`-${r}`);const s=a.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const l=[`Unable to register library "${a}" with version "${t}":`];s&&l.push(`library name "${a}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),lA.warn(l.join(" "));return}vg(new $m(`${a}-version`,()=>({library:a,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pde="firebase-heartbeat-database",gde=1,$y="firebase-heartbeat-store";let wB=null;function $q(){return wB||(wB=Fue(pde,gde,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore($y)}catch(r){console.warn(r)}}}}).catch(e=>{throw zh.create("idb-open",{originalErrorMessage:e.message})})),wB}async function xde(e){try{const r=(await $q()).transaction($y),n=await r.objectStore($y).get(Kq(e));return await r.done,n}catch(t){if(t instanceof wA)lA.warn(t.message);else{const r=zh.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});lA.warn(r.message)}}}async function WL(e,t){try{const n=(await $q()).transaction($y,"readwrite");await n.objectStore($y).put(t,Kq(e)),await n.done}catch(r){if(r instanceof wA)lA.warn(r.message);else{const n=zh.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});lA.warn(n.message)}}}function Kq(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vde=1024,yde=30*24*60*60*1e3;class bde{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Nde(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=XL();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=yde}),this._storage.overwrite(this._heartbeatsCache))}catch(n){lA.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=XL(),{heartbeatsToSend:n,unsentEntries:a}=wde(this._heartbeatsCache.heartbeats),s=mC(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return lA.warn(r),""}}}function XL(){return new Date().toISOString().substring(0,10)}function wde(e,t=vde){const r=[];let n=e.slice();for(const a of e){const s=r.find(o=>o.agent===a.agent);if(s){if(s.dates.push(a.date),JL(r)>t){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),JL(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Nde{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Qq()?uue().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await xde(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return WL(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return WL(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...t.heartbeats]})}else return}}function JL(e){return mC(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cde(e){vg(new $m("platform-logger",t=>new Rue(t),"PRIVATE")),vg(new $m("heartbeat",t=>new bde(t),"PRIVATE")),Wh(pP,GL,e),Wh(pP,GL,"esm2017"),Wh("fire-js","")}Cde("");function q4(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function qq(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _de=qq,Gq=new Y1("auth","Firebase",qq());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=new Q4("@firebase/auth");function Ede(e,...t){gC.logLevel<=ln.WARN&&gC.warn(`Auth (${Gg}): ${e}`,...t)}function yN(e,...t){gC.logLevel<=ln.ERROR&&gC.error(`Auth (${Gg}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(e,...t){throw G4(e,...t)}function Xu(e,...t){return G4(e,...t)}function zq(e,t,r){const n=Object.assign(Object.assign({},_de()),{[t]:r});return new Y1("auth","Firebase",n).create(t,{appName:e.name})}function zd(e){return zq(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function G4(e,...t){if(typeof e!="string"){const r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return Gq.create(e,...t)}function Or(e,t,...r){if(!e)throw G4(t,...r)}function Md(e){const t="INTERNAL ASSERTION FAILED: "+e;throw yN(t),new Error(t)}function cA(e,t){e||Md(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function Sde(){return YL()==="http:"||YL()==="https:"}function YL(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ide(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Sde()||oue()||"connection"in navigator)?navigator.onLine:!0}function Bde(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(t,r){this.shortDelay=t,this.longDelay=r,cA(r>t,"Short delay should be less than long delay!"),this.isMobile=aue()||lue()}get(){return Ide()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z4(e,t){cA(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wq{static initialize(t,r,n){this.fetchImpl=t,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Md("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Md("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Md("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jde={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pde=new eb(3e4,6e4);function Cf(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function _f(e,t,r,n,a={}){return Xq(e,a,async()=>{let s={},o={};n&&(t==="GET"?o=n:s={body:JSON.stringify(n)});const l=Z1(Object.assign({key:e.config.apiKey},o)).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const u=Object.assign({method:t,headers:c},s);return iue()||(u.referrerPolicy="no-referrer"),Wq.fetch()(Jq(e,e.config.apiHost,r,l),u)})}async function Xq(e,t,r){e._canInitEmulator=!1;const n=Object.assign(Object.assign({},jde),t);try{const a=new Tde(e),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Pw(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pw(e,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Pw(e,"email-already-in-use",o);if(c==="USER_DISABLED")throw Pw(e,"user-disabled",o);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw zq(e,d,u);uu(e,d)}}catch(a){if(a instanceof wA)throw a;uu(e,"network-request-failed",{message:String(a)})}}async function tb(e,t,r,n,a={}){const s=await _f(e,t,r,n,a);return"mfaPendingCredential"in s&&uu(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Jq(e,t,r,n){const a=`${t}${r}?${n}`;return e.config.emulator?z4(e.config,a):`${e.config.apiScheme}://${a}`}function kde(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Tde{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Xu(this.auth,"network-request-failed")),Pde.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Pw(e,t,r){const n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=Xu(e,t,n);return a.customData._tokenResponse=r,a}function ZL(e){return e!==void 0&&e.enterprise!==void 0}class Fde{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return kde(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}}async function Ode(e,t){return _f(e,"GET","/v2/recaptchaConfig",Cf(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dde(e,t){return _f(e,"POST","/v1/accounts:delete",t)}async function Yq(e,t){return _f(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Rde(e,t=!1){const r=Ka(e),n=await r.getIdToken(t),a=W4(n);Or(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:Yv(NB(a.auth_time)),issuedAtTime:Yv(NB(a.iat)),expirationTime:Yv(NB(a.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function NB(e){return Number(e)*1e3}function W4(e){const[t,r,n]=e.split(".");if(t===void 0||r===void 0||n===void 0)return yN("JWT malformed, contained fewer than 3 sections"),null;try{const a=Dq(r);return a?JSON.parse(a):(yN("Failed to decode base64 JWT payload"),null)}catch(a){return yN("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function eM(e){const t=W4(e);return Or(t,"internal-error"),Or(typeof t.exp<"u","internal-error"),Or(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ky(e,t,r=!1){if(r)return t;try{return await t}catch(n){throw n instanceof wA&&Lde(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}function Lde({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mde{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var r;if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yv(this.lastLoginAt),this.creationTime=Yv(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xC(e){var t;const r=e.auth,n=await e.getIdToken(),a=await Ky(e,Yq(r,{idToken:n}));Or(a==null?void 0:a.users.length,r,"internal-error");const s=a.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?Zq(s.providerUserInfo):[],l=Qde(e.providerData,o),c=e.isAnonymous,u=!(e.email&&s.passwordHash)&&!(l!=null&&l.length),d=c?u:!1,A={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new bP(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,A)}async function Ude(e){const t=Ka(e);await xC(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Qde(e,t){return[...e.filter(n=>!t.some(a=>a.providerId===n.providerId)),...t]}function Zq(e){return e.map(t=>{var{providerId:r}=t,n=q4(t,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vde(e,t){const r=await Xq(e,{},async()=>{const n=Z1({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:s}=e.config,o=Jq(e,a,"/v1/token",`key=${s}`),l=await e._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",Wq.fetch()(o,{method:"POST",headers:l,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function Hde(e,t){return _f(e,"POST","/v2/accounts:revokeToken",Cf(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Or(t.idToken,"internal-error"),Or(typeof t.idToken<"u","internal-error"),Or(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):eM(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){Or(t.length!==0,"internal-error");const r=eM(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Or(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await Vde(t,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(t,r,n){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,o=new eg;return n&&(Or(typeof n=="string","internal-error",{appName:t}),o.refreshToken=n),a&&(Or(typeof a=="string","internal-error",{appName:t}),o.accessToken=a),s&&(Or(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new eg,this.toJSON())}_performRefresh(){return Md("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(e,t){Or(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Ud{constructor(t){var{uid:r,auth:n,stsTokenManager:a}=t,s=q4(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mde(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new bP(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const r=await Ky(this,this.stsTokenManager.getToken(this.auth,t));return Or(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return Rde(this,t)}reload(){return Ude(this)}_assign(t){this!==t&&(Or(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>Object.assign({},r)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new Ud(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(t){Or(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),r&&await xC(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vu(this.auth.app))return Promise.reject(zd(this.auth));const t=await this.getIdToken();return await Ky(this,Dde(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){var n,a,s,o,l,c,u,d;const A=(n=r.displayName)!==null&&n!==void 0?n:void 0,f=(a=r.email)!==null&&a!==void 0?a:void 0,h=(s=r.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=r.photoURL)!==null&&o!==void 0?o:void 0,p=(l=r.tenantId)!==null&&l!==void 0?l:void 0,g=(c=r._redirectEventId)!==null&&c!==void 0?c:void 0,x=(u=r.createdAt)!==null&&u!==void 0?u:void 0,y=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:b,emailVerified:_,isAnonymous:T,providerData:P,stsTokenManager:C}=r;Or(b&&C,t,"internal-error");const S=eg.fromJSON(this.name,C);Or(typeof b=="string",t,"internal-error"),th(A,t.name),th(f,t.name),Or(typeof _=="boolean",t,"internal-error"),Or(typeof T=="boolean",t,"internal-error"),th(h,t.name),th(m,t.name),th(p,t.name),th(g,t.name),th(x,t.name),th(y,t.name);const I=new Ud({uid:b,auth:t,email:f,emailVerified:_,displayName:A,isAnonymous:T,photoURL:m,phoneNumber:h,tenantId:p,stsTokenManager:S,createdAt:x,lastLoginAt:y});return P&&Array.isArray(P)&&(I.providerData=P.map(L=>Object.assign({},L))),g&&(I._redirectEventId=g),I}static async _fromIdTokenResponse(t,r,n=!1){const a=new eg;a.updateFromServerResponse(r);const s=new Ud({uid:r.localId,auth:t,stsTokenManager:a,isAnonymous:n});return await xC(s),s}static async _fromGetAccountInfoResponse(t,r,n){const a=r.users[0];Or(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?Zq(a.providerUserInfo):[],o=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),l=new eg;l.updateFromIdToken(n);const c=new Ud({uid:a.localId,auth:t,stsTokenManager:l,isAnonymous:o}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new bP(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=new Map;function Qd(e){cA(e instanceof Function,"Expected a class definition");let t=tM.get(e);return t?(cA(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,tM.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eG{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}eG.type="NONE";const rM=eG;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(e,t,r){return`firebase:${e}:${t}:${r}`}class tg{constructor(t,r,n){this.persistence=t,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=bN(this.userKey,a.apiKey,s),this.fullPersistenceKey=bN("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Ud._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,n="authUser"){if(!r.length)return new tg(Qd(rM),t,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||Qd(rM);const o=bN(n,t.config.apiKey,t.name);let l=null;for(const u of r)try{const d=await u._get(o);if(d){const A=Ud._fromJSON(t,d);u!==s&&(l=A),s=u;break}}catch{}const c=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new tg(s,t,n):(s=c[0],l&&await s._set(o,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new tg(s,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nM(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(aG(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(tG(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(iG(t))return"Blackberry";if(oG(t))return"Webos";if(rG(t))return"Safari";if((t.includes("chrome/")||nG(t))&&!t.includes("edge/"))return"Chrome";if(sG(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function tG(e=qs()){return/firefox\//i.test(e)}function rG(e=qs()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function nG(e=qs()){return/crios\//i.test(e)}function aG(e=qs()){return/iemobile/i.test(e)}function sG(e=qs()){return/android/i.test(e)}function iG(e=qs()){return/blackberry/i.test(e)}function oG(e=qs()){return/webos/i.test(e)}function X4(e=qs()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function $de(e=qs()){var t;return X4(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function Kde(){return cue()&&document.documentMode===10}function lG(e=qs()){return X4(e)||sG(e)||oG(e)||iG(e)||/windows phone/i.test(e)||aG(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cG(e,t=[]){let r;switch(e){case"Browser":r=nM(qs());break;case"Worker":r=`${nM(qs())}-${e}`;break;default:r=e}const n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${Gg}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qde{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const n=s=>new Promise((o,l)=>{try{const c=t(s);o(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const n of this.queue)await n(t),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gde(e,t={}){return _f(e,"GET","/v2/passwordPolicy",Cf(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zde=6;class Wde{constructor(t){var r,n,a,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:zde,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(n=t.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var r,n,a,s,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,c),this.validatePasswordCharacterOptions(t,c),c.isValid&&(c.isValid=(r=c.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(n=c.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(a=c.containsLowercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(t,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=t.length>=n),a&&(r.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<t.length;a++)n=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xde{constructor(t,r,n,a){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new aM(this),this.idTokenSubscription=new aM(this),this.beforeStateQueue=new qde(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Gq,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=Qd(r)),this._initializationPromise=this.queue(async()=>{var n,a;if(!this._deleted&&(this.persistenceManager=await tg.create(this,t),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await Yq(this,{idToken:t}),n=await Ud._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var r;if(Vu(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=a==null?void 0:a._redirectEventId,c=await this.tryRedirectSignIn(t);(!o||o===l)&&(c!=null&&c.user)&&(a=c.user,s=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(a)}catch(o){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Or(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await xC(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Bde()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Vu(this.app))return Promise.reject(zd(this));const r=t?Ka(t):null;return r&&Or(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&Or(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Vu(this.app)?Promise.reject(zd(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Vu(this.app)?Promise.reject(zd(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qd(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Gde(this),r=new Wde(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Y1("auth","Firebase",t())}onAuthStateChanged(t,r,n){return this.registerStateListener(this.authStateSubscription,t,r,n)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,n){return this.registerStateListener(this.idTokenSubscription,t,r,n)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await Hde(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,r){const n=await this.getOrInitRedirectPersistenceManager(r);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&Qd(t)||this._popupRedirectResolver;Or(r,this,"argument-error"),this.redirectPersistenceManager=await tg.create(this,[Qd(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===t?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Or(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof r=="function"){const c=t.addObserver(r,n,a);return()=>{o=!0,c()}}else{const c=t.addObserver(r);return()=>{o=!0,c()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Or(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=cG(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(r["X-Firebase-AppCheck"]=a),r}async _getAppCheckToken(){var t;const r=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return r!=null&&r.error&&Ede(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function v0(e){return Ka(e)}class aM{constructor(t){this.auth=t,this.observer=null,this.addObserver=mue(r=>this.observer=r)}get next(){return Or(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wE={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Jde(e){wE=e}function uG(e){return wE.loadJS(e)}function Yde(){return wE.recaptchaEnterpriseScript}function Zde(){return wE.gapiScript}function eAe(e){return`__${e}${Math.floor(Math.random()*1e6)}`}const tAe="recaptcha-enterprise",rAe="NO_RECAPTCHA";class nAe{constructor(t){this.type=tAe,this.auth=v0(t)}async verify(t="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{Ode(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new Fde(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function a(s,o,l){const c=window.grecaptcha;ZL(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:t}).then(u=>{o(u)}).catch(()=>{o(rAe)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{n(this.auth).then(l=>{if(!r&&ZL(window.grecaptcha))a(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Yde();c.length!==0&&(c+=l),uG(c).then(()=>{a(l,s,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function sM(e,t,r,n=!1){const a=new nAe(e);let s;try{s=await a.verify(r)}catch{s=await a.verify(r,!0)}const o=Object.assign({},t);return n?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function wP(e,t,r,n){var a;if(!((a=e._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await sM(e,t,r,r==="getOobCode");return n(e,s)}else return n(e,t).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await sM(e,t,r,r==="getOobCode");return n(e,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aAe(e,t){const r=H4(e,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(pC(s,t??{}))return a;uu(a,"already-initialized")}return r.initialize({options:t})}function sAe(e,t){const r=(t==null?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Qd);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,t==null?void 0:t.popupRedirectResolver)}function iAe(e,t,r){const n=v0(e);Or(n._canInitEmulator,n,"emulator-config-failed"),Or(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const a=!1,s=dG(t),{host:o,port:l}=oAe(t),c=l===null?"":`:${l}`;n.config.emulator={url:`${s}//${o}${c}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})}),lAe()}function dG(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function oAe(e){const t=dG(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:iM(n.substr(s.length+1))}}else{const[s,o]=n.split(":");return{host:s,port:iM(o)}}}function iM(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function lAe(){function e(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return Md("not implemented")}_getIdTokenResponse(t){return Md("not implemented")}_linkToIdToken(t,r){return Md("not implemented")}_getReauthenticationResolver(t){return Md("not implemented")}}async function cAe(e,t){return _f(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uAe(e,t){return tb(e,"POST","/v1/accounts:signInWithPassword",Cf(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dAe(e,t){return tb(e,"POST","/v1/accounts:signInWithEmailLink",Cf(e,t))}async function AAe(e,t){return tb(e,"POST","/v1/accounts:signInWithEmailLink",Cf(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy extends J4{constructor(t,r,n,a=null){super("password",n),this._email=t,this._password=r,this._tenantId=a}static _fromEmailAndPassword(t,r){return new qy(t,r,"password")}static _fromEmailAndCode(t,r,n=null){return new qy(t,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wP(t,r,"signInWithPassword",uAe);case"emailLink":return dAe(t,{email:this._email,oobCode:this._password});default:uu(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wP(t,n,"signUpPassword",cAe);case"emailLink":return AAe(t,{idToken:r,email:this._email,oobCode:this._password});default:uu(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rg(e,t){return tb(e,"POST","/v1/accounts:signInWithIdp",Cf(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hAe="http://localhost";class Km extends J4{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new Km(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):uu("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:a}=r,s=q4(r,["providerId","signInMethod"]);if(!n||!a)return null;const o=new Km(n,a);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const r=this.buildRequest();return rg(t,r)}_linkToIdToken(t,r){const n=this.buildRequest();return n.idToken=r,rg(t,n)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,rg(t,r)}buildRequest(){const t={requestUri:hAe,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=Z1(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fAe(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mAe(e){const t=Cv(_v(e)).link,r=t?Cv(_v(t)).deep_link_id:null,n=Cv(_v(e)).deep_link_id;return(n?Cv(_v(n)).link:null)||n||r||t||e}class Y4{constructor(t){var r,n,a,s,o,l;const c=Cv(_v(t)),u=(r=c.apiKey)!==null&&r!==void 0?r:null,d=(n=c.oobCode)!==null&&n!==void 0?n:null,A=fAe((a=c.mode)!==null&&a!==void 0?a:null);Or(u&&d&&A,"argument-error"),this.apiKey=u,this.operation=A,this.code=d,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(t){const r=mAe(t);try{return new Y4(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(){this.providerId=zg.PROVIDER_ID}static credential(t,r){return qy._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const n=Y4.parseLink(r);return Or(n,"argument-error"),qy._fromEmailAndCode(t,n.code,n.tenantId)}}zg.PROVIDER_ID="password";zg.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zg.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AG{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb extends AG{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh extends rb{constructor(){super("facebook.com")}static credential(t){return Km._fromParams({providerId:bh.PROVIDER_ID,signInMethod:bh.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return bh.credentialFromTaggedObject(t)}static credentialFromError(t){return bh.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return bh.credential(t.oauthAccessToken)}catch{return null}}}bh.FACEBOOK_SIGN_IN_METHOD="facebook.com";bh.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh extends rb{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Km._fromParams({providerId:wh.PROVIDER_ID,signInMethod:wh.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return wh.credentialFromTaggedObject(t)}static credentialFromError(t){return wh.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:n}=t;if(!r&&!n)return null;try{return wh.credential(r,n)}catch{return null}}}wh.GOOGLE_SIGN_IN_METHOD="google.com";wh.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh extends rb{constructor(){super("github.com")}static credential(t){return Km._fromParams({providerId:Nh.PROVIDER_ID,signInMethod:Nh.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Nh.credentialFromTaggedObject(t)}static credentialFromError(t){return Nh.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Nh.credential(t.oauthAccessToken)}catch{return null}}}Nh.GITHUB_SIGN_IN_METHOD="github.com";Nh.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch extends rb{constructor(){super("twitter.com")}static credential(t,r){return Km._fromParams({providerId:Ch.PROVIDER_ID,signInMethod:Ch.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return Ch.credentialFromTaggedObject(t)}static credentialFromError(t){return Ch.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=t;if(!r||!n)return null;try{return Ch.credential(r,n)}catch{return null}}}Ch.TWITTER_SIGN_IN_METHOD="twitter.com";Ch.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pAe(e,t){return tb(e,"POST","/v1/accounts:signUp",Cf(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,n,a=!1){const s=await Ud._fromIdTokenResponse(t,n,a),o=oM(n);return new qm({user:s,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(t,r,n){await t._updateTokensIfNecessary(n,!0);const a=oM(n);return new qm({user:t,providerId:a,_tokenResponse:n,operationType:r})}}function oM(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC extends wA{constructor(t,r,n,a){var s;super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,vC.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,r,n,a){return new vC(t,r,n,a)}}function hG(e,t,r,n){return(t==="reauthenticate"?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?vC._fromErrorAndOperation(e,s,t,n):s})}async function gAe(e,t,r=!1){const n=await Ky(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return qm._forOperation(e,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xAe(e,t,r=!1){const{auth:n}=e;if(Vu(n.app))return Promise.reject(zd(n));const a="reauthenticate";try{const s=await Ky(e,hG(n,a,t,e),r);Or(s.idToken,n,"internal-error");const o=W4(s.idToken);Or(o,n,"internal-error");const{sub:l}=o;return Or(e.uid===l,n,"user-mismatch"),qm._forOperation(e,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&uu(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fG(e,t,r=!1){if(Vu(e.app))return Promise.reject(zd(e));const n="signIn",a=await hG(e,n,t),s=await qm._fromIdTokenResponse(e,n,a);return r||await e._updateCurrentUser(s.user),s}async function vAe(e,t){return fG(v0(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mG(e){const t=v0(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function yAe(e,t,r){if(Vu(e.app))return Promise.reject(zd(e));const n=v0(e),o=await wP(n,{returnSecureToken:!0,email:t,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",pAe).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&mG(e),c}),l=await qm._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(l.user),l}function bAe(e,t,r){return Vu(e.app)?Promise.reject(zd(e)):vAe(Ka(e),zg.credential(t,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&mG(e),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wAe(e,t){return Ka(e).setPersistence(t)}function NAe(e,t,r,n){return Ka(e).onIdTokenChanged(t,r,n)}function CAe(e,t,r){return Ka(e).beforeAuthStateChanged(t,r)}function pG(e,t,r,n){return Ka(e).onAuthStateChanged(t,r,n)}function NE(e){return Ka(e).signOut()}const yC="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gG{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(yC,"1"),this.storage.removeItem(yC),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Ae=1e3,EAe=10;class xG extends gG{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lG(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&t(r,a,n)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const n=t.key;r?this.detachListener():this.stopPolling();const a=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},s=this.storage.getItem(n);Kde()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,EAe):a()}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:n}),!0)})},_Ae)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}xG.type="LOCAL";const vG=xG;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yG extends gG{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}yG.type="SESSION";const bG=yG;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SAe(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(a=>a.isListeningto(t));if(r)return r;const n=new CE(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:n,eventType:a,data:s}=r.data,o=this.handlersMap[a];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const l=Array.from(o).map(async u=>u(r.origin,s)),c=await SAe(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:c})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}CE.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(e="",t=10){let r="";for(let n=0;n<t;n++)r+=Math.floor(Math.random()*10);return e+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IAe{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,o;return new Promise((l,c)=>{const u=Z4("",20);a.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:a,onMessage(A){const f=A;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(f.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:u,data:r},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(){return window}function BAe(e){Ju().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wG(){return typeof Ju().WorkerGlobalScope<"u"&&typeof Ju().importScripts=="function"}async function jAe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function PAe(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function kAe(){return wG()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NG="firebaseLocalStorageDb",TAe=1,bC="firebaseLocalStorage",CG="fbase_key";class nb{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function _E(e,t){return e.transaction([bC],t?"readwrite":"readonly").objectStore(bC)}function FAe(){const e=indexedDB.deleteDatabase(NG);return new nb(e).toPromise()}function NP(){const e=indexedDB.open(NG,TAe);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{const n=e.result;try{n.createObjectStore(bC,{keyPath:CG})}catch(a){r(a)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(bC)?t(n):(n.close(),await FAe(),t(await NP()))})})}async function lM(e,t,r){const n=_E(e,!0).put({[CG]:t,value:r});return new nb(n).toPromise()}async function OAe(e,t){const r=_E(e,!1).get(t),n=await new nb(r).toPromise();return n===void 0?null:n.value}function cM(e,t){const r=_E(e,!0).delete(t);return new nb(r).toPromise()}const DAe=800,RAe=3;class _G{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await NP(),this.db)}async _withRetries(t){let r=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(r++>RAe)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wG()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=CE._getInstance(kAe()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await jAe(),!this.activeServiceWorker)return;this.sender=new IAe(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((t=n[0])===null||t===void 0)&&t.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||PAe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await NP();return await lM(t,yC,"1"),await cM(t,yC),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>lM(n,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(n=>OAe(n,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>cM(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const s=_E(a,!1).getAll();return new nb(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(t.length!==0)for(const{fbase_key:a,value:s}of t)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DAe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_G.type="LOCAL";const LAe=_G;new eb(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MAe(e,t){return t?Qd(t):(Or(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF extends J4{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return rg(t,this._buildIdpRequest())}_linkToIdToken(t,r){return rg(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return rg(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function UAe(e){return fG(e.auth,new eF(e),e.bypassAuthState)}function QAe(e){const{auth:t,user:r}=e;return Or(r,t,"internal-error"),xAe(r,new eF(e),e.bypassAuthState)}async function VAe(e){const{auth:t,user:r}=e;return Or(r,t,"internal-error"),gAe(r,new eF(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EG{constructor(t,r,n,a,s=!1){this.auth=t,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:o,type:l}=t;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return UAe;case"linkViaPopup":case"linkViaRedirect":return VAe;case"reauthViaPopup":case"reauthViaRedirect":return QAe;default:uu(this.auth,"internal-error")}}resolve(t){cA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){cA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HAe=new eb(2e3,1e4);class Hp extends EG{constructor(t,r,n,a,s){super(t,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,Hp.currentPopupAction&&Hp.currentPopupAction.cancel(),Hp.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Or(t,this.auth,"internal-error"),t}async onExecution(){cA(this.filter.length===1,"Popup operations only handle one event");const t=Z4();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Xu(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Xu(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hp.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xu(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,HAe.get())};t()}}Hp.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Ae="pendingRedirect",wN=new Map;class KAe extends EG{constructor(t,r,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let t=wN.get(this.auth._key());if(!t){try{const n=await qAe(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(r){t=()=>Promise.reject(r)}wN.set(this.auth._key(),t)}return this.bypassAuthState||wN.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function qAe(e,t){const r=WAe(t),n=zAe(e);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function GAe(e,t){wN.set(e._key(),t)}function zAe(e){return Qd(e._redirectPersistence)}function WAe(e){return bN($Ae,e.config.apiKey,e.name)}async function XAe(e,t,r=!1){if(Vu(e.app))return Promise.reject(zd(e));const n=v0(e),a=MAe(n,t),o=await new KAe(n,a,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JAe=10*60*1e3;class YAe{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(r=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!ZAe(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var n;if(t.error&&!SG(t)){const a=((n=t.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Xu(this.auth,a))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const n=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=JAe&&this.cachedEventUids.clear(),this.cachedEventUids.has(uM(t))}saveEventToCache(t){this.cachedEventUids.add(uM(t)),this.lastProcessedEventTime=Date.now()}}function uM(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function SG({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function ZAe(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return SG(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ehe(e,t={}){return _f(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const the=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rhe=/^https?/;async function nhe(e){if(e.config.emulator)return;const{authorizedDomains:t}=await ehe(e);for(const r of t)try{if(ahe(r))return}catch{}uu(e,"unauthorized-domain")}function ahe(e){const t=yP(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&n===""?r==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!rhe.test(r))return!1;if(the.test(e))return n===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const she=new eb(3e4,6e4);function dM(){const e=Ju().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}}function ihe(e){return new Promise((t,r)=>{var n,a,s;function o(){dM(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{dM(),r(Xu(e,"network-request-failed"))},timeout:she.get()})}if(!((a=(n=Ju().gapi)===null||n===void 0?void 0:n.iframes)===null||a===void 0)&&a.Iframe)t(gapi.iframes.getContext());else if(!((s=Ju().gapi)===null||s===void 0)&&s.load)o();else{const l=eAe("iframefcb");return Ju()[l]=()=>{gapi.load?o():r(Xu(e,"network-request-failed"))},uG(`${Zde()}?onload=${l}`).catch(c=>r(c))}}).catch(t=>{throw NN=null,t})}let NN=null;function ohe(e){return NN=NN||ihe(e),NN}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lhe=new eb(5e3,15e3),che="__/auth/iframe",uhe="emulator/auth/iframe",dhe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ahe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hhe(e){const t=e.config;Or(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?z4(t,uhe):`https://${e.config.authDomain}/${che}`,n={apiKey:t.apiKey,appName:e.name,v:Gg},a=Ahe.get(e.config.apiHost);a&&(n.eid=a);const s=e._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${Z1(n).slice(1)}`}async function fhe(e){const t=await ohe(e),r=Ju().gapi;return Or(r,e,"internal-error"),t.open({where:document.body,url:hhe(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dhe,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const o=Xu(e,"network-request-failed"),l=Ju().setTimeout(()=>{s(o)},lhe.get());function c(){Ju().clearTimeout(l),a(n)}n.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mhe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},phe=500,ghe=600,xhe="_blank",vhe="http://localhost";class AM{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function yhe(e,t,r,n=phe,a=ghe){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c=Object.assign(Object.assign({},mhe),{width:n.toString(),height:a.toString(),top:s,left:o}),u=qs().toLowerCase();r&&(l=nG(u)?xhe:r),tG(u)&&(t=t||vhe,c.scrollbars="yes");const d=Object.entries(c).reduce((f,[h,m])=>`${f}${h}=${m},`,"");if($de(u)&&l!=="_self")return bhe(t||"",l),new AM(null);const A=window.open(t||"",l,d);Or(A,e,"popup-blocked");try{A.focus()}catch{}return new AM(A)}function bhe(e,t){const r=document.createElement("a");r.href=e,r.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const whe="__/auth/handler",Nhe="emulator/auth/handler",Che=encodeURIComponent("fac");async function hM(e,t,r,n,a,s){Or(e.config.authDomain,e,"auth-domain-config-required"),Or(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:Gg,eventId:a};if(t instanceof AG){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",fue(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,A]of Object.entries({}))o[d]=A}if(t instanceof rb){const d=t.getScopes().filter(A=>A!=="");d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await e._getAppCheckToken(),u=c?`#${Che}=${encodeURIComponent(c)}`:"";return`${_he(e)}?${Z1(l).slice(1)}${u}`}function _he({config:e}){return e.emulator?z4(e,Nhe):`https://${e.authDomain}/${whe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CB="webStorageSupport";class Ehe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bG,this._completeRedirectFn=XAe,this._overrideRedirectResult=GAe}async _openPopup(t,r,n,a){var s;cA((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await hM(t,r,n,yP(),a);return yhe(t,o,Z4())}async _openRedirect(t,r,n,a){await this._originValidation(t);const s=await hM(t,r,n,yP(),a);return BAe(s),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(cA(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(t);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(t){const r=await fhe(t),n=new YAe(t);return r.register("authEvent",a=>(Or(a==null?void 0:a.authEvent,t,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=r,n}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(CB,{type:CB},a=>{var s;const o=(s=a==null?void 0:a[0])===null||s===void 0?void 0:s[CB];o!==void 0&&r(!!o),uu(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=nhe(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return lG()||rG()||X4()}}const She=Ehe;var fM="@firebase/auth",mM="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ihe{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(n=>{t((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Or(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bhe(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jhe(e){vg(new $m("auth",(t,{options:r})=>{const n=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;Or(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:o,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cG(e)},u=new Xde(n,a,s,c);return sAe(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,n)=>{t.getProvider("auth-internal").initialize()})),vg(new $m("auth-internal",t=>{const r=v0(t.getProvider("auth").getImmediate());return(n=>new Ihe(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wh(fM,mM,Bhe(e)),Wh(fM,mM,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Phe=5*60,khe=Mq("authIdTokenMaxAge")||Phe;let pM=null;const The=e=>async t=>{const r=t&&await t.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>khe)return;const a=r==null?void 0:r.token;pM!==a&&(pM=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function IG(e=K4()){const t=H4(e,"auth");if(t.isInitialized())return t.getImmediate();const r=aAe(e,{popupRedirectResolver:She,persistence:[LAe,vG,bG]}),n=Mq("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const o=The(s.toString());CAe(r,o,()=>o(r.currentUser)),NAe(r,l=>o(l))}}const a=Rq("auth");return a&&iAe(r,`http://${a}`),r}function Fhe(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}Jde({loadJS(e){return new Promise((t,r)=>{const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=a=>{const s=Xu("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",Fhe().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jhe("Browser");var Ohe="firebase",Dhe="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wh(Ohe,Dhe,"app");var gM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cm,BG;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(C,S){function I(){}I.prototype=S.prototype,C.D=S.prototype,C.prototype=new I,C.prototype.constructor=C,C.C=function(L,E,j){for(var R=Array(arguments.length-2),W=2;W<arguments.length;W++)R[W-2]=arguments[W];return S.prototype[E].apply(L,R)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,S,I){I||(I=0);var L=Array(16);if(typeof S=="string")for(var E=0;16>E;++E)L[E]=S.charCodeAt(I++)|S.charCodeAt(I++)<<8|S.charCodeAt(I++)<<16|S.charCodeAt(I++)<<24;else for(E=0;16>E;++E)L[E]=S[I++]|S[I++]<<8|S[I++]<<16|S[I++]<<24;S=C.g[0],I=C.g[1],E=C.g[2];var j=C.g[3],R=S+(j^I&(E^j))+L[0]+3614090360&4294967295;S=I+(R<<7&4294967295|R>>>25),R=j+(E^S&(I^E))+L[1]+3905402710&4294967295,j=S+(R<<12&4294967295|R>>>20),R=E+(I^j&(S^I))+L[2]+606105819&4294967295,E=j+(R<<17&4294967295|R>>>15),R=I+(S^E&(j^S))+L[3]+3250441966&4294967295,I=E+(R<<22&4294967295|R>>>10),R=S+(j^I&(E^j))+L[4]+4118548399&4294967295,S=I+(R<<7&4294967295|R>>>25),R=j+(E^S&(I^E))+L[5]+1200080426&4294967295,j=S+(R<<12&4294967295|R>>>20),R=E+(I^j&(S^I))+L[6]+2821735955&4294967295,E=j+(R<<17&4294967295|R>>>15),R=I+(S^E&(j^S))+L[7]+4249261313&4294967295,I=E+(R<<22&4294967295|R>>>10),R=S+(j^I&(E^j))+L[8]+1770035416&4294967295,S=I+(R<<7&4294967295|R>>>25),R=j+(E^S&(I^E))+L[9]+2336552879&4294967295,j=S+(R<<12&4294967295|R>>>20),R=E+(I^j&(S^I))+L[10]+4294925233&4294967295,E=j+(R<<17&4294967295|R>>>15),R=I+(S^E&(j^S))+L[11]+2304563134&4294967295,I=E+(R<<22&4294967295|R>>>10),R=S+(j^I&(E^j))+L[12]+1804603682&4294967295,S=I+(R<<7&4294967295|R>>>25),R=j+(E^S&(I^E))+L[13]+4254626195&4294967295,j=S+(R<<12&4294967295|R>>>20),R=E+(I^j&(S^I))+L[14]+2792965006&4294967295,E=j+(R<<17&4294967295|R>>>15),R=I+(S^E&(j^S))+L[15]+1236535329&4294967295,I=E+(R<<22&4294967295|R>>>10),R=S+(E^j&(I^E))+L[1]+4129170786&4294967295,S=I+(R<<5&4294967295|R>>>27),R=j+(I^E&(S^I))+L[6]+3225465664&4294967295,j=S+(R<<9&4294967295|R>>>23),R=E+(S^I&(j^S))+L[11]+643717713&4294967295,E=j+(R<<14&4294967295|R>>>18),R=I+(j^S&(E^j))+L[0]+3921069994&4294967295,I=E+(R<<20&4294967295|R>>>12),R=S+(E^j&(I^E))+L[5]+3593408605&4294967295,S=I+(R<<5&4294967295|R>>>27),R=j+(I^E&(S^I))+L[10]+38016083&4294967295,j=S+(R<<9&4294967295|R>>>23),R=E+(S^I&(j^S))+L[15]+3634488961&4294967295,E=j+(R<<14&4294967295|R>>>18),R=I+(j^S&(E^j))+L[4]+3889429448&4294967295,I=E+(R<<20&4294967295|R>>>12),R=S+(E^j&(I^E))+L[9]+568446438&4294967295,S=I+(R<<5&4294967295|R>>>27),R=j+(I^E&(S^I))+L[14]+3275163606&4294967295,j=S+(R<<9&4294967295|R>>>23),R=E+(S^I&(j^S))+L[3]+4107603335&4294967295,E=j+(R<<14&4294967295|R>>>18),R=I+(j^S&(E^j))+L[8]+1163531501&4294967295,I=E+(R<<20&4294967295|R>>>12),R=S+(E^j&(I^E))+L[13]+2850285829&4294967295,S=I+(R<<5&4294967295|R>>>27),R=j+(I^E&(S^I))+L[2]+4243563512&4294967295,j=S+(R<<9&4294967295|R>>>23),R=E+(S^I&(j^S))+L[7]+1735328473&4294967295,E=j+(R<<14&4294967295|R>>>18),R=I+(j^S&(E^j))+L[12]+2368359562&4294967295,I=E+(R<<20&4294967295|R>>>12),R=S+(I^E^j)+L[5]+4294588738&4294967295,S=I+(R<<4&4294967295|R>>>28),R=j+(S^I^E)+L[8]+2272392833&4294967295,j=S+(R<<11&4294967295|R>>>21),R=E+(j^S^I)+L[11]+1839030562&4294967295,E=j+(R<<16&4294967295|R>>>16),R=I+(E^j^S)+L[14]+4259657740&4294967295,I=E+(R<<23&4294967295|R>>>9),R=S+(I^E^j)+L[1]+2763975236&4294967295,S=I+(R<<4&4294967295|R>>>28),R=j+(S^I^E)+L[4]+1272893353&4294967295,j=S+(R<<11&4294967295|R>>>21),R=E+(j^S^I)+L[7]+4139469664&4294967295,E=j+(R<<16&4294967295|R>>>16),R=I+(E^j^S)+L[10]+3200236656&4294967295,I=E+(R<<23&4294967295|R>>>9),R=S+(I^E^j)+L[13]+681279174&4294967295,S=I+(R<<4&4294967295|R>>>28),R=j+(S^I^E)+L[0]+3936430074&4294967295,j=S+(R<<11&4294967295|R>>>21),R=E+(j^S^I)+L[3]+3572445317&4294967295,E=j+(R<<16&4294967295|R>>>16),R=I+(E^j^S)+L[6]+76029189&4294967295,I=E+(R<<23&4294967295|R>>>9),R=S+(I^E^j)+L[9]+3654602809&4294967295,S=I+(R<<4&4294967295|R>>>28),R=j+(S^I^E)+L[12]+3873151461&4294967295,j=S+(R<<11&4294967295|R>>>21),R=E+(j^S^I)+L[15]+530742520&4294967295,E=j+(R<<16&4294967295|R>>>16),R=I+(E^j^S)+L[2]+3299628645&4294967295,I=E+(R<<23&4294967295|R>>>9),R=S+(E^(I|~j))+L[0]+4096336452&4294967295,S=I+(R<<6&4294967295|R>>>26),R=j+(I^(S|~E))+L[7]+1126891415&4294967295,j=S+(R<<10&4294967295|R>>>22),R=E+(S^(j|~I))+L[14]+2878612391&4294967295,E=j+(R<<15&4294967295|R>>>17),R=I+(j^(E|~S))+L[5]+4237533241&4294967295,I=E+(R<<21&4294967295|R>>>11),R=S+(E^(I|~j))+L[12]+1700485571&4294967295,S=I+(R<<6&4294967295|R>>>26),R=j+(I^(S|~E))+L[3]+2399980690&4294967295,j=S+(R<<10&4294967295|R>>>22),R=E+(S^(j|~I))+L[10]+4293915773&4294967295,E=j+(R<<15&4294967295|R>>>17),R=I+(j^(E|~S))+L[1]+2240044497&4294967295,I=E+(R<<21&4294967295|R>>>11),R=S+(E^(I|~j))+L[8]+1873313359&4294967295,S=I+(R<<6&4294967295|R>>>26),R=j+(I^(S|~E))+L[15]+4264355552&4294967295,j=S+(R<<10&4294967295|R>>>22),R=E+(S^(j|~I))+L[6]+2734768916&4294967295,E=j+(R<<15&4294967295|R>>>17),R=I+(j^(E|~S))+L[13]+1309151649&4294967295,I=E+(R<<21&4294967295|R>>>11),R=S+(E^(I|~j))+L[4]+4149444226&4294967295,S=I+(R<<6&4294967295|R>>>26),R=j+(I^(S|~E))+L[11]+3174756917&4294967295,j=S+(R<<10&4294967295|R>>>22),R=E+(S^(j|~I))+L[2]+718787259&4294967295,E=j+(R<<15&4294967295|R>>>17),R=I+(j^(E|~S))+L[9]+3951481745&4294967295,C.g[0]=C.g[0]+S&4294967295,C.g[1]=C.g[1]+(E+(R<<21&4294967295|R>>>11))&4294967295,C.g[2]=C.g[2]+E&4294967295,C.g[3]=C.g[3]+j&4294967295}n.prototype.u=function(C,S){S===void 0&&(S=C.length);for(var I=S-this.blockSize,L=this.B,E=this.h,j=0;j<S;){if(E==0)for(;j<=I;)a(this,C,j),j+=this.blockSize;if(typeof C=="string"){for(;j<S;)if(L[E++]=C.charCodeAt(j++),E==this.blockSize){a(this,L),E=0;break}}else for(;j<S;)if(L[E++]=C[j++],E==this.blockSize){a(this,L),E=0;break}}this.h=E,this.o+=S},n.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var S=1;S<C.length-8;++S)C[S]=0;var I=8*this.o;for(S=C.length-8;S<C.length;++S)C[S]=I&255,I/=256;for(this.u(C),C=Array(16),S=I=0;4>S;++S)for(var L=0;32>L;L+=8)C[I++]=this.g[S]>>>L&255;return C};function s(C,S){var I=l;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=S(C)}function o(C,S){this.h=S;for(var I=[],L=!0,E=C.length-1;0<=E;E--){var j=C[E]|0;L&&j==S||(I[E]=j,L=!1)}this.g=I}var l={};function c(C){return-128<=C&&128>C?s(C,function(S){return new o([S|0],0>S?-1:0)}):new o([C|0],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return A;if(0>C)return g(u(-C));for(var S=[],I=1,L=0;C>=I;L++)S[L]=C/I|0,I*=4294967296;return new o(S,0)}function d(C,S){if(C.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(C.charAt(0)=="-")return g(d(C.substring(1),S));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=u(Math.pow(S,8)),L=A,E=0;E<C.length;E+=8){var j=Math.min(8,C.length-E),R=parseInt(C.substring(E,E+j),S);8>j?(j=u(Math.pow(S,j)),L=L.j(j).add(u(R))):(L=L.j(I),L=L.add(u(R)))}return L}var A=c(0),f=c(1),h=c(16777216);e=o.prototype,e.m=function(){if(p(this))return-g(this).m();for(var C=0,S=1,I=0;I<this.g.length;I++){var L=this.i(I);C+=(0<=L?L:4294967296+L)*S,S*=4294967296}return C},e.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(m(this))return"0";if(p(this))return"-"+g(this).toString(C);for(var S=u(Math.pow(C,6)),I=this,L="";;){var E=_(I,S).g;I=x(I,E.j(S));var j=((0<I.g.length?I.g[0]:I.h)>>>0).toString(C);if(I=E,m(I))return j+L;for(;6>j.length;)j="0"+j;L=j+L}},e.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function m(C){if(C.h!=0)return!1;for(var S=0;S<C.g.length;S++)if(C.g[S]!=0)return!1;return!0}function p(C){return C.h==-1}e.l=function(C){return C=x(this,C),p(C)?-1:m(C)?0:1};function g(C){for(var S=C.g.length,I=[],L=0;L<S;L++)I[L]=~C.g[L];return new o(I,~C.h).add(f)}e.abs=function(){return p(this)?g(this):this},e.add=function(C){for(var S=Math.max(this.g.length,C.g.length),I=[],L=0,E=0;E<=S;E++){var j=L+(this.i(E)&65535)+(C.i(E)&65535),R=(j>>>16)+(this.i(E)>>>16)+(C.i(E)>>>16);L=R>>>16,j&=65535,R&=65535,I[E]=R<<16|j}return new o(I,I[I.length-1]&-2147483648?-1:0)};function x(C,S){return C.add(g(S))}e.j=function(C){if(m(this)||m(C))return A;if(p(this))return p(C)?g(this).j(g(C)):g(g(this).j(C));if(p(C))return g(this.j(g(C)));if(0>this.l(h)&&0>C.l(h))return u(this.m()*C.m());for(var S=this.g.length+C.g.length,I=[],L=0;L<2*S;L++)I[L]=0;for(L=0;L<this.g.length;L++)for(var E=0;E<C.g.length;E++){var j=this.i(L)>>>16,R=this.i(L)&65535,W=C.i(E)>>>16,de=C.i(E)&65535;I[2*L+2*E]+=R*de,y(I,2*L+2*E),I[2*L+2*E+1]+=j*de,y(I,2*L+2*E+1),I[2*L+2*E+1]+=R*W,y(I,2*L+2*E+1),I[2*L+2*E+2]+=j*W,y(I,2*L+2*E+2)}for(L=0;L<S;L++)I[L]=I[2*L+1]<<16|I[2*L];for(L=S;L<2*S;L++)I[L]=0;return new o(I,0)};function y(C,S){for(;(C[S]&65535)!=C[S];)C[S+1]+=C[S]>>>16,C[S]&=65535,S++}function b(C,S){this.g=C,this.h=S}function _(C,S){if(m(S))throw Error("division by zero");if(m(C))return new b(A,A);if(p(C))return S=_(g(C),S),new b(g(S.g),g(S.h));if(p(S))return S=_(C,g(S)),new b(g(S.g),S.h);if(30<C.g.length){if(p(C)||p(S))throw Error("slowDivide_ only works with positive integers.");for(var I=f,L=S;0>=L.l(C);)I=T(I),L=T(L);var E=P(I,1),j=P(L,1);for(L=P(L,2),I=P(I,2);!m(L);){var R=j.add(L);0>=R.l(C)&&(E=E.add(I),j=R),L=P(L,1),I=P(I,1)}return S=x(C,E.j(S)),new b(E,S)}for(E=A;0<=C.l(S);){for(I=Math.max(1,Math.floor(C.m()/S.m())),L=Math.ceil(Math.log(I)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),j=u(I),R=j.j(S);p(R)||0<R.l(C);)I-=L,j=u(I),R=j.j(S);m(j)&&(j=f),E=E.add(j),C=x(C,R)}return new b(E,C)}e.A=function(C){return _(this,C).h},e.and=function(C){for(var S=Math.max(this.g.length,C.g.length),I=[],L=0;L<S;L++)I[L]=this.i(L)&C.i(L);return new o(I,this.h&C.h)},e.or=function(C){for(var S=Math.max(this.g.length,C.g.length),I=[],L=0;L<S;L++)I[L]=this.i(L)|C.i(L);return new o(I,this.h|C.h)},e.xor=function(C){for(var S=Math.max(this.g.length,C.g.length),I=[],L=0;L<S;L++)I[L]=this.i(L)^C.i(L);return new o(I,this.h^C.h)};function T(C){for(var S=C.g.length+1,I=[],L=0;L<S;L++)I[L]=C.i(L)<<1|C.i(L-1)>>>31;return new o(I,C.h)}function P(C,S){var I=S>>5;S%=32;for(var L=C.g.length-I,E=[],j=0;j<L;j++)E[j]=0<S?C.i(j+I)>>>S|C.i(j+I+1)<<32-S:C.i(j+I);return new o(E,C.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,BG=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Cm=o}).apply(typeof gM<"u"?gM:typeof self<"u"?self:typeof window<"u"?window:{});var kw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jG,Ev,PG,CN,CP,kG,TG,FG;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(N,q,oe){return N==Array.prototype||N==Object.prototype||(N[q]=oe.value),N};function r(N){N=[typeof globalThis=="object"&&globalThis,N,typeof window=="object"&&window,typeof self=="object"&&self,typeof kw=="object"&&kw];for(var q=0;q<N.length;++q){var oe=N[q];if(oe&&oe.Math==Math)return oe}throw Error("Cannot find global object")}var n=r(this);function a(N,q){if(q)e:{var oe=n;N=N.split(".");for(var Te=0;Te<N.length-1;Te++){var xt=N[Te];if(!(xt in oe))break e;oe=oe[xt]}N=N[N.length-1],Te=oe[N],q=q(Te),q!=Te&&q!=null&&t(oe,N,{configurable:!0,writable:!0,value:q})}}function s(N,q){N instanceof String&&(N+="");var oe=0,Te=!1,xt={next:function(){if(!Te&&oe<N.length){var St=oe++;return{value:q(St,N[St]),done:!1}}return Te=!0,{done:!0,value:void 0}}};return xt[Symbol.iterator]=function(){return xt},xt}a("Array.prototype.values",function(N){return N||function(){return s(this,function(q,oe){return oe})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(N){var q=typeof N;return q=q!="object"?q:N?Array.isArray(N)?"array":q:"null",q=="array"||q=="object"&&typeof N.length=="number"}function u(N){var q=typeof N;return q=="object"&&N!=null||q=="function"}function d(N,q,oe){return N.call.apply(N.bind,arguments)}function A(N,q,oe){if(!N)throw Error();if(2<arguments.length){var Te=Array.prototype.slice.call(arguments,2);return function(){var xt=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(xt,Te),N.apply(q,xt)}}return function(){return N.apply(q,arguments)}}function f(N,q,oe){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:A,f.apply(null,arguments)}function h(N,q){var oe=Array.prototype.slice.call(arguments,1);return function(){var Te=oe.slice();return Te.push.apply(Te,arguments),N.apply(this,Te)}}function m(N,q){function oe(){}oe.prototype=q.prototype,N.aa=q.prototype,N.prototype=new oe,N.prototype.constructor=N,N.Qb=function(Te,xt,St){for(var Zt=Array(arguments.length-2),un=2;un<arguments.length;un++)Zt[un-2]=arguments[un];return q.prototype[xt].apply(Te,Zt)}}function p(N){const q=N.length;if(0<q){const oe=Array(q);for(let Te=0;Te<q;Te++)oe[Te]=N[Te];return oe}return[]}function g(N,q){for(let oe=1;oe<arguments.length;oe++){const Te=arguments[oe];if(c(Te)){const xt=N.length||0,St=Te.length||0;N.length=xt+St;for(let Zt=0;Zt<St;Zt++)N[xt+Zt]=Te[Zt]}else N.push(Te)}}class x{constructor(q,oe){this.i=q,this.j=oe,this.h=0,this.g=null}get(){let q;return 0<this.h?(this.h--,q=this.g,this.g=q.next,q.next=null):q=this.i(),q}}function y(N){return/^[\s\xa0]*$/.test(N)}function b(){var N=l.navigator;return N&&(N=N.userAgent)?N:""}function _(N){return _[" "](N),N}_[" "]=function(){};var T=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function P(N,q,oe){for(const Te in N)q.call(oe,N[Te],Te,N)}function C(N,q){for(const oe in N)q.call(void 0,N[oe],oe,N)}function S(N){const q={};for(const oe in N)q[oe]=N[oe];return q}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(N,q){let oe,Te;for(let xt=1;xt<arguments.length;xt++){Te=arguments[xt];for(oe in Te)N[oe]=Te[oe];for(let St=0;St<I.length;St++)oe=I[St],Object.prototype.hasOwnProperty.call(Te,oe)&&(N[oe]=Te[oe])}}function E(N){var q=1;N=N.split(":");const oe=[];for(;0<q&&N.length;)oe.push(N.shift()),q--;return N.length&&oe.push(N.join(":")),oe}function j(N){l.setTimeout(()=>{throw N},0)}function R(){var N=J;let q=null;return N.g&&(q=N.g,N.g=N.g.next,N.g||(N.h=null),q.next=null),q}class W{constructor(){this.h=this.g=null}add(q,oe){const Te=de.get();Te.set(q,oe),this.h?this.h.next=Te:this.g=Te,this.h=Te}}var de=new x(()=>new te,N=>N.reset());class te{constructor(){this.next=this.g=this.h=null}set(q,oe){this.h=q,this.g=oe,this.next=null}reset(){this.next=this.g=this.h=null}}let le,ce=!1,J=new W,me=()=>{const N=l.Promise.resolve(void 0);le=()=>{N.then(Ee)}};var Ee=()=>{for(var N;N=R();){try{N.h.call(N.g)}catch(oe){j(oe)}var q=de;q.j(N),100>q.h&&(q.h++,N.next=q.g,q.g=N)}ce=!1};function k(){this.s=this.s,this.C=this.C}k.prototype.s=!1,k.prototype.ma=function(){this.s||(this.s=!0,this.N())},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(N,q){this.type=N,this.g=this.target=q,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var V=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var N=!1,q=Object.defineProperty({},"passive",{get:function(){N=!0}});try{const oe=()=>{};l.addEventListener("test",oe,q),l.removeEventListener("test",oe,q)}catch{}return N}();function D(N,q){if(F.call(this,N?N.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,N){var oe=this.type=N.type,Te=N.changedTouches&&N.changedTouches.length?N.changedTouches[0]:null;if(this.target=N.target||N.srcElement,this.g=q,q=N.relatedTarget){if(T){e:{try{_(q.nodeName);var xt=!0;break e}catch{}xt=!1}xt||(q=null)}}else oe=="mouseover"?q=N.fromElement:oe=="mouseout"&&(q=N.toElement);this.relatedTarget=q,Te?(this.clientX=Te.clientX!==void 0?Te.clientX:Te.pageX,this.clientY=Te.clientY!==void 0?Te.clientY:Te.pageY,this.screenX=Te.screenX||0,this.screenY=Te.screenY||0):(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0),this.button=N.button,this.key=N.key||"",this.ctrlKey=N.ctrlKey,this.altKey=N.altKey,this.shiftKey=N.shiftKey,this.metaKey=N.metaKey,this.pointerId=N.pointerId||0,this.pointerType=typeof N.pointerType=="string"?N.pointerType:M[N.pointerType]||"",this.state=N.state,this.i=N,N.defaultPrevented&&D.aa.h.call(this)}}m(D,F);var M={2:"touch",3:"pen",4:"mouse"};D.prototype.h=function(){D.aa.h.call(this);var N=this.i;N.preventDefault?N.preventDefault():N.returnValue=!1};var G="closure_listenable_"+(1e6*Math.random()|0),O=0;function K(N,q,oe,Te,xt){this.listener=N,this.proxy=null,this.src=q,this.type=oe,this.capture=!!Te,this.ha=xt,this.key=++O,this.da=this.fa=!1}function ee(N){N.da=!0,N.listener=null,N.proxy=null,N.src=null,N.ha=null}function ne(N){this.src=N,this.g={},this.h=0}ne.prototype.add=function(N,q,oe,Te,xt){var St=N.toString();N=this.g[St],N||(N=this.g[St]=[],this.h++);var Zt=be(N,q,Te,xt);return-1<Zt?(q=N[Zt],oe||(q.fa=!1)):(q=new K(q,this.src,St,!!Te,xt),q.fa=oe,N.push(q)),q};function Q(N,q){var oe=q.type;if(oe in N.g){var Te=N.g[oe],xt=Array.prototype.indexOf.call(Te,q,void 0),St;(St=0<=xt)&&Array.prototype.splice.call(Te,xt,1),St&&(ee(q),N.g[oe].length==0&&(delete N.g[oe],N.h--))}}function be(N,q,oe,Te){for(var xt=0;xt<N.length;++xt){var St=N[xt];if(!St.da&&St.listener==q&&St.capture==!!oe&&St.ha==Te)return xt}return-1}var Z="closure_lm_"+(1e6*Math.random()|0),z={};function X(N,q,oe,Te,xt){if(Array.isArray(q)){for(var St=0;St<q.length;St++)X(N,q[St],oe,Te,xt);return null}return oe=bt(oe),N&&N[G]?N.K(q,oe,u(Te)?!!Te.capture:!1,xt):ve(N,q,oe,!1,Te,xt)}function ve(N,q,oe,Te,xt,St){if(!q)throw Error("Invalid event type");var Zt=u(xt)?!!xt.capture:!!xt,un=st(N);if(un||(N[Z]=un=new ne(N)),oe=un.add(q,oe,Te,Zt,St),oe.proxy)return oe;if(Te=re(),oe.proxy=Te,Te.src=N,Te.listener=oe,N.addEventListener)V||(xt=Zt),xt===void 0&&(xt=!1),N.addEventListener(q.toString(),Te,xt);else if(N.attachEvent)N.attachEvent(Ve(q.toString()),Te);else if(N.addListener&&N.removeListener)N.addListener(Te);else throw Error("addEventListener and attachEvent are unavailable.");return oe}function re(){function N(oe){return q.call(N.src,N.listener,oe)}const q=nt;return N}function Ne(N,q,oe,Te,xt){if(Array.isArray(q))for(var St=0;St<q.length;St++)Ne(N,q[St],oe,Te,xt);else Te=u(Te)?!!Te.capture:!!Te,oe=bt(oe),N&&N[G]?(N=N.i,q=String(q).toString(),q in N.g&&(St=N.g[q],oe=be(St,oe,Te,xt),-1<oe&&(ee(St[oe]),Array.prototype.splice.call(St,oe,1),St.length==0&&(delete N.g[q],N.h--)))):N&&(N=st(N))&&(q=N.g[q.toString()],N=-1,q&&(N=be(q,oe,Te,xt)),(oe=-1<N?q[N]:null)&&Me(oe))}function Me(N){if(typeof N!="number"&&N&&!N.da){var q=N.src;if(q&&q[G])Q(q.i,N);else{var oe=N.type,Te=N.proxy;q.removeEventListener?q.removeEventListener(oe,Te,N.capture):q.detachEvent?q.detachEvent(Ve(oe),Te):q.addListener&&q.removeListener&&q.removeListener(Te),(oe=st(q))?(Q(oe,N),oe.h==0&&(oe.src=null,q[Z]=null)):ee(N)}}}function Ve(N){return N in z?z[N]:z[N]="on"+N}function nt(N,q){if(N.da)N=!0;else{q=new D(q,this);var oe=N.listener,Te=N.ha||N.src;N.fa&&Me(N),N=oe.call(Te,q)}return N}function st(N){return N=N[Z],N instanceof ne?N:null}var lt="__closure_events_fn_"+(1e9*Math.random()>>>0);function bt(N){return typeof N=="function"?N:(N[lt]||(N[lt]=function(q){return N.handleEvent(q)}),N[lt])}function ot(){k.call(this),this.i=new ne(this),this.M=this,this.F=null}m(ot,k),ot.prototype[G]=!0,ot.prototype.removeEventListener=function(N,q,oe,Te){Ne(this,N,q,oe,Te)};function Le(N,q){var oe,Te=N.F;if(Te)for(oe=[];Te;Te=Te.F)oe.push(Te);if(N=N.M,Te=q.type||q,typeof q=="string")q=new F(q,N);else if(q instanceof F)q.target=q.target||N;else{var xt=q;q=new F(Te,N),L(q,xt)}if(xt=!0,oe)for(var St=oe.length-1;0<=St;St--){var Zt=q.g=oe[St];xt=Ze(Zt,Te,!0,q)&&xt}if(Zt=q.g=N,xt=Ze(Zt,Te,!0,q)&&xt,xt=Ze(Zt,Te,!1,q)&&xt,oe)for(St=0;St<oe.length;St++)Zt=q.g=oe[St],xt=Ze(Zt,Te,!1,q)&&xt}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var N=this.i,q;for(q in N.g){for(var oe=N.g[q],Te=0;Te<oe.length;Te++)ee(oe[Te]);delete N.g[q],N.h--}}this.F=null},ot.prototype.K=function(N,q,oe,Te){return this.i.add(String(N),q,!1,oe,Te)},ot.prototype.L=function(N,q,oe,Te){return this.i.add(String(N),q,!0,oe,Te)};function Ze(N,q,oe,Te){if(q=N.i.g[String(q)],!q)return!0;q=q.concat();for(var xt=!0,St=0;St<q.length;++St){var Zt=q[St];if(Zt&&!Zt.da&&Zt.capture==oe){var un=Zt.listener,Ra=Zt.ha||Zt.src;Zt.fa&&Q(N.i,Zt),xt=un.call(Ra,Te)!==!1&&xt}}return xt&&!Te.defaultPrevented}function ye(N,q,oe){if(typeof N=="function")oe&&(N=f(N,oe));else if(N&&typeof N.handleEvent=="function")N=f(N.handleEvent,N);else throw Error("Invalid listener argument");return 2147483647<Number(q)?-1:l.setTimeout(N,q||0)}function xe(N){N.g=ye(()=>{N.g=null,N.i&&(N.i=!1,xe(N))},N.l);const q=N.h;N.h=null,N.m.apply(null,q)}class ue extends k{constructor(q,oe){super(),this.m=q,this.l=oe,this.h=null,this.i=!1,this.g=null}j(q){this.h=arguments,this.g?this.i=!0:xe(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ge(N){k.call(this),this.h=N,this.g={}}m(Ge,k);var Je=[];function ht(N){P(N.g,function(q,oe){this.g.hasOwnProperty(oe)&&Me(q)},N),N.g={}}Ge.prototype.N=function(){Ge.aa.N.call(this),ht(this)},Ge.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ue=l.JSON.stringify,rt=l.JSON.parse,Qe=class{stringify(N){return l.JSON.stringify(N,void 0)}parse(N){return l.JSON.parse(N,void 0)}};function Pe(){}Pe.prototype.h=null;function ze(N){return N.h||(N.h=N.i())}function it(){}var Bt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ut(){F.call(this,"d")}m(ut,F);function It(){F.call(this,"c")}m(It,F);var $t={},hr=null;function _e(){return hr=hr||new ot}$t.La="serverreachability";function dt(N){F.call(this,$t.La,N)}m(dt,F);function gt(N){const q=_e();Le(q,new dt(q))}$t.STAT_EVENT="statevent";function Ce(N,q){F.call(this,$t.STAT_EVENT,N),this.stat=q}m(Ce,F);function et(N){const q=_e();Le(q,new Ce(q,N))}$t.Ma="timingevent";function yt(N,q){F.call(this,$t.Ma,N),this.size=q}m(yt,F);function Pt(N,q){if(typeof N!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){N()},q)}function Lt(){this.g=!0}Lt.prototype.xa=function(){this.g=!1};function qt(N,q,oe,Te,xt,St){N.info(function(){if(N.g)if(St)for(var Zt="",un=St.split("&"),Ra=0;Ra<un.length;Ra++){var Jr=un[Ra].split("=");if(1<Jr.length){var vn=Jr[0];Jr=Jr[1];var na=vn.split("_");Zt=2<=na.length&&na[1]=="type"?Zt+(vn+"="+Jr+"&"):Zt+(vn+"=redacted&")}}else Zt=null;else Zt=St;return"XMLHTTP REQ ("+Te+") [attempt "+xt+"]: "+q+`
`+oe+`
`+Zt})}function wt(N,q,oe,Te,xt,St,Zt){N.info(function(){return"XMLHTTP RESP ("+Te+") [ attempt "+xt+"]: "+q+`
`+oe+`
`+St+" "+Zt})}function ie(N,q,oe,Te){N.info(function(){return"XMLHTTP TEXT ("+q+"): "+he(N,oe)+(Te?" "+Te:"")})}function se(N,q){N.info(function(){return"TIMEOUT: "+q})}Lt.prototype.info=function(){};function he(N,q){if(!N.g)return q;if(!q)return null;try{var oe=JSON.parse(q);if(oe){for(N=0;N<oe.length;N++)if(Array.isArray(oe[N])){var Te=oe[N];if(!(2>Te.length)){var xt=Te[1];if(Array.isArray(xt)&&!(1>xt.length)){var St=xt[0];if(St!="noop"&&St!="stop"&&St!="close")for(var Zt=1;Zt<xt.length;Zt++)xt[Zt]=""}}}}return Ue(oe)}catch{return q}}var Ae={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Be={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fe;function ae(){}m(ae,Pe),ae.prototype.g=function(){return new XMLHttpRequest},ae.prototype.i=function(){return{}},Fe=new ae;function Oe(N,q,oe,Te){this.j=N,this.i=q,this.l=oe,this.R=Te||1,this.U=new Ge(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pe}function pe(){this.i=null,this.g="",this.h=!1}var De={},Se={};function Ye(N,q,oe){N.L=1,N.v=hd(Ps(q)),N.m=oe,N.P=!0,We(N,null)}function We(N,q){N.F=Date.now(),at(N),N.A=Ps(N.v);var oe=N.A,Te=N.R;Array.isArray(Te)||(Te=[String(Te)]),V0(oe.i,"t",Te),N.C=0,oe=N.j.J,N.h=new pe,N.g=za(N.j,oe?q:null,!N.m),0<N.O&&(N.M=new ue(f(N.Y,N,N.g),N.O)),q=N.U,oe=N.g,Te=N.ca;var xt="readystatechange";Array.isArray(xt)||(xt&&(Je[0]=xt.toString()),xt=Je);for(var St=0;St<xt.length;St++){var Zt=X(oe,xt[St],Te||q.handleEvent,!1,q.h||q);if(!Zt)break;q.g[Zt.key]=Zt}q=N.H?S(N.H):{},N.m?(N.u||(N.u="POST"),q["Content-Type"]="application/x-www-form-urlencoded",N.g.ea(N.A,N.u,N.m,q)):(N.u="GET",N.g.ea(N.A,N.u,null,q)),gt(),qt(N.i,N.u,N.A,N.l,N.R,N.m)}Oe.prototype.ca=function(N){N=N.target;const q=this.M;q&&po(N)==3?q.j():this.Y(N)},Oe.prototype.Y=function(N){try{if(N==this.g)e:{const na=po(this.g);var q=this.g.Ba();const ol=this.g.Z();if(!(3>na)&&(na!=3||this.g&&(this.h.h||this.g.oa()||Lf(this.g)))){this.J||na!=4||q==7||(q==8||0>=ol?gt(3):gt(2)),Kt(this);var oe=this.g.Z();this.X=oe;t:if(Xe(this)){var Te=Lf(this.g);N="";var xt=Te.length,St=po(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_r(this),Jt(this);var Zt="";break t}this.h.i=new l.TextDecoder}for(q=0;q<xt;q++)this.h.h=!0,N+=this.h.i.decode(Te[q],{stream:!(St&&q==xt-1)});Te.length=0,this.h.g+=N,this.C=0,Zt=this.h.g}else Zt=this.g.oa();if(this.o=oe==200,wt(this.i,this.u,this.A,this.l,this.R,na,oe),this.o){if(this.T&&!this.K){t:{if(this.g){var un,Ra=this.g;if((un=Ra.g?Ra.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(un)){var Jr=un;break t}}Jr=null}if(oe=Jr)ie(this.i,this.l,oe,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ta(this,oe);else{this.o=!1,this.s=3,et(12),_r(this),Jt(this);break e}}if(this.P){oe=!0;let Hi;for(;!this.J&&this.C<Zt.length;)if(Hi=qe(this,Zt),Hi==Se){na==4&&(this.s=4,et(14),oe=!1),ie(this.i,this.l,null,"[Incomplete Response]");break}else if(Hi==De){this.s=4,et(15),ie(this.i,this.l,Zt,"[Invalid Chunk]"),oe=!1;break}else ie(this.i,this.l,Hi,null),ta(this,Hi);if(Xe(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),na!=4||Zt.length!=0||this.h.h||(this.s=1,et(16),oe=!1),this.o=this.o&&oe,!oe)ie(this.i,this.l,Zt,"[Invalid Chunked Response]"),_r(this),Jt(this);else if(0<Zt.length&&!this.W){this.W=!0;var vn=this.j;vn.g==this&&vn.ba&&!vn.M&&(vn.j.info("Great, no buffering proxy detected. Bytes received: "+Zt.length),dr(vn),vn.M=!0,et(11))}}else ie(this.i,this.l,Zt,null),ta(this,Zt);na==4&&_r(this),this.o&&!this.J&&(na==4?Mr(this.j,this):(this.o=!1,at(this)))}else $0(this.g),oe==400&&0<Zt.indexOf("Unknown SID")?(this.s=3,et(12)):(this.s=0,et(13)),_r(this),Jt(this)}}}catch{}finally{}};function Xe(N){return N.g?N.u=="GET"&&N.L!=2&&N.j.Ca:!1}function qe(N,q){var oe=N.C,Te=q.indexOf(`
`,oe);return Te==-1?Se:(oe=Number(q.substring(oe,Te)),isNaN(oe)?De:(Te+=1,Te+oe>q.length?Se:(q=q.slice(Te,Te+oe),N.C=Te+oe,q)))}Oe.prototype.cancel=function(){this.J=!0,_r(this)};function at(N){N.S=Date.now()+N.I,mt(N,N.I)}function mt(N,q){if(N.B!=null)throw Error("WatchDog timer not null");N.B=Pt(f(N.ba,N),q)}function Kt(N){N.B&&(l.clearTimeout(N.B),N.B=null)}Oe.prototype.ba=function(){this.B=null;const N=Date.now();0<=N-this.S?(se(this.i,this.A),this.L!=2&&(gt(),et(17)),_r(this),this.s=2,Jt(this)):mt(this,this.S-N)};function Jt(N){N.j.G==0||N.J||Mr(N.j,N)}function _r(N){Kt(N);var q=N.M;q&&typeof q.ma=="function"&&q.ma(),N.M=null,ht(N.U),N.g&&(q=N.g,N.g=null,q.abort(),q.ma())}function ta(N,q){try{var oe=N.j;if(oe.G!=0&&(oe.g==N||ua(oe.h,N))){if(!N.K&&ua(oe.h,N)&&oe.G==3){try{var Te=oe.Da.g.parse(q)}catch{Te=null}if(Array.isArray(Te)&&Te.length==3){var xt=Te;if(xt[0]==0){e:if(!oe.u){if(oe.g)if(oe.g.F+3e3<N.F)jr(oe),Gl(oe);else break e;Ut(oe),et(18)}}else oe.za=xt[1],0<oe.za-oe.T&&37500>xt[2]&&oe.F&&oe.v==0&&!oe.C&&(oe.C=Pt(f(oe.Za,oe),6e3));if(1>=al(oe.h)&&oe.ca){try{oe.ca()}catch{}oe.ca=void 0}}else Cn(oe,11)}else if((N.K||oe.g==N)&&jr(oe),!y(q))for(xt=oe.Da.g.parse(q),q=0;q<xt.length;q++){let Jr=xt[q];if(oe.T=Jr[0],Jr=Jr[1],oe.G==2)if(Jr[0]=="c"){oe.K=Jr[1],oe.ia=Jr[2];const vn=Jr[3];vn!=null&&(oe.la=vn,oe.j.info("VER="+oe.la));const na=Jr[4];na!=null&&(oe.Aa=na,oe.j.info("SVER="+oe.Aa));const ol=Jr[5];ol!=null&&typeof ol=="number"&&0<ol&&(Te=1.5*ol,oe.L=Te,oe.j.info("backChannelRequestTimeoutMs_="+Te)),Te=oe;const Hi=N.g;if(Hi){const xi=Hi.g?Hi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xi){var St=Te.h;St.g||xi.indexOf("spdy")==-1&&xi.indexOf("quic")==-1&&xi.indexOf("h2")==-1||(St.j=St.l,St.g=new Set,St.h&&(sl(St,St.h),St.h=null))}if(Te.D){const Rc=Hi.g?Hi.g.getResponseHeader("X-HTTP-Session-Id"):null;Rc&&(Te.ya=Rc,nn(Te.I,Te.D,Rc))}}oe.G=3,oe.l&&oe.l.ua(),oe.ba&&(oe.R=Date.now()-N.F,oe.j.info("Handshake RTT: "+oe.R+"ms")),Te=oe;var Zt=N;if(Te.qa=Bn(Te,Te.J?Te.ia:null,Te.W),Zt.K){FA(Te.h,Zt);var un=Zt,Ra=Te.L;Ra&&(un.I=Ra),un.B&&(Kt(un),at(un)),Te.g=Zt}else Ot(Te);0<oe.i.length&&U(oe)}else Jr[0]!="stop"&&Jr[0]!="close"||Cn(oe,7);else oe.G==3&&(Jr[0]=="stop"||Jr[0]=="close"?Jr[0]=="stop"?Cn(oe,7):UA(oe):Jr[0]!="noop"&&oe.l&&oe.l.ta(Jr),oe.v=0)}}gt(4)}catch{}}var Vn=class{constructor(N,q){this.g=N,this.map=q}};function mo(N){this.l=N||10,l.PerformanceNavigationTiming?(N=l.performance.getEntriesByType("navigation"),N=0<N.length&&(N[0].nextHopProtocol=="hq"||N[0].nextHopProtocol=="h2")):N=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=N?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ss(N){return N.h?!0:N.g?N.g.size>=N.j:!1}function al(N){return N.h?1:N.g?N.g.size:0}function ua(N,q){return N.h?N.h==q:N.g?N.g.has(q):!1}function sl(N,q){N.g?N.g.add(q):N.h=q}function FA(N,q){N.h&&N.h==q?N.h=null:N.g&&N.g.has(q)&&N.g.delete(q)}mo.prototype.cancel=function(){if(this.i=ra(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const N of this.g.values())N.cancel();this.g.clear()}};function ra(N){if(N.h!=null)return N.i.concat(N.h.D);if(N.g!=null&&N.g.size!==0){let q=N.i;for(const oe of N.g.values())q=q.concat(oe.D);return q}return p(N.i)}function Nu(N){if(N.V&&typeof N.V=="function")return N.V();if(typeof Map<"u"&&N instanceof Map||typeof Set<"u"&&N instanceof Set)return Array.from(N.values());if(typeof N=="string")return N.split("");if(c(N)){for(var q=[],oe=N.length,Te=0;Te<oe;Te++)q.push(N[Te]);return q}q=[],oe=0;for(Te in N)q[oe++]=N[Te];return q}function Ql(N){if(N.na&&typeof N.na=="function")return N.na();if(!N.V||typeof N.V!="function"){if(typeof Map<"u"&&N instanceof Map)return Array.from(N.keys());if(!(typeof Set<"u"&&N instanceof Set)){if(c(N)||typeof N=="string"){var q=[];N=N.length;for(var oe=0;oe<N;oe++)q.push(oe);return q}q=[],oe=0;for(const Te in N)q[oe++]=Te;return q}}}function dd(N,q){if(N.forEach&&typeof N.forEach=="function")N.forEach(q,void 0);else if(c(N)||typeof N=="string")Array.prototype.forEach.call(N,q,void 0);else for(var oe=Ql(N),Te=Nu(N),xt=Te.length,St=0;St<xt;St++)q.call(void 0,Te[St],oe&&oe[St],N)}var Ff=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lo(N,q){if(N){N=N.split("&");for(var oe=0;oe<N.length;oe++){var Te=N[oe].indexOf("="),xt=null;if(0<=Te){var St=N[oe].substring(0,Te);xt=N[oe].substring(Te+1)}else St=N[oe];q(St,xt?decodeURIComponent(xt.replace(/\+/g," ")):"")}}}function Gn(N){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,N instanceof Gn){this.h=N.h,Ad(this,N.j),this.o=N.o,this.g=N.g,OA(this,N.s),this.l=N.l;var q=N.i,oe=new gi;oe.i=q.i,q.g&&(oe.g=new Map(q.g),oe.h=q.h),M0(this,oe),this.m=N.m}else N&&(q=String(N).match(Ff))?(this.h=!1,Ad(this,q[1]||"",!0),this.o=Cu(q[2]||""),this.g=Cu(q[3]||"",!0),OA(this,q[4]),this.l=Cu(q[5]||"",!0),M0(this,q[6]||"",!0),this.m=Cu(q[7]||"")):(this.h=!1,this.i=new gi(null,this.h))}Gn.prototype.toString=function(){var N=[],q=this.j;q&&N.push(Vl(q,U0,!0),":");var oe=this.g;return(oe||q=="file")&&(N.push("//"),(q=this.o)&&N.push(Vl(q,U0,!0),"@"),N.push(encodeURIComponent(String(oe)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),oe=this.s,oe!=null&&N.push(":",String(oe))),(oe=this.l)&&(this.g&&oe.charAt(0)!="/"&&N.push("/"),N.push(Vl(oe,oe.charAt(0)=="/"?xx:gx,!0))),(oe=this.i.toString())&&N.push("?",oe),(oe=this.m)&&N.push("#",Vl(oe,Q0)),N.join("")};function Ps(N){return new Gn(N)}function Ad(N,q,oe){N.j=oe?Cu(q,!0):q,N.j&&(N.j=N.j.replace(/:$/,""))}function OA(N,q){if(q){if(q=Number(q),isNaN(q)||0>q)throw Error("Bad port number "+q);N.s=q}else N.s=null}function M0(N,q,oe){q instanceof gi?(N.i=q,vx(N.i,N.h)):(oe||(q=Vl(q,Of)),N.i=new gi(q,N.h))}function nn(N,q,oe){N.i.set(q,oe)}function hd(N){return nn(N,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),N}function Cu(N,q){return N?q?decodeURI(N.replace(/%25/g,"%2525")):decodeURIComponent(N):""}function Vl(N,q,oe){return typeof N=="string"?(N=encodeURI(N).replace(q,fd),oe&&(N=N.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N):null}function fd(N){return N=N.charCodeAt(0),"%"+(N>>4&15).toString(16)+(N&15).toString(16)}var U0=/[#\/\?@]/g,gx=/[#\?:]/g,xx=/[#\?]/g,Of=/[#\?@]/g,Q0=/#/g;function gi(N,q){this.h=this.g=null,this.i=N||null,this.j=!!q}function Hl(N){N.g||(N.g=new Map,N.h=0,N.i&&Lo(N.i,function(q,oe){N.add(decodeURIComponent(q.replace(/\+/g," ")),oe)}))}e=gi.prototype,e.add=function(N,q){Hl(this),this.i=null,N=Br(this,N);var oe=this.g.get(N);return oe||this.g.set(N,oe=[]),oe.push(q),this.h+=1,this};function _u(N,q){Hl(N),q=Br(N,q),N.g.has(q)&&(N.i=null,N.h-=N.g.get(q).length,N.g.delete(q))}function DA(N,q){return Hl(N),q=Br(N,q),N.g.has(q)}e.forEach=function(N,q){Hl(this),this.g.forEach(function(oe,Te){oe.forEach(function(xt){N.call(q,xt,Te,this)},this)},this)},e.na=function(){Hl(this);const N=Array.from(this.g.values()),q=Array.from(this.g.keys()),oe=[];for(let Te=0;Te<q.length;Te++){const xt=N[Te];for(let St=0;St<xt.length;St++)oe.push(q[Te])}return oe},e.V=function(N){Hl(this);let q=[];if(typeof N=="string")DA(this,N)&&(q=q.concat(this.g.get(Br(this,N))));else{N=Array.from(this.g.values());for(let oe=0;oe<N.length;oe++)q=q.concat(N[oe])}return q},e.set=function(N,q){return Hl(this),this.i=null,N=Br(this,N),DA(this,N)&&(this.h-=this.g.get(N).length),this.g.set(N,[q]),this.h+=1,this},e.get=function(N,q){return N?(N=this.V(N),0<N.length?String(N[0]):q):q};function V0(N,q,oe){_u(N,q),0<oe.length&&(N.i=null,N.g.set(Br(N,q),p(oe)),N.h+=oe.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const N=[],q=Array.from(this.g.keys());for(var oe=0;oe<q.length;oe++){var Te=q[oe];const St=encodeURIComponent(String(Te)),Zt=this.V(Te);for(Te=0;Te<Zt.length;Te++){var xt=St;Zt[Te]!==""&&(xt+="="+encodeURIComponent(String(Zt[Te]))),N.push(xt)}}return this.i=N.join("&")};function Br(N,q){return q=String(q),N.j&&(q=q.toLowerCase()),q}function vx(N,q){q&&!N.j&&(Hl(N),N.i=null,N.g.forEach(function(oe,Te){var xt=Te.toLowerCase();Te!=xt&&(_u(this,Te),V0(this,xt,oe))},N)),N.j=q}function yx(N,q){const oe=new Lt;if(l.Image){const Te=new Image;Te.onload=h(Zs,oe,"TestLoadImage: loaded",!0,q,Te),Te.onerror=h(Zs,oe,"TestLoadImage: error",!1,q,Te),Te.onabort=h(Zs,oe,"TestLoadImage: abort",!1,q,Te),Te.ontimeout=h(Zs,oe,"TestLoadImage: timeout",!1,q,Te),l.setTimeout(function(){Te.ontimeout&&Te.ontimeout()},1e4),Te.src=N}else q(!1)}function bx(N,q){const oe=new Lt,Te=new AbortController,xt=setTimeout(()=>{Te.abort(),Zs(oe,"TestPingServer: timeout",!1,q)},1e4);fetch(N,{signal:Te.signal}).then(St=>{clearTimeout(xt),St.ok?Zs(oe,"TestPingServer: ok",!0,q):Zs(oe,"TestPingServer: server error",!1,q)}).catch(()=>{clearTimeout(xt),Zs(oe,"TestPingServer: error",!1,q)})}function Zs(N,q,oe,Te,xt){try{xt&&(xt.onload=null,xt.onerror=null,xt.onabort=null,xt.ontimeout=null),Te(oe)}catch{}}function Oc(){this.g=new Qe}function wx(N,q,oe){const Te=oe||"";try{dd(N,function(xt,St){let Zt=xt;u(xt)&&(Zt=Ue(xt)),q.push(Te+St+"="+encodeURIComponent(Zt))})}catch(xt){throw q.push(Te+"type="+encodeURIComponent("_badmap")),xt}}function RA(N){this.l=N.Ub||null,this.j=N.eb||!1}m(RA,Pe),RA.prototype.g=function(){return new Dc(this.l,this.j)},RA.prototype.i=function(N){return function(){return N}}({});function Dc(N,q){ot.call(this),this.D=N,this.o=q,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(Dc,ot),e=Dc.prototype,e.open=function(N,q){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=N,this.A=q,this.readyState=1,md(this)},e.send=function(N){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const q={headers:this.u,method:this.B,credentials:this.m,cache:void 0};N&&(q.body=N),(this.D||l).fetch(new Request(this.A,q)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,il(this)),this.readyState=0},e.Sa=function(N){if(this.g&&(this.l=N,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=N.headers,this.readyState=2,md(this)),this.g&&(this.readyState=3,md(this),this.g)))if(this.responseType==="arraybuffer")N.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in N){if(this.j=N.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;LA(this)}else N.text().then(this.Ra.bind(this),this.ga.bind(this))};function LA(N){N.j.read().then(N.Pa.bind(N)).catch(N.ga.bind(N))}e.Pa=function(N){if(this.g){if(this.o&&N.value)this.response.push(N.value);else if(!this.o){var q=N.value?N.value:new Uint8Array(0);(q=this.v.decode(q,{stream:!N.done}))&&(this.response=this.responseText+=q)}N.done?il(this):md(this),this.readyState==3&&LA(this)}},e.Ra=function(N){this.g&&(this.response=this.responseText=N,il(this))},e.Qa=function(N){this.g&&(this.response=N,il(this))},e.ga=function(){this.g&&il(this)};function il(N){N.readyState=4,N.l=null,N.j=null,N.v=null,md(N)}e.setRequestHeader=function(N,q){this.u.append(N,q)},e.getResponseHeader=function(N){return this.h&&this.h.get(N.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const N=[],q=this.h.entries();for(var oe=q.next();!oe.done;)oe=oe.value,N.push(oe[0]+": "+oe[1]),oe=q.next();return N.join(`\r
`)};function md(N){N.onreadystatechange&&N.onreadystatechange.call(N)}Object.defineProperty(Dc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(N){this.m=N?"include":"same-origin"}});function $l(N){let q="";return P(N,function(oe,Te){q+=Te,q+=":",q+=oe,q+=`\r
`}),q}function Df(N,q,oe){e:{for(Te in oe){var Te=!1;break e}Te=!0}Te||(oe=$l(oe),typeof N=="string"?oe!=null&&encodeURIComponent(String(oe)):nn(N,q,oe))}function Hn(N){ot.call(this),this.headers=new Map,this.o=N||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(Hn,ot);var Rf=/^https?$/i,H0=["POST","PUT"];e=Hn.prototype,e.Ha=function(N){this.J=N},e.ea=function(N,q,oe,Te){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+N);q=q?q.toUpperCase():"GET",this.D=N,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fe.g(),this.v=this.o?ze(this.o):ze(Fe),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(q,String(N),!0),this.B=!1}catch(St){Kl(this,St);return}if(N=oe||"",oe=new Map(this.headers),Te)if(Object.getPrototypeOf(Te)===Object.prototype)for(var xt in Te)oe.set(xt,Te[xt]);else if(typeof Te.keys=="function"&&typeof Te.get=="function")for(const St of Te.keys())oe.set(St,Te.get(St));else throw Error("Unknown input type for opt_headers: "+String(Te));Te=Array.from(oe.keys()).find(St=>St.toLowerCase()=="content-type"),xt=l.FormData&&N instanceof l.FormData,!(0<=Array.prototype.indexOf.call(H0,q,void 0))||Te||xt||oe.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[St,Zt]of oe)this.g.setRequestHeader(St,Zt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Su(this),this.u=!0,this.g.send(N),this.u=!1}catch(St){Kl(this,St)}};function Kl(N,q){N.h=!1,N.g&&(N.j=!0,N.g.abort(),N.j=!1),N.l=q,N.m=5,MA(N),Eu(N)}function MA(N){N.A||(N.A=!0,Le(N,"complete"),Le(N,"error"))}e.abort=function(N){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=N||7,Le(this,"complete"),Le(this,"abort"),Eu(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Eu(this,!0)),Hn.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?pd(this):this.bb())},e.bb=function(){pd(this)};function pd(N){if(N.h&&typeof o<"u"&&(!N.v[1]||po(N)!=4||N.Z()!=2)){if(N.u&&po(N)==4)ye(N.Ea,0,N);else if(Le(N,"readystatechange"),po(N)==4){N.h=!1;try{const Zt=N.Z();e:switch(Zt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var q=!0;break e;default:q=!1}var oe;if(!(oe=q)){var Te;if(Te=Zt===0){var xt=String(N.D).match(Ff)[1]||null;!xt&&l.self&&l.self.location&&(xt=l.self.location.protocol.slice(0,-1)),Te=!Rf.test(xt?xt.toLowerCase():"")}oe=Te}if(oe)Le(N,"complete"),Le(N,"success");else{N.m=6;try{var St=2<po(N)?N.g.statusText:""}catch{St=""}N.l=St+" ["+N.Z()+"]",MA(N)}}finally{Eu(N)}}}}function Eu(N,q){if(N.g){Su(N);const oe=N.g,Te=N.v[0]?()=>{}:null;N.g=null,N.v=null,q||Le(N,"ready");try{oe.onreadystatechange=Te}catch{}}}function Su(N){N.I&&(l.clearTimeout(N.I),N.I=null)}e.isActive=function(){return!!this.g};function po(N){return N.g?N.g.readyState:0}e.Z=function(){try{return 2<po(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(N){if(this.g){var q=this.g.responseText;return N&&q.indexOf(N)==0&&(q=q.substring(N.length)),rt(q)}};function Lf(N){try{if(!N.g)return null;if("response"in N.g)return N.g.response;switch(N.H){case"":case"text":return N.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in N.g)return N.g.mozResponseArrayBuffer}return null}catch{return null}}function $0(N){const q={};N=(N.g&&2<=po(N)&&N.g.getAllResponseHeaders()||"").split(`\r
`);for(let Te=0;Te<N.length;Te++){if(y(N[Te]))continue;var oe=E(N[Te]);const xt=oe[0];if(oe=oe[1],typeof oe!="string")continue;oe=oe.trim();const St=q[xt]||[];q[xt]=St,St.push(oe)}C(q,function(Te){return Te.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function go(N,q,oe){return oe&&oe.internalChannelParams&&oe.internalChannelParams[N]||q}function ql(N){this.Aa=0,this.i=[],this.j=new Lt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=go("failFast",!1,N),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=go("baseRetryDelayMs",5e3,N),this.cb=go("retryDelaySeedMs",1e4,N),this.Wa=go("forwardChannelMaxRetries",2,N),this.wa=go("forwardChannelRequestTimeoutMs",2e4,N),this.pa=N&&N.xmlHttpFactory||void 0,this.Xa=N&&N.Tb||void 0,this.Ca=N&&N.useFetchStreams||!1,this.L=void 0,this.J=N&&N.supportsCrossDomainXhr||!1,this.K="",this.h=new mo(N&&N.concurrentRequestLimit),this.Da=new Oc,this.P=N&&N.fastHandshake||!1,this.O=N&&N.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=N&&N.Rb||!1,N&&N.xa&&this.j.xa(),N&&N.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&N&&N.detectBufferingProxy||!1,this.ja=void 0,N&&N.longPollingTimeout&&0<N.longPollingTimeout&&(this.ja=N.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=ql.prototype,e.la=8,e.G=1,e.connect=function(N,q,oe,Te){et(0),this.W=N,this.H=q||{},oe&&Te!==void 0&&(this.H.OSID=oe,this.H.OAID=Te),this.F=this.X,this.I=Bn(this,null,this.W),U(this)};function UA(N){if(Mf(N),N.G==3){var q=N.U++,oe=Ps(N.I);if(nn(oe,"SID",N.K),nn(oe,"RID",q),nn(oe,"TYPE","terminate"),tt(N,oe),q=new Oe(N,N.j,q),q.L=2,q.v=hd(Ps(oe)),oe=!1,l.navigator&&l.navigator.sendBeacon)try{oe=l.navigator.sendBeacon(q.v.toString(),"")}catch{}!oe&&l.Image&&(new Image().src=q.v,oe=!0),oe||(q.g=za(q.j,null),q.g.ea(q.v)),q.F=Date.now(),at(q)}Fa(N)}function Gl(N){N.g&&(dr(N),N.g.cancel(),N.g=null)}function Mf(N){Gl(N),N.u&&(l.clearTimeout(N.u),N.u=null),jr(N),N.h.cancel(),N.s&&(typeof N.s=="number"&&l.clearTimeout(N.s),N.s=null)}function U(N){if(!ss(N.h)&&!N.s){N.s=!0;var q=N.Ga;le||me(),ce||(le(),ce=!0),J.add(q,N),N.B=0}}function fe(N,q){return al(N.h)>=N.h.j-(N.s?1:0)?!1:N.s?(N.i=q.D.concat(N.i),!0):N.G==1||N.G==2||N.B>=(N.Va?0:N.Wa)?!1:(N.s=Pt(f(N.Ga,N,q),an(N,N.B)),N.B++,!0)}e.Ga=function(N){if(this.s)if(this.s=null,this.G==1){if(!N){this.U=Math.floor(1e5*Math.random()),N=this.U++;const xt=new Oe(this,this.j,N);let St=this.o;if(this.S&&(St?(St=S(St),L(St,this.S)):St=this.S),this.m!==null||this.O||(xt.H=St,St=null),this.P)e:{for(var q=0,oe=0;oe<this.i.length;oe++){t:{var Te=this.i[oe];if("__data__"in Te.map&&(Te=Te.map.__data__,typeof Te=="string")){Te=Te.length;break t}Te=void 0}if(Te===void 0)break;if(q+=Te,4096<q){q=oe;break e}if(q===4096||oe===this.i.length-1){q=oe+1;break e}}q=1e3}else q=1e3;q=pt(this,xt,q),oe=Ps(this.I),nn(oe,"RID",N),nn(oe,"CVER",22),this.D&&nn(oe,"X-HTTP-Session-Id",this.D),tt(this,oe),St&&(this.O?q="headers="+encodeURIComponent(String($l(St)))+"&"+q:this.m&&Df(oe,this.m,St)),sl(this.h,xt),this.Ua&&nn(oe,"TYPE","init"),this.P?(nn(oe,"$req",q),nn(oe,"SID","null"),xt.T=!0,Ye(xt,oe,null)):Ye(xt,oe,q),this.G=2}}else this.G==3&&(N?He(this,N):this.i.length==0||ss(this.h)||He(this))};function He(N,q){var oe;q?oe=q.l:oe=N.U++;const Te=Ps(N.I);nn(Te,"SID",N.K),nn(Te,"RID",oe),nn(Te,"AID",N.T),tt(N,Te),N.m&&N.o&&Df(Te,N.m,N.o),oe=new Oe(N,N.j,oe,N.B+1),N.m===null&&(oe.H=N.o),q&&(N.i=q.D.concat(N.i)),q=pt(N,oe,1e3),oe.I=Math.round(.5*N.wa)+Math.round(.5*N.wa*Math.random()),sl(N.h,oe),Ye(oe,Te,q)}function tt(N,q){N.H&&P(N.H,function(oe,Te){nn(q,Te,oe)}),N.l&&dd({},function(oe,Te){nn(q,Te,oe)})}function pt(N,q,oe){oe=Math.min(N.i.length,oe);var Te=N.l?f(N.l.Na,N.l,N):null;e:{var xt=N.i;let St=-1;for(;;){const Zt=["count="+oe];St==-1?0<oe?(St=xt[0].g,Zt.push("ofs="+St)):St=0:Zt.push("ofs="+St);let un=!0;for(let Ra=0;Ra<oe;Ra++){let Jr=xt[Ra].g;const vn=xt[Ra].map;if(Jr-=St,0>Jr)St=Math.max(0,xt[Ra].g-100),un=!1;else try{wx(vn,Zt,"req"+Jr+"_")}catch{Te&&Te(vn)}}if(un){Te=Zt.join("&");break e}}}return N=N.i.splice(0,oe),q.D=N,Te}function Ot(N){if(!N.g&&!N.u){N.Y=1;var q=N.Fa;le||me(),ce||(le(),ce=!0),J.add(q,N),N.v=0}}function Ut(N){return N.g||N.u||3<=N.v?!1:(N.Y++,N.u=Pt(f(N.Fa,N),an(N,N.v)),N.v++,!0)}e.Fa=function(){if(this.u=null,vr(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var N=2*this.R;this.j.info("BP detection timer enabled: "+N),this.A=Pt(f(this.ab,this),N)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,et(10),Gl(this),vr(this))};function dr(N){N.A!=null&&(l.clearTimeout(N.A),N.A=null)}function vr(N){N.g=new Oe(N,N.j,"rpc",N.Y),N.m===null&&(N.g.H=N.o),N.g.O=0;var q=Ps(N.qa);nn(q,"RID","rpc"),nn(q,"SID",N.K),nn(q,"AID",N.T),nn(q,"CI",N.F?"0":"1"),!N.F&&N.ja&&nn(q,"TO",N.ja),nn(q,"TYPE","xmlhttp"),tt(N,q),N.m&&N.o&&Df(q,N.m,N.o),N.L&&(N.g.I=N.L);var oe=N.g;N=N.ia,oe.L=1,oe.v=hd(Ps(q)),oe.m=null,oe.P=!0,We(oe,N)}e.Za=function(){this.C!=null&&(this.C=null,Gl(this),Ut(this),et(19))};function jr(N){N.C!=null&&(l.clearTimeout(N.C),N.C=null)}function Mr(N,q){var oe=null;if(N.g==q){jr(N),dr(N),N.g=null;var Te=2}else if(ua(N.h,q))oe=q.D,FA(N.h,q),Te=1;else return;if(N.G!=0){if(q.o)if(Te==1){oe=q.m?q.m.length:0,q=Date.now()-q.F;var xt=N.B;Te=_e(),Le(Te,new yt(Te,oe)),U(N)}else Ot(N);else if(xt=q.s,xt==3||xt==0&&0<q.X||!(Te==1&&fe(N,q)||Te==2&&Ut(N)))switch(oe&&0<oe.length&&(q=N.h,q.i=q.i.concat(oe)),xt){case 1:Cn(N,5);break;case 4:Cn(N,10);break;case 3:Cn(N,6);break;default:Cn(N,2)}}}function an(N,q){let oe=N.Ta+Math.floor(Math.random()*N.cb);return N.isActive()||(oe*=2),oe*q}function Cn(N,q){if(N.j.info("Error code "+q),q==2){var oe=f(N.fb,N),Te=N.Xa;const xt=!Te;Te=new Gn(Te||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ad(Te,"https"),hd(Te),xt?yx(Te.toString(),oe):bx(Te.toString(),oe)}else et(2);N.G=0,N.l&&N.l.sa(q),Fa(N),Mf(N)}e.fb=function(N){N?(this.j.info("Successfully pinged google.com"),et(2)):(this.j.info("Failed to ping google.com"),et(1))};function Fa(N){if(N.G=0,N.ka=[],N.l){const q=ra(N.h);(q.length!=0||N.i.length!=0)&&(g(N.ka,q),g(N.ka,N.i),N.h.i.length=0,p(N.i),N.i.length=0),N.l.ra()}}function Bn(N,q,oe){var Te=oe instanceof Gn?Ps(oe):new Gn(oe);if(Te.g!="")q&&(Te.g=q+"."+Te.g),OA(Te,Te.s);else{var xt=l.location;Te=xt.protocol,q=q?q+"."+xt.hostname:xt.hostname,xt=+xt.port;var St=new Gn(null);Te&&Ad(St,Te),q&&(St.g=q),xt&&OA(St,xt),oe&&(St.l=oe),Te=St}return oe=N.D,q=N.ya,oe&&q&&nn(Te,oe,q),nn(Te,"VER",N.la),tt(N,Te),Te}function za(N,q,oe){if(q&&!N.J)throw Error("Can't create secondary domain capable XhrIo object.");return q=N.Ca&&!N.pa?new Hn(new RA({eb:oe})):new Hn(N.pa),q.Ha(N.J),q}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Oa(){}e=Oa.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Wa(){}Wa.prototype.g=function(N,q){return new Da(N,q)};function Da(N,q){ot.call(this),this.g=new ql(q),this.l=N,this.h=q&&q.messageUrlParams||null,N=q&&q.messageHeaders||null,q&&q.clientProtocolHeaderRequired&&(N?N["X-Client-Protocol"]="webchannel":N={"X-Client-Protocol":"webchannel"}),this.g.o=N,N=q&&q.initMessageHeaders||null,q&&q.messageContentType&&(N?N["X-WebChannel-Content-Type"]=q.messageContentType:N={"X-WebChannel-Content-Type":q.messageContentType}),q&&q.va&&(N?N["X-WebChannel-Client-Profile"]=q.va:N={"X-WebChannel-Client-Profile":q.va}),this.g.S=N,(N=q&&q.Sb)&&!y(N)&&(this.g.m=N),this.v=q&&q.supportsCrossDomainXhr||!1,this.u=q&&q.sendRawJson||!1,(q=q&&q.httpSessionIdParam)&&!y(q)&&(this.g.D=q,N=this.h,N!==null&&q in N&&(N=this.h,q in N&&delete N[q])),this.j=new Wl(this)}m(Da,ot),Da.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Da.prototype.close=function(){UA(this.g)},Da.prototype.o=function(N){var q=this.g;if(typeof N=="string"){var oe={};oe.__data__=N,N=oe}else this.u&&(oe={},oe.__data__=Ue(N),N=oe);q.i.push(new Vn(q.Ya++,N)),q.G==3&&U(q)},Da.prototype.N=function(){this.g.l=null,delete this.j,UA(this.g),delete this.g,Da.aa.N.call(this)};function Mo(N){ut.call(this),N.__headers__&&(this.headers=N.__headers__,this.statusCode=N.__status__,delete N.__headers__,delete N.__status__);var q=N.__sm__;if(q){e:{for(const oe in q){N=oe;break e}N=void 0}(this.i=N)&&(N=this.i,q=q!==null&&N in q?q[N]:void 0),this.data=q}else this.data=N}m(Mo,ut);function zl(){It.call(this),this.status=1}m(zl,It);function Wl(N){this.g=N}m(Wl,Oa),Wl.prototype.ua=function(){Le(this.g,"a")},Wl.prototype.ta=function(N){Le(this.g,new Mo(N))},Wl.prototype.sa=function(N){Le(this.g,new zl)},Wl.prototype.ra=function(){Le(this.g,"b")},Wa.prototype.createWebChannel=Wa.prototype.g,Da.prototype.send=Da.prototype.o,Da.prototype.open=Da.prototype.m,Da.prototype.close=Da.prototype.close,FG=function(){return new Wa},TG=function(){return _e()},kG=$t,CP={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ae.NO_ERROR=0,Ae.TIMEOUT=8,Ae.HTTP_ERROR=6,CN=Ae,Be.COMPLETE="complete",PG=Be,it.EventType=Bt,Bt.OPEN="a",Bt.CLOSE="b",Bt.ERROR="c",Bt.MESSAGE="d",ot.prototype.listen=ot.prototype.K,Ev=it,Hn.prototype.listenOnce=Hn.prototype.L,Hn.prototype.getLastError=Hn.prototype.Ka,Hn.prototype.getLastErrorCode=Hn.prototype.Ba,Hn.prototype.getStatus=Hn.prototype.Z,Hn.prototype.getResponseJson=Hn.prototype.Oa,Hn.prototype.getResponseText=Hn.prototype.oa,Hn.prototype.send=Hn.prototype.ea,Hn.prototype.setWithCredentials=Hn.prototype.Ha,jG=Hn}).apply(typeof kw<"u"?kw:typeof self<"u"?self:typeof window<"u"?window:{});const xM="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ji.UNAUTHENTICATED=new ji(null),ji.GOOGLE_CREDENTIALS=new ji("google-credentials-uid"),ji.FIRST_PARTY=new ji("first-party-uid"),ji.MOCK_USER=new ji("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wg="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm=new Q4("@firebase/firestore");function yp(){return Gm.logLevel}function Wt(e,...t){if(Gm.logLevel<=ln.DEBUG){const r=t.map(tF);Gm.debug(`Firestore (${Wg}): ${e}`,...r)}}function Io(e,...t){if(Gm.logLevel<=ln.ERROR){const r=t.map(tF);Gm.error(`Firestore (${Wg}): ${e}`,...r)}}function nf(e,...t){if(Gm.logLevel<=ln.WARN){const r=t.map(tF);Gm.warn(`Firestore (${Wg}): ${e}`,...r)}}function tF(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(e="Unexpected state"){const t=`FIRESTORE (${Wg}) INTERNAL ASSERTION FAILED: `+e;throw Io(t),new Error(t)}function wr(e,t){e||xr()}function Rr(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class er extends wA{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OG{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class DG{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(ji.UNAUTHENTICATED))}shutdown(){}}class Rhe{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class Lhe{constructor(t){this.t=t,this.currentUser=ji.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){wr(this.o===void 0);let n=this.i;const a=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new au;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new au,t.enqueueRetryable(()=>a(this.currentUser))};const o=()=>{const c=s;t.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},l=c=>{Wt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Wt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new au)}},0),o()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==t?(Wt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(wr(typeof n.accessToken=="string"),new OG(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return wr(t===null||typeof t=="string"),new ji(t)}}class Mhe{constructor(t,r,n){this.l=t,this.h=r,this.P=n,this.type="FirstParty",this.user=ji.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Uhe{constructor(t,r,n){this.l=t,this.h=r,this.P=n}getToken(){return Promise.resolve(new Mhe(this.l,this.h,this.P))}start(t,r){t.enqueueRetryable(()=>r(ji.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Qhe{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Vhe{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,r){wr(this.o===void 0);const n=s=>{s.error!=null&&Wt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Wt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>n(s))};const a=s=>{Wt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?a(s):Wt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(wr(typeof r.token=="string"),this.R=r.token,new Qhe(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hhe(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let n=0;n<e;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rF{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const a=Hhe(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=t.charAt(a[s]%t.length))}return n}}function Hr(e,t){return e<t?-1:e>t?1:0}function yg(e,t,r){return e.length===t.length&&e.every((n,a)=>r(n,t[a]))}function RG(e){return e+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new er(Ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new er(Ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<-62135596800)throw new er(Ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new er(Ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return zt.fromMillis(Date.now())}static fromDate(t){return zt.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*r));return new zt(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Hr(this.nanoseconds,t.nanoseconds):Hr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Er(t)}static min(){return new Er(new zt(0,0))}static max(){return new Er(new zt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(t,r,n){r===void 0?r=0:r>t.length&&xr(),n===void 0?n=t.length-r:n>t.length-r&&xr(),this.segments=t,this.offset=r,this.len=n}get length(){return this.len}isEqual(t){return Gy.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof Gy?t.forEach(n=>{r.push(n)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,n=this.limit();r<n;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const n=Math.min(t.length,r.length);for(let a=0;a<n;a++){const s=t.get(a),o=r.get(a);if(s<o)return-1;if(s>o)return 1}return t.length<r.length?-1:t.length>r.length?1:0}}class bn extends Gy{construct(t,r,n){return new bn(t,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const n of t){if(n.indexOf("//")>=0)throw new er(Ft.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new bn(r)}static emptyPath(){return new bn([])}}const $he=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ia extends Gy{construct(t,r,n){return new Ia(t,r,n)}static isValidIdentifier(t){return $he.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ia.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ia(["__name__"])}static fromServerFormat(t){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new er(Ft.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;a<t.length;){const l=t[a];if(l==="\\"){if(a+1===t.length)throw new er(Ft.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new er(Ft.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=c,a+=2}else l==="`"?(o=!o,a++):l!=="."||o?(n+=l,a++):(s(),a++)}if(s(),o)throw new er(Ft.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ia(r)}static emptyPath(){return new Ia([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(t){this.path=t}static fromPath(t){return new sr(bn.fromString(t))}static fromName(t){return new sr(bn.fromString(t).popFirst(5))}static empty(){return new sr(bn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&bn.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return bn.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new sr(new bn(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(t,r,n,a){this.indexId=t,this.collectionGroup=r,this.fields=n,this.indexState=a}}function _P(e){return e.fields.find(t=>t.kind===2)}function em(e){return e.fields.filter(t=>t.kind!==2)}wC.UNKNOWN_ID=-1;class _N{constructor(t,r){this.fieldPath=t,this.kind=r}}class zy{constructor(t,r){this.sequenceNumber=t,this.offset=r}static empty(){return new zy(0,Fl.min())}}function Khe(e,t){const r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,a=Er.fromTimestamp(n===1e9?new zt(r+1,0):new zt(r,n));return new Fl(a,sr.empty(),t)}function LG(e){return new Fl(e.readTime,e.key,-1)}class Fl{constructor(t,r,n){this.readTime=t,this.documentKey=r,this.largestBatchId=n}static min(){return new Fl(Er.min(),sr.empty(),-1)}static max(){return new Fl(Er.max(),sr.empty(),-1)}}function nF(e,t){let r=e.readTime.compareTo(t.readTime);return r!==0?r:(r=sr.comparator(e.documentKey,t.documentKey),r!==0?r:Hr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MG="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UG{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y0(e){if(e.code!==Ft.FAILED_PRECONDITION||e.message!==MG)throw e;Wt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&xr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new _t((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof _t?r:_t.resolve(r)}catch(r){return _t.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):_t.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):_t.reject(r)}static resolve(t){return new _t((r,n)=>{r(t)})}static reject(t){return new _t((r,n)=>{n(t)})}static waitFor(t){return new _t((r,n)=>{let a=0,s=0,o=!1;t.forEach(l=>{++a,l.next(()=>{++s,o&&s===a&&r()},c=>n(c))}),o=!0,s===a&&r()})}static or(t){let r=_t.resolve(!1);for(const n of t)r=r.next(a=>a?_t.resolve(a):n());return r}static forEach(t,r){const n=[];return t.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(t,r){return new _t((n,a)=>{const s=t.length,o=new Array(s);let l=0;for(let c=0;c<s;c++){const u=c;r(t[u]).next(d=>{o[u]=d,++l,l===s&&n(o)},d=>a(d))}})}static doWhile(t,r){return new _t((n,a)=>{const s=()=>{t()===!0?r().next(()=>{s()},a):n()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(t,r){this.action=t,this.transaction=r,this.aborted=!1,this.V=new au,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new Zv(t,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const a=aF(n.target.error);this.V.reject(new Zv(t,a))}}static open(t,r,n,a){try{return new EE(r,t.transaction(a,n))}catch(s){throw new Zv(r,s)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(Wt("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const r=this.transaction.objectStore(t);return new Ghe(r)}}class Xh{constructor(t,r,n){this.name=t,this.version=r,this.p=n,Xh.S(qs())===12.2&&Io("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Wt("SimpleDb","Removing database:",t),im(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!Qq())return!1;if(Xh.v())return!0;const t=qs(),r=Xh.S(t),n=0<r&&r<10,a=QG(t),s=0<a&&a<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||s)}static v(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.C)==="YES"}static F(t,r){return t.store(r)}static S(t){const r=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(t){return this.db||(Wt("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=s=>{const o=s.target.result;r(o)},a.onblocked=()=>{n(new Zv(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=s=>{const o=s.target.error;o.name==="VersionError"?n(new er(Ft.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?n(new er(Ft.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):n(new Zv(t,o))},a.onupgradeneeded=s=>{Wt("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,a.transaction,s.oldVersion,this.version).next(()=>{Wt("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(t){this.N=t,this.db&&(this.db.onversionchange=r=>t(r))}async runTransaction(t,r,n,a){const s=r==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(t);const l=EE.open(this.db,t,s?"readonly":"readwrite",n),c=a(l).next(u=>(l.g(),u)).catch(u=>(l.abort(u),_t.reject(u))).toPromise();return c.catch(()=>{}),await l.m,c}catch(l){const c=l,u=c.name!=="FirebaseError"&&o<3;if(Wt("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function QG(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class qhe{constructor(t){this.B=t,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(t){this.B=t}done(){this.k=!0}$(t){this.q=t}delete(){return im(this.B.delete())}}class Zv extends er{constructor(t,r){super(Ft.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Ef(e){return e.name==="IndexedDbTransactionError"}class Ghe{constructor(t){this.store=t}put(t,r){let n;return r!==void 0?(Wt("SimpleDb","PUT",this.store.name,t,r),n=this.store.put(r,t)):(Wt("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),im(n)}add(t){return Wt("SimpleDb","ADD",this.store.name,t,t),im(this.store.add(t))}get(t){return im(this.store.get(t)).next(r=>(r===void 0&&(r=null),Wt("SimpleDb","GET",this.store.name,t,r),r))}delete(t){return Wt("SimpleDb","DELETE",this.store.name,t),im(this.store.delete(t))}count(){return Wt("SimpleDb","COUNT",this.store.name),im(this.store.count())}U(t,r){const n=this.options(t,r),a=n.index?this.store.index(n.index):this.store;if(typeof a.getAll=="function"){const s=a.getAll(n.range);return new _t((o,l)=>{s.onerror=c=>{l(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{const s=this.cursor(n),o=[];return this.W(s,(l,c)=>{o.push(c)}).next(()=>o)}}G(t,r){const n=this.store.getAll(t,r===null?void 0:r);return new _t((a,s)=>{n.onerror=o=>{s(o.target.error)},n.onsuccess=o=>{a(o.target.result)}})}j(t,r){Wt("SimpleDb","DELETE ALL",this.store.name);const n=this.options(t,r);n.H=!1;const a=this.cursor(n);return this.W(a,(s,o,l)=>l.delete())}J(t,r){let n;r?n=t:(n={},r=t);const a=this.cursor(n);return this.W(a,r)}Y(t){const r=this.cursor({});return new _t((n,a)=>{r.onerror=s=>{const o=aF(s.target.error);a(o)},r.onsuccess=s=>{const o=s.target.result;o?t(o.primaryKey,o.value).next(l=>{l?o.continue():n()}):n()}})}W(t,r){const n=[];return new _t((a,s)=>{t.onerror=o=>{s(o.target.error)},t.onsuccess=o=>{const l=o.target.result;if(!l)return void a();const c=new qhe(l),u=r(l.primaryKey,l.value,c);if(u instanceof _t){const d=u.catch(A=>(c.done(),_t.reject(A)));n.push(d)}c.isDone?a():c.K===null?l.continue():l.continue(c.K)}}).next(()=>_t.waitFor(n))}options(t,r){let n;return t!==void 0&&(typeof t=="string"?n=t:r=t),{index:n,range:r}}cursor(t){let r="next";if(t.reverse&&(r="prev"),t.index){const n=this.store.index(t.index);return t.H?n.openKeyCursor(t.range,r):n.openCursor(t.range,r)}return this.store.openCursor(t.range,r)}}function im(e){return new _t((t,r)=>{e.onsuccess=n=>{const a=n.target.result;t(a)},e.onerror=n=>{const a=aF(n.target.error);r(a)}})}let vM=!1;function aF(e){const t=Xh.S(qs());if(t>=12.2&&t<13){const r="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(r)>=0){const n=new er("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return vM||(vM=!0,setTimeout(()=>{throw n},0)),n}}return e}class zhe{constructor(t,r){this.asyncQueue=t,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(t){Wt("IndexBackfiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,async()=>{this.task=null;try{Wt("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){Ef(r)?Wt("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await y0(r)}await this.X(6e4)})}}class Whe{constructor(t,r){this.localStore=t,this.persistence=r}async ee(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,t))}te(t,r){const n=new Set;let a=r,s=!0;return _t.doWhile(()=>s===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(o=>{if(o!==null&&!n.has(o))return Wt("IndexBackfiller",`Processing collection: ${o}`),this.ne(t,o,a).next(l=>{a-=l,n.add(o)});s=!1})).next(()=>r-a)}ne(t,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,r).next(a=>this.localStore.localDocuments.getNextDocuments(t,r,a,n).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(t,o).next(()=>this.re(a,s)).next(l=>(Wt("IndexBackfiller",`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(t,r,l))).next(()=>o.size)}))}re(t,r){let n=t;return r.changes.forEach((a,s)=>{const o=LG(s);nF(o,n)>0&&(n=o)}),new Fl(n.readTime,n.documentKey,Math.max(r.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}gc.oe=-1;function ab(e){return e==null}function Wy(e){return e===0&&1/e==-1/0}function Xhe(e){return typeof e=="number"&&Number.isInteger(e)&&!Wy(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t=yM(t)),t=Jhe(e.get(r),t);return yM(t)}function Jhe(e,t){let r=t;const n=e.length;for(let a=0;a<n;a++){const s=e.charAt(a);switch(s){case"\0":r+="";break;case"":r+="";break;default:r+=s}}return r}function yM(e){return e+""}function Hu(e){const t=e.length;if(wr(t>=2),t===2)return wr(e.charAt(0)===""&&e.charAt(1)===""),bn.emptyPath();const r=t-2,n=[];let a="";for(let s=0;s<t;){const o=e.indexOf("",s);switch((o<0||o>r)&&xr(),e.charAt(o+1)){case"":const l=e.substring(s,o);let c;a.length===0?c=l:(a+=l,c=a,a=""),n.push(c);break;case"":a+=e.substring(s,o),a+="\0";break;case"":a+=e.substring(s,o+1);break;default:xr()}s=o+2}return new bn(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(e,t){return[e,Po(t)]}function VG(e,t,r){return[e,Po(t),r]}const Yhe={},Zhe=["prefixPath","collectionGroup","readTime","documentId"],efe=["prefixPath","collectionGroup","documentId"],tfe=["collectionGroup","readTime","prefixPath","documentId"],rfe=["canonicalId","targetId"],nfe=["targetId","path"],afe=["path","targetId"],sfe=["collectionId","parent"],ife=["indexId","uid"],ofe=["uid","sequenceNumber"],lfe=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],cfe=["indexId","uid","orderedDocumentKey"],ufe=["userId","collectionPath","documentId"],dfe=["userId","collectionPath","largestBatchId"],Afe=["userId","collectionGroup","largestBatchId"],HG=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],hfe=[...HG,"documentOverlays"],$G=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],KG=$G,sF=[...KG,"indexConfiguration","indexState","indexEntries"],ffe=sF,mfe=[...sF,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP extends UG{constructor(t,r){super(),this._e=t,this.currentSequenceNumber=r}}function zs(e,t){const r=Rr(e);return Xh.F(r._e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wM(e){let t=0;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function b0(e,t){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function qG(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(t,r){this.comparator=t,this.root=r||Pi.EMPTY}insert(t,r){return new ka(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,Pi.BLACK,null,null))}remove(t){return new ka(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Pi.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(t,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(t){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(t,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,n)=>(t(r,n),!1))}toString(){const t=[];return this.inorderTraversal((r,n)=>(t.push(`${r}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Tw(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Tw(this.root,t,this.comparator,!1)}getReverseIterator(){return new Tw(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Tw(this.root,t,this.comparator,!0)}}class Tw{constructor(t,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=r?n(t.key,r):1,r&&a&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Pi{constructor(t,r,n,a,s){this.key=t,this.value=r,this.color=n??Pi.RED,this.left=a??Pi.EMPTY,this.right=s??Pi.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,n,a,s){return new Pi(t??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,n){let a=this;const s=n(t,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(t,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Pi.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let n,a=this;if(r(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(t,a.key)===0){if(a.right.isEmpty())return Pi.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Pi.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Pi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw xr();const t=this.left.check();if(t!==this.right.check())throw xr();return t+(this.isRed()?0:1)}}Pi.EMPTY=null,Pi.RED=!0,Pi.BLACK=!1;Pi.EMPTY=new class{constructor(){this.size=0}get key(){throw xr()}get value(){throw xr()}get color(){throw xr()}get left(){throw xr()}get right(){throw xr()}copy(t,r,n,a,s){return this}insert(t,r,n){return new Pi(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(t){this.comparator=t,this.data=new ka(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,n)=>(t(r),!1))}forEachInRange(t,r){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,t[1])>=0)return;r(a.key)}}forEachWhile(t,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new NM(this.data.getIterator())}getIteratorFrom(t){return new NM(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(n=>{r=r.add(n)}),r}isEqual(t){if(!(t instanceof qn)||this.size!==t.size)return!1;const r=this.data.getIterator(),n=t.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new qn(this.comparator);return r.data=t,r}}class NM{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function W0(e){return e.hasNext()?e.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(t){this.fields=t,t.sort(Ia.comparator)}static empty(){return new Wo([])}unionWith(t){let r=new qn(Ia.comparator);for(const n of this.fields)r=r.add(n);for(const n of t)r=r.add(n);return new Wo(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return yg(this.fields,t.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GG extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new GG("Invalid base64 string: "+s):s}}(t);return new ys(r)}static fromUint8Array(t){const r=function(a){let s="";for(let o=0;o<a.length;++o)s+=String.fromCharCode(a[o]);return s}(t);return new ys(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Hr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ys.EMPTY_BYTE_STRING=new ys("");const pfe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uA(e){if(wr(!!e),typeof e=="string"){let t=0;const r=pfe.exec(e);if(wr(!!r),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),t=Number(a)}const n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:_a(e.seconds),nanos:_a(e.nanos)}}function _a(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function af(e){return typeof e=="string"?ys.fromBase64String(e):ys.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iF(e){var t,r;return((r=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function oF(e){const t=e.mapValue.fields.__previous_value__;return iF(t)?oF(t):t}function Xy(e){const t=uA(e.mapValue.fields.__local_write_time__.timestampValue);return new zt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gfe{constructor(t,r,n,a,s,o,l,c,u){this.databaseId=t,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u}}class sf{constructor(t,r){this.projectId=t,this.database=r||"(default)"}static empty(){return new sf("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof sf&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},SN={nullValue:"NULL_VALUE"};function zm(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?iF(e)?4:zG(e)?9007199254740991:SE(e)?10:11:xr()}function Zu(e,t){if(e===t)return!0;const r=zm(e);if(r!==zm(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Xy(e).isEqual(Xy(t));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const o=uA(a.timestampValue),l=uA(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(a,s){return af(a.bytesValue).isEqual(af(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(a,s){return _a(a.geoPointValue.latitude)===_a(s.geoPointValue.latitude)&&_a(a.geoPointValue.longitude)===_a(s.geoPointValue.longitude)}(e,t);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return _a(a.integerValue)===_a(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const o=_a(a.doubleValue),l=_a(s.doubleValue);return o===l?Wy(o)===Wy(l):isNaN(o)&&isNaN(l)}return!1}(e,t);case 9:return yg(e.arrayValue.values||[],t.arrayValue.values||[],Zu);case 10:case 11:return function(a,s){const o=a.mapValue.fields||{},l=s.mapValue.fields||{};if(wM(o)!==wM(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Zu(o[c],l[c])))return!1;return!0}(e,t);default:return xr()}}function Jy(e,t){return(e.values||[]).find(r=>Zu(r,t))!==void 0}function of(e,t){if(e===t)return 0;const r=zm(e),n=zm(t);if(r!==n)return Hr(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Hr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const l=_a(s.integerValue||s.doubleValue),c=_a(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(e,t);case 3:return CM(e.timestampValue,t.timestampValue);case 4:return CM(Xy(e),Xy(t));case 5:return Hr(e.stringValue,t.stringValue);case 6:return function(s,o){const l=af(s),c=af(o);return l.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const l=s.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=Hr(l[u],c[u]);if(d!==0)return d}return Hr(l.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const l=Hr(_a(s.latitude),_a(o.latitude));return l!==0?l:Hr(_a(s.longitude),_a(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return _M(e.arrayValue,t.arrayValue);case 10:return function(s,o){var l,c,u,d;const A=s.fields||{},f=o.fields||{},h=(l=A.value)===null||l===void 0?void 0:l.arrayValue,m=(c=f.value)===null||c===void 0?void 0:c.arrayValue,p=Hr(((u=h==null?void 0:h.values)===null||u===void 0?void 0:u.length)||0,((d=m==null?void 0:m.values)===null||d===void 0?void 0:d.length)||0);return p!==0?p:_M(h,m)}(e.mapValue,t.mapValue);case 11:return function(s,o){if(s===Ph.mapValue&&o===Ph.mapValue)return 0;if(s===Ph.mapValue)return 1;if(o===Ph.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let A=0;A<c.length&&A<d.length;++A){const f=Hr(c[A],d[A]);if(f!==0)return f;const h=of(l[c[A]],u[d[A]]);if(h!==0)return h}return Hr(c.length,d.length)}(e.mapValue,t.mapValue);default:throw xr()}}function CM(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Hr(e,t);const r=uA(e),n=uA(t),a=Hr(r.seconds,n.seconds);return a!==0?a:Hr(r.nanos,n.nanos)}function _M(e,t){const r=e.values||[],n=t.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=of(r[a],n[a]);if(s)return s}return Hr(r.length,n.length)}function bg(e){return SP(e)}function SP(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){const n=uA(r);return`time(${n.seconds},${n.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(r){return af(r).toBase64()}(e.bytesValue):"referenceValue"in e?function(r){return sr.fromName(r).toString()}(e.referenceValue):"geoPointValue"in e?function(r){return`geo(${r.latitude},${r.longitude})`}(e.geoPointValue):"arrayValue"in e?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=SP(s);return n+"]"}(e.arrayValue):"mapValue"in e?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const o of n)s?s=!1:a+=",",a+=`${o}:${SP(r.fields[o])}`;return a+"}"}(e.mapValue):xr()}function Yy(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function IP(e){return!!e&&"integerValue"in e}function Zy(e){return!!e&&"arrayValue"in e}function EM(e){return!!e&&"nullValue"in e}function SM(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function IN(e){return!!e&&"mapValue"in e}function SE(e){var t,r;return((r=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function ey(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return b0(e.mapValue.fields,(r,n)=>t.mapValue.fields[r]=ey(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=ey(e.arrayValue.values[r]);return t}return Object.assign({},e)}function zG(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const WG={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function xfe(e){return"nullValue"in e?SN:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Yy(sf.empty(),sr.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?SE(e)?WG:{mapValue:{}}:xr()}function vfe(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Yy(sf.empty(),sr.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?WG:"mapValue"in e?SE(e)?{mapValue:{}}:Ph:xr()}function IM(e,t){const r=of(e.value,t.value);return r!==0?r:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function BM(e,t){const r=of(e.value,t.value);return r!==0?r:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(t){this.value=t}static empty(){return new Oi({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let n=0;n<t.length-1;++n)if(r=(r.mapValue.fields||{})[t.get(n)],!IN(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=ey(r)}setAll(t){let r=Ia.emptyPath(),n={},a=[];t.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,a),n={},a=[],r=l.popLast()}o?n[l.lastSegment()]=ey(o):a.push(l.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(t){const r=this.field(t.popLast());IN(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return Zu(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<t.length;++n){let a=r.mapValue.fields[t.get(n)];IN(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[t.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(t,r,n){b0(r,(a,s)=>t[a]=s);for(const a of n)delete t[a]}clone(){return new Oi(ey(this.value))}}function XG(e){const t=[];return b0(e.fields,(r,n)=>{const a=new Ia([r]);if(IN(n)){const s=XG(n.mapValue).fields;if(s.length===0)t.push(a);else for(const o of s)t.push(a.child(o))}else t.push(a)}),new Wo(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(t,r,n,a,s,o,l){this.key=t,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(t){return new Sa(t,0,Er.min(),Er.min(),Er.min(),Oi.empty(),0)}static newFoundDocument(t,r,n,a){return new Sa(t,1,r,Er.min(),n,a,0)}static newNoDocument(t,r){return new Sa(t,2,r,Er.min(),Er.min(),Oi.empty(),0)}static newUnknownDocument(t,r){return new Sa(t,3,r,Er.min(),Er.min(),Oi.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(Er.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Oi.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Er.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Sa&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Sa(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(t,r){this.position=t,this.inclusive=r}}function jM(e,t,r){let n=0;for(let a=0;a<e.position.length;a++){const s=t[a],o=e.position[a];if(s.field.isKeyField()?n=sr.comparator(sr.fromName(o.referenceValue),r.key):n=of(o,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function PM(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!Zu(e.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(t,r="asc"){this.field=t,this.dir=r}}function yfe(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JG{}class cn extends JG{constructor(t,r,n){super(),this.field=t,this.op=r,this.value=n}static create(t,r,n){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,n):new bfe(t,r,n):r==="array-contains"?new Cfe(t,n):r==="in"?new nz(t,n):r==="not-in"?new _fe(t,n):r==="array-contains-any"?new Efe(t,n):new cn(t,r,n)}static createKeyFieldInFilter(t,r,n){return r==="in"?new wfe(t,n):new Nfe(t,n)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(of(r,this.value)):r!==null&&zm(this.value)===zm(r)&&this.matchesComparison(of(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return xr()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ln extends JG{constructor(t,r){super(),this.filters=t,this.op=r,this.ae=null}static create(t,r){return new Ln(t,r)}matches(t){return Ng(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ng(e){return e.op==="and"}function BP(e){return e.op==="or"}function lF(e){return YG(e)&&Ng(e)}function YG(e){for(const t of e.filters)if(t instanceof Ln)return!1;return!0}function jP(e){if(e instanceof cn)return e.field.canonicalString()+e.op.toString()+bg(e.value);if(lF(e))return e.filters.map(t=>jP(t)).join(",");{const t=e.filters.map(r=>jP(r)).join(",");return`${e.op}(${t})`}}function ZG(e,t){return e instanceof cn?function(n,a){return a instanceof cn&&n.op===a.op&&n.field.isEqual(a.field)&&Zu(n.value,a.value)}(e,t):e instanceof Ln?function(n,a){return a instanceof Ln&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,o,l)=>s&&ZG(o,a.filters[l]),!0):!1}(e,t):void xr()}function ez(e,t){const r=e.filters.concat(t);return Ln.create(r,e.op)}function tz(e){return e instanceof cn?function(r){return`${r.field.canonicalString()} ${r.op} ${bg(r.value)}`}(e):e instanceof Ln?function(r){return r.op.toString()+" {"+r.getFilters().map(tz).join(" ,")+"}"}(e):"Filter"}class bfe extends cn{constructor(t,r,n){super(t,r,n),this.key=sr.fromName(n.referenceValue)}matches(t){const r=sr.comparator(t.key,this.key);return this.matchesComparison(r)}}class wfe extends cn{constructor(t,r){super(t,"in",r),this.keys=rz("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class Nfe extends cn{constructor(t,r){super(t,"not-in",r),this.keys=rz("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function rz(e,t){var r;return(((r=t.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>sr.fromName(n.referenceValue))}class Cfe extends cn{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return Zy(r)&&Jy(r.arrayValue,this.value)}}class nz extends cn{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&Jy(this.value.arrayValue,r)}}class _fe extends cn{constructor(t,r){super(t,"not-in",r)}matches(t){if(Jy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&!Jy(this.value.arrayValue,r)}}class Efe extends cn{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!Zy(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Jy(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sfe{constructor(t,r=null,n=[],a=[],s=null,o=null,l=null){this.path=t,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function PP(e,t=null,r=[],n=[],a=null,s=null,o=null){return new Sfe(e,t,r,n,a,s,o)}function Wm(e){const t=Rr(e);if(t.ue===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(n=>jP(n)).join(","),r+="|ob:",r+=t.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),ab(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(n=>bg(n)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(n=>bg(n)).join(",")),t.ue=r}return t.ue}function sb(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!yfe(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!ZG(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!PM(e.startAt,t.startAt)&&PM(e.endAt,t.endAt)}function NC(e){return sr.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}function CC(e,t){return e.filters.filter(r=>r instanceof cn&&r.field.isEqual(t))}function kM(e,t,r){let n=SN,a=!0;for(const s of CC(e,t)){let o=SN,l=!0;switch(s.op){case"<":case"<=":o=xfe(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,l=!1;break;case"!=":case"not-in":o=SN}IM({value:n,inclusive:a},{value:o,inclusive:l})<0&&(n=o,a=l)}if(r!==null){for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const o=r.position[s];IM({value:n,inclusive:a},{value:o,inclusive:r.inclusive})<0&&(n=o,a=r.inclusive);break}}return{value:n,inclusive:a}}function TM(e,t,r){let n=Ph,a=!0;for(const s of CC(e,t)){let o=Ph,l=!0;switch(s.op){case">=":case">":o=vfe(s.value),l=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,l=!1;break;case"!=":case"not-in":o=Ph}BM({value:n,inclusive:a},{value:o,inclusive:l})>0&&(n=o,a=l)}if(r!==null){for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const o=r.position[s];BM({value:n,inclusive:a},{value:o,inclusive:r.inclusive})>0&&(n=o,a=r.inclusive);break}}return{value:n,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(t,r=null,n=[],a=[],s=null,o="F",l=null,c=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Ife(e,t,r,n,a,s,o,l){return new Xg(e,t,r,n,a,s,o,l)}function ib(e){return new Xg(e)}function FM(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function az(e){return e.collectionGroup!==null}function ty(e){const t=Rr(e);if(t.ce===null){t.ce=[];const r=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),r.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new qn(Ia.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(t).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||t.ce.push(new e1(s,n))}),r.has(Ia.keyField().canonicalString())||t.ce.push(new e1(Ia.keyField(),n))}return t.ce}function wc(e){const t=Rr(e);return t.le||(t.le=Bfe(t,ty(e))),t.le}function Bfe(e,t){if(e.limitType==="F")return PP(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new e1(a.field,s)});const r=e.endAt?new wg(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new wg(e.startAt.position,e.startAt.inclusive):null;return PP(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}function kP(e,t){const r=e.filters.concat([t]);return new Xg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function _C(e,t,r){return new Xg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function IE(e,t){return sb(wc(e),wc(t))&&e.limitType===t.limitType}function sz(e){return`${Wm(wc(e))}|lt:${e.limitType}`}function bp(e){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>tz(a)).join(", ")}]`),ab(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>bg(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>bg(a)).join(",")),`Target(${n})`}(wc(e))}; limitType=${e.limitType})`}function ob(e,t){return t.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):sr.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(e,t)&&function(n,a){for(const s of ty(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(e,t)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(e,t)&&function(n,a){return!(n.startAt&&!function(o,l,c){const u=jM(o,l,c);return o.inclusive?u<=0:u<0}(n.startAt,ty(n),a)||n.endAt&&!function(o,l,c){const u=jM(o,l,c);return o.inclusive?u>=0:u>0}(n.endAt,ty(n),a))}(e,t)}function jfe(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function iz(e){return(t,r)=>{let n=!1;for(const a of ty(e)){const s=Pfe(a,t,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function Pfe(e,t,r){const n=e.field.isKeyField()?sr.comparator(t.key,r.key):function(s,o,l){const c=o.data.field(s),u=l.data.field(s);return c!==null&&u!==null?of(c,u):xr()}(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return-1*n;default:return xr()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,t))return s}}has(t){return this.get(t)!==void 0}set(t,r){const n=this.mapKeyFn(t),a=this.inner[n];if(a===void 0)return this.inner[n]=[[t,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],t))return void(a[s]=[t,r]);a.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],t))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(t){b0(this.inner,(r,n)=>{for(const[a,s]of n)t(a,s)})}isEmpty(){return qG(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kfe=new ka(sr.comparator);function Il(){return kfe}const oz=new ka(sr.comparator);function Sv(...e){let t=oz;for(const r of e)t=t.insert(r.key,r);return t}function lz(e){let t=oz;return e.forEach((r,n)=>t=t.insert(r,n.overlayedDocument)),t}function $u(){return ry()}function cz(){return ry()}function ry(){return new Sf(e=>e.toString(),(e,t)=>e.isEqual(t))}const Tfe=new ka(sr.comparator),Ffe=new qn(sr.comparator);function Xr(...e){let t=Ffe;for(const r of e)t=t.add(r);return t}const Ofe=new qn(Hr);function Dfe(){return Ofe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cF(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wy(t)?"-0":t}}function uz(e){return{integerValue:""+e}}function Rfe(e,t){return Xhe(t)?uz(t):cF(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(){this._=void 0}}function Lfe(e,t,r){return e instanceof t1?function(a,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&iF(s)&&(s=oF(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(r,t):e instanceof Cg?Az(e,t):e instanceof _g?hz(e,t):function(a,s){const o=dz(a,s),l=OM(o)+OM(a.Pe);return IP(o)&&IP(a.Pe)?uz(l):cF(a.serializer,l)}(e,t)}function Mfe(e,t,r){return e instanceof Cg?Az(e,t):e instanceof _g?hz(e,t):r}function dz(e,t){return e instanceof r1?function(n){return IP(n)||function(s){return!!s&&"doubleValue"in s}(n)}(t)?t:{integerValue:0}:null}class t1 extends BE{}class Cg extends BE{constructor(t){super(),this.elements=t}}function Az(e,t){const r=fz(t);for(const n of e.elements)r.some(a=>Zu(a,n))||r.push(n);return{arrayValue:{values:r}}}class _g extends BE{constructor(t){super(),this.elements=t}}function hz(e,t){let r=fz(t);for(const n of e.elements)r=r.filter(a=>!Zu(a,n));return{arrayValue:{values:r}}}class r1 extends BE{constructor(t,r){super(),this.serializer=t,this.Pe=r}}function OM(e){return _a(e.integerValue||e.doubleValue)}function fz(e){return Zy(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ufe{constructor(t,r){this.field=t,this.transform=r}}function Qfe(e,t){return e.field.isEqual(t.field)&&function(n,a){return n instanceof Cg&&a instanceof Cg||n instanceof _g&&a instanceof _g?yg(n.elements,a.elements,Zu):n instanceof r1&&a instanceof r1?Zu(n.Pe,a.Pe):n instanceof t1&&a instanceof t1}(e.transform,t.transform)}class Vfe{constructor(t,r){this.version=t,this.transformResults=r}}class Ba{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new Ba}static exists(t){return new Ba(void 0,t)}static updateTime(t){return new Ba(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function BN(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class jE{}function mz(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Yg(e.key,Ba.none()):new Jg(e.key,e.data,Ba.none());{const r=e.data,n=Oi.empty();let a=new qn(Ia.comparator);for(let s of t.fields)if(!a.has(s)){let o=r.field(s);o===null&&s.length>1&&(s=s.popLast(),o=r.field(s)),o===null?n.delete(s):n.set(s,o),a=a.add(s)}return new NA(e.key,n,new Wo(a.toArray()),Ba.none())}}function Hfe(e,t,r){e instanceof Jg?function(a,s,o){const l=a.value.clone(),c=RM(a.fieldTransforms,s,o.transformResults);l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,r):e instanceof NA?function(a,s,o){if(!BN(a.precondition,s))return void s.convertToUnknownDocument(o.version);const l=RM(a.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(pz(a)),c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(e,t,r):function(a,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,r)}function ny(e,t,r,n){return e instanceof Jg?function(s,o,l,c){if(!BN(s.precondition,o))return l;const u=s.value.clone(),d=LM(s.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(e,t,r,n):e instanceof NA?function(s,o,l,c){if(!BN(s.precondition,o))return l;const u=LM(s.fieldTransforms,c,o),d=o.data;return d.setAll(pz(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(A=>A.field))}(e,t,r,n):function(s,o,l){return BN(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(e,t,r)}function $fe(e,t){let r=null;for(const n of e.fieldTransforms){const a=t.data.field(n.field),s=dz(n.transform,a||null);s!=null&&(r===null&&(r=Oi.empty()),r.set(n.field,s))}return r||null}function DM(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&yg(n,a,(s,o)=>Qfe(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Jg extends jE{constructor(t,r,n,a=[]){super(),this.key=t,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class NA extends jE{constructor(t,r,n,a,s=[]){super(),this.key=t,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function pz(e){const t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=e.data.field(r);t.set(r,n)}}),t}function RM(e,t,r){const n=new Map;wr(e.length===r.length);for(let a=0;a<r.length;a++){const s=e[a],o=s.transform,l=t.data.field(s.field);n.set(s.field,Mfe(o,l,r[a]))}return n}function LM(e,t,r){const n=new Map;for(const a of e){const s=a.transform,o=r.data.field(a.field);n.set(a.field,Lfe(s,o,t))}return n}class Yg extends jE{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uF extends jE{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dF{constructor(t,r,n,a){this.batchId=t,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(t,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(t.key)&&Hfe(s,t,n[a])}}applyToLocalView(t,r){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(r=ny(n,t,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(r=ny(n,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const n=cz();return this.mutations.forEach(a=>{const s=t.get(a.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=r.has(a.key)?null:l;const c=mz(o,l);c!==null&&n.set(a.key,c),o.isValidDocument()||o.convertToNoDocument(Er.min())}),n}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),Xr())}isEqual(t){return this.batchId===t.batchId&&yg(this.mutations,t.mutations,(r,n)=>DM(r,n))&&yg(this.baseMutations,t.baseMutations,(r,n)=>DM(r,n))}}class AF{constructor(t,r,n,a){this.batch=t,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(t,r,n){wr(t.mutations.length===n.length);let a=function(){return Tfe}();const s=t.mutations;for(let o=0;o<s.length;o++)a=a.insert(s[o].key,n[o].version);return new AF(t,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kfe{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ns,hn;function gz(e){switch(e){default:return xr();case Ft.CANCELLED:case Ft.UNKNOWN:case Ft.DEADLINE_EXCEEDED:case Ft.RESOURCE_EXHAUSTED:case Ft.INTERNAL:case Ft.UNAVAILABLE:case Ft.UNAUTHENTICATED:return!1;case Ft.INVALID_ARGUMENT:case Ft.NOT_FOUND:case Ft.ALREADY_EXISTS:case Ft.PERMISSION_DENIED:case Ft.FAILED_PRECONDITION:case Ft.ABORTED:case Ft.OUT_OF_RANGE:case Ft.UNIMPLEMENTED:case Ft.DATA_LOSS:return!0}}function xz(e){if(e===void 0)return Io("GRPC error has no .code"),Ft.UNKNOWN;switch(e){case Ns.OK:return Ft.OK;case Ns.CANCELLED:return Ft.CANCELLED;case Ns.UNKNOWN:return Ft.UNKNOWN;case Ns.DEADLINE_EXCEEDED:return Ft.DEADLINE_EXCEEDED;case Ns.RESOURCE_EXHAUSTED:return Ft.RESOURCE_EXHAUSTED;case Ns.INTERNAL:return Ft.INTERNAL;case Ns.UNAVAILABLE:return Ft.UNAVAILABLE;case Ns.UNAUTHENTICATED:return Ft.UNAUTHENTICATED;case Ns.INVALID_ARGUMENT:return Ft.INVALID_ARGUMENT;case Ns.NOT_FOUND:return Ft.NOT_FOUND;case Ns.ALREADY_EXISTS:return Ft.ALREADY_EXISTS;case Ns.PERMISSION_DENIED:return Ft.PERMISSION_DENIED;case Ns.FAILED_PRECONDITION:return Ft.FAILED_PRECONDITION;case Ns.ABORTED:return Ft.ABORTED;case Ns.OUT_OF_RANGE:return Ft.OUT_OF_RANGE;case Ns.UNIMPLEMENTED:return Ft.UNIMPLEMENTED;case Ns.DATA_LOSS:return Ft.DATA_LOSS;default:return xr()}}(hn=Ns||(Ns={}))[hn.OK=0]="OK",hn[hn.CANCELLED=1]="CANCELLED",hn[hn.UNKNOWN=2]="UNKNOWN",hn[hn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",hn[hn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",hn[hn.NOT_FOUND=5]="NOT_FOUND",hn[hn.ALREADY_EXISTS=6]="ALREADY_EXISTS",hn[hn.PERMISSION_DENIED=7]="PERMISSION_DENIED",hn[hn.UNAUTHENTICATED=16]="UNAUTHENTICATED",hn[hn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",hn[hn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",hn[hn.ABORTED=10]="ABORTED",hn[hn.OUT_OF_RANGE=11]="OUT_OF_RANGE",hn[hn.UNIMPLEMENTED=12]="UNIMPLEMENTED",hn[hn.INTERNAL=13]="INTERNAL",hn[hn.UNAVAILABLE=14]="UNAVAILABLE",hn[hn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qfe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gfe=new Cm([4294967295,4294967295],0);function MM(e){const t=qfe().encode(e),r=new BG;return r.update(t),new Uint8Array(r.digest())}function UM(e){const t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),a=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Cm([r,n],0),new Cm([a,s],0)]}class fF{constructor(t,r,n){if(this.bitmap=t,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Iv(`Invalid padding: ${r}`);if(n<0)throw new Iv(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new Iv(`Invalid hash count: ${n}`);if(t.length===0&&r!==0)throw new Iv(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*t.length-r,this.Te=Cm.fromNumber(this.Ie)}Ee(t,r,n){let a=t.add(r.multiply(Cm.fromNumber(n)));return a.compare(Gfe)===1&&(a=new Cm([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const r=MM(t),[n,a]=UM(r);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,a,s);if(!this.de(o))return!1}return!0}static create(t,r,n){const a=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new fF(s,a,r);return n.forEach(l=>o.insert(l)),o}insert(t){if(this.Ie===0)return;const r=MM(t),[n,a]=UM(r);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,a,s);this.Ae(o)}}Ae(t){const r=Math.floor(t/8),n=t%8;this.bitmap[r]|=1<<n}}class Iv extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(t,r,n,a,s){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,r,n){const a=new Map;return a.set(t,lb.createSynthesizedTargetChangeForCurrentChange(t,r,n)),new PE(Er.min(),a,new ka(Hr),Il(),Xr())}}class lb{constructor(t,r,n,a,s){this.resumeToken=t,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,r,n){return new lb(n,r,Xr(),Xr(),Xr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(t,r,n,a){this.Re=t,this.removedTargetIds=r,this.key=n,this.Ve=a}}class vz{constructor(t,r){this.targetId=t,this.me=r}}class yz{constructor(t,r,n=ys.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=r,this.resumeToken=n,this.cause=a}}class QM{constructor(){this.fe=0,this.ge=HM(),this.pe=ys.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=Xr(),r=Xr(),n=Xr();return this.ge.forEach((a,s)=>{switch(s){case 0:t=t.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:xr()}}),new lb(this.pe,this.ye,t,r,n)}Ce(){this.we=!1,this.ge=HM()}Fe(t,r){this.we=!0,this.ge=this.ge.insert(t,r)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,wr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class zfe{constructor(t){this.Le=t,this.Be=new Map,this.ke=Il(),this.qe=VM(),this.Qe=new ka(Hr)}Ke(t){for(const r of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(r,t.Ve):this.Ue(r,t.key,t.Ve);for(const r of t.removedTargetIds)this.Ue(r,t.key,t.Ve)}We(t){this.forEachTarget(t,r=>{const n=this.Ge(r);switch(t.state){case 0:this.ze(r)&&n.De(t.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(t.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(t.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(t.resumeToken));break;default:xr()}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.Be.forEach((n,a)=>{this.ze(a)&&r(a)})}He(t){const r=t.targetId,n=t.me.count,a=this.Je(r);if(a){const s=a.target;if(NC(s))if(n===0){const o=new sr(s.path);this.Ue(r,o,Sa.newNoDocument(o,Er.min()))}else wr(n===1);else{const o=this.Ye(r);if(o!==n){const l=this.Ze(t),c=l?this.Xe(l,t,o):1;if(c!==0){this.je(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,u)}}}}}Ze(t){const r=t.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let o,l;try{o=af(n).toUint8Array()}catch(c){if(c instanceof GG)return nf("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new fF(o,a,s)}catch(c){return nf(c instanceof Iv?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(t,r,n){return r.me.count===n-this.nt(t,r.targetId)?0:2}nt(t,r){const n=this.Le.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.Ue(r,s,null),a++)}),a}rt(t){const r=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&NC(l.target)){const c=new sr(l.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Sa.newNoDocument(c,t))}s.be&&(r.set(o,s.ve()),s.Ce())}});let n=Xr();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const a=new PE(t,r,this.Qe,this.ke,n);return this.ke=Il(),this.qe=VM(),this.Qe=new ka(Hr),a}$e(t,r){if(!this.ze(t))return;const n=this.it(t,r.key)?2:0;this.Ge(t).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(t))}Ue(t,r,n){if(!this.ze(t))return;const a=this.Ge(t);this.it(t,r)?a.Fe(r,1):a.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(t)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(t){this.Be.delete(t)}Ye(t){const r=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let r=this.Be.get(t);return r||(r=new QM,this.Be.set(t,r)),r}st(t){let r=this.qe.get(t);return r||(r=new qn(Hr),this.qe=this.qe.insert(t,r)),r}ze(t){const r=this.Je(t)!==null;return r||Wt("WatchChangeAggregator","Detected inactive target",t),r}Je(t){const r=this.Be.get(t);return r&&r.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new QM),this.Le.getRemoteKeysForTarget(t).forEach(r=>{this.Ue(t,r,null)})}it(t,r){return this.Le.getRemoteKeysForTarget(t).has(r)}}function VM(){return new ka(sr.comparator)}function HM(){return new ka(sr.comparator)}const Wfe={asc:"ASCENDING",desc:"DESCENDING"},Xfe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Jfe={and:"AND",or:"OR"};class Yfe{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function TP(e,t){return e.useProto3Json||ab(t)?t:{value:t}}function Eg(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function bz(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Zfe(e,t){return Eg(e,t.toTimestamp())}function Ai(e){return wr(!!e),Er.fromTimestamp(function(r){const n=uA(r);return new zt(n.seconds,n.nanos)}(e))}function mF(e,t){return FP(e,t).canonicalString()}function FP(e,t){const r=function(a){return new bn(["projects",a.projectId,"databases",a.database])}(e).child("documents");return t===void 0?r:r.child(t)}function wz(e){const t=bn.fromString(e);return wr(Pz(t)),t}function n1(e,t){return mF(e.databaseId,t.path)}function Wd(e,t){const r=wz(t);if(r.get(1)!==e.databaseId.projectId)throw new er(Ft.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new er(Ft.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new sr(_z(r))}function Nz(e,t){return mF(e.databaseId,t)}function Cz(e){const t=wz(e);return t.length===4?bn.emptyPath():_z(t)}function OP(e){return new bn(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function _z(e){return wr(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function $M(e,t,r){return{name:n1(e,t),fields:r.value.mapValue.fields}}function eme(e,t,r){const n=Wd(e,t.name),a=Ai(t.updateTime),s=t.createTime?Ai(t.createTime):Er.min(),o=new Oi({mapValue:{fields:t.fields}}),l=Sa.newFoundDocument(n,a,s,o);return r&&l.setHasCommittedMutations(),r?l.setHasCommittedMutations():l}function tme(e,t){return"found"in t?function(n,a){wr(!!a.found),a.found.name,a.found.updateTime;const s=Wd(n,a.found.name),o=Ai(a.found.updateTime),l=a.found.createTime?Ai(a.found.createTime):Er.min(),c=new Oi({mapValue:{fields:a.found.fields}});return Sa.newFoundDocument(s,o,l,c)}(e,t):"missing"in t?function(n,a){wr(!!a.missing),wr(!!a.readTime);const s=Wd(n,a.missing),o=Ai(a.readTime);return Sa.newNoDocument(s,o)}(e,t):xr()}function rme(e,t){let r;if("targetChange"in t){t.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:xr()}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(wr(d===void 0||typeof d=="string"),ys.fromBase64String(d||"")):(wr(d===void 0||d instanceof Buffer||d instanceof Uint8Array),ys.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(u){const d=u.code===void 0?Ft.UNKNOWN:xz(u.code);return new er(d,u.message||"")}(o);r=new yz(n,a,s,l||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const a=Wd(e,n.document.name),s=Ai(n.document.updateTime),o=n.document.createTime?Ai(n.document.createTime):Er.min(),l=new Oi({mapValue:{fields:n.document.fields}}),c=Sa.newFoundDocument(a,s,o,l),u=n.targetIds||[],d=n.removedTargetIds||[];r=new jN(u,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const a=Wd(e,n.document),s=n.readTime?Ai(n.readTime):Er.min(),o=Sa.newNoDocument(a,s),l=n.removedTargetIds||[];r=new jN([],l,o.key,o)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const a=Wd(e,n.document),s=n.removedTargetIds||[];r=new jN([],s,a,null)}else{if(!("filter"in t))return xr();{t.filter;const n=t.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,o=new Kfe(a,s),l=n.targetId;r=new vz(l,o)}}return r}function a1(e,t){let r;if(t instanceof Jg)r={update:$M(e,t.key,t.value)};else if(t instanceof Yg)r={delete:n1(e,t.key)};else if(t instanceof NA)r={update:$M(e,t.key,t.data),updateMask:lme(t.fieldMask)};else{if(!(t instanceof uF))return xr();r={verify:n1(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(n=>function(s,o){const l=o.transform;if(l instanceof t1)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Cg)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof _g)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof r1)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw xr()}(0,n))),t.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:Zfe(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:xr()}(e,t.precondition)),r}function DP(e,t){const r=t.currentDocument?function(s){return s.updateTime!==void 0?Ba.updateTime(Ai(s.updateTime)):s.exists!==void 0?Ba.exists(s.exists):Ba.none()}(t.currentDocument):Ba.none(),n=t.updateTransforms?t.updateTransforms.map(a=>function(o,l){let c=null;if("setToServerValue"in l)wr(l.setToServerValue==="REQUEST_TIME"),c=new t1;else if("appendMissingElements"in l){const d=l.appendMissingElements.values||[];c=new Cg(d)}else if("removeAllFromArray"in l){const d=l.removeAllFromArray.values||[];c=new _g(d)}else"increment"in l?c=new r1(o,l.increment):xr();const u=Ia.fromServerFormat(l.fieldPath);return new Ufe(u,c)}(e,a)):[];if(t.update){t.update.name;const a=Wd(e,t.update.name),s=new Oi({mapValue:{fields:t.update.fields}});if(t.updateMask){const o=function(c){const u=c.fieldPaths||[];return new Wo(u.map(d=>Ia.fromServerFormat(d)))}(t.updateMask);return new NA(a,s,o,r,n)}return new Jg(a,s,r,n)}if(t.delete){const a=Wd(e,t.delete);return new Yg(a,r)}if(t.verify){const a=Wd(e,t.verify);return new uF(a,r)}return xr()}function nme(e,t){return e&&e.length>0?(wr(t!==void 0),e.map(r=>function(a,s){let o=a.updateTime?Ai(a.updateTime):Ai(s);return o.isEqual(Er.min())&&(o=Ai(s)),new Vfe(o,a.transformResults||[])}(r,t))):[]}function Ez(e,t){return{documents:[Nz(e,t.path)]}}function Sz(e,t){const r={structuredQuery:{}},n=t.path;let a;t.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=Nz(e,a);const s=function(u){if(u.length!==0)return jz(Ln.create(u,"and"))}(t.filters);s&&(r.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(f){return{field:wp(f.field),direction:sme(f.dir)}}(d))}(t.orderBy);o&&(r.structuredQuery.orderBy=o);const l=TP(e,t.limit);return l!==null&&(r.structuredQuery.limit=l),t.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{_t:r,parent:a}}function Iz(e){let t=Cz(e.parent);const r=e.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){wr(n===1);const d=r.from[0];d.allDescendants?a=d.collectionId:t=t.child(d.collectionId)}let s=[];r.where&&(s=function(A){const f=Bz(A);return f instanceof Ln&&lF(f)?f.getFilters():[f]}(r.where));let o=[];r.orderBy&&(o=function(A){return A.map(f=>function(m){return new e1(Np(m.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(f))}(r.orderBy));let l=null;r.limit&&(l=function(A){let f;return f=typeof A=="object"?A.value:A,ab(f)?null:f}(r.limit));let c=null;r.startAt&&(c=function(A){const f=!!A.before,h=A.values||[];return new wg(h,f)}(r.startAt));let u=null;return r.endAt&&(u=function(A){const f=!A.before,h=A.values||[];return new wg(h,f)}(r.endAt)),Ife(t,a,o,s,l,"F",c,u)}function ame(e,t){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xr()}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function Bz(e){return e.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Np(r.unaryFilter.field);return cn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=Np(r.unaryFilter.field);return cn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Np(r.unaryFilter.field);return cn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Np(r.unaryFilter.field);return cn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return xr()}}(e):e.fieldFilter!==void 0?function(r){return cn.create(Np(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xr()}}(r.fieldFilter.op),r.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(r){return Ln.create(r.compositeFilter.filters.map(n=>Bz(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return xr()}}(r.compositeFilter.op))}(e):xr()}function sme(e){return Wfe[e]}function ime(e){return Xfe[e]}function ome(e){return Jfe[e]}function wp(e){return{fieldPath:e.canonicalString()}}function Np(e){return Ia.fromServerFormat(e.fieldPath)}function jz(e){return e instanceof cn?function(r){if(r.op==="=="){if(SM(r.value))return{unaryFilter:{field:wp(r.field),op:"IS_NAN"}};if(EM(r.value))return{unaryFilter:{field:wp(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(SM(r.value))return{unaryFilter:{field:wp(r.field),op:"IS_NOT_NAN"}};if(EM(r.value))return{unaryFilter:{field:wp(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wp(r.field),op:ime(r.op),value:r.value}}}(e):e instanceof Ln?function(r){const n=r.getFilters().map(a=>jz(a));return n.length===1?n[0]:{compositeFilter:{op:ome(r.op),filters:n}}}(e):xr()}function lme(e){const t=[];return e.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function Pz(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(t,r,n,a,s=Er.min(),o=Er.min(),l=ys.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new Vd(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new Vd(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Vd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Vd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kz{constructor(t){this.ct=t}}function cme(e,t){let r;if(t.document)r=eme(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const n=sr.fromSegments(t.noDocument.path),a=Jm(t.noDocument.readTime);r=Sa.newNoDocument(n,a),t.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!t.unknownDocument)return xr();{const n=sr.fromSegments(t.unknownDocument.path),a=Jm(t.unknownDocument.version);r=Sa.newUnknownDocument(n,a)}}return t.readTime&&r.setReadTime(function(a){const s=new zt(a[0],a[1]);return Er.fromTimestamp(s)}(t.readTime)),r}function KM(e,t){const r=t.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:EC(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())n.document=function(s,o){return{name:n1(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Eg(s,o.version.toTimestamp()),createTime:Eg(s,o.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:Xm(t.version)};else{if(!t.isUnknownDocument())return xr();n.unknownDocument={path:r.path.toArray(),version:Xm(t.version)}}return n}function EC(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Xm(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Jm(e){const t=new zt(e.seconds,e.nanoseconds);return Er.fromTimestamp(t)}function om(e,t){const r=(t.baseMutations||[]).map(s=>DP(e.ct,s));for(let s=0;s<t.mutations.length-1;++s){const o=t.mutations[s];if(s+1<t.mutations.length&&t.mutations[s+1].transform!==void 0){const l=t.mutations[s+1];o.updateTransforms=l.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const n=t.mutations.map(s=>DP(e.ct,s)),a=zt.fromMillis(t.localWriteTimeMs);return new dF(t.batchId,a,r,n)}function Bv(e){const t=Jm(e.readTime),r=e.lastLimboFreeSnapshotVersion!==void 0?Jm(e.lastLimboFreeSnapshotVersion):Er.min();let n;return n=function(s){return s.documents!==void 0}(e.query)?function(s){return wr(s.documents.length===1),wc(ib(Cz(s.documents[0])))}(e.query):function(s){return wc(Iz(s))}(e.query),new Vd(n,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,r,ys.fromBase64String(e.resumeToken))}function Tz(e,t){const r=Xm(t.snapshotVersion),n=Xm(t.lastLimboFreeSnapshotVersion);let a;a=NC(t.target)?Ez(e.ct,t.target):Sz(e.ct,t.target)._t;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Wm(t.target),readTime:r,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:a}}function Fz(e){const t=Iz({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?_C(t,t.limit,"L"):t}function _B(e,t){return new hF(t.largestBatchId,DP(e.ct,t.overlayMutation))}function qM(e,t){const r=t.path.lastSegment();return[e,Po(t.path.popLast()),r]}function GM(e,t,r,n){return{indexId:e,uid:t,sequenceNumber:r,readTime:Xm(n.readTime),documentKey:Po(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ume{getBundleMetadata(t,r){return zM(t).get(r).next(n=>{if(n)return function(s){return{id:s.bundleId,createTime:Jm(s.createTime),version:s.version}}(n)})}saveBundleMetadata(t,r){return zM(t).put(function(a){return{bundleId:a.id,createTime:Xm(Ai(a.createTime)),version:a.version}}(r))}getNamedQuery(t,r){return WM(t).get(r).next(n=>{if(n)return function(s){return{name:s.name,query:Fz(s.bundledQuery),readTime:Jm(s.readTime)}}(n)})}saveNamedQuery(t,r){return WM(t).put(function(a){return{name:a.name,readTime:Xm(Ai(a.readTime)),bundledQuery:a.bundledQuery}}(r))}}function zM(e){return zs(e,"bundles")}function WM(e){return zs(e,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(t,r){this.serializer=t,this.userId=r}static lt(t,r){const n=r.uid||"";return new kE(t,n)}getOverlay(t,r){return qx(t).get(qM(this.userId,r)).next(n=>n?_B(this.serializer,n):null)}getOverlays(t,r){const n=$u();return _t.forEach(r,a=>this.getOverlay(t,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(t,r,n){const a=[];return n.forEach((s,o)=>{const l=new hF(r,o);a.push(this.ht(t,l))}),_t.waitFor(a)}removeOverlaysForBatchId(t,r,n){const a=new Set;r.forEach(o=>a.add(Po(o.getCollectionPath())));const s=[];return a.forEach(o=>{const l=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,n+1],!1,!0);s.push(qx(t).j("collectionPathOverlayIndex",l))}),_t.waitFor(s)}getOverlaysForCollection(t,r,n){const a=$u(),s=Po(r),o=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return qx(t).U("collectionPathOverlayIndex",o).next(l=>{for(const c of l){const u=_B(this.serializer,c);a.set(u.getKey(),u)}return a})}getOverlaysForCollectionGroup(t,r,n,a){const s=$u();let o;const l=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return qx(t).J({index:"collectionGroupOverlayIndex",range:l},(c,u,d)=>{const A=_B(this.serializer,u);s.size()<a||A.largestBatchId===o?(s.set(A.getKey(),A),o=A.largestBatchId):d.done()}).next(()=>s)}ht(t,r){return qx(t).put(function(a,s,o){const[l,c,u]=qM(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:a1(a.ct,o.mutation)}}(this.serializer,this.userId,r))}}function qx(e){return zs(e,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dme{Pt(t){return zs(t,"globals")}getSessionToken(t){return this.Pt(t).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?ys.fromUint8Array(n):ys.EMPTY_BYTE_STRING})}setSessionToken(t,r){return this.Pt(t).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(){}It(t,r){this.Tt(t,r),r.Et()}Tt(t,r){if("nullValue"in t)this.dt(r,5);else if("booleanValue"in t)this.dt(r,10),r.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(r,15),r.At(_a(t.integerValue));else if("doubleValue"in t){const n=_a(t.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),Wy(n)?r.At(0):r.At(n))}else if("timestampValue"in t){let n=t.timestampValue;this.dt(r,20),typeof n=="string"&&(n=uA(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,r),this.ft(r);else if("bytesValue"in t)this.dt(r,30),r.gt(af(t.bytesValue)),this.ft(r);else if("referenceValue"in t)this.yt(t.referenceValue,r);else if("geoPointValue"in t){const n=t.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in t?zG(t)?this.dt(r,Number.MAX_SAFE_INTEGER):SE(t)?this.wt(t.mapValue,r):(this.St(t.mapValue,r),this.ft(r)):"arrayValue"in t?(this.bt(t.arrayValue,r),this.ft(r)):xr()}Vt(t,r){this.dt(r,25),this.Dt(t,r)}Dt(t,r){r.Rt(t)}St(t,r){const n=t.fields||{};this.dt(r,55);for(const a of Object.keys(n))this.Vt(a,r),this.Tt(n[a],r)}wt(t,r){var n,a;const s=t.fields||{};this.dt(r,53);const o="value",l=((a=(n=s[o].arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.length)||0;this.dt(r,15),r.At(_a(l)),this.Vt(o,r),this.Tt(s[o],r)}bt(t,r){const n=t.values||[];this.dt(r,50);for(const a of n)this.Tt(a,r)}yt(t,r){this.dt(r,37),sr.fromName(t).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(t,r){t.At(r)}ft(t){t.At(2)}}lm.vt=new lm;function Ame(e){if(e===0)return 8;let t=0;return!(e>>4)&&(t+=4,e<<=4),!(e>>6)&&(t+=2,e<<=2),!(e>>7)&&(t+=1),t}function XM(e){const t=64-function(n){let a=0;for(let s=0;s<8;++s){const o=Ame(255&n[s]);if(a+=o,o!==8)break}return a}(e);return Math.ceil(t/8)}class hme{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(t){const r=t[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(t){const r=t[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(t){for(const r of t){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const a=r.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}this.Mt()}Bt(t){for(const r of t){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const a=r.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}this.Nt()}kt(t){const r=this.qt(t),n=XM(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=255&r[a]}Kt(t){const r=this.qt(t),n=XM(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=~(255&r[a])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(t){this.Qt(t.length),this.buffer.set(t,this.position),this.position+=t.length}zt(){return this.buffer.slice(0,this.position)}qt(t){const r=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(t),n=(128&r[0])!=0;r[0]^=n?255:128;for(let a=1;a<r.length;++a)r[a]^=n?255:0;return r}Ft(t){const r=255&t;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(t){const r=255&t;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(t)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(t){this.Qt(1),this.buffer[this.position++]=t}Gt(t){this.Qt(1),this.buffer[this.position++]=~t}Qt(t){const r=t+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const a=new Uint8Array(n);a.set(this.buffer),this.buffer=a}}class fme{constructor(t){this.jt=t}gt(t){this.jt.Ct(t)}Rt(t){this.jt.Lt(t)}At(t){this.jt.kt(t)}Et(){this.jt.$t()}}class mme{constructor(t){this.jt=t}gt(t){this.jt.xt(t)}Rt(t){this.jt.Bt(t)}At(t){this.jt.Kt(t)}Et(){this.jt.Wt()}}class Gx{constructor(){this.jt=new hme,this.Ht=new fme(this.jt),this.Jt=new mme(this.jt)}seed(t){this.jt.seed(t)}Yt(t){return t===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(t,r,n,a){this.indexId=t,this.documentKey=r,this.arrayValue=n,this.directionalValue=a}Zt(){const t=this.directionalValue.length,r=t===0||this.directionalValue[t-1]===255?t+1:t,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==t?n.set([0],this.directionalValue.length):++n[n.length-1],new cm(this.indexId,this.documentKey,this.arrayValue,n)}}function rh(e,t){let r=e.indexId-t.indexId;return r!==0?r:(r=JM(e.arrayValue,t.arrayValue),r!==0?r:(r=JM(e.directionalValue,t.directionalValue),r!==0?r:sr.comparator(e.documentKey,t.documentKey)))}function JM(e,t){for(let r=0;r<e.length&&r<t.length;++r){const n=e[r]-t[r];if(n!==0)return n}return e.length-t.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(t){this.Xt=new qn((r,n)=>Ia.comparator(r.field,n.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.en=t.orderBy,this.tn=[];for(const r of t.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(t){if(wr(t.collectionGroup===this.collectionId),this.nn)return!1;const r=_P(t);if(r!==void 0&&!this.sn(r))return!1;const n=em(t);let a=new Set,s=0,o=0;for(;s<n.length&&this.sn(n[s]);++s)a=a.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.Xt.size>0){const l=this.Xt.getIterator().getNext();if(!a.has(l.field.canonicalString())){const c=n[s];if(!this.on(l,c)||!this._n(this.en[o++],c))return!1}++s}for(;s<n.length;++s){const l=n[s];if(o>=this.en.length||!this._n(this.en[o++],l))return!1}return!0}an(){if(this.nn)return null;let t=new qn(Ia.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new _N(n.field,2));else{if(t.has(n.field))continue;t=t.add(n.field),r.push(new _N(n.field,0))}for(const n of this.en)n.field.isKeyField()||t.has(n.field)||(t=t.add(n.field),r.push(new _N(n.field,n.dir==="asc"?0:1)));return new wC(wC.UNKNOWN_ID,this.collectionId,r,zy.empty())}sn(t){for(const r of this.tn)if(this.on(r,t))return!0;return!1}on(t,r){if(t===void 0||!t.field.isEqual(r.fieldPath))return!1;const n=t.op==="array-contains"||t.op==="array-contains-any";return r.kind===2===n}_n(t,r){return!!t.field.isEqual(r.fieldPath)&&(r.kind===0&&t.dir==="asc"||r.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oz(e){var t,r;if(wr(e instanceof cn||e instanceof Ln),e instanceof cn){if(e instanceof nz){const a=((r=(t=e.value.arrayValue)===null||t===void 0?void 0:t.values)===null||r===void 0?void 0:r.map(s=>cn.create(e.field,"==",s)))||[];return Ln.create(a,"or")}return e}const n=e.filters.map(a=>Oz(a));return Ln.create(n,e.op)}function pme(e){if(e.getFilters().length===0)return[];const t=MP(Oz(e));return wr(Dz(t)),RP(t)||LP(t)?[t]:t.getFilters()}function RP(e){return e instanceof cn}function LP(e){return e instanceof Ln&&lF(e)}function Dz(e){return RP(e)||LP(e)||function(r){if(r instanceof Ln&&BP(r)){for(const n of r.getFilters())if(!RP(n)&&!LP(n))return!1;return!0}return!1}(e)}function MP(e){if(wr(e instanceof cn||e instanceof Ln),e instanceof cn)return e;if(e.filters.length===1)return MP(e.filters[0]);const t=e.filters.map(n=>MP(n));let r=Ln.create(t,e.op);return r=SC(r),Dz(r)?r:(wr(r instanceof Ln),wr(Ng(r)),wr(r.filters.length>1),r.filters.reduce((n,a)=>pF(n,a)))}function pF(e,t){let r;return wr(e instanceof cn||e instanceof Ln),wr(t instanceof cn||t instanceof Ln),r=e instanceof cn?t instanceof cn?function(a,s){return Ln.create([a,s],"and")}(e,t):ZM(e,t):t instanceof cn?ZM(t,e):function(a,s){if(wr(a.filters.length>0&&s.filters.length>0),Ng(a)&&Ng(s))return ez(a,s.getFilters());const o=BP(a)?a:s,l=BP(a)?s:a,c=o.filters.map(u=>pF(u,l));return Ln.create(c,"or")}(e,t),SC(r)}function ZM(e,t){if(Ng(t))return ez(t,e.getFilters());{const r=t.filters.map(n=>pF(e,n));return Ln.create(r,"or")}}function SC(e){if(wr(e instanceof cn||e instanceof Ln),e instanceof cn)return e;const t=e.getFilters();if(t.length===1)return SC(t[0]);if(YG(e))return e;const r=t.map(a=>SC(a)),n=[];return r.forEach(a=>{a instanceof cn?n.push(a):a instanceof Ln&&(a.op===e.op?n.push(...a.filters):n.push(a))}),n.length===1?n[0]:Ln.create(n,e.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gme{constructor(){this.un=new gF}addToCollectionParentIndex(t,r){return this.un.add(r),_t.resolve()}getCollectionParents(t,r){return _t.resolve(this.un.getEntries(r))}addFieldIndex(t,r){return _t.resolve()}deleteFieldIndex(t,r){return _t.resolve()}deleteAllFieldIndexes(t){return _t.resolve()}createTargetIndexes(t,r){return _t.resolve()}getDocumentsMatchingTarget(t,r){return _t.resolve(null)}getIndexType(t,r){return _t.resolve(0)}getFieldIndexes(t,r){return _t.resolve([])}getNextCollectionGroupToUpdate(t){return _t.resolve(null)}getMinOffset(t,r){return _t.resolve(Fl.min())}getMinOffsetFromCollectionGroup(t,r){return _t.resolve(Fl.min())}updateCollectionGroup(t,r,n){return _t.resolve()}updateIndexEntries(t,r){return _t.resolve()}}class gF{constructor(){this.index={}}add(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r]||new qn(bn.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(t){return(this.index[t]||new qn(bn.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw=new Uint8Array(0);class xme{constructor(t,r){this.databaseId=r,this.cn=new gF,this.ln=new Sf(n=>Wm(n),(n,a)=>sb(n,a)),this.uid=t.uid||""}addToCollectionParentIndex(t,r){if(!this.cn.has(r)){const n=r.lastSegment(),a=r.popLast();t.addOnCommittedListener(()=>{this.cn.add(r)});const s={collectionId:n,parent:Po(a)};return e6(t).put(s)}return _t.resolve()}getCollectionParents(t,r){const n=[],a=IDBKeyRange.bound([r,""],[RG(r),""],!1,!0);return e6(t).U(a).next(s=>{for(const o of s){if(o.collectionId!==r)break;n.push(Hu(o.parent))}return n})}addFieldIndex(t,r){const n=zx(t),a=function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(r);delete a.indexId;const s=n.add(a);if(r.indexState){const o=J0(t);return s.next(l=>{o.put(GM(l,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return s.next()}deleteFieldIndex(t,r){const n=zx(t),a=J0(t),s=X0(t);return n.delete(r.indexId).next(()=>a.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const r=zx(t),n=X0(t),a=J0(t);return r.j().next(()=>n.j()).next(()=>a.j())}createTargetIndexes(t,r){return _t.forEach(this.hn(r),n=>this.getIndexType(t,n).next(a=>{if(a===0||a===1){const s=new YM(n).an();if(s!=null)return this.addFieldIndex(t,s)}}))}getDocumentsMatchingTarget(t,r){const n=X0(t);let a=!0;const s=new Map;return _t.forEach(this.hn(r),o=>this.Pn(t,o).next(l=>{a&&(a=!!l),s.set(o,l)})).next(()=>{if(a){let o=Xr();const l=[];return _t.forEach(s,(c,u)=>{Wt("IndexedDbIndexManager",`Using index ${function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(_=>`${_.fieldPath}:${_.kind}`).join(",")}`}(c)} to execute ${Wm(r)}`);const d=function(b,_){const T=_P(_);if(T===void 0)return null;for(const P of CC(b,T.fieldPath))switch(P.op){case"array-contains-any":return P.value.arrayValue.values||[];case"array-contains":return[P.value]}return null}(u,c),A=function(b,_){const T=new Map;for(const P of em(_))for(const C of CC(b,P.fieldPath))switch(C.op){case"==":case"in":T.set(P.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return T.set(P.fieldPath.canonicalString(),C.value),Array.from(T.values())}return null}(u,c),f=function(b,_){const T=[];let P=!0;for(const C of em(_)){const S=C.kind===0?kM(b,C.fieldPath,b.startAt):TM(b,C.fieldPath,b.startAt);T.push(S.value),P&&(P=S.inclusive)}return new wg(T,P)}(u,c),h=function(b,_){const T=[];let P=!0;for(const C of em(_)){const S=C.kind===0?TM(b,C.fieldPath,b.endAt):kM(b,C.fieldPath,b.endAt);T.push(S.value),P&&(P=S.inclusive)}return new wg(T,P)}(u,c),m=this.In(c,u,f),p=this.In(c,u,h),g=this.Tn(c,u,A),x=this.En(c.indexId,d,m,f.inclusive,p,h.inclusive,g);return _t.forEach(x,y=>n.G(y,r.limit).next(b=>{b.forEach(_=>{const T=sr.fromSegments(_.documentKey);o.has(T)||(o=o.add(T),l.push(T))})}))}).next(()=>l)}return _t.resolve(null)})}hn(t){let r=this.ln.get(t);return r||(t.filters.length===0?r=[t]:r=pme(Ln.create(t.filters,"and")).map(n=>PP(t.path,t.collectionGroup,t.orderBy,n.getFilters(),t.limit,t.startAt,t.endAt)),this.ln.set(t,r),r)}En(t,r,n,a,s,o,l){const c=(r!=null?r.length:1)*Math.max(n.length,s.length),u=c/(r!=null?r.length:1),d=[];for(let A=0;A<c;++A){const f=r?this.dn(r[A/u]):Fw,h=this.An(t,f,n[A%u],a),m=this.Rn(t,f,s[A%u],o),p=l.map(g=>this.An(t,f,g,!0));d.push(...this.createRange(h,m,p))}return d}An(t,r,n,a){const s=new cm(t,sr.empty(),r,n);return a?s:s.Zt()}Rn(t,r,n,a){const s=new cm(t,sr.empty(),r,n);return a?s.Zt():s}Pn(t,r){const n=new YM(r),a=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(t,a).next(s=>{let o=null;for(const l of s)n.rn(l)&&(!o||l.fields.length>o.fields.length)&&(o=l);return o})}getIndexType(t,r){let n=2;const a=this.hn(r);return _t.forEach(a,s=>this.Pn(t,s).next(o=>{o?n!==0&&o.fields.length<function(c){let u=new qn(Ia.comparator),d=!1;for(const A of c.filters)for(const f of A.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:u=u.add(f.field));for(const A of c.orderBy)A.field.isKeyField()||(u=u.add(A.field));return u.size+(d?1:0)}(s)&&(n=1):n=0})).next(()=>function(o){return o.limit!==null}(r)&&a.length>1&&n===2?1:n)}Vn(t,r){const n=new Gx;for(const a of em(t)){const s=r.data.field(a.fieldPath);if(s==null)return null;const o=n.Yt(a.kind);lm.vt.It(s,o)}return n.zt()}dn(t){const r=new Gx;return lm.vt.It(t,r.Yt(0)),r.zt()}mn(t,r){const n=new Gx;return lm.vt.It(Yy(this.databaseId,r),n.Yt(function(s){const o=em(s);return o.length===0?0:o[o.length-1].kind}(t))),n.zt()}Tn(t,r,n){if(n===null)return[];let a=[];a.push(new Gx);let s=0;for(const o of em(t)){const l=n[s++];for(const c of a)if(this.fn(r,o.fieldPath)&&Zy(l))a=this.gn(a,o,l);else{const u=c.Yt(o.kind);lm.vt.It(l,u)}}return this.pn(a)}In(t,r,n){return this.Tn(t,r,n.position)}pn(t){const r=[];for(let n=0;n<t.length;++n)r[n]=t[n].zt();return r}gn(t,r,n){const a=[...t],s=[];for(const o of n.arrayValue.values||[])for(const l of a){const c=new Gx;c.seed(l.zt()),lm.vt.It(o,c.Yt(r.kind)),s.push(c)}return s}fn(t,r){return!!t.filters.find(n=>n instanceof cn&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(t,r){const n=zx(t),a=J0(t);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(s=>{const o=[];return _t.forEach(s,l=>a.get([l.indexId,this.uid]).next(c=>{o.push(function(d,A){const f=A?new zy(A.sequenceNumber,new Fl(Jm(A.readTime),new sr(Hu(A.documentKey)),A.largestBatchId)):zy.empty(),h=d.fields.map(([m,p])=>new _N(Ia.fromServerFormat(m),p));return new wC(d.indexId,d.collectionGroup,h,f)}(l,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(r=>r.length===0?null:(r.sort((n,a)=>{const s=n.indexState.sequenceNumber-a.indexState.sequenceNumber;return s!==0?s:Hr(n.collectionGroup,a.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(t,r,n){const a=zx(t),s=J0(t);return this.yn(t).next(o=>a.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(l=>_t.forEach(l,c=>s.put(GM(c.indexId,this.uid,o,n)))))}updateIndexEntries(t,r){const n=new Map;return _t.forEach(r,(a,s)=>{const o=n.get(a.collectionGroup);return(o?_t.resolve(o):this.getFieldIndexes(t,a.collectionGroup)).next(l=>(n.set(a.collectionGroup,l),_t.forEach(l,c=>this.wn(t,a,c).next(u=>{const d=this.Sn(s,c);return u.isEqual(d)?_t.resolve():this.bn(t,s,c,u,d)}))))})}Dn(t,r,n,a){return X0(t).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(t,r,n,a){return X0(t).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(t,r,n){const a=X0(t);let s=new qn(rh);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(o,l)=>{s=s.add(new cm(n.indexId,r,l.arrayValue,l.directionalValue))}).next(()=>s)}Sn(t,r){let n=new qn(rh);const a=this.Vn(r,t);if(a==null)return n;const s=_P(r);if(s!=null){const o=t.data.field(s.fieldPath);if(Zy(o))for(const l of o.arrayValue.values||[])n=n.add(new cm(r.indexId,t.key,this.dn(l),a))}else n=n.add(new cm(r.indexId,t.key,Fw,a));return n}bn(t,r,n,a,s){Wt("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const o=[];return function(c,u,d,A,f){const h=c.getIterator(),m=u.getIterator();let p=W0(h),g=W0(m);for(;p||g;){let x=!1,y=!1;if(p&&g){const b=d(p,g);b<0?y=!0:b>0&&(x=!0)}else p!=null?y=!0:x=!0;x?(A(g),g=W0(m)):y?(f(p),p=W0(h)):(p=W0(h),g=W0(m))}}(a,s,rh,l=>{o.push(this.Dn(t,r,n,l))},l=>{o.push(this.vn(t,r,n,l))}),_t.waitFor(o)}yn(t){let r=1;return J0(t).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,a,s)=>{s.done(),r=a.sequenceNumber+1}).next(()=>r)}createRange(t,r,n){n=n.sort((o,l)=>rh(o,l)).filter((o,l,c)=>!l||rh(o,c[l-1])!==0);const a=[];a.push(t);for(const o of n){const l=rh(o,t),c=rh(o,r);if(l===0)a[0]=t.Zt();else if(l>0&&c<0)a.push(o),a.push(o.Zt());else if(c>0)break}a.push(r);const s=[];for(let o=0;o<a.length;o+=2){if(this.Cn(a[o],a[o+1]))return[];const l=[a[o].indexId,this.uid,a[o].arrayValue,a[o].directionalValue,Fw,[]],c=[a[o+1].indexId,this.uid,a[o+1].arrayValue,a[o+1].directionalValue,Fw,[]];s.push(IDBKeyRange.bound(l,c))}return s}Cn(t,r){return rh(t,r)>0}getMinOffsetFromCollectionGroup(t,r){return this.getFieldIndexes(t,r).next(t6)}getMinOffset(t,r){return _t.mapArray(this.hn(r),n=>this.Pn(t,n).next(a=>a||xr())).next(t6)}}function e6(e){return zs(e,"collectionParents")}function X0(e){return zs(e,"indexEntries")}function zx(e){return zs(e,"indexConfiguration")}function J0(e){return zs(e,"indexState")}function t6(e){wr(e.length!==0);let t=e[0].indexState.offset,r=t.largestBatchId;for(let n=1;n<e.length;n++){const a=e[n].indexState.offset;nF(a,t)<0&&(t=a),r<a.largestBatchId&&(r=a.largestBatchId)}return new Fl(t.readTime,t.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ko{constructor(t,r,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new Ko(t,Ko.DEFAULT_COLLECTION_PERCENTILE,Ko.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rz(e,t,r){const n=e.store("mutations"),a=e.store("documentMutations"),s=[],o=IDBKeyRange.only(r.batchId);let l=0;const c=n.J({range:o},(d,A,f)=>(l++,f.delete()));s.push(c.next(()=>{wr(l===1)}));const u=[];for(const d of r.mutations){const A=VG(t,d.key.path,r.batchId);s.push(a.delete(A)),u.push(d.key)}return _t.waitFor(s).next(()=>u)}function IC(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw xr();t=e.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ko.DEFAULT_COLLECTION_PERCENTILE=10,Ko.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ko.DEFAULT=new Ko(41943040,Ko.DEFAULT_COLLECTION_PERCENTILE,Ko.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ko.DISABLED=new Ko(-1,0,0);class TE{constructor(t,r,n,a){this.userId=t,this.serializer=r,this.indexManager=n,this.referenceDelegate=a,this.Fn={}}static lt(t,r,n,a){wr(t.uid!=="");const s=t.isAuthenticated()?t.uid:"";return new TE(s,r,n,a)}checkEmpty(t){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return nh(t).J({index:"userMutationsIndex",range:n},(a,s,o)=>{r=!1,o.done()}).next(()=>r)}addMutationBatch(t,r,n,a){const s=Cp(t),o=nh(t);return o.add({}).next(l=>{wr(typeof l=="number");const c=new dF(l,r,n,a),u=function(h,m,p){const g=p.baseMutations.map(y=>a1(h.ct,y)),x=p.mutations.map(y=>a1(h.ct,y));return{userId:m,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:g,mutations:x}}(this.serializer,this.userId,c),d=[];let A=new qn((f,h)=>Hr(f.canonicalString(),h.canonicalString()));for(const f of a){const h=VG(this.userId,f.key.path,l);A=A.add(f.key.path.popLast()),d.push(o.put(u)),d.push(s.put(h,Yhe))}return A.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(t,f))}),t.addOnCommittedListener(()=>{this.Fn[l]=c.keys()}),_t.waitFor(d).next(()=>c)})}lookupMutationBatch(t,r){return nh(t).get(r).next(n=>n?(wr(n.userId===this.userId),om(this.serializer,n)):null)}Mn(t,r){return this.Fn[r]?_t.resolve(this.Fn[r]):this.lookupMutationBatch(t,r).next(n=>{if(n){const a=n.keys();return this.Fn[r]=a,a}return null})}getNextMutationBatchAfterBatchId(t,r){const n=r+1,a=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return nh(t).J({index:"userMutationsIndex",range:a},(o,l,c)=>{l.userId===this.userId&&(wr(l.batchId>=n),s=om(this.serializer,l)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return nh(t).J({index:"userMutationsIndex",range:r,reverse:!0},(a,s,o)=>{n=s.batchId,o.done()}).next(()=>n)}getAllMutationBatches(t){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return nh(t).U("userMutationsIndex",r).next(n=>n.map(a=>om(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(t,r){const n=EN(this.userId,r.path),a=IDBKeyRange.lowerBound(n),s=[];return Cp(t).J({range:a},(o,l,c)=>{const[u,d,A]=o,f=Hu(d);if(u===this.userId&&r.path.isEqual(f))return nh(t).get(A).next(h=>{if(!h)throw xr();wr(h.userId===this.userId),s.push(om(this.serializer,h))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,r){let n=new qn(Hr);const a=[];return r.forEach(s=>{const o=EN(this.userId,s.path),l=IDBKeyRange.lowerBound(o),c=Cp(t).J({range:l},(u,d,A)=>{const[f,h,m]=u,p=Hu(h);f===this.userId&&s.path.isEqual(p)?n=n.add(m):A.done()});a.push(c)}),_t.waitFor(a).next(()=>this.xn(t,n))}getAllMutationBatchesAffectingQuery(t,r){const n=r.path,a=n.length+1,s=EN(this.userId,n),o=IDBKeyRange.lowerBound(s);let l=new qn(Hr);return Cp(t).J({range:o},(c,u,d)=>{const[A,f,h]=c,m=Hu(f);A===this.userId&&n.isPrefixOf(m)?m.length===a&&(l=l.add(h)):d.done()}).next(()=>this.xn(t,l))}xn(t,r){const n=[],a=[];return r.forEach(s=>{a.push(nh(t).get(s).next(o=>{if(o===null)throw xr();wr(o.userId===this.userId),n.push(om(this.serializer,o))}))}),_t.waitFor(a).next(()=>n)}removeMutationBatch(t,r){return Rz(t._e,this.userId,r).next(n=>(t.addOnCommittedListener(()=>{this.On(r.batchId)}),_t.forEach(n,a=>this.referenceDelegate.markPotentiallyOrphaned(t,a))))}On(t){delete this.Fn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(r=>{if(!r)return _t.resolve();const n=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),a=[];return Cp(t).J({range:n},(s,o,l)=>{if(s[0]===this.userId){const c=Hu(s[1]);a.push(c)}else l.done()}).next(()=>{wr(a.length===0)})})}containsKey(t,r){return Lz(t,this.userId,r)}Nn(t){return Mz(t).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Lz(e,t,r){const n=EN(t,r.path),a=n[1],s=IDBKeyRange.lowerBound(n);let o=!1;return Cp(e).J({range:s,H:!0},(l,c,u)=>{const[d,A,f]=l;d===t&&A===a&&(o=!0),u.done()}).next(()=>o)}function nh(e){return zs(e,"mutations")}function Cp(e){return zs(e,"documentMutations")}function Mz(e){return zs(e,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ym(0)}static kn(){return new Ym(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vme{constructor(t,r){this.referenceDelegate=t,this.serializer=r}allocateTargetId(t){return this.qn(t).next(r=>{const n=new Ym(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(t,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.qn(t).next(r=>Er.fromTimestamp(new zt(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.qn(t).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(t,r,n){return this.qn(t).next(a=>(a.highestListenSequenceNumber=r,n&&(a.lastRemoteSnapshotVersion=n.toTimestamp()),r>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=r),this.Qn(t,a)))}addTargetData(t,r){return this.Kn(t,r).next(()=>this.qn(t).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(t,n))))}updateTargetData(t,r){return this.Kn(t,r)}removeTargetData(t,r){return this.removeMatchingKeysForTargetId(t,r.targetId).next(()=>Y0(t).delete(r.targetId)).next(()=>this.qn(t)).next(n=>(wr(n.targetCount>0),n.targetCount-=1,this.Qn(t,n)))}removeTargets(t,r,n){let a=0;const s=[];return Y0(t).J((o,l)=>{const c=Bv(l);c.sequenceNumber<=r&&n.get(c.targetId)===null&&(a++,s.push(this.removeTargetData(t,c)))}).next(()=>_t.waitFor(s)).next(()=>a)}forEachTarget(t,r){return Y0(t).J((n,a)=>{const s=Bv(a);r(s)})}qn(t){return n6(t).get("targetGlobalKey").next(r=>(wr(r!==null),r))}Qn(t,r){return n6(t).put("targetGlobalKey",r)}Kn(t,r){return Y0(t).put(Tz(this.serializer,r))}$n(t,r){let n=!1;return t.targetId>r.highestTargetId&&(r.highestTargetId=t.targetId,n=!0),t.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t.sequenceNumber,n=!0),n}getTargetCount(t){return this.qn(t).next(r=>r.targetCount)}getTargetData(t,r){const n=Wm(r),a=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return Y0(t).J({range:a,index:"queryTargetsIndex"},(o,l,c)=>{const u=Bv(l);sb(r,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(t,r,n){const a=[],s=_h(t);return r.forEach(o=>{const l=Po(o.path);a.push(s.put({targetId:n,path:l})),a.push(this.referenceDelegate.addReference(t,n,o))}),_t.waitFor(a)}removeMatchingKeys(t,r,n){const a=_h(t);return _t.forEach(r,s=>{const o=Po(s.path);return _t.waitFor([a.delete([n,o]),this.referenceDelegate.removeReference(t,n,s)])})}removeMatchingKeysForTargetId(t,r){const n=_h(t),a=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(a)}getMatchingKeysForTargetId(t,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),a=_h(t);let s=Xr();return a.J({range:n,H:!0},(o,l,c)=>{const u=Hu(o[1]),d=new sr(u);s=s.add(d)}).next(()=>s)}containsKey(t,r){const n=Po(r.path),a=IDBKeyRange.bound([n],[RG(n)],!1,!0);let s=0;return _h(t).J({index:"documentTargetsIndex",H:!0,range:a},([o,l],c,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}ot(t,r){return Y0(t).get(r).next(n=>n?Bv(n):null)}}function Y0(e){return zs(e,"targets")}function n6(e){return zs(e,"targetGlobal")}function _h(e){return zs(e,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a6([e,t],[r,n]){const a=Hr(e,r);return a===0?Hr(t,n):a}class yme{constructor(t){this.Un=t,this.buffer=new qn(a6),this.Wn=0}Gn(){return++this.Wn}zn(t){const r=[t,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();a6(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class bme{constructor(t,r,n){this.garbageCollector=t,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(t){Wt("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Ef(r)?Wt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await y0(r)}await this.Hn(3e5)})}}class wme{constructor(t,r){this.Jn=t,this.params=r}calculateTargetCount(t,r){return this.Jn.Yn(t).next(n=>Math.floor(r/100*n))}nthSequenceNumber(t,r){if(r===0)return _t.resolve(gc.oe);const n=new yme(r);return this.Jn.forEachTarget(t,a=>n.zn(a.sequenceNumber)).next(()=>this.Jn.Zn(t,a=>n.zn(a))).next(()=>n.maxValue)}removeTargets(t,r,n){return this.Jn.removeTargets(t,r,n)}removeOrphanedDocuments(t,r){return this.Jn.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(Wt("LruGarbageCollector","Garbage collection skipped; disabled"),_t.resolve(r6)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?(Wt("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),r6):this.Xn(t,r))}getCacheSize(t){return this.Jn.getCacheSize(t)}Xn(t,r){let n,a,s,o,l,c,u;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(Wt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),a=this.params.maximumSequenceNumbersToCollect):a=A,o=Date.now(),this.nthSequenceNumber(t,a))).next(A=>(n=A,l=Date.now(),this.removeTargets(t,n,r))).next(A=>(s=A,c=Date.now(),this.removeOrphanedDocuments(t,n))).next(A=>(u=Date.now(),yp()<=ln.DEBUG&&Wt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${a} in `+(l-o)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${A} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),_t.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:A})))}}function Nme(e,t){return new wme(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cme{constructor(t,r){this.db=t,this.garbageCollector=Nme(this,r)}Yn(t){const r=this.er(t);return this.db.getTargetCache().getTargetCount(t).next(n=>r.next(a=>n+a))}er(t){let r=0;return this.Zn(t,n=>{r++}).next(()=>r)}forEachTarget(t,r){return this.db.getTargetCache().forEachTarget(t,r)}Zn(t,r){return this.tr(t,(n,a)=>r(a))}addReference(t,r,n){return Ow(t,n)}removeReference(t,r,n){return Ow(t,n)}removeTargets(t,r,n){return this.db.getTargetCache().removeTargets(t,r,n)}markPotentiallyOrphaned(t,r){return Ow(t,r)}nr(t,r){return function(a,s){let o=!1;return Mz(a).Y(l=>Lz(a,l,s).next(c=>(c&&(o=!0),_t.resolve(!c)))).next(()=>o)}(t,r)}removeOrphanedDocuments(t,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let s=0;return this.tr(t,(o,l)=>{if(l<=r){const c=this.nr(t,o).next(u=>{if(!u)return s++,n.getEntry(t,o).next(()=>(n.removeEntry(o,Er.min()),_h(t).delete(function(A){return[0,Po(A.path)]}(o))))});a.push(c)}}).next(()=>_t.waitFor(a)).next(()=>n.apply(t)).next(()=>s)}removeTarget(t,r){const n=r.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)}updateLimboDocument(t,r){return Ow(t,r)}tr(t,r){const n=_h(t);let a,s=gc.oe;return n.J({index:"documentTargetsIndex"},([o,l],{path:c,sequenceNumber:u})=>{o===0?(s!==gc.oe&&r(new sr(Hu(a)),s),s=u,a=c):s=gc.oe}).next(()=>{s!==gc.oe&&r(new sr(Hu(a)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Ow(e,t){return _h(e).put(function(n,a){return{targetId:0,path:Po(n.path),sequenceNumber:a}}(t,e.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uz{constructor(){this.changes=new Sf(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,Sa.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?_t.resolve(n):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _me{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,r,n){return $f(t).put(n)}removeEntry(t,r,n){return $f(t).delete(function(s,o){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],EC(o),l[l.length-1]]}(r,n))}updateMetadata(t,r){return this.getMetadata(t).next(n=>(n.byteSize+=r,this.rr(t,n)))}getEntry(t,r){let n=Sa.newInvalidDocument(r);return $f(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Wx(r))},(a,s)=>{n=this.ir(r,s)}).next(()=>n)}sr(t,r){let n={size:0,document:Sa.newInvalidDocument(r)};return $f(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Wx(r))},(a,s)=>{n={document:this.ir(r,s),size:IC(s)}}).next(()=>n)}getEntries(t,r){let n=Il();return this._r(t,r,(a,s)=>{const o=this.ir(a,s);n=n.insert(a,o)}).next(()=>n)}ar(t,r){let n=Il(),a=new ka(sr.comparator);return this._r(t,r,(s,o)=>{const l=this.ir(s,o);n=n.insert(s,l),a=a.insert(s,IC(o))}).next(()=>({documents:n,ur:a}))}_r(t,r,n){if(r.isEmpty())return _t.resolve();let a=new qn(o6);r.forEach(c=>a=a.add(c));const s=IDBKeyRange.bound(Wx(a.first()),Wx(a.last())),o=a.getIterator();let l=o.getNext();return $f(t).J({index:"documentKeyIndex",range:s},(c,u,d)=>{const A=sr.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;l&&o6(l,A)<0;)n(l,null),l=o.getNext();l&&l.isEqual(A)&&(n(l,u),l=o.hasNext()?o.getNext():null),l?d.$(Wx(l)):d.done()}).next(()=>{for(;l;)n(l,null),l=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(t,r,n,a,s){const o=r.path,l=[o.popLast().toArray(),o.lastSegment(),EC(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return $f(t).U(IDBKeyRange.bound(l,c,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let d=Il();for(const A of u){const f=this.ir(sr.fromSegments(A.prefixPath.concat(A.collectionGroup,A.documentId)),A);f.isFoundDocument()&&(ob(r,f)||a.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(t,r,n,a){let s=Il();const o=i6(r,n),l=i6(r,Fl.max());return $f(t).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,l,!0)},(c,u,d)=>{const A=this.ir(sr.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(A.key,A),s.size===a&&d.done()}).next(()=>s)}newChangeBuffer(t){return new Eme(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(r=>r.byteSize)}getMetadata(t){return s6(t).get("remoteDocumentGlobalKey").next(r=>(wr(!!r),r))}rr(t,r){return s6(t).put("remoteDocumentGlobalKey",r)}ir(t,r){if(r){const n=cme(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(Er.min())))return n}return Sa.newInvalidDocument(t)}}function Qz(e){return new _me(e)}class Eme extends Uz{constructor(t,r){super(),this.cr=t,this.trackRemovals=r,this.lr=new Sf(n=>n.toString(),(n,a)=>n.isEqual(a))}applyChanges(t){const r=[];let n=0,a=new qn((s,o)=>Hr(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const l=this.lr.get(s);if(r.push(this.cr.removeEntry(t,s,l.readTime)),o.isValidDocument()){const c=KM(this.cr.serializer,o);a=a.add(s.path.popLast());const u=IC(c);n+=u-l.size,r.push(this.cr.addEntry(t,s,c))}else if(n-=l.size,this.trackRemovals){const c=KM(this.cr.serializer,o.convertToNoDocument(Er.min()));r.push(this.cr.addEntry(t,s,c))}}),a.forEach(s=>{r.push(this.cr.indexManager.addToCollectionParentIndex(t,s))}),r.push(this.cr.updateMetadata(t,n)),_t.waitFor(r)}getFromCache(t,r){return this.cr.sr(t,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(t,r){return this.cr.ar(t,r).next(({documents:n,ur:a})=>(a.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:n.get(s).readTime})}),n))}}function s6(e){return zs(e,"remoteDocumentGlobal")}function $f(e){return zs(e,"remoteDocumentsV14")}function Wx(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function i6(e,t){const r=t.documentKey.path.toArray();return[e,EC(t.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function o6(e,t){const r=e.path.toArray(),n=t.path.toArray();let a=0;for(let s=0;s<r.length-2&&s<n.length-2;++s)if(a=Hr(r[s],n[s]),a)return a;return a=Hr(r.length,n.length),a||(a=Hr(r[r.length-2],n[n.length-2]),a||Hr(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sme{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vz{constructor(t,r,n,a){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(t,r){let n=null;return this.documentOverlayCache.getOverlay(t,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(t,r))).next(a=>(n!==null&&ny(n.mutation,a,Wo.empty(),zt.now()),a))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.getLocalViewOfDocuments(t,n,Xr()).next(()=>n))}getLocalViewOfDocuments(t,r,n=Xr()){const a=$u();return this.populateOverlays(t,a,r).next(()=>this.computeViews(t,r,a,n).next(s=>{let o=Sv();return s.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(t,r){const n=$u();return this.populateOverlays(t,n,r).next(()=>this.computeViews(t,r,n,Xr()))}populateOverlays(t,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(t,a).next(s=>{s.forEach((o,l)=>{r.set(o,l)})})}computeViews(t,r,n,a){let s=Il();const o=ry(),l=function(){return ry()}();return r.forEach((c,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof NA)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),ny(d.mutation,u,d.mutation.getFieldMask(),zt.now())):o.set(u.key,Wo.empty())}),this.recalculateAndSaveOverlays(t,s).next(c=>(c.forEach((u,d)=>o.set(u,d)),r.forEach((u,d)=>{var A;return l.set(u,new Sme(d,(A=o.get(u))!==null&&A!==void 0?A:null))}),l))}recalculateAndSaveOverlays(t,r){const n=ry();let a=new ka((o,l)=>o-l),s=Xr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||Wo.empty();d=l.applyToLocalView(u,d),n.set(c,d);const A=(a.get(l.batchId)||Xr()).add(c);a=a.insert(l.batchId,A)})}).next(()=>{const o=[],l=a.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,A=cz();d.forEach(f=>{if(!s.has(f)){const h=mz(r.get(f),n.get(f));h!==null&&A.set(f,h),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,u,A))}return _t.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,r,n,a){return function(o){return sr.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):az(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,n,a):this.getDocumentsMatchingCollectionQuery(t,r,n,a)}getNextDocuments(t,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,n,a).next(s=>{const o=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,n.largestBatchId,a-s.size):_t.resolve($u());let l=-1,c=s;return o.next(u=>_t.forEach(u,(d,A)=>(l<A.largestBatchId&&(l=A.largestBatchId),s.get(d)?_t.resolve():this.remoteDocumentCache.getEntry(t,d).next(f=>{c=c.insert(d,f)}))).next(()=>this.populateOverlays(t,u,s)).next(()=>this.computeViews(t,c,u,Xr())).next(d=>({batchId:l,changes:lz(d)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new sr(r)).next(n=>{let a=Sv();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(t,r,n,a){const s=r.collectionGroup;let o=Sv();return this.indexManager.getCollectionParents(t,s).next(l=>_t.forEach(l,c=>{const u=function(A,f){return new Xg(f,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(t,u,n,a).next(d=>{d.forEach((A,f)=>{o=o.insert(A,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,n,s,a))).next(o=>{s.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,Sa.newInvalidDocument(d)))});let l=Sv();return o.forEach((c,u)=>{const d=s.get(c);d!==void 0&&ny(d.mutation,u,Wo.empty(),zt.now()),ob(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ime{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,r){return _t.resolve(this.hr.get(r))}saveBundleMetadata(t,r){return this.hr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:Ai(a.createTime)}}(r)),_t.resolve()}getNamedQuery(t,r){return _t.resolve(this.Pr.get(r))}saveNamedQuery(t,r){return this.Pr.set(r.name,function(a){return{name:a.name,query:Fz(a.bundledQuery),readTime:Ai(a.readTime)}}(r)),_t.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bme{constructor(){this.overlays=new ka(sr.comparator),this.Ir=new Map}getOverlay(t,r){return _t.resolve(this.overlays.get(r))}getOverlays(t,r){const n=$u();return _t.forEach(r,a=>this.getOverlay(t,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(t,r,n){return n.forEach((a,s)=>{this.ht(t,r,s)}),_t.resolve()}removeOverlaysForBatchId(t,r,n){const a=this.Ir.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(n)),_t.resolve()}getOverlaysForCollection(t,r,n){const a=$u(),s=r.length+1,o=new sr(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&a.set(c.getKey(),c)}return _t.resolve(a)}getOverlaysForCollectionGroup(t,r,n,a){let s=new ka((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=$u(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=$u(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=a)););return _t.resolve(l)}ht(t,r,n){const a=this.overlays.get(n.key);if(a!==null){const o=this.Ir.get(a.largestBatchId).delete(n.key);this.Ir.set(a.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new hF(r,n));let s=this.Ir.get(r);s===void 0&&(s=Xr(),this.Ir.set(r,s)),this.Ir.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jme{constructor(){this.sessionToken=ys.EMPTY_BYTE_STRING}getSessionToken(t){return _t.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,_t.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(){this.Tr=new qn(si.Er),this.dr=new qn(si.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,r){const n=new si(t,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(t,r){t.forEach(n=>this.addReference(n,r))}removeReference(t,r){this.Vr(new si(t,r))}mr(t,r){t.forEach(n=>this.removeReference(n,r))}gr(t){const r=new sr(new bn([])),n=new si(r,t),a=new si(r,t+1),s=[];return this.dr.forEachInRange([n,a],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const r=new sr(new bn([])),n=new si(r,t),a=new si(r,t+1);let s=Xr();return this.dr.forEachInRange([n,a],o=>{s=s.add(o.key)}),s}containsKey(t){const r=new si(t,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&t.isEqual(n.key)}}class si{constructor(t,r){this.key=t,this.wr=r}static Er(t,r){return sr.comparator(t.key,r.key)||Hr(t.wr,r.wr)}static Ar(t,r){return Hr(t.wr,r.wr)||sr.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pme{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new qn(si.Er)}checkEmpty(t){return _t.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,n,a){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new dF(s,r,n,a);this.mutationQueue.push(o);for(const l of a)this.br=this.br.add(new si(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return _t.resolve(o)}lookupMutationBatch(t,r){return _t.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(t,r){const n=r+1,a=this.vr(n),s=a<0?0:a;return _t.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return _t.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(t){return _t.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const n=new si(r,0),a=new si(r,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,a],o=>{const l=this.Dr(o.wr);s.push(l)}),_t.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,r){let n=new qn(Hr);return r.forEach(a=>{const s=new si(a,0),o=new si(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{n=n.add(l.wr)})}),_t.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(t,r){const n=r.path,a=n.length+1;let s=n;sr.isDocumentKey(s)||(s=s.child(""));const o=new si(new sr(s),0);let l=new qn(Hr);return this.br.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(l=l.add(c.wr)),!0)},o),_t.resolve(this.Cr(l))}Cr(t){const r=[];return t.forEach(n=>{const a=this.Dr(n);a!==null&&r.push(a)}),r}removeMutationBatch(t,r){wr(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return _t.forEach(r.mutations,a=>{const s=new si(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.br=n})}On(t){}containsKey(t,r){const n=new si(r,0),a=this.br.firstAfterOrEqual(n);return _t.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,_t.resolve()}Fr(t,r){return this.vr(t)}vr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Dr(t){const r=this.vr(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kme{constructor(t){this.Mr=t,this.docs=function(){return new ka(sr.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,o=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const n=this.docs.get(r);return _t.resolve(n?n.document.mutableCopy():Sa.newInvalidDocument(r))}getEntries(t,r){let n=Il();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():Sa.newInvalidDocument(a))}),_t.resolve(n)}getDocumentsMatchingQuery(t,r,n,a){let s=Il();const o=r.path,l=new sr(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||nF(LG(d),n)<=0||(a.has(d.key)||ob(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return _t.resolve(s)}getAllFromCollectionGroup(t,r,n,a){xr()}Or(t,r){return _t.forEach(this.docs,n=>r(n))}newChangeBuffer(t){return new Tme(this)}getSize(t){return _t.resolve(this.size)}}class Tme extends Uz{constructor(t){super(),this.cr=t}applyChanges(t){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.cr.addEntry(t,a)):this.cr.removeEntry(n)}),_t.waitFor(r)}getFromCache(t,r){return this.cr.getEntry(t,r)}getAllFromCache(t,r){return this.cr.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fme{constructor(t){this.persistence=t,this.Nr=new Sf(r=>Wm(r),sb),this.lastRemoteSnapshotVersion=Er.min(),this.highestTargetId=0,this.Lr=0,this.Br=new xF,this.targetCount=0,this.kr=Ym.Bn()}forEachTarget(t,r){return this.Nr.forEach((n,a)=>r(a)),_t.resolve()}getLastRemoteSnapshotVersion(t){return _t.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return _t.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),_t.resolve(this.highestTargetId)}setTargetsMetadata(t,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),_t.resolve()}Kn(t){this.Nr.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.kr=new Ym(r),this.highestTargetId=r),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,r){return this.Kn(r),this.targetCount+=1,_t.resolve()}updateTargetData(t,r){return this.Kn(r),_t.resolve()}removeTargetData(t,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,_t.resolve()}removeTargets(t,r,n){let a=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),a++)}),_t.waitFor(s).next(()=>a)}getTargetCount(t){return _t.resolve(this.targetCount)}getTargetData(t,r){const n=this.Nr.get(r)||null;return _t.resolve(n)}addMatchingKeys(t,r,n){return this.Br.Rr(r,n),_t.resolve()}removeMatchingKeys(t,r,n){this.Br.mr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(o=>{s.push(a.markPotentiallyOrphaned(t,o))}),_t.waitFor(s)}removeMatchingKeysForTargetId(t,r){return this.Br.gr(r),_t.resolve()}getMatchingKeysForTargetId(t,r){const n=this.Br.yr(r);return _t.resolve(n)}containsKey(t,r){return _t.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hz{constructor(t,r){this.qr={},this.overlays={},this.Qr=new gc(0),this.Kr=!1,this.Kr=!0,this.$r=new jme,this.referenceDelegate=t(this),this.Ur=new Fme(this),this.indexManager=new gme,this.remoteDocumentCache=function(a){return new kme(a)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new kz(r),this.Gr=new Ime(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new Bme,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let n=this.qr[t.toKey()];return n||(n=new Pme(r,this.referenceDelegate),this.qr[t.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,r,n){Wt("MemoryPersistence","Starting transaction:",t);const a=new Ome(this.Qr.next());return this.referenceDelegate.zr(),n(a).next(s=>this.referenceDelegate.jr(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Hr(t,r){return _t.or(Object.values(this.qr).map(n=>()=>n.containsKey(t,r)))}}class Ome extends UG{constructor(t){super(),this.currentSequenceNumber=t}}class FE{constructor(t){this.persistence=t,this.Jr=new xF,this.Yr=null}static Zr(t){return new FE(t)}get Xr(){if(this.Yr)return this.Yr;throw xr()}addReference(t,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),_t.resolve()}removeReference(t,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),_t.resolve()}markPotentiallyOrphaned(t,r){return this.Xr.add(r.toString()),_t.resolve()}removeTarget(t,r){this.Jr.gr(r.targetId).forEach(a=>this.Xr.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,r.targetId).next(a=>{a.forEach(s=>this.Xr.add(s.toString()))}).next(()=>n.removeTargetData(t,r))}zr(){this.Yr=new Set}jr(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _t.forEach(this.Xr,n=>{const a=sr.fromPath(n);return this.ei(t,a).next(s=>{s||r.removeEntry(a,Er.min())})}).next(()=>(this.Yr=null,r.apply(t)))}updateLimboDocument(t,r){return this.ei(t,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(t){return 0}ei(t,r){return _t.or([()=>_t.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Hr(t,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dme{constructor(t){this.serializer=t}O(t,r,n,a){const s=new EE("createOrUpgrade",r);n<1&&a>=1&&(function(c){c.createObjectStore("owner")}(t),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bM,{unique:!0}),c.createObjectStore("documentMutations")}(t),l6(t),function(c){c.createObjectStore("remoteDocuments")}(t));let o=_t.resolve();return n<3&&a>=3&&(n!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(t),l6(t)),o=o.next(()=>function(c){const u=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Er.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",d)}(s))),n<4&&a>=4&&(n!==0&&(o=o.next(()=>function(c,u){return u.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bM,{unique:!0});const A=u.store("mutations"),f=d.map(h=>A.put(h));return _t.waitFor(f)})}(t,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(t)})),n<5&&a>=5&&(o=o.next(()=>this.ni(s))),n<6&&a>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(t),this.ri(s)))),n<7&&a>=7&&(o=o.next(()=>this.ii(s))),n<8&&a>=8&&(o=o.next(()=>this.si(t,s))),n<9&&a>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(t)})),n<10&&a>=10&&(o=o.next(()=>this.oi(s))),n<11&&a>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),n<12&&a>=12&&(o=o.next(()=>{(function(c){const u=c.createObjectStore("documentOverlays",{keyPath:ufe});u.createIndex("collectionPathOverlayIndex",dfe,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",Afe,{unique:!1})})(t)})),n<13&&a>=13&&(o=o.next(()=>function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:Zhe});u.createIndex("documentKeyIndex",efe),u.createIndex("collectionGroupIndex",tfe)}(t)).next(()=>this._i(t,s)).next(()=>t.deleteObjectStore("remoteDocuments"))),n<14&&a>=14&&(o=o.next(()=>this.ai(t,s))),n<15&&a>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:ife}).createIndex("sequenceNumberIndex",ofe,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:lfe}).createIndex("documentKeyIndex",cfe,{unique:!1})}(t))),n<16&&a>=16&&(o=o.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&a>=17&&(o=o.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(t)})),o}ri(t){let r=0;return t.store("remoteDocuments").J((n,a)=>{r+=IC(a)}).next(()=>{const n={byteSize:r};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(t){const r=t.store("mutationQueues"),n=t.store("mutations");return r.U().next(a=>_t.forEach(a,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",o).next(l=>_t.forEach(l,c=>{wr(c.userId===s.userId);const u=om(this.serializer,c);return Rz(t,s.userId,u).next(()=>{})}))}))}ii(t){const r=t.store("targetDocuments"),n=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(a=>{const s=[];return n.J((o,l)=>{const c=new bn(o),u=function(A){return[0,Po(A)]}(c);s.push(r.get(u).next(d=>d?_t.resolve():(A=>r.put({targetId:0,path:Po(A),sequenceNumber:a.highestListenSequenceNumber}))(c)))}).next(()=>_t.waitFor(s))})}si(t,r){t.createObjectStore("collectionParents",{keyPath:sfe});const n=r.store("collectionParents"),a=new gF,s=o=>{if(a.add(o)){const l=o.lastSegment(),c=o.popLast();return n.put({collectionId:l,parent:Po(c)})}};return r.store("remoteDocuments").J({H:!0},(o,l)=>{const c=new bn(o);return s(c.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([o,l,c],u)=>{const d=Hu(l);return s(d.popLast())}))}oi(t){const r=t.store("targets");return r.J((n,a)=>{const s=Bv(a),o=Tz(this.serializer,s);return r.put(o)})}_i(t,r){const n=r.store("remoteDocuments"),a=[];return n.J((s,o)=>{const l=r.store("remoteDocumentsV14"),c=function(A){return A.document?new sr(bn.fromString(A.document.name).popFirst(5)):A.noDocument?sr.fromSegments(A.noDocument.path):A.unknownDocument?sr.fromSegments(A.unknownDocument.path):xr()}(o).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};a.push(l.put(u))}).next(()=>_t.waitFor(a))}ai(t,r){const n=r.store("mutations"),a=Qz(this.serializer),s=new Hz(FE.Zr,this.serializer.ct);return n.U().next(o=>{const l=new Map;return o.forEach(c=>{var u;let d=(u=l.get(c.userId))!==null&&u!==void 0?u:Xr();om(this.serializer,c).keys().forEach(A=>d=d.add(A)),l.set(c.userId,d)}),_t.forEach(l,(c,u)=>{const d=new ji(u),A=kE.lt(this.serializer,d),f=s.getIndexManager(d),h=TE.lt(d,this.serializer,f,s.referenceDelegate);return new Vz(a,h,A,f).recalculateAndSaveOverlaysForDocumentKeys(new EP(r,gc.oe),c).next()})})}}function l6(e){e.createObjectStore("targetDocuments",{keyPath:nfe}).createIndex("documentTargetsIndex",afe,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",rfe,{unique:!0}),e.createObjectStore("targetGlobal")}const EB="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class vF{constructor(t,r,n,a,s,o,l,c,u,d,A=17){if(this.allowTabSynchronization=t,this.persistenceKey=r,this.clientId=n,this.ui=s,this.window=o,this.document=l,this.ci=u,this.li=d,this.hi=A,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=f=>Promise.resolve(),!vF.D())throw new er(Ft.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Cme(this,a),this.Ai=r+"main",this.serializer=new kz(c),this.Ri=new Xh(this.Ai,this.hi,new Dme(this.serializer)),this.$r=new dme,this.Ur=new vme(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Qz(this.serializer),this.Gr=new ume,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&Io("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new er(Ft.FAILED_PRECONDITION,EB);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Ur.getHighestSequenceNumber(t))}).then(t=>{this.Qr=new gc(t,this.ci)}).then(()=>{this.Kr=!0}).catch(t=>(this.Ri&&this.Ri.close(),Promise.reject(t)))}yi(t){return this.di=async r=>{if(this.started)return t(r)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ri.L(async r=>{r.newVersion===null&&await t()})}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>Dw(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(t).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(t)).next(r=>this.isPrimary&&!r?this.bi(t).next(()=>!1):!!r&&this.Di(t).next(()=>!0))).catch(t=>{if(Ef(t))return Wt("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return Wt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.ui.enqueueRetryable(()=>this.di(t)),this.isPrimary=t})}wi(t){return Xx(t).get("owner").next(r=>_t.resolve(this.vi(r)))}Ci(t){return Dw(t).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=zs(r,"clientMetadata");return n.U().next(a=>{const s=this.xi(a,18e5),o=a.filter(l=>s.indexOf(l)===-1);return _t.forEach(o,l=>n.delete(l.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const r of t)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(t){return!!t&&t.ownerId===this.clientId}Si(t){return this.li?_t.resolve(!0):Xx(t).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new er(Ft.FAILED_PRECONDITION,EB);return!1}}return!(!this.networkEnabled||!this.inForeground)||Dw(t).U().next(n=>this.xi(n,5e3).find(a=>{if(this.clientId!==a.clientId){const s=!this.networkEnabled&&a.networkEnabled,o=!this.inForeground&&a.inForeground,l=this.networkEnabled===a.networkEnabled;if(s||o&&l)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&Wt("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new EP(t,gc.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(t,r){return t.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",t=>Dw(t).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(t,r){return TE.lt(t,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new xme(t,this.serializer.ct.databaseId)}getDocumentOverlayCache(t){return kE.lt(this.serializer,t)}getBundleCache(){return this.Gr}runTransaction(t,r,n){Wt("IndexedDbPersistence","Starting transaction:",t);const a=r==="readonly"?"readonly":"readwrite",s=function(c){return c===17?mfe:c===16?ffe:c===15?sF:c===14?KG:c===13?$G:c===12?hfe:c===11?HG:void xr()}(this.hi);let o;return this.Ri.runTransaction(t,a,s,l=>(o=new EP(l,this.Qr?this.Qr.next():gc.oe),r==="readwrite-primary"?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw Io(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new er(Ft.FAILED_PRECONDITION,MG);return n(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>n(o)))).then(l=>(o.raiseOnCommittedEvent(),l))}Ki(t){return Xx(t).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new er(Ft.FAILED_PRECONDITION,EB)})}Di(t){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Xx(t).put("owner",r)}static D(){return Xh.D()}bi(t){const r=Xx(t);return r.get("owner").next(n=>this.vi(n)?(Wt("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):_t.resolve())}Mi(t,r){const n=Date.now();return!(t<n-r)&&(!(t>n)||(Io(`Detected an update time that is in the future: ${t} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var t;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;Uq()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(t){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(t)))!==null;return Wt("IndexedDbPersistence",`Client '${t}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Io("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(t){Io("Failed to set zombie client id.",t)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Xx(e){return zs(e,"owner")}function Dw(e){return zs(e,"clientMetadata")}function Rme(e,t){let r=e.projectId;return e.isDefaultDatabase||(r+="."+e.database),"firestore/"+t+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(t,r,n,a){this.targetId=t,this.fromCache=r,this.$i=n,this.Ui=a}static Wi(t,r){let n=Xr(),a=Xr();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new yF(t,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lme{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $z{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Uq()?8:QG(qs())>0?6:4}()}initialize(t,r){this.Ji=t,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(t,r,n,a){const s={result:null};return this.Yi(t,r).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(t,r,a,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Lme;return this.Xi(t,r,o).next(l=>{if(s.result=l,this.zi)return this.es(t,r,o,l.size)})}).next(()=>s.result)}es(t,r,n,a){return n.documentReadCount<this.ji?(yp()<=ln.DEBUG&&Wt("QueryEngine","SDK will not create cache indexes for query:",bp(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),_t.resolve()):(yp()<=ln.DEBUG&&Wt("QueryEngine","Query:",bp(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.Hi*a?(yp()<=ln.DEBUG&&Wt("QueryEngine","The SDK decides to create cache indexes for query:",bp(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,wc(r))):_t.resolve())}Yi(t,r){if(FM(r))return _t.resolve(null);let n=wc(r);return this.indexManager.getIndexType(t,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=_C(r,null,"F"),n=wc(r)),this.indexManager.getDocumentsMatchingTarget(t,n).next(s=>{const o=Xr(...s);return this.Ji.getDocuments(t,o).next(l=>this.indexManager.getMinOffset(t,n).next(c=>{const u=this.ts(r,l);return this.ns(r,u,o,c.readTime)?this.Yi(t,_C(r,null,"F")):this.rs(t,u,r,c)}))})))}Zi(t,r,n,a){return FM(r)||a.isEqual(Er.min())?_t.resolve(null):this.Ji.getDocuments(t,n).next(s=>{const o=this.ts(r,s);return this.ns(r,o,n,a)?_t.resolve(null):(yp()<=ln.DEBUG&&Wt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),bp(r)),this.rs(t,o,r,Khe(a,-1)).next(l=>l))})}ts(t,r){let n=new qn(iz(t));return r.forEach((a,s)=>{ob(t,s)&&(n=n.add(s))}),n}ns(t,r,n,a){if(t.limit===null)return!1;if(n.size!==r.size)return!0;const s=t.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Xi(t,r,n){return yp()<=ln.DEBUG&&Wt("QueryEngine","Using full collection scan to execute query:",bp(r)),this.Ji.getDocumentsMatchingQuery(t,r,Fl.min(),n)}rs(t,r,n,a){return this.Ji.getDocumentsMatchingQuery(t,n,a).next(s=>(r.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mme{constructor(t,r,n,a){this.persistence=t,this.ss=r,this.serializer=a,this.os=new ka(Hr),this._s=new Sf(s=>Wm(s),sb),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(n)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Vz(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.os))}}function Kz(e,t,r,n){return new Mme(e,t,r,n)}async function qz(e,t){const r=Rr(e);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.ls(t),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const o=[],l=[];let c=Xr();for(const u of a){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:l}))})})}function Ume(e,t){const r=Rr(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=t.batch.keys(),s=r.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const A=u.batch,f=A.keys();let h=_t.resolve();return f.forEach(m=>{h=h.next(()=>d.getEntry(c,m)).next(p=>{const g=u.docVersions.get(m);wr(g!==null),p.version.compareTo(g)<0&&(A.applyToRemoteDocument(p,u),p.isValidDocument()&&(p.setReadTime(u.commitVersion),d.addEntry(p)))})}),h.next(()=>l.mutationQueue.removeMutationBatch(c,A))}(r,n,t,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=Xr();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(t))).next(()=>r.localDocuments.getDocuments(n,a))})}function Gz(e){const t=Rr(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Ur.getLastRemoteSnapshotVersion(r))}function Qme(e,t){const r=Rr(e),n=t.snapshotVersion;let a=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=r.cs.newChangeBuffer({trackRemovals:!0});a=r.os;const l=[];t.targetChanges.forEach((d,A)=>{const f=a.get(A);if(!f)return;l.push(r.Ur.removeMatchingKeys(s,d.removedDocuments,A).next(()=>r.Ur.addMatchingKeys(s,d.addedDocuments,A)));let h=f.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(A)!==null?h=h.withResumeToken(ys.EMPTY_BYTE_STRING,Er.min()).withLastLimboFreeSnapshotVersion(Er.min()):d.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(d.resumeToken,n)),a=a.insert(A,h),function(p,g,x){return p.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(f,h,d)&&l.push(r.Ur.updateTargetData(s,h))});let c=Il(),u=Xr();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(Vme(s,o,t.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!n.isEqual(Er.min())){const d=r.Ur.getLastRemoteSnapshotVersion(s).next(A=>r.Ur.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(d)}return _t.waitFor(l).next(()=>o.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.os=a,s))}function Vme(e,t,r){let n=Xr(),a=Xr();return r.forEach(s=>n=n.add(s)),t.getEntries(e,n).next(s=>{let o=Il();return r.forEach((l,c)=>{const u=s.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(l)),c.isNoDocument()&&c.version.isEqual(Er.min())?(t.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(c),o=o.insert(l,c)):Wt("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Ps:o,Is:a}})}function Hme(e,t){const r=Rr(e);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function $me(e,t){const r=Rr(e);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Ur.getTargetData(n,t).next(s=>s?(a=s,_t.resolve(a)):r.Ur.allocateTargetId(n).next(o=>(a=new Vd(t,o,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.os.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(t,n.targetId)),n})}async function UP(e,t,r){const n=Rr(e),a=n.os.get(t),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,a))}catch(o){if(!Ef(o))throw o;Wt("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}n.os=n.os.remove(t),n._s.delete(a.target)}function c6(e,t,r){const n=Rr(e);let a=Er.min(),s=Xr();return n.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const A=Rr(c),f=A._s.get(d);return f!==void 0?_t.resolve(A.os.get(f)):A.Ur.getTargetData(u,d)}(n,o,wc(t)).next(l=>{if(l)return a=l.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,l.targetId).next(c=>{s=c})}).next(()=>n.ss.getDocumentsMatchingQuery(o,t,r?a:Er.min(),r?s:Xr())).next(l=>(Kme(n,jfe(t),l),{documents:l,Ts:s})))}function Kme(e,t,r){let n=e.us.get(t)||Er.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),e.us.set(t,n)}class u6{constructor(){this.activeTargetIds=Dfe()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class zz{constructor(){this.so=new u6,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,n){}addLocalQueryTarget(t,r=!0){return r&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,r,n){this.oo[t]=r}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new u6,Promise.resolve()}handleUserChange(t,r,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qme{_o(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Wt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){Wt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rw=null;function SB(){return Rw===null?Rw=function(){return 268435456+Math.round(2147483648*Math.random())}():Rw++,"0x"+Rw.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gme={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zme{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi="WebChannelConnection";class Wme extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${a}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${s}`}get Fo(){return!1}Mo(r,n,a,s,o){const l=SB(),c=this.xo(r,n.toUriEncodedString());Wt("RestConnection",`Sending RPC '${r}' ${l}:`,c,a);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(r,c,u,a).then(d=>(Wt("RestConnection",`Received RPC '${r}' ${l}: `,d),d),d=>{throw nf("RestConnection",`RPC '${r}' ${l} failed with error: `,d,"url: ",c,"request:",a),d})}Lo(r,n,a,s,o,l){return this.Mo(r,n,a,s,o)}Oo(r,n,a){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Wg}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>r[o]=s),a&&a.headers.forEach((s,o)=>r[o]=s)}xo(r,n){const a=Gme[r];return`${this.Do}/v1/${n}:${a}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,r,n,a){const s=SB();return new Promise((o,l)=>{const c=new jG;c.setWithCredentials(!0),c.listenOnce(PG.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case CN.NO_ERROR:const d=c.getResponseJson();Wt(Gi,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(d)),o(d);break;case CN.TIMEOUT:Wt(Gi,`RPC '${t}' ${s} timed out`),l(new er(Ft.DEADLINE_EXCEEDED,"Request time out"));break;case CN.HTTP_ERROR:const A=c.getStatus();if(Wt(Gi,`RPC '${t}' ${s} failed with status:`,A,"response text:",c.getResponseText()),A>0){let f=c.getResponseJson();Array.isArray(f)&&(f=f[0]);const h=f==null?void 0:f.error;if(h&&h.status&&h.message){const m=function(g){const x=g.toLowerCase().replace(/_/g,"-");return Object.values(Ft).indexOf(x)>=0?x:Ft.UNKNOWN}(h.status);l(new er(m,h.message))}else l(new er(Ft.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new er(Ft.UNAVAILABLE,"Connection failed."));break;default:xr()}}finally{Wt(Gi,`RPC '${t}' ${s} completed.`)}});const u=JSON.stringify(a);Wt(Gi,`RPC '${t}' ${s} sending request:`,a),c.send(r,"POST",u,n,15)})}Bo(t,r,n){const a=SB(),s=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=FG(),l=TG(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=s.join("");Wt(Gi,`Creating RPC '${t}' stream ${a}: ${d}`,c);const A=o.createWebChannel(d,c);let f=!1,h=!1;const m=new zme({Io:g=>{h?Wt(Gi,`Not sending because RPC '${t}' stream ${a} is closed:`,g):(f||(Wt(Gi,`Opening RPC '${t}' stream ${a} transport.`),A.open(),f=!0),Wt(Gi,`RPC '${t}' stream ${a} sending:`,g),A.send(g))},To:()=>A.close()}),p=(g,x,y)=>{g.listen(x,b=>{try{y(b)}catch(_){setTimeout(()=>{throw _},0)}})};return p(A,Ev.EventType.OPEN,()=>{h||(Wt(Gi,`RPC '${t}' stream ${a} transport opened.`),m.yo())}),p(A,Ev.EventType.CLOSE,()=>{h||(h=!0,Wt(Gi,`RPC '${t}' stream ${a} transport closed`),m.So())}),p(A,Ev.EventType.ERROR,g=>{h||(h=!0,nf(Gi,`RPC '${t}' stream ${a} transport errored:`,g),m.So(new er(Ft.UNAVAILABLE,"The operation could not be completed")))}),p(A,Ev.EventType.MESSAGE,g=>{var x;if(!h){const y=g.data[0];wr(!!y);const b=y,_=b.error||((x=b[0])===null||x===void 0?void 0:x.error);if(_){Wt(Gi,`RPC '${t}' stream ${a} received error:`,_);const T=_.status;let P=function(I){const L=Ns[I];if(L!==void 0)return xz(L)}(T),C=_.message;P===void 0&&(P=Ft.INTERNAL,C="Unknown error status: "+T+" with message "+_.message),h=!0,m.So(new er(P,C)),A.close()}else Wt(Gi,`RPC '${t}' stream ${a} received:`,y),m.bo(y)}}),p(l,kG.STAT_EVENT,g=>{g.stat===CP.PROXY?Wt(Gi,`RPC '${t}' stream ${a} detected buffering proxy`):g.stat===CP.NOPROXY&&Wt(Gi,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{m.wo()},0),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xme(){return typeof window<"u"?window:null}function PN(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(e){return new Yfe(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bF{constructor(t,r,n=1e3,a=1.5,s=6e4){this.ui=t,this.timerId=r,this.ko=n,this.qo=a,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),a=Math.max(0,r-n);a>0&&Wt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wz{constructor(t,r,n,a,s,o,l,c){this.ui=t,this.Ho=n,this.Jo=a,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new bF(t,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(t,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,t!==4?this.t_.reset():r&&r.code===Ft.RESOURCE_EXHAUSTED?(Io(r.toString()),Io("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Ft.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.mo(r)}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.Yo===r&&this.P_(n,a)},n=>{t(()=>{const a=new er(Ft.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(a)})})}P_(t,r){const n=this.h_(this.Yo);this.stream=this.T_(t,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(a=>{n(()=>this.I_(a))}),this.stream.onMessage(a=>{n(()=>++this.e_==1?this.E_(a):this.onNext(a))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(t){return Wt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return r=>{this.ui.enqueueAndForget(()=>this.Yo===t?r():(Wt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Jme extends Wz{constructor(t,r,n,a,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}T_(t,r){return this.connection.Bo("Listen",t,r)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const r=rme(this.serializer,t),n=function(s){if(!("targetChange"in s))return Er.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Er.min():o.readTime?Ai(o.readTime):Er.min()}(t);return this.listener.d_(r,n)}A_(t){const r={};r.database=OP(this.serializer),r.addTarget=function(s,o){let l;const c=o.target;if(l=NC(c)?{documents:Ez(s,c)}:{query:Sz(s,c)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=bz(s,o.resumeToken);const u=TP(s,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Er.min())>0){l.readTime=Eg(s,o.snapshotVersion.toTimestamp());const u=TP(s,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,t);const n=ame(this.serializer,t);n&&(r.labels=n),this.a_(r)}R_(t){const r={};r.database=OP(this.serializer),r.removeTarget=t,this.a_(r)}}class Yme extends Wz{constructor(t,r,n,a,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,r){return this.connection.Bo("Write",t,r)}E_(t){return wr(!!t.streamToken),this.lastStreamToken=t.streamToken,wr(!t.writeResults||t.writeResults.length===0),this.listener.f_()}onNext(t){wr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const r=nme(t.writeResults,t.commitTime),n=Ai(t.commitTime);return this.listener.g_(n,r)}p_(){const t={};t.database=OP(this.serializer),this.a_(t)}m_(t){const r={streamToken:this.lastStreamToken,writes:t.map(n=>a1(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zme extends class{}{constructor(t,r,n,a){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new er(Ft.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,r,n,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(t,FP(r,n),a,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ft.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new er(Ft.UNKNOWN,s.toString())})}Lo(t,r,n,a,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(t,FP(r,n),a,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ft.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new er(Ft.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class e0e{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,t==="Online"&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Io(r),this.D_=!1):Wt("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0e{constructor(t,r,n,a,s){this.localStore=t,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{n.enqueueAndForget(async()=>{w0(this)&&(Wt("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=Rr(c);u.L_.add(4),await cb(u),u.q_.set("Unknown"),u.L_.delete(4),await DE(u)}(this))})}),this.q_=new e0e(n,a)}}async function DE(e){if(w0(e))for(const t of e.B_)await t(!0)}async function cb(e){for(const t of e.B_)await t(!1)}function Xz(e,t){const r=Rr(e);r.N_.has(t.targetId)||(r.N_.set(t.targetId,t),_F(r)?CF(r):Zg(r).r_()&&NF(r,t))}function wF(e,t){const r=Rr(e),n=Zg(r);r.N_.delete(t),n.r_()&&Jz(r,t),r.N_.size===0&&(n.r_()?n.o_():w0(r)&&r.q_.set("Unknown"))}function NF(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Er.min())>0){const r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}Zg(e).A_(t)}function Jz(e,t){e.Q_.xe(t),Zg(e).R_(t)}function CF(e){e.Q_=new zfe({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Zg(e).start(),e.q_.v_()}function _F(e){return w0(e)&&!Zg(e).n_()&&e.N_.size>0}function w0(e){return Rr(e).L_.size===0}function Yz(e){e.Q_=void 0}async function r0e(e){e.q_.set("Online")}async function n0e(e){e.N_.forEach((t,r)=>{NF(e,t)})}async function a0e(e,t){Yz(e),_F(e)?(e.q_.M_(t),CF(e)):e.q_.set("Unknown")}async function s0e(e,t,r){if(e.q_.set("Online"),t instanceof yz&&t.state===2&&t.cause)try{await async function(a,s){const o=s.cause;for(const l of s.targetIds)a.N_.has(l)&&(await a.remoteSyncer.rejectListen(l,o),a.N_.delete(l),a.Q_.removeTarget(l))}(e,t)}catch(n){Wt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await BC(e,n)}else if(t instanceof jN?e.Q_.Ke(t):t instanceof vz?e.Q_.He(t):e.Q_.We(t),!r.isEqual(Er.min()))try{const n=await Gz(e.localStore);r.compareTo(n)>=0&&await function(s,o){const l=s.Q_.rt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(ys.EMPTY_BYTE_STRING,d.snapshotVersion)),Jz(s,c);const A=new Vd(d.target,c,u,d.sequenceNumber);NF(s,A)}),s.remoteSyncer.applyRemoteEvent(l)}(e,r)}catch(n){Wt("RemoteStore","Failed to raise snapshot:",n),await BC(e,n)}}async function BC(e,t,r){if(!Ef(t))throw t;e.L_.add(1),await cb(e),e.q_.set("Offline"),r||(r=()=>Gz(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Wt("RemoteStore","Retrying IndexedDB access"),await r(),e.L_.delete(1),await DE(e)})}function Zz(e,t){return t().catch(r=>BC(e,r,t))}async function ub(e){const t=Rr(e),r=lf(t);let n=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;i0e(t);)try{const a=await Hme(t.localStore,n);if(a===null){t.O_.length===0&&r.o_();break}n=a.batchId,o0e(t,a)}catch(a){await BC(t,a)}eW(t)&&tW(t)}function i0e(e){return w0(e)&&e.O_.length<10}function o0e(e,t){e.O_.push(t);const r=lf(e);r.r_()&&r.V_&&r.m_(t.mutations)}function eW(e){return w0(e)&&!lf(e).n_()&&e.O_.length>0}function tW(e){lf(e).start()}async function l0e(e){lf(e).p_()}async function c0e(e){const t=lf(e);for(const r of e.O_)t.m_(r.mutations)}async function u0e(e,t,r){const n=e.O_.shift(),a=AF.from(n,t,r);await Zz(e,()=>e.remoteSyncer.applySuccessfulWrite(a)),await ub(e)}async function d0e(e,t){t&&lf(e).V_&&await async function(n,a){if(function(o){return gz(o)&&o!==Ft.ABORTED}(a.code)){const s=n.O_.shift();lf(n).s_(),await Zz(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await ub(n)}}(e,t),eW(e)&&tW(e)}async function A6(e,t){const r=Rr(e);r.asyncQueue.verifyOperationInProgress(),Wt("RemoteStore","RemoteStore received new credentials");const n=w0(r);r.L_.add(3),await cb(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.L_.delete(3),await DE(r)}async function A0e(e,t){const r=Rr(e);t?(r.L_.delete(2),await DE(r)):t||(r.L_.add(2),await cb(r),r.q_.set("Unknown"))}function Zg(e){return e.K_||(e.K_=function(r,n,a){const s=Rr(r);return s.w_(),new Jme(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Eo:r0e.bind(null,e),Ro:n0e.bind(null,e),mo:a0e.bind(null,e),d_:s0e.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),_F(e)?CF(e):e.q_.set("Unknown")):(await e.K_.stop(),Yz(e))})),e.K_}function lf(e){return e.U_||(e.U_=function(r,n,a){const s=Rr(r);return s.w_(),new Yme(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:l0e.bind(null,e),mo:d0e.bind(null,e),f_:c0e.bind(null,e),g_:u0e.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await ub(e)):(await e.U_.stop(),e.O_.length>0&&(Wt("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))})),e.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(t,r,n,a,s){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new au,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,n,a,s){const o=Date.now()+n,l=new EF(t,r,o,a,s);return l.start(n),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new er(Ft.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function SF(e,t){if(Io("AsyncQueue",`${t}: ${e}`),Ef(e))return new er(Ft.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(t){this.comparator=t?(r,n)=>t(r,n)||sr.comparator(r.key,n.key):(r,n)=>sr.comparator(r.key,n.key),this.keyedMap=Sv(),this.sortedSet=new ka(this.comparator)}static emptySet(t){return new ng(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,n)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof ng)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const n=new ng;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(){this.W_=new ka(sr.comparator)}track(t){const r=t.doc.key,n=this.W_.get(r);n?t.type!==0&&n.type===3?this.W_=this.W_.insert(r,t):t.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.W_=this.W_.remove(r):t.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:t.doc}):xr():this.W_=this.W_.insert(r,t)}G_(){const t=[];return this.W_.inorderTraversal((r,n)=>{t.push(n)}),t}}class Sg{constructor(t,r,n,a,s,o,l,c,u){this.query=t,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(t,r,n,a,s){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new Sg(t,r,ng.emptySet(r),o,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&IE(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,n=t.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0e{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}}class f0e{constructor(){this.queries=f6(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const a=Rr(r),s=a.queries;a.queries=f6(),s.forEach((o,l)=>{for(const c of l.j_)c.onError(n)})})(this,new er(Ft.ABORTED,"Firestore shutting down"))}}function f6(){return new Sf(e=>sz(e),IE)}async function IF(e,t){const r=Rr(e);let n=3;const a=t.query;let s=r.queries.get(a);s?!s.H_()&&t.J_()&&(n=2):(s=new h0e,n=t.J_()?0:1);try{switch(n){case 0:s.z_=await r.onListen(a,!0);break;case 1:s.z_=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(o){const l=SF(o,`Initialization of query '${bp(t.query)}' failed`);return void t.onError(l)}r.queries.set(a,s),s.j_.push(t),t.Z_(r.onlineState),s.z_&&t.X_(s.z_)&&jF(r)}async function BF(e,t){const r=Rr(e),n=t.query;let a=3;const s=r.queries.get(n);if(s){const o=s.j_.indexOf(t);o>=0&&(s.j_.splice(o,1),s.j_.length===0?a=t.J_()?0:1:!s.H_()&&t.J_()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function m0e(e,t){const r=Rr(e);let n=!1;for(const a of t){const s=a.query,o=r.queries.get(s);if(o){for(const l of o.j_)l.X_(a)&&(n=!0);o.z_=a}}n&&jF(r)}function p0e(e,t,r){const n=Rr(e),a=n.queries.get(t);if(a)for(const s of a.j_)s.onError(r);n.queries.delete(t)}function jF(e){e.Y_.forEach(t=>{t.next()})}var QP,m6;(m6=QP||(QP={})).ea="default",m6.Cache="cache";class PF{constructor(t,r,n){this.query=t,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(t){if(!this.options.includeMetadataChanges){const n=[];for(const a of t.docChanges)a.type!==3&&n.push(a);t=new Sg(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.na?this.ia(t)&&(this.ta.next(t),r=!0):this.sa(t,this.onlineState)&&(this.oa(t),r=!0),this.ra=t,r}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),r=!0),r}sa(t,r){if(!t.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}ia(t){if(t.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(t){t=Sg.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==QP.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rW{constructor(t){this.key=t}}class nW{constructor(t){this.key=t}}class g0e{constructor(t,r){this.query=t,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Xr(),this.mutatedKeys=Xr(),this.Aa=iz(t),this.Ra=new ng(this.Aa)}get Va(){return this.Ta}ma(t,r){const n=r?r.fa:new h6,a=r?r.Ra:this.Ra;let s=r?r.mutatedKeys:this.mutatedKeys,o=a,l=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((d,A)=>{const f=a.get(d),h=ob(this.query,A)?A:null,m=!!f&&this.mutatedKeys.has(f.key),p=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;f&&h?f.data.isEqual(h.data)?m!==p&&(n.track({type:3,doc:h}),g=!0):this.ga(f,h)||(n.track({type:2,doc:h}),g=!0,(c&&this.Aa(h,c)>0||u&&this.Aa(h,u)<0)&&(l=!0)):!f&&h?(n.track({type:0,doc:h}),g=!0):f&&!h&&(n.track({type:1,doc:f}),g=!0,(c||u)&&(l=!0)),g&&(h?(o=o.add(h),s=p?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{Ra:o,fa:n,ns:l,mutatedKeys:s}}ga(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,n,a){const s=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const o=t.fa.G_();o.sort((d,A)=>function(h,m){const p=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xr()}};return p(h)-p(m)}(d.type,A.type)||this.Aa(d.doc,A.doc)),this.pa(n),a=a!=null&&a;const l=r&&!a?this.ya():[],c=this.da.size===0&&this.current&&!a?1:0,u=c!==this.Ea;return this.Ea=c,o.length!==0||u?{snapshot:new Sg(this.query,t.Ra,s,o,t.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new h6,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=Xr(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return t.forEach(n=>{this.da.has(n)||r.push(new nW(n))}),this.da.forEach(n=>{t.has(n)||r.push(new rW(n))}),r}ba(t){this.Ta=t.Ts,this.da=Xr();const r=this.ma(t.documents);return this.applyChanges(r,!0)}Da(){return Sg.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class x0e{constructor(t,r,n){this.query=t,this.targetId=r,this.view=n}}class v0e{constructor(t){this.key=t,this.va=!1}}class y0e{constructor(t,r,n,a,s,o){this.localStore=t,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Sf(l=>sz(l),IE),this.Ma=new Map,this.xa=new Set,this.Oa=new ka(sr.comparator),this.Na=new Map,this.La=new xF,this.Ba={},this.ka=new Map,this.qa=Ym.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function b0e(e,t,r=!0){const n=cW(e);let a;const s=n.Fa.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.Da()):a=await aW(n,t,r,!0),a}async function w0e(e,t){const r=cW(e);await aW(r,t,!0,!1)}async function aW(e,t,r,n){const a=await $me(e.localStore,wc(t)),s=a.targetId,o=e.sharedClientState.addLocalQueryTarget(s,r);let l;return n&&(l=await N0e(e,t,s,o==="current",a.resumeToken)),e.isPrimaryClient&&r&&Xz(e.remoteStore,a),l}async function N0e(e,t,r,n,a){e.Ka=(A,f,h)=>async function(p,g,x,y){let b=g.view.ma(x);b.ns&&(b=await c6(p.localStore,g.query,!1).then(({documents:C})=>g.view.ma(C,b)));const _=y&&y.targetChanges.get(g.targetId),T=y&&y.targetMismatches.get(g.targetId)!=null,P=g.view.applyChanges(b,p.isPrimaryClient,_,T);return g6(p,g.targetId,P.wa),P.snapshot}(e,A,f,h);const s=await c6(e.localStore,t,!0),o=new g0e(t,s.Ts),l=o.ma(s.documents),c=lb.createSynthesizedTargetChangeForCurrentChange(r,n&&e.onlineState!=="Offline",a),u=o.applyChanges(l,e.isPrimaryClient,c);g6(e,r,u.wa);const d=new x0e(t,r,o);return e.Fa.set(t,d),e.Ma.has(r)?e.Ma.get(r).push(t):e.Ma.set(r,[t]),u.snapshot}async function C0e(e,t,r){const n=Rr(e),a=n.Fa.get(t),s=n.Ma.get(a.targetId);if(s.length>1)return n.Ma.set(a.targetId,s.filter(o=>!IE(o,t))),void n.Fa.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await UP(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&wF(n.remoteStore,a.targetId),VP(n,a.targetId)}).catch(y0)):(VP(n,a.targetId),await UP(n.localStore,a.targetId,!0))}async function _0e(e,t){const r=Rr(e),n=r.Fa.get(t),a=r.Ma.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),wF(r.remoteStore,n.targetId))}async function E0e(e,t,r){const n=uW(e);try{const a=await function(o,l){const c=Rr(o),u=zt.now(),d=l.reduce((h,m)=>h.add(m.key),Xr());let A,f;return c.persistence.runTransaction("Locally write mutations","readwrite",h=>{let m=Il(),p=Xr();return c.cs.getEntries(h,d).next(g=>{m=g,m.forEach((x,y)=>{y.isValidDocument()||(p=p.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(h,m)).next(g=>{A=g;const x=[];for(const y of l){const b=$fe(y,A.get(y.key).overlayedDocument);b!=null&&x.push(new NA(y.key,b,XG(b.value.mapValue),Ba.exists(!0)))}return c.mutationQueue.addMutationBatch(h,u,x,l)}).next(g=>{f=g;const x=g.applyToLocalDocumentSet(A,p);return c.documentOverlayCache.saveOverlays(h,g.batchId,x)})}).then(()=>({batchId:f.batchId,changes:lz(A)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(a.batchId),function(o,l,c){let u=o.Ba[o.currentUser.toKey()];u||(u=new ka(Hr)),u=u.insert(l,c),o.Ba[o.currentUser.toKey()]=u}(n,a.batchId,r),await db(n,a.changes),await ub(n.remoteStore)}catch(a){const s=SF(a,"Failed to persist write");r.reject(s)}}async function sW(e,t){const r=Rr(e);try{const n=await Qme(r.localStore,t);t.targetChanges.forEach((a,s)=>{const o=r.Na.get(s);o&&(wr(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?o.va=!0:a.modifiedDocuments.size>0?wr(o.va):a.removedDocuments.size>0&&(wr(o.va),o.va=!1))}),await db(r,n,t)}catch(n){await y0(n)}}function p6(e,t,r){const n=Rr(e);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Fa.forEach((s,o)=>{const l=o.view.Z_(t);l.snapshot&&a.push(l.snapshot)}),function(o,l){const c=Rr(o);c.onlineState=l;let u=!1;c.queries.forEach((d,A)=>{for(const f of A.j_)f.Z_(l)&&(u=!0)}),u&&jF(c)}(n.eventManager,t),a.length&&n.Ca.d_(a),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function S0e(e,t,r){const n=Rr(e);n.sharedClientState.updateQueryState(t,"rejected",r);const a=n.Na.get(t),s=a&&a.key;if(s){let o=new ka(sr.comparator);o=o.insert(s,Sa.newNoDocument(s,Er.min()));const l=Xr().add(s),c=new PE(Er.min(),new Map,new ka(Hr),o,l);await sW(n,c),n.Oa=n.Oa.remove(s),n.Na.delete(t),kF(n)}else await UP(n.localStore,t,!1).then(()=>VP(n,t,r)).catch(y0)}async function I0e(e,t){const r=Rr(e),n=t.batch.batchId;try{const a=await Ume(r.localStore,t);oW(r,n,null),iW(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await db(r,a)}catch(a){await y0(a)}}async function B0e(e,t,r){const n=Rr(e);try{const a=await function(o,l){const c=Rr(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(A=>(wr(A!==null),d=A.keys(),c.mutationQueue.removeMutationBatch(u,A))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,t);oW(n,t,r),iW(n,t),n.sharedClientState.updateMutationState(t,"rejected",r),await db(n,a)}catch(a){await y0(a)}}function iW(e,t){(e.ka.get(t)||[]).forEach(r=>{r.resolve()}),e.ka.delete(t)}function oW(e,t,r){const n=Rr(e);let a=n.Ba[n.currentUser.toKey()];if(a){const s=a.get(t);s&&(r?s.reject(r):s.resolve(),a=a.remove(t)),n.Ba[n.currentUser.toKey()]=a}}function VP(e,t,r=null){e.sharedClientState.removeLocalQueryTarget(t);for(const n of e.Ma.get(t))e.Fa.delete(n),r&&e.Ca.$a(n,r);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(n=>{e.La.containsKey(n)||lW(e,n)})}function lW(e,t){e.xa.delete(t.path.canonicalString());const r=e.Oa.get(t);r!==null&&(wF(e.remoteStore,r),e.Oa=e.Oa.remove(t),e.Na.delete(r),kF(e))}function g6(e,t,r){for(const n of r)n instanceof rW?(e.La.addReference(n.key,t),j0e(e,n)):n instanceof nW?(Wt("SyncEngine","Document no longer in limbo: "+n.key),e.La.removeReference(n.key,t),e.La.containsKey(n.key)||lW(e,n.key)):xr()}function j0e(e,t){const r=t.key,n=r.path.canonicalString();e.Oa.get(r)||e.xa.has(n)||(Wt("SyncEngine","New document in limbo: "+r),e.xa.add(n),kF(e))}function kF(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const r=new sr(bn.fromString(t)),n=e.qa.next();e.Na.set(n,new v0e(r)),e.Oa=e.Oa.insert(r,n),Xz(e.remoteStore,new Vd(wc(ib(r.path)),n,"TargetPurposeLimboResolution",gc.oe))}}async function db(e,t,r){const n=Rr(e),a=[],s=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach((l,c)=>{o.push(n.Ka(c,t,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const A=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,A?"current":"not-current")}if(u){a.push(u);const A=yF.Wi(c.targetId,u);s.push(A)}}))}),await Promise.all(o),n.Ca.d_(a),await async function(c,u){const d=Rr(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>_t.forEach(u,f=>_t.forEach(f.$i,h=>d.persistence.referenceDelegate.addReference(A,f.targetId,h)).next(()=>_t.forEach(f.Ui,h=>d.persistence.referenceDelegate.removeReference(A,f.targetId,h)))))}catch(A){if(!Ef(A))throw A;Wt("LocalStore","Failed to update sequence numbers: "+A)}for(const A of u){const f=A.targetId;if(!A.fromCache){const h=d.os.get(f),m=h.snapshotVersion,p=h.withLastLimboFreeSnapshotVersion(m);d.os=d.os.insert(f,p)}}}(n.localStore,s))}async function P0e(e,t){const r=Rr(e);if(!r.currentUser.isEqual(t)){Wt("SyncEngine","User change. New user:",t.toKey());const n=await qz(r.localStore,t);r.currentUser=t,function(s,o){s.ka.forEach(l=>{l.forEach(c=>{c.reject(new er(Ft.CANCELLED,o))})}),s.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await db(r,n.hs)}}function k0e(e,t){const r=Rr(e),n=r.Na.get(t);if(n&&n.va)return Xr().add(n.key);{let a=Xr();const s=r.Ma.get(t);if(!s)return a;for(const o of s){const l=r.Fa.get(o);a=a.unionWith(l.view.Va)}return a}}function cW(e){const t=Rr(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=sW.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=k0e.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=S0e.bind(null,t),t.Ca.d_=m0e.bind(null,t.eventManager),t.Ca.$a=p0e.bind(null,t.eventManager),t}function uW(e){const t=Rr(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=I0e.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=B0e.bind(null,t),t}class s1{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=OE(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),await this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)}ja(t,r){return null}Ha(t,r){return null}za(t){return Kz(this.persistence,new $z,t.initialUser,this.serializer)}Ga(t){return new Hz(FE.Zr,this.serializer)}Wa(t){return new zz}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}s1.provider={build:()=>new s1};class T0e extends s1{constructor(t,r,n){super(),this.Ja=t,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.Ja.initialize(this,t),await uW(this.Ja.syncEngine),await ub(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(t){return Kz(this.persistence,new $z,t.initialUser,this.serializer)}ja(t,r){const n=this.persistence.referenceDelegate.garbageCollector;return new bme(n,t.asyncQueue,r)}Ha(t,r){const n=new Whe(r,this.persistence);return new zhe(t.asyncQueue,n)}Ga(t){const r=Rme(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Ko.withCacheSize(this.cacheSizeBytes):Ko.DEFAULT;return new vF(this.synchronizeTabs,r,t.clientId,n,t.asyncQueue,Xme(),PN(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(t){return new zz}}class jC{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>p6(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=P0e.bind(null,this.syncEngine),await A0e(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new f0e}()}createDatastore(t){const r=OE(t.databaseInfo.databaseId),n=function(s){return new Wme(s)}(t.databaseInfo);return function(s,o,l,c){return new Zme(s,o,l,c)}(t.authCredentials,t.appCheckCredentials,n,r)}createRemoteStore(t){return function(n,a,s,o,l){return new t0e(n,a,s,o,l)}(this.localStore,this.datastore,t.asyncQueue,r=>p6(this.syncEngine,r,0),function(){return d6.D()?new d6:new qme}())}createSyncEngine(t,r){return function(a,s,o,l,c,u,d){const A=new y0e(a,s,o,l,c,u);return d&&(A.Qa=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(a){const s=Rr(a);Wt("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await cb(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}jC.provider={build:()=>new jC};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TF{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ya(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ya(this.observer.error,t):Io("Uncaught Error in snapshot listener:",t.toString()))}Za(){this.muted=!0}Ya(t,r){setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0e{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new er(Ft.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(a,s){const o=Rr(a),l={documents:s.map(A=>n1(o.serializer,A))},c=await o.Lo("BatchGetDocuments",o.serializer.databaseId,bn.emptyPath(),l,s.length),u=new Map;c.forEach(A=>{const f=tme(o.serializer,A);u.set(f.key.toString(),f)});const d=[];return s.forEach(A=>{const f=u.get(A.toString());wr(!!f),d.push(f)}),d}(this.datastore,t);return r.forEach(n=>this.recordVersion(n)),r}set(t,r){this.write(r.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,r){try{this.write(r.toMutation(t,this.preconditionForUpdate(t)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(t.toString())}delete(t){this.write(new Yg(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,n)=>{const a=sr.fromPath(n);this.mutations.push(new uF(a,this.precondition(a)))}),await async function(n,a){const s=Rr(n),o={writes:a.map(l=>a1(s.serializer,l))};await s.Mo("Commit",s.serializer.databaseId,bn.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let r;if(t.isFoundDocument())r=t.version;else{if(!t.isNoDocument())throw xr();r=Er.min()}const n=this.readVersions.get(t.key.toString());if(n){if(!r.isEqual(n))throw new er(Ft.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),r)}precondition(t){const r=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&r?r.isEqual(Er.min())?Ba.exists(!1):Ba.updateTime(r):Ba.none()}preconditionForUpdate(t){const r=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&r){if(r.isEqual(Er.min()))throw new er(Ft.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ba.updateTime(r)}return Ba.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0e{constructor(t,r,n,a,s){this.asyncQueue=t,this.datastore=r,this.options=n,this.updateFunction=a,this.deferred=s,this._u=n.maxAttempts,this.t_=new bF(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const t=new F0e(this.datastore),r=this.cu(t);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(n)}).catch(a=>{this.lu(a)}))}).catch(n=>{this.lu(n)})})}cu(t){try{const r=this.updateFunction(t);return!ab(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(t){this._u>0&&this.hu(t)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(t)}hu(t){if(t.name==="FirebaseError"){const r=t.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!gz(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0e{constructor(t,r,n,a,s){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=ji.UNAUTHENTICATED,this.clientId=rF.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async o=>{Wt("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(Wt("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new au;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const n=SF(r,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function IB(e,t){e.asyncQueue.verifyOperationInProgress(),Wt("FirestoreClient","Initializing OfflineComponentProvider");const r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async a=>{n.isEqual(a)||(await qz(t.localStore,a),n=a)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function x6(e,t){e.asyncQueue.verifyOperationInProgress();const r=await R0e(e);Wt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(n=>A6(t.remoteStore,n)),e.setAppCheckTokenChangeListener((n,a)=>A6(t.remoteStore,a)),e._onlineComponents=t}async function R0e(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Wt("FirestoreClient","Using user provided OfflineComponentProvider");try{await IB(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(a){return a.name==="FirebaseError"?a.code===Ft.FAILED_PRECONDITION||a.code===Ft.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;nf("Error using user provided cache. Falling back to memory cache: "+r),await IB(e,new s1)}}else Wt("FirestoreClient","Using default OfflineComponentProvider"),await IB(e,new s1);return e._offlineComponents}async function FF(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Wt("FirestoreClient","Using user provided OnlineComponentProvider"),await x6(e,e._uninitializedComponentsProvider._online)):(Wt("FirestoreClient","Using default OnlineComponentProvider"),await x6(e,new jC))),e._onlineComponents}function L0e(e){return FF(e).then(t=>t.syncEngine)}function M0e(e){return FF(e).then(t=>t.datastore)}async function PC(e){const t=await FF(e),r=t.eventManager;return r.onListen=b0e.bind(null,t.syncEngine),r.onUnlisten=C0e.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=w0e.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=_0e.bind(null,t.syncEngine),r}function U0e(e,t,r={}){const n=new au;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,u){const d=new TF({next:f=>{d.Za(),o.enqueueAndForget(()=>BF(s,A));const h=f.docs.has(l);!h&&f.fromCache?u.reject(new er(Ft.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&f.fromCache&&c&&c.source==="server"?u.reject(new er(Ft.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),A=new PF(ib(l.path),d,{includeMetadataChanges:!0,_a:!0});return IF(s,A)}(await PC(e),e.asyncQueue,t,r,n)),n.promise}function Q0e(e,t,r={}){const n=new au;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,u){const d=new TF({next:f=>{d.Za(),o.enqueueAndForget(()=>BF(s,A)),f.fromCache&&c.source==="server"?u.reject(new er(Ft.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),A=new PF(l,d,{includeMetadataChanges:!0,_a:!0});return IF(s,A)}(await PC(e),e.asyncQueue,t,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dW(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v6=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AW(e,t,r){if(!r)throw new er(Ft.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function hW(e,t,r,n){if(t===!0&&n===!0)throw new er(Ft.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function y6(e){if(!sr.isDocumentKey(e))throw new er(Ft.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function b6(e){if(sr.isDocumentKey(e))throw new er(Ft.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function RE(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":xr()}function hi(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new er(Ft.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=RE(e);throw new er(Ft.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(t){var r,n;if(t.host===void 0){if(t.ssl!==void 0)throw new er(Ft.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(r=t.ssl)===null||r===void 0||r;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new er(Ft.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}hW("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dW((n=t.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new er(Ft.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new er(Ft.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new er(Ft.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class LE{constructor(t,r,n,a){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new w6({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new er(Ft.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new er(Ft.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new w6(t),t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new DG;switch(n.type){case"firstParty":return new Uhe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new er(Ft.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=v6.get(r);n&&(Wt("ComponentProvider","Removing Datastore"),v6.delete(r),n.terminate())}(this),Promise.resolve()}}function fW(e,t,r,n={}){var a;const s=(e=hi(e,LE))._getSettings(),o=`${t}:${r}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&nf("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),n.mockUserToken){let l,c;if(typeof n.mockUserToken=="string")l=n.mockUserToken,c=ji.MOCK_USER;else{l=nue(n.mockUserToken,(a=e._app)===null||a===void 0?void 0:a.options.projectId);const u=n.mockUserToken.sub||n.mockUserToken.user_id;if(!u)throw new er(Ft.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new ji(u)}e._authCredentials=new Rhe(new OG(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(t,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new ad(this.firestore,t,this._query)}}class fi{constructor(t,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xd(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new fi(this.firestore,t,this._key)}}class Xd extends ad{constructor(t,r,n){super(t,r,ib(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new fi(this.firestore,null,new sr(t))}withConverter(t){return new Xd(this.firestore,t,this._path)}}function At(e,t,...r){if(e=Ka(e),AW("collection","path",t),e instanceof LE){const n=bn.fromString(t,...r);return b6(n),new Xd(e,null,n)}{if(!(e instanceof fi||e instanceof Xd))throw new er(Ft.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(bn.fromString(t,...r));return b6(n),new Xd(e.firestore,null,n)}}function Mt(e,t,...r){if(e=Ka(e),arguments.length===1&&(t=rF.newId()),AW("doc","path",t),e instanceof LE){const n=bn.fromString(t,...r);return y6(n),new fi(e,null,new sr(n))}{if(!(e instanceof fi||e instanceof Xd))throw new er(Ft.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(bn.fromString(t,...r));return y6(n),new fi(e.firestore,e instanceof Xd?e.converter:null,new sr(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new bF(this,"async_queue_retry"),this.Vu=()=>{const n=PN();n&&Wt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=t;const r=PN();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;const r=PN();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new au;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Pu.push(t),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!Ef(t))throw t;Wt("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(t){const r=this.mu.then(()=>(this.du=!0,t().catch(n=>{this.Eu=n,this.du=!1;const a=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(n);throw Io("INTERNAL UNHANDLED ERROR: ",a),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(t,r,n){this.fu(),this.Ru.indexOf(t)>-1&&(r=0);const a=EF.createAndSchedule(this,t,r,n,s=>this.yu(s));return this.Tu.push(a),a}fu(){this.Eu&&xr()}verifyOperationInProgress(){}async wu(){let t;do t=this.mu,await t;while(t!==this.mu)}Su(t){for(const r of this.Tu)if(r.timerId===t)return!0;return!1}bu(t){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.wu()})}Du(t){this.Ru.push(t)}yu(t){const r=this.Tu.indexOf(t);this.Tu.splice(r,1)}}function C6(e){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(e,["next","error","complete"])}class Ol extends LE{constructor(t,r,n,a){super(t,r,n,a),this.type="firestore",this._queue=new N6,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new N6(t),this._firestoreClient=void 0,await t}}}function mW(e,t){const r=typeof e=="object"?e:K4(),n=typeof e=="string"?e:"(default)",a=H4(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=tue("firestore");s&&fW(a,...s)}return a}function N0(e){if(e._terminated)throw new er(Ft.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||pW(e),e._firestoreClient}function pW(e){var t,r,n;const a=e._freezeSettings(),s=function(l,c,u,d){return new gfe(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,dW(d.experimentalLongPollingOptions),d.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,a);e._componentsProvider||!((r=a.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=a.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(e._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),e._firestoreClient=new D0e(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(e._componentsProvider))}function gW(e,t){nf("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings();return V0e(e,jC.provider,{build:n=>new T0e(n,r.cacheSizeBytes,void 0)}),Promise.resolve()}function V0e(e,t,r){if((e=hi(e,Ol))._firestoreClient||e._terminated)throw new er(Ft.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(e._componentsProvider||e._getSettings().localCache)throw new er(Ft.FAILED_PRECONDITION,"SDK cache is already specified.");e._componentsProvider={_online:t,_offline:r},pW(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(t){this._byteString=t}static fromBase64String(t){try{return new cf(ys.fromBase64String(t))}catch(r){throw new er(Ft.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new cf(ys.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new er(Ft.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ia(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new er(Ft.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new er(Ft.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Hr(this._lat,t._lat)||Hr(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0e=/^__.*__$/;class $0e{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return this.fieldMask!==null?new NA(t,this.data,this.fieldMask,r,this.fieldTransforms):new Jg(t,this.data,r,this.fieldTransforms)}}class xW{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return new NA(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function vW(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xr()}}class OF{constructor(t,r,n,a,s,o){this.settings=t,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(t){return new OF(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(t){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(t),a=this.Fu({path:n,xu:!1});return a.Ou(t),a}Nu(t){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(t),a=this.Fu({path:n,xu:!1});return a.vu(),a}Lu(t){return this.Fu({path:void 0,xu:!0})}Bu(t){return kC(t,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ou(this.path.get(t))}Ou(t){if(t.length===0)throw this.Bu("Document fields must not be empty");if(vW(this.Cu)&&H0e.test(t))throw this.Bu('Document fields cannot begin and end with "__"')}}class K0e{constructor(t,r,n){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=n||OE(t)}Qu(t,r,n,a=!1){return new OF({Cu:t,methodName:r,qu:n,path:Ia.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ex(e){const t=e._freezeSettings(),r=OE(e._databaseId);return new K0e(e._databaseId,!!t.ignoreUndefinedProperties,r)}function VE(e,t,r,n,a,s={}){const o=e.Qu(s.merge||s.mergeFields?2:0,t,r,a);LF("Data must be an object, but it was:",o,n);const l=yW(n,o);let c,u;if(s.merge)c=new Wo(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const A of s.mergeFields){const f=HP(t,A,r);if(!o.contains(f))throw new er(Ft.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);wW(d,f)||d.push(f)}c=new Wo(d),u=o.fieldTransforms.filter(A=>c.covers(A.field))}else c=null,u=o.fieldTransforms;return new $0e(new Oi(l),c,u)}class HE extends ME{_toFieldTransform(t){if(t.Cu!==2)throw t.Cu===1?t.Bu(`${this._methodName}() can only appear at the top level of your update data`):t.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof HE}}function DF(e,t,r,n){const a=e.Qu(1,t,r);LF("Data must be an object, but it was:",a,n);const s=[],o=Oi.empty();b0(n,(c,u)=>{const d=MF(t,c,r);u=Ka(u);const A=a.Nu(d);if(u instanceof HE)s.push(d);else{const f=Ab(u,A);f!=null&&(s.push(d),o.set(d,f))}});const l=new Wo(s);return new xW(o,l,a.fieldTransforms)}function RF(e,t,r,n,a,s){const o=e.Qu(1,t,r),l=[HP(t,n,r)],c=[a];if(s.length%2!=0)throw new er(Ft.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)l.push(HP(t,s[f])),c.push(s[f+1]);const u=[],d=Oi.empty();for(let f=l.length-1;f>=0;--f)if(!wW(u,l[f])){const h=l[f];let m=c[f];m=Ka(m);const p=o.Nu(h);if(m instanceof HE)u.push(h);else{const g=Ab(m,p);g!=null&&(u.push(h),d.set(h,g))}}const A=new Wo(u);return new xW(d,A,o.fieldTransforms)}function q0e(e,t,r,n=!1){return Ab(r,e.Qu(n?4:3,t))}function Ab(e,t){if(bW(e=Ka(e)))return LF("Unsupported field value:",t,e),yW(e,t);if(e instanceof ME)return function(n,a){if(!vW(a.Cu))throw a.Bu(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&t.Cu!==4)throw t.Bu("Nested arrays are not supported");return function(n,a){const s=[];let o=0;for(const l of n){let c=Ab(l,a.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(e,t)}return function(n,a){if((n=Ka(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Rfe(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=zt.fromDate(n);return{timestampValue:Eg(a.serializer,s)}}if(n instanceof zt){const s=new zt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Eg(a.serializer,s)}}if(n instanceof UE)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof cf)return{bytesValue:bz(a.serializer,n._byteString)};if(n instanceof fi){const s=a.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw a.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:mF(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof QE)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return cF(l.serializer,c)})}}}}}}(n,a);throw a.Bu(`Unsupported field value: ${RE(n)}`)}(e,t)}function yW(e,t){const r={};return qG(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):b0(e,(n,a)=>{const s=Ab(a,t.Mu(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function bW(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof zt||e instanceof UE||e instanceof cf||e instanceof fi||e instanceof ME||e instanceof QE)}function LF(e,t,r){if(!bW(r)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(r)){const n=RE(r);throw n==="an object"?t.Bu(e+" a custom object"):t.Bu(e+" "+n)}}function HP(e,t,r){if((t=Ka(t))instanceof C0)return t._internalPath;if(typeof t=="string")return MF(e,t);throw kC("Field path arguments must be of type string or ",e,!1,void 0,r)}const G0e=new RegExp("[~\\*/\\[\\]]");function MF(e,t,r){if(t.search(G0e)>=0)throw kC(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new C0(...t.split("."))._internalPath}catch{throw kC(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function kC(e,t,r,n,a){const s=n&&!n.isEmpty(),o=a!==void 0;let l=`Function ${t}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${n}`),o&&(c+=` in document ${a}`),c+=")"),new er(Ft.INVALID_ARGUMENT,l+e+c)}function wW(e,t){return e.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(t,r,n,a,s){this._firestore=t,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new fi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new z0e(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field($E("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class z0e extends TC{data(){return super.data()}}function $E(e,t){return typeof t=="string"?MF(e,t):t instanceof C0?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NW(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new er(Ft.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class UF{}class KE extends UF{}function Ht(e,t,...r){let n=[];t instanceof UF&&n.push(t),n=n.concat(r),function(s){const o=s.filter(c=>c instanceof qE).length,l=s.filter(c=>c instanceof hb).length;if(o>1||o>0&&l>0)throw new er(Ft.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class hb extends KE{constructor(t,r,n){super(),this._field=t,this._op=r,this._value=n,this.type="where"}static _create(t,r,n){return new hb(t,r,n)}_apply(t){const r=this._parse(t);return _W(t._query,r),new ad(t.firestore,t.converter,kP(t._query,r))}_parse(t){const r=ex(t.firestore);return function(s,o,l,c,u,d,A){let f;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new er(Ft.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){E6(A,d);const h=[];for(const m of A)h.push(_6(c,s,m));f={arrayValue:{values:h}}}else f=_6(c,s,A)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||E6(A,d),f=q0e(l,o,A,d==="in"||d==="not-in");return cn.create(u,d,f)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function Xt(e,t,r){const n=t,a=$E("where",e);return hb._create(a,n,r)}class qE extends UF{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new qE(t,r)}_parse(t){const r=this._queryConstraints.map(n=>n._parse(t)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Ln.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(a,s){let o=a;const l=s.getFlattenedFilters();for(const c of l)_W(o,c),o=kP(o,c)}(t._query,r),new ad(t.firestore,t.converter,kP(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class GE extends KE{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new GE(t,r)}_apply(t){const r=function(a,s,o){if(a.startAt!==null)throw new er(Ft.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new er(Ft.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new e1(s,o)}(t._query,this._field,this._direction);return new ad(t.firestore,t.converter,function(a,s){const o=a.explicitOrderBy.concat([s]);return new Xg(a.path,a.collectionGroup,o,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(t._query,r))}}function Ur(e,t="asc"){const r=t,n=$E("orderBy",e);return GE._create(n,r)}class zE extends KE{constructor(t,r,n){super(),this.type=t,this._limit=r,this._limitType=n}static _create(t,r,n){return new zE(t,r,n)}_apply(t){return new ad(t.firestore,t.converter,_C(t._query,this._limit,this._limitType))}}function CW(e){return zE._create("limit",e,"F")}function _6(e,t,r){if(typeof(r=Ka(r))=="string"){if(r==="")throw new er(Ft.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!az(t)&&r.indexOf("/")!==-1)throw new er(Ft.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=t.path.child(bn.fromString(r));if(!sr.isDocumentKey(n))throw new er(Ft.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Yy(e,new sr(n))}if(r instanceof fi)return Yy(e,r._key);throw new er(Ft.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${RE(r)}.`)}function E6(e,t){if(!Array.isArray(e)||e.length===0)throw new er(Ft.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function _W(e,t){const r=function(a,s){for(const o of a)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new er(Ft.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new er(Ft.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class QF{convertValue(t,r="none"){switch(zm(t)){case 0:return null;case 1:return t.booleanValue;case 2:return _a(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(af(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw xr()}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const n={};return b0(t,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(t){var r,n,a;const s=(a=(n=(r=t.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.map(o=>_a(o.doubleValue));return new QE(s)}convertGeoPoint(t){return new UE(_a(t.latitude),_a(t.longitude))}convertArray(t,r){return(t.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(t,r){switch(r){case"previous":const n=oF(t);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Xy(t));default:return null}}convertTimestamp(t){const r=uA(t);return new zt(r.seconds,r.nanos)}convertDocumentKey(t,r){const n=bn.fromString(t);wr(Pz(n));const a=new sf(n.get(1),n.get(3)),s=new sr(n.popFirst(5));return a.isEqual(r)||Io(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(e,t,r){let n;return n=e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t,n}class W0e extends QF{constructor(t){super(),this.firestore=t}convertBytes(t){return new cf(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new fi(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class XE extends TC{constructor(t,r,n,a,s,o){super(t,r,n,a,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new ay(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const n=this._document.data.field($E("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class ay extends XE{data(t={}){return super.data(t)}}class VF{constructor(t,r,n,a){this._firestore=t,this._userDataWriter=r,this._snapshot=a,this.metadata=new mm(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(n=>{t.call(r,new ay(this._firestore,this._userDataWriter,n.key,n,new mm(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new er(Ft.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let o=0;return a._snapshot.docChanges.map(l=>{const c=new ay(a._firestore,a._userDataWriter,l.doc.key,l.doc,new mm(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new ay(a._firestore,a._userDataWriter,l.doc.key,l.doc,new mm(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:X0e(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function X0e(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xr()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(e){e=hi(e,fi);const t=hi(e.firestore,Ol);return U0e(N0(t),e._key).then(r=>SW(t,e,r))}class JE extends QF{constructor(t){super(),this.firestore=t}convertBytes(t){return new cf(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new fi(this.firestore,null,r)}}function jt(e){e=hi(e,ad);const t=hi(e.firestore,Ol),r=N0(t),n=new JE(t);return NW(e._query),Q0e(r,e._query).then(a=>new VF(t,n,e,a))}function EW(e,t,r){e=hi(e,fi);const n=hi(e.firestore,Ol),a=WE(e.converter,t,r);return tx(n,[VE(ex(n),"setDoc",e._key,a,e.converter!==null,r).toMutation(e._key,Ba.none())])}function Lr(e,t,r,...n){e=hi(e,fi);const a=hi(e.firestore,Ol),s=ex(a);let o;return o=typeof(t=Ka(t))=="string"||t instanceof C0?RF(s,"updateDoc",e._key,t,r,n):DF(s,"updateDoc",e._key,t),tx(a,[o.toMutation(e._key,Ba.exists(!0))])}function fn(e){return tx(hi(e.firestore,Ol),[new Yg(e._key,Ba.none())])}function en(e,t){const r=hi(e.firestore,Ol),n=Mt(e),a=WE(e.converter,t);return tx(r,[VE(ex(e.firestore),"addDoc",n._key,a,e.converter!==null,{}).toMutation(n._key,Ba.exists(!1))]).then(()=>n)}function uf(e,...t){var r,n,a;e=Ka(e);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof t[o]!="object"||C6(t[o])||(s=t[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(C6(t[o])){const A=t[o];t[o]=(r=A.next)===null||r===void 0?void 0:r.bind(A),t[o+1]=(n=A.error)===null||n===void 0?void 0:n.bind(A),t[o+2]=(a=A.complete)===null||a===void 0?void 0:a.bind(A)}let c,u,d;if(e instanceof fi)u=hi(e.firestore,Ol),d=ib(e._key.path),c={next:A=>{t[o]&&t[o](SW(u,e,A))},error:t[o+1],complete:t[o+2]};else{const A=hi(e,ad);u=hi(A.firestore,Ol),d=A._query;const f=new JE(u);c={next:h=>{t[o]&&t[o](new VF(u,f,A,h))},error:t[o+1],complete:t[o+2]},NW(e._query)}return function(f,h,m,p){const g=new TF(p),x=new PF(h,g,m);return f.asyncQueue.enqueueAndForget(async()=>IF(await PC(f),x)),()=>{g.Za(),f.asyncQueue.enqueueAndForget(async()=>BF(await PC(f),x))}}(N0(u),d,l,c)}function tx(e,t){return function(n,a){const s=new au;return n.asyncQueue.enqueueAndForget(async()=>E0e(await L0e(n),a,s)),s.promise}(N0(e),t)}function SW(e,t,r){const n=r.docs.get(t._key),a=new JE(e);return new XE(e,a,t._key,n,new mm(r.hasPendingWrites,r.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0e={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IW{constructor(t,r){this._firestore=t,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=ex(t)}set(t,r,n){this._verifyNotCommitted();const a=Eh(t,this._firestore),s=WE(a.converter,r,n),o=VE(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(o.toMutation(a._key,Ba.none())),this}update(t,r,n,...a){this._verifyNotCommitted();const s=Eh(t,this._firestore);let o;return o=typeof(r=Ka(r))=="string"||r instanceof C0?RF(this._dataReader,"WriteBatch.update",s._key,r,n,a):DF(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(o.toMutation(s._key,Ba.exists(!0))),this}delete(t){this._verifyNotCommitted();const r=Eh(t,this._firestore);return this._mutations=this._mutations.concat(new Yg(r._key,Ba.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new er(Ft.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Eh(e,t){if((e=Ka(e)).firestore!==t)throw new er(Ft.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BW extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=ex(r)}get(r){const n=Eh(r,this._firestore),a=new W0e(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return xr();const o=s[0];if(o.isFoundDocument())return new TC(this._firestore,a,o.key,o,n.converter);if(o.isNoDocument())return new TC(this._firestore,a,n._key,null,n.converter);throw xr()})}set(r,n,a){const s=Eh(r,this._firestore),o=WE(s.converter,n,a),l=VE(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,a);return this._transaction.set(s._key,l),this}update(r,n,a,...s){const o=Eh(r,this._firestore);let l;return l=typeof(n=Ka(n))=="string"||n instanceof C0?RF(this._dataReader,"Transaction.update",o._key,n,a,s):DF(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,l),this}delete(r){const n=Eh(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(t,r){super(t,r),this._firestore=t}get(t){const r=Eh(t,this._firestore),n=new JE(this._firestore);return super.get(t).then(a=>new XE(this._firestore,n,r._key,a._document,new mm(!1,!1),r.converter))}}function Ks(e,t,r){e=hi(e,Ol);const n=Object.assign(Object.assign({},J0e),r);return function(s){if(s.maxAttempts<1)throw new er(Ft.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(s,o,l){const c=new au;return s.asyncQueue.enqueueAndForget(async()=>{const u=await M0e(s);new O0e(s.asyncQueue,u,l,o,c).au()}),c.promise}(N0(e),a=>t(new BW(e,a)),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(e){return N0(e=hi(e,Ol)),new IW(e,t=>tx(e,t))}(function(t,r=!0){(function(a){Wg=a})(Gg),vg(new $m("firestore",(n,{instanceIdentifier:a,options:s})=>{const o=n.getProvider("app").getImmediate(),l=new Ol(new Lhe(n.getProvider("auth-internal")),new Vhe(n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new er(Ft.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sf(u.options.projectId,d)}(o,a),o);return s=Object.assign({useFetchStreams:r},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Wh(xM,"4.7.3",t),Wh(xM,"4.7.3","esm2017")})();const Y0e=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:QF,Bytes:cf,CollectionReference:Xd,DocumentReference:fi,DocumentSnapshot:XE,FieldPath:C0,FieldValue:ME,Firestore:Ol,FirestoreError:er,GeoPoint:UE,Query:ad,QueryCompositeFilterConstraint:qE,QueryConstraint:KE,QueryDocumentSnapshot:ay,QueryFieldFilterConstraint:hb,QueryLimitConstraint:zE,QueryOrderByConstraint:GE,QuerySnapshot:VF,SnapshotMetadata:mm,Timestamp:zt,Transaction:BW,VectorValue:QE,WriteBatch:IW,_AutoId:rF,_ByteString:ys,_DatabaseId:sf,_DocumentKey:sr,_EmptyAuthCredentialsProvider:DG,_FieldPath:Ia,_cast:hi,_logWarn:nf,_validateIsNotUsedTogether:hW,addDoc:en,collection:At,connectFirestoreEmulator:fW,deleteDoc:fn,doc:Mt,enableIndexedDbPersistence:gW,ensureFirestoreConfigured:N0,executeWrite:tx,getDoc:Qi,getDocs:jt,getFirestore:mW,limit:CW,onSnapshot:uf,orderBy:Ur,query:Ht,runTransaction:Ks,setDoc:EW,updateDoc:Lr,where:Xt,writeBatch:_0},Symbol.toStringTag,{value:"Module"})),Z0e={apiKey:"AIzaSyA_ZzeP_DAoXeRuallrOaJ4xFaxjnuhw-8",authDomain:"posys-103de.firebaseapp.com",projectId:"posys-103de",storageBucket:"posys-103de.firebasestorage.app",messagingSenderId:"401054148688",appId:"1:401054148688:web:1c2aea9e8b40958b514955",measurementId:"G-Q2GWQXMFLX"},jW=$4(Z0e),ke=mW(jW),Zm=IG(jW);gW(ke).catch(e=>{e.code==="failed-precondition"?console.warn(" Ya hay otra pestaa usando persistencia."):e.code==="unimplemented"?console.warn(" El navegador no soporta persistencia offline."):console.error(" Error en persistencia offline:",e)});function epe(){const[e,t]=v.useState(""),[r,n]=v.useState(""),[a,s]=v.useState(!1),[o,l]=v.useState(""),[c,u]=v.useState(!1),d=X1(),A=h=>{if(localStorage.setItem("role",h),h==="admin")return d("/admin");if(h==="vendedor_pollo")return d("/admin/salesV2");if(h==="vendedor_ropa")return d("/admin/salesClothes");if(h==="vendedor_dulces")return d("/admin/salesCandies")},f=async h=>{if(h.preventDefault(),l(""),!e.trim()){l("Ingresa el correo.");return}if(r.length<6){l("La contrasea debe tener al menos 6 caracteres.");return}try{u(!0),await wAe(Zm,vG);const m=await bAe(Zm,e,r),p=m.user.uid;localStorage.setItem("POSYS_LOGIN_AT",String(Date.now()));const g=await Qi(Mt(ke,"users",p));if(!g.exists()){l("Tu usuario no tiene perfil en la base de datos.");return}const x=g.data(),y=x.role||"",b=x.name||"";if(!["admin","vendedor_pollo","vendedor_ropa","vendedor_dulces"].includes(y)){l("Rol no vlido. Consulta al administrador.");return}localStorage.setItem("user_email",m.user.email||""),b&&localStorage.setItem("user_name",b),A(y)}catch(m){const p=String((m==null?void 0:m.code)||"");l(p==="auth/invalid-credential"||p==="auth/wrong-password"?"Credenciales incorrectas.":p==="auth/user-not-found"?"Usuario no encontrado.":p==="auth/too-many-requests"?"Demasiados intentos. Intenta ms tarde.":(m==null?void 0:m.message)||"Error al iniciar sesin.")}finally{u(!1)}};return i.jsx("div",{className:"min-h-screen grid place-items-center ",children:i.jsxs("form",{onSubmit:f,className:"w-[92%] max-w-md bg-white p-6 rounded-2xl shadow-2xl",children:[i.jsx("h2",{className:"text-2xl font-bold text-center mb-4",children:"Iniciar Sesin"}),i.jsx("label",{className:"block text-sm font-semibold",children:"Correo electrnico"}),i.jsx("input",{type:"email",className:"w-full border rounded-2xl px-3 py-2 mb-3 shadow-2xl",value:e,onChange:h=>t(h.target.value),autoComplete:"username"}),i.jsx("label",{className:"block text-sm font-semibold",children:"Contrasea"}),i.jsxs("div",{className:"flex gap-2 mb-2",children:[i.jsx("input",{type:a?"text":"password",className:"flex-1 border rounded-2xl px-3 py-2 shadow-2xl",value:r,onChange:h=>n(h.target.value),minLength:6,autoComplete:"current-password"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded-2xl shadow-2xl bg-gray-200 hover:bg-gray-300",onClick:()=>s(h=>!h),children:a?"Ocultar":"Mostrar"})]}),i.jsx("div",{className:"text-xs text-gray-600 mb-3",children:"Mnimo 6 caracteres (requisito de Firebase)."}),i.jsx("button",{className:"w-full bg-blue-600 text-white px-4 py-2 rounded-2xl shadow-2xl hover:bg-blue-700 disabled:opacity-60",disabled:c,children:c?"Entrando...":"Entrar"}),o&&i.jsx("p",{className:`mt-3 text-sm ${o.startsWith("Error")||o.includes("no vlido")?"text-red-600":"text-gray-700"}`,children:o})]})})}function Yr({children:e,allowedRoles:t}){const[r,n]=v.useState(!0),[a,s]=v.useState(!1);return v.useEffect(()=>{const o=pG(Zm,async l=>{if(l){const c=Mt(ke,"users",l.uid),u=await Qi(c);if(u.exists()){const d=u.data().role;s(t.includes(d))}}n(!1)});return()=>o()},[t]),r?i.jsx("div",{className:"p-4",children:"Cargando..."}):a?e:i.jsx(Yf,{to:"/"})}function tpe({role:e}){const t="/admin",r=({isActive:G})=>`block rounded px-3 py-2 text-sm ${G?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,n=X1(),[a,s]=v.useState(!1),[o,l]=v.useState(!1),[c,u]=v.useState(!1),[d,A]=v.useState(!1),[f,h]=v.useState(!1),[m,p]=v.useState(!1),[g,x]=v.useState(!1),[y,b]=v.useState(!1),[_,T]=v.useState(!1),[P,C]=v.useState(!1),[S,I]=v.useState(!1),[L,E]=v.useState(!1),[j,R]=v.useState(!1),[W,de]=v.useState(!1),[te,le]=v.useState(!1),[ce,J]=v.useState(!1),me=async()=>{await NE(Zm),n("/")},Ee=({open:G,onClick:O,children:K})=>i.jsxs("button",{type:"button",onClick:O,className:"w-full flex items-center justify-between px-3 py-2 text-left text-sm font-semibold rounded hover:bg-gray-100",children:[i.jsx("span",{children:K}),i.jsx("span",{className:"text-xs",children:G?"":""})]}),k=({open:G,onClick:O,title:K})=>i.jsxs("button",{type:"button",onClick:O,className:"ml-2 w-[calc(100%-0.5rem)] flex items-center justify-between px-3 py-2 text-left text-sm rounded hover:bg-gray-100",children:[i.jsx("span",{className:"text-blue-500 font-medium ",children:K}),i.jsx("span",{className:"text-xs",children:G?"":""})]}),F=e==="admin",V=e==="vendedor_pollo"||e==="vendedor",D=e==="vendedor_ropa",M=e==="vendedor_dulces";return i.jsxs("div",{className:"min-h-screen flex",children:[i.jsxs("aside",{className:`${a?"w-15 bg-gray-50 border-r p-3 transition-all duration-300 flex flex-col items-center":"w-55"} bg-[#f1f3f7] border-r p-3 transition-all duration-300 flex flex-col`,children:[i.jsx("button",{onClick:()=>s(!a),className:"mb-2 p-2 rounded-2xl shadow-2xl bg-gray-300 hover:bg-gray-400","aria-label":a?"Expandir men":"Colapsar men",children:a?i.jsx("span",{title:"Expandir men",children:"Menu "}):i.jsx("span",{title:"Colapsar men",children:"Cerrar "})}),!a&&i.jsxs(i.Fragment,{children:[i.jsxs("nav",{className:"space-y-1",children:[F&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[i.jsx(Ee,{open:o,onClick:()=>l(G=>!G),children:"Pollos Bea"}),o&&i.jsxs("div",{className:"pb-2",children:[i.jsx(k,{open:c,onClick:()=>u(G=>!G),title:"Inventarios"}),c&&i.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[i.jsx(kr,{to:`${t}/batches`,className:r,children:"Inventario Pollo"}),i.jsx(kr,{to:`${t}/paidBatches`,className:r,children:"Inventarios Pagados"})]}),i.jsx(k,{open:d,onClick:()=>A(G=>!G),title:"Finanzas"}),d&&i.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[i.jsx(kr,{to:`${t}/financialDashboard`,className:r,children:"Dashboard"}),i.jsx(kr,{to:`${t}/billing`,className:r,children:"Facturacion"}),i.jsx(kr,{to:`${t}/expenses`,className:r,children:"Gastos"}),i.jsx(kr,{to:`${t}/salesV2`,className:r,children:"Venta"}),i.jsx(kr,{to:`${t}/bills`,className:r,children:"Cierre"}),i.jsx(kr,{to:`${t}/billhistoric`,className:r,children:"Historial de Cierres"})]}),i.jsx(k,{open:f,onClick:()=>h(G=>!G),title:"Productos"}),f&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(kr,{to:`${t}/products`,className:r,children:"Productos"})})]})]}),i.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[i.jsx(Ee,{open:m,onClick:()=>p(G=>!G),children:"Chiqui Look"}),m&&i.jsxs("div",{className:"pb-2",children:[i.jsx(k,{open:g,onClick:()=>x(G=>!G),title:"Inventario"}),g&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(kr,{to:`${t}/InventoryClothesBatches`,className:r,children:"Inventario Ropa"})}),i.jsx(k,{open:y,onClick:()=>b(G=>!G),title:"Productos"}),y&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(kr,{to:`${t}/productsClothes`,className:r,children:"Agregar Productos"})}),i.jsx(k,{open:_,onClick:()=>T(G=>!G),title:"Clientes"}),_&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(kr,{to:`${t}/CustomersClothes`,className:r,children:"Listado de Clientes"})}),i.jsx(k,{open:P,onClick:()=>C(G=>!G),title:"Finanzas"}),P&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(kr,{to:`${t}/salesClothes`,className:r,children:"Venta Ropa"})}),P&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(kr,{to:`${t}/financialDashboardClothes`,className:r,children:"Dashboard Financiero"})}),P&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(kr,{to:`${t}/TransactionsReportClothes`,className:r,children:"Transacciones"})}),P&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(kr,{to:`${t}/ExpensesClothes`,className:r,children:"Gastos Ropa"})})]})]}),i.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[i.jsx(Ee,{open:L,onClick:()=>E(G=>!G),children:"CandyShop"}),L&&i.jsxs("div",{className:"pb-2",children:[i.jsx(k,{open:W,onClick:()=>de(G=>!G),title:"Vendedores"}),W&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(kr,{to:`${t}/salesCandies`,className:r,children:"Venta"})}),W&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(kr,{to:`${t}/productsVendorsCandies`,className:r,children:"Sub ordenes"})}),i.jsx(k,{open:j,onClick:()=>R(G=>!G),title:"Inventario"}),j&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(kr,{to:`${t}/mainordersCandies`,className:r,children:"Ordenes Maestras"})}),j&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(kr,{to:`${t}/inventoryMainOrderCandies`,className:r,children:"Lista de Ordenes"})}),j&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(kr,{to:`${t}/inventoryCandies`,className:r,children:"Lista Productos"})}),j&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(kr,{to:`${t}/productsCandies`,className:r,children:"Productos"})}),i.jsx(k,{open:te,onClick:()=>le(G=>!G),title:"Finanzas"}),te&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(kr,{to:`${t}/datacenter`,className:r,children:"Data Center"})}),te&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(kr,{to:`${t}/cashDeliveries`,className:r,children:"Entregas Cash"})}),te&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(kr,{to:`${t}/transactionCandies`,className:r,children:"Transacciones"})}),te&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(kr,{to:`${t}/cierreVentasCandies`,className:r,children:"Cierres"})}),te&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(kr,{to:`${t}/reporteCierresCandies`,className:r,children:"Reporte Cierres"})}),te&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(kr,{to:`${t}/billingsCandies`,className:r,children:"Facturas"})}),te&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(kr,{to:`${t}/consolidatedVendors`,className:r,children:"Consolidado Vendedores"})}),te&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(kr,{to:`${t}/dashboardCandies`,className:r,children:"Dashboard"})}),te&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(kr,{to:`${t}/customersCandies`,className:r,children:"Clientes"})}),te&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(kr,{to:`${t}/vendorsCandies`,className:r,children:"Vendedores"})}),te&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(kr,{to:`${t}/expensesCandies`,className:r,children:"Gastos"})})]})]}),i.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[i.jsx(Ee,{open:ce,onClick:()=>J(G=>!G),children:"Operaciones Otras"}),ce&&i.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[i.jsx(kr,{to:`${t}/users`,className:r,children:"Usuarios"}),i.jsx(kr,{to:`${t}/fix`,className:r,children:"Fix de lotes"}),i.jsx(kr,{to:`${t}/transactionclose`,className:r,children:"Liquidaciones"})]})]})]}),V&&i.jsxs("div",{className:"border rounded",children:[i.jsx(Ee,{open:d,onClick:()=>A(G=>!G),children:"Finanzas (Pollo)"}),d&&i.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[i.jsx(kr,{to:`${t}/salesV2`,className:r,children:"Venta"}),i.jsx(kr,{to:`${t}/bills`,className:r,children:"Cierre"})]})]}),M&&i.jsxs("div",{className:"border rounded",children:[i.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:i.jsx(kr,{to:`${t}/salesCandies`,className:r,children:"Venta"})}),i.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:i.jsx(kr,{to:`${t}/transactionCandies`,className:r,children:"Ventas del dia"})}),i.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:i.jsx(kr,{to:`${t}/cierreVentasCandies`,className:r,children:"Cierre de Ventas"})}),i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(kr,{to:`${t}/productsVendorsCandies`,className:r,children:"Pedidos"})}),i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(kr,{to:`${t}/customersCandies`,className:r,children:"Clientes"})})]}),D&&i.jsxs("div",{className:"border rounded",children:[i.jsx(Ee,{open:m,onClick:()=>p(G=>!G),children:"Operaciones Ropa"}),m&&i.jsxs("div",{className:"pb-2",children:[i.jsx(k,{open:P,onClick:()=>C(G=>!G),title:"Ventas"}),P&&i.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[i.jsx(kr,{to:`${t}/salesClothes`,className:r,children:"Venta Ropa"}),i.jsx(kr,{to:`${t}/TransactionsReportClothes`,className:r,children:"Transacciones"})]}),i.jsx(k,{open:y,onClick:()=>b(G=>!G),title:"Productos"}),y&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(kr,{to:`${t}/productsClothes`,className:r,children:"Agregar Productos"})}),i.jsx(k,{open:_,onClick:()=>T(G=>!G),title:"Clientes"}),_&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(kr,{to:`${t}/CustomersClothes`,className:r,children:"Listado de Clientes"})})]})]})]}),i.jsx("button",{onClick:me,className:"mt-4 bg-red-500 text-white px-3 py-2 rounded-2xl shadow-2xl hover:bg-red-600",children:"Cerrar sesin"})]})]}),i.jsx("main",{className:"flex-1 p-6",children:i.jsx(Sq,{})})]})}function BB(...e){return e.filter(Boolean).join(" ")}function rpe({role:e}){const t=X1(),r="/admin",n=e==="admin",a=e==="vendedor_pollo",s=e==="vendedor_dulces",[o,l]=v.useState(()=>a?"POLLO":s?"DULCES":"POLLO"),c=v.useMemo(()=>n?o==="POLLO"?[{key:"dash",label:"Dashboard",to:`${r}/financialDashboard`},{key:"inv",label:"Inventario",to:`${r}/batches`},{key:"invPag",label:"Factura",to:`${r}/paidBatches`},{key:"gastos",label:"Gastos",to:`${r}/expenses`}]:[{key:"dc",label:"Data",to:`${r}/datacenter`},{key:"maes",label:"Inventario",to:`${r}/mainordersCandies`},{key:"ord",label:"Rutas",to:`${r}/productsVendorsCandies`},{key:"cli",label:"Cuentas",to:`${r}/customersCandies`},{key:"trx",label:"Ventas",to:`${r}/transactionCandies`},{key:"cier",label:"Cierres",to:`${r}/cierreVentasCandies`},{key:"cash",label:"Cash",to:`${r}/cashDeliveries`}]:a?[{key:"venta",label:"Venta",to:`${r}/salesV2`},{key:"inv",label:"Inventario",to:`${r}/batches`},{key:"cierre",label:"Cierre",to:`${r}/bills`}]:s?[{key:"venta",label:"Vender",to:`${r}/salesCandies`},{key:"ped",label:"Inventario",to:`${r}/productsVendorsCandies`},{key:"cli",label:"Cuentas",to:`${r}/customersCandies`},{key:"trx",label:"Ventas",to:`${r}/transactionCandies`},{key:"cier",label:"Cierre",to:`${r}/cierreVentasCandies`}]:[{key:"home",label:"Inicio",to:`${r}`}],[n,a,s,o]);v.useEffect(()=>{n&&c.length&&t(c[0].to,{replace:!0})},[o]);const u=async()=>{await NE(Zm),t("/")},d=({isActive:A})=>BB("flex-1 text-center text-[11px] py-1.5 rounded-lg","leading-none select-none",A?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100");return i.jsxs("div",{className:"min-h-screen bg-[#f1f3f7] flex flex-col",children:[i.jsx("header",{className:"sticky top-0 z-50 bg-white border-b shadow-sm",children:i.jsxs("div",{className:"px-3 py-3 flex items-center gap-2",children:[n?i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>l("POLLO"),className:BB("px-3 py-2 rounded-2xl text-sm font-semibold",o==="POLLO"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"),children:"Pollos Bea"}),i.jsx("button",{type:"button",onClick:()=>l("DULCES"),className:BB("px-3 py-2 rounded-2xl text-sm font-semibold",o==="DULCES"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"),children:"CandyShop"})]}):i.jsx("div",{className:"text-sm font-semibold text-gray-800",children:a?"Pollos Bea":s?"CandyShop":"Posys"}),i.jsx("div",{className:"ml-auto flex items-center gap-2",children:i.jsx("button",{onClick:u,className:"px-3 py-2 rounded-2xl bg-red-500 text-white text-sm font-semibold shadow hover:bg-red-600",children:"Cerrar"})})]})}),i.jsx("main",{className:"flex-1 overflow-y-auto px-3 pt-3 pb-[calc(92px+env(safe-area-inset-bottom))]",children:i.jsx(Sq,{})}),i.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white border-t shadow-md pb-[env(safe-area-inset-bottom)]",children:i.jsx("div",{className:"max-w-3xl mx-auto px-2 py-1.5 flex gap-1.5",children:c.map(A=>i.jsx(kr,{to:A.to,className:d,children:A.label},A.key))})})]})}const PW=6048e5,npe=864e5,S6=Symbol.for("constructDateFrom");function du(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&S6 in e?e[S6](t):e instanceof Date?new e.constructor(t):new Date(t)}function Ro(e,t){return du(t||e,e)}function ape(e,t,r){const n=Ro(e,r==null?void 0:r.in);return isNaN(t)?du(e,NaN):(n.setDate(n.getDate()+t),n)}function spe(e,t,r){const n=Ro(e,r==null?void 0:r.in);if(isNaN(t))return du(e,NaN);const a=n.getDate(),s=du(e,n.getTime());s.setMonth(n.getMonth()+t+1,0);const o=s.getDate();return a>=o?s:(n.setFullYear(s.getFullYear(),s.getMonth(),a),n)}let ipe={};function YE(){return ipe}function i1(e,t){var l,c,u,d;const r=YE(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=Ro(e,t==null?void 0:t.in),s=a.getDay(),o=(s<n?7:0)+s-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function FC(e,t){return i1(e,{...t,weekStartsOn:1})}function kW(e,t){const r=Ro(e,t==null?void 0:t.in),n=r.getFullYear(),a=du(r,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const s=FC(a),o=du(r,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const l=FC(o);return r.getTime()>=s.getTime()?n+1:r.getTime()>=l.getTime()?n:n-1}function I6(e){const t=Ro(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function ope(e,...t){const r=du.bind(null,t.find(n=>typeof n=="object"));return t.map(r)}function B6(e,t){const r=Ro(e,t==null?void 0:t.in);return r.setHours(0,0,0,0),r}function lpe(e,t,r){const[n,a]=ope(r==null?void 0:r.in,e,t),s=B6(n),o=B6(a),l=+s-I6(s),c=+o-I6(o);return Math.round((l-c)/npe)}function cpe(e,t){const r=kW(e,t),n=du(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),FC(n)}function upe(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function dpe(e){return!(!upe(e)&&typeof e!="number"||isNaN(+Ro(e)))}function pu(e,t){const r=Ro(e,t==null?void 0:t.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function gu(e,t){const r=Ro(e,t==null?void 0:t.in);return r.setDate(1),r.setHours(0,0,0,0),r}function Ape(e,t){const r=Ro(e,t==null?void 0:t.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const hpe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},fpe=(e,t,r)=>{let n;const a=hpe[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function jB(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const mpe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ppe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},gpe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},xpe={date:jB({formats:mpe,defaultWidth:"full"}),time:jB({formats:ppe,defaultWidth:"full"}),dateTime:jB({formats:gpe,defaultWidth:"full"})},vpe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ype=(e,t,r,n)=>vpe[e];function Jx(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[o]}const s=e.argumentCallback?e.argumentCallback(t):t;return a[s]}}const bpe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},wpe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Npe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Cpe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},_pe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Epe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Spe=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Ipe={ordinalNumber:Spe,era:Jx({values:bpe,defaultWidth:"wide"}),quarter:Jx({values:wpe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Jx({values:Npe,defaultWidth:"wide"}),day:Jx({values:Cpe,defaultWidth:"wide"}),dayPeriod:Jx({values:_pe,defaultWidth:"wide",formattingValues:Epe,defaultFormattingWidth:"wide"})};function Yx(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],s=t.match(a);if(!s)return null;const o=s[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?jpe(l,A=>A.test(o)):Bpe(l,A=>A.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function Bpe(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function jpe(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function Ppe(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],s=t.match(e.parsePattern);if(!s)return null;let o=e.valueCallback?e.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const kpe=/^(\d+)(th|st|nd|rd)?/i,Tpe=/\d+/i,Fpe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ope={any:[/^b/i,/^(a|c)/i]},Dpe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Rpe={any:[/1/i,/2/i,/3/i,/4/i]},Lpe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Mpe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Upe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Qpe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Vpe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Hpe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},$pe={ordinalNumber:Ppe({matchPattern:kpe,parsePattern:Tpe,valueCallback:e=>parseInt(e,10)}),era:Yx({matchPatterns:Fpe,defaultMatchWidth:"wide",parsePatterns:Ope,defaultParseWidth:"any"}),quarter:Yx({matchPatterns:Dpe,defaultMatchWidth:"wide",parsePatterns:Rpe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Yx({matchPatterns:Lpe,defaultMatchWidth:"wide",parsePatterns:Mpe,defaultParseWidth:"any"}),day:Yx({matchPatterns:Upe,defaultMatchWidth:"wide",parsePatterns:Qpe,defaultParseWidth:"any"}),dayPeriod:Yx({matchPatterns:Vpe,defaultMatchWidth:"any",parsePatterns:Hpe,defaultParseWidth:"any"})},Kpe={code:"en-US",formatDistance:fpe,formatLong:xpe,formatRelative:ype,localize:Ipe,match:$pe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function qpe(e,t){const r=Ro(e,t==null?void 0:t.in);return lpe(r,Ape(r))+1}function Gpe(e,t){const r=Ro(e,t==null?void 0:t.in),n=+FC(r)-+cpe(r);return Math.round(n/PW)+1}function TW(e,t){var d,A,f,h;const r=Ro(e,t==null?void 0:t.in),n=r.getFullYear(),a=YE(),s=(t==null?void 0:t.firstWeekContainsDate)??((A=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:A.firstWeekContainsDate)??a.firstWeekContainsDate??((h=(f=a.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,o=du((t==null?void 0:t.in)||e,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const l=i1(o,t),c=du((t==null?void 0:t.in)||e,0);c.setFullYear(n,0,s),c.setHours(0,0,0,0);const u=i1(c,t);return+r>=+l?n+1:+r>=+u?n:n-1}function zpe(e,t){var l,c,u,d;const r=YE(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=TW(e,t),s=du((t==null?void 0:t.in)||e,0);return s.setFullYear(a,0,n),s.setHours(0,0,0,0),i1(s,t)}function Wpe(e,t){const r=Ro(e,t==null?void 0:t.in),n=+i1(r,t)-+zpe(r,t);return Math.round(n/PW)+1}function Fn(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const ah={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return Fn(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Fn(r+1,2)},d(e,t){return Fn(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Fn(e.getHours()%12||12,t.length)},H(e,t){return Fn(e.getHours(),t.length)},m(e,t){return Fn(e.getMinutes(),t.length)},s(e,t){return Fn(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return Fn(a,t.length)}},Z0={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},j6={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return ah.y(e,t)},Y:function(e,t,r,n){const a=TW(e,n),s=a>0?a:1-a;if(t==="YY"){const o=s%100;return Fn(o,2)}return t==="Yo"?r.ordinalNumber(s,{unit:"year"}):Fn(s,t.length)},R:function(e,t){const r=kW(e);return Fn(r,t.length)},u:function(e,t){const r=e.getFullYear();return Fn(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Fn(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Fn(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return ah.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return Fn(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const a=Wpe(e,n);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):Fn(a,t.length)},I:function(e,t,r){const n=Gpe(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):Fn(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):ah.d(e,t)},D:function(e,t,r){const n=qpe(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Fn(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const a=e.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return Fn(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const a=e.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return Fn(s,t.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return Fn(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let a;switch(n===12?a=Z0.noon:n===0?a=Z0.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let a;switch(n>=17?a=Z0.evening:n>=12?a=Z0.afternoon:n>=4?a=Z0.morning:a=Z0.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return ah.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):ah.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Fn(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):Fn(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):ah.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):ah.s(e,t)},S:function(e,t){return ah.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return k6(n);case"XXXX":case"XX":return tm(n);case"XXXXX":case"XXX":default:return tm(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return k6(n);case"xxxx":case"xx":return tm(n);case"xxxxx":case"xxx":default:return tm(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+P6(n,":");case"OOOO":default:return"GMT"+tm(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+P6(n,":");case"zzzz":default:return"GMT"+tm(n,":")}},t:function(e,t,r){const n=Math.trunc(+e/1e3);return Fn(n,t.length)},T:function(e,t,r){return Fn(+e,t.length)}};function P6(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),s=n%60;return s===0?r+String(a):r+String(a)+t+Fn(s,2)}function k6(e,t){return e%60===0?(e>0?"-":"+")+Fn(Math.abs(e)/60,2):tm(e,t)}function tm(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Fn(Math.trunc(n/60),2),s=Fn(n%60,2);return r+a+t+s}const T6=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},FW=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Xpe=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return T6(e,t);let s;switch(n){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",T6(n,t)).replace("{{time}}",FW(a,t))},Jpe={p:FW,P:Xpe},Ype=/^D+$/,Zpe=/^Y+$/,ege=["D","DD","YY","YYYY"];function tge(e){return Ype.test(e)}function rge(e){return Zpe.test(e)}function nge(e,t,r){const n=age(e,t,r);if(console.warn(n),ege.includes(e))throw new RangeError(n)}function age(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const sge=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ige=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,oge=/^'([^]*?)'?$/,lge=/''/g,cge=/[a-zA-Z]/;function ir(e,t,r){var d,A,f,h;const n=YE(),a=n.locale??Kpe,s=n.firstWeekContainsDate??((A=(d=n.locale)==null?void 0:d.options)==null?void 0:A.firstWeekContainsDate)??1,o=n.weekStartsOn??((h=(f=n.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??0,l=Ro(e,r==null?void 0:r.in);if(!dpe(l))throw new RangeError("Invalid time value");let c=t.match(ige).map(m=>{const p=m[0];if(p==="p"||p==="P"){const g=Jpe[p];return g(m,a.formatLong)}return m}).join("").match(sge).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const p=m[0];if(p==="'")return{isToken:!1,value:uge(m)};if(j6[p])return{isToken:!0,value:m};if(p.match(cge))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:m}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:a};return c.map(m=>{if(!m.isToken)return m.value;const p=m.value;(rge(p)||tge(p))&&nge(p,t,String(e));const g=j6[p[0]];return g(l,p,a.localize,u)}).join("")}function uge(e){const t=e.match(oge);return t?t[1].replace(lge,"'"):e}function OW(e,t,r){return ape(e,-14,r)}function dge(e,t,r){return spe(e,-1,r)}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $P=function(e,t){return $P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},$P(e,t)};function xu(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");$P(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var KP=function(){return KP=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},KP.apply(this,arguments)};function No(e,t,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(A){o(A)}}function c(d){try{u(n.throw(d))}catch(A){o(A)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(e,[])).next())})}function eo(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Lw(e,t,r){if(arguments.length===2)for(var n=0,a=t.length,s;n<a;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||t)}var dA=function(){function e(t,r,n,a){this.left=t,this.top=r,this.width=n,this.height=a}return e.prototype.add=function(t,r,n,a){return new e(this.left+t,this.top+r,this.width+n,this.height+a)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),ZE=function(e,t){return dA.fromClientRect(e,t.getBoundingClientRect())},Age=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),a=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new dA(0,0,n,a)},eS=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},fs=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var o=e[a];o<=65535?n.push(o):(o-=65536,n.push((o>>10)+55296,o%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},F6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",hge=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Mw=0;Mw<F6.length;Mw++)hge[F6.charCodeAt(Mw)]=Mw;var O6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",jv=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Uw=0;Uw<O6.length;Uw++)jv[O6.charCodeAt(Uw)]=Uw;var fge=function(e){var t=e.length*.75,r=e.length,n,a=0,s,o,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=jv[e.charCodeAt(n)],o=jv[e.charCodeAt(n+1)],l=jv[e.charCodeAt(n+2)],c=jv[e.charCodeAt(n+3)],d[a++]=s<<2|o>>4,d[a++]=(o&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},mge=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},pge=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},_m=5,HF=11,PB=2,gge=HF-_m,DW=65536>>_m,xge=1<<_m,kB=xge-1,vge=1024>>_m,yge=DW+vge,bge=yge,wge=32,Nge=bge+wge,Cge=65536>>HF,_ge=1<<gge,Ege=_ge-1,D6=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},Sge=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},Ige=function(e,t){var r=fge(e),n=Array.isArray(r)?pge(r):new Uint32Array(r),a=Array.isArray(r)?mge(r):new Uint16Array(r),s=24,o=D6(a,s/2,n[4]/2),l=n[5]===2?D6(a,(s+n[4])/2):Sge(n,Math.ceil((s+n[4])/4));return new Bge(n[0],n[1],n[2],n[3],o,l)},Bge=function(){function e(t,r,n,a,s,o){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=o}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>_m],r=(r<<PB)+(t&kB),this.data[r];if(t<=65535)return r=this.index[DW+(t-55296>>_m)],r=(r<<PB)+(t&kB),this.data[r];if(t<this.highStart)return r=Nge-Cge+(t>>HF),r=this.index[r],r+=t>>_m&Ege,r=this.index[r],r=(r<<PB)+(t&kB),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),R6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",jge=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Qw=0;Qw<R6.length;Qw++)jge[R6.charCodeAt(Qw)]=Qw;var Pge="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",L6=50,kge=1,RW=2,LW=3,Tge=4,Fge=5,M6=7,MW=8,U6=9,kh=10,qP=11,Q6=12,GP=13,Oge=14,Pv=15,zP=16,Vw=17,Zx=18,Dge=19,V6=20,WP=21,ev=22,TB=23,ep=24,vl=25,kv=26,Tv=27,tp=28,Rge=29,um=30,Lge=31,Hw=32,$w=33,XP=34,JP=35,YP=36,o1=37,ZP=38,kN=39,TN=40,FB=41,UW=42,Mge=43,Uge=[9001,65288],QW="!",on="",Kw="",ek=Ige(Pge),wd=[um,YP],tk=[kge,RW,LW,Fge],VW=[kh,MW],H6=[Tv,kv],Qge=tk.concat(VW),$6=[ZP,kN,TN,XP,JP],Vge=[Pv,GP],Hge=function(e,t){t===void 0&&(t="strict");var r=[],n=[],a=[];return e.forEach(function(s,o){var l=ek.get(s);if(l>L6?(a.push(!0),l-=L6):a.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(o),r.push(zP);if(l===Tge||l===qP){if(o===0)return n.push(o),r.push(um);var c=r[o-1];return Qge.indexOf(c)===-1?(n.push(n[o-1]),r.push(c)):(n.push(o),r.push(um))}if(n.push(o),l===Lge)return r.push(t==="strict"?WP:o1);if(l===UW||l===Rge)return r.push(um);if(l===Mge)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(o1):r.push(um);r.push(l)}),[n,r,a]},OB=function(e,t,r,n){var a=n[r];if(Array.isArray(e)?e.indexOf(a)!==-1:e===a)for(var s=r;s<=n.length;){s++;var o=n[s];if(o===t)return!0;if(o!==kh)break}if(a===kh)for(var s=r;s>0;){s--;var l=n[s];if(Array.isArray(e)?e.indexOf(l)!==-1:e===l)for(var c=r;c<=n.length;){c++;var o=n[c];if(o===t)return!0;if(o!==kh)break}if(l!==kh)break}return!1},K6=function(e,t){for(var r=e;r>=0;){var n=t[r];if(n===kh)r--;else return n}return 0},$ge=function(e,t,r,n,a){if(r[n]===0)return on;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return on;var o=s-1,l=s+1,c=t[s],u=o>=0?t[o]:0,d=t[l];if(c===RW&&d===LW)return on;if(tk.indexOf(c)!==-1)return QW;if(tk.indexOf(d)!==-1||VW.indexOf(d)!==-1)return on;if(K6(s,t)===MW)return Kw;if(ek.get(e[s])===qP||(c===Hw||c===$w)&&ek.get(e[l])===qP||c===M6||d===M6||c===U6||[kh,GP,Pv].indexOf(c)===-1&&d===U6||[Vw,Zx,Dge,ep,tp].indexOf(d)!==-1||K6(s,t)===ev||OB(TB,ev,s,t)||OB([Vw,Zx],WP,s,t)||OB(Q6,Q6,s,t))return on;if(c===kh)return Kw;if(c===TB||d===TB)return on;if(d===zP||c===zP)return Kw;if([GP,Pv,WP].indexOf(d)!==-1||c===Oge||u===YP&&Vge.indexOf(c)!==-1||c===tp&&d===YP||d===V6||wd.indexOf(d)!==-1&&c===vl||wd.indexOf(c)!==-1&&d===vl||c===Tv&&[o1,Hw,$w].indexOf(d)!==-1||[o1,Hw,$w].indexOf(c)!==-1&&d===kv||wd.indexOf(c)!==-1&&H6.indexOf(d)!==-1||H6.indexOf(c)!==-1&&wd.indexOf(d)!==-1||[Tv,kv].indexOf(c)!==-1&&(d===vl||[ev,Pv].indexOf(d)!==-1&&t[l+1]===vl)||[ev,Pv].indexOf(c)!==-1&&d===vl||c===vl&&[vl,tp,ep].indexOf(d)!==-1)return on;if([vl,tp,ep,Vw,Zx].indexOf(d)!==-1)for(var A=s;A>=0;){var f=t[A];if(f===vl)return on;if([tp,ep].indexOf(f)!==-1)A--;else break}if([Tv,kv].indexOf(d)!==-1)for(var A=[Vw,Zx].indexOf(c)!==-1?o:s;A>=0;){var f=t[A];if(f===vl)return on;if([tp,ep].indexOf(f)!==-1)A--;else break}if(ZP===c&&[ZP,kN,XP,JP].indexOf(d)!==-1||[kN,XP].indexOf(c)!==-1&&[kN,TN].indexOf(d)!==-1||[TN,JP].indexOf(c)!==-1&&d===TN||$6.indexOf(c)!==-1&&[V6,kv].indexOf(d)!==-1||$6.indexOf(d)!==-1&&c===Tv||wd.indexOf(c)!==-1&&wd.indexOf(d)!==-1||c===ep&&wd.indexOf(d)!==-1||wd.concat(vl).indexOf(c)!==-1&&d===ev&&Uge.indexOf(e[l])===-1||wd.concat(vl).indexOf(d)!==-1&&c===Zx)return on;if(c===FB&&d===FB){for(var h=r[s],m=1;h>0&&(h--,t[h]===FB);)m++;if(m%2!==0)return on}return c===Hw&&d===$w?on:Kw},Kge=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=Hge(e,t.lineBreak),n=r[0],a=r[1],s=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(a=a.map(function(l){return[vl,um,UW].indexOf(l)!==-1?o1:l}));var o=t.wordBreak==="keep-all"?s.map(function(l,c){return l&&e[c]>=19968&&e[c]<=40959}):void 0;return[n,a,o]},qge=function(){function e(t,r,n,a){this.codePoints=t,this.required=r===QW,this.start=n,this.end=a}return e.prototype.slice=function(){return fs.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),Gge=function(e,t){var r=eS(e),n=Kge(r,t),a=n[0],s=n[1],o=n[2],l=r.length,c=0,u=0;return{next:function(){if(u>=l)return{done:!0,value:null};for(var d=on;u<l&&(d=$ge(r,s,a,++u,o))===on;);if(d!==on||u===l){var A=new qge(r,d,c,u);return c=u,{value:A,done:!1}}return{done:!0,value:null}}}},zge=1,Wge=2,fb=4,q6=8,OC=10,G6=47,sy=92,Xge=9,Jge=32,qw=34,tv=61,Yge=35,Zge=36,exe=37,Gw=39,zw=40,rv=41,txe=95,qo=45,rxe=33,nxe=60,axe=62,sxe=64,ixe=91,oxe=93,lxe=61,cxe=123,Ww=63,uxe=125,z6=124,dxe=126,Axe=128,W6=65533,DB=42,pm=43,hxe=44,fxe=58,mxe=59,l1=46,pxe=0,gxe=8,xxe=11,vxe=14,yxe=31,bxe=127,ku=-1,HW=48,$W=97,KW=101,wxe=102,Nxe=117,Cxe=122,qW=65,GW=69,zW=70,_xe=85,Exe=90,no=function(e){return e>=HW&&e<=57},Sxe=function(e){return e>=55296&&e<=57343},rp=function(e){return no(e)||e>=qW&&e<=zW||e>=$W&&e<=wxe},Ixe=function(e){return e>=$W&&e<=Cxe},Bxe=function(e){return e>=qW&&e<=Exe},jxe=function(e){return Ixe(e)||Bxe(e)},Pxe=function(e){return e>=Axe},Xw=function(e){return e===OC||e===Xge||e===Jge},DC=function(e){return jxe(e)||Pxe(e)||e===txe},X6=function(e){return DC(e)||no(e)||e===qo},kxe=function(e){return e>=pxe&&e<=gxe||e===xxe||e>=vxe&&e<=yxe||e===bxe},ph=function(e,t){return e!==sy?!1:t!==OC},Jw=function(e,t,r){return e===qo?DC(t)||ph(t,r):DC(e)?!0:!!(e===sy&&ph(e,t))},RB=function(e,t,r){return e===pm||e===qo?no(t)?!0:t===l1&&no(r):no(e===l1?t:e)},Txe=function(e){var t=0,r=1;(e[t]===pm||e[t]===qo)&&(e[t]===qo&&(r=-1),t++);for(var n=[];no(e[t]);)n.push(e[t++]);var a=n.length?parseInt(fs.apply(void 0,n),10):0;e[t]===l1&&t++;for(var s=[];no(e[t]);)s.push(e[t++]);var o=s.length,l=o?parseInt(fs.apply(void 0,s),10):0;(e[t]===GW||e[t]===KW)&&t++;var c=1;(e[t]===pm||e[t]===qo)&&(e[t]===qo&&(c=-1),t++);for(var u=[];no(e[t]);)u.push(e[t++]);var d=u.length?parseInt(fs.apply(void 0,u),10):0;return r*(a+l*Math.pow(10,-o))*Math.pow(10,c*d)},Fxe={type:2},Oxe={type:3},Dxe={type:4},Rxe={type:13},Lxe={type:8},Mxe={type:21},Uxe={type:9},Qxe={type:10},Vxe={type:11},Hxe={type:12},$xe={type:14},Yw={type:23},Kxe={type:1},qxe={type:25},Gxe={type:24},zxe={type:26},Wxe={type:27},Xxe={type:28},Jxe={type:29},Yxe={type:31},rk={type:32},WW=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(eS(t))},e.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==rk;)t.push(r),r=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case qw:return this.consumeStringToken(qw);case Yge:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(X6(r)||ph(n,a)){var s=Jw(r,n,a)?Wge:zge,o=this.consumeName();return{type:5,value:o,flags:s}}break;case Zge:if(this.peekCodePoint(0)===tv)return this.consumeCodePoint(),Rxe;break;case Gw:return this.consumeStringToken(Gw);case zw:return Fxe;case rv:return Oxe;case DB:if(this.peekCodePoint(0)===tv)return this.consumeCodePoint(),$xe;break;case pm:if(RB(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case hxe:return Dxe;case qo:var l=t,c=this.peekCodePoint(0),u=this.peekCodePoint(1);if(RB(l,c,u))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(Jw(l,c,u))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(c===qo&&u===axe)return this.consumeCodePoint(),this.consumeCodePoint(),Gxe;break;case l1:if(RB(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case G6:if(this.peekCodePoint(0)===DB)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===DB&&(d=this.consumeCodePoint(),d===G6))return this.consumeToken();if(d===ku)return this.consumeToken()}break;case fxe:return zxe;case mxe:return Wxe;case nxe:if(this.peekCodePoint(0)===rxe&&this.peekCodePoint(1)===qo&&this.peekCodePoint(2)===qo)return this.consumeCodePoint(),this.consumeCodePoint(),qxe;break;case sxe:var A=this.peekCodePoint(0),f=this.peekCodePoint(1),h=this.peekCodePoint(2);if(Jw(A,f,h)){var o=this.consumeName();return{type:7,value:o}}break;case ixe:return Xxe;case sy:if(ph(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case oxe:return Jxe;case lxe:if(this.peekCodePoint(0)===tv)return this.consumeCodePoint(),Lxe;break;case cxe:return Vxe;case uxe:return Hxe;case Nxe:case _xe:var m=this.peekCodePoint(0),p=this.peekCodePoint(1);return m===pm&&(rp(p)||p===Ww)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case z6:if(this.peekCodePoint(0)===tv)return this.consumeCodePoint(),Uxe;if(this.peekCodePoint(0)===z6)return this.consumeCodePoint(),Mxe;break;case dxe:if(this.peekCodePoint(0)===tv)return this.consumeCodePoint(),Qxe;break;case ku:return rk}return Xw(t)?(this.consumeWhiteSpace(),Yxe):no(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):DC(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:fs(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();rp(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var n=!1;r===Ww&&t.length<6;)t.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(fs.apply(void 0,t.map(function(c){return c===Ww?HW:c})),16),s=parseInt(fs.apply(void 0,t.map(function(c){return c===Ww?zW:c})),16);return{type:30,start:a,end:s}}var o=parseInt(fs.apply(void 0,t),16);if(this.peekCodePoint(0)===qo&&rp(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var l=[];rp(r)&&l.length<6;)l.push(r),r=this.consumeCodePoint();var s=parseInt(fs.apply(void 0,l),16);return{type:30,start:o,end:s}}else return{type:30,start:o,end:o}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===zw?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===zw?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===ku)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===Gw||r===qw){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===ku||this.peekCodePoint(0)===rv)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),Yw)}for(;;){var a=this.consumeCodePoint();if(a===ku||a===rv)return{type:22,value:fs.apply(void 0,t)};if(Xw(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===ku||this.peekCodePoint(0)===rv?(this.consumeCodePoint(),{type:22,value:fs.apply(void 0,t)}):(this.consumeBadUrlRemnants(),Yw);if(a===qw||a===Gw||a===zw||kxe(a))return this.consumeBadUrlRemnants(),Yw;if(a===sy)if(ph(a,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Yw;else t.push(a)}},e.prototype.consumeWhiteSpace=function(){for(;Xw(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===rv||t===ku)return;ph(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var r=5e4,n="";t>0;){var a=Math.min(r,t);n+=fs.apply(void 0,this._value.splice(0,a)),t-=a}return this._value.shift(),n},e.prototype.consumeStringToken=function(t){var r="",n=0;do{var a=this._value[n];if(a===ku||a===void 0||a===t)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===OC)return this._value.splice(0,n),Kxe;if(a===sy){var s=this._value[n+1];s!==ku&&s!==void 0&&(s===OC?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):ph(a,s)&&(r+=this.consumeStringSlice(n),r+=fs(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},e.prototype.consumeNumber=function(){var t=[],r=fb,n=this.peekCodePoint(0);for((n===pm||n===qo)&&t.push(this.consumeCodePoint());no(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===l1&&no(a))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=q6;no(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===GW||n===KW)&&((a===pm||a===qo)&&no(s)||no(a)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=q6;no(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[Txe(t),r]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],n=t[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),o=this.peekCodePoint(2);if(Jw(a,s,o)){var l=this.consumeName();return{type:15,number:r,flags:n,unit:l}}return a===exe?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(rp(t)){for(var r=fs(t);rp(this.peekCodePoint(0))&&r.length<6;)r+=fs(this.consumeCodePoint());Xw(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||Sxe(n)||n>1114111?W6:n}return t===ku?W6:t},e.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if(X6(r))t+=fs(r);else if(ph(r,this.peekCodePoint(0)))t+=fs(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},e}(),XW=function(){function e(t){this._tokens=t}return e.create=function(t){var r=new WW;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},n=this.consumeToken();;){if(n.type===32||eve(n,t))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?rk:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),mb=function(e){return e.type===15},rx=function(e){return e.type===17},$n=function(e){return e.type===20},Zxe=function(e){return e.type===0},nk=function(e,t){return $n(e)&&e.value===t},JW=function(e){return e.type!==31},Ig=function(e){return e.type!==31&&e.type!==4},sd=function(e){var t=[],r=[];return e.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&t.push(r),t},eve=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},df=function(e){return e.type===17||e.type===15},Ss=function(e){return e.type===16||df(e)},YW=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Ri={type:17,number:0,flags:fb},$F={type:16,number:50,flags:fb},Th={type:16,number:100,flags:fb},Fv=function(e,t,r){var n=e[0],a=e[1];return[oa(n,t),oa(typeof a<"u"?a:n,r)]},oa=function(e,t){if(e.type===16)return e.number/100*t;if(mb(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},ZW="deg",eX="grad",tX="rad",rX="turn",tS={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case ZW:return Math.PI*t.number/180;case eX:return Math.PI/200*t.number;case tX:return t.number;case rX:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},nX=function(e){return e.type===15&&(e.unit===ZW||e.unit===eX||e.unit===tX||e.unit===rX)},aX=function(e){var t=e.filter($n).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Ri,Ri];case"to top":case"bottom":return xc(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Ri,Th];case"to right":case"left":return xc(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Th,Th];case"to bottom":case"top":return xc(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Th,Ri];case"to left":case"right":return xc(270)}return 0},xc=function(e){return Math.PI*e/180},Jh={name:"color",parse:function(e,t){if(t.type===18){var r=tve[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(t.type===5){if(t.value.length===3){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3);return Fh(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(t.value.length===4){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3),o=t.value.substring(3,4);return Fh(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(o+o,16)/255)}if(t.value.length===6){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6);return Fh(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(t.value.length===8){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6),o=t.value.substring(6,8);return Fh(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(o,16)/255)}}if(t.type===20){var l=Jd[t.value.toUpperCase()];if(typeof l<"u")return l}return Jd.TRANSPARENT}},Yh=function(e){return(255&e)===0},ri=function(e){var t=255&e,r=255&e>>8,n=255&e>>16,a=255&e>>24;return t<255?"rgba("+a+","+n+","+r+","+t/255+")":"rgb("+a+","+n+","+r+")"},Fh=function(e,t,r,n){return(e<<24|t<<16|r<<8|Math.round(n*255)<<0)>>>0},J6=function(e,t){if(e.type===17)return e.number;if(e.type===16){var r=t===3?1:255;return t===3?e.number/100*r:Math.round(e.number/100*r)}return 0},Y6=function(e,t){var r=t.filter(Ig);if(r.length===3){var n=r.map(J6),a=n[0],s=n[1],o=n[2];return Fh(a,s,o,1)}if(r.length===4){var l=r.map(J6),a=l[0],s=l[1],o=l[2],c=l[3];return Fh(a,s,o,c)}return 0};function LB(e,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-e)*r*6+e:r<1/2?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var Z6=function(e,t){var r=t.filter(Ig),n=r[0],a=r[1],s=r[2],o=r[3],l=(n.type===17?xc(n.number):tS.parse(e,n))/(Math.PI*2),c=Ss(a)?a.number/100:0,u=Ss(s)?s.number/100:0,d=typeof o<"u"&&Ss(o)?oa(o,1):1;if(c===0)return Fh(u*255,u*255,u*255,1);var A=u<=.5?u*(c+1):u+c-u*c,f=u*2-A,h=LB(f,A,l+1/3),m=LB(f,A,l),p=LB(f,A,l-1/3);return Fh(h*255,m*255,p*255,d)},tve={hsl:Z6,hsla:Z6,rgb:Y6,rgba:Y6},iy=function(e,t){return Jh.parse(e,XW.create(t).parseComponentValue())},Jd={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},rve={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if($n(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},nve={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},rS=function(e,t){var r=Jh.parse(e,t[0]),n=t[1];return n&&Ss(n)?{color:r,stop:n}:{color:r,stop:null}},eU=function(e,t){var r=e[0],n=e[e.length-1];r.stop===null&&(r.stop=Ri),n.stop===null&&(n.stop=Th);for(var a=[],s=0,o=0;o<e.length;o++){var l=e[o].stop;if(l!==null){var c=oa(l,t);c>s?a.push(c):a.push(s),s=c}else a.push(null)}for(var u=null,o=0;o<a.length;o++){var d=a[o];if(d===null)u===null&&(u=o);else if(u!==null){for(var A=o-u,f=a[u-1],h=(d-f)/(A+1),m=1;m<=A;m++)a[u+m-1]=h*m;u=null}}return e.map(function(p,g){var x=p.color;return{color:x,stop:Math.max(Math.min(1,a[g]/t),0)}})},ave=function(e,t,r){var n=t/2,a=r/2,s=oa(e[0],t)-n,o=a-oa(e[1],r);return(Math.atan2(o,s)+Math.PI*2)%(Math.PI*2)},sve=function(e,t,r){var n=typeof e=="number"?e:ave(e,t,r),a=Math.abs(t*Math.sin(n))+Math.abs(r*Math.cos(n)),s=t/2,o=r/2,l=a/2,c=Math.sin(n-Math.PI/2)*l,u=Math.cos(n-Math.PI/2)*l;return[a,s-u,s+u,o-c,o+c]},qc=function(e,t){return Math.sqrt(e*e+t*t)},tU=function(e,t,r,n,a){var s=[[0,0],[0,t],[e,0],[e,t]];return s.reduce(function(o,l){var c=l[0],u=l[1],d=qc(r-c,n-u);return(a?d<o.optimumDistance:d>o.optimumDistance)?{optimumCorner:l,optimumDistance:d}:o},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},ive=function(e,t,r,n,a){var s=0,o=0;switch(e.size){case 0:e.shape===0?s=o=Math.min(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.min(Math.abs(t),Math.abs(t-n)),o=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(e.shape===0)s=o=Math.min(qc(t,r),qc(t,r-a),qc(t-n,r),qc(t-n,r-a));else if(e.shape===1){var l=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(t),Math.abs(t-n)),c=tU(n,a,t,r,!0),u=c[0],d=c[1];s=qc(u-t,(d-r)/l),o=l*s}break;case 1:e.shape===0?s=o=Math.max(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.max(Math.abs(t),Math.abs(t-n)),o=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(e.shape===0)s=o=Math.max(qc(t,r),qc(t,r-a),qc(t-n,r),qc(t-n,r-a));else if(e.shape===1){var l=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(t),Math.abs(t-n)),A=tU(n,a,t,r,!1),u=A[0],d=A[1];s=qc(u-t,(d-r)/l),o=l*s}break}return Array.isArray(e.size)&&(s=oa(e.size[0],n),o=e.size.length===2?oa(e.size[1],a):s),[s,o]},ove=function(e,t){var r=xc(180),n=[];return sd(t).forEach(function(a,s){if(s===0){var o=a[0];if(o.type===20&&o.value==="to"){r=aX(a);return}else if(nX(o)){r=tS.parse(e,o);return}}var l=rS(e,a);n.push(l)}),{angle:r,stops:n,type:1}},Zw=function(e,t){var r=xc(180),n=[];return sd(t).forEach(function(a,s){if(s===0){var o=a[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){r=aX(a);return}else if(nX(o)){r=(tS.parse(e,o)+xc(270))%xc(360);return}}var l=rS(e,a);n.push(l)}),{angle:r,stops:n,type:1}},lve=function(e,t){var r=xc(180),n=[],a=1,s=0,o=3,l=[];return sd(t).forEach(function(c,u){var d=c[0];if(u===0){if($n(d)&&d.value==="linear"){a=1;return}else if($n(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var A=Jh.parse(e,d.values[0]);n.push({stop:Ri,color:A})}else if(d.name==="to"){var A=Jh.parse(e,d.values[0]);n.push({stop:Th,color:A})}else if(d.name==="color-stop"){var f=d.values.filter(Ig);if(f.length===2){var A=Jh.parse(e,f[1]),h=f[0];rx(h)&&n.push({stop:{type:16,number:h.number*100,flags:h.flags},color:A})}}}}),a===1?{angle:(r+xc(180))%xc(360),stops:n,type:a}:{size:o,shape:s,stops:n,position:l,type:a}},sX="closest-side",iX="farthest-side",oX="closest-corner",lX="farthest-corner",cX="circle",uX="ellipse",dX="cover",AX="contain",cve=function(e,t){var r=0,n=3,a=[],s=[];return sd(t).forEach(function(o,l){var c=!0;if(l===0){var u=!1;c=o.reduce(function(A,f){if(u)if($n(f))switch(f.value){case"center":return s.push($F),A;case"top":case"left":return s.push(Ri),A;case"right":case"bottom":return s.push(Th),A}else(Ss(f)||df(f))&&s.push(f);else if($n(f))switch(f.value){case cX:return r=0,!1;case uX:return r=1,!1;case"at":return u=!0,!1;case sX:return n=0,!1;case dX:case iX:return n=1,!1;case AX:case oX:return n=2,!1;case lX:return n=3,!1}else if(df(f)||Ss(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return A},c)}if(c){var d=rS(e,o);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},e2=function(e,t){var r=0,n=3,a=[],s=[];return sd(t).forEach(function(o,l){var c=!0;if(l===0?c=o.reduce(function(d,A){if($n(A))switch(A.value){case"center":return s.push($F),!1;case"top":case"left":return s.push(Ri),!1;case"right":case"bottom":return s.push(Th),!1}else if(Ss(A)||df(A))return s.push(A),!1;return d},c):l===1&&(c=o.reduce(function(d,A){if($n(A))switch(A.value){case cX:return r=0,!1;case uX:return r=1,!1;case AX:case sX:return n=0,!1;case iX:return n=1,!1;case oX:return n=2,!1;case dX:case lX:return n=3,!1}else if(df(A)||Ss(A))return Array.isArray(n)||(n=[]),n.push(A),!1;return d},c)),c){var u=rS(e,o);a.push(u)}}),{size:n,shape:r,stops:a,position:s,type:2}},uve=function(e){return e.type===1},dve=function(e){return e.type===2},KF={name:"image",parse:function(e,t){if(t.type===22){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(t.type===18){var n=hX[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function Ave(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!hX[e.name])}var hX={"linear-gradient":ove,"-moz-linear-gradient":Zw,"-ms-linear-gradient":Zw,"-o-linear-gradient":Zw,"-webkit-linear-gradient":Zw,"radial-gradient":cve,"-moz-radial-gradient":e2,"-ms-radial-gradient":e2,"-o-radial-gradient":e2,"-webkit-radial-gradient":e2,"-webkit-gradient":lve},hve={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(n){return Ig(n)&&Ave(n)}).map(function(n){return KF.parse(e,n)})}},fve={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if($n(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},mve={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return sd(t).map(function(r){return r.filter(Ss)}).map(YW)}},pve={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return sd(t).map(function(r){return r.filter($n).map(function(n){return n.value}).join(" ")}).map(gve)}},gve=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},ag;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(ag||(ag={}));var xve={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return sd(t).map(function(r){return r.filter(vve)})}},vve=function(e){return $n(e)||Ss(e)},nS=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},yve=nS("top"),bve=nS("right"),wve=nS("bottom"),Nve=nS("left"),aS=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return YW(r.filter(Ss))}}},Cve=aS("top-left"),_ve=aS("top-right"),Eve=aS("bottom-right"),Sve=aS("bottom-left"),sS=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Ive=sS("top"),Bve=sS("right"),jve=sS("bottom"),Pve=sS("left"),iS=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return mb(r)?r.number:0}}},kve=iS("top"),Tve=iS("right"),Fve=iS("bottom"),Ove=iS("left"),Dve={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Rve={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},Lve={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter($n).reduce(function(r,n){return r|Mve(n.value)},0)}},Mve=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Uve={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Qve={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},RC;(function(e){e.NORMAL="normal",e.STRICT="strict"})(RC||(RC={}));var Vve={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return RC.STRICT;case"normal":default:return RC.NORMAL}}},Hve={name:"line-height",initialValue:"normal",prefix:!1,type:4},rU=function(e,t){return $n(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:Ss(e)?oa(e,t):t},$ve={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:KF.parse(e,t)}},Kve={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},ak={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},oS=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},qve=oS("top"),Gve=oS("right"),zve=oS("bottom"),Wve=oS("left"),Xve={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter($n).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Jve={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},lS=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Yve=lS("top"),Zve=lS("right"),eye=lS("bottom"),tye=lS("left"),rye={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},nye={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},aye={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&nk(t[0],"none")?[]:sd(t).map(function(r){for(var n={color:Jd.TRANSPARENT,offsetX:Ri,offsetY:Ri,blur:Ri},a=0,s=0;s<r.length;s++){var o=r[s];df(o)?(a===0?n.offsetX=o:a===1?n.offsetY=o:n.blur=o,a++):n.color=Jh.parse(e,o)}return n})}},sye={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},iye={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=cye[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},oye=function(e){var t=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},lye=function(e){var t=e.filter(function(c){return c.type===17}).map(function(c){return c.number}),r=t[0],n=t[1];t[2],t[3];var a=t[4],s=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var o=t[12],l=t[13];return t[14],t[15],t.length===16?[r,n,a,s,o,l]:null},cye={matrix:oye,matrix3d:lye},nU={type:16,number:50,flags:fb},uye=[nU,nU],dye={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(Ss);return r.length!==2?uye:[r[0],r[1]]}},Aye={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},oy;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(oy||(oy={}));var hye={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return oy.BREAK_ALL;case"keep-all":return oy.KEEP_ALL;case"normal":default:return oy.NORMAL}}},fye={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(rx(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},fX={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},mye={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return rx(t)?t.number:1}},pye={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},gye={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter($n).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},xye={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],n=[];return t.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},vye={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},yye={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(rx(t))return t.number;if($n(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},bye={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter($n).map(function(r){return r.value})}},wye={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Vs=function(e,t){return(e&t)!==0},Nye={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},Cye={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=t.filter(JW),s=0;s<a.length;s++){var o=a[s],l=a[s+1];if(o.type===20){var c=l&&rx(l)?l.number:1;n.push({counter:o.value,increment:c})}}return n}},_ye={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var r=[],n=t.filter(JW),a=0;a<n.length;a++){var s=n[a],o=n[a+1];if($n(s)&&s.value!=="none"){var l=o&&rx(o)?o.number:0;r.push({counter:s.value,reset:l})}}return r}},Eye={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(mb).map(function(r){return fX.parse(e,r)})}},Sye={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var n=[],a=t.filter(Zxe);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var o=a[s].value,l=a[s+1].value;n.push({open:o,close:l})}return n}},aU=function(e,t,r){if(!e)return"";var n=e[Math.min(t,e.length-1)];return n?r?n.open:n.close:""},Iye={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&nk(t[0],"none")?[]:sd(t).map(function(r){for(var n={color:255,offsetX:Ri,offsetY:Ri,blur:Ri,spread:Ri,inset:!1},a=0,s=0;s<r.length;s++){var o=r[s];nk(o,"inset")?n.inset=!0:df(o)?(a===0?n.offsetX=o:a===1?n.offsetY=o:a===2?n.blur=o:n.spread=o,a++):n.color=Jh.parse(e,o)}return n})}},Bye={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[0,1,2],n=[];return t.filter($n).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},jye={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Pye={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return mb(t)?t.number:0}},kye=function(){function e(t,r){var n,a;this.animationDuration=ur(t,Eye,r.animationDuration),this.backgroundClip=ur(t,rve,r.backgroundClip),this.backgroundColor=ur(t,nve,r.backgroundColor),this.backgroundImage=ur(t,hve,r.backgroundImage),this.backgroundOrigin=ur(t,fve,r.backgroundOrigin),this.backgroundPosition=ur(t,mve,r.backgroundPosition),this.backgroundRepeat=ur(t,pve,r.backgroundRepeat),this.backgroundSize=ur(t,xve,r.backgroundSize),this.borderTopColor=ur(t,yve,r.borderTopColor),this.borderRightColor=ur(t,bve,r.borderRightColor),this.borderBottomColor=ur(t,wve,r.borderBottomColor),this.borderLeftColor=ur(t,Nve,r.borderLeftColor),this.borderTopLeftRadius=ur(t,Cve,r.borderTopLeftRadius),this.borderTopRightRadius=ur(t,_ve,r.borderTopRightRadius),this.borderBottomRightRadius=ur(t,Eve,r.borderBottomRightRadius),this.borderBottomLeftRadius=ur(t,Sve,r.borderBottomLeftRadius),this.borderTopStyle=ur(t,Ive,r.borderTopStyle),this.borderRightStyle=ur(t,Bve,r.borderRightStyle),this.borderBottomStyle=ur(t,jve,r.borderBottomStyle),this.borderLeftStyle=ur(t,Pve,r.borderLeftStyle),this.borderTopWidth=ur(t,kve,r.borderTopWidth),this.borderRightWidth=ur(t,Tve,r.borderRightWidth),this.borderBottomWidth=ur(t,Fve,r.borderBottomWidth),this.borderLeftWidth=ur(t,Ove,r.borderLeftWidth),this.boxShadow=ur(t,Iye,r.boxShadow),this.color=ur(t,Dve,r.color),this.direction=ur(t,Rve,r.direction),this.display=ur(t,Lve,r.display),this.float=ur(t,Uve,r.cssFloat),this.fontFamily=ur(t,xye,r.fontFamily),this.fontSize=ur(t,vye,r.fontSize),this.fontStyle=ur(t,wye,r.fontStyle),this.fontVariant=ur(t,bye,r.fontVariant),this.fontWeight=ur(t,yye,r.fontWeight),this.letterSpacing=ur(t,Qve,r.letterSpacing),this.lineBreak=ur(t,Vve,r.lineBreak),this.lineHeight=ur(t,Hve,r.lineHeight),this.listStyleImage=ur(t,$ve,r.listStyleImage),this.listStylePosition=ur(t,Kve,r.listStylePosition),this.listStyleType=ur(t,ak,r.listStyleType),this.marginTop=ur(t,qve,r.marginTop),this.marginRight=ur(t,Gve,r.marginRight),this.marginBottom=ur(t,zve,r.marginBottom),this.marginLeft=ur(t,Wve,r.marginLeft),this.opacity=ur(t,mye,r.opacity);var s=ur(t,Xve,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=ur(t,Jve,r.overflowWrap),this.paddingTop=ur(t,Yve,r.paddingTop),this.paddingRight=ur(t,Zve,r.paddingRight),this.paddingBottom=ur(t,eye,r.paddingBottom),this.paddingLeft=ur(t,tye,r.paddingLeft),this.paintOrder=ur(t,Bye,r.paintOrder),this.position=ur(t,nye,r.position),this.textAlign=ur(t,rye,r.textAlign),this.textDecorationColor=ur(t,pye,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=ur(t,gye,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=ur(t,aye,r.textShadow),this.textTransform=ur(t,sye,r.textTransform),this.transform=ur(t,iye,r.transform),this.transformOrigin=ur(t,dye,r.transformOrigin),this.visibility=ur(t,Aye,r.visibility),this.webkitTextStrokeColor=ur(t,jye,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=ur(t,Pye,r.webkitTextStrokeWidth),this.wordBreak=ur(t,hye,r.wordBreak),this.zIndex=ur(t,fye,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return Yh(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return Vs(this.display,4)||Vs(this.display,33554432)||Vs(this.display,268435456)||Vs(this.display,536870912)||Vs(this.display,67108864)||Vs(this.display,134217728)},e}(),Tye=function(){function e(t,r){this.content=ur(t,Nye,r.content),this.quotes=ur(t,Sye,r.quotes)}return e}(),sU=function(){function e(t,r){this.counterIncrement=ur(t,Cye,r.counterIncrement),this.counterReset=ur(t,_ye,r.counterReset)}return e}(),ur=function(e,t,r){var n=new WW,a=r!==null&&typeof r<"u"?r.toString():t.initialValue;n.write(a);var s=new XW(n.read());switch(t.type){case 2:var o=s.parseComponentValue();return t.parse(e,$n(o)?o.value:t.initialValue);case 0:return t.parse(e,s.parseComponentValue());case 1:return t.parse(e,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(t.format){case"angle":return tS.parse(e,s.parseComponentValue());case"color":return Jh.parse(e,s.parseComponentValue());case"image":return KF.parse(e,s.parseComponentValue());case"length":var l=s.parseComponentValue();return df(l)?l:Ri;case"length-percentage":var c=s.parseComponentValue();return Ss(c)?c:Ri;case"time":return fX.parse(e,s.parseComponentValue())}break}},Fye="data-html2canvas-debug",Oye=function(e){var t=e.getAttribute(Fye);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},sk=function(e,t){var r=Oye(e);return r===1||t===r},id=function(){function e(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,sk(r,3))debugger;this.styles=new kye(t,window.getComputedStyle(r,null)),lk(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=ZE(this.context,r),sk(r,4)&&(this.flags|=16)}return e}(),Dye="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",iU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ov=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var t2=0;t2<iU.length;t2++)Ov[iU.charCodeAt(t2)]=t2;var Rye=function(e){var t=e.length*.75,r=e.length,n,a=0,s,o,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=Ov[e.charCodeAt(n)],o=Ov[e.charCodeAt(n+1)],l=Ov[e.charCodeAt(n+2)],c=Ov[e.charCodeAt(n+3)],d[a++]=s<<2|o>>4,d[a++]=(o&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},Lye=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},Mye=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},Em=5,qF=11,MB=2,Uye=qF-Em,mX=65536>>Em,Qye=1<<Em,UB=Qye-1,Vye=1024>>Em,Hye=mX+Vye,$ye=Hye,Kye=32,qye=$ye+Kye,Gye=65536>>qF,zye=1<<Uye,Wye=zye-1,oU=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},Xye=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},Jye=function(e,t){var r=Rye(e),n=Array.isArray(r)?Mye(r):new Uint32Array(r),a=Array.isArray(r)?Lye(r):new Uint16Array(r),s=24,o=oU(a,s/2,n[4]/2),l=n[5]===2?oU(a,(s+n[4])/2):Xye(n,Math.ceil((s+n[4])/4));return new Yye(n[0],n[1],n[2],n[3],o,l)},Yye=function(){function e(t,r,n,a,s,o){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=o}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>Em],r=(r<<MB)+(t&UB),this.data[r];if(t<=65535)return r=this.index[mX+(t-55296>>Em)],r=(r<<MB)+(t&UB),this.data[r];if(t<this.highStart)return r=qye-Gye+(t>>qF),r=this.index[r],r+=t>>Em&Wye,r=this.index[r],r=(r<<MB)+(t&UB),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),lU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Zye=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var r2=0;r2<lU.length;r2++)Zye[lU.charCodeAt(r2)]=r2;var e1e=1,QB=2,VB=3,cU=4,uU=5,t1e=7,dU=8,HB=9,$B=10,AU=11,hU=12,fU=13,mU=14,KB=15,r1e=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},n1e=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var o=e[a];o<=65535?n.push(o):(o-=65536,n.push((o>>10)+55296,o%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},a1e=Jye(Dye),uc="",qB="",s1e=function(e){return a1e.get(e)},i1e=function(e,t,r){var n=r-2,a=t[n],s=t[r-1],o=t[r];if(s===QB&&o===VB)return uc;if(s===QB||s===VB||s===cU||o===QB||o===VB||o===cU)return qB;if(s===dU&&[dU,HB,AU,hU].indexOf(o)!==-1||(s===AU||s===HB)&&(o===HB||o===$B)||(s===hU||s===$B)&&o===$B||o===fU||o===uU||o===t1e||s===e1e)return uc;if(s===fU&&o===mU){for(;a===uU;)a=t[--n];if(a===mU)return uc}if(s===KB&&o===KB){for(var l=0;a===KB;)l++,a=t[--n];if(l%2===0)return uc}return qB},o1e=function(e){var t=r1e(e),r=t.length,n=0,a=0,s=t.map(s1e);return{next:function(){if(n>=r)return{done:!0,value:null};for(var o=uc;n<r&&(o=i1e(t,s,++n))===uc;);if(o!==uc||n===r){var l=n1e.apply(null,t.slice(a,n));return a=n,{value:l,done:!1}}return{done:!0,value:null}}}},l1e=function(e){for(var t=o1e(e),r=[],n;!(n=t.next()).done;)n.value&&r.push(n.value.slice());return r},c1e=function(e){var t=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height=t+"px",n.style.display="block",e.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(e.body.removeChild(n),s===t)return!0}}return!1},u1e=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=t.firstChild,a=eS(n.data).map(function(c){return fs(c)}),s=0,o={},l=a.every(function(c,u){r.setStart(n,s),r.setEnd(n,s+c.length);var d=r.getBoundingClientRect();s+=c.length;var A=d.x>o.x||d.y>o.y;return o=d,u===0?!0:A});return e.body.removeChild(t),l},d1e=function(){return typeof new Image().crossOrigin<"u"},A1e=function(){return typeof new XMLHttpRequest().responseType=="string"},h1e=function(e){var t=new Image,r=e.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},pU=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},f1e=function(e){var t=e.createElement("canvas"),r=100;t.width=r,t.height=r;var n=t.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=t.toDataURL();a.src=s;var o=ik(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),gU(o).then(function(l){n.drawImage(l,0,0);var c=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=e.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",pU(c)?gU(ik(r,r,0,0,u)):Promise.reject(!1)}).then(function(l){return n.drawImage(l,0,0),pU(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},ik=function(e,t,r,n,a){var s="http://www.w3.org/2000/svg",o=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject");return o.setAttributeNS(null,"width",e.toString()),o.setAttributeNS(null,"height",t.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",r.toString()),l.setAttributeNS(null,"y",n.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(l),l.appendChild(a),o},gU=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){return t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},Bi={get SUPPORT_RANGE_BOUNDS(){var e=c1e(document);return Object.defineProperty(Bi,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=Bi.SUPPORT_RANGE_BOUNDS&&u1e(document);return Object.defineProperty(Bi,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=h1e(document);return Object.defineProperty(Bi,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?f1e(document):Promise.resolve(!1);return Object.defineProperty(Bi,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=d1e();return Object.defineProperty(Bi,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=A1e();return Object.defineProperty(Bi,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Bi,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Bi,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},ly=function(){function e(t,r){this.text=t,this.bounds=r}return e}(),m1e=function(e,t,r,n){var a=x1e(t,r),s=[],o=0;return a.forEach(function(l){if(r.textDecorationLine.length||l.trim().length>0)if(Bi.SUPPORT_RANGE_BOUNDS){var c=xU(n,o,l.length).getClientRects();if(c.length>1){var u=GF(l),d=0;u.forEach(function(f){s.push(new ly(f,dA.fromDOMRectList(e,xU(n,d+o,f.length).getClientRects()))),d+=f.length})}else s.push(new ly(l,dA.fromDOMRectList(e,c)))}else{var A=n.splitText(l.length);s.push(new ly(l,p1e(e,n))),n=A}else Bi.SUPPORT_RANGE_BOUNDS||(n=n.splitText(l.length));o+=l.length}),s},p1e=function(e,t){var r=t.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var a=t.parentNode;if(a){a.replaceChild(n,t);var s=ZE(e,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return dA.EMPTY},xU=function(e,t,r){var n=e.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(e,t),a.setEnd(e,t+r),a},GF=function(e){if(Bi.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return l1e(e)},g1e=function(e,t){if(Bi.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(n){return n.segment})}return y1e(e,t)},x1e=function(e,t){return t.letterSpacing!==0?GF(e):g1e(e,t)},v1e=[32,160,4961,65792,65793,4153,4241],y1e=function(e,t){for(var r=Gge(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),n=[],a,s=function(){if(a.value){var o=a.value.slice(),l=eS(o),c="";l.forEach(function(u){v1e.indexOf(u)===-1?c+=fs(u):(c.length&&n.push(c),n.push(fs(u)),c="")}),c.length&&n.push(c)}};!(a=r.next()).done;)s();return n},b1e=function(){function e(t,r,n){this.text=w1e(r.data,n.textTransform),this.textBounds=m1e(t,this.text,n,r)}return e}(),w1e=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(N1e,C1e);case 2:return e.toUpperCase();default:return e}},N1e=/(^|\s|:|-|\(|\))([a-z])/g,C1e=function(e,t,r){return e.length>0?t+r.toUpperCase():e},pX=function(e){xu(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return t}(id),gX=function(e){xu(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return t}(id),xX=function(e){xu(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=new XMLSerializer,o=ZE(r,n);return n.setAttribute("width",o.width+"px"),n.setAttribute("height",o.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return t}(id),vX=function(e){xu(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(id),ok=function(e){xu(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return t}(id),_1e=[{type:15,flags:0,unit:"px",number:3}],E1e=[{type:16,flags:0,number:50}],S1e=function(e){return e.width>e.height?new dA(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new dA(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},I1e=function(e){var t=e.type===B1e?new Array(e.value.length+1).join(""):e.value;return t.length===0?e.placeholder||"":t},LC="checkbox",MC="radio",B1e="password",vU=707406591,zF=function(e){xu(t,e);function t(r,n){var a=e.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=I1e(n),(a.type===LC||a.type===MC)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=S1e(a.bounds)),a.type){case LC:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=_1e;break;case MC:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=E1e;break}return a}return t}(id),yX=function(e){xu(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return t}(id),bX=function(e){xu(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(id),wX=function(e){xu(t,e);function t(r,n){var a=e.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=CX(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?iy(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):Jd.TRANSPARENT,o=n.contentWindow.document.body?iy(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):Jd.TRANSPARENT;a.backgroundColor=Yh(s)?Yh(o)?a.styles.backgroundColor:o:s}}catch{}return a}return t}(id),j1e=["OL","UL","MENU"],FN=function(e,t,r,n){for(var a=t.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,_X(a)&&a.data.trim().length>0)r.textNodes.push(new b1e(e,a,r.styles));else if($p(a))if(BX(a)&&a.assignedNodes)a.assignedNodes().forEach(function(l){return FN(e,l,r,n)});else{var o=NX(e,a);o.styles.isVisible()&&(P1e(a,o,n)?o.flags|=4:k1e(o.styles)&&(o.flags|=2),j1e.indexOf(a.tagName)!==-1&&(o.flags|=8),r.elements.push(o),a.slot,a.shadowRoot?FN(e,a.shadowRoot,o,n):!UC(a)&&!EX(a)&&!QC(a)&&FN(e,a,o,n))}},NX=function(e,t){return ck(t)?new pX(e,t):SX(t)?new gX(e,t):EX(t)?new xX(e,t):T1e(t)?new vX(e,t):F1e(t)?new ok(e,t):O1e(t)?new zF(e,t):QC(t)?new yX(e,t):UC(t)?new bX(e,t):IX(t)?new wX(e,t):new id(e,t)},CX=function(e,t){var r=NX(e,t);return r.flags|=4,FN(e,t,r,r),r},P1e=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||WF(e)&&r.styles.isTransparent()},k1e=function(e){return e.isPositioned()||e.isFloating()},_X=function(e){return e.nodeType===Node.TEXT_NODE},$p=function(e){return e.nodeType===Node.ELEMENT_NODE},lk=function(e){return $p(e)&&typeof e.style<"u"&&!ON(e)},ON=function(e){return typeof e.className=="object"},T1e=function(e){return e.tagName==="LI"},F1e=function(e){return e.tagName==="OL"},O1e=function(e){return e.tagName==="INPUT"},D1e=function(e){return e.tagName==="HTML"},EX=function(e){return e.tagName==="svg"},WF=function(e){return e.tagName==="BODY"},SX=function(e){return e.tagName==="CANVAS"},yU=function(e){return e.tagName==="VIDEO"},ck=function(e){return e.tagName==="IMG"},IX=function(e){return e.tagName==="IFRAME"},bU=function(e){return e.tagName==="STYLE"},R1e=function(e){return e.tagName==="SCRIPT"},UC=function(e){return e.tagName==="TEXTAREA"},QC=function(e){return e.tagName==="SELECT"},BX=function(e){return e.tagName==="SLOT"},wU=function(e){return e.tagName.indexOf("-")>0},L1e=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},e.prototype.pop=function(t){var r=this;t.forEach(function(n){return r.counters[n].pop()})},e.prototype.parse=function(t){var r=this,n=t.counterIncrement,a=t.counterReset,s=!0;n!==null&&n.forEach(function(l){var c=r.counters[l.counter];c&&l.increment!==0&&(s=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=l.increment)});var o=[];return s&&a.forEach(function(l){var c=r.counters[l.counter];o.push(l.counter),c||(c=r.counters[l.counter]=[]),c.push(l.reset)}),o},e}(),NU={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},CU={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},M1e={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},U1e={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},np=function(e,t,r,n,a,s){return e<t||e>r?c1(e,a,s.length>0):n.integers.reduce(function(o,l,c){for(;e>=l;)e-=l,o+=n.values[c];return o},"")+s},jX=function(e,t,r,n){var a="";do r||e--,a=n(e)+a,e/=t;while(e*t>=t);return a},us=function(e,t,r,n,a){var s=r-t+1;return(e<0?"-":"")+(jX(Math.abs(e),s,n,function(o){return fs(Math.floor(o%s)+t)})+a)},Kf=function(e,t,r){r===void 0&&(r=". ");var n=t.length;return jX(Math.abs(e),n,!1,function(a){return t[Math.floor(a%n)]})+r},_p=1,dh=2,Ah=4,Dv=8,Nd=function(e,t,r,n,a,s){if(e<-9999||e>9999)return c1(e,4,a.length>0);var o=Math.abs(e),l=a;if(o===0)return t[0]+l;for(var c=0;o>0&&c<=4;c++){var u=o%10;u===0&&Vs(s,_p)&&l!==""?l=t[u]+l:u>1||u===1&&c===0||u===1&&c===1&&Vs(s,dh)||u===1&&c===1&&Vs(s,Ah)&&e>100||u===1&&c>1&&Vs(s,Dv)?l=t[u]+(c>0?r[c-1]:"")+l:u===1&&c>0&&(l=r[c-1]+l),o=Math.floor(o/10)}return(e<0?n:"")+l},_U="",EU="",SU="",GB="",c1=function(e,t,r){var n=r?". ":"",a=r?"":"",s=r?", ":"",o=r?" ":"";switch(t){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var l=us(e,48,57,!0,n);return l.length<4?"0"+l:l;case 4:return Kf(e,"",a);case 6:return np(e,1,3999,NU,3,n).toLowerCase();case 7:return np(e,1,3999,NU,3,n);case 8:return us(e,945,969,!1,n);case 9:return us(e,97,122,!1,n);case 10:return us(e,65,90,!1,n);case 11:return us(e,1632,1641,!0,n);case 12:case 49:return np(e,1,9999,CU,3,n);case 35:return np(e,1,9999,CU,3,n).toLowerCase();case 13:return us(e,2534,2543,!0,n);case 14:case 30:return us(e,6112,6121,!0,n);case 15:return Kf(e,"",a);case 16:return Kf(e,"",a);case 17:case 48:return Nd(e,"",_U,"",a,dh|Ah|Dv);case 47:return Nd(e,"",EU,"",a,_p|dh|Ah|Dv);case 42:return Nd(e,"",_U,"",a,dh|Ah|Dv);case 41:return Nd(e,"",EU,"",a,_p|dh|Ah|Dv);case 26:return Nd(e,"","",SU,a,0);case 25:return Nd(e,"","",SU,a,_p|dh|Ah);case 31:return Nd(e,"","",GB,s,_p|dh|Ah);case 33:return Nd(e,"","",GB,s,0);case 32:return Nd(e,"","",GB,s,_p|dh|Ah);case 18:return us(e,2406,2415,!0,n);case 20:return np(e,1,19999,U1e,3,n);case 21:return us(e,2790,2799,!0,n);case 22:return us(e,2662,2671,!0,n);case 22:return np(e,1,10999,M1e,3,n);case 23:return Kf(e,"");case 24:return Kf(e,"");case 27:return us(e,3302,3311,!0,n);case 28:return Kf(e,"",a);case 29:return Kf(e,"",a);case 34:return us(e,3792,3801,!0,n);case 37:return us(e,6160,6169,!0,n);case 38:return us(e,4160,4169,!0,n);case 39:return us(e,2918,2927,!0,n);case 40:return us(e,1776,1785,!0,n);case 43:return us(e,3046,3055,!0,n);case 44:return us(e,3174,3183,!0,n);case 45:return us(e,3664,3673,!0,n);case 46:return us(e,3872,3881,!0,n);case 3:default:return us(e,48,57,!0,n)}},PX="data-html2canvas-ignore",IU=function(){function e(t,r,n){if(this.context=t,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new L1e,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,r){var n=this,a=Q1e(t,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=t.defaultView.pageXOffset,o=t.defaultView.pageYOffset,l=a.contentWindow,c=l.document,u=$1e(a).then(function(){return No(n,void 0,void 0,function(){var d,A;return eo(this,function(f){switch(f.label){case 0:return this.scrolledElements.forEach(z1e),l&&(l.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==r.top||l.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-r.left,l.scrollY-r.top,0,0))),d=this.options.onclone,A=this.clonedReferenceElement,typeof A>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:f.sent(),f.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,H1e(c)]:[3,4];case 3:f.sent(),f.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,A)}).then(function(){return a})]:[2,a]}})})});return c.open(),c.write(q1e(document.doctype)+"<html></html>"),G1e(this.referenceElement.ownerDocument,s,o),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},e.prototype.createElementClone=function(t){if(sk(t,2))debugger;if(SX(t))return this.createCanvasClone(t);if(yU(t))return this.createVideoClone(t);if(bU(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return ck(r)&&(ck(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),wU(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return zB(t.style,r),r},e.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,o){return o&&typeof o.cssText=="string"?s+o.cssText:s},""),a=t.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var a=t.cloneNode(!1);try{a.width=t.width,a.height=t.height;var s=t.getContext("2d"),o=a.getContext("2d");if(o)if(!this.options.allowTaint&&s)o.putImageData(s.getImageData(0,0,t.width,t.height),0,0);else{var l=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(l){var c=l.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}o.drawImage(t,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return a},e.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var a=t.ownerDocument.createElement("canvas");return a.width=t.offsetWidth,a.height=t.offsetHeight,a},e.prototype.appendChildNode=function(t,r,n){(!$p(r)||!R1e(r)&&!r.hasAttribute(PX)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!$p(r)||!bU(r))&&t.appendChild(this.cloneNode(r,n))},e.prototype.cloneChildNodes=function(t,r,n){for(var a=this,s=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;s;s=s.nextSibling)if($p(s)&&BX(s)&&typeof s.assignedNodes=="function"){var o=s.assignedNodes();o.length&&o.forEach(function(l){return a.appendChildNode(r,l,n)})}else this.appendChildNode(r,s,n)},e.prototype.cloneNode=function(t,r){if(_X(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var n=t.ownerDocument.defaultView;if(n&&$p(t)&&(lk(t)||ON(t))){var a=this.createElementClone(t);a.style.transitionProperty="none";var s=n.getComputedStyle(t),o=n.getComputedStyle(t,":before"),l=n.getComputedStyle(t,":after");this.referenceElement===t&&lk(a)&&(this.clonedReferenceElement=a),WF(a)&&J1e(a);var c=this.counters.parse(new sU(this.context,s)),u=this.resolvePseudoContent(t,a,o,cy.BEFORE);wU(t)&&(r=!0),yU(t)||this.cloneChildNodes(t,a,r),u&&a.insertBefore(u,a.firstChild);var d=this.resolvePseudoContent(t,a,l,cy.AFTER);return d&&a.appendChild(d),this.counters.pop(c),(s&&(this.options.copyStyles||ON(t))&&!IX(t)||r)&&zB(s,a),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([a,t.scrollLeft,t.scrollTop]),(UC(t)||QC(t))&&(UC(a)||QC(a))&&(a.value=t.value),a}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,r,n,a){var s=this;if(n){var o=n.content,l=r.ownerDocument;if(!(!l||!o||o==="none"||o==="-moz-alt-content"||n.display==="none")){this.counters.parse(new sU(this.context,n));var c=new Tye(this.context,n),u=l.createElement("html2canvaspseudoelement");zB(n,u),c.content.forEach(function(A){if(A.type===0)u.appendChild(l.createTextNode(A.value));else if(A.type===22){var f=l.createElement("img");f.src=A.value,f.style.opacity="1",u.appendChild(f)}else if(A.type===18){if(A.name==="attr"){var h=A.values.filter($n);h.length&&u.appendChild(l.createTextNode(t.getAttribute(h[0].value)||""))}else if(A.name==="counter"){var m=A.values.filter(Ig),p=m[0],g=m[1];if(p&&$n(p)){var x=s.counters.getCounterValue(p.value),y=g&&$n(g)?ak.parse(s.context,g.value):3;u.appendChild(l.createTextNode(c1(x,y,!1)))}}else if(A.name==="counters"){var b=A.values.filter(Ig),p=b[0],_=b[1],g=b[2];if(p&&$n(p)){var T=s.counters.getCounterValues(p.value),P=g&&$n(g)?ak.parse(s.context,g.value):3,C=_&&_.type===0?_.value:"",S=T.map(function(E){return c1(E,P,!1)}).join(C);u.appendChild(l.createTextNode(S))}}}else if(A.type===20)switch(A.value){case"open-quote":u.appendChild(l.createTextNode(aU(c.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(l.createTextNode(aU(c.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(l.createTextNode(A.value))}}),u.className=uk+" "+dk;var d=a===cy.BEFORE?" "+uk:" "+dk;return ON(r)?r.className.baseValue+=d:r.className+=d,u}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),cy;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(cy||(cy={}));var Q1e=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(PX,"true"),e.body.appendChild(r),r},V1e=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},H1e=function(e){return Promise.all([].slice.call(e.images,0).map(V1e))},$1e=function(e){return new Promise(function(t,r){var n=e.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=e.onload=function(){n.onload=e.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),t(e))},50)}})},K1e=["all","d","content"],zB=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e.item(r);K1e.indexOf(n)===-1&&t.style.setProperty(n,e.getPropertyValue(n))}return t},q1e=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},G1e=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},z1e=function(e){var t=e[0],r=e[1],n=e[2];t.scrollLeft=r,t.scrollTop=n},W1e=":before",X1e=":after",uk="___html2canvas___pseudoelement_before",dk="___html2canvas___pseudoelement_after",BU=`{
    content: "" !important;
    display: none !important;
}`,J1e=function(e){Y1e(e,"."+uk+W1e+BU+`
         .`+dk+X1e+BU)},Y1e=function(e,t){var r=e.ownerDocument;if(r){var n=r.createElement("style");n.textContent=t,e.appendChild(n)}},kX=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),Z1e=function(){function e(t,r){this.context=t,this._options=r,this._cache={}}return e.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(XB(t)||nbe(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return No(this,void 0,void 0,function(){var r,n,a,s,o=this;return eo(this,function(l){switch(l.label){case 0:return r=kX.isSameOrigin(t),n=!WB(t)&&this._options.useCORS===!0&&Bi.SUPPORT_CORS_IMAGES&&!r,a=!WB(t)&&!r&&!XB(t)&&typeof this._options.proxy=="string"&&Bi.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!WB(t)&&!XB(t)&&!a&&!n?[2]:(s=t,a?[4,this.proxy(s)]:[3,2]);case 1:s=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(c,u){var d=new Image;d.onload=function(){return c(d)},d.onerror=u,(abe(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return c(d)},500),o._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=t.substring(0,256);return new Promise(function(s,o){var l=Bi.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(l==="text")s(c.response);else{var A=new FileReader;A.addEventListener("load",function(){return s(A.result)},!1),A.addEventListener("error",function(f){return o(f)},!1),A.readAsDataURL(c.response)}else o("Failed to proxy resource "+a+" with status code "+c.status)},c.onerror=o;var u=n.indexOf("?")>-1?"&":"?";if(c.open("GET",""+n+u+"url="+encodeURIComponent(t)+"&responseType="+l),l!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=l),r._options.imageTimeout){var d=r._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return o("Timed out ("+d+"ms) proxying "+a)}}c.send()})},e}(),ebe=/^data:image\/svg\+xml/i,tbe=/^data:image\/.*;base64,/i,rbe=/^data:image\/.*/i,nbe=function(e){return Bi.SUPPORT_SVG_DRAWING||!sbe(e)},WB=function(e){return rbe.test(e)},abe=function(e){return tbe.test(e)},XB=function(e){return e.substr(0,4)==="blob"},sbe=function(e){return e.substr(-3).toLowerCase()==="svg"||ebe.test(e)},lr=function(){function e(t,r){this.type=0,this.x=t,this.y=r}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),ap=function(e,t,r){return new lr(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},n2=function(){function e(t,r,n,a){this.type=1,this.start=t,this.startControl=r,this.endControl=n,this.end=a}return e.prototype.subdivide=function(t,r){var n=ap(this.start,this.startControl,t),a=ap(this.startControl,this.endControl,t),s=ap(this.endControl,this.end,t),o=ap(n,a,t),l=ap(a,s,t),c=ap(o,l,t);return r?new e(this.start,n,o,c):new e(c,l,s,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),mc=function(e){return e.type===1},ibe=function(){function e(t){var r=t.styles,n=t.bounds,a=Fv(r.borderTopLeftRadius,n.width,n.height),s=a[0],o=a[1],l=Fv(r.borderTopRightRadius,n.width,n.height),c=l[0],u=l[1],d=Fv(r.borderBottomRightRadius,n.width,n.height),A=d[0],f=d[1],h=Fv(r.borderBottomLeftRadius,n.width,n.height),m=h[0],p=h[1],g=[];g.push((s+c)/n.width),g.push((m+A)/n.width),g.push((o+p)/n.height),g.push((u+f)/n.height);var x=Math.max.apply(Math,g);x>1&&(s/=x,o/=x,c/=x,u/=x,A/=x,f/=x,m/=x,p/=x);var y=n.width-c,b=n.height-f,_=n.width-A,T=n.height-p,P=r.borderTopWidth,C=r.borderRightWidth,S=r.borderBottomWidth,I=r.borderLeftWidth,L=oa(r.paddingTop,t.bounds.width),E=oa(r.paddingRight,t.bounds.width),j=oa(r.paddingBottom,t.bounds.width),R=oa(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||o>0?ba(n.left+I/3,n.top+P/3,s-I/3,o-P/3,In.TOP_LEFT):new lr(n.left+I/3,n.top+P/3),this.topRightBorderDoubleOuterBox=s>0||o>0?ba(n.left+y,n.top+P/3,c-C/3,u-P/3,In.TOP_RIGHT):new lr(n.left+n.width-C/3,n.top+P/3),this.bottomRightBorderDoubleOuterBox=A>0||f>0?ba(n.left+_,n.top+b,A-C/3,f-S/3,In.BOTTOM_RIGHT):new lr(n.left+n.width-C/3,n.top+n.height-S/3),this.bottomLeftBorderDoubleOuterBox=m>0||p>0?ba(n.left+I/3,n.top+T,m-I/3,p-S/3,In.BOTTOM_LEFT):new lr(n.left+I/3,n.top+n.height-S/3),this.topLeftBorderDoubleInnerBox=s>0||o>0?ba(n.left+I*2/3,n.top+P*2/3,s-I*2/3,o-P*2/3,In.TOP_LEFT):new lr(n.left+I*2/3,n.top+P*2/3),this.topRightBorderDoubleInnerBox=s>0||o>0?ba(n.left+y,n.top+P*2/3,c-C*2/3,u-P*2/3,In.TOP_RIGHT):new lr(n.left+n.width-C*2/3,n.top+P*2/3),this.bottomRightBorderDoubleInnerBox=A>0||f>0?ba(n.left+_,n.top+b,A-C*2/3,f-S*2/3,In.BOTTOM_RIGHT):new lr(n.left+n.width-C*2/3,n.top+n.height-S*2/3),this.bottomLeftBorderDoubleInnerBox=m>0||p>0?ba(n.left+I*2/3,n.top+T,m-I*2/3,p-S*2/3,In.BOTTOM_LEFT):new lr(n.left+I*2/3,n.top+n.height-S*2/3),this.topLeftBorderStroke=s>0||o>0?ba(n.left+I/2,n.top+P/2,s-I/2,o-P/2,In.TOP_LEFT):new lr(n.left+I/2,n.top+P/2),this.topRightBorderStroke=s>0||o>0?ba(n.left+y,n.top+P/2,c-C/2,u-P/2,In.TOP_RIGHT):new lr(n.left+n.width-C/2,n.top+P/2),this.bottomRightBorderStroke=A>0||f>0?ba(n.left+_,n.top+b,A-C/2,f-S/2,In.BOTTOM_RIGHT):new lr(n.left+n.width-C/2,n.top+n.height-S/2),this.bottomLeftBorderStroke=m>0||p>0?ba(n.left+I/2,n.top+T,m-I/2,p-S/2,In.BOTTOM_LEFT):new lr(n.left+I/2,n.top+n.height-S/2),this.topLeftBorderBox=s>0||o>0?ba(n.left,n.top,s,o,In.TOP_LEFT):new lr(n.left,n.top),this.topRightBorderBox=c>0||u>0?ba(n.left+y,n.top,c,u,In.TOP_RIGHT):new lr(n.left+n.width,n.top),this.bottomRightBorderBox=A>0||f>0?ba(n.left+_,n.top+b,A,f,In.BOTTOM_RIGHT):new lr(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=m>0||p>0?ba(n.left,n.top+T,m,p,In.BOTTOM_LEFT):new lr(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||o>0?ba(n.left+I,n.top+P,Math.max(0,s-I),Math.max(0,o-P),In.TOP_LEFT):new lr(n.left+I,n.top+P),this.topRightPaddingBox=c>0||u>0?ba(n.left+Math.min(y,n.width-C),n.top+P,y>n.width+C?0:Math.max(0,c-C),Math.max(0,u-P),In.TOP_RIGHT):new lr(n.left+n.width-C,n.top+P),this.bottomRightPaddingBox=A>0||f>0?ba(n.left+Math.min(_,n.width-I),n.top+Math.min(b,n.height-S),Math.max(0,A-C),Math.max(0,f-S),In.BOTTOM_RIGHT):new lr(n.left+n.width-C,n.top+n.height-S),this.bottomLeftPaddingBox=m>0||p>0?ba(n.left+I,n.top+Math.min(T,n.height-S),Math.max(0,m-I),Math.max(0,p-S),In.BOTTOM_LEFT):new lr(n.left+I,n.top+n.height-S),this.topLeftContentBox=s>0||o>0?ba(n.left+I+R,n.top+P+L,Math.max(0,s-(I+R)),Math.max(0,o-(P+L)),In.TOP_LEFT):new lr(n.left+I+R,n.top+P+L),this.topRightContentBox=c>0||u>0?ba(n.left+Math.min(y,n.width+I+R),n.top+P+L,y>n.width+I+R?0:c-I+R,u-(P+L),In.TOP_RIGHT):new lr(n.left+n.width-(C+E),n.top+P+L),this.bottomRightContentBox=A>0||f>0?ba(n.left+Math.min(_,n.width-(I+R)),n.top+Math.min(b,n.height+P+L),Math.max(0,A-(C+E)),f-(S+j),In.BOTTOM_RIGHT):new lr(n.left+n.width-(C+E),n.top+n.height-(S+j)),this.bottomLeftContentBox=m>0||p>0?ba(n.left+I+R,n.top+T,Math.max(0,m-(I+R)),p-(S+j),In.BOTTOM_LEFT):new lr(n.left+I+R,n.top+n.height-(S+j))}return e}(),In;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(In||(In={}));var ba=function(e,t,r,n,a){var s=4*((Math.sqrt(2)-1)/3),o=r*s,l=n*s,c=e+r,u=t+n;switch(a){case In.TOP_LEFT:return new n2(new lr(e,u),new lr(e,u-l),new lr(c-o,t),new lr(c,t));case In.TOP_RIGHT:return new n2(new lr(e,t),new lr(e+o,t),new lr(c,u-l),new lr(c,u));case In.BOTTOM_RIGHT:return new n2(new lr(c,t),new lr(c,t+l),new lr(e+o,u),new lr(e,u));case In.BOTTOM_LEFT:default:return new n2(new lr(c,u),new lr(c-o,u),new lr(e,t+l),new lr(e,t))}},VC=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},obe=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},HC=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},lbe=function(){function e(t,r,n){this.offsetX=t,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return e}(),a2=function(){function e(t,r){this.path=t,this.target=r,this.type=1}return e}(),cbe=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),ube=function(e){return e.type===0},TX=function(e){return e.type===1},dbe=function(e){return e.type===2},jU=function(e,t){return e.length===t.length?e.some(function(r,n){return r===t[n]}):!1},Abe=function(e,t,r,n,a){return e.map(function(s,o){switch(o){case 0:return s.add(t,r);case 1:return s.add(t+n,r);case 2:return s.add(t+n,r+a);case 3:return s.add(t,r+a)}return s})},FX=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),OX=function(){function e(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new ibe(this.container),this.container.styles.opacity<1&&this.effects.push(new cbe(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new lbe(n,a,s))}if(this.container.styles.overflowX!==0){var o=VC(this.curves),l=HC(this.curves);jU(o,l)?this.effects.push(new a2(o,6)):(this.effects.push(new a2(o,2)),this.effects.push(new a2(l,4)))}}return e.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(c){return!TX(c)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var o=VC(n.curves),l=HC(n.curves);jU(o,l)||a.unshift(new a2(l,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(c){return Vs(c.target,t)})},e}(),Ak=function(e,t,r,n){e.container.elements.forEach(function(a){var s=Vs(a.flags,4),o=Vs(a.flags,2),l=new OX(a,e);Vs(a.styles.display,2048)&&n.push(l);var c=Vs(a.flags,8)?[]:n;if(s||o){var u=s||a.styles.isPositioned()?r:t,d=new FX(l);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var A=a.styles.zIndex.order;if(A<0){var f=0;u.negativeZIndex.some(function(m,p){return A>m.element.container.styles.zIndex.order?(f=p,!1):f>0}),u.negativeZIndex.splice(f,0,d)}else if(A>0){var h=0;u.positiveZIndex.some(function(m,p){return A>=m.element.container.styles.zIndex.order?(h=p+1,!1):h>0}),u.positiveZIndex.splice(h,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);Ak(l,d,s?d:r,c)}else a.styles.isInlineLevel()?t.inlineLevel.push(l):t.nonInlineLevel.push(l),Ak(l,t,r,c);Vs(a.flags,8)&&DX(a,c)})},DX=function(e,t){for(var r=e instanceof ok?e.start:1,n=e instanceof ok?e.reversed:!1,a=0;a<t.length;a++){var s=t[a];s.container instanceof vX&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=c1(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},hbe=function(e){var t=new OX(e,null),r=new FX(t),n=[];return Ak(t,r,r,n),DX(t.container,n),r},PU=function(e,t){switch(t){case 0:return vc(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return vc(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return vc(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return vc(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},fbe=function(e,t){switch(t){case 0:return vc(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return vc(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return vc(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return vc(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},mbe=function(e,t){switch(t){case 0:return vc(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return vc(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return vc(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return vc(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},pbe=function(e,t){switch(t){case 0:return s2(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return s2(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return s2(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return s2(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},s2=function(e,t){var r=[];return mc(e)?r.push(e.subdivide(.5,!1)):r.push(e),mc(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},vc=function(e,t,r,n){var a=[];return mc(e)?a.push(e.subdivide(.5,!1)):a.push(e),mc(r)?a.push(r.subdivide(.5,!0)):a.push(r),mc(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),mc(t)?a.push(t.subdivide(.5,!1).reverse()):a.push(t),a},RX=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},$C=function(e){var t=e.styles,r=e.bounds,n=oa(t.paddingLeft,r.width),a=oa(t.paddingRight,r.width),s=oa(t.paddingTop,r.width),o=oa(t.paddingBottom,r.width);return r.add(n+t.borderLeftWidth,s+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+n+a),-(t.borderTopWidth+t.borderBottomWidth+s+o))},gbe=function(e,t){return e===0?t.bounds:e===2?$C(t):RX(t)},xbe=function(e,t){return e===0?t.bounds:e===2?$C(t):RX(t)},JB=function(e,t,r){var n=gbe(Ep(e.styles.backgroundOrigin,t),e),a=xbe(Ep(e.styles.backgroundClip,t),e),s=vbe(Ep(e.styles.backgroundSize,t),r,n),o=s[0],l=s[1],c=Fv(Ep(e.styles.backgroundPosition,t),n.width-o,n.height-l),u=ybe(Ep(e.styles.backgroundRepeat,t),c,s,n,a),d=Math.round(n.left+c[0]),A=Math.round(n.top+c[1]);return[u,d,A,o,l]},sp=function(e){return $n(e)&&e.value===ag.AUTO},i2=function(e){return typeof e=="number"},vbe=function(e,t,r){var n=t[0],a=t[1],s=t[2],o=e[0],l=e[1];if(!o)return[0,0];if(Ss(o)&&l&&Ss(l))return[oa(o,r.width),oa(l,r.height)];var c=i2(s);if($n(o)&&(o.value===ag.CONTAIN||o.value===ag.COVER)){if(i2(s)){var u=r.width/r.height;return u<s!=(o.value===ag.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=i2(n),A=i2(a),f=d||A;if(sp(o)&&(!l||sp(l))){if(d&&A)return[n,a];if(!c&&!f)return[r.width,r.height];if(f&&c){var h=d?n:a*s,m=A?a:n/s;return[h,m]}var p=d?n:r.width,g=A?a:r.height;return[p,g]}if(c){var x=0,y=0;return Ss(o)?x=oa(o,r.width):Ss(l)&&(y=oa(l,r.height)),sp(o)?x=y*s:(!l||sp(l))&&(y=x/s),[x,y]}var b=null,_=null;if(Ss(o)?b=oa(o,r.width):l&&Ss(l)&&(_=oa(l,r.height)),b!==null&&(!l||sp(l))&&(_=d&&A?b/n*a:r.height),_!==null&&sp(o)&&(b=d&&A?_/a*n:r.width),b!==null&&_!==null)return[b,_];throw new Error("Unable to calculate background-size for element")},Ep=function(e,t){var r=e[t];return typeof r>"u"?e[0]:r},ybe=function(e,t,r,n,a){var s=t[0],o=t[1],l=r[0],c=r[1];switch(e){case 2:return[new lr(Math.round(n.left),Math.round(n.top+o)),new lr(Math.round(n.left+n.width),Math.round(n.top+o)),new lr(Math.round(n.left+n.width),Math.round(c+n.top+o)),new lr(Math.round(n.left),Math.round(c+n.top+o))];case 3:return[new lr(Math.round(n.left+s),Math.round(n.top)),new lr(Math.round(n.left+s+l),Math.round(n.top)),new lr(Math.round(n.left+s+l),Math.round(n.height+n.top)),new lr(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new lr(Math.round(n.left+s),Math.round(n.top+o)),new lr(Math.round(n.left+s+l),Math.round(n.top+o)),new lr(Math.round(n.left+s+l),Math.round(n.top+o+c)),new lr(Math.round(n.left+s),Math.round(n.top+o+c))];default:return[new lr(Math.round(a.left),Math.round(a.top)),new lr(Math.round(a.left+a.width),Math.round(a.top)),new lr(Math.round(a.left+a.width),Math.round(a.height+a.top)),new lr(Math.round(a.left),Math.round(a.height+a.top))]}},bbe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",kU="Hidden Text",wbe=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),o=this._document.body;n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",o.appendChild(n),a.src=bbe,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(kU)),n.appendChild(s),n.appendChild(a);var l=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(kU)),n.style.lineHeight="normal",a.style.verticalAlign="super";var c=a.offsetTop-n.offsetTop+2;return o.removeChild(n),{baseline:l,middle:c}},e.prototype.getMetrics=function(t,r){var n=t+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(t,r)),this._data[n]},e}(),LX=function(){function e(t,r){this.context=t,this.options=r}return e}(),Nbe=1e4,Cbe=function(e){xu(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new wbe(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return t.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},t.prototype.applyEffect=function(r){this.ctx.save(),dbe(r)&&(this.ctx.globalAlpha=r.opacity),ube(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),TX(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return No(this,void 0,void 0,function(){var n;return eo(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return No(this,void 0,void 0,function(){return eo(this,function(n){switch(n.label){case 0:if(Vs(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var o=GF(r.text);o.reduce(function(l,c){return s.ctx.fillText(c,l,r.bounds.top+a),l+s.ctx.measureText(c).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),a=Bbe(r.fontFamily).join(", "),s=mb(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},t.prototype.renderTextNode=function(r,n){return No(this,void 0,void 0,function(){var a,s,o,l,c,u,d,A,f=this;return eo(this,function(h){return a=this.createFontStyle(n),s=a[0],o=a[1],l=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(o,l),u=c.baseline,d=c.middle,A=n.paintOrder,r.textBounds.forEach(function(m){A.forEach(function(p){switch(p){case 0:f.ctx.fillStyle=ri(n.color),f.renderTextWithLetterSpacing(m,n.letterSpacing,u);var g=n.textShadow;g.length&&m.text.trim().length&&(g.slice(0).reverse().forEach(function(x){f.ctx.shadowColor=ri(x.color),f.ctx.shadowOffsetX=x.offsetX.number*f.options.scale,f.ctx.shadowOffsetY=x.offsetY.number*f.options.scale,f.ctx.shadowBlur=x.blur.number,f.renderTextWithLetterSpacing(m,n.letterSpacing,u)}),f.ctx.shadowColor="",f.ctx.shadowOffsetX=0,f.ctx.shadowOffsetY=0,f.ctx.shadowBlur=0),n.textDecorationLine.length&&(f.ctx.fillStyle=ri(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(x){switch(x){case 1:f.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top+u),m.bounds.width,1);break;case 2:f.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top),m.bounds.width,1);break;case 3:f.ctx.fillRect(m.bounds.left,Math.ceil(m.bounds.top+d),m.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&m.text.trim().length&&(f.ctx.strokeStyle=ri(n.webkitTextStrokeColor),f.ctx.lineWidth=n.webkitTextStrokeWidth,f.ctx.lineJoin=window.chrome?"miter":"round",f.ctx.strokeText(m.text,m.bounds.left,m.bounds.top+u)),f.ctx.strokeStyle="",f.ctx.lineWidth=0,f.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=$C(r),o=HC(n);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return No(this,void 0,void 0,function(){var n,a,s,o,l,c,y,y,u,d,A,f,_,h,m,T,p,g,x,y,b,_,T;return eo(this,function(P){switch(P.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,o=0,l=n.textNodes,P.label=1;case 1:return o<l.length?(c=l[o],[4,this.renderTextNode(c,s)]):[3,4];case 2:P.sent(),P.label=3;case 3:return o++,[3,1];case 4:if(!(n instanceof pX))return[3,8];P.label=5;case 5:return P.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return y=P.sent(),this.renderReplacedElement(n,a,y),[3,8];case 7:return P.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof gX&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof xX))return[3,12];P.label=9;case 9:return P.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return y=P.sent(),this.renderReplacedElement(n,a,y),[3,12];case 11:return P.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof wX&&n.tree?(u=new t(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=P.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),P.label=14;case 14:if(n instanceof zF&&(A=Math.min(n.bounds.width,n.bounds.height),n.type===LC?n.checked&&(this.ctx.save(),this.path([new lr(n.bounds.left+A*.39363,n.bounds.top+A*.79),new lr(n.bounds.left+A*.16,n.bounds.top+A*.5549),new lr(n.bounds.left+A*.27347,n.bounds.top+A*.44071),new lr(n.bounds.left+A*.39694,n.bounds.top+A*.5649),new lr(n.bounds.left+A*.72983,n.bounds.top+A*.23),new lr(n.bounds.left+A*.84,n.bounds.top+A*.34085),new lr(n.bounds.left+A*.39363,n.bounds.top+A*.79)]),this.ctx.fillStyle=ri(vU),this.ctx.fill(),this.ctx.restore()):n.type===MC&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+A/2,n.bounds.top+A/2,A/4,0,Math.PI*2,!0),this.ctx.fillStyle=ri(vU),this.ctx.fill(),this.ctx.restore())),_be(n)&&n.value.length){switch(f=this.createFontStyle(s),_=f[0],h=f[1],m=this.fontMetrics.getMetrics(_,h).baseline,this.ctx.font=_,this.ctx.fillStyle=ri(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Sbe(n.styles.textAlign),T=$C(n),p=0,n.styles.textAlign){case 1:p+=T.width/2;break;case 2:p+=T.width;break}g=T.add(p,0,0,-T.height/2+1),this.ctx.save(),this.path([new lr(T.left,T.top),new lr(T.left+T.width,T.top),new lr(T.left+T.width,T.top+T.height),new lr(T.left,T.top+T.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new ly(n.value,g),s.letterSpacing,m),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Vs(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(x=n.styles.listStyleImage,x.type!==0)return[3,18];y=void 0,b=x.url,P.label=15;case 15:return P.trys.push([15,17,,18]),[4,this.context.cache.match(b)];case 16:return y=P.sent(),this.ctx.drawImage(y,n.bounds.left-(y.width+10),n.bounds.top),[3,18];case 17:return P.sent(),this.context.logger.error("Error loading list-style-image "+b),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(_=this.createFontStyle(s)[0],this.ctx.font=_,this.ctx.fillStyle=ri(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",T=new dA(n.bounds.left,n.bounds.top+oa(n.styles.paddingTop,n.bounds.width),n.bounds.width,rU(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new ly(r.listValue,T),s.letterSpacing,rU(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),P.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return No(this,void 0,void 0,function(){var n,a,x,s,o,x,l,c,x,u,d,x,A,f,x,h,m,x,p,g,x;return eo(this,function(y){switch(y.label){case 0:if(Vs(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:y.sent(),n=0,a=r.negativeZIndex,y.label=2;case 2:return n<a.length?(x=a[n],[4,this.renderStack(x)]):[3,5];case 3:y.sent(),y.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:y.sent(),s=0,o=r.nonInlineLevel,y.label=7;case 7:return s<o.length?(x=o[s],[4,this.renderNode(x)]):[3,10];case 8:y.sent(),y.label=9;case 9:return s++,[3,7];case 10:l=0,c=r.nonPositionedFloats,y.label=11;case 11:return l<c.length?(x=c[l],[4,this.renderStack(x)]):[3,14];case 12:y.sent(),y.label=13;case 13:return l++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,y.label=15;case 15:return u<d.length?(x=d[u],[4,this.renderStack(x)]):[3,18];case 16:y.sent(),y.label=17;case 17:return u++,[3,15];case 18:A=0,f=r.inlineLevel,y.label=19;case 19:return A<f.length?(x=f[A],[4,this.renderNode(x)]):[3,22];case 20:y.sent(),y.label=21;case 21:return A++,[3,19];case 22:h=0,m=r.zeroOrAutoZIndexOrTransformedOrOpacity,y.label=23;case 23:return h<m.length?(x=m[h],[4,this.renderStack(x)]):[3,26];case 24:y.sent(),y.label=25;case 25:return h++,[3,23];case 26:p=0,g=r.positiveZIndex,y.label=27;case 27:return p<g.length?(x=g[p],[4,this.renderStack(x)]):[3,30];case 28:y.sent(),y.label=29;case 29:return p++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var o=mc(a)?a.start:a;s===0?n.ctx.moveTo(o.x,o.y):n.ctx.lineTo(o.x,o.y),mc(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},t.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},t.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var o=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,l=o.createElement("canvas");l.width=Math.max(1,n),l.height=Math.max(1,a);var c=l.getContext("2d");return c.drawImage(r,0,0,r.width,r.height,0,0,n,a),l},t.prototype.renderBackgroundImage=function(r){return No(this,void 0,void 0,function(){var n,a,s,o,l,c;return eo(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var A,f,h,L,te,le,R,W,S,m,L,te,le,R,W,p,g,x,y,b,_,T,P,C,S,I,L,E,j,R,W,de,te,le,ce,J,me,Ee,k,F,V,D;return eo(this,function(M){switch(M.label){case 0:if(d.type!==0)return[3,5];A=void 0,f=d.url,M.label=1;case 1:return M.trys.push([1,3,,4]),[4,s.context.cache.match(f)];case 2:return A=M.sent(),[3,4];case 3:return M.sent(),s.context.logger.error("Error loading background-image "+f),[3,4];case 4:return A&&(h=JB(r,n,[A.width,A.height,A.width/A.height]),L=h[0],te=h[1],le=h[2],R=h[3],W=h[4],S=s.ctx.createPattern(s.resizeImage(A,R,W),"repeat"),s.renderRepeat(L,S,te,le)),[3,6];case 5:uve(d)?(m=JB(r,n,[null,null,null]),L=m[0],te=m[1],le=m[2],R=m[3],W=m[4],p=sve(d.angle,R,W),g=p[0],x=p[1],y=p[2],b=p[3],_=p[4],T=document.createElement("canvas"),T.width=R,T.height=W,P=T.getContext("2d"),C=P.createLinearGradient(x,b,y,_),eU(d.stops,g).forEach(function(G){return C.addColorStop(G.stop,ri(G.color))}),P.fillStyle=C,P.fillRect(0,0,R,W),R>0&&W>0&&(S=s.ctx.createPattern(T,"repeat"),s.renderRepeat(L,S,te,le))):dve(d)&&(I=JB(r,n,[null,null,null]),L=I[0],E=I[1],j=I[2],R=I[3],W=I[4],de=d.position.length===0?[$F]:d.position,te=oa(de[0],R),le=oa(de[de.length-1],W),ce=ive(d,te,le,R,W),J=ce[0],me=ce[1],J>0&&me>0&&(Ee=s.ctx.createRadialGradient(E+te,j+le,0,E+te,j+le,J),eU(d.stops,J*2).forEach(function(G){return Ee.addColorStop(G.stop,ri(G.color))}),s.path(L),s.ctx.fillStyle=Ee,J!==me?(k=r.bounds.left+.5*r.bounds.width,F=r.bounds.top+.5*r.bounds.height,V=me/J,D=1/V,s.ctx.save(),s.ctx.translate(k,F),s.ctx.transform(1,0,0,V,0,0),s.ctx.translate(-k,-F),s.ctx.fillRect(E,D*(j-F)+F,R,W*D),s.ctx.restore()):s.ctx.fill())),M.label=6;case 6:return n--,[2]}})},s=this,o=0,l=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return o<l.length?(c=l[o],[5,a(c)]):[3,4];case 2:u.sent(),u.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,n,a){return No(this,void 0,void 0,function(){return eo(this,function(s){return this.path(PU(a,n)),this.ctx.fillStyle=ri(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,n,a,s){return No(this,void 0,void 0,function(){var o,l;return eo(this,function(c){switch(c.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return c.sent(),[2];case 2:return o=fbe(s,a),this.path(o),this.ctx.fillStyle=ri(r),this.ctx.fill(),l=mbe(s,a),this.path(l),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return No(this,void 0,void 0,function(){var n,a,s,o,l,c,u,d,A=this;return eo(this,function(f){switch(f.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!Yh(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],o=Ebe(Ep(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),Yh(n.backgroundColor)||(this.ctx.fillStyle=ri(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:f.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(h){A.ctx.save();var m=VC(r.curves),p=h.inset?0:Nbe,g=Abe(m,-p+(h.inset?1:-1)*h.spread.number,(h.inset?1:-1)*h.spread.number,h.spread.number*(h.inset?-2:2),h.spread.number*(h.inset?-2:2));h.inset?(A.path(m),A.ctx.clip(),A.mask(g)):(A.mask(m),A.ctx.clip(),A.path(g)),A.ctx.shadowOffsetX=h.offsetX.number+p,A.ctx.shadowOffsetY=h.offsetY.number,A.ctx.shadowColor=ri(h.color),A.ctx.shadowBlur=h.blur.number,A.ctx.fillStyle=h.inset?ri(h.color):"rgba(0,0,0,1)",A.ctx.fill(),A.ctx.restore()}),f.label=2;case 2:l=0,c=0,u=s,f.label=3;case 3:return c<u.length?(d=u[c],d.style!==0&&!Yh(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,2)]:[3,11]):[3,13];case 4:return f.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,3)];case 6:return f.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,l,r.curves)];case 8:return f.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,l,r.curves)];case 10:f.sent(),f.label=11;case 11:l++,f.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,n,a,s,o){return No(this,void 0,void 0,function(){var l,c,u,d,A,f,h,m,p,g,x,y,b,_,T,P,T,P;return eo(this,function(C){return this.ctx.save(),l=pbe(s,a),c=PU(s,a),o===2&&(this.path(c),this.ctx.clip()),mc(c[0])?(u=c[0].start.x,d=c[0].start.y):(u=c[0].x,d=c[0].y),mc(c[1])?(A=c[1].end.x,f=c[1].end.y):(A=c[1].x,f=c[1].y),a===0||a===2?h=Math.abs(u-A):h=Math.abs(d-f),this.ctx.beginPath(),o===3?this.formatPath(l):this.formatPath(c.slice(0,2)),m=n<3?n*3:n*2,p=n<3?n*2:n,o===3&&(m=n,p=n),g=!0,h<=m*2?g=!1:h<=m*2+p?(x=h/(2*m+p),m*=x,p*=x):(y=Math.floor((h+p)/(m+p)),b=(h-y*m)/(y-1),_=(h-(y+1)*m)/y,p=_<=0||Math.abs(p-b)<Math.abs(p-_)?b:_),g&&(o===3?this.ctx.setLineDash([0,m+p]):this.ctx.setLineDash([m,p])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=ri(r),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(mc(c[0])&&(T=c[3],P=c[0],this.ctx.beginPath(),this.formatPath([new lr(T.end.x,T.end.y),new lr(P.start.x,P.start.y)]),this.ctx.stroke()),mc(c[1])&&(T=c[1],P=c[2],this.ctx.beginPath(),this.formatPath([new lr(T.end.x,T.end.y),new lr(P.start.x,P.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return No(this,void 0,void 0,function(){var n;return eo(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=ri(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=hbe(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(LX),_be=function(e){return e instanceof bX||e instanceof yX?!0:e instanceof zF&&e.type!==MC&&e.type!==LC},Ebe=function(e,t){switch(e){case 0:return VC(t);case 2:return obe(t);case 1:default:return HC(t)}},Sbe=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},Ibe=["-apple-system","system-ui"],Bbe=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return Ibe.indexOf(t)===-1}):e},jbe=function(e){xu(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return t.prototype.render=function(r){return No(this,void 0,void 0,function(){var n,a;return eo(this,function(s){switch(s.label){case 0:return n=ik(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,Pbe(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=ri(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(LX),Pbe=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},kbe=function(){function e(t){var r=t.id,n=t.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Lw([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Lw([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Lw([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Lw([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),Tbe=function(){function e(t,r){var n;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new kbe({id:this.instanceName,enabled:t.logging}),this.cache=(n=t.cache)!==null&&n!==void 0?n:new Z1e(this,t)}return e.instanceCount=1,e}(),If=function(e,t){return t===void 0&&(t={}),Fbe(e,t)};typeof window<"u"&&kX.setContext(window);var Fbe=function(e,t){return No(void 0,void 0,void 0,function(){var r,n,a,s,o,l,c,u,d,A,f,h,m,p,g,x,y,b,_,T,C,P,C,S,I,L,E,j,R,W,de,te,le,ce,J,me,Ee,k,F,V;return eo(this,function(D){switch(D.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(S=t.allowTaint)!==null&&S!==void 0?S:!1,imageTimeout:(I=t.imageTimeout)!==null&&I!==void 0?I:15e3,proxy:t.proxy,useCORS:(L=t.useCORS)!==null&&L!==void 0?L:!1},s=KP({logging:(E=t.logging)!==null&&E!==void 0?E:!0,cache:t.cache},a),o={windowWidth:(j=t.windowWidth)!==null&&j!==void 0?j:n.innerWidth,windowHeight:(R=t.windowHeight)!==null&&R!==void 0?R:n.innerHeight,scrollX:(W=t.scrollX)!==null&&W!==void 0?W:n.pageXOffset,scrollY:(de=t.scrollY)!==null&&de!==void 0?de:n.pageYOffset},l=new dA(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),c=new Tbe(s,l),u=(te=t.foreignObjectRendering)!==null&&te!==void 0?te:!1,d={allowTaint:(le=t.allowTaint)!==null&&le!==void 0?le:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:u,copyStyles:u},c.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),A=new IU(c,e,d),f=A.clonedReferenceElement,f?[4,A.toIFrame(r,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return h=D.sent(),m=WF(f)||D1e(f)?Age(f.ownerDocument):ZE(c,f),p=m.width,g=m.height,x=m.left,y=m.top,b=Obe(c,f,t.backgroundColor),_={canvas:t.canvas,backgroundColor:b,scale:(J=(ce=t.scale)!==null&&ce!==void 0?ce:n.devicePixelRatio)!==null&&J!==void 0?J:1,x:((me=t.x)!==null&&me!==void 0?me:0)+x,y:((Ee=t.y)!==null&&Ee!==void 0?Ee:0)+y,width:(k=t.width)!==null&&k!==void 0?k:Math.ceil(p),height:(F=t.height)!==null&&F!==void 0?F:Math.ceil(g)},u?(c.logger.debug("Document cloned, using foreign object rendering"),C=new jbe(c,_),[4,C.render(f)]):[3,3];case 2:return T=D.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+x+","+y+" with size "+p+"x"+g+" using computed rendering"),c.logger.debug("Starting DOM parsing"),P=CX(c,f),b===P.styles.backgroundColor&&(P.styles.backgroundColor=Jd.TRANSPARENT),c.logger.debug("Starting renderer for element at "+_.x+","+_.y+" with size "+_.width+"x"+_.height),C=new Cbe(c,_),[4,C.render(P)];case 4:T=D.sent(),D.label=5;case 5:return(!((V=t.removeContainer)!==null&&V!==void 0)||V)&&(IU.destroy(h)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,T]}})})},Obe=function(e,t,r){var n=t.ownerDocument,a=n.documentElement?iy(e,getComputedStyle(n.documentElement).backgroundColor):Jd.TRANSPARENT,s=n.body?iy(e,getComputedStyle(n.body).backgroundColor):Jd.TRANSPARENT,o=typeof r=="string"?iy(e,r):r===null?Jd.TRANSPARENT:4294967295;return t===n.documentElement?Yh(a)?Yh(s)?o:s:a:o};const XF=Object.freeze(Object.defineProperty({__proto__:null,default:If},Symbol.toStringTag,{value:"Module"})),Dbe="modulepreload",Rbe=function(e){return"/"+e},TU={},Yd=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=Rbe(c),c in TU)return;TU[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const A=document.createElement("link");if(A.rel=u?"stylesheet":Dbe,u||(A.as="script"),A.crossOrigin="",A.href=c,l&&A.setAttribute("nonce",l),document.head.appendChild(A),u)return new Promise((f,h)=>{A.addEventListener("load",f),A.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})};function Rn(e){"@babel/helpers - typeof";return Rn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rn(e)}var Au=Uint8Array,Bl=Uint16Array,JF=Int32Array,YF=new Au([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ZF=new Au([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),FU=new Au([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),MX=function(e,t){for(var r=new Bl(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new JF(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},UX=MX(YF,2),Lbe=UX.b,hk=UX.r;Lbe[28]=258,hk[258]=28;var Mbe=MX(ZF,0),OU=Mbe.r,fk=new Bl(32768);for(var pa=0;pa<32768;++pa){var sh=(pa&43690)>>1|(pa&21845)<<1;sh=(sh&52428)>>2|(sh&13107)<<2,sh=(sh&61680)>>4|(sh&3855)<<4,fk[pa]=((sh&65280)>>8|(sh&255)<<8)>>1}var uy=function(e,t,r){for(var n=e.length,a=0,s=new Bl(t);a<n;++a)e[a]&&++s[e[a]-1];var o=new Bl(t);for(a=1;a<t;++a)o[a]=o[a-1]+s[a-1]<<1;var l;if(r){l=new Bl(1<<t);var c=15-t;for(a=0;a<n;++a)if(e[a])for(var u=a<<4|e[a],d=t-e[a],A=o[e[a]-1]++<<d,f=A|(1<<d)-1;A<=f;++A)l[fk[A]>>c]=u}else for(l=new Bl(n),a=0;a<n;++a)e[a]&&(l[a]=fk[o[e[a]-1]++]>>15-e[a]);return l},e0=new Au(288);for(var pa=0;pa<144;++pa)e0[pa]=8;for(var pa=144;pa<256;++pa)e0[pa]=9;for(var pa=256;pa<280;++pa)e0[pa]=7;for(var pa=280;pa<288;++pa)e0[pa]=8;var KC=new Au(32);for(var pa=0;pa<32;++pa)KC[pa]=5;var Ube=uy(e0,9,0),Qbe=uy(KC,5,0),QX=function(e){return(e+7)/8|0},Vbe=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Au(e.subarray(t,r))},Cd=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},nv=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},YB=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,s=r.slice();if(!a)return{t:HX,l:0};if(a==1){var o=new Au(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(T,P){return T.f-P.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,A=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=a-1;)l=r[r[u].f<r[A].f?u++:A++],c=r[u!=d&&r[u].f<r[A].f?u++:A++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var f=s[0].s,n=1;n<a;++n)s[n].s>f&&(f=s[n].s);var h=new Bl(f+1),m=mk(r[d-1],h,0);if(m>t){var n=0,p=0,g=m-t,x=1<<g;for(s.sort(function(P,C){return h[C.s]-h[P.s]||P.f-C.f});n<a;++n){var y=s[n].s;if(h[y]>t)p+=x-(1<<m-h[y]),h[y]=t;else break}for(p>>=g;p>0;){var b=s[n].s;h[b]<t?p-=1<<t-h[b]++-1:++n}for(;n>=0&&p;--n){var _=s[n].s;h[_]==t&&(--h[_],++p)}m=t}return{t:new Au(h),l:m}},mk=function(e,t,r){return e.s==-1?Math.max(mk(e.l,t,r+1),mk(e.r,t,r+1)):t[e.s]=r},DU=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Bl(++t),n=0,a=e[0],s=1,o=function(c){r[n++]=c},l=1;l<=t;++l)if(e[l]==a&&l!=t)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=e[l]}return{c:r.subarray(0,n),n:t}},av=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},VX=function(e,t,r){var n=r.length,a=QX(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var s=0;s<n;++s)e[a+s+4]=r[s];return(a+4+n)*8},RU=function(e,t,r,n,a,s,o,l,c,u,d){Cd(t,d++,r),++a[256];for(var A=YB(a,15),f=A.t,h=A.l,m=YB(s,15),p=m.t,g=m.l,x=DU(f),y=x.c,b=x.n,_=DU(p),T=_.c,P=_.n,C=new Bl(19),S=0;S<y.length;++S)++C[y[S]&31];for(var S=0;S<T.length;++S)++C[T[S]&31];for(var I=YB(C,7),L=I.t,E=I.l,j=19;j>4&&!L[FU[j-1]];--j);var R=u+5<<3,W=av(a,e0)+av(s,KC)+o,de=av(a,f)+av(s,p)+o+14+3*j+av(C,L)+2*C[16]+3*C[17]+7*C[18];if(c>=0&&R<=W&&R<=de)return VX(t,d,e.subarray(c,c+u));var te,le,ce,J;if(Cd(t,d,1+(de<W)),d+=2,de<W){te=uy(f,h,0),le=f,ce=uy(p,g,0),J=p;var me=uy(L,E,0);Cd(t,d,b-257),Cd(t,d+5,P-1),Cd(t,d+10,j-4),d+=14;for(var S=0;S<j;++S)Cd(t,d+3*S,L[FU[S]]);d+=3*j;for(var Ee=[y,T],k=0;k<2;++k)for(var F=Ee[k],S=0;S<F.length;++S){var V=F[S]&31;Cd(t,d,me[V]),d+=L[V],V>15&&(Cd(t,d,F[S]>>5&127),d+=F[S]>>12)}}else te=Ube,le=e0,ce=Qbe,J=KC;for(var S=0;S<l;++S){var D=n[S];if(D>255){var V=D>>18&31;nv(t,d,te[V+257]),d+=le[V+257],V>7&&(Cd(t,d,D>>23&31),d+=YF[V]);var M=D&31;nv(t,d,ce[M]),d+=J[M],M>3&&(nv(t,d,D>>5&8191),d+=ZF[M])}else nv(t,d,te[D]),d+=le[D]}return nv(t,d,te[256]),d+le[256]},Hbe=new JF([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),HX=new Au(0),$be=function(e,t,r,n,a,s){var o=s.z||e.length,l=new Au(n+o+5*(1+Math.ceil(o/7e3))+a),c=l.subarray(n,l.length-a),u=s.l,d=(s.r||0)&7;if(t){d&&(c[0]=s.r>>3);for(var A=Hbe[t-1],f=A>>13,h=A&8191,m=(1<<r)-1,p=s.p||new Bl(32768),g=s.h||new Bl(m+1),x=Math.ceil(r/3),y=2*x,b=function(Z){return(e[Z]^e[Z+1]<<x^e[Z+2]<<y)&m},_=new JF(25e3),T=new Bl(288),P=new Bl(32),C=0,S=0,I=s.i||0,L=0,E=s.w||0,j=0;I+2<o;++I){var R=b(I),W=I&32767,de=g[R];if(p[W]=de,g[R]=W,E<=I){var te=o-I;if((C>7e3||L>24576)&&(te>423||!u)){d=RU(e,c,0,_,T,P,S,L,j,I-j,d),L=C=S=0,j=I;for(var le=0;le<286;++le)T[le]=0;for(var le=0;le<30;++le)P[le]=0}var ce=2,J=0,me=h,Ee=W-de&32767;if(te>2&&R==b(I-Ee))for(var k=Math.min(f,te)-1,F=Math.min(32767,I),V=Math.min(258,te);Ee<=F&&--me&&W!=de;){if(e[I+ce]==e[I+ce-Ee]){for(var D=0;D<V&&e[I+D]==e[I+D-Ee];++D);if(D>ce){if(ce=D,J=Ee,D>k)break;for(var M=Math.min(Ee,D-2),G=0,le=0;le<M;++le){var O=I-Ee+le&32767,K=p[O],ee=O-K&32767;ee>G&&(G=ee,de=O)}}}W=de,de=p[W],Ee+=W-de&32767}if(J){_[L++]=268435456|hk[ce]<<18|OU[J];var ne=hk[ce]&31,Q=OU[J]&31;S+=YF[ne]+ZF[Q],++T[257+ne],++P[Q],E=I+ce,++C}else _[L++]=e[I],++T[e[I]]}}for(I=Math.max(I,E);I<o;++I)_[L++]=e[I],++T[e[I]];d=RU(e,c,u,_,T,P,S,L,j,I-j,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=g,s.p=p,s.i=I,s.w=E)}else{for(var I=s.w||0;I<o+u;I+=65535){var be=I+65535;be>=o&&(c[d/8|0]=u,be=o),d=VX(c,d+1,e.subarray(I,be))}s.i=o}return Vbe(l,0,n+QX(d)+a)},$X=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,s=r.length|0,o=0;o!=s;){for(var l=Math.min(o+2655,s);o<l;++o)a+=n+=r[o];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},Kbe=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),o=new Au(s.length+e.length);o.set(s),o.set(e,s.length),e=o,a.w=s.length}return $be(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},KX=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},qbe=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=$X();a.p(t.dictionary),KX(e,2,a.d())}};function pk(e,t){t||(t={});var r=$X();r.p(e);var n=Kbe(e,t,t.dictionary?6:2,4);return qbe(n,t),KX(n,n.length-4,r.d()),n}var Gbe=typeof TextDecoder<"u"&&new TextDecoder,zbe=0;try{Gbe.decode(HX,{stream:!0}),zbe=1}catch{}function Wbe(e){if(Array.isArray(e))return e}function Xbe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function LU(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Jbe(e,t){if(e){if(typeof e=="string")return LU(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?LU(e,t):void 0}}function Ybe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MU(e,t){return Wbe(e)||Xbe(e,t)||Jbe(e,t)||Ybe()}function UU(e,t="utf8"){return new TextDecoder(t).decode(e)}const Zbe=new TextEncoder;function ewe(e){return Zbe.encode(e)}const twe=1024*8,rwe=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),ZB={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class e3{constructor(t=twe,r={}){_n(this,"buffer");_n(this,"byteLength");_n(this,"byteOffset");_n(this,"length");_n(this,"offset");_n(this,"lastWrittenByte");_n(this,"littleEndian");_n(this,"_data");_n(this,"_mark");_n(this,"_marks");let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const a=r.offset?r.offset>>>0:0,s=t.byteLength-a;let o=a;(ArrayBuffer.isView(t)||t instanceof e3)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+a),t=t.buffer),n?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=t,this.length=s,this.byteLength=s,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,s),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const n=ZB[r].BYTES_PER_ELEMENT*t,a=this.byteOffset+this.offset,s=this.buffer.slice(a,a+n);if(this.littleEndian===rwe&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(a,a+n));l.reverse();const c=new ZB[r](l.buffer);return this.offset+=n,c.reverse(),c}const o=new ZB[r](s);return this.offset+=n,o}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let n=0;n<t;n++)r+=this.readChar();return r}readUtf8(t=1){return UU(this.readBytes(t))}decodeText(t=1,r="utf8"){return UU(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(ewe(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function nx(e){let t=e.length;for(;--t>=0;)e[t]=0}const nwe=3,awe=258,qX=29,swe=256,iwe=swe+1+qX,GX=30,owe=512,lwe=new Array((iwe+2)*2);nx(lwe);const cwe=new Array(GX*2);nx(cwe);const uwe=new Array(owe);nx(uwe);const dwe=new Array(awe-nwe+1);nx(dwe);const Awe=new Array(qX);nx(Awe);const hwe=new Array(GX);nx(hwe);const fwe=(e,t,r,n)=>{let a=e&65535|0,s=e>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do a=a+t[n++]|0,s=s+a|0;while(--o);a%=65521,s%=65521}return a|s<<16|0};var gk=fwe;const mwe=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},pwe=new Uint32Array(mwe()),gwe=(e,t,r,n)=>{const a=pwe,s=n+r;e^=-1;for(let o=n;o<s;o++)e=e>>>8^a[(e^t[o])&255];return e^-1};var Tu=gwe,xk={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},zX={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const xwe=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var vwe=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)xwe(r,n)&&(e[n]=r[n])}}return e},ywe=e=>{let t=0;for(let n=0,a=e.length;n<a;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,a=0,s=e.length;n<s;n++){let o=e[n];r.set(o,a),a+=o.length}return r},WX={assign:vwe,flattenChunks:ywe};let XX=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{XX=!1}const u1=new Uint8Array(256);for(let e=0;e<256;e++)u1[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;u1[254]=u1[254]=1;var bwe=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,a,s,o=e.length,l=0;for(a=0;a<o;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(l),s=0,a=0;s<l;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?t[s++]=r:r<2048?(t[s++]=192|r>>>6,t[s++]=128|r&63):r<65536?(t[s++]=224|r>>>12,t[s++]=128|r>>>6&63,t[s++]=128|r&63):(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63,t[s++]=128|r>>>6&63,t[s++]=128|r&63);return t};const wwe=(e,t)=>{if(t<65534&&e.subarray&&XX)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var Nwe=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,a;const s=new Array(r*2);for(a=0,n=0;n<r;){let o=e[n++];if(o<128){s[a++]=o;continue}let l=u1[o];if(l>4){s[a++]=65533,n+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&n<r;)o=o<<6|e[n++]&63,l--;if(l>1){s[a++]=65533;continue}o<65536?s[a++]=o:(o-=65536,s[a++]=55296|o>>10&1023,s[a++]=56320|o&1023)}return wwe(s,a)},Cwe=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+u1[e[r]]>t?r:t},vk={string2buf:bwe,buf2string:Nwe,utf8border:Cwe};function _we(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Ewe=_we;const o2=16209,Swe=16191;var Iwe=function(t,r){let n,a,s,o,l,c,u,d,A,f,h,m,p,g,x,y,b,_,T,P,C,S,I,L;const E=t.state;n=t.next_in,I=t.input,a=n+(t.avail_in-5),s=t.next_out,L=t.output,o=s-(r-t.avail_out),l=s+(t.avail_out-257),c=E.dmax,u=E.wsize,d=E.whave,A=E.wnext,f=E.window,h=E.hold,m=E.bits,p=E.lencode,g=E.distcode,x=(1<<E.lenbits)-1,y=(1<<E.distbits)-1;e:do{m<15&&(h+=I[n++]<<m,m+=8,h+=I[n++]<<m,m+=8),b=p[h&x];t:for(;;){if(_=b>>>24,h>>>=_,m-=_,_=b>>>16&255,_===0)L[s++]=b&65535;else if(_&16){T=b&65535,_&=15,_&&(m<_&&(h+=I[n++]<<m,m+=8),T+=h&(1<<_)-1,h>>>=_,m-=_),m<15&&(h+=I[n++]<<m,m+=8,h+=I[n++]<<m,m+=8),b=g[h&y];r:for(;;){if(_=b>>>24,h>>>=_,m-=_,_=b>>>16&255,_&16){if(P=b&65535,_&=15,m<_&&(h+=I[n++]<<m,m+=8,m<_&&(h+=I[n++]<<m,m+=8)),P+=h&(1<<_)-1,P>c){t.msg="invalid distance too far back",E.mode=o2;break e}if(h>>>=_,m-=_,_=s-o,P>_){if(_=P-_,_>d&&E.sane){t.msg="invalid distance too far back",E.mode=o2;break e}if(C=0,S=f,A===0){if(C+=u-_,_<T){T-=_;do L[s++]=f[C++];while(--_);C=s-P,S=L}}else if(A<_){if(C+=u+A-_,_-=A,_<T){T-=_;do L[s++]=f[C++];while(--_);if(C=0,A<T){_=A,T-=_;do L[s++]=f[C++];while(--_);C=s-P,S=L}}}else if(C+=A-_,_<T){T-=_;do L[s++]=f[C++];while(--_);C=s-P,S=L}for(;T>2;)L[s++]=S[C++],L[s++]=S[C++],L[s++]=S[C++],T-=3;T&&(L[s++]=S[C++],T>1&&(L[s++]=S[C++]))}else{C=s-P;do L[s++]=L[C++],L[s++]=L[C++],L[s++]=L[C++],T-=3;while(T>2);T&&(L[s++]=L[C++],T>1&&(L[s++]=L[C++]))}}else if(_&64){t.msg="invalid distance code",E.mode=o2;break e}else{b=g[(b&65535)+(h&(1<<_)-1)];continue r}break}}else if(_&64)if(_&32){E.mode=Swe;break e}else{t.msg="invalid literal/length code",E.mode=o2;break e}else{b=p[(b&65535)+(h&(1<<_)-1)];continue t}break}}while(n<a&&s<l);T=m>>3,n-=T,m-=T<<3,h&=(1<<m)-1,t.next_in=n,t.next_out=s,t.avail_in=n<a?5+(a-n):5-(n-a),t.avail_out=s<l?257+(l-s):257-(s-l),E.hold=h,E.bits=m};const ip=15,QU=852,VU=592,HU=0,ej=1,$U=2,Bwe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),jwe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Pwe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),kwe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Twe=(e,t,r,n,a,s,o,l)=>{const c=l.bits;let u=0,d=0,A=0,f=0,h=0,m=0,p=0,g=0,x=0,y=0,b,_,T,P,C,S=null,I;const L=new Uint16Array(ip+1),E=new Uint16Array(ip+1);let j=null,R,W,de;for(u=0;u<=ip;u++)L[u]=0;for(d=0;d<n;d++)L[t[r+d]]++;for(h=c,f=ip;f>=1&&L[f]===0;f--);if(h>f&&(h=f),f===0)return a[s++]=1<<24|64<<16|0,a[s++]=1<<24|64<<16|0,l.bits=1,0;for(A=1;A<f&&L[A]===0;A++);for(h<A&&(h=A),g=1,u=1;u<=ip;u++)if(g<<=1,g-=L[u],g<0)return-1;if(g>0&&(e===HU||f!==1))return-1;for(E[1]=0,u=1;u<ip;u++)E[u+1]=E[u]+L[u];for(d=0;d<n;d++)t[r+d]!==0&&(o[E[t[r+d]]++]=d);if(e===HU?(S=j=o,I=20):e===ej?(S=Bwe,j=jwe,I=257):(S=Pwe,j=kwe,I=0),y=0,d=0,u=A,C=s,m=h,p=0,T=-1,x=1<<h,P=x-1,e===ej&&x>QU||e===$U&&x>VU)return 1;for(;;){R=u-p,o[d]+1<I?(W=0,de=o[d]):o[d]>=I?(W=j[o[d]-I],de=S[o[d]-I]):(W=96,de=0),b=1<<u-p,_=1<<m,A=_;do _-=b,a[C+(y>>p)+_]=R<<24|W<<16|de|0;while(_!==0);for(b=1<<u-1;y&b;)b>>=1;if(b!==0?(y&=b-1,y+=b):y=0,d++,--L[u]===0){if(u===f)break;u=t[r+o[d]]}if(u>h&&(y&P)!==T){for(p===0&&(p=h),C+=A,m=u-p,g=1<<m;m+p<f&&(g-=L[m+p],!(g<=0));)m++,g<<=1;if(x+=1<<m,e===ej&&x>QU||e===$U&&x>VU)return 1;T=y&P,a[T]=h<<24|m<<16|C-s|0}}return y!==0&&(a[C+y]=u-p<<24|64<<16|0),l.bits=h,0};var dy=Twe;const Fwe=0,JX=1,YX=2,{Z_FINISH:KU,Z_BLOCK:Owe,Z_TREES:l2,Z_OK:t0,Z_STREAM_END:Dwe,Z_NEED_DICT:Rwe,Z_STREAM_ERROR:Ec,Z_DATA_ERROR:ZX,Z_MEM_ERROR:eJ,Z_BUF_ERROR:Lwe,Z_DEFLATED:qU}=zX,cS=16180,GU=16181,zU=16182,WU=16183,XU=16184,JU=16185,YU=16186,ZU=16187,e8=16188,t8=16189,qC=16190,_d=16191,tj=16192,r8=16193,rj=16194,n8=16195,a8=16196,s8=16197,i8=16198,c2=16199,u2=16200,o8=16201,l8=16202,c8=16203,u8=16204,d8=16205,nj=16206,A8=16207,h8=16208,wa=16209,tJ=16210,rJ=16211,Mwe=852,Uwe=592,Qwe=15,Vwe=Qwe,f8=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function Hwe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const E0=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<cS||t.mode>rJ?1:0},nJ=e=>{if(E0(e))return Ec;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=cS,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(Mwe),t.distcode=t.distdyn=new Int32Array(Uwe),t.sane=1,t.back=-1,t0},aJ=e=>{if(E0(e))return Ec;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,nJ(e)},sJ=(e,t)=>{let r;if(E0(e))return Ec;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Ec:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,aJ(e))},iJ=(e,t)=>{if(!e)return Ec;const r=new Hwe;e.state=r,r.strm=e,r.window=null,r.mode=cS;const n=sJ(e,t);return n!==t0&&(e.state=null),n},$we=e=>iJ(e,Vwe);let m8=!0,aj,sj;const Kwe=e=>{if(m8){aj=new Int32Array(512),sj=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(dy(JX,e.lens,0,288,aj,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;dy(YX,e.lens,0,32,sj,0,e.work,{bits:5}),m8=!1}e.lencode=aj,e.lenbits=9,e.distcode=sj,e.distbits=5},oJ=(e,t,r,n)=>{let a;const s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(t.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(a=s.wsize-s.wnext,a>n&&(a=n),s.window.set(t.subarray(r-n,r-n+a),s.wnext),n-=a,n?(s.window.set(t.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0},qwe=(e,t)=>{let r,n,a,s,o,l,c,u,d,A,f,h,m,p,g=0,x,y,b,_,T,P,C,S;const I=new Uint8Array(4);let L,E;const j=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(E0(e)||!e.output||!e.input&&e.avail_in!==0)return Ec;r=e.state,r.mode===_d&&(r.mode=tj),o=e.next_out,a=e.output,c=e.avail_out,s=e.next_in,n=e.input,l=e.avail_in,u=r.hold,d=r.bits,A=l,f=c,S=t0;e:for(;;)switch(r.mode){case cS:if(r.wrap===0){r.mode=tj;break}for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,I[0]=u&255,I[1]=u>>>8&255,r.check=Tu(r.check,I,2,0),u=0,d=0,r.mode=GU;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){e.msg="incorrect header check",r.mode=wa;break}if((u&15)!==qU){e.msg="unknown compression method",r.mode=wa;break}if(u>>>=4,d-=4,C=(u&15)+8,r.wbits===0&&(r.wbits=C),C>15||C>r.wbits){e.msg="invalid window size",r.mode=wa;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=u&512?t8:_d,u=0,d=0;break;case GU:for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.flags=u,(r.flags&255)!==qU){e.msg="unknown compression method",r.mode=wa;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=wa;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(I[0]=u&255,I[1]=u>>>8&255,r.check=Tu(r.check,I,2,0)),u=0,d=0,r.mode=zU;case zU:for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(I[0]=u&255,I[1]=u>>>8&255,I[2]=u>>>16&255,I[3]=u>>>24&255,r.check=Tu(r.check,I,4,0)),u=0,d=0,r.mode=WU;case WU:for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(I[0]=u&255,I[1]=u>>>8&255,r.check=Tu(r.check,I,2,0)),u=0,d=0,r.mode=XU;case XU:if(r.flags&1024){for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(I[0]=u&255,I[1]=u>>>8&255,r.check=Tu(r.check,I,2,0)),u=0,d=0}else r.head&&(r.head.extra=null);r.mode=JU;case JU:if(r.flags&1024&&(h=r.length,h>l&&(h=l),h&&(r.head&&(C=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+h),C)),r.flags&512&&r.wrap&4&&(r.check=Tu(r.check,n,h,s)),l-=h,s+=h,r.length-=h),r.length))break e;r.length=0,r.mode=YU;case YU:if(r.flags&2048){if(l===0)break e;h=0;do C=n[s+h++],r.head&&C&&r.length<65536&&(r.head.name+=String.fromCharCode(C));while(C&&h<l);if(r.flags&512&&r.wrap&4&&(r.check=Tu(r.check,n,h,s)),l-=h,s+=h,C)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=ZU;case ZU:if(r.flags&4096){if(l===0)break e;h=0;do C=n[s+h++],r.head&&C&&r.length<65536&&(r.head.comment+=String.fromCharCode(C));while(C&&h<l);if(r.flags&512&&r.wrap&4&&(r.check=Tu(r.check,n,h,s)),l-=h,s+=h,C)break e}else r.head&&(r.head.comment=null);r.mode=e8;case e8:if(r.flags&512){for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.check&65535)){e.msg="header crc mismatch",r.mode=wa;break}u=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=_d;break;case t8:for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}e.adler=r.check=f8(u),u=0,d=0,r.mode=qC;case qC:if(r.havedict===0)return e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=l,r.hold=u,r.bits=d,Rwe;e.adler=r.check=1,r.mode=_d;case _d:if(t===Owe||t===l2)break e;case tj:if(r.last){u>>>=d&7,d-=d&7,r.mode=nj;break}for(;d<3;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}switch(r.last=u&1,u>>>=1,d-=1,u&3){case 0:r.mode=r8;break;case 1:if(Kwe(r),r.mode=c2,t===l2){u>>>=2,d-=2;break e}break;case 2:r.mode=a8;break;case 3:e.msg="invalid block type",r.mode=wa}u>>>=2,d-=2;break;case r8:for(u>>>=d&7,d-=d&7;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){e.msg="invalid stored block lengths",r.mode=wa;break}if(r.length=u&65535,u=0,d=0,r.mode=rj,t===l2)break e;case rj:r.mode=n8;case n8:if(h=r.length,h){if(h>l&&(h=l),h>c&&(h=c),h===0)break e;a.set(n.subarray(s,s+h),o),l-=h,s+=h,c-=h,o+=h,r.length-=h;break}r.mode=_d;break;case a8:for(;d<14;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.nlen=(u&31)+257,u>>>=5,d-=5,r.ndist=(u&31)+1,u>>>=5,d-=5,r.ncode=(u&15)+4,u>>>=4,d-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=wa;break}r.have=0,r.mode=s8;case s8:for(;r.have<r.ncode;){for(;d<3;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.lens[j[r.have++]]=u&7,u>>>=3,d-=3}for(;r.have<19;)r.lens[j[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,L={bits:r.lenbits},S=dy(Fwe,r.lens,0,19,r.lencode,0,r.work,L),r.lenbits=L.bits,S){e.msg="invalid code lengths set",r.mode=wa;break}r.have=0,r.mode=i8;case i8:for(;r.have<r.nlen+r.ndist;){for(;g=r.lencode[u&(1<<r.lenbits)-1],x=g>>>24,y=g>>>16&255,b=g&65535,!(x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(b<16)u>>>=x,d-=x,r.lens[r.have++]=b;else{if(b===16){for(E=x+2;d<E;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(u>>>=x,d-=x,r.have===0){e.msg="invalid bit length repeat",r.mode=wa;break}C=r.lens[r.have-1],h=3+(u&3),u>>>=2,d-=2}else if(b===17){for(E=x+3;d<E;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=x,d-=x,C=0,h=3+(u&7),u>>>=3,d-=3}else{for(E=x+7;d<E;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=x,d-=x,C=0,h=11+(u&127),u>>>=7,d-=7}if(r.have+h>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=wa;break}for(;h--;)r.lens[r.have++]=C}}if(r.mode===wa)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=wa;break}if(r.lenbits=9,L={bits:r.lenbits},S=dy(JX,r.lens,0,r.nlen,r.lencode,0,r.work,L),r.lenbits=L.bits,S){e.msg="invalid literal/lengths set",r.mode=wa;break}if(r.distbits=6,r.distcode=r.distdyn,L={bits:r.distbits},S=dy(YX,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,L),r.distbits=L.bits,S){e.msg="invalid distances set",r.mode=wa;break}if(r.mode=c2,t===l2)break e;case c2:r.mode=u2;case u2:if(l>=6&&c>=258){e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=l,r.hold=u,r.bits=d,Iwe(e,f),o=e.next_out,a=e.output,c=e.avail_out,s=e.next_in,n=e.input,l=e.avail_in,u=r.hold,d=r.bits,r.mode===_d&&(r.back=-1);break}for(r.back=0;g=r.lencode[u&(1<<r.lenbits)-1],x=g>>>24,y=g>>>16&255,b=g&65535,!(x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(y&&!(y&240)){for(_=x,T=y,P=b;g=r.lencode[P+((u&(1<<_+T)-1)>>_)],x=g>>>24,y=g>>>16&255,b=g&65535,!(_+x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=_,d-=_,r.back+=_}if(u>>>=x,d-=x,r.back+=x,r.length=b,y===0){r.mode=d8;break}if(y&32){r.back=-1,r.mode=_d;break}if(y&64){e.msg="invalid literal/length code",r.mode=wa;break}r.extra=y&15,r.mode=o8;case o8:if(r.extra){for(E=r.extra;d<E;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=l8;case l8:for(;g=r.distcode[u&(1<<r.distbits)-1],x=g>>>24,y=g>>>16&255,b=g&65535,!(x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(!(y&240)){for(_=x,T=y,P=b;g=r.distcode[P+((u&(1<<_+T)-1)>>_)],x=g>>>24,y=g>>>16&255,b=g&65535,!(_+x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=_,d-=_,r.back+=_}if(u>>>=x,d-=x,r.back+=x,y&64){e.msg="invalid distance code",r.mode=wa;break}r.offset=b,r.extra=y&15,r.mode=c8;case c8:if(r.extra){for(E=r.extra;d<E;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=wa;break}r.mode=u8;case u8:if(c===0)break e;if(h=f-c,r.offset>h){if(h=r.offset-h,h>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=wa;break}h>r.wnext?(h-=r.wnext,m=r.wsize-h):m=r.wnext-h,h>r.length&&(h=r.length),p=r.window}else p=a,m=o-r.offset,h=r.length;h>c&&(h=c),c-=h,r.length-=h;do a[o++]=p[m++];while(--h);r.length===0&&(r.mode=u2);break;case d8:if(c===0)break e;a[o++]=r.length,c--,r.mode=u2;break;case nj:if(r.wrap){for(;d<32;){if(l===0)break e;l--,u|=n[s++]<<d,d+=8}if(f-=c,e.total_out+=f,r.total+=f,r.wrap&4&&f&&(e.adler=r.check=r.flags?Tu(r.check,a,f,o-f):gk(r.check,a,f,o-f)),f=c,r.wrap&4&&(r.flags?u:f8(u))!==r.check){e.msg="incorrect data check",r.mode=wa;break}u=0,d=0}r.mode=A8;case A8:if(r.wrap&&r.flags){for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=wa;break}u=0,d=0}r.mode=h8;case h8:S=Dwe;break e;case wa:S=ZX;break e;case tJ:return eJ;case rJ:default:return Ec}return e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=l,r.hold=u,r.bits=d,(r.wsize||f!==e.avail_out&&r.mode<wa&&(r.mode<nj||t!==KU))&&oJ(e,e.output,e.next_out,f-e.avail_out),A-=e.avail_in,f-=e.avail_out,e.total_in+=A,e.total_out+=f,r.total+=f,r.wrap&4&&f&&(e.adler=r.check=r.flags?Tu(r.check,a,f,e.next_out-f):gk(r.check,a,f,e.next_out-f)),e.data_type=r.bits+(r.last?64:0)+(r.mode===_d?128:0)+(r.mode===c2||r.mode===rj?256:0),(A===0&&f===0||t===KU)&&S===t0&&(S=Lwe),S},Gwe=e=>{if(E0(e))return Ec;let t=e.state;return t.window&&(t.window=null),e.state=null,t0},zwe=(e,t)=>{if(E0(e))return Ec;const r=e.state;return r.wrap&2?(r.head=t,t.done=!1,t0):Ec},Wwe=(e,t)=>{const r=t.length;let n,a,s;return E0(e)||(n=e.state,n.wrap!==0&&n.mode!==qC)?Ec:n.mode===qC&&(a=1,a=gk(a,t,r,0),a!==n.check)?ZX:(s=oJ(e,t,r,r),s?(n.mode=tJ,eJ):(n.havedict=1,t0))};var Xwe=aJ,Jwe=sJ,Ywe=nJ,Zwe=$we,e2e=iJ,t2e=qwe,r2e=Gwe,n2e=zwe,a2e=Wwe,s2e="pako inflate (from Nodeca project)",Td={inflateReset:Xwe,inflateReset2:Jwe,inflateResetKeep:Ywe,inflateInit:Zwe,inflateInit2:e2e,inflate:t2e,inflateEnd:r2e,inflateGetHeader:n2e,inflateSetDictionary:a2e,inflateInfo:s2e};function i2e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var o2e=i2e;const lJ=Object.prototype.toString,{Z_NO_FLUSH:l2e,Z_FINISH:c2e,Z_OK:d1,Z_STREAM_END:ij,Z_NEED_DICT:oj,Z_STREAM_ERROR:u2e,Z_DATA_ERROR:p8,Z_MEM_ERROR:d2e}=zX;function pb(e){this.options=WX.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ewe,this.strm.avail_out=0;let r=Td.inflateInit2(this.strm,t.windowBits);if(r!==d1)throw new Error(xk[r]);if(this.header=new o2e,Td.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=vk.string2buf(t.dictionary):lJ.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Td.inflateSetDictionary(this.strm,t.dictionary),r!==d1)))throw new Error(xk[r])}pb.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let s,o,l;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?c2e:l2e,lJ.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=Td.inflate(r,o),s===oj&&a&&(s=Td.inflateSetDictionary(r,a),s===d1?s=Td.inflate(r,o):s===p8&&(s=oj));r.avail_in>0&&s===ij&&r.state.wrap>0&&e[r.next_in]!==0;)Td.inflateReset(r),s=Td.inflate(r,o);switch(s){case u2e:case p8:case oj:case d2e:return this.onEnd(s),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||s===ij))if(this.options.to==="string"){let c=vk.utf8border(r.output,r.next_out),u=r.next_out-c,d=vk.buf2string(r.output,c);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(c,c+u),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(s===d1&&l===0)){if(s===ij)return s=Td.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};pb.prototype.onData=function(e){this.chunks.push(e)};pb.prototype.onEnd=function(e){e===d1&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=WX.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function A2e(e,t){const r=new pb(t);if(r.push(e),r.err)throw r.msg||xk[r.err];return r.result}var h2e=pb,f2e=A2e,m2e={Inflate:h2e,inflate:f2e};const{Inflate:p2e,inflate:g2e}=m2e;var g8=p2e,x2e=g2e;const cJ=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;cJ[e]=t}const x8=4294967295;function v2e(e,t,r){let n=e;for(let a=0;a<r;a++)n=cJ[(n^t[a])&255]^n>>>8;return n}function y2e(e,t){return(v2e(x8,e,t)^x8)>>>0}function v8(e,t,r){const n=e.readUint32(),a=y2e(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(a!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${a}`)}function uJ(e,t,r){for(let n=0;n<r;n++)t[n]=e[n]}function dJ(e,t,r,n){let a=0;for(;a<n;a++)t[a]=e[a];for(;a<r;a++)t[a]=e[a]+t[a-n]&255}function AJ(e,t,r,n){let a=0;if(r.length===0)for(;a<n;a++)t[a]=e[a];else for(;a<n;a++)t[a]=e[a]+r[a]&255}function hJ(e,t,r,n,a){let s=0;if(r.length===0){for(;s<a;s++)t[s]=e[s];for(;s<n;s++)t[s]=e[s]+(t[s-a]>>1)&255}else{for(;s<a;s++)t[s]=e[s]+(r[s]>>1)&255;for(;s<n;s++)t[s]=e[s]+(t[s-a]+r[s]>>1)&255}}function fJ(e,t,r,n,a){let s=0;if(r.length===0){for(;s<a;s++)t[s]=e[s];for(;s<n;s++)t[s]=e[s]+t[s-a]&255}else{for(;s<a;s++)t[s]=e[s]+r[s]&255;for(;s<n;s++)t[s]=e[s]+b2e(t[s-a],r[s],r[s-a])&255}}function b2e(e,t,r){const n=e+t-r,a=Math.abs(n-e),s=Math.abs(n-t),o=Math.abs(n-r);return a<=s&&a<=o?e:s<=o?t:r}function w2e(e,t,r,n,a,s){switch(e){case 0:uJ(t,r,a);break;case 1:dJ(t,r,a,s);break;case 2:AJ(t,r,n,a);break;case 3:hJ(t,r,n,a,s);break;case 4:fJ(t,r,n,a,s);break;default:throw new Error(`Unsupported filter: ${e}`)}}const N2e=new Uint16Array([255]),C2e=new Uint8Array(N2e.buffer),_2e=C2e[0]===255;function E2e(e){const{data:t,width:r,height:n,channels:a,depth:s}=e,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(s/8)*a,c=new Uint8Array(n*r*l);let u=0;for(let d=0;d<7;d++){const A=o[d],f=Math.ceil((r-A.x)/A.xStep),h=Math.ceil((n-A.y)/A.yStep);if(f<=0||h<=0)continue;const m=f*l,p=new Uint8Array(m);for(let g=0;g<h;g++){const x=t[u++],y=t.subarray(u,u+m);u+=m;const b=new Uint8Array(m);w2e(x,y,b,p,m,l),p.set(b);for(let _=0;_<f;_++){const T=A.x+_*A.xStep,P=A.y+g*A.yStep;if(!(T>=r||P>=n))for(let C=0;C<l;C++)c[(P*r+T)*l+C]=b[_*l+C]}}}if(s===16){const d=new Uint16Array(c.buffer);if(_2e)for(let A=0;A<d.length;A++)d[A]=S2e(d[A]);return d}else return c}function S2e(e){return(e&255)<<8|e>>8&255}const I2e=new Uint16Array([255]),B2e=new Uint8Array(I2e.buffer),j2e=B2e[0]===255,P2e=new Uint8Array(0);function y8(e){const{data:t,width:r,height:n,channels:a,depth:s}=e,o=Math.ceil(s/8)*a,l=Math.ceil(s/8*a*r),c=new Uint8Array(n*l);let u=P2e,d=0,A,f;for(let h=0;h<n;h++){switch(A=t.subarray(d+1,d+1+l),f=c.subarray(h*l,(h+1)*l),t[d]){case 0:uJ(A,f,l);break;case 1:dJ(A,f,l,o);break;case 2:AJ(A,f,u,l);break;case 3:hJ(A,f,u,l,o);break;case 4:fJ(A,f,u,l,o);break;default:throw new Error(`Unsupported filter: ${t[d]}`)}u=f,d+=l+1}if(s===16){const h=new Uint16Array(c.buffer);if(j2e)for(let m=0;m<h.length;m++)h[m]=k2e(h[m]);return h}else return c}function k2e(e){return(e&255)<<8|e>>8&255}const DN=Uint8Array.of(137,80,78,71,13,10,26,10);function b8(e){if(!T2e(e.readBytes(DN.length)))throw new Error("wrong PNG signature")}function T2e(e){if(e.length<DN.length)return!1;for(let t=0;t<DN.length;t++)if(e[t]!==DN[t])return!1;return!0}const F2e="tEXt",O2e=0,mJ=new TextDecoder("latin1");function D2e(e){if(L2e(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const R2e=/^[\u0000-\u00FF]*$/;function L2e(e){if(!R2e.test(e))throw new Error("invalid latin1 text")}function M2e(e,t,r){const n=pJ(t);e[n]=U2e(t,r-n.length-1)}function pJ(e){for(e.mark();e.readByte()!==O2e;);const t=e.offset;e.reset();const r=mJ.decode(e.readBytes(t-e.offset-1));return e.skip(1),D2e(r),r}function U2e(e,t){return mJ.decode(e.readBytes(t))}const pl={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},lj={UNKNOWN:-1,DEFLATE:0},w8={UNKNOWN:-1,ADAPTIVE:0},cj={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},d2={NONE:0,BACKGROUND:1,PREVIOUS:2},uj={SOURCE:0,OVER:1};class Q2e extends e3{constructor(r,n={}){super(r);_n(this,"_checkCrc");_n(this,"_inflator");_n(this,"_png");_n(this,"_apng");_n(this,"_end");_n(this,"_hasPalette");_n(this,"_palette");_n(this,"_hasTransparency");_n(this,"_transparency");_n(this,"_compressionMethod");_n(this,"_filterMethod");_n(this,"_interlaceMethod");_n(this,"_colorType");_n(this,"_isAnimated");_n(this,"_numberOfFrames");_n(this,"_numberOfPlays");_n(this,"_frames");_n(this,"_writingDataChunks");const{checkCrc:a=!1}=n;this._checkCrc=a,this._inflator=new g8,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=lj.UNKNOWN,this._filterMethod=w8.UNKNOWN,this._interlaceMethod=cj.UNKNOWN,this._colorType=pl.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(b8(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(b8(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const a=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case F2e:M2e(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?v8(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const a=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?v8(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=V2e(this.readUint8());const n=this.readUint8();this._colorType=n;let a;switch(n){case pl.GREYSCALE:a=1;break;case pl.TRUECOLOUR:a=3;break;case pl.INDEXED_COLOUR:a=1;break;case pl.GREYSCALE_ALPHA:a=2;break;case pl.TRUECOLOUR_ALPHA:a=4;break;case pl.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==lj.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let s=0;s<n;s++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,a=this.offset+this.byteOffset;if(a+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case pl.GREYSCALE:case pl.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case pl.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const a=this.readByte();this._palette[n].push(a)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case pl.UNKNOWN:case pl.GREYSCALE_ALPHA:case pl.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=pJ(this),a=this.readUint8();if(a!==lj.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const s=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:x2e(s)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:n,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=y8({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)n.data=a.data;else{const s=this._apng.frames.at(r-1);this.disposeFrame(a,s,n),this.addFrameDataToCanvas(n,a)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,a){switch(r.disposeOp){case d2.NONE:break;case d2.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let o=0;o<this._png.width;o++){const l=(s*r.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)a.data[l+c]=0}break;case d2.PREVIOUS:a.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const a=1<<this._png.depth,s=(o,l)=>{const c=((o+n.yOffset)*this._png.width+n.xOffset+l)*this._png.channels,u=(o*n.width+l)*this._png.channels;return{index:c,frameIndex:u}};switch(n.blendOp){case uj.SOURCE:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=s(o,l);for(let d=0;d<this._png.channels;d++)r.data[c+d]=n.data[u+d]}break;case uj.OVER:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=s(o,l);for(let d=0;d<this._png.channels;d++){const A=n.data[u+this._png.channels-1]/a,f=d%(this._png.channels-1)===0?1:n.data[u+d],h=Math.floor(A*f+(1-A)*r.data[c+d]);r.data[c+d]+=h}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==w8.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===cj.NO_INTERLACE)this._png.data=y8({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===cj.ADAM7)this._png.data=E2e({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:d2.NONE,blendOp:uj.SOURCE,data:r}),this._inflator=new g8,this._writingDataChunks=!1}}function V2e(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var N8;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(N8||(N8={}));function H2e(e,t){return new Q2e(e,t).decode()}var Dr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function dj(){Dr.console&&typeof Dr.console.log=="function"&&Dr.console.log.apply(Dr.console,arguments)}var Yn={log:dj,warn:function(e){Dr.console&&(typeof Dr.console.warn=="function"?Dr.console.warn.apply(Dr.console,arguments):dj.call(null,arguments))},error:function(e){Dr.console&&(typeof Dr.console.error=="function"?Dr.console.error.apply(Dr.console,arguments):dj(e))}};function Aj(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){rm(n.response,t,r)},n.onerror=function(){Yn.error("could not download file")},n.send()}function C8(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function A2(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var rm=Dr.saveAs||((typeof window>"u"?"undefined":Rn(window))!=="object"||window!==Dr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Dr.URL||Dr.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?C8(a.href)?Aj(e,t,r):A2(a,a.target="_blank"):A2(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){A2(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(C8(e))Aj(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){A2(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:Rn(s)!=="object"&&(Yn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return Aj(e,t,r);var a=e.type==="application/octet-stream",s=/constructor/i.test(Dr.HTMLElement)||Dr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&s)&&(typeof FileReader>"u"?"undefined":Rn(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},l.readAsDataURL(e)}else{var c=Dr.URL||Dr.webkitURL,u=c.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function gJ(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,o=a.exec(e);o&&(t=s(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}var RN=Dr.atob.bind(Dr),_8=Dr.btoa.bind(Dr);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function hj(e,t){var r=e[0],n=e[1],a=e[2],s=e[3];r=zi(r,n,a,s,t[0],7,-680876936),s=zi(s,r,n,a,t[1],12,-389564586),a=zi(a,s,r,n,t[2],17,606105819),n=zi(n,a,s,r,t[3],22,-1044525330),r=zi(r,n,a,s,t[4],7,-176418897),s=zi(s,r,n,a,t[5],12,1200080426),a=zi(a,s,r,n,t[6],17,-1473231341),n=zi(n,a,s,r,t[7],22,-45705983),r=zi(r,n,a,s,t[8],7,1770035416),s=zi(s,r,n,a,t[9],12,-1958414417),a=zi(a,s,r,n,t[10],17,-42063),n=zi(n,a,s,r,t[11],22,-1990404162),r=zi(r,n,a,s,t[12],7,1804603682),s=zi(s,r,n,a,t[13],12,-40341101),a=zi(a,s,r,n,t[14],17,-1502002290),r=Wi(r,n=zi(n,a,s,r,t[15],22,1236535329),a,s,t[1],5,-165796510),s=Wi(s,r,n,a,t[6],9,-1069501632),a=Wi(a,s,r,n,t[11],14,643717713),n=Wi(n,a,s,r,t[0],20,-373897302),r=Wi(r,n,a,s,t[5],5,-701558691),s=Wi(s,r,n,a,t[10],9,38016083),a=Wi(a,s,r,n,t[15],14,-660478335),n=Wi(n,a,s,r,t[4],20,-405537848),r=Wi(r,n,a,s,t[9],5,568446438),s=Wi(s,r,n,a,t[14],9,-1019803690),a=Wi(a,s,r,n,t[3],14,-187363961),n=Wi(n,a,s,r,t[8],20,1163531501),r=Wi(r,n,a,s,t[13],5,-1444681467),s=Wi(s,r,n,a,t[2],9,-51403784),a=Wi(a,s,r,n,t[7],14,1735328473),r=Xi(r,n=Wi(n,a,s,r,t[12],20,-1926607734),a,s,t[5],4,-378558),s=Xi(s,r,n,a,t[8],11,-2022574463),a=Xi(a,s,r,n,t[11],16,1839030562),n=Xi(n,a,s,r,t[14],23,-35309556),r=Xi(r,n,a,s,t[1],4,-1530992060),s=Xi(s,r,n,a,t[4],11,1272893353),a=Xi(a,s,r,n,t[7],16,-155497632),n=Xi(n,a,s,r,t[10],23,-1094730640),r=Xi(r,n,a,s,t[13],4,681279174),s=Xi(s,r,n,a,t[0],11,-358537222),a=Xi(a,s,r,n,t[3],16,-722521979),n=Xi(n,a,s,r,t[6],23,76029189),r=Xi(r,n,a,s,t[9],4,-640364487),s=Xi(s,r,n,a,t[12],11,-421815835),a=Xi(a,s,r,n,t[15],16,530742520),r=Ji(r,n=Xi(n,a,s,r,t[2],23,-995338651),a,s,t[0],6,-198630844),s=Ji(s,r,n,a,t[7],10,1126891415),a=Ji(a,s,r,n,t[14],15,-1416354905),n=Ji(n,a,s,r,t[5],21,-57434055),r=Ji(r,n,a,s,t[12],6,1700485571),s=Ji(s,r,n,a,t[3],10,-1894986606),a=Ji(a,s,r,n,t[10],15,-1051523),n=Ji(n,a,s,r,t[1],21,-2054922799),r=Ji(r,n,a,s,t[8],6,1873313359),s=Ji(s,r,n,a,t[15],10,-30611744),a=Ji(a,s,r,n,t[6],15,-1560198380),n=Ji(n,a,s,r,t[13],21,1309151649),r=Ji(r,n,a,s,t[4],6,-145523070),s=Ji(s,r,n,a,t[11],10,-1120210379),a=Ji(a,s,r,n,t[2],15,718787259),n=Ji(n,a,s,r,t[9],21,-343485551),e[0]=Oh(r,e[0]),e[1]=Oh(n,e[1]),e[2]=Oh(a,e[2]),e[3]=Oh(s,e[3])}function uS(e,t,r,n,a,s){return t=Oh(Oh(t,e),Oh(n,s)),Oh(t<<a|t>>>32-a,r)}function zi(e,t,r,n,a,s,o){return uS(t&r|~t&n,e,t,a,s,o)}function Wi(e,t,r,n,a,s,o){return uS(t&n|r&~n,e,t,a,s,o)}function Xi(e,t,r,n,a,s,o){return uS(t^r^n,e,t,a,s,o)}function Ji(e,t,r,n,a,s,o){return uS(r^(t|~n),e,t,a,s,o)}function xJ(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)hj(n,$2e(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(hj(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,hj(n,a),n}function $2e(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var E8="0123456789abcdef".split("");function K2e(e){for(var t="",r=0;r<4;r++)t+=E8[e>>8*r+4&15]+E8[e>>8*r&15];return t}function q2e(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function yk(e){return xJ(e).map(q2e).join("")}var G2e=function(e){for(var t=0;t<e.length;t++)e[t]=K2e(e[t]);return e.join("")}(xJ("hello"))!="5d41402abc4b2a76b9719d911017c592";function Oh(e,t){if(G2e){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function bk(e,t){var r,n,a,s;if(e!==r){for(var o=(a=e,s=1+(256/e.length|0),new Array(s+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+o.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=e,n=l}else l=n;var A=t.length,f=0,h=0,m="";for(c=0;c<A;c++)h=(h+(d=l[f=(f+1)%256]))%256,l[f]=l[h],l[h]=d,o=l[(l[f]+l[h])%256],m+=String.fromCharCode(t.charCodeAt(c)^o);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var S8={print:4,modify:8,copy:16,"annot-forms":32};function Sp(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(l){if(S8.perm!==void 0)throw new Error("Invalid permission: "+l);a+=S8[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^a)),this.encryptionKey=yk(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=bk(this.encryptionKey,this.padding)}function Ip(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);t+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):e[n]}return t}function I8(e){if(Rn(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var s=Math.random().toString(35);return t[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in t[r]){var o=t[r][s];try{o[0].apply(e,n)}catch(l){Dr.console&&Yn.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function A1(e){if(!(this instanceof A1))return new A1(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function vJ(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Sh(e,t,r,n,a){if(!(this instanceof Sh))return new Sh(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,vJ.call(this,n,a)}function gm(e,t,r,n,a){if(!(this instanceof gm))return new gm(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,vJ.call(this,n,a)}function Ar(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],o=[],l=1,c=16,u="S",d=null;Rn(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,s=e.compress||e.compressPdf||s,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),o=e.filters||(s===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var A=e.putOnlyUsedFonts||!1,f={},h={internal:{},__private__:{}};h.__private__.PubSub=I8;var m="1.3",p=h.__private__.getPdfVersion=function(){return m};h.__private__.setPdfVersion=function(U){m=U};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return g};var x=h.__private__.getPageFormat=function(U){return g[U]};a=a||"a4";var y="compat",b="advanced",_=y;function T(){this.saveGraphicsState(),z(new Ce(xe,0,0,-xe,0,Gl()*xe).toString()+" cm"),this.setFontSize(this.getFontSize()/xe),u="n",_=b}function P(){this.restoreGraphicsState(),u="S",_=y}var C=h.__private__.combineFontStyleAndFontWeight=function(U,fe){if(U=="bold"&&fe=="normal"||U=="bold"&&fe==400||U=="normal"&&fe=="italic"||U=="bold"&&fe=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return fe&&(U=fe==400||fe==="normal"?U==="italic"?"italic":"normal":fe!=700&&fe!=="bold"||U!=="normal"?(fe==700?"bold":fe)+""+U:"bold"),U};h.advancedAPI=function(U){var fe=_===y;return fe&&T.call(this),typeof U!="function"||(U(this),fe&&P.call(this)),this},h.compatAPI=function(U){var fe=_===b;return fe&&P.call(this),typeof U!="function"||(U(this),fe&&T.call(this)),this},h.isAdvancedAPI=function(){return _===b};var S,I=function(U){if(_!==b)throw new Error(U+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},L=h.roundToPrecision=h.__private__.roundToPrecision=function(U,fe){var He=t||fe;if(isNaN(U)||isNaN(He))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return U.toFixed(He).replace(/0+$/,"")};S=h.hpf=h.__private__.hpf=typeof c=="number"?function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return L(U,c)}:c==="smart"?function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return L(U,U>-1&&U<1?16:5)}:function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return L(U,16)};var E=h.f2=h.__private__.f2=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.f2");return L(U,2)},j=h.__private__.f3=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.f3");return L(U,3)},R=h.scale=h.__private__.scale=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.scale");return _===y?U*xe:_===b?U:void 0},W=function(U){return R(function(fe){return _===y?Gl()-fe:_===b?fe:void 0}(U))};h.__private__.setPrecision=h.setPrecision=function(U){typeof parseInt(U,10)=="number"&&(t=parseInt(U,10))};var de,te="00000000000000000000000000000000",le=h.__private__.getFileId=function(){return te},ce=h.__private__.setFileId=function(U){return te=U!==void 0&&/^[a-fA-F0-9]{32}$/.test(U)?U.toUpperCase():te.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(Gn=new Sp(d.userPermissions,d.userPassword,d.ownerPassword,te)),te};h.setFileId=function(U){return ce(U),this},h.getFileId=function(){return le()};var J=h.__private__.convertDateToPDFDate=function(U){var fe=U.getTimezoneOffset(),He=fe<0?"+":"-",tt=Math.floor(Math.abs(fe/60)),pt=Math.abs(fe%60),Ot=[He,V(tt),"'",V(pt),"'"].join("");return["D:",U.getFullYear(),V(U.getMonth()+1),V(U.getDate()),V(U.getHours()),V(U.getMinutes()),V(U.getSeconds()),Ot].join("")},me=h.__private__.convertPDFDateToDate=function(U){var fe=parseInt(U.substr(2,4),10),He=parseInt(U.substr(6,2),10)-1,tt=parseInt(U.substr(8,2),10),pt=parseInt(U.substr(10,2),10),Ot=parseInt(U.substr(12,2),10),Ut=parseInt(U.substr(14,2),10);return new Date(fe,He,tt,pt,Ot,Ut,0)},Ee=h.__private__.setCreationDate=function(U){var fe;if(U===void 0&&(U=new Date),U instanceof Date)fe=J(U);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(U))throw new Error("Invalid argument passed to jsPDF.setCreationDate");fe=U}return de=fe},k=h.__private__.getCreationDate=function(U){var fe=de;return U==="jsDate"&&(fe=me(de)),fe};h.setCreationDate=function(U){return Ee(U),this},h.getCreationDate=function(U){return k(U)};var F,V=h.__private__.padd2=function(U){return("0"+parseInt(U)).slice(-2)},D=h.__private__.padd2Hex=function(U){return("00"+(U=U.toString())).substr(U.length)},M=0,G=[],O=[],K=0,ee=[],ne=[],Q=!1,be=O;h.__private__.setCustomOutputDestination=function(U){Q=!0,be=U};var Z=function(U){Q||(be=U)};h.__private__.resetCustomOutputDestination=function(){Q=!1,be=O};var z=h.__private__.out=function(U){return U=U.toString(),K+=U.length+1,be.push(U),be},X=h.__private__.write=function(U){return z(arguments.length===1?U.toString():Array.prototype.join.call(arguments," "))},ve=h.__private__.getArrayBuffer=function(U){for(var fe=U.length,He=new ArrayBuffer(fe),tt=new Uint8Array(He);fe--;)tt[fe]=U.charCodeAt(fe);return He},re=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return re};var Ne=e.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(U){return Ne=_===b?U/xe:U,this};var Me,Ve=h.__private__.getFontSize=h.getFontSize=function(){return _===y?Ne:Ne*xe},nt=e.R2L||!1;h.__private__.setR2L=h.setR2L=function(U){return nt=U,this},h.__private__.getR2L=h.getR2L=function(){return nt};var st,lt=h.__private__.setZoomMode=function(U){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(U))Me=U;else if(isNaN(U)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(U)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+U+'" is not recognized.');Me=U}else Me=parseInt(U,10)};h.__private__.getZoomMode=function(){return Me};var bt,ot=h.__private__.setPageMode=function(U){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(U)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+U+'" is not recognized.');st=U};h.__private__.getPageMode=function(){return st};var Le=h.__private__.setLayoutMode=function(U){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(U)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+U+'" is not recognized.');bt=U};h.__private__.getLayoutMode=function(){return bt},h.__private__.setDisplayMode=h.setDisplayMode=function(U,fe,He){return lt(U),Le(fe),ot(He),this};var Ze={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(U){if(Object.keys(Ze).indexOf(U)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ze[U]},h.__private__.getDocumentProperties=function(){return Ze},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(U){for(var fe in Ze)Ze.hasOwnProperty(fe)&&U[fe]&&(Ze[fe]=U[fe]);return this},h.__private__.setDocumentProperty=function(U,fe){if(Object.keys(Ze).indexOf(U)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ze[U]=fe};var ye,xe,ue,Ge,Je,ht={},Ue={},rt=[],Qe={},Pe={},ze={},it={},Bt=null,ut=0,It=[],$t=new I8(h),hr=e.hotfixes||[],_e={},dt={},gt=[],Ce=function U(fe,He,tt,pt,Ot,Ut){if(!(this instanceof U))return new U(fe,He,tt,pt,Ot,Ut);isNaN(fe)&&(fe=1),isNaN(He)&&(He=0),isNaN(tt)&&(tt=0),isNaN(pt)&&(pt=1),isNaN(Ot)&&(Ot=0),isNaN(Ut)&&(Ut=0),this._matrix=[fe,He,tt,pt,Ot,Ut]};Object.defineProperty(Ce.prototype,"sx",{get:function(){return this._matrix[0]},set:function(U){this._matrix[0]=U}}),Object.defineProperty(Ce.prototype,"shy",{get:function(){return this._matrix[1]},set:function(U){this._matrix[1]=U}}),Object.defineProperty(Ce.prototype,"shx",{get:function(){return this._matrix[2]},set:function(U){this._matrix[2]=U}}),Object.defineProperty(Ce.prototype,"sy",{get:function(){return this._matrix[3]},set:function(U){this._matrix[3]=U}}),Object.defineProperty(Ce.prototype,"tx",{get:function(){return this._matrix[4]},set:function(U){this._matrix[4]=U}}),Object.defineProperty(Ce.prototype,"ty",{get:function(){return this._matrix[5]},set:function(U){this._matrix[5]=U}}),Object.defineProperty(Ce.prototype,"a",{get:function(){return this._matrix[0]},set:function(U){this._matrix[0]=U}}),Object.defineProperty(Ce.prototype,"b",{get:function(){return this._matrix[1]},set:function(U){this._matrix[1]=U}}),Object.defineProperty(Ce.prototype,"c",{get:function(){return this._matrix[2]},set:function(U){this._matrix[2]=U}}),Object.defineProperty(Ce.prototype,"d",{get:function(){return this._matrix[3]},set:function(U){this._matrix[3]=U}}),Object.defineProperty(Ce.prototype,"e",{get:function(){return this._matrix[4]},set:function(U){this._matrix[4]=U}}),Object.defineProperty(Ce.prototype,"f",{get:function(){return this._matrix[5]},set:function(U){this._matrix[5]=U}}),Object.defineProperty(Ce.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ce.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ce.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ce.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ce.prototype.join=function(U){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(S).join(U)},Ce.prototype.multiply=function(U){var fe=U.sx*this.sx+U.shy*this.shx,He=U.sx*this.shy+U.shy*this.sy,tt=U.shx*this.sx+U.sy*this.shx,pt=U.shx*this.shy+U.sy*this.sy,Ot=U.tx*this.sx+U.ty*this.shx+this.tx,Ut=U.tx*this.shy+U.ty*this.sy+this.ty;return new Ce(fe,He,tt,pt,Ot,Ut)},Ce.prototype.decompose=function(){var U=this.sx,fe=this.shy,He=this.shx,tt=this.sy,pt=this.tx,Ot=this.ty,Ut=Math.sqrt(U*U+fe*fe),dr=(U/=Ut)*He+(fe/=Ut)*tt;He-=U*dr,tt-=fe*dr;var vr=Math.sqrt(He*He+tt*tt);return dr/=vr,U*(tt/=vr)<fe*(He/=vr)&&(U=-U,fe=-fe,dr=-dr,Ut=-Ut),{scale:new Ce(Ut,0,0,vr,0,0),translate:new Ce(1,0,0,1,pt,Ot),rotate:new Ce(U,fe,-fe,U,0,0),skew:new Ce(1,0,dr,1,0,0)}},Ce.prototype.toString=function(U){return this.join(" ")},Ce.prototype.inversed=function(){var U=this.sx,fe=this.shy,He=this.shx,tt=this.sy,pt=this.tx,Ot=this.ty,Ut=1/(U*tt-fe*He),dr=tt*Ut,vr=-fe*Ut,jr=-He*Ut,Mr=U*Ut;return new Ce(dr,vr,jr,Mr,-dr*pt-jr*Ot,-vr*pt-Mr*Ot)},Ce.prototype.applyToPoint=function(U){var fe=U.x*this.sx+U.y*this.shx+this.tx,He=U.x*this.shy+U.y*this.sy+this.ty;return new Kl(fe,He)},Ce.prototype.applyToRectangle=function(U){var fe=this.applyToPoint(U),He=this.applyToPoint(new Kl(U.x+U.w,U.y+U.h));return new MA(fe.x,fe.y,He.x-fe.x,He.y-fe.y)},Ce.prototype.clone=function(){var U=this.sx,fe=this.shy,He=this.shx,tt=this.sy,pt=this.tx,Ot=this.ty;return new Ce(U,fe,He,tt,pt,Ot)},h.Matrix=Ce;var et=h.matrixMult=function(U,fe){return fe.multiply(U)},yt=new Ce(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=yt;var Pt=function(U,fe){if(!Pe[U]){var He=(fe instanceof Sh?"Sh":"P")+(Object.keys(Qe).length+1).toString(10);fe.id=He,Pe[U]=He,Qe[He]=fe,$t.publish("addPattern",fe)}};h.ShadingPattern=Sh,h.TilingPattern=gm,h.addShadingPattern=function(U,fe){return I("addShadingPattern()"),Pt(U,fe),this},h.beginTilingPattern=function(U){I("beginTilingPattern()"),Eu(U.boundingBox[0],U.boundingBox[1],U.boundingBox[2]-U.boundingBox[0],U.boundingBox[3]-U.boundingBox[1],U.matrix)},h.endTilingPattern=function(U,fe){I("endTilingPattern()"),fe.stream=ne[F].join(`
`),Pt(U,fe),$t.publish("endTilingPattern",fe),gt.pop().restore()};var Lt,qt=h.__private__.newObject=function(){var U=wt();return ie(U,!0),U},wt=h.__private__.newObjectDeferred=function(){return M++,G[M]=function(){return K},M},ie=function(U,fe){return fe=typeof fe=="boolean"&&fe,G[U]=K,fe&&z(U+" 0 obj"),U},se=h.__private__.newAdditionalObject=function(){var U={objId:wt(),content:""};return ee.push(U),U},he=wt(),Ae=wt(),Be=h.__private__.decodeColorString=function(U){var fe=U.split(" ");if(fe.length!==2||fe[1]!=="g"&&fe[1]!=="G")fe.length!==5||fe[4]!=="k"&&fe[4]!=="K"||(fe=[(1-fe[0])*(1-fe[3]),(1-fe[1])*(1-fe[3]),(1-fe[2])*(1-fe[3]),"r"]);else{var He=parseFloat(fe[0]);fe=[He,He,He,"r"]}for(var tt="#",pt=0;pt<3;pt++)tt+=("0"+Math.floor(255*parseFloat(fe[pt])).toString(16)).slice(-2);return tt},Fe=h.__private__.encodeColorString=function(U){var fe;typeof U=="string"&&(U={ch1:U});var He=U.ch1,tt=U.ch2,pt=U.ch3,Ot=U.ch4,Ut=U.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof He=="string"&&He.charAt(0)!=="#"){var dr=new gJ(He);if(dr.ok)He=dr.toHex();else if(!/^\d*\.?\d*$/.test(He))throw new Error('Invalid color "'+He+'" passed to jsPDF.encodeColorString.')}if(typeof He=="string"&&/^#[0-9A-Fa-f]{3}$/.test(He)&&(He="#"+He[1]+He[1]+He[2]+He[2]+He[3]+He[3]),typeof He=="string"&&/^#[0-9A-Fa-f]{6}$/.test(He)){var vr=parseInt(He.substr(1),16);He=vr>>16&255,tt=vr>>8&255,pt=255&vr}if(tt===void 0||Ot===void 0&&He===tt&&tt===pt)fe=typeof He=="string"?He+" "+Ut[0]:U.precision===2?E(He/255)+" "+Ut[0]:j(He/255)+" "+Ut[0];else if(Ot===void 0||Rn(Ot)==="object"){if(Ot&&!isNaN(Ot.a)&&Ot.a===0)return["1.","1.","1.",Ut[1]].join(" ");fe=typeof He=="string"?[He,tt,pt,Ut[1]].join(" "):U.precision===2?[E(He/255),E(tt/255),E(pt/255),Ut[1]].join(" "):[j(He/255),j(tt/255),j(pt/255),Ut[1]].join(" ")}else fe=typeof He=="string"?[He,tt,pt,Ot,Ut[2]].join(" "):U.precision===2?[E(He),E(tt),E(pt),E(Ot),Ut[2]].join(" "):[j(He),j(tt),j(pt),j(Ot),Ut[2]].join(" ");return fe},ae=h.__private__.getFilters=function(){return o},Oe=h.__private__.putStream=function(U){var fe=(U=U||{}).data||"",He=U.filters||ae(),tt=U.alreadyAppliedFilters||[],pt=U.addLength1||!1,Ot=fe.length,Ut=U.objectId,dr=function(za){return za};if(d!==null&&Ut===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(dr=Gn.encryptor(Ut,0));var vr={};He===!0&&(He=["FlateEncode"]);var jr=U.additionalKeyValues||[],Mr=(vr=Ar.API.processDataByFilters!==void 0?Ar.API.processDataByFilters(fe,He):{data:fe,reverseChain:[]}).reverseChain+(Array.isArray(tt)?tt.join(" "):tt.toString());if(vr.data.length!==0&&(jr.push({key:"Length",value:vr.data.length}),pt===!0&&jr.push({key:"Length1",value:Ot})),Mr.length!=0)if(Mr.split("/").length-1==1)jr.push({key:"Filter",value:Mr});else{jr.push({key:"Filter",value:"["+Mr+"]"});for(var an=0;an<jr.length;an+=1)if(jr[an].key==="DecodeParms"){for(var Cn=[],Fa=0;Fa<vr.reverseChain.split("/").length-1;Fa+=1)Cn.push("null");Cn.push(jr[an].value),jr[an].value="["+Cn.join(" ")+"]"}}z("<<");for(var Bn=0;Bn<jr.length;Bn++)z("/"+jr[Bn].key+" "+jr[Bn].value);z(">>"),vr.data.length!==0&&(z("stream"),z(dr(vr.data)),z("endstream"))},pe=h.__private__.putPage=function(U){var fe=U.number,He=U.data,tt=U.objId,pt=U.contentsObjId;ie(tt,!0),z("<</Type /Page"),z("/Parent "+U.rootDictionaryObjId+" 0 R"),z("/Resources "+U.resourceDictionaryObjId+" 0 R"),z("/MediaBox ["+parseFloat(S(U.mediaBox.bottomLeftX))+" "+parseFloat(S(U.mediaBox.bottomLeftY))+" "+S(U.mediaBox.topRightX)+" "+S(U.mediaBox.topRightY)+"]"),U.cropBox!==null&&z("/CropBox ["+S(U.cropBox.bottomLeftX)+" "+S(U.cropBox.bottomLeftY)+" "+S(U.cropBox.topRightX)+" "+S(U.cropBox.topRightY)+"]"),U.bleedBox!==null&&z("/BleedBox ["+S(U.bleedBox.bottomLeftX)+" "+S(U.bleedBox.bottomLeftY)+" "+S(U.bleedBox.topRightX)+" "+S(U.bleedBox.topRightY)+"]"),U.trimBox!==null&&z("/TrimBox ["+S(U.trimBox.bottomLeftX)+" "+S(U.trimBox.bottomLeftY)+" "+S(U.trimBox.topRightX)+" "+S(U.trimBox.topRightY)+"]"),U.artBox!==null&&z("/ArtBox ["+S(U.artBox.bottomLeftX)+" "+S(U.artBox.bottomLeftY)+" "+S(U.artBox.topRightX)+" "+S(U.artBox.topRightY)+"]"),typeof U.userUnit=="number"&&U.userUnit!==1&&z("/UserUnit "+U.userUnit),$t.publish("putPage",{objId:tt,pageContext:It[fe],pageNumber:fe,page:He}),z("/Contents "+pt+" 0 R"),z(">>"),z("endobj");var Ot=He.join(`
`);return _===b&&(Ot+=`
Q`),ie(pt,!0),Oe({data:Ot,filters:ae(),objectId:pt}),z("endobj"),tt},De=h.__private__.putPages=function(){var U,fe,He=[];for(U=1;U<=ut;U++)It[U].objId=wt(),It[U].contentsObjId=wt();for(U=1;U<=ut;U++)He.push(pe({number:U,data:ne[U],objId:It[U].objId,contentsObjId:It[U].contentsObjId,mediaBox:It[U].mediaBox,cropBox:It[U].cropBox,bleedBox:It[U].bleedBox,trimBox:It[U].trimBox,artBox:It[U].artBox,userUnit:It[U].userUnit,rootDictionaryObjId:he,resourceDictionaryObjId:Ae}));ie(he,!0),z("<</Type /Pages");var tt="/Kids [";for(fe=0;fe<ut;fe++)tt+=He[fe]+" 0 R ";z(tt+"]"),z("/Count "+ut),z(">>"),z("endobj"),$t.publish("postPutPages")},Se=function(U){$t.publish("putFont",{font:U,out:z,newObject:qt,putStream:Oe}),U.isAlreadyPutted!==!0&&(U.objectNumber=qt(),z("<<"),z("/Type /Font"),z("/BaseFont /"+Ip(U.postScriptName)),z("/Subtype /Type1"),typeof U.encoding=="string"&&z("/Encoding /"+U.encoding),z("/FirstChar 32"),z("/LastChar 255"),z(">>"),z("endobj"))},Ye=function(U){U.objectNumber=qt();var fe=[];fe.push({key:"Type",value:"/XObject"}),fe.push({key:"Subtype",value:"/Form"}),fe.push({key:"BBox",value:"["+[S(U.x),S(U.y),S(U.x+U.width),S(U.y+U.height)].join(" ")+"]"}),fe.push({key:"Matrix",value:"["+U.matrix.toString()+"]"});var He=U.pages[1].join(`
`);Oe({data:He,additionalKeyValues:fe,objectId:U.objectNumber}),z("endobj")},We=function(U,fe){fe||(fe=21);var He=qt(),tt=function(Ut,dr){var vr,jr=[],Mr=1/(dr-1);for(vr=0;vr<1;vr+=Mr)jr.push(vr);if(jr.push(1),Ut[0].offset!=0){var an={offset:0,color:Ut[0].color};Ut.unshift(an)}if(Ut[Ut.length-1].offset!=1){var Cn={offset:1,color:Ut[Ut.length-1].color};Ut.push(Cn)}for(var Fa="",Bn=0,za=0;za<jr.length;za++){for(vr=jr[za];vr>Ut[Bn+1].offset;)Bn++;var Oa=Ut[Bn].offset,Wa=(vr-Oa)/(Ut[Bn+1].offset-Oa),Da=Ut[Bn].color,Mo=Ut[Bn+1].color;Fa+=D(Math.round((1-Wa)*Da[0]+Wa*Mo[0]).toString(16))+D(Math.round((1-Wa)*Da[1]+Wa*Mo[1]).toString(16))+D(Math.round((1-Wa)*Da[2]+Wa*Mo[2]).toString(16))}return Fa.trim()}(U.colors,fe),pt=[];pt.push({key:"FunctionType",value:"0"}),pt.push({key:"Domain",value:"[0.0 1.0]"}),pt.push({key:"Size",value:"["+fe+"]"}),pt.push({key:"BitsPerSample",value:"8"}),pt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),pt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Oe({data:tt,additionalKeyValues:pt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:He}),z("endobj"),U.objectNumber=qt(),z("<< /ShadingType "+U.type),z("/ColorSpace /DeviceRGB");var Ot="/Coords ["+S(parseFloat(U.coords[0]))+" "+S(parseFloat(U.coords[1]))+" ";U.type===2?Ot+=S(parseFloat(U.coords[2]))+" "+S(parseFloat(U.coords[3])):Ot+=S(parseFloat(U.coords[2]))+" "+S(parseFloat(U.coords[3]))+" "+S(parseFloat(U.coords[4]))+" "+S(parseFloat(U.coords[5])),z(Ot+="]"),U.matrix&&z("/Matrix ["+U.matrix.toString()+"]"),z("/Function "+He+" 0 R"),z("/Extend [true true]"),z(">>"),z("endobj")},Xe=function(U,fe){var He=wt(),tt=qt();fe.push({resourcesOid:He,objectOid:tt}),U.objectNumber=tt;var pt=[];pt.push({key:"Type",value:"/Pattern"}),pt.push({key:"PatternType",value:"1"}),pt.push({key:"PaintType",value:"1"}),pt.push({key:"TilingType",value:"1"}),pt.push({key:"BBox",value:"["+U.boundingBox.map(S).join(" ")+"]"}),pt.push({key:"XStep",value:S(U.xStep)}),pt.push({key:"YStep",value:S(U.yStep)}),pt.push({key:"Resources",value:He+" 0 R"}),U.matrix&&pt.push({key:"Matrix",value:"["+U.matrix.toString()+"]"}),Oe({data:U.stream,additionalKeyValues:pt,objectId:U.objectNumber}),z("endobj")},qe=function(U){for(var fe in U.objectNumber=qt(),z("<<"),U)switch(fe){case"opacity":z("/ca "+E(U[fe]));break;case"stroke-opacity":z("/CA "+E(U[fe]))}z(">>"),z("endobj")},at=function(U){ie(U.resourcesOid,!0),z("<<"),z("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var fe in z("/Font <<"),ht)ht.hasOwnProperty(fe)&&(A===!1||A===!0&&f.hasOwnProperty(fe))&&z("/"+fe+" "+ht[fe].objectNumber+" 0 R");z(">>")}(),function(){if(Object.keys(Qe).length>0){for(var fe in z("/Shading <<"),Qe)Qe.hasOwnProperty(fe)&&Qe[fe]instanceof Sh&&Qe[fe].objectNumber>=0&&z("/"+fe+" "+Qe[fe].objectNumber+" 0 R");$t.publish("putShadingPatternDict"),z(">>")}}(),function(fe){if(Object.keys(Qe).length>0){for(var He in z("/Pattern <<"),Qe)Qe.hasOwnProperty(He)&&Qe[He]instanceof h.TilingPattern&&Qe[He].objectNumber>=0&&Qe[He].objectNumber<fe&&z("/"+He+" "+Qe[He].objectNumber+" 0 R");$t.publish("putTilingPatternDict"),z(">>")}}(U.objectOid),function(){if(Object.keys(ze).length>0){var fe;for(fe in z("/ExtGState <<"),ze)ze.hasOwnProperty(fe)&&ze[fe].objectNumber>=0&&z("/"+fe+" "+ze[fe].objectNumber+" 0 R");$t.publish("putGStateDict"),z(">>")}}(),function(){for(var fe in z("/XObject <<"),_e)_e.hasOwnProperty(fe)&&_e[fe].objectNumber>=0&&z("/"+fe+" "+_e[fe].objectNumber+" 0 R");$t.publish("putXobjectDict"),z(">>")}(),z(">>"),z("endobj")},mt=function(U){Ue[U.fontName]=Ue[U.fontName]||{},Ue[U.fontName][U.fontStyle]=U.id},Kt=function(U,fe,He,tt,pt){var Ot={id:"F"+(Object.keys(ht).length+1).toString(10),postScriptName:U,fontName:fe,fontStyle:He,encoding:tt,isStandardFont:pt||!1,metadata:{}};return $t.publish("addFont",{font:Ot,instance:this}),ht[Ot.id]=Ot,mt(Ot),Ot.id},Jt=h.__private__.pdfEscape=h.pdfEscape=function(U,fe){return function(He,tt){var pt,Ot,Ut,dr,vr,jr,Mr,an,Cn;if(Ut=(tt=tt||{}).sourceEncoding||"Unicode",vr=tt.outputEncoding,(tt.autoencode||vr)&&ht[ye].metadata&&ht[ye].metadata[Ut]&&ht[ye].metadata[Ut].encoding&&(dr=ht[ye].metadata[Ut].encoding,!vr&&ht[ye].encoding&&(vr=ht[ye].encoding),!vr&&dr.codePages&&(vr=dr.codePages[0]),typeof vr=="string"&&(vr=dr[vr]),vr)){for(Mr=!1,jr=[],pt=0,Ot=He.length;pt<Ot;pt++)(an=vr[He.charCodeAt(pt)])?jr.push(String.fromCharCode(an)):jr.push(He[pt]),jr[pt].charCodeAt(0)>>8&&(Mr=!0);He=jr.join("")}for(pt=He.length;Mr===void 0&&pt!==0;)He.charCodeAt(pt-1)>>8&&(Mr=!0),pt--;if(!Mr)return He;for(jr=tt.noBOM?[]:[254,255],pt=0,Ot=He.length;pt<Ot;pt++){if((Cn=(an=He.charCodeAt(pt))>>8)>>8)throw new Error("Character at position "+pt+" of string '"+He+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");jr.push(Cn),jr.push(an-(Cn<<8))}return String.fromCharCode.apply(void 0,jr)}(U,fe).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_r=h.__private__.beginPage=function(U){ne[++ut]=[],It[ut]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(U[0]),topRightY:Number(U[1])}},mo(ut),Z(ne[F])},ta=function(U,fe){var He,tt,pt;switch(r=fe||r,typeof U=="string"&&(He=x(U.toLowerCase()),Array.isArray(He)&&(tt=He[0],pt=He[1])),Array.isArray(U)&&(tt=U[0]*xe,pt=U[1]*xe),isNaN(tt)&&(tt=a[0],pt=a[1]),(tt>14400||pt>14400)&&(Yn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),tt=Math.min(14400,tt),pt=Math.min(14400,pt)),a=[tt,pt],r.substr(0,1)){case"l":pt>tt&&(a=[pt,tt]);break;case"p":tt>pt&&(a=[pt,tt])}_r(a),Br(DA),z(Dc),Hn!==0&&z(Hn+" J"),Rf!==0&&z(Rf+" j"),$t.publish("addPage",{pageNumber:ut})},Vn=function(U){U>0&&U<=ut&&(ne.splice(U,1),It.splice(U,1),ut--,F>ut&&(F=ut),this.setPage(F))},mo=function(U){U>0&&U<=ut&&(F=U)},ss=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return ne.length-1},al=function(U,fe,He){var tt,pt=void 0;return He=He||{},U=U!==void 0?U:ht[ye].fontName,fe=fe!==void 0?fe:ht[ye].fontStyle,tt=U.toLowerCase(),Ue[tt]!==void 0&&Ue[tt][fe]!==void 0?pt=Ue[tt][fe]:Ue[U]!==void 0&&Ue[U][fe]!==void 0?pt=Ue[U][fe]:He.disableWarning===!1&&Yn.warn("Unable to look up font label for font '"+U+"', '"+fe+"'. Refer to getFontList() for available fonts."),pt||He.noFallback||(pt=Ue.times[fe])==null&&(pt=Ue.times.normal),pt},ua=h.__private__.putInfo=function(){var U=qt(),fe=function(tt){return tt};for(var He in d!==null&&(fe=Gn.encryptor(U,0)),z("<<"),z("/Producer ("+Jt(fe("jsPDF "+Ar.version))+")"),Ze)Ze.hasOwnProperty(He)&&Ze[He]&&z("/"+He.substr(0,1).toUpperCase()+He.substr(1)+" ("+Jt(fe(Ze[He]))+")");z("/CreationDate ("+Jt(fe(de))+")"),z(">>"),z("endobj")},sl=h.__private__.putCatalog=function(U){var fe=(U=U||{}).rootDictionaryObjId||he;switch(qt(),z("<<"),z("/Type /Catalog"),z("/Pages "+fe+" 0 R"),Me||(Me="fullwidth"),Me){case"fullwidth":z("/OpenAction [3 0 R /FitH null]");break;case"fullheight":z("/OpenAction [3 0 R /FitV null]");break;case"fullpage":z("/OpenAction [3 0 R /Fit]");break;case"original":z("/OpenAction [3 0 R /XYZ null null 1]");break;default:var He=""+Me;He.substr(He.length-1)==="%"&&(Me=parseInt(Me)/100),typeof Me=="number"&&z("/OpenAction [3 0 R /XYZ null null "+E(Me)+"]")}switch(bt||(bt="continuous"),bt){case"continuous":z("/PageLayout /OneColumn");break;case"single":z("/PageLayout /SinglePage");break;case"two":case"twoleft":z("/PageLayout /TwoColumnLeft");break;case"tworight":z("/PageLayout /TwoColumnRight")}st&&z("/PageMode /"+st),$t.publish("putCatalog"),z(">>"),z("endobj")},FA=h.__private__.putTrailer=function(){z("trailer"),z("<<"),z("/Size "+(M+1)),z("/Root "+M+" 0 R"),z("/Info "+(M-1)+" 0 R"),d!==null&&z("/Encrypt "+Gn.oid+" 0 R"),z("/ID [ <"+te+"> <"+te+"> ]"),z(">>")},ra=h.__private__.putHeader=function(){z("%PDF-"+m),z("%")},Nu=h.__private__.putXRef=function(){var U="0000000000";z("xref"),z("0 "+(M+1)),z("0000000000 65535 f ");for(var fe=1;fe<=M;fe++)typeof G[fe]=="function"?z((U+G[fe]()).slice(-10)+" 00000 n "):G[fe]!==void 0?z((U+G[fe]).slice(-10)+" 00000 n "):z("0000000000 00000 n ")},Ql=h.__private__.buildDocument=function(){var U;M=0,K=0,O=[],G=[],ee=[],he=wt(),Ae=wt(),Z(O),$t.publish("buildDocument"),ra(),De(),function(){$t.publish("putAdditionalObjects");for(var He=0;He<ee.length;He++){var tt=ee[He];ie(tt.objId,!0),z(tt.content),z("endobj")}$t.publish("postPutAdditionalObjects")}(),U=[],function(){for(var He in ht)ht.hasOwnProperty(He)&&(A===!1||A===!0&&f.hasOwnProperty(He))&&Se(ht[He])}(),function(){var He;for(He in ze)ze.hasOwnProperty(He)&&qe(ze[He])}(),function(){for(var He in _e)_e.hasOwnProperty(He)&&Ye(_e[He])}(),function(He){var tt;for(tt in Qe)Qe.hasOwnProperty(tt)&&(Qe[tt]instanceof Sh?We(Qe[tt]):Qe[tt]instanceof gm&&Xe(Qe[tt],He))}(U),$t.publish("putResources"),U.forEach(at),at({resourcesOid:Ae,objectOid:Number.MAX_SAFE_INTEGER}),$t.publish("postPutResources"),d!==null&&(Gn.oid=qt(),z("<<"),z("/Filter /Standard"),z("/V "+Gn.v),z("/R "+Gn.r),z("/U <"+Gn.toHexString(Gn.U)+">"),z("/O <"+Gn.toHexString(Gn.O)+">"),z("/P "+Gn.P),z(">>"),z("endobj")),ua(),sl();var fe=K;return Nu(),FA(),z("startxref"),z(""+fe),z("%%EOF"),Z(ne[F]),O.join(`
`)},dd=h.__private__.getBlob=function(U){return new Blob([ve(U)],{type:"application/pdf"})},Ff=h.output=h.__private__.output=(Lt=function(U,fe){switch(typeof(fe=fe||{})=="string"?fe={filename:fe}:fe.filename=fe.filename||"generated.pdf",U){case void 0:return Ql();case"save":h.save(fe.filename);break;case"arraybuffer":return ve(Ql());case"blob":return dd(Ql());case"bloburi":case"bloburl":if(Dr.URL!==void 0&&typeof Dr.URL.createObjectURL=="function")return Dr.URL&&Dr.URL.createObjectURL(dd(Ql()))||void 0;Yn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var He="",tt=Ql();try{He=_8(tt)}catch{He=_8(unescape(encodeURIComponent(tt)))}return"data:application/pdf;filename="+fe.filename+";base64,"+He;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Dr)==="[object Window]"){var pt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ot=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';fe.pdfObjectUrl&&(pt=fe.pdfObjectUrl,Ot="");var Ut='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+pt+'"'+Ot+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(fe)+");<\/script></body></html>",dr=Dr.open();return dr!==null&&dr.document.write(Ut),dr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Dr)==="[object Window]"){var vr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(fe.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+fe.filename+'" width="500px" height="400px" /></body></html>',jr=Dr.open();if(jr!==null){jr.document.write(vr);var Mr=this;jr.document.documentElement.querySelector("#pdfViewer").onload=function(){jr.document.title=fe.filename,jr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Mr.output("bloburl"))}}return jr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Dr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var an='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",fe)+'"></iframe></body></html>',Cn=Dr.open();if(Cn!==null&&(Cn.document.write(an),Cn.document.title=fe.filename),Cn||typeof safari>"u")return Cn;break;case"datauri":case"dataurl":return Dr.document.location.href=this.output("datauristring",fe);default:return null}},Lt.foo=function(){try{return Lt.apply(this,arguments)}catch(He){var U=He.stack||"";~U.indexOf(" at ")&&(U=U.split(" at ")[1]);var fe="Error in function "+U.split(`
`)[0].split("<")[0]+": "+He.message;if(!Dr.console)throw new Error(fe);Dr.console.error(fe,He),Dr.alert&&alert(fe)}},Lt.foo.bar=Lt,Lt.foo),Lo=function(U){return Array.isArray(hr)===!0&&hr.indexOf(U)>-1};switch(n){case"pt":xe=1;break;case"mm":xe=72/25.4;break;case"cm":xe=72/2.54;break;case"in":xe=72;break;case"px":xe=Lo("px_scaling")==1?.75:96/72;break;case"pc":case"em":xe=12;break;case"ex":xe=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);xe=n}var Gn=null;Ee(),ce();var Ps=h.__private__.getPageInfo=h.getPageInfo=function(U){if(isNaN(U)||U%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:It[U].objId,pageNumber:U,pageContext:It[U]}},Ad=h.__private__.getPageInfoByObjId=function(U){if(isNaN(U)||U%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var fe in It)if(It[fe].objId===U)break;return Ps(fe)},OA=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:It[F].objId,pageNumber:F,pageContext:It[F]}};h.addPage=function(){return ta.apply(this,arguments),this},h.setPage=function(){return mo.apply(this,arguments),Z.call(this,ne[F]),this},h.insertPage=function(U){return this.addPage(),this.movePage(F,U),this},h.movePage=function(U,fe){var He,tt;if(U>fe){He=ne[U],tt=It[U];for(var pt=U;pt>fe;pt--)ne[pt]=ne[pt-1],It[pt]=It[pt-1];ne[fe]=He,It[fe]=tt,this.setPage(fe)}else if(U<fe){He=ne[U],tt=It[U];for(var Ot=U;Ot<fe;Ot++)ne[Ot]=ne[Ot+1],It[Ot]=It[Ot+1];ne[fe]=He,It[fe]=tt,this.setPage(fe)}return this},h.deletePage=function(){return Vn.apply(this,arguments),this},h.__private__.text=h.text=function(U,fe,He,tt,pt){var Ot,Ut,dr,vr,jr,Mr,an,Cn,Fa,Bn=(tt=tt||{}).scope||this;if(typeof U=="number"&&typeof fe=="number"&&(typeof He=="string"||Array.isArray(He))){var za=He;He=fe,fe=U,U=za}if(arguments[3]instanceof Ce==0?(dr=arguments[4],vr=arguments[5],Rn(an=arguments[3])==="object"&&an!==null||(typeof dr=="string"&&(vr=dr,dr=null),typeof an=="string"&&(vr=an,an=null),typeof an=="number"&&(dr=an,an=null),tt={flags:an,angle:dr,align:vr})):(I("The transform parameter of text() with a Matrix value"),Fa=pt),isNaN(fe)||isNaN(He)||U==null)throw new Error("Invalid arguments passed to jsPDF.text");if(U.length===0)return Bn;var Oa,Wa="",Da=typeof tt.lineHeightFactor=="number"?tt.lineHeightFactor:_u,Mo=Bn.internal.scaleFactor;function zl(Sn){return Sn=Sn.split("	").join(Array(tt.TabLen||9).join(" ")),Jt(Sn,an)}function Wl(Sn){for(var zn,os=Sn.concat(),ks=[],xd=os.length;xd--;)typeof(zn=os.shift())=="string"?ks.push(zn):Array.isArray(Sn)&&(zn.length===1||zn[1]===void 0&&zn[2]===void 0)?ks.push(zn[0]):ks.push([zn[0],zn[1],zn[2]]);return ks}function N(Sn,zn){var os;if(typeof Sn=="string")os=zn(Sn)[0];else if(Array.isArray(Sn)){for(var ks,xd,jx=Sn.concat(),q0=[],Xb=jx.length;Xb--;)typeof(ks=jx.shift())=="string"?q0.push(zn(ks)[0]):Array.isArray(ks)&&typeof ks[0]=="string"&&(xd=zn(ks[0],ks[1],ks[2]),q0.push([xd[0],xd[1],xd[2]]));os=q0}return os}var q=!1,oe=!0;if(typeof U=="string")q=!0;else if(Array.isArray(U)){var Te=U.concat();Ut=[];for(var xt,St=Te.length;St--;)(typeof(xt=Te.shift())!="string"||Array.isArray(xt)&&typeof xt[0]!="string")&&(oe=!1);q=oe}if(q===!1)throw new Error('Type of text must be string or Array. "'+U+'" is not recognized.');typeof U=="string"&&(U=U.match(/[\r?\n]/)?U.split(/\r\n|\r|\n/g):[U]);var Zt=Ne/Bn.internal.scaleFactor,un=Zt*(Da-1);switch(tt.baseline){case"bottom":He-=un;break;case"top":He+=Zt-un;break;case"hanging":He+=Zt-2*un;break;case"middle":He+=Zt/2-un}if((Mr=tt.maxWidth||0)>0&&(typeof U=="string"?U=Bn.splitTextToSize(U,Mr):Object.prototype.toString.call(U)==="[object Array]"&&(U=U.reduce(function(Sn,zn){return Sn.concat(Bn.splitTextToSize(zn,Mr))},[]))),Ot={text:U,x:fe,y:He,options:tt,mutex:{pdfEscape:Jt,activeFontKey:ye,fonts:ht,activeFontSize:Ne}},$t.publish("preProcessText",Ot),U=Ot.text,dr=(tt=Ot.options).angle,Fa instanceof Ce==0&&dr&&typeof dr=="number"){dr*=Math.PI/180,tt.rotationDirection===0&&(dr=-dr),_===b&&(dr=-dr);var Ra=Math.cos(dr),Jr=Math.sin(dr);Fa=new Ce(Ra,Jr,-Jr,Ra,0,0)}else dr&&dr instanceof Ce&&(Fa=dr);_!==b||Fa||(Fa=yt),(jr=tt.charSpace||$l)!==void 0&&(Wa+=S(R(jr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Cn=tt.horizontalScale)!==void 0&&(Wa+=S(100*Cn)+` Tz
`),tt.lang;var vn=-1,na=tt.renderingMode!==void 0?tt.renderingMode:tt.stroke,ol=Bn.internal.getCurrentPageInfo().pageContext;switch(na){case 0:case!1:case"fill":vn=0;break;case 1:case!0:case"stroke":vn=1;break;case 2:case"fillThenStroke":vn=2;break;case 3:case"invisible":vn=3;break;case 4:case"fillAndAddForClipping":vn=4;break;case 5:case"strokeAndAddPathForClipping":vn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":vn=6;break;case 7:case"addToPathForClipping":vn=7}var Hi=ol.usedRenderingMode!==void 0?ol.usedRenderingMode:-1;vn!==-1?Wa+=vn+` Tr
`:Hi!==-1&&(Wa+=`0 Tr
`),vn!==-1&&(ol.usedRenderingMode=vn),vr=tt.align||"left";var xi,Rc=Ne*Da,Nx=Bn.internal.pageSize.getWidth(),Cx=ht[ye];jr=tt.charSpace||$l,Mr=tt.maxWidth||0,an=Object.assign({autoencode:!0,noBOM:!0},tt.flags);var QA=[],Uf=function(Sn){return Bn.getStringUnitWidth(Sn,{font:Cx,charSpace:jr,fontSize:Ne,doKerning:!1})*Ne/Mo};if(Object.prototype.toString.call(U)==="[object Array]"){var ll;Ut=Wl(U),vr!=="left"&&(xi=Ut.map(Uf));var cl,VA=0;if(vr==="right"){fe-=xi[0],U=[],St=Ut.length;for(var gd=0;gd<St;gd++)gd===0?(cl=Zs(fe),ll=Oc(He)):(cl=R(VA-xi[gd]),ll=-Rc),U.push([Ut[gd],cl,ll]),VA=xi[gd]}else if(vr==="center"){fe-=xi[0]/2,U=[],St=Ut.length;for(var HA=0;HA<St;HA++)HA===0?(cl=Zs(fe),ll=Oc(He)):(cl=R((VA-xi[HA])/2),ll=-Rc),U.push([Ut[HA],cl,ll]),VA=xi[HA]}else if(vr==="left"){U=[],St=Ut.length;for(var _x=0;_x<St;_x++)U.push(Ut[_x])}else if(vr==="justify"&&Cx.encoding==="Identity-H"){U=[],St=Ut.length,Mr=Mr!==0?Mr:Nx;for(var K0=0,is=0;is<St;is++)if(ll=is===0?Oc(He):-Rc,cl=is===0?Zs(fe):K0,is<St-1){var Wb=R((Mr-xi[is])/(Ut[is].split(" ").length-1)),Iu=Ut[is].split(" ");U.push([Iu[0]+" ",cl,ll]),K0=0;for(var Bu=1;Bu<Iu.length;Bu++){var Ex=(Uf(Iu[Bu-1]+" "+Iu[Bu])-Uf(Iu[Bu]))*Mo+Wb;Bu==Iu.length-1?U.push([Iu[Bu],Ex,0]):U.push([Iu[Bu]+" ",Ex,0]),K0-=Ex}}else U.push([Ut[is],cl,ll]);U.push(["",K0,0])}else{if(vr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(U=[],St=Ut.length,Mr=Mr!==0?Mr:Nx,is=0;is<St;is++){ll=is===0?Oc(He):-Rc,cl=is===0?Zs(fe):0;var Sx=Ut[is].split(" ").length-1,Ix=Sx>0?(Mr-xi[is])/Sx:0;is<St-1?QA.push(S(R(Ix))):QA.push(0),U.push([Ut[is],cl,ll])}}}(typeof tt.R2L=="boolean"?tt.R2L:nt)===!0&&(U=N(U,function(Sn,zn,os){return[Sn.split("").reverse().join(""),zn,os]})),Ot={text:U,x:fe,y:He,options:tt,mutex:{pdfEscape:Jt,activeFontKey:ye,fonts:ht,activeFontSize:Ne}},$t.publish("postProcessText",Ot),U=Ot.text,Oa=Ot.mutex.isHex||!1;var Bx=ht[ye].encoding;Bx!=="WinAnsiEncoding"&&Bx!=="StandardEncoding"||(U=N(U,function(Sn,zn,os){return[zl(Sn),zn,os]})),Ut=Wl(U),U=[];for(var $A,KA,qA,Qf=Array.isArray(Ut[0])?1:0,GA="",Vf=function(Sn,zn,os){var ks="";return os instanceof Ce?(os=typeof tt.angle=="number"?et(os,new Ce(1,0,0,1,Sn,zn)):et(new Ce(1,0,0,1,Sn,zn),os),_===b&&(os=et(new Ce(1,0,0,-1,0,0),os)),ks=os.join(" ")+` Tm
`):ks=S(Sn)+" "+S(zn)+` Td
`,ks},Xl=0;Xl<Ut.length;Xl++){switch(GA="",Qf){case 1:qA=(Oa?"<":"(")+Ut[Xl][0]+(Oa?">":")"),$A=parseFloat(Ut[Xl][1]),KA=parseFloat(Ut[Xl][2]);break;case 0:qA=(Oa?"<":"(")+Ut[Xl]+(Oa?">":")"),$A=Zs(fe),KA=Oc(He)}QA!==void 0&&QA[Xl]!==void 0&&(GA=QA[Xl]+` Tw
`),Xl===0?U.push(GA+Vf($A,KA,Fa)+qA):Qf===0?U.push(GA+qA):Qf===1&&U.push(GA+Vf($A,KA,Fa)+qA)}U=Qf===0?U.join(` Tj
T* `):U.join(` Tj
`),U+=` Tj
`;var ju=`BT
/`;return ju+=ye+" "+Ne+` Tf
`,ju+=S(Ne*Da)+` TL
`,ju+=il+`
`,ju+=Wa,ju+=U,z(ju+="ET"),f[ye]=!0,Bn};var M0=h.__private__.clip=h.clip=function(U){return z(U==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return M0("evenodd")},h.__private__.discardPath=h.discardPath=function(){return z("n"),this};var nn=h.__private__.isValidStyle=function(U){var fe=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(U)!==-1&&(fe=!0),fe};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(U){return nn(U)&&(u=U),this};var hd=h.__private__.getStyle=h.getStyle=function(U){var fe=u;switch(U){case"D":case"S":fe="S";break;case"F":fe="f";break;case"FD":case"DF":fe="B";break;case"f":case"f*":case"B":case"B*":fe=U}return fe},Cu=h.close=function(){return z("h"),this};h.stroke=function(){return z("S"),this},h.fill=function(U){return Vl("f",U),this},h.fillEvenOdd=function(U){return Vl("f*",U),this},h.fillStroke=function(U){return Vl("B",U),this},h.fillStrokeEvenOdd=function(U){return Vl("B*",U),this};var Vl=function(U,fe){Rn(fe)==="object"?gx(fe,U):z(U)},fd=function(U){U===null||_===b&&U===void 0||(U=hd(U),z(U))};function U0(U,fe,He,tt,pt){var Ot=new gm(fe||this.boundingBox,He||this.xStep,tt||this.yStep,this.gState,pt||this.matrix);Ot.stream=this.stream;var Ut=U+"$$"+this.cloneIndex+++"$$";return Pt(Ut,Ot),Ot}var gx=function(U,fe){var He=Pe[U.key],tt=Qe[He];if(tt instanceof Sh)z("q"),z(xx(fe)),tt.gState&&h.setGState(tt.gState),z(U.matrix.toString()+" cm"),z("/"+He+" sh"),z("Q");else if(tt instanceof gm){var pt=new Ce(1,0,0,-1,0,Gl());U.matrix&&(pt=pt.multiply(U.matrix||yt),He=U0.call(tt,U.key,U.boundingBox,U.xStep,U.yStep,pt).id),z("q"),z("/Pattern cs"),z("/"+He+" scn"),tt.gState&&h.setGState(tt.gState),z(fe),z("Q")}},xx=function(U){switch(U){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Of=h.moveTo=function(U,fe){return z(S(R(U))+" "+S(W(fe))+" m"),this},Q0=h.lineTo=function(U,fe){return z(S(R(U))+" "+S(W(fe))+" l"),this},gi=h.curveTo=function(U,fe,He,tt,pt,Ot){return z([S(R(U)),S(W(fe)),S(R(He)),S(W(tt)),S(R(pt)),S(W(Ot)),"c"].join(" ")),this};h.__private__.line=h.line=function(U,fe,He,tt,pt){if(isNaN(U)||isNaN(fe)||isNaN(He)||isNaN(tt)||!nn(pt))throw new Error("Invalid arguments passed to jsPDF.line");return _===y?this.lines([[He-U,tt-fe]],U,fe,[1,1],pt||"S"):this.lines([[He-U,tt-fe]],U,fe,[1,1]).stroke()},h.__private__.lines=h.lines=function(U,fe,He,tt,pt,Ot){var Ut,dr,vr,jr,Mr,an,Cn,Fa,Bn,za,Oa,Wa;if(typeof U=="number"&&(Wa=He,He=fe,fe=U,U=Wa),tt=tt||[1,1],Ot=Ot||!1,isNaN(fe)||isNaN(He)||!Array.isArray(U)||!Array.isArray(tt)||!nn(pt)||typeof Ot!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Of(fe,He),Ut=tt[0],dr=tt[1],jr=U.length,za=fe,Oa=He,vr=0;vr<jr;vr++)(Mr=U[vr]).length===2?(za=Mr[0]*Ut+za,Oa=Mr[1]*dr+Oa,Q0(za,Oa)):(an=Mr[0]*Ut+za,Cn=Mr[1]*dr+Oa,Fa=Mr[2]*Ut+za,Bn=Mr[3]*dr+Oa,za=Mr[4]*Ut+za,Oa=Mr[5]*dr+Oa,gi(an,Cn,Fa,Bn,za,Oa));return Ot&&Cu(),fd(pt),this},h.path=function(U){for(var fe=0;fe<U.length;fe++){var He=U[fe],tt=He.c;switch(He.op){case"m":Of(tt[0],tt[1]);break;case"l":Q0(tt[0],tt[1]);break;case"c":gi.apply(this,tt);break;case"h":Cu()}}return this},h.__private__.rect=h.rect=function(U,fe,He,tt,pt){if(isNaN(U)||isNaN(fe)||isNaN(He)||isNaN(tt)||!nn(pt))throw new Error("Invalid arguments passed to jsPDF.rect");return _===y&&(tt=-tt),z([S(R(U)),S(W(fe)),S(R(He)),S(R(tt)),"re"].join(" ")),fd(pt),this},h.__private__.triangle=h.triangle=function(U,fe,He,tt,pt,Ot,Ut){if(isNaN(U)||isNaN(fe)||isNaN(He)||isNaN(tt)||isNaN(pt)||isNaN(Ot)||!nn(Ut))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[He-U,tt-fe],[pt-He,Ot-tt],[U-pt,fe-Ot]],U,fe,[1,1],Ut,!0),this},h.__private__.roundedRect=h.roundedRect=function(U,fe,He,tt,pt,Ot,Ut){if(isNaN(U)||isNaN(fe)||isNaN(He)||isNaN(tt)||isNaN(pt)||isNaN(Ot)||!nn(Ut))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var dr=4/3*(Math.SQRT2-1);return pt=Math.min(pt,.5*He),Ot=Math.min(Ot,.5*tt),this.lines([[He-2*pt,0],[pt*dr,0,pt,Ot-Ot*dr,pt,Ot],[0,tt-2*Ot],[0,Ot*dr,-pt*dr,Ot,-pt,Ot],[2*pt-He,0],[-pt*dr,0,-pt,-Ot*dr,-pt,-Ot],[0,2*Ot-tt],[0,-Ot*dr,pt*dr,-Ot,pt,-Ot]],U+pt,fe,[1,1],Ut,!0),this},h.__private__.ellipse=h.ellipse=function(U,fe,He,tt,pt){if(isNaN(U)||isNaN(fe)||isNaN(He)||isNaN(tt)||!nn(pt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ot=4/3*(Math.SQRT2-1)*He,Ut=4/3*(Math.SQRT2-1)*tt;return Of(U+He,fe),gi(U+He,fe-Ut,U+Ot,fe-tt,U,fe-tt),gi(U-Ot,fe-tt,U-He,fe-Ut,U-He,fe),gi(U-He,fe+Ut,U-Ot,fe+tt,U,fe+tt),gi(U+Ot,fe+tt,U+He,fe+Ut,U+He,fe),fd(pt),this},h.__private__.circle=h.circle=function(U,fe,He,tt){if(isNaN(U)||isNaN(fe)||isNaN(He)||!nn(tt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(U,fe,He,He,tt)},h.setFont=function(U,fe,He){return He&&(fe=C(fe,He)),ye=al(U,fe,{disableWarning:!1}),this};var Hl=h.__private__.getFont=h.getFont=function(){return ht[al.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var U,fe,He={};for(U in Ue)if(Ue.hasOwnProperty(U))for(fe in He[U]=[],Ue[U])Ue[U].hasOwnProperty(fe)&&He[U].push(fe);return He},h.addFont=function(U,fe,He,tt,pt){var Ot=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ot.indexOf(arguments[3])!==-1?pt=arguments[3]:arguments[3]&&Ot.indexOf(arguments[3])==-1&&(He=C(He,tt)),Kt.call(this,U,fe,He,pt=pt||"Identity-H")};var _u,DA=e.lineWidth||.200025,V0=h.__private__.getLineWidth=h.getLineWidth=function(){return DA},Br=h.__private__.setLineWidth=h.setLineWidth=function(U){return DA=U,z(S(R(U))+" w"),this};h.__private__.setLineDash=Ar.API.setLineDash=Ar.API.setLineDashPattern=function(U,fe){if(U=U||[],fe=fe||0,isNaN(fe)||!Array.isArray(U))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return U=U.map(function(He){return S(R(He))}).join(" "),fe=S(R(fe)),z("["+U+"] "+fe+" d"),this};var vx=h.__private__.getLineHeight=h.getLineHeight=function(){return Ne*_u};h.__private__.getLineHeight=h.getLineHeight=function(){return Ne*_u};var yx=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(U){return typeof(U=U||1.15)=="number"&&(_u=U),this},bx=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return _u};yx(e.lineHeight);var Zs=h.__private__.getHorizontalCoordinate=function(U){return R(U)},Oc=h.__private__.getVerticalCoordinate=function(U){return _===b?U:It[F].mediaBox.topRightY-It[F].mediaBox.bottomLeftY-R(U)},wx=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(U){return S(Zs(U))},RA=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(U){return S(Oc(U))},Dc=e.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return Be(Dc)},h.__private__.setStrokeColor=h.setDrawColor=function(U,fe,He,tt){return Dc=Fe({ch1:U,ch2:fe,ch3:He,ch4:tt,pdfColorType:"draw",precision:2}),z(Dc),this};var LA=e.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return Be(LA)},h.__private__.setFillColor=h.setFillColor=function(U,fe,He,tt){return LA=Fe({ch1:U,ch2:fe,ch3:He,ch4:tt,pdfColorType:"fill",precision:2}),z(LA),this};var il=e.textColor||"0 g",md=h.__private__.getTextColor=h.getTextColor=function(){return Be(il)};h.__private__.setTextColor=h.setTextColor=function(U,fe,He,tt){return il=Fe({ch1:U,ch2:fe,ch3:He,ch4:tt,pdfColorType:"text",precision:3}),this};var $l=e.charSpace,Df=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat($l||0)};h.__private__.setCharSpace=h.setCharSpace=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return $l=U,this};var Hn=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(U){var fe=h.CapJoinStyles[U];if(fe===void 0)throw new Error("Line cap style of '"+U+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Hn=fe,z(fe+" J"),this};var Rf=0;h.__private__.setLineJoin=h.setLineJoin=function(U){var fe=h.CapJoinStyles[U];if(fe===void 0)throw new Error("Line join style of '"+U+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Rf=fe,z(fe+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(U){if(U=U||0,isNaN(U))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return z(S(R(U))+" M"),this},h.GState=A1,h.setGState=function(U){(U=typeof U=="string"?ze[it[U]]:H0(null,U)).equals(Bt)||(z("/"+U.id+" gs"),Bt=U)};var H0=function(U,fe){if(!U||!it[U]){var He=!1;for(var tt in ze)if(ze.hasOwnProperty(tt)&&ze[tt].equals(fe)){He=!0;break}if(He)fe=ze[tt];else{var pt="GS"+(Object.keys(ze).length+1).toString(10);ze[pt]=fe,fe.id=pt}return U&&(it[U]=fe.id),$t.publish("addGState",fe),fe}};h.addGState=function(U,fe){return H0(U,fe),this},h.saveGraphicsState=function(){return z("q"),rt.push({key:ye,size:Ne,color:il}),this},h.restoreGraphicsState=function(){z("Q");var U=rt.pop();return ye=U.key,Ne=U.size,il=U.color,Bt=null,this},h.setCurrentTransformationMatrix=function(U){return z(U.toString()+" cm"),this},h.comment=function(U){return z("#"+U),this};var Kl=function(U,fe){var He=U||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return He},set:function(Ot){isNaN(Ot)||(He=parseFloat(Ot))}});var tt=fe||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return tt},set:function(Ot){isNaN(Ot)||(tt=parseFloat(Ot))}});var pt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return pt},set:function(Ot){pt=Ot.toString()}}),this},MA=function(U,fe,He,tt){Kl.call(this,U,fe),this.type="rect";var pt=He||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return pt},set:function(Ut){isNaN(Ut)||(pt=parseFloat(Ut))}});var Ot=tt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ot},set:function(Ut){isNaN(Ut)||(Ot=parseFloat(Ut))}}),this},pd=function(){this.page=ut,this.currentPage=F,this.pages=ne.slice(0),this.pagesContext=It.slice(0),this.x=ue,this.y=Ge,this.matrix=Je,this.width=po(F),this.height=$0(F),this.outputDestination=be,this.id="",this.objectNumber=-1};pd.prototype.restore=function(){ut=this.page,F=this.currentPage,It=this.pagesContext,ne=this.pages,ue=this.x,Ge=this.y,Je=this.matrix,Lf(F,this.width),go(F,this.height),be=this.outputDestination};var Eu=function(U,fe,He,tt,pt){gt.push(new pd),ut=F=0,ne=[],ue=U,Ge=fe,Je=pt,_r([He,tt])};for(var Su in h.beginFormObject=function(U,fe,He,tt,pt){return Eu(U,fe,He,tt,pt),this},h.endFormObject=function(U){return function(fe){if(dt[fe])gt.pop().restore();else{var He=new pd,tt="Xo"+(Object.keys(_e).length+1).toString(10);He.id=tt,dt[fe]=tt,_e[tt]=He,$t.publish("addFormObject",He),gt.pop().restore()}}(U),this},h.doFormObject=function(U,fe){var He=_e[dt[U]];return z("q"),z(fe.toString()+" cm"),z("/"+He.id+" Do"),z("Q"),this},h.getFormObject=function(U){var fe=_e[dt[U]];return{x:fe.x,y:fe.y,width:fe.width,height:fe.height,matrix:fe.matrix}},h.save=function(U,fe){return U=U||"generated.pdf",(fe=fe||{}).returnPromise=fe.returnPromise||!1,fe.returnPromise===!1?(rm(dd(Ql()),U),typeof rm.unload=="function"&&Dr.setTimeout&&setTimeout(rm.unload,911),this):new Promise(function(He,tt){try{var pt=rm(dd(Ql()),U);typeof rm.unload=="function"&&Dr.setTimeout&&setTimeout(rm.unload,911),He(pt)}catch(Ot){tt(Ot.message)}})},Ar.API)Ar.API.hasOwnProperty(Su)&&(Su==="events"&&Ar.API.events.length?function(U,fe){var He,tt,pt;for(pt=fe.length-1;pt!==-1;pt--)He=fe[pt][0],tt=fe[pt][1],U.subscribe.apply(U,[He].concat(typeof tt=="function"?[tt]:tt))}($t,Ar.API.events):h[Su]=Ar.API[Su]);function po(U){return It[U].mediaBox.topRightX-It[U].mediaBox.bottomLeftX}function Lf(U,fe){It[U].mediaBox.topRightX=fe+It[U].mediaBox.bottomLeftX}function $0(U){return It[U].mediaBox.topRightY-It[U].mediaBox.bottomLeftY}function go(U,fe){It[U].mediaBox.topRightY=fe+It[U].mediaBox.bottomLeftY}var ql=h.getPageWidth=function(U){return po(U=U||F)/xe},UA=h.setPageWidth=function(U,fe){Lf(U,fe*xe)},Gl=h.getPageHeight=function(U){return $0(U=U||F)/xe},Mf=h.setPageHeight=function(U,fe){go(U,fe*xe)};return h.internal={pdfEscape:Jt,getStyle:hd,getFont:Hl,getFontSize:Ve,getCharSpace:Df,getTextColor:md,getLineHeight:vx,getLineHeightFactor:bx,getLineWidth:V0,write:X,getHorizontalCoordinate:Zs,getVerticalCoordinate:Oc,getCoordinateString:wx,getVerticalCoordinateString:RA,collections:{},newObject:qt,newAdditionalObject:se,newObjectDeferred:wt,newObjectDeferredBegin:ie,getFilters:ae,putStream:Oe,events:$t,scaleFactor:xe,pageSize:{getWidth:function(){return ql(F)},setWidth:function(U){UA(F,U)},getHeight:function(){return Gl(F)},setHeight:function(U){Mf(F,U)}},encryptionOptions:d,encryption:Gn,getEncryptor:function(U){return d!==null?Gn.encryptor(U,0):function(fe){return fe}},output:Ff,getNumberOfPages:ss,get pages(){return ne},out:z,f2:E,f3:j,getPageInfo:Ps,getPageInfoByObjId:Ad,getCurrentPageInfo:OA,getPDFVersion:p,Point:Kl,Rectangle:MA,Matrix:Ce,hasHotfix:Lo},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return ql(F)},set:function(U){UA(F,U)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return Gl(F)},set:function(U){Mf(F,U)},enumerable:!0,configurable:!0}),(function(U){for(var fe=0,He=re.length;fe<He;fe++){var tt=Kt.call(this,U[fe][0],U[fe][1],U[fe][2],re[fe][3],!0);A===!1&&(f[tt]=!0);var pt=U[fe][0].split("-");mt({id:tt,fontName:pt[0],fontStyle:pt[1]||""})}$t.publish("addFonts",{fonts:ht,dictionary:Ue})}).call(h,re),ye="F1",ta(a,r),$t.publish("initialized"),h}Sp.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},Sp.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Sp.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Sp.prototype.processOwnerPassword=function(e,t){return bk(yk(t).substr(0,5),e)},Sp.prototype.encryptor=function(e,t){var r=yk(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return bk(r,n)}},A1.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Rn(e)!==Rn(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},Ar.API={events:[]},Ar.version="3.0.4";var Ya=Ar.API,t3=1,S0=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},op=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Qr=function(e){return e.toFixed(2)},ih=function(e){return e.toFixed(5)};Ya.__acroform__={};var rl=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},B8=function(e){return e*t3},Ru=function(e){var t=new bJ,r=gr.internal.getHeight(e)||0,n=gr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Qr(n)),Number(Qr(r))],t},z2e=Ya.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},W2e=Ya.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},X2e=Ya.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},ps=Ya.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return X2e(e,t-1)},gs=Ya.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return z2e(e,t-1)},xs=Ya.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return W2e(e,t-1)},J2e=Ya.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],s=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(s+l)||0,c.upperRight_X=r(a+o)||0,c.upperRight_Y=n(s)||0,[Number(Qr(c.lowerLeft_X)),Number(Qr(c.lowerLeft_Y)),Number(Qr(c.upperRight_X)),Number(Qr(c.upperRight_Y))]},Y2e=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=wk(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+Qr(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=Ru(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},wk=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(E){return E.split(`
`)}):a.map(function(E){return[E]});var s=r,o=gr.internal.getHeight(e)||0;o=o<0?-o:o;var l=gr.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(E,j,R){if(E+1<a.length){var W=j+" "+a[E+1][0];return h2(W,e,R).width<=l-4}return!1};s++;e:for(;s>0;){t="",s--;var u,d,A=h2("3",e,s).height,f=e.multiline?o-s:(o-A)/2,h=f+=2,m=0,p=0,g=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+h2(t,e,s=12).width+", FieldWidth:"+l+`
`;break}for(var x="",y=0,b=0;b<a.length;b++)if(a.hasOwnProperty(b)){var _=!1;if(a[b].length!==1&&g!==a[b].length-1){if((A+2)*(y+2)+2>o)continue e;x+=a[b][g],_=!0,p=b,b--}else{x=(x+=a[b][g]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var T=parseInt(b),P=c(T,x,s),C=b>=a.length-1;if(P&&!C){x+=" ",g=0;continue}if(P||C){if(C)p=T;else if(e.multiline&&(A+2)*(y+2)+2>o)continue e}else{if(!e.multiline||(A+2)*(y+2)+2>o)continue e;p=T}}for(var S="",I=m;I<=p;I++){var L=a[I];if(e.multiline){if(I===p){S+=L[g]+" ",g=(g+1)%L.length;continue}if(I===m){S+=L[L.length-1]+" ";continue}}S+=L[0]+" "}switch(S=S.substr(S.length-1)==" "?S.substr(0,S.length-1):S,d=h2(S,e,s).width,e.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;default:u=2}t+=Qr(u)+" "+Qr(h)+` Td
`,t+="("+S0(S)+`) Tj
`,t+=-Qr(u)+` 0 Td
`,h=-(s+2),d=0,m=_?p:p+1,y++,x=""}break}return n.text=t,n.fontSize=s,n},h2=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},Z2e={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},eNe=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},tNe=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(vu.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(Z2e)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");t3=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new wJ,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&eNe(s,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var o in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],u=l.Rect;if(l.Rect&&(l.Rect=J2e(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=gr.createDefaultAppearanceStream(l),Rn(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=Y2e(l);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var A="";for(var f in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(f)){var h=l.appearanceStreamContent[f];if(A+="/"+f+" ",A+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var o in h)if(h.hasOwnProperty(o)){var m=h[o];typeof m=="function"&&(m=m.call(a,l)),A+="/"+o+" "+m+" ",a.internal.acroformPlugin.xForms.indexOf(m)>=0||a.internal.acroformPlugin.xForms.push(m)}}else typeof(m=h)=="function"&&(m=m.call(a,l)),A+="/"+o+" "+m,a.internal.acroformPlugin.xForms.indexOf(m)>=0||a.internal.acroformPlugin.xForms.push(m);A+=">>"}c.push({key:"AP",value:`<<
`+A+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}s&&function(p,g){for(var x in p)if(p.hasOwnProperty(x)){var y=x,b=p[x];g.internal.newObjectDeferredBegin(b.objId,!0),Rn(b)==="object"&&typeof b.putStream=="function"&&b.putStream(),delete p[y]}}(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},yJ=Ya.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(o){return o};if(Array.isArray(e)){for(var a="[",s=0;s<e.length;s++)switch(s!==0&&(a+=" "),Rn(e[s])){case"boolean":case"number":case"object":a+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+S0(n(e[s].toString()))+")"):a+=e[s].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},fj=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+S0(n(e))+")"},Ku=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ku.prototype.toString=function(){return this.objId+" 0 R"},Ku.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Ku.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:yJ(a,this.objId,this.scope)}):a instanceof Ku?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var bJ=function(){Ku.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};rl(bJ,Ku);var wJ=function(){Ku.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+S0(r(e))+")"}},set:function(r){e=r}})};rl(wJ,Ku);var vu=function e(){Ku.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');t=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ps(t,3)},set:function(x){x?this.F=gs(t,3):this.F=xs(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');r=x}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(x){n=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(x){n[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(x){n[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(x){n[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(x){n[3]=x}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof GC)return;s="FieldObject"+e.FieldNum++}var x=function(y){return y};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+S0(x(s))+")"},set:function(x){s=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(x){s=x}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(x){o=x}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(x){l=x}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(x){c=x}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/t3:u},set:function(x){u=x}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(x){d=x}});var A="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!A||this instanceof GC||this instanceof Zh))return fj(A,this.objId,this.scope)},set:function(x){x=x.toString(),A=x}});var f=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Ms==0?fj(f,this.objId,this.scope):f},set:function(x){x=x.toString(),f=this instanceof Ms==0?x.substr(0,1)==="("?op(x.substr(1,x.length-2)):op(x):x}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ms==1?op(f.substr(1,f.length-1)):f},set:function(x){x=x.toString(),f=this instanceof Ms==1?"/"+x:x}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Ms==0?fj(h,this.objId,this.scope):h},set:function(x){x=x.toString(),h=this instanceof Ms==0?x.substr(0,1)==="("?op(x.substr(1,x.length-2)):op(x):x}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ms==1?op(h.substr(1,h.length-1)):h},set:function(x){x=x.toString(),h=this instanceof Ms==1?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,p=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return p},set:function(x){x=!!x,p=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(x){m=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,1)},set:function(x){x?this.Ff=gs(this.Ff,1):this.Ff=xs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,2)},set:function(x){x?this.Ff=gs(this.Ff,2):this.Ff=xs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,3)},set:function(x){x?this.Ff=gs(this.Ff,3):this.Ff=xs(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(g!==null)return g},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');g=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(g){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};rl(vu,Ku);var Sm=function(){vu.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return yJ(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,o,l){l||(l=1);for(var c,u=[];c=o.exec(s);)u.push(c[l]);return u}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,18)},set:function(r){r?this.Ff=gs(this.Ff,18):this.Ff=xs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=gs(this.Ff,19):this.Ff=xs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,20)},set:function(r){r?(this.Ff=gs(this.Ff,20),t.sort()):this.Ff=xs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,22)},set:function(r){r?this.Ff=gs(this.Ff,22):this.Ff=xs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,23)},set:function(r){r?this.Ff=gs(this.Ff,23):this.Ff=xs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,27)},set:function(r){r?this.Ff=gs(this.Ff,27):this.Ff=xs(this.Ff,27)}}),this.hasAppearanceStream=!1};rl(Sm,vu);var Im=function(){Sm.call(this),this.fontName="helvetica",this.combo=!1};rl(Im,Sm);var Bm=function(){Im.call(this),this.combo=!0};rl(Bm,Im);var Ay=function(){Bm.call(this),this.edit=!0};rl(Ay,Bm);var Ms=function(){vu.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,15)},set:function(r){r?this.Ff=gs(this.Ff,15):this.Ff=xs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,16)},set:function(r){r?this.Ff=gs(this.Ff,16):this.Ff=xs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,17)},set:function(r){r?this.Ff=gs(this.Ff,17):this.Ff=xs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,26)},set:function(r){r?this.Ff=gs(this.Ff,26):this.Ff=xs(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+S0(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){Rn(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};rl(Ms,vu);var hy=function(){Ms.call(this),this.pushButton=!0};rl(hy,Ms);var jm=function(){Ms.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};rl(jm,Ms);var GC=function(){var e,t;vu.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),n)o.push("/"+s+" ("+S0(a(n[s]))+")");return o.push(">>"),o.join(`
`)},set:function(a){Rn(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=gr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};rl(GC,vu),jm.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},jm.prototype.createOption=function(e){var t=new GC;return t.Parent=this,t.optionName=e,this.Kids.push(t),rNe.call(this.scope,t),t};var fy=function(){Ms.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=gr.CheckBox.createAppearanceStream()};rl(fy,Ms);var Zh=function(){vu.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,13)},set:function(t){t?this.Ff=gs(this.Ff,13):this.Ff=xs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,21)},set:function(t){t?this.Ff=gs(this.Ff,21):this.Ff=xs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,23)},set:function(t){t?this.Ff=gs(this.Ff,23):this.Ff=xs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,24)},set:function(t){t?this.Ff=gs(this.Ff,24):this.Ff=xs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,25)},set:function(t){t?this.Ff=gs(this.Ff,25):this.Ff=xs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,26)},set:function(t){t?this.Ff=gs(this.Ff,26):this.Ff=xs(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};rl(Zh,vu);var my=function(){Zh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ps(this.Ff,14)},set:function(e){e?this.Ff=gs(this.Ff,14):this.Ff=xs(this.Ff,14)}}),this.password=!0};rl(my,Zh);var gr={CheckBox:{createAppearanceStream:function(){return{N:{On:gr.CheckBox.YesNormal},D:{On:gr.CheckBox.YesPushDown,Off:gr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Ru(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=wk(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Qr(gr.internal.getWidth(e))+" "+Qr(gr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Qr(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Ru(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],s=gr.internal.getHeight(e),o=gr.internal.getWidth(e),l=wk(e,e.caption);return a.push("1 g"),a.push("0 0 "+Qr(o)+" "+Qr(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Qr(o-1)+" "+Qr(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+Qr(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=Ru(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Qr(gr.internal.getWidth(e))+" "+Qr(gr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:gr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=gr.RadioButton.Circle.YesNormal,t.D[e]=gr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Ru(e);t.scope=e.scope;var r=[],n=gr.internal.getWidth(e)<=gr.internal.getHeight(e)?gr.internal.getWidth(e)/4:gr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=gr.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+ih(gr.internal.getWidth(e)/2)+" "+ih(gr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Ru(e);t.scope=e.scope;var r=[],n=gr.internal.getWidth(e)<=gr.internal.getHeight(e)?gr.internal.getWidth(e)/4:gr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*gr.internal.Bezier_C).toFixed(5)),o=Number((n*gr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+ih(gr.internal.getWidth(e)/2)+" "+ih(gr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+ih(gr.internal.getWidth(e)/2)+" "+ih(gr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Ru(e);t.scope=e.scope;var r=[],n=gr.internal.getWidth(e)<=gr.internal.getHeight(e)?gr.internal.getWidth(e)/4:gr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*gr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+ih(gr.internal.getWidth(e)/2)+" "+ih(gr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:gr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=gr.RadioButton.Cross.YesNormal,t.D[e]=gr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Ru(e);t.scope=e.scope;var r=[],n=gr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Qr(gr.internal.getWidth(e)-2)+" "+Qr(gr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Qr(n.x1.x)+" "+Qr(n.x1.y)+" m"),r.push(Qr(n.x2.x)+" "+Qr(n.x2.y)+" l"),r.push(Qr(n.x4.x)+" "+Qr(n.x4.y)+" m"),r.push(Qr(n.x3.x)+" "+Qr(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Ru(e);t.scope=e.scope;var r=gr.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+Qr(gr.internal.getWidth(e))+" "+Qr(gr.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Qr(gr.internal.getWidth(e)-2)+" "+Qr(gr.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Qr(r.x1.x)+" "+Qr(r.x1.y)+" m"),n.push(Qr(r.x2.x)+" "+Qr(r.x2.y)+" l"),n.push(Qr(r.x4.x)+" "+Qr(r.x4.y)+" m"),n.push(Qr(r.x3.x)+" "+Qr(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Ru(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Qr(gr.internal.getWidth(e))+" "+Qr(gr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};gr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=gr.internal.getWidth(e),r=gr.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},gr.internal.getWidth=function(e){var t=0;return Rn(e)==="object"&&(t=B8(e.Rect[2])),t},gr.internal.getHeight=function(e){var t=0;return Rn(e)==="object"&&(t=B8(e.Rect[3])),t};var rNe=Ya.addField=function(e){if(tNe(this,e),!(e instanceof vu))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Ya.AcroFormChoiceField=Sm,Ya.AcroFormListBox=Im,Ya.AcroFormComboBox=Bm,Ya.AcroFormEditBox=Ay,Ya.AcroFormButton=Ms,Ya.AcroFormPushButton=hy,Ya.AcroFormRadioButton=jm,Ya.AcroFormCheckBox=fy,Ya.AcroFormTextField=Zh,Ya.AcroFormPasswordField=my,Ya.AcroFormAppearance=gr,Ya.AcroForm={ChoiceField:Sm,ListBox:Im,ComboBox:Bm,EditBox:Ay,Button:Ms,PushButton:hy,RadioButton:jm,CheckBox:fy,TextField:Zh,PasswordField:my,Appearance:gr},Ar.AcroForm={ChoiceField:Sm,ListBox:Im,ComboBox:Bm,EditBox:Ay,Button:Ms,PushButton:hy,RadioButton:jm,CheckBox:fy,TextField:Zh,PasswordField:my,Appearance:gr};var nNe=Ar.AcroForm;function NJ(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(E,j){var R,W,de,te,le,ce=r;if((j=j||r)==="RGBA"||E.data!==void 0&&E.data instanceof Uint8ClampedArray&&"height"in E&&"width"in E)return"RGBA";if(P(E))for(le in n)for(de=n[le],R=0;R<de.length;R+=1){for(te=!0,W=0;W<de[R].length;W+=1)if(de[R][W]!==void 0&&de[R][W]!==E[W]){te=!1;break}if(te===!0){ce=le;break}}else for(le in n)for(de=n[le],R=0;R<de.length;R+=1){for(te=!0,W=0;W<de[R].length;W+=1)if(de[R][W]!==void 0&&de[R][W]!==E.charCodeAt(W)){te=!1;break}if(te===!0){ce=le;break}}return ce===r&&j!==r&&(ce=j),ce},s=function E(j){for(var R=this.internal.write,W=this.internal.putStream,de=(0,this.internal.getFilters)();de.indexOf("FlateEncode")!==-1;)de.splice(de.indexOf("FlateEncode"),1);j.objectId=this.internal.newObject();var te=[];if(te.push({key:"Type",value:"/XObject"}),te.push({key:"Subtype",value:"/Image"}),te.push({key:"Width",value:j.width}),te.push({key:"Height",value:j.height}),j.colorSpace===x.INDEXED?te.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(j.palette.length/3-1)+" "+("sMask"in j&&j.sMask!==void 0?j.objectId+2:j.objectId+1)+" 0 R]"}):(te.push({key:"ColorSpace",value:"/"+j.colorSpace}),j.colorSpace===x.DEVICE_CMYK&&te.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),te.push({key:"BitsPerComponent",value:j.bitsPerComponent}),"decodeParameters"in j&&j.decodeParameters!==void 0&&te.push({key:"DecodeParms",value:"<<"+j.decodeParameters+">>"}),"transparency"in j&&Array.isArray(j.transparency)&&j.transparency.length>0){for(var le="",ce=0,J=j.transparency.length;ce<J;ce++)le+=j.transparency[ce]+" "+j.transparency[ce]+" ";te.push({key:"Mask",value:"["+le+"]"})}j.sMask!==void 0&&te.push({key:"SMask",value:j.objectId+1+" 0 R"});var me=j.filter!==void 0?["/"+j.filter]:void 0;if(W({data:j.data,additionalKeyValues:te,alreadyAppliedFilters:me,objectId:j.objectId}),R("endobj"),"sMask"in j&&j.sMask!==void 0){var Ee,k=(Ee=j.sMaskBitsPerComponent)!==null&&Ee!==void 0?Ee:j.bitsPerComponent,F={width:j.width,height:j.height,colorSpace:"DeviceGray",bitsPerComponent:k,data:j.sMask};"filter"in j&&(F.decodeParameters="/Predictor ".concat(j.predictor," /Colors 1 /BitsPerComponent ").concat(k," /Columns ").concat(j.width),F.filter=j.filter),E.call(this,F)}if(j.colorSpace===x.INDEXED){var V=this.internal.newObject();W({data:S(new Uint8Array(j.palette)),objectId:V}),R("endobj")}},o=function(){var E=this.internal.collections[t+"images"];for(var j in E)s.call(this,E[j])},l=function(){var E,j=this.internal.collections[t+"images"],R=this.internal.write;for(var W in j)R("/I"+(E=j[W]).index,E.objectId,"0","R")},c=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},u=function(){var E=this.internal.collections[t+"images"];return c.call(this),E},d=function(){return Object.keys(this.internal.collections[t+"images"]).length},A=function(E){return typeof e["process"+E.toUpperCase()]=="function"},f=function(E){return Rn(E)==="object"&&E.nodeType===1},h=function(E,j){if(E.nodeName==="IMG"&&E.hasAttribute("src")){var R=""+E.getAttribute("src");if(R.indexOf("data:image/")===0)return RN(unescape(R).split("base64,").pop());var W=e.loadFile(R,!0);if(W!==void 0)return W}if(E.nodeName==="CANVAS"){if(E.width===0||E.height===0)throw new Error("Given canvas must have data. Canvas width: "+E.width+", height: "+E.height);var de;switch(j){case"PNG":de="image/png";break;case"WEBP":de="image/webp";break;default:de="image/jpeg"}return RN(E.toDataURL(de,1).split("base64,").pop())}},m=function(E){var j=this.internal.collections[t+"images"];if(j){for(var R in j)if(E===j[R].alias)return j[R]}},p=function(E,j,R){return E||j||(E=-96,j=-96),E<0&&(E=-1*R.width*72/E/this.internal.scaleFactor),j<0&&(j=-1*R.height*72/j/this.internal.scaleFactor),E===0&&(E=j*R.width/R.height),j===0&&(j=E*R.height/R.width),[E,j]},g=function(E,j,R,W,de,te){var le=p.call(this,R,W,de),ce=this.internal.getCoordinateString,J=this.internal.getVerticalCoordinateString,me=u.call(this);if(R=le[0],W=le[1],me[de.index]=de,te){te*=Math.PI/180;var Ee=Math.cos(te),k=Math.sin(te),F=function(D){return D.toFixed(4)},V=[F(Ee),F(k),F(-1*k),F(Ee),0,0,"cm"]}this.internal.write("q"),te?(this.internal.write([1,"0","0",1,ce(E),J(j+W),"cm"].join(" ")),this.internal.write(V.join(" ")),this.internal.write([ce(R),"0","0",ce(W),"0","0","cm"].join(" "))):this.internal.write([ce(R),"0","0",ce(W),ce(E),J(j+W),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+de.index+" Do"),this.internal.write("Q")},x=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=e.__addimage__.sHashCode=function(E){var j,R,W=0;if(typeof E=="string")for(R=E.length,j=0;j<R;j++)W=(W<<5)-W+E.charCodeAt(j),W|=0;else if(P(E))for(R=E.byteLength/2,j=0;j<R;j++)W=(W<<5)-W+E[j],W|=0;return W},_=e.__addimage__.validateStringAsBase64=function(E){(E=E||"").toString().trim();var j=!0;return E.length===0&&(j=!1),E.length%4!=0&&(j=!1),/^[A-Za-z0-9+/]+$/.test(E.substr(0,E.length-2))===!1&&(j=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(E.substr(-2))===!1&&(j=!1),j},T=e.__addimage__.extractImageFromDataUrl=function(E){if(E==null||!(E=E.trim()).startsWith("data:"))return null;var j=E.indexOf(",");return j<0?null:E.substring(0,j).trim().endsWith("base64")?E.substring(j+1):null};e.__addimage__.isArrayBuffer=function(E){return E instanceof ArrayBuffer};var P=e.__addimage__.isArrayBufferView=function(E){return E instanceof Int8Array||E instanceof Uint8Array||E instanceof Uint8ClampedArray||E instanceof Int16Array||E instanceof Uint16Array||E instanceof Int32Array||E instanceof Uint32Array||E instanceof Float32Array||E instanceof Float64Array},C=e.__addimage__.binaryStringToUint8Array=function(E){for(var j=E.length,R=new Uint8Array(j),W=0;W<j;W++)R[W]=E.charCodeAt(W);return R},S=e.__addimage__.arrayBufferToBinaryString=function(E){for(var j="",R=P(E)?E:new Uint8Array(E),W=0;W<R.length;W+=8192)j+=String.fromCharCode.apply(null,R.subarray(W,W+8192));return j};e.addImage=function(){var E,j,R,W,de,te,le,ce,J;if(typeof arguments[1]=="number"?(j=r,R=arguments[1],W=arguments[2],de=arguments[3],te=arguments[4],le=arguments[5],ce=arguments[6],J=arguments[7]):(j=arguments[1],R=arguments[2],W=arguments[3],de=arguments[4],te=arguments[5],le=arguments[6],ce=arguments[7],J=arguments[8]),Rn(E=arguments[0])==="object"&&!f(E)&&"imageData"in E){var me=E;E=me.imageData,j=me.format||j||r,R=me.x||R||0,W=me.y||W||0,de=me.w||me.width||de,te=me.h||me.height||te,le=me.alias||le,ce=me.compression||ce,J=me.rotation||me.angle||J}var Ee=this.internal.getFilters();if(ce===void 0&&Ee.indexOf("FlateEncode")!==-1&&(ce="SLOW"),isNaN(R)||isNaN(W))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var k=I.call(this,E,j,le,ce);return g.call(this,R,W,de,te,k,J),this};var I=function(E,j,R,W){var de,te,le;if(typeof E=="string"&&a(E)===r){E=unescape(E);var ce=L(E,!1);(ce!==""||(ce=e.loadFile(E,!0))!==void 0)&&(E=ce)}if(f(E)&&(E=h(E,j)),j=a(E,j),!A(j))throw new Error("addImage does not support files of type '"+j+"', please ensure that a plugin for '"+j+"' support is added.");if(((le=R)==null||le.length===0)&&(R=function(J){return typeof J=="string"||P(J)?b(J):P(J.data)?b(J.data):null}(E)),(de=m.call(this,R))||(E instanceof Uint8Array||j==="RGBA"||(te=E,E=C(E)),de=this["process"+j.toUpperCase()](E,d.call(this),R,function(J){return J&&typeof J=="string"&&(J=J.toUpperCase()),J in e.image_compression?J:y.NONE}(W),te)),!de)throw new Error("An unknown error occurred whilst processing the image.");return de},L=e.__addimage__.convertBase64ToBinaryString=function(E,j){j=typeof j!="boolean"||j;var R,W="";if(typeof E=="string"){var de;R=(de=T(E))!==null&&de!==void 0?de:E;try{W=RN(R)}catch(te){if(j)throw _(R)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+te.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return W};e.getImageProperties=function(E){var j,R,W="";if(f(E)&&(E=h(E)),typeof E=="string"&&a(E)===r&&((W=L(E,!1))===""&&(W=e.loadFile(E)||""),E=W),R=a(E),!A(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(E instanceof Uint8Array||(E=C(E)),!(j=this["process"+R.toUpperCase()](E)))throw new Error("An unknown error occurred whilst processing the image");return j.fileType=R,j}})(Ar.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Ar.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,s,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,A=0;A<u.length&&!d;A++)switch((n=u[A]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var f=0;f<u.length;f++){n=u[f];var h=this.internal.pdfEscape,m=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),g=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(p.objId),y=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+h(x(n.contents))+")",s+=" /Popup "+g.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+h(x(y))+") >>",p.content=s;var b=p.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+b,n.open&&(s+=" /Open true"),s+=" >>",g.content=s,this.internal.write(p.objId,"0 R",g.objId,"0 R");break;case"freetext":a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var _=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+h(m(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+_+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var T=this.annotations._nameMap[n.options.name];n.options.pageNumber=T.page,n.options.top=T.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+h(m(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var P=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+P+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,s,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+s)},options:o,type:"link"})},e.textWithLink=function(r,n,a,s){var o,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var d=this.splitTextToSize(r,l).length;o=Math.ceil(u*d)}else l=c,o=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,a-u,l,o,s),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Ar.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(p){return t[p.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(p){return typeof p=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(p)},l=e.__arabicParser__.isArabicEndLetter=function(p){return o(p)&&s(p)&&t[p.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(p){return o(p)&&a.indexOf(p.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(p){return o(p)&&s(p)&&t[p.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(p){return o(p)&&s(p)&&t[p.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(p){return o(p)&&s(p)&&t[p.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(p){return o(p)&&s(p)&&t[p.charCodeAt(0)].length==4},A=e.__arabicParser__.resolveLigatures=function(p){var g=0,x=r,y="",b=0;for(g=0;g<p.length;g+=1)x[p.charCodeAt(g)]!==void 0?(b++,typeof(x=x[p.charCodeAt(g)])=="number"&&(y+=String.fromCharCode(x),x=r,b=0),g===p.length-1&&(x=r,y+=p.charAt(g-(b-1)),g-=b-1,b=0)):(x=r,y+=p.charAt(g-b),g-=b,b=0);return y};e.__arabicParser__.isArabicDiacritic=function(p){return p!==void 0&&n[p.charCodeAt(0)]!==void 0};var f=e.__arabicParser__.getCorrectForm=function(p,g,x){return o(p)?s(p)===!1?-1:!u(p)||!o(g)&&!o(x)||!o(x)&&l(g)||l(p)&&!o(g)||l(p)&&c(g)||l(p)&&l(g)?0:d(p)&&o(g)&&!l(g)&&o(x)&&u(x)?3:l(p)||!o(x)?1:2:-1},h=function(p){var g=0,x=0,y=0,b="",_="",T="",P=(p=p||"").split("\\s+"),C=[];for(g=0;g<P.length;g+=1){for(C.push(""),x=0;x<P[g].length;x+=1)b=P[g][x],_=P[g][x-1],T=P[g][x+1],o(b)?(y=f(b,_,T),C[g]+=y!==-1?String.fromCharCode(t[b.charCodeAt(0)][y]):b):C[g]+=b;C[g]=A(C[g])}return C.join(" ")},m=e.__arabicParser__.processArabic=e.processArabic=function(){var p,g=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(g)){var y=0;for(x=[],y=0;y<g.length;y+=1)Array.isArray(g[y])?x.push([h(g[y][0]),g[y][1],g[y][2]]):x.push([h(g[y])]);p=x}else p=h(g);return typeof arguments[0]=="string"?p:(arguments[0].text=p,arguments[0])};e.events.push(["preProcessText",m])}(Ar.API),Ar.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Ar.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(p){c=p}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(p){u=p}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(p){d=p}});var A=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return A},set:function(p){A=p}});var f=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return f},set:function(p){f=p}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(p){h=p}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(p){m=p}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),A=u.font||this.getFont(),f=u.scaleFactor||this.internal.scaleFactor,h=0,m=0,p=0,g=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var x=u.maxWidth;x>0?typeof c=="string"?c=this.splitTextToSize(c,x):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(b,_){return b.concat(g.splitTextToSize(_,x))},[])):c=Array.isArray(c)?c:[c];for(var y=0;y<c.length;y++)h<(p=this.getStringUnitWidth(c[y],{font:A})*d)&&(h=p);return h!==0&&(m=c.length),{w:h/=f,h:Math.max((m*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/f,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,A=this.internal.__cell__.margins||t,f=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+A.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=A.top,h&&f&&(this.printHeaderRow(c.lineNumber,!0),c.y+=f[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};e.table=function(c,u,d,A,f){if(n.call(this),!d)throw new Error("No data for PDF table.");var h,m,p,g,x=[],y=[],b=[],_={},T={},P=[],C=[],S=(f=f||{}).autoSize||!1,I=f.printHeaders!==!1,L=f.css&&f.css["font-size"]!==void 0?16*f.css["font-size"]:f.fontSize||12,E=f.margins||Object.assign({width:this.getPageWidth()},t),j=typeof f.padding=="number"?f.padding:3,R=f.headerBackgroundColor||"#c8c8c8",W=f.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=E,this.internal.__cell__.table_font_size=L,this.internal.__cell__.padding=j,this.internal.__cell__.headerBackgroundColor=R,this.internal.__cell__.headerTextColor=W,this.setFontSize(L),A==null)y=x=Object.keys(d[0]),b=x.map(function(){return"left"});else if(Array.isArray(A)&&Rn(A[0])==="object")for(x=A.map(function(me){return me.name}),y=A.map(function(me){return me.prompt||me.name||""}),b=A.map(function(me){return me.align||"left"}),h=0;h<A.length;h+=1)T[A[h].name]=.7499990551181103*A[h].width;else Array.isArray(A)&&typeof A[0]=="string"&&(y=x=A,b=x.map(function(){return"left"}));if(S||Array.isArray(A)&&typeof A[0]=="string")for(h=0;h<x.length;h+=1){for(_[g=x[h]]=d.map(function(me){return me[g]}),this.setFont(void 0,"bold"),P.push(this.getTextDimensions(y[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=_[g],this.setFont(void 0,"normal"),p=0;p<m.length;p+=1)P.push(this.getTextDimensions(m[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);T[g]=Math.max.apply(null,P)+j+j,P=[]}if(I){var de={};for(h=0;h<x.length;h+=1)de[x[h]]={},de[x[h]].text=y[h],de[x[h]].align=b[h];var te=l.call(this,de,T);C=x.map(function(me){return new s(c,u,T[me],te,de[me].text,void 0,de[me].align)}),this.setTableHeaderRow(C),this.printHeaderRow(1,!1)}var le=A.reduce(function(me,Ee){return me[Ee.name]=Ee.align,me},{});for(h=0;h<d.length;h+=1){"rowStart"in f&&f.rowStart instanceof Function&&f.rowStart({row:h,data:d[h]},this);var ce=l.call(this,d[h],T);for(p=0;p<x.length;p+=1){var J=d[h][x[p]];"cellStart"in f&&f.cellStart instanceof Function&&f.cellStart({row:h,col:p,data:J},this),o.call(this,new s(c,u,T[x[p]],ce,J,h+2,le[x[p]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,A=this.internal.__cell__.table_font_size,f=this.internal.scaleFactor;return Object.keys(c).map(function(h){var m=c[h];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,u[h]-d-d)},this).map(function(h){return this.getLineHeightFactor()*h.length*A/f+d+d},this).reduce(function(h,m){return Math.max(h,m)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var A=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(A[0],A[1],A[2],A[3],void 0,-1)}this.setFont(void 0,"bold");for(var f=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){d=this.internal.__cell__.tableHeaderRow[h].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,f.push(d)),d.lineNumber=c;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(m)}f.length>0&&this.setTableHeaderRow(f),this.setFont(void 0,"normal"),r=!1}}(Ar.API);var CJ={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},_J=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Nk=NJ(_J),EJ=[100,200,300,400,500,600,700,800,900],aNe=NJ(EJ);function mj(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return CJ[s=s||"normal"]?s:"normal"}(e.style),n=function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400}(e.weight),a=function(s){return typeof Nk[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function j8(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var sNe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},P8={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function k8(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function T8(e){return e.trimLeft()}function iNe(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function oNe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var f2,F8,O8,lp,m2,D8,R8,L8,pj=["times"];function M8(e,t,r,n,a){var s=4,o=Q8;switch(a){case Ar.API.image_compression.FAST:s=1,o=U8;break;case Ar.API.image_compression.MEDIUM:s=6,o=V8;break;case Ar.API.image_compression.SLOW:s=9,o=H8}e=function(c,u,d,A){for(var f,h=c.length/u,m=new Uint8Array(c.length+h),p=[lNe,U8,Q8,V8,H8],g=0;g<h;g+=1){var x=g*u,y=c.subarray(x,x+u);if(A)m.set(A(y,d,f),x+g);else{for(var b=p.length,_=[],T=0;T<b;T+=1)_[T]=p[T](y,d,f);var P=uNe(_.concat());m.set(_[P],x+g)}f=y}return m}(e,t,Math.ceil(r*n/8),o);var l=pk(e,{level:s});return Ar.API.__addimage__.arrayBufferToBinaryString(l)}function lNe(e){var t=Array.apply([],e);return t.unshift(0),t}function U8(e,t){var r=e.length,n=[];n[0]=1;for(var a=0;a<r;a+=1){var s=e[a-t]||0;n[a+1]=e[a]-s+256&255}return n}function Q8(e,t,r){var n=e.length,a=[];a[0]=2;for(var s=0;s<n;s+=1){var o=r&&r[s]||0;a[s+1]=e[s]-o+256&255}return a}function V8(e,t,r){var n=e.length,a=[];a[0]=3;for(var s=0;s<n;s+=1){var o=e[s-t]||0,l=r&&r[s]||0;a[s+1]=e[s]+256-(o+l>>>1)&255}return a}function H8(e,t,r){var n=e.length,a=[];a[0]=4;for(var s=0;s<n;s+=1){var o=cNe(e[s-t]||0,r&&r[s]||0,r&&r[s-t]||0);a[s+1]=e[s]-o+256&255}return a}function cNe(e,t,r){if(e===t&&t===r)return e;var n=Math.abs(t-r),a=Math.abs(e-r),s=Math.abs(e+t-r-r);return n<=a&&n<=s?e:a<=s?t:r}function uNe(e){var t=e.map(function(r){return r.reduce(function(n,a){return n+Math.abs(a)},0)});return t.indexOf(Math.min.apply(null,t))}function gj(e,t,r){var n=t*r,a=Math.floor(n/8),s=16-(n-8*a+r),o=(1<<r)-1;return SJ(e,a)>>s&o}function $8(e,t,r,n){var a=r*n,s=Math.floor(a/8),o=16-(a-8*s+n),l=(1<<n)-1,c=(t&l)<<o;(function(u,d,A){if(d+1<u.byteLength)u.setUint16(d,A,!1);else{var f=A>>8&255;u.setUint8(d,f)}})(e,s,SJ(e,s)&~(l<<o)&65535|c)}function SJ(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function dNe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],s=a>>7,o=1<<1+(7&a);e[t++],e[t++];var l=null,c=null;s&&(l=t,c=o,t+=3*o);var u=!0,d=[],A=0,f=null,h=0,m=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,m=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((E=e[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var p=e[t++];A=e[t++]|e[t++]<<8,f=e[t++],1&p||(f=null),h=p>>2&7,t++;break;case 254:for(;;){if(!((E=e[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var g=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,_=e[t++],T=_>>6&1,P=1<<1+(7&_),C=l,S=c,I=!1;_>>7&&(I=!0,C=t,S=P,t+=3*P);var L=t;for(t++;;){var E;if(!((E=e[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}d.push({x:g,y:x,width:y,height:b,has_local_palette:I,palette_offset:C,palette_size:S,data_offset:L,data_length:t-L,transparent_index:f,interlaced:!!T,delay:A,disposal:h});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return m},this.frameInfo=function(j){if(j<0||j>=d.length)throw new Error("Frame index out of range.");return d[j]},this.decodeAndBlitFrameBGRA=function(j,R){var W=this.frameInfo(j),de=W.width*W.height,te=new Uint8Array(de);K8(e,W.data_offset,te,de);var le=W.palette_offset,ce=W.transparent_index;ce===null&&(ce=256);var J=W.width,me=r-J,Ee=J,k=4*(W.y*r+W.x),F=4*((W.y+W.height)*r+W.x),V=k,D=4*me;W.interlaced===!0&&(D+=4*r*7);for(var M=8,G=0,O=te.length;G<O;++G){var K=te[G];if(Ee===0&&(Ee=J,(V+=D)>=F&&(D=4*me+4*r*(M-1),V=k+(J+me)*(M<<1),M>>=1)),K===ce)V+=4;else{var ee=e[le+3*K],ne=e[le+3*K+1],Q=e[le+3*K+2];R[V++]=Q,R[V++]=ne,R[V++]=ee,R[V++]=255}--Ee}},this.decodeAndBlitFrameRGBA=function(j,R){var W=this.frameInfo(j),de=W.width*W.height,te=new Uint8Array(de);K8(e,W.data_offset,te,de);var le=W.palette_offset,ce=W.transparent_index;ce===null&&(ce=256);var J=W.width,me=r-J,Ee=J,k=4*(W.y*r+W.x),F=4*((W.y+W.height)*r+W.x),V=k,D=4*me;W.interlaced===!0&&(D+=4*r*7);for(var M=8,G=0,O=te.length;G<O;++G){var K=te[G];if(Ee===0&&(Ee=J,(V+=D)>=F&&(D=4*me+4*r*(M-1),V=k+(J+me)*(M<<1),M>>=1)),K===ce)V+=4;else{var ee=e[le+3*K],ne=e[le+3*K+1],Q=e[le+3*K+2];R[V++]=ee,R[V++]=ne,R[V++]=Q,R[V++]=255}--Ee}}}function K8(e,t,r,n){for(var a=e[t++],s=1<<a,o=s+1,l=o+1,c=a+1,u=(1<<c)-1,d=0,A=0,f=0,h=e[t++],m=new Int32Array(4096),p=null;;){for(;d<16&&h!==0;)A|=e[t++]<<d,d+=8,h===1?h=e[t++]:--h;if(d<c)break;var g=A&u;if(A>>=c,d-=c,g!==s){if(g===o)break;for(var x=g<l?g:p,y=0,b=x;b>s;)b=m[b]>>8,++y;var _=b;if(f+y+(x!==g?1:0)>n)return void Yn.log("Warning, gif stream longer than expected.");r[f++]=_;var T=f+=y;for(x!==g&&(r[f++]=_),b=x;y--;)b=m[b],r[--T]=255&b,b>>=8;p!==null&&l<4096&&(m[l++]=p<<8|_,l>=u+1&&c<12&&(++c,u=u<<1|1)),p=g}else l=o+1,u=(1<<(c=a+1))-1,p=null}return f!==n&&Yn.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function xj(e){var t,r,n,a,s,o=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),A=new Array(65535),f=new Array(65535),h=new Array(64),m=new Array(64),p=[],g=0,x=7,y=new Array(64),b=new Array(64),_=new Array(64),T=new Array(256),P=new Array(2048),C=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],E=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],j=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],de=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function te(k,F){for(var V=0,D=0,M=new Array,G=1;G<=16;G++){for(var O=1;O<=k[G];O++)M[F[D]]=[],M[F[D]][0]=V,M[F[D]][1]=G,D++,V++;V*=2}return M}function le(k){for(var F=k[0],V=k[1]-1;V>=0;)F&1<<V&&(g|=1<<x),V--,--x<0&&(g==255?(ce(255),ce(0)):ce(g),x=7,g=0)}function ce(k){p.push(k)}function J(k){ce(k>>8&255),ce(255&k)}function me(k,F,V,D,M){for(var G,O=M[0],K=M[240],ee=function(Ne,Me){var Ve,nt,st,lt,bt,ot,Le,Ze,ye,xe,ue=0;for(ye=0;ye<8;++ye){Ve=Ne[ue],nt=Ne[ue+1],st=Ne[ue+2],lt=Ne[ue+3],bt=Ne[ue+4],ot=Ne[ue+5],Le=Ne[ue+6];var Ge=Ve+(Ze=Ne[ue+7]),Je=Ve-Ze,ht=nt+Le,Ue=nt-Le,rt=st+ot,Qe=st-ot,Pe=lt+bt,ze=lt-bt,it=Ge+Pe,Bt=Ge-Pe,ut=ht+rt,It=ht-rt;Ne[ue]=it+ut,Ne[ue+4]=it-ut;var $t=.707106781*(It+Bt);Ne[ue+2]=Bt+$t,Ne[ue+6]=Bt-$t;var hr=.382683433*((it=ze+Qe)-(It=Ue+Je)),_e=.5411961*it+hr,dt=1.306562965*It+hr,gt=.707106781*(ut=Qe+Ue),Ce=Je+gt,et=Je-gt;Ne[ue+5]=et+_e,Ne[ue+3]=et-_e,Ne[ue+1]=Ce+dt,Ne[ue+7]=Ce-dt,ue+=8}for(ue=0,ye=0;ye<8;++ye){Ve=Ne[ue],nt=Ne[ue+8],st=Ne[ue+16],lt=Ne[ue+24],bt=Ne[ue+32],ot=Ne[ue+40],Le=Ne[ue+48];var yt=Ve+(Ze=Ne[ue+56]),Pt=Ve-Ze,Lt=nt+Le,qt=nt-Le,wt=st+ot,ie=st-ot,se=lt+bt,he=lt-bt,Ae=yt+se,Be=yt-se,Fe=Lt+wt,ae=Lt-wt;Ne[ue]=Ae+Fe,Ne[ue+32]=Ae-Fe;var Oe=.707106781*(ae+Be);Ne[ue+16]=Be+Oe,Ne[ue+48]=Be-Oe;var pe=.382683433*((Ae=he+ie)-(ae=qt+Pt)),De=.5411961*Ae+pe,Se=1.306562965*ae+pe,Ye=.707106781*(Fe=ie+qt),We=Pt+Ye,Xe=Pt-Ye;Ne[ue+40]=Xe+De,Ne[ue+24]=Xe-De,Ne[ue+8]=We+Se,Ne[ue+56]=We-Se,ue++}for(ye=0;ye<64;++ye)xe=Ne[ye]*Me[ye],h[ye]=xe>0?xe+.5|0:xe-.5|0;return h}(k,F),ne=0;ne<64;++ne)m[C[ne]]=ee[ne];var Q=m[0]-V;V=m[0],Q==0?le(D[0]):(le(D[f[G=32767+Q]]),le(A[G]));for(var be=63;be>0&&m[be]==0;)be--;if(be==0)return le(O),V;for(var Z,z=1;z<=be;){for(var X=z;m[z]==0&&z<=be;)++z;var ve=z-X;if(ve>=16){Z=ve>>4;for(var re=1;re<=Z;++re)le(K);ve&=15}G=32767+m[z],le(M[(ve<<4)+f[G]]),le(A[G]),z++}return be!=63&&le(O),V}function Ee(k){k=Math.min(Math.max(k,1),100),s!=k&&(function(F){for(var V=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],D=0;D<64;D++){var M=o((V[D]*F+50)/100);M=Math.min(Math.max(M,1),255),l[C[D]]=M}for(var G=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],O=0;O<64;O++){var K=o((G[O]*F+50)/100);K=Math.min(Math.max(K,1),255),c[C[O]]=K}for(var ee=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ne=0,Q=0;Q<8;Q++)for(var be=0;be<8;be++)u[ne]=1/(l[C[ne]]*ee[Q]*ee[be]*8),d[ne]=1/(c[C[ne]]*ee[Q]*ee[be]*8),ne++}(k<50?Math.floor(5e3/k):Math.floor(200-2*k)),s=k)}this.encode=function(k,F){F&&Ee(F),p=new Array,g=0,x=7,J(65496),J(65504),J(16),ce(74),ce(70),ce(73),ce(70),ce(0),ce(1),ce(1),ce(0),J(1),J(1),ce(0),ce(0),function(){J(65499),J(132),ce(0);for(var nt=0;nt<64;nt++)ce(l[nt]);ce(1);for(var st=0;st<64;st++)ce(c[st])}(),function(nt,st){J(65472),J(17),ce(8),J(st),J(nt),ce(3),ce(1),ce(17),ce(0),ce(2),ce(17),ce(1),ce(3),ce(17),ce(1)}(k.width,k.height),function(){J(65476),J(418),ce(0);for(var nt=0;nt<16;nt++)ce(S[nt+1]);for(var st=0;st<=11;st++)ce(I[st]);ce(16);for(var lt=0;lt<16;lt++)ce(L[lt+1]);for(var bt=0;bt<=161;bt++)ce(E[bt]);ce(1);for(var ot=0;ot<16;ot++)ce(j[ot+1]);for(var Le=0;Le<=11;Le++)ce(R[Le]);ce(17);for(var Ze=0;Ze<16;Ze++)ce(W[Ze+1]);for(var ye=0;ye<=161;ye++)ce(de[ye])}(),J(65498),J(12),ce(3),ce(1),ce(0),ce(2),ce(17),ce(3),ce(17),ce(0),ce(63),ce(0);var V=0,D=0,M=0;g=0,x=7,this.encode.displayName="_encode_";for(var G,O,K,ee,ne,Q,be,Z,z,X=k.data,ve=k.width,re=k.height,Ne=4*ve,Me=0;Me<re;){for(G=0;G<Ne;){for(ne=Ne*Me+G,be=-1,Z=0,z=0;z<64;z++)Q=ne+(Z=z>>3)*Ne+(be=4*(7&z)),Me+Z>=re&&(Q-=Ne*(Me+1+Z-re)),G+be>=Ne&&(Q-=G+be-Ne+4),O=X[Q++],K=X[Q++],ee=X[Q++],y[z]=(P[O]+P[K+256|0]+P[ee+512|0]>>16)-128,b[z]=(P[O+768|0]+P[K+1024|0]+P[ee+1280|0]>>16)-128,_[z]=(P[O+1280|0]+P[K+1536|0]+P[ee+1792|0]>>16)-128;V=me(y,u,V,t,n),D=me(b,d,D,r,a),M=me(_,d,M,r,a),G+=32}Me+=8}if(x>=0){var Ve=[];Ve[1]=x+1,Ve[0]=(1<<x+1)-1,le(Ve)}return J(65497),new Uint8Array(p)},e=e||50,function(){for(var k=String.fromCharCode,F=0;F<256;F++)T[F]=k(F)}(),t=te(S,I),r=te(j,R),n=te(L,E),a=te(W,de),function(){for(var k=1,F=2,V=1;V<=15;V++){for(var D=k;D<F;D++)f[32767+D]=V,A[32767+D]=[],A[32767+D][1]=V,A[32767+D][0]=D;for(var M=-(F-1);M<=-k;M++)f[32767+M]=V,A[32767+M]=[],A[32767+M][1]=V,A[32767+M][0]=F-1+M;k<<=1,F<<=1}}(),function(){for(var k=0;k<256;k++)P[k]=19595*k,P[k+256|0]=38470*k,P[k+512|0]=7471*k+32768,P[k+768|0]=-11059*k,P[k+1024|0]=-21709*k,P[k+1280|0]=32768*k+8421375,P[k+1536|0]=-27439*k,P[k+1792|0]=-5329*k}(),Ee(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Vc(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function q8(e){function t(I){if(!I)throw Error("assert :P")}function r(I,L,E){for(var j=0;4>j;j++)if(I[L+j]!=E.charCodeAt(j))return!0;return!1}function n(I,L,E,j,R){for(var W=0;W<R;W++)I[L+W]=E[j+W]}function a(I,L,E,j){for(var R=0;R<j;R++)I[L+R]=E}function s(I){return new Int32Array(I)}function o(I,L){for(var E=[],j=0;j<I;j++)E.push(new L);return E}function l(I,L){var E=[];return function j(R,W,de){for(var te=de[W],le=0;le<te&&(R.push(de.length>W+1?[]:new L),!(de.length<W+1));le++)j(R[le],W+1,de)}(E,0,I),E}var c=function(){var I=this;function L(w,B){for(var H=1<<B-1>>>0;w&H;)H>>>=1;return H?(w&H-1)+H:w}function E(w,B,H,Y,ge){t(!(Y%H));do w[B+(Y-=H)]=ge;while(0<Y)}function j(w,B,H,Y,ge){if(t(2328>=ge),512>=ge)var we=s(512);else if((we=s(ge))==null)return 0;return function(Ie,je,Re,$e,ct,Ct){var Ke,ft,vt=je,Tt=1<<Re,Nt=s(16),Dt=s(16);for(t(ct!=0),t($e!=null),t(Ie!=null),t(0<Re),ft=0;ft<ct;++ft){if(15<$e[ft])return 0;++Nt[$e[ft]]}if(Nt[0]==ct)return 0;for(Dt[1]=0,Ke=1;15>Ke;++Ke){if(Nt[Ke]>1<<Ke)return 0;Dt[Ke+1]=Dt[Ke]+Nt[Ke]}for(ft=0;ft<ct;++ft)Ke=$e[ft],0<$e[ft]&&(Ct[Dt[Ke]++]=ft);if(Dt[15]==1)return($e=new R).g=0,$e.value=Ct[0],E(Ie,vt,1,Tt,$e),Tt;var Rt,Gt=-1,Vt=Tt-1,Cr=0,pr=1,qr=1,yr=1<<Re;for(ft=0,Ke=1,ct=2;Ke<=Re;++Ke,ct<<=1){if(pr+=qr<<=1,0>(qr-=Nt[Ke]))return 0;for(;0<Nt[Ke];--Nt[Ke])($e=new R).g=Ke,$e.value=Ct[ft++],E(Ie,vt+Cr,ct,yr,$e),Cr=L(Cr,Ke)}for(Ke=Re+1,ct=2;15>=Ke;++Ke,ct<<=1){if(pr+=qr<<=1,0>(qr-=Nt[Ke]))return 0;for(;0<Nt[Ke];--Nt[Ke]){if($e=new R,(Cr&Vt)!=Gt){for(vt+=yr,Rt=1<<(Gt=Ke)-Re;15>Gt&&!(0>=(Rt-=Nt[Gt]));)++Gt,Rt<<=1;Tt+=yr=1<<(Rt=Gt-Re),Ie[je+(Gt=Cr&Vt)].g=Rt+Re,Ie[je+Gt].value=vt-je-Gt}$e.g=Ke-Re,$e.value=Ct[ft++],E(Ie,vt+(Cr>>Re),ct,yr,$e),Cr=L(Cr,Ke)}}return pr!=2*Dt[15]-1?0:Tt}(w,B,H,Y,ge,we)}function R(){this.value=this.g=0}function W(){this.value=this.g=0}function de(){this.G=o(5,R),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Uf,W)}function te(w,B,H,Y){t(w!=null),t(B!=null),t(2147483648>Y),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=B,w.pa=H,w.Jd=B,w.Yc=H+Y,w.Zc=4<=Y?H+Y-4+1:H,O(w)}function le(w,B){for(var H=0;0<B--;)H|=ee(w,128)<<B;return H}function ce(w,B){var H=le(w,B);return K(w)?-H:H}function J(w,B,H,Y){var ge,we=0;for(t(w!=null),t(B!=null),t(4294967288>Y),w.Sb=Y,w.Ra=0,w.u=0,w.h=0,4<Y&&(Y=4),ge=0;ge<Y;++ge)we+=B[H+ge]<<8*ge;w.Ra=we,w.bb=Y,w.oa=B,w.pa=H}function me(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<VA-8>>>0,++w.bb,w.u-=8;D(w)&&(w.h=1,w.u=0)}function Ee(w,B){if(t(0<=B),!w.h&&B<=cl){var H=V(w)&ll[B];return w.u+=B,me(w),H}return w.h=1,w.u=0}function k(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function F(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function V(w){return w.Ra>>>(w.u&VA-1)>>>0}function D(w){return t(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>VA}function M(w,B){w.u=B,w.h=D(w)}function G(w){w.u>=gd&&(t(w.u>=gd),me(w))}function O(w){t(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(t(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function K(w){return le(w,1)}function ee(w,B){var H=w.Ca;0>w.b&&O(w);var Y=w.b,ge=H*B>>>8,we=(w.I>>>Y>ge)+0;for(we?(H-=ge,w.I-=ge+1<<Y>>>0):H=ge+1,Y=H,ge=0;256<=Y;)ge+=8,Y>>=8;return Y=7^ge+HA[Y],w.b-=Y,w.Ca=(H<<Y)-1,we}function ne(w,B,H){w[B+0]=H>>24&255,w[B+1]=H>>16&255,w[B+2]=H>>8&255,w[B+3]=255&H}function Q(w,B){return w[B+0]|w[B+1]<<8}function be(w,B){return Q(w,B)|w[B+2]<<16}function Z(w,B){return Q(w,B)|Q(w,B+2)<<16}function z(w,B){var H=1<<B;return t(w!=null),t(0<B),w.X=s(H),w.X==null?0:(w.Mb=32-B,w.Xa=B,1)}function X(w,B){t(w!=null),t(B!=null),t(w.Xa==B.Xa),n(B.X,0,w.X,0,1<<B.Xa)}function ve(){this.X=[],this.Xa=this.Mb=0}function re(w,B,H,Y){t(H!=null),t(Y!=null);var ge=H[0],we=Y[0];return ge==0&&(ge=(w*we+B/2)/B),we==0&&(we=(B*ge+w/2)/w),0>=ge||0>=we?0:(H[0]=ge,Y[0]=we,1)}function Ne(w,B){return w+(1<<B)-1>>>B}function Me(w,B){return((4278255360&w)+(4278255360&B)>>>0&4278255360)+((16711935&w)+(16711935&B)>>>0&16711935)>>>0}function Ve(w,B){I[B]=function(H,Y,ge,we,Ie,je,Re){var $e;for($e=0;$e<Ie;++$e){var ct=I[w](je[Re+$e-1],ge,we+$e);je[Re+$e]=Me(H[Y+$e],ct)}}}function nt(){this.ud=this.hd=this.jd=0}function st(w,B){return((4278124286&(w^B))>>>1)+(w&B)>>>0}function lt(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function bt(w,B){return lt(w+(w-B+.5>>1))}function ot(w,B,H){return Math.abs(B-H)-Math.abs(w-H)}function Le(w,B,H,Y,ge,we,Ie){for(Y=we[Ie-1],H=0;H<ge;++H)we[Ie+H]=Y=Me(w[B+H],Y)}function Ze(w,B,H,Y,ge){var we;for(we=0;we<H;++we){var Ie=w[B+we],je=Ie>>8&255,Re=16711935&(Re=(Re=16711935&Ie)+((je<<16)+je));Y[ge+we]=(4278255360&Ie)+Re>>>0}}function ye(w,B){B.jd=255&w,B.hd=w>>8&255,B.ud=w>>16&255}function xe(w,B,H,Y,ge,we){var Ie;for(Ie=0;Ie<Y;++Ie){var je=B[H+Ie],Re=je>>>8,$e=je,ct=255&(ct=(ct=je>>>16)+((w.jd<<24>>24)*(Re<<24>>24)>>>5));$e=255&($e=($e+=(w.hd<<24>>24)*(Re<<24>>24)>>>5)+((w.ud<<24>>24)*(ct<<24>>24)>>>5)),ge[we+Ie]=(4278255360&je)+(ct<<16)+$e}}function ue(w,B,H,Y,ge){I[B]=function(we,Ie,je,Re,$e,ct,Ct,Ke,ft){for(Re=Ct;Re<Ke;++Re)for(Ct=0;Ct<ft;++Ct)$e[ct++]=ge(je[Y(we[Ie++])])},I[w]=function(we,Ie,je,Re,$e,ct,Ct){var Ke=8>>we.b,ft=we.Ea,vt=we.K[0],Tt=we.w;if(8>Ke)for(we=(1<<we.b)-1,Tt=(1<<Ke)-1;Ie<je;++Ie){var Nt,Dt=0;for(Nt=0;Nt<ft;++Nt)Nt&we||(Dt=Y(Re[$e++])),ct[Ct++]=ge(vt[Dt&Tt]),Dt>>=Ke}else I["VP8LMapColor"+H](Re,$e,vt,Tt,ct,Ct,Ie,je,ft)}}function Ge(w,B,H,Y,ge){for(H=B+H;B<H;){var we=w[B++];Y[ge++]=we>>16&255,Y[ge++]=we>>8&255,Y[ge++]=255&we}}function Je(w,B,H,Y,ge){for(H=B+H;B<H;){var we=w[B++];Y[ge++]=we>>16&255,Y[ge++]=we>>8&255,Y[ge++]=255&we,Y[ge++]=we>>24&255}}function ht(w,B,H,Y,ge){for(H=B+H;B<H;){var we=(Ie=w[B++])>>16&240|Ie>>12&15,Ie=240&Ie|Ie>>28&15;Y[ge++]=we,Y[ge++]=Ie}}function Ue(w,B,H,Y,ge){for(H=B+H;B<H;){var we=(Ie=w[B++])>>16&248|Ie>>13&7,Ie=Ie>>5&224|Ie>>3&31;Y[ge++]=we,Y[ge++]=Ie}}function rt(w,B,H,Y,ge){for(H=B+H;B<H;){var we=w[B++];Y[ge++]=255&we,Y[ge++]=we>>8&255,Y[ge++]=we>>16&255}}function Qe(w,B,H,Y,ge,we){if(we==0)for(H=B+H;B<H;)ne(Y,((we=w[B++])[0]>>24|we[1]>>8&65280|we[2]<<8&16711680|we[3]<<24)>>>0),ge+=32;else n(Y,ge,w,B,H)}function Pe(w,B){I[B][0]=I[w+"0"],I[B][1]=I[w+"1"],I[B][2]=I[w+"2"],I[B][3]=I[w+"3"],I[B][4]=I[w+"4"],I[B][5]=I[w+"5"],I[B][6]=I[w+"6"],I[B][7]=I[w+"7"],I[B][8]=I[w+"8"],I[B][9]=I[w+"9"],I[B][10]=I[w+"10"],I[B][11]=I[w+"11"],I[B][12]=I[w+"12"],I[B][13]=I[w+"13"],I[B][14]=I[w+"0"],I[B][15]=I[w+"0"]}function ze(w){return w==jI||w==PI||w==rw||w==kI}function it(){this.eb=[],this.size=this.A=this.fb=0}function Bt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ut(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new it,this.f.kb=new Bt,this.sd=null}function It(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function $t(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function hr(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function _e(w,B){var H=w.T,Y=B.ba.f.RGBA,ge=Y.eb,we=Y.fb+w.ka*Y.A,Ie=Yl[B.ba.S],je=w.y,Re=w.O,$e=w.f,ct=w.N,Ct=w.ea,Ke=w.W,ft=B.cc,vt=B.dc,Tt=B.Mc,Nt=B.Nc,Dt=w.ka,Rt=w.ka+w.T,Gt=w.U,Vt=Gt+1>>1;for(Dt==0?Ie(je,Re,null,null,$e,ct,Ct,Ke,$e,ct,Ct,Ke,ge,we,null,null,Gt):(Ie(B.ec,B.fc,je,Re,ft,vt,Tt,Nt,$e,ct,Ct,Ke,ge,we-Y.A,ge,we,Gt),++H);Dt+2<Rt;Dt+=2)ft=$e,vt=ct,Tt=Ct,Nt=Ke,ct+=w.Rc,Ke+=w.Rc,we+=2*Y.A,Ie(je,(Re+=2*w.fa)-w.fa,je,Re,ft,vt,Tt,Nt,$e,ct,Ct,Ke,ge,we-Y.A,ge,we,Gt);return Re+=w.fa,w.j+Rt<w.o?(n(B.ec,B.fc,je,Re,Gt),n(B.cc,B.dc,$e,ct,Vt),n(B.Mc,B.Nc,Ct,Ke,Vt),H--):1&Rt||Ie(je,Re,null,null,$e,ct,Ct,Ke,$e,ct,Ct,Ke,ge,we+Y.A,null,null,Gt),H}function dt(w,B,H){var Y=w.F,ge=[w.J];if(Y!=null){var we=w.U,Ie=B.ba.S,je=Ie==tw||Ie==rw;B=B.ba.f.RGBA;var Re=[0],$e=w.ka;Re[0]=w.T,w.Kb&&($e==0?--Re[0]:(--$e,ge[0]-=w.width),w.j+w.ka+w.T==w.o&&(Re[0]=w.o-w.j-$e));var ct=B.eb;$e=B.fb+$e*B.A,w=YD(Y,ge[0],w.width,we,Re,ct,$e+(je?0:3),B.A),t(H==Re),w&&ze(Ie)&&Px(ct,$e,je,we,Re,B.A)}return 0}function gt(w){var B=w.ma,H=B.ba.S,Y=11>H,ge=H==Zb||H==ew||H==tw||H==BI||H==12||ze(H);if(B.memory=null,B.Ib=null,B.Jb=null,B.Nd=null,!Nx(B.Oa,w,ge?11:12))return 0;if(ge&&ze(H)&&Wl(),w.da)alert("todo:use_scaling");else{if(Y){if(B.Ib=hr,w.Kb){if(H=w.U+1>>1,B.memory=s(w.U+2*H),B.memory==null)return 0;B.ec=B.memory,B.fc=0,B.cc=B.ec,B.dc=B.fc+w.U,B.Mc=B.cc,B.Nc=B.dc+H,B.Ib=_e,Wl()}}else alert("todo:EmitYUV");ge&&(B.Jb=dt,Y&&Mo())}if(Y&&!fR){for(w=0;256>w;++w)Pse[w]=89858*(w-128)+aw>>nw,Fse[w]=-22014*(w-128)+aw,Tse[w]=-45773*(w-128),kse[w]=113618*(w-128)+aw>>nw;for(w=Tx;w<OI;++w)B=76283*(w-16)+aw>>nw,Ose[w-Tx]=ua(B,255),Dse[w-Tx]=ua(B+8>>4,15);fR=1}return 1}function Ce(w){var B=w.ma,H=w.U,Y=w.T;return t(!(1&w.ka)),0>=H||0>=Y?0:(H=B.Ib(w,B),B.Jb!=null&&B.Jb(w,B,H),B.Dc+=H,1)}function et(w){w.ma.memory=null}function yt(w,B,H,Y){return Ee(w,8)!=47?0:(B[0]=Ee(w,14)+1,H[0]=Ee(w,14)+1,Y[0]=Ee(w,1),Ee(w,3)!=0?0:!w.h)}function Pt(w,B){if(4>w)return w+1;var H=w-2>>1;return(2+(1&w)<<H)+Ee(B,H)+1}function Lt(w,B){return 120<B?B-120:1<=(H=((H=gse[B-1])>>4)*w+(8-(15&H)))?H:1;var H}function qt(w,B,H){var Y=V(H),ge=w[B+=255&Y].g-8;return 0<ge&&(M(H,H.u+8),Y=V(H),B+=w[B].value,B+=Y&(1<<ge)-1),M(H,H.u+w[B].g),w[B].value}function wt(w,B,H){return H.g+=w.g,H.value+=w.value<<B>>>0,t(8>=H.g),w.g}function ie(w,B,H){var Y=w.xc;return t((B=Y==0?0:w.vc[w.md*(H>>Y)+(B>>Y)])<w.Wb),w.Ya[B]}function se(w,B,H,Y){var ge=w.ab,we=w.c*B,Ie=w.C;B=Ie+B;var je=H,Re=Y;for(Y=w.Ta,H=w.Ua;0<ge--;){var $e=w.gc[ge],ct=Ie,Ct=B,Ke=je,ft=Re,vt=(Re=Y,je=H,$e.Ea);switch(t(ct<Ct),t(Ct<=$e.nc),$e.hc){case 2:is(Ke,ft,(Ct-ct)*vt,Re,je);break;case 0:var Tt=ct,Nt=Ct,Dt=Re,Rt=je,Gt=(yr=$e).Ea;Tt==0&&(_x(Ke,ft,null,null,1,Dt,Rt),Le(Ke,ft+1,0,0,Gt-1,Dt,Rt+1),ft+=Gt,Rt+=Gt,++Tt);for(var Vt=1<<yr.b,Cr=Vt-1,pr=Ne(Gt,yr.b),qr=yr.K,yr=yr.w+(Tt>>yr.b)*pr;Tt<Nt;){var dn=qr,Ts=yr,Gr=1;for(K0(Ke,ft,Dt,Rt-Gt,1,Dt,Rt);Gr<Gt;){var br=(Gr&~Cr)+Vt;br>Gt&&(br=Gt),(0,Sx[dn[Ts++]>>8&15])(Ke,ft+ +Gr,Dt,Rt+Gr-Gt,br-Gr,Dt,Rt+Gr),Gr=br}ft+=Gt,Rt+=Gt,++Tt&Cr||(yr+=pr)}Ct!=$e.nc&&n(Re,je-vt,Re,je+(Ct-ct-1)*vt,vt);break;case 1:for(vt=Ke,Nt=ft,Gt=(Ke=$e.Ea)-(Rt=Ke&~(Dt=(ft=1<<$e.b)-1)),Tt=Ne(Ke,$e.b),Vt=$e.K,$e=$e.w+(ct>>$e.b)*Tt;ct<Ct;){for(Cr=Vt,pr=$e,qr=new nt,yr=Nt+Rt,dn=Nt+Ke;Nt<yr;)ye(Cr[pr++],qr),Ix(qr,vt,Nt,ft,Re,je),Nt+=ft,je+=ft;Nt<dn&&(ye(Cr[pr++],qr),Ix(qr,vt,Nt,Gt,Re,je),Nt+=Gt,je+=Gt),++ct&Dt||($e+=Tt)}break;case 3:if(Ke==Re&&ft==je&&0<$e.b){for(Nt=Re,Ke=vt=je+(Ct-ct)*vt-(Rt=(Ct-ct)*Ne($e.Ea,$e.b)),ft=Re,Dt=je,Tt=[],Rt=(Gt=Rt)-1;0<=Rt;--Rt)Tt[Rt]=ft[Dt+Rt];for(Rt=Gt-1;0<=Rt;--Rt)Nt[Ke+Rt]=Tt[Rt];Wb($e,ct,Ct,Re,vt,Re,je)}else Wb($e,ct,Ct,Ke,ft,Re,je)}je=Y,Re=H}Re!=H&&n(Y,H,je,Re,we)}function he(w,B){var H=w.V,Y=w.Ba+w.c*w.C,ge=B-w.C;if(t(B<=w.l.o),t(16>=ge),0<ge){var we=w.l,Ie=w.Ta,je=w.Ua,Re=we.width;if(se(w,ge,H,Y),ge=je=[je],t((H=w.C)<(Y=B)),t(we.v<we.va),Y>we.o&&(Y=we.o),H<we.j){var $e=we.j-H;H=we.j,ge[0]+=$e*Re}if(H>=Y?H=0:(ge[0]+=4*we.v,we.ka=H-we.j,we.U=we.va-we.v,we.T=Y-H,H=1),H){if(je=je[0],11>(H=w.ca).S){var ct=H.f.RGBA,Ct=(Y=H.S,ge=we.U,we=we.T,$e=ct.eb,ct.A),Ke=we;for(ct=ct.fb+w.Ma*ct.A;0<Ke--;){var ft=Ie,vt=je,Tt=ge,Nt=$e,Dt=ct;switch(Y){case Yb:Bx(ft,vt,Tt,Nt,Dt);break;case Zb:$A(ft,vt,Tt,Nt,Dt);break;case jI:$A(ft,vt,Tt,Nt,Dt),Px(Nt,Dt,0,Tt,1,0);break;case sR:Qf(ft,vt,Tt,Nt,Dt);break;case ew:Qe(ft,vt,Tt,Nt,Dt,1);break;case PI:Qe(ft,vt,Tt,Nt,Dt,1),Px(Nt,Dt,0,Tt,1,0);break;case tw:Qe(ft,vt,Tt,Nt,Dt,0);break;case rw:Qe(ft,vt,Tt,Nt,Dt,0),Px(Nt,Dt,1,Tt,1,0);break;case BI:KA(ft,vt,Tt,Nt,Dt);break;case kI:KA(ft,vt,Tt,Nt,Dt),JD(Nt,Dt,Tt,1,0);break;case iR:qA(ft,vt,Tt,Nt,Dt);break;default:t(0)}je+=Re,ct+=Ct}w.Ma+=we}else alert("todo:EmitRescaledRowsYUVA");t(w.Ma<=H.height)}}w.C=B,t(w.C<=w.i)}function Ae(w){var B;if(0<w.ua)return 0;for(B=0;B<w.Wb;++B){var H=w.Ya[B].G,Y=w.Ya[B].H;if(0<H[1][Y[1]+0].g||0<H[2][Y[2]+0].g||0<H[3][Y[3]+0].g)return 0}return 1}function Be(w,B,H,Y,ge,we){if(w.Z!=0){var Ie=w.qd,je=w.rd;for(t(WA[w.Z]!=null);B<H;++B)WA[w.Z](Ie,je,Y,ge,Y,ge,we),Ie=Y,je=ge,ge+=we;w.qd=Ie,w.rd=je}}function Fe(w,B){var H=w.l.ma,Y=H.Z==0||H.Z==1?w.l.j:w.C;if(Y=w.C<Y?Y:w.C,t(B<=w.l.o),B>Y){var ge=w.l.width,we=H.ca,Ie=H.tb+ge*Y,je=w.V,Re=w.Ba+w.c*Y,$e=w.gc;t(w.ab==1),t($e[0].hc==3),Bu($e[0],Y,B,je,Re,we,Ie),Be(H,Y,B,we,Ie,ge)}w.C=w.Ma=B}function ae(w,B,H,Y,ge,we,Ie){var je=w.$/Y,Re=w.$%Y,$e=w.m,ct=w.s,Ct=H+w.$,Ke=Ct;ge=H+Y*ge;var ft=H+Y*we,vt=280+ct.ua,Tt=w.Pb?je:16777216,Nt=0<ct.ua?ct.Wa:null,Dt=ct.wc,Rt=Ct<ft?ie(ct,Re,je):null;t(w.C<we),t(ft<=ge);var Gt=!1;e:for(;;){for(;Gt||Ct<ft;){var Vt=0;if(je>=Tt){var Cr=Ct-H;t((Tt=w).Pb),Tt.wd=Tt.m,Tt.xd=Cr,0<Tt.s.ua&&X(Tt.s.Wa,Tt.s.vb),Tt=je+vse}if(Re&Dt||(Rt=ie(ct,Re,je)),t(Rt!=null),Rt.Qb&&(B[Ct]=Rt.qb,Gt=!0),!Gt)if(G($e),Rt.jc){Vt=$e,Cr=B;var pr=Ct,qr=Rt.pd[V(Vt)&Uf-1];t(Rt.jc),256>qr.g?(M(Vt,Vt.u+qr.g),Cr[pr]=qr.value,Vt=0):(M(Vt,Vt.u+qr.g-256),t(256<=qr.value),Vt=qr.value),Vt==0&&(Gt=!0)}else Vt=qt(Rt.G[0],Rt.H[0],$e);if($e.h)break;if(Gt||256>Vt){if(!Gt)if(Rt.nd)B[Ct]=(Rt.qb|Vt<<8)>>>0;else{if(G($e),Gt=qt(Rt.G[1],Rt.H[1],$e),G($e),Cr=qt(Rt.G[2],Rt.H[2],$e),pr=qt(Rt.G[3],Rt.H[3],$e),$e.h)break;B[Ct]=(pr<<24|Gt<<16|Vt<<8|Cr)>>>0}if(Gt=!1,++Ct,++Re>=Y&&(Re=0,++je,Ie!=null&&je<=we&&!(je%16)&&Ie(w,je),Nt!=null))for(;Ke<Ct;)Vt=B[Ke++],Nt.X[(506832829*Vt&4294967295)>>>Nt.Mb]=Vt}else if(280>Vt){if(Vt=Pt(Vt-256,$e),Cr=qt(Rt.G[4],Rt.H[4],$e),G($e),Cr=Lt(Y,Cr=Pt(Cr,$e)),$e.h)break;if(Ct-H<Cr||ge-Ct<Vt)break e;for(pr=0;pr<Vt;++pr)B[Ct+pr]=B[Ct+pr-Cr];for(Ct+=Vt,Re+=Vt;Re>=Y;)Re-=Y,++je,Ie!=null&&je<=we&&!(je%16)&&Ie(w,je);if(t(Ct<=ge),Re&Dt&&(Rt=ie(ct,Re,je)),Nt!=null)for(;Ke<Ct;)Vt=B[Ke++],Nt.X[(506832829*Vt&4294967295)>>>Nt.Mb]=Vt}else{if(!(Vt<vt))break e;for(Gt=Vt-280,t(Nt!=null);Ke<Ct;)Vt=B[Ke++],Nt.X[(506832829*Vt&4294967295)>>>Nt.Mb]=Vt;Vt=Ct,t(!(Gt>>>(Cr=Nt).Xa)),B[Vt]=Cr.X[Gt],Gt=!0}Gt||t($e.h==D($e))}if(w.Pb&&$e.h&&Ct<ge)t(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&X(w.s.vb,w.s.Wa);else{if($e.h)break e;Ie!=null&&Ie(w,je>we?we:je),w.a=0,w.$=Ct-H}return 1}return w.a=3,0}function Oe(w){t(w!=null),w.vc=null,w.yc=null,w.Ya=null;var B=w.Wa;B!=null&&(B.X=null),w.vb=null,t(w!=null)}function pe(){var w=new jr;return w==null?null:(w.a=0,w.xb=cR,Pe("Predictor","VP8LPredictors"),Pe("Predictor","VP8LPredictors_C"),Pe("PredictorAdd","VP8LPredictorsAdd"),Pe("PredictorAdd","VP8LPredictorsAdd_C"),is=Ze,Ix=xe,Bx=Ge,$A=Je,KA=ht,qA=Ue,Qf=rt,I.VP8LMapColor32b=Iu,I.VP8LMapColor8b=Ex,w)}function De(w,B,H,Y,ge){var we=1,Ie=[w],je=[B],Re=Y.m,$e=Y.s,ct=null,Ct=0;e:for(;;){if(H)for(;we&&Ee(Re,1);){var Ke=Ie,ft=je,vt=Y,Tt=1,Nt=vt.m,Dt=vt.gc[vt.ab],Rt=Ee(Nt,2);if(vt.Oc&1<<Rt)we=0;else{switch(vt.Oc|=1<<Rt,Dt.hc=Rt,Dt.Ea=Ke[0],Dt.nc=ft[0],Dt.K=[null],++vt.ab,t(4>=vt.ab),Rt){case 0:case 1:Dt.b=Ee(Nt,3)+2,Tt=De(Ne(Dt.Ea,Dt.b),Ne(Dt.nc,Dt.b),0,vt,Dt.K),Dt.K=Dt.K[0];break;case 3:var Gt,Vt=Ee(Nt,8)+1,Cr=16<Vt?0:4<Vt?1:2<Vt?2:3;if(Ke[0]=Ne(Dt.Ea,Cr),Dt.b=Cr,Gt=Tt=De(Vt,1,0,vt,Dt.K)){var pr,qr=Vt,yr=Dt,dn=1<<(8>>yr.b),Ts=s(dn);if(Ts==null)Gt=0;else{var Gr=yr.K[0],br=yr.w;for(Ts[0]=yr.K[0][0],pr=1;pr<1*qr;++pr)Ts[pr]=Me(Gr[br+pr],Ts[pr-1]);for(;pr<4*dn;++pr)Ts[pr]=0;yr.K[0]=null,yr.K[0]=Ts,Gt=1}}Tt=Gt;break;case 2:break;default:t(0)}we=Tt}}if(Ie=Ie[0],je=je[0],we&&Ee(Re,1)&&!(we=1<=(Ct=Ee(Re,4))&&11>=Ct)){Y.a=3;break e}var ar;if(ar=we)t:{var ls,Vr,An,da=Y,vi=Ie,xo=je,Xa=Ct,$i=H,vo=da.m,Fs=da.s,mn=[null],jn=1,Ja=0,Pn=xse[Xa];r:for(;;){if($i&&Ee(vo,1)){var yi=Ee(vo,3)+2,Mc=Ne(vi,yi),cs=Ne(xo,yi),Uo=Mc*cs;if(!De(Mc,cs,0,da,mn))break r;for(mn=mn[0],Fs.xc=yi,ls=0;ls<Uo;++ls){var Wn=mn[ls]>>8&65535;mn[ls]=Wn,Wn>=jn&&(jn=Wn+1)}}if(vo.h)break r;for(Vr=0;5>Vr;++Vr){var Os=oR[Vr];!Vr&&0<Xa&&(Os+=1<<Xa),Ja<Os&&(Ja=Os)}var dl=o(jn*Pn,R),yo=jn,Al=o(yo,de);if(Al==null)var hl=null;else t(65536>=yo),hl=Al;var Qo=s(Ja);if(hl==null||Qo==null||dl==null){da.a=1;break r}var fl=dl;for(ls=An=0;ls<jn;++ls){var aa=hl[ls],ml=aa.G,Uc=aa.H,Hf=0,yd=1,bi=0;for(Vr=0;5>Vr;++Vr){Os=oR[Vr],ml[Vr]=fl,Uc[Vr]=An,!Vr&&0<Xa&&(Os+=1<<Xa);a:{var iw,DI=Os,ow=da,Fx=Qo,Mse=fl,Use=An,RI=0,XA=ow.m,Qse=Ee(XA,1);if(a(Fx,0,0,DI),Qse){var Vse=Ee(XA,1)+1,Hse=Ee(XA,1),gR=Ee(XA,Hse==0?1:8);Fx[gR]=1,Vse==2&&(Fx[gR=Ee(XA,8)]=1);var lw=1}else{var xR=s(19),vR=Ee(XA,4)+4;if(19<vR){ow.a=3;var cw=0;break a}for(iw=0;iw<vR;++iw)xR[pse[iw]]=Ee(XA,3);var LI=void 0,Ox=void 0,yR=ow,$se=xR,uw=DI,bR=Fx,MI=0,JA=yR.m,wR=8,NR=o(128,R);n:for(;j(NR,0,7,$se,19);){if(Ee(JA,1)){var Kse=2+2*Ee(JA,3);if((LI=2+Ee(JA,Kse))>uw)break n}else LI=uw;for(Ox=0;Ox<uw&&LI--;){G(JA);var CR=NR[0+(127&V(JA))];M(JA,JA.u+CR.g);var G0=CR.value;if(16>G0)bR[Ox++]=G0,G0!=0&&(wR=G0);else{var qse=G0==16,_R=G0-16,Gse=fse[_R],ER=Ee(JA,hse[_R])+Gse;if(Ox+ER>uw)break n;for(var zse=qse?wR:0;0<ER--;)bR[Ox++]=zse}}MI=1;break n}MI||(yR.a=3),lw=MI}(lw=lw&&!XA.h)&&(RI=j(Mse,Use,8,Fx,DI)),lw&&RI!=0?cw=RI:(ow.a=3,cw=0)}if(cw==0)break r;if(yd&&mse[Vr]==1&&(yd=fl[An].g==0),Hf+=fl[An].g,An+=cw,3>=Vr){var Dx,UI=Qo[0];for(Dx=1;Dx<Os;++Dx)Qo[Dx]>UI&&(UI=Qo[Dx]);bi+=UI}}if(aa.nd=yd,aa.Qb=0,yd&&(aa.qb=(ml[3][Uc[3]+0].value<<24|ml[1][Uc[1]+0].value<<16|ml[2][Uc[2]+0].value)>>>0,Hf==0&&256>ml[0][Uc[0]+0].value&&(aa.Qb=1,aa.qb+=ml[0][Uc[0]+0].value<<8)),aa.jc=!aa.Qb&&6>bi,aa.jc){var dw,bd=aa;for(dw=0;dw<Uf;++dw){var YA=dw,ZA=bd.pd[YA],Aw=bd.G[0][bd.H[0]+YA];256<=Aw.value?(ZA.g=Aw.g+256,ZA.value=Aw.value):(ZA.g=0,ZA.value=0,YA>>=wt(Aw,8,ZA),YA>>=wt(bd.G[1][bd.H[1]+YA],16,ZA),YA>>=wt(bd.G[2][bd.H[2]+YA],0,ZA),wt(bd.G[3][bd.H[3]+YA],24,ZA))}}}Fs.vc=mn,Fs.Wb=jn,Fs.Ya=hl,Fs.yc=dl,ar=1;break t}ar=0}if(!(we=ar)){Y.a=3;break e}if(0<Ct){if($e.ua=1<<Ct,!z($e.Wa,Ct)){Y.a=1,we=0;break e}}else $e.ua=0;var QI=Y,SR=Ie,Wse=je,VI=QI.s,HI=VI.xc;if(QI.c=SR,QI.i=Wse,VI.md=Ne(SR,HI),VI.wc=HI==0?-1:(1<<HI)-1,H){Y.xb=Ese;break e}if((ct=s(Ie*je))==null){Y.a=1,we=0;break e}we=(we=ae(Y,ct,0,Ie,je,je,null))&&!Re.h;break e}return we?(ge!=null?ge[0]=ct:(t(ct==null),t(H)),Y.$=0,H||Oe($e)):Oe($e),we}function Se(w,B){var H=w.c*w.i,Y=H+B+16*B;return t(w.c<=B),w.V=s(Y),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+H+B,1)}function Ye(w,B){var H=w.C,Y=B-H,ge=w.V,we=w.Ba+w.c*H;for(t(B<=w.l.o);0<Y;){var Ie=16<Y?16:Y,je=w.l.ma,Re=w.l.width,$e=Re*Ie,ct=je.ca,Ct=je.tb+Re*H,Ke=w.Ta,ft=w.Ua;se(w,Ie,ge,we),ZD(Ke,ft,ct,Ct,$e),Be(je,H,H+Ie,ct,Ct,Re),Y-=Ie,ge+=Ie*w.c,H+=Ie}t(H==B),w.C=w.Ma=B}function We(){this.ub=this.yd=this.td=this.Rb=0}function Xe(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function qe(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function at(){this.Yb=function(){var w=[];return function B(H,Y,ge){for(var we=ge[Y],Ie=0;Ie<we&&(H.push(ge.length>Y+1?[]:0),!(ge.length<Y+1));Ie++)B(H[Ie],Y+1,ge)}(w,0,[3,11]),w}()}function mt(){this.jb=s(3),this.Wc=l([4,8],at),this.Xc=l([4,17],at)}function Kt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Jt(){this.ld=this.La=this.dd=this.tc=0}function _r(){this.Na=this.la=0}function ta(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Vn(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function mo(){this.uc=this.M=this.Nb=0,this.wa=Array(new Jt),this.Y=0,this.ya=Array(new Vn),this.aa=0,this.l=new sl}function ss(){this.y=s(16),this.f=s(8),this.ea=s(8)}function al(){this.cb=this.a=0,this.sc="",this.m=new k,this.Od=new We,this.Kc=new Xe,this.ed=new Kt,this.Qa=new qe,this.Ic=this.$c=this.Aa=0,this.D=new mo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,k),this.ia=0,this.pb=o(4,ta),this.Pa=new mt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ss),this.Hd=0,this.rb=Array(new _r),this.sb=0,this.wa=Array(new Jt),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Vn),this.L=this.aa=0,this.gd=l([4,2],Jt),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ua(w,B){return 0>w?0:w>B?B:w}function sl(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function FA(){var w=new al;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,kx||(kx=dd)),w}function ra(w,B,H){return w.a==0&&(w.a=B,w.sc=H,w.cb=0),0}function Nu(w,B,H){return 3<=H&&w[B+0]==157&&w[B+1]==1&&w[B+2]==42}function Ql(w,B){if(w==null)return 0;if(w.a=0,w.sc="OK",B==null)return ra(w,2,"null VP8Io passed to VP8GetHeaders()");var H=B.data,Y=B.w,ge=B.ha;if(4>ge)return ra(w,7,"Truncated header.");var we=H[Y+0]|H[Y+1]<<8|H[Y+2]<<16,Ie=w.Od;if(Ie.Rb=!(1&we),Ie.td=we>>1&7,Ie.yd=we>>4&1,Ie.ub=we>>5,3<Ie.td)return ra(w,3,"Incorrect keyframe parameters.");if(!Ie.yd)return ra(w,4,"Frame not displayable.");Y+=3,ge-=3;var je=w.Kc;if(Ie.Rb){if(7>ge)return ra(w,7,"cannot parse picture header");if(!Nu(H,Y,ge))return ra(w,3,"Bad code word");je.c=16383&(H[Y+4]<<8|H[Y+3]),je.Td=H[Y+4]>>6,je.i=16383&(H[Y+6]<<8|H[Y+5]),je.Ud=H[Y+6]>>6,Y+=7,ge-=7,w.za=je.c+15>>4,w.Ub=je.i+15>>4,B.width=je.c,B.height=je.i,B.Da=0,B.j=0,B.v=0,B.va=B.width,B.o=B.height,B.da=0,B.ib=B.width,B.hb=B.height,B.U=B.width,B.T=B.height,a((we=w.Pa).jb,0,255,we.jb.length),t((we=w.Qa)!=null),we.Cb=0,we.Bb=0,we.Fb=1,a(we.Zb,0,0,we.Zb.length),a(we.Lb,0,0,we.Lb)}if(Ie.ub>ge)return ra(w,7,"bad partition length");te(we=w.m,H,Y,Ie.ub),Y+=Ie.ub,ge-=Ie.ub,Ie.Rb&&(je.Ld=K(we),je.Kd=K(we)),je=w.Qa;var Re,$e=w.Pa;if(t(we!=null),t(je!=null),je.Cb=K(we),je.Cb){if(je.Bb=K(we),K(we)){for(je.Fb=K(we),Re=0;4>Re;++Re)je.Zb[Re]=K(we)?ce(we,7):0;for(Re=0;4>Re;++Re)je.Lb[Re]=K(we)?ce(we,6):0}if(je.Bb)for(Re=0;3>Re;++Re)$e.jb[Re]=K(we)?le(we,8):255}else je.Bb=0;if(we.Ka)return ra(w,3,"cannot parse segment header");if((je=w.ed).zd=K(we),je.Tb=le(we,6),je.wb=le(we,3),je.Pc=K(we),je.Pc&&K(we)){for($e=0;4>$e;++$e)K(we)&&(je.vd[$e]=ce(we,6));for($e=0;4>$e;++$e)K(we)&&(je.od[$e]=ce(we,6))}if(w.L=je.Tb==0?0:je.zd?1:2,we.Ka)return ra(w,3,"cannot parse filter header");var ct=ge;if(ge=Re=Y,Y=Re+ct,je=ct,w.Xb=(1<<le(w.m,2))-1,ct<3*($e=w.Xb))H=7;else{for(Re+=3*$e,je-=3*$e,ct=0;ct<$e;++ct){var Ct=H[ge+0]|H[ge+1]<<8|H[ge+2]<<16;Ct>je&&(Ct=je),te(w.Jc[+ct],H,Re,Ct),Re+=Ct,je-=Ct,ge+=3}te(w.Jc[+$e],H,Re,je),H=Re<Y?0:5}if(H!=0)return ra(w,H,"cannot parse partitions");for(H=le(Re=w.m,7),ge=K(Re)?ce(Re,4):0,Y=K(Re)?ce(Re,4):0,je=K(Re)?ce(Re,4):0,$e=K(Re)?ce(Re,4):0,Re=K(Re)?ce(Re,4):0,ct=w.Qa,Ct=0;4>Ct;++Ct){if(ct.Cb){var Ke=ct.Zb[Ct];ct.Fb||(Ke+=H)}else{if(0<Ct){w.pb[Ct]=w.pb[0];continue}Ke=H}var ft=w.pb[Ct];ft.Sc[0]=TI[ua(Ke+ge,127)],ft.Sc[1]=FI[ua(Ke+0,127)],ft.Eb[0]=2*TI[ua(Ke+Y,127)],ft.Eb[1]=101581*FI[ua(Ke+je,127)]>>16,8>ft.Eb[1]&&(ft.Eb[1]=8),ft.Qc[0]=TI[ua(Ke+$e,117)],ft.Qc[1]=FI[ua(Ke+Re,127)],ft.lc=Ke+Re}if(!Ie.Rb)return ra(w,4,"Not a key frame.");for(K(we),Ie=w.Pa,H=0;4>H;++H){for(ge=0;8>ge;++ge)for(Y=0;3>Y;++Y)for(je=0;11>je;++je)$e=ee(we,Cse[H][ge][Y][je])?le(we,8):wse[H][ge][Y][je],Ie.Wc[H][ge].Yb[Y][je]=$e;for(ge=0;17>ge;++ge)Ie.Xc[H][ge]=Ie.Wc[H][_se[ge]]}return w.kc=K(we),w.kc&&(w.Bd=le(we,8)),w.cb=1}function dd(w,B,H,Y,ge,we,Ie){var je=B[ge].Yb[H];for(H=0;16>ge;++ge){if(!ee(w,je[H+0]))return ge;for(;!ee(w,je[H+1]);)if(je=B[++ge].Yb[0],H=0,ge==16)return 16;var Re=B[ge+1].Yb;if(ee(w,je[H+2])){var $e=w,ct=0;if(ee($e,(Ke=je)[(Ct=H)+3]))if(ee($e,Ke[Ct+6])){for(je=0,Ct=2*(ct=ee($e,Ke[Ct+8]))+(Ke=ee($e,Ke[Ct+9+ct])),ct=0,Ke=yse[Ct];Ke[je];++je)ct+=ct+ee($e,Ke[je]);ct+=3+(8<<Ct)}else ee($e,Ke[Ct+7])?(ct=7+2*ee($e,165),ct+=ee($e,145)):ct=5+ee($e,159);else ct=ee($e,Ke[Ct+4])?3+ee($e,Ke[Ct+5]):2;je=Re[2]}else ct=1,je=Re[1];Re=Ie+bse[ge],0>($e=w).b&&O($e);var Ct,Ke=$e.b,ft=(Ct=$e.Ca>>1)-($e.I>>Ke)>>31;--$e.b,$e.Ca+=ft,$e.Ca|=1,$e.I-=(Ct+1&ft)<<Ke,we[Re]=((ct^ft)-ft)*Y[(0<ge)+0]}return 16}function Ff(w){var B=w.rb[w.sb-1];B.la=0,B.Na=0,a(w.zc,0,0,w.zc.length),w.ja=0}function Lo(w,B,H,Y,ge){ge=w[B+H+32*Y]+(ge>>3),w[B+H+32*Y]=-256&ge?0>ge?0:255:ge}function Gn(w,B,H,Y,ge,we){Lo(w,B,0,H,Y+ge),Lo(w,B,1,H,Y+we),Lo(w,B,2,H,Y-we),Lo(w,B,3,H,Y-ge)}function Ps(w){return(20091*w>>16)+w}function Ad(w,B,H,Y){var ge,we=0,Ie=s(16);for(ge=0;4>ge;++ge){var je=w[B+0]+w[B+8],Re=w[B+0]-w[B+8],$e=(35468*w[B+4]>>16)-Ps(w[B+12]),ct=Ps(w[B+4])+(35468*w[B+12]>>16);Ie[we+0]=je+ct,Ie[we+1]=Re+$e,Ie[we+2]=Re-$e,Ie[we+3]=je-ct,we+=4,B++}for(ge=we=0;4>ge;++ge)je=(w=Ie[we+0]+4)+Ie[we+8],Re=w-Ie[we+8],$e=(35468*Ie[we+4]>>16)-Ps(Ie[we+12]),Lo(H,Y,0,0,je+(ct=Ps(Ie[we+4])+(35468*Ie[we+12]>>16))),Lo(H,Y,1,0,Re+$e),Lo(H,Y,2,0,Re-$e),Lo(H,Y,3,0,je-ct),we++,Y+=32}function OA(w,B,H,Y){var ge=w[B+0]+4,we=35468*w[B+4]>>16,Ie=Ps(w[B+4]),je=35468*w[B+1]>>16;Gn(H,Y,0,ge+Ie,w=Ps(w[B+1]),je),Gn(H,Y,1,ge+we,w,je),Gn(H,Y,2,ge-we,w,je),Gn(H,Y,3,ge-Ie,w,je)}function M0(w,B,H,Y,ge){Ad(w,B,H,Y),ge&&Ad(w,B+16,H,Y+4)}function nn(w,B,H,Y){Vf(w,B+0,H,Y,1),Vf(w,B+32,H,Y+128,1)}function hd(w,B,H,Y){var ge;for(w=w[B+0]+4,ge=0;4>ge;++ge)for(B=0;4>B;++B)Lo(H,Y,B,ge,w)}function Cu(w,B,H,Y){w[B+0]&&Sn(w,B+0,H,Y),w[B+16]&&Sn(w,B+16,H,Y+4),w[B+32]&&Sn(w,B+32,H,Y+128),w[B+48]&&Sn(w,B+48,H,Y+128+4)}function Vl(w,B,H,Y){var ge,we=s(16);for(ge=0;4>ge;++ge){var Ie=w[B+0+ge]+w[B+12+ge],je=w[B+4+ge]+w[B+8+ge],Re=w[B+4+ge]-w[B+8+ge],$e=w[B+0+ge]-w[B+12+ge];we[0+ge]=Ie+je,we[8+ge]=Ie-je,we[4+ge]=$e+Re,we[12+ge]=$e-Re}for(ge=0;4>ge;++ge)Ie=(w=we[0+4*ge]+3)+we[3+4*ge],je=we[1+4*ge]+we[2+4*ge],Re=we[1+4*ge]-we[2+4*ge],$e=w-we[3+4*ge],H[Y+0]=Ie+je>>3,H[Y+16]=$e+Re>>3,H[Y+32]=Ie-je>>3,H[Y+48]=$e-Re>>3,Y+=64}function fd(w,B,H){var Y,ge=B-32,we=ul,Ie=255-w[ge-1];for(Y=0;Y<H;++Y){var je,Re=we,$e=Ie+w[B-1];for(je=0;je<H;++je)w[B+je]=Re[$e+w[ge+je]];B+=32}}function U0(w,B){fd(w,B,4)}function gx(w,B){fd(w,B,8)}function xx(w,B){fd(w,B,16)}function Of(w,B){var H;for(H=0;16>H;++H)n(w,B+32*H,w,B-32,16)}function Q0(w,B){var H;for(H=16;0<H;--H)a(w,B,w[B-1],16),B+=32}function gi(w,B,H){var Y;for(Y=0;16>Y;++Y)a(B,H+32*Y,w,16)}function Hl(w,B){var H,Y=16;for(H=0;16>H;++H)Y+=w[B-1+32*H]+w[B+H-32];gi(Y>>5,w,B)}function _u(w,B){var H,Y=8;for(H=0;16>H;++H)Y+=w[B-1+32*H];gi(Y>>4,w,B)}function DA(w,B){var H,Y=8;for(H=0;16>H;++H)Y+=w[B+H-32];gi(Y>>4,w,B)}function V0(w,B){gi(128,w,B)}function Br(w,B,H){return w+2*B+H+2>>2}function vx(w,B){var H,Y=B-32;for(Y=new Uint8Array([Br(w[Y-1],w[Y+0],w[Y+1]),Br(w[Y+0],w[Y+1],w[Y+2]),Br(w[Y+1],w[Y+2],w[Y+3]),Br(w[Y+2],w[Y+3],w[Y+4])]),H=0;4>H;++H)n(w,B+32*H,Y,0,Y.length)}function yx(w,B){var H=w[B-1],Y=w[B-1+32],ge=w[B-1+64],we=w[B-1+96];ne(w,B+0,16843009*Br(w[B-1-32],H,Y)),ne(w,B+32,16843009*Br(H,Y,ge)),ne(w,B+64,16843009*Br(Y,ge,we)),ne(w,B+96,16843009*Br(ge,we,we))}function bx(w,B){var H,Y=4;for(H=0;4>H;++H)Y+=w[B+H-32]+w[B-1+32*H];for(Y>>=3,H=0;4>H;++H)a(w,B+32*H,Y,4)}function Zs(w,B){var H=w[B-1+0],Y=w[B-1+32],ge=w[B-1+64],we=w[B-1-32],Ie=w[B+0-32],je=w[B+1-32],Re=w[B+2-32],$e=w[B+3-32];w[B+0+96]=Br(Y,ge,w[B-1+96]),w[B+1+96]=w[B+0+64]=Br(H,Y,ge),w[B+2+96]=w[B+1+64]=w[B+0+32]=Br(we,H,Y),w[B+3+96]=w[B+2+64]=w[B+1+32]=w[B+0+0]=Br(Ie,we,H),w[B+3+64]=w[B+2+32]=w[B+1+0]=Br(je,Ie,we),w[B+3+32]=w[B+2+0]=Br(Re,je,Ie),w[B+3+0]=Br($e,Re,je)}function Oc(w,B){var H=w[B+1-32],Y=w[B+2-32],ge=w[B+3-32],we=w[B+4-32],Ie=w[B+5-32],je=w[B+6-32],Re=w[B+7-32];w[B+0+0]=Br(w[B+0-32],H,Y),w[B+1+0]=w[B+0+32]=Br(H,Y,ge),w[B+2+0]=w[B+1+32]=w[B+0+64]=Br(Y,ge,we),w[B+3+0]=w[B+2+32]=w[B+1+64]=w[B+0+96]=Br(ge,we,Ie),w[B+3+32]=w[B+2+64]=w[B+1+96]=Br(we,Ie,je),w[B+3+64]=w[B+2+96]=Br(Ie,je,Re),w[B+3+96]=Br(je,Re,Re)}function wx(w,B){var H=w[B-1+0],Y=w[B-1+32],ge=w[B-1+64],we=w[B-1-32],Ie=w[B+0-32],je=w[B+1-32],Re=w[B+2-32],$e=w[B+3-32];w[B+0+0]=w[B+1+64]=we+Ie+1>>1,w[B+1+0]=w[B+2+64]=Ie+je+1>>1,w[B+2+0]=w[B+3+64]=je+Re+1>>1,w[B+3+0]=Re+$e+1>>1,w[B+0+96]=Br(ge,Y,H),w[B+0+64]=Br(Y,H,we),w[B+0+32]=w[B+1+96]=Br(H,we,Ie),w[B+1+32]=w[B+2+96]=Br(we,Ie,je),w[B+2+32]=w[B+3+96]=Br(Ie,je,Re),w[B+3+32]=Br(je,Re,$e)}function RA(w,B){var H=w[B+0-32],Y=w[B+1-32],ge=w[B+2-32],we=w[B+3-32],Ie=w[B+4-32],je=w[B+5-32],Re=w[B+6-32],$e=w[B+7-32];w[B+0+0]=H+Y+1>>1,w[B+1+0]=w[B+0+64]=Y+ge+1>>1,w[B+2+0]=w[B+1+64]=ge+we+1>>1,w[B+3+0]=w[B+2+64]=we+Ie+1>>1,w[B+0+32]=Br(H,Y,ge),w[B+1+32]=w[B+0+96]=Br(Y,ge,we),w[B+2+32]=w[B+1+96]=Br(ge,we,Ie),w[B+3+32]=w[B+2+96]=Br(we,Ie,je),w[B+3+64]=Br(Ie,je,Re),w[B+3+96]=Br(je,Re,$e)}function Dc(w,B){var H=w[B-1+0],Y=w[B-1+32],ge=w[B-1+64],we=w[B-1+96];w[B+0+0]=H+Y+1>>1,w[B+2+0]=w[B+0+32]=Y+ge+1>>1,w[B+2+32]=w[B+0+64]=ge+we+1>>1,w[B+1+0]=Br(H,Y,ge),w[B+3+0]=w[B+1+32]=Br(Y,ge,we),w[B+3+32]=w[B+1+64]=Br(ge,we,we),w[B+3+64]=w[B+2+64]=w[B+0+96]=w[B+1+96]=w[B+2+96]=w[B+3+96]=we}function LA(w,B){var H=w[B-1+0],Y=w[B-1+32],ge=w[B-1+64],we=w[B-1+96],Ie=w[B-1-32],je=w[B+0-32],Re=w[B+1-32],$e=w[B+2-32];w[B+0+0]=w[B+2+32]=H+Ie+1>>1,w[B+0+32]=w[B+2+64]=Y+H+1>>1,w[B+0+64]=w[B+2+96]=ge+Y+1>>1,w[B+0+96]=we+ge+1>>1,w[B+3+0]=Br(je,Re,$e),w[B+2+0]=Br(Ie,je,Re),w[B+1+0]=w[B+3+32]=Br(H,Ie,je),w[B+1+32]=w[B+3+64]=Br(Y,H,Ie),w[B+1+64]=w[B+3+96]=Br(ge,Y,H),w[B+1+96]=Br(we,ge,Y)}function il(w,B){var H;for(H=0;8>H;++H)n(w,B+32*H,w,B-32,8)}function md(w,B){var H;for(H=0;8>H;++H)a(w,B,w[B-1],8),B+=32}function $l(w,B,H){var Y;for(Y=0;8>Y;++Y)a(B,H+32*Y,w,8)}function Df(w,B){var H,Y=8;for(H=0;8>H;++H)Y+=w[B+H-32]+w[B-1+32*H];$l(Y>>4,w,B)}function Hn(w,B){var H,Y=4;for(H=0;8>H;++H)Y+=w[B+H-32];$l(Y>>3,w,B)}function Rf(w,B){var H,Y=4;for(H=0;8>H;++H)Y+=w[B-1+32*H];$l(Y>>3,w,B)}function H0(w,B){$l(128,w,B)}function Kl(w,B,H){var Y=w[B-H],ge=w[B+0],we=3*(ge-Y)+II[1020+w[B-2*H]-w[B+H]],Ie=Jb[112+(we+4>>3)];w[B-H]=ul[255+Y+Jb[112+(we+3>>3)]],w[B+0]=ul[255+ge-Ie]}function MA(w,B,H,Y){var ge=w[B+0],we=w[B+H];return Jl[255+w[B-2*H]-w[B-H]]>Y||Jl[255+we-ge]>Y}function pd(w,B,H,Y){return 4*Jl[255+w[B-H]-w[B+0]]+Jl[255+w[B-2*H]-w[B+H]]<=Y}function Eu(w,B,H,Y,ge){var we=w[B-3*H],Ie=w[B-2*H],je=w[B-H],Re=w[B+0],$e=w[B+H],ct=w[B+2*H],Ct=w[B+3*H];return 4*Jl[255+je-Re]+Jl[255+Ie-$e]>Y?0:Jl[255+w[B-4*H]-we]<=ge&&Jl[255+we-Ie]<=ge&&Jl[255+Ie-je]<=ge&&Jl[255+Ct-ct]<=ge&&Jl[255+ct-$e]<=ge&&Jl[255+$e-Re]<=ge}function Su(w,B,H,Y){var ge=2*Y+1;for(Y=0;16>Y;++Y)pd(w,B+Y,H,ge)&&Kl(w,B+Y,H)}function po(w,B,H,Y){var ge=2*Y+1;for(Y=0;16>Y;++Y)pd(w,B+Y*H,1,ge)&&Kl(w,B+Y*H,1)}function Lf(w,B,H,Y){var ge;for(ge=3;0<ge;--ge)Su(w,B+=4*H,H,Y)}function $0(w,B,H,Y){var ge;for(ge=3;0<ge;--ge)po(w,B+=4,H,Y)}function go(w,B,H,Y,ge,we,Ie,je){for(we=2*we+1;0<ge--;){if(Eu(w,B,H,we,Ie))if(MA(w,B,H,je))Kl(w,B,H);else{var Re=w,$e=B,ct=H,Ct=Re[$e-2*ct],Ke=Re[$e-ct],ft=Re[$e+0],vt=Re[$e+ct],Tt=Re[$e+2*ct],Nt=27*(Rt=II[1020+3*(ft-Ke)+II[1020+Ct-vt]])+63>>7,Dt=18*Rt+63>>7,Rt=9*Rt+63>>7;Re[$e-3*ct]=ul[255+Re[$e-3*ct]+Rt],Re[$e-2*ct]=ul[255+Ct+Dt],Re[$e-ct]=ul[255+Ke+Nt],Re[$e+0]=ul[255+ft-Nt],Re[$e+ct]=ul[255+vt-Dt],Re[$e+2*ct]=ul[255+Tt-Rt]}B+=Y}}function ql(w,B,H,Y,ge,we,Ie,je){for(we=2*we+1;0<ge--;){if(Eu(w,B,H,we,Ie))if(MA(w,B,H,je))Kl(w,B,H);else{var Re=w,$e=B,ct=H,Ct=Re[$e-ct],Ke=Re[$e+0],ft=Re[$e+ct],vt=Jb[112+(4+(Tt=3*(Ke-Ct))>>3)],Tt=Jb[112+(Tt+3>>3)],Nt=vt+1>>1;Re[$e-2*ct]=ul[255+Re[$e-2*ct]+Nt],Re[$e-ct]=ul[255+Ct+Tt],Re[$e+0]=ul[255+Ke-vt],Re[$e+ct]=ul[255+ft-Nt]}B+=Y}}function UA(w,B,H,Y,ge,we){go(w,B,H,1,16,Y,ge,we)}function Gl(w,B,H,Y,ge,we){go(w,B,1,H,16,Y,ge,we)}function Mf(w,B,H,Y,ge,we){var Ie;for(Ie=3;0<Ie;--Ie)ql(w,B+=4*H,H,1,16,Y,ge,we)}function U(w,B,H,Y,ge,we){var Ie;for(Ie=3;0<Ie;--Ie)ql(w,B+=4,1,H,16,Y,ge,we)}function fe(w,B,H,Y,ge,we,Ie,je){go(w,B,ge,1,8,we,Ie,je),go(H,Y,ge,1,8,we,Ie,je)}function He(w,B,H,Y,ge,we,Ie,je){go(w,B,1,ge,8,we,Ie,je),go(H,Y,1,ge,8,we,Ie,je)}function tt(w,B,H,Y,ge,we,Ie,je){ql(w,B+4*ge,ge,1,8,we,Ie,je),ql(H,Y+4*ge,ge,1,8,we,Ie,je)}function pt(w,B,H,Y,ge,we,Ie,je){ql(w,B+4,1,ge,8,we,Ie,je),ql(H,Y+4,1,ge,8,we,Ie,je)}function Ot(){this.ba=new ut,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new $t,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ut(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function dr(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function vr(){this.ua=0,this.Wa=new ve,this.vb=new ve,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new de,this.yc=new R}function jr(){this.xb=this.a=0,this.l=new sl,this.ca=new ut,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new F,this.Pb=0,this.wd=new F,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new vr,this.ab=0,this.gc=o(4,dr),this.Oc=0}function Mr(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new sl,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function an(w,B,H,Y,ge,we,Ie){for(w=w==null?0:w[B+0],B=0;B<Ie;++B)ge[we+B]=w+H[Y+B]&255,w=ge[we+B]}function Cn(w,B,H,Y,ge,we,Ie){var je;if(w==null)an(null,null,H,Y,ge,we,Ie);else for(je=0;je<Ie;++je)ge[we+je]=w[B+je]+H[Y+je]&255}function Fa(w,B,H,Y,ge,we,Ie){if(w==null)an(null,null,H,Y,ge,we,Ie);else{var je,Re=w[B+0],$e=Re,ct=Re;for(je=0;je<Ie;++je)$e=ct+(Re=w[B+je])-$e,ct=H[Y+je]+(-256&$e?0>$e?0:255:$e)&255,$e=Re,ge[we+je]=ct}}function Bn(w,B,H,Y){var ge=B.width,we=B.o;if(t(w!=null&&B!=null),0>H||0>=Y||H+Y>we)return null;if(!w.Cc){if(w.ga==null){var Ie;if(w.ga=new Mr,(Ie=w.ga==null)||(Ie=B.width*B.o,t(w.Gb.length==0),w.Gb=s(Ie),w.Uc=0,w.Gb==null?Ie=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,Ie=1),Ie=!Ie),!Ie){Ie=w.ga;var je=w.Fa,Re=w.P,$e=w.qc,ct=w.mb,Ct=w.nb,Ke=Re+1,ft=$e-1,vt=Ie.l;if(t(je!=null&&ct!=null&&B!=null),WA[0]=null,WA[1]=an,WA[2]=Cn,WA[3]=Fa,Ie.ca=ct,Ie.tb=Ct,Ie.c=B.width,Ie.i=B.height,t(0<Ie.c&&0<Ie.i),1>=$e)B=0;else if(Ie.$a=3&je[Re+0],Ie.Z=je[Re+0]>>2&3,Ie.Lc=je[Re+0]>>4&3,Re=je[Re+0]>>6&3,0>Ie.$a||1<Ie.$a||4<=Ie.Z||1<Ie.Lc||Re)B=0;else if(vt.put=Ce,vt.ac=gt,vt.bc=et,vt.ma=Ie,vt.width=B.width,vt.height=B.height,vt.Da=B.Da,vt.v=B.v,vt.va=B.va,vt.j=B.j,vt.o=B.o,Ie.$a)e:{t(Ie.$a==1),B=pe();t:for(;;){if(B==null){B=0;break e}if(t(Ie!=null),Ie.mc=B,B.c=Ie.c,B.i=Ie.i,B.l=Ie.l,B.l.ma=Ie,B.l.width=Ie.c,B.l.height=Ie.i,B.a=0,J(B.m,je,Ke,ft),!De(Ie.c,Ie.i,1,B,null)||(B.ab==1&&B.gc[0].hc==3&&Ae(B.s)?(Ie.ic=1,je=B.c*B.i,B.Ta=null,B.Ua=0,B.V=s(je),B.Ba=0,B.V==null?(B.a=1,B=0):B=1):(Ie.ic=0,B=Se(B,Ie.c)),!B))break t;B=1;break e}Ie.mc=null,B=0}else B=ft>=Ie.c*Ie.i;Ie=!B}if(Ie)return null;w.ga.Lc!=1?w.Ga=0:Y=we-H}t(w.ga!=null),t(H+Y<=we);e:{if(B=(je=w.ga).c,we=je.l.o,je.$a==0){if(Ke=w.rc,ft=w.Vc,vt=w.Fa,Re=w.P+1+H*B,$e=w.mb,ct=w.nb+H*B,t(Re<=w.P+w.qc),je.Z!=0)for(t(WA[je.Z]!=null),Ie=0;Ie<Y;++Ie)WA[je.Z](Ke,ft,vt,Re,$e,ct,B),Ke=$e,ft=ct,ct+=B,Re+=B;else for(Ie=0;Ie<Y;++Ie)n($e,ct,vt,Re,B),Ke=$e,ft=ct,ct+=B,Re+=B;w.rc=Ke,w.Vc=ft}else{if(t(je.mc!=null),B=H+Y,t((Ie=je.mc)!=null),t(B<=Ie.i),Ie.C>=B)B=1;else if(je.ic||Mo(),je.ic){je=Ie.V,Ke=Ie.Ba,ft=Ie.c;var Tt=Ie.i,Nt=(vt=1,Re=Ie.$/ft,$e=Ie.$%ft,ct=Ie.m,Ct=Ie.s,Ie.$),Dt=ft*Tt,Rt=ft*B,Gt=Ct.wc,Vt=Nt<Rt?ie(Ct,$e,Re):null;t(Nt<=Dt),t(B<=Tt),t(Ae(Ct));t:for(;;){for(;!ct.h&&Nt<Rt;){if($e&Gt||(Vt=ie(Ct,$e,Re)),t(Vt!=null),G(ct),256>(Tt=qt(Vt.G[0],Vt.H[0],ct)))je[Ke+Nt]=Tt,++Nt,++$e>=ft&&($e=0,++Re<=B&&!(Re%16)&&Fe(Ie,Re));else{if(!(280>Tt)){vt=0;break t}Tt=Pt(Tt-256,ct);var Cr,pr=qt(Vt.G[4],Vt.H[4],ct);if(G(ct),!(Nt>=(pr=Lt(ft,pr=Pt(pr,ct)))&&Dt-Nt>=Tt)){vt=0;break t}for(Cr=0;Cr<Tt;++Cr)je[Ke+Nt+Cr]=je[Ke+Nt+Cr-pr];for(Nt+=Tt,$e+=Tt;$e>=ft;)$e-=ft,++Re<=B&&!(Re%16)&&Fe(Ie,Re);Nt<Rt&&$e&Gt&&(Vt=ie(Ct,$e,Re))}t(ct.h==D(ct))}Fe(Ie,Re>B?B:Re);break t}!vt||ct.h&&Nt<Dt?(vt=0,Ie.a=ct.h?5:3):Ie.$=Nt,B=vt}else B=ae(Ie,Ie.V,Ie.Ba,Ie.c,Ie.i,B,Ye);if(!B){Y=0;break e}}H+Y>=we&&(w.Cc=1),Y=1}if(!Y)return null;if(w.Cc&&((Y=w.ga)!=null&&(Y.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+H*ge}function za(w,B,H,Y,ge,we){for(;0<ge--;){var Ie,je=w,Re=B+(H?1:0),$e=w,ct=B+(H?0:3);for(Ie=0;Ie<Y;++Ie){var Ct=$e[ct+4*Ie];Ct!=255&&(Ct*=32897,je[Re+4*Ie+0]=je[Re+4*Ie+0]*Ct>>23,je[Re+4*Ie+1]=je[Re+4*Ie+1]*Ct>>23,je[Re+4*Ie+2]=je[Re+4*Ie+2]*Ct>>23)}B+=we}}function Oa(w,B,H,Y,ge){for(;0<Y--;){var we;for(we=0;we<H;++we){var Ie=w[B+2*we+0],je=15&($e=w[B+2*we+1]),Re=4369*je,$e=(240&$e|$e>>4)*Re>>16;w[B+2*we+0]=(240&Ie|Ie>>4)*Re>>16&240|(15&Ie|Ie<<4)*Re>>16>>4&15,w[B+2*we+1]=240&$e|je}B+=ge}}function Wa(w,B,H,Y,ge,we,Ie,je){var Re,$e,ct=255;for($e=0;$e<ge;++$e){for(Re=0;Re<Y;++Re){var Ct=w[B+Re];we[Ie+4*Re]=Ct,ct&=Ct}B+=H,Ie+=je}return ct!=255}function Da(w,B,H,Y,ge){var we;for(we=0;we<ge;++we)H[Y+we]=w[B+we]>>8}function Mo(){Px=za,JD=Oa,YD=Wa,ZD=Da}function zl(w,B,H){I[w]=function(Y,ge,we,Ie,je,Re,$e,ct,Ct,Ke,ft,vt,Tt,Nt,Dt,Rt,Gt){var Vt,Cr=Gt-1>>1,pr=je[Re+0]|$e[ct+0]<<16,qr=Ct[Ke+0]|ft[vt+0]<<16;t(Y!=null);var yr=3*pr+qr+131074>>2;for(B(Y[ge+0],255&yr,yr>>16,Tt,Nt),we!=null&&(yr=3*qr+pr+131074>>2,B(we[Ie+0],255&yr,yr>>16,Dt,Rt)),Vt=1;Vt<=Cr;++Vt){var dn=je[Re+Vt]|$e[ct+Vt]<<16,Ts=Ct[Ke+Vt]|ft[vt+Vt]<<16,Gr=pr+dn+qr+Ts+524296,br=Gr+2*(dn+qr)>>3;yr=br+pr>>1,pr=(Gr=Gr+2*(pr+Ts)>>3)+dn>>1,B(Y[ge+2*Vt-1],255&yr,yr>>16,Tt,Nt+(2*Vt-1)*H),B(Y[ge+2*Vt-0],255&pr,pr>>16,Tt,Nt+(2*Vt-0)*H),we!=null&&(yr=Gr+qr>>1,pr=br+Ts>>1,B(we[Ie+2*Vt-1],255&yr,yr>>16,Dt,Rt+(2*Vt-1)*H),B(we[Ie+2*Vt+0],255&pr,pr>>16,Dt,Rt+(2*Vt+0)*H)),pr=dn,qr=Ts}1&Gt||(yr=3*pr+qr+131074>>2,B(Y[ge+Gt-1],255&yr,yr>>16,Tt,Nt+(Gt-1)*H),we!=null&&(yr=3*qr+pr+131074>>2,B(we[Ie+Gt-1],255&yr,yr>>16,Dt,Rt+(Gt-1)*H)))}}function Wl(){Yl[Yb]=Sse,Yl[Zb]=uR,Yl[sR]=Ise,Yl[ew]=dR,Yl[tw]=AR,Yl[BI]=hR,Yl[iR]=Bse,Yl[jI]=uR,Yl[PI]=dR,Yl[rw]=AR,Yl[kI]=hR}function N(w){return w&-16384?0>w?0:255:w>>jse}function q(w,B){return N((19077*w>>8)+(26149*B>>8)-14234)}function oe(w,B,H){return N((19077*w>>8)-(6419*B>>8)-(13320*H>>8)+8708)}function Te(w,B){return N((19077*w>>8)+(33050*B>>8)-17685)}function xt(w,B,H,Y,ge){Y[ge+0]=q(w,H),Y[ge+1]=oe(w,B,H),Y[ge+2]=Te(w,B)}function St(w,B,H,Y,ge){Y[ge+0]=Te(w,B),Y[ge+1]=oe(w,B,H),Y[ge+2]=q(w,H)}function Zt(w,B,H,Y,ge){var we=oe(w,B,H);B=we<<3&224|Te(w,B)>>3,Y[ge+0]=248&q(w,H)|we>>5,Y[ge+1]=B}function un(w,B,H,Y,ge){var we=240&Te(w,B)|15;Y[ge+0]=240&q(w,H)|oe(w,B,H)>>4,Y[ge+1]=we}function Ra(w,B,H,Y,ge){Y[ge+0]=255,xt(w,B,H,Y,ge+1)}function Jr(w,B,H,Y,ge){St(w,B,H,Y,ge),Y[ge+3]=255}function vn(w,B,H,Y,ge){xt(w,B,H,Y,ge),Y[ge+3]=255}function na(w,B,H){I[w]=function(Y,ge,we,Ie,je,Re,$e,ct,Ct){for(var Ke=ct+(-2&Ct)*H;ct!=Ke;)B(Y[ge+0],we[Ie+0],je[Re+0],$e,ct),B(Y[ge+1],we[Ie+0],je[Re+0],$e,ct+H),ge+=2,++Ie,++Re,ct+=2*H;1&Ct&&B(Y[ge+0],we[Ie+0],je[Re+0],$e,ct)}}function ol(w,B,H){return H==0?w==0?B==0?6:5:B==0?4:0:H}function Hi(w,B,H,Y,ge){switch(w>>>30){case 3:Vf(B,H,Y,ge,0);break;case 2:Xl(B,H,Y,ge);break;case 1:Sn(B,H,Y,ge)}}function xi(w,B){var H,Y,ge=B.M,we=B.Nb,Ie=w.oc,je=w.pc+40,Re=w.oc,$e=w.pc+584,ct=w.oc,Ct=w.pc+600;for(H=0;16>H;++H)Ie[je+32*H-1]=129;for(H=0;8>H;++H)Re[$e+32*H-1]=129,ct[Ct+32*H-1]=129;for(0<ge?Ie[je-1-32]=Re[$e-1-32]=ct[Ct-1-32]=129:(a(Ie,je-32-1,127,21),a(Re,$e-32-1,127,9),a(ct,Ct-32-1,127,9)),Y=0;Y<w.za;++Y){var Ke=B.ya[B.aa+Y];if(0<Y){for(H=-1;16>H;++H)n(Ie,je+32*H-4,Ie,je+32*H+12,4);for(H=-1;8>H;++H)n(Re,$e+32*H-4,Re,$e+32*H+4,4),n(ct,Ct+32*H-4,ct,Ct+32*H+4,4)}var ft=w.Gd,vt=w.Hd+Y,Tt=Ke.ad,Nt=Ke.Hc;if(0<ge&&(n(Ie,je-32,ft[vt].y,0,16),n(Re,$e-32,ft[vt].f,0,8),n(ct,Ct-32,ft[vt].ea,0,8)),Ke.Za){var Dt=Ie,Rt=je-32+16;for(0<ge&&(Y>=w.za-1?a(Dt,Rt,ft[vt].y[15],4):n(Dt,Rt,ft[vt+1].y,0,4)),H=0;4>H;H++)Dt[Rt+128+H]=Dt[Rt+256+H]=Dt[Rt+384+H]=Dt[Rt+0+H];for(H=0;16>H;++H,Nt<<=2)Dt=Ie,Rt=je+mR[H],Lc[Ke.Ob[H]](Dt,Rt),Hi(Nt,Tt,16*+H,Dt,Rt)}else if(Dt=ol(Y,ge,Ke.Ob[0]),zA[Dt](Ie,je),Nt!=0)for(H=0;16>H;++H,Nt<<=2)Hi(Nt,Tt,16*+H,Ie,je+mR[H]);for(H=Ke.Gc,Dt=ol(Y,ge,Ke.Dd),vd[Dt](Re,$e),vd[Dt](ct,Ct),Nt=Tt,Dt=Re,Rt=$e,255&(Ke=0|H)&&(170&Ke?ju(Nt,256,Dt,Rt):zn(Nt,256,Dt,Rt)),Ke=ct,Nt=Ct,255&(H>>=8)&&(170&H?ju(Tt,320,Ke,Nt):zn(Tt,320,Ke,Nt)),ge<w.Ub-1&&(n(ft[vt].y,0,Ie,je+480,16),n(ft[vt].f,0,Re,$e+224,8),n(ft[vt].ea,0,ct,Ct+224,8)),H=8*we*w.B,ft=w.sa,vt=w.ta+16*Y+16*we*w.R,Tt=w.qa,Ke=w.ra+8*Y+H,Nt=w.Ha,Dt=w.Ia+8*Y+H,H=0;16>H;++H)n(ft,vt+H*w.R,Ie,je+32*H,16);for(H=0;8>H;++H)n(Tt,Ke+H*w.B,Re,$e+32*H,8),n(Nt,Dt+H*w.B,ct,Ct+32*H,8)}}function Rc(w,B,H,Y,ge,we,Ie,je,Re){var $e=[0],ct=[0],Ct=0,Ke=Re!=null?Re.kd:0,ft=Re??new Ut;if(w==null||12>H)return 7;ft.data=w,ft.w=B,ft.ha=H,B=[B],H=[H],ft.gb=[ft.gb];e:{var vt=B,Tt=H,Nt=ft.gb;if(t(w!=null),t(Tt!=null),t(Nt!=null),Nt[0]=0,12<=Tt[0]&&!r(w,vt[0],"RIFF")){if(r(w,vt[0]+8,"WEBP")){Nt=3;break e}var Dt=Z(w,vt[0]+4);if(12>Dt||4294967286<Dt){Nt=3;break e}if(Ke&&Dt>Tt[0]-8){Nt=7;break e}Nt[0]=Dt,vt[0]+=12,Tt[0]-=12}Nt=0}if(Nt!=0)return Nt;for(Dt=0<ft.gb[0],H=H[0];;){e:{var Rt=w;Tt=B,Nt=H;var Gt=$e,Vt=ct,Cr=vt=[0];if((yr=Ct=[Ct])[0]=0,8>Nt[0])Nt=7;else{if(!r(Rt,Tt[0],"VP8X")){if(Z(Rt,Tt[0]+4)!=10){Nt=3;break e}if(18>Nt[0]){Nt=7;break e}var pr=Z(Rt,Tt[0]+8),qr=1+be(Rt,Tt[0]+12);if(2147483648<=qr*(Rt=1+be(Rt,Tt[0]+15))){Nt=3;break e}Cr!=null&&(Cr[0]=pr),Gt!=null&&(Gt[0]=qr),Vt!=null&&(Vt[0]=Rt),Tt[0]+=18,Nt[0]-=18,yr[0]=1}Nt=0}}if(Ct=Ct[0],vt=vt[0],Nt!=0)return Nt;if(Tt=!!(2&vt),!Dt&&Ct)return 3;if(we!=null&&(we[0]=!!(16&vt)),Ie!=null&&(Ie[0]=Tt),je!=null&&(je[0]=0),Ie=$e[0],vt=ct[0],Ct&&Tt&&Re==null){Nt=0;break}if(4>H){Nt=7;break}if(Dt&&Ct||!Dt&&!Ct&&!r(w,B[0],"ALPH")){H=[H],ft.na=[ft.na],ft.P=[ft.P],ft.Sa=[ft.Sa];e:{pr=w,Nt=B,Dt=H;var yr=ft.gb;Gt=ft.na,Vt=ft.P,Cr=ft.Sa,qr=22,t(pr!=null),t(Dt!=null),Rt=Nt[0];var dn=Dt[0];for(t(Gt!=null),t(Cr!=null),Gt[0]=null,Vt[0]=null,Cr[0]=0;;){if(Nt[0]=Rt,Dt[0]=dn,8>dn){Nt=7;break e}var Ts=Z(pr,Rt+4);if(4294967286<Ts){Nt=3;break e}var Gr=8+Ts+1&-2;if(qr+=Gr,0<yr&&qr>yr){Nt=3;break e}if(!r(pr,Rt,"VP8 ")||!r(pr,Rt,"VP8L")){Nt=0;break e}if(dn[0]<Gr){Nt=7;break e}r(pr,Rt,"ALPH")||(Gt[0]=pr,Vt[0]=Rt+8,Cr[0]=Ts),Rt+=Gr,dn-=Gr}}if(H=H[0],ft.na=ft.na[0],ft.P=ft.P[0],ft.Sa=ft.Sa[0],Nt!=0)break}H=[H],ft.Ja=[ft.Ja],ft.xa=[ft.xa];e:if(yr=w,Nt=B,Dt=H,Gt=ft.gb[0],Vt=ft.Ja,Cr=ft.xa,pr=Nt[0],Rt=!r(yr,pr,"VP8 "),qr=!r(yr,pr,"VP8L"),t(yr!=null),t(Dt!=null),t(Vt!=null),t(Cr!=null),8>Dt[0])Nt=7;else{if(Rt||qr){if(yr=Z(yr,pr+4),12<=Gt&&yr>Gt-12){Nt=3;break e}if(Ke&&yr>Dt[0]-8){Nt=7;break e}Vt[0]=yr,Nt[0]+=8,Dt[0]-=8,Cr[0]=qr}else Cr[0]=5<=Dt[0]&&yr[pr+0]==47&&!(yr[pr+4]>>5),Vt[0]=Dt[0];Nt=0}if(H=H[0],ft.Ja=ft.Ja[0],ft.xa=ft.xa[0],B=B[0],Nt!=0)break;if(4294967286<ft.Ja)return 3;if(je==null||Tt||(je[0]=ft.xa?2:1),Ie=[Ie],vt=[vt],ft.xa){if(5>H){Nt=7;break}je=Ie,Ke=vt,Tt=we,w==null||5>H?w=0:5<=H&&w[B+0]==47&&!(w[B+4]>>5)?(Dt=[0],yr=[0],Gt=[0],J(Vt=new F,w,B,H),yt(Vt,Dt,yr,Gt)?(je!=null&&(je[0]=Dt[0]),Ke!=null&&(Ke[0]=yr[0]),Tt!=null&&(Tt[0]=Gt[0]),w=1):w=0):w=0}else{if(10>H){Nt=7;break}je=vt,w==null||10>H||!Nu(w,B+3,H-3)?w=0:(Ke=w[B+0]|w[B+1]<<8|w[B+2]<<16,Tt=16383&(w[B+7]<<8|w[B+6]),w=16383&(w[B+9]<<8|w[B+8]),1&Ke||3<(Ke>>1&7)||!(Ke>>4&1)||Ke>>5>=ft.Ja||!Tt||!w?w=0:(Ie&&(Ie[0]=Tt),je&&(je[0]=w),w=1))}if(!w||(Ie=Ie[0],vt=vt[0],Ct&&($e[0]!=Ie||ct[0]!=vt)))return 3;Re!=null&&(Re[0]=ft,Re.offset=B-Re.w,t(4294967286>B-Re.w),t(Re.offset==Re.ha-H));break}return Nt==0||Nt==7&&Ct&&Re==null?(we!=null&&(we[0]|=ft.na!=null&&0<ft.na.length),Y!=null&&(Y[0]=Ie),ge!=null&&(ge[0]=vt),0):Nt}function Nx(w,B,H){var Y=B.width,ge=B.height,we=0,Ie=0,je=Y,Re=ge;if(B.Da=w!=null&&0<w.Da,B.Da&&(je=w.cd,Re=w.bd,we=w.v,Ie=w.j,11>H||(we&=-2,Ie&=-2),0>we||0>Ie||0>=je||0>=Re||we+je>Y||Ie+Re>ge))return 0;if(B.v=we,B.j=Ie,B.va=we+je,B.o=Ie+Re,B.U=je,B.T=Re,B.da=w!=null&&0<w.da,B.da){if(!re(je,Re,H=[w.ib],we=[w.hb]))return 0;B.ib=H[0],B.hb=we[0]}return B.ob=w!=null&&w.ob,B.Kb=w==null||!w.Sd,B.da&&(B.ob=B.ib<3*Y/4&&B.hb<3*ge/4,B.Kb=0),1}function Cx(w){if(w==null)return 2;if(11>w.S){var B=w.f.RGBA;B.fb+=(w.height-1)*B.A,B.A=-B.A}else B=w.f.kb,w=w.height,B.O+=(w-1)*B.fa,B.fa=-B.fa,B.N+=(w-1>>1)*B.Ab,B.Ab=-B.Ab,B.W+=(w-1>>1)*B.Db,B.Db=-B.Db,B.F!=null&&(B.J+=(w-1)*B.lb,B.lb=-B.lb);return 0}function QA(w,B,H,Y){if(Y==null||0>=w||0>=B)return 2;if(H!=null){if(H.Da){var ge=H.cd,we=H.bd,Ie=-2&H.v,je=-2&H.j;if(0>Ie||0>je||0>=ge||0>=we||Ie+ge>w||je+we>B)return 2;w=ge,B=we}if(H.da){if(!re(w,B,ge=[H.ib],we=[H.hb]))return 2;w=ge[0],B=we[0]}}Y.width=w,Y.height=B;e:{var Re=Y.width,$e=Y.height;if(w=Y.S,0>=Re||0>=$e||!(w>=Yb&&13>w))w=2;else{if(0>=Y.Rd&&Y.sd==null){Ie=we=ge=B=0;var ct=(je=Re*pR[w])*$e;if(11>w||(we=($e+1)/2*(B=(Re+1)/2),w==12&&(Ie=(ge=Re)*$e)),($e=s(ct+2*we+Ie))==null){w=1;break e}Y.sd=$e,11>w?((Re=Y.f.RGBA).eb=$e,Re.fb=0,Re.A=je,Re.size=ct):((Re=Y.f.kb).y=$e,Re.O=0,Re.fa=je,Re.Fd=ct,Re.f=$e,Re.N=0+ct,Re.Ab=B,Re.Cd=we,Re.ea=$e,Re.W=0+ct+we,Re.Db=B,Re.Ed=we,w==12&&(Re.F=$e,Re.J=0+ct+2*we),Re.Tc=Ie,Re.lb=ge)}if(B=1,ge=Y.S,we=Y.width,Ie=Y.height,ge>=Yb&&13>ge)if(11>ge)w=Y.f.RGBA,B&=(je=Math.abs(w.A))*(Ie-1)+we<=w.size,B&=je>=we*pR[ge],B&=w.eb!=null;else{w=Y.f.kb,je=(we+1)/2,ct=(Ie+1)/2,Re=Math.abs(w.fa),$e=Math.abs(w.Ab);var Ct=Math.abs(w.Db),Ke=Math.abs(w.lb),ft=Ke*(Ie-1)+we;B&=Re*(Ie-1)+we<=w.Fd,B&=$e*(ct-1)+je<=w.Cd,B=(B&=Ct*(ct-1)+je<=w.Ed)&Re>=we&$e>=je&Ct>=je,B&=w.y!=null,B&=w.f!=null,B&=w.ea!=null,ge==12&&(B&=Ke>=we,B&=ft<=w.Tc,B&=w.F!=null)}else B=0;w=B?0:2}}return w!=0||H!=null&&H.fd&&(w=Cx(Y)),w}var Uf=64,ll=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],cl=24,VA=32,gd=8,HA=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ve("Predictor0","PredictorAdd0"),I.Predictor0=function(){return 4278190080},I.Predictor1=function(w){return w},I.Predictor2=function(w,B,H){return B[H+0]},I.Predictor3=function(w,B,H){return B[H+1]},I.Predictor4=function(w,B,H){return B[H-1]},I.Predictor5=function(w,B,H){return st(st(w,B[H+1]),B[H+0])},I.Predictor6=function(w,B,H){return st(w,B[H-1])},I.Predictor7=function(w,B,H){return st(w,B[H+0])},I.Predictor8=function(w,B,H){return st(B[H-1],B[H+0])},I.Predictor9=function(w,B,H){return st(B[H+0],B[H+1])},I.Predictor10=function(w,B,H){return st(st(w,B[H-1]),st(B[H+0],B[H+1]))},I.Predictor11=function(w,B,H){var Y=B[H+0];return 0>=ot(Y>>24&255,w>>24&255,(B=B[H-1])>>24&255)+ot(Y>>16&255,w>>16&255,B>>16&255)+ot(Y>>8&255,w>>8&255,B>>8&255)+ot(255&Y,255&w,255&B)?Y:w},I.Predictor12=function(w,B,H){var Y=B[H+0];return(lt((w>>24&255)+(Y>>24&255)-((B=B[H-1])>>24&255))<<24|lt((w>>16&255)+(Y>>16&255)-(B>>16&255))<<16|lt((w>>8&255)+(Y>>8&255)-(B>>8&255))<<8|lt((255&w)+(255&Y)-(255&B)))>>>0},I.Predictor13=function(w,B,H){var Y=B[H-1];return(bt((w=st(w,B[H+0]))>>24&255,Y>>24&255)<<24|bt(w>>16&255,Y>>16&255)<<16|bt(w>>8&255,Y>>8&255)<<8|bt(255&w,255&Y))>>>0};var _x=I.PredictorAdd0;I.PredictorAdd1=Le,Ve("Predictor2","PredictorAdd2"),Ve("Predictor3","PredictorAdd3"),Ve("Predictor4","PredictorAdd4"),Ve("Predictor5","PredictorAdd5"),Ve("Predictor6","PredictorAdd6"),Ve("Predictor7","PredictorAdd7"),Ve("Predictor8","PredictorAdd8"),Ve("Predictor9","PredictorAdd9"),Ve("Predictor10","PredictorAdd10"),Ve("Predictor11","PredictorAdd11"),Ve("Predictor12","PredictorAdd12"),Ve("Predictor13","PredictorAdd13");var K0=I.PredictorAdd2;ue("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),ue("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var is,Wb=I.ColorIndexInverseTransform,Iu=I.MapARGB,Bu=I.VP8LColorIndexInverseTransformAlpha,Ex=I.MapAlpha,Sx=I.VP8LPredictorsAdd=[];Sx.length=16,(I.VP8LPredictors=[]).length=16,(I.VP8LPredictorsAdd_C=[]).length=16,(I.VP8LPredictors_C=[]).length=16;var Ix,Bx,$A,KA,qA,Qf,GA,Vf,Xl,ju,Sn,zn,os,ks,xd,jx,q0,Xb,KD,qD,GD,zD,WD,XD,Px,JD,YD,ZD,eR=s(511),tR=s(2041),rR=s(225),nR=s(767),aR=0,II=tR,Jb=rR,ul=nR,Jl=eR,Yb=0,Zb=1,sR=2,ew=3,tw=4,BI=5,iR=6,jI=7,PI=8,rw=9,kI=10,hse=[2,3,7],fse=[3,3,11],oR=[280,256,256,256,40],mse=[0,1,1,1,0],pse=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],gse=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],xse=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],vse=8,TI=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],FI=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],kx=null,yse=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],bse=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],lR=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],wse=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Nse=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Cse=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],_se=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],zA=[],Lc=[],vd=[],Ese=1,cR=2,WA=[],Yl=[];zl("UpsampleRgbLinePair",xt,3),zl("UpsampleBgrLinePair",St,3),zl("UpsampleRgbaLinePair",vn,4),zl("UpsampleBgraLinePair",Jr,4),zl("UpsampleArgbLinePair",Ra,4),zl("UpsampleRgba4444LinePair",un,2),zl("UpsampleRgb565LinePair",Zt,2);var Sse=I.UpsampleRgbLinePair,Ise=I.UpsampleBgrLinePair,uR=I.UpsampleRgbaLinePair,dR=I.UpsampleBgraLinePair,AR=I.UpsampleArgbLinePair,hR=I.UpsampleRgba4444LinePair,Bse=I.UpsampleRgb565LinePair,nw=16,aw=1<<nw-1,Tx=-227,OI=482,jse=6,fR=0,Pse=s(256),kse=s(256),Tse=s(256),Fse=s(256),Ose=s(OI-Tx),Dse=s(OI-Tx);na("YuvToRgbRow",xt,3),na("YuvToBgrRow",St,3),na("YuvToRgbaRow",vn,4),na("YuvToBgraRow",Jr,4),na("YuvToArgbRow",Ra,4),na("YuvToRgba4444Row",un,2),na("YuvToRgb565Row",Zt,2);var mR=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],sw=[0,2,8],Rse=[8,7,6,4,4,2,2,2,1,1,1,1],Lse=1;this.WebPDecodeRGBA=function(w,B,H,Y,ge){var we=Zb,Ie=new Ot,je=new ut;Ie.ba=je,je.S=we,je.width=[je.width],je.height=[je.height];var Re=je.width,$e=je.height,ct=new It;if(ct==null||w==null)var Ct=2;else t(ct!=null),Ct=Rc(w,B,H,ct.width,ct.height,ct.Pd,ct.Qd,ct.format,null);if(Ct!=0?Re=0:(Re!=null&&(Re[0]=ct.width[0]),$e!=null&&($e[0]=ct.height[0]),Re=1),Re){je.width=je.width[0],je.height=je.height[0],Y!=null&&(Y[0]=je.width),ge!=null&&(ge[0]=je.height);e:{if(Y=new sl,(ge=new Ut).data=w,ge.w=B,ge.ha=H,ge.kd=1,B=[0],t(ge!=null),((w=Rc(ge.data,ge.w,ge.ha,null,null,null,B,null,ge))==0||w==7)&&B[0]&&(w=4),(B=w)==0){if(t(Ie!=null),Y.data=ge.data,Y.w=ge.w+ge.offset,Y.ha=ge.ha-ge.offset,Y.put=Ce,Y.ac=gt,Y.bc=et,Y.ma=Ie,ge.xa){if((w=pe())==null){Ie=1;break e}if(function(Ke,ft){var vt=[0],Tt=[0],Nt=[0];t:for(;;){if(Ke==null)return 0;if(ft==null)return Ke.a=2,0;if(Ke.l=ft,Ke.a=0,J(Ke.m,ft.data,ft.w,ft.ha),!yt(Ke.m,vt,Tt,Nt)){Ke.a=3;break t}if(Ke.xb=cR,ft.width=vt[0],ft.height=Tt[0],!De(vt[0],Tt[0],1,Ke,null))break t;return 1}return t(Ke.a!=0),0}(w,Y)){if(Y=(B=QA(Y.width,Y.height,Ie.Oa,Ie.ba))==0){t:{Y=w;r:for(;;){if(Y==null){Y=0;break t}if(t(Y.s.yc!=null),t(Y.s.Ya!=null),t(0<Y.s.Wb),t((H=Y.l)!=null),t((ge=H.ma)!=null),Y.xb!=0){if(Y.ca=ge.ba,Y.tb=ge.tb,t(Y.ca!=null),!Nx(ge.Oa,H,ew)){Y.a=2;break r}if(!Se(Y,H.width)||H.da)break r;if((H.da||ze(Y.ca.S))&&Mo(),11>Y.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Y.ca.f.kb.F!=null&&Mo()),Y.Pb&&0<Y.s.ua&&Y.s.vb.X==null&&!z(Y.s.vb,Y.s.Wa.Xa)){Y.a=1;break r}Y.xb=0}if(!ae(Y,Y.V,Y.Ba,Y.c,Y.i,H.o,he))break r;ge.Dc=Y.Ma,Y=1;break t}t(Y.a!=0),Y=0}Y=!Y}Y&&(B=w.a)}else B=w.a}else{if((w=new FA)==null){Ie=1;break e}if(w.Fa=ge.na,w.P=ge.P,w.qc=ge.Sa,Ql(w,Y)){if((B=QA(Y.width,Y.height,Ie.Oa,Ie.ba))==0){if(w.Aa=0,H=Ie.Oa,t((ge=w)!=null),H!=null){if(0<(Re=0>(Re=H.Md)?0:100<Re?255:255*Re/100)){for($e=ct=0;4>$e;++$e)12>(Ct=ge.pb[$e]).lc&&(Ct.ia=Re*Rse[0>Ct.lc?0:Ct.lc]>>3),ct|=Ct.ia;ct&&(alert("todo:VP8InitRandom"),ge.ia=1)}ge.Ga=H.Id,100<ge.Ga?ge.Ga=100:0>ge.Ga&&(ge.Ga=0)}(function(Ke,ft){if(Ke==null)return 0;if(ft==null)return ra(Ke,2,"NULL VP8Io parameter in VP8Decode().");if(!Ke.cb&&!Ql(Ke,ft))return 0;if(t(Ke.cb),ft.ac==null||ft.ac(ft)){ft.ob&&(Ke.L=0);var vt=sw[Ke.L];if(Ke.L==2?(Ke.yb=0,Ke.zb=0):(Ke.yb=ft.v-vt>>4,Ke.zb=ft.j-vt>>4,0>Ke.yb&&(Ke.yb=0),0>Ke.zb&&(Ke.zb=0)),Ke.Va=ft.o+15+vt>>4,Ke.Hb=ft.va+15+vt>>4,Ke.Hb>Ke.za&&(Ke.Hb=Ke.za),Ke.Va>Ke.Ub&&(Ke.Va=Ke.Ub),0<Ke.L){var Tt=Ke.ed;for(vt=0;4>vt;++vt){var Nt;if(Ke.Qa.Cb){var Dt=Ke.Qa.Lb[vt];Ke.Qa.Fb||(Dt+=Tt.Tb)}else Dt=Tt.Tb;for(Nt=0;1>=Nt;++Nt){var Rt=Ke.gd[vt][Nt],Gt=Dt;if(Tt.Pc&&(Gt+=Tt.vd[0],Nt&&(Gt+=Tt.od[0])),0<(Gt=0>Gt?0:63<Gt?63:Gt)){var Vt=Gt;0<Tt.wb&&(Vt=4<Tt.wb?Vt>>2:Vt>>1)>9-Tt.wb&&(Vt=9-Tt.wb),1>Vt&&(Vt=1),Rt.dd=Vt,Rt.tc=2*Gt+Vt,Rt.ld=40<=Gt?2:15<=Gt?1:0}else Rt.tc=0;Rt.La=Nt}}}vt=0}else ra(Ke,6,"Frame setup failed"),vt=Ke.a;if(vt=vt==0){if(vt){Ke.$c=0,0<Ke.Aa||(Ke.Ic=Lse);t:{vt=Ke.Ic,Tt=4*(Vt=Ke.za);var Cr=32*Vt,pr=Vt+1,qr=0<Ke.L?Vt*(0<Ke.Aa?2:1):0,yr=(Ke.Aa==2?2:1)*Vt;if((Rt=Tt+832+(Nt=3*(16*vt+sw[Ke.L])/2*Cr)+(Dt=Ke.Fa!=null&&0<Ke.Fa.length?Ke.Kc.c*Ke.Kc.i:0))!=Rt)vt=0;else{if(Rt>Ke.Vb){if(Ke.Vb=0,Ke.Ec=s(Rt),Ke.Fc=0,Ke.Ec==null){vt=ra(Ke,1,"no memory during frame initialization.");break t}Ke.Vb=Rt}Rt=Ke.Ec,Gt=Ke.Fc,Ke.Ac=Rt,Ke.Bc=Gt,Gt+=Tt,Ke.Gd=o(Cr,ss),Ke.Hd=0,Ke.rb=o(pr+1,_r),Ke.sb=1,Ke.wa=qr?o(qr,Jt):null,Ke.Y=0,Ke.D.Nb=0,Ke.D.wa=Ke.wa,Ke.D.Y=Ke.Y,0<Ke.Aa&&(Ke.D.Y+=Vt),t(!0),Ke.oc=Rt,Ke.pc=Gt,Gt+=832,Ke.ya=o(yr,Vn),Ke.aa=0,Ke.D.ya=Ke.ya,Ke.D.aa=Ke.aa,Ke.Aa==2&&(Ke.D.aa+=Vt),Ke.R=16*Vt,Ke.B=8*Vt,Vt=(Cr=sw[Ke.L])*Ke.R,Cr=Cr/2*Ke.B,Ke.sa=Rt,Ke.ta=Gt+Vt,Ke.qa=Ke.sa,Ke.ra=Ke.ta+16*vt*Ke.R+Cr,Ke.Ha=Ke.qa,Ke.Ia=Ke.ra+8*vt*Ke.B+Cr,Ke.$c=0,Gt+=Nt,Ke.mb=Dt?Rt:null,Ke.nb=Dt?Gt:null,t(Gt+Dt<=Ke.Fc+Ke.Vb),Ff(Ke),a(Ke.Ac,Ke.Bc,0,Tt),vt=1}}if(vt){if(ft.ka=0,ft.y=Ke.sa,ft.O=Ke.ta,ft.f=Ke.qa,ft.N=Ke.ra,ft.ea=Ke.Ha,ft.Vd=Ke.Ia,ft.fa=Ke.R,ft.Rc=Ke.B,ft.F=null,ft.J=0,!aR){for(vt=-255;255>=vt;++vt)eR[255+vt]=0>vt?-vt:vt;for(vt=-1020;1020>=vt;++vt)tR[1020+vt]=-128>vt?-128:127<vt?127:vt;for(vt=-112;112>=vt;++vt)rR[112+vt]=-16>vt?-16:15<vt?15:vt;for(vt=-255;510>=vt;++vt)nR[255+vt]=0>vt?0:255<vt?255:vt;aR=1}GA=Vl,Vf=M0,ju=nn,Sn=hd,zn=Cu,Xl=OA,os=UA,ks=Gl,xd=fe,jx=He,q0=Mf,Xb=U,KD=tt,qD=pt,GD=Su,zD=po,WD=Lf,XD=$0,Lc[0]=bx,Lc[1]=U0,Lc[2]=vx,Lc[3]=yx,Lc[4]=Zs,Lc[5]=wx,Lc[6]=Oc,Lc[7]=RA,Lc[8]=LA,Lc[9]=Dc,zA[0]=Hl,zA[1]=xx,zA[2]=Of,zA[3]=Q0,zA[4]=_u,zA[5]=DA,zA[6]=V0,vd[0]=Df,vd[1]=gx,vd[2]=il,vd[3]=md,vd[4]=Rf,vd[5]=Hn,vd[6]=H0,vt=1}else vt=0}vt&&(vt=function(dn,Ts){for(dn.M=0;dn.M<dn.Va;++dn.M){var Gr,br=dn.Jc[dn.M&dn.Xb],ar=dn.m,ls=dn;for(Gr=0;Gr<ls.za;++Gr){var Vr=ar,An=ls,da=An.Ac,vi=An.Bc+4*Gr,xo=An.zc,Xa=An.ya[An.aa+Gr];if(An.Qa.Bb?Xa.$b=ee(Vr,An.Pa.jb[0])?2+ee(Vr,An.Pa.jb[2]):ee(Vr,An.Pa.jb[1]):Xa.$b=0,An.kc&&(Xa.Ad=ee(Vr,An.Bd)),Xa.Za=!ee(Vr,145)+0,Xa.Za){var $i=Xa.Ob,vo=0;for(An=0;4>An;++An){var Fs,mn=xo[0+An];for(Fs=0;4>Fs;++Fs){mn=Nse[da[vi+Fs]][mn];for(var jn=lR[ee(Vr,mn[0])];0<jn;)jn=lR[2*jn+ee(Vr,mn[jn])];mn=-jn,da[vi+Fs]=mn}n($i,vo,da,vi,4),vo+=4,xo[0+An]=mn}}else mn=ee(Vr,156)?ee(Vr,128)?1:3:ee(Vr,163)?2:0,Xa.Ob[0]=mn,a(da,vi,mn,4),a(xo,0,mn,4);Xa.Dd=ee(Vr,142)?ee(Vr,114)?ee(Vr,183)?1:3:2:0}if(ls.m.Ka)return ra(dn,7,"Premature end-of-partition0 encountered.");for(;dn.ja<dn.za;++dn.ja){if(ls=br,Vr=(ar=dn).rb[ar.sb-1],da=ar.rb[ar.sb+ar.ja],Gr=ar.ya[ar.aa+ar.ja],vi=ar.kc?Gr.Ad:0)Vr.la=da.la=0,Gr.Za||(Vr.Na=da.Na=0),Gr.Hc=0,Gr.Gc=0,Gr.ia=0;else{var Ja,Pn;if(Vr=da,da=ls,vi=ar.Pa.Xc,xo=ar.ya[ar.aa+ar.ja],Xa=ar.pb[xo.$b],An=xo.ad,$i=0,vo=ar.rb[ar.sb-1],mn=Fs=0,a(An,$i,0,384),xo.Za)var yi=0,Mc=vi[3];else{jn=s(16);var cs=Vr.Na+vo.Na;if(cs=kx(da,vi[1],cs,Xa.Eb,0,jn,0),Vr.Na=vo.Na=(0<cs)+0,1<cs)GA(jn,0,An,$i);else{var Uo=jn[0]+3>>3;for(jn=0;256>jn;jn+=16)An[$i+jn]=Uo}yi=1,Mc=vi[0]}var Wn=15&Vr.la,Os=15&vo.la;for(jn=0;4>jn;++jn){var dl=1&Os;for(Uo=Pn=0;4>Uo;++Uo)Wn=Wn>>1|(dl=(cs=kx(da,Mc,cs=dl+(1&Wn),Xa.Sc,yi,An,$i))>yi)<<7,Pn=Pn<<2|(3<cs?3:1<cs?2:An[$i+0]!=0),$i+=16;Wn>>=4,Os=Os>>1|dl<<7,Fs=(Fs<<8|Pn)>>>0}for(Mc=Wn,yi=Os>>4,Ja=0;4>Ja;Ja+=2){for(Pn=0,Wn=Vr.la>>4+Ja,Os=vo.la>>4+Ja,jn=0;2>jn;++jn){for(dl=1&Os,Uo=0;2>Uo;++Uo)cs=dl+(1&Wn),Wn=Wn>>1|(dl=0<(cs=kx(da,vi[2],cs,Xa.Qc,0,An,$i)))<<3,Pn=Pn<<2|(3<cs?3:1<cs?2:An[$i+0]!=0),$i+=16;Wn>>=2,Os=Os>>1|dl<<5}mn|=Pn<<4*Ja,Mc|=Wn<<4<<Ja,yi|=(240&Os)<<Ja}Vr.la=Mc,vo.la=yi,xo.Hc=Fs,xo.Gc=mn,xo.ia=43690&mn?0:Xa.ia,vi=!(Fs|mn)}if(0<ar.L&&(ar.wa[ar.Y+ar.ja]=ar.gd[Gr.$b][Gr.Za],ar.wa[ar.Y+ar.ja].La|=!vi),ls.Ka)return ra(dn,7,"Premature end-of-file encountered.")}if(Ff(dn),ar=Ts,ls=1,Gr=(br=dn).D,Vr=0<br.L&&br.M>=br.zb&&br.M<=br.Va,br.Aa==0)t:{if(Gr.M=br.M,Gr.uc=Vr,xi(br,Gr),ls=1,Gr=(Pn=br.D).Nb,Vr=(mn=sw[br.L])*br.R,da=mn/2*br.B,jn=16*Gr*br.R,Uo=8*Gr*br.B,vi=br.sa,xo=br.ta-Vr+jn,Xa=br.qa,An=br.ra-da+Uo,$i=br.Ha,vo=br.Ia-da+Uo,Os=(Wn=Pn.M)==0,Fs=Wn>=br.Va-1,br.Aa==2&&xi(br,Pn),Pn.uc)for(dl=(cs=br).D.M,t(cs.D.uc),Pn=cs.yb;Pn<cs.Hb;++Pn){yi=Pn,Mc=dl;var yo=(Al=(bi=cs).D).Nb;Ja=bi.R;var Al=Al.wa[Al.Y+yi],hl=bi.sa,Qo=bi.ta+16*yo*Ja+16*yi,fl=Al.dd,aa=Al.tc;if(aa!=0)if(t(3<=aa),bi.L==1)0<yi&&zD(hl,Qo,Ja,aa+4),Al.La&&XD(hl,Qo,Ja,aa),0<Mc&&GD(hl,Qo,Ja,aa+4),Al.La&&WD(hl,Qo,Ja,aa);else{var ml=bi.B,Uc=bi.qa,Hf=bi.ra+8*yo*ml+8*yi,yd=bi.Ha,bi=bi.Ia+8*yo*ml+8*yi;yo=Al.ld,0<yi&&(ks(hl,Qo,Ja,aa+4,fl,yo),jx(Uc,Hf,yd,bi,ml,aa+4,fl,yo)),Al.La&&(Xb(hl,Qo,Ja,aa,fl,yo),qD(Uc,Hf,yd,bi,ml,aa,fl,yo)),0<Mc&&(os(hl,Qo,Ja,aa+4,fl,yo),xd(Uc,Hf,yd,bi,ml,aa+4,fl,yo)),Al.La&&(q0(hl,Qo,Ja,aa,fl,yo),KD(Uc,Hf,yd,bi,ml,aa,fl,yo))}}if(br.ia&&alert("todo:DitherRow"),ar.put!=null){if(Pn=16*Wn,Wn=16*(Wn+1),Os?(ar.y=br.sa,ar.O=br.ta+jn,ar.f=br.qa,ar.N=br.ra+Uo,ar.ea=br.Ha,ar.W=br.Ia+Uo):(Pn-=mn,ar.y=vi,ar.O=xo,ar.f=Xa,ar.N=An,ar.ea=$i,ar.W=vo),Fs||(Wn-=mn),Wn>ar.o&&(Wn=ar.o),ar.F=null,ar.J=null,br.Fa!=null&&0<br.Fa.length&&Pn<Wn&&(ar.J=Bn(br,ar,Pn,Wn-Pn),ar.F=br.mb,ar.F==null&&ar.F.length==0)){ls=ra(br,3,"Could not decode alpha data.");break t}Pn<ar.j&&(mn=ar.j-Pn,Pn=ar.j,t(!(1&mn)),ar.O+=br.R*mn,ar.N+=br.B*(mn>>1),ar.W+=br.B*(mn>>1),ar.F!=null&&(ar.J+=ar.width*mn)),Pn<Wn&&(ar.O+=ar.v,ar.N+=ar.v>>1,ar.W+=ar.v>>1,ar.F!=null&&(ar.J+=ar.v),ar.ka=Pn-ar.j,ar.U=ar.va-ar.v,ar.T=Wn-Pn,ls=ar.put(ar))}Gr+1!=br.Ic||Fs||(n(br.sa,br.ta-Vr,vi,xo+16*br.R,Vr),n(br.qa,br.ra-da,Xa,An+8*br.B,da),n(br.Ha,br.Ia-da,$i,vo+8*br.B,da))}if(!ls)return ra(dn,6,"Output aborted.")}return 1}(Ke,ft)),ft.bc!=null&&ft.bc(ft),vt&=1}return vt?(Ke.cb=0,vt):0})(w,Y)||(B=w.a)}}else B=w.a}B==0&&Ie.Oa!=null&&Ie.Oa.fd&&(B=Cx(Ie.ba))}Ie=B}we=Ie!=0?null:11>we?je.f.RGBA.eb:je.f.kb.y}else we=null;return we};var pR=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(I,L){for(var E="",j=0;j<4;j++)E+=String.fromCharCode(I[L++]);return E}function d(I,L){return I[L+0]|I[L+1]<<8}function A(I,L){return(I[L+0]|I[L+1]<<8|I[L+2]<<16)>>>0}function f(I,L){return(I[L+0]|I[L+1]<<8|I[L+2]<<16|I[L+3]<<24)>>>0}new c;var h=[0],m=[0],p=[],g=new c,x=e,y=function(I,L){var E={},j=0,R=!1,W=0,de=0;if(E.frames=[],!function(k,F){for(var V=0;V<4;V++)if(k[F+V]!="RIFF".charCodeAt(V))return!0;return!1}(I,L)){for(f(I,L+=4),L+=8;L<I.length;){var te=u(I,L),le=f(I,L+=4);L+=4;var ce=le+(1&le);switch(te){case"VP8 ":case"VP8L":E.frames[j]===void 0&&(E.frames[j]={}),(Ee=E.frames[j]).src_off=R?de:L-8,Ee.src_size=W+le+8,j++,R&&(R=!1,W=0,de=0);break;case"VP8X":(Ee=E.header={}).feature_flags=I[L];var J=L+4;Ee.canvas_width=1+A(I,J),J+=3,Ee.canvas_height=1+A(I,J),J+=3;break;case"ALPH":R=!0,W=ce+8,de=L-8;break;case"ANIM":(Ee=E.header).bgcolor=f(I,L),J=L+4,Ee.loop_count=d(I,J),J+=2;break;case"ANMF":var me,Ee;(Ee=E.frames[j]={}).offset_x=2*A(I,L),L+=3,Ee.offset_y=2*A(I,L),L+=3,Ee.width=1+A(I,L),L+=3,Ee.height=1+A(I,L),L+=3,Ee.duration=A(I,L),L+=3,me=I[L++],Ee.dispose=1&me,Ee.blend=me>>1&1}te!="ANMF"&&(L+=ce)}return E}}(x,0);y.response=x,y.rgbaoutput=!0,y.dataurl=!1;var b=y.header?y.header:null,_=y.frames?y.frames:null;if(b){b.loop_counter=b.loop_count,h=[b.canvas_height],m=[b.canvas_width];for(var T=0;T<_.length&&_[T].blend!=0;T++);}var P=_[0],C=g.WebPDecodeRGBA(x,P.src_off,P.src_size,m,h);P.rgba=C,P.imgwidth=m[0],P.imgheight=h[0];for(var S=0;S<m[0]*h[0]*4;S++)p[S]=C[S];return this.width=m,this.height=h,this.data=p,this}(function(e){var t,r,n,a,s,o,l,c,u,d=function(k){return k=k||{},this.isStrokeTransparent=k.isStrokeTransparent||!1,this.strokeOpacity=k.strokeOpacity||1,this.strokeStyle=k.strokeStyle||"#000000",this.fillStyle=k.fillStyle||"#000000",this.isFillTransparent=k.isFillTransparent||!1,this.fillOpacity=k.fillOpacity||1,this.font=k.font||"10px sans-serif",this.textBaseline=k.textBaseline||"alphabetic",this.textAlign=k.textAlign||"left",this.lineWidth=k.lineWidth||1,this.lineJoin=k.lineJoin||"miter",this.lineCap=k.lineCap||"butt",this.path=k.path||[],this.transform=k.transform!==void 0?k.transform.clone():new c,this.globalCompositeOperation=k.globalCompositeOperation||"normal",this.globalAlpha=k.globalAlpha||1,this.clip_path=k.clip_path||[],this.currentPoint=k.currentPoint||new o,this.miterLimit=k.miterLimit||10,this.lastPoint=k.lastPoint||new o,this.lineDashOffset=k.lineDashOffset||0,this.lineDash=k.lineDash||[],this.margin=k.margin||[0,0,0,0],this.prevPageLastElemOffset=k.prevPageLastElemOffset||0,this.ignoreClearRect=typeof k.ignoreClearRect!="boolean"||k.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new A(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var A=function(k){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var F=k;Object.defineProperty(this,"pdf",{get:function(){return F}});var V=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return V},set:function(z){V=!!z}});var D=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return D},set:function(z){D=!!z}});var M=0;Object.defineProperty(this,"posX",{get:function(){return M},set:function(z){isNaN(z)||(M=z)}});var G=0;Object.defineProperty(this,"posY",{get:function(){return G},set:function(z){isNaN(z)||(G=z)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(z){var X;typeof z=="number"?X=[z,z,z,z]:((X=new Array(4))[0]=z[0],X[1]=z.length>=2?z[1]:X[0],X[2]=z.length>=3?z[2]:X[0],X[3]=z.length>=4?z[3]:X[1]),u.margin=X}});var O=!1;Object.defineProperty(this,"autoPaging",{get:function(){return O},set:function(z){O=z}});var K=0;Object.defineProperty(this,"lastBreak",{get:function(){return K},set:function(z){K=z}});var ee=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ee},set:function(z){ee=z}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(z){z instanceof d&&(u=z)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(z){u.path=z}});var ne=[];Object.defineProperty(this,"ctxStack",{get:function(){return ne},set:function(z){ne=z}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(z){var X;X=f(z),this.ctx.fillStyle=X.style,this.ctx.isFillTransparent=X.a===0,this.ctx.fillOpacity=X.a,this.pdf.setFillColor(X.r,X.g,X.b,{a:X.a}),this.pdf.setTextColor(X.r,X.g,X.b,{a:X.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(z){var X=f(z);this.ctx.strokeStyle=X.style,this.ctx.isStrokeTransparent=X.a===0,this.ctx.strokeOpacity=X.a,X.a===0?this.pdf.setDrawColor(255,255,255):(X.a,this.pdf.setDrawColor(X.r,X.g,X.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(z){["butt","round","square"].indexOf(z)!==-1&&(this.ctx.lineCap=z,this.pdf.setLineCap(z))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(z){isNaN(z)||(this.ctx.lineWidth=z,this.pdf.setLineWidth(z))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(z){["bevel","round","miter"].indexOf(z)!==-1&&(this.ctx.lineJoin=z,this.pdf.setLineJoin(z))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(z){isNaN(z)||(this.ctx.miterLimit=z,this.pdf.setMiterLimit(z))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(z){this.ctx.textBaseline=z}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(z){["right","end","center","left","start"].indexOf(z)!==-1&&(this.ctx.textAlign=z)}});var Q=null,be=null,Z=null;Object.defineProperty(this,"fontFaces",{get:function(){return Z},set:function(z){Q=null,be=null,Z=z}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(z){var X;if(this.ctx.font=z,(X=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(z))!==null){var ve=X[1];X[2];var re=X[3],Ne=X[4];X[5];var Me=X[6],Ve=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ne)[2];Ne=Math.floor(Ve==="px"?parseFloat(Ne)*this.pdf.internal.scaleFactor:Ve==="em"?parseFloat(Ne)*this.pdf.getFontSize():parseFloat(Ne)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ne);var nt=function(ue){var Ge,Je,ht=[],Ue=ue.trim();if(Ue==="")return pj;if(Ue in P8)return[P8[Ue]];for(;Ue!=="";){switch(Je=null,Ge=(Ue=T8(Ue)).charAt(0)){case'"':case"'":Je=iNe(Ue.substring(1),Ge);break;default:Je=oNe(Ue)}if(Je===null||(ht.push(Je[0]),(Ue=T8(Je[1]))!==""&&Ue.charAt(0)!==","))return pj;Ue=Ue.replace(/^,/,"")}return ht}(Me);if(this.fontFaces){var st=function(ue,Ge){var Je=ue.getFontList(),ht=JSON.stringify(Je);if(Q===null||be!==ht){var Ue=function(rt){var Qe=[];return Object.keys(rt).forEach(function(Pe){rt[Pe].forEach(function(ze){var it=null;switch(ze){case"bold":it={family:Pe,weight:"bold"};break;case"italic":it={family:Pe,style:"italic"};break;case"bolditalic":it={family:Pe,weight:"bold",style:"italic"};break;case"":case"normal":it={family:Pe}}it!==null&&(it.ref={name:Pe,style:ze},Qe.push(it))})}),Qe}(Je);Q=function(rt){for(var Qe={},Pe=0;Pe<rt.length;++Pe){var ze=mj(rt[Pe]),it=ze.family,Bt=ze.stretch,ut=ze.style,It=ze.weight;Qe[it]=Qe[it]||{},Qe[it][Bt]=Qe[it][Bt]||{},Qe[it][Bt][ut]=Qe[it][Bt][ut]||{},Qe[it][Bt][ut][It]=ze}return Qe}(Ue.concat(Ge)),be=ht}return Q}(this.pdf,this.fontFaces),lt=nt.map(function(ue){return{family:ue,stretch:"normal",weight:re,style:ve}}),bt=function(ue,Ge,Je){for(var ht=(Je=Je||{}).defaultFontFamily||"times",Ue=Object.assign({},sNe,Je.genericFontFamilies||{}),rt=null,Qe=null,Pe=0;Pe<Ge.length;++Pe)if(Ue[(rt=mj(Ge[Pe])).family]&&(rt.family=Ue[rt.family]),ue.hasOwnProperty(rt.family)){Qe=ue[rt.family];break}if(!(Qe=Qe||ue[ht]))throw new Error("Could not find a font-family for the rule '"+k8(rt)+"' and default family '"+ht+"'.");if(Qe=function(ze,it){if(it[ze])return it[ze];var Bt=Nk[ze],ut=Bt<=Nk.normal?-1:1,It=j8(it,_J,Bt,ut);if(!It)throw new Error("Could not find a matching font-stretch value for "+ze);return It}(rt.stretch,Qe),Qe=function(ze,it){if(it[ze])return it[ze];for(var Bt=CJ[ze],ut=0;ut<Bt.length;++ut)if(it[Bt[ut]])return it[Bt[ut]];throw new Error("Could not find a matching font-style for "+ze)}(rt.style,Qe),!(Qe=function(ze,it){if(it[ze])return it[ze];if(ze===400&&it[500])return it[500];if(ze===500&&it[400])return it[400];var Bt=aNe[ze],ut=j8(it,EJ,Bt,ze<400?-1:1);if(!ut)throw new Error("Could not find a matching font-weight for value "+ze);return ut}(rt.weight,Qe)))throw new Error("Failed to resolve a font for the rule '"+k8(rt)+"'.");return Qe}(st,lt);this.pdf.setFont(bt.ref.name,bt.ref.style)}else{var ot="";(re==="bold"||parseInt(re,10)>=700||ve==="bold")&&(ot="bold"),ve==="italic"&&(ot+="italic"),ot.length===0&&(ot="normal");for(var Le="",Ze={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ye=0;ye<nt.length;ye++){if(this.pdf.internal.getFont(nt[ye],ot,{noFallback:!0,disableWarning:!0})!==void 0){Le=nt[ye];break}if(ot==="bolditalic"&&this.pdf.internal.getFont(nt[ye],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Le=nt[ye],ot="bold";else if(this.pdf.internal.getFont(nt[ye],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Le=nt[ye],ot="normal";break}}if(Le===""){for(var xe=0;xe<nt.length;xe++)if(Ze[nt[xe]]){Le=Ze[nt[xe]];break}}Le=Le===""?"Times":Le,this.pdf.setFont(Le,ot)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(z){this.ctx.globalCompositeOperation=z}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(z){this.ctx.globalAlpha=z}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(z){this.ctx.lineDashOffset=z,Ee.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(z){this.ctx.lineDash=z,Ee.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(z){this.ctx.ignoreClearRect=!!z}})};A.prototype.setLineDash=function(k){this.lineDash=k},A.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},A.prototype.fill=function(){_.call(this,"fill",!1)},A.prototype.stroke=function(){_.call(this,"stroke",!1)},A.prototype.beginPath=function(){this.path=[{type:"begin"}]},A.prototype.moveTo=function(k,F){if(isNaN(k)||isNaN(F))throw Yn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var V=this.ctx.transform.applyToPoint(new o(k,F));this.path.push({type:"mt",x:V.x,y:V.y}),this.ctx.lastPoint=new o(k,F)},A.prototype.closePath=function(){var k=new o(0,0),F=0;for(F=this.path.length-1;F!==-1;F--)if(this.path[F].type==="begin"&&Rn(this.path[F+1])==="object"&&typeof this.path[F+1].x=="number"){k=new o(this.path[F+1].x,this.path[F+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(k.x,k.y)},A.prototype.lineTo=function(k,F){if(isNaN(k)||isNaN(F))throw Yn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var V=this.ctx.transform.applyToPoint(new o(k,F));this.path.push({type:"lt",x:V.x,y:V.y}),this.ctx.lastPoint=new o(V.x,V.y)},A.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),_.call(this,null,!0)},A.prototype.quadraticCurveTo=function(k,F,V,D){if(isNaN(V)||isNaN(D)||isNaN(k)||isNaN(F))throw Yn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var M=this.ctx.transform.applyToPoint(new o(V,D)),G=this.ctx.transform.applyToPoint(new o(k,F));this.path.push({type:"qct",x1:G.x,y1:G.y,x:M.x,y:M.y}),this.ctx.lastPoint=new o(M.x,M.y)},A.prototype.bezierCurveTo=function(k,F,V,D,M,G){if(isNaN(M)||isNaN(G)||isNaN(k)||isNaN(F)||isNaN(V)||isNaN(D))throw Yn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var O=this.ctx.transform.applyToPoint(new o(M,G)),K=this.ctx.transform.applyToPoint(new o(k,F)),ee=this.ctx.transform.applyToPoint(new o(V,D));this.path.push({type:"bct",x1:K.x,y1:K.y,x2:ee.x,y2:ee.y,x:O.x,y:O.y}),this.ctx.lastPoint=new o(O.x,O.y)},A.prototype.arc=function(k,F,V,D,M,G){if(isNaN(k)||isNaN(F)||isNaN(V)||isNaN(D)||isNaN(M))throw Yn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(G=!!G,!this.ctx.transform.isIdentity){var O=this.ctx.transform.applyToPoint(new o(k,F));k=O.x,F=O.y;var K=this.ctx.transform.applyToPoint(new o(0,V)),ee=this.ctx.transform.applyToPoint(new o(0,0));V=Math.sqrt(Math.pow(K.x-ee.x,2)+Math.pow(K.y-ee.y,2))}Math.abs(M-D)>=2*Math.PI&&(D=0,M=2*Math.PI),this.path.push({type:"arc",x:k,y:F,radius:V,startAngle:D,endAngle:M,counterclockwise:G})},A.prototype.arcTo=function(k,F,V,D,M){throw new Error("arcTo not implemented.")},A.prototype.rect=function(k,F,V,D){if(isNaN(k)||isNaN(F)||isNaN(V)||isNaN(D))throw Yn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(k,F),this.lineTo(k+V,F),this.lineTo(k+V,F+D),this.lineTo(k,F+D),this.lineTo(k,F),this.lineTo(k+V,F),this.lineTo(k,F)},A.prototype.fillRect=function(k,F,V,D){if(isNaN(k)||isNaN(F)||isNaN(V)||isNaN(D))throw Yn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var M={};this.lineCap!=="butt"&&(M.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(M.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(k,F,V,D),this.fill(),M.hasOwnProperty("lineCap")&&(this.lineCap=M.lineCap),M.hasOwnProperty("lineJoin")&&(this.lineJoin=M.lineJoin)}},A.prototype.strokeRect=function(k,F,V,D){if(isNaN(k)||isNaN(F)||isNaN(V)||isNaN(D))throw Yn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(k,F,V,D),this.stroke())},A.prototype.clearRect=function(k,F,V,D){if(isNaN(k)||isNaN(F)||isNaN(V)||isNaN(D))throw Yn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(k,F,V,D))},A.prototype.save=function(k){k=typeof k!="boolean"||k;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("q");if(this.pdf.setPage(F),k){this.ctx.fontSize=this.pdf.internal.getFontSize();var D=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=D}},A.prototype.restore=function(k){k=typeof k!="boolean"||k;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("Q");this.pdf.setPage(F),k&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},A.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(k){var F,V,D,M;if(k.isCanvasGradient===!0&&(k=k.getColor()),!k)return{r:0,g:0,b:0,a:0,style:k};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(k))F=0,V=0,D=0,M=0;else{var G=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(k);if(G!==null)F=parseInt(G[1]),V=parseInt(G[2]),D=parseInt(G[3]),M=1;else if((G=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(k))!==null)F=parseInt(G[1]),V=parseInt(G[2]),D=parseInt(G[3]),M=parseFloat(G[4]);else{if(M=1,typeof k=="string"&&k.charAt(0)!=="#"){var O=new gJ(k);k=O.ok?O.toHex():"#000000"}k.length===4?(F=k.substring(1,2),F+=F,V=k.substring(2,3),V+=V,D=k.substring(3,4),D+=D):(F=k.substring(1,3),V=k.substring(3,5),D=k.substring(5,7)),F=parseInt(F,16),V=parseInt(V,16),D=parseInt(D,16)}}return{r:F,g:V,b:D,a:M,style:k}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};A.prototype.fillText=function(k,F,V,D){if(isNaN(F)||isNaN(V)||typeof k!="string")throw Yn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(D=isNaN(D)?void 0:D,!h.call(this)){var M=ce(this.ctx.transform.rotation),G=this.ctx.transform.scaleX;j.call(this,{text:k,x:F,y:V,scale:G,angle:M,align:this.textAlign,maxWidth:D})}},A.prototype.strokeText=function(k,F,V,D){if(isNaN(F)||isNaN(V)||typeof k!="string")throw Yn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){D=isNaN(D)?void 0:D;var M=ce(this.ctx.transform.rotation),G=this.ctx.transform.scaleX;j.call(this,{text:k,x:F,y:V,scale:G,renderingMode:"stroke",angle:M,align:this.textAlign,maxWidth:D})}},A.prototype.measureText=function(k){if(typeof k!="string")throw Yn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var F=this.pdf,V=this.pdf.internal.scaleFactor,D=F.internal.getFontSize(),M=F.getStringUnitWidth(k)*D/F.internal.scaleFactor;return new function(G){var O=(G=G||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return O}}),this}({width:M*=Math.round(96*V/72*1e4)/1e4})},A.prototype.scale=function(k,F){if(isNaN(k)||isNaN(F))throw Yn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var V=new c(k,0,0,F,0,0);this.ctx.transform=this.ctx.transform.multiply(V)},A.prototype.rotate=function(k){if(isNaN(k))throw Yn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var F=new c(Math.cos(k),Math.sin(k),-Math.sin(k),Math.cos(k),0,0);this.ctx.transform=this.ctx.transform.multiply(F)},A.prototype.translate=function(k,F){if(isNaN(k)||isNaN(F))throw Yn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var V=new c(1,0,0,1,k,F);this.ctx.transform=this.ctx.transform.multiply(V)},A.prototype.transform=function(k,F,V,D,M,G){if(isNaN(k)||isNaN(F)||isNaN(V)||isNaN(D)||isNaN(M)||isNaN(G))throw Yn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var O=new c(k,F,V,D,M,G);this.ctx.transform=this.ctx.transform.multiply(O)},A.prototype.setTransform=function(k,F,V,D,M,G){k=isNaN(k)?1:k,F=isNaN(F)?0:F,V=isNaN(V)?0:V,D=isNaN(D)?1:D,M=isNaN(M)?0:M,G=isNaN(G)?0:G,this.ctx.transform=new c(k,F,V,D,M,G)};var p=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};A.prototype.drawImage=function(k,F,V,D,M,G,O,K,ee){var ne=this.pdf.getImageProperties(k),Q=1,be=1,Z=1,z=1;D!==void 0&&K!==void 0&&(Z=K/D,z=ee/M,Q=ne.width/D*K/D,be=ne.height/M*ee/M),G===void 0&&(G=F,O=V,F=0,V=0),D!==void 0&&K===void 0&&(K=D,ee=M),D===void 0&&K===void 0&&(K=ne.width,ee=ne.height);var X=this.ctx.transform.decompose(),ve=ce(X.rotate.shx),re=new c,Ne=(re=(re=(re=re.multiply(X.translate)).multiply(X.skew)).multiply(X.scale)).applyToRectangle(new l(G-F*Z,O-V*z,D*Q,M*be));if(this.autoPaging){for(var Me,Ve=g.call(this,Ne),nt=[],st=0;st<Ve.length;st+=1)nt.indexOf(Ve[st])===-1&&nt.push(Ve[st]);b(nt);for(var lt=nt[0],bt=nt[nt.length-1],ot=lt;ot<bt+1;ot++){this.pdf.setPage(ot);var Le=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ze=ot===1?this.posY+this.margin[0]:this.margin[0],ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ue=ot===1?0:ye+(ot-2)*xe;if(this.ctx.clip_path.length!==0){var Ge=this.path;Me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(Me,this.posX+this.margin[3],-ue+Ze+this.ctx.prevPageLastElemOffset),T.call(this,"fill",!0),this.path=Ge}var Je=JSON.parse(JSON.stringify(Ne));Je=y([Je],this.posX+this.margin[3],-ue+Ze+this.ctx.prevPageLastElemOffset)[0];var ht=(ot>lt||ot<bt)&&p.call(this);ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Le,xe,null).clip().discardPath()),this.pdf.addImage(k,"JPEG",Je.x,Je.y,Je.w,Je.h,null,null,ve),ht&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(k,"JPEG",Ne.x,Ne.y,Ne.w,Ne.h,null,null,ve)};var g=function(k,F,V){var D=[];F=F||this.pdf.internal.pageSize.width,V=V||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var M=this.posY+this.ctx.prevPageLastElemOffset;switch(k.type){default:case"mt":case"lt":D.push(Math.floor((k.y+M)/V)+1);break;case"arc":D.push(Math.floor((k.y+M-k.radius)/V)+1),D.push(Math.floor((k.y+M+k.radius)/V)+1);break;case"qct":var G=J(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x,k.y);D.push(Math.floor((G.y+M)/V)+1),D.push(Math.floor((G.y+G.h+M)/V)+1);break;case"bct":var O=me(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x2,k.y2,k.x,k.y);D.push(Math.floor((O.y+M)/V)+1),D.push(Math.floor((O.y+O.h+M)/V)+1);break;case"rect":D.push(Math.floor((k.y+M)/V)+1),D.push(Math.floor((k.y+k.h+M)/V)+1)}for(var K=0;K<D.length;K+=1)for(;this.pdf.internal.getNumberOfPages()<D[K];)x.call(this);return D},x=function(){var k=this.fillStyle,F=this.strokeStyle,V=this.font,D=this.lineCap,M=this.lineWidth,G=this.lineJoin;this.pdf.addPage(),this.fillStyle=k,this.strokeStyle=F,this.font=V,this.lineCap=D,this.lineWidth=M,this.lineJoin=G},y=function(k,F,V){for(var D=0;D<k.length;D++)switch(k[D].type){case"bct":k[D].x2+=F,k[D].y2+=V;case"qct":k[D].x1+=F,k[D].y1+=V;default:k[D].x+=F,k[D].y+=V}return k},b=function(k){return k.sort(function(F,V){return F-V})},_=function(k,F){var V=this.fillStyle,D=this.strokeStyle,M=this.lineCap,G=this.lineWidth,O=Math.abs(G*this.ctx.transform.scaleX),K=this.lineJoin;if(this.autoPaging){for(var ee,ne,Q=JSON.parse(JSON.stringify(this.path)),be=JSON.parse(JSON.stringify(this.path)),Z=[],z=0;z<be.length;z++)if(be[z].x!==void 0)for(var X=g.call(this,be[z]),ve=0;ve<X.length;ve+=1)Z.indexOf(X[ve])===-1&&Z.push(X[ve]);for(var re=0;re<Z.length;re++)for(;this.pdf.internal.getNumberOfPages()<Z[re];)x.call(this);b(Z);for(var Ne=Z[0],Me=Z[Z.length-1],Ve=Ne;Ve<Me+1;Ve++){this.pdf.setPage(Ve),this.fillStyle=V,this.strokeStyle=D,this.lineCap=M,this.lineWidth=O,this.lineJoin=K;var nt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],st=Ve===1?this.posY+this.margin[0]:this.margin[0],lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],bt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ot=Ve===1?0:lt+(Ve-2)*bt;if(this.ctx.clip_path.length!==0){var Le=this.path;ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(ee,this.posX+this.margin[3],-ot+st+this.ctx.prevPageLastElemOffset),T.call(this,k,!0),this.path=Le}if(ne=JSON.parse(JSON.stringify(Q)),this.path=y(ne,this.posX+this.margin[3],-ot+st+this.ctx.prevPageLastElemOffset),F===!1||Ve===0){var Ze=(Ve>Ne||Ve<Me)&&p.call(this);Ze&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],nt,bt,null).clip().discardPath()),T.call(this,k,F),Ze&&this.pdf.restoreGraphicsState()}this.lineWidth=G}this.path=Q}else this.lineWidth=O,T.call(this,k,F),this.lineWidth=G},T=function(k,F){if((k!=="stroke"||F||!m.call(this))&&(k==="stroke"||F||!h.call(this))){for(var V,D,M=[],G=this.path,O=0;O<G.length;O++){var K=G[O];switch(K.type){case"begin":M.push({begin:!0});break;case"close":M.push({close:!0});break;case"mt":M.push({start:K,deltas:[],abs:[]});break;case"lt":var ee=M.length;if(G[O-1]&&!isNaN(G[O-1].x)&&(V=[K.x-G[O-1].x,K.y-G[O-1].y],ee>0)){for(;ee>=0;ee--)if(M[ee-1].close!==!0&&M[ee-1].begin!==!0){M[ee-1].deltas.push(V),M[ee-1].abs.push(K);break}}break;case"bct":V=[K.x1-G[O-1].x,K.y1-G[O-1].y,K.x2-G[O-1].x,K.y2-G[O-1].y,K.x-G[O-1].x,K.y-G[O-1].y],M[M.length-1].deltas.push(V);break;case"qct":var ne=G[O-1].x+2/3*(K.x1-G[O-1].x),Q=G[O-1].y+2/3*(K.y1-G[O-1].y),be=K.x+2/3*(K.x1-K.x),Z=K.y+2/3*(K.y1-K.y),z=K.x,X=K.y;V=[ne-G[O-1].x,Q-G[O-1].y,be-G[O-1].x,Z-G[O-1].y,z-G[O-1].x,X-G[O-1].y],M[M.length-1].deltas.push(V);break;case"arc":M.push({deltas:[],abs:[],arc:!0}),Array.isArray(M[M.length-1].abs)&&M[M.length-1].abs.push(K)}}D=F?null:k==="stroke"?"stroke":"fill";for(var ve=!1,re=0;re<M.length;re++)if(M[re].arc)for(var Ne=M[re].abs,Me=0;Me<Ne.length;Me++){var Ve=Ne[Me];Ve.type==="arc"?S.call(this,Ve.x,Ve.y,Ve.radius,Ve.startAngle,Ve.endAngle,Ve.counterclockwise,void 0,F,!ve):R.call(this,Ve.x,Ve.y),ve=!0}else if(M[re].close===!0)this.pdf.internal.out("h"),ve=!1;else if(M[re].begin!==!0){var nt=M[re].start.x,st=M[re].start.y;W.call(this,M[re].deltas,nt,st),ve=!0}D&&I.call(this,D),F&&L.call(this)}},P=function(k){var F=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,V=F*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return k-V;case"top":return k+F-V;case"hanging":return k+F-2*V;case"middle":return k+F/2-V;default:return k}},C=function(k){return k+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};A.prototype.createLinearGradient=function(){var k=function(){};return k.colorStops=[],k.addColorStop=function(F,V){this.colorStops.push([F,V])},k.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},k.isCanvasGradient=!0,k},A.prototype.createPattern=function(){return this.createLinearGradient()},A.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(k,F,V,D,M,G,O,K,ee){for(var ne=te.call(this,V,D,M,G),Q=0;Q<ne.length;Q++){var be=ne[Q];Q===0&&(ee?E.call(this,be.x1+k,be.y1+F):R.call(this,be.x1+k,be.y1+F)),de.call(this,k,F,be.x2,be.y2,be.x3,be.y3,be.x4,be.y4)}K?L.call(this):I.call(this,O)},I=function(k){switch(k){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},L=function(){this.pdf.clip(),this.pdf.discardPath()},E=function(k,F){this.pdf.internal.out(r(k)+" "+n(F)+" m")},j=function(k){var F;switch(k.align){case"right":case"end":F="right";break;case"center":F="center";break;default:F="left"}var V,D,M,G=this.pdf.getTextDimensions(k.text),O=P.call(this,k.y),K=C.call(this,O)-G.h,ee=this.ctx.transform.applyToPoint(new o(k.x,O));if(this.autoPaging){var ne=this.ctx.transform.decompose(),Q=new c;Q=(Q=(Q=Q.multiply(ne.translate)).multiply(ne.skew)).multiply(ne.scale);for(var be=this.ctx.transform.applyToRectangle(new l(k.x,O,G.w,G.h)),Z=Q.applyToRectangle(new l(k.x,K,G.w,G.h)),z=g.call(this,Z),X=[],ve=0;ve<z.length;ve+=1)X.indexOf(z[ve])===-1&&X.push(z[ve]);b(X);for(var re=X[0],Ne=X[X.length-1],Me=re;Me<Ne+1;Me++){this.pdf.setPage(Me);var Ve=Me===1?this.posY+this.margin[0]:this.margin[0],nt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],st=this.pdf.internal.pageSize.height-this.margin[2],lt=st-this.margin[0],bt=this.pdf.internal.pageSize.width-this.margin[1],ot=bt-this.margin[3],Le=Me===1?0:nt+(Me-2)*lt;if(this.ctx.clip_path.length!==0){var Ze=this.path;V=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(V,this.posX+this.margin[3],-1*Le+Ve),T.call(this,"fill",!0),this.path=Ze}var ye=y([JSON.parse(JSON.stringify(Z))],this.posX+this.margin[3],-Le+Ve+this.ctx.prevPageLastElemOffset)[0];k.scale>=.01&&(D=this.pdf.internal.getFontSize(),this.pdf.setFontSize(D*k.scale),M=this.lineWidth,this.lineWidth=M*k.scale);var xe=this.autoPaging!=="text";if(xe||ye.y+ye.h<=st){if(xe||ye.y>=Ve&&ye.x<=bt){var ue=xe?k.text:this.pdf.splitTextToSize(k.text,k.maxWidth||bt-ye.x)[0],Ge=y([JSON.parse(JSON.stringify(be))],this.posX+this.margin[3],-Le+Ve+this.ctx.prevPageLastElemOffset)[0],Je=xe&&(Me>re||Me<Ne)&&p.call(this);Je&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ot,lt,null).clip().discardPath()),this.pdf.text(ue,Ge.x,Ge.y,{angle:k.angle,align:F,renderingMode:k.renderingMode}),Je&&this.pdf.restoreGraphicsState()}}else ye.y<st&&(this.ctx.prevPageLastElemOffset+=st-ye.y);k.scale>=.01&&(this.pdf.setFontSize(D),this.lineWidth=M)}}else k.scale>=.01&&(D=this.pdf.internal.getFontSize(),this.pdf.setFontSize(D*k.scale),M=this.lineWidth,this.lineWidth=M*k.scale),this.pdf.text(k.text,ee.x+this.posX,ee.y+this.posY,{angle:k.angle,align:F,renderingMode:k.renderingMode,maxWidth:k.maxWidth}),k.scale>=.01&&(this.pdf.setFontSize(D),this.lineWidth=M)},R=function(k,F,V,D){V=V||0,D=D||0,this.pdf.internal.out(r(k+V)+" "+n(F+D)+" l")},W=function(k,F,V){return this.pdf.lines(k,F,V,null,null)},de=function(k,F,V,D,M,G,O,K){this.pdf.internal.out([t(a(V+k)),t(s(D+F)),t(a(M+k)),t(s(G+F)),t(a(O+k)),t(s(K+F)),"c"].join(" "))},te=function(k,F,V,D){for(var M=2*Math.PI,G=Math.PI/2;F>V;)F-=M;var O=Math.abs(V-F);O<M&&D&&(O=M-O);for(var K=[],ee=D?-1:1,ne=F;O>1e-5;){var Q=ne+ee*Math.min(O,G);K.push(le.call(this,k,ne,Q)),O-=Math.abs(Q-ne),ne=Q}return K},le=function(k,F,V){var D=(V-F)/2,M=k*Math.cos(D),G=k*Math.sin(D),O=M,K=-G,ee=O*O+K*K,ne=ee+O*M+K*G,Q=4/3*(Math.sqrt(2*ee*ne)-ne)/(O*G-K*M),be=O-Q*K,Z=K+Q*O,z=be,X=-Z,ve=D+F,re=Math.cos(ve),Ne=Math.sin(ve);return{x1:k*Math.cos(F),y1:k*Math.sin(F),x2:be*re-Z*Ne,y2:be*Ne+Z*re,x3:z*re-X*Ne,y3:z*Ne+X*re,x4:k*Math.cos(V),y4:k*Math.sin(V)}},ce=function(k){return 180*k/Math.PI},J=function(k,F,V,D,M,G){var O=k+.5*(V-k),K=F+.5*(D-F),ee=M+.5*(V-M),ne=G+.5*(D-G),Q=Math.min(k,M,O,ee),be=Math.max(k,M,O,ee),Z=Math.min(F,G,K,ne),z=Math.max(F,G,K,ne);return new l(Q,Z,be-Q,z-Z)},me=function(k,F,V,D,M,G,O,K){var ee,ne,Q,be,Z,z,X,ve,re,Ne,Me,Ve,nt,st,lt=V-k,bt=D-F,ot=M-V,Le=G-D,Ze=O-M,ye=K-G;for(ne=0;ne<41;ne++)re=(X=(Q=k+(ee=ne/40)*lt)+ee*((Z=V+ee*ot)-Q))+ee*(Z+ee*(M+ee*Ze-Z)-X),Ne=(ve=(be=F+ee*bt)+ee*((z=D+ee*Le)-be))+ee*(z+ee*(G+ee*ye-z)-ve),ne==0?(Me=re,Ve=Ne,nt=re,st=Ne):(Me=Math.min(Me,re),Ve=Math.min(Ve,Ne),nt=Math.max(nt,re),st=Math.max(st,Ne));return new l(Math.round(Me),Math.round(Ve),Math.round(nt-Me),Math.round(st-Ve))},Ee=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var k,F,V=(k=this.ctx.lineDash,F=this.ctx.lineDashOffset,JSON.stringify({lineDash:k,lineDashOffset:F}));this.prevLineDash!==V&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=V)}}})(Ar.API),function(e){var t=function(o){var l,c,u,d,A,f,h,m,p,g;for(c=[],u=0,d=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;d>u;u+=4)(A=(o.charCodeAt(u)<<24)+(o.charCodeAt(u+1)<<16)+(o.charCodeAt(u+2)<<8)+o.charCodeAt(u+3))!==0?(f=(A=((A=((A=((A=(A-(g=A%85))/85)-(p=A%85))/85)-(m=A%85))/85)-(h=A%85))/85)%85,c.push(f+33,h+33,m+33,p+33,g+33)):c.push(122);return function(x,y){for(var b=y;b>0;b--)x.pop()}(c,l.length),String.fromCharCode.apply(String,c)+"~>"},r=function(o){var l,c,u,d,A,f=String,h="length",m=255,p="charCodeAt",g="slice",x="replace";for(o[g](-2),o=o[g](0,-2)[x](/\s/g,"")[x]("z","!!!!!"),u=[],d=0,A=(o+=l="uuuuu"[g](o[h]%5||5))[h];A>d;d+=5)c=52200625*(o[p](d)-33)+614125*(o[p](d+1)-33)+7225*(o[p](d+2)-33)+85*(o[p](d+3)-33)+(o[p](d+4)-33),u.push(m&c>>24,m&c>>16,m&c>>8,m&c);return function(y,b){for(var _=b;_>0;_--)y.pop()}(u,l[h]),f.fromCharCode.apply(f,u)},n=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var c="",u=0;u<o.length;u+=2)c+=String.fromCharCode("0x"+(o[u]+o[u+1]));return c},s=function(o){for(var l=new Uint8Array(o.length),c=o.length;c--;)l[c]=o.charCodeAt(c);return(l=pk(l)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};e.processDataByFilters=function(o,l){var c=0,u=o||"",d=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=t(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=a(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=s(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}(Ar.API),function(e){e.loadFile=function(t,r,n){return function(a,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,u,d){var A=new XMLHttpRequest,f=0,h=function(m){var p=m.length,g=[],x=String.fromCharCode;for(f=0;f<p;f+=1)g.push(x(255&m.charCodeAt(f)));return g.join("")};if(A.open("GET",c,!u),A.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(A.onload=function(){A.status===200?d(h(this.responseText)):d(void 0)}),A.send(null),u&&A.status===200)return h(A.responseText)}(a,s,o)}catch{}return l}(t,r,n)},e.loadImageFile=e.loadFile}(Ar.API),function(e){function t(){return(Dr.html2canvas?Promise.resolve(Dr.html2canvas):Yd(()=>Promise.resolve().then(()=>XF),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(Dr.DOMPurify?Promise.resolve(Dr.DOMPurify):Yd(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var c=Rn(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(l,c){var u=document.createElement(l);for(var d in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[d]=c.style[d];return u},s=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),A=c.firstChild;A;A=A.nextSibling)u!==!0&&A.nodeType===1&&A.nodeName==="SCRIPT"||d.appendChild(l(A,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d},o=function l(c){var u=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),d=l.convert(Promise.resolve(),u);return(d=d.setProgress(1,l,1,[l])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,c){return l.__proto__=c||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,c){return this.then(function(){switch(c=c||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l),c){case"string":return this.then(r).then(function(u){return this.set({src:a("div",{innerHTML:l,dompurify:u})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(c){var u=this.opt.jsPDF,d=this.opt.fontFaces,A=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:A,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var h=0;h<d.length;++h){var m=d[h],p=m.src.find(function(g){return g.format==="truetype"});p&&u.addFont(p.url,m.ref.name,m.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,u.context2d.save(!0),c(this.prop.container,f)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},o.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(n(l)!=="object")return this;var c=Object.keys(l||{}).map(function(u){if(u in o.template.prop)return function(){this.prop[u]=l[u]};switch(u){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[u]=l[u]}}},this);return this.then(function(){return this.thenList(c)})},o.prototype.get=function(l,c){return this.then(function(){var u=l in o.template.prop?this.prop[l]:this.opt[l];return c?c(u):u})},o.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function c(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(l=l||Ar.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,c,u,d){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,c,u,d){return this.setProgress(l?this.progress.val+l:null,c||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},o.prototype.then=function(l,c){var u=this;return this.thenCore(l,c,function(d,A){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(f){return u.updateProgress(null,d),f}).then(d,A).then(function(f){return u.updateProgress(1),f})})},o.prototype.thenCore=function(l,c,u){u=u||Promise.prototype.then;var d=this;l&&(l=l.bind(d)),c&&(c=c.bind(d));var A=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:o.convert(Object.assign({},d),Promise.prototype),f=u.call(A,l,c);return o.convert(f,d.__proto__)},o.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},o.prototype.thenList=function(l){var c=this;return l.forEach(function(u){c=c.thenCore(u)}),c},o.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return o.convert(c,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Ar.getPageSize=function(l,c,u){if(Rn(l)==="object"){var d=l;l=d.orientation,c=d.unit||c,u=d.format||u}c=c||"mm",u=u||"a4",l=(""+(l||"P")).toLowerCase();var A,f=(""+u).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":A=1;break;case"mm":A=72/25.4;break;case"cm":A=72/2.54;break;case"in":A=72;break;case"px":A=.75;break;case"pc":case"em":A=12;break;case"ex":A=6;break;default:throw"Invalid unit: "+c}var m,p=0,g=0;if(h.hasOwnProperty(f))p=h[f][1]/A,g=h[f][0]/A;else try{p=u[1],g=u[0]}catch{throw new Error("Invalid format: "+u)}if(l==="p"||l==="portrait")l="p",g>p&&(m=g,g=p,p=m);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",p>g&&(m=g,g=p,p=m)}return{width:g,height:p,unit:c,k:A,orientation:l}},e.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(mj):null;var u=new o(c);return c.worker?u:u.from(l).doCallback()}}(Ar.API),Ar.API.addJS=function(e){return O8=e,this.internal.events.subscribe("postPutResources",function(){f2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(f2+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),F8=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+O8+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){f2!==void 0&&F8!==void 0&&this.internal.out("/Names <</JavaScript "+f2+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var o=a[s],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var A=r.internal.newObject();d.push(A);var f=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+f.objId+" 0 R /XYZ null null null]>> endobj")}var h=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+h+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var o={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var o=n.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(Ar.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,s,o,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=function(A){for(var f,h=256*A.charCodeAt(4)+A.charCodeAt(5),m=A.length,p={width:0,height:0,numcomponents:1},g=4;g<m;g+=2){if(g+=h,t.indexOf(A.charCodeAt(g+1))!==-1){f=256*A.charCodeAt(g+5)+A.charCodeAt(g+6),p={width:256*A.charCodeAt(g+7)+A.charCodeAt(g+8),height:f,numcomponents:A.charCodeAt(g+9)};break}h=256*A.charCodeAt(g+2)+A.charCodeAt(g+3)}return p}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(Ar.API),Ar.API.processPNG=function(e,t,r,n){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var a,s=H2e(e,{checkCrc:!0}),o=s.width,l=s.height,c=s.channels,u=s.palette,d=s.depth;a=u&&c===1?function(S){for(var I=S.width,L=S.height,E=S.data,j=S.palette,R=S.depth,W=!1,de=[],te=[],le=void 0,ce=!1,J=0,me=0;me<j.length;me++){var Ee=MU(j[me],4),k=Ee[0],F=Ee[1],V=Ee[2],D=Ee[3];de.push(k,F,V),D!=null&&(D===0?(J++,te.length<1&&te.push(me)):D<255&&(ce=!0))}if(ce||J>1){W=!0,te=void 0;var M=I*L;le=new Uint8Array(M);for(var G=new DataView(E.buffer),O=0;O<M;O++){var K=gj(G,O,R),ee=MU(j[K],4)[3];le[O]=ee}}else J===0&&(te=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:W?8:void 0,colorBytes:E,alphaBytes:le,needSMask:W,palette:de,mask:te}}(s):c===2||c===4?function(S){for(var I=S.data,L=S.width,E=S.height,j=S.channels,R=S.depth,W=j===2?"DeviceGray":"DeviceRGB",de=j-1,te=L*E,le=de,ce=te*le,J=1*te,me=Math.ceil(ce*R/8),Ee=Math.ceil(J*R/8),k=new Uint8Array(me),F=new Uint8Array(Ee),V=new DataView(I.buffer),D=new DataView(k.buffer),M=new DataView(F.buffer),G=!1,O=0;O<te;O++){for(var K=O*j,ee=0;ee<le;ee++)$8(D,gj(V,K+ee,R),O*le+ee,R);var ne=gj(V,K+le,R);ne<(1<<R)-1&&(G=!0),$8(M,ne,1*O,R)}return{colorSpace:W,colorsPerPixel:de,sMaskBitsPerComponent:G?R:void 0,colorBytes:k,alphaBytes:F,needSMask:G}}(s):function(S){var I=S.data,L=S.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:L,colorsPerPixel:L==="DeviceGray"?1:3,colorBytes:I instanceof Uint16Array?function(E){for(var j=E.length,R=new Uint8Array(2*j),W=new DataView(R.buffer,R.byteOffset,R.byteLength),de=0;de<j;de++)W.setUint16(2*de,E[de],!1);return R}(I):I,needSMask:!1}}(s);var A,f,h,m=a,p=m.colorSpace,g=m.colorsPerPixel,x=m.sMaskBitsPerComponent,y=m.colorBytes,b=m.alphaBytes,_=m.needSMask,T=m.palette,P=m.mask,C=null;return n!==Ar.API.image_compression.NONE&&typeof pk=="function"?(C=function(S){var I;switch(S){case Ar.API.image_compression.FAST:I=11;break;case Ar.API.image_compression.MEDIUM:I=13;break;case Ar.API.image_compression.SLOW:I=14;break;default:I=12}return I}(n),A=this.decode.FLATE_DECODE,f="/Predictor ".concat(C," /Colors ").concat(g," /BitsPerComponent ").concat(d," /Columns ").concat(o),e=M8(y,Math.ceil(o*g*d/8),g,d,n),_&&(h=M8(b,Math.ceil(o*x/8),1,x,n))):(A=void 0,f=void 0,e=y,_&&(h=b)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:r,data:e,index:t,filter:A,decodeParameters:f,transparency:P,palette:T,sMask:h,predictor:C,width:o,height:l,bitsPerComponent:d,sMaskBitsPerComponent:x,colorSpace:p}}},function(e){e.processGIF89A=function(t,r,n,a){var s=new dNe(t),o=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:l},d=new xj(100).encode(u,100);return e.processJPEG.call(this,d,r,n,a)},e.processGIF87A=e.processGIF89A}(Ar.API),Vc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Vc.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Yn.log("bit decode error:"+r)}},Vc.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Vc.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*a*4,l=s>>4,c=15&s,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Vc.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var o=this.palette[a];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},Vc.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&t)/t*255|0,l=(s>>5&t)/t*255|0,c=(s>>10&t)/t*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=u}this.pos+=e}},Vc.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,u=(o>>11)/t*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=e}},Vc.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},Vc.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=s,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=o}},Vc.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var s=new Vc(t,!1),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new xj(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(Ar.API),q8.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var s=new q8(t),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new xj(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(Ar.API),Ar.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,s=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,c=0,u=0;u<a;u+=4){var d=n[u],A=n[u+1],f=n[u+2],h=n[u+3];s[l++]=d,s[l++]=A,s[l++]=f,o[c++]=h}var m=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:m,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Ar.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},lp=Ar.API,m2=lp.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,u=t.kerning?t.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,A=t.doKerning!==!1,f=0,h=e.length,m=0,p=l[0]||c,g=[];for(r=0;r<h;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?g.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+o*(1e3/s)||0)/1e3):(f=A&&Rn(u[n])==="object"&&!isNaN(parseInt(u[n][m],10))?u[n][m]/d:0,g.push((l[n]||p)/c+f)),m=n;return g},D8=lp.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return lp.processArabic&&(e=lp.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:m2.apply(this,arguments).reduce(function(s,o){return s+o},0)},R8=function(e,t,r,n){for(var a=[],s=0,o=e.length,l=0;s!==o&&l+t[s]<r;)l+=t[s],s++;a.push(e.slice(0,s));var c=s;for(l=0;s!==o;)l+t[s]>n&&(a.push(e.slice(c,s)),l=0,c=s),l+=t[s],s++;return c!==s&&a.push(e.slice(c,s)),a},L8=function(e,t,r){r||(r={});var n,a,s,o,l,c,u,d=[],A=[d],f=r.textIndent||0,h=0,m=0,p=e.split(" "),g=m2.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?p[0].length+2:r.lineIndent||0){var x=Array(c).join(" "),y=[];p.map(function(_){(_=_.split(/\s*\n/)).length>1?y=y.concat(_.map(function(T,P){return(P&&T.length?`
`:"")+T})):y.push(_[0])}),p=y,c=D8.apply(this,[x,r])}for(s=0,o=p.length;s<o;s++){var b=0;if(n=p[s],c&&n[0]==`
`&&(n=n.substr(1),b=1),f+h+(m=(a=m2.apply(this,[n,r])).reduce(function(_,T){return _+T},0))>t||b){if(m>t){for(l=R8.apply(this,[n,a,t-(f+h),t]),d.push(l.shift()),d=[l.pop()];l.length;)A.push([l.shift()]);m=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(_,T){return _+T},0)}else d=[n];A.push(d),f=m+c,h=g}else d.push(n),f+=h+m,h=g}return u=c?function(_,T){return(T?x:"")+_.join(" ")}:function(_){return _.join(" ")},A.map(u)},lp.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var A=this.internal.getFont(d.fontName,d.fontStyle),f="Unicode";return A.metadata[f]?{widths:A.metadata[f].widths||{0:1},kerning:A.metadata[f].kerning||{}}:{font:A.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(L8.apply(this,[n[l],o,s]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",n={},a={},s=0;s<16;s++)n[r[s]]=t[s],a[t[s]]=r[s];var o=function(f){return"0x"+parseInt(f,10).toString(16)},l=e.__fontmetrics__.compress=function(f){var h,m,p,g,x=["{"];for(var y in f){if(h=f[y],isNaN(parseInt(y,10))?m="'"+y+"'":(y=parseInt(y,10),m=(m=o(y).slice(2)).slice(0,-1)+a[m.slice(-1)]),typeof h=="number")h<0?(p=o(h).slice(3),g="-"):(p=o(h).slice(2),g=""),p=g+p.slice(0,-1)+a[p.slice(-1)];else{if(Rn(h)!=="object")throw new Error("Don't know what to do with value type "+Rn(h)+".");p=l(h)}x.push(m+p)}return x.push("}"),x.join("")},c=e.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,m,p,g,x={},y=1,b=x,_=[],T="",P="",C=f.length-1,S=1;S<C;S+=1)(g=f[S])=="'"?h?(p=h.join(""),h=void 0):h=[]:h?h.push(g):g=="{"?(_.push([b,p]),b={},p=void 0):g=="}"?((m=_.pop())[0][m[1]]=b,p=void 0,b=m[0]):g=="-"?y=-1:p===void 0?n.hasOwnProperty(g)?(T+=n[g],p=parseInt(T,16)*y,y=1,T=""):T+=g:n.hasOwnProperty(g)?(P+=n[g],b[p]=parseInt(P,16)*y,y=1,p=void 0,P=""):P+=g;return x},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},A={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(f){var h=f.font,m=A.Unicode[h.postScriptName];m&&(h.metadata.Unicode={},h.metadata.Unicode.widths=m.widths,h.metadata.Unicode.kerning=m.kerning);var p=d.Unicode[h.postScriptName];p&&(h.metadata.Unicode.encoding=p,h.encoding=p.codePages[0])}])}(Ar.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(RN(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,n)}}])}(Ar),Ar.API.addSvgAsImage=function(e,t,r,n,a,s,o,l){if(isNaN(t)||isNaN(r))throw Yn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw Yn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=a;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},A=this;return(Dr.canvg?Promise.resolve(Dr.canvg):Yd(()=>import("./index.es-DohcoNWM.js"),[])).catch(function(f){return Promise.reject(new Error("Could not load canvg: "+f))}).then(function(f){return f.default?f.default:f}).then(function(f){return f.fromString(u,e,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(f){return f.render(d)}).then(function(){A.addImage(c.toDataURL("image/jpeg",1),t,r,n,a,o,l)})},Ar.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},Ar.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,d=0,A=0;function f(m,p){var g,x=!1;for(g=0;g<m.length;g+=1)m[g]===p&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var h=l.length;for(A=0;A<h;A+=1)r[l[A]].value=r[l[A]].defaultValue,r[l[A]].explicitSet=!1}if(Rn(e)==="object"){for(a in e)if(s=e[a],f(l,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&f(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,p=[];for(m in r)r[m].explicitSet===!0&&(r[m].type==="name"?p.push("/"+m+" /"+r[m].value):p.push("/"+m+" "+r[m].value));p.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+p.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(Ar.API),function(e){var t=e.API,r=t.pdfEscape16=function(s,o){for(var l,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],A=0,f=s.length;A<f;++A){if(l=o.metadata.characterToGlyph(s.charCodeAt(A)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=s.charCodeAt(A),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},n=function(s){var o,l,c,u,d,A,f;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],A=0,f=(l=Object.keys(s).sort(function(h,m){return h-m})).length;A<f;A++)o=l[A],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var A=l.metadata.Unicode.widths,f=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),h="",m=0;m<f.length;m++)h+=String.fromCharCode(f[m]);var p=u();d({data:h,addLength1:!0,objectId:p}),c("endobj");var g=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var x=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Ip(l.fontName)),c("/FontFile2 "+p+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var y=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Ip(l.fontName)),c("/FontDescriptor "+x+" 0 R"),c("/W "+e.API.PDFObject.convert(A)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+g+" 0 R"),c("/BaseFont /"+Ip(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+y+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var A=l.metadata.rawData,f="",h=0;h<A.length;h++)f+=String.fromCharCode(A[h]);var m=u();d({data:f,addLength1:!0,objectId:m}),c("endobj");var p=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:p}),c("endobj");var g=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+m+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+Ip(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var x=0;x<l.metadata.hmtx.widths.length;x++)l.metadata.hmtx.widths[x]=parseInt(l.metadata.hmtx.widths[x]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+p+" 0 R/BaseFont/"+Ip(l.fontName)+"/FontDescriptor "+g+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var a=function(s){var o,l=s.text||"",c=s.x,u=s.y,d=s.options||{},A=s.mutex||{},f=A.pdfEscape,h=A.activeFontKey,m=A.fonts,p=h,g="",x=0,y="",b=m[p].encoding;if(m[p].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:A};for(y=l,p=h,Array.isArray(l)&&(y=l[0]),x=0;x<y.length;x+=1)m[p].metadata.hasOwnProperty("cmap")&&(o=m[p].metadata.cmap.unicode.codeMap[y[x].charCodeAt(0)]),o||y[x].charCodeAt(0)<256&&m[p].metadata.hasOwnProperty("Unicode")?g+=y[x]:g+="";var _="";return parseInt(p.slice(1))<14||b==="WinAnsiEncoding"?_=f(g,p).split("").map(function(T){return T.charCodeAt(0).toString(16)}).join(""):b==="Identity-H"&&(_=r(g,m[p])),A.isHex=!0,{text:_,x:c,y:u,options:d,mutex:A}};t.events.push(["postProcessText",function(s){var o=s.text||"",l=[],c={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([a(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(a(Object.assign({},c,{text:o[u]})).text);s.text=l}else s.text=a(Object.assign({},c,{text:o})).text}])}(Ar),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Ar.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,s,o,l,c,u,d,A=t,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},g=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),y=!1,b=0;this.__bidiEngine__={};var _=function(E){var j=E.charCodeAt(),R=j>>8,W=p[R];return W!==void 0?A[256*W+(255&j)]:R===252||R===253?"AL":x.test(R)?"L":R===8?"R":"N"},T=function(E){for(var j,R=0;R<E.length;R++){if((j=_(E.charAt(R)))==="L")return!1;if(j==="R")return!0}return!1},P=function(E,j,R,W){var de,te,le,ce,J=j[W];switch(J){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":y=!1;break;case"N":case"AN":break;case"EN":y&&(J="AN");break;case"AL":y=!0,J="R";break;case"WS":case"BN":J="N";break;case"CS":W<1||W+1>=j.length||(de=R[W-1])!=="EN"&&de!=="AN"||(te=j[W+1])!=="EN"&&te!=="AN"?J="N":y&&(te="AN"),J=te===de?te:"N";break;case"ES":J=(de=W>0?R[W-1]:"B")==="EN"&&W+1<j.length&&j[W+1]==="EN"?"EN":"N";break;case"ET":if(W>0&&R[W-1]==="EN"){J="EN";break}if(y){J="N";break}for(le=W+1,ce=j.length;le<ce&&j[le]==="ET";)le++;J=le<ce&&j[le]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(ce=j.length,le=W+1;le<ce&&j[le]==="NSM";)le++;if(le<ce){var me=E[W],Ee=me>=1425&&me<=2303||me===64286;if(de=j[le],Ee&&(de==="R"||de==="AL")){J="R";break}}}J=W<1||(de=j[W-1])==="B"?"N":R[W-1];break;case"B":y=!1,a=!0,J=b;break;case"S":s=!0,J="N"}return J},C=function(E,j,R){var W=E.split("");return R&&S(W,R,{hiLevel:b}),W.reverse(),j&&j.reverse(),W.join("")},S=function(E,j,R){var W,de,te,le,ce,J=-1,me=E.length,Ee=0,k=[],F=b?h:f,V=[];for(y=!1,a=!1,s=!1,de=0;de<me;de++)V[de]=_(E[de]);for(te=0;te<me;te++){if(ce=Ee,k[te]=P(E,V,k,te),W=240&(Ee=F[ce][m[k[te]]]),Ee&=15,j[te]=le=F[Ee][5],W>0)if(W===16){for(de=J;de<te;de++)j[de]=1;J=-1}else J=-1;if(F[Ee][6])J===-1&&(J=te);else if(J>-1){for(de=J;de<te;de++)j[de]=le;J=-1}V[te]==="B"&&(j[te]=0),R.hiLevel|=le}s&&function(D,M,G){for(var O=0;O<G;O++)if(D[O]==="S"){M[O]=b;for(var K=O-1;K>=0&&D[K]==="WS";K--)M[K]=b}}(V,j,me)},I=function(E,j,R,W,de){if(!(de.hiLevel<E)){if(E===1&&b===1&&!a)return j.reverse(),void(R&&R.reverse());for(var te,le,ce,J,me=j.length,Ee=0;Ee<me;){if(W[Ee]>=E){for(ce=Ee+1;ce<me&&W[ce]>=E;)ce++;for(J=Ee,le=ce-1;J<le;J++,le--)te=j[J],j[J]=j[le],j[le]=te,R&&(te=R[J],R[J]=R[le],R[le]=te);Ee=ce}Ee++}}},L=function(E,j,R){var W=E.split(""),de={hiLevel:b};return R||(R=[]),S(W,R,de),function(te,le,ce){if(ce.hiLevel!==0&&d)for(var J,me=0;me<te.length;me++)le[me]===1&&(J=g.indexOf(te[me]))>=0&&(te[me]=g[J+1])}(W,R,de),I(2,W,j,R,de),I(1,W,j,R,de),W.join("")};return this.__bidiEngine__.doBidiReorder=function(E,j,R){if(function(de,te){if(te)for(var le=0;le<de.length;le++)te[le]=le;l===void 0&&(l=T(de)),u===void 0&&(u=T(de))}(E,j),o||!c||u)if(o&&c&&l^u)b=l?1:0,E=C(E,j,R);else if(!o&&c&&u)b=l?1:0,E=L(E,j,R),E=C(E,j);else if(!o||l||c||u){if(o&&!c&&l^u)E=C(E,j),l?(b=0,E=L(E,j,R)):(b=1,E=L(E,j,R),E=C(E,j));else if(o&&l&&!c&&u)b=1,E=L(E,j,R),E=C(E,j);else if(!o&&!c&&l^u){var W=d;l?(b=1,E=L(E,j,R),b=0,d=!1,E=L(E,j,R),d=W):(b=0,E=L(E,j,R),E=C(E,j),b=1,d=!1,E=L(E,j,R),d=W,E=C(E,j))}}else b=0,E=L(E,j,R);else b=l?1:0,E=L(E,j,R);return E},this.__bidiEngine__.setOptions=function(E){E&&(o=E.isInputVisual,c=E.isOutputVisual,l=E.isInputRtl,u=E.isOutputRtl,d=E.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var o=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([r.doBidiReorder(a[l])]);n.text=o}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(Ar),Ar.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Af(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new ENe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new ANe(this.contents),this.head=new fNe(this),this.name=new vNe(this),this.cmap=new IJ(this),this.toUnicode={},this.hhea=new mNe(this),this.maxp=new yNe(this),this.hmtx=new bNe(this),this.post=new gNe(this),this.os2=new pNe(this),this.loca=new _Ne(this),this.glyf=new wNe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,u;for(u=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,s,o,l;for(o=0,s=0,l=(t=""+t).length;0<=l?s<l:s>l;s=0<=l?++s:--s)a=t.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var yu,Af=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,s,o,l,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,s;for(s=[],n=0,a=t.length;n<a;n++)r=t[n],s.push(this.writeByte(r));return s},e}(),ANe=function(){var e;function t(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,s,o,l,c,u,d,A,f,h,m,p;for(p in h=Object.keys(r).length,c=Math.log(2),A=16*Math.floor(Math.log(h)/c),o=Math.floor(A/c),d=16*h-A,(a=new Af).writeInt(this.scalarType),a.writeShort(h),a.writeShort(A),a.writeShort(o),a.writeShort(d),s=16*h,u=a.pos+s,l=null,m=[],r)for(f=r[p],a.writeString(p),a.writeInt(e(f)),a.writeInt(u),a.writeInt(f.length),m=m.concat(f),p==="head"&&(l=u),u+=f.length;u%4;)m.push(0),u++;return a.write(m),n=2981146554-e(a.data),a.pos=l+8,a.writeUInt32(n),a.data},e=function(r){var n,a,s,o;for(r=BJ.call(r);r.length%4;)r.push(0);for(s=new Af(r),a=0,n=0,o=r.length;n<o;n=n+=4)a+=s.readUInt32();return 4294967295&a},t}(),hNe={}.hasOwnProperty,od=function(e,t){for(var r in t)hNe.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};yu=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var fNe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return od(e,yu),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Af).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),G8=function(){function e(t,r){var n,a,s,o,l,c,u,d,A,f,h,m,p,g,x,y,b;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),A=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(h=t.readUInt16(),f=h/2,t.pos+=6,s=function(){var _,T;for(T=[],c=_=0;0<=f?_<f:_>f;c=0<=f?++_:--_)T.push(t.readUInt16());return T}(),t.pos+=2,p=function(){var _,T;for(T=[],c=_=0;0<=f?_<f:_>f;c=0<=f?++_:--_)T.push(t.readUInt16());return T}(),u=function(){var _,T;for(T=[],c=_=0;0<=f?_<f:_>f;c=0<=f?++_:--_)T.push(t.readUInt16());return T}(),d=function(){var _,T;for(T=[],c=_=0;0<=f?_<f:_>f;c=0<=f?++_:--_)T.push(t.readUInt16());return T}(),a=(this.length-t.pos+this.offset)/2,l=function(){var _,T;for(T=[],c=_=0;0<=a?_<a:_>a;c=0<=a?++_:--_)T.push(t.readUInt16());return T}(),c=x=0,b=s.length;x<b;c=++x)for(g=s[c],n=y=m=p[c];m<=g?y<=g:y>=g;n=m<=g?++y:--y)d[c]===0?o=n+u[c]:(o=l[d[c]/2+(n-m)-(f-c)]||0)!==0&&(o+=u[c]),this.codeMap[n]=65535&o}t.pos=A}return e.encode=function(t,r){var n,a,s,o,l,c,u,d,A,f,h,m,p,g,x,y,b,_,T,P,C,S,I,L,E,j,R,W,de,te,le,ce,J,me,Ee,k,F,V,D,M,G,O,K,ee,ne,Q;switch(W=new Af,o=Object.keys(t).sort(function(be,Z){return be-Z}),r){case"macroman":for(p=0,g=function(){var be=[];for(m=0;m<256;++m)be.push(0);return be}(),y={0:0},s={},de=0,J=o.length;de<J;de++)y[K=t[a=o[de]]]==null&&(y[K]=++p),s[a]={old:t[a],new:y[t[a]]},g[a]=y[t[a]];return W.writeUInt16(1),W.writeUInt16(0),W.writeUInt32(12),W.writeUInt16(0),W.writeUInt16(262),W.writeUInt16(0),W.write(g),{charMap:s,subtable:W.data,maxGlyphID:p+1};case"unicode":for(j=[],A=[],b=0,y={},n={},x=u=null,te=0,me=o.length;te<me;te++)y[T=t[a=o[te]]]==null&&(y[T]=++b),n[a]={old:T,new:y[T]},l=y[T]-a,x!=null&&l===u||(x&&A.push(x),j.push(a),u=l),x=a;for(x&&A.push(x),A.push(65535),j.push(65535),L=2*(I=j.length),S=2*Math.pow(Math.log(I)/Math.LN2,2),f=Math.log(S/2)/Math.LN2,C=2*I-S,c=[],P=[],h=[],m=le=0,Ee=j.length;le<Ee;m=++le){if(E=j[m],d=A[m],E===65535){c.push(0),P.push(0);break}if(E-(R=n[E].new)>=32768)for(c.push(0),P.push(2*(h.length+I-m)),a=ce=E;E<=d?ce<=d:ce>=d;a=E<=d?++ce:--ce)h.push(n[a].new);else c.push(R-E),P.push(0)}for(W.writeUInt16(3),W.writeUInt16(1),W.writeUInt32(12),W.writeUInt16(4),W.writeUInt16(16+8*I+2*h.length),W.writeUInt16(0),W.writeUInt16(L),W.writeUInt16(S),W.writeUInt16(f),W.writeUInt16(C),G=0,k=A.length;G<k;G++)a=A[G],W.writeUInt16(a);for(W.writeUInt16(0),O=0,F=j.length;O<F;O++)a=j[O],W.writeUInt16(a);for(ee=0,V=c.length;ee<V;ee++)l=c[ee],W.writeUInt16(l);for(ne=0,D=P.length;ne<D;ne++)_=P[ne],W.writeUInt16(_);for(Q=0,M=h.length;Q<M;Q++)p=h[Q],W.writeUInt16(p);return{charMap:n,subtable:W.data,maxGlyphID:b+1}}},e}(),IJ=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return od(e,yu),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,n,a;for(t.pos=this.offset,this.version=t.readUInt16(),a=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)r=new G8(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var n,a;return r==null&&(r="macroman"),n=G8.encode(t,r),(a=new Af).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},e}(),mNe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return od(e,yu),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),pNe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return od(e,yu),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(t.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(t.readInt());return n}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(t.readInt());return n}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),gNe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return od(e,yu),e.prototype.tag="post",e.prototype.parse=function(t){var r,n,a;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=t.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],a=[];t.pos<this.offset+this.length;)r=t.readByte(),a.push(this.names.push(t.readString(r)));return a;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=(function(){var o,l,c;for(c=[],s=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;s=0<=l?++o:--o)c.push(t.readUInt32());return c}).call(this)}},e}(),xNe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},vNe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return od(e,yu),e.prototype.tag="name",e.prototype.parse=function(t){var r,n,a,s,o,l,c,u,d,A,f;for(t.pos=this.offset,t.readShort(),r=t.readShort(),l=t.readShort(),n=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(c={},s=d=0,A=n.length;d<A;s=++d)a=n[s],t.pos=a.offset,u=t.readString(a.length),o=new xNe(u,a),c[f=a.nameID]==null&&(c[f]=[]),c[a.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),yNe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return od(e,yu),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),bNe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return od(e,yu),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,n,a,s,o,l,c;for(t.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=a?u<a:u>a;r=0<=a?++u:--u)d.push(t.readInt16());return d}(),this.widths=(function(){var u,d,A,f;for(f=[],u=0,d=(A=this.metrics).length;u<d;u++)s=A[u],f.push(s.advance);return f}).call(this),n=this.widths[this.widths.length-1],c=[],r=o=0;0<=a?o<a:o>a;r=0<=a?++o:--o)c.push(this.widths.push(n));return c},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),BJ=[].slice,wNe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return od(e,yu),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,n,a,s,o,l,c,u,d,A;return t in this.cache?this.cache[t]:(s=this.file.loca,r=this.file.contents,n=s.indexOf(t),(a=s.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+n,o=(l=new Af(r.read(a))).readShort(),u=l.readShort(),A=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[t]=o===-1?new CNe(l,u,A,c,d):new NNe(l,o,u,A,c,d),this.cache[t]))},e.prototype.encode=function(t,r,n){var a,s,o,l,c;for(o=[],s=[],l=0,c=r.length;l<c;l++)a=t[r[l]],s.push(o.length),a&&(o=o.concat(a.encode(n)));return s.push(o.length),{table:o,offsets:s}},e}(),NNe=function(){function e(t,r,n,a,s,o){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),CNe=function(){function e(t,r,n,a,s){var o,l;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Af(BJ.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),_Ne=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return od(e,yu),e.prototype.tag="loca",e.prototype.parse=function(t){var r,n;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,s;for(s=[],n=0,a=this.length;n<a;n+=2)s.push(2*t.readUInt16());return s}).call(this):(function(){var a,s;for(s=[],n=0,a=this.length;n<a;n+=4)s.push(t.readUInt32());return s}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var n=new Uint32Array(this.offsets.length),a=0,s=0,o=0;o<n.length;++o)if(n[o]=a,s<r.length&&r[s]==o){++s,n[o]=a;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(a+=c)}for(var u=new Array(4*n.length),d=0;d<n.length;++d)u[4*d+3]=255&n[d],u[4*d+2]=(65280&n[d])>>8,u[4*d+1]=(16711680&n[d])>>16,u[4*d]=(4278190080&n[d])>>24;return u},e}(),ENe=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,t={},s=this.subset)n=s[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,s,o,l,c;for(a={},o=0,l=t.length;o<l;o++)a[s=t[o]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],a[s]=n;return a},e.prototype.encode=function(t,r){var n,a,s,o,l,c,u,d,A,f,h,m,p,g,x;for(a in n=IJ.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),h={0:0},x=n.charMap)h[(c=x[a]).old]=c.new;for(m in f=n.maxGlyphID,o)m in h||(h[m]=f++);return d=function(y){var b,_;for(b in _={},y)_[y[b]]=b;return _}(h),A=Object.keys(d).sort(function(y,b){return y-b}),p=function(){var y,b,_;for(_=[],y=0,b=A.length;y<b;y++)l=A[y],_.push(d[l]);return _}(),s=this.font.glyf.encode(o,p,h),u=this.font.loca.encode(s.offsets,p),g={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(g["OS/2"]=this.font.os2.raw()),this.font.directory.encode(g)},e}();Ar.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,s,o;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(t.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)o=r[a],s.push("/"+a+" "+t.convert(o));return s.push(">>"),s.join(`
`)}return""+r},t}();const Ck=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:nNe,AcroFormAppearance:gr,AcroFormButton:Ms,AcroFormCheckBox:fy,AcroFormChoiceField:Sm,AcroFormComboBox:Bm,AcroFormEditBox:Ay,AcroFormListBox:Im,AcroFormPasswordField:my,AcroFormPushButton:hy,AcroFormRadioButton:jm,AcroFormTextField:Zh,GState:A1,ShadingPattern:Sh,TilingPattern:gm,default:Ar,jsPDF:Ar},Symbol.toStringTag,{value:"Module"}));async function z8(e){const t={...e,remaining:e.quantity,status:"PENDIENTE",createdAt:zt.now()};return en(At(ke,"inventory_batches"),t)}async function jJ(e,t){await Lr(Mt(ke,"inventory_batches",e),{status:"PAGADO",paidAmount:null,paidAt:zt.now()})}async function SNe(e,t){const r=Ht(At(ke,"batch_allocations"),Xt("saleDate",">=",e),Xt("saleDate","<=",t)),n=await jt(r),a={};return n.forEach(s=>{const o=s.data(),l=o.batchId;a[l]||(a[l]={batchId:o.batchId,batchDate:o.batchDate,productName:o.productName,quantity:0,amountCharged:0}),a[l].quantity+=Number(o.quantity||0),a[l].amountCharged+=Number(o.amountCharged||0)}),Object.values(a)}async function INe(e){const t=Mt(ke,"salesV2",e),r=await Qi(t);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),a=[];if(Array.isArray(n.items)){for(const l of n.items)if(Array.isArray(l==null?void 0:l.allocations))for(const c of l.allocations){const u=String((c==null?void 0:c.batchId)||"").trim(),d=Number((c==null?void 0:c.qty)||0);u&&d&&a.push({batchId:u,qty:d})}}if(Array.isArray(n.allocations))for(const l of n.allocations){const c=String((l==null?void 0:l.batchId)||"").trim(),u=Number((l==null?void 0:l.qty)||0);c&&u&&a.push({batchId:c,qty:u})}if(a.length===0)return await Ks(ke,async l=>{l.delete(t)}),{restored:0};const s=new Map;for(const l of a)s.set(l.batchId,Number((s.get(l.batchId)||0)+l.qty));let o=0;return await Ks(ke,async l=>{const c=Array.from(s.entries()),u=c.map(([A])=>Mt(ke,"inventory_batches",A)),d=await Promise.all(u.map(A=>l.get(A)));c.forEach(([A,f],h)=>{const m=d[h];if(!m.exists())return;const p=m.data(),g=Number((p==null?void 0:p.remaining)??0),x=Number((g+Number(f||0)).toFixed(3));l.update(u[h],{remaining:x}),o+=Number(f||0)}),l.delete(t)}),{restored:o}}function Pc(){const[e,t]=v.useState(0),r=v.useCallback(()=>t(n=>n+1),[]);return{refreshKey:e,refresh:r}}const ac=e=>Math.round((Number(e)||0)*100)/100,p2=e=>Math.round((Number(e)||0)*1e3)/1e3,sv=e=>Number(e??0).toFixed(2),vj=e=>Number(e??0).toFixed(3),W8=(e,t)=>{var n;const r=e.date??((n=e.timestamp)!=null&&n.toDate?ir(e.timestamp.toDate(),"yyyy-MM-dd"):"");return r?Array.isArray(e.items)&&e.items.length>0?e.items.map((a,s)=>{const o=Number((a==null?void 0:a.qty)??0),l=Number((a==null?void 0:a.lineFinal)??0)||Math.max(0,Number((a==null?void 0:a.unitPrice)||0)*o-Number((a==null?void 0:a.discount)||0));return{id:`${t}#${s}`,productName:String((a==null?void 0:a.productName)??"(sin nombre)"),quantity:o,amount:ac(l),amountSuggested:Number(e.amountSuggested??0),date:r,userEmail:e.userEmail??e.vendor??"(sin usuario)",clientName:e.clientName??"",amountReceived:Number(e.amountReceived??0),change:String(e.change??"0"),status:e.status??"FLOTANTE",allocations:Array.isArray(a==null?void 0:a.allocations)?a.allocations:e.allocations,avgUnitCost:Number((a==null?void 0:a.avgUnitCost)??e.avgUnitCost??0),cogsAmount:Number((a==null?void 0:a.cogsAmount)??0)}}):[{id:t,productName:e.productName??"(sin nombre)",quantity:Number(e.quantity??0),amount:Number(e.amount??e.amountCharged??0),amountSuggested:Number(e.amountSuggested??0),date:r,userEmail:e.userEmail??e.vendor??"(sin usuario)",clientName:e.clientName??"",amountReceived:Number(e.amountReceived??0),change:String(e.change??"0"),status:e.status??"FLOTANTE",allocations:e.allocations,avgUnitCost:e.avgUnitCost,cogsAmount:e.cogsAmount}]:[]};function BNe({role:e}){const[t,r]=v.useState([]),[n,a]=v.useState([]),[s,o]=v.useState(null),[l,c]=v.useState(!0),[u,d]=v.useState(""),[A,f]=v.useState("ALL"),[h,m]=v.useState(null),[p,g]=v.useState(0),[x,y]=v.useState(0),[b,_]=v.useState(""),[T,P]=v.useState(0),[C,S]=v.useState("0"),I=ir(new Date,"yyyy-MM-dd"),L=v.useRef(null),{refreshKey:E}=Pc();v.useEffect(()=>{const M=Ht(At(ke,"salesV2"),Xt("date","==",I)),G=uf(M,O=>{const K=[];O.forEach(ee=>{const ne=W8(ee.data(),ee.id);K.push(...ne)}),r(K),c(!1)});return()=>G()},[I,E]),v.useEffect(()=>{const M=Ht(At(ke,"salesV2"),Xt("status","==","FLOTANTE")),G=uf(M,O=>{const K=[];O.forEach(ee=>{const ne=W8(ee.data(),ee.id);K.push(...ne)}),a(K)});return()=>G()},[E]),v.useEffect(()=>{(async()=>{const G=Ht(At(ke,"daily_closures"),Xt("date","==",I)),O=await jt(G);if(O.empty)o(null);else{const K=O.docs[0];o({id:K.id,...K.data()})}})()},[I,E]);const j=Ti.useMemo(()=>{if(A==="FLOTANTE"){const M=[...t,...n],G=new Map;for(const O of M)O.status==="FLOTANTE"&&G.set(O.id,O);return Array.from(G.values())}if(A==="ALL"){const M=[...t,...n],G=new Map;for(const O of M)G.set(O.id,O);return Array.from(G.values())}return t.filter(M=>M.status==="PROCESADA")},[A,t,n]);ac(j.reduce((M,G)=>M+(G.amountSuggested||0),0));const R=ac(j.reduce((M,G)=>M+(G.amount||0),0)),W=p2(j.reduce((M,G)=>M+(G.quantity||0),0)),de=ac(j.reduce((M,G)=>M+Number(G.cogsAmount??0),0)),te=ac(R-de),le={};j.forEach(M=>{const G=M.productName||"(sin nombre)";le[G]||(le[G]={totalQuantity:0,totalAmount:0}),le[G].totalQuantity=p2(le[G].totalQuantity+(M.quantity||0)),le[G].totalAmount=ac(le[G].totalAmount+(M.amount||0))});const ce=Object.entries(le).map(([M,G])=>({productName:M,totalQuantity:G.totalQuantity,totalAmount:G.totalAmount})),J=async()=>{try{const M=j.filter(be=>be.status==="FLOTANTE"),G=M.length>0?M:t.filter(be=>be.status!=="PROCESADA");if(G.length===0){d("No hay ventas para procesar.");return}const O={totalCharged:ac(G.reduce((be,Z)=>be+(Z.amount||0),0)),totalSuggested:ac(G.reduce((be,Z)=>be+(Z.amountSuggested||0),0)),totalUnits:p2(G.reduce((be,Z)=>be+(Z.quantity||0),0)),totalCOGS:ac(G.reduce((be,Z)=>be+Number(Z.cogsAmount??0),0))},K=ac(O.totalCharged-O.totalSuggested),ee=ac(O.totalCharged-O.totalCOGS),ne=await en(At(ke,"daily_closures"),{date:I,createdAt:zt.now(),totalCharged:O.totalCharged,totalSuggested:O.totalSuggested,totalDifference:K,totalUnits:O.totalUnits,totalCOGS:O.totalCOGS,grossProfit:ee,products:G.map(be=>({productName:be.productName,quantity:be.quantity,amount:be.amount})),salesV2:G.map(be=>({id:be.id,productName:be.productName,quantity:be.quantity,amount:be.amount,amountSuggested:be.amountSuggested,userEmail:be.userEmail,clientName:be.clientName,amountReceived:be.amountReceived,change:be.change,status:be.status,cogsAmount:be.cogsAmount??0,avgUnitCost:be.avgUnitCost??null,allocations:be.allocations??[],date:be.date})),productSummary:Object.entries(G.reduce((be,Z)=>{const z=Z.productName||"(sin nombre)";return be[z]||(be[z]={totalQuantity:0,totalAmount:0}),be[z].totalQuantity=p2(be[z].totalQuantity+(Z.quantity||0)),be[z].totalAmount=ac(be[z].totalAmount+(Z.amount||0)),be},{})).map(([be,Z])=>({productName:be,totalQuantity:Z.totalQuantity,totalAmount:Z.totalAmount}))}),Q=_0(ke);G.forEach(be=>{Q.update(Mt(ke,"salesV2",be.id.split("#")[0]),{status:"PROCESADA",closureId:ne.id,closureDate:I})}),await Q.commit(),d(` Cierre guardado. Ventas procesadas: ${G.length}.`)}catch(M){console.error(M),d(" Error al guardar el cierre.")}},me=async M=>{if(window.confirm("Revertir esta venta? Esta accin no se puede deshacer."))try{await Lr(Mt(ke,"salesV2",M.split("#")[0]),{status:"FLOTANTE",closureId:null,closureDate:null}),d(" Venta revertida a FLOTANTE.")}catch(G){console.error(G),d(" No se pudo revertir la venta.")}},Ee=M=>{m(M),g(M.quantity),y(M.amount),_(M.clientName),P(M.amountReceived),S(M.change)},k=async()=>{if(h)try{await Lr(Mt(ke,"salesV2",h.id.split("#")[0]),{quantity:p,amount:x,amountCharged:x,clientName:b,amountReceived:T,change:C}),m(null),d(" Venta actualizada.")}catch(M){console.error(M),d(" No se pudo actualizar la venta.")}},F=async M=>{if(window.confirm("Eliminar esta venta? Se restaurar el stock en los lotes asignados."))try{const{restored:G}=await INe(M.split("#")[0]);d(` Venta eliminada. Stock restaurado: ${Number(G).toFixed(2)}.`)}catch(G){console.error(G),d(" No se pudo eliminar la venta.")}},V=async()=>{if(L.current){L.current.classList.add("force-pdf-colors");try{const G=(await If(L.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),O=new Ar;O.addImage(G,"PNG",10,10,190,0),O.save(`cierre_${I}.pdf`)}finally{L.current.classList.remove("force-pdf-colors")}}},D=!e||e==="admin";return i.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[i.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Cierre de Ventas - ",I]}),i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("label",{className:"text-sm",children:"Filtrar:"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:A,onChange:M=>f(M.target.value),children:[i.jsx("option",{value:"ALL",children:"Todas"}),i.jsx("option",{value:"FLOTANTE",children:"Venta Flotante"}),i.jsx("option",{value:"PROCESADA",children:"Venta Procesada"})]})]}),l?i.jsx("p",{children:"Cargando ventas..."}):i.jsxs("div",{ref:L,children:[i.jsxs("table",{className:"min-w-full border text-sm mb-4  shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Estado"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Libras - Unidad"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Fecha venta"}),i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Acciones"})]})}),i.jsxs("tbody",{children:[j.map(M=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${M.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:M.status})}),i.jsx("td",{className:"border p-1",children:M.productName}),i.jsx("td",{className:"border p-1",children:vj(M.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",sv(M.amount)]}),i.jsx("td",{className:"border p-1",children:M.date}),i.jsx("td",{className:"border p-1",children:M.userEmail}),i.jsx("td",{className:"border p-1",children:M.status==="FLOTANTE"?i.jsxs("div",{className:"flex gap-2 justify-center",children:[D&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>Ee(M),className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",children:"Editar"}),i.jsx("button",{onClick:()=>F(M.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]}),!D&&i.jsx("span",{className:"text-gray-400 text-xs",children:""})]}):M.status==="PROCESADA"?i.jsx("div",{className:"flex gap-2 justify-center",children:D?i.jsx("button",{onClick:()=>me(M.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Revertir"}):i.jsx("span",{className:"text-gray-400 text-xs",children:""})}):i.jsx("span",{className:"text-gray-400 text-xs",children:"No options"})})]},M.id)),j.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"p-3 text-center text-gray-500",children:"Sin ventas para mostrar."})})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm mb-2",children:[i.jsxs("div",{children:[" ","Total Libras/Unidades: ",i.jsx("strong",{children:vj(W)})]}),i.jsxs("div",{children:[" ","Total cobrado: ",i.jsxs("strong",{children:["C$",sv(R)]})]})]}),(de>0||te!==R)&&i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm mb-6",children:[i.jsxs("div",{children:[" ","Calculo a Precio compra:"," ",i.jsxs("strong",{children:["C$",sv(de)]})]}),i.jsxs("div",{children:[" ","Ganancia antes de gasto:"," ",i.jsxs("strong",{children:["C$",sv(te)]})]})]}),i.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),i.jsxs("table",{className:"min-w-full border text-sm mb-2 shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),i.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),i.jsxs("tbody",{children:[ce.map(M=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:M.productName}),i.jsx("td",{className:"border p-1",children:vj(M.totalQuantity)}),i.jsxs("td",{className:"border p-1",children:["C$",sv(M.totalAmount)]})]},M.productName)),ce.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500",children:"Sin datos para consolidar."})})]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:J,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Cerrar ventas del da"}),i.jsx("button",{onClick:V,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Descargar PDF"})]}),u&&i.jsx("p",{className:"mt-2 text-sm",children:u}),h&&i.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-4 space-y-3",children:[i.jsx("h4",{className:"font-semibold text-lg",children:"Editar venta"}),i.jsxs("div",{className:"text-sm text-gray-500",children:[h.productName,"  ",h.userEmail]}),i.jsx("label",{className:"text-sm",children:"Cantidad"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:p,onChange:M=>g(parseFloat(M.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Monto cobrado"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:x,onChange:M=>y(parseFloat(M.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Cliente"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:b,onChange:M=>_(M.target.value)}),i.jsx("label",{className:"text-sm",children:"Paga con"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:T,onChange:M=>P(parseFloat(M.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Vuelto"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:C,onChange:M=>S(M.target.value)}),i.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[i.jsx("button",{onClick:()=>m(null),className:"px-3 py-1 border rounded",children:"Cancelar"}),i.jsx("button",{onClick:k,className:"px-3 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",children:"Guardar cambios"})]})]})})]})}const Zl=e=>Number(e??0).toFixed(2),cp=e=>Number(e??0).toFixed(3);function jNe(){var y,b,_,T;const e=async P=>{if(!window.confirm(`Eliminar el cierre del ${P.date}?`))return;const C=window.confirm("Tambin quieres reabrir (revertir a FLOTANTE) las ventas vinculadas a este cierre?");try{if(C){const S=await jt(Ht(At(ke,"salesV2"),Xt("closureId","==",P.id)));if(!S.empty){const I=_0(ke);S.forEach(L=>{I.update(Mt(ke,"salesV2",L.id),{status:"FLOTANTE",closureId:null,closureDate:null})}),await I.commit()}}await fn(Mt(ke,"daily_closures",P.id)),(u==null?void 0:u.id)===P.id&&d(null),await m(),f(` Cierre eliminado${C?" y ventas reabiertas.":"."}`)}catch(S){console.error(S),f(" No se pudo eliminar el cierre.")}},[t,r]=v.useState(ir(OW(new Date),"yyyy-MM-dd")),[n,a]=v.useState(ir(new Date,"yyyy-MM-dd")),[s,o]=v.useState(!0),[l,c]=v.useState([]),[u,d]=v.useState(null),[A,f]=v.useState(""),h=v.useRef(null),m=async()=>{try{o(!0);const P=Ht(At(ke,"daily_closures"),Xt("date",">=",t),Xt("date","<=",n)),C=await jt(P),S=[];C.forEach(I=>S.push({id:I.id,...I.data()})),S.sort((I,L)=>I.date<L.date?1:I.date>L.date?-1:0),c(S)}catch(P){console.error(P),f(" Error cargando el historial.")}finally{o(!1)}};v.useEffect(()=>{m()},[]);const p=async P=>{P.preventDefault(),m()},g=v.useMemo(()=>{if(!u)return{units:0,sug:0,chg:0,diff:0,cogs:0,profit:0};const P=Number(u.totalUnits??0),C=Number(u.totalSuggested??0),S=Number(u.totalCharged??0),I=Number(u.totalDifference??(isFinite(S-C)?S-C:0)),L=Number(u.totalCOGS??0),E=Number(u.grossProfit??(isFinite(S-L)?S-L:0));return{units:P,sug:C,chg:S,diff:I,cogs:L,profit:E}},[u]),x=async()=>{if(!h.current||!u)return;const P=h.current;P.classList.add("force-pdf-colors");try{const[{default:C},{jsPDF:S}]=await Promise.all([Yd(()=>Promise.resolve().then(()=>XF),void 0),Yd(()=>Promise.resolve().then(()=>Ck),void 0)]),L=(await C(P,{backgroundColor:"#ffffff",onclone:R=>{const W=R.defaultView;R.body.querySelectorAll("*").forEach(te=>{const le=W.getComputedStyle(te);le.color&&(te.style.color=le.color),le.backgroundColor&&le.backgroundColor!=="rgba(0, 0, 0, 0)"&&(te.style.backgroundColor=le.backgroundColor),le.borderColor&&(te.style.borderColor=le.borderColor)})}})).toDataURL("image/png"),{jsPDF:E}=await Yd(async()=>{const{jsPDF:R}=await Promise.resolve().then(()=>Ck);return{jsPDF:R}},void 0),j=new E;j.addImage(L,"PNG",10,10,190,0),j.save(`cierre_${u.date}.pdf`)}finally{P.classList.remove("force-pdf-colors")}};return i.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Histrico de cierres"}),i.jsxs("form",{onSubmit:p,className:"flex flex-wrap items-end gap-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:P=>r(P.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:n,onChange:P=>a(P.target.value)})]}),i.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Aplicar"})]}),s?i.jsx("p",{children:"Cargando..."}):l.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin cierres en el rango seleccionado."}):i.jsxs("table",{className:"min-w-full text-sm mb-6  shadow-lg p-4 bg-white border-gray-100",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),i.jsx("th",{className:"border p-2",children:"Monto de venta"}),i.jsx("th",{className:"border p-2",children:"Monto al costo"}),i.jsx("th",{className:"border p-2",children:"Ganancia sin gastos"}),i.jsx("th",{className:"border p-2",children:"Acciones"})]})}),i.jsx("tbody",{children:l.map(P=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:P.date}),i.jsx("td",{className:"border p-1",children:cp(P.totalUnits)}),i.jsxs("td",{className:"border p-1",children:["C$",Zl(P.totalCharged)]}),i.jsxs("td",{className:"border p-1",children:["C$",Zl(P.totalCOGS)]}),i.jsxs("td",{className:"border p-1",children:["C$",Zl(P.grossProfit??Number(P.totalCharged??0)-Number(P.totalCOGS??0))]}),i.jsx("td",{className:"border p-1",children:i.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[i.jsx("button",{className:"text-xs bg-gray-800 text-white px-2 py-1 rounded hover:bg-black",onClick:()=>d(P),children:"Ver detalle"}),i.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>e(P),children:"Eliminar"})]})})]},P.id))})]}),u&&i.jsxs("div",{className:"mt-6 rounded-2xl shadow-lg p-4 bg-white border-solid border-2 border-gray-100",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2 ",children:[i.jsxs("h2",{className:"text-xl font-semibold",children:["Detalle ",u.date]}),i.jsx("button",{onClick:()=>d(null),className:"text-sm px-2 py-1 border rounded",children:"Cerrar"}),i.jsx("button",{onClick:x,className:"ml-auto bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Descargar PDF"})]}),i.jsxs("div",{ref:h,className:"space-y-4",children:[i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:i.jsxs("div",{children:["Total Libras/Unidades: ",i.jsx("strong",{children:cp(g.units)})]})}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm",children:[i.jsxs("div",{children:["Monto al costo:"," ",i.jsxs("strong",{children:["C$",Zl(g.cogs)]})]}),i.jsxs("div",{children:["Ganancia sin gastos:"," ",i.jsxs("strong",{children:["C$",Zl(g.profit)]})]})]}),(y=u.salesV2)!=null&&y.length?i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Cantidad"}),i.jsx("th",{className:"border p-2",children:"Monto de ventas"}),i.jsx("th",{className:"border p-2",children:"Monto al costo"}),i.jsx("th",{className:"border p-2",children:"Fecha venta"}),i.jsx("th",{className:"border p-2",children:"Vendedor"})]})}),i.jsx("tbody",{children:u.salesV2.map((P,C)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:P.productName??"(sin nombre)"}),i.jsx("td",{className:"border p-1",children:cp(P.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",Zl(P.amount)]}),i.jsxs("td",{className:"border p-1",children:["C$",Zl(P.cogsAmount)]}),i.jsx("td",{className:"border p-1",children:P.date??""}),i.jsx("td",{className:"border p-1",children:P.userEmail??""})]},C))})]})]}):(b=u.sales)!=null&&b.length?i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Cantidad"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Cliente"}),i.jsx("th",{className:"border p-2",children:"Paga con"}),i.jsx("th",{className:"border p-2",children:"Vuelto"})]})}),i.jsx("tbody",{children:u.sales.map((P,C)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:P.productName??"(sin nombre)"}),i.jsx("td",{className:"border p-1",children:cp(P.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",Zl(P.amount)]}),i.jsx("td",{className:"border p-1",children:P.userEmail??""}),i.jsx("td",{className:"border p-1",children:P.clientName??""}),i.jsxs("td",{className:"border p-1",children:["C$",Zl(P.amountReceived)]}),i.jsx("td",{className:"border p-1",children:typeof P.change=="number"?Zl(P.change):P.change??"0"})]},C))})]})]}):(_=u.products)!=null&&_.length?i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"font-semibold",children:"Productos en el cierre"}),i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Cantidad"}),i.jsx("th",{className:"border p-2",children:"Monto"})]})}),i.jsx("tbody",{children:u.products.map((P,C)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:P.productName}),i.jsx("td",{className:"border p-1",children:cp(P.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",Zl(P.amount)]})]},C))})]})]}):i.jsx("p",{className:"text-sm text-gray-500",children:"Sin detalle de ventas en este cierre."}),(T=u.productSummary)!=null&&T.length?i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"font-semibold",children:"Consolidado por producto"}),i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),i.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),i.jsx("tbody",{children:u.productSummary.map((P,C)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:P.productName}),i.jsx("td",{className:"border p-1",children:cp(P.totalQuantity)}),i.jsxs("td",{className:"border p-1",children:["C$",Zl(P.totalAmount)]})]},C))})]})]}):null]})]}),A&&i.jsx("p",{className:"mt-3 text-sm",children:A})]})}function PNe(){const[e,t]=v.useState(""),[r,n]=v.useState(""),[a,s]=v.useState(""),[o,l]=v.useState(!1),[c,u]=v.useState("vendedor_pollo"),[d,A]=v.useState(""),[f,h]=v.useState(""),[m,p]=v.useState([]),[g,x]=v.useState(!0),[y,b]=v.useState(null),[_,T]=v.useState("vendedor_pollo"),[P,C]=v.useState(""),[S,I]=v.useState(!1),[L,E]=v.useState([]),j=F=>!F||F==="vendedor"?"vendedor_pollo":F==="admin"||F==="vendedor_pollo"||F==="vendedor_ropa"||F==="vendedor_dulces"?F:"vendedor_pollo",R=async()=>{x(!0);const F=await jt(At(ke,"users")),V=[];F.forEach(D=>{const M=D.data();V.push({id:D.id,email:M.email??"",name:M.name??"",role:j(M.role),sellerCandyId:M.sellerCandyId??""})}),p(V),x(!1)},W=async()=>{try{const F=await jt(At(ke,"sellers_candies")),V=[];F.forEach(D=>{const M=D.data();V.push({id:D.id,name:M.name??"(sin nombre)",branchLabel:M.branch??"",commissionPercent:Number(M.commissionPercent??0)})}),E(V)}catch(F){console.error("Error cargando sellers_candies:",F)}};v.useEffect(()=>{R(),W()},[]);const de=()=>{t(""),n(""),s(""),u("vendedor_pollo"),h("")},te=async F=>{if(F.preventDefault(),A(""),a.length<4){A(" La contrasea debe tener al menos 4 caracteres.");return}if(!e.trim()){A(" El nombre es obligatorio.");return}try{const V=K4(),D=$4(V.options,"Secondary"),M=IG(D),G=await yAe(M,r,a),O=j(c),K=O==="vendedor_dulces"&&f||"";await EW(Mt(At(ke,"users"),G.user.uid),{email:r,name:e.trim(),role:O,sellerCandyId:K}),await NE(M),await mde(D),p(ee=>[{id:G.user.uid,email:r,name:e.trim(),role:O,sellerCandyId:K},...ee]),A(" Usuario creado correctamente."),de(),I(!1)}catch(V){console.error(V),A(" Error al crear el usuario: "+V.message)}},le=F=>{b(F.id),T(j(F.role)),C(F.sellerCandyId||"")},ce=()=>{b(null),T("vendedor_pollo"),C("")},J=async()=>{if(!y)return;const F=Mt(ke,"users",y),V=j(_),D=V==="vendedor_dulces"&&P||"";await Lr(F,{role:V,sellerCandyId:D}),p(M=>M.map(G=>G.id===y?{...G,role:V,sellerCandyId:D}:G)),ce()},me=async F=>{confirm("Eliminar este usuario del listado?")&&(await fn(Mt(ke,"users",F)),p(D=>D.filter(M=>M.id!==F)))},Ee=F=>{const V=F==="admin"?"admin":F==="vendedor_ropa"?"vendedor_ropa":F==="vendedor_dulces"?"vendedor_dulces":"vendedor_pollo",D=V==="admin"?"bg-blue-100 text-blue-700":V==="vendedor_ropa"?"bg-indigo-100 text-indigo-700":V==="vendedor_dulces"?"bg-pink-100 text-pink-700":"bg-green-100 text-green-700";return i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${D}`,children:V})},k=F=>`${F.name}  ${F.branchLabel||"Sin sucursal"}  ${F.commissionPercent.toFixed(2)}%`;return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Usuarios"}),i.jsx("button",{className:"px-3 py-2 rounded bg-purple-600 text-white hover:bg-purple-700",onClick:()=>I(!0),type:"button",children:"Crear usuario"})]}),i.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Email"}),i.jsx("th",{className:"p-2 border",children:"Rol"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:g?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Cargando"})}):m.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Sin usuarios"})}):m.map(F=>{const V=y===F.id,D=(V?_:F.role)==="vendedor_dulces";return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:F.name||""}),i.jsx("td",{className:"p-2 border",children:F.email}),i.jsx("td",{className:"p-2 border",children:V?i.jsxs("div",{className:"space-y-2",children:[i.jsxs("select",{className:"w-full border p-1 rounded",value:_,onChange:M=>T(M.target.value),children:[i.jsx("option",{value:"admin",children:"Admin"}),i.jsx("option",{value:"vendedor_pollo",children:"Vendedor Pollo"}),i.jsx("option",{value:"vendedor_ropa",children:"Vendedor Ropa"}),i.jsx("option",{value:"vendedor_dulces",children:"Vendedor Dulces"})]}),_==="vendedor_dulces"&&i.jsxs("select",{className:"w-full border p-1 rounded text-xs",value:P,onChange:M=>C(M.target.value),children:[i.jsx("option",{value:"",children:"Selecciona vendedor de dulces"}),L.map(M=>i.jsx("option",{value:M.id,children:k(M)},M.id))]})]}):i.jsxs(i.Fragment,{children:[Ee(F.role),D&&F.sellerCandyId&&i.jsx("div",{className:"mt-1 text-[11px] text-gray-500",children:"Vendedor asignado"})]})}),i.jsx("td",{className:"p-2 border space-x-2",children:V?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:J,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:ce,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>le(F),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>me(F.id),children:"Eliminar"})]})})]},F.id)})})]})}),d&&i.jsx("p",{className:"text-sm mt-2",children:d}),S&&i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>I(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-lg max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Registrar nuevo usuario"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>I(!1),type:"button",children:"Cerrar"})]}),i.jsxs("form",{onSubmit:te,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre completo"}),i.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:e,onChange:F=>t(F.target.value),required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Correo electrnico"}),i.jsx("input",{type:"email",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:r,onChange:F=>n(F.target.value),required:!0})]}),i.jsxs("div",{className:"space-y-1 relative",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Contrasea (mnimo 6 caracteres)"}),i.jsx("input",{type:o?"text":"password",minLength:6,className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400 pr-10",value:a,onChange:F=>s(F.target.value),required:!0}),i.jsx("button",{type:"button",className:"absolute right-2 top-8 text-sm text-gray-600 hover:text-gray-800",onClick:()=>l(F=>!F),children:o?"":""})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Rol"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:c,onChange:F=>u(F.target.value),children:[i.jsx("option",{value:"admin",children:"Admin"}),i.jsx("option",{value:"vendedor_pollo",children:"Vendedor Pollo"}),i.jsx("option",{value:"vendedor_ropa",children:"Vendedor Ropa"}),i.jsx("option",{value:"vendedor_dulces",children:"Vendedor Dulces"})]})]}),c==="vendedor_dulces"&&i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Vendedor (dulces)"}),i.jsxs("select",{className:"w-full border p-2 rounded text-sm",value:f,onChange:F=>h(F.target.value),children:[i.jsx("option",{value:"",children:"Selecciona vendedor de dulces asignado"}),L.map(F=>i.jsx("option",{value:F.id,children:k(F)},F.id))]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>I(!1),children:"Cancelar"}),i.jsx("button",{className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Crear usuario"})]})]}),d&&i.jsx("p",{className:"text-sm mt-2",children:d})]})]})]})}const kNe=e=>`C$${(Number(e)||0).toFixed(2)}`;function TNe(){const[e,t]=v.useState(""),[r,n]=v.useState(0),[a,s]=v.useState(""),[o,l]=v.useState(""),[c,u]=v.useState(""),[d,A]=v.useState([]),[f,h]=v.useState(!0),[m,p]=v.useState(!1),[g,x]=v.useState(null),[y,b]=v.useState(""),[_,T]=v.useState(""),[P,C]=v.useState(""),[S,I]=v.useState(0),[L,E]=v.useState(!1),j=async()=>{h(!0);const me=await jt(At(ke,"products")),Ee=[];me.forEach(k=>{const F=k.data();Ee.push({id:k.id,name:F.name??"",price:Number(F.price??0),category:F.category??"",measurement:F.measurement??"",active:F.active!==!1})}),A(Ee),h(!1)};v.useEffect(()=>{j()},[]);const R=async me=>{if(me.preventDefault(),s(""),!e||r<=0||!c){s(" Completa nombre, precio vlido y unidad de medida");return}try{const Ee={name:e,price:parseFloat(r.toFixed(2)),category:o,measurement:c,active:!0},k=await en(At(ke,"products"),Ee);A(F=>[{id:k.id,...Ee},...F]),s(" Producto registrado con exito."),t(""),n(0),u(""),l(""),E(!1)}catch(Ee){s(" Error: "+Ee.message)}},W=me=>{x(me.id),b(me.name),T(me.category),C(me.measurement),I(me.price)},de=()=>{x(null),b(""),T(""),C(""),I(0)},te=async()=>{if(!g)return;const me=Mt(ke,"products",g);await Lr(me,{name:y,category:_,measurement:P,price:parseFloat((S||0).toFixed(2))}),A(Ee=>Ee.map(k=>k.id===g?{...k,name:y,category:_,measurement:P,price:parseFloat((S||0).toFixed(2))}:k)),de()},le=async me=>{const Ee=Mt(ke,"products",me.id),k=me.active===!1;await Lr(Ee,{active:k}),A(F=>F.map(V=>V.id===me.id?{...V,active:k}:V))},ce=async me=>{const Ee=Ht(At(ke,"inventory_batches"),Xt("productId","==",me),CW(1));if(!(await jt(Ee)).empty){alert(`No se puede eliminar: hay lotes asociados a este producto.
Sugerencia: desactvalo para ocultarlo.`);return}confirm("Eliminar este producto definitivamente?")&&(await fn(Mt(ke,"products",me)),A(V=>V.filter(D=>D.id!==me)))},J=m?d:d.filter(me=>me.active!==!1);return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Productos"}),i.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{s(""),E(!0)},children:[i.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]}),L&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>E(!1)}),i.jsxs("div",{className:"relative z-10 w-[95%] max-w-lg bg-white rounded-lg shadow-2xl border p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("h3",{className:"text-lg font-bold text-green-700 flex items-center gap-2",children:[i.jsx("span",{className:"inline-block bg-green-100 text-green-700 rounded-full p-2",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Registrar producto"]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>E(!1),children:"Cerrar"})]}),i.jsxs("form",{onSubmit:R,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Categora"}),i.jsxs("select",{value:o,onChange:me=>l(me.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[i.jsx("option",{value:"",children:"Selecciona"}),i.jsx("option",{value:"pollo",children:"Pollo"}),i.jsx("option",{value:"cerdo",children:"Cerdo"}),i.jsx("option",{value:"huevo",children:"Huevos"}),i.jsx("option",{value:"ropa",children:"Ropa"}),i.jsx("option",{value:"otros",children:"Otros"})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre del producto"}),i.jsx("input",{type:"text",className:"w-full border p-2 rounded",value:e,onChange:me=>t(me.target.value)})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Tipo de unidad de medida"}),i.jsxs("select",{value:c,onChange:me=>u(me.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[i.jsx("option",{value:"",children:"Selecciona"}),i.jsx("option",{value:"lb",children:"Libra"}),i.jsx("option",{value:"kg",children:"Kilogramo"}),i.jsx("option",{value:"unidad",children:"Unidad"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Precio por unidad (ej: 55.50)"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border p-2 rounded",value:Number.isNaN(r)?"":r,onChange:me=>n(parseFloat(me.target.value)),onFocus:me=>me.target.value==="0"?n(NaN):null})]}),i.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",children:"Agregar producto"}),a&&i.jsx("p",{className:"text-sm mt-2",children:a})]})]})]}),i.jsxs("div",{className:"flex items-center justify-between mt-6 mb-2",children:[i.jsx("h3",{className:"text-lg font-semibold p-2",children:"Productos"}),i.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[i.jsx("input",{type:"checkbox",checked:m,onChange:me=>p(me.target.checked)}),"Mostrar inactivos"]})]}),i.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Unidad"}),i.jsx("th",{className:"p-2 border",children:"Precio"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:f?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):J.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin productos"})}):J.map(me=>{const Ee=g===me.id,k=me.active!==!1;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:Ee?i.jsx("input",{className:"w-full border p-1 rounded",value:y,onChange:F=>b(F.target.value)}):me.name}),i.jsx("td",{className:"p-2 border",children:Ee?i.jsxs("select",{className:"w-full border p-1 rounded",value:_,onChange:F=>T(F.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),i.jsx("option",{value:"pollo",children:"Pollo"}),i.jsx("option",{value:"cerdo",children:"Cerdo"}),i.jsx("option",{value:"huevo",children:"Huevos"}),i.jsx("option",{value:"ropa",children:"Ropa"}),i.jsx("option",{value:"otros",children:"Otros"})]}):me.category}),i.jsx("td",{className:"p-2 border",children:Ee?i.jsxs("select",{className:"w-full border p-1 rounded",value:P,onChange:F=>C(F.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),i.jsx("option",{value:"lb",children:"Libra"}),i.jsx("option",{value:"kg",children:"Kilogramo"}),i.jsx("option",{value:"unidad",children:"Unidad"})]}):me.measurement}),i.jsx("td",{className:"p-2 border",children:Ee?i.jsx("input",{type:"number",step:"0.01",className:"w-full border p-1 rounded text-right",value:Number.isNaN(S)?"":S,onChange:F=>I(parseFloat(F.target.value))}):kNe(me.price)}),i.jsx("td",{className:"p-2 border",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${k?"bg-green-100 text-green-700":"bg-gray-200 text-gray-700"}`,children:k?"Activo":"Inactivo"})}),i.jsx("td",{className:"p-2 border space-x-2",children:Ee?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:te,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:de,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>W(me),children:"Editar"}),i.jsx("button",{className:`px-2 py-1 rounded ${k?"bg-gray-600 hover:bg-gray-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,onClick:()=>le(me),children:k?"Desactivar":"Activar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>ce(me.id),children:"Eliminar"})]})})]},me.id)})})]})})]})}const Ci=[];for(let e=0;e<256;++e)Ci.push((e+256).toString(16).slice(1));function FNe(e,t=0){return(Ci[e[t+0]]+Ci[e[t+1]]+Ci[e[t+2]]+Ci[e[t+3]]+"-"+Ci[e[t+4]]+Ci[e[t+5]]+"-"+Ci[e[t+6]]+Ci[e[t+7]]+"-"+Ci[e[t+8]]+Ci[e[t+9]]+"-"+Ci[e[t+10]]+Ci[e[t+11]]+Ci[e[t+12]]+Ci[e[t+13]]+Ci[e[t+14]]+Ci[e[t+15]]).toLowerCase()}let yj;const ONe=new Uint8Array(16);function DNe(){if(!yj){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");yj=crypto.getRandomValues.bind(crypto)}return yj(ONe)}const RNe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),X8={randomUUID:RNe};function LNe(e,t,r){var a;if(X8.randomUUID&&!e)return X8.randomUUID();e=e||{};const n=e.random??((a=e.rng)==null?void 0:a.call(e))??DNe();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,FNe(n)}async function MNe(e,t,r,n=!1){if(r<=0)return{allocations:[],avgUnitCost:0,cogsAmount:0};const a=At(e,"inventory_batches"),s=Ht(a,Xt("productName","==",t)),c=(await jt(s)).docs.map(u=>({id:u.id,data:u.data()})).sort((u,d)=>{var p,g;const A=u.data.date??"",f=d.data.date??"";if(A!==f)return A<f?-1:1;const h=((p=u.data.createdAt)==null?void 0:p.seconds)??0,m=((g=d.data.createdAt)==null?void 0:g.seconds)??0;return h-m}).map(u=>Mt(e,"inventory_batches",u.id));return Ks(e,async u=>{let d=Number(r);const A=[],f=await Promise.all(c.map(g=>u.get(g)));for(let g=0;g<c.length&&d>0;g++){const x=c[g],y=f[g];if(!y.exists())continue;const b=y.data(),_=Number(b.quantity??0),T=Number(b.remaining??_??0),P=Number(b.purchasePrice??0);if(T<=0)continue;const C=Math.min(T,d),S=Number((T-C).toFixed(3));u.update(x,{remaining:S}),A.push({batchId:x.id,qty:C,unitCost:P,lineCost:Number((C*P).toFixed(2))}),d=Number((d-C).toFixed(3))}if(d>0&&!n)throw new Error(`Stock insuficiente para "${t}". Faltan ${d} unidades.`);const h=Number(A.reduce((g,x)=>g+x.lineCost,0).toFixed(2)),m=A.reduce((g,x)=>g+x.qty,0),p=m>0?Number((h/m).toFixed(4)):0;return{allocations:A,avgUnitCost:p,cogsAmount:h}})}const PJ=3,UNe=.5*10**-PJ;function Ma(e){const t=Number(e??0);return Number(t.toFixed(PJ))}function bj(e,t){return Ma((e??0)+(t??0))}function g2(e,t){return Ma(e)+UNe>=Ma(t)}async function QNe(e,t){const r=await jt(At(ke,"inventory_batches")),n=e.trim().toLowerCase();let a=0;for(const s of r.docs){const o=s.data();(o.productName||"").trim().toLowerCase()===n&&o.productId!==t&&(await Lr(Mt(ke,"inventory_batches",s.id),{productId:t}),a++)}return a}function J8({user:e}){const[t,r]=v.useState([]),[n,a]=v.useState([]),[s,o]=v.useState(""),[l,c]=v.useState(ir(new Date,"yyyy-MM-dd")),[u,d]=v.useState(""),[A,f]=v.useState([]),[h,m]=v.useState(0),[p,g]=v.useState(0),[x,y]=v.useState("0"),[b,_]=v.useState(""),[T,P]=v.useState(!1),[C,S]=v.useState({}),I=D=>Math.round(D*100)/100,L=D=>Ma(D).toFixed(3),E=D=>{const M=Number(D.specialPrice||0);return M>0?M:Number(D.price||0)},j=async D=>{if(!D)return 0;const M=Ht(At(ke,"inventory_batches"),Xt("productId","==",D)),G=await jt(M);let O=0;return G.forEach(K=>{const ee=K.data();O=bj(O,Number(ee.remaining||0))}),Ma(O)},R=async D=>{if(!D)return 0;const M=await jt(At(ke,"inventory_batches"));let G=0;return M.forEach(O=>{const K=O.data();(K.productName||"").trim().toLowerCase()===D.trim().toLowerCase()&&(G=bj(G,Number(K.remaining||0)))}),Ma(G)};v.useEffect(()=>{(async()=>{const D=await jt(At(ke,"products")),M=[];D.forEach(G=>{const O=G.data();(O==null?void 0:O.active)!==!1&&M.push({id:G.id,productName:O.name??O.productName??"(sin nombre)",price:Number(O.price??0),measurement:O.measurement??"(sin unidad)",category:O.category??"(sin categora)"})}),r(M)})()},[]),v.useEffect(()=>{(async()=>{const D=await jt(At(ke,"inventory_batches")),M={};D.forEach(G=>{const O=G.data(),K=O.productId,ee=Number(O.remaining||0);K&&(M[K]=bj(M[K]||0,ee))}),Object.keys(M).forEach(G=>M[G]=Ma(M[G])),S(M)})()},[]),v.useEffect(()=>{(async()=>{const D=await jt(At(ke,"users")),M=[];D.forEach(G=>{const O=G.data();M.push({id:G.id,email:O.email??"(sin email)",role:O.role??"USER"})}),a(M)})()},[]);const W=async()=>{if(!s)return;const D=t.find(G=>G.id===s);if(!D)return;if(A.some(G=>G.productId===D.id)){o("");return}const M=await j(D.id);f(G=>[...G,{productId:D.id,productName:D.productName,measurement:D.measurement,price:Number(D.price||0),specialPrice:0,stock:M,qty:0,discount:0}]),o("")},de=D=>{f(M=>M.filter(G=>G.productId!==D))},te=async(D,M)=>{f(G=>G.map(O=>{if(O.productId!==D)return O;const K=(O.measurement||"").toLowerCase()!=="lb",ee=M===""?0:Number(M),ne=K?Math.max(0,Math.round(ee)):Ma(ee);return{...O,qty:ne}}))},le=(D,M)=>{f(G=>G.map(O=>{if(O.productId!==D)return O;const K=(M||"").replace(",","."),ee=K.trim()===""?0:Number(K),ne=Number.isFinite(ee)?Math.max(0,I(ee)):0;return{...O,specialPrice:ne}}))},ce=(D,M)=>{f(G=>G.map(O=>{if(O.productId!==D)return O;const K=Math.max(0,Math.floor(Number(M||0)));return{...O,discount:K}}))},J=v.useMemo(()=>{let D=0;for(const M of A){const G=E(M),O=Number(G||0)*Number(M.qty||0),K=Math.max(0,O-Math.max(0,Number(M.discount||0)));D+=K}return I(D)},[A]);v.useEffect(()=>{m(J)},[J]),v.useEffect(()=>{const D=Number(p)||0,M=Number(h)||0;y((D-M).toFixed(2))},[p,h]);const me=D=>{D.key===","&&(D.preventDefault(),D.target.value+=".")},Ee=async()=>{if(A.length===0)return"Agrega al menos un producto.";for(const D of A){if(!D.qty||D.qty<=0)return`Cantidad invlida para "${D.productName}".`;const M=await j(D.productId);if(!g2(M,D.qty)){const G=await R(D.productName);if(g2(G,0)&&!g2(M,0)){const O=await QNe(D.productName,D.productId),K=await j(D.productId);if(!g2(K,D.qty))return`Stock insuficiente tras corregir ${O} lote(s) para "${D.productName}".`}else return`Stock insuficiente para "${D.productName}". Disponible: ${M}`}}return null},k=async D=>{var G,O;D.preventDefault(),_("");const M=await Ee();if(M){_(" "+M);return}try{P(!0);const K=[];for(const Q of A){const be=Q.qty,{allocations:Z,avgUnitCost:z,cogsAmount:X}=await MNe(ke,Q.productName,be,!1),ve=E(Q),re=Number(ve||0)*Number(be||0),Ne=Math.max(0,Number(Q.discount||0)),Me=Math.max(0,re-Ne);K.push({productId:Q.productId,productName:Q.productName,measurement:Q.measurement,unitPrice:Number(ve||0),regularPrice:Number(Q.price||0),specialPrice:Number(Q.specialPrice||0)>0?Number(Q.specialPrice):null,qty:be,discount:Ne,lineTotal:I(re),lineFinal:I(Me),allocations:Z,avgUnitCost:z,cogsAmount:X})}const ee=K.reduce((Q,be)=>Q+be.lineFinal,0),ne=K.reduce((Q,be)=>Q+Number(be.qty||0),0);await en(At(ke,"salesV2"),{id:LNe(),quantity:ne,amount:ee,amountCharged:ee,amountReceived:Number(p)||0,change:x,clientName:u.trim(),timestamp:zt.now(),date:l,userEmail:((G=n[0])==null?void 0:G.email)??"sin usuario",vendor:((O=n[0])==null?void 0:O.role)??"sin usuario",status:"FLOTANTE",items:K,itemsTotal:ee}),_(" Venta registrada y asignada a inventario (FIFO)."),f([]),o(""),m(0),g(0),y("0"),d(""),c(ir(new Date,"yyyy-MM-dd"))}catch(K){console.error(K),_(` ${(K==null?void 0:K.message)||"Error al registrar la venta."}`)}finally{P(!1)}},F=v.useMemo(()=>new Set(A.map(D=>D.productId)),[A]),V=v.useMemo(()=>t.filter(D=>(C[D.id]||0)>0),[t,C]);return i.jsxs("div",{className:"relative",children:[i.jsxs("form",{onSubmit:k,className:`w-full mx-auto bg-white rounded-2xl shadow-2xl\r
                 p-4 sm:p-6 md:p-8\r
                 max-w-5xl space-y-4`,children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-blue-700 whitespace-nowrap",children:"Registrar venta (Pollo)"})}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Producto | Precio por Libra/Unidad"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("select",{className:"flex-1 border border-gray-300 p-2 rounded-2xl shadow-2xl focus:ring-2 focus:ring-blue-400",value:s,onChange:D=>o(D.target.value),children:[i.jsx("option",{value:"",disabled:!0,children:"Selecciona un producto"}),V.map(D=>i.jsxs("option",{value:D.id,disabled:F.has(D.id),title:F.has(D.id)?"Ya est en la lista":`Disponible: ${L(C[D.id]||0)}`,children:[D.productName,"  ",D.measurement,"  C$ ",D.price," (disp:"," ",L(C[D.id]||0),")"]},D.id))]}),i.jsx("button",{type:"button",onClick:W,disabled:!s||F.has(s),className:"px-3 py-2 rounded-2xl shadow-2xl bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:"Agregar"})]})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Fecha de la venta"}),i.jsx("input",{type:"date",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl focus:ring-2 focus:ring-blue-400",value:l,onChange:D=>c(D.target.value)})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cliente"}),i.jsx("input",{className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:u,onChange:D=>d(D.target.value),placeholder:"Opcional"})]})]}),i.jsx("div",{className:"rounded border overflow-x-auto shadow-2xl",children:i.jsxs("table",{className:"min-w-full text-sm r",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"text-center",children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Producto"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio especial"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Existencias"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cantidad"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descuento"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:""})]})}),i.jsx("tbody",{children:A.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Agrega productos al carrito."})}):A.map(D=>{const M=E(D),G=Number(M||0)*Number(D.qty||0),O=Math.max(0,G-Math.max(0,Number(D.discount||0))),K=(D.measurement||"").toLowerCase()!=="lb",ee=Ma(Number(D.stock)-Number(D.qty||0));return i.jsxs("tr",{className:"text-center",children:[i.jsxs("td",{className:"p-2 border whitespace-nowrap",children:[D.productName,"  ",D.measurement]}),i.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",I(D.price).toFixed(2)]}),i.jsxs("td",{className:"p-2 border",children:[i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:D.specialPrice===0?"":D.specialPrice,onKeyDown:me,onChange:ne=>le(D.productId,ne.target.value),placeholder:"",title:"Precio especial (si se deja vaco, se usa el precio normal)"}),i.jsxs("div",{className:"text-[11px] text-gray-500 mt-1",children:["Aplicado: C$ ",I(M).toFixed(2)]})]}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:ee.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",step:K?1:.01,inputMode:K?"numeric":"decimal",className:"w-28 border p-1 rounded text-right",value:D.qty===0?"":D.qty,onKeyDown:me,onChange:ne=>te(D.productId,ne.target.value),placeholder:"0",title:"Cantidad"})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",step:1,min:0,className:"w-24 border p-1 rounded text-right",value:D.discount===0?"":D.discount,onChange:ne=>ce(D.productId,ne.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento (entero C$)"})}),i.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",I(O).toFixed(2)]}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 text-red-600 hover:bg-red-200",onClick:()=>de(D.productId),title:"Quitar",children:""})})]},D.productId)})})]})}),i.jsxs("div",{className:"space-y-1 ",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 ",children:" Monto total"}),i.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl bg-gray-100",value:`C$ ${h.toFixed(2)}`,readOnly:!0,title:"Suma de (precio aplicado  cantidad  descuento) de cada producto."})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-x-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Monto recibido"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:p===0?"":p,onChange:D=>g(Number(D.target.value||0))})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cambio"}),i.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl bg-gray-100",value:`C$ ${x}`,readOnly:!0})]})]}),i.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white px-4 py-3 sm:py-2 rounded-2xl shadow-2xl font-semibold shadow hover:bg-blue-700 transition disabled:opacity-50",disabled:A.length===0||T,children:T?"Guardando...":"Guardar venta"}),b&&i.jsx("p",{className:`text-sm mt-2 ${b.startsWith("")?"text-green-600":b.startsWith("")?"text-yellow-600":"text-red-600"}`,children:b})]}),T&&i.jsx("div",{className:"fixed inset-0 bg-black/40 z-[60] flex items-center justify-center",children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl border px-6 py-5",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",fill:"none",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("span",{className:"font-semibold",children:"Guardando venta"})]})})})]})}var kJ={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Y8=Ti.createContext&&Ti.createContext(kJ),VNe=["attr","size","title"];function HNe(e,t){if(e==null)return{};var r=$Ne(e,t),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $Ne(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function zC(){return zC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zC.apply(this,arguments)}function Z8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function WC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z8(Object(r),!0).forEach(function(n){KNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KNe(e,t,r){return t=qNe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qNe(e){var t=GNe(e,"string");return typeof t=="symbol"?t:t+""}function GNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TJ(e){return e&&e.map((t,r)=>Ti.createElement(t.tag,WC({key:r},t.attr),TJ(t.child)))}function zNe(e){return t=>Ti.createElement(WNe,zC({attr:WC({},e.attr)},t),TJ(e.child))}function WNe(e){var t=r=>{var{attr:n,size:a,title:s}=e,o=HNe(e,VNe),l=a||r.size||"1em",c;return r.className&&(c=r.className),e.className&&(c=(c?c+" ":"")+e.className),Ti.createElement("svg",zC({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,o,{className:c,style:WC(WC({color:e.color||r.color},r.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&Ti.createElement("title",null,s),e.children)};return Y8!==void 0?Ti.createElement(Y8.Consumer,null,r=>t(r)):t(kJ)}function XNe(e){return zNe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(e)}function bu({onClick:e,loading:t,className:r=""}){return i.jsxs("button",{onClick:e,disabled:t,className:`flex items-center gap-2 px-3 py-1.5 rounded-2xl  border 
        bg-white hover:bg-gray-100 text-sm font-medium shadow-2xl
        disabled:opacity-50 disabled:cursor-not-allowed ${r}`,title:"Refrescar datos",children:[i.jsx(XNe,{className:`w-4 h-4 ${t?"animate-spin text-blue-500":""}`}),t?"Actualizando...":"Refrescar"]})}const ei=e=>`C$ ${(Number(e)||0).toFixed(2)}`;function wj(e="LOT"){return`${e}-${Date.now()}-${Math.random().toString(16).slice(2)}`}function JNe({role:e="",sellerCandyId:t="",currentUserEmail:r}){const[n,a]=v.useState([]),[s,o]=v.useState([]),[l,c]=v.useState(!0),[u,d]=v.useState(""),{refreshKey:A,refresh:f}=Pc(),h=e==="admin",[m,p]=v.useState(ir(gu(new Date),"yyyy-MM-dd")),[g,x]=v.useState(ir(pu(new Date),"yyyy-MM-dd")),[y,b]=v.useState(""),[_,T]=v.useState(!1),[P,C]=v.useState(""),[S,I]=v.useState(ir(new Date,"yyyy-MM-dd")),[L,E]=v.useState("lb"),[j,R]=v.useState(""),[W,de]=v.useState(0),[te,le]=v.useState(0),[ce,J]=v.useState(0),[me,Ee]=v.useState([]),[k,F]=v.useState(null),[V,D]=v.useState([]),[M,G]=v.useState(!1),[O,K]=v.useState(null),[ee,ne]=v.useState(!1),[Q,be]=v.useState(null),Z=ue=>{const Ge=(ue||"").toLowerCase();return/(^|\s)(lb|lbs|libra|libras)(\s|$)/.test(Ge)||Ge==="lb"};v.useEffect(()=>{(async()=>{c(!0),d("");const ue=await jt(At(ke,"products")),Ge=[];ue.forEach(rt=>{const Qe=rt.data();Qe.active===!0&&Ge.push({id:rt.id,name:Qe.name??Qe.productName??"(sin nombre)",category:Qe.category??"(sin categora)",measurement:Qe.measurement??"lb",price:Number(Qe.price??0)})}),a(Ge);const Je=Ht(At(ke,"inventory_batches"),Ur("date","desc")),ht=await jt(Je),Ue=[];ht.forEach(rt=>{const Qe=rt.data(),Pe=Ma(Number(Qe.quantity||0)),ze=Number(Qe.purchasePrice||0),it=Number(Qe.salePrice||0),Bt=Number((Pe*ze).toFixed(2)),ut=Number((Pe*it).toFixed(2));Ue.push({id:rt.id,productId:Qe.productId,productName:Qe.productName,category:Qe.category,unit:Qe.unit,quantity:Pe,remaining:Ma(Number(Qe.remaining||0)),purchasePrice:ze,salePrice:it,invoiceTotal:Qe.invoiceTotal!=null?Number(Qe.invoiceTotal):Bt,expectedTotal:Qe.expectedTotal!=null?Number(Qe.expectedTotal):ut,date:Qe.date,createdAt:Qe.createdAt,status:Qe.status,notes:Qe.notes,paidAmount:Number(Qe.paidAmount||0),paidAt:Qe.paidAt,batchGroupId:Qe.batchGroupId,orderName:Qe.orderName})}),o(Ue),c(!1)})()},[A]);const z=v.useMemo(()=>s.filter(ue=>!(m&&ue.date<m||g&&ue.date>g||y&&ue.productId!==y)),[s,m,g,y]),X=v.useMemo(()=>{const ue=z.reduce((ze,it)=>ze+Number(it.invoiceTotal||0),0),Ge=z.reduce((ze,it)=>ze+Number(it.expectedTotal||0),0);let Je=0,ht=0,Ue=0,rt=0;for(const ze of z)Z(ze.unit)?(Je+=ze.quantity,ht+=ze.remaining):(Ue+=ze.quantity,rt+=ze.remaining);const Qe=z.reduce((ze,it)=>ze+it.quantity,0),Pe=z.reduce((ze,it)=>ze+it.remaining,0);return{lbsIng:Je,lbsRem:ht,udsIng:Ue,udsRem:rt,qty:Qe,rem:Pe,totalFacturado:ue,totalEsperado:Ge}},[z]),ve=v.useMemo(()=>{var Je,ht;const ue=new Map;for(const Ue of z){const rt=Ue.batchGroupId&&String(Ue.batchGroupId).trim()||Ue.id;ue.has(rt)||ue.set(rt,[]),ue.get(rt).push(Ue)}const Ge=[];for(const[Ue,rt]of ue.entries()){const Qe=[...rt].sort((gt,Ce)=>{var Pt,Lt;const et=((Pt=gt.createdAt)==null?void 0:Pt.seconds)??0;return(((Lt=Ce.createdAt)==null?void 0:Lt.seconds)??0)-et}),Pe=((Je=Qe[0])==null?void 0:Je.date)||"",ze=String(((ht=Qe[0])==null?void 0:ht.orderName)||"").trim()||`Pedido ${Pe||""}`.trim()||"Pedido",it=new Set(Qe.map(gt=>String(gt.category||"").trim()).filter(Boolean)),Bt=it.size===1?Array.from(it)[0].toUpperCase():"MIXTO",ut=Qe.some(gt=>gt.status==="PENDIENTE")?"PENDIENTE":"PAGADO",It=Ma(Qe.reduce((gt,Ce)=>gt+(Z(Ce.unit)?Number(Ce.quantity||0):0),0)),$t=Ma(Qe.reduce((gt,Ce)=>gt+(Z(Ce.unit)?Number(Ce.remaining||0):0),0)),hr=Number(Qe.reduce((gt,Ce)=>gt+Number(Ce.invoiceTotal||0),0).toFixed(2)),_e=Number(Qe.reduce((gt,Ce)=>gt+Number(Ce.expectedTotal||0),0).toFixed(2)),dt=Number((_e-hr).toFixed(2));Ge.push({groupId:Ue,orderName:ze,date:Pe,typeLabel:Bt,status:ut,lbsIn:It,lbsRem:$t,totalFacturado:hr,totalEsperado:_e,utilidadBruta:dt,items:Qe})}return Ge.sort((Ue,rt)=>Ue.date===rt.date?Ue.groupId<rt.groupId?1:-1:Ue.date<rt.date?1:-1),Ge},[z]),re=v.useMemo(()=>{const ue=String(L||"").toLowerCase().trim();return n.filter(Je=>String(Je.measurement||"").toLowerCase().trim()===ue).sort((Je,ht)=>Je.name.localeCompare(ht.name,"es"))},[n,L]);v.useEffect(()=>{const ue=n.find(Ge=>Ge.id===j);ue&&J(Number(ue.price||0))},[j,n,A]);const Ne=()=>{d("");const ue=n.find(Pe=>Pe.id===j);if(!ue)return d("Selecciona un producto.");if(W<=0||te<=0)return d("Completa libras a ingresar y precio proveedor.");const Ge=Ma(W),Je=ue.measurement,ht=Number((Ge*Number(te||0)).toFixed(2)),Ue=Number((Ge*Number(ce||0)).toFixed(2)),rt=Number((Ue-ht).toFixed(2)),Qe=me.findIndex(Pe=>Pe.productId===ue.id);Qe>=0?Ee(Pe=>Pe.map((ze,it)=>it!==Qe?ze:{...ze,quantity:Ge,remaining:Ge,purchasePrice:Number(te||0),salePrice:Number(ce||0),invoiceTotal:ht,expectedTotal:Ue,utilidadBruta:rt})):Ee(Pe=>[...Pe,{tempId:wj("IT"),productId:ue.id,productName:ue.name,category:ue.category,unit:Je,quantity:Ge,remaining:Ge,purchasePrice:Number(te||0),salePrice:Number(ce||0),invoiceTotal:ht,expectedTotal:Ue,utilidadBruta:rt}]),R(""),de(0),le(0),J(0)},Me=ue=>{Ee(Ge=>Ge.filter(Je=>Je.tempId!==ue))},Ve=(ue,Ge,Je)=>{Ee(ht=>ht.map(Ue=>{if(Ue.tempId!==ue)return Ue;const rt={...Ue};return Ge==="quantity"&&(rt.quantity=Ma(Math.max(0,Je)),k||(rt.remaining=rt.quantity)),Ge==="purchasePrice"&&(rt.purchasePrice=Math.max(0,Number(Je||0))),Ge==="salePrice"&&(rt.salePrice=Math.max(0,Number(Je||0))),rt.invoiceTotal=Number((rt.quantity*rt.purchasePrice).toFixed(2)),rt.expectedTotal=Number((rt.quantity*rt.salePrice).toFixed(2)),rt.utilidadBruta=Number((rt.expectedTotal-rt.invoiceTotal).toFixed(2)),rt}))},nt=v.useMemo(()=>{const ue=Ma(me.reduce((rt,Qe)=>rt+(Z(Qe.unit)?Number(Qe.quantity||0):0),0)),Ge=Ma(me.reduce((rt,Qe)=>rt+(Z(Qe.unit)?Number(Qe.remaining||0):0),0)),Je=Number(me.reduce((rt,Qe)=>rt+Number(Qe.invoiceTotal||0),0).toFixed(2)),ht=Number(me.reduce((rt,Qe)=>rt+Number(Qe.expectedTotal||0),0).toFixed(2)),Ue=Number((ht-Je).toFixed(2));return{lbsIn:ue,lbsRem:Ge,totalFacturado:Je,totalEsperado:ht,utilidadBruta:Ue}},[me]),st=()=>{F(null),D([]),C(""),I(ir(new Date,"yyyy-MM-dd")),E("lb"),R(""),de(0),le(0),J(0),Ee([])},lt=async()=>{if(d(""),!me.length)return d("Agrega al menos un producto al pedido.");const ue=S||ir(new Date,"yyyy-MM-dd"),Ge=String(P||"").trim()||`Pedido ${ue}`,Je=k||wj("BATCH");try{if(!k){for(const Qe of me)await z8({productId:Qe.productId,productName:Qe.productName,category:Qe.category,unit:Qe.unit,quantity:Ma(Qe.quantity),purchasePrice:Number(Qe.purchasePrice||0),salePrice:Number(Qe.salePrice||0),invoiceTotal:Number(Qe.invoiceTotal||0),expectedTotal:Number(Qe.expectedTotal||0),date:ue,notes:"",batchGroupId:Je,orderName:Ge});d(" Pedido creado"),T(!1),st(),f();return}const ht=V,Ue=new Map;for(const Qe of ht)Ue.set(Qe.productId,Qe);const rt=new Set(me.map(Qe=>Qe.productId));for(const Qe of me){const Pe=Ue.get(Qe.productId),ze=Ma(Qe.quantity);if(Pe){const it=Ma(Pe.quantity-Pe.remaining),Bt=Math.max(0,Ma(ze-it));await Lr(Mt(ke,"inventory_batches",Pe.id),{date:ue,orderName:Ge,batchGroupId:Je,quantity:ze,purchasePrice:Number(Qe.purchasePrice||0),salePrice:Number(Qe.salePrice||0),invoiceTotal:Number(Qe.invoiceTotal||0),expectedTotal:Number(Qe.expectedTotal||0),remaining:Bt})}else await z8({productId:Qe.productId,productName:Qe.productName,category:Qe.category,unit:Qe.unit,quantity:ze,purchasePrice:Number(Qe.purchasePrice||0),salePrice:Number(Qe.salePrice||0),invoiceTotal:Number(Qe.invoiceTotal||0),expectedTotal:Number(Qe.expectedTotal||0),date:ue,notes:"",batchGroupId:Je,orderName:Ge})}for(const Qe of ht)rt.has(Qe.productId)||await fn(Mt(ke,"inventory_batches",Qe.id));d(" Pedido actualizado"),T(!1),st(),f()}catch(ht){console.error(ht),d(" Error al guardar pedido")}},bt=ue=>{K(ue),G(!0)},ot=ue=>{F(ue.groupId),D(ue.items),C(ue.orderName),I(ue.date||ir(new Date,"yyyy-MM-dd"));const Ge=ue.items.map(Je=>{const ht=Number(Je.invoiceTotal||0),Ue=Number(Je.expectedTotal||0);return{tempId:wj("IT"),productId:Je.productId,productName:Je.productName,category:Je.category,unit:Je.unit,quantity:Ma(Je.quantity),remaining:Ma(Je.remaining),purchasePrice:Number(Je.purchasePrice||0),salePrice:Number(Je.salePrice||0),invoiceTotal:ht,expectedTotal:Ue,utilidadBruta:Number((Ue-ht).toFixed(2))}});Ee(Ge),T(!0)},Le=async ue=>{if(confirm(`Eliminar el pedido "${ue.orderName}" del ${ue.date}?`))try{for(const Je of ue.items)await fn(Mt(ke,"inventory_batches",Je.id));d(" Pedido eliminado"),f()}catch(Je){console.error(Je),d(" Error al eliminar pedido")}},Ze=ue=>{be(ue),ne(!0)},ye=async()=>{if(Q)try{for(const ue of Q.items){if(ue.status!=="PENDIENTE")continue;await jJ(ue.id),await Lr(Mt(ke,"inventory_batches",ue.id),{remaining:0});const Ge={date:ue.date,productName:ue.productName,quantity:ue.quantity,amount:Number((ue.expectedTotal??ue.salePrice*ue.quantity).toFixed(2)),allocations:[{batchId:ue.id,qty:ue.quantity,unitCost:ue.purchasePrice,lineCost:Number((ue.purchasePrice*ue.quantity).toFixed(2))}],avgUnitCost:ue.purchasePrice,measurement:ue.unit,createdAt:zt.now(),autoGeneratedFromInventory:!0};await en(At(ke,"salesV2"),Ge)}d(" Pedido pagado y reflejado como venta"),f()}catch(ue){console.error(ue),d(" Error al pagar pedido")}finally{ne(!1),be(null)}},xe=()=>{ne(!1),be(null)};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Inventario"}),h&&i.jsx("button",{className:"px-3 py-2 rounded-2xl bg-blue-600 text-white hover:bg-blue-700",type:"button",onClick:()=>{st(),T(!0)},children:"Crear Lote"})]}),i.jsxs("div",{className:"bg-white p-3 rounded shadow-2xl border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:m,onChange:ue=>p(ue.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:g,onChange:ue=>x(ue.target.value)})]}),i.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[i.jsx("label",{className:"font-semibold",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:y,onChange:ue=>b(ue.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),n.map(ue=>i.jsxs("option",{value:ue.id,children:[ue.name,"  ",ue.category]},ue.id))]})]}),i.jsx("button",{className:"px-3 rounded-2xl shadow-2xl py-1 bg-gray-200 hover:bg-gray-300",onClick:()=>{p(""),x(""),b("")},children:"Quitar filtro"}),i.jsx("div",{className:"ml-auto",children:i.jsx(bu,{onClick:()=>f(),loading:l})})]}),i.jsx("div",{className:"bg-gray-50 p-3 rounded-2xl shadow-2xl border mb-3 text-base",children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-y-2 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",X.lbsIng.toFixed(3)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",X.lbsRem.toFixed(3)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",X.udsIng.toFixed(3)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",X.udsRem.toFixed(3)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," C$"," ",X.totalEsperado.toFixed(2)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total facturado:"})," C$"," ",X.totalFacturado.toFixed(2)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," C$"," ",(X.totalEsperado-X.totalFacturado).toFixed(2)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes (por filtro):"})," ",z.length.toLocaleString()]})]})}),i.jsx("div",{className:"md:hidden space-y-3",children:l?i.jsx("div",{className:"bg-white border rounded-2xl p-4 shadow",children:"Cargando"}):ve.length===0?i.jsx("div",{className:"bg-white border rounded-2xl p-4 shadow text-center",children:"Sin lotes"}):ve.map(ue=>i.jsxs("div",{className:"bg-white border rounded-2xl p-4 shadow",children:[i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-semibold text-lg",children:ue.date}),i.jsx("div",{className:"text-xs text-gray-500 truncate",children:ue.orderName})]}),i.jsx("span",{className:`px-2 py-1 rounded text-xs shrink-0 ${ue.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:ue.status})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Tipo"}),i.jsx("div",{className:"font-semibold",children:ue.typeLabel})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Utilidad bruta"}),i.jsx("div",{className:"font-semibold",children:ei(ue.utilidadBruta)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Lbs ingresadas"}),i.jsx("div",{className:"font-semibold",children:ue.lbsIn.toFixed(3)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Lbs restantes"}),i.jsx("div",{className:"font-semibold",children:ue.lbsRem.toFixed(3)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 col-span-2",children:[i.jsxs("div",{className:"flex justify-between text-[11px] text-gray-500",children:[i.jsx("span",{children:"Total facturado"}),i.jsx("span",{children:"Total esperado"})]}),i.jsxs("div",{className:"flex justify-between font-semibold",children:[i.jsx("span",{children:ei(ue.totalFacturado)}),i.jsx("span",{children:ei(ue.totalEsperado)})]})]})]}),i.jsxs("div",{className:"mt-3 flex gap-2",children:[i.jsx("button",{className:"flex-1 px-3 py-2 rounded-xl bg-gray-100 hover:bg-gray-200 text-sm",onClick:()=>bt(ue),children:"Ver detalle"}),h?i.jsxs(i.Fragment,{children:[ue.status==="PENDIENTE"&&i.jsx("button",{className:"px-3 py-2 rounded-xl bg-green-600 hover:bg-green-700 text-white text-sm",onClick:()=>Ze(ue),children:"Pagar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl bg-yellow-600 hover:bg-yellow-700 text-white text-sm",onClick:()=>ot(ue),children:"Editar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl bg-red-600 hover:bg-red-700 text-white text-sm",onClick:()=>Le(ue),children:"Borrar"})]}):null]})]},ue.groupId))}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1100px] w-full text-sm shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Libras ingresadas"}),i.jsx("th",{className:"p-2 border",children:"Libras restantes"}),i.jsx("th",{className:"p-2 border",children:"Total Facturado"}),i.jsx("th",{className:"p-2 border",children:"Total esperado"}),i.jsx("th",{className:"p-2 border",children:"Utilidad bruta"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:l?i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando"})}):ve.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin lotes"})}):ve.map(ue=>i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsxs("td",{className:"p-2 border",children:[i.jsx("button",{className:"underline text-blue-700 hover:text-blue-900",onClick:()=>bt(ue),title:ue.orderName,children:ue.date}),i.jsx("div",{className:"text-[11px] text-gray-500",children:ue.orderName})]}),i.jsx("td",{className:"p-2 border",children:ue.typeLabel}),i.jsx("td",{className:"p-2 border",children:ue.lbsIn.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:ue.lbsRem.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:ei(ue.totalFacturado)}),i.jsx("td",{className:"p-2 border",children:ei(ue.totalEsperado)}),i.jsx("td",{className:"p-2 border",children:ei(ue.utilidadBruta)}),i.jsx("td",{className:"p-2 border",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ue.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:ue.status})}),i.jsx("td",{className:"p-2 border",children:h?i.jsxs("div",{className:"flex gap-2 justify-center",children:[ue.status==="PENDIENTE"&&i.jsx("button",{onClick:()=>Ze(ue),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Pagar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>ot(ue),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Le(ue),children:"Borrar"})]}):i.jsx("span",{className:"text-xs text-gray-500",children:"Solo vista"})})]},ue.groupId))})]})}),u&&i.jsx("p",{className:"mt-2 text-sm",children:u}),_&&nu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>T(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-6xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:k?"Editar pedido":"Crear pedido"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>T(!1),type:"button",children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre de pedido"}),i.jsx("input",{className:"w-full border p-2 rounded",value:P,onChange:ue=>C(ue.target.value),placeholder:"Ej: Pedido Pollo - Semana 1"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de lote"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:S,onChange:ue=>I(ue.target.value)})]})]}),i.jsxs("div",{className:"border rounded p-3 bg-gray-50 mb-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3 items-end",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Unidad"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:L,onChange:ue=>{E(ue.target.value),R(""),de(0),le(0),J(0)},children:[i.jsx("option",{value:"lb",children:"lb"}),i.jsx("option",{value:"unidad",children:"unidad"}),i.jsx("option",{value:"kg",children:"kg"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto (solo activos)"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:j,onChange:ue=>R(ue.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un producto"}),re.map(ue=>i.jsxs("option",{value:ue.id,children:[ue.name,"  ",ue.category,"  ",ue.measurement]},ue.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Libras a ingresar"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:W===0?"":W,onChange:ue=>{const Ge=ue.target.value.replace(",","."),Je=parseFloat(Ge),ht=Number.isFinite(Je)?parseFloat(Je.toFixed(3)):0;de(Math.max(0,ht))},disabled:!j})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio proveedor"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:te===0?"":te,onChange:ue=>{const Ge=ue.target.value.replace(",","."),Je=parseFloat(Ge),ht=Number.isFinite(Je)?parseFloat(Je.toFixed(2)):0;le(Math.max(0,ht))},disabled:!j})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio venta (editable)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:ce===0?"":ce,onChange:ue=>{const Ge=ue.target.value.replace(",","."),Je=parseFloat(Ge),ht=Number.isFinite(Je)?parseFloat(Je.toFixed(2)):0;J(Math.max(0,ht))},disabled:!j})]})]}),i.jsx("div",{className:"flex justify-end mt-3",children:i.jsx("button",{type:"button",onClick:Ne,className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Agregar producto al pedido"})})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1200px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Libras ingresadas"}),i.jsx("th",{className:"p-2 border",children:"Libras restantes"}),i.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border",children:"Precio venta"}),i.jsx("th",{className:"p-2 border",children:"Total facturado"}),i.jsx("th",{className:"p-2 border",children:"Total esperado"}),i.jsx("th",{className:"p-2 border",children:"Utilidad bruta"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:me.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"p-4 text-center text-gray-500",children:"No hay productos agregados."})}):me.map(ue=>i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsxs("td",{className:"p-2 border text-left",children:[ue.productName,i.jsxs("div",{className:"text-[11px] text-gray-500",children:[ue.category,"  ",ue.unit]})]}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:ue.quantity,onChange:Ge=>{const Je=Ge.target.value.replace(",","."),ht=parseFloat(Je),Ue=Number.isFinite(ht)?parseFloat(ht.toFixed(3)):0;Ve(ue.tempId,"quantity",Ue)}})}),i.jsx("td",{className:"p-2 border",children:Number(ue.remaining||0).toFixed(3)}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:ue.purchasePrice,onChange:Ge=>{const Je=Ge.target.value.replace(",","."),ht=parseFloat(Je),Ue=Number.isFinite(ht)?parseFloat(ht.toFixed(2)):0;Ve(ue.tempId,"purchasePrice",Ue)}})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:ue.salePrice,onChange:Ge=>{const Je=Ge.target.value.replace(",","."),ht=parseFloat(Je),Ue=Number.isFinite(ht)?parseFloat(ht.toFixed(2)):0;Ve(ue.tempId,"salePrice",Ue)}})}),i.jsx("td",{className:"p-2 border",children:ei(ue.invoiceTotal)}),i.jsx("td",{className:"p-2 border",children:ei(ue.expectedTotal)}),i.jsx("td",{className:"p-2 border",children:ei(ue.utilidadBruta)}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Me(ue.tempId),children:"Quitar"})})]},ue.tempId))})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Libras ingresadas"}),i.jsx("div",{className:"text-lg font-semibold",children:nt.lbsIn.toFixed(3)}),i.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Libras restantes"}),i.jsx("div",{className:"text-lg font-semibold",children:nt.lbsRem.toFixed(3)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado"}),i.jsx("div",{className:"text-lg font-semibold",children:ei(nt.totalFacturado)}),i.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Total esperado"}),i.jsx("div",{className:"text-lg font-semibold",children:ei(nt.totalEsperado)}),i.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Utilidad bruta"}),i.jsx("div",{className:"text-lg font-semibold",children:ei(nt.utilidadBruta)})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>T(!1),children:"Cancelar"}),i.jsx("button",{type:"button",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:lt,disabled:me.length===0,children:k?"Editar pedido":"Crear pedido"})]})]})]}),document.body),M&&O&&nu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[75] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>{G(!1),K(null)}}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-6xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold",children:"Detalle del pedido"}),i.jsxs("div",{className:"text-sm text-gray-600",children:[i.jsx("strong",{children:O.orderName})," "," ",O.date]})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{G(!1),K(null)},type:"button",children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1100px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Unidad"}),i.jsx("th",{className:"p-2 border",children:"Ingresado"}),i.jsx("th",{className:"p-2 border",children:"Restantes"}),i.jsx("th",{className:"p-2 border",children:"Precio Compra"}),i.jsx("th",{className:"p-2 border",children:"Precio Venta"}),i.jsx("th",{className:"p-2 border",children:"Total factura"}),i.jsx("th",{className:"p-2 border",children:"Total esperado"}),i.jsx("th",{className:"p-2 border",children:"Utilidad"}),i.jsx("th",{className:"p-2 border",children:"Estado"})]})}),i.jsx("tbody",{children:O.items.map(ue=>{const Ge=Number(ue.invoiceTotal||0),Je=Number(ue.expectedTotal||0);return i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border text-left",children:ue.productName}),i.jsx("td",{className:"p-2 border",children:(ue.unit||"").toUpperCase()}),i.jsx("td",{className:"p-2 border",children:ue.quantity.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:ue.remaining.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:ei(ue.purchasePrice)}),i.jsx("td",{className:"p-2 border",children:ei(ue.salePrice)}),i.jsx("td",{className:"p-2 border",children:ei(Ge)}),i.jsx("td",{className:"p-2 border",children:ei(Je)}),i.jsx("td",{className:"p-2 border",children:ei(Je-Ge)}),i.jsx("td",{className:"p-2 border",children:ue.status})]},ue.id)})})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mt-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Libras ingresadas"}),i.jsx("div",{className:"text-lg font-semibold",children:O.lbsIn.toFixed(3)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Libras restantes"}),i.jsx("div",{className:"text-lg font-semibold",children:O.lbsRem.toFixed(3)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad bruta"}),i.jsx("div",{className:"text-lg font-semibold",children:ei(O.utilidadBruta)})]})]})]})]}),document.body),ee&&Q&&nu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[80] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:xe}),i.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl border w-[90%] max-w-md p-6",children:[i.jsx("h3",{className:"text-lg font-bold mb-3 text-center",children:"Confirmar pago de inventario"}),i.jsxs("p",{className:"text-sm text-gray-700 mb-5 text-center",children:["Seguro que quieres pagar este pedido?",i.jsx("br",{}),i.jsx("strong",{children:Q.orderName})," "," ",Q.date,i.jsx("br",{}),"Ya no habrn libras disponibles al pagar este inventario."]}),i.jsxs("div",{className:"flex justify-center gap-4",children:[i.jsx("button",{onClick:ye,className:"px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700",children:"Confirmar"}),i.jsx("button",{onClick:xe,className:"px-4 py-2 rounded-lg bg-gray-300 hover:bg-gray-400",children:"Cancelar"})]})]})]}),document.body)]})}const Ed=e=>`C$${(Number(e)||0).toFixed(2)}`;function YNe(){const e=dge(new Date),[t,r]=v.useState(ir(e,"yyyy-MM")),[n,a]=v.useState([]),[s,o]=v.useState(!1),[l,c]=v.useState(""),u=v.useRef(null),d=v.useMemo(()=>{const[g,x]=t.split("-").map(_=>parseInt(_,10)),y=ir(gu(new Date(g,x-1,1)),"yyyy-MM-dd"),b=ir(pu(new Date(g,x-1,1)),"yyyy-MM-dd");return{from:y,to:b}},[t]),A=async()=>{o(!0);try{const g=await SNe(d.from,d.to),x=[];for(const y of g){const b=Mt(ke,"inventory_batches",y.batchId),_=await Qi(b);if(!_.exists())continue;const T=_.data();x.push({batchId:y.batchId,batchDate:y.batchDate,productName:y.productName,soldQty:Number(y.quantity||0),soldAmount:Number(y.amountCharged||0),status:T.status??"PENDIENTE",purchasePrice:Number(T.purchasePrice||0),salePrice:Number(T.salePrice||0),supplier:T.supplier})}a(x)}catch(g){console.error(g),c(" Error al cargar liquidaciones")}finally{o(!1)}};v.useEffect(()=>{A()},[t]);const f=async g=>{confirm("Marcar este lote como PAGADO?")&&(await jJ(g),a(y=>y.map(b=>b.batchId===g?{...b,status:"PAGADO"}:b)))},h=v.useMemo(()=>{const g=n.reduce((_,T)=>_+T.soldQty,0),x=n.reduce((_,T)=>_+T.soldAmount,0),y=n.reduce((_,T)=>_+T.soldQty*T.purchasePrice,0),b=x-y;return{q:g,amt:x,cogs:y,profit:b}},[n]),m=v.useMemo(()=>{const g=new Map;for(const x of n){const y=x.productName||"(sin nombre)";g.has(y)||g.set(y,{productName:y,qty:0,revenue:0,cogs:0,profit:0});const b=g.get(y);b.qty+=x.soldQty,b.revenue+=x.soldAmount;const _=x.soldQty*x.purchasePrice;b.cogs+=_,b.profit=b.revenue-b.cogs}return Array.from(g.values()).sort((x,y)=>x.productName.localeCompare(y.productName))},[n]),p=async()=>{if(!u.current)return;const g=u.current;g.classList.add("force-pdf-colors");try{const[{default:x},{jsPDF:y}]=await Promise.all([Yd(()=>Promise.resolve().then(()=>XF),void 0),Yd(()=>Promise.resolve().then(()=>Ck),void 0)]),_=(await x(g,{backgroundColor:"#ffffff",scale:2})).toDataURL("image/png"),T=new y("p","mm","a4"),P=190,C=T.getImageProperties(_),S=P,I=C.height*S/C.width;T.addImage(_,"PNG",10,10,S,I),T.save(`liquidaciones_${t}.pdf`)}catch(x){console.error(x),alert("No se pudo generar el PDF")}finally{g.classList.remove("force-pdf-colors")}};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Liquidaciones por lote"}),i.jsx("button",{onClick:p,className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:"Descargar PDF"})]}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-center gap-3",children:[i.jsx("label",{className:"text-sm font-semibold",children:"Mes:"}),i.jsx("input",{type:"month",className:"border rounded px-2 py-1",value:t,onChange:g=>r(g.target.value)}),i.jsx("button",{onClick:A,className:"bg-gray-800 text-white px-3 py-1 rounded",children:"Aplicar"})]}),i.jsxs("div",{ref:u,children:[i.jsx("div",{className:"bg-white p-3 rounded shadow border mb-3 text-sm",children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total vendido (cantidad):"})," ",h.q]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Monto vendido:"})," ",Ed(h.amt)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Costo (COGS):"})," ",Ed(h.cogs)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Utilidad:"})," ",Ed(h.profit)]})]})}),i.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto mb-6",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Lote (fecha)"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Proveedor"}),i.jsx("th",{className:"p-2 border",children:"Vendido"}),i.jsx("th",{className:"p-2 border",children:"Monto vendido"}),i.jsx("th",{className:"p-2 border",children:"COGS"}),i.jsx("th",{className:"p-2 border",children:"Utilidad"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:s?i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando"})}):n.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin datos"})}):n.map(g=>{const x=g.soldQty*g.purchasePrice,y=g.soldAmount-x;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:g.batchDate}),i.jsx("td",{className:"p-2 border",children:g.productName}),i.jsx("td",{className:"p-2 border",children:g.supplier||"-"}),i.jsx("td",{className:"p-2 border",children:g.soldQty}),i.jsx("td",{className:"p-2 border",children:Ed(g.soldAmount)}),i.jsx("td",{className:"p-2 border",children:Ed(x)}),i.jsx("td",{className:`p-2 border ${y>=0?"text-green-700":"text-red-700"}`,children:Ed(y)}),i.jsx("td",{className:"p-2 border",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${g.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:g.status})}),i.jsx("td",{className:"p-2 border",children:g.status==="PENDIENTE"&&i.jsx("button",{onClick:()=>f(g.batchId),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Marcar pagado"})})]},g.batchId)})})]})}),i.jsx("h3",{className:"font-semibold mb-2",children:"Utilidad por producto"}),i.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Cantidad vendida"}),i.jsx("th",{className:"p-2 border",children:"Ingreso"}),i.jsx("th",{className:"p-2 border",children:"COGS"}),i.jsx("th",{className:"p-2 border",children:"Utilidad"})]})}),i.jsx("tbody",{children:m.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin datos"})}):m.map(g=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:g.productName}),i.jsx("td",{className:"p-2 border",children:g.qty}),i.jsx("td",{className:"p-2 border",children:Ed(g.revenue)}),i.jsx("td",{className:"p-2 border",children:Ed(g.cogs)}),i.jsx("td",{className:`p-2 border ${g.profit>=0?"text-green-700":"text-red-700"}`,children:Ed(g.profit)})]},g.productName))})]})})]}),l&&i.jsx("p",{className:"mt-2 text-sm",children:l})]})}const bo=e=>`C$${Number(e??0).toFixed(2)}`,ZNe=()=>ir(new Date,"yyyy-MM-dd"),up=e=>Number(e||0).toFixed(3);function eCe(){const[e,t]=v.useState(()=>{const E=new Date,j=new Date(E.getFullYear(),E.getMonth(),1);return ir(j,"yyyy-MM-dd")}),[r,n]=v.useState(ZNe()),[a,s]=v.useState(!0),[o,l]=v.useState([]),[c,u]=v.useState([]),{refreshKey:d,refresh:A}=Pc(),[f,h]=v.useState({}),[m,p]=v.useState({});v.useEffect(()=>{(async()=>{s(!0);const j=Ht(At(ke,"salesV2"),Xt("date",">=",e),Xt("date","<=",r)),R=await jt(j),W=[];R.forEach(ce=>{const J=ce.data(),me=J.date??"";if(Array.isArray(J.items)&&J.items.length>0){J.items.forEach((Ee,k)=>{const F=String(Ee.productName??"(sin nombre)"),V=Number(Ee.qty??0),D=Number(Ee.lineFinal??0)||Math.max(0,Number(Ee.unitPrice||0)*V-Number(Ee.discount||0));W.push({id:`${ce.id}#${k}`,date:me,productName:F,quantity:V,amount:D,allocations:Array.isArray(Ee.allocations)?Ee.allocations:J.allocations,avgUnitCost:Number(Ee.avgUnitCost??J.avgUnitCost??0),measurement:Ee.measurement??J.measurement??""})});return}W.push({id:ce.id,date:me,productName:J.productName??"(sin nombre)",quantity:Number(J.quantity??0),amount:Number(J.amount??J.amountCharged??0),allocations:Array.isArray(J.allocations)?J.allocations:[],avgUnitCost:Number(J.avgUnitCost??0),measurement:J.measurement??""})}),l(W);const de=Ht(At(ke,"expenses"),Xt("date",">=",e),Xt("date","<=",r)),te=await jt(de),le=[];te.forEach(ce=>{const J=ce.data();le.push({id:ce.id,date:J.date??"",category:J.category??"(sin categora)",description:J.description??"",amount:Number(J.amount??0),status:J.status??"PAGADO",createdAt:J.createdAt})}),u(le),s(!1)})()},[e,r,d]);const g=v.useMemo(()=>{const E=o.reduce((te,le)=>te+(le.amount||0),0);let j=0;o.forEach(te=>{var le;(le=te.allocations)!=null&&le.length?j+=te.allocations.reduce((ce,J)=>ce+Number(J.lineCost||0),0):te.avgUnitCost&&te.quantity&&(j+=Number(te.avgUnitCost)*Number(te.quantity))});const R=E-j,W=c.reduce((te,le)=>te+(le.amount||0),0),de=R-W;return{revenue:E,cogsReal:j,grossProfit:R,expensesSum:W,netProfit:de}},[o,c]),x=E=>String(E??"").toLowerCase().trim(),y=E=>Number(E.qty??E.quantity??0),b=E=>["lb","lbs","libra","libras"].includes(x(E)),_=E=>["unidad","unidades","ud","uds","pieza","piezas"].includes(x(E)),T=v.useMemo(()=>o.reduce((E,j)=>b(j.measurement)?E+y(j):E,0),[o]),P=v.useMemo(()=>o.reduce((E,j)=>_(j.measurement)?E+y(j):E,0),[o]),C=v.useMemo(()=>{var j;const E=new Map;for(const R of o){const W=R.productName||"(sin nombre)";E.has(W)||E.set(W,{productName:W,units:0,revenue:0,cogs:0,profit:0,firstDate:R.date||"",lastDate:R.date||""});const de=E.get(W);de.units+=Number(R.quantity||0),de.revenue+=Number(R.amount||0),(!de.firstDate||R.date<(de.firstDate||R.date))&&(de.firstDate=R.date),(!de.lastDate||R.date>(de.lastDate||R.date))&&(de.lastDate=R.date);let te=0;(j=R.allocations)!=null&&j.length?te=R.allocations.reduce((le,ce)=>le+Number(ce.lineCost||0),0):R.avgUnitCost&&(te=Number(R.avgUnitCost)*Number(R.quantity||0)),de.cogs+=te,de.profit=de.revenue-de.cogs}return Array.from(E.values()).sort((R,W)=>R.productName.localeCompare(W.productName))},[o]),S=v.useMemo(()=>[...C].sort((E,j)=>j.units-E.units).slice(0,3).map((E,j)=>({idx:j+1,name:E.productName,units:E.units})),[C]),I=E=>h(j=>({...j,[E]:!j[E]})),L=E=>p(j=>({...j,[E]:!j[E]}));return i.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-4 sm:p-6 rounded-2xl shadow-2xl",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3 gap-2",children:[i.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Dashboard Financiero"}),i.jsx(bu,{onClick:A,loading:a})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-3 py-2 w-full",value:e,onChange:E=>t(E.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-3 py-2 w-full",value:r,onChange:E=>n(E.target.value)})]})]}),a?i.jsx("p",{children:"Cargando"}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(iv,{title:"Ventas",value:bo(g.revenue)}),i.jsx(iv,{title:"Costo",value:bo(g.cogsReal)}),i.jsx(iv,{title:"Ganancia Bruta",value:bo(g.grossProfit),positive:!0}),i.jsx(iv,{title:"Gastos",value:bo(g.expensesSum)}),i.jsx(iv,{title:"Ganancia Neta",value:bo(g.netProfit),positive:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mb-6 rounded-lg shadow-2xl p-3 sm:p-4 bg-gray-50",children:[i.jsx(eQ,{title:"Libras Vendidas",value:up(T)}),i.jsx(eQ,{title:"Unidades Vendidas",value:up(P)}),i.jsx(tCe,{title:"Productos ms vendidos",items:S.map(E=>({key:`${E.idx}`,label:`${E.idx}. ${E.name}`,value:`(${up(E.units)})`}))})]}),i.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),i.jsx("div",{className:"hidden md:block",children:i.jsxs("table",{className:"min-w-full border text-sm mb-6",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Fechas"}),i.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),i.jsx("th",{className:"border p-2",children:"Ingreso"}),i.jsx("th",{className:"border p-2",children:"Costo"}),i.jsx("th",{className:"border p-2",children:"Utilidad"})]})}),i.jsxs("tbody",{children:[C.map(E=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:E.productName}),i.jsx("td",{className:"border p-1",children:E.firstDate&&E.lastDate?E.firstDate===E.lastDate?E.firstDate:`${E.firstDate}  ${E.lastDate}`:""}),i.jsx("td",{className:"border p-1",children:up(E.units)}),i.jsx("td",{className:"border p-1",children:bo(E.revenue)}),i.jsx("td",{className:"border p-1",children:bo(E.cogs)}),i.jsx("td",{className:`border p-1 ${E.profit>=0?"text-green-700":"text-red-700"}`,children:bo(E.profit)})]},E.productName)),C.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Sin datos en el rango seleccionado."})})]})]})}),i.jsx("div",{className:"md:hidden space-y-2 mb-6",children:C.length===0?i.jsx("div",{className:"border rounded-xl p-3 text-sm text-gray-500 bg-gray-50",children:"Sin datos en el rango seleccionado."}):C.map(E=>{const j=!!f[E.productName],R=E.firstDate&&E.lastDate?E.firstDate===E.lastDate?E.firstDate:`${E.firstDate}  ${E.lastDate}`:"";return i.jsxs("div",{className:"border rounded-2xl bg-white shadow-sm overflow-hidden",children:[i.jsxs("button",{type:"button",onClick:()=>I(E.productName),className:"w-full text-left px-3 py-3 flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:E.productName}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Total: ",i.jsx("b",{children:up(E.units)}),"  Utilidad:"," ",i.jsx("b",{className:E.profit>=0?"text-green-700":"text-red-700",children:bo(E.profit)})]})]}),i.jsx("div",{className:"text-gray-500 text-sm pt-0.5",children:j?"":""})]}),j&&i.jsx("div",{className:"px-3 pb-3 text-sm",children:i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx(Fu,{label:"Fechas",value:R}),i.jsx(Fu,{label:"Total",value:up(E.units)}),i.jsx(Fu,{label:"Ingreso",value:bo(E.revenue)}),i.jsx(Fu,{label:"Costo",value:bo(E.cogs)}),i.jsx(Fu,{label:"Utilidad",value:bo(E.profit),valueClass:E.profit>=0?"text-green-700 font-semibold":"text-red-700 font-semibold"})]})})]},E.productName)})}),i.jsx("h3",{className:"font-semibold mb-2",children:"Gastos del periodo"}),i.jsx("div",{className:"hidden md:block",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Categora"}),i.jsx("th",{className:"border p-2",children:"Descripcin"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Estado"})]})}),i.jsxs("tbody",{children:[c.map(E=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:E.date}),i.jsx("td",{className:"border p-1",children:E.category}),i.jsx("td",{className:"border p-1",children:E.description}),i.jsx("td",{className:"border p-1",children:bo(E.amount)}),i.jsx("td",{className:"border p-1",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${E.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:E.status})})]},E.id)),c.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-3 text-center text-gray-500",children:"Sin gastos en el rango seleccionado."})})]})]})}),i.jsx("div",{className:"md:hidden space-y-2",children:c.length===0?i.jsx("div",{className:"border rounded-xl p-3 text-sm text-gray-500 bg-gray-50",children:"Sin gastos en el rango seleccionado."}):c.map(E=>{const j=!!m[E.id],R=E.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700";return i.jsxs("div",{className:"border rounded-2xl bg-white shadow-sm overflow-hidden",children:[i.jsxs("button",{type:"button",onClick:()=>L(E.id),className:"w-full text-left px-3 py-3 flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:E.category}),i.jsx("span",{className:`px-2 py-0.5 rounded text-[11px] ${R}`,children:E.status})]}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[E.date,"  ",i.jsx("b",{children:bo(E.amount)})]})]}),i.jsx("div",{className:"text-gray-500 text-sm pt-0.5",children:j?"":""})]}),j&&i.jsx("div",{className:"px-3 pb-3 text-sm",children:i.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[i.jsx(Fu,{label:"Fecha",value:E.date}),i.jsx(Fu,{label:"Categora",value:E.category}),i.jsx(Fu,{label:"Descripcin",value:E.description||""}),i.jsx(Fu,{label:"Monto",value:bo(E.amount)}),i.jsx(Fu,{label:"Estado",value:E.status||""})]})})]},E.id)})})]})]})}function iv({title:e,value:t,positive:r}){return i.jsxs("div",{className:"border rounded-2xl p-3 bg-white",children:[i.jsx("div",{className:"text-[13px] sm:text-[17px] text-gray-500",children:e}),i.jsx("div",{className:`text-[26px] sm:text-[30px] font-bold ${r?"text-green-700":""}`,children:t})]})}function eQ({title:e,value:t}){return i.jsxs("div",{className:"border rounded-lg p-3 bg-white",children:[i.jsx("div",{className:"text-[13px] sm:text-[17px] text-gray-500",children:e}),i.jsx("div",{className:"text-[18px] sm:text-[20px] font-semibold",children:t})]})}function tCe({title:e,items:t}){return i.jsxs("div",{className:"border rounded-lg p-3 bg-white",children:[i.jsx("div",{className:"text-[11px] text-gray-500 mb-1",children:e}),i.jsx("ul",{className:"text-sm leading-snug list-none pl-0 m-0 space-y-0.5",children:t.length===0?i.jsx("li",{className:"text-gray-500",children:""}):t.map(r=>i.jsxs("li",{children:[r.label," ",r.value??""]},r.key))})]})}function Fu({label:e,value:t,valueClass:r}){return i.jsxs("div",{className:"border rounded-xl p-2 bg-gray-50",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:e}),i.jsx("div",{className:`text-sm mt-0.5 ${r||""}`,children:t})]})}const Nj=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal","Varios"],ov=e=>`C$ ${(Number(e)||0).toFixed(2)}`;function rCe(){const{refreshKey:e,refresh:t}=Pc(),[r,n]=v.useState(ir(gu(new Date),"yyyy-MM-dd")),[a,s]=v.useState(ir(pu(new Date),"yyyy-MM-dd")),[o,l]=v.useState(ir(new Date,"yyyy-MM-dd")),[c,u]=v.useState(""),[d,A]=v.useState(""),[f,h]=v.useState(0),[m,p]=v.useState("PENDIENTE"),[g,x]=v.useState(""),[y,b]=v.useState([]),[_,T]=v.useState(!0),[P,C]=v.useState(""),[S,I]=v.useState(null),[L,E]=v.useState(""),[j,R]=v.useState(""),[W,de]=v.useState(""),[te,le]=v.useState(0),[ce,J]=v.useState("PENDIENTE"),[me,Ee]=v.useState("");v.useEffect(()=>{(async()=>{T(!0),C("");try{const ne=Ht(At(ke,"expenses"),Ur("date","desc")),Q=await jt(ne),be=[];Q.forEach(Z=>{const z=Z.data();be.push({id:Z.id,date:z.date||ir(new Date,"yyyy-MM-dd"),category:z.category||"",description:z.description||"",amount:Number(z.amount||0),status:z.status||"PENDIENTE",notes:z.notes||"",createdAt:z.createdAt??zt.now()})}),b(be)}catch(ne){console.error(ne),C(" Error al cargar gastos")}finally{T(!1)}})()},[e]);const k=v.useMemo(()=>y.filter(ne=>!(r&&ne.date<r||a&&ne.date>a)),[y,r,a]),F=v.useMemo(()=>{const ne=k.reduce((Z,z)=>Z+(z.amount||0),0),Q=k.filter(Z=>Z.status==="PAGADO").reduce((Z,z)=>Z+(z.amount||0),0),be=ne-Q;return{total:ne,pagado:Q,pendiente:be}},[k]),V=()=>{l(ir(new Date,"yyyy-MM-dd")),u(""),A(""),h(0),p("PENDIENTE"),x("")},D=async ne=>{if(ne.preventDefault(),C(""),!c)return C("Selecciona una categora.");if(!d.trim())return C("Ingresa una descripcin.");if(!f||f<=0)return C("Ingresa un monto vlido.");try{const Q={date:o,category:c,description:d.trim(),amount:Number(Number(f||0).toFixed(2)),status:m,notes:g||"",createdAt:zt.now()},be=await en(At(ke,"expenses"),Q);b(Z=>[{id:be.id,...Q},...Z]),V(),C(" Gasto registrado")}catch(Q){console.error(Q),C(" Error al guardar gasto")}},M=ne=>{C(""),I(ne.id),E(ne.date),R(ne.category||""),de(ne.description||""),le(Number(ne.amount||0)),J(ne.status||"PENDIENTE"),Ee(ne.notes||"")},G=()=>{I(null),E(""),R(""),de(""),le(0),J("PENDIENTE"),Ee("")},O=async()=>{if(S){if(!j)return C("Selecciona una categora.");if(!W.trim())return C("Ingresa una descripcin.");if(!te||te<=0)return C("Ingresa un monto vlido.");try{const ne={date:L,category:j,description:W.trim(),amount:Number(Number(te||0).toFixed(2)),status:ce,notes:me||""};await Lr(Mt(ke,"expenses",S),ne),b(Q=>Q.map(be=>be.id===S?{...be,...ne}:be)),G(),C(" Gasto actualizado")}catch(ne){console.error(ne),C(" Error al actualizar gasto")}}},K=async ne=>{if(confirm(`Eliminar el gasto "${ne.description}"?`))try{await fn(Mt(ke,"expenses",ne.id)),b(be=>be.filter(Z=>Z.id!==ne.id)),C(" Gasto borrado")}catch(be){console.error(be),C(" Error al borrar gasto")}},ee=ne=>ne==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700";return i.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Gastos (Pollo)"}),i.jsx(bu,{onClick:t,loading:_})]}),i.jsxs("div",{className:"bg-white p-3 rounded-2xl shadow-2xl border mb-4 flex flex-col sm:flex-row sm:items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:ne=>n(ne.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:ne=>s(ne.target.value)})]})]}),i.jsxs("div",{className:"sm:ml-auto text-sm bg-gray-50 border rounded-xl p-3",children:[i.jsx("div",{className:"font-semibold",children:"Totales del rango"}),i.jsxs("div",{children:["Total: ",ov(F.total)]}),i.jsxs("div",{children:["Pagado: ",ov(F.pagado)]}),i.jsxs("div",{children:["Pendiente: ",ov(F.pendiente)]})]})]}),i.jsxs("form",{onSubmit:D,className:"bg-white p-4 rounded-2xl shadow-2xl border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:o,onChange:ne=>l(ne.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:c,onChange:ne=>u(ne.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),Nj.map(ne=>i.jsx("option",{value:ne,children:ne},ne))]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:d,onChange:ne=>A(ne.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:f===0?"":f,onChange:ne=>{const Q=String(ne.target.value||"").replace(",","."),be=parseFloat(Q);h(Number.isFinite(be)?Math.max(0,be):0)},placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:ne=>p(ne.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:g,onChange:ne=>x(ne.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[g.length,"/500"]})]}),i.jsxs("div",{className:"md:col-span-2 flex gap-2",children:[i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"}),i.jsx("button",{type:"button",className:"bg-gray-200 px-4 py-2 rounded hover:bg-gray-300",onClick:V,children:"Limpiar"})]})]}),i.jsx("div",{className:"block md:hidden space-y-3",children:_?i.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Cargando"}):k.length===0?i.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Sin gastos en el rango seleccionado."}):k.map(ne=>{const Q=S===ne.id;return i.jsxs("div",{className:"bg-white border rounded-2xl shadow p-3",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"font-semibold",children:ne.description}),i.jsxs("div",{className:"text-xs text-gray-500",children:[ne.category||"","  ",ne.date]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"font-bold",children:ov(ne.amount)}),i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ee(ne.status)}`,children:ne.status})]})]}),i.jsx("div",{className:"mt-2 text-xs text-gray-600",children:ne.notes?ne.notes:""}),Q?i.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 text-sm",children:[i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:L,onChange:be=>E(be.target.value)}),i.jsxs("select",{className:"w-full border p-2 rounded",value:j,onChange:be=>R(be.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),Nj.map(be=>i.jsx("option",{value:be,children:be},be))]}),i.jsx("input",{className:"w-full border p-2 rounded",value:W,onChange:be=>de(be.target.value)}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:Number.isNaN(te)?"":te,onChange:be=>{const Z=String(be.target.value||"").replace(",","."),z=parseFloat(Z);le(Number.isFinite(z)?Math.max(0,z):0)}}),i.jsxs("select",{className:"w-full border p-2 rounded",value:ce,onChange:be=>J(be.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:me,onChange:be=>Ee(be.target.value),maxLength:500}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:O,children:"Guardar"}),i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:G,children:"Cancelar"})]})]}):i.jsxs("div",{className:"mt-3 flex gap-2",children:[i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>M(ne),children:"Editar"}),i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>K(ne),children:"Borrar"})]})]},ne.id)})}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded-2xl shadow-2xl border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:_?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):k.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):k.map(ne=>{const Q=S===ne.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:Q?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:L,onChange:be=>E(be.target.value)}):ne.date}),i.jsx("td",{className:"p-2 border",children:Q?i.jsxs("select",{className:"w-full border p-1 rounded",value:j,onChange:be=>R(be.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),Nj.map(be=>i.jsx("option",{value:be,children:be},be))]}):ne.category||""}),i.jsx("td",{className:"p-2 border",children:Q?i.jsx("input",{className:"w-full border p-1 rounded",value:W,onChange:be=>de(be.target.value)}):i.jsx("span",{title:ne.description,children:ne.description.length>45?ne.description.slice(0,45)+"":ne.description})}),i.jsx("td",{className:"p-2 border",children:Q?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(te)?"":te,onChange:be=>{const Z=String(be.target.value||"").replace(",","."),z=parseFloat(Z);le(Number.isFinite(z)?Math.max(0,z):0)}}):ov(ne.amount)}),i.jsx("td",{className:"p-2 border",children:Q?i.jsxs("select",{className:"w-full border p-1 rounded",value:ce,onChange:be=>J(be.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ee(ne.status)}`,children:ne.status})}),i.jsx("td",{className:"p-2 border",children:Q?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:me,onChange:be=>Ee(be.target.value),maxLength:500}):i.jsx("span",{title:ne.notes||"",children:(ne.notes||"").length>45?(ne.notes||"").slice(0,45)+"":ne.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:Q?i.jsxs(i.Fragment,{children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:O,children:"Guardar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:G,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>M(ne),children:"Editar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>K(ne),children:"Borrar"})]})})})]},ne.id)})})]})}),P&&i.jsx("p",{className:"mt-2 text-sm",children:P})]})}function XC(e){return(e||"").trim().toLowerCase()}async function FJ(){const e=await jt(At(ke,"products")),t=new Map;return e.forEach(r=>{const n=r.data(),a=XC(n.name??n.productName);a&&t.set(a,r.id)}),t}async function nCe(e=!1){const t=await FJ(),r=await jt(At(ke,"inventory_batches")),n={checked:0,fixed:0,alreadyOk:0,missingName:0,withoutMatch:0,details:[]};for(const a of r.docs){n.checked++;const s=a.data(),o=XC(s.productName);if(!o){n.missingName++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,status:"missingName"});continue}const l=t.get(o);if(!l){n.withoutMatch++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,status:"withoutMatch"});continue}if(s.productId===l){n.alreadyOk++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,newProductId:l,status:"alreadyOk"});continue}e||await Lr(Mt(ke,"inventory_batches",a.id),{productId:l}),n.fixed++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,newProductId:l,status:"fixed"})}return console.group("[fixAllBatchProductIds] Resultado"),console.log("checked:",n.checked),console.log("fixed:",n.fixed),console.log("alreadyOk:",n.alreadyOk),console.log("missingName:",n.missingName),console.log("withoutMatch:",n.withoutMatch),console.groupEnd(),n}async function aCe(e,t=!1){const r=XC(e),a=(await FJ()).get(r);if(!a)throw new Error(`No existe un producto activo con nombre "${e}".`);const s=await jt(At(ke,"inventory_batches"));let o=0;for(const l of s.docs){const c=l.data();XC(c.productName)===r&&c.productId!==a&&(t||await Lr(Mt(ke,"inventory_batches",l.id),{productId:a}),o++)}return console.log(`[fixBatchesByProductName] "${e}" fixed: ${o} lote(s)`),o}function sCe(){const[e,t]=v.useState(!1),[r,n]=v.useState(""),a=async()=>{try{t(!0),n("");const c=await nCe(!1);n(` Hecho. Revisados: ${c.checked}, Corregidos: ${c.fixed}, Ok: ${c.alreadyOk}, Sin nombre: ${c.missingName}, Sin match: ${c.withoutMatch}. (Mira consola para detalles)`)}catch(c){n(" Error: "+((c==null?void 0:c.message)||c))}finally{t(!1)}},[s,o]=v.useState(""),l=async()=>{if(!s.trim()){n(" Escribe el nombre del producto.");return}try{t(!0),n("");const c=await aCe(s.trim(),!1);n(` Hecho. Corregidos ${c} lote(s) para "${s}".`)}catch(c){n(" Error: "+((c==null?void 0:c.message)||c))}finally{t(!1)}};return i.jsxs("div",{className:"max-w-xl mx-auto bg-white p-6 rounded shadow border space-y-4",children:[i.jsx("h1",{className:"text-xl font-bold",children:"Herramienta de Migracin de Lotes"}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Corrige los ",i.jsx("code",{children:"inventory_batches.productId"})," basndose en el nombre del producto. salo una sola vez para limpiar datos viejos. Revisa la consola para un log detallado."]}),i.jsx("div",{className:"space-y-2",children:i.jsx("button",{onClick:a,disabled:e,className:"bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-60",children:e?"Corriendo":"Corregir TODOS los lotes"})}),i.jsx("hr",{}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Corregir por nombre:"}),i.jsx("input",{className:"border p-2 rounded w-full",placeholder:'Ej: "Pierna Entera"',value:s,onChange:c=>o(c.target.value)}),i.jsx("button",{onClick:l,disabled:e,className:"bg-indigo-600 text-white px-4 py-2 rounded disabled:opacity-60",children:e?"Corriendo":"Corregir lotes de ese producto"})]}),r&&i.jsx("p",{className:"text-sm",children:r})]})}const Aa=e=>`C$ ${Number(e??0).toFixed(2)}`,qf=e=>Number(e??0).toFixed(3);async function iCe(e){const t=new Set;for(const n of e)for(const a of n.batches||[]){const s=(a.batchId||a.id||"").trim();if(!s)continue;(a.purchasePrice===void 0||a.purchasePrice===null)&&(a.invoiceTotal===void 0||a.invoiceTotal===null)&&t.add(s)}if(t.size===0)return e;const r=new Map;return await Promise.all(Array.from(t).map(async n=>{try{const a=await Qi(Mt(ke,"inventory_batches",n));if(a.exists()){const s=a.data();r.set(n,Number(s.purchasePrice||0))}}catch{}})),e.map(n=>({...n,batches:(n.batches||[]).map(a=>{if((a.purchasePrice===void 0||a.purchasePrice===null)&&(a.invoiceTotal===void 0||a.invoiceTotal===null)){const s=(a.batchId||a.id||"").trim(),o=s?r.get(s):void 0;if(o!==void 0)return{...a,purchasePrice:o}}return a})}))}function Cj(e){var p,g;const t=e.batches||[],r=e.expenses||[],n=e.adjustments||[],a=Number(((p=e.totals)==null?void 0:p.lbs)??e.totalLbs??0),s=Number(((g=e.totals)==null?void 0:g.units)??e.totalUnits??0);let o=0,l=0;for(const x of t){const y=Number(x.quantity??0);let b=x.expectedTotal!==void 0&&x.expectedTotal!==null?Number(x.expectedTotal):y*Number(x.salePrice??0);isFinite(b)||(b=0);let _=y*Number(x.purchasePrice??Number.NaN);isFinite(_)||(_=x.invoiceTotal!==void 0&&x.invoiceTotal!==null?Number(x.invoiceTotal):0),o+=b,l+=_}const c=r.reduce((x,y)=>x+Number(y.amount||0),0),u=n.filter(x=>x.type==="DEBITO").reduce((x,y)=>x+Number(y.amount||0),0),d=n.filter(x=>x.type==="CREDITO").reduce((x,y)=>x+Number(y.amount||0),0),A=e.totalDebits!==void 0?Number(e.totalDebits):u,f=e.totalCredits!==void 0?Number(e.totalCredits):d,h=o-l,m=o-c-A+f;return{lbs:a,units:s,expectedSum:o,invoicedSum:l,expenses:c,debits:A,credits:f,grossProfit:h,finalAmount:m}}function oCe(){const[e,t]=v.useState([]),[r,n]=v.useState(!0),[a,s]=v.useState(null),o=v.useRef(null);v.useEffect(()=>{(async()=>{n(!0);const d=Ht(At(ke,"invoices"),Ur("date","desc")),A=await jt(d),f=[];A.forEach(m=>{const p=m.data();f.push({id:m.id,...p,batches:p.batches||[],expenses:p.expenses||[],adjustments:p.adjustments||[],totals:p.totals||{lbs:p.totalLbs||0,units:p.totalUnits||0,amount:p.totalAmount||0,expenses:p.totalExpenses||0,finalAmount:p.finalAmount||0,invoiceTotal:p.invoiceTotal||0},totalDebits:p.totalDebits||0,totalCredits:p.totalCredits||0})});const h=await iCe(f);t(h),n(!1)})()},[]);const l=async d=>{const A=d.status==="PAGADA"?"PENDIENTE":"PAGADA";await Lr(Mt(ke,"invoices",d.id),{status:A}),t(f=>f.map(h=>h.id===d.id?{...h,status:A}:h)),(a==null?void 0:a.id)===d.id&&s({...d,status:A})},c=async d=>{if(window.confirm(`Eliminar factura del ${d.date}?`))try{const A=Mt(ke,"invoices",d.id),f=await Qi(A),h=f.exists()?f.data():null,m=_0(ke),p=(h==null?void 0:h.batches)||[];for(const g of p){const x=g.batchId||g.id;if(!x)continue;const y=Mt(ke,"inventory_batches",x);m.update(y,{invoiceId:null,invoiceNumber:null,invoiceTotal:null})}m.delete(A),await m.commit(),t(g=>g.filter(x=>x.id!==d.id)),(a==null?void 0:a.id)===d.id&&s(null)}catch(A){console.error(A),alert("No se pudo eliminar la factura por completo.")}},u=async()=>{if(!o.current||!a)return;const d=o.current,A=await If(d,{backgroundColor:"#ffffff",onclone:g=>{const x=g.body;x.style.background="#ffffff",x.querySelectorAll("*").forEach(y=>{const b=g.defaultView.getComputedStyle(y);b.boxShadow&&b.boxShadow!=="none"&&(y.style.boxShadow="none")})},scale:2}),f=A.toDataURL("image/png"),h=new Ar("p","mm","a4"),m=h.internal.pageSize.getWidth(),p=A.height*m/A.width;h.addImage(f,"PNG",0,0,m,p),h.save(`factura_${a.number||a.date}.pdf`)};return i.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded shadow",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Facturacin"}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-4",children:i.jsxs("table",{className:"min-w-full w-full- text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"N factura"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Libras"}),i.jsx("th",{className:"p-2 border",children:"Unidades"}),i.jsx("th",{className:"p-2 border",children:"Facturado"}),i.jsx("th",{className:"p-2 border",children:"Ventas"}),i.jsx("th",{className:"p-2 border",children:"Gastos"}),i.jsx("th",{className:"p-2 border",children:"Dbitos"}),i.jsx("th",{className:"p-2 border",children:"Crditos"}),i.jsx("th",{className:"p-2 border",children:"Monto final"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{colSpan:13,className:"p-4 text-center",children:"Cargando"})}):e.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:13,className:"p-4 text-center",children:"Sin facturas"})}):e.map(d=>{const A=Cj(d);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:d.date}),i.jsx("td",{className:"p-2 border",children:d.number||""}),i.jsx("td",{className:"p-2 border",children:d.description||""}),i.jsx("td",{className:"p-2 border",children:qf(A.lbs)}),i.jsx("td",{className:"p-2 border",children:qf(A.units)}),i.jsx("td",{className:"p-2 border",children:Aa(A.invoicedSum)}),i.jsx("td",{className:"p-2 border",children:Aa(A.expectedSum)}),i.jsx("td",{className:"p-2 border",children:Aa(A.expenses)}),i.jsx("td",{className:"p-2 border",children:Aa(A.debits)}),i.jsx("td",{className:"p-2 border",children:Aa(A.credits)}),i.jsx("td",{className:"p-2 border",children:Aa(A.finalAmount)}),i.jsx("td",{className:"p-2 border",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${d.status==="PAGADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:d.status})}),i.jsx("td",{className:"p-2 border",children:i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",onClick:()=>s(d),children:"Ver"}),i.jsx("button",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",onClick:()=>l(d),children:d.status==="PAGADA"?"Marcar PENDIENTE":"Marcar PAGADA"}),i.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>c(d),children:"Eliminar"})]})})]},d.id)})})]})}),a&&i.jsxs("div",{ref:o,className:"bg-white p-4 rounded shadow-2xl",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsxs("h3",{className:"text-lg font-semibold",children:["Detalle ",a.date," ",a.number?` ${a.number}`:""]}),i.jsx("button",{className:"ml-auto px-3 py-1 border rounded",onClick:()=>s(null),children:"Cerrar"}),i.jsx("button",{onClick:u,className:"bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Imprimir PDF"})]}),(()=>{const d=Cj(a);return i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm mb-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Estado:"})," ",a.status]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras:"})," ",qf(d.lbs)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades:"})," ",qf(d.units)]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Monto Facturado:"})," ",Aa(d.invoicedSum)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Monto Ventas (Esperado):"})," ",Aa(d.expectedSum)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Ganancia Bruta:"})," ",Aa(d.grossProfit)]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Gastos:"})," ",Aa(d.expenses)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Dbitos:"})," ",Aa(d.debits)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Crditos:"})," ",Aa(d.credits)]})]})]})})(),i.jsx("h4",{className:"font-semibold mb-1",children:"Lotes"}),i.jsxs("table",{className:"min-w-full text-sm mb-4 shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Unidad"}),i.jsx("th",{className:"p-2 border",children:"Cantidad"}),i.jsx("th",{className:"p-2 border",children:"Precio venta"}),i.jsx("th",{className:"p-2 border",children:"Total facturado"}),i.jsx("th",{className:"p-2 border",children:"Total esperado"}),i.jsx("th",{className:"p-2 border",children:"Ganancia bruta"})]})}),i.jsx("tbody",{children:(a.batches||[]).map((d,A)=>{const f=Number(d.quantity??0),h=d.expectedTotal!==void 0&&d.expectedTotal!==null?Number(d.expectedTotal):f*Number(d.salePrice??0);let m=f*Number(d.purchasePrice??Number.NaN);isFinite(m)||(m=d.invoiceTotal!==void 0&&d.invoiceTotal!==null?Number(d.invoiceTotal):0);const p=h-m;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:d.productName||"(sin nombre)"}),i.jsx("td",{className:"p-2 border",children:(d.unit||"").toUpperCase()}),i.jsx("td",{className:"p-2 border",children:qf(d.quantity)}),i.jsx("td",{className:"p-2 border",children:Aa(d.salePrice)}),i.jsx("td",{className:"p-2 border",children:Aa(m)}),i.jsx("td",{className:"p-2 border",children:Aa(h)}),i.jsx("td",{className:"p-2 border",children:Aa(p)})]},A)})})]}),i.jsx("h4",{className:"font-semibold mb-1",children:"Gastos"}),i.jsxs("table",{className:"min-w-full text-sm shadow-xl mb-4",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"})]})}),i.jsx("tbody",{children:(a.expenses||[]).length>0?(a.expenses||[]).map((d,A)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:d.date}),i.jsx("td",{className:"p-2 border",children:d.description}),i.jsx("td",{className:"p-2 border",children:Aa(d.amount)})]},A)):i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500",children:"Sin gastos"})})})]}),i.jsx("h4",{className:"font-semibold mb-1",children:"Cargos extras (Notas crdito/dbito)"}),i.jsxs("table",{className:"min-w-full text-sm shadow-xl mb-4",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Tipo de cargo"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Fecha"})]})}),i.jsx("tbody",{children:(a.adjustments||[]).length>0?(a.adjustments||[]).map((d,A)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:d.description}),i.jsx("td",{className:"p-2 border",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${d.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:d.type})}),i.jsx("td",{className:"p-2 border",children:Aa(d.amount)}),i.jsx("td",{className:"p-2 border",children:a.date})]},A)):i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"Sin cargos extras"})})})]}),(()=>{const d=Cj(a);return i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-2 justify-between",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:["Total libras: ",i.jsx("strong",{children:qf(d.lbs)})]}),i.jsxs("div",{children:["Total unidades: ",i.jsx("strong",{children:qf(d.units)})]})]}),i.jsxs("div",{className:"space-y-1 text-center",children:[i.jsxs("div",{children:["Total facturado (costo):"," ",i.jsx("strong",{children:Aa(d.invoicedSum)})]}),i.jsxs("div",{children:["Total esperado (ventas):"," ",i.jsx("strong",{children:Aa(d.expectedSum)})]}),i.jsxs("div",{children:["Ganancia bruta (esperado  facturado):"," ",i.jsx("strong",{children:Aa(d.grossProfit)})]})]}),i.jsxs("div",{className:"space-y-1 text-right",children:[i.jsxs("div",{children:["Gastos: ",i.jsx("strong",{children:Aa(d.expenses)})]}),i.jsxs("div",{children:["Dbitos: ",i.jsx("strong",{children:Aa(d.debits)})]}),i.jsxs("div",{children:["Crditos: ",i.jsx("strong",{children:Aa(d.credits)})]})]}),i.jsx("div",{className:"md:col-span-3 mt-3",children:i.jsxs("div",{className:"bg-blue-50 border border-blue-300 rounded-lg p-4 text-center",children:[i.jsx("span",{className:"block text-lg font-semibold text-gray-800",children:"Monto final (esperado  gastos  dbitos + crditos):"}),i.jsx("span",{className:"block text-2xl font-bold text-blue-700 mt-1",children:Aa(d.finalAmount)})]})})]})})()]})]})}const gl=e=>`C$${Number(e||0).toFixed(2)}`,dp=e=>Number(e||0).toFixed(3),lCe=e=>(e||"").toLowerCase()==="lb"||/libra/.test((e||"").toLowerCase()),_j=()=>{const e=new Date;return ir(new Date(e.getFullYear(),e.getMonth(),1),"yyyy-MM-dd")},x2=()=>ir(new Date,"yyyy-MM-dd");function cCe({paidBatches:e=[],onClose:t,onCreated:r}){const n=Array.isArray(e)?e:[],[a,s]=v.useState(_j()),[o,l]=v.useState(x2()),[c,u]=v.useState(""),d=v.useMemo(()=>{const xe=new Map;return n.forEach(ue=>xe.set(ue.productId,{id:ue.productId,name:ue.productName})),Array.from(xe.values()).sort((ue,Ge)=>ue.name.localeCompare(Ge.name))},[n]),A=v.useMemo(()=>n.filter(xe=>!(a&&xe.date<a||o&&xe.date>o||c&&xe.productId!==c)),[n,a,o,c]),[f,h]=v.useState(x2()),[m,p]=v.useState(()=>`FAC-${Date.now().toString().slice(-6)}`),[g,x]=v.useState(""),[y,b]=v.useState([]);v.useEffect(()=>{b(xe=>{const ue=xe.filter(Ge=>A.some(Je=>Je.id===Ge));return ue.length===0&&A.length>0?A.map(Ge=>Ge.id):ue})},[A]);const[_,T]=v.useState([]),[P,C]=v.useState([]),[S,I]=v.useState(!1),[L,E]=v.useState(_j()),[j,R]=v.useState(x2());v.useEffect(()=>{(async()=>{try{I(!0);const xe=Ht(At(ke,"expenses"),Ur("date","desc")),ue=await jt(xe),Ge=[];ue.forEach(Je=>{const ht=Je.data();Ge.push({id:Je.id,date:ht.date,description:ht.description,amount:Number(ht.amount||0)})}),T(Ge)}catch(xe){console.error(xe)}finally{I(!1)}})()},[]);const W=v.useMemo(()=>_.filter(xe=>!(!xe.date||L&&xe.date<L||j&&xe.date>j)),[_,L,j]),[de,te]=v.useState([]),[le,ce]=v.useState(!1),[J,me]=v.useState(""),[Ee,k]=v.useState("DEBITO"),[F,V]=v.useState(""),D=()=>{const xe=Number(F);!J.trim()||!isFinite(xe)||xe<=0||(te(ue=>[...ue,{id:`${Date.now()}_${ue.length+1}`,description:J.trim(),type:Ee,amount:Number(xe.toFixed(2))}]),me(""),V(""))},[M,G]=v.useState(null),[O,K]=v.useState(""),[ee,ne]=v.useState("DEBITO"),[Q,be]=v.useState(""),Z=xe=>{G(xe.id),K(xe.description),ne(xe.type),be(xe.amount.toFixed(2))},z=()=>{G(null),K(""),ne("DEBITO"),be("")},X=()=>{if(!M)return;const xe=Number(Q);!isFinite(xe)||xe<=0||(te(ue=>ue.map(Ge=>Ge.id===M?{...Ge,description:O.trim(),type:ee,amount:Number(xe.toFixed(2))}:Ge)),z())},ve=xe=>{te(ue=>ue.filter(Ge=>Ge.id!==xe)),M===xe&&z()},re=(xe,ue)=>{b(Ge=>ue?[...new Set([...Ge,xe])]:Ge.filter(Je=>Je!==xe))},Ne=xe=>{b(xe?A.map(ue=>ue.id):[])},Me=(xe,ue)=>{C(Ge=>ue?[...new Set([...Ge,xe])]:Ge.filter(Je=>Je!==xe))},Ve=v.useMemo(()=>A.filter(xe=>y.includes(xe.id)),[A,y]),nt=v.useMemo(()=>de.filter(xe=>xe.type==="DEBITO").reduce((xe,ue)=>xe+ue.amount,0),[de]),st=v.useMemo(()=>de.filter(xe=>xe.type==="CREDITO").reduce((xe,ue)=>xe+ue.amount,0),[de]),lt=v.useMemo(()=>{let xe=0,ue=0,Ge=0,Je=0;for(const rt of Ve){lCe(rt.unit)?xe+=Number(rt.quantity||0):ue+=Number(rt.quantity||0);const Qe=rt.expectedTotal??Number((Number(rt.quantity||0)*Number(rt.salePrice||0)).toFixed(2)),Pe=rt.invoiceTotal!==void 0&&rt.invoiceTotal!==null?Number(rt.invoiceTotal):Number((Number(rt.quantity||0)*Number(rt.purchasePrice||0)).toFixed(2));Ge+=Number(Qe||0),Je+=Number(Pe||0)}const ht=W.filter(rt=>P.includes(rt.id)).reduce((rt,Qe)=>rt+Number(Qe.amount||0),0),Ue=Ge-ht-nt+st;return{totalLbs:xe,totalUnits:ue,totalExpected:Number(Ge.toFixed(2)),totalInvoiced:Number(Je.toFixed(2)),totalGastos:Number(ht.toFixed(2)),debits:Number(nt.toFixed(2)),credits:Number(st.toFixed(2)),finalAmount:Number(Ue.toFixed(2)),grossProfit:Number((Ge-Je).toFixed(2))}},[Ve,W,P,nt,st]),[bt,ot]=v.useState(!1),[Le,Ze]=v.useState(""),ye=async()=>{if(Ze(""),Ve.length===0){Ze("Selecciona al menos 1 lote pagado.");return}try{ot(!0);const xe={number:m.trim(),date:f,description:g.trim(),status:"PENDIENTE",createdAt:zt.now(),totalLbs:Number(dp(lt.totalLbs)),totalUnits:Number(dp(lt.totalUnits)),totalAmount:lt.totalExpected,invoiceTotal:lt.totalInvoiced,totalExpenses:lt.totalGastos,totalDebits:lt.debits,totalCredits:lt.credits,finalAmount:lt.finalAmount,batches:Ve.map(ue=>{var Ge;return{id:ue.id,productId:ue.productId,productName:ue.productName,unit:ue.unit,quantity:Number(dp(ue.quantity)),salePrice:Number(Number(ue.salePrice||0).toFixed(2)),purchasePrice:Number(Number(ue.purchasePrice||0).toFixed(2)),expectedTotal:Number((Number(ue.quantity||0)*Number(ue.salePrice||0)).toFixed(2)),invoiceTotal:ue.invoiceTotal!==void 0&&ue.invoiceTotal!==null?Number(ue.invoiceTotal):Number((Number(ue.quantity||0)*Number(ue.purchasePrice||0)).toFixed(2)),batchDate:ue.date,paidAt:(Ge=ue.paidAt)!=null&&Ge.toDate?ir(ue.paidAt.toDate(),"yyyy-MM-dd"):null}}),expenses:W.filter(ue=>P.includes(ue.id)).map(ue=>({id:ue.id,date:ue.date||null,description:ue.description||"",amount:Number(Number(ue.amount||0).toFixed(2))})),adjustments:de.map(ue=>({id:ue.id,description:ue.description,type:ue.type,amount:Number(ue.amount.toFixed(2))}))};await en(At(ke,"invoices"),xe),Ze(" Factura creada."),r()}catch(xe){console.error(xe),Ze(` Error al crear factura: ${(xe==null?void 0:xe.message)||"desconocido"}`)}finally{ot(!1)}};return i.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/40 flex items-center justify-center p-3",children:[i.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-xl shadow-xl p-4 md:p-6 max-h-[90vh] overflow-auto relative",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Crear factura"}),i.jsx("button",{type:"button",onClick:t,className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:f,onChange:xe=>h(xe.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Nmero"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:m,onChange:xe=>p(xe.target.value),placeholder:"FAC-001"})]}),i.jsxs("div",{className:"md:col-span-1",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Descripcin"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:g,onChange:xe=>x(xe.target.value),placeholder:"Comentarios de la factura"})]})]}),i.jsx("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:i.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Desde (lote)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:xe=>s(xe.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Hasta (lote)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:o,onChange:xe=>l(xe.target.value)})]}),i.jsxs("div",{className:"min-w-[220px]",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:c,onChange:xe=>u(xe.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),d.map(xe=>i.jsx("option",{value:xe.id,children:xe.name},xe.id))]})]}),i.jsx("button",{type:"button",className:"ml-auto px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{s(_j()),l(x2()),u("")},children:"Quitar filtro"})]})}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Lotes pagados"}),i.jsxs("label",{className:"text-sm flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:A.length>0&&y.length===A.length,onChange:xe=>Ne(xe.target.checked)}),"Seleccionar todos (sobre el filtro)"]})]}),A.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No hay lotes pagados disponibles en el filtro actual."}):i.jsx("div",{className:"border rounded max-h-80 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Sel"}),i.jsx("th",{className:"p-2 border",children:"Fecha lote"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Unidad"}),i.jsx("th",{className:"p-2 border",children:"Cantidad"}),i.jsx("th",{className:"p-2 border",children:"Precio venta"}),i.jsx("th",{className:"p-2 border",children:"Total facturado"}),i.jsx("th",{className:"p-2 border",children:"Total esperado"}),i.jsx("th",{className:"p-2 border",children:"Ganancia bruta"}),i.jsx("th",{className:"p-2 border",children:"Fecha pago"})]})}),i.jsx("tbody",{children:A.map(xe=>{var Ue;const ue=y.includes(xe.id),Ge=xe.expectedTotal??Number((Number(xe.quantity||0)*Number(xe.salePrice||0)).toFixed(2)),Je=xe.invoiceTotal!==void 0&&xe.invoiceTotal!==null?Number(xe.invoiceTotal):Number((Number(xe.quantity||0)*Number(xe.purchasePrice||0)).toFixed(2)),ht=Ge-Je;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"checkbox",checked:ue,onChange:rt=>re(xe.id,rt.target.checked)})}),i.jsx("td",{className:"p-2 border",children:xe.date}),i.jsx("td",{className:"p-2 border",children:xe.productName}),i.jsx("td",{className:"p-2 border",children:(xe.unit||"").toUpperCase()}),i.jsx("td",{className:"p-2 border",children:dp(xe.quantity)}),i.jsx("td",{className:"p-2 border",children:gl(xe.salePrice)}),i.jsx("td",{className:"p-2 border",children:gl(Je)}),i.jsx("td",{className:"p-2 border",children:gl(Ge)}),i.jsx("td",{className:"p-2 border",children:gl(ht)}),i.jsx("td",{className:"p-2 border",children:(Ue=xe.paidAt)!=null&&Ue.toDate?ir(xe.paidAt.toDate(),"yyyy-MM-dd"):""})]},xe.id)})})]})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Gastos a incluir (opcional)"}),S&&i.jsx("span",{className:"text-xs text-gray-500",children:"Cargando"}),i.jsxs("div",{className:"ml-auto flex items-end gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Desde (gasto)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:L,onChange:xe=>E(xe.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta (gasto)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:j,onChange:xe=>R(xe.target.value)})]})]})]}),W.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No hay gastos en el rango seleccionado."}):i.jsx("div",{className:"border rounded max-h-48 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Sel"}),i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"})]})}),i.jsx("tbody",{children:W.map(xe=>{const ue=P.includes(xe.id);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"checkbox",checked:ue,onChange:Ge=>Me(xe.id,Ge.target.checked)})}),i.jsx("td",{className:"p-2 border",children:xe.date||""}),i.jsx("td",{className:"p-2 border",children:xe.description||""}),i.jsx("td",{className:"p-2 border",children:gl(Number(xe.amount||0))})]},xe.id)})})]})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Notas Crdito/Dbito (Cargos extras)"}),i.jsx("button",{type:"button",className:"ml-auto px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>ce(!0),children:"Crear Cargo"})]}),de.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin cargos agregados."}):i.jsx("div",{className:"border rounded max-h-40 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:de.map(xe=>{const ue=M===xe.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ue?i.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[70px]",value:O,onChange:Ge=>K(Ge.target.value)}):i.jsx("span",{title:xe.description,children:xe.description.length>60?`${xe.description.slice(0,60)}`:xe.description})}),i.jsx("td",{className:"p-2 border",children:ue?i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:ee,onChange:Ge=>ne(Ge.target.value),children:[i.jsx("option",{value:"DEBITO",children:"Dbito"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${xe.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:xe.type})}),i.jsx("td",{className:"p-2 border",children:ue?i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1 text-right",value:Q,onChange:Ge=>be(Ge.target.value)}):gl(xe.amount)}),i.jsx("td",{className:"p-2 border",children:ue?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:X,children:"Guardar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:z,children:"Cancelar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>ve(xe.id),children:"Eliminar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-indigo-600 text-white hover:bg-indigo-700 text-xs",onClick:()=>Z(xe),children:"Editar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>ve(xe.id),children:"Eliminar"})]})})]},xe.id)})})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-4 justify-between",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:["Total libras: ",i.jsx("strong",{children:dp(lt.totalLbs)})]}),i.jsxs("div",{children:["Total unidades: ",i.jsx("strong",{children:dp(lt.totalUnits)})]})]}),i.jsxs("div",{className:"space-y-1 text-center",children:[i.jsxs("div",{children:["Total facturado (costo):"," ",i.jsx("strong",{children:gl(lt.totalInvoiced)})]}),i.jsxs("div",{children:["Total esperado (ventas):"," ",i.jsx("strong",{children:gl(lt.totalExpected)})]}),i.jsxs("div",{children:["Ganancia bruta (esperado  facturado):"," ",i.jsx("strong",{children:gl(lt.grossProfit)})]})]}),i.jsxs("div",{className:"space-y-1 text-right",children:[i.jsxs("div",{children:["Gastos: ",i.jsx("strong",{children:gl(lt.totalGastos)})]}),i.jsxs("div",{children:["Dbitos: ",i.jsx("strong",{children:gl(lt.debits)})]}),i.jsxs("div",{children:["Crditos: ",i.jsx("strong",{children:gl(lt.credits)})]})]}),i.jsx("div",{className:"md:col-span-3 mt-3",children:i.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-center font-semibold text-lg",children:["Monto final (esperado  gastos  dbitos + crditos):"," ",i.jsx("span",{className:"text-blue-700",children:gl(lt.finalAmount)})]})})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",disabled:bt,onClick:ye,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",children:bt?"Creando":"Crear factura"}),i.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border rounded",children:"Cancelar"}),Le&&i.jsx("span",{className:"text-sm ml-2",children:Le})]}),bt&&i.jsxs("div",{className:"absolute inset-0 z-[11000] bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center gap-3",children:[i.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Creando factura"})]})]}),le&&i.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/50 flex items-center justify-center p-3",children:i.jsxs("div",{className:"bg-white w-full max-w-lg rounded-xl shadow-xl p-4",children:[i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx("h4",{className:"font-semibold",children:"Nuevo cargo"}),i.jsx("button",{type:"button",className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",onClick:()=>ce(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripcin"}),i.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[90px]",value:J,onChange:xe=>me(xe.target.value),placeholder:"Detalle del cargo"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Tipo de cargo"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:Ee,onChange:xe=>k(xe.target.value),children:[i.jsx("option",{value:"DEBITO",children:"Dbito"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:F,onChange:xe=>V(xe.target.value),placeholder:"0.00"})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:D,children:"Agregar"})})]})]})})]})}const Sd=e=>`C$ ${Number(e||0).toFixed(2)}`,oh=e=>Number(e||0).toFixed(3),uCe=e=>(e||"").toLowerCase()==="lb"||/libra/.test((e||"").toLowerCase());function dCe(){const[e,t]=v.useState([]),[r,n]=v.useState(!0),[a,s]=v.useState(!1),[o,l]=v.useState(null),[c,u]=v.useState(ir(new Date(new Date().getFullYear(),new Date().getMonth(),1),"yyyy-MM-dd")),[d,A]=v.useState(ir(new Date,"yyyy-MM-dd")),[f,h]=v.useState(""),[m,p]=v.useState(!1),{refreshKey:g,refresh:x}=Pc();v.useEffect(()=>{(async()=>{n(!0);const C=Ht(At(ke,"inventory_batches"),Xt("status","==","PAGADO"),Ur("date","desc")),S=await jt(C),I=[];S.forEach(L=>{const E=L.data(),j=Number(E.quantity||0),R=Number(E.remaining||0),W=Number(E.purchasePrice||0),de=Number(E.salePrice||0),te=Number((j*W).toFixed(2)),le=Number((j*de).toFixed(2));I.push({id:L.id,productId:E.productId,productName:E.productName,category:E.category,unit:E.unit,quantity:j,remaining:R,purchasePrice:W,salePrice:de,invoiceTotal:E.invoiceTotal!=null?Number(E.invoiceTotal):te,expectedTotal:E.expectedTotal!=null?Number(E.expectedTotal):le,date:E.date,status:E.status,paidAt:E.paidAt})}),t(I),n(!1)})()},[g]);const y=v.useMemo(()=>e.filter(C=>!(c&&C.date<c||d&&C.date>d||f&&C.productId!==f)),[e,c,d,f]),b=v.useMemo(()=>{let C=0,S=0,I=0,L=0,E=0,j=0;for(const R of y)uCe(R.unit)?(C+=R.quantity,S+=R.remaining):(I+=R.quantity,L+=R.remaining),E+=Number(R.expectedTotal||0),j+=Number(R.invoiceTotal||0);return{lbsIng:C,lbsRem:S,udsIng:I,udsRem:L,totalEsperado:E,totalFact:j,gross:E-j}},[y]),_=C=>{l(C),s(!0)},T=async()=>{if(o)try{const C=Mt(ke,"inventory_batches",o.id);await Lr(C,{status:"PENDIENTE",remaining:o.quantity});const S=At(ke,"salesV2"),I=await jt(Ht(S,Xt("batchId","==",o.id))),L=await jt(Ht(S,Xt("productName","==",o.productName),Xt("date","==",o.date))),E=[...I.docs,...L.docs];for(const j of E)await fn(Mt(ke,"salesV2",j.id));s(!1),l(null),x()}catch(C){console.error("Error al marcar pendiente:",C)}},P=v.useMemo(()=>{const C=new Map;return e.forEach(S=>C.set(S.productId,{id:S.productId,name:S.productName})),Array.from(C.values()).sort((S,I)=>S.name.localeCompare(I.name))},[e]);return i.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Pagados"}),i.jsx(bu,{onClick:x,loading:r})]}),i.jsxs("div",{className:"bg-white p-3 rounded-2xl shadow-2xl border mb-4 flex flex-col sm:flex-row sm:items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-wrap gap-3",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:C=>u(C.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:C=>A(C.target.value)})]}),i.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[i.jsx("label",{className:"font-semibold",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:f,onChange:C=>h(C.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),P.map(C=>i.jsx("option",{value:C.id,children:C.name},C.id))]})]}),i.jsx("button",{type:"button",className:"px-3 py-1 rounded-2xl bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),A(""),h("")},children:"Quitar filtro"})]}),i.jsx("button",{type:"button",className:"sm:ml-auto px-3 py-2 rounded-2xl bg-blue-600 text-white hover:bg-blue-700",onClick:()=>p(!0),children:"Crear factura"})]}),i.jsx("div",{className:"bg-gray-50 p-3 rounded-2xl shadow-2xl border mb-3 text-base",children:i.jsxs("div",{className:"grid grid-cols-2 gap-y-2 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",oh(b.lbsIng)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",oh(b.udsIng)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",Sd(b.totalEsperado)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",oh(b.lbsRem)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",oh(b.udsRem)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",Sd(b.totalFact)]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",Sd(b.gross)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes:"})," ",y.length.toLocaleString()]})]})}),i.jsx("div",{className:"block md:hidden space-y-3",children:r?i.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Cargando"}):y.length===0?i.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Sin lotes pagados"}):y.map(C=>{var S;return i.jsxs("div",{className:"bg-white border rounded-2xl shadow p-3",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:C.productName}),i.jsxs("div",{className:"text-xs text-gray-500",children:[(C.category||"").toUpperCase(),"  ",C.date," "," ",(C.unit||"").toUpperCase()]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-sm font-bold",children:Sd(C.expectedTotal||0)}),i.jsx("div",{className:"text-[11px] text-gray-500",children:"Esperado"})]})]}),i.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Ingresado"}),i.jsx("div",{className:"font-semibold",children:oh(C.quantity)})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Restantes"}),i.jsx("div",{className:"font-semibold",children:oh(C.remaining)})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Costo"}),i.jsx("div",{className:"font-semibold",children:Sd(C.invoiceTotal||0)})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Fecha pago"}),i.jsx("div",{className:"font-semibold",children:(S=C.paidAt)!=null&&S.toDate?ir(C.paidAt.toDate(),"yyyy-MM-dd"):""})]})]}),i.jsx("div",{className:"mt-3",children:i.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>_(C),children:"Marcar PENDIENTE"})})]},C.id)})}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow-2xl border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Unidad"}),i.jsx("th",{className:"p-2 border",children:"Ingresado"}),i.jsx("th",{className:"p-2 border",children:"Restantes"}),i.jsx("th",{className:"p-2 border",children:"Precio Compra"}),i.jsx("th",{className:"p-2 border",children:"Precio Venta"}),i.jsx("th",{className:"p-2 border",children:"Total factura"}),i.jsx("th",{className:"p-2 border",children:"Total esperado"}),i.jsx("th",{className:"p-2 border",children:"Fecha pago"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):y.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin lotes pagados"})}):y.map(C=>{var S;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:C.date}),i.jsx("td",{className:"p-2 border",children:(C.category||"").toUpperCase()}),i.jsx("td",{className:"p-2 border",children:C.productName}),i.jsx("td",{className:"p-2 border",children:(C.unit||"").toUpperCase()}),i.jsx("td",{className:"p-2 border",children:oh(C.quantity)}),i.jsx("td",{className:"p-2 border",children:oh(C.remaining)}),i.jsx("td",{className:"p-2 border",children:Sd(C.purchasePrice)}),i.jsx("td",{className:"p-2 border",children:Sd(C.salePrice)}),i.jsx("td",{className:"p-2 border",children:Sd(C.invoiceTotal||0)}),i.jsx("td",{className:"p-2 border",children:Sd(C.expectedTotal||0)}),i.jsx("td",{className:"p-2 border",children:(S=C.paidAt)!=null&&S.toDate?ir(C.paidAt.toDate(),"yyyy-MM-dd"):""}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>_(C),children:"Marcar PENDIENTE"})})]},C.id)})})]})}),m&&i.jsx(cCe,{paidBatches:e,onClose:()=>p(!1),onCreated:()=>p(!1)}),a&&o&&i.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50 p-3",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-md",children:[i.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Confirmar accin"}),i.jsxs("p",{className:"text-gray-700 mb-4",children:["Seguro que quieres marcar pendiente este inventario?",i.jsx("br",{}),"Al hacerlo, las libras se restaurarn y se eliminarn las ventas generadas."]}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:()=>s(!1),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-xl",children:"Cancelar"}),i.jsx("button",{type:"button",onClick:T,className:"px-4 py-2 bg-yellow-600 text-white hover:bg-yellow-700 rounded-xl",children:"Confirmar"})]})]})})]})}const ti=e=>`C$ ${(Number(e)||0).toFixed(2)}`,ACe=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function v2(e){return(e||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function hCe(e){switch((e||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function fCe(e){const t="ROP",r=v2(e.subcat).slice(0,3)||"GEN",n=hCe(e.gender),a=v2(e.color).slice(0,3)||"COL",s=v2(e.size)||"TLL",o=v2(e.brand).slice(0,4)||"BRD",l=Date.now().toString(36).toUpperCase().slice(-4);return`${t}-${r}-${n}-${a}-${s}-${o}-${l}`}const lv=/^[A-Za-z0-9._-]{0,32}$/;function mCe(){const[e,t]=v.useState([]),[r,n]=v.useState([]),[a,s]=v.useState(!0),[o,l]=v.useState(""),[c,u]=v.useState(ir(gu(new Date),"yyyy-MM-dd")),[d,A]=v.useState(ir(pu(new Date),"yyyy-MM-dd")),[f,h]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(ir(new Date,"yyyy-MM-dd")),[y,b]=v.useState(0),[_,T]=v.useState(0),[P,C]=v.useState(0),[S,I]=v.useState(0),[L,E]=v.useState(0),[j,R]=v.useState(""),[W,de]=v.useState(""),[te,le]=v.useState(""),[ce,J]=v.useState(""),[me,Ee]=v.useState(""),[k,F]=v.useState(""),[V,D]=v.useState(""),[M,G]=v.useState(!1),[O,K]=v.useState(""),[ee,ne]=v.useState("Camisa"),[Q,be]=v.useState(null),[Z,z]=v.useState(""),[X,ve]=v.useState(0),[re,Ne]=v.useState(0),[Me,Ve]=v.useState(0),[nt,st]=v.useState(0),[lt,bt]=v.useState(0),[ot,Le]=v.useState(""),[Ze,ye]=v.useState(""),[xe,ue]=v.useState(""),[Ge,Je]=v.useState(""),[ht,Ue]=v.useState(""),[rt,Qe]=v.useState(""),[Pe,ze]=v.useState(""),[it,Bt]=v.useState(null),[ut,It]=v.useState({x:0,y:0}),[$t,hr]=v.useState(!1);v.useEffect(()=>{const se=()=>Bt(null),he=Ae=>Ae.key==="Escape"&&Bt(null);return document.addEventListener("click",se),document.addEventListener("keydown",he),()=>{document.removeEventListener("click",se),document.removeEventListener("keydown",he)}},[]);const _e=(se,he,Ae=192,Be=160)=>{let ae=se;se+Ae+8>window.innerWidth&&(ae=se-Ae),ae=Math.max(8,Math.min(ae,window.innerWidth-Ae-8));let Oe=he;return he+Be+8>window.innerHeight&&(Oe=window.innerHeight-Be-8),Oe=Math.max(8,Math.min(Oe,window.innerHeight-Be-8)),{x:ae,y:Oe}},dt=(se,he)=>{se.stopPropagation();const Ae=se.currentTarget.getBoundingClientRect(),Be=Ae.right,Fe=Ae.bottom,ae=_e(Be,Fe);It(ae),Bt(Oe=>Oe===he?null:he)};v.useEffect(()=>{const se=()=>Bt(null),he=Ae=>{Ae.key==="Escape"&&Bt(null)};return document.addEventListener("click",se),document.addEventListener("keydown",he),()=>{document.removeEventListener("click",se),document.removeEventListener("keydown",he)}},[]),v.useEffect(()=>{if(!it)return;const se=()=>Bt(null);return window.addEventListener("scroll",se,!0),window.addEventListener("resize",se),()=>{window.removeEventListener("scroll",se,!0),window.removeEventListener("resize",se)}},[it]),v.useEffect(()=>{(async()=>{const se=await jt(At(ke,"products_clothes")),he=[];se.forEach(ae=>{const Oe=ae.data();he.push({id:ae.id,name:Oe.name??"(sin nombre)",category:Oe.category??"(sin categora)",measurement:Oe.measurement??"unidad",price:Number(Oe.price??0),sku:Oe.sku||"",size:Oe.size||"",color:Oe.color||"",gender:Oe.gender||"",brand:Oe.brand||""})}),t(he);const Ae=Ht(At(ke,"inventory_clothes_batches"),Ur("date","desc")),Be=await jt(Ae),Fe=[];Be.forEach(ae=>{const Oe=ae.data();Fe.push({id:ae.id,productId:Oe.productId,productName:Oe.productName,category:Oe.category,unit:Oe.unit,quantity:Number(Oe.quantity||0),remaining:Number(Oe.remaining??Oe.quantity??0),purchasePrice:Number(Oe.purchasePrice||0),salePrice:Number(Oe.salePrice||0),invoiceTotal:Number(Oe.invoiceTotal??Number(Oe.quantity||0)*Number(Oe.purchasePrice||0)),expectedTotal:Number(Oe.expectedTotal??Number(Oe.quantity||0)*Number(Oe.salePrice||0)),date:Oe.date,createdAt:Oe.createdAt,status:Oe.status,notes:Oe.notes||"",sku:Oe.sku||"",size:Oe.size||"",color:Oe.color||"",gender:Oe.gender||"",brand:Oe.brand||"",clientCode:Oe.clientCode||""})}),n(Fe),s(!1)})()},[]),v.useEffect(()=>{const se=e.find(he=>he.id===m);se&&(C(Number(se.price||0)),se.sku&&de(se.sku),se.size&&le(he=>he||se.size),se.color&&J(he=>he||se.color),se.gender&&Ee(he=>he||se.gender),se.brand&&F(he=>he||se.brand))},[m,e]),v.useEffect(()=>{I(Math.floor(y*_*100)/100)},[y,_]),v.useEffect(()=>{E(Math.floor(y*P*100)/100)},[y,P]),v.useEffect(()=>{const se=e.find(Be=>Be.id===m);if(se!=null&&se.sku){de(se.sku);return}const he=M&&ee?ee:(se==null?void 0:se.category)||"";if(!he&&!me&&!ce&&!te&&!k){de("");return}const Ae=fCe({subcat:he,gender:me||"",color:ce||"",size:te||"",brand:k||""});de(Ae)},[M,ee,m,me,ce,te,k,e]);const gt=v.useMemo(()=>r.filter(se=>!(c&&se.date<c||d&&se.date>d||f&&se.productId!==f)),[r,c,d,f]),Ce=v.useMemo(()=>{const se=gt.reduce((Fe,ae)=>Fe+(ae.invoiceTotal||0),0),he=gt.reduce((Fe,ae)=>Fe+(ae.expectedTotal||0),0),Ae=gt.reduce((Fe,ae)=>Fe+ae.quantity,0),Be=gt.reduce((Fe,ae)=>Fe+ae.remaining,0);return{udsIng:Ae,udsRem:Be,totalFacturado:se,totalEsperado:he}},[gt]),et=async se=>{se.preventDefault(),l("");const he=!!m&&!M,Ae=e.find(Oe=>Oe.id===m),Be=he?(Ae==null?void 0:Ae.name)||"":O||"",Fe=he?(Ae==null?void 0:Ae.category)||"":ee||"General",ae=he&&(Ae==null?void 0:Ae.measurement)||"unidad";if(!Be||y<=0||_<=0){l("Completa nombre/cantidad/costo.");return}if(V&&!lv.test(V)){l("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}try{const Oe=await en(At(ke,"inventory_clothes_batches"),{productId:he?Ae.id:"",productName:Be,category:Fe,unit:ae,quantity:y,remaining:y,purchasePrice:_,salePrice:P,invoiceTotal:S,expectedTotal:L,date:g,createdAt:zt.now(),status:"PENDIENTE",notes:j||"",sku:W||"",size:te||"",color:ce||"",gender:me||"",brand:k||"",clientCode:V||""});n(pe=>[{id:Oe.id,productId:he?Ae.id:"",productName:Be,category:Fe,unit:ae,quantity:y,remaining:y,purchasePrice:_,salePrice:P,invoiceTotal:S,expectedTotal:L,date:g,createdAt:zt.now(),status:"PENDIENTE",notes:j||"",sku:W||"",size:te||"",color:ce||"",gender:me||"",brand:k||"",clientCode:V||""},...pe]),l(" Lote de ropa creado"),p(""),x(ir(new Date,"yyyy-MM-dd")),b(0),T(0),C(0),I(0),E(0),R(""),de(""),le(""),J(""),Ee(""),F(""),D(""),G(!1),K(""),ne("Camisa")}catch(Oe){console.error(Oe),l(" Error al crear lote")}},yt=async se=>{confirm(`Marcar PAGADO el lote del ${se.date} (${se.productName})?`)&&(await Lr(Mt(ke,"inventory_clothes_batches",se.id),{status:"PAGADO"}),n(Ae=>Ae.map(Be=>Be.id===se.id?{...Be,status:"PAGADO"}:Be)))},Pt=se=>{be(se.id),z(se.date),ve(se.quantity),Ne(se.purchasePrice),Ve(se.salePrice),st(Number((se.quantity*se.purchasePrice).toFixed(2))),bt(Number((se.quantity*se.salePrice).toFixed(2))),Le(se.notes||""),ye(se.sku||""),ue(se.size||""),Je(se.color||""),Ue(se.gender||""),Qe(se.brand||""),ze(se.clientCode||"")},Lt=()=>{be(null),z(""),ve(0),Ne(0),Ve(0),st(0),bt(0),Le(""),ye(""),ue(""),Je(""),Ue(""),Qe(""),ze("")};v.useEffect(()=>{Q&&st(Math.floor(X*re*100)/100)},[Q,X,re]),v.useEffect(()=>{Q&&bt(Math.floor(X*Me*100)/100)},[Q,X,Me]);const qt=async()=>{if(!Q)return;const se=r.find(Fe=>Fe.id===Q);if(!se)return;const he=Math.max(0,se.quantity-se.remaining),Ae=Math.max(0,X-he);if(Pe&&!lv.test(Pe)){l("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}const Be=Mt(ke,"inventory_clothes_batches",Q);await Lr(Be,{date:Z,quantity:X,purchasePrice:re,salePrice:Me,invoiceTotal:nt,expectedTotal:lt,notes:ot,remaining:Ae,sku:Ze,size:xe,color:Ge,gender:ht||"",brand:rt||"",clientCode:Pe||""}),n(Fe=>Fe.map(ae=>ae.id===Q?{...ae,date:Z,quantity:X,purchasePrice:re,salePrice:Me,invoiceTotal:nt,expectedTotal:lt,notes:ot,remaining:Ae,sku:Ze,size:xe,color:Ge,gender:ht||"",brand:rt||"",clientCode:Pe||""}:ae)),Lt(),l(" Lote actualizado")},wt=async se=>{confirm(`Eliminar el lote del ${se.date} (${se.productName})?`)&&(await fn(Mt(ke,"inventory_clothes_batches",se.id)),n(Ae=>Ae.filter(Be=>Be.id!==se.id)),l(" Lote eliminado"))},ie=()=>{const se=(c?`Desde ${c}`:"Desde inicio")+"  "+(d?`Hasta ${d}`:"Hasta hoy"),he=ae=>(ae||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Ae=gt.map(ae=>`
      <tr>
        <td>${ae.date}</td>
        <td>${(ae.category||"").toUpperCase()}</td>
        <td>${he(ae.productName)}</td>
        <td>${he(ae.sku||"")}</td>
        <td>${he(ae.size||"")}</td>
        <td>${he(ae.color||"")}</td>
        <td>${he(ae.clientCode||"")}</td>
        <td>${he(ae.gender||"")}</td>
        <td>${(ae.unit||"").toUpperCase()}</td>
        <td style="text-align:right">${ae.quantity.toFixed(0)}</td>
        <td style="text-align:right">${ae.remaining.toFixed(0)}</td>
        <td style="text-align:right">${ti(ae.purchasePrice)}</td>
        <td style="text-align:right">${ti(ae.salePrice)}</td>
        <td style="text-align:right">${ti(ae.invoiceTotal||0)}</td>
        <td style="text-align:right">${ti(ae.expectedTotal||0)}</td>
        <td>${he((ae.notes||"").slice(0,120))}</td>
        <td>${ae.status}</td>
      </tr>`).join(""),Be=`
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Inventario de Ropa por Lotes</title>
  <style>
    * { font-family: Arial, sans-serif; }
    h1 { margin: 0 0 4px; }
    .muted { color: #555; font-size: 12px; margin-bottom: 12px; }
    table { width: 100%; border-collapse: collapse; font-size: 11px; }
    th, td { border: 1px solid #ddd; padding: 6px; }
    th { background: #f5f5f5; text-align: left; }
    .totals { margin: 10px 0 16px; font-size: 12px; display: grid; grid-template-columns: repeat(2, max-content); column-gap: 32px; row-gap: 6px; align-items: center; }
    @media print { @page { size: A4 landscape; margin: 12mm; } button { display: none; } }
  </style>
</head>
<body>
  <button onclick="window.print()">Imprimir</button>
  <h1>Inventario de Ropa por Lotes</h1>
  <div class="muted">${se}</div>
  <div class="totals">
    <span><strong>Unidades ingresadas:</strong> ${Ce.udsIng.toFixed(0)}</span>
    <span><strong>Unidades restantes:</strong> ${Ce.udsRem.toFixed(0)}</span>
    <span><strong>Total esperado a ganar:</strong> ${ti(Ce.totalEsperado)}</span>
    <span><strong>Total facturado:</strong> ${ti(Ce.totalFacturado)}</span>
    <span><strong>Ganancia sin gastos:</strong> ${ti(Number((Ce.totalEsperado-Ce.totalFacturado).toFixed(2)))}</span>
  </div>
  <table>
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Subcat.</th>
        <th>Producto</th>
        <th>SKU</th>
        <th>Talla</th>
        <th>Color</th>
        <th>Cdigo Cliente</th>
        <th>Gnero</th>
        <th>Unidad</th>
        <th>Ingresado</th>
        <th>Restantes</th>
        <th>Precio Compra</th>
        <th>Precio Venta</th>
        <th>Total factura</th>
        <th>Total esperado</th>
        <th>Comentario</th>
        <th>Estado</th>
      </tr>
    </thead>
    <tbody>${Ae||'<tr><td colspan="17" style="text-align:center">Sin lotes</td></tr>'}</tbody>
  </table>
</body>
</html>`,Fe=window.open("","_blank");Fe&&(Fe.document.open(),Fe.document.write(Be),Fe.document.close())};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Inventario de Ropa"}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>hr(!0),type:"button",children:"Crear Inventario"})]}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:se=>u(se.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:se=>A(se.target.value)})]}),i.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[i.jsx("label",{className:"font-semibold",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:f,onChange:se=>h(se.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),e.map(se=>i.jsxs("option",{value:se.id,children:[se.name,"  ",se.category]},se.id))]})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),A(""),h("")},children:"Quitar filtro"}),i.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:ie,children:"Imprimir PDF"})]}),i.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-base",children:i.jsxs("div",{className:"grid grid-cols-3 gap-y-2 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",Ce.udsIng.toFixed(0)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",Ce.udsRem.toFixed(0)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",ti(Ce.totalEsperado)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",ti(Ce.totalFacturado)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",ti(Number((Ce.totalEsperado-Ce.totalFacturado).toFixed(2)))]})]})}),i.jsx("div",{className:"bg-white rounded shadow border",children:i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Fecha"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden sm:table-cell",children:"Subcat."}),i.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"SKU"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Talla"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Color"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Cdigo Cliente"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Gnero"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Unidad"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Ingresado"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Restantes"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Compra"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Venta"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total factura"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total esperado"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Comentario"}),i.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Estado"}),i.jsx("th",{className:"p-2 md:p-3 border text-center",children:"Acciones"})]})}),i.jsx("tbody",{className:"whitespace-nowrap",children:a?i.jsx("tr",{children:i.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Cargando"})}):gt.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Sin lotes"})}):gt.map(se=>{const he=Q===se.id;return i.jsxs("tr",{className:"text-left",children:[i.jsx("td",{className:"p-2 md:p-3 border align-top",children:he?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:Z,onChange:Ae=>z(Ae.target.value)}):se.date}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden sm:table-cell",children:(se.category||"").toUpperCase()}),i.jsx("td",{className:"p-2 md:p-3 border align-top max-w-[220px] md:max-w-[320px]",children:i.jsx("span",{className:"block truncate",title:se.productName,children:se.productName})}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell max-w-[220px]",children:he?i.jsx("input",{className:"w-full border p-1 rounded",value:Ze,onChange:Ae=>ye(Ae.target.value)}):i.jsx("span",{className:"block truncate",title:se.sku||"",children:se.sku||""})}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:he?i.jsx("input",{className:"w-full border p-1 rounded",value:xe,onChange:Ae=>ue(Ae.target.value)}):se.size||""}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:he?i.jsx("input",{className:"w-full border p-1 rounded",value:Ge,onChange:Ae=>Je(Ae.target.value)}):se.color||""}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[200px]",children:he?i.jsx("input",{className:"w-full border p-1 rounded",value:Pe,onChange:Ae=>{const Be=Ae.target.value;lv.test(Be)&&ze(Be)},placeholder:"Ej: LOTE-SHEIN-SEP-01",title:"AZ 09 . _ - (mx 32)"}):i.jsx("span",{className:"block truncate",title:se.clientCode||"",children:se.clientCode||""})}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:he?i.jsx("select",{className:"w-full border p-1 rounded",value:ht,onChange:Ae=>Ue(Ae.target.value),children:ACe.map(Ae=>i.jsx("option",{value:Ae,children:Ae||""},Ae))}):se.gender||""}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:(se.unit||"").toUpperCase()}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:he?i.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-20 border p-1 rounded text-right",value:Number.isNaN(X)?"":X,onChange:Ae=>ve(Math.max(0,parseInt(Ae.target.value||"0",10)))}):se.quantity.toFixed(0)}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:he?se.remaining:se.remaining.toFixed(0)}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:he?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(re)?"":re,onChange:Ae=>Ne(Math.max(0,parseFloat(Ae.target.value||"0")))}):ti(se.purchasePrice)}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:he?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(Me)?"":Me,onChange:Ae=>Ve(Math.max(0,parseFloat(Ae.target.value||"0")))}):ti(se.salePrice)}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:ti(he?nt:se.invoiceTotal||0)}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:ti(he?lt:se.expectedTotal||0)}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[280px]",children:he?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:ot,onChange:Ae=>Le(Ae.target.value),maxLength:500}):i.jsx("span",{className:"block truncate",title:se.notes||"",children:se.notes||""})}),i.jsx("td",{className:"p-2 md:p-3 border align-top",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] md:text-xs ${se.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:se.status})}),i.jsx("td",{className:"p-2 md:p-3 border align-top",children:he?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:qt,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Lt,children:"Cancelar"})]}):i.jsx("button",{type:"button",className:"inline-flex items-center justify-center w-8 h-8 rounded border border-gray-200 hover:bg-gray-100",title:"Acciones",onClick:Ae=>dt(Ae,se.id),children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor",children:[i.jsx("circle",{cx:"12",cy:"5",r:"1.6"}),i.jsx("circle",{cx:"12",cy:"12",r:"1.6"}),i.jsx("circle",{cx:"12",cy:"19",r:"1.6"})]})})})]},se.id)})})]})})}),it&&nu.createPortal(i.jsxs(i.Fragment,{children:[i.jsx("div",{onClick:()=>Bt(null),className:"fixed inset-0 z-[60]"}),i.jsx("div",{className:"fixed z-[61] w-44 rounded-md border border-gray-200 bg-white shadow-xl",style:{left:ut.x,top:ut.y},onClick:se=>se.stopPropagation(),role:"menu","aria-orientation":"vertical",children:i.jsxs("div",{className:"py-1 text-sm",children:[(()=>{const se=gt.find(he=>he.id===it);return(se==null?void 0:se.status)==="PENDIENTE"?i.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-green-50",onClick:()=>{Bt(null),yt(se)},children:" Pagar"}):null})(),i.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-yellow-50",onClick:()=>{const se=gt.find(he=>he.id===it);se&&(Bt(null),Pt(se))},children:" Editar"}),i.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-red-50 text-red-600",onClick:()=>{const se=gt.find(he=>he.id===it);se&&(Bt(null),wt(se))},children:" Borrar"})]})})]}),document.body),$t&&nu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>hr(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-4xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Crear Inventario (Lote)"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>hr(!1),type:"button",children:"Cerrar"})]}),i.jsxs("form",{onSubmit:et,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto de ropa"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:se=>p(se.target.value),children:[i.jsx("option",{value:"",children:"(Opcional) Selecciona un producto"}),e.map(se=>i.jsxs("option",{value:se.id,children:[se.name,"  ",se.category,"  ",se.sku?`SKU: ${se.sku}`:""]},se.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del lote"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:g,onChange:se=>x(se.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (pzas)"}),i.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-full border p-2 rounded",value:y===0?"":y,onChange:se=>b(Math.max(0,parseInt(se.target.value||"0",10))),placeholder:""})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio de compra (pza)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:_===0?"":_,onChange:se=>T(Math.max(0,parseFloat(se.target.value||"0")))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (pza)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:P===0?"":P,onChange:se=>C(Math.max(0,parseFloat(se.target.value||"0")))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:W,readOnly:!0,placeholder:"Se genera automticamente o se carga del producto",title:"Si el producto tiene SKU, se usa tal cual; si no, se genera por subcat/gnero/talla/color/marca."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:te,readOnly:!0,onChange:se=>le(se.target.value),placeholder:"XS/S/M/L/XL/10/12"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:ce,readOnly:!0,onChange:se=>J(se.target.value),placeholder:"Negro, Azul, Rojo"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:me,readOnly:!0,onChange:se=>Ee(se.target.value),placeholder:"Masculino, Femenino, Otro"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Marca / Origen (opcional)"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:k,onChange:se=>F(se.target.value),placeholder:"Shein, Usado, Otro"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo del cliente (opcional)"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: LOTE-SHEIN-SEP-01",value:V,onChange:se=>{const he=se.target.value;lv.test(he)&&D(he)},title:"Solo letras, nmeros, punto, guion y guion_bajo (mx 32)"}),!lv.test(V)&&V.length>0&&i.jsx("div",{className:"text-xs text-red-600 mt-1",children:"Formato invlido"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:j,onChange:se=>R(se.target.value),maxLength:500,placeholder:"Ej: Camisita veranera, tela delgada, tirantes"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[j.length,"/500"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Total factura (auto)"}),i.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:ti(S),readOnly:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Total esperado (auto)"}),i.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:ti(L),readOnly:!0})]}),i.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>hr(!1),children:"Cancelar"}),i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar lote"})]})]})]})]}),document.body),o&&i.jsx("p",{className:"mt-2 text-sm",children:o})]})}const pCe=["Camisa","Blusa","Vestido","Jean","Pantaln","Short","Falda","Conjunto","Abrigo","Suter","Accesorio"],gCe=["Negro","Blanco","Azul","Rojo","Verde","Gris","Beige","Rosa","Amarillo","Marrn","Morado","Naranja"],xCe=["XS","S","M","L","XL","2XL"],vCe=["2","4","6","8","10","12","14"],yCe=["26","28","30","32","34","36","38"],bCe=["Shein","Usado","Otro"],wCe=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function y2(e){return(e||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function NCe(e){switch((e||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function CCe(e){const t="ROP",r=y2(e.subcat).slice(0,3)||"GEN",n=NCe(e.gender),a=y2(e.color).slice(0,3)||"COL",s=y2(e.size)||"TLL",o=y2(e.brand).slice(0,4)||"BRD";return`${t}-${r}-${n}-${a}-${s}-${o}`}const _Ce=/^[A-Za-z0-9._-]{0,32}$/;function ECe(){const[e,t]=v.useState(""),[r,n]=v.useState("Camisa"),[a,s]=v.useState(""),[o,l]=v.useState(""),[c,u]=v.useState("Shein"),[d,A]=v.useState(""),[f,h]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(""),[y,b]=v.useState(""),[_,T]=v.useState("0"),[P,C]=v.useState(""),[S,I]=v.useState(""),L=v.useMemo(()=>{const D=Number(_||0),M=Number(y||0);return Math.floor(D*M*100)/100},[_,y]),[E,j]=v.useState([]),[R,W]=v.useState(!0),[de,te]=v.useState(""),{refreshKey:le,refresh:ce}=Pc(),[J,me]=v.useState(!1),Ee=v.useMemo(()=>r.toLowerCase()==="jean"?yCe:d==="NINO"||d==="NINA"?vCe:xCe,[r,d]);v.useEffect(()=>{p(CCe({subcat:r,gender:d,color:o,size:a,brand:c}))},[r,d,o,a,c]),v.useEffect(()=>{(async()=>{W(!0);const D=Ht(At(ke,"products_clothes"),Ur("createdAt","desc")),M=await jt(D),G=[];M.forEach(O=>{const K=O.data();G.push({id:O.id,name:K.name??"(sin nombre)",category:K.category??"",measurement:K.measurement??"unidad",sku:K.sku??"",size:K.size||"",color:K.color||"",brand:K.brand||"",gender:K.gender||"",clientCode:K.clientCode||"",notes:K.notes||"",createdAt:K.createdAt??zt.now()})}),j(G),W(!1)})()},[le]);const k=()=>{t(""),n("Camisa"),s(""),l(""),u("Shein"),A(""),h(""),x(""),b(""),T("0"),C(""),I("")},F=async D=>{if(D.preventDefault(),te(""),!e.trim()){te("Ingresa el nombre del producto.");return}if(f&&!_Ce.test(f)){te("Cdigo del cliente invlido");return}const M=Number(_||0),G=Number(y||0);if(M<0){te("La cantidad de piezas debe ser 0 o mayor.");return}if(G<0){te("El precio de venta no puede ser negativo.");return}try{const O=await en(At(ke,"products_clothes"),{name:e.trim(),category:r,measurement:"unidad",sku:m,size:a||"",color:o||"",brand:c||"",gender:d||"",clientCode:f||"",notes:g||"",createdAt:zt.now(),price:G||0});if(j(K=>[{id:O.id,name:e.trim(),category:r,measurement:"unidad",sku:m,size:a||"",color:o||"",brand:c||"",gender:d||"",clientCode:f||"",notes:g||"",createdAt:zt.now()},...K]),M>0){const K=new Date().toISOString().slice(0,10),ee=P||K;await en(At(ke,"inventory_clothes_batches"),{productId:O.id,productName:e.trim(),category:r,unit:"unidad",quantity:M,remaining:M,purchasePrice:0,salePrice:G||0,invoiceTotal:0,expectedTotal:L||0,date:ee,createdAt:zt.now(),status:"PENDIENTE",notes:S||"",sku:m||"",size:a||"",color:o||"",gender:d||"",brand:c||"",clientCode:f||""})}te(M>0?" Producto creado y lote de inventario registrado":" Producto de ropa creado"),k()}catch(O){console.error(O),te(" Error al crear producto")}},V=async D=>{confirm(`Eliminar el producto "${D.name}"?`)&&(await fn(Mt(ke,"products_clothes",D.id)),j(G=>G.filter(O=>O.id!==D.id)))};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Productos de Ropa"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(bu,{onClick:ce,loading:R}),i.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{me(!0)},children:[i.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]})]}),J&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo producto de ropa"}),i.jsxs("form",{onSubmit:F,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",value:e,onChange:D=>t(D.target.value),placeholder:"Ej: Blusa floral"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Subcategora"}),i.jsx("select",{className:"w-full border p-2 rounded",value:r,onChange:D=>n(D.target.value),children:pCe.map(D=>i.jsx("option",{value:D,children:D},D))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Gnero"}),i.jsx("select",{className:"w-full border p-2 rounded",value:d,onChange:D=>A(D.target.value),children:wCe.map(D=>i.jsx("option",{value:D,children:D||""},D))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:D=>s(D.target.value),children:[i.jsx("option",{value:"",children:""}),Ee.map(D=>i.jsx("option",{value:D,children:D},D))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:o,onChange:D=>l(D.target.value),children:[i.jsx("option",{value:"",children:""}),gCe.map(D=>i.jsx("option",{value:D,children:D},D))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Marca"}),i.jsx("select",{className:"w-full border p-2 rounded",value:c,onChange:D=>u(D.target.value),children:bCe.map(D=>i.jsx("option",{value:D,children:D},D))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:m,readOnly:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo cliente"}),i.jsx("input",{className:"w-full border p-2 rounded",value:f,onChange:D=>h(D.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (pza)"}),i.jsx("input",{className:"w-full border p-2 rounded",type:"number",step:"0.01",min:0,value:y,onChange:D=>b(D.target.value),placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad de piezas (crea lote si > 0)"}),i.jsx("input",{className:"w-full border p-2 rounded",type:"number",min:0,value:_,onChange:D=>T(D.target.value),placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de lote"}),i.jsx("input",{className:"w-full border p-2 rounded",type:"date",value:P,onChange:D=>C(D.target.value)})]}),i.jsxs("div",{className:"md:col-span-2 flex items-center justify-between border-t pt-3 mt-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Medicin:"})," unidad"]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total esperado (auto): "}),isNaN(L)?"":L.toFixed(2)]})]}),i.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2 mt-2",children:[i.jsx("button",{type:"button",onClick:k,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Limpiar"}),i.jsx("button",{type:"button",onClick:()=>me(!1),className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Guardar"})]})]})]})}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Subcat."}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"SKU"}),i.jsx("th",{className:"p-2 border",children:"Talla"}),i.jsx("th",{className:"p-2 border",children:"Color"}),i.jsx("th",{className:"p-2 border",children:"Marca"}),i.jsx("th",{className:"p-2 border",children:"Gnero"}),i.jsx("th",{className:"p-2 border",children:"Cdigo Cliente"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:R?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Cargando"})}):E.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Sin productos"})}):E.map(D=>{var M;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:(M=D.createdAt)!=null&&M.toDate?D.createdAt.toDate().toISOString().slice(0,10):""}),i.jsx("td",{className:"p-2 border",children:D.category}),i.jsx("td",{className:"p-2 border",children:D.name}),i.jsx("td",{className:"p-2 border",children:D.sku}),i.jsx("td",{className:"p-2 border",children:D.size||""}),i.jsx("td",{className:"p-2 border",children:D.color||""}),i.jsx("td",{className:"p-2 border",children:D.brand||""}),i.jsx("td",{className:"p-2 border",children:D.gender||""}),i.jsx("td",{className:"p-2 border",children:D.clientCode||""}),i.jsx("td",{className:"p-2 border",children:D.notes||""}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>V(D),children:"Borrar"})})]},D.id)})})]})}),de&&i.jsx("p",{className:"mt-2 text-sm",children:de})]})}async function SCe(e){const{productId:t,quantity:r,saleDate:n,saleId:a}=e,s=Math.max(0,Math.floor(Number(r||0)));if(!t||s<=0)throw new Error("Parmetros invlidos para allocateSaleFIFOClothes");const o=Ht(At(ke,"inventory_clothes_batches"),Xt("productId","==",t)),u=(await jt(o)).docs.map(A=>({id:A.id,data:A.data()})).sort((A,f)=>{var x,y;const h=String(A.data.date||""),m=String(f.data.date||"");if(h!==m)return h<m?-1:1;const p=((x=A.data.createdAt)==null?void 0:x.seconds)??0,g=((y=f.data.createdAt)==null?void 0:y.seconds)??0;return p-g}).map(A=>Mt(ke,"inventory_clothes_batches",A.id)),d=[];return await Ks(ke,async A=>{const f=await Promise.all(u.map(m=>A.get(m)));let h=s;for(let m=0;m<u.length&&h>0;m++){const p=u[m],g=f[m];if(!g.exists())continue;const x=g.data(),y=Math.max(0,Math.floor(Number(x.quantity||0))),b=Number.isFinite(Number(x.remaining))?Math.max(0,Math.floor(Number(x.remaining||0))):y;if(b<=0)continue;const _=Math.min(b,h),T=Math.max(0,b-_);A.update(p,{remaining:T}),d.push({batchId:p.id,qty:_,batchDate:String(x.date||""),productName:String(x.productName||"")}),h-=_}if(h>0)throw new Error(`Inventario insuficiente. Faltan ${h} unidades.`);if(a)for(const m of d)await en(At(ke,"batch_clothes_allocations"),{saleId:a,saleDate:n,productId:t,productName:m.productName??"",batchId:m.batchId,batchDate:m.batchDate??"",quantity:m.qty,createdAt:zt.now()})}),{allocations:d}}async function _k(e){const t=Mt(ke,"sales_clothes",e),r=await Qi(t);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),a=[];if(Array.isArray(n.items)&&n.items.length>0){const l={};if(n.allocationsByItem&&typeof n.allocationsByItem=="object")for(const c of Object.keys(n.allocationsByItem)){const u=n.allocationsByItem[c],d=String((u==null?void 0:u.productId)||c||"");if(!d)continue;const A=Array.isArray(u==null?void 0:u.allocations)?u.allocations:[];l[d]=A.map(f=>({batchId:String(f.batchId),qty:Math.max(0,Math.floor(Number(f.qty||f.quantity||0)))}))}if(Array.isArray(n.allocationsByItem))for(const c of n.allocationsByItem){const u=String((c==null?void 0:c.productId)||"");if(!u)continue;const d=Array.isArray(c==null?void 0:c.allocations)?c.allocations:[];l[u]=d.map(A=>({batchId:String(A.batchId),qty:Math.max(0,Math.floor(Number(A.qty||A.quantity||0)))}))}for(const c of n.items){const u=String((c==null?void 0:c.productId)||"");if(!u)continue;const d=Math.max(0,Math.floor(Number((c==null?void 0:c.qty)||(c==null?void 0:c.quantity)||0))),A=Array.isArray(c==null?void 0:c.allocations)?c.allocations.map(f=>({batchId:String(f.batchId),qty:Math.max(0,Math.floor(Number(f.qty||f.quantity||0)))})):l[u]||[];a.push({productId:u,productName:String((c==null?void 0:c.productName)||""),qty:d,allocations:A.length?A:void 0})}}else{const l=n.item||{},c=String(l.productId||n.productId||""),u=Math.max(0,Math.floor(Number(l.qty??n.quantity??0))),d=Array.isArray(n.allocations)?n.allocations.map(A=>({batchId:String(A.batchId),qty:Math.max(0,Math.floor(Number(A.qty||A.quantity||0)))})):[];c&&u>0&&a.push({productId:c,productName:String(l.productName||n.productName||""),qty:u,allocations:d.length?d:void 0})}return a.length===0?(await Ks(ke,async l=>{l.delete(t)}),{restored:0}):a.every(l=>Array.isArray(l.allocations)&&l.allocations.length>0)?(await Ks(ke,async c=>{const u=[];for(const A of a)for(const f of A.allocations||[])u.push({ref:Mt(ke,"inventory_clothes_batches",f.batchId),addBack:Math.max(0,Math.floor(Number(f.qty||0)))});const d=await Promise.all(u.map(A=>c.get(A.ref)));for(let A=0;A<u.length;A++){const f=d[A];if(!f.exists())continue;const h=f.data(),m=Math.max(0,Math.floor(Number(h.remaining||0)));c.update(u[A].ref,{remaining:m+u[A].addBack})}c.delete(t)}),{restored:a.reduce((c,u)=>c+(u.allocations||[]).reduce((d,A)=>d+A.qty,0),0)}):(await Ks(ke,async l=>{const c={};for(const h of a){if(!h.productId||h.qty<=0)continue;const m=Ht(At(ke,"inventory_clothes_batches"),Xt("productId","==",h.productId)),g=(await jt(m)).docs.map(x=>{const y=x.data(),b=Math.max(0,Math.floor(Number(y.quantity||0))),_=Number.isFinite(Number(y.remaining))?Math.max(0,Math.floor(Number(y.remaining||0))):b;return{id:x.id,date:String(y.date||""),quantity:b,remaining:_}}).sort((x,y)=>x.date.localeCompare(y.date));c[h.productId]=g}const u=[];for(const h of a){if(!h.productId||h.qty<=0)continue;if(Array.isArray(h.allocations)&&h.allocations.length>0){for(const g of h.allocations)u.push({id:g.batchId,addBack:Math.max(0,Math.floor(Number(g.qty||0)))});continue}const m=c[h.productId]||[];let p=h.qty;for(const g of m){if(p<=0)break;const x=Math.max(0,g.quantity-g.remaining);if(x<=0)continue;const y=Math.min(x,p);u.push({id:g.id,addBack:y}),p-=y}for(const g of m){if(p<=0)break;const x=Math.min(p,h.qty);u.push({id:g.id,addBack:x}),p-=x}}const d={};for(const h of u)d[h.id]=(d[h.id]||0)+Math.max(0,Math.floor(Number(h.addBack||0)));const A=Object.keys(d).map(h=>Mt(ke,"inventory_clothes_batches",h)),f=await Promise.all(A.map(h=>l.get(h)));for(let h=0;h<A.length;h++){const m=f[h];if(!m.exists())continue;const p=m.data(),g=Math.max(0,Math.floor(Number(p.remaining||0))),x=Math.max(0,Math.floor(Number(d[A[h].id]||0)));l.update(A[h],{remaining:g+x})}l.delete(t)}),{restored:a.reduce((l,c)=>l+c.qty,0)})}const tQ=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],Id=e=>`C$ ${(Number(e)||0).toFixed(2)}`;function b2(e){const t="+505 ";if(!e.startsWith(t)){const n=e.replace(/\D/g,"");return t+n.slice(0,8)}const r=e.slice(t.length).replace(/\D/g,"");return t+r.slice(0,8)}async function rQ(e){const t=Ht(At(ke,"ar_movements"),Xt("ref.saleId","==",e)),r=await jt(t);await Promise.all(r.docs.map(n=>fn(Mt(ke,"ar_movements",n.id))))}function ICe(){const[e,t]=v.useState(!1),[r,n]=v.useState(!1),[a,s]=v.useState(null),[o,l]=v.useState([]),c=async Ce=>{t(!0),n(!0),s(Ce),l([]);try{const yt=(await jt(Ht(At(ke,"sales_clothes"),Xt("__name__","==",Ce)))).docs[0],Pt=yt==null?void 0:yt.data(),qt=(Array.isArray(Pt==null?void 0:Pt.items)?Pt.items:Pt!=null&&Pt.item?[Pt.item]:[]).map(wt=>({productName:String(wt.productName||""),qty:Number(wt.qty||0),unitPrice:Number(wt.unitPrice||0),discount:Number(wt.discount||0),total:Number(wt.total||0)}));l(qt)}catch(et){console.error(et)}finally{n(!1)}},[u,d]=v.useState(""),[A,f]=v.useState("+505 "),[h,m]=v.useState(""),[p,g]=v.useState(""),[x,y]=v.useState("ACTIVO"),[b,_]=v.useState(0),[T,P]=v.useState([]),[C,S]=v.useState(!0),[I,L]=v.useState(""),[E,j]=v.useState(null),[R,W]=v.useState(""),[de,te]=v.useState("+505 "),[le,ce]=v.useState(""),[J,me]=v.useState(""),[Ee,k]=v.useState("ACTIVO"),[F,V]=v.useState(0),[D,M]=v.useState(!1),[G,O]=v.useState(null),[K,ee]=v.useState(!1),[ne,Q]=v.useState([]),[be,Z]=v.useState({saldoActual:0,totalAbonado:0,totalCargos:0}),[z,X]=v.useState(!1),[ve,re]=v.useState(0),[Ne,Me]=v.useState(new Date().toISOString().slice(0,10)),[Ve,nt]=v.useState(""),[st,lt]=v.useState(!1),[bt,ot]=v.useState(null),[Le,Ze]=v.useState(""),[ye,xe]=v.useState(0),[ue,Ge]=v.useState(""),[Je,ht]=v.useState(!1);v.useEffect(()=>{(async()=>{const Ce=Ht(At(ke,"customers_clothes"),Ur("createdAt","desc")),et=await jt(Ce),yt=[];et.forEach(Pt=>{const Lt=Pt.data();yt.push({id:Pt.id,name:Lt.name??"",phone:Lt.phone??"+505 ",place:Lt.place??"",notes:Lt.notes??"",status:Lt.status??"ACTIVO",creditLimit:Number(Lt.creditLimit??0),createdAt:Lt.createdAt??zt.now(),balance:0})});for(const Pt of yt)try{const Lt=Ht(At(ke,"ar_movements"),Xt("customerId","==",Pt.id)),qt=await jt(Lt);let wt=0;qt.forEach(ie=>wt+=Number(ie.data().amount||0)),Pt.balance=wt}catch{Pt.balance=0}P(yt),S(!1)})()},[]);const Ue=()=>{d(""),f("+505 "),m(""),g(""),y("ACTIVO"),_(0)},rt=async Ce=>{if(Ce.preventDefault(),L(""),!u.trim()){L("Ingresa el nombre.");return}const et=b2(A);if(et.length<6){L("Telfono incompleto.");return}try{const yt=await en(At(ke,"customers_clothes"),{name:u.trim(),phone:et,place:h||"",notes:p||"",status:x,creditLimit:Number(b||0),createdAt:zt.now()});P(Pt=>[{id:yt.id,name:u.trim(),phone:et,place:h||"",notes:p||"",status:x,creditLimit:Number(b||0),createdAt:zt.now(),balance:0},...Pt]),Ue(),ht(!1),L(" Cliente creado")}catch(yt){console.error(yt),L(" Error al crear cliente")}},Qe=Ce=>{j(Ce.id),W(Ce.name),te(Ce.phone||"+505 "),ce(Ce.place||""),me(Ce.notes||""),k(Ce.status||"ACTIVO"),V(Number(Ce.creditLimit||0))},Pe=()=>{j(null),W(""),te("+505 "),ce(""),me(""),k("ACTIVO"),V(0)},ze=async()=>{if(!E)return;const Ce=b2(de);if(!R.trim()){L("Ingresa el nombre.");return}try{await Lr(Mt(ke,"customers_clothes",E),{name:R.trim(),phone:Ce,place:le||"",notes:J||"",status:Ee,creditLimit:Number(F||0)}),P(et=>et.map(yt=>yt.id===E?{...yt,name:R.trim(),phone:Ce,place:le||"",notes:J||"",status:Ee,creditLimit:Number(F||0)}:yt)),Pe(),L(" Cliente actualizado")}catch(et){console.error(et),L(" Error al actualizar")}},it=async Ce=>{if(confirm(`Eliminar al cliente "${Ce.name}"?
Se devolvern al inventario todas las prendas de sus compras y se borrarn sus movimientos.`))try{S(!0);const yt=Ht(At(ke,"sales_clothes"),Xt("customerId","==",Ce.id)),Pt=await jt(yt);for(const wt of Pt.docs){const ie=wt.id;try{await _k(ie)}catch(se){console.warn("restoreSaleAndDeleteClothes error",se);try{await fn(Mt(ke,"sales_clothes",ie))}catch{}}await rQ(ie)}const Lt=Ht(At(ke,"ar_movements"),Xt("customerId","==",Ce.id)),qt=await jt(Lt);await Promise.all(qt.docs.map(wt=>fn(Mt(ke,"ar_movements",wt.id)))),await fn(Mt(ke,"customers_clothes",Ce.id)),P(wt=>wt.filter(ie=>ie.id!==Ce.id)),L(" Cliente eliminado y prendas devueltas al inventario")}catch(yt){console.error(yt),L(" No se pudo eliminar el cliente.")}finally{S(!1)}},Bt=async Ce=>{O(Ce),Q([]),Z({saldoActual:0,totalAbonado:0,totalCargos:0}),M(!0),X(!1),re(0),Me(new Date().toISOString().slice(0,10)),nt(""),ot(null),ee(!0);try{const et=Ht(At(ke,"ar_movements"),Xt("customerId","==",Ce.id)),yt=await jt(et),Pt=[];yt.forEach(Lt=>{var wt,ie;const qt=Lt.data();Pt.push({id:Lt.id,date:qt.date??((ie=(wt=qt.createdAt)==null?void 0:wt.toDate)!=null&&ie.call(wt)?qt.createdAt.toDate().toISOString().slice(0,10):""),type:qt.type??"CARGO",amount:Number(qt.amount||0),ref:qt.ref||{},comment:qt.comment||"",createdAt:qt.createdAt})}),Pt.sort((Lt,qt)=>{var se,he;if(Lt.date!==qt.date)return Lt.date.localeCompare(qt.date);const wt=((se=Lt.createdAt)==null?void 0:se.seconds)||0,ie=((he=qt.createdAt)==null?void 0:he.seconds)||0;return wt-ie}),Q(Pt),ut(Pt)}catch(et){console.error(et),L(" No se pudo cargar el estado de cuenta")}finally{ee(!1)}},ut=Ce=>{const et=Ce.reduce((Lt,qt)=>Lt+(Number(qt.amount)||0),0),yt=Ce.filter(Lt=>Number(Lt.amount)<0).reduce((Lt,qt)=>Lt+Math.abs(Number(qt.amount)||0),0),Pt=Ce.filter(Lt=>Number(Lt.amount)>0).reduce((Lt,qt)=>Lt+Number(qt.amount)||0,0);Z({saldoActual:et,totalAbonado:yt,totalCargos:Pt})},It=async()=>{if(!G)return;L("");const Ce=Number(ve||0);if(!(Ce>0)){L("Ingresa un monto de abono mayor a 0.");return}const et=parseFloat(Ce.toFixed(2));if(!Ne){L("Selecciona la fecha del abono.");return}try{lt(!0);const yt={customerId:G.id,type:"ABONO",amount:-et,date:Ne,comment:Ve||"",createdAt:zt.now()},Lt={id:(await en(At(ke,"ar_movements"),yt)).id,date:Ne,type:"ABONO",amount:-et,comment:Ve||"",createdAt:zt.now()},qt=[...ne,Lt].sort((wt,ie)=>{var Ae,Be;if(wt.date!==ie.date)return wt.date.localeCompare(ie.date);const se=((Ae=wt.createdAt)==null?void 0:Ae.seconds)||0,he=((Be=ie.createdAt)==null?void 0:Be.seconds)||0;return se-he});Q(qt),ut(qt),P(wt=>wt.map(ie=>ie.id===G.id?{...ie,balance:(ie.balance||0)-et}:ie)),O(wt=>wt&&{...wt,balance:(wt.balance||0)-et}),re(0),nt(""),Me(new Date().toISOString().slice(0,10)),X(!1),L(" Abono registrado")}catch(yt){console.error(yt),L(" Error al registrar el abono")}finally{lt(!1)}},$t=Ce=>{ot(Ce.id),Ze(Ce.date||new Date().toISOString().slice(0,10)),xe(Math.abs(Number(Ce.amount||0))),Ge(Ce.comment||"")},hr=()=>{ot(null),Ze(""),xe(0),Ge("")},_e=async()=>{if(!bt)return;const Ce=ne.findIndex(Lt=>Lt.id===bt);if(Ce===-1)return;const et=ne[Ce],yt=Number(ye||0);if(!(yt>0)){L("El monto debe ser mayor a 0.");return}const Pt=et.type==="ABONO"?-parseFloat(yt.toFixed(2)):+parseFloat(yt.toFixed(2));try{await Lr(Mt(ke,"ar_movements",bt),{date:Le,amount:Pt,comment:ue||""});const Lt=[...ne];Lt[Ce]={...et,date:Le,amount:Pt,comment:ue||""},Lt.sort((wt,ie)=>{var Ae,Be;if(wt.date!==ie.date)return wt.date.localeCompare(ie.date);const se=((Ae=wt.createdAt)==null?void 0:Ae.seconds)||0,he=((Be=ie.createdAt)==null?void 0:Be.seconds)||0;return se-he}),Q(Lt),ut(Lt);const qt=Lt.reduce((wt,ie)=>wt+(Number(ie.amount)||0),0);P(wt=>wt.map(ie=>ie.id===(G==null?void 0:G.id)?{...ie,balance:qt}:ie)),O(wt=>wt&&{...wt,balance:qt}),hr(),L(" Movimiento actualizado")}catch(Lt){console.error(Lt),L(" Error al actualizar movimiento")}},dt=async Ce=>{var yt,Pt;if(confirm(`Eliminar este movimiento (${Ce.type==="ABONO"?"Abono":"Compra"}) del ${Ce.date}?${Ce.type==="CARGO"&&((yt=Ce.ref)!=null&&yt.saleId)?`
Se devolvern al inventario las prendas de esa venta.`:""}`))try{if(S(!0),Ce.type==="CARGO"&&((Pt=Ce.ref)!=null&&Pt.saleId)){try{await _k(Ce.ref.saleId)}catch(wt){console.warn("restoreSaleAndDeleteClothes error",wt),S(!1),L(" No se pudo devolver inventario de la venta.");return}await rQ(Ce.ref.saleId)}else await fn(Mt(ke,"ar_movements",Ce.id));const Lt=ne.filter(wt=>{var ie,se;return Ce.type==="CARGO"&&((ie=Ce.ref)!=null&&ie.saleId)?((se=wt.ref)==null?void 0:se.saleId)!==Ce.ref.saleId:wt.id!==Ce.id});Q(Lt),ut(Lt);const qt=Lt.reduce((wt,ie)=>wt+(Number(ie.amount)||0),0);P(wt=>wt.map(ie=>ie.id===(G==null?void 0:G.id)?{...ie,balance:qt}:ie)),O(wt=>wt&&{...wt,balance:qt}),L(" Movimiento eliminado")}catch(Lt){console.error(Lt),L(" Error al eliminar movimiento")}finally{S(!1)}},gt=v.useMemo(()=>[...T].sort((Ce,et)=>{var yt,Pt;return Ce.status!==et.status?Ce.status==="BLOQUEADO"?1:-1:(((yt=et.createdAt)==null?void 0:yt.seconds)||0)-(((Pt=Ce.createdAt)==null?void 0:Pt.seconds)||0)}),[T]);return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Ropa)"}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>ht(!0),type:"button",children:"Crear Cliente"})]}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Telfono"}),i.jsx("th",{className:"p-2 border",children:"Lugar"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Lmite"}),i.jsx("th",{className:"p-2 border",children:"Saldo"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:C?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):gt.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin clientes"})}):gt.map(Ce=>{var yt;const et=E===Ce.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:(yt=Ce.createdAt)!=null&&yt.toDate?Ce.createdAt.toDate().toISOString().slice(0,10):""}),i.jsx("td",{className:"p-2 border",children:et?i.jsx("input",{className:"w-full border p-1 rounded",value:R,onChange:Pt=>W(Pt.target.value)}):Ce.name}),i.jsx("td",{className:"p-2 border",children:et?i.jsx("input",{className:"w-full border p-1 rounded",value:de,onChange:Pt=>te(b2(Pt.target.value))}):Ce.phone}),i.jsx("td",{className:"p-2 border",children:et?i.jsxs("select",{className:"w-full border p-1 rounded",value:le,onChange:Pt=>ce(Pt.target.value),children:[i.jsx("option",{value:"",children:""}),tQ.map(Pt=>i.jsx("option",{value:Pt,children:Pt},Pt))]}):Ce.place||""}),i.jsx("td",{className:"p-2 border",children:et?i.jsxs("select",{className:"w-full border p-1 rounded",value:Ee,onChange:Pt=>k(Pt.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Ce.status==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:Ce.status})}),i.jsx("td",{className:"p-2 border",children:et?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(F)?"":F,onChange:Pt=>V(Math.max(0,Number(Pt.target.value||0)))}):Id(Ce.creditLimit||0)}),i.jsx("td",{className:"p-2 border font-semibold",children:Id(Ce.balance||0)}),i.jsx("td",{className:"p-2 border",children:et?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:J,onChange:Pt=>me(Pt.target.value),maxLength:500}):i.jsx("span",{title:Ce.notes||"",children:(Ce.notes||"").length>40?(Ce.notes||"").slice(0,40)+"":Ce.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:et?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:ze,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Pe,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Qe(Ce),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>it(Ce),children:"Borrar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>Bt(Ce),title:"Ver compras y abonos",children:"Estado de cuenta"})]})})})]},Ce.id)})})]})}),I&&i.jsx("p",{className:"mt-2 text-sm",children:I}),Je&&nu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>ht(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ht(!1),type:"button",children:"Cerrar"})]}),i.jsxs("form",{onSubmit:rt,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:u,onChange:Ce=>d(Ce.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded",value:A,onChange:Ce=>f(b2(Ce.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:h,onChange:Ce=>m(Ce.target.value),children:[i.jsx("option",{value:"",children:""}),tQ.map(Ce=>i.jsx("option",{value:Ce,children:Ce},Ce))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:x,onChange:Ce=>y(Ce.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:b===0?"":b,onChange:Ce=>_(Math.max(0,Number(Ce.target.value||0))),placeholder:"Ej: 2000"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:p,onChange:Ce=>g(Ce.target.value),maxLength:500,placeholder:"Notas del cliente"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[p.length,"/500"]})]}),i.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ht(!1),children:"Cancelar"}),i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),D&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(G==null?void 0:G.name)||""]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{re(0),Me(new Date().toISOString().slice(0,10)),nt(""),X(!0)},children:"Abonar"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>M(!1),children:"Cerrar"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-xl font-semibold",children:Id(be.saldoActual)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),i.jsx("div",{className:"text-xl font-semibold",children:Id(be.totalAbonado)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),i.jsx("div",{className:"text-xl font-semibold",children:Id(be.saldoActual)})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Referencia"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:K?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):ne.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):ne.map(Ce=>{var yt,Pt;const et=bt===Ce.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:et?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:Le,onChange:Lt=>Ze(Lt.target.value)}):Ce.date||""}),i.jsx("td",{className:"p-2 border",children:Ce.amount>=0?(yt=Ce.ref)!=null&&yt.saleId?i.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",title:"Ver piezas de esta compra",onClick:()=>c(Ce.ref.saleId),children:"COMPRA (CARGO)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (CARGO)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),i.jsx("td",{className:"p-2 border",children:(Pt=Ce.ref)!=null&&Pt.saleId?`Venta #${Ce.ref.saleId}`:""}),i.jsx("td",{className:"p-2 border",children:et?i.jsx("input",{className:"w-full border p-1 rounded",value:ue,onChange:Lt=>Ge(Lt.target.value),placeholder:"Comentario"}):i.jsx("span",{title:Ce.comment||"",children:(Ce.comment||"").length>40?(Ce.comment||"").slice(0,40)+"":Ce.comment||""})}),i.jsx("td",{className:"p-2 border font-semibold",children:et?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(ye)?"":ye,onChange:Lt=>{const qt=Number(Lt.target.value||0),wt=Number.isFinite(qt)?Math.max(0,parseFloat(qt.toFixed(2))):0;xe(wt)},placeholder:"0.00",title:Ce.type==="ABONO"?"Se guardar como negativo":"Se guardar como positivo"}):Id(Ce.amount)}),i.jsx("td",{className:"p-2 border",children:et?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:_e,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:hr,children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>$t(Ce),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>dt(Ce),children:"Borrar"})]})})]},Ce.id)})})]})})]})}),z&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(G==null?void 0:G.name)||""]}),i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:Ne,onChange:Ce=>Me(Ce.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto del abono"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:ve===0?"":ve,onChange:Ce=>{const et=Number(Ce.target.value||0),yt=Number.isFinite(et)?Math.max(0,parseFloat(et.toFixed(2))):0;re(yt)},placeholder:"0.00"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se guarda con 2 decimales (se registrar como ABONO negativo)."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Ve,onChange:Ce=>nt(Ce.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[Ve.length,"/250"]})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>X(!1),disabled:st,children:"Cancelar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:It,disabled:st,children:st?"Guardando...":"Guardar abono"})]})]})}),e&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[65]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Piezas vendidas"," ",a?` #${a}`:""]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>t(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):o.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):o.map((Ce,et)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:Ce.productName}),i.jsx("td",{className:"p-2 border text-right",children:Ce.qty}),i.jsx("td",{className:"p-2 border text-right",children:Id(Ce.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:Id(Ce.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:Id(Ce.total)})]},et))})]})})]})})]})}const Ap=e=>`C$ ${(Number(e)||0).toFixed(2)}`,BCe=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"];async function jCe(e){if(!e)return 0;const t=Ht(At(ke,"inventory_clothes_batches"),Xt("productId","==",e)),r=await jt(t);let n="0000-00-00",a=-1,s=0;return r.forEach(o=>{const l=o.data(),c=String(l.date||"0000-00-00"),u=Number(l.salePrice||0),d=l.createdAt,A=((d==null?void 0:d.seconds)??0)*1e3+((d==null?void 0:d.nanoseconds)??0)/1e6;c>n?(n=c,a=A,s=u):c===n&&A>a&&(a=A,s=u)}),Number(s||0)}async function nQ(e){if(!e)return 0;const t=Ht(At(ke,"inventory_clothes_batches"),Xt("productId","==",e)),r=await jt(t);let n=0;return r.forEach(a=>n+=Number(a.data().remaining||0)),n}function aQ(e){const t="+505 ";if(!e.startsWith(t)){const n=e.replace(/\D/g,"");return t+n.slice(0,8)}const r=e.slice(t.length).replace(/\D/g,"");return t+r.slice(0,8)}function PCe(){const[e,t]=v.useState([]),[r,n]=v.useState([]),[a,s]=v.useState({}),[o,l]=v.useState("CONTADO"),[c,u]=v.useState(""),[d,A]=v.useState(""),[f,h]=v.useState(new Date().toISOString().slice(0,10)),[m,p]=v.useState(""),[g,x]=v.useState([]),y=v.useMemo(()=>g.reduce((Z,z)=>Z+(z.qty||0),0),[g]),b=v.useMemo(()=>{const Z=g.reduce((z,X)=>{const ve=Math.max(0,(Number(X.unitPrice)||0)*(X.qty||0)-(Number(X.discount)||0));return z+ve},0);return Math.floor(Z*100)/100},[g]),[_,T]=v.useState(0),[P,C]=v.useState(""),[S,I]=v.useState(!1),[L,E]=v.useState(!1),[j,R]=v.useState(""),[W,de]=v.useState("+505 "),[te,le]=v.useState(""),[ce,J]=v.useState(""),[me,Ee]=v.useState("ACTIVO"),[k,F]=v.useState(0),V=()=>{R(""),de("+505 "),le(""),J(""),Ee("ACTIVO"),F(0)};v.useEffect(()=>{(async()=>{const Z=Ht(At(ke,"customers_clothes"),Ur("createdAt","desc")),z=await jt(Z),X=[];z.forEach(st=>{const lt=st.data();X.push({id:st.id,name:lt.name??"",phone:lt.phone??"+505 ",place:lt.place??"",status:lt.status??"ACTIVO",creditLimit:Number(lt.creditLimit??0),balance:0})});for(const st of X)try{const lt=Ht(At(ke,"ar_movements"),Xt("customerId","==",st.id)),bt=await jt(lt);let ot=0;bt.forEach(Le=>ot+=Number(Le.data().amount||0)),st.balance=ot}catch{st.balance=0}t(X);const ve=Ht(At(ke,"products_clothes"),Ur("createdAt","desc")),re=await jt(ve),Ne=[];re.forEach(st=>{const lt=st.data();Ne.push({id:st.id,name:lt.name??"(sin nombre)",sku:lt.sku??""})}),n(Ne);const Me=Ht(At(ke,"inventory_clothes_batches"),Xt("remaining",">",0)),Ve=await jt(Me),nt={};Ve.forEach(st=>{const lt=st.data(),bt=lt.productId||"",ot=Number(lt.remaining||0);bt&&(nt[bt]=(nt[bt]||0)+ot)}),s(nt)})()},[]);const D=v.useMemo(()=>e.find(Z=>Z.id===c),[e,c]),M=(D==null?void 0:D.balance)||0,G=o==="CREDITO"?M+Math.max(0,Number(b||0))-Math.max(0,Number(_||0)):0,O=async Z=>{if(!Z)return;if(g.some(Ne=>Ne.productId===Z)){p("");return}const z=r.find(Ne=>Ne.id===Z);if(!z){p("");return}let X=await jCe(Z);X||(X=Number((z==null?void 0:z.price)||0));const ve=await nQ(Z),re={productId:Z,productName:z.name||"",sku:z.sku||"",unitPrice:Number(X)||0,available:Number(ve)||0,qty:0,discount:0};x(Ne=>[...Ne,re]),p("")},K=(Z,z)=>{x(X=>X.map(ve=>{if(ve.productId!==Z)return ve;if(z==="")return{...ve,qty:0};const re=Math.max(0,Math.floor(Number(z)));return{...ve,qty:re}}))},ee=(Z,z)=>{x(X=>X.map(ve=>{if(ve.productId!==Z)return ve;if(z==="")return{...ve,discount:0};const re=Math.max(0,Math.floor(Number(z)));return{...ve,discount:re}}))},ne=Z=>x(z=>z.filter(X=>X.productId!==Z)),Q=async()=>{if(!f)return"Selecciona la fecha.";if(g.length===0)return"Agrega al menos un producto.";const Z=g.filter(z=>(z.qty||0)>0);if(Z.length===0)return"Debes ingresar cantidades (> 0) en al menos un producto.";if(!(b>0))return"El total debe ser mayor a cero.";if(o==="CONTADO"){if(!d.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!c)return"Selecciona un cliente (crdito).";if(_<0)return"El pago inicial no puede ser negativo.";if(_>b)return"El pago inicial no puede superar el total.";if((D==null?void 0:D.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede facturar a crdito."}for(const z of Z){const X=await nQ(z.productId);if(z.qty>X)return`Inventario insuficiente para "${z.productName}". Disponible: ${X} unidades.`;const ve=(Number(z.unitPrice)||0)*(z.qty||0),re=Number(z.discount)||0;if(!Number.isInteger(re)||re<0)return`El descuento en "${z.productName}" debe ser entero y  0.`;if(re>ve)return`El descuento en "${z.productName}" no puede exceder C$ ${ve.toFixed(2)}.`}return null},be=async Z=>{Z.preventDefault(),C("");const z=await Q();if(z){C(" "+z);return}try{I(!0);const X=g.filter(Me=>(Me.qty||0)>0).map(Me=>{const Ve=(Number(Me.unitPrice)||0)*(Me.qty||0),nt=Math.max(0,Math.floor(Number(Me.discount)||0)),st=Math.max(0,Ve-nt);return{productId:Me.productId,productName:Me.productName,sku:Me.sku||"",qty:Me.qty,unitPrice:Number(Me.unitPrice)||0,discount:nt,total:Math.floor(st*100)/100}}),ve={type:o,date:f,createdAt:zt.now(),itemsTotal:Number(b)||0,total:Number(b)||0,quantity:Number(y)||0,items:X};o==="CONTADO"?ve.customerName=d.trim():(ve.customerId=c,ve.downPayment=Number(_)||0);const re=await en(At(ke,"sales_clothes"),ve);if(o==="CREDITO"&&c){const Me={customerId:c,date:f,createdAt:zt.now(),ref:{saleId:re.id}};await en(At(ke,"ar_movements"),{...Me,type:"CARGO",amount:Number(b)||0}),Number(_)>0&&await en(At(ke,"ar_movements"),{...Me,type:"ABONO",amount:-Number(_)})}const Ne={};for(const Me of X)if(Me.qty>0){const{allocations:Ve}=await SCe({productId:Me.productId,quantity:Me.qty,saleDate:f,saleId:re.id});Ne[Me.productId]={productId:Me.productId,allocations:Ve}}await Lr(Mt(ke,"sales_clothes",re.id),{allocationsByItem:Ne}),l("CONTADO"),u(""),A(""),h(new Date().toISOString().slice(0,10)),x([]),T(0),o==="CREDITO"&&c&&t(Me=>Me.map(Ve=>Ve.id===c?{...Ve,balance:(Ve.balance||0)+(Number(b)||0)-(Number(_)||0)}:Ve)),C(" Venta registrada"),(async()=>{const Me=Ht(At(ke,"inventory_clothes_batches"),Xt("remaining",">",0)),Ve=await jt(Me),nt={};Ve.forEach(st=>{const lt=st.data(),bt=lt.productId||"",ot=Number(lt.remaining||0);bt&&(nt[bt]=(nt[bt]||0)+ot)}),s(nt)})()}catch(X){console.error(X),C(" Error al guardar la venta")}finally{I(!1)}};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas (Ropa)"}),i.jsxs("form",{onSubmit:be,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:o,onChange:Z=>l(Z.target.value),children:[i.jsx("option",{value:"CONTADO",children:"Contado"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),o==="CONTADO"?i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del cliente (contado)"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Cliente Mostrador",value:d,onChange:Z=>A(Z.target.value)})]}):i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("select",{className:"flex-1 border p-2 rounded",value:c,onChange:Z=>u(Z.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un cliente"}),e.map(Z=>i.jsxs("option",{value:Z.status==="ACTIVO"?Z.id:"",disabled:Z.status==="BLOQUEADO",children:[Z.name," | ",Z.phone," | Saldo: ",Ap(Z.balance||0)]},Z.id))]}),i.jsx("button",{type:"button",className:"px-20 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>E(!0),children:"Crear Cliente"})]}),i.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-lg font-semibold",children:Ap(M)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:_===0?"":_,onChange:Z=>T(Math.max(0,Number(Z.target.value||0))),placeholder:"0.00"})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),i.jsx("div",{className:"text-lg font-semibold",children:Ap(G)})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:f,onChange:Z=>h(Z.target.value)})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:async Z=>{const z=Z.target.value;p(z),await O(z)},children:[i.jsx("option",{value:"",children:"Selecciona un producto"}),r.map(Z=>{const z=g.some(re=>re.productId===Z.id),X=a[Z.id]||0,ve=z||X<=0;return i.jsxs("option",{value:ve?"":Z.id,disabled:ve,children:[Z.name," ",Z.sku?` ${Z.sku}`:""," ",X>0?`(disp: ${X})`:"(sin stock)",z?" (seleccionado)":""]},Z.id)})]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Productos sin existencias se muestran en gris y no se pueden seleccionar."})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsxs("div",{className:"border rounded overflow-hidden",children:[i.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 px-3 py-2 text-xs font-semibold border-b",children:[i.jsx("div",{className:"col-span-4",children:"Producto"}),i.jsx("div",{className:"col-span-2 text-right",children:"Precio"}),i.jsx("div",{className:"col-span-2 text-right",children:"Existencias"}),i.jsx("div",{className:"col-span-1 text-right",children:"Cantidad"}),i.jsx("div",{className:"col-span-1 text-right",children:"Descuento"}),i.jsx("div",{className:"col-span-1 text-right",children:"Monto"}),i.jsx("div",{className:"col-span-1 text-center",children:"Quitar"})]}),g.length===0?i.jsx("div",{className:"px-3 py-4 text-sm text-gray-500",children:"No hay productos agregados."}):g.map(Z=>{const z=Math.max(0,(Z.available||0)-(Z.qty||0)),X=(Number(Z.unitPrice)||0)*(Z.qty||0),ve=Math.max(0,X-(Number(Z.discount)||0));return i.jsxs("div",{className:"grid grid-cols-12 items-center px-3 py-2 border-b text-sm gap-x-2",children:[i.jsx("div",{className:"col-span-4",children:i.jsxs("div",{className:"font-medium",children:[Z.productName,Z.sku?`  ${Z.sku}`:""]})}),i.jsx("div",{className:"col-span-2 text-right",children:Ap(Z.unitPrice)}),i.jsx("div",{className:"col-span-2 text-right",children:z}),i.jsx("div",{className:"col-span-1",children:i.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(Z.qty)||Z.qty===0?"":Z.qty,onChange:re=>K(Z.productId,re.target.value),inputMode:"numeric",placeholder:"0",title:"Cantidad de piezas"})}),i.jsx("div",{className:"col-span-1",children:i.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(Z.discount)||Z.discount===0?"":Z.discount,onChange:re=>ee(Z.productId,re.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento entero (C$)"})}),i.jsx("div",{className:"col-span-1 text-right",children:Ap(ve)}),i.jsx("div",{className:"col-span-1 text-center",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 hover:bg-red-200",onClick:()=>ne(Z.productId),title:"Quitar producto",children:""})})]},Z.productId)})]}),g.length>0&&i.jsxs("div",{className:"flex justify-end gap-6 mt-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Piezas totales: "}),i.jsx("span",{className:"font-semibold",children:y})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Total: "}),i.jsx("span",{className:"font-semibold",children:Ap(b)})]})]})]}),i.jsx("div",{className:"md:col-span-2",children:i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",disabled:S,children:S?"Guardando...":"Registrar venta"})})]}),P&&i.jsx("p",{className:"mt-2 text-sm",children:P}),L&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-xl p-4",children:[i.jsx("h3",{className:"text-lg font-bold mb-3",children:"Nuevo cliente"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",value:j,onChange:Z=>R(Z.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded",value:W,onChange:Z=>de(aQ(Z.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:te,onChange:Z=>le(Z.target.value),children:[i.jsx("option",{value:"",children:""}),BCe.map(Z=>i.jsx("option",{value:Z,children:Z},Z))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:me,onChange:Z=>Ee(Z.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:k===0?"":k,onChange:Z=>F(Math.max(0,Number(Z.target.value||0))),placeholder:"Ej: 2000"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:ce,onChange:Z=>J(Z.target.value),maxLength:500})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{V(),E(!1)},children:"Cancelar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:async()=>{if(C(""),!j.trim()){C("Ingresa el nombre del nuevo cliente.");return}const Z=aQ(W);try{const z=await en(At(ke,"customers_clothes"),{name:j.trim(),phone:Z,place:te||"",notes:ce||"",status:me,creditLimit:Number(k||0),createdAt:zt.now()}),X={id:z.id,name:j.trim(),phone:Z,place:te||"",status:me,creditLimit:Number(k||0),balance:0};t(ve=>[X,...ve]),u(z.id),V(),E(!1),C(" Cliente creado")}catch(z){console.error(z),C(" Error al crear cliente")}},children:"Guardar cliente"})]})]})}),S&&i.jsx("div",{className:"fixed inset-0 z-[70] bg-black/40 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border px-4 py-3 flex items-center gap-3",children:[i.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("span",{className:"font-medium",children:"Guardando venta"})]})})]})}const Ds=e=>`C$ ${(Number(e)||0).toFixed(2)}`;function LN(e){var r;const t=e==null?void 0:e.date;return t||((r=e==null?void 0:e.createdAt)!=null&&r.toDate?ir(e.createdAt.toDate(),"yyyy-MM-dd"):"")}function kCe(e,t){const r=LN(e);if(!r)return null;if(Array.isArray(e.items))return{id:t,date:r,type:e.type||"CONTADO",total:Number(e.total??e.itemsTotal??0),items:e.items.map(o=>({productId:String(o.productId||""),productName:String(o.productName||""),sku:o.sku||"",qty:Number(o.qty||0),unitPrice:Number(o.unitPrice??(Number(o.total||0)/Math.max(1,Number(o.qty||0))||0)),discount:Number(o.discount||0)})),customerId:e.customerId||void 0,customerName:e.customerName||void 0};const n=e.item||{},a=Number(e.quantity??n.qty??0),s=Number(e.total??e.itemsTotal??n.total??0);return{id:t,date:r,type:e.type||"CONTADO",total:Number(e.total??e.itemsTotal??s??0),items:[{productId:String(n.productId||e.productId||""),productName:String(n.productName||e.productName||""),sku:n.sku||e.sku||"",qty:a,unitPrice:Number(n.unitPrice??(s&&a?s/a:0)),discount:Number(n.discount||0)}],customerId:e.customerId||void 0,customerName:e.customerName||void 0}}function TCe(e,t,r,n){const a={};for(const l of e)a[l.productId]||(a[l.productId]={productName:l.productName,lots:[]}),a[l.productId].lots.push({date:l.date,qtyLeft:Number(l.quantity||0),cost:Number(l.purchasePrice||0)});for(const l of Object.keys(a))a[l].lots.sort((c,u)=>c.date.localeCompare(u.date));const s=[...t].sort((l,c)=>l.date.localeCompare(c.date));let o=0;for(const l of s)for(const c of l.items||[]){const u=a[c.productId];if(!u)continue;let d=Number(c.qty||0);if(!(d<=0))for(const A of u.lots){if(d<=0)break;if(A.qtyLeft<=0)continue;const f=Math.min(A.qtyLeft,d);l.date>=r&&l.date<=n&&(o+=f*A.cost),A.qtyLeft-=f,d-=f}}return o}function FCe(){const{refreshKey:e,refresh:t}=Pc(),[r,n]=v.useState(ir(gu(new Date),"yyyy-MM-dd")),[a,s]=v.useState(ir(pu(new Date),"yyyy-MM-dd")),[o,l]=v.useState([]),[c,u]=v.useState([]),[d,A]=v.useState([]),[f,h]=v.useState([]),[m,p]=v.useState([]),[g,x]=v.useState([]),[y,b]=v.useState(!0),[_,T]=v.useState(""),[P,C]=v.useState(!1),[S,I]=v.useState(null),[L,E]=v.useState([]),[j,R]=v.useState(!1),[W,de]=v.useState({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});v.useEffect(()=>{(async()=>{b(!0),T("");try{const k=await jt(At(ke,"sales_clothes")),F=[],V=[];k.forEach(Z=>{const z=Z.data(),X=kCe(z,Z.id);X&&(X.date<=a&&F.push(X),X.date>=r&&X.date<=a&&V.push(X))}),u(F),l(V);const D=await jt(At(ke,"inventory_clothes_batches")),M=[];D.forEach(Z=>{const z=Z.data(),X=LN(z);!X||X>a||M.push({id:Z.id,productId:z.productId,productName:z.productName||"",date:X,quantity:Number(z.quantity||0),remaining:Number(z.remaining||0),purchasePrice:Number(z.purchasePrice||0)})}),A(M);const G=await jt(At(ke,"expenses_clothes")),O=[];G.forEach(Z=>{const z=Z.data(),X=LN(z);X&&X>=r&&X<=a&&O.push({id:Z.id,date:X,category:z.category||"",description:z.description||"",amount:Number(z.amount||0),status:z.status||""})}),h(O);const K=await jt(At(ke,"ar_movements")),ee=[],ne={};K.forEach(Z=>{const z=Z.data(),X=LN(z);if(!X)return;const ve=z.customerId,re=Number(z.amount||0);ve&&(ne[ve]=(ne[ve]||0)+re),z.type==="ABONO"&&X>=r&&X<=a&&ee.push({id:Z.id,customerId:ve,type:"ABONO",amount:re,date:X})}),p(ee);const Q=await jt(At(ke,"customers_clothes")),be=[];Q.forEach(Z=>{const z=Z.data();be.push({id:Z.id,name:z.name||"",balance:ne[Z.id]||0})}),x(be)}catch(k){console.error(k),T(" Error cargando datos del dashboard.")}finally{b(!1)}})()},[r,a,e]);const te=v.useMemo(()=>{try{return TCe(d,c,r,a)}catch(k){return console.error(k),0}},[d,c,r,a]),le=v.useMemo(()=>{const k=o.reduce((ne,Q)=>ne+(Q.total||0),0),F=f.reduce((ne,Q)=>ne+(Q.amount||0),0),V=k-te,D=V-F,M=m.reduce((ne,Q)=>ne+Math.abs(Q.amount||0),0),G=g.filter(ne=>(ne.balance||0)>0),O=G.reduce((ne,Q)=>ne+(Q.balance||0),0);let K=0,ee=0;for(const ne of o){const Q=(ne.items||[]).reduce((be,Z)=>be+(Number(Z.qty)||0),0);ne.type==="CONTADO"?K+=Q:ee+=Q}return{ventasTotales:k,costoMercaderia:te,gastosPeriodo:F,gananciaAntes:V,gananciaDespues:D,abonosRecibidos:M,saldosPendientes:O,clientesConSaldo:G.length,prendasCash:K,prendasCredito:ee}},[o,f,m,g,te]),ce=v.useMemo(()=>{const k={};for(const F of o){if(F.type!=="CREDITO"||!F.customerId)continue;const V=(F.items||[]).reduce((D,M)=>D+(Number(M.qty)||0),0);k[F.customerId]=(k[F.customerId]||0)+V}return g.filter(F=>(F.balance||0)>0).map(F=>({customerId:F.id,name:F.name,prendasCredito:k[F.id]||0,saldo:F.balance||0})).sort((F,V)=>V.saldo-F.saldo)},[g,o]),J=v.useMemo(()=>{const k={};return g.forEach(F=>k[F.id]=F.name),k},[g]),me=v.useMemo(()=>[...o].sort((k,F)=>F.date.localeCompare(k.date)).map(k=>{var D;const F=(k.items||[]).reduce((M,G)=>M+(Number(G.qty)||0),0);let V="Cash";return k.type==="CREDITO"&&k.customerId?V=J[k.customerId]||"":k.type==="CONTADO"&&(V=((D=k.customerName)==null?void 0:D.trim())||"Cash"),{id:k.id,date:k.date,type:k.type==="CREDITO"?"Crdito":"Cash",customer:V,piezas:F,total:Number(k.total||0)}}),[o,J]),Ee=async k=>{C(!0),I({id:k.customerId,name:k.name}),E([]),R(!0),de({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});try{const F=[];let V=0,D=0,M=0;for(const ee of o)if(!(ee.type!=="CREDITO"||ee.customerId!==k.customerId))for(const ne of ee.items||[]){const Q=Number(ne.qty||0),be=Number(ne.unitPrice||0),Z=Q*be,z=Math.max(0,Number(ne.discount||0)),X=Math.max(0,Z-z);F.push({saleId:ee.id,date:ee.date,productName:ne.productName,sku:ne.sku||"",qty:Q,unitPrice:be,lineTotal:Z,discount:z,lineFinal:X}),V+=Z,D+=z,M+=X}let G=0;for(const ee of m)ee.customerId===k.customerId&&(G+=Math.abs(ee.amount||0));const O=g.find(ee=>ee.id===k.customerId),K=(O==null?void 0:O.balance)||0;E(F),de({totalBruto:V,totalDescuento:D,totalFiado:M,saldoActual:K,abonadoPeriodo:G})}catch(F){console.error(F),T(" No se pudo cargar el detalle del cliente.")}finally{R(!1)}};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas (Ropa)"}),i.jsx(bu,{onClick:t,loading:y})]}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:k=>n(k.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:k=>s(k.target.value)})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),i.jsx("div",{className:"text-xl font-semibold",children:Ds(le.ventasTotales)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Cash + Crdito del periodo."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),i.jsx("div",{className:"text-xl font-semibold",children:Ds(le.costoMercaderia)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia antes de Gastos"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:Ds(le.gananciaAntes)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Gastos del Negocio"}),i.jsx("div",{className:"text-xl font-semibold",children:Ds(le.gastosPeriodo)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia despus de Gastos"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:Ds(le.gananciaDespues)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),i.jsx("div",{className:"text-xl font-semibold",children:Ds(le.abonosRecibidos)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),i.jsx("div",{className:"text-xl font-semibold",children:Ds(le.saldosPendientes)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),i.jsx("div",{className:"text-xl font-semibold",children:le.clientesConSaldo})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:le.prendasCash})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Crdito (vendidas)"}),i.jsx("div",{className:"text-xl font-semibold",children:le.prendasCredito})]})]}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado por cliente"}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Prendas Crdito (periodo)"}),i.jsx("th",{className:"p-2 border",children:"Saldo actual"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Cargando"})}):ce.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Sin clientes con saldo"})}):ce.map(k=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:k.name}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Ee({customerId:k.customerId,name:k.name}),title:"Ver piezas fiadas del periodo",children:k.prendasCredito})}),i.jsx("td",{className:"p-2 border font-semibold",children:Ds(k.saldo)})]},k.customerId))})]})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Transacciones del periodo"}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Piezas"}),i.jsx("th",{className:"p-2 border",children:"Monto"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):me.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin transacciones en el rango seleccionado."})}):me.map(k=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:k.date}),i.jsx("td",{className:"p-2 border",children:k.customer}),i.jsx("td",{className:"p-2 border",children:k.type}),i.jsx("td",{className:"p-2 border",children:k.piezas}),i.jsx("td",{className:"p-2 border",children:Ds(k.total)})]},k.id))})]})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Gastos del periodo"}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):f.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):f.sort((k,F)=>k.date.localeCompare(F.date)).map(k=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:k.date}),i.jsx("td",{className:"p-2 border",children:k.category||""}),i.jsx("td",{className:"p-2 border",children:k.description?i.jsx("span",{title:k.description,children:k.description.length>40?k.description.slice(0,40)+"":k.description}):""}),i.jsx("td",{className:"p-2 border",children:Ds(k.amount)}),i.jsx("td",{className:"p-2 border",children:k.status||""})]},k.id))})]})}),_&&i.jsx("p",{className:"mt-2 text-sm",children:_}),P&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Detalle del cliente  ",(S==null?void 0:S.name)||""]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>C(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total Bruto (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:Ds(W.totalBruto)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Descuento (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:Ds(W.totalDescuento)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto Total Fiado (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:Ds(W.totalFiado)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-xl font-semibold",children:Ds(W.saldoActual)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Abonado (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:Ds(W.abonadoPeriodo)})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha compra"}),i.jsx("th",{className:"p-2 border",children:"Pieza"}),i.jsx("th",{className:"p-2 border",children:"SKU"}),i.jsx("th",{className:"p-2 border",children:"Cant."}),i.jsx("th",{className:"p-2 border",children:"P. Unit"}),i.jsx("th",{className:"p-2 border",children:"Monto"})," ",i.jsx("th",{className:"p-2 border",children:"Descuento"})," ",i.jsx("th",{className:"p-2 border",children:"Monto final"})," "]})}),i.jsx("tbody",{children:j?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Cargando"})}):L.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Sin piezas fiadas en el periodo."})}):L.sort((k,F)=>k.date.localeCompare(F.date)).map((k,F)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:k.date}),i.jsx("td",{className:"p-2 border",children:k.productName}),i.jsx("td",{className:"p-2 border",children:k.sku||""}),i.jsx("td",{className:"p-2 border",children:k.qty}),i.jsx("td",{className:"p-2 border",children:Ds(k.unitPrice)}),i.jsx("td",{className:"p-2 border",children:Ds(k.lineTotal)}),i.jsx("td",{className:"p-2 border",children:Ds(k.discount)}),i.jsx("td",{className:"p-2 border",children:Ds(k.lineFinal)})]},`${k.saleId}-${F}`))})]})})]})})]})}const sQ=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal"],w2=e=>`C$ ${(Number(e)||0).toFixed(2)}`;function OCe(){const[e,t]=v.useState(ir(gu(new Date),"yyyy-MM-dd")),[r,n]=v.useState(ir(pu(new Date),"yyyy-MM-dd")),[a,s]=v.useState(ir(new Date,"yyyy-MM-dd")),[o,l]=v.useState(""),[c,u]=v.useState(""),[d,A]=v.useState(0),[f,h]=v.useState("PENDIENTE"),[m,p]=v.useState(""),[g,x]=v.useState([]),[y,b]=v.useState(!0),[_,T]=v.useState(""),[P,C]=v.useState(null),[S,I]=v.useState(""),[L,E]=v.useState(""),[j,R]=v.useState(""),[W,de]=v.useState(0),[te,le]=v.useState("PENDIENTE"),[ce,J]=v.useState("");v.useEffect(()=>{(async()=>{b(!0);try{const O=Ht(At(ke,"expenses_clothes"),Ur("date","desc")),K=await jt(O),ee=[];K.forEach(ne=>{const Q=ne.data();ee.push({id:ne.id,date:Q.date||ir(new Date,"yyyy-MM-dd"),category:Q.category||"",description:Q.description||"",amount:Number(Q.amount||0),status:Q.status||"PENDIENTE",notes:Q.notes||"",createdAt:Q.createdAt??zt.now()})}),x(ee)}catch(O){console.error(O),T(" Error al cargar gastos")}finally{b(!1)}})()},[]);const me=v.useMemo(()=>g.filter(O=>!(e&&O.date<e||r&&O.date>r)),[g,e,r]),Ee=v.useMemo(()=>{const O=me.reduce((ne,Q)=>ne+(Q.amount||0),0),K=me.filter(ne=>ne.status==="PAGADO").reduce((ne,Q)=>ne+(Q.amount||0),0),ee=O-K;return{total:O,pagado:K,pendiente:ee}},[me]),k=()=>{s(ir(new Date,"yyyy-MM-dd")),l(""),u(""),A(0),h("PENDIENTE"),p("")},F=async O=>{if(O.preventDefault(),T(""),!o){T("Selecciona una categora.");return}if(!c.trim()){T("Ingresa una descripcin.");return}if(!d||d<=0){T("Ingresa un monto vlido.");return}try{const K=await en(At(ke,"expenses_clothes"),{date:a,category:o,description:c.trim(),amount:Number(d.toFixed(2)),status:f,notes:m||"",createdAt:zt.now()});x(ee=>[{id:K.id,date:a,category:o,description:c.trim(),amount:Number(d.toFixed(2)),status:f,notes:m||"",createdAt:zt.now()},...ee]),k(),T(" Gasto registrado")}catch(K){console.error(K),T(" Error al guardar gasto")}},V=O=>{C(O.id),I(O.date),E(O.category||""),R(O.description||""),de(Number(O.amount||0)),le(O.status||"PENDIENTE"),J(O.notes||"")},D=()=>{C(null),I(""),E(""),R(""),de(0),le("PENDIENTE"),J("")},M=async()=>{if(P){if(!L){T("Selecciona una categora.");return}if(!j.trim()){T("Ingresa una descripcin.");return}if(!W||W<=0){T("Ingresa un monto vlido.");return}try{await Lr(Mt(ke,"expenses_clothes",P),{date:S,category:L,description:j.trim(),amount:Number(W.toFixed(2)),status:te,notes:ce||""}),x(O=>O.map(K=>K.id===P?{...K,date:S,category:L,description:j.trim(),amount:Number(W.toFixed(2)),status:te,notes:ce||""}:K)),D(),T(" Gasto actualizado")}catch(O){console.error(O),T(" Error al actualizar gasto")}}},G=async O=>{confirm(`Eliminar el gasto "${O.description}"?`)&&(await fn(Mt(ke,"expenses_clothes",O.id)),x(ee=>ee.filter(ne=>ne.id!==O.id)),T(" Gasto borrado"))};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Ropa)"}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:e,onChange:O=>t(O.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:O=>n(O.target.value)})]}),i.jsxs("div",{className:"ml-auto text-sm",children:[i.jsx("div",{className:"font-semibold",children:"Totales del rango"}),i.jsxs("div",{children:["Total: ",w2(Ee.total)]}),i.jsxs("div",{children:["Pagado: ",w2(Ee.pagado)]}),i.jsxs("div",{children:["Pendiente: ",w2(Ee.pendiente)]})]})]}),i.jsxs("form",{onSubmit:F,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:a,onChange:O=>s(O.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:o,onChange:O=>l(O.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),sQ.map(O=>i.jsx("option",{value:O,children:O},O))]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:c,onChange:O=>u(O.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:d===0?"":d,onChange:O=>A(Math.max(0,Number(O.target.value||0))),placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:f,onChange:O=>h(O.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:m,onChange:O=>p(O.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[m.length,"/500"]})]}),i.jsx("div",{className:"md:col-span-2",children:i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):me.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):me.slice().sort((O,K)=>O.date.localeCompare(K.date)).map(O=>{const K=P===O.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:K?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:S,onChange:ee=>I(ee.target.value)}):O.date}),i.jsx("td",{className:"p-2 border",children:K?i.jsxs("select",{className:"w-full border p-1 rounded",value:L,onChange:ee=>E(ee.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),sQ.map(ee=>i.jsx("option",{value:ee,children:ee},ee))]}):O.category||""}),i.jsx("td",{className:"p-2 border",children:K?i.jsx("input",{className:"w-full border p-1 rounded",value:j,onChange:ee=>R(ee.target.value)}):i.jsx("span",{title:O.description,children:O.description.length>40?O.description.slice(0,40)+"":O.description})}),i.jsx("td",{className:"p-2 border",children:K?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(W)?"":W,onChange:ee=>de(Math.max(0,Number(ee.target.value||0)))}):w2(O.amount)}),i.jsx("td",{className:"p-2 border",children:K?i.jsxs("select",{className:"w-full border p-1 rounded",value:te,onChange:ee=>le(ee.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${O.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:O.status})}),i.jsx("td",{className:"p-2 border",children:K?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:ce,onChange:ee=>J(ee.target.value),maxLength:500}):i.jsx("span",{title:O.notes||"",children:(O.notes||"").length>40?(O.notes||"").slice(0,40)+"":O.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:K?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:M,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:D,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>V(O),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>G(O),children:"Borrar"})]})})})]},O.id)})})]})}),_&&i.jsx("p",{className:"mt-2 text-sm",children:_})]})}const Hc=e=>`C$ ${(Number(e)||0).toFixed(2)}`;function DCe(e){var t;return e!=null&&e.date?e.date:(t=e==null?void 0:e.createdAt)!=null&&t.toDate?ir(e.createdAt.toDate(),"yyyy-MM-dd"):""}function RCe(e,t){const r=DCe(e);if(!r)return null;const n=e.item||{},a=Number((n==null?void 0:n.qty)??e.quantity??0)||0,s=Number((n==null?void 0:n.total)??e.total??0)||0,o=Number((n==null?void 0:n.unitPrice)??(a>0?s/a:0))||0;return{id:t,date:r,type:e.type||"CONTADO",total:Number(e.total||0),quantity:Number(e.quantity||a||0),customerId:e.customerId||void 0,customerName:e.customerName||void 0,downPayment:Number(e.downPayment||0),item:{productId:String((n==null?void 0:n.productId)||e.productId||""),productName:String((n==null?void 0:n.productName)||e.productName||""),sku:(n==null?void 0:n.sku)||e.sku||"",qty:a,unitPrice:o,total:a*o}}}async function LCe(e,t){if(t<=0)return;const r=Ht(At(ke,"inventory_clothes_batches"),Xt("productId","==",e)),n=await jt(r),a=[];n.forEach(o=>{const l=o.data();a.push({id:o.id,productId:l.productId,date:l.date||"",quantity:Number(l.quantity||0),remaining:Number(l.remaining||0)})}),a.sort((o,l)=>o.date.localeCompare(l.date));let s=t;for(const o of a){if(s<=0)break;if(o.remaining<=0)continue;const l=Math.min(o.remaining,s);s-=l,await Lr(Mt(ke,"inventory_clothes_batches",o.id),{remaining:Math.max(0,Number((o.remaining-l).toFixed(0)))})}s>0&&console.warn("consumeFIFO: falt inventario",s)}async function MCe(e,t){if(t<=0)return;const r=Ht(At(ke,"inventory_clothes_batches"),Xt("productId","==",e)),n=await jt(r),a=[];n.forEach(o=>{const l=o.data();a.push({id:o.id,productId:l.productId,date:l.date||"",quantity:Number(l.quantity||0),remaining:Number(l.remaining||0)})}),a.sort((o,l)=>o.date.localeCompare(l.date));let s=t;for(const o of a){if(s<=0)break;const l=Math.max(0,o.quantity-o.remaining);if(l<=0)continue;const c=Math.min(l,s);s-=c,await Lr(Mt(ke,"inventory_clothes_batches",o.id),{remaining:Number((o.remaining+c).toFixed(0))})}s>0&&console.warn("restoreFIFO: no se devolvi todo",s)}async function OJ(e){const t=Ht(At(ke,"ar_movements"),Xt("ref.saleId","==",e)),r=await jt(t);await Promise.all(r.docs.map(n=>fn(Mt(ke,"ar_movements",n.id))))}async function UCe(e,t,r){if(await OJ(e.id),e.type!=="CREDITO"||!e.customerId)return;const n={customerId:e.customerId,date:e.date,createdAt:zt.now(),ref:{saleId:e.id}},{addDoc:a}=await Yd(async()=>{const{addDoc:o}=await Promise.resolve().then(()=>Y0e);return{addDoc:o}},void 0);await a(At(ke,"ar_movements"),{...n,type:"CARGO",amount:Number(t)||0});const s=Math.max(0,Number(r??e.downPayment??0));s>0&&await a(At(ke,"ar_movements"),{...n,type:"ABONO",amount:-s})}function QCe(){const[e,t]=v.useState(!1),[r,n]=v.useState(!1),[a,s]=v.useState(null),[o,l]=v.useState([]),c=async Z=>{t(!0),n(!0),s(Z),l([]);try{const X=(await jt(Ht(At(ke,"sales_clothes"),Xt("__name__","==",Z)))).docs[0],ve=X==null?void 0:X.data(),Ne=(Array.isArray(ve==null?void 0:ve.items)?ve.items:ve!=null&&ve.item?[ve.item]:[]).map(Me=>({productName:String(Me.productName||""),qty:Number(Me.qty||0),unitPrice:Number(Me.unitPrice||0),discount:Number(Me.discount||0),total:Number(Me.total||0)}));l(Ne)}catch(z){console.error(z)}finally{n(!1)}},[u,d]=v.useState(ir(new Date,"yyyy-MM-01")),[A,f]=v.useState(ir(new Date,"yyyy-MM-dd")),[h,m]=v.useState([]),[p,g]=v.useState([]),[x,y]=v.useState(!0),[b,_]=v.useState(""),[T,P]=v.useState(""),[C,S]=v.useState(""),[I,L]=v.useState(null),[E,j]=v.useState(!1),[R,W]=v.useState(null),[de,te]=v.useState(0),le=15,[ce,J]=v.useState(1),me=v.useMemo(()=>{const Z={};return h.forEach(z=>Z[z.id]=z.name),Z},[h]);v.useEffect(()=>{(async()=>{y(!0),_("");try{const Z=await jt(At(ke,"customers_clothes")),z=[];Z.forEach(re=>z.push({id:re.id,name:re.data().name||""})),m(z);const X=await jt(Ht(At(ke,"sales_clothes"),Ur("createdAt","desc"))),ve=[];X.forEach(re=>{const Ne=RCe(re.data(),re.id);Ne&&Ne.date>=u&&Ne.date<=A&&ve.push(Ne)}),g(ve.sort((re,Ne)=>Ne.date.localeCompare(re.date))),J(1)}catch(Z){console.error(Z),_(" Error cargando transacciones.")}finally{y(!1)}})()},[u,A]);const Ee=v.useMemo(()=>p.filter(Z=>!(T&&Z.customerId!==T||C&&Z.type!==C)),[p,T,C]),k=v.useMemo(()=>{let Z=0,z=0,X=0,ve=0;for(const re of Ee)re.type==="CONTADO"?(Z+=re.item.qty,X+=re.total):(z+=re.item.qty,ve+=re.total);return{piezasCash:Z,piezasCredito:z,montoCash:X,montoCredito:ve}},[Ee]),F=Math.max(1,Math.ceil(Ee.length/le)),V=v.useMemo(()=>{const Z=(ce-1)*le;return Ee.slice(Z,Z+le)},[Ee,ce]),D=Z=>{L(null),W(Z),te(Z.item.qty||0),j(!0)},M=async Z=>{if(L(null),!!window.confirm("Eliminar esta venta? Esta accin no se puede deshacer."))try{y(!0),await _k(Z.id),await OJ(Z.id),g(z=>z.filter(X=>X.id!==Z.id)),_(" Venta eliminada")}catch(z){console.error(z),_(" No se pudo eliminar la venta.")}finally{y(!1)}},G=async()=>{if(!R)return;const Z=Number(R.item.qty||0),z=Math.max(1,Math.floor(Number(de)||0));if(z===Z){j(!1);return}const X=Number(R.item.unitPrice||0),ve=Number((X*z).toFixed(2));try{y(!0);const re=z-Z;re>0?await LCe(R.item.productId,re):re<0&&await MCe(R.item.productId,-re);const Ne=Mt(ke,"sales_clothes",R.id);await Lr(Ne,{quantity:z,total:ve,itemsTotal:ve,"item.qty":z,"item.total":ve,updatedAt:zt.now()});const Me=Math.min(Number(R.downPayment||0),ve);await UCe(R,ve,Me),g(Ve=>Ve.map(nt=>nt.id===R.id?{...nt,quantity:z,total:ve,item:{...nt.item,qty:z,total:ve},downPayment:Me}:nt)),_(" Venta actualizada"),j(!1)}catch(re){console.error(re),_(" No se pudo actualizar la venta.")}finally{y(!1)}},O=()=>{const Z=`Reporte de transacciones (Ropa)  ${u} a ${A}`,z=Ne=>(Ne||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),X=Ee.map(Ne=>{const Me=Ne.customerName||(Ne.customerId?me[Ne.customerId]:"")||"Nombre cliente";return`<tr>
          <td>${Ne.date}</td>
          <td>${z(Me)}</td>
          <td>${Ne.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${Ne.item.qty}</td>
          <td style="text-align:right">${Hc(Ne.total)}</td>
        </tr>`}).join(""),ve=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${z(Z)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${z(Z)}</h1>
      <div class="kpis">
        <div><b>Piezas Cash:</b> ${k.piezasCash}</div>
        <div><b>Piezas Crdito:</b> ${k.piezasCredito}</div>
        <div><b>Monto Cash:</b> ${Hc(k.montoCash)}</div>
        <div><b>Monto Crdito:</b> ${Hc(k.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Piezas</th><th>Monto</th>
      </tr></thead><tbody>
      ${X||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,re=window.open("","_blank");re&&(re.document.open(),re.document.write(ve),re.document.close())},K=()=>J(1),ee=()=>J(Z=>Math.max(1,Z-1)),ne=()=>J(Z=>Math.min(F,Z+1)),Q=()=>J(F),be=()=>{const Z=[];if(F<=7)for(let X=1;X<=F;X++)Z.push(X);else{const X=Math.max(1,ce-2),ve=Math.min(F,ce+2);Z.push(1),X>2&&Z.push(-1);for(let re=X;re<=ve;re++)re!==1&&re!==F&&Z.push(re);ve<F-1&&Z.push(-2),Z.push(F)}return i.jsxs("div",{className:"flex items-center gap-1 justify-between mt-3",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:K,disabled:ce===1,children:" Primero"}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ee,disabled:ce===1,children:" Anterior"}),Z.map((X,ve)=>typeof X=="number"?i.jsx("button",{className:`px-3 py-1 border rounded ${X===ce?"bg-blue-600 text-white":""}`,onClick:()=>J(X),children:X},ve):i.jsx("span",{className:"px-2",children:""},ve)),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ne,disabled:ce===F,children:"Siguiente "}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Q,disabled:ce===F,children:"ltimo "})]}),i.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",ce," de ",F,"  ",Ee.length," transaccin(es)"]})]})};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Reporte de transacciones (Ropa)"}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap gap-3 items-end text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:Z=>{d(Z.target.value),J(1)}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:A,onChange:Z=>{f(Z.target.value),J(1)}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),i.jsxs("select",{className:"border rounded px-2 py-1 min-w-[220px]",value:T,onChange:Z=>{P(Z.target.value),J(1)},children:[i.jsx("option",{value:"",children:"Todos"}),h.map(Z=>i.jsx("option",{value:Z.id,children:Z.name},Z.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Tipo"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:C,onChange:Z=>{S(Z.target.value),J(1)},children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"CONTADO",children:"Cash"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsx("button",{className:"ml-auto px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:O,children:"Exportar PDF"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:k.piezasCash})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:k.piezasCredito})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:Hc(k.montoCash)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:Hc(k.montoCredito)})]})]}),i.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Piezas"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:x?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Cargando"})}):V.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Sin transacciones en el rango."})}):V.map(Z=>{const z=Z.customerName||(Z.customerId?me[Z.customerId]:"")||"Nombre cliente";return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:Z.date}),i.jsx("td",{className:"p-2 border",children:z}),i.jsx("td",{className:"p-2 border",children:Z.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver piezas de esta transaccin",onClick:()=>c(Z.id),children:Z.item.qty})}),i.jsx("td",{className:"p-2 border",children:Hc(Z.total)}),i.jsxs("td",{className:"p-2 border relative",children:[i.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>L(X=>X===Z.id?null:Z.id),title:"Acciones",children:""}),I===Z.id&&i.jsxs("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:[i.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100",onClick:()=>D(Z),children:"Editar"}),i.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>M(Z),children:"Eliminar"})]})]})]},Z.id)})})]}),be()]}),b&&i.jsx("p",{className:"mt-2 text-sm",children:b}),E&&R&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-md p-4",children:[i.jsx("h3",{className:"text-lg font-bold mb-2",children:"Editar venta"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Producto"}),i.jsxs("div",{className:"font-semibold",children:[R.item.productName," ",R.item.sku?` ${R.item.sku}`:""]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (piezas)"}),i.jsx("input",{type:"number",step:"1",min:1,className:"w-full border p-2 rounded",value:de,onChange:Z=>te(Math.max(1,Math.floor(Number(Z.target.value||0))))})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"P. Unit"}),i.jsx("div",{className:"text-lg font-semibold",children:Hc(R.item.unitPrice)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Nuevo total"}),i.jsx("div",{className:"text-lg font-semibold",children:Hc(Number(R.item.unitPrice)*Number(de||0))})]})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{j(!1),W(null)},children:"Cancelar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:G,children:"Guardar cambios"})]})]})}),e&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Piezas vendidas"," ",a?` #${a}`:""]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>t(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):o.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):o.map((Z,z)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:Z.productName}),i.jsx("td",{className:"p-2 border text-right",children:Z.qty}),i.jsx("td",{className:"p-2 border text-right",children:Hc(Z.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:Hc(Z.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:Hc(Z.total)})]},z))})]})})]})})]})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var JC={};JC.version="0.18.5";var DJ=1252,VCe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],r3={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},n3=function(e){VCe.indexOf(e)!=-1&&(DJ=r3[0]=e)};function HCe(){n3(1252)}var Zc=function(e){n3(e)};function a3(){Zc(1200),HCe()}function iQ(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function $Ce(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function RJ(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Rv=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?$Ce(e.slice(2)):t==254&&r==255?RJ(e.slice(2)):t==65279?e.slice(1):e},N2=function(t){return String.fromCharCode(t)},oQ=function(t){return String.fromCharCode(t)},h1,Dh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function f1(e){for(var t="",r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),s=r>>2,n=e.charCodeAt(u++),o=(r&3)<<4|n>>4,a=e.charCodeAt(u++),l=(n&15)<<2|a>>6,c=a&63,isNaN(n)?l=c=64:isNaN(a)&&(c=64),t+=Dh.charAt(s)+Dh.charAt(o)+Dh.charAt(l)+Dh.charAt(c);return t}function Dl(e){var t="",r=0,n=0,a=0,s=0,o=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)s=Dh.indexOf(e.charAt(u++)),o=Dh.indexOf(e.charAt(u++)),r=s<<2|o>>4,t+=String.fromCharCode(r),l=Dh.indexOf(e.charAt(u++)),n=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(n)),c=Dh.indexOf(e.charAt(u++)),a=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(a));return t}var Wr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),CA=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function hf(e){return Wr?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function lQ(e){return Wr?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Cl=function(t){return Wr?CA(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function dS(e){if(typeof ArrayBuffer>"u")return Cl(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function Bf(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function KCe(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function s3(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return s3(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var ci=Wr?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:CA(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function qCe(e){for(var t=[],r=0,n=e.length+250,a=hf(e.length+255),s=0;s<e.length;++s){var o=e.charCodeAt(s);if(o<128)a[r++]=o;else if(o<2048)a[r++]=192|o>>6&31,a[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++s)&1023;a[r++]=240|o>>8&7,a[r++]=128|o>>2&63,a[r++]=128|l>>6&15|(o&3)<<4,a[r++]=128|l&63}else a[r++]=224|o>>12&15,a[r++]=128|o>>6&63,a[r++]=128|o&63;r>n&&(t.push(a.slice(0,r)),r=0,a=hf(65535),n=65530)}return t.push(a.slice(0,r)),ci(t)}var ko=/\u0000/g,Lv=/[\u0001-\u0006]/g;function sg(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function eu(e,t){var r=""+e;return r.length>=t?r:ts("0",t-r.length)+r}function i3(e,t){var r=""+e;return r.length>=t?r:ts(" ",t-r.length)+r}function YC(e,t){var r=""+e;return r.length>=t?r:r+ts(" ",t-r.length)}function GCe(e,t){var r=""+Math.round(e);return r.length>=t?r:ts("0",t-r.length)+r}function zCe(e,t){var r=""+e;return r.length>=t?r:ts("0",t-r.length)+r}var cQ=Math.pow(2,32);function hp(e,t){if(e>cQ||e<-cQ)return GCe(e,t);var r=Math.round(e);return zCe(r,t)}function ZC(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var uQ=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Ej=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function WCe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Pr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},dQ={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},XCe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function e_(e,t,r){for(var n=e<0?-1:1,a=e*n,s=0,o=1,l=0,c=1,u=0,d=0,A=Math.floor(a);u<t&&(A=Math.floor(a),l=A*o+s,d=A*u+c,!(a-A<5e-8));)a=1/(a-A),s=o,o=l,c=u,u=d;if(d>t&&(u>t?(d=c,l=s):(d=u,l=o)),!r)return[0,n*l,d];var f=Math.floor(n*l/d);return[f,n*l-f*d,d]}function xm(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),s=0,o=[],l={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++a==86400&&(l.T=a=0,++n,++l.D)),n===60)o=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=r_e(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=a%60,a=Math.floor(a/60),l.M=a%60,a=Math.floor(a/60),l.H=a,l.q=s,l}var LJ=new Date(1899,11,31,0,0,0),JCe=LJ.getTime(),YCe=new Date(1900,2,1,0,0,0);function MJ(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=YCe&&(r+=24*60*60*1e3),(r-(JCe+(e.getTimezoneOffset()-LJ.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function o3(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function ZCe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function e_e(e){var t=e<0?12:11,r=o3(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function t_e(e){var t=o3(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function m1(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=e_e(e):t===10?r=e.toFixed(10).substr(0,12):r=t_e(e),o3(ZCe(r.toUpperCase()))}function r0(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):m1(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Sc(14,MJ(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function r_e(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function n_e(e,t,r,n){var a="",s=0,o=0,l=r.y,c,u=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return Ej[r.m-1][1];case 5:return Ej[r.m-1][0];default:return Ej[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return uQ[r.q][0];default:return uQ[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?eu(r.S,t.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,s=Math.round(o*(r.S+r.u)),s>=60*o&&(s=0),t==="s"?s===0?"0":""+s/o:(a=eu(s,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=l,u=1;break}var d=u>0?eu(c,u):"";return d}function Rh(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var UJ=/%/g;function a_e(e,t,r){var n=t.replace(UJ,""),a=t.length-n.length;return Zd(e,n,r*Math.pow(10,2*a))+ts("%",a)}function s_e(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Zd(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function QJ(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+QJ(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var VJ=/# (\?+)( ?)\/( ?)(\d+)/;function i_e(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),s=Math.floor(a/n),o=a-s*n,l=n;return r+(s===0?"":""+s)+" "+(o===0?ts(" ",e[1].length+1+e[4].length):i3(o,e[1].length)+e[2]+"/"+e[3]+eu(l,e[4].length))}function o_e(e,t,r){return r+(t===0?"":""+t)+ts(" ",e[1].length+2+e[4].length)}var HJ=/^#*0*\.([0#]+)/,$J=/\).*[0#]/,KJ=/\(###\) ###\\?-####/;function _o(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function AQ(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function hQ(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function l_e(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function c_e(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function sc(e,t,r){if(e.charCodeAt(0)===40&&!t.match($J)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?sc("n",n,r):"("+sc("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return s_e(e,t,r);if(t.indexOf("%")!==-1)return a_e(e,t,r);if(t.indexOf("E")!==-1)return QJ(t,r);if(t.charCodeAt(0)===36)return"$"+sc(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,o,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+hp(c,t.length);if(t.match(/^[#?]+$/))return a=hp(r,0),a==="0"&&(a=""),a.length>t.length?a:_o(t.substr(0,t.length-a.length))+a;if(s=t.match(VJ))return i_e(s,c,u);if(t.match(/^#+0+$/))return u+hp(c,t.length-t.indexOf("0"));if(s=t.match(HJ))return a=AQ(r,s[1].length).replace(/^([^\.]+)$/,"$1."+_o(s[1])).replace(/\.$/,"."+_o(s[1])).replace(/\.(\d*)$/,function(m,p){return"."+p+ts("0",_o(s[1]).length-p.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+AQ(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+Rh(hp(c,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+sc(e,t,-r):Rh(""+(Math.floor(r)+l_e(r,s[1].length)))+"."+eu(hQ(r,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return sc(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=sg(sc(e,t.replace(/[\\-]/g,""),r)),o=0,sg(sg(t.replace(/\\/g,"")).replace(/[0#]/g,function(m){return o<a.length?a.charAt(o++):m==="0"?"0":""}));if(t.match(KJ))return a=sc(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=e_(c,Math.pow(10,o)-1,!1),a=""+u,d=Zd("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=YC(l[2],o),d.length<s[4].length&&(d=_o(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=e_(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?i3(l[1],o)+s[2]+"/"+s[3]+YC(l[2],o):ts(" ",2*o+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=hp(r,0),t.length<=a.length?a:_o(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var A=t.indexOf(".")-o,f=t.length-a.length-A;return _o(t.substr(0,A)+a+t.substr(t.length-f))}if(s=t.match(/^00,000\.([#0]*0)$/))return o=hQ(r,s[1].length),r<0?"-"+sc(e,t,-r):Rh(c_e(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?eu(0,3-m.length):"")+m})+"."+eu(o,s[1].length);switch(t){case"###,##0.00":return sc(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var h=Rh(hp(c,0));return h!=="0"?u+h:"";case"###,###.00":return sc(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return sc(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function u_e(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Zd(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function d_e(e,t,r){var n=t.replace(UJ,""),a=t.length-n.length;return Zd(e,n,r*Math.pow(10,2*a))+ts("%",a)}function qJ(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+qJ(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Lu(e,t,r){if(e.charCodeAt(0)===40&&!t.match($J)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Lu("n",n,r):"("+Lu("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return u_e(e,t,r);if(t.indexOf("%")!==-1)return d_e(e,t,r);if(t.indexOf("E")!==-1)return qJ(t,r);if(t.charCodeAt(0)===36)return"$"+Lu(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,o,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+eu(c,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:_o(t.substr(0,t.length-a.length))+a;if(s=t.match(VJ))return o_e(s,c,u);if(t.match(/^#+0+$/))return u+eu(c,t.length-t.indexOf("0"));if(s=t.match(HJ))return a=(""+r).replace(/^([^\.]+)$/,"$1."+_o(s[1])).replace(/\.$/,"."+_o(s[1])),a=a.replace(/\.(\d*)$/,function(m,p){return"."+p+ts("0",_o(s[1]).length-p.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+Rh(""+c);if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Lu(e,t,-r):Rh(""+r)+"."+ts("0",s[1].length);if(s=t.match(/^#,#*,#0/))return Lu(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=sg(Lu(e,t.replace(/[\\-]/g,""),r)),o=0,sg(sg(t.replace(/\\/g,"")).replace(/[0#]/g,function(m){return o<a.length?a.charAt(o++):m==="0"?"0":""}));if(t.match(KJ))return a=Lu(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=e_(c,Math.pow(10,o)-1,!1),a=""+u,d=Zd("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=YC(l[2],o),d.length<s[4].length&&(d=_o(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=e_(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?i3(l[1],o)+s[2]+"/"+s[3]+YC(l[2],o):ts(" ",2*o+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:_o(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var A=t.indexOf(".")-o,f=t.length-a.length-A;return _o(t.substr(0,A)+a+t.substr(t.length-f))}if(s=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Lu(e,t,-r):Rh(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?eu(0,3-m.length):"")+m})+"."+eu(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var h=Rh(""+c);return h!=="0"?u+h:"";default:if(t.match(/\.[0#?]*$/))return Lu(e,t.slice(0,t.lastIndexOf(".")),r)+_o(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Zd(e,t,r){return(r|0)===r?Lu(e,t,r):sc(e,t,r)}function A_e(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var GJ=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function ax(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":ZC(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(GJ))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function h_e(e,t,r,n){for(var a=[],s="",o=0,l="",c="t",u,d,A,f="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!ZC(e,o))throw new Error("unrecognized character "+l+" in "+e);a[a.length]={t:"G",v:"General"},o+=7;break;case'"':for(s="";(A=e.charCodeAt(++o))!==34&&o<e.length;)s+=String.fromCharCode(A);a[a.length]={t:"t",v:s},++o;break;case"\\":var h=e.charAt(++o),m=h==="("||h===")"?h:"t";a[a.length]={t:m,v:h},++o;break;case"_":a[a.length]={t:"t",v:" "},o+=2;break;case"@":a[a.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(u==null&&(u=xm(t,r,e.charAt(o+1)==="2"),u==null))return"";a[a.length]={t:"X",v:e.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=xm(t,r),u==null))return"";for(s=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)s+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=f),a[a.length]={t:l,v:s},c=l;break;case"A":case"a":case"":var p={t:l,v:l};if(u==null&&(u=xm(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(u!=null&&(p.v=u.H>=12?"P":"A"),p.t="T",f="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(u!=null&&(p.v=u.H>=12?"PM":"AM"),p.t="T",o+=5,f="h"):e.substr(o,5).toUpperCase()==="/"?(u!=null&&(p.v=u.H>=12?"":""),p.t="T",o+=5,f="h"):(p.t="t",++o),u==null&&p.t==="T")return"";a[a.length]=p,c=l;break;case"[":for(s=l;e.charAt(o++)!=="]"&&o<e.length;)s+=e.charAt(o);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(GJ)){if(u==null&&(u=xm(t,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",ax(e)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=l;++o<e.length&&(l=e.charAt(o))==="0";)s+=l;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)s+=l;a[a.length]={t:"n",v:s};break;case"?":for(s=l;e.charAt(++o)===l;)s+=l;a[a.length]={t:l,v:s},c=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":a[a.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)s+=e.charAt(o);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:l,v:l},++o;break;case"$":a[a.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);a[a.length]={t:"t",v:l},++o;break}var g=0,x=0,y;for(o=a.length-1,c="t";o>=0;--o)switch(a[o].t){case"h":case"H":a[o].t=f,c="h",g<1&&(g=1);break;case"s":(y=a[o].v.match(/\.0+$/))&&(x=Math.max(x,y[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":c=a[o].t;break;case"m":c==="s"&&(a[o].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&a[o].v.match(/[Hh]/)&&(g=1),g<2&&a[o].v.match(/[Mm]/)&&(g=2),g<3&&a[o].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var b="",_;for(o=0;o<a.length;++o)switch(a[o].t){case"t":case"T":case" ":case"D":break;case"X":a[o].v="",a[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[o].v=n_e(a[o].t.charCodeAt(0),a[o].v,u,x),a[o].t="t";break;case"n":case"?":for(_=o+1;a[_]!=null&&((l=a[_].t)==="?"||l==="D"||(l===" "||l==="t")&&a[_+1]!=null&&(a[_+1].t==="?"||a[_+1].t==="t"&&a[_+1].v==="/")||a[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(a[_].v==="/"||a[_].v===" "&&a[_+1]!=null&&a[_+1].t=="?"));)a[o].v+=a[_].v,a[_]={v:"",t:";"},++_;b+=a[o].v,o=_-1;break;case"G":a[o].t="t",a[o].v=r0(t,r);break}var T="",P,C;if(b.length>0){b.charCodeAt(0)==40?(P=t<0&&b.charCodeAt(0)===45?-t:t,C=Zd("n",b,P)):(P=t<0&&n>1?-t:t,C=Zd("n",b,P),P<0&&a[0]&&a[0].t=="t"&&(C=C.substr(1),a[0].v="-"+a[0].v)),_=C.length-1;var S=a.length;for(o=0;o<a.length;++o)if(a[o]!=null&&a[o].t!="t"&&a[o].v.indexOf(".")>-1){S=o;break}var I=a.length;if(S===a.length&&C.indexOf("E")===-1){for(o=a.length-1;o>=0;--o)a[o]==null||"n?".indexOf(a[o].t)===-1||(_>=a[o].v.length-1?(_-=a[o].v.length,a[o].v=C.substr(_+1,a[o].v.length)):_<0?a[o].v="":(a[o].v=C.substr(0,_+1),_=-1),a[o].t="t",I=o);_>=0&&I<a.length&&(a[I].v=C.substr(0,_+1)+a[I].v)}else if(S!==a.length&&C.indexOf("E")===-1){for(_=C.indexOf(".")-1,o=S;o>=0;--o)if(!(a[o]==null||"n?".indexOf(a[o].t)===-1)){for(d=a[o].v.indexOf(".")>-1&&o===S?a[o].v.indexOf(".")-1:a[o].v.length-1,T=a[o].v.substr(d+1);d>=0;--d)_>=0&&(a[o].v.charAt(d)==="0"||a[o].v.charAt(d)==="#")&&(T=C.charAt(_--)+T);a[o].v=T,a[o].t="t",I=o}for(_>=0&&I<a.length&&(a[I].v=C.substr(0,_+1)+a[I].v),_=C.indexOf(".")+1,o=S;o<a.length;++o)if(!(a[o]==null||"n?(".indexOf(a[o].t)===-1&&o!==S)){for(d=a[o].v.indexOf(".")>-1&&o===S?a[o].v.indexOf(".")+1:0,T=a[o].v.substr(0,d);d<a[o].v.length;++d)_<C.length&&(T+=C.charAt(_++));a[o].v=T,a[o].t="t",I=o}}}for(o=0;o<a.length;++o)a[o]!=null&&"n?".indexOf(a[o].t)>-1&&(P=n>1&&t<0&&o>0&&a[o-1].v==="-"?-t:t,a[o].v=Zd(a[o].t,a[o].v,P),a[o].t="t");var L="";for(o=0;o!==a.length;++o)a[o]!=null&&(L+=a[o].v);return L}var fQ=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function mQ(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function f_e(e,t){var r=A_e(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(fQ),l=r[1].match(fQ);return mQ(t,o)?[n,r[0]]:mQ(t,l)?[n,r[1]]:[n,r[o!=null&&l!=null?2:1]]}return[n,s]}function Sc(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Pr)[e],n==null&&(n=r.table&&r.table[dQ[e]]||Pr[dQ[e]]),n==null&&(n=XCe[e]||"General");break}if(ZC(n,0))return r0(t,r);t instanceof Date&&(t=MJ(t,r.date1904));var a=f_e(n,t);if(ZC(a[1]))return r0(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return h_e(a[1],t,r,a[0])}function eA(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Pr[r]==null){t<0&&(t=r);continue}if(Pr[r]==e){t=r;break}}t<0&&(t=391)}return Pr[t]=e,t}function AS(e){for(var t=0;t!=392;++t)e[t]!==void 0&&eA(e[t],t)}function sx(){Pr=WCe()}var m_e={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},zJ=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function p_e(e){var t=typeof e=="number"?Pr[e]:e;return t=t.replace(zJ,"(\\d+)"),new RegExp("^"+t+"$")}function g_e(e,t,r){var n=-1,a=-1,s=-1,o=-1,l=-1,c=-1;(t.match(zJ)||[]).forEach(function(A,f){var h=parseInt(r[f+1],10);switch(A.toLowerCase().charAt(0)){case"y":n=h;break;case"d":s=h;break;case"h":o=h;break;case"s":c=h;break;case"m":o>=0?l=h:a=h;break}}),c>=0&&l==-1&&a>=0&&(l=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var x_e=function(){var e={};e.version="1.2.0";function t(){for(var C=0,S=new Array(256),I=0;I!=256;++I)C=I,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,S[I]=C;return typeof Int32Array<"u"?new Int32Array(S):S}var r=t();function n(C){var S=0,I=0,L=0,E=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(L=0;L!=256;++L)E[L]=C[L];for(L=0;L!=256;++L)for(I=C[L],S=256+L;S<4096;S+=256)I=E[S]=I>>>8^C[I&255];var j=[];for(L=1;L!=16;++L)j[L-1]=typeof Int32Array<"u"?E.subarray(L*256,L*256+256):E.slice(L*256,L*256+256);return j}var a=n(r),s=a[0],o=a[1],l=a[2],c=a[3],u=a[4],d=a[5],A=a[6],f=a[7],h=a[8],m=a[9],p=a[10],g=a[11],x=a[12],y=a[13],b=a[14];function _(C,S){for(var I=S^-1,L=0,E=C.length;L<E;)I=I>>>8^r[(I^C.charCodeAt(L++))&255];return~I}function T(C,S){for(var I=S^-1,L=C.length-15,E=0;E<L;)I=b[C[E++]^I&255]^y[C[E++]^I>>8&255]^x[C[E++]^I>>16&255]^g[C[E++]^I>>>24]^p[C[E++]]^m[C[E++]]^h[C[E++]]^f[C[E++]]^A[C[E++]]^d[C[E++]]^u[C[E++]]^c[C[E++]]^l[C[E++]]^o[C[E++]]^s[C[E++]]^r[C[E++]];for(L+=15;E<L;)I=I>>>8^r[(I^C[E++])&255];return~I}function P(C,S){for(var I=S^-1,L=0,E=C.length,j=0,R=0;L<E;)j=C.charCodeAt(L++),j<128?I=I>>>8^r[(I^j)&255]:j<2048?(I=I>>>8^r[(I^(192|j>>6&31))&255],I=I>>>8^r[(I^(128|j&63))&255]):j>=55296&&j<57344?(j=(j&1023)+64,R=C.charCodeAt(L++)&1023,I=I>>>8^r[(I^(240|j>>8&7))&255],I=I>>>8^r[(I^(128|j>>2&63))&255],I=I>>>8^r[(I^(128|R>>6&15|(j&3)<<4))&255],I=I>>>8^r[(I^(128|R&63))&255]):(I=I>>>8^r[(I^(224|j>>12&15))&255],I=I>>>8^r[(I^(128|j>>6&63))&255],I=I>>>8^r[(I^(128|j&63))&255]);return~I}return e.table=r,e.bstr=_,e.buf=T,e.str=P,e}(),Ir=function(){var t={};t.version="1.2.1";function r(ie,se){for(var he=ie.split("/"),Ae=se.split("/"),Be=0,Fe=0,ae=Math.min(he.length,Ae.length);Be<ae;++Be){if(Fe=he[Be].length-Ae[Be].length)return Fe;if(he[Be]!=Ae[Be])return he[Be]<Ae[Be]?-1:1}return he.length-Ae.length}function n(ie){if(ie.charAt(ie.length-1)=="/")return ie.slice(0,-1).indexOf("/")===-1?ie:n(ie.slice(0,-1));var se=ie.lastIndexOf("/");return se===-1?ie:ie.slice(0,se+1)}function a(ie){if(ie.charAt(ie.length-1)=="/")return a(ie.slice(0,-1));var se=ie.lastIndexOf("/");return se===-1?ie:ie.slice(se+1)}function s(ie,se){typeof se=="string"&&(se=new Date(se));var he=se.getHours();he=he<<6|se.getMinutes(),he=he<<5|se.getSeconds()>>>1,ie.write_shift(2,he);var Ae=se.getFullYear()-1980;Ae=Ae<<4|se.getMonth()+1,Ae=Ae<<5|se.getDate(),ie.write_shift(2,Ae)}function o(ie){var se=ie.read_shift(2)&65535,he=ie.read_shift(2)&65535,Ae=new Date,Be=he&31;he>>>=5;var Fe=he&15;he>>>=4,Ae.setMilliseconds(0),Ae.setFullYear(he+1980),Ae.setMonth(Fe-1),Ae.setDate(Be);var ae=se&31;se>>>=5;var Oe=se&63;return se>>>=6,Ae.setHours(se),Ae.setMinutes(Oe),Ae.setSeconds(ae<<1),Ae}function l(ie){Fi(ie,0);for(var se={},he=0;ie.l<=ie.length-4;){var Ae=ie.read_shift(2),Be=ie.read_shift(2),Fe=ie.l+Be,ae={};switch(Ae){case 21589:he=ie.read_shift(1),he&1&&(ae.mtime=ie.read_shift(4)),Be>5&&(he&2&&(ae.atime=ie.read_shift(4)),he&4&&(ae.ctime=ie.read_shift(4))),ae.mtime&&(ae.mt=new Date(ae.mtime*1e3));break}ie.l=Fe,se[Ae]=ae}return se}var c;function u(){return c||(c={})}function d(ie,se){if(ie[0]==80&&ie[1]==75)return it(ie,se);if((ie[0]|32)==109&&(ie[1]|32)==105)return Ce(ie,se);if(ie.length<512)throw new Error("CFB file size "+ie.length+" < 512");var he=3,Ae=512,Be=0,Fe=0,ae=0,Oe=0,pe=0,De=[],Se=ie.slice(0,512);Fi(Se,0);var Ye=A(Se);switch(he=Ye[0],he){case 3:Ae=512;break;case 4:Ae=4096;break;case 0:if(Ye[1]==0)return it(ie,se);default:throw new Error("Major Version: Expected 3 or 4 saw "+he)}Ae!==512&&(Se=ie.slice(0,Ae),Fi(Se,28));var We=ie.slice(0,Ae);f(Se,he);var Xe=Se.read_shift(4,"i");if(he===3&&Xe!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Xe);Se.l+=4,ae=Se.read_shift(4,"i"),Se.l+=4,Se.chk("00100000","Mini Stream Cutoff Size: "),Oe=Se.read_shift(4,"i"),Be=Se.read_shift(4,"i"),pe=Se.read_shift(4,"i"),Fe=Se.read_shift(4,"i");for(var qe=-1,at=0;at<109&&(qe=Se.read_shift(4,"i"),!(qe<0));++at)De[at]=qe;var mt=h(ie,Ae);g(pe,Fe,mt,Ae,De);var Kt=y(mt,ae,De,Ae);Kt[ae].name="!Directory",Be>0&&Oe!==R&&(Kt[Oe].name="!MiniFAT"),Kt[De[0]].name="!FAT",Kt.fat_addrs=De,Kt.ssz=Ae;var Jt={},_r=[],ta=[],Vn=[];b(ae,Kt,mt,_r,Be,Jt,ta,Oe),m(ta,Vn,_r),_r.shift();var mo={FileIndex:ta,FullPaths:Vn};return se&&se.raw&&(mo.raw={header:We,sectors:mt}),mo}function A(ie){if(ie[ie.l]==80&&ie[ie.l+1]==75)return[0,0];ie.chk(W,"Header Signature: "),ie.l+=16;var se=ie.read_shift(2,"u");return[ie.read_shift(2,"u"),se]}function f(ie,se){var he=9;switch(ie.l+=2,he=ie.read_shift(2)){case 9:if(se!=3)throw new Error("Sector Shift: Expected 9 saw "+he);break;case 12:if(se!=4)throw new Error("Sector Shift: Expected 12 saw "+he);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+he)}ie.chk("0600","Mini Sector Shift: "),ie.chk("000000000000","Reserved: ")}function h(ie,se){for(var he=Math.ceil(ie.length/se)-1,Ae=[],Be=1;Be<he;++Be)Ae[Be-1]=ie.slice(Be*se,(Be+1)*se);return Ae[he-1]=ie.slice(he*se),Ae}function m(ie,se,he){for(var Ae=0,Be=0,Fe=0,ae=0,Oe=0,pe=he.length,De=[],Se=[];Ae<pe;++Ae)De[Ae]=Se[Ae]=Ae,se[Ae]=he[Ae];for(;Oe<Se.length;++Oe)Ae=Se[Oe],Be=ie[Ae].L,Fe=ie[Ae].R,ae=ie[Ae].C,De[Ae]===Ae&&(Be!==-1&&De[Be]!==Be&&(De[Ae]=De[Be]),Fe!==-1&&De[Fe]!==Fe&&(De[Ae]=De[Fe])),ae!==-1&&(De[ae]=Ae),Be!==-1&&Ae!=De[Ae]&&(De[Be]=De[Ae],Se.lastIndexOf(Be)<Oe&&Se.push(Be)),Fe!==-1&&Ae!=De[Ae]&&(De[Fe]=De[Ae],Se.lastIndexOf(Fe)<Oe&&Se.push(Fe));for(Ae=1;Ae<pe;++Ae)De[Ae]===Ae&&(Fe!==-1&&De[Fe]!==Fe?De[Ae]=De[Fe]:Be!==-1&&De[Be]!==Be&&(De[Ae]=De[Be]));for(Ae=1;Ae<pe;++Ae)if(ie[Ae].type!==0){if(Oe=Ae,Oe!=De[Oe])do Oe=De[Oe],se[Ae]=se[Oe]+"/"+se[Ae];while(Oe!==0&&De[Oe]!==-1&&Oe!=De[Oe]);De[Ae]=-1}for(se[0]+="/",Ae=1;Ae<pe;++Ae)ie[Ae].type!==2&&(se[Ae]+="/")}function p(ie,se,he){for(var Ae=ie.start,Be=ie.size,Fe=[],ae=Ae;he&&Be>0&&ae>=0;)Fe.push(se.slice(ae*j,ae*j+j)),Be-=j,ae=dm(he,ae*4);return Fe.length===0?kt(0):ci(Fe).slice(0,ie.size)}function g(ie,se,he,Ae,Be){var Fe=R;if(ie===R){if(se!==0)throw new Error("DIFAT chain shorter than expected")}else if(ie!==-1){var ae=he[ie],Oe=(Ae>>>2)-1;if(!ae)return;for(var pe=0;pe<Oe&&(Fe=dm(ae,pe*4))!==R;++pe)Be.push(Fe);g(dm(ae,Ae-4),se-1,he,Ae,Be)}}function x(ie,se,he,Ae,Be){var Fe=[],ae=[];Be||(Be=[]);var Oe=Ae-1,pe=0,De=0;for(pe=se;pe>=0;){Be[pe]=!0,Fe[Fe.length]=pe,ae.push(ie[pe]);var Se=he[Math.floor(pe*4/Ae)];if(De=pe*4&Oe,Ae<4+De)throw new Error("FAT boundary crossed: "+pe+" 4 "+Ae);if(!ie[Se])break;pe=dm(ie[Se],De)}return{nodes:Fe,data:SQ([ae])}}function y(ie,se,he,Ae){var Be=ie.length,Fe=[],ae=[],Oe=[],pe=[],De=Ae-1,Se=0,Ye=0,We=0,Xe=0;for(Se=0;Se<Be;++Se)if(Oe=[],We=Se+se,We>=Be&&(We-=Be),!ae[We]){pe=[];var qe=[];for(Ye=We;Ye>=0;){qe[Ye]=!0,ae[Ye]=!0,Oe[Oe.length]=Ye,pe.push(ie[Ye]);var at=he[Math.floor(Ye*4/Ae)];if(Xe=Ye*4&De,Ae<4+Xe)throw new Error("FAT boundary crossed: "+Ye+" 4 "+Ae);if(!ie[at]||(Ye=dm(ie[at],Xe),qe[Ye]))break}Fe[We]={nodes:Oe,data:SQ([pe])}}return Fe}function b(ie,se,he,Ae,Be,Fe,ae,Oe){for(var pe=0,De=Ae.length?2:0,Se=se[ie].data,Ye=0,We=0,Xe;Ye<Se.length;Ye+=128){var qe=Se.slice(Ye,Ye+128);Fi(qe,64),We=qe.read_shift(2),Xe=f3(qe,0,We-De),Ae.push(Xe);var at={name:Xe,type:qe.read_shift(1),color:qe.read_shift(1),L:qe.read_shift(4,"i"),R:qe.read_shift(4,"i"),C:qe.read_shift(4,"i"),clsid:qe.read_shift(16),state:qe.read_shift(4,"i"),start:0,size:0},mt=qe.read_shift(2)+qe.read_shift(2)+qe.read_shift(2)+qe.read_shift(2);mt!==0&&(at.ct=_(qe,qe.l-8));var Kt=qe.read_shift(2)+qe.read_shift(2)+qe.read_shift(2)+qe.read_shift(2);Kt!==0&&(at.mt=_(qe,qe.l-8)),at.start=qe.read_shift(4,"i"),at.size=qe.read_shift(4,"i"),at.size<0&&at.start<0&&(at.size=at.type=0,at.start=R,at.name=""),at.type===5?(pe=at.start,Be>0&&pe!==R&&(se[pe].name="!StreamData")):at.size>=4096?(at.storage="fat",se[at.start]===void 0&&(se[at.start]=x(he,at.start,se.fat_addrs,se.ssz)),se[at.start].name=at.name,at.content=se[at.start].data.slice(0,at.size)):(at.storage="minifat",at.size<0?at.size=0:pe!==R&&at.start!==R&&se[pe]&&(at.content=p(at,se[pe].data,(se[Oe]||{}).data))),at.content&&Fi(at.content,0),Fe[Xe]=at,ae.push(at)}}function _(ie,se){return new Date((Nl(ie,se+4)/1e7*Math.pow(2,32)+Nl(ie,se)/1e7-11644473600)*1e3)}function T(ie,se){return u(),d(c.readFileSync(ie),se)}function P(ie,se){var he=se&&se.type;switch(he||Wr&&Buffer.isBuffer(ie)&&(he="buffer"),he||"base64"){case"file":return T(ie,se);case"base64":return d(Cl(Dl(ie)),se);case"binary":return d(Cl(ie),se)}return d(ie,se)}function C(ie,se){var he=se||{},Ae=he.root||"Root Entry";if(ie.FullPaths||(ie.FullPaths=[]),ie.FileIndex||(ie.FileIndex=[]),ie.FullPaths.length!==ie.FileIndex.length)throw new Error("inconsistent CFB structure");ie.FullPaths.length===0&&(ie.FullPaths[0]=Ae+"/",ie.FileIndex[0]={name:Ae,type:5}),he.CLSID&&(ie.FileIndex[0].clsid=he.CLSID),S(ie)}function S(ie){var se="Sh33tJ5";if(!Ir.find(ie,"/"+se)){var he=kt(4);he[0]=55,he[1]=he[3]=50,he[2]=54,ie.FileIndex.push({name:se,type:2,content:he,size:4,L:69,R:69,C:69}),ie.FullPaths.push(ie.FullPaths[0]+se),I(ie)}}function I(ie,se){C(ie);for(var he=!1,Ae=!1,Be=ie.FullPaths.length-1;Be>=0;--Be){var Fe=ie.FileIndex[Be];switch(Fe.type){case 0:Ae?he=!0:(ie.FileIndex.pop(),ie.FullPaths.pop());break;case 1:case 2:case 5:Ae=!0,isNaN(Fe.R*Fe.L*Fe.C)&&(he=!0),Fe.R>-1&&Fe.L>-1&&Fe.R==Fe.L&&(he=!0);break;default:he=!0;break}}if(!(!he&&!se)){var ae=new Date(1987,1,19),Oe=0,pe=Object.create?Object.create(null):{},De=[];for(Be=0;Be<ie.FullPaths.length;++Be)pe[ie.FullPaths[Be]]=!0,ie.FileIndex[Be].type!==0&&De.push([ie.FullPaths[Be],ie.FileIndex[Be]]);for(Be=0;Be<De.length;++Be){var Se=n(De[Be][0]);Ae=pe[Se],Ae||(De.push([Se,{name:a(Se).replace("/",""),type:1,clsid:te,ct:ae,mt:ae,content:null}]),pe[Se]=!0)}for(De.sort(function(Xe,qe){return r(Xe[0],qe[0])}),ie.FullPaths=[],ie.FileIndex=[],Be=0;Be<De.length;++Be)ie.FullPaths[Be]=De[Be][0],ie.FileIndex[Be]=De[Be][1];for(Be=0;Be<De.length;++Be){var Ye=ie.FileIndex[Be],We=ie.FullPaths[Be];if(Ye.name=a(We).replace("/",""),Ye.L=Ye.R=Ye.C=-(Ye.color=1),Ye.size=Ye.content?Ye.content.length:0,Ye.start=0,Ye.clsid=Ye.clsid||te,Be===0)Ye.C=De.length>1?1:-1,Ye.size=0,Ye.type=5;else if(We.slice(-1)=="/"){for(Oe=Be+1;Oe<De.length&&n(ie.FullPaths[Oe])!=We;++Oe);for(Ye.C=Oe>=De.length?-1:Oe,Oe=Be+1;Oe<De.length&&n(ie.FullPaths[Oe])!=n(We);++Oe);Ye.R=Oe>=De.length?-1:Oe,Ye.type=1}else n(ie.FullPaths[Be+1]||"")==n(We)&&(Ye.R=Be+1),Ye.type=2}}}function L(ie,se){var he=se||{};if(he.fileType=="mad")return et(ie,he);switch(I(ie),he.fileType){case"zip":return ut(ie,he)}var Ae=function(Xe){for(var qe=0,at=0,mt=0;mt<Xe.FileIndex.length;++mt){var Kt=Xe.FileIndex[mt];if(Kt.content){var Jt=Kt.content.length;Jt>0&&(Jt<4096?qe+=Jt+63>>6:at+=Jt+511>>9)}}for(var _r=Xe.FullPaths.length+3>>2,ta=qe+7>>3,Vn=qe+127>>7,mo=ta+at+_r+Vn,ss=mo+127>>7,al=ss<=109?0:Math.ceil((ss-109)/127);mo+ss+al+127>>7>ss;)al=++ss<=109?0:Math.ceil((ss-109)/127);var ua=[1,al,ss,Vn,_r,at,qe,0];return Xe.FileIndex[0].size=qe<<6,ua[7]=(Xe.FileIndex[0].start=ua[0]+ua[1]+ua[2]+ua[3]+ua[4]+ua[5])+(ua[6]+7>>3),ua}(ie),Be=kt(Ae[7]<<9),Fe=0,ae=0;{for(Fe=0;Fe<8;++Fe)Be.write_shift(1,de[Fe]);for(Fe=0;Fe<8;++Fe)Be.write_shift(2,0);for(Be.write_shift(2,62),Be.write_shift(2,3),Be.write_shift(2,65534),Be.write_shift(2,9),Be.write_shift(2,6),Fe=0;Fe<3;++Fe)Be.write_shift(2,0);for(Be.write_shift(4,0),Be.write_shift(4,Ae[2]),Be.write_shift(4,Ae[0]+Ae[1]+Ae[2]+Ae[3]-1),Be.write_shift(4,0),Be.write_shift(4,4096),Be.write_shift(4,Ae[3]?Ae[0]+Ae[1]+Ae[2]-1:R),Be.write_shift(4,Ae[3]),Be.write_shift(-4,Ae[1]?Ae[0]-1:R),Be.write_shift(4,Ae[1]),Fe=0;Fe<109;++Fe)Be.write_shift(-4,Fe<Ae[2]?Ae[1]+Fe:-1)}if(Ae[1])for(ae=0;ae<Ae[1];++ae){for(;Fe<236+ae*127;++Fe)Be.write_shift(-4,Fe<Ae[2]?Ae[1]+Fe:-1);Be.write_shift(-4,ae===Ae[1]-1?R:ae+1)}var Oe=function(Xe){for(ae+=Xe;Fe<ae-1;++Fe)Be.write_shift(-4,Fe+1);Xe&&(++Fe,Be.write_shift(-4,R))};for(ae=Fe=0,ae+=Ae[1];Fe<ae;++Fe)Be.write_shift(-4,le.DIFSECT);for(ae+=Ae[2];Fe<ae;++Fe)Be.write_shift(-4,le.FATSECT);Oe(Ae[3]),Oe(Ae[4]);for(var pe=0,De=0,Se=ie.FileIndex[0];pe<ie.FileIndex.length;++pe)Se=ie.FileIndex[pe],Se.content&&(De=Se.content.length,!(De<4096)&&(Se.start=ae,Oe(De+511>>9)));for(Oe(Ae[6]+7>>3);Be.l&511;)Be.write_shift(-4,le.ENDOFCHAIN);for(ae=Fe=0,pe=0;pe<ie.FileIndex.length;++pe)Se=ie.FileIndex[pe],Se.content&&(De=Se.content.length,!(!De||De>=4096)&&(Se.start=ae,Oe(De+63>>6)));for(;Be.l&511;)Be.write_shift(-4,le.ENDOFCHAIN);for(Fe=0;Fe<Ae[4]<<2;++Fe){var Ye=ie.FullPaths[Fe];if(!Ye||Ye.length===0){for(pe=0;pe<17;++pe)Be.write_shift(4,0);for(pe=0;pe<3;++pe)Be.write_shift(4,-1);for(pe=0;pe<12;++pe)Be.write_shift(4,0);continue}Se=ie.FileIndex[Fe],Fe===0&&(Se.start=Se.size?Se.start-1:R);var We=Fe===0&&he.root||Se.name;if(De=2*(We.length+1),Be.write_shift(64,We,"utf16le"),Be.write_shift(2,De),Be.write_shift(1,Se.type),Be.write_shift(1,Se.color),Be.write_shift(-4,Se.L),Be.write_shift(-4,Se.R),Be.write_shift(-4,Se.C),Se.clsid)Be.write_shift(16,Se.clsid,"hex");else for(pe=0;pe<4;++pe)Be.write_shift(4,0);Be.write_shift(4,Se.state||0),Be.write_shift(4,0),Be.write_shift(4,0),Be.write_shift(4,0),Be.write_shift(4,0),Be.write_shift(4,Se.start),Be.write_shift(4,Se.size),Be.write_shift(4,0)}for(Fe=1;Fe<ie.FileIndex.length;++Fe)if(Se=ie.FileIndex[Fe],Se.size>=4096)if(Be.l=Se.start+1<<9,Wr&&Buffer.isBuffer(Se.content))Se.content.copy(Be,Be.l,0,Se.size),Be.l+=Se.size+511&-512;else{for(pe=0;pe<Se.size;++pe)Be.write_shift(1,Se.content[pe]);for(;pe&511;++pe)Be.write_shift(1,0)}for(Fe=1;Fe<ie.FileIndex.length;++Fe)if(Se=ie.FileIndex[Fe],Se.size>0&&Se.size<4096)if(Wr&&Buffer.isBuffer(Se.content))Se.content.copy(Be,Be.l,0,Se.size),Be.l+=Se.size+63&-64;else{for(pe=0;pe<Se.size;++pe)Be.write_shift(1,Se.content[pe]);for(;pe&63;++pe)Be.write_shift(1,0)}if(Wr)Be.l=Be.length;else for(;Be.l<Be.length;)Be.write_shift(1,0);return Be}function E(ie,se){var he=ie.FullPaths.map(function(pe){return pe.toUpperCase()}),Ae=he.map(function(pe){var De=pe.split("/");return De[De.length-(pe.slice(-1)=="/"?2:1)]}),Be=!1;se.charCodeAt(0)===47?(Be=!0,se=he[0].slice(0,-1)+se):Be=se.indexOf("/")!==-1;var Fe=se.toUpperCase(),ae=Be===!0?he.indexOf(Fe):Ae.indexOf(Fe);if(ae!==-1)return ie.FileIndex[ae];var Oe=!Fe.match(Lv);for(Fe=Fe.replace(ko,""),Oe&&(Fe=Fe.replace(Lv,"!")),ae=0;ae<he.length;++ae)if((Oe?he[ae].replace(Lv,"!"):he[ae]).replace(ko,"")==Fe||(Oe?Ae[ae].replace(Lv,"!"):Ae[ae]).replace(ko,"")==Fe)return ie.FileIndex[ae];return null}var j=64,R=-2,W="d0cf11e0a1b11ae1",de=[208,207,17,224,161,177,26,225],te="00000000000000000000000000000000",le={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:R,FREESECT:-1,HEADER_SIGNATURE:W,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:te,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ce(ie,se,he){u();var Ae=L(ie,he);c.writeFileSync(se,Ae)}function J(ie){for(var se=new Array(ie.length),he=0;he<ie.length;++he)se[he]=String.fromCharCode(ie[he]);return se.join("")}function me(ie,se){var he=L(ie,se);switch(se&&se.type||"buffer"){case"file":return u(),c.writeFileSync(se.filename,he),he;case"binary":return typeof he=="string"?he:J(he);case"base64":return f1(typeof he=="string"?he:J(he));case"buffer":if(Wr)return Buffer.isBuffer(he)?he:CA(he);case"array":return typeof he=="string"?Cl(he):he}return he}var Ee;function k(ie){try{var se=ie.InflateRaw,he=new se;if(he._processChunk(new Uint8Array([3,0]),he._finishFlushFlag),he.bytesRead)Ee=ie;else throw new Error("zlib does not expose bytesRead")}catch(Ae){console.error("cannot use native zlib: "+(Ae.message||Ae))}}function F(ie,se){if(!Ee)return Pe(ie,se);var he=Ee.InflateRaw,Ae=new he,Be=Ae._processChunk(ie.slice(ie.l),Ae._finishFlushFlag);return ie.l+=Ae.bytesRead,Be}function V(ie){return Ee?Ee.deflateRawSync(ie):xe(ie)}var D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],M=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],G=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function O(ie){var se=(ie<<1|ie<<11)&139536|(ie<<5|ie<<15)&558144;return(se>>16|se>>8|se)&255}for(var K=typeof Uint8Array<"u",ee=K?new Uint8Array(256):[],ne=0;ne<256;++ne)ee[ne]=O(ne);function Q(ie,se){var he=ee[ie&255];return se<=8?he>>>8-se:(he=he<<8|ee[ie>>8&255],se<=16?he>>>16-se:(he=he<<8|ee[ie>>16&255],he>>>24-se))}function be(ie,se){var he=se&7,Ae=se>>>3;return(ie[Ae]|(he<=6?0:ie[Ae+1]<<8))>>>he&3}function Z(ie,se){var he=se&7,Ae=se>>>3;return(ie[Ae]|(he<=5?0:ie[Ae+1]<<8))>>>he&7}function z(ie,se){var he=se&7,Ae=se>>>3;return(ie[Ae]|(he<=4?0:ie[Ae+1]<<8))>>>he&15}function X(ie,se){var he=se&7,Ae=se>>>3;return(ie[Ae]|(he<=3?0:ie[Ae+1]<<8))>>>he&31}function ve(ie,se){var he=se&7,Ae=se>>>3;return(ie[Ae]|(he<=1?0:ie[Ae+1]<<8))>>>he&127}function re(ie,se,he){var Ae=se&7,Be=se>>>3,Fe=(1<<he)-1,ae=ie[Be]>>>Ae;return he<8-Ae||(ae|=ie[Be+1]<<8-Ae,he<16-Ae)||(ae|=ie[Be+2]<<16-Ae,he<24-Ae)||(ae|=ie[Be+3]<<24-Ae),ae&Fe}function Ne(ie,se,he){var Ae=se&7,Be=se>>>3;return Ae<=5?ie[Be]|=(he&7)<<Ae:(ie[Be]|=he<<Ae&255,ie[Be+1]=(he&7)>>8-Ae),se+3}function Me(ie,se,he){var Ae=se&7,Be=se>>>3;return he=(he&1)<<Ae,ie[Be]|=he,se+1}function Ve(ie,se,he){var Ae=se&7,Be=se>>>3;return he<<=Ae,ie[Be]|=he&255,he>>>=8,ie[Be+1]=he,se+8}function nt(ie,se,he){var Ae=se&7,Be=se>>>3;return he<<=Ae,ie[Be]|=he&255,he>>>=8,ie[Be+1]=he&255,ie[Be+2]=he>>>8,se+16}function st(ie,se){var he=ie.length,Ae=2*he>se?2*he:se+5,Be=0;if(he>=se)return ie;if(Wr){var Fe=lQ(Ae);if(ie.copy)ie.copy(Fe);else for(;Be<ie.length;++Be)Fe[Be]=ie[Be];return Fe}else if(K){var ae=new Uint8Array(Ae);if(ae.set)ae.set(ie);else for(;Be<he;++Be)ae[Be]=ie[Be];return ae}return ie.length=Ae,ie}function lt(ie){for(var se=new Array(ie),he=0;he<ie;++he)se[he]=0;return se}function bt(ie,se,he){var Ae=1,Be=0,Fe=0,ae=0,Oe=0,pe=ie.length,De=K?new Uint16Array(32):lt(32);for(Fe=0;Fe<32;++Fe)De[Fe]=0;for(Fe=pe;Fe<he;++Fe)ie[Fe]=0;pe=ie.length;var Se=K?new Uint16Array(pe):lt(pe);for(Fe=0;Fe<pe;++Fe)De[Be=ie[Fe]]++,Ae<Be&&(Ae=Be),Se[Fe]=0;for(De[0]=0,Fe=1;Fe<=Ae;++Fe)De[Fe+16]=Oe=Oe+De[Fe-1]<<1;for(Fe=0;Fe<pe;++Fe)Oe=ie[Fe],Oe!=0&&(Se[Fe]=De[Oe+16]++);var Ye=0;for(Fe=0;Fe<pe;++Fe)if(Ye=ie[Fe],Ye!=0)for(Oe=Q(Se[Fe],Ae)>>Ae-Ye,ae=(1<<Ae+4-Ye)-1;ae>=0;--ae)se[Oe|ae<<Ye]=Ye&15|Fe<<4;return Ae}var ot=K?new Uint16Array(512):lt(512),Le=K?new Uint16Array(32):lt(32);if(!K){for(var Ze=0;Ze<512;++Ze)ot[Ze]=0;for(Ze=0;Ze<32;++Ze)Le[Ze]=0}(function(){for(var ie=[],se=0;se<32;se++)ie.push(5);bt(ie,Le,32);var he=[];for(se=0;se<=143;se++)he.push(8);for(;se<=255;se++)he.push(9);for(;se<=279;se++)he.push(7);for(;se<=287;se++)he.push(8);bt(he,ot,288)})();var ye=function(){for(var se=K?new Uint8Array(32768):[],he=0,Ae=0;he<G.length-1;++he)for(;Ae<G[he+1];++Ae)se[Ae]=he;for(;Ae<32768;++Ae)se[Ae]=29;var Be=K?new Uint8Array(259):[];for(he=0,Ae=0;he<M.length-1;++he)for(;Ae<M[he+1];++Ae)Be[Ae]=he;function Fe(Oe,pe){for(var De=0;De<Oe.length;){var Se=Math.min(65535,Oe.length-De),Ye=De+Se==Oe.length;for(pe.write_shift(1,+Ye),pe.write_shift(2,Se),pe.write_shift(2,~Se&65535);Se-- >0;)pe[pe.l++]=Oe[De++]}return pe.l}function ae(Oe,pe){for(var De=0,Se=0,Ye=K?new Uint16Array(32768):[];Se<Oe.length;){var We=Math.min(65535,Oe.length-Se);if(We<10){for(De=Ne(pe,De,+(Se+We==Oe.length)),De&7&&(De+=8-(De&7)),pe.l=De/8|0,pe.write_shift(2,We),pe.write_shift(2,~We&65535);We-- >0;)pe[pe.l++]=Oe[Se++];De=pe.l*8;continue}De=Ne(pe,De,+(Se+We==Oe.length)+2);for(var Xe=0;We-- >0;){var qe=Oe[Se];Xe=(Xe<<5^qe)&32767;var at=-1,mt=0;if((at=Ye[Xe])&&(at|=Se&-32768,at>Se&&(at-=32768),at<Se))for(;Oe[at+mt]==Oe[Se+mt]&&mt<250;)++mt;if(mt>2){qe=Be[mt],qe<=22?De=Ve(pe,De,ee[qe+1]>>1)-1:(Ve(pe,De,3),De+=5,Ve(pe,De,ee[qe-23]>>5),De+=3);var Kt=qe<8?0:qe-4>>2;Kt>0&&(nt(pe,De,mt-M[qe]),De+=Kt),qe=se[Se-at],De=Ve(pe,De,ee[qe]>>3),De-=3;var Jt=qe<4?0:qe-2>>1;Jt>0&&(nt(pe,De,Se-at-G[qe]),De+=Jt);for(var _r=0;_r<mt;++_r)Ye[Xe]=Se&32767,Xe=(Xe<<5^Oe[Se])&32767,++Se;We-=mt-1}else qe<=143?qe=qe+48:De=Me(pe,De,1),De=Ve(pe,De,ee[qe]),Ye[Xe]=Se&32767,++Se}De=Ve(pe,De,0)-1}return pe.l=(De+7)/8|0,pe.l}return function(pe,De){return pe.length<8?Fe(pe,De):ae(pe,De)}}();function xe(ie){var se=kt(50+Math.floor(ie.length*1.1)),he=ye(ie,se);return se.slice(0,he)}var ue=K?new Uint16Array(32768):lt(32768),Ge=K?new Uint16Array(32768):lt(32768),Je=K?new Uint16Array(128):lt(128),ht=1,Ue=1;function rt(ie,se){var he=X(ie,se)+257;se+=5;var Ae=X(ie,se)+1;se+=5;var Be=z(ie,se)+4;se+=4;for(var Fe=0,ae=K?new Uint8Array(19):lt(19),Oe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],pe=1,De=K?new Uint8Array(8):lt(8),Se=K?new Uint8Array(8):lt(8),Ye=ae.length,We=0;We<Be;++We)ae[D[We]]=Fe=Z(ie,se),pe<Fe&&(pe=Fe),De[Fe]++,se+=3;var Xe=0;for(De[0]=0,We=1;We<=pe;++We)Se[We]=Xe=Xe+De[We-1]<<1;for(We=0;We<Ye;++We)(Xe=ae[We])!=0&&(Oe[We]=Se[Xe]++);var qe=0;for(We=0;We<Ye;++We)if(qe=ae[We],qe!=0){Xe=ee[Oe[We]]>>8-qe;for(var at=(1<<7-qe)-1;at>=0;--at)Je[Xe|at<<qe]=qe&7|We<<3}var mt=[];for(pe=1;mt.length<he+Ae;)switch(Xe=Je[ve(ie,se)],se+=Xe&7,Xe>>>=3){case 16:for(Fe=3+be(ie,se),se+=2,Xe=mt[mt.length-1];Fe-- >0;)mt.push(Xe);break;case 17:for(Fe=3+Z(ie,se),se+=3;Fe-- >0;)mt.push(0);break;case 18:for(Fe=11+ve(ie,se),se+=7;Fe-- >0;)mt.push(0);break;default:mt.push(Xe),pe<Xe&&(pe=Xe);break}var Kt=mt.slice(0,he),Jt=mt.slice(he);for(We=he;We<286;++We)Kt[We]=0;for(We=Ae;We<30;++We)Jt[We]=0;return ht=bt(Kt,ue,286),Ue=bt(Jt,Ge,30),se}function Qe(ie,se){if(ie[0]==3&&!(ie[1]&3))return[hf(se),2];for(var he=0,Ae=0,Be=lQ(se||1<<18),Fe=0,ae=Be.length>>>0,Oe=0,pe=0;!(Ae&1);){if(Ae=Z(ie,he),he+=3,Ae>>>1)Ae>>1==1?(Oe=9,pe=5):(he=rt(ie,he),Oe=ht,pe=Ue);else{he&7&&(he+=8-(he&7));var De=ie[he>>>3]|ie[(he>>>3)+1]<<8;if(he+=32,De>0)for(!se&&ae<Fe+De&&(Be=st(Be,Fe+De),ae=Be.length);De-- >0;)Be[Fe++]=ie[he>>>3],he+=8;continue}for(;;){!se&&ae<Fe+32767&&(Be=st(Be,Fe+32767),ae=Be.length);var Se=re(ie,he,Oe),Ye=Ae>>>1==1?ot[Se]:ue[Se];if(he+=Ye&15,Ye>>>=4,!(Ye>>>8&255))Be[Fe++]=Ye;else{if(Ye==256)break;Ye-=257;var We=Ye<8?0:Ye-4>>2;We>5&&(We=0);var Xe=Fe+M[Ye];We>0&&(Xe+=re(ie,he,We),he+=We),Se=re(ie,he,pe),Ye=Ae>>>1==1?Le[Se]:Ge[Se],he+=Ye&15,Ye>>>=4;var qe=Ye<4?0:Ye-2>>1,at=G[Ye];for(qe>0&&(at+=re(ie,he,qe),he+=qe),!se&&ae<Xe&&(Be=st(Be,Xe+100),ae=Be.length);Fe<Xe;)Be[Fe]=Be[Fe-at],++Fe}}}return se?[Be,he+7>>>3]:[Be.slice(0,Fe),he+7>>>3]}function Pe(ie,se){var he=ie.slice(ie.l||0),Ae=Qe(he,se);return ie.l+=Ae[1],Ae[0]}function ze(ie,se){if(ie)typeof console<"u"&&console.error(se);else throw new Error(se)}function it(ie,se){var he=ie;Fi(he,0);var Ae=[],Be=[],Fe={FileIndex:Ae,FullPaths:Be};C(Fe,{root:se.root});for(var ae=he.length-4;(he[ae]!=80||he[ae+1]!=75||he[ae+2]!=5||he[ae+3]!=6)&&ae>=0;)--ae;he.l=ae+4,he.l+=4;var Oe=he.read_shift(2);he.l+=6;var pe=he.read_shift(4);for(he.l=pe,ae=0;ae<Oe;++ae){he.l+=20;var De=he.read_shift(4),Se=he.read_shift(4),Ye=he.read_shift(2),We=he.read_shift(2),Xe=he.read_shift(2);he.l+=8;var qe=he.read_shift(4),at=l(he.slice(he.l+Ye,he.l+Ye+We));he.l+=Ye+We+Xe;var mt=he.l;he.l=qe+4,Bt(he,De,Se,Fe,at),he.l=mt}return Fe}function Bt(ie,se,he,Ae,Be){ie.l+=2;var Fe=ie.read_shift(2),ae=ie.read_shift(2),Oe=o(ie);if(Fe&8257)throw new Error("Unsupported ZIP encryption");for(var pe=ie.read_shift(4),De=ie.read_shift(4),Se=ie.read_shift(4),Ye=ie.read_shift(2),We=ie.read_shift(2),Xe="",qe=0;qe<Ye;++qe)Xe+=String.fromCharCode(ie[ie.l++]);if(We){var at=l(ie.slice(ie.l,ie.l+We));(at[21589]||{}).mt&&(Oe=at[21589].mt),((Be||{})[21589]||{}).mt&&(Oe=Be[21589].mt)}ie.l+=We;var mt=ie.slice(ie.l,ie.l+De);switch(ae){case 8:mt=F(ie,Se);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+ae)}var Kt=!1;Fe&8&&(pe=ie.read_shift(4),pe==134695760&&(pe=ie.read_shift(4),Kt=!0),De=ie.read_shift(4),Se=ie.read_shift(4)),De!=se&&ze(Kt,"Bad compressed size: "+se+" != "+De),Se!=he&&ze(Kt,"Bad uncompressed size: "+he+" != "+Se),Pt(Ae,Xe,mt,{unsafe:!0,mt:Oe})}function ut(ie,se){var he=se||{},Ae=[],Be=[],Fe=kt(1),ae=he.compression?8:0,Oe=0,pe=0,De=0,Se=0,Ye=0,We=ie.FullPaths[0],Xe=We,qe=ie.FileIndex[0],at=[],mt=0;for(pe=1;pe<ie.FullPaths.length;++pe)if(Xe=ie.FullPaths[pe].slice(We.length),qe=ie.FileIndex[pe],!(!qe.size||!qe.content||Xe=="Sh33tJ5")){var Kt=Se,Jt=kt(Xe.length);for(De=0;De<Xe.length;++De)Jt.write_shift(1,Xe.charCodeAt(De)&127);Jt=Jt.slice(0,Jt.l),at[Ye]=x_e.buf(qe.content,0);var _r=qe.content;ae==8&&(_r=V(_r)),Fe=kt(30),Fe.write_shift(4,67324752),Fe.write_shift(2,20),Fe.write_shift(2,Oe),Fe.write_shift(2,ae),qe.mt?s(Fe,qe.mt):Fe.write_shift(4,0),Fe.write_shift(-4,at[Ye]),Fe.write_shift(4,_r.length),Fe.write_shift(4,qe.content.length),Fe.write_shift(2,Jt.length),Fe.write_shift(2,0),Se+=Fe.length,Ae.push(Fe),Se+=Jt.length,Ae.push(Jt),Se+=_r.length,Ae.push(_r),Fe=kt(46),Fe.write_shift(4,33639248),Fe.write_shift(2,0),Fe.write_shift(2,20),Fe.write_shift(2,Oe),Fe.write_shift(2,ae),Fe.write_shift(4,0),Fe.write_shift(-4,at[Ye]),Fe.write_shift(4,_r.length),Fe.write_shift(4,qe.content.length),Fe.write_shift(2,Jt.length),Fe.write_shift(2,0),Fe.write_shift(2,0),Fe.write_shift(2,0),Fe.write_shift(2,0),Fe.write_shift(4,0),Fe.write_shift(4,Kt),mt+=Fe.l,Be.push(Fe),mt+=Jt.length,Be.push(Jt),++Ye}return Fe=kt(22),Fe.write_shift(4,101010256),Fe.write_shift(2,0),Fe.write_shift(2,0),Fe.write_shift(2,Ye),Fe.write_shift(2,Ye),Fe.write_shift(4,mt),Fe.write_shift(4,Se),Fe.write_shift(2,0),ci([ci(Ae),ci(Be),Fe])}var It={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function $t(ie,se){if(ie.ctype)return ie.ctype;var he=ie.name||"",Ae=he.match(/\.([^\.]+)$/);return Ae&&It[Ae[1]]||se&&(Ae=(he=se).match(/[\.\\]([^\.\\])+$/),Ae&&It[Ae[1]])?It[Ae[1]]:"application/octet-stream"}function hr(ie){for(var se=f1(ie),he=[],Ae=0;Ae<se.length;Ae+=76)he.push(se.slice(Ae,Ae+76));return he.join(`\r
`)+`\r
`}function _e(ie){var se=ie.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(De){var Se=De.charCodeAt(0).toString(16).toUpperCase();return"="+(Se.length==1?"0"+Se:Se)});se=se.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),se.charAt(0)==`
`&&(se="=0D"+se.slice(1)),se=se.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var he=[],Ae=se.split(`\r
`),Be=0;Be<Ae.length;++Be){var Fe=Ae[Be];if(Fe.length==0){he.push("");continue}for(var ae=0;ae<Fe.length;){var Oe=76,pe=Fe.slice(ae,ae+Oe);pe.charAt(Oe-1)=="="?Oe--:pe.charAt(Oe-2)=="="?Oe-=2:pe.charAt(Oe-3)=="="&&(Oe-=3),pe=Fe.slice(ae,ae+Oe),ae+=Oe,ae<Fe.length&&(pe+="="),he.push(pe)}}return he.join(`\r
`)}function dt(ie){for(var se=[],he=0;he<ie.length;++he){for(var Ae=ie[he];he<=ie.length&&Ae.charAt(Ae.length-1)=="=";)Ae=Ae.slice(0,Ae.length-1)+ie[++he];se.push(Ae)}for(var Be=0;Be<se.length;++Be)se[Be]=se[Be].replace(/[=][0-9A-Fa-f]{2}/g,function(Fe){return String.fromCharCode(parseInt(Fe.slice(1),16))});return Cl(se.join(`\r
`))}function gt(ie,se,he){for(var Ae="",Be="",Fe="",ae,Oe=0;Oe<10;++Oe){var pe=se[Oe];if(!pe||pe.match(/^\s*$/))break;var De=pe.match(/^(.*?):\s*([^\s].*)$/);if(De)switch(De[1].toLowerCase()){case"content-location":Ae=De[2].trim();break;case"content-type":Fe=De[2].trim();break;case"content-transfer-encoding":Be=De[2].trim();break}}switch(++Oe,Be.toLowerCase()){case"base64":ae=Cl(Dl(se.slice(Oe).join("")));break;case"quoted-printable":ae=dt(se.slice(Oe));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Be)}var Se=Pt(ie,Ae.slice(he.length),ae,{unsafe:!0});Fe&&(Se.ctype=Fe)}function Ce(ie,se){if(J(ie.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var he=se&&se.root||"",Ae=(Wr&&Buffer.isBuffer(ie)?ie.toString("binary"):J(ie)).split(`\r
`),Be=0,Fe="";for(Be=0;Be<Ae.length;++Be)if(Fe=Ae[Be],!!/^Content-Location:/i.test(Fe)&&(Fe=Fe.slice(Fe.indexOf("file")),he||(he=Fe.slice(0,Fe.lastIndexOf("/")+1)),Fe.slice(0,he.length)!=he))for(;he.length>0&&(he=he.slice(0,he.length-1),he=he.slice(0,he.lastIndexOf("/")+1),Fe.slice(0,he.length)!=he););var ae=(Ae[1]||"").match(/boundary="(.*?)"/);if(!ae)throw new Error("MAD cannot find boundary");var Oe="--"+(ae[1]||""),pe=[],De=[],Se={FileIndex:pe,FullPaths:De};C(Se);var Ye,We=0;for(Be=0;Be<Ae.length;++Be){var Xe=Ae[Be];Xe!==Oe&&Xe!==Oe+"--"||(We++&&gt(Se,Ae.slice(Ye,Be),he),Ye=Be)}return Se}function et(ie,se){var he=se||{},Ae=he.boundary||"SheetJS";Ae="------="+Ae;for(var Be=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Ae.slice(2)+'"',"","",""],Fe=ie.FullPaths[0],ae=Fe,Oe=ie.FileIndex[0],pe=1;pe<ie.FullPaths.length;++pe)if(ae=ie.FullPaths[pe].slice(Fe.length),Oe=ie.FileIndex[pe],!(!Oe.size||!Oe.content||ae=="Sh33tJ5")){ae=ae.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(mt){return"_x"+mt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(mt){return"_u"+mt.charCodeAt(0).toString(16)+"_"});for(var De=Oe.content,Se=Wr&&Buffer.isBuffer(De)?De.toString("binary"):J(De),Ye=0,We=Math.min(1024,Se.length),Xe=0,qe=0;qe<=We;++qe)(Xe=Se.charCodeAt(qe))>=32&&Xe<128&&++Ye;var at=Ye>=We*4/5;Be.push(Ae),Be.push("Content-Location: "+(he.root||"file:///C:/SheetJS/")+ae),Be.push("Content-Transfer-Encoding: "+(at?"quoted-printable":"base64")),Be.push("Content-Type: "+$t(Oe,ae)),Be.push(""),Be.push(at?_e(Se):hr(Se))}return Be.push(Ae+`--\r
`),Be.join(`\r
`)}function yt(ie){var se={};return C(se,ie),se}function Pt(ie,se,he,Ae){var Be=Ae&&Ae.unsafe;Be||C(ie);var Fe=!Be&&Ir.find(ie,se);if(!Fe){var ae=ie.FullPaths[0];se.slice(0,ae.length)==ae?ae=se:(ae.slice(-1)!="/"&&(ae+="/"),ae=(ae+se).replace("//","/")),Fe={name:a(se),type:2},ie.FileIndex.push(Fe),ie.FullPaths.push(ae),Be||Ir.utils.cfb_gc(ie)}return Fe.content=he,Fe.size=he?he.length:0,Ae&&(Ae.CLSID&&(Fe.clsid=Ae.CLSID),Ae.mt&&(Fe.mt=Ae.mt),Ae.ct&&(Fe.ct=Ae.ct)),Fe}function Lt(ie,se){C(ie);var he=Ir.find(ie,se);if(he){for(var Ae=0;Ae<ie.FileIndex.length;++Ae)if(ie.FileIndex[Ae]==he)return ie.FileIndex.splice(Ae,1),ie.FullPaths.splice(Ae,1),!0}return!1}function qt(ie,se,he){C(ie);var Ae=Ir.find(ie,se);if(Ae){for(var Be=0;Be<ie.FileIndex.length;++Be)if(ie.FileIndex[Be]==Ae)return ie.FileIndex[Be].name=a(he),ie.FullPaths[Be]=he,!0}return!1}function wt(ie){I(ie,!0)}return t.find=E,t.read=P,t.parse=d,t.write=me,t.writeFile=ce,t.utils={cfb_new:yt,cfb_add:Pt,cfb_del:Lt,cfb_mov:qt,cfb_gc:wt,ReadShift:py,CheckField:pY,prep_blob:Fi,bconcat:ci,use_zlib:k,_deflateRaw:xe,_inflateRaw:Pe,consts:le},t}();function v_e(e){return typeof e=="string"?dS(e):Array.isArray(e)?KCe(e):e}function gb(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=dS(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?qu(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([v_e(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=e,o.href=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=Bf(t)),l.write(t),l.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function y_e(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function as(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function pQ(e,t){for(var r=[],n=as(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function hS(e){for(var t=[],r=as(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function fS(e){for(var t=[],r=as(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function b_e(e){for(var t=[],r=as(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var t_=new Date(1899,11,30,0,0,0);function Gs(e,t){var r=e.getTime(),n=t_.getTime()+(e.getTimezoneOffset()-t_.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var WJ=new Date,w_e=t_.getTime()+(WJ.getTimezoneOffset()-t_.getTimezoneOffset())*6e4,gQ=WJ.getTimezoneOffset();function mS(e){var t=new Date;return t.setTime(e*24*60*60*1e3+w_e),t.getTimezoneOffset()!==gQ&&t.setTime(t.getTime()+(t.getTimezoneOffset()-gQ)*6e4),t}function N_e(e){var t=0,r=0,n=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(a[s],10)}return t}var xQ=new Date("2017-02-19T19:06:09.000Z"),XJ=isNaN(xQ.getFullYear())?new Date("2/19/17"):xQ,C_e=XJ.getFullYear()==2017;function va(e,t){var r=new Date(e);if(C_e)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(XJ.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function n0(e,t){if(Wr&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return qu(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return qu(RJ(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return qu(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return qu(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function ya(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=ya(e[r]));return t}function ts(e,t){for(var r="";r.length<t;)r+=e;return r}function su(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(t=Number(n)))?t/r:t}var __e=["january","february","march","april","may","june","july","august","september","october","november","december"];function Bg(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),s=t.getDate();if(isNaN(s))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&__e.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var E_e=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(e||typeof n=="string")return r.split(n);for(var s=r.split(n),o=[s[0]],l=1;l<s.length;++l)o.push(a),o.push(s[l]);return o}}();function JJ(e){return e?e.content&&e.type?n0(e.content,!0):e.data?Rv(e.data):e.asNodeBuffer&&Wr?Rv(e.asNodeBuffer().toString("binary")):e.asBinary?Rv(e.asBinary()):e._data&&e._data.getContent?Rv(n0(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function YJ(e){if(!e)return null;if(e.data)return iQ(e.data);if(e.asNodeBuffer&&Wr)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?iQ(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function S_e(e){return e&&e.name.slice(-4)===".bin"?YJ(e):JJ(e)}function dc(e,t){for(var r=e.FullPaths||as(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var o=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==o||a==o)return e.files?e.files[r[s]]:e.FileIndex[s]}return null}function l3(e,t){var r=dc(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Cs(e,t,r){if(!r)return S_e(l3(e,t));if(!t)return null;try{return Cs(e,t)}catch{return null}}function _l(e,t,r){if(!r)return JJ(l3(e,t));if(!t)return null;try{return _l(e,t)}catch{return null}}function I_e(e,t,r){return YJ(l3(e,t))}function vQ(e){for(var t=e.FullPaths||as(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function zr(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return Wr?n=CA(r):n=qCe(r),Ir.utils.cfb_add(e,t,n)}Ir.utils.cfb_add(e,t,r)}else e.file(t,r)}function c3(){return Ir.utils.cfb_new()}function ZJ(e,t){switch(t.type){case"base64":return Ir.read(e,{type:"base64"});case"binary":return Ir.read(e,{type:"binary"});case"buffer":case"array":return Ir.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Mv(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var bs=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,B_e=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,yQ=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,j_e=/<[^>]*>/g,fo=bs.match(yQ)?yQ:j_e,P_e=/<\w*:/,k_e=/<(\/?)\w+:/;function Fr(e,t,r){for(var n={},a=0,s=0;a!==e.length&&!((s=e.charCodeAt(a))===32||s===10||s===13);++a);if(t||(n[0]=e.slice(0,a)),a===e.length)return n;var o=e.match(B_e),l=0,c="",u=0,d="",A="",f=1;if(o)for(u=0;u!=o.length;++u){for(A=o[u],s=0;s!=A.length&&A.charCodeAt(s)!==61;++s);for(d=A.slice(0,s).trim();A.charCodeAt(s+1)==32;)++s;for(f=(a=A.charCodeAt(s+1))==34||a==39?1:0,c=A.slice(s+1+f,A.length-f),l=0;l!=d.length&&d.charCodeAt(l)!==58;++l);if(l===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=c,n[d.toLowerCase()]=c;else{var h=(l===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(l+1);if(n[h]&&d.slice(l-3,l)=="ext")continue;n[h]=c,n[h.toLowerCase()]=c}}return n}function ld(e){return e.replace(k_e,"<$1")}var eY={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},u3=hS(eY),gn=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(e,function(l,c){return eY[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,c){return String.fromCharCode(parseInt(c,16))});var o=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,o)+r(a.slice(o+3))}}(),d3=/[&<>'"]/g,T_e=/[\u0000-\u0008\u000b-\u001f]/g;function Mn(e){var t=e+"";return t.replace(d3,function(r){return u3[r]}).replace(T_e,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function bQ(e){return Mn(e).replace(/ /g,"_x0020_")}var tY=/[\u0000-\u001f]/g;function A3(e){var t=e+"";return t.replace(d3,function(r){return u3[r]}).replace(/\n/g,"<br/>").replace(tY,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function F_e(e){var t=e+"";return t.replace(d3,function(r){return u3[r]}).replace(tY,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var wQ=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function O_e(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function ma(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Sj(e){for(var t="",r=0,n=0,a=0,s=0,o=0,l=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=a&63,t+=String.fromCharCode(o);continue}if(s=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}o=e.charCodeAt(r++),l=((n&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function NQ(e){var t=hf(2*e.length),r,n,a=1,s=0,o=0,l;for(n=0;n<e.length;n+=a)a=1,(l=e.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(n+1)&63),a=2):l<240?(r=(l&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(l&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[s++]=o&255,t[s++]=o>>>8,o=0),t[s++]=r%256,t[s++]=r>>>8;return t.slice(0,s).toString("ucs2")}function CQ(e){return CA(e,"binary").toString("utf8")}var C2="foo bar baz",Kn=Wr&&(CQ(C2)==Sj(C2)&&CQ||NQ(C2)==Sj(C2)&&NQ)||Sj,qu=Wr?function(e){return CA(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},p1=function(){var e={};return function(r,n){var a=r+"|"+(n||"");return e[a]?e[a]:e[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),rY=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}}(),D_e=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),R_e=/<\/?(?:vt:)?variant>/g,L_e=/<(?:vt:)([^>]*)>([\s\S]*)</;function _Q(e,t){var r=Fr(e),n=e.match(D_e(r.baseType))||[],a=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var o=s.replace(R_e,"").match(L_e);o&&a.push({v:Kn(o[2]),t:o[1]})}),a}var nY=/(^\s|\s$|\n)/;function Di(e,t){return"<"+e+(t.match(nY)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function g1(e){return as(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function rr(e,t,r){return"<"+e+(r!=null?g1(r):"")+(t!=null?(t.match(nY)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function Ek(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function M_e(e,t){switch(typeof e){case"string":var r=rr("vt:lpwstr",Mn(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return rr((e|0)==e?"vt:i4":"vt:r8",Mn(String(e)));case"boolean":return rr("vt:bool",e?"true":"false")}if(e instanceof Date)return rr("vt:filetime",Ek(e));throw new Error("Unable to serialize "+e)}function h3(e){if(Wr&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Kn(Bf(s3(e)));throw new Error("Bad input format: expected Buffer or string")}var x1=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Hs={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},I0=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],wl={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function U_e(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,s=5;s>=0;--s)a=a*256+e[t+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function Q_e(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,s=0,o=n?-t:t;isFinite(o)?o==0?a=s=0:(a=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(t)?26985:0);for(var l=0;l<=5;++l,s/=256)e[r+l]=s&255;e[r+6]=(a&15)<<4|s&15,e[r+7]=a>>4|n}var EQ=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,s=e[0][n].length;a<s;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},SQ=Wr?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:CA(t)})):EQ(e)}:EQ,IQ=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(Hd(e,a)));return n.join("").replace(ko,"")},f3=Wr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(ko,""):IQ(e,t,r)}:IQ,BQ=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},aY=Wr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):BQ(e,t,r)}:BQ,jQ=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(Bp(e,a)));return n.join("")},xb=Wr?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):jQ(t,r,n)}:jQ,sY=function(e,t){var r=Nl(e,t);return r>0?xb(e,t+4,t+4+r-1):""},iY=sY,oY=function(e,t){var r=Nl(e,t);return r>0?xb(e,t+4,t+4+r-1):""},lY=oY,cY=function(e,t){var r=2*Nl(e,t);return r>0?xb(e,t+4,t+4+r-1):""},uY=cY,dY=function(t,r){var n=Nl(t,r);return n>0?f3(t,r+4,r+4+n):""},AY=dY,hY=function(e,t){var r=Nl(e,t);return r>0?xb(e,t+4,t+4+r):""},fY=hY,mY=function(e,t){return U_e(e,t)},r_=mY,m3=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};Wr&&(iY=function(t,r){if(!Buffer.isBuffer(t))return sY(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},lY=function(t,r){if(!Buffer.isBuffer(t))return oY(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},uY=function(t,r){if(!Buffer.isBuffer(t))return cY(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},AY=function(t,r){if(!Buffer.isBuffer(t))return dY(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},fY=function(t,r){if(!Buffer.isBuffer(t))return hY(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},r_=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):mY(t,r)},m3=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Bp=function(e,t){return e[t]},Hd=function(e,t){return e[t+1]*256+e[t]},V_e=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Nl=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},dm=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},H_e=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function py(e,t){var r="",n,a,s=[],o,l,c,u;switch(t){case"dbcs":if(u=this.l,Wr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(Hd(this,u)),u+=2;e*=2;break;case"utf8":r=xb(this,this.l,this.l+e);break;case"utf16le":e*=2,r=f3(this,this.l,this.l+e);break;case"wstr":return py.call(this,e,"dbcs");case"lpstr-ansi":r=iY(this,this.l),e=4+Nl(this,this.l);break;case"lpstr-cp":r=lY(this,this.l),e=4+Nl(this,this.l);break;case"lpwstr":r=uY(this,this.l),e=4+2*Nl(this,this.l);break;case"lpp4":e=4+Nl(this,this.l),r=AY(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Nl(this,this.l),r=fY(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=Bp(this,this.l+e++))!==0;)s.push(N2(o));r=s.join("");break;case"_wstr":for(e=0,r="";(o=Hd(this,this.l+e))!==0;)s.push(N2(o)),e+=2;e+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=Bp(this,u),this.l=u+1,l=py.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(N2(Hd(this,u))),u+=2}r=s.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=Bp(this,u),this.l=u+1,l=py.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(N2(Bp(this,u))),u+=1}r=s.join("");break;default:switch(e){case 1:return n=Bp(this,this.l),this.l++,n;case 2:return n=(t==="i"?V_e:Hd)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||!(this[this.l+3]&128)?(n=(e>0?dm:H_e)(this,this.l),this.l+=4,n):(a=Nl(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=r_(this,this.l):a=r_([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=aY(this,this.l,e);break}}return this.l+=e,r}var $_e=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},K_e=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},q_e=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function G_e(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)q_e(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var o=t.charCodeAt(a);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,$_e(this,t,this.l);break;case 8:if(n=8,r==="f"){Q_e(this,t,this.l);break}case 16:break;case-4:n=4,K_e(this,t,this.l);break}return this.l+=n,this}function pY(e,t){var r=aY(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Fi(e,t){e.l=t,e.read_shift=py,e.chk=pY,e.write_shift=G_e}function ho(e,t){e.l+=t}function kt(e){var t=hf(e);return Fi(t,0),t}function _A(e,t,r){if(e){var n,a,s;Fi(e,e.l||0);for(var o=e.length,l=0,c=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var u=C1[l]||C1[65535];for(n=e.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=e.read_shift(1))&127)<<7*a;c=e.l+s;var d=u.f&&u.f(e,s,r);if(e.l=c,t(d,u,l))return}}}function el(){var e=[],t=Wr?256:2048,r=function(u){var d=kt(u);return Fi(d,0),d},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,t)))},o=function(){return a(),ci(e)},l=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(t)};return{next:s,push:l,end:o,_bufs:e}}function Qt(e,t,r,n){var a=+t,s;if(!isNaN(a)){n||(n=C1[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var o=e.next(s);a<=127?o.write_shift(1,a):(o.write_shift(1,(a&127)+128),o.write_shift(1,a>>7));for(var l=0;l!=4;++l)if(n>=128)o.write_shift(1,(n&127)+128),n>>=7;else{o.write_shift(1,n);break}n>0&&m3(r)&&e.push(r)}}function gy(e,t,r){var n=ya(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function PQ(e,t,r){var n=ya(e);return n.s=gy(n.s,t.s,r),n.e=gy(n.e,t.s,r),n}function xy(e,t){if(e.cRel&&e.c<0)for(e=ya(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=ya(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Tr(e);return!e.cRel&&e.cRel!=null&&(r=X_e(r)),!e.rRel&&e.rRel!=null&&(r=z_e(r)),r}function Ij(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Qa(e.s.c)+":"+(e.e.cRel?"":"$")+Qa(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+vs(e.s.r)+":"+(e.e.rRel?"":"$")+vs(e.e.r):xy(e.s,t.biff)+":"+xy(e.e,t.biff)}function p3(e){return parseInt(W_e(e),10)-1}function vs(e){return""+(e+1)}function z_e(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function W_e(e){return e.replace(/\$(\d+)$/,"$1")}function g3(e){for(var t=J_e(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function Qa(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function X_e(e){return e.replace(/^([A-Z])/,"$$$1")}function J_e(e){return e.replace(/^\$([A-Z])/,"$1")}function Y_e(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Va(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function Tr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function tl(e){var t=e.indexOf(":");return t==-1?{s:Va(e),e:Va(e)}:{s:Va(e.slice(0,t)),e:Va(e.slice(t+1))}}function Kr(e,t){return typeof t>"u"||typeof t=="number"?Kr(e.s,e.e):(typeof e!="string"&&(e=Tr(e)),typeof t!="string"&&(t=Tr(t)),e==t?e:e+":"+t)}function xn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=e.length;for(r=0;n<s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===s||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function kQ(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Sc(e.z,r?Gs(t):t)}catch{}try{return e.w=Sc((e.XF||{}).numFmtId||(r?14:0),r?Gs(t):t)}catch{return""+t}}function AA(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?EA[e.v]||e.v:t==null?kQ(e,e.v):kQ(e,t))}function jf(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function gY(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,s=e||(a?[]:{}),o=0,l=0;if(s&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?Va(n.origin):n.origin;o=c.r,l=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=xn(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),o==-1&&(u.e.r=o=d.e.r+1)}for(var A=0;A!=t.length;++A)if(t[A]){if(!Array.isArray(t[A]))throw new Error("aoa_to_sheet expects an array of arrays");for(var f=0;f!=t[A].length;++f)if(!(typeof t[A][f]>"u")){var h={v:t[A][f]},m=o+A,p=l+f;if(u.s.r>m&&(u.s.r=m),u.s.c>p&&(u.s.c=p),u.e.r<m&&(u.e.r=m),u.e.c<p&&(u.e.c=p),t[A][f]&&typeof t[A][f]=="object"&&!Array.isArray(t[A][f])&&!(t[A][f]instanceof Date))h=t[A][f];else if(Array.isArray(h.v)&&(h.f=t[A][f][1],h.v=h.v[0]),h.v===null)if(h.f)h.t="n";else if(n.nullError)h.t="e",h.v=0;else if(n.sheetStubs)h.t="z";else continue;else typeof h.v=="number"?h.t="n":typeof h.v=="boolean"?h.t="b":h.v instanceof Date?(h.z=n.dateNF||Pr[14],n.cellDates?(h.t="d",h.w=Sc(h.z,Gs(h.v))):(h.t="n",h.v=Gs(h.v),h.w=Sc(h.z,h.v))):h.t="s";if(a)s[m]||(s[m]=[]),s[m][p]&&s[m][p].z&&(h.z=s[m][p].z),s[m][p]=h;else{var g=Tr({c:p,r:m});s[g]&&s[g].z&&(h.z=s[g].z),s[g]=h}}}return u.s.c<1e7&&(s["!ref"]=Kr(u)),s}function ix(e,t){return gY(null,e,t)}function Z_e(e){return e.read_shift(4,"i")}function iu(e,t){return t||(t=kt(4)),t.write_shift(4,e),t}function co(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function ui(e,t){var r=!1;return t==null&&(r=!0,t=kt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function eEe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function tEe(e,t){return t||(t=kt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function x3(e,t){var r=e.l,n=e.read_shift(1),a=co(e),s=[],o={t:a,h:a};if(n&1){for(var l=e.read_shift(4),c=0;c!=l;++c)s.push(eEe(e));o.r=s}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}function rEe(e,t){var r=!1;return t==null&&(r=!0,t=kt(15+4*e.t.length)),t.write_shift(1,0),ui(e.t,t),r?t.slice(0,t.l):t}var nEe=x3;function aEe(e,t){var r=!1;return t==null&&(r=!0,t=kt(23+4*e.t.length)),t.write_shift(1,1),ui(e.t,t),t.write_shift(4,1),tEe({},t),r?t.slice(0,t.l):t}function kc(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function B0(e,t){return t==null&&(t=kt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function j0(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function P0(e,t){return t==null&&(t=kt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var sEe=co,xY=ui;function v3(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function n_(e,t){var r=!1;return t==null&&(r=!0,t=kt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var iEe=co,Sk=v3,y3=n_;function b3(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?r_([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):dm(t,0)>>2;return r?a/100:a}function vY(e,t){t==null&&(t=kt(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function yY(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function oEe(e,t){return t||(t=kt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var k0=yY,ox=oEe;function oo(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function a0(e,t){return(t||kt(8)).write_shift(8,e,"f")}function lEe(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),s=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var u=Pm[a];u&&(t.rgb=y1(u));break;case 2:t.rgb=y1([o,l,c]);break;case 3:t.theme=a;break}return s!=0&&(t.tint=s>0?s/32767:s/32768),t}function a_(e,t){if(t||(t=kt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function cEe(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function uEe(e,t){t||(t=kt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function bY(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function dEe(e){return bY(e,1)}function AEe(e){return bY(e,2)}var w3=2,$o=3,_2=11,TQ=12,s_=19,E2=64,hEe=65,fEe=71,mEe=4108,pEe=4126,ii=80,wY=81,gEe=[ii,wY],Ik={1:{n:"CodePage",t:w3},2:{n:"Category",t:ii},3:{n:"PresentationFormat",t:ii},4:{n:"ByteCount",t:$o},5:{n:"LineCount",t:$o},6:{n:"ParagraphCount",t:$o},7:{n:"SlideCount",t:$o},8:{n:"NoteCount",t:$o},9:{n:"HiddenCount",t:$o},10:{n:"MultimediaClipCount",t:$o},11:{n:"ScaleCrop",t:_2},12:{n:"HeadingPairs",t:mEe},13:{n:"TitlesOfParts",t:pEe},14:{n:"Manager",t:ii},15:{n:"Company",t:ii},16:{n:"LinksUpToDate",t:_2},17:{n:"CharacterCount",t:$o},19:{n:"SharedDoc",t:_2},22:{n:"HyperlinksChanged",t:_2},23:{n:"AppVersion",t:$o,p:"version"},24:{n:"DigSig",t:hEe},26:{n:"ContentType",t:ii},27:{n:"ContentStatus",t:ii},28:{n:"Language",t:ii},29:{n:"Version",t:ii},255:{},2147483648:{n:"Locale",t:s_},2147483651:{n:"Behavior",t:s_},1919054434:{}},Bk={1:{n:"CodePage",t:w3},2:{n:"Title",t:ii},3:{n:"Subject",t:ii},4:{n:"Author",t:ii},5:{n:"Keywords",t:ii},6:{n:"Comments",t:ii},7:{n:"Template",t:ii},8:{n:"LastAuthor",t:ii},9:{n:"RevNumber",t:ii},10:{n:"EditTime",t:E2},11:{n:"LastPrinted",t:E2},12:{n:"CreatedDate",t:E2},13:{n:"ModifiedDate",t:E2},14:{n:"PageCount",t:$o},15:{n:"WordCount",t:$o},16:{n:"CharCount",t:$o},17:{n:"Thumbnail",t:fEe},18:{n:"Application",t:ii},19:{n:"DocSecurity",t:$o},255:{},2147483648:{n:"Locale",t:s_},2147483651:{n:"Behavior",t:s_},1919054434:{}},FQ={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},xEe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function vEe(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var yEe=vEe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Pm=ya(yEe),EA={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},NY={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},jk={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},S2={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function N3(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function bEe(e){var t=N3();if(!e||!e.match)return t;var r={};if((e.match(fo)||[]).forEach(function(n){var a=Fr(n);switch(a[0].replace(P_e,"<")){case"<?xml":break;case"<Types":t.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":t[jk[a.ContentType]]!==void 0&&t[jk[a.ContentType]].push(a.PartName);break}}),t.xmlns!==Hs.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function CY(e,t){var r=b_e(jk),n=[],a;n[n.length]=bs,n[n.length]=rr("Types",null,{xmlns:Hs.CT,"xmlns:xsd":Hs.xsd,"xmlns:xsi":Hs.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return rr("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){e[c]&&e[c].length>0&&(a=e[c][0],n[n.length]=rr("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:S2[c][t.bookType]||S2[c].xlsx}))},o=function(c){(e[c]||[]).forEach(function(u){n[n.length]=rr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:S2[c][t.bookType]||S2[c].xlsx})})},l=function(c){(e[c]||[]).forEach(function(u){n[n.length]=rr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return s("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Zr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function v1(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function vy(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(fo)||[]).forEach(function(a){var s=Fr(a);if(s[0]==="<Relationship"){var o={};o.Type=s.Type,o.Target=s.Target,o.Id=s.Id,s.TargetMode&&(o.TargetMode=s.TargetMode);var l=s.TargetMode==="External"?s.Target:Mv(s.Target,t);r[l]=o,n[s.Id]=o}}),r["!id"]=n,r}function ig(e){var t=[bs,rr("Relationships",null,{xmlns:Hs.RELS})];return as(e["!id"]).forEach(function(r){t[t.length]=rr("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function On(e,t,r,n,a,s){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[Zr.HLINK,Zr.XPATH,Zr.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}var wEe="application/vnd.oasis.opendocument.spreadsheet";function NEe(e,t){for(var r=h3(e),n,a;n=x1.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=Fr(n[0],!1),a.path=="/"&&a.type!==wEe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function CEe(e){var t=[bs];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function OQ(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function _Ee(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function EEe(e){var t=[bs];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(OQ(e[r][0],e[r][1])),t.push(_Ee("",e[r][0]));return t.push(OQ("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function _Y(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+JC.version+"</meta:generator></office:meta></office:document-meta>"}var Nc=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],SEe=function(){for(var e=new Array(Nc.length),t=0;t<Nc.length;++t){var r=Nc[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function EY(e){var t={};e=Kn(e);for(var r=0;r<Nc.length;++r){var n=Nc[r],a=e.match(SEe[r]);a!=null&&a.length>0&&(t[n[1]]=gn(a[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=va(t[n[1]]))}return t}function Bj(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=Mn(t),n[n.length]=r?rr(e,t,r):Di(e,t))}function SY(e,t){var r=t||{},n=[bs,rr("cp:coreProperties",null,{"xmlns:cp":Hs.CORE_PROPS,"xmlns:dc":Hs.dc,"xmlns:dcterms":Hs.dcterms,"xmlns:dcmitype":Hs.dcmitype,"xmlns:xsi":Hs.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&Bj("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:Ek(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&Bj("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:Ek(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=Nc.length;++s){var o=Nc[s],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:e?e[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&Bj(o[0],l,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var km=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],IY=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function BY(e,t,r,n){var a=[];if(typeof e=="string")a=_Q(e,n);else for(var s=0;s<e.length;++s)a=a.concat(e[s].map(function(d){return{v:d}}));var o=typeof t=="string"?_Q(t,n).map(function(d){return d.v}):t,l=0,c=0;if(o.length>0)for(var u=0;u!==a.length;u+=2){switch(c=+a[u+1].v,a[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=o.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=o.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=o.slice(l,l+c);break}l+=c}}function IEe(e,t,r){var n={};return t||(t={}),e=Kn(e),km.forEach(function(a){var s=(e.match(p1(a[0]))||[])[1];switch(a[2]){case"string":s&&(t[a[1]]=gn(s));break;case"bool":t[a[1]]=s==="true";break;case"raw":var o=e.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));o&&o.length>0&&(n[a[1]]=o[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&BY(n.HeadingPairs,n.TitlesOfParts,t,r),t}function jY(e){var t=[],r=rr;return e||(e={}),e.Application="SheetJS",t[t.length]=bs,t[t.length]=rr("Properties",null,{xmlns:Hs.EXT_PROPS,"xmlns:vt":Hs.vt}),km.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=Mn(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+Mn(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var BEe=/<[^>]+>[^<]*/g;function jEe(e,t){var r={},n="",a=e.match(BEe);if(a)for(var s=0;s!=a.length;++s){var o=a[s],l=Fr(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=gn(l.name);break;case"</property>":n=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=gn(d);break;case"bool":r[n]=ma(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=va(d);break;case"cy":case"error":r[n]=gn(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,u,c)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}function PY(e){var t=[bs,rr("Properties",null,{xmlns:Hs.CUST_PROPS,"xmlns:vt":Hs.vt})];if(!e)return t.join("");var r=1;return as(e).forEach(function(a){++r,t[t.length]=rr("property",M_e(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Mn(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Pk={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},jj;function PEe(e,t,r){jj||(jj=hS(Pk)),t=jj[t]||t,e[t]=r}function kEe(e,t){var r=[];return as(Pk).map(function(n){for(var a=0;a<Nc.length;++a)if(Nc[a][1]==n)return Nc[a];for(a=0;a<km.length;++a)if(km[a][1]==n)return km[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(Di(Pk[n[1]]||n[1],a))}}),rr("DocumentProperties",r.join(""),{xmlns:wl.o})}function TEe(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&as(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)){for(var o=0;o<Nc.length;++o)if(s==Nc[o][1])return;for(o=0;o<km.length;++o)if(s==km[o][1])return;for(o=0;o<r.length;++o)if(s==r[o])return;var l=e[s],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),a.push(rr(bQ(s),l,{"dt:dt":c}))}}),t&&as(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)&&!(e&&Object.prototype.hasOwnProperty.call(e,s))){var o=t[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),a.push(rr(bQ(s),o,{"dt:dt":l}))}}),"<"+n+' xmlns="'+wl.o+'">'+a.join("")+"</"+n+">"}function C3(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function FEe(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var o=kt(8);return o.write_shift(4,n),o.write_shift(4,a),o}function kY(e,t,r){var n=e.l,a=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return a}function TY(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function FY(e,t,r){return t===31?TY(e):kY(e,t,r)}function kk(e,t,r){return FY(e,t,r===!1?0:4)}function OEe(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return FY(e,t,0)}function DEe(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var a=e.l;r[n]=e.read_shift(0,"lpwstr").replace(ko,""),e.l-a&2&&(e.l+=2)}return r}function REe(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(ko,"");return r}function LEe(e){var t=e.l,r=i_(e,wY);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=i_(e,$o);return[r,n]}function MEe(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(LEe(e));return r}function DQ(e,t){for(var r=e.read_shift(4),n={},a=0;a!=r;++a){var s=e.read_shift(4),o=e.read_shift(4);n[s]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(ko,"").replace(Lv,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function OY(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function UEe(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function i_(e,t,r){var n=e.read_shift(2),a,s=r||{};if(e.l+=2,t!==TQ&&n!==t&&gEe.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===TQ?n:t){case 2:return a=e.read_shift(2,"i"),s.raw||(e.l+=2),a;case 3:return a=e.read_shift(4,"i"),a;case 11:return e.read_shift(4)!==0;case 19:return a=e.read_shift(4),a;case 30:return kY(e,n,4).replace(ko,"");case 31:return TY(e);case 64:return C3(e);case 65:return OY(e);case 71:return UEe(e);case 80:return kk(e,n,!s.raw).replace(ko,"");case 81:return OEe(e,n).replace(ko,"");case 4108:return MEe(e);case 4126:case 4127:return n==4127?DEe(e):REe(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function RQ(e,t){var r=kt(4),n=kt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=kt(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=FEe(t);break;case 31:case 80:for(n=kt(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return ci([r,n])}function LQ(e,t){var r=e.l,n=e.read_shift(4),a=e.read_shift(4),s=[],o=0,l=0,c=-1,u={};for(o=0;o!=a;++o){var d=e.read_shift(4),A=e.read_shift(4);s[o]=[d,A+r]}s.sort(function(y,b){return y[1]-b[1]});var f={};for(o=0;o!=a;++o){if(e.l!==s[o][1]){var h=!0;if(o>0&&t)switch(t[s[o-1][0]].t){case 2:e.l+2===s[o][1]&&(e.l+=2,h=!1);break;case 80:e.l<=s[o][1]&&(e.l=s[o][1],h=!1);break;case 4108:e.l<=s[o][1]&&(e.l=s[o][1],h=!1);break}if((!t||o==0)&&e.l<=s[o][1]&&(h=!1,e.l=s[o][1]),h)throw new Error("Read Error: Expected address "+s[o][1]+" at "+e.l+" :"+o)}if(t){var m=t[s[o][0]];if(f[m.n]=i_(e,m.t,{raw:!0}),m.p==="version"&&(f[m.n]=String(f[m.n]>>16)+"."+("0000"+String(f[m.n]&65535)).slice(-4)),m.n=="CodePage")switch(f[m.n]){case 0:f[m.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Zc(l=f[m.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+f[m.n])}}else if(s[o][0]===1){if(l=f.CodePage=i_(e,w3),Zc(l),c!==-1){var p=e.l;e.l=s[c][1],u=DQ(e,l),e.l=p}}else if(s[o][0]===0){if(l===0){c=o,e.l=s[o+1][1];continue}u=DQ(e,l)}else{var g=u[s[o][0]],x;switch(e[e.l]){case 65:e.l+=4,x=OY(e);break;case 30:e.l+=4,x=kk(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,x=kk(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,x=e.read_shift(4,"i");break;case 19:e.l+=4,x=e.read_shift(4);break;case 5:e.l+=4,x=e.read_shift(8,"f");break;case 11:e.l+=4,x=As(e,4);break;case 64:e.l+=4,x=va(C3(e));break;default:throw new Error("unparsed value: "+e[e.l])}f[g]=x}}return e.l=r+n,f}var DY=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function QEe(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function MQ(e,t,r){var n=kt(8),a=[],s=[],o=8,l=0,c=kt(8),u=kt(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),a.push(u),o+=8+c.length,!t){u=kt(8),u.write_shift(4,0),a.unshift(u);var d=[kt(4)];for(d[0].write_shift(4,e.length),l=0;l<e.length;++l){var A=e[l][0];for(c=kt(8+2*(A.length+1)+(A.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,A.length+1),c.write_shift(0,A,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=ci(d),s.unshift(c),o+=8+c.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(DY.indexOf(e[l][0])>-1||IY.indexOf(e[l][0])>-1)&&e[l][1]!=null){var f=e[l][1],h=0;if(t){h=+t[e[l][0]];var m=r[h];if(m.p=="version"&&typeof f=="string"){var p=f.split(".");f=(+p[0]<<16)+(+p[1]||0)}c=RQ(m.t,f)}else{var g=QEe(f);g==-1&&(g=31,f=String(f)),c=RQ(g,f)}s.push(c),u=kt(8),u.write_shift(4,t?h:2+l),a.push(u),o+=8+c.length}var x=8*(s.length+1);for(l=0;l<s.length;++l)a[l].write_shift(4,x),x+=s[l].length;return n.write_shift(4,o),n.write_shift(4,s.length),ci([n].concat(a).concat(s))}function UQ(e,t,r){var n=e.content;if(!n)return{};Fi(n,0);var a,s,o,l,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==Ir.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),l=n.read_shift(4),a===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);a===2&&(o=n.read_shift(16),c=n.read_shift(4));var A=LQ(n,t),f={SystemIdentifier:u};for(var h in A)f[h]=A[h];if(f.FMTID=s,a===1)return f;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var m;try{m=LQ(n,null)}catch{}for(h in m)f[h]=m[h];return f.FMTID=[s,o],f}function QQ(e,t,r,n,a,s){var o=kt(a?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Ir.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,a?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,a?68:48);var c=MQ(e,r,n);if(l.push(c),a){var u=MQ(a,null,null);o.write_shift(16,s,"hex"),o.write_shift(4,68+c.length),l.push(u)}return ci(l)}function lh(e,t){return e.read_shift(t),null}function VEe(e,t){t||(t=kt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function HEe(e,t,r){for(var n=[],a=e.l+t;e.l<a;)n.push(r(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return n}function As(e,t){return e.read_shift(t)===1}function Eo(e,t){return t||(t=kt(2)),t.write_shift(2,+!!e),t}function _s(e){return e.read_shift(2,"u")}function Ac(e,t){return t||(t=kt(2)),t.write_shift(2,e),t}function RY(e,t){return HEe(e,t,_s)}function $Ee(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function LY(e,t,r){return r||(r=kt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function vb(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=e.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var o=n?e.read_shift(n,a):"";return o}function KEe(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,a=r&8,s=1+(r&1),o=0,l,c={};a&&(o=e.read_shift(2)),n&&(l=e.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,u);return a&&(e.l+=4*o),n&&(e.l+=l),c.t=d,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function qEe(e){var t=e.t||"",r=kt(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=kt(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return ci(a)}function s0(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function yb(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):s0(e,n,r)}function T0(e,t,r){if(r.biff>5)return yb(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function MY(e,t,r){return r||(r=kt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function GEe(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function zEe(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var a=e.read_shift((n?t-24:t)>>1,"utf16le").replace(ko,"");return n&&(e.l+=24),a}function WEe(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=e.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(s>>1,"utf16le").replace(ko,"");return r+o}function XEe(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return zEe(e);case"0303000000000000c000000000000046":return WEe(e);default:throw new Error("Unsupported Moniker "+r)}}function I2(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(ko,""):"";return r}function VQ(e,t){t||(t=kt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function JEe(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=e.read_shift(2);e.l+=2;var s,o,l,c,u="",d,A;a&16&&(s=I2(e,r-e.l)),a&128&&(o=I2(e,r-e.l)),(a&257)===257&&(l=I2(e,r-e.l)),(a&257)===1&&(c=XEe(e,r-e.l)),a&8&&(u=I2(e,r-e.l)),a&32&&(d=e.read_shift(16)),a&64&&(A=C3(e)),e.l=r;var f=o||l||c||"";f&&u&&(f+="#"+u),f||(f="#"+u),a&2&&f.charAt(0)=="/"&&f.charAt(1)!="/"&&(f="file://"+f);var h={Target:f};return d&&(h.guid=d),A&&(h.time=A),s&&(h.Tooltip=s),h}function YEe(e){var t=kt(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}t.write_shift(4,2),t.write_shift(4,s);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)t.write_shift(4,o[r]);if(s==28)n=n.slice(1),VQ(n,t);else if(s&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));var l=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),s&8&&VQ(a>-1?n.slice(a+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function UY(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),a=e.read_shift(1);return[t,r,n,a]}function QY(e,t){var r=UY(e);return r[3]=0,r}function cd(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function i0(e,t,r,n){return n||(n=kt(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function ZEe(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function eSe(e,t,r){return t===0?"":T0(e,t,r)}function tSe(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),s=e.read_shift(n,"i"),o=e.read_shift(n,"i");return[a,s,o]}function VY(e){var t=e.read_shift(2),r=b3(e);return[t,r]}function rSe(e,t,r){e.l+=4,t-=4;var n=e.l+t,a=vb(e,t,r),s=e.read_shift(2);if(n-=e.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return e.l+=s,a}function pS(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function HY(e,t){return t||(t=kt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function $Y(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),a=e.read_shift(1);return{s:{c:n,r:t},e:{c:a,r}}}var nSe=$Y;function KY(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function aSe(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function sSe(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Yi(e){e.l+=2,e.l+=e.read_shift(2)}var iSe={0:Yi,4:Yi,5:Yi,6:Yi,7:sSe,8:Yi,9:Yi,10:Yi,11:Yi,12:Yi,13:aSe,14:Yi,15:Yi,16:Yi,17:Yi,18:Yi,19:Yi,20:Yi,21:KY};function oSe(e,t){for(var r=e.l+t,n=[];e.l<r;){var a=e.read_shift(2);e.l-=2;try{n.push(iSe[a](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function B2(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function _3(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=kt(a);return s.write_shift(2,n),s.write_shift(2,t),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function lSe(e,t){return t===0||e.read_shift(2),1200}function cSe(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,a=T0(e,0,r);return e.read_shift(t+n-e.l),a}function uSe(e,t){var r=!t||t.biff==8,n=kt(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function dSe(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function ASe(e,t,r){var n=e.read_shift(4),a=e.read_shift(1)&3,s=e.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var o=vb(e,0,r);return o.length===0&&(o="Sheet1"),{pos:n,hs:a,dt:s,name:o}}function hSe(e,t){var r=!t||t.biff>=8?2:1,n=kt(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function fSe(e,t){for(var r=e.l+t,n=e.read_shift(4),a=e.read_shift(4),s=[],o=0;o!=a&&e.l<r;++o)s.push(KEe(e));return s.Count=n,s.Unique=a,s}function mSe(e,t){var r=kt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=qEe(e[a]);var s=ci([r].concat(n));return s.parts=[r.length].concat(n.map(function(o){return o.length})),s}function pSe(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function gSe(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function xSe(e){var t=ZEe(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function vSe(e){return e.read_shift(2),e.read_shift(4)}function HQ(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var a=e.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function ySe(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,a],Flags:s,CurTab:o,FirstTab:l,Selected:c,TabRatio:u}}function bSe(){var e=kt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function wSe(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function NSe(e){var t=kt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function CSe(){}function _Se(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=vb(e,0,r),n}function ESe(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,s=kt(a);return s.write_shift(2,e.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function SSe(e){var t=cd(e);return t.isst=e.read_shift(4),t}function ISe(e,t,r,n){var a=kt(10);return i0(e,t,n,a),a.write_shift(4,r),a}function BSe(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,a=cd(e);r.biff==2&&e.l++;var s=yb(e,n-e.l,r);return a.val=s,a}function jSe(e,t,r,n,a){var s=!a||a.biff==8,o=kt(8+ +s+(1+s)*r.length);return i0(e,t,n,o),o.write_shift(2,r.length),s&&o.write_shift(1,1),o.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),o}function PSe(e,t,r){var n=e.read_shift(2),a=T0(e,0,r);return[n,a]}function kSe(e,t,r,n){var a=r&&r.biff==5;n||(n=kt(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var TSe=T0;function $Q(e,t,r){var n=e.l+t,a=r.biff==8||!r.biff?4:2,s=e.read_shift(a),o=e.read_shift(a),l=e.read_shift(2),c=e.read_shift(2);return e.l=n,{s:{r:s,c:l},e:{r:o,c}}}function FSe(e,t){var r=t.biff==8||!t.biff?4:2,n=kt(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function OSe(e){var t=e.read_shift(2),r=e.read_shift(2),n=VY(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function DSe(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(VY(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(s.length!=o-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:o,rkrec:s}}function RSe(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(s.length!=o-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:o,ixfe:s}}function LSe(e,t,r,n){var a={},s=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),c=e.read_shift(2);return a.patternType=xEe[l>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=o&15,a.dgRight=o>>4&15,a.dgTop=o>>8&15,a.dgBottom=o>>12&15,a.icvLeft=o>>16&127,a.icvRight=o>>23&127,a.grbitDiag=o>>30&3,a.icvTop=l&127,a.icvBottom=l>>7&127,a.icvDiag=l>>14&127,a.dgDiag=l>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function MSe(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=LSe(e,t,n.fStyle,r),n}function KQ(e,t,r,n){var a=r&&r.biff==5;n||(n=kt(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function USe(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function QSe(e){var t=kt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function qQ(e,t,r){var n=cd(e);(r.biff==2||t==9)&&++e.l;var a=$Ee(e);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function VSe(e,t,r,n,a,s){var o=kt(8);return i0(e,t,n,o),LY(r,s,o),o}function HSe(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=cd(e),a=oo(e);return n.val=a,n}function $Se(e,t,r,n){var a=kt(14);return i0(e,t,n,a),a0(r,a),a}var GQ=eSe;function KSe(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var o=s0(e,s),l=[];n>e.l;)l.push(yb(e));return[s,a,o,l]}function zQ(e,t,r){var n=e.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=rSe(e,t-2,r)),s.body=a||e.read_shift(t-2),typeof a=="string"&&(s.Name=a),s}var qSe=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function WQ(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=s0(e,o,r);a&32&&(u=qSe[u.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var A=n==e.l||l===0||!(d>0)?[]:oPe(e,d,r,l);return{chKey:s,Name:u,itab:c,rgce:A}}function qY(e,t,r){if(r.biff<8)return GSe(e,t,r);for(var n=[],a=e.l+t,s=e.read_shift(r.biff>8?4:2);s--!==0;)n.push(tSe(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function GSe(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=vb(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function zSe(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),a=e.read_shift(2),s=s0(e,n,r),o=s0(e,a,r);return[s,o]}function WSe(e,t,r){var n=$Y(e);e.l++;var a=e.read_shift(1);return t-=8,[lPe(e,t,r),a,n]}function XQ(e,t,r){var n=nSe(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,sPe(e,t,r)]}function XSe(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function JSe(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),o=e.read_shift(2),l=T0(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:a},l,o,s]}}function YSe(e,t,r){return JSe(e,t,r)}function ZSe(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(pS(e));return r}function eIe(e){var t=kt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)HY(e[r],t);return t}function tIe(e,t,r){if(r&&r.biff<8)return nIe(e,t,r);var n=KY(e),a=oSe(e,t-22,n[1]);return{cmo:n,ft:a}}var rIe={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=r,{fmt:n}}};function nIe(e,t,r){e.l+=4;var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((rIe[n]||ho)(e,t,r)),{cmo:[a,n,s],ft:o}}function aIe(e,t,r){var n=e.l,a="";try{e.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(s)==-1?e.l+=6:o=GEe(e,6,r);var l=e.read_shift(2);e.read_shift(2),_s(e,2);var c=e.read_shift(2);e.l+=c;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],A=s0(e,e.lens[u+1]-e.lens[u]-1);if(a+=A,a.length>=(d?l:2*l))break}if(a.length!==l&&a.length!==l*2)throw new Error("cchText: "+l+" != "+a.length);return e.l=n+t,{t:a}}catch{return e.l=n+t,{t:a}}}function sIe(e,t){var r=pS(e);e.l+=16;var n=JEe(e,t-24);return[r,n]}function iIe(e){var t=kt(24),r=Va(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return ci([t,YEe(e[1])])}function oIe(e,t){e.read_shift(2);var r=pS(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(ko,""),[r,n]}function lIe(e){var t=e[1].Tooltip,r=kt(10+2*(t.length+1));r.write_shift(2,2048);var n=Va(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function cIe(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=FQ[r]||r,r=e.read_shift(2),t[1]=FQ[r]||r,t}function uIe(e){return e||(e=kt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function dIe(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(QY(e));return r}function AIe(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(QY(e));return r}function hIe(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function GY(e,t,r){if(!r.cellStyles)return ho(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),s=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var u={s:a,e:s,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function fIe(e,t){var r=kt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function mIe(e,t){var r={};return t<32||(e.l+=16,r.header=oo(e),r.footer=oo(e),e.l+=2),r}function pIe(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var a=e.read_shift(1);return e.l+=3,a&16&&(n.area=!0),n}function gIe(e){for(var t=kt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var xIe=cd,vIe=RY,yIe=yb;function bIe(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,a}function wIe(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=cd(e);++e.l;var a=T0(e,t-7,r);return n.t="str",n.val=a,n}function NIe(e){var t=cd(e);++e.l;var r=oo(e);return t.t="n",t.val=r,t}function CIe(e,t,r){var n=kt(15);return Cb(n,e,t),n.write_shift(8,r,"f"),n}function _Ie(e){var t=cd(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function EIe(e,t,r){var n=kt(9);return Cb(n,e,t),n.write_shift(2,r),n}function SIe(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function IIe(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function BIe(e,t,r){var n=e.l+t,a=cd(e),s=e.read_shift(2),o=s0(e,s,r);return e.l=n,a.t="str",a.val=o,a}var jIe=[2,3,48,49,131,139,140,245],Tk=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=hS({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],d=hf(1);switch(c.type){case"base64":d=Cl(Dl(l));break;case"binary":d=Cl(l);break;case"buffer":case"array":d=l;break}Fi(d,0);var A=d.read_shift(1),f=!!(A&136),h=!1,m=!1;switch(A){case 2:break;case 3:break;case 48:h=!0,f=!0;break;case 49:h=!0,f=!0;break;case 131:break;case 139:break;case 140:m=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+A.toString(16))}var p=0,g=521;A==2&&(p=d.read_shift(2)),d.l+=3,A!=2&&(p=d.read_shift(4)),p>1048576&&(p=1e6),A!=2&&(g=d.read_shift(2));var x=d.read_shift(2),y=c.codepage||1252;A!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(y=e[d[d.l]]),d.l+=1,d.l+=2),m&&(d.l+=36);for(var b=[],_={},T=Math.min(d.length,A==2?521:g-10-(h?264:0)),P=m?32:11;d.l<T&&d[d.l]!=13;)switch(_={},_.name=h1.utils.decode(y,d.slice(d.l,d.l+P)).replace(/[\u0000\r\n].*$/g,""),d.l+=P,_.type=String.fromCharCode(d.read_shift(1)),A!=2&&!m&&(_.offset=d.read_shift(4)),_.len=d.read_shift(1),A==2&&(_.offset=d.read_shift(2)),_.dec=d.read_shift(1),_.name.length&&b.push(_),A!=2&&(d.l+=m?13:14),_.type){case"B":(!h||_.len!=8)&&c.WTF&&console.log("Skipping "+_.name+":"+_.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+_.name+":"+_.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+_.type)}if(d[d.l]!==13&&(d.l=g-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=g;var C=0,S=0;for(u[0]=[],S=0;S!=b.length;++S)u[0][S]=b[S].name;for(;p-- >0;){if(d[d.l]===42){d.l+=x;continue}for(++d.l,u[++C]=[],S=0,S=0;S!=b.length;++S){var I=d.slice(d.l,d.l+b[S].len);d.l+=b[S].len,Fi(I,0);var L=h1.utils.decode(y,I);switch(b[S].type){case"C":L.trim().length&&(u[C][S]=L.replace(/\s+$/,""));break;case"D":L.length===8?u[C][S]=new Date(+L.slice(0,4),+L.slice(4,6)-1,+L.slice(6,8)):u[C][S]=L;break;case"F":u[C][S]=parseFloat(L.trim());break;case"+":case"I":u[C][S]=m?I.read_shift(-4,"i")^2147483648:I.read_shift(4,"i");break;case"L":switch(L.trim().toUpperCase()){case"Y":case"T":u[C][S]=!0;break;case"N":case"F":u[C][S]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+L+"|")}break;case"M":if(!f)throw new Error("DBF Unexpected MEMO for type "+A.toString(16));u[C][S]="##MEMO##"+(m?parseInt(L.trim(),10):I.read_shift(4));break;case"N":L=L.replace(/\u0000/g,"").trim(),L&&L!="."&&(u[C][S]=+L||0);break;case"@":u[C][S]=new Date(I.read_shift(-8,"f")-621356832e5);break;case"T":u[C][S]=new Date((I.read_shift(4)-2440588)*864e5+I.read_shift(4));break;case"Y":u[C][S]=I.read_shift(4,"i")/1e4+I.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[C][S]=-I.read_shift(-8,"f");break;case"B":if(h&&b[S].len==8){u[C][S]=I.read_shift(8,"f");break}case"G":case"P":I.l+=b[S].len;break;case"0":if(b[S].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+b[S].type)}}}if(A!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=b,u}function n(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=ix(r(l,u),u);return d["!cols"]=u.DBF.map(function(A){return{wch:A.len,DBF:A}}),delete u.DBF,d}function a(l,c){try{return jf(n(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var u=c||{};if(+u.codepage>=0&&Zc(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=el(),A=c_(l,{header:1,raw:!0,cellDates:!0}),f=A[0],h=A.slice(1),m=l["!cols"]||[],p=0,g=0,x=0,y=1;for(p=0;p<f.length;++p){if(((m[p]||{}).DBF||{}).name){f[p]=m[p].DBF.name,++x;continue}if(f[p]!=null){if(++x,typeof f[p]=="number"&&(f[p]=f[p].toString(10)),typeof f[p]!="string")throw new Error("DBF Invalid column name "+f[p]+" |"+typeof f[p]+"|");if(f.indexOf(f[p])!==p){for(g=0;g<1024;++g)if(f.indexOf(f[p]+"_"+g)==-1){f[p]+="_"+g;break}}}}var b=xn(l["!ref"]),_=[],T=[],P=[];for(p=0;p<=b.e.c-b.s.c;++p){var C="",S="",I=0,L=[];for(g=0;g<h.length;++g)h[g][p]!=null&&L.push(h[g][p]);if(L.length==0||f[p]==null){_[p]="?";continue}for(g=0;g<L.length;++g){switch(typeof L[g]){case"number":S="B";break;case"string":S="C";break;case"boolean":S="L";break;case"object":S=L[g]instanceof Date?"D":"C";break;default:S="C"}I=Math.max(I,String(L[g]).length),C=C&&C!=S?"C":S}I>250&&(I=250),S=((m[p]||{}).DBF||{}).type,S=="C"&&m[p].DBF.len>I&&(I=m[p].DBF.len),C=="B"&&S=="N"&&(C="N",P[p]=m[p].DBF.dec,I=m[p].DBF.len),T[p]=C=="C"||S=="N"?I:s[C]||0,y+=T[p],_[p]=C}var E=d.next(32);for(E.write_shift(4,318902576),E.write_shift(4,h.length),E.write_shift(2,296+32*x),E.write_shift(2,y),p=0;p<4;++p)E.write_shift(4,0);for(E.write_shift(4,0|(+t[DJ]||3)<<8),p=0,g=0;p<f.length;++p)if(f[p]!=null){var j=d.next(32),R=(f[p].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);j.write_shift(1,R,"sbcs"),j.write_shift(1,_[p]=="?"?"C":_[p],"sbcs"),j.write_shift(4,g),j.write_shift(1,T[p]||s[_[p]]||0),j.write_shift(1,P[p]||0),j.write_shift(1,2),j.write_shift(4,0),j.write_shift(1,0),j.write_shift(4,0),j.write_shift(4,0),g+=T[p]||s[_[p]]||0}var W=d.next(264);for(W.write_shift(4,13),p=0;p<65;++p)W.write_shift(4,0);for(p=0;p<h.length;++p){var de=d.next(y);for(de.write_shift(1,0),g=0;g<f.length;++g)if(f[g]!=null)switch(_[g]){case"L":de.write_shift(1,h[p][g]==null?63:h[p][g]?84:70);break;case"B":de.write_shift(8,h[p][g]||0,"f");break;case"N":var te="0";for(typeof h[p][g]=="number"&&(te=h[p][g].toFixed(P[g]||0)),x=0;x<T[g]-te.length;++x)de.write_shift(1,32);de.write_shift(1,te,"sbcs");break;case"D":h[p][g]?(de.write_shift(4,("0000"+h[p][g].getFullYear()).slice(-4),"sbcs"),de.write_shift(2,("00"+(h[p][g].getMonth()+1)).slice(-2),"sbcs"),de.write_shift(2,("00"+h[p][g].getDate()).slice(-2),"sbcs")):de.write_shift(8,"00000000","sbcs");break;case"C":var le=String(h[p][g]!=null?h[p][g]:"").slice(0,T[g]);for(de.write_shift(1,le,"sbcs"),x=0;x<T[g]-le.length;++x)de.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:o}}(),zY=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+as(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(f,h){var m=e[h];return typeof m=="number"?oQ(m):m},n=function(f,h,m){var p=h.charCodeAt(0)-32<<4|m.charCodeAt(0)-48;return p==59?f:oQ(p)};e["|"]=254;function a(f,h){switch(h.type){case"base64":return s(Dl(f),h);case"binary":return s(f,h);case"buffer":return s(Wr&&Buffer.isBuffer(f)?f.toString("binary"):Bf(f),h);case"array":return s(n0(f),h)}throw new Error("Unrecognized type "+h.type)}function s(f,h){var m=f.split(/[\n\r]+/),p=-1,g=-1,x=0,y=0,b=[],_=[],T=null,P={},C=[],S=[],I=[],L=0,E;for(+h.codepage>=0&&Zc(+h.codepage);x!==m.length;++x){L=0;var j=m[x].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),R=j.replace(/;;/g,"\0").split(";").map(function(D){return D.replace(/\u0000/g,";")}),W=R[0],de;if(j.length>0)switch(W){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":R[1].charAt(0)=="P"&&_.push(j.slice(3).replace(/;;/g,";"));break;case"C":var te=!1,le=!1,ce=!1,J=!1,me=-1,Ee=-1;for(y=1;y<R.length;++y)switch(R[y].charAt(0)){case"A":break;case"X":g=parseInt(R[y].slice(1))-1,le=!0;break;case"Y":for(p=parseInt(R[y].slice(1))-1,le||(g=0),E=b.length;E<=p;++E)b[E]=[];break;case"K":de=R[y].slice(1),de.charAt(0)==='"'?de=de.slice(1,de.length-1):de==="TRUE"?de=!0:de==="FALSE"?de=!1:isNaN(su(de))?isNaN(Bg(de).getDate())||(de=va(de)):(de=su(de),T!==null&&ax(T)&&(de=mS(de))),te=!0;break;case"E":J=!0;var k=og(R[y].slice(1),{r:p,c:g});b[p][g]=[b[p][g],k];break;case"S":ce=!0,b[p][g]=[b[p][g],"S5S"];break;case"G":break;case"R":me=parseInt(R[y].slice(1))-1;break;case"C":Ee=parseInt(R[y].slice(1))-1;break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+j)}if(te&&(b[p][g]&&b[p][g].length==2?b[p][g][0]=de:b[p][g]=de,T=null),ce){if(J)throw new Error("SYLK shared formula cannot have own formula");var F=me>-1&&b[me][Ee];if(!F||!F[1])throw new Error("SYLK shared formula cannot find base");b[p][g][1]=AZ(F[1],{r:p-me,c:g-Ee})}break;case"F":var V=0;for(y=1;y<R.length;++y)switch(R[y].charAt(0)){case"X":g=parseInt(R[y].slice(1))-1,++V;break;case"Y":for(p=parseInt(R[y].slice(1))-1,E=b.length;E<=p;++E)b[E]=[];break;case"M":L=parseInt(R[y].slice(1))/20;break;case"F":break;case"G":break;case"P":T=_[parseInt(R[y].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(I=R[y].slice(1).split(" "),E=parseInt(I[0],10);E<=parseInt(I[1],10);++E)L=parseInt(I[2],10),S[E-1]=L===0?{hidden:!0}:{wch:L},ff(S[E-1]);break;case"C":g=parseInt(R[y].slice(1))-1,S[g]||(S[g]={});break;case"R":p=parseInt(R[y].slice(1))-1,C[p]||(C[p]={}),L>0?(C[p].hpt=L,C[p].hpx=Pg(L)):L===0&&(C[p].hidden=!0);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+j)}V<1&&(T=null);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+j)}}return C.length>0&&(P["!rows"]=C),S.length>0&&(P["!cols"]=S),h&&h.sheetRows&&(b=b.slice(0,h.sheetRows)),[b,P]}function o(f,h){var m=a(f,h),p=m[0],g=m[1],x=ix(p,h);return as(g).forEach(function(y){x[y]=g[y]}),x}function l(f,h){return jf(o(f,h),h)}function c(f,h,m,p){var g="C;Y"+(m+1)+";X"+(p+1)+";K";switch(f.t){case"n":g+=f.v||0,f.f&&!f.F&&(g+=";E"+P3(f.f,{r:m,c:p}));break;case"b":g+=f.v?"TRUE":"FALSE";break;case"e":g+=f.w||f.v;break;case"d":g+='"'+(f.w||f.v)+'"';break;case"s":g+='"'+f.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return g}function u(f,h){h.forEach(function(m,p){var g="F;W"+(p+1)+" "+(p+1)+" ";m.hidden?g+="0":(typeof m.width=="number"&&!m.wpx&&(m.wpx=b1(m.width)),typeof m.wpx=="number"&&!m.wch&&(m.wch=w1(m.wpx)),typeof m.wch=="number"&&(g+=Math.round(m.wch))),g.charAt(g.length-1)!=" "&&f.push(g)})}function d(f,h){h.forEach(function(m,p){var g="F;";m.hidden?g+="M0;":m.hpt?g+="M"+20*m.hpt+";":m.hpx&&(g+="M"+20*N1(m.hpx)+";"),g.length>2&&f.push(g+"R"+(p+1))})}function A(f,h){var m=["ID;PWXL;N;E"],p=[],g=xn(f["!ref"]),x,y=Array.isArray(f),b=`\r
`;m.push("P;PGeneral"),m.push("F;P0;DG0G8;M255"),f["!cols"]&&u(m,f["!cols"]),f["!rows"]&&d(m,f["!rows"]),m.push("B;Y"+(g.e.r-g.s.r+1)+";X"+(g.e.c-g.s.c+1)+";D"+[g.s.c,g.s.r,g.e.c,g.e.r].join(" "));for(var _=g.s.r;_<=g.e.r;++_)for(var T=g.s.c;T<=g.e.c;++T){var P=Tr({r:_,c:T});x=y?(f[_]||[])[T]:f[P],!(!x||x.v==null&&(!x.f||x.F))&&p.push(c(x,f,_,T))}return m.join(b)+b+p.join(b)+b+"E"+b}return{to_workbook:l,to_sheet:o,from_sheet:A}}(),WY=function(){function e(s,o){switch(o.type){case"base64":return t(Dl(s),o);case"binary":return t(s,o);case"buffer":return t(Wr&&Buffer.isBuffer(s)?s.toString("binary"):Bf(s),o);case"array":return t(n0(s),o)}throw new Error("Unrecognized type "+o.type)}function t(s,o){for(var l=s.split(`
`),c=-1,u=-1,d=0,A=[];d!==l.length;++d){if(l[d].trim()==="BOT"){A[++c]=[],u=0;continue}if(!(c<0)){var f=l[d].trim().split(","),h=f[0],m=f[1];++d;for(var p=l[d]||"";(p.match(/["]/g)||[]).length&1&&d<l.length-1;)p+=`
`+l[++d];switch(p=p.trim(),+h){case-1:if(p==="BOT"){A[++c]=[],u=0;continue}else if(p!=="EOD")throw new Error("Unrecognized DIF special command "+p);break;case 0:p==="TRUE"?A[c][u]=!0:p==="FALSE"?A[c][u]=!1:isNaN(su(m))?isNaN(Bg(m).getDate())?A[c][u]=m:A[c][u]=va(m):A[c][u]=su(m),++u;break;case 1:p=p.slice(1,p.length-1),p=p.replace(/""/g,'"'),p&&p.match(/^=".*"$/)&&(p=p.slice(2,-1)),A[c][u++]=p!==""?p:null;break}if(p==="EOD")break}}return o&&o.sheetRows&&(A=A.slice(0,o.sheetRows)),A}function r(s,o){return ix(e(s,o),o)}function n(s,o){return jf(r(s,o),o)}var a=function(){var s=function(c,u,d,A,f){c.push(u),c.push(d+","+A),c.push('"'+f.replace(/"/g,'""')+'"')},o=function(c,u,d,A){c.push(u+","+d),c.push(u==1?'"'+A.replace(/"/g,'""')+'"':A)};return function(c){var u=[],d=xn(c["!ref"]),A,f=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var h=d.s.r;h<=d.e.r;++h){o(u,-1,0,"BOT");for(var m=d.s.c;m<=d.e.c;++m){var p=Tr({r:h,c:m});if(A=f?(c[h]||[])[m]:c[p],!A){o(u,1,0,"");continue}switch(A.t){case"n":var g=A.w;!g&&A.v!=null&&(g=A.v),g==null?A.f&&!A.F?o(u,1,0,"="+A.f):o(u,1,0,""):o(u,0,g,"V");break;case"b":o(u,0,A.v?1:0,A.v?"TRUE":"FALSE");break;case"s":o(u,1,0,isNaN(A.v)?A.v:'="'+A.v+'"');break;case"d":A.w||(A.w=Sc(A.z||Pr[14],Gs(va(A.v)))),o(u,0,A.w,"V");break;default:o(u,1,0,"")}}}o(u,-1,0,"EOD");var x=`\r
`,y=u.join(x);return y}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),XY=function(){function e(A){return A.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(A){return A.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(A,f){for(var h=A.split(`
`),m=-1,p=-1,g=0,x=[];g!==h.length;++g){var y=h[g].trim().split(":");if(y[0]==="cell"){var b=Va(y[1]);if(x.length<=b.r)for(m=x.length;m<=b.r;++m)x[m]||(x[m]=[]);switch(m=b.r,p=b.c,y[2]){case"t":x[m][p]=e(y[3]);break;case"v":x[m][p]=+y[3];break;case"vtf":var _=y[y.length-1];case"vtc":switch(y[3]){case"nl":x[m][p]=!!+y[4];break;default:x[m][p]=+y[4];break}y[2]=="vtf"&&(x[m][p]=[x[m][p],_])}}}return f&&f.sheetRows&&(x=x.slice(0,f.sheetRows)),x}function n(A,f){return ix(r(A,f),f)}function a(A,f){return jf(n(A,f),f)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(A){if(!A||!A["!ref"])return"";for(var f=[],h=[],m,p="",g=tl(A["!ref"]),x=Array.isArray(A),y=g.s.r;y<=g.e.r;++y)for(var b=g.s.c;b<=g.e.c;++b)if(p=Tr({r:y,c:b}),m=x?(A[y]||[])[b]:A[p],!(!m||m.v==null||m.t==="z")){switch(h=["cell",p,"t"],m.t){case"s":case"str":h.push(t(m.v));break;case"n":m.f?(h[2]="vtf",h[3]="n",h[4]=m.v,h[5]=t(m.f)):(h[2]="v",h[3]=m.v);break;case"b":h[2]="vt"+(m.f?"f":"c"),h[3]="nl",h[4]=m.v?"1":"0",h[5]=t(m.f||(m.v?"TRUE":"FALSE"));break;case"d":var _=Gs(va(m.v));h[2]="vtc",h[3]="nd",h[4]=""+_,h[5]=m.w||Sc(m.z||Pr[14],_);break;case"e":continue}f.push(h.join(":"))}return f.push("sheet:c:"+(g.e.c-g.s.c+1)+":r:"+(g.e.r-g.s.r+1)+":tvf:1"),f.push("valueformat:1:text-wiki"),f.join(`
`)}function d(A){return[s,o,l,o,u(A),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),jg=function(){function e(d,A,f,h,m){m.raw?A[f][h]=d:d===""||(d==="TRUE"?A[f][h]=!0:d==="FALSE"?A[f][h]=!1:isNaN(su(d))?isNaN(Bg(d).getDate())?A[f][h]=d:A[f][h]=va(d):A[f][h]=su(d))}function t(d,A){var f=A||{},h=[];if(!d||d.length===0)return h;for(var m=d.split(/[\r\n]/),p=m.length-1;p>=0&&m[p].length===0;)--p;for(var g=10,x=0,y=0;y<=p;++y)x=m[y].indexOf(" "),x==-1?x=m[y].length:x++,g=Math.max(g,x);for(y=0;y<=p;++y){h[y]=[];var b=0;for(e(m[y].slice(0,g).trim(),h,y,b,f),b=1;b<=(m[y].length-g)/10+1;++b)e(m[y].slice(g+(b-1)*10,g+b*10).trim(),h,y,b,f)}return f.sheetRows&&(h=h.slice(0,f.sheetRows)),h}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var A={},f=!1,h=0,m=0;h<d.length;++h)(m=d.charCodeAt(h))==34?f=!f:!f&&m in r&&(A[m]=(A[m]||0)+1);m=[];for(h in A)Object.prototype.hasOwnProperty.call(A,h)&&m.push([A[h],h]);if(!m.length){A=n;for(h in A)Object.prototype.hasOwnProperty.call(A,h)&&m.push([A[h],h])}return m.sort(function(p,g){return p[0]-g[0]||n[p[1]]-n[g[1]]}),r[m.pop()[1]]||44}function s(d,A){var f=A||{},h="",m=f.dense?[]:{},p={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(h=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(h=d.charAt(4),d=d.slice(6)):h=a(d.slice(0,1024)):f&&f.FS?h=f.FS:h=a(d.slice(0,1024));var g=0,x=0,y=0,b=0,_=0,T=h.charCodeAt(0),P=!1,C=0,S=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var I=f.dateNF!=null?p_e(f.dateNF):null;function L(){var E=d.slice(b,_),j={};if(E.charAt(0)=='"'&&E.charAt(E.length-1)=='"'&&(E=E.slice(1,-1).replace(/""/g,'"')),E.length===0)j.t="z";else if(f.raw)j.t="s",j.v=E;else if(E.trim().length===0)j.t="s",j.v=E;else if(E.charCodeAt(0)==61)E.charCodeAt(1)==34&&E.charCodeAt(E.length-1)==34?(j.t="s",j.v=E.slice(2,-1).replace(/""/g,'"')):Kje(E)?(j.t="n",j.f=E.slice(1)):(j.t="s",j.v=E);else if(E=="TRUE")j.t="b",j.v=!0;else if(E=="FALSE")j.t="b",j.v=!1;else if(!isNaN(y=su(E)))j.t="n",f.cellText!==!1&&(j.w=E),j.v=y;else if(!isNaN(Bg(E).getDate())||I&&E.match(I)){j.z=f.dateNF||Pr[14];var R=0;I&&E.match(I)&&(E=g_e(E,f.dateNF,E.match(I)||[]),R=1),f.cellDates?(j.t="d",j.v=va(E,R)):(j.t="n",j.v=Gs(va(E,R))),f.cellText!==!1&&(j.w=Sc(j.z,j.v instanceof Date?Gs(j.v):j.v)),f.cellNF||delete j.z}else j.t="s",j.v=E;if(j.t=="z"||(f.dense?(m[g]||(m[g]=[]),m[g][x]=j):m[Tr({c:x,r:g})]=j),b=_+1,S=d.charCodeAt(b),p.e.c<x&&(p.e.c=x),p.e.r<g&&(p.e.r=g),C==T)++x;else if(x=0,++g,f.sheetRows&&f.sheetRows<=g)return!0}e:for(;_<d.length;++_)switch(C=d.charCodeAt(_)){case 34:S===34&&(P=!P);break;case T:case 10:case 13:if(!P&&L())break e;break}return _-b>0&&L(),m["!ref"]=Kr(p),m}function o(d,A){return!(A&&A.PRN)||A.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,A):ix(t(d,A),A)}function l(d,A){var f="",h=A.type=="string"?[0,0,0,0]:M3(d,A);switch(A.type){case"base64":f=Dl(d);break;case"binary":f=d;break;case"buffer":A.codepage==65001?f=d.toString("utf8"):A.codepage&&typeof h1<"u"||(f=Wr&&Buffer.isBuffer(d)?d.toString("binary"):Bf(d));break;case"array":f=n0(d);break;case"string":f=d;break;default:throw new Error("Unrecognized type "+A.type)}return h[0]==239&&h[1]==187&&h[2]==191?f=Kn(f.slice(3)):A.type!="string"&&A.type!="buffer"&&A.codepage==65001?f=Kn(f):A.type=="binary"&&typeof h1<"u",f.slice(0,19)=="socialcalc:version:"?XY.to_sheet(A.type=="string"?f:Kn(f),A):o(f,A)}function c(d,A){return jf(l(d,A),A)}function u(d){for(var A=[],f=xn(d["!ref"]),h,m=Array.isArray(d),p=f.s.r;p<=f.e.r;++p){for(var g=[],x=f.s.c;x<=f.e.c;++x){var y=Tr({r:p,c:x});if(h=m?(d[p]||[])[x]:d[y],!h||h.v==null){g.push("          ");continue}for(var b=(h.w||(AA(h),h.w)||"").slice(0,10);b.length<10;)b+=" ";g.push(b+(x===0?" ":""))}A.push(g.join(""))}return A.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}}();function PIe(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var a=zY.to_workbook(e,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return jg.to_workbook(e,t)}}var Tm=function(){function e(k,F,V){if(k){Fi(k,k.l||0);for(var D=V.Enum||me;k.l<k.length;){var M=k.read_shift(2),G=D[M]||D[65535],O=k.read_shift(2),K=k.l+O,ee=G.f&&G.f(k,O,V);if(k.l=K,F(ee,G,M))return}}}function t(k,F){switch(F.type){case"base64":return r(Cl(Dl(k)),F);case"binary":return r(Cl(k),F);case"buffer":case"array":return r(k,F)}throw"Unsupported type "+F.type}function r(k,F){if(!k)return k;var V=F||{},D=V.dense?[]:{},M="Sheet1",G="",O=0,K={},ee=[],ne=[],Q={s:{r:0,c:0},e:{r:0,c:0}},be=V.sheetRows||0;if(k[2]==0&&(k[3]==8||k[3]==9)&&k.length>=16&&k[14]==5&&k[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(k[2]==2)V.Enum=me,e(k,function(ve,re,Ne){switch(Ne){case 0:V.vers=ve,ve>=4096&&(V.qpro=!0);break;case 6:Q=ve;break;case 204:ve&&(G=ve);break;case 222:G=ve;break;case 15:case 51:V.qpro||(ve[1].v=ve[1].v.slice(1));case 13:case 14:case 16:Ne==14&&(ve[2]&112)==112&&(ve[2]&15)>1&&(ve[2]&15)<15&&(ve[1].z=V.dateNF||Pr[14],V.cellDates&&(ve[1].t="d",ve[1].v=mS(ve[1].v))),V.qpro&&ve[3]>O&&(D["!ref"]=Kr(Q),K[M]=D,ee.push(M),D=V.dense?[]:{},Q={s:{r:0,c:0},e:{r:0,c:0}},O=ve[3],M=G||"Sheet"+(O+1),G="");var Me=V.dense?(D[ve[0].r]||[])[ve[0].c]:D[Tr(ve[0])];if(Me){Me.t=ve[1].t,Me.v=ve[1].v,ve[1].z!=null&&(Me.z=ve[1].z),ve[1].f!=null&&(Me.f=ve[1].f);break}V.dense?(D[ve[0].r]||(D[ve[0].r]=[]),D[ve[0].r][ve[0].c]=ve[1]):D[Tr(ve[0])]=ve[1];break}},V);else if(k[2]==26||k[2]==14)V.Enum=Ee,k[2]==14&&(V.qpro=!0,k.l=0),e(k,function(ve,re,Ne){switch(Ne){case 204:M=ve;break;case 22:ve[1].v=ve[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ve[3]>O&&(D["!ref"]=Kr(Q),K[M]=D,ee.push(M),D=V.dense?[]:{},Q={s:{r:0,c:0},e:{r:0,c:0}},O=ve[3],M="Sheet"+(O+1)),be>0&&ve[0].r>=be)break;V.dense?(D[ve[0].r]||(D[ve[0].r]=[]),D[ve[0].r][ve[0].c]=ve[1]):D[Tr(ve[0])]=ve[1],Q.e.c<ve[0].c&&(Q.e.c=ve[0].c),Q.e.r<ve[0].r&&(Q.e.r=ve[0].r);break;case 27:ve[14e3]&&(ne[ve[14e3][0]]=ve[14e3][1]);break;case 1537:ne[ve[0]]=ve[1],ve[0]==O&&(M=ve[1]);break}},V);else throw new Error("Unrecognized LOTUS BOF "+k[2]);if(D["!ref"]=Kr(Q),K[G||M]=D,ee.push(G||M),!ne.length)return{SheetNames:ee,Sheets:K};for(var Z={},z=[],X=0;X<ne.length;++X)K[ee[X]]?(z.push(ne[X]||ee[X]),Z[ne[X]]=K[ne[X]]||K[ee[X]]):(z.push(ne[X]),Z[ne[X]]={"!ref":"A1"});return{SheetNames:z,Sheets:Z}}function n(k,F){var V=F||{};if(+V.codepage>=0&&Zc(+V.codepage),V.type=="string")throw new Error("Cannot write WK1 to JS string");var D=el(),M=xn(k["!ref"]),G=Array.isArray(k),O=[];nr(D,0,s(1030)),nr(D,6,c(M));for(var K=Math.min(M.e.r,8191),ee=M.s.r;ee<=K;++ee)for(var ne=vs(ee),Q=M.s.c;Q<=M.e.c;++Q){ee===M.s.r&&(O[Q]=Qa(Q));var be=O[Q]+ne,Z=G?(k[ee]||[])[Q]:k[be];if(!(!Z||Z.t=="z"))if(Z.t=="n")(Z.v|0)==Z.v&&Z.v>=-32768&&Z.v<=32767?nr(D,13,h(ee,Q,Z.v)):nr(D,14,p(ee,Q,Z.v));else{var z=AA(Z);nr(D,15,A(ee,Q,z.slice(0,239)))}}return nr(D,1),D.end()}function a(k,F){var V=F||{};if(+V.codepage>=0&&Zc(+V.codepage),V.type=="string")throw new Error("Cannot write WK3 to JS string");var D=el();nr(D,0,o(k));for(var M=0,G=0;M<k.SheetNames.length;++M)(k.Sheets[k.SheetNames[M]]||{})["!ref"]&&nr(D,27,J(k.SheetNames[M],G++));var O=0;for(M=0;M<k.SheetNames.length;++M){var K=k.Sheets[k.SheetNames[M]];if(!(!K||!K["!ref"])){for(var ee=xn(K["!ref"]),ne=Array.isArray(K),Q=[],be=Math.min(ee.e.r,8191),Z=ee.s.r;Z<=be;++Z)for(var z=vs(Z),X=ee.s.c;X<=ee.e.c;++X){Z===ee.s.r&&(Q[X]=Qa(X));var ve=Q[X]+z,re=ne?(K[Z]||[])[X]:K[ve];if(!(!re||re.t=="z"))if(re.t=="n")nr(D,23,L(Z,X,O,re.v));else{var Ne=AA(re);nr(D,22,C(Z,X,O,Ne.slice(0,239)))}}++O}}return nr(D,1),D.end()}function s(k){var F=kt(2);return F.write_shift(2,k),F}function o(k){var F=kt(26);F.write_shift(2,4096),F.write_shift(2,4),F.write_shift(4,0);for(var V=0,D=0,M=0,G=0;G<k.SheetNames.length;++G){var O=k.SheetNames[G],K=k.Sheets[O];if(!(!K||!K["!ref"])){++M;var ee=tl(K["!ref"]);V<ee.e.r&&(V=ee.e.r),D<ee.e.c&&(D=ee.e.c)}}return V>8191&&(V=8191),F.write_shift(2,V),F.write_shift(1,M),F.write_shift(1,D),F.write_shift(2,0),F.write_shift(2,0),F.write_shift(1,1),F.write_shift(1,2),F.write_shift(4,0),F.write_shift(4,0),F}function l(k,F,V){var D={s:{c:0,r:0},e:{c:0,r:0}};return F==8&&V.qpro?(D.s.c=k.read_shift(1),k.l++,D.s.r=k.read_shift(2),D.e.c=k.read_shift(1),k.l++,D.e.r=k.read_shift(2),D):(D.s.c=k.read_shift(2),D.s.r=k.read_shift(2),F==12&&V.qpro&&(k.l+=2),D.e.c=k.read_shift(2),D.e.r=k.read_shift(2),F==12&&V.qpro&&(k.l+=2),D.s.c==65535&&(D.s.c=D.e.c=D.s.r=D.e.r=0),D)}function c(k){var F=kt(8);return F.write_shift(2,k.s.c),F.write_shift(2,k.s.r),F.write_shift(2,k.e.c),F.write_shift(2,k.e.r),F}function u(k,F,V){var D=[{c:0,r:0},{t:"n",v:0},0,0];return V.qpro&&V.vers!=20768?(D[0].c=k.read_shift(1),D[3]=k.read_shift(1),D[0].r=k.read_shift(2),k.l+=2):(D[2]=k.read_shift(1),D[0].c=k.read_shift(2),D[0].r=k.read_shift(2)),D}function d(k,F,V){var D=k.l+F,M=u(k,F,V);if(M[1].t="s",V.vers==20768){k.l++;var G=k.read_shift(1);return M[1].v=k.read_shift(G,"utf8"),M}return V.qpro&&k.l++,M[1].v=k.read_shift(D-k.l,"cstr"),M}function A(k,F,V){var D=kt(7+V.length);D.write_shift(1,255),D.write_shift(2,F),D.write_shift(2,k),D.write_shift(1,39);for(var M=0;M<D.length;++M){var G=V.charCodeAt(M);D.write_shift(1,G>=128?95:G)}return D.write_shift(1,0),D}function f(k,F,V){var D=u(k,F,V);return D[1].v=k.read_shift(2,"i"),D}function h(k,F,V){var D=kt(7);return D.write_shift(1,255),D.write_shift(2,F),D.write_shift(2,k),D.write_shift(2,V,"i"),D}function m(k,F,V){var D=u(k,F,V);return D[1].v=k.read_shift(8,"f"),D}function p(k,F,V){var D=kt(13);return D.write_shift(1,255),D.write_shift(2,F),D.write_shift(2,k),D.write_shift(8,V,"f"),D}function g(k,F,V){var D=k.l+F,M=u(k,F,V);if(M[1].v=k.read_shift(8,"f"),V.qpro)k.l=D;else{var G=k.read_shift(2);_(k.slice(k.l,k.l+G),M),k.l+=G}return M}function x(k,F,V){var D=F&32768;return F&=-32769,F=(D?k:0)+(F>=8192?F-16384:F),(D?"":"$")+(V?Qa(F):vs(F))}var y={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},b=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function _(k,F){Fi(k,0);for(var V=[],D=0,M="",G="",O="",K="";k.l<k.length;){var ee=k[k.l++];switch(ee){case 0:V.push(k.read_shift(8,"f"));break;case 1:G=x(F[0].c,k.read_shift(2),!0),M=x(F[0].r,k.read_shift(2),!1),V.push(G+M);break;case 2:{var ne=x(F[0].c,k.read_shift(2),!0),Q=x(F[0].r,k.read_shift(2),!1);G=x(F[0].c,k.read_shift(2),!0),M=x(F[0].r,k.read_shift(2),!1),V.push(ne+Q+":"+G+M)}break;case 3:if(k.l<k.length){console.error("WK1 premature formula end");return}break;case 4:V.push("("+V.pop()+")");break;case 5:V.push(k.read_shift(2));break;case 6:{for(var be="";ee=k[k.l++];)be+=String.fromCharCode(ee);V.push('"'+be.replace(/"/g,'""')+'"')}break;case 8:V.push("-"+V.pop());break;case 23:V.push("+"+V.pop());break;case 22:V.push("NOT("+V.pop()+")");break;case 20:case 21:K=V.pop(),O=V.pop(),V.push(["AND","OR"][ee-20]+"("+O+","+K+")");break;default:if(ee<32&&b[ee])K=V.pop(),O=V.pop(),V.push(O+b[ee]+K);else if(y[ee]){if(D=y[ee][1],D==69&&(D=k[k.l++]),D>V.length){console.error("WK1 bad formula parse 0x"+ee.toString(16)+":|"+V.join("|")+"|");return}var Z=V.slice(-D);V.length-=D,V.push(y[ee][0]+"("+Z.join(",")+")")}else return ee<=7?console.error("WK1 invalid opcode "+ee.toString(16)):ee<=24?console.error("WK1 unsupported op "+ee.toString(16)):ee<=30?console.error("WK1 invalid opcode "+ee.toString(16)):ee<=115?console.error("WK1 unsupported function opcode "+ee.toString(16)):console.error("WK1 unrecognized opcode "+ee.toString(16))}}V.length==1?F[1].f=""+V[0]:console.error("WK1 bad formula parse |"+V.join("|")+"|")}function T(k){var F=[{c:0,r:0},{t:"n",v:0},0];return F[0].r=k.read_shift(2),F[3]=k[k.l++],F[0].c=k[k.l++],F}function P(k,F){var V=T(k);return V[1].t="s",V[1].v=k.read_shift(F-4,"cstr"),V}function C(k,F,V,D){var M=kt(6+D.length);M.write_shift(2,k),M.write_shift(1,V),M.write_shift(1,F),M.write_shift(1,39);for(var G=0;G<D.length;++G){var O=D.charCodeAt(G);M.write_shift(1,O>=128?95:O)}return M.write_shift(1,0),M}function S(k,F){var V=T(k);V[1].v=k.read_shift(2);var D=V[1].v>>1;if(V[1].v&1)switch(D&7){case 0:D=(D>>3)*5e3;break;case 1:D=(D>>3)*500;break;case 2:D=(D>>3)/20;break;case 3:D=(D>>3)/200;break;case 4:D=(D>>3)/2e3;break;case 5:D=(D>>3)/2e4;break;case 6:D=(D>>3)/16;break;case 7:D=(D>>3)/64;break}return V[1].v=D,V}function I(k,F){var V=T(k),D=k.read_shift(4),M=k.read_shift(4),G=k.read_shift(2);if(G==65535)return D===0&&M===3221225472?(V[1].t="e",V[1].v=15):D===0&&M===3489660928?(V[1].t="e",V[1].v=42):V[1].v=0,V;var O=G&32768;return G=(G&32767)-16446,V[1].v=(1-O*2)*(M*Math.pow(2,G+32)+D*Math.pow(2,G)),V}function L(k,F,V,D){var M=kt(14);if(M.write_shift(2,k),M.write_shift(1,V),M.write_shift(1,F),D==0)return M.write_shift(4,0),M.write_shift(4,0),M.write_shift(2,65535),M;var G=0,O=0,K=0,ee=0;return D<0&&(G=1,D=-D),O=Math.log2(D)|0,D/=Math.pow(2,O-31),ee=D>>>0,ee&2147483648||(D/=2,++O,ee=D>>>0),D-=ee,ee|=2147483648,ee>>>=0,D*=Math.pow(2,32),K=D>>>0,M.write_shift(4,K),M.write_shift(4,ee),O+=16383+(G?32768:0),M.write_shift(2,O),M}function E(k,F){var V=I(k);return k.l+=F-14,V}function j(k,F){var V=T(k),D=k.read_shift(4);return V[1].v=D>>6,V}function R(k,F){var V=T(k),D=k.read_shift(8,"f");return V[1].v=D,V}function W(k,F){var V=R(k);return k.l+=F-10,V}function de(k,F){return k[k.l+F-1]==0?k.read_shift(F,"cstr"):""}function te(k,F){var V=k[k.l++];V>F-1&&(V=F-1);for(var D="";D.length<V;)D+=String.fromCharCode(k[k.l++]);return D}function le(k,F,V){if(!(!V.qpro||F<21)){var D=k.read_shift(1);k.l+=17,k.l+=1,k.l+=2;var M=k.read_shift(F-21,"cstr");return[D,M]}}function ce(k,F){for(var V={},D=k.l+F;k.l<D;){var M=k.read_shift(2);if(M==14e3){for(V[M]=[0,""],V[M][0]=k.read_shift(2);k[k.l];)V[M][1]+=String.fromCharCode(k[k.l]),k.l++;k.l++}}return V}function J(k,F){var V=kt(5+k.length);V.write_shift(2,14e3),V.write_shift(2,F);for(var D=0;D<k.length;++D){var M=k.charCodeAt(D);V[V.l++]=M>127?95:M}return V[V.l++]=0,V}var me={0:{n:"BOF",f:_s},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f},14:{n:"NUMBER",f:m},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:g},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:de},222:{n:"SHEETNAMELP",f:te},65535:{n:""}},Ee={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:P},23:{n:"NUMBER17",f:I},24:{n:"NUMBER18",f:S},25:{n:"FORMULA19",f:E},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ce},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:j},38:{n:"??"},39:{n:"NUMBER27",f:R},40:{n:"FORMULA28",f:W},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:de},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:le},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}}();function kIe(e){var t={},r=e.match(fo),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=Fr(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;t.cp=r3[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=s.val;break;case"<sz":t.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":s.rgb&&(t.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return t}var TIe=function(){var e=p1("t"),t=p1("rPr");function r(s){var o=s.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:gn(o[1])},c=s.match(t);return c&&(l.s=kIe(c[1])),l}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(o){return o.replace(n,"").split(a).map(r).filter(function(l){return l.v})}}(),FIe=function(){var t=/(\r\n|\n)/g;function r(a,s,o){var l=[];a.u&&l.push("text-decoration: underline;"),a.uval&&l.push("text-underline-style:"+a.uval+";"),a.sz&&l.push("font-size:"+a.sz+"pt;"),a.outline&&l.push("text-effect: outline;"),a.shadow&&l.push("text-shadow: auto;"),s.push('<span style="'+l.join("")+'">'),a.b&&(s.push("<b>"),o.push("</b>")),a.i&&(s.push("<i>"),o.push("</i>")),a.strike&&(s.push("<s>"),o.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(t,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),OIe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,DIe=/<(?:\w+:)?r>/,RIe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function E3(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=gn(Kn(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Kn(e),r&&(n.h=A3(n.t))):e.match(DIe)&&(n.r=Kn(e),n.t=gn(Kn((e.replace(RIe,"").match(OIe)||[]).join("").replace(fo,""))),r&&(n.h=FIe(TIe(n.r)))),n):{t:""}}var LIe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,MIe=/<(?:\w+:)?(?:si|sstItem)>/g,UIe=/<\/(?:\w+:)?(?:si|sstItem)>/;function QIe(e,t){var r=[],n="";if(!e)return r;var a=e.match(LIe);if(a){n=a[2].replace(MIe,"").split(UIe);for(var s=0;s!=n.length;++s){var o=E3(n[s].trim(),t);o!=null&&(r[r.length]=o)}a=Fr(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var VIe=/^\s|\s$|[\t\n\r]/;function JY(e,t){if(!t.bookSST)return"";var r=[bs];r[r.length]=rr("sst",null,{xmlns:I0[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(VIe)&&(s+=' xml:space="preserve"'),s+=">"+Mn(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function HIe(e){return[e.read_shift(4),e.read_shift(4)]}function $Ie(e,t){var r=[],n=!1;return _A(e,function(s,o,l){switch(l){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(o.T,!n||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function KIe(e,t){return t||(t=kt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var qIe=rEe;function GIe(e){var t=el();Qt(t,159,KIe(e));for(var r=0;r<e.length;++r)Qt(t,19,qIe(e[r]));return Qt(t,160),t.end()}function YY(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function tA(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function zIe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=tA(e,4),t.U=tA(e,4),t.W=tA(e,4),t}function WIe(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},a=e.read_shift(4),s=[];a-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=s,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function XIe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(WIe(e));return t}function JIe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function YIe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=tA(e,4),t.U=tA(e,4),t.W=tA(e,4),t}function ZIe(e){var t=YIe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function ZY(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function eZ(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function eBe(e){var t=tA(e);switch(t.Minor){case 2:return[t.Minor,tBe(e)];case 3:return[t.Minor,rBe()];case 4:return[t.Minor,nBe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function tBe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=ZY(e,r),a=eZ(e,e.length-e.l);return{t:"Std",h:n,v:a}}function rBe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function nBe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(fo,function(s){var o=Fr(s);switch(ld(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){n[l]=o[l]});break;case"<dataIntegrity":n.encryptedHmacKey=o.encryptedHmacKey,n.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(o);break;default:throw o[0]}}),n}function aBe(e,t){var r={},n=r.EncryptionVersionInfo=tA(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var a=e.read_shift(4);return t-=4,r.EncryptionHeader=ZY(e,a),t-=a,r.EncryptionVerifier=eZ(e,t),r}function sBe(e){var t={},r=t.EncryptionVersionInfo=tA(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function S3(e){var t=0,r,n=YY(e),a=n.length+1,s,o,l,c,u;for(r=hf(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)o=r[s],l=t&16384?1:0,c=t<<1&32767,u=l|c,t=u^o;return t^52811}var tZ=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(o){return(o/2|o*128)&255},a=function(o,l){return n(o^l)},s=function(o){for(var l=t[o.length-1],c=104,u=o.length-1;u>=0;--u)for(var d=o[u],A=0;A!=7;++A)d&64&&(l^=r[c]),d*=2,--c;return l};return function(o){for(var l=YY(o),c=s(l),u=l.length,d=hf(16),A=0;A!=16;++A)d[A]=0;var f,h,m;for((u&1)===1&&(f=c>>8,d[u]=a(e[0],f),--u,f=c&255,h=l[l.length-1],d[u]=a(h,f));u>0;)--u,f=c>>8,d[u]=a(l[u],f),--u,f=c&255,d[u]=a(l[u],f);for(u=15,m=15-l.length;m>0;)f=c>>8,d[u]=a(e[m],f),--u,--m,f=c&255,d[u]=a(l[u],f),--u,--m;return d}}(),iBe=function(e,t,r,n,a){a||(a=t),n||(n=tZ(e));var s,o;for(s=0;s!=t.length;++s)o=t[s],o^=n[r],o=(o>>5|o<<3)&255,a[s]=o,++r;return[a,r,n]},oBe=function(e){var t=0,r=tZ(e);return function(n){var a=iBe("",n,t,r);return t=a[1],a[0]}};function lBe(e,t,r,n){var a={key:_s(e),verificationBytes:_s(e)};return r.password&&(a.verifier=S3(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=oBe(r.password)),a}function cBe(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=sBe(e):n.Data=aBe(e,t),n}function uBe(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?cBe(e,t-2,n):lBe(e,r.biff>=8?t:t-2,r,n),n}var rZ=function(){function e(a,s){switch(s.type){case"base64":return t(Dl(a),s);case"binary":return t(a,s);case"buffer":return t(Wr&&Buffer.isBuffer(a)?a.toString("binary"):Bf(a),s);case"array":return t(n0(a),s)}throw new Error("Unrecognized type "+s.type)}function t(a,s){var o=s||{},l=o.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,A){Array.isArray(l)&&(l[A]=[]);for(var f=/\\\w+\b/g,h=0,m,p=-1;m=f.exec(d);){switch(m[0]){case"\\cell":var g=d.slice(h,f.lastIndex-m[0].length);if(g[0]==" "&&(g=g.slice(1)),++p,g.length){var x={v:g,t:"s"};Array.isArray(l)?l[A][p]=x:l[Tr({r:A,c:p})]=x}break}h=f.lastIndex}p>u.e.c&&(u.e.c=p)}),l["!ref"]=Kr(u),l}function r(a,s){return jf(e(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],o=xn(a["!ref"]),l,c=Array.isArray(a),u=o.s.r;u<=o.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=o.s.c;d<=o.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=o.s.c;d<=o.e.c;++d){var A=Tr({r:u,c:d});l=c?(a[u]||[])[d]:a[A],!(!l||l.v==null&&(!l.f||l.F))&&(s.push(" "+(l.w||(AA(l),l.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function dBe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function y1(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function ABe(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.max(t,r,n),s=Math.min(t,r,n),o=a-s;if(o===0)return[0,0,t];var l=0,c=0,u=a+s;switch(c=o/(u>1?2-u:u),a){case t:l=((r-n)/o+6)%6;break;case r:l=(n-t)/o+2;break;case n:l=(t-r)/o+4;break}return[l/6,c,u/2]}function hBe(e){var t=e[0],r=e[1],n=e[2],a=r*2*(n<.5?n:1-n),s=n-a/2,o=[s,s,s],l=6*t,c;if(r!==0)switch(l|0){case 0:case 6:c=a*l,o[0]+=a,o[1]+=c;break;case 1:c=a*(2-l),o[0]+=c,o[1]+=a;break;case 2:c=a*(l-2),o[1]+=a,o[2]+=c;break;case 3:c=a*(4-l),o[1]+=c,o[2]+=a;break;case 4:c=a*(l-4),o[2]+=a,o[0]+=c;break;case 5:c=a*(6-l),o[2]+=c,o[0]+=a;break}for(var u=0;u!=3;++u)o[u]=Math.round(o[u]*255);return o}function o_(e,t){if(t===0)return e;var r=ABe(dBe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),y1(hBe(r))}var nZ=6,fBe=15,mBe=1,io=nZ;function b1(e){return Math.floor((e+Math.round(128/io)/256)*io)}function w1(e){return Math.floor((e-5)/io*100+.5)/100}function l_(e){return Math.round((e*io+5)/io*256)/256}function Pj(e){return l_(w1(b1(e)))}function I3(e){var t=Math.abs(e-Pj(e)),r=io;if(t>.005)for(io=mBe;io<fBe;++io)Math.abs(e-Pj(e))<=t&&(t=Math.abs(e-Pj(e)),r=io);io=r}function ff(e){e.width?(e.wpx=b1(e.width),e.wch=w1(e.wpx),e.MDW=io):e.wpx?(e.wch=w1(e.wpx),e.width=l_(e.wch),e.MDW=io):typeof e.wch=="number"&&(e.width=l_(e.wch),e.wpx=b1(e.width),e.MDW=io),e.customWidth&&delete e.customWidth}var pBe=96,aZ=pBe;function N1(e){return e*96/aZ}function Pg(e){return e*aZ/96}var gBe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function xBe(e,t,r,n){t.Borders=[];var a={},s=!1;(e[0].match(fo)||[]).forEach(function(o){var l=Fr(o);switch(ld(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},l.diagonalUp&&(a.diagonalUp=ma(l.diagonalUp)),l.diagonalDown&&(a.diagonalDown=ma(l.diagonalDown)),t.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in borders")}})}function vBe(e,t,r,n){t.Fills=[];var a={},s=!1;(e[0].match(fo)||[]).forEach(function(o){var l=Fr(o);switch(ld(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},t.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":l.patternType&&(a.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),l.indexed&&(a.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(a.bgColor.theme=parseInt(l.theme,10)),l.tint&&(a.bgColor.tint=parseFloat(l.tint)),l.rgb&&(a.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),l.theme&&(a.fgColor.theme=parseInt(l.theme,10)),l.tint&&(a.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(a.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fills")}})}function yBe(e,t,r,n){t.Fonts=[];var a={},s=!1;(e[0].match(fo)||[]).forEach(function(o){var l=Fr(o);switch(ld(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(a),a={};break;case"<name":l.val&&(a.name=Kn(l.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=l.val?ma(l.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=l.val?ma(l.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(l.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=l.val?ma(l.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=l.val?ma(l.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=l.val?ma(l.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=l.val?ma(l.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=l.val?ma(l.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":l.val&&(a.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(a.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(a.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(a.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=r3[parseInt(l.val,10)];break;case"<color":if(a.color||(a.color={}),l.auto&&(a.color.auto=ma(l.auto)),l.rgb)a.color.rgb=l.rgb.slice(-6);else if(l.indexed){a.color.index=parseInt(l.indexed,10);var c=Pm[a.color.index];a.color.index==81&&(c=Pm[1]),c||(c=Pm[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(a.color.theme=parseInt(l.theme,10),l.tint&&(a.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=o_(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fonts")}})}function bBe(e,t,r){t.NumberFmt=[];for(var n=as(Pr),a=0;a<n.length;++a)t.NumberFmt[n[a]]=Pr[n[a]];var s=e[0].match(fo);if(s)for(a=0;a<s.length;++a){var o=Fr(s[a]);switch(ld(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=gn(Kn(o.formatCode)),c=parseInt(o.numFmtId,10);if(t.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=l}eA(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function wBe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=rr("numFmt",null,{numFmtId:n,formatCode:Mn(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=rr("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var j2=["numFmtId","fillId","fontId","borderId","xfId"],P2=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function NBe(e,t,r){t.CellXf=[];var n,a=!1;(e[0].match(fo)||[]).forEach(function(s){var o=Fr(s),l=0;switch(ld(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=o,delete n[0],l=0;l<j2.length;++l)n[j2[l]]&&(n[j2[l]]=parseInt(n[j2[l]],10));for(l=0;l<P2.length;++l)n[P2[l]]&&(n[P2[l]]=ma(n[P2[l]]));if(t.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[l]){n.numFmtId=l;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=ma(o.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function CBe(e){var t=[];return t[t.length]=rr("cellXfs",null),e.forEach(function(r){t[t.length]=rr("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=rr("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var _Be=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,u){var d={};if(!l)return d;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var A;return(A=l.match(t))&&bBe(A,d,u),(A=l.match(a))&&yBe(A,d,c,u),(A=l.match(n))&&vBe(A,d,c,u),(A=l.match(s))&&xBe(A,d,c,u),(A=l.match(r))&&NBe(A,d,u),d}}();function sZ(e,t){var r=[bs,rr("styleSheet",null,{xmlns:I0[0],"xmlns:vt":Hs.vt})],n;return e.SSF&&(n=wBe(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=CBe(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function EBe(e,t){var r=e.read_shift(2),n=co(e);return[r,n]}function SBe(e,t,r){r||(r=kt(6+4*t.length)),r.write_shift(2,e),ui(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function IBe(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=cEe(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=e.read_shift(2);switch(s===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(n.underline=o);var l=e.read_shift(1);l>0&&(n.family=l);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=lEe(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=co(e),n}function BBe(e,t){t||(t=kt(25+4*32)),t.write_shift(2,e.sz*20),uEe(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),a_(e.color,t);var n=0;return n=2,t.write_shift(1,n),ui(e.name,t),t.length>t.l?t.slice(0,t.l):t}var jBe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],kj,PBe=ho;function JQ(e,t){t||(t=kt(4*3+8*7+16*1)),kj||(kj=hS(jBe));var r=kj[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(a_({auto:1},t),a_({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function kBe(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function iZ(e,t,r){r||(r=kt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function cv(e,t){return t||(t=kt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var TBe=ho;function FBe(e,t){return t||(t=kt(51)),t.write_shift(1,0),cv(null,t),cv(null,t),cv(null,t),cv(null,t),cv(null,t),t.length>t.l?t.slice(0,t.l):t}function OBe(e,t){return t||(t=kt(12+4*10)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),n_(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function DBe(e,t,r){var n=kt(2052);return n.write_shift(4,e),n_(t,n),n_(r,n),n.length>n.l?n.slice(0,n.l):n}function RBe(e,t,r){var n={};n.NumberFmt=[];for(var a in Pr)n.NumberFmt[a]=Pr[a];n.CellXf=[],n.Fonts=[];var s=[],o=!1;return _A(e,function(c,u,d){switch(d){case 44:n.NumberFmt[c[0]]=c[1],eA(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=o_(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:s.push(d),o=!0;break;case 38:s.pop(),o=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!o||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function LBe(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&(Qt(e,615,iu(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Qt(e,44,SBe(a,t[a]))}),Qt(e,616))}}function MBe(e){var t=1;Qt(e,611,iu(t)),Qt(e,43,BBe({sz:12,color:{theme:1},name:"Calibri",family:2})),Qt(e,612)}function UBe(e){var t=2;Qt(e,603,iu(t)),Qt(e,45,JQ({patternType:"none"})),Qt(e,45,JQ({patternType:"gray125"})),Qt(e,604)}function QBe(e){var t=1;Qt(e,613,iu(t)),Qt(e,46,FBe()),Qt(e,614)}function VBe(e){var t=1;Qt(e,626,iu(t)),Qt(e,47,iZ({numFmtId:0},65535)),Qt(e,627)}function HBe(e,t){Qt(e,617,iu(t.length)),t.forEach(function(r){Qt(e,47,iZ(r,0))}),Qt(e,618)}function $Be(e){var t=1;Qt(e,619,iu(t)),Qt(e,48,OBe({xfId:0,name:"Normal"})),Qt(e,620)}function KBe(e){var t=0;Qt(e,505,iu(t)),Qt(e,506)}function qBe(e){var t=0;Qt(e,508,DBe(t,"TableStyleMedium9","PivotStyleMedium4")),Qt(e,509)}function GBe(e,t){var r=el();return Qt(r,278),LBe(r,e.SSF),MBe(r),UBe(r),QBe(r),VBe(r),HBe(r,t.cellXfs),$Be(r),KBe(r),qBe(r),Qt(r,279),r.end()}var zBe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function WBe(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(fo)||[]).forEach(function(a){var s=Fr(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(t.themeElements.clrScheme[zBe.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function XBe(){}function JBe(){}var YBe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,ZBe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,eje=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function tje(e,t,r){t.themeElements={};var n;[["clrScheme",YBe,WBe],["fontScheme",ZBe,XBe],["fmtScheme",eje,JBe]].forEach(function(a){if(!(n=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,t,r)})}var rje=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function oZ(e,t){(!e||e.length===0)&&(e=B3());var r,n={};if(!(r=e.match(rje)))throw new Error("themeElements not found in theme");return tje(r[0],n,t),n.raw=e,n}function B3(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[bs];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function nje(e,t,r){var n=e.l+t,a=e.read_shift(4);if(a!==124226){if(!r.cellStyles){e.l=n;return}var s=e.slice(e.l);e.l=n;var o;try{o=ZJ(s,{type:"array"})}catch{return}var l=_l(o,"theme/theme/theme1.xml",!0);if(l)return oZ(l,r)}}function aje(e){return e.read_shift(4)}function sje(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=ije(e,4);break;case 2:t.xclrValue=UY(e);break;case 3:t.xclrValue=aje(e);break;case 4:e.l+=4;break}return e.l+=8,t}function ije(e,t){return ho(e,t)}function oje(e,t){return ho(e,t)}function lje(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=sje(e);break;case 6:n[1]=oje(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function cje(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var a=e.read_shift(2),s=[];a-- >0;)s.push(lje(e,r-e.l));return{ixfe:n,ext:s}}function uje(e,t){t.forEach(function(r){switch(r[0]){}})}function dje(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:co(e)}}function Aje(e){var t=kt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),ui(e.name,t),t.slice(0,t.l)}function hje(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function fje(e){var t=kt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function mje(e,t){var r=kt(8+2*t.length);return r.write_shift(4,e),ui(t,r),r.slice(0,r.l)}function pje(e){return e.l+=4,e.read_shift(4)!=0}function gje(e,t){var r=kt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function xje(e,t,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],o=!1,l=2;return _A(e,function(c,u,d){switch(d){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(A){l==1?n.Cell.push({type:n.Types[A[0]-1].name,index:A[1]}):l==0&&n.Value.push({type:n.Types[A[0]-1].name,index:A[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:s.push(d),o=!0;break;case 36:s.pop(),o=!1;break;default:if(!u.T){if(!o||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function vje(){var e=el();return Qt(e,332),Qt(e,334,iu(1)),Qt(e,335,Aje({name:"XLDAPR",version:12e4,flags:3496657072})),Qt(e,336),Qt(e,339,mje(1,"XLDAPR")),Qt(e,52),Qt(e,35,iu(514)),Qt(e,4096,iu(0)),Qt(e,4097,Ac(1)),Qt(e,36),Qt(e,53),Qt(e,340),Qt(e,337,gje(1)),Qt(e,51,fje([[1,0]])),Qt(e,338),Qt(e,333),e.end()}function yje(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var a=!1,s=2,o;return e.replace(fo,function(l){var c=Fr(l);switch(ld(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(o=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):s==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),n}function lZ(){var e=[bs];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function bje(e){var t=[];if(!e)return t;var r=1;return(e.match(fo)||[]).forEach(function(n){var a=Fr(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,t.push(a);break}}),t}function wje(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Tr(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function Nje(e,t,r){var n=[];return _A(e,function(s,o,l){switch(l){case 63:n.push(s);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function Cje(e,t,r,n){if(!e)return e;var a=n||{},s=!1;_A(e,function(l,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function _je(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var Kp=1024;function cZ(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[rr("xml",null,{"xmlns:v":wl.v,"xmlns:o":wl.o,"xmlns:x":wl.x,"xmlns:mv":wl.mv}).replace(/\/>/,">"),rr("o:shapelayout",rr("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),rr("v:shapetype",[rr("v:stroke",null,{joinstyle:"miter"}),rr("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Kp<e*1e3;)Kp+=1e3;return t.forEach(function(s){var o=Va(s[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?rr("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=rr("v:fill",c,l),d={on:"t",obscured:"t"};++Kp,a=a.concat(["<v:shape"+g1({id:"_x0000_s"+Kp,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,rr("v:shadow",null,d),rr("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Di("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),Di("x:AutoFill","False"),Di("x:Row",String(o.r)),Di("x:Column",String(o.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function YQ(e,t,r,n){var a=Array.isArray(e),s;t.forEach(function(o){var l=Va(o.ref);if(a?(e[l.r]||(e[l.r]=[]),s=e[l.r][l.c]):s=e[o.ref],!s){s={t:"z"},a?e[l.r][l.c]=s:e[o.ref]=s;var c=xn(e["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var u=Kr(c);u!==e["!ref"]&&(e["!ref"]=u)}s.c||(s.c=[]);var d={a:o.author,t:o.t,r:o.r,T:r};o.h&&(d.h=o.h);for(var A=s.c.length-1;A>=0;--A){if(!r&&s.c[A].T)return;r&&!s.c[A].T&&s.c.splice(A,1)}if(r&&n){for(A=0;A<n.length;++A)if(d.a==n[A].id){d.a=n[A].name||d.a;break}}s.c.push(d)})}function Eje(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var s=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=Fr(l[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=Va(c.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var A=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),f=!!A&&!!A[1]&&E3(A[1])||{r:"",t:"",h:""};u.r=f.r,f.r=="<t></t>"&&(f.t=f.h=""),u.t=(f.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=f.h),n.push(u)}}}}),n}function uZ(e){var t=[bs,rr("comments",null,{xmlns:I0[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var s=Mn(a.a);r.indexOf(s)==-1&&(r.push(s),t.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(Mn(c.a))),s.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)t.push(Di("t",Mn(s[0]||"")));else{for(var o=`Comment:
    `+s[0]+`
`,l=1;l<s.length;++l)o+=`Reply:
    `+s[l]+`
`;t.push(Di("t",Mn(o)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function Sje(e,t){var r=[],n=!1,a={},s=0;return e.replace(fo,function(l,c){var u=Fr(l);switch(ld(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=c+l.length;break;case"</text>":a.t=e.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return l}),r}function Ije(e,t,r){var n=[bs,rr("ThreadedComments",null,{xmlns:Hs.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var s="";(a[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&t.indexOf(o.a)==-1&&t.push(o.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?s=c.id:c.parentId=s,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(o.a)).slice(-12)+"}"),n.push(rr("threadedComment",Di("text",o.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function Bje(e,t){var r=[],n=!1;return e.replace(fo,function(s){var o=Fr(s);switch(ld(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return s}),r}function jje(e){var t=[bs,rr("personList",null,{xmlns:Hs.TCMNT,"xmlns:x":I0[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(rr("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function Pje(e){var t={};t.iauthor=e.read_shift(4);var r=k0(e);return t.rfx=r.s,t.ref=Tr(r.s),e.l+=16,t}function kje(e,t){return t==null&&(t=kt(36)),t.write_shift(4,e[1].iauthor),ox(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var Tje=co;function Fje(e){return ui(e.slice(0,54))}function Oje(e,t){var r=[],n=[],a={},s=!1;return _A(e,function(l,c,u){switch(u){case 632:n.push(l);break;case 635:a=l;break;case 637:a.t=l.t,a.h=l.h,a.r=l.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,t.sheetRows&&a.rfx&&t.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function Dje(e){var t=el(),r=[];return Qt(t,628),Qt(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),Qt(t,632,Fje(a.a)))})}),Qt(t,631),Qt(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:Va(n[0]),e:Va(n[0])};Qt(t,635,kje([s,a])),a.t&&a.t.length>0&&Qt(t,637,aEe(a)),Qt(t,636),delete a.iauthor})}),Qt(t,634),Qt(t,629),t.end()}var Rje="application/vnd.ms-office.vbaProject";function Lje(e){var t=Ir.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Ir.utils.cfb_add(t,a,e.FileIndex[n].content)}}),Ir.write(t)}function Mje(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&Ir.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var dZ=["xlsb","xlsm","xlam","biff8","xla"];function Uje(){return{"!type":"dialog"}}function Qje(){return{"!type":"dialog"}}function Vje(){return{"!type":"macro"}}function Hje(){return{"!type":"macro"}}var og=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,s,o){var l=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=o.length>0?parseInt(o,10)|0:0;return l?d+=t.c:--d,c?u+=t.r:--u,a+(l?"":"$")+Qa(d)+(c?"":"$")+vs(u)}return function(a,s){return t=s,a.replace(e,r)}}(),j3=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,P3=function(){return function(t,r){return t.replace(j3,function(n,a,s,o,l,c){var u=g3(o)-(s?0:r.c),d=p3(c)-(l?0:r.r),A=d==0?"":l?d+1:"["+d+"]",f=u==0?"":s?u+1:"["+u+"]";return a+"R"+A+"C"+f})}}();function AZ(e,t){return e.replace(j3,function(r,n,a,s,o,l){return n+(a=="$"?a+s:Qa(g3(s)+t.c))+(o=="$"?o+l:vs(p3(l)+t.r))})}function $je(e,t,r){var n=tl(t),a=n.s,s=Va(r),o={r:s.r-a.r,c:s.c-a.c};return AZ(e,o)}function Kje(e){return e.length!=1}function ZQ(e){return e.replace(/_xlfn\./g,"")}function ws(e){e.l+=1}function mf(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function hZ(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return fZ(e);r.biff==12&&(n=4)}var a=e.read_shift(n),s=e.read_shift(n),o=mf(e),l=mf(e);return{s:{r:a,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:l[0],cRel:l[1],rRel:l[2]}}}function fZ(e){var t=mf(e),r=mf(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function qje(e,t,r){if(r.biff<8)return fZ(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),s=mf(e),o=mf(e);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function mZ(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return Gje(e);var n=e.read_shift(r&&r.biff==12?4:2),a=mf(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function Gje(e){var t=mf(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function zje(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function Wje(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return Xje(e);var a=e.read_shift(n>=12?4:2),s=e.read_shift(2),o=(s&16384)>>14,l=(s&32768)>>15;if(s&=16383,l==1)for(;a>524287;)a-=1048576;if(o==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:o,rRel:l}}function Xje(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function Jje(e,t,r){var n=(e[e.l++]&96)>>5,a=hZ(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function Yje(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}var o=hZ(e,s,r);return[n,a,o]}function Zje(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function e5e(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}return e.l+=s,[n,a]}function t5e(e,t,r){var n=(e[e.l++]&96)>>5,a=qje(e,t-1,r);return[n,a]}function r5e(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function e7(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function n5e(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function a5e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function s5e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function i5e(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function o5e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function pZ(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function l5e(e){return e.read_shift(2),pZ(e)}function c5e(e){return e.read_shift(2),pZ(e)}function u5e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=mZ(e,0,r);return[n,a]}function d5e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=Wje(e,0,r);return[n,a]}function A5e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var s=mZ(e,0,r);return[n,a,s]}function h5e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[pPe[a],vZ[a],n]}function f5e(e,t,r){var n=e[e.l++],a=e.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:m5e(e);return[a,(s[0]===0?vZ:mPe)[s[1]]]}function m5e(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function p5e(e,t,r){e.l+=r&&r.biff==2?3:4}function g5e(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function x5e(e){return e.l++,EA[e.read_shift(1)]}function v5e(e){return e.l++,e.read_shift(2)}function y5e(e){return e.l++,e.read_shift(1)!==0}function b5e(e){return e.l++,oo(e)}function w5e(e,t,r){return e.l++,vb(e,t-1,r)}function N5e(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=As(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=EA[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=oo(e);break;case 2:r[1]=T0(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function C5e(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?k0:pS)(e));return a}function _5e(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,o=[];s!=n&&(o[s]=[]);++s)for(var l=0;l!=a;++l)o[s][l]=N5e(e,r.biff);return o}function E5e(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,s]}function S5e(e,t,r){if(r.biff==5)return I5e(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),s=e.read_shift(4);return[n,a,s]}function I5e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function B5e(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function j5e(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function P5e(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function k5e(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return e.l+=s,[n,a]}var T5e=ho,F5e=ho,O5e=ho;function bb(e,t,r){return e.l+=2,[zje(e)]}function k3(e){return e.l+=6,[]}var D5e=bb,R5e=k3,L5e=k3,M5e=bb;function gZ(e){return e.l+=2,[_s(e),e.read_shift(2)&1]}var U5e=bb,Q5e=gZ,V5e=k3,H5e=bb,$5e=bb,K5e=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function q5e(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),s=e.read_shift(2),o=K5e[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:n,c:a,C:s}}function G5e(e){return e.l+=2,[e.read_shift(4)]}function z5e(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function W5e(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function X5e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function J5e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Y5e(e){return e.l+=4,[0,0]}var t7={1:{n:"PtgExp",f:g5e},2:{n:"PtgTbl",f:O5e},3:{n:"PtgAdd",f:ws},4:{n:"PtgSub",f:ws},5:{n:"PtgMul",f:ws},6:{n:"PtgDiv",f:ws},7:{n:"PtgPower",f:ws},8:{n:"PtgConcat",f:ws},9:{n:"PtgLt",f:ws},10:{n:"PtgLe",f:ws},11:{n:"PtgEq",f:ws},12:{n:"PtgGe",f:ws},13:{n:"PtgGt",f:ws},14:{n:"PtgNe",f:ws},15:{n:"PtgIsect",f:ws},16:{n:"PtgUnion",f:ws},17:{n:"PtgRange",f:ws},18:{n:"PtgUplus",f:ws},19:{n:"PtgUminus",f:ws},20:{n:"PtgPercent",f:ws},21:{n:"PtgParen",f:ws},22:{n:"PtgMissArg",f:ws},23:{n:"PtgStr",f:w5e},26:{n:"PtgSheet",f:z5e},27:{n:"PtgEndSheet",f:W5e},28:{n:"PtgErr",f:x5e},29:{n:"PtgBool",f:y5e},30:{n:"PtgInt",f:v5e},31:{n:"PtgNum",f:b5e},32:{n:"PtgArray",f:r5e},33:{n:"PtgFunc",f:h5e},34:{n:"PtgFuncVar",f:f5e},35:{n:"PtgName",f:E5e},36:{n:"PtgRef",f:u5e},37:{n:"PtgArea",f:Jje},38:{n:"PtgMemArea",f:B5e},39:{n:"PtgMemErr",f:T5e},40:{n:"PtgMemNoMem",f:F5e},41:{n:"PtgMemFunc",f:j5e},42:{n:"PtgRefErr",f:P5e},43:{n:"PtgAreaErr",f:Zje},44:{n:"PtgRefN",f:d5e},45:{n:"PtgAreaN",f:t5e},46:{n:"PtgMemAreaN",f:X5e},47:{n:"PtgMemNoMemN",f:J5e},57:{n:"PtgNameX",f:S5e},58:{n:"PtgRef3d",f:A5e},59:{n:"PtgArea3d",f:Yje},60:{n:"PtgRefErr3d",f:k5e},61:{n:"PtgAreaErr3d",f:e5e},255:{}},Z5e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},ePe={1:{n:"PtgElfLel",f:gZ},2:{n:"PtgElfRw",f:H5e},3:{n:"PtgElfCol",f:D5e},6:{n:"PtgElfRwV",f:$5e},7:{n:"PtgElfColV",f:M5e},10:{n:"PtgElfRadical",f:U5e},11:{n:"PtgElfRadicalS",f:V5e},13:{n:"PtgElfColS",f:R5e},15:{n:"PtgElfColSV",f:L5e},16:{n:"PtgElfRadicalLel",f:Q5e},25:{n:"PtgList",f:q5e},29:{n:"PtgSxName",f:G5e},255:{}},tPe={0:{n:"PtgAttrNoop",f:Y5e},1:{n:"PtgAttrSemi",f:o5e},2:{n:"PtgAttrIf",f:s5e},4:{n:"PtgAttrChoose",f:n5e},8:{n:"PtgAttrGoto",f:a5e},16:{n:"PtgAttrSum",f:p5e},32:{n:"PtgAttrBaxcel",f:e7},33:{n:"PtgAttrBaxcel",f:e7},64:{n:"PtgAttrSpace",f:l5e},65:{n:"PtgAttrSpaceSemi",f:c5e},128:{n:"PtgAttrIfError",f:i5e},255:{}};function wb(e,t,r,n){if(n.biff<8)return ho(e,t);for(var a=e.l+t,s=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=_5e(e,0,n),s.push(r[o][1]);break;case"PtgMemArea":r[o][2]=C5e(e,r[o][1],n),s.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=e.read_shift(4),s.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=a-e.l,t!==0&&s.push(ho(e,t)),s}function Nb(e,t,r){for(var n=e.l+t,a,s,o=[];n!=e.l;)t=n-e.l,s=e[e.l],a=t7[s]||t7[Z5e[s]],(s===24||s===25)&&(a=(s===24?ePe:tPe)[e[e.l+1]]),!a||!a.f?ho(e,t):o.push([a.n,a.f(e,t,r)]);return o}function rPe(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],s=0;s<n.length;++s){var o=n[s];if(o)switch(o[0]){case 2:a.push('"'+o[1].replace(/"/g,'""')+'"');break;default:a.push(o[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var nPe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function aPe(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function xZ(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function r7(e,t,r){var n=xZ(e,t,r);return n=="#REF"?n:aPe(n,r)}function ao(e,t,r,n,a){var s=a&&a.biff||8,o={s:{c:0,r:0}},l=[],c,u,d,A=0,f=0,h,m="";if(!e[0]||!e[0][0])return"";for(var p=-1,g="",x=0,y=e[0].length;x<y;++x){var b=e[0][x];switch(b[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),p>=0){switch(e[0][p][1][0]){case 0:g=ts(" ",e[0][p][1][1]);break;case 1:g=ts("\r",e[0][p][1][1]);break;default:if(g="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][p][1][0])}u=u+g,p=-1}l.push(u+nPe[b[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=gy(b[1][1],o,a),l.push(xy(d,s));break;case"PtgRefN":d=r?gy(b[1][1],r,a):b[1][1],l.push(xy(d,s));break;case"PtgRef3d":A=b[1][1],d=gy(b[1][2],o,a),m=r7(n,A,a),l.push(m+"!"+xy(d,s));break;case"PtgFunc":case"PtgFuncVar":var _=b[1][0],T=b[1][1];_||(_=0),_&=127;var P=_==0?[]:l.slice(-_);l.length-=_,T==="User"&&(T=P.shift()),l.push(T+"("+P.join(",")+")");break;case"PtgBool":l.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(b[1]);break;case"PtgNum":l.push(String(b[1]));break;case"PtgStr":l.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(b[1]);break;case"PtgAreaN":h=PQ(b[1][1],r?{s:r}:o,a),l.push(Ij(h,a));break;case"PtgArea":h=PQ(b[1][1],o,a),l.push(Ij(h,a));break;case"PtgArea3d":A=b[1][1],h=b[1][2],m=r7(n,A,a),l.push(m+"!"+Ij(h,a));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":f=b[1][2];var C=(n.names||[])[f-1]||(n[0]||[])[f],S=C?C.Name:"SH33TJSNAME"+String(f);S&&S.slice(0,6)=="_xlfn."&&!a.xlfn&&(S=S.slice(6)),l.push(S);break;case"PtgNameX":var I=b[1][1];f=b[1][2];var L;if(a.biff<=5)I<0&&(I=-I),n[I]&&(L=n[I][f]);else{var E="";if(((n[I]||[])[0]||[])[0]==14849||(((n[I]||[])[0]||[])[0]==1025?n[I][f]&&n[I][f].itab>0&&(E=n.SheetNames[n[I][f].itab-1]+"!"):E=n.SheetNames[f-1]+"!"),n[I]&&n[I][f])E+=n[I][f].Name;else if(n[0]&&n[0][f])E+=n[0][f].Name;else{var j=(xZ(n,I,a)||"").split(";;");j[f-1]?E=j[f-1]:E+="SH33TJSERRX"}l.push(E);break}L||(L={Name:"SH33TJSERRY"}),l.push(L.Name);break;case"PtgParen":var R="(",W=")";if(p>=0){switch(g="",e[0][p][1][0]){case 2:R=ts(" ",e[0][p][1][1])+R;break;case 3:R=ts("\r",e[0][p][1][1])+R;break;case 4:W=ts(" ",e[0][p][1][1])+W;break;case 5:W=ts("\r",e[0][p][1][1])+W;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][p][1][0])}p=-1}l.push(R+l.pop()+W);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:b[1][1],r:b[1][0]};var de={c:r.c,r:r.r};if(n.sharedf[Tr(d)]){var te=n.sharedf[Tr(d)];l.push(ao(te,o,de,n,a))}else{var le=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){l.push(ao(u[1],o,de,n,a)),le=!0;break}le||l.push(b[1])}break;case"PtgArray":l.push("{"+rPe(b[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":p=x;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(b));default:throw new Error("Unrecognized Formula Token: "+String(b))}var ce=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&p>=0&&ce.indexOf(e[0][x][0])==-1){b=e[0][p];var J=!0;switch(b[1][0]){case 4:J=!1;case 0:g=ts(" ",b[1][1]);break;case 5:J=!1;case 1:g=ts("\r",b[1][1]);break;default:if(g="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}l.push((J?g:"")+l.pop()+(J?"":g)),p=-1}}if(l.length>1&&a.WTF)throw new Error("bad formula stack");return l[0]}function sPe(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,o=e.read_shift(a);if(o==65535)return[[],ho(e,t-2)];var l=Nb(e,o,r);return t!==o+a&&(s=wb(e,t-o-a,l,r)),e.l=n,[l,s]}function iPe(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,o=e.read_shift(a);if(o==65535)return[[],ho(e,t-2)];var l=Nb(e,o,r);return t!==o+a&&(s=wb(e,t-o-a,l,r)),e.l=n,[l,s]}function oPe(e,t,r,n){var a=e.l+t,s=Nb(e,n,r),o;return a!==e.l&&(o=wb(e,a-e.l,s,r)),[s,o]}function lPe(e,t,r){var n=e.l+t,a,s=e.read_shift(2),o=Nb(e,s,r);return s==65535?[[],ho(e,t-2)]:(t!==s+2&&(a=wb(e,n-s-2,o,r)),[o,a])}function cPe(e){var t;if(Hd(e,e.l+6)!==65535)return[oo(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function uPe(e){if(e==null){var t=kt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return a0(e);return a0(0)}function Tj(e,t,r){var n=e.l+t,a=cd(e);r.biff==2&&++e.l;var s=cPe(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=iPe(e,n-e.l,r);return{cell:a,val:s[0],formula:l,shared:o>>3&1,tt:s[1]}}function dPe(e,t,r,n,a){var s=i0(t,r,a),o=uPe(e.v),l=kt(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=kt(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var A=ci([s,o,l,u]);return A}function gS(e,t,r){var n=e.read_shift(4),a=Nb(e,n,r),s=e.read_shift(4),o=s>0?wb(e,s,a,r):null;return[a,o]}var APe=gS,xS=gS,hPe=gS,fPe=gS,mPe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},vZ={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},pPe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function n7(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function gPe(e){var t="of:="+e.replace(j3,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function Fj(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function xPe(e){return e.replace(/\./,"!")}var yy={},lg={},by=typeof Map<"u";function T3(e,t,r){var n=0,a=e.length;if(r){if(by?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var s=by?r.get(t):r[t];n<s.length;++n)if(e[s[n]].t===t)return e.Count++,s[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(by?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function vS(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(io=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=w1(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=l_(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function Fm(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function Pf(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,s=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){eA(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=s;++a)if(e[a].numFmtId===n)return a;return e[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function yZ(e,t,r,n,a,s){try{n.cellNF&&(e.z=Pr[t])}catch(l){if(n.WTF)throw l}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=va(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Pr[t]==null&&eA(m_e[t]||"General",t),e.t==="e")e.w=e.w||EA[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=m1(e.v);else if(e.t==="d"){var o=Gs(e.v);(o|0)===o?e.w=o.toString(10):e.w=m1(o)}else{if(e.v===void 0)return"";e.w=r0(e.v,lg)}else e.t==="d"?e.w=Sc(t,Gs(e.v),lg):e.w=Sc(t,e.v,lg)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{e.s=s.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=o_(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=o_(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&s.Fills)throw l}}}function vPe(e,t,r){if(e&&e["!ref"]){var n=xn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function yPe(e,t){var r=xn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=Kr(r))}var bPe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,wPe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,NPe=/<(?:\w:)?hyperlink [^>]*>/mg,CPe=/"(\w*:\w*)"/,_Pe=/<(?:\w:)?col\b[^>]*[\/]?>/g,EPe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,SPe=/<(?:\w:)?pageMargins[^>]*\/>/g,bZ=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,IPe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,BPe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function jPe(e,t,r,n,a,s,o){if(!e)return e;n||(n={"!id":{}});var l=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",A=e.match(wPe);A?(u=e.slice(0,A.index),d=e.slice(A.index+A[0].length)):u=d=e;var f=u.match(bZ);f?F3(f[0],l,a,r):(f=u.match(IPe))&&kPe(f[0],f[1]||"",l,a,r);var h=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(h>0){var m=u.slice(h,h+50).match(CPe);m&&yPe(l,m[1])}var p=u.match(BPe);p&&p[1]&&KPe(p[1],a);var g=[];if(t.cellStyles){var x=u.match(_Pe);x&&UPe(g,x)}A&&zPe(A[1],l,t,c,s,o);var y=d.match(EPe);y&&(l["!autofilter"]=VPe(y[0]));var b=[],_=d.match(bPe);if(_)for(h=0;h!=_.length;++h)b[h]=xn(_[h].slice(_[h].indexOf('"')+1));var T=d.match(NPe);T&&RPe(l,T,n);var P=d.match(SPe);if(P&&(l["!margins"]=LPe(Fr(P[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=Kr(c)),t.sheetRows>0&&l["!ref"]){var C=xn(l["!ref"]);t.sheetRows<=+C.e.r&&(C.e.r=t.sheetRows-1,C.e.r>c.e.r&&(C.e.r=c.e.r),C.e.r<C.s.r&&(C.s.r=C.e.r),C.e.c>c.e.c&&(C.e.c=c.e.c),C.e.c<C.s.c&&(C.s.c=C.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Kr(C))}return g.length>0&&(l["!cols"]=g),b.length>0&&(l["!merges"]=b),l}function PPe(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+Kr(e[r])+'"/>';return t+"</mergeCells>"}function F3(e,t,r,n){var a=Fr(e);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=gn(Kn(a.codeName)))}function kPe(e,t,r,n,a){F3(e.slice(0,e.indexOf(">")),r,n,a)}function TPe(e,t,r,n,a){var s=!1,o={},l=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,o.codeName=qu(Mn(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),l=(l||"")+rr("outlinePr",null,u)}!s&&!l||(a[a.length]=rr("sheetPr",l,o))}var FPe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],OPe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function DPe(e){var t={sheet:1};return FPe.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),OPe.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=S3(e.password).toString(16).toUpperCase()),rr("sheetProtection",null,t)}function RPe(e,t,r){for(var n=Array.isArray(e),a=0;a!=t.length;++a){var s=Fr(Kn(t[a]),!0);if(!s.ref)return;var o=((r||{})["!id"]||[])[s.id];o?(s.Target=o.Target,s.location&&(s.Target+="#"+gn(s.location))):(s.Target="#"+gn(s.location),o={Target:s.Target,TargetMode:"Internal"}),s.Rel=o,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var l=xn(s.ref),c=l.s.r;c<=l.e.r;++c)for(var u=l.s.c;u<=l.e.c;++u){var d=Tr({c:u,r:c});n?(e[c]||(e[c]=[]),e[c][u]||(e[c][u]={t:"z",v:void 0}),e[c][u].l=s):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=s)}}}function LPe(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function MPe(e){return Fm(e),rr("pageMargins",null,e)}function UPe(e,t){for(var r=!1,n=0;n!=t.length;++n){var a=Fr(t[n],!0);a.hidden&&(a.hidden=ma(a.hidden));var s=parseInt(a.min,10)-1,o=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,I3(a.width)),ff(a);s<=o;)e[s++]=ya(a)}}function QPe(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=rr("col",null,vS(a,n)));return r[r.length]="</cols>",r.join("")}function VPe(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function HPe(e,t,r,n){var a=typeof e.ref=="string"?e.ref:Kr(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,o=tl(a);o.s.r==o.e.r&&(o.e.r=tl(t["!ref"]).e.r,a=Kr(o));for(var l=0;l<s.length;++l){var c=s[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return l==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),rr("autoFilter",null,{ref:a})}var $Pe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function KPe(e,t){t.Views||(t.Views=[{}]),(e.match($Pe)||[]).forEach(function(r,n){var a=Fr(r);t.Views[n]||(t.Views[n]={}),+a.zoomScale&&(t.Views[n].zoom=+a.zoomScale),ma(a.rightToLeft)&&(t.Views[n].RTL=!0)})}function qPe(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),rr("sheetViews",rr("sheetView",null,a),{})}function GPe(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",s=e.t,o=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=EA[e.v];break;case"d":n&&n.cellDates?a=va(e.v,-1).toISOString():(e=ya(e),e.t="n",a=""+(e.v=Gs(va(e.v)))),typeof e.z>"u"&&(e.z=Pr[14]);break;default:a=e.v;break}var l=Di("v",Mn(a)),c={r:t},u=Pf(n.cellXfs,e,n);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=Di("v",""+T3(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=s&&(e.t=s,e.v=o),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=rr("f",Mn(e.f),d)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),rr("c",l,c)}var zPe=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=p1("v"),o=p1("f");return function(c,u,d,A,f,h){for(var m=0,p="",g=[],x=[],y=0,b=0,_=0,T="",P,C,S=0,I=0,L,E,j=0,R=0,W=Array.isArray(h.CellXf),de,te=[],le=[],ce=Array.isArray(u),J=[],me={},Ee=!1,k=!!d.sheetStubs,F=c.split(t),V=0,D=F.length;V!=D;++V){p=F[V].trim();var M=p.length;if(M!==0){var G=0;e:for(m=0;m<M;++m)switch(p[m]){case">":if(p[m-1]!="/"){++m;break e}if(d&&d.cellStyles){if(C=Fr(p.slice(G,m),!0),S=C.r!=null?parseInt(C.r,10):S+1,I=-1,d.sheetRows&&d.sheetRows<S)continue;me={},Ee=!1,C.ht&&(Ee=!0,me.hpt=parseFloat(C.ht),me.hpx=Pg(me.hpt)),C.hidden=="1"&&(Ee=!0,me.hidden=!0),C.outlineLevel!=null&&(Ee=!0,me.level=+C.outlineLevel),Ee&&(J[S-1]=me)}break;case"<":G=m;break}if(G>=m)break;if(C=Fr(p.slice(G,m),!0),S=C.r!=null?parseInt(C.r,10):S+1,I=-1,!(d.sheetRows&&d.sheetRows<S)){A.s.r>S-1&&(A.s.r=S-1),A.e.r<S-1&&(A.e.r=S-1),d&&d.cellStyles&&(me={},Ee=!1,C.ht&&(Ee=!0,me.hpt=parseFloat(C.ht),me.hpx=Pg(me.hpt)),C.hidden=="1"&&(Ee=!0,me.hidden=!0),C.outlineLevel!=null&&(Ee=!0,me.level=+C.outlineLevel),Ee&&(J[S-1]=me)),g=p.slice(m).split(e);for(var O=0;O!=g.length&&g[O].trim().charAt(0)=="<";++O);for(g=g.slice(O),m=0;m!=g.length;++m)if(p=g[m].trim(),p.length!==0){if(x=p.match(r),y=m,b=0,_=0,p="<c "+(p.slice(0,1)=="<"?">":"")+p,x!=null&&x.length===2){for(y=0,T=x[1],b=0;b!=T.length&&!((_=T.charCodeAt(b)-64)<1||_>26);++b)y=26*y+_;--y,I=y}else++I;for(b=0;b!=p.length&&p.charCodeAt(b)!==62;++b);if(++b,C=Fr(p.slice(0,b),!0),C.r||(C.r=Tr({r:S-1,c:I})),T=p.slice(b),P={t:""},(x=T.match(s))!=null&&x[1]!==""&&(P.v=gn(x[1])),d.cellFormula){if((x=T.match(o))!=null&&x[1]!==""){if(P.f=gn(Kn(x[1])).replace(/\r\n/g,`
`),d.xlfn||(P.f=ZQ(P.f)),x[0].indexOf('t="array"')>-1)P.F=(T.match(a)||[])[1],P.F.indexOf(":")>-1&&te.push([xn(P.F),P.F]);else if(x[0].indexOf('t="shared"')>-1){E=Fr(x[0]);var K=gn(Kn(x[1]));d.xlfn||(K=ZQ(K)),le[parseInt(E.si,10)]=[E,K,C.r]}}else(x=T.match(/<f[^>]*\/>/))&&(E=Fr(x[0]),le[E.si]&&(P.f=$je(le[E.si][1],le[E.si][2],C.r)));var ee=Va(C.r);for(b=0;b<te.length;++b)ee.r>=te[b][0].s.r&&ee.r<=te[b][0].e.r&&ee.c>=te[b][0].s.c&&ee.c<=te[b][0].e.c&&(P.F=te[b][1])}if(C.t==null&&P.v===void 0)if(P.f||P.F)P.v=0,P.t="n";else if(k)P.t="z";else continue;else P.t=C.t||"n";switch(A.s.c>I&&(A.s.c=I),A.e.c<I&&(A.e.c=I),P.t){case"n":if(P.v==""||P.v==null){if(!k)continue;P.t="z"}else P.v=parseFloat(P.v);break;case"s":if(typeof P.v>"u"){if(!k)continue;P.t="z"}else L=yy[parseInt(P.v,10)],P.v=L.t,P.r=L.r,d.cellHTML&&(P.h=L.h);break;case"str":P.t="s",P.v=P.v!=null?Kn(P.v):"",d.cellHTML&&(P.h=A3(P.v));break;case"inlineStr":x=T.match(n),P.t="s",x!=null&&(L=E3(x[1]))?(P.v=L.t,d.cellHTML&&(P.h=L.h)):P.v="";break;case"b":P.v=ma(P.v);break;case"d":d.cellDates?P.v=va(P.v,1):(P.v=Gs(va(P.v,1)),P.t="n");break;case"e":(!d||d.cellText!==!1)&&(P.w=P.v),P.v=NY[P.v];break}if(j=R=0,de=null,W&&C.s!==void 0&&(de=h.CellXf[C.s],de!=null&&(de.numFmtId!=null&&(j=de.numFmtId),d.cellStyles&&de.fillId!=null&&(R=de.fillId))),yZ(P,j,R,d,f,h),d.cellDates&&W&&P.t=="n"&&ax(Pr[j])&&(P.t="d",P.v=mS(P.v)),C.cm&&d.xlmeta){var ne=(d.xlmeta.Cell||[])[+C.cm-1];ne&&ne.type=="XLDAPR"&&(P.D=!0)}if(ce){var Q=Va(C.r);u[Q.r]||(u[Q.r]=[]),u[Q.r][Q.c]=P}else u[C.r]=P}}}}J.length>0&&(u["!rows"]=J)}}();function WPe(e,t,r,n){var a=[],s=[],o=xn(e["!ref"]),l="",c,u="",d=[],A=0,f=0,h=e["!rows"],m=Array.isArray(e),p={r:u},g,x=-1;for(f=o.s.c;f<=o.e.c;++f)d[f]=Qa(f);for(A=o.s.r;A<=o.e.r;++A){for(s=[],u=vs(A),f=o.s.c;f<=o.e.c;++f){c=d[f]+u;var y=m?(e[A]||[])[f]:e[c];y!==void 0&&(l=GPe(y,c,e,t))!=null&&s.push(l)}(s.length>0||h&&h[A])&&(p={r:u},h&&h[A]&&(g=h[A],g.hidden&&(p.hidden=1),x=-1,g.hpx?x=N1(g.hpx):g.hpt&&(x=g.hpt),x>-1&&(p.ht=x,p.customHeight=1),g.level&&(p.outlineLevel=g.level)),a[a.length]=rr("row",s.join(""),p))}if(h)for(;A<h.length;++A)h&&h[A]&&(p={r:A+1},g=h[A],g.hidden&&(p.hidden=1),x=-1,g.hpx?x=N1(g.hpx):g.hpt&&(x=g.hpt),x>-1&&(p.ht=x,p.customHeight=1),g.level&&(p.outlineLevel=g.level),a[a.length]=rr("row","",p));return a.join("")}function wZ(e,t,r,n){var a=[bs,rr("worksheet",null,{xmlns:I0[0],"xmlns:r":Hs.r})],s=r.SheetNames[e],o=0,l="",c=r.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",d=xn(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=Kr(d)}n||(n={}),c["!comments"]=[];var A=[];TPe(c,r,e,t,a),a[a.length]=rr("dimension",null,{ref:u}),a[a.length]=qPe(c,t,e,r),t.sheetFormat&&(a[a.length]=rr("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=QPe(c,c["!cols"])),a[o=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=WPe(c,t),l.length>0&&(a[a.length]=l)),a.length>o+1&&(a[a.length]="</sheetData>",a[o]=a[o].replace("/>",">")),c["!protect"]&&(a[a.length]=DPe(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=HPe(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=PPe(c["!merges"]));var f=-1,h,m=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(p){p[1].Target&&(h={ref:p[0]},p[1].Target.charAt(0)!="#"&&(m=On(n,-1,Mn(p[1].Target).replace(/#.*$/,""),Zr.HLINK),h["r:id"]="rId"+m),(f=p[1].Target.indexOf("#"))>-1&&(h.location=Mn(p[1].Target.slice(f+1))),p[1].Tooltip&&(h.tooltip=Mn(p[1].Tooltip)),a[a.length]=rr("hyperlink",null,h))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=MPe(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=Di("ignoredErrors",rr("ignoredError",null,{numberStoredAsText:1,sqref:u}))),A.length>0&&(m=On(n,-1,"../drawings/drawing"+(e+1)+".xml",Zr.DRAW),a[a.length]=rr("drawing",null,{"r:id":"rId"+m}),c["!drawing"]=A),c["!comments"].length>0&&(m=On(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Zr.VML),a[a.length]=rr("legacyDrawing",null,{"r:id":"rId"+m}),c["!legacy"]=m),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function XPe(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function JPe(e,t,r){var n=kt(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var s=320;a.hpx?s=N1(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var o=0;a.level&&(o|=a.level),a.hidden&&(o|=16),(a.hpx||a.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var A=-1,f=-1,h=d<<10;h<d+1<<10;++h){u.c=h;var m=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Tr(u)];m&&(A<0&&(A=h),f=h)}A<0||(++l,n.write_shift(4,A),n.write_shift(4,f))}var p=n.l;return n.l=c,n.write_shift(4,l),n.l=p,n.length>n.l?n.slice(0,n.l):n}function YPe(e,t,r,n){var a=JPe(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&Qt(e,0,a)}var ZPe=k0,eke=ox;function tke(){}function rke(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=sEe(e),r}function nke(e,t,r){r==null&&(r=kt(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return a_({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),xY(e,r),r.slice(0,r.l)}function ake(e){var t=kc(e);return[t]}function ske(e,t,r){return r==null&&(r=kt(8)),B0(t,r)}function ike(e){var t=j0(e);return[t]}function oke(e,t,r){return r==null&&(r=kt(4)),P0(t,r)}function lke(e){var t=kc(e),r=e.read_shift(1);return[t,r,"b"]}function cke(e,t,r){return r==null&&(r=kt(9)),B0(t,r),r.write_shift(1,e.v?1:0),r}function uke(e){var t=j0(e),r=e.read_shift(1);return[t,r,"b"]}function dke(e,t,r){return r==null&&(r=kt(5)),P0(t,r),r.write_shift(1,e.v?1:0),r}function Ake(e){var t=kc(e),r=e.read_shift(1);return[t,r,"e"]}function hke(e,t,r){return r==null&&(r=kt(9)),B0(t,r),r.write_shift(1,e.v),r}function fke(e){var t=j0(e),r=e.read_shift(1);return[t,r,"e"]}function mke(e,t,r){return r==null&&(r=kt(8)),P0(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function pke(e){var t=kc(e),r=e.read_shift(4);return[t,r,"s"]}function gke(e,t,r){return r==null&&(r=kt(12)),B0(t,r),r.write_shift(4,t.v),r}function xke(e){var t=j0(e),r=e.read_shift(4);return[t,r,"s"]}function vke(e,t,r){return r==null&&(r=kt(8)),P0(t,r),r.write_shift(4,t.v),r}function yke(e){var t=kc(e),r=oo(e);return[t,r,"n"]}function bke(e,t,r){return r==null&&(r=kt(16)),B0(t,r),a0(e.v,r),r}function NZ(e){var t=j0(e),r=oo(e);return[t,r,"n"]}function wke(e,t,r){return r==null&&(r=kt(12)),P0(t,r),a0(e.v,r),r}function Nke(e){var t=kc(e),r=b3(e);return[t,r,"n"]}function Cke(e,t,r){return r==null&&(r=kt(12)),B0(t,r),vY(e.v,r),r}function _ke(e){var t=j0(e),r=b3(e);return[t,r,"n"]}function Eke(e,t,r){return r==null&&(r=kt(8)),P0(t,r),vY(e.v,r),r}function Ske(e){var t=kc(e),r=x3(e);return[t,r,"is"]}function Ike(e){var t=kc(e),r=co(e);return[t,r,"str"]}function Bke(e,t,r){return r==null&&(r=kt(12+4*e.v.length)),B0(t,r),ui(e.v,r),r.length>r.l?r.slice(0,r.l):r}function jke(e){var t=j0(e),r=co(e);return[t,r,"str"]}function Pke(e,t,r){return r==null&&(r=kt(8+4*e.v.length)),P0(t,r),ui(e.v,r),r.length>r.l?r.slice(0,r.l):r}function kke(e,t,r){var n=e.l+t,a=kc(e);a.r=r["!row"];var s=e.read_shift(1),o=[a,s,"b"];if(r.cellFormula){e.l+=2;var l=xS(e,n-e.l,r);o[3]=ao(l,null,a,r.supbooks,r)}else e.l=n;return o}function Tke(e,t,r){var n=e.l+t,a=kc(e);a.r=r["!row"];var s=e.read_shift(1),o=[a,s,"e"];if(r.cellFormula){e.l+=2;var l=xS(e,n-e.l,r);o[3]=ao(l,null,a,r.supbooks,r)}else e.l=n;return o}function Fke(e,t,r){var n=e.l+t,a=kc(e);a.r=r["!row"];var s=oo(e),o=[a,s,"n"];if(r.cellFormula){e.l+=2;var l=xS(e,n-e.l,r);o[3]=ao(l,null,a,r.supbooks,r)}else e.l=n;return o}function Oke(e,t,r){var n=e.l+t,a=kc(e);a.r=r["!row"];var s=co(e),o=[a,s,"str"];if(r.cellFormula){e.l+=2;var l=xS(e,n-e.l,r);o[3]=ao(l,null,a,r.supbooks,r)}else e.l=n;return o}var Dke=k0,Rke=ox;function Lke(e,t){return t==null&&(t=kt(4)),t.write_shift(4,e),t}function Mke(e,t){var r=e.l+t,n=k0(e),a=v3(e),s=co(e),o=co(e),l=co(e);e.l=r;var c={rfx:n,relId:a,loc:s,display:l};return o&&(c.Tooltip=o),c}function Uke(e,t){var r=kt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));ox({s:Va(e[0]),e:Va(e[0])},r),y3("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return ui(a||"",r),ui(e[1].Tooltip||"",r),ui("",r),r.slice(0,r.l)}function Qke(){}function Vke(e,t,r){var n=e.l+t,a=yY(e),s=e.read_shift(1),o=[a];if(o[2]=s,r.cellFormula){var l=APe(e,n-e.l,r);o[1]=l}else e.l=n;return o}function Hke(e,t,r){var n=e.l+t,a=k0(e),s=[a];if(r.cellFormula){var o=fPe(e,n-e.l,r);s[1]=o,e.l=n}else e.l=n;return s}function $ke(e,t,r){r==null&&(r=kt(18));var n=vS(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var CZ=["left","right","top","bottom","header","footer"];function Kke(e){var t={};return CZ.forEach(function(r){t[r]=oo(e)}),t}function qke(e,t){return t==null&&(t=kt(6*8)),Fm(e),CZ.forEach(function(r){a0(e[r],t)}),t}function Gke(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function zke(e,t,r){r==null&&(r=kt(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function Wke(e){var t=kt(24);return t.write_shift(4,4),t.write_shift(4,1),ox(e,t),t}function Xke(e,t){return t==null&&(t=kt(16*4+2)),t.write_shift(2,e.password?S3(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function Jke(){}function Yke(){}function Zke(e,t,r,n,a,s,o){if(!e)return e;var l=t||{};n||(n={"!id":{}});var c=l.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},A=!1,f=!1,h,m,p,g,x,y,b,_,T,P=[];l.biff=12,l["!row"]=0;var C=0,S=!1,I=[],L={},E=l.supbooks||a.supbooks||[[]];if(E.sharedf=L,E.arrayf=I,E.SheetNames=a.SheetNames||a.Sheets.map(function(ce){return ce.name}),!l.supbooks&&(l.supbooks=E,a.Names))for(var j=0;j<a.Names.length;++j)E[0][j+1]=a.Names[j];var R=[],W=[],de=!1;C1[16]={n:"BrtShortReal",f:NZ};var te;if(_A(e,function(J,me,Ee){if(!f)switch(Ee){case 148:u=J;break;case 0:h=J,l.sheetRows&&l.sheetRows<=h.r&&(f=!0),_=vs(g=h.r),l["!row"]=h.r,(J.hidden||J.hpt||J.level!=null)&&(J.hpt&&(J.hpx=Pg(J.hpt)),W[J.r]=J);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(m={t:J[2]},J[2]){case"n":m.v=J[1];break;case"s":b=yy[J[1]],m.v=b.t,m.r=b.r;break;case"b":m.v=!!J[1];break;case"e":m.v=J[1],l.cellText!==!1&&(m.w=EA[m.v]);break;case"str":m.t="s",m.v=J[1];break;case"is":m.t="s",m.v=J[1].t;break}if((p=o.CellXf[J[0].iStyleRef])&&yZ(m,p.numFmtId,null,l,s,o),x=J[0].c==-1?x+1:J[0].c,l.dense?(c[g]||(c[g]=[]),c[g][x]=m):c[Qa(x)+_]=m,l.cellFormula){for(S=!1,C=0;C<I.length;++C){var k=I[C];h.r>=k[0].s.r&&h.r<=k[0].e.r&&x>=k[0].s.c&&x<=k[0].e.c&&(m.F=Kr(k[0]),S=!0)}!S&&J.length>3&&(m.f=J[3])}if(d.s.r>h.r&&(d.s.r=h.r),d.s.c>x&&(d.s.c=x),d.e.r<h.r&&(d.e.r=h.r),d.e.c<x&&(d.e.c=x),l.cellDates&&p&&m.t=="n"&&ax(Pr[p.numFmtId])){var F=xm(m.v);F&&(m.t="d",m.v=new Date(F.y,F.m-1,F.d,F.H,F.M,F.S,F.u))}te&&(te.type=="XLDAPR"&&(m.D=!0),te=void 0);break;case 1:case 12:if(!l.sheetStubs||A)break;m={t:"z",v:void 0},x=J[0].c==-1?x+1:J[0].c,l.dense?(c[g]||(c[g]=[]),c[g][x]=m):c[Qa(x)+_]=m,d.s.r>h.r&&(d.s.r=h.r),d.s.c>x&&(d.s.c=x),d.e.r<h.r&&(d.e.r=h.r),d.e.c<x&&(d.e.c=x),te&&(te.type=="XLDAPR"&&(m.D=!0),te=void 0);break;case 176:P.push(J);break;case 49:te=((l.xlmeta||{}).Cell||[])[J-1];break;case 494:var V=n["!id"][J.relId];for(V?(J.Target=V.Target,J.loc&&(J.Target+="#"+J.loc),J.Rel=V):J.relId==""&&(J.Target="#"+J.loc),g=J.rfx.s.r;g<=J.rfx.e.r;++g)for(x=J.rfx.s.c;x<=J.rfx.e.c;++x)l.dense?(c[g]||(c[g]=[]),c[g][x]||(c[g][x]={t:"z",v:void 0}),c[g][x].l=J):(y=Tr({c:x,r:g}),c[y]||(c[y]={t:"z",v:void 0}),c[y].l=J);break;case 426:if(!l.cellFormula)break;I.push(J),T=l.dense?c[g][x]:c[Qa(x)+_],T.f=ao(J[1],d,{r:h.r,c:x},E,l),T.F=Kr(J[0]);break;case 427:if(!l.cellFormula)break;L[Tr(J[0].s)]=J[1],T=l.dense?c[g][x]:c[Qa(x)+_],T.f=ao(J[1],d,{r:h.r,c:x},E,l);break;case 60:if(!l.cellStyles)break;for(;J.e>=J.s;)R[J.e--]={width:J.w/256,hidden:!!(J.flags&1),level:J.level},de||(de=!0,I3(J.w/256)),ff(R[J.e+1]);break;case 161:c["!autofilter"]={ref:Kr(J)};break;case 476:c["!margins"]=J;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),J.name&&(a.Sheets[r].CodeName=J.name),(J.above||J.left)&&(c["!outline"]={above:J.above,left:J.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),J.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:A=!0;break;case 36:A=!1;break;case 37:A=!0;break;case 38:A=!1;break;default:if(!me.T){if(!A||l.WTF)throw new Error("Unexpected record 0x"+Ee.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=Kr(u||d)),l.sheetRows&&c["!ref"]){var le=xn(c["!ref"]);l.sheetRows<=+le.e.r&&(le.e.r=l.sheetRows-1,le.e.r>d.e.r&&(le.e.r=d.e.r),le.e.r<le.s.r&&(le.s.r=le.e.r),le.e.c>d.e.c&&(le.e.c=d.e.c),le.e.c<le.s.c&&(le.s.c=le.e.c),c["!fullref"]=c["!ref"],c["!ref"]=Kr(le))}return P.length>0&&(c["!merges"]=P),R.length>0&&(c["!cols"]=R),W.length>0&&(c["!rows"]=W),c}function eTe(e,t,r,n,a,s,o){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=ya(t),t.z=t.z||Pr[14],t.v=Gs(va(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var c={r,c:n};switch(c.s=Pf(a.cellXfs,t,a),t.l&&s["!links"].push([Tr(c),t.l]),t.c&&s["!comments"].push([Tr(c),t.c]),t.t){case"s":case"str":return a.bookSST?(l=T3(a.Strings,t.v,a.revStrings),c.t="s",c.v=l,o?Qt(e,18,vke(t,c)):Qt(e,7,gke(t,c))):(c.t="str",o?Qt(e,17,Pke(t,c)):Qt(e,6,Bke(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?o?Qt(e,13,Eke(t,c)):Qt(e,2,Cke(t,c)):o?Qt(e,16,wke(t,c)):Qt(e,5,bke(t,c)),!0;case"b":return c.t="b",o?Qt(e,15,dke(t,c)):Qt(e,4,cke(t,c)),!0;case"e":return c.t="e",o?Qt(e,14,mke(t,c)):Qt(e,3,hke(t,c)),!0}return o?Qt(e,12,oke(t,c)):Qt(e,1,ske(t,c)),!0}function tTe(e,t,r,n){var a=xn(t["!ref"]||"A1"),s,o="",l=[];Qt(e,145);var c=Array.isArray(t),u=a.e.r;t["!rows"]&&(u=Math.max(a.e.r,t["!rows"].length-1));for(var d=a.s.r;d<=u;++d){o=vs(d),YPe(e,t,a,d);var A=!1;if(d<=a.e.r)for(var f=a.s.c;f<=a.e.c;++f){d===a.s.r&&(l[f]=Qa(f)),s=l[f]+o;var h=c?(t[d]||[])[f]:t[s];if(!h){A=!1;continue}A=eTe(e,h,d,f,n,t,A)}}Qt(e,146)}function rTe(e,t){!t||!t["!merges"]||(Qt(e,177,Lke(t["!merges"].length)),t["!merges"].forEach(function(r){Qt(e,176,Rke(r))}),Qt(e,178))}function nTe(e,t){!t||!t["!cols"]||(Qt(e,390),t["!cols"].forEach(function(r,n){r&&Qt(e,60,$ke(n,r))}),Qt(e,391))}function aTe(e,t){!t||!t["!ref"]||(Qt(e,648),Qt(e,649,Wke(xn(t["!ref"]))),Qt(e,650))}function sTe(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=On(r,-1,n[1].Target.replace(/#.*$/,""),Zr.HLINK);Qt(e,494,Uke(n,a))}}),delete t["!links"]}function iTe(e,t,r,n){if(t["!comments"].length>0){var a=On(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Zr.VML);Qt(e,551,y3("rId"+a)),t["!legacy"]=a}}function oTe(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],s=typeof a.ref=="string"?a.ref:Kr(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=tl(s);l.s.r==l.e.r&&(l.e.r=tl(t["!ref"]).e.r,s=Kr(l));for(var c=0;c<o.length;++c){var u=o[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Qt(e,161,ox(xn(s))),Qt(e,162)}}function lTe(e,t,r){Qt(e,133),Qt(e,137,zke(t,r)),Qt(e,138),Qt(e,134)}function cTe(e,t){t["!protect"]&&Qt(e,535,Xke(t["!protect"]))}function uTe(e,t,r,n){var a=el(),s=r.SheetNames[e],o=r.Sheets[s]||{},l=s;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var c=xn(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],Qt(a,129),(r.vbaraw||o["!outline"])&&Qt(a,147,nke(l,o["!outline"])),Qt(a,148,eke(c)),lTe(a,o,r.Workbook),nTe(a,o),tTe(a,o,e,t),cTe(a,o),oTe(a,o,r,e),rTe(a,o),sTe(a,o,n),o["!margins"]&&Qt(a,476,qke(o["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&aTe(a,o),iTe(a,o,e,n),Qt(a,130),a.end()}function dTe(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var o=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var a=gn((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[t,a,n]}function ATe(e,t,r,n,a,s){var o=s||{"!type":"chart"};if(!e)return s;var l=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(A){var f=dTe(A);d.s.r=d.s.c=0,d.e.c=l,u=Qa(l),f[0].forEach(function(h,m){o[u+vs(m)]={t:"n",v:h,z:f[1]},c=m}),d.e.r<c&&(d.e.r=c),++l}),l>0&&(o["!ref"]=Kr(d)),o}function hTe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(bZ);return l&&F3(l[0],s,a,r),(o=e.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=o[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function fTe(e,t){e.l+=10;var r=co(e);return{name:r}}function mTe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o=!1;return _A(e,function(c,u,d){switch(d){case 550:s["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var O3=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],pTe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],gTe=[],xTe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function a7(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],a=0;a!=t.length;++a){var s=t[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=ma(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function s7(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=ma(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function _Z(e){s7(e.WBProps,O3),s7(e.CalcPr,xTe),a7(e.WBView,pTe),a7(e.Sheets,gTe),lg.date1904=ma(e.WBProps.date1904)}function vTe(e){return!e.Workbook||!e.Workbook.WBProps?"false":ma(e.Workbook.WBProps.date1904)?"true":"false"}var yTe="][*?/\\".split("");function EZ(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return yTe.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function bTe(e,t,r){e.forEach(function(n,a){EZ(n);for(var s=0;s<a;++s)if(n==e[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var o=t&&t[a]&&t[a].CodeName||n;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function wTe(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];bTe(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)vPe(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var NTe=/<\w+:workbook/;function CTe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},o=0;if(e.replace(fo,function(c,u){var d=Fr(c);switch(ld(d[0])){case"<?xml":break;case"<workbook":c.match(NTe)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":O3.forEach(function(A){if(d[A[0]]!=null)switch(A[2]){case"bool":r.WBProps[A[0]]=ma(d[A[0]]);break;case"int":r.WBProps[A[0]]=parseInt(d[A[0]],10);break;default:r.WBProps[A[0]]=d[A[0]]}}),d.codeName&&(r.WBProps.CodeName=Kn(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=gn(Kn(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=Kn(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),ma(d.hidden||"0")&&(s.Hidden=!0),o=u+c.length;break;case"</definedName>":s.Ref=gn(Kn(e.slice(o,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),I0.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return _Z(r),r}function SZ(e){var t=[bs];t[t.length]=rr("workbook",null,{xmlns:I0[0],"xmlns:r":Hs.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(O3.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=rr("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var o={name:Mn(e.SheetNames[s].slice(0,31))};if(o.sheetId=""+(s+1),o["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}t[t.length]=rr("sheet",null,o)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(t[t.length]=rr("definedName",Mn(l.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function _Te(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=Sk(e),r.name=co(e),r}function ETe(e,t){return t||(t=kt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),y3(e.strRelID,t),ui(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function STe(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?co(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function ITe(e,t){t||(t=kt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),xY(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function BTe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function jTe(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),s=iEe(e),o=hPe(e,0,r),l=v3(e);e.l=n;var c={Name:s,Ptg:o};return a<268435455&&(c.Sheet=a),l&&(c.Comment=l),c}function PTe(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;t||(t={}),t.biff=12;var s=[],o=[[]];return o.SheetNames=[],o.XTI=[],C1[16]={n:"BrtFRTArchID$",f:BTe},_A(e,function(c,u,d){switch(d){case 156:o.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=ao(c.Ptg,null,null,o,t),delete t.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([d,c]):o[0]=[d,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),_Z(r),r.Names=s,r.supbooks=o,r}function kTe(e,t){Qt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Qt(e,156,ETe(a))}Qt(e,144)}function TTe(e,t){t||(t=kt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return ui("SheetJS",t),ui(JC.version,t),ui(JC.version,t),ui("7262",t),t.length>t.l?t.slice(0,t.l):t}function FTe(e,t){t||(t=kt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function OTe(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(Qt(e,135),Qt(e,158,FTe(a)),Qt(e,136))}}function DTe(e,t){var r=el();return Qt(r,131),Qt(r,128,TTe()),Qt(r,153,ITe(e.Workbook&&e.Workbook.WBProps||null)),OTe(r,e),kTe(r,e),Qt(r,132),r.end()}function RTe(e,t,r){return t.slice(-4)===".bin"?PTe(e,r):CTe(e,r)}function LTe(e,t,r,n,a,s,o,l){return t.slice(-4)===".bin"?Zke(e,n,r,a,s,o,l):jPe(e,n,r,a,s,o,l)}function MTe(e,t,r,n,a,s,o,l){return t.slice(-4)===".bin"?mTe(e,n,r,a,s):hTe(e,n,r,a,s)}function UTe(e,t,r,n,a,s,o,l){return t.slice(-4)===".bin"?Vje():Hje()}function QTe(e,t,r,n,a,s,o,l){return t.slice(-4)===".bin"?Uje():Qje()}function VTe(e,t,r,n){return t.slice(-4)===".bin"?RBe(e,r,n):_Be(e,r,n)}function HTe(e,t,r){return oZ(e,r)}function $Te(e,t,r){return t.slice(-4)===".bin"?$Ie(e,r):QIe(e,r)}function KTe(e,t,r){return t.slice(-4)===".bin"?Oje(e,r):Eje(e,r)}function qTe(e,t,r){return t.slice(-4)===".bin"?Nje(e):bje(e)}function GTe(e,t,r,n){return r.slice(-4)===".bin"?Cje(e,t,r,n):void 0}function zTe(e,t,r){return t.slice(-4)===".bin"?xje(e,t,r):yje(e,t,r)}function WTe(e,t,r){return(t.slice(-4)===".bin"?DTe:SZ)(e)}function XTe(e,t,r,n,a){return(t.slice(-4)===".bin"?uTe:wZ)(e,r,n,a)}function JTe(e,t,r){return(t.slice(-4)===".bin"?GBe:sZ)(e,r)}function YTe(e,t,r){return(t.slice(-4)===".bin"?GIe:JY)(e,r)}function ZTe(e,t,r){return(t.slice(-4)===".bin"?Dje:uZ)(e)}function e4e(e){return(e.slice(-4)===".bin"?vje:lZ)()}var IZ=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,BZ=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function $c(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=e.match(IZ),s,o,l,c;if(a)for(c=0;c!=a.length;++c)s=a[c].match(BZ),(o=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?l="xmlns"+s[1].slice(6):l=s[1].slice(o+1),n[l]=s[2].slice(1,s[2].length-1));return n}function t4e(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(IZ),a,s,o,l;if(n)for(l=0;l!=n.length;++l)a=n[l].match(BZ),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(s+1),r[o]=a[2].slice(1,a[2].length-1));return r}var wy;function r4e(e,t){var r=wy[e]||gn(e);return r==="General"?r0(t):Sc(r,t)}function n4e(e,t,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=ma(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=va(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[gn(t)]=a}function a4e(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||EA[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=m1(e.v):e.w=r0(e.v):e.w=r4e(t||"General",e.v)}catch(s){if(r.WTF)throw s}try{var n=wy[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&ax(n)){var a=xm(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function s4e(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=gBe[n.Pattern]||n.Pattern)}e[t.ID]=t}function i4e(e,t,r,n,a,s,o,l,c,u){var d="General",A=n.StyleID,f={};u=u||{};var h=[],m=0;for(A===void 0&&l&&(A=l.StyleID),A===void 0&&o&&(A=o.StyleID);s[A]!==void 0&&(s[A].nf&&(d=s[A].nf),s[A].Interior&&h.push(s[A].Interior),!!s[A].Parent);)A=s[A].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=ma(e);break;case"String":n.t="s",n.r=wQ(gn(e)),n.v=e.indexOf("<")>-1?gn(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(va(e)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=gn(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=NY[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=wQ(t||e));break}if(a4e(n,d,u),u.cellFormula!==!1)if(n.Formula){var p=gn(n.Formula);p.charCodeAt(0)==61&&(p=p.slice(1)),n.f=og(p,a),delete n.Formula,n.ArrayRange=="RC"?n.F=og("RC:RC",a):n.ArrayRange&&(n.F=og(n.ArrayRange,a),c.push([xn(n.F),n.F]))}else for(m=0;m<c.length;++m)a.r>=c[m][0].s.r&&a.r<=c[m][0].e.r&&a.c>=c[m][0].s.c&&a.c<=c[m][0].e.c&&(n.F=c[m][1]);u.cellStyles&&(h.forEach(function(g){!f.patternType&&g.patternType&&(f.patternType=g.patternType)}),n.s=f),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function o4e(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function Oj(e,t){var r=t||{};sx();var n=Rv(h3(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Kn(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var o=ya(r);return o.type="string",jg.to_workbook(n,o)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(re){a.indexOf("<"+re)>=0&&(s=!0)}),s)return q4e(n,r);wy={"General Number":"General","General Date":Pr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Pr[15],"Short Date":Pr[14],"Long Time":Pr[19],"Medium Time":Pr[18],"Short Time":Pr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Pr[2],Standard:Pr[4],Percent:Pr[10],Scientific:Pr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],u,d={},A=[],f=r.dense?[]:{},h="",m={},p={},g=$c('<Data ss:Type="String">'),x=0,y=0,b=0,_={s:{r:2e6,c:2e6},e:{r:0,c:0}},T={},P={},C="",S=0,I=[],L={},E={},j=0,R=[],W=[],de={},te=[],le,ce=!1,J=[],me=[],Ee={},k=0,F=0,V={Sheets:[],WBProps:{date1904:!1}},D={};x1.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var M="";l=x1.exec(n);)switch(l[3]=(M=l[3]).toLowerCase()){case"data":if(M=="data"){if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?i4e(n.slice(x,l.index),C,g,c[c.length-1][0]=="comment"?de:m,{c:y,r:b},T,te[y],p,J,r):(C="",g=$c(l[0]),x=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(W.length>0&&(m.c=W),(!r.sheetRows||r.sheetRows>b)&&m.v!==void 0&&(r.dense?(f[b]||(f[b]=[]),f[b][y]=m):f[Qa(y)+vs(b)]=m),m.HRef&&(m.l={Target:gn(m.HRef)},m.HRefScreenTip&&(m.l.Tooltip=m.HRefScreenTip),delete m.HRef,delete m.HRefScreenTip),(m.MergeAcross||m.MergeDown)&&(k=y+(parseInt(m.MergeAcross,10)|0),F=b+(parseInt(m.MergeDown,10)|0),I.push({s:{c:y,r:b},e:{c:k,r:F}})),!r.sheetStubs)m.MergeAcross?y=k+1:++y;else if(m.MergeAcross||m.MergeDown){for(var G=y;G<=k;++G)for(var O=b;O<=F;++O)(G>y||O>b)&&(r.dense?(f[O]||(f[O]=[]),f[O][G]={t:"z"}):f[Qa(G)+vs(O)]={t:"z"});y=k+1}else++y;else m=t4e(l[0]),m.Index&&(y=+m.Index-1),y<_.s.c&&(_.s.c=y),y>_.e.c&&(_.e.c=y),l[0].slice(-2)==="/>"&&++y,W=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(b<_.s.r&&(_.s.r=b),b>_.e.r&&(_.e.r=b),l[0].slice(-2)==="/>"&&(p=$c(l[0]),p.Index&&(b=+p.Index-1)),y=0,++b):(p=$c(l[0]),p.Index&&(b=+p.Index-1),Ee={},(p.AutoFitHeight=="0"||p.Height)&&(Ee.hpx=parseInt(p.Height,10),Ee.hpt=N1(Ee.hpx),me[b]=Ee),p.Hidden=="1"&&(Ee.hidden=!0,me[b]=Ee));break;case"worksheet":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));A.push(h),_.s.r<=_.e.r&&_.s.c<=_.e.c&&(f["!ref"]=Kr(_),r.sheetRows&&r.sheetRows<=_.e.r&&(f["!fullref"]=f["!ref"],_.e.r=r.sheetRows-1,f["!ref"]=Kr(_))),I.length&&(f["!merges"]=I),te.length>0&&(f["!cols"]=te),me.length>0&&(f["!rows"]=me),d[h]=f}else _={s:{r:2e6,c:2e6},e:{r:0,c:0}},b=y=0,c.push([l[3],!1]),u=$c(l[0]),h=gn(u.Name),f=r.dense?[]:{},I=[],J=[],me=[],D={name:h,Hidden:0},V.Sheets.push(D);break;case"table":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),te=[],ce=!1}break;case"style":l[1]==="/"?s4e(T,P,r):P=$c(l[0]);break;case"numberformat":P.nf=gn($c(l[0]).Format||"General"),wy[P.nf]&&(P.nf=wy[P.nf]);for(var K=0;K!=392&&Pr[K]!=P.nf;++K);if(K==392){for(K=57;K!=392;++K)if(Pr[K]==null){eA(P.nf,K);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(le=$c(l[0]),le.Hidden&&(le.hidden=!0,delete le.Hidden),le.Width&&(le.wpx=parseInt(le.Width,10)),!ce&&le.wpx>10){ce=!0,io=nZ;for(var ee=0;ee<te.length;++ee)te[ee]&&ff(te[ee])}ce&&ff(le),te[le.Index-1||te.length]=le;for(var ne=0;ne<+le.Span;++ne)te[te.length]=ya(le);break;case"namedrange":if(l[1]==="/")break;V.Names||(V.Names=[]);var Q=Fr(l[0]),be={Name:Q.Name,Ref:og(Q.RefersTo.slice(1),{r:0,c:0})};V.Sheets.length>0&&(be.Sheet=V.Sheets.length-1),V.Names.push(be);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?C+=n.slice(S,l.index):S=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;P.Interior=$c(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?PEe(L,M,n.slice(j,l.index)):j=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));o4e(de),W.push(de)}else c.push([l[3],!1]),u=$c(l[0]),de={a:u.Author};break;case"autofilter":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var Z=$c(l[0]);f["!autofilter"]={ref:og(Z.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return u7(n,r);var z=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:z=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:z=!1}break;case"excelworkbook":switch(l[3]){case"date1904":V.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:z=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:z=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(j,l.index)){case"SheetHidden":D.Hidden=1;break;case"SheetVeryHidden":D.Hidden=2;break}else j=l.index+l[0].length;break;case"header":f["!margins"]||Fm(f["!margins"]={},"xlml"),isNaN(+Fr(l[0]).Margin)||(f["!margins"].header=+Fr(l[0]).Margin);break;case"footer":f["!margins"]||Fm(f["!margins"]={},"xlml"),isNaN(+Fr(l[0]).Margin)||(f["!margins"].footer=+Fr(l[0]).Margin);break;case"pagemargins":var X=Fr(l[0]);f["!margins"]||Fm(f["!margins"]={},"xlml"),isNaN(+X.Top)||(f["!margins"].top=+X.Top),isNaN(+X.Left)||(f["!margins"].left=+X.Left),isNaN(+X.Right)||(f["!margins"].right=+X.Right),isNaN(+X.Bottom)||(f["!margins"].bottom=+X.Bottom);break;case"displayrighttoleft":V.Views||(V.Views=[]),V.Views[0]||(V.Views[0]={}),V.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:z=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:z=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:z=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:z=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:z=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:z=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:z=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:z=!1}break;case"smarttags":break;default:z=!1;break}if(z||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?n4e(E,M,R,n.slice(j,l.index)):(R=l,j=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var ve={};return!r.bookSheets&&!r.bookProps&&(ve.Sheets=d),ve.SheetNames=A,ve.Workbook=V,ve.SSF=ya(Pr),ve.Props=L,ve.Custprops=E,ve}function Fk(e,t){switch(R3(t=t||{}),t.type||"base64"){case"base64":return Oj(Dl(e),t);case"binary":case"buffer":case"file":return Oj(e,t);case"array":return Oj(Bf(e),t)}}function l4e(e,t){var r=[];return e.Props&&r.push(kEe(e.Props,t)),e.Custprops&&r.push(TEe(e.Props,e.Custprops)),r.join("")}function c4e(){return""}function u4e(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var s=[];s.push(rr("NumberFormat",null,{"ss:Format":Mn(Pr[n.numFmtId])}));var o={"ss:ID":"s"+(21+a)};r.push(rr("Style",s.join(""),o))}),rr("Styles",r.join(""))}function jZ(e){return rr("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+P3(e.Ref,{r:0,c:0})})}function d4e(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(jZ(a)))}return rr("Names",r.join(""))}function A4e(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],o=0;o<a.length;++o){var l=a[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||s.push(jZ(l)))}return s.join("")}function h4e(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(rr("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(rr("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(rr("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(rr("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(Di("ProtectContents","True")),e["!protect"].objects&&a.push(Di("ProtectObjects","True")),e["!protect"].scenarios&&a.push(Di("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(Di("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(Di("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){e["!protect"][o[0]]&&a.push("<"+o[1]+"/>")})),a.length==0?"":rr("WorksheetOptions",a.join(""),{xmlns:wl.x})}function f4e(e){return e.map(function(t){var r=O_e(t.t||""),n=rr("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return rr("Comment",n,{"ss:Author":t.a})}).join("")}function m4e(e,t,r,n,a,s,o){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+Mn(P3(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var c=Va(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=Mn(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=Mn(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=o.c||u[d].s.r!=o.r||(u[d].e.c>u[d].s.c&&(l["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(l["ss:MergeDown"]=u[d].e.r-u[d].s.r));var A="",f="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":A="Number",f=String(e.v);break;case"b":A="Boolean",f=e.v?"1":"0";break;case"e":A="Error",f=EA[e.v];break;case"d":A="DateTime",f=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Pr[14]);break;case"s":A="String",f=F_e(e.v||"");break}var h=Pf(n.cellXfs,e,n);l["ss:StyleID"]="s"+(21+h),l["ss:Index"]=o.c+1;var m=e.v!=null?f:"",p=e.t=="z"?"":'<Data ss:Type="'+A+'">'+m+"</Data>";return(e.c||[]).length>0&&(p+=f4e(e.c)),rr("Cell",p,l)}function p4e(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Pg(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function g4e(e,t,r,n){if(!e["!ref"])return"";var a=xn(e["!ref"]),s=e["!merges"]||[],o=0,l=[];e["!cols"]&&e["!cols"].forEach(function(g,x){ff(g);var y=!!g.width,b=vS(x,g),_={"ss:Index":x+1};y&&(_["ss:Width"]=b1(b.width)),g.hidden&&(_["ss:Hidden"]="1"),l.push(rr("Column",null,_))});for(var c=Array.isArray(e),u=a.s.r;u<=a.e.r;++u){for(var d=[p4e(u,(e["!rows"]||[])[u])],A=a.s.c;A<=a.e.c;++A){var f=!1;for(o=0;o!=s.length;++o)if(!(s[o].s.c>A)&&!(s[o].s.r>u)&&!(s[o].e.c<A)&&!(s[o].e.r<u)){(s[o].s.c!=A||s[o].s.r!=u)&&(f=!0);break}if(!f){var h={r:u,c:A},m=Tr(h),p=c?(e[u]||[])[A]:e[m];d.push(m4e(p,m,e,t,r,n,h))}}d.push("</Row>"),d.length>2&&l.push(d.join(""))}return l.join("")}function x4e(e,t,r){var n=[],a=r.SheetNames[e],s=r.Sheets[a],o=s?A4e(s,t,e,r):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=s?g4e(s,t,e,r):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(h4e(s,t,e,r)),n.join("")}function v4e(e,t){t||(t={}),e.SSF||(e.SSF=ya(Pr)),e.SSF&&(sx(),AS(e.SSF),t.revssf=fS(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],Pf(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(l4e(e,t)),r.push(c4e()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(rr("Worksheet",x4e(n,t,e),{"ss:Name":Mn(e.SheetNames[n])}));return r[2]=u4e(e,t),r[3]=d4e(e),bs+rr("Workbook",r.join(""),{xmlns:wl.ss,"xmlns:o":wl.o,"xmlns:x":wl.x,"xmlns:ss":wl.ss,"xmlns:dt":wl.dt,"xmlns:html":wl.html})}function y4e(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=dEe(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=AEe(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var b4e=[60,1084,2066,2165,2175];function w4e(e,t,r,n,a){var s=n,o=[],l=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(l)}o.push(l),r.l+=s;for(var c=Hd(r,r.l),u=Ok[c],d=0;u!=null&&b4e.indexOf(c)>-1;)s=Hd(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),l=r.slice(d,r.l+4+s),o.push(l),r.l+=4+s,u=Ok[c=Hd(r,r.l)];var A=ci(o);Fi(A,0);var f=0;A.lens=[];for(var h=0;h<o.length;++h)A.lens.push(f),f+=o[h].length;if(A.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+A.length+" < "+n;return t.f(A,A.length,a)}function Ou(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Pr[n])}catch(s){if(t.WTF)throw s}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||EA[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=m1(e.v):e.w=r0(e.v):e.w=Sc(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(s){if(t.WTF)throw s}if(t.cellDates&&n&&e.t=="n"&&ax(Pr[n]||String(n))){var a=xm(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function k2(e,t,r){return{v:e,ixfe:t,t:r}}function N4e(e,t){var r={opts:{}},n={},a=t.dense?[]:{},s={},o={},l=null,c=[],u="",d={},A,f="",h,m,p,g,x={},y=[],b,_,T=[],P=[],C={Sheets:[],WBProps:{date1904:!1},Views:[{}]},S={},I=function(xe){return xe<8?Pm[xe]:xe<64&&P[xe-8]||Pm[xe]},L=function(xe,ue,Ge){var Je=ue.XF.data;if(!(!Je||!Je.patternType||!Ge||!Ge.cellStyles)){ue.s={},ue.s.patternType=Je.patternType;var ht;(ht=y1(I(Je.icvFore)))&&(ue.s.fgColor={rgb:ht}),(ht=y1(I(Je.icvBack)))&&(ue.s.bgColor={rgb:ht})}},E=function(xe,ue,Ge){if(!(Ee>1)&&!(Ge.sheetRows&&xe.r>=Ge.sheetRows)){if(Ge.cellStyles&&ue.XF&&ue.XF.data&&L(xe,ue,Ge),delete ue.ixfe,delete ue.XF,A=xe,f=Tr(xe),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),xe.r<o.s.r&&(o.s.r=xe.r),xe.c<o.s.c&&(o.s.c=xe.c),xe.r+1>o.e.r&&(o.e.r=xe.r+1),xe.c+1>o.e.c&&(o.e.c=xe.c+1),Ge.cellFormula&&ue.f){for(var Je=0;Je<y.length;++Je)if(!(y[Je][0].s.c>xe.c||y[Je][0].s.r>xe.r)&&!(y[Je][0].e.c<xe.c||y[Je][0].e.r<xe.r)){ue.F=Kr(y[Je][0]),(y[Je][0].s.c!=xe.c||y[Je][0].s.r!=xe.r)&&delete ue.f,ue.f&&(ue.f=""+ao(y[Je][1],o,xe,J,j));break}}Ge.dense?(a[xe.r]||(a[xe.r]=[]),a[xe.r][xe.c]=ue):a[f]=ue}},j={enc:!1,sbcch:0,snames:[],sharedf:x,arrayf:y,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(j.password=t.password);var R,W=[],de=[],te=[],le=[],ce=!1,J=[];J.SheetNames=j.snames,J.sharedf=j.sharedf,J.arrayf=j.arrayf,J.names=[],J.XTI=[];var me=0,Ee=0,k=0,F=[],V=[],D;j.codepage=1200,Zc(1200);for(var M=!1;e.l<e.length-1;){var G=e.l,O=e.read_shift(2);if(O===0&&me===10)break;var K=e.l===e.length?0:e.read_shift(2),ee=Ok[O];if(ee&&ee.f){if(t.bookSheets&&me===133&&O!==133)break;if(me=O,ee.r===2||ee.r==12){var ne=e.read_shift(2);if(K-=2,!j.enc&&ne!==O&&((ne&255)<<8|ne>>8)!==O)throw new Error("rt mismatch: "+ne+"!="+O);ee.r==12&&(e.l+=10,K-=10)}var Q={};if(O===10?Q=ee.f(e,K,j):Q=w4e(O,ee,e,K,j),Ee==0&&[9,521,1033,2057].indexOf(me)===-1)continue;switch(O){case 34:r.opts.Date1904=C.WBProps.date1904=Q;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(j.enc||(e.l=0),j.enc=Q,!t.password)throw new Error("File is password-protected");if(Q.valid==null)throw new Error("Encryption scheme unsupported");if(!Q.valid)throw new Error("Password is incorrect");break;case 92:j.lastuser=Q;break;case 66:var be=Number(Q);switch(be){case 21010:be=1200;break;case 32768:be=1e4;break;case 32769:be=1252;break}Zc(j.codepage=be),M=!0;break;case 317:j.rrtabid=Q;break;case 25:j.winlocked=Q;break;case 439:r.opts.RefreshAll=Q;break;case 12:r.opts.CalcCount=Q;break;case 16:r.opts.CalcDelta=Q;break;case 17:r.opts.CalcIter=Q;break;case 13:r.opts.CalcMode=Q;break;case 14:r.opts.CalcPrecision=Q;break;case 95:r.opts.CalcSaveRecalc=Q;break;case 15:j.CalcRefMode=Q;break;case 2211:r.opts.FullCalc=Q;break;case 129:Q.fDialog&&(a["!type"]="dialog"),Q.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),Q.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:T.push(Q);break;case 430:J.push([Q]),J[J.length-1].XTI=[];break;case 35:case 547:J[J.length-1].push(Q);break;case 24:case 536:D={Name:Q.Name,Ref:ao(Q.rgce,o,null,J,j)},Q.itab>0&&(D.Sheet=Q.itab-1),J.names.push(D),J[0]||(J[0]=[],J[0].XTI=[]),J[J.length-1].push(Q),Q.Name=="_xlnm._FilterDatabase"&&Q.itab>0&&Q.rgce&&Q.rgce[0]&&Q.rgce[0][0]&&Q.rgce[0][0][0]=="PtgArea3d"&&(V[Q.itab-1]={ref:Kr(Q.rgce[0][0][1][2])});break;case 22:j.ExternCount=Q;break;case 23:J.length==0&&(J[0]=[],J[0].XTI=[]),J[J.length-1].XTI=J[J.length-1].XTI.concat(Q),J.XTI=J.XTI.concat(Q);break;case 2196:if(j.biff<8)break;D!=null&&(D.Comment=Q[1]);break;case 18:a["!protect"]=Q;break;case 19:Q!==0&&j.WTF&&console.error("Password verifier: "+Q);break;case 133:s[Q.pos]=Q,j.snames.push(Q.name);break;case 10:{if(--Ee)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,a["!ref"]=Kr(o),t.sheetRows&&t.sheetRows<=o.e.r){var Z=o.e.r;o.e.r=t.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=Kr(o),o.e.r=Z}o.e.r++,o.e.c++}W.length>0&&(a["!merges"]=W),de.length>0&&(a["!objects"]=de),te.length>0&&(a["!cols"]=te),le.length>0&&(a["!rows"]=le),C.Sheets.push(S)}u===""?d=a:n[u]=a,a=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(j.biff===8&&(j.biff={9:2,521:3,1033:4}[O]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[Q.BIFFVer]||8),j.biffguess=Q.BIFFVer==0,Q.BIFFVer==0&&Q.dt==4096&&(j.biff=5,M=!0,Zc(j.codepage=28591)),j.biff==8&&Q.BIFFVer==0&&Q.dt==16&&(j.biff=2),Ee++)break;if(a=t.dense?[]:{},j.biff<8&&!M&&(M=!0,Zc(j.codepage=t.codepage||1252)),j.biff<5||Q.BIFFVer==0&&Q.dt==4096){u===""&&(u="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var z={pos:e.l-K,name:u};s[z.pos]=z,j.snames.push(u)}else u=(s[G]||{name:""}).name;Q.dt==32&&(a["!type"]="chart"),Q.dt==64&&(a["!type"]="macro"),W=[],de=[],j.arrayf=y=[],te=[],le=[],ce=!1,S={Hidden:(s[G]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(t.dense?(a[Q.r]||[])[Q.c]:a[Tr({c:Q.c,r:Q.r})])&&++Q.c,b={ixfe:Q.ixfe,XF:T[Q.ixfe]||{},v:Q.val,t:"n"},k>0&&(b.z=F[b.ixfe>>8&63]),Ou(b,t,r.opts.Date1904),E({c:Q.c,r:Q.r},b,t);break;case 5:case 517:b={ixfe:Q.ixfe,XF:T[Q.ixfe],v:Q.val,t:Q.t},k>0&&(b.z=F[b.ixfe>>8&63]),Ou(b,t,r.opts.Date1904),E({c:Q.c,r:Q.r},b,t);break;case 638:b={ixfe:Q.ixfe,XF:T[Q.ixfe],v:Q.rknum,t:"n"},k>0&&(b.z=F[b.ixfe>>8&63]),Ou(b,t,r.opts.Date1904),E({c:Q.c,r:Q.r},b,t);break;case 189:for(var X=Q.c;X<=Q.C;++X){var ve=Q.rkrec[X-Q.c][0];b={ixfe:ve,XF:T[ve],v:Q.rkrec[X-Q.c][1],t:"n"},k>0&&(b.z=F[b.ixfe>>8&63]),Ou(b,t,r.opts.Date1904),E({c:X,r:Q.r},b,t)}break;case 6:case 518:case 1030:{if(Q.val=="String"){l=Q;break}if(b=k2(Q.val,Q.cell.ixfe,Q.tt),b.XF=T[b.ixfe],t.cellFormula){var re=Q.formula;if(re&&re[0]&&re[0][0]&&re[0][0][0]=="PtgExp"){var Ne=re[0][0][1][0],Me=re[0][0][1][1],Ve=Tr({r:Ne,c:Me});x[Ve]?b.f=""+ao(Q.formula,o,Q.cell,J,j):b.F=((t.dense?(a[Ne]||[])[Me]:a[Ve])||{}).F}else b.f=""+ao(Q.formula,o,Q.cell,J,j)}k>0&&(b.z=F[b.ixfe>>8&63]),Ou(b,t,r.opts.Date1904),E(Q.cell,b,t),l=Q}break;case 7:case 519:if(l)l.val=Q,b=k2(Q,l.cell.ixfe,"s"),b.XF=T[b.ixfe],t.cellFormula&&(b.f=""+ao(l.formula,o,l.cell,J,j)),k>0&&(b.z=F[b.ixfe>>8&63]),Ou(b,t,r.opts.Date1904),E(l.cell,b,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{y.push(Q);var nt=Tr(Q[0].s);if(h=t.dense?(a[Q[0].s.r]||[])[Q[0].s.c]:a[nt],t.cellFormula&&h){if(!l||!nt||!h)break;h.f=""+ao(Q[1],o,Q[0],J,j),h.F=Kr(Q[0])}}break;case 1212:{if(!t.cellFormula)break;if(f){if(!l)break;x[Tr(l.cell)]=Q[0],h=t.dense?(a[l.cell.r]||[])[l.cell.c]:a[Tr(l.cell)],(h||{}).f=""+ao(Q[0],o,A,J,j)}}break;case 253:b=k2(c[Q.isst].t,Q.ixfe,"s"),c[Q.isst].h&&(b.h=c[Q.isst].h),b.XF=T[b.ixfe],k>0&&(b.z=F[b.ixfe>>8&63]),Ou(b,t,r.opts.Date1904),E({c:Q.c,r:Q.r},b,t);break;case 513:t.sheetStubs&&(b={ixfe:Q.ixfe,XF:T[Q.ixfe],t:"z"},k>0&&(b.z=F[b.ixfe>>8&63]),Ou(b,t,r.opts.Date1904),E({c:Q.c,r:Q.r},b,t));break;case 190:if(t.sheetStubs)for(var st=Q.c;st<=Q.C;++st){var lt=Q.ixfe[st-Q.c];b={ixfe:lt,XF:T[lt],t:"z"},k>0&&(b.z=F[b.ixfe>>8&63]),Ou(b,t,r.opts.Date1904),E({c:st,r:Q.r},b,t)}break;case 214:case 516:case 4:b=k2(Q.val,Q.ixfe,"s"),b.XF=T[b.ixfe],k>0&&(b.z=F[b.ixfe>>8&63]),Ou(b,t,r.opts.Date1904),E({c:Q.c,r:Q.r},b,t);break;case 0:case 512:Ee===1&&(o=Q);break;case 252:c=Q;break;case 1054:if(j.biff==4){F[k++]=Q[1];for(var bt=0;bt<k+163&&Pr[bt]!=Q[1];++bt);bt>=163&&eA(Q[1],k+163)}else eA(Q[1],Q[0]);break;case 30:{F[k++]=Q;for(var ot=0;ot<k+163&&Pr[ot]!=Q;++ot);ot>=163&&eA(Q,k+163)}break;case 229:W=W.concat(Q);break;case 93:de[Q.cmo[0]]=j.lastobj=Q;break;case 438:j.lastobj.TxO=Q;break;case 127:j.lastobj.ImData=Q;break;case 440:for(g=Q[0].s.r;g<=Q[0].e.r;++g)for(p=Q[0].s.c;p<=Q[0].e.c;++p)h=t.dense?(a[g]||[])[p]:a[Tr({c:p,r:g})],h&&(h.l=Q[1]);break;case 2048:for(g=Q[0].s.r;g<=Q[0].e.r;++g)for(p=Q[0].s.c;p<=Q[0].e.c;++p)h=t.dense?(a[g]||[])[p]:a[Tr({c:p,r:g})],h&&h.l&&(h.l.Tooltip=Q[1]);break;case 28:{if(j.biff<=5&&j.biff>=2)break;h=t.dense?(a[Q[0].r]||[])[Q[0].c]:a[Tr(Q[0])];var Le=de[Q[2]];h||(t.dense?(a[Q[0].r]||(a[Q[0].r]=[]),h=a[Q[0].r][Q[0].c]={t:"z"}):h=a[Tr(Q[0])]={t:"z"},o.e.r=Math.max(o.e.r,Q[0].r),o.s.r=Math.min(o.s.r,Q[0].r),o.e.c=Math.max(o.e.c,Q[0].c),o.s.c=Math.min(o.s.c,Q[0].c)),h.c||(h.c=[]),m={a:Q[1],t:Le.TxO.t},h.c.push(m)}break;case 2173:uje(T[Q.ixfe],Q.ext);break;case 125:{if(!j.cellStyles)break;for(;Q.e>=Q.s;)te[Q.e--]={width:Q.w/256,level:Q.level||0,hidden:!!(Q.flags&1)},ce||(ce=!0,I3(Q.w/256)),ff(te[Q.e+1])}break;case 520:{var Ze={};Q.level!=null&&(le[Q.r]=Ze,Ze.level=Q.level),Q.hidden&&(le[Q.r]=Ze,Ze.hidden=!0),Q.hpt&&(le[Q.r]=Ze,Ze.hpt=Q.hpt,Ze.hpx=Pg(Q.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||Fm(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[O]]=Q;break;case 161:a["!margins"]||Fm(a["!margins"]={}),a["!margins"].header=Q.header,a["!margins"].footer=Q.footer;break;case 574:Q.RTL&&(C.Views[0].RTL=!0);break;case 146:P=Q;break;case 2198:R=Q;break;case 140:_=Q;break;case 442:u?S.CodeName=Q||S.name:C.WBProps.CodeName=Q||"ThisWorkbook";break}}else ee||console.error("Missing Info for XLS Record 0x"+O.toString(16)),e.l+=K}return r.SheetNames=as(s).sort(function(ye,xe){return Number(ye)-Number(xe)}).map(function(ye){return s[ye].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&V.forEach(function(ye,xe){r.Sheets[r.SheetNames[xe]]["!autofilter"]=ye}),r.Strings=c,r.SSF=ya(Pr),j.enc&&(r.Encryption=j.enc),R&&(r.Themes=R),r.Metadata={},_!==void 0&&(r.Metadata.Country=_),J.names.length>0&&(C.Names=J.names),r.Workbook=C,r}var Ny={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function C4e(e,t,r){var n=Ir.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=UQ(n,Ik,Ny.DSI);for(var s in a)t[s]=a[s]}catch(u){if(r.WTF)throw u}var o=Ir.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=UQ(o,Bk,Ny.SI);for(var c in l)t[c]==null&&(t[c]=l[c])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(BY(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function _4e(e,t){var r=[],n=[],a=[],s=0,o,l=pQ(Ik,"n"),c=pQ(Bk,"n");if(e.Props)for(o=as(e.Props),s=0;s<o.length;++s)(Object.prototype.hasOwnProperty.call(l,o[s])?r:Object.prototype.hasOwnProperty.call(c,o[s])?n:a).push([o[s],e.Props[o[s]]]);if(e.Custprops)for(o=as(e.Custprops),s=0;s<o.length;++s)Object.prototype.hasOwnProperty.call(e.Props||{},o[s])||(Object.prototype.hasOwnProperty.call(l,o[s])?r:Object.prototype.hasOwnProperty.call(c,o[s])?n:a).push([o[s],e.Custprops[o[s]]]);var u=[];for(s=0;s<a.length;++s)DY.indexOf(a[s][0])>-1||IY.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&Ir.utils.cfb_add(t,"/SummaryInformation",QQ(n,Ny.SI,c,Bk)),(r.length||u.length)&&Ir.utils.cfb_add(t,"/DocumentSummaryInformation",QQ(r,Ny.DSI,l,Ik,u.length?u:null,Ny.UDI))}function PZ(e,t){t||(t={}),R3(t),a3(),t.codepage&&n3(t.codepage);var r,n;if(e.FullPaths){if(Ir.find(e,"/encryption"))throw new Error("File is password-protected");r=Ir.find(e,"!CompObj"),n=Ir.find(e,"/Workbook")||Ir.find(e,"/Book")}else{switch(t.type){case"base64":e=Cl(Dl(e));break;case"binary":e=Cl(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Fi(e,0),n={content:e}}var a,s;if(r&&y4e(r),t.bookProps&&!t.bookSheets)a={};else{var o=Wr?"buffer":"array";if(n&&n.content)a=N4e(n.content,t);else if((s=Ir.find(e,"PerfectOffice_MAIN"))&&s.content)a=Tm.to_workbook(s.content,(t.type=o,t));else if((s=Ir.find(e,"NativeContent_MAIN"))&&s.content)a=Tm.to_workbook(s.content,(t.type=o,t));else throw(s=Ir.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Ir.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=Lje(e))}var l={};return e.FullPaths&&C4e(e,l,t),a.Props=a.Custprops=l,t.bookFiles&&(a.cfb=e),a}function E4e(e,t){var r=t||{},n=Ir.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Ir.utils.cfb_add(n,a,kZ(e,r)),r.biff==8&&(e.Props||e.Custprops)&&_4e(e,n),r.biff==8&&e.vbaraw&&Mje(n,Ir.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var C1={0:{f:XPe},1:{f:ake},2:{f:Nke},3:{f:Ake},4:{f:lke},5:{f:yke},6:{f:Ike},7:{f:pke},8:{f:Oke},9:{f:Fke},10:{f:kke},11:{f:Tke},12:{f:ike},13:{f:_ke},14:{f:fke},15:{f:uke},16:{f:NZ},17:{f:jke},18:{f:xke},19:{f:x3},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:jTe},40:{},42:{},43:{f:IBe},44:{f:EBe},45:{f:PBe},46:{f:TBe},47:{f:kBe},48:{},49:{f:Z_e},50:{},51:{f:hje},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:GY},62:{f:Ske},63:{f:wje},64:{f:Jke},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:ho,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Gke},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:rke},148:{f:ZPe,p:16},151:{f:Qke},152:{},153:{f:STe},154:{},155:{},156:{f:_Te},157:{},158:{},159:{T:1,f:HIe},160:{T:-1},161:{T:1,f:k0},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Dke},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:dje},336:{T:-1},337:{f:pje,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Sk},357:{},358:{},359:{},360:{T:1},361:{},362:{f:qY},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Vke},427:{f:Hke},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Kke},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:tke},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Mke},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Sk},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Tje},633:{T:1},634:{T:-1},635:{T:1,f:Pje},636:{T:-1},637:{f:nEe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:fTe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Yke},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},Ok={6:{f:Tj},10:{f:lh},12:{f:_s},13:{f:_s},14:{f:As},15:{f:As},16:{f:oo},17:{f:As},18:{f:As},19:{f:_s},20:{f:GQ},21:{f:GQ},23:{f:qY},24:{f:WQ},25:{f:As},26:{},27:{},28:{f:YSe},29:{},34:{f:As},35:{f:zQ},38:{f:oo},39:{f:oo},40:{f:oo},41:{f:oo},42:{f:As},43:{f:As},47:{f:uBe},49:{f:_Se},51:{f:_s},60:{},61:{f:ySe},64:{f:As},65:{f:CSe},66:{f:_s},77:{},80:{},81:{},82:{},85:{f:_s},89:{},90:{},91:{},92:{f:cSe},93:{f:tIe},94:{},95:{f:As},96:{},97:{},99:{f:As},125:{f:GY},128:{f:USe},129:{f:dSe},130:{f:_s},131:{f:As},132:{f:As},133:{f:ASe},134:{},140:{f:cIe},141:{f:_s},144:{},146:{f:AIe},151:{},152:{},153:{},154:{},155:{},156:{f:_s},157:{},158:{},160:{f:vIe},161:{f:mIe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:DSe},190:{f:RSe},193:{f:lh},197:{},198:{},199:{},200:{},201:{},202:{f:As},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:_s},220:{},221:{f:As},222:{},224:{f:MSe},225:{f:lSe},226:{f:lh},227:{},229:{f:ZSe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:fSe},253:{f:SSe},255:{f:pSe},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:RY},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:As},353:{f:lh},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:KSe},431:{f:As},432:{},433:{},434:{},437:{},438:{f:aIe},439:{f:As},440:{f:sIe},441:{},442:{f:yb},443:{},444:{f:_s},445:{},446:{},448:{f:lh},449:{f:vSe,r:2},450:{f:lh},512:{f:$Q},513:{f:xIe},515:{f:HSe},516:{f:BSe},517:{f:qQ},519:{f:yIe},520:{f:gSe},523:{},545:{f:XQ},549:{f:HQ},566:{},574:{f:wSe},638:{f:OSe},659:{},1048:{},1054:{f:PSe},1084:{},1212:{f:WSe},2048:{f:oIe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:B2},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:lh},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:hIe,r:12},2173:{f:cje,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:As,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:zSe,r:12},2197:{},2198:{f:nje,r:12},2199:{},2200:{},2201:{},2202:{f:XSe,r:12},2203:{f:lh},2204:{},2205:{},2206:{},2207:{},2211:{f:xSe},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:_s},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:pIe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:dIe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:$Q},1:{},2:{f:_Ie},3:{f:NIe},4:{f:wIe},5:{f:qQ},7:{f:SIe},8:{},9:{f:B2},11:{},22:{f:_s},30:{f:TSe},31:{},32:{},33:{f:XQ},36:{},37:{f:HQ},50:{f:IIe},62:{},52:{},67:{},68:{f:_s},69:{},86:{},126:{},127:{f:bIe},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:BIe},223:{},234:{},354:{},421:{},518:{f:Tj},521:{f:B2},536:{f:WQ},547:{f:zQ},561:{},579:{},1030:{f:Tj},1033:{f:B2},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function nr(e,t,r,n){var a=t;if(!isNaN(a)){var s=n||(r||[]).length||0,o=e.next(4);o.write_shift(2,a),o.write_shift(2,s),s>0&&m3(r)&&e.push(r)}}function S4e(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return nr(e,t,r,a);var s=t;if(!isNaN(s)){for(var o=r.parts||[],l=0,c=0,u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;var d=e.next(4);for(d.write_shift(2,s),d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<a;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function Cb(e,t,r){return e||(e=kt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function I4e(e,t,r,n){var a=kt(9);return Cb(a,e,t),LY(r,n||"b",a),a}function B4e(e,t,r){var n=kt(8+2*r.length);return Cb(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function j4e(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?Gs(va(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?nr(e,2,EIe(r,n,a)):nr(e,3,CIe(r,n,a));return;case"b":case"e":nr(e,5,I4e(r,n,t.v,t.t));return;case"s":case"str":nr(e,4,B4e(r,n,(t.v||"").slice(0,255)));return}nr(e,1,Cb(null,r,n))}function P4e(e,t,r,n){var a=Array.isArray(t),s=xn(t["!ref"]||"A1"),o,l="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),o=Kr(s)}for(var u=s.s.r;u<=s.e.r;++u){l=vs(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(c[d]=Qa(d)),o=c[d]+l;var A=a?(t[u]||[])[d]:t[o];A&&j4e(e,A,u,d)}}}function k4e(e,t){for(var r=t||{},n=el(),a=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return nr(n,r.biff==4?1033:r.biff==3?521:9,_3(e,16,r)),P4e(n,e.Sheets[e.SheetNames[a]],a,r),nr(n,10),n.end()}function T4e(e,t,r){nr(e,49,ESe({sz:12,name:"Arial"},r))}function F4e(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&nr(e,1054,kSe(a,t[a],r))})}function O4e(e,t){var r=kt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),nr(e,2151,r),r=kt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),HY(xn(t["!ref"]||"A1"),r),r.write_shift(4,4),nr(e,2152,r)}function D4e(e,t){for(var r=0;r<16;++r)nr(e,224,KQ({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){nr(e,224,KQ(n,0,t))})}function R4e(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];nr(e,440,iIe(n)),n[1].Tooltip&&nr(e,2048,lIe(n))}delete t["!links"]}function L4e(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&nr(e,125,fIe(vS(a,n),a))})}}function M4e(e,t,r,n,a){var s=16+Pf(a.cellXfs,t,a);if(t.v==null&&!t.bf){nr(e,513,i0(r,n,s));return}if(t.bf)nr(e,6,dPe(t,r,n,a,s));else switch(t.t){case"d":case"n":var o=t.t=="d"?Gs(va(t.v)):t.v;nr(e,515,$Se(r,n,o,s));break;case"b":case"e":nr(e,517,VSe(r,n,t.v,s,a,t.t));break;case"s":case"str":if(a.bookSST){var l=T3(a.Strings,t.v,a.revStrings);nr(e,253,ISe(r,n,l,s))}else nr(e,516,jSe(r,n,(t.v||"").slice(0,255),s,a));break;default:nr(e,513,i0(r,n,s))}}function U4e(e,t,r){var n=el(),a=r.SheetNames[e],s=r.Sheets[a]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(s),u=t.biff==8,d,A="",f=[],h=xn(s["!ref"]||"A1"),m=u?65536:16384;if(h.e.c>255||h.e.r>=m){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");h.e.c=Math.min(h.e.c,255),h.e.r=Math.min(h.e.c,m-1)}nr(n,2057,_3(r,16,t)),nr(n,13,Ac(1)),nr(n,12,Ac(100)),nr(n,15,Eo(!0)),nr(n,17,Eo(!1)),nr(n,16,a0(.001)),nr(n,95,Eo(!0)),nr(n,42,Eo(!1)),nr(n,43,Eo(!1)),nr(n,130,Ac(1)),nr(n,128,QSe()),nr(n,131,Eo(!1)),nr(n,132,Eo(!1)),u&&L4e(n,s["!cols"]),nr(n,512,FSe(h,t)),u&&(s["!links"]=[]);for(var p=h.s.r;p<=h.e.r;++p){A=vs(p);for(var g=h.s.c;g<=h.e.c;++g){p===h.s.r&&(f[g]=Qa(g)),d=f[g]+A;var x=c?(s[p]||[])[g]:s[d];x&&(M4e(n,x,p,g,t),u&&x.l&&s["!links"].push([d,x.l]))}}var y=l.CodeName||l.name||a;return u&&nr(n,574,NSe((o.Views||[])[0])),u&&(s["!merges"]||[]).length&&nr(n,229,eIe(s["!merges"])),u&&R4e(n,s),nr(n,442,MY(y)),u&&O4e(n,s),nr(n,10),n.end()}function Q4e(e,t,r){var n=el(),a=(e||{}).Workbook||{},s=a.Sheets||[],o=a.WBProps||{},l=r.biff==8,c=r.biff==5;if(nr(n,2057,_3(e,5,r)),r.bookType=="xla"&&nr(n,135),nr(n,225,l?Ac(1200):null),nr(n,193,VEe(2)),c&&nr(n,191),c&&nr(n,192),nr(n,226),nr(n,92,uSe("SheetJS",r)),nr(n,66,Ac(l?1200:1252)),l&&nr(n,353,Ac(0)),l&&nr(n,448),nr(n,317,gIe(e.SheetNames.length)),l&&e.vbaraw&&nr(n,211),l&&e.vbaraw){var u=o.CodeName||"ThisWorkbook";nr(n,442,MY(u))}nr(n,156,Ac(17)),nr(n,25,Eo(!1)),nr(n,18,Eo(!1)),nr(n,19,Ac(0)),l&&nr(n,431,Eo(!1)),l&&nr(n,444,Ac(0)),nr(n,61,bSe()),nr(n,64,Eo(!1)),nr(n,141,Ac(0)),nr(n,34,Eo(vTe(e)=="true")),nr(n,14,Eo(!0)),l&&nr(n,439,Eo(!1)),nr(n,218,Ac(0)),T4e(n,e,r),F4e(n,e.SSF,r),D4e(n,r),l&&nr(n,352,Eo(!1));var d=n.end(),A=el();l&&nr(A,140,uIe()),l&&r.Strings&&S4e(A,252,mSe(r.Strings)),nr(A,10);var f=A.end(),h=el(),m=0,p=0;for(p=0;p<e.SheetNames.length;++p)m+=(l?12:11)+(l?2:1)*e.SheetNames[p].length;var g=d.length+m+f.length;for(p=0;p<e.SheetNames.length;++p){var x=s[p]||{};nr(h,133,hSe({pos:g,hs:x.Hidden||0,dt:0,name:e.SheetNames[p]},r)),g+=t[p].length}var y=h.end();if(m!=y.length)throw new Error("BS8 "+m+" != "+y.length);var b=[];return d.length&&b.push(d),y.length&&b.push(y),f.length&&b.push(f),ci(b)}function V4e(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=ya(Pr)),e&&e.SSF&&(sx(),AS(e.SSF),r.revssf=fS(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,L3(r),r.cellXfs=[],Pf(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=U4e(a,r,e);return n.unshift(Q4e(e,n,r)),ci(n)}function kZ(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=tl(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=t||{};switch(s.biff||2){case 8:case 5:return V4e(e,t);case 4:case 3:case 2:return k4e(e,t)}throw new Error("invalid type "+s.bookType+" for BIFF")}function i7(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var a=e.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=e.match(/<\/table/i),o=a.index,l=s&&s.index||e.length,c=E_e(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,A=0,f=0,h={s:{r:1e7,c:1e7},e:{r:0,c:0}},m=[];for(o=0;o<c.length;++o){var p=c[o].trim(),g=p.slice(0,3).toLowerCase();if(g=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(g!="<td"&&g!="<th")){var x=p.split(/<\/t[dh]>/i);for(l=0;l<x.length;++l){var y=x[l].trim();if(y.match(/<t[dh]/i)){for(var b=y,_=0;b.charAt(0)=="<"&&(_=b.indexOf(">"))>-1;)b=b.slice(_+1);for(var T=0;T<m.length;++T){var P=m[T];P.s.c==d&&P.s.r<u&&u<=P.e.r&&(d=P.e.c+1,T=-1)}var C=Fr(y.slice(0,y.indexOf(">")));f=C.colspan?+C.colspan:1,((A=+C.rowspan)>1||f>1)&&m.push({s:{r:u,c:d},e:{r:u+(A||1)-1,c:d+f-1}});var S=C.t||C["data-t"]||"";if(!b.length){d+=f;continue}if(b=rY(b),h.s.r>u&&(h.s.r=u),h.e.r<u&&(h.e.r=u),h.s.c>d&&(h.s.c=d),h.e.c<d&&(h.e.c=d),!b.length){d+=f;continue}var I={t:"s",v:b};r.raw||!b.trim().length||S=="s"||(b==="TRUE"?I={t:"b",v:!0}:b==="FALSE"?I={t:"b",v:!1}:isNaN(su(b))?isNaN(Bg(b).getDate())||(I={t:"d",v:va(b)},r.cellDates||(I={t:"n",v:Gs(I.v)}),I.z=r.dateNF||Pr[14]):I={t:"n",v:su(b)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=I):n[Tr({r:u,c:d})]=I,d+=f}}}}return n["!ref"]=Kr(h),m.length&&(n["!merges"]=m),n}function H4e(e,t,r,n){for(var a=e["!merges"]||[],s=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>o)&&!(a[u].e.r<r||a[u].e.c<o)){if(a[u].s.r<r||a[u].s.c<o){l=-1;break}l=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(l<0)){var d=Tr({r,c:o}),A=n.dense?(e[r]||[])[o]:e[d],f=A&&A.v!=null&&(A.h||A3(A.w||(AA(A),A.w)||""))||"",h={};l>1&&(h.rowspan=l),c>1&&(h.colspan=c),n.editable?f='<span contenteditable="true">'+f+"</span>":A&&(h["data-t"]=A&&A.t||"z",A.v!=null&&(h["data-v"]=A.v),A.z!=null&&(h["data-z"]=A.z),A.l&&(A.l.Target||"#").charAt(0)!="#"&&(f='<a href="'+A.l.Target+'">'+f+"</a>")),h.id=(n.id||"sjs")+"-"+d,s.push(rr("td",f,h))}}var m="<tr>";return m+s.join("")+"</tr>"}var $4e='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',K4e="</body></html>";function q4e(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return jf(i7(r[0],t),t);var n=Q3();return r.forEach(function(a,s){V3(n,i7(a,t),"Sheet"+(s+1))}),n}function G4e(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function TZ(e,t){var r=t||{},n=r.header!=null?r.header:$4e,a=r.footer!=null?r.footer:K4e,s=[n],o=tl(e["!ref"]);r.dense=Array.isArray(e),s.push(G4e(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)s.push(H4e(e,o,l,r));return s.push("</table>"+a),s.join("")}function FZ(e,t,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var o=typeof n.origin=="string"?Va(n.origin):n.origin;a=o.r,s=o.c}var l=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(e["!ref"]){var d=tl(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var A=[],f=0,h=e["!rows"]||(e["!rows"]=[]),m=0,p=0,g=0,x=0,y=0,b=0;for(e["!cols"]||(e["!cols"]=[]);m<l.length&&p<c;++m){var _=l[m];if(o7(_)){if(n.display)continue;h[p]={hidden:!0}}var T=_.children;for(g=x=0;g<T.length;++g){var P=T[g];if(!(n.display&&o7(P))){var C=P.hasAttribute("data-v")?P.getAttribute("data-v"):P.hasAttribute("v")?P.getAttribute("v"):rY(P.innerHTML),S=P.getAttribute("data-z")||P.getAttribute("z");for(f=0;f<A.length;++f){var I=A[f];I.s.c==x+s&&I.s.r<p+a&&p+a<=I.e.r&&(x=I.e.c+1-s,f=-1)}b=+P.getAttribute("colspan")||1,((y=+P.getAttribute("rowspan")||1)>1||b>1)&&A.push({s:{r:p+a,c:x+s},e:{r:p+a+(y||1)-1,c:x+s+(b||1)-1}});var L={t:"s",v:C},E=P.getAttribute("data-t")||P.getAttribute("t")||"";C!=null&&(C.length==0?L.t=E||"z":n.raw||C.trim().length==0||E=="s"||(C==="TRUE"?L={t:"b",v:!0}:C==="FALSE"?L={t:"b",v:!1}:isNaN(su(C))?isNaN(Bg(C).getDate())||(L={t:"d",v:va(C)},n.cellDates||(L={t:"n",v:Gs(L.v)}),L.z=n.dateNF||Pr[14]):L={t:"n",v:su(C)})),L.z===void 0&&S!=null&&(L.z=S);var j="",R=P.getElementsByTagName("A");if(R&&R.length)for(var W=0;W<R.length&&!(R[W].hasAttribute("href")&&(j=R[W].getAttribute("href"),j.charAt(0)!="#"));++W);j&&j.charAt(0)!="#"&&(L.l={Target:j}),n.dense?(e[p+a]||(e[p+a]=[]),e[p+a][x+s]=L):e[Tr({c:x+s,r:p+a})]=L,u.e.c<x+s&&(u.e.c=x+s),x+=b}}++p}return A.length&&(e["!merges"]=(e["!merges"]||[]).concat(A)),u.e.r=Math.max(u.e.r,p-1+a),e["!ref"]=Kr(u),p>=c&&(e["!fullref"]=Kr((u.e.r=l.length-m+p-1+a,u))),e}function OZ(e,t){var r=t||{},n=r.dense?[]:{};return FZ(n,e,t)}function z4e(e,t){return jf(OZ(e,t),t)}function o7(e){var t="",r=W4e(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function W4e(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function X4e(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=gn(t.replace(/<[^>]*>/g,""));return[r]}var l7={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function DZ(e,t){var r=t||{},n=h3(e),a=[],s,o,l={name:""},c="",u=0,d,A,f={},h=[],m=r.dense?[]:{},p,g,x={value:""},y="",b=0,_=[],T=-1,P=-1,C={s:{r:1e6,c:1e7},e:{r:0,c:0}},S=0,I={},L=[],E={},j=0,R=0,W=[],de=1,te=1,le=[],ce={Names:[]},J={},me=["",""],Ee=[],k={},F="",V=0,D=!1,M=!1,G=0;for(x1.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");p=x1.exec(n);)switch(p[3]=p[3].replace(/_.*$/,"")){case"table":case"":p[1]==="/"?(C.e.c>=C.s.c&&C.e.r>=C.s.r?m["!ref"]=Kr(C):m["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=C.e.r&&(m["!fullref"]=m["!ref"],C.e.r=r.sheetRows-1,m["!ref"]=Kr(C)),L.length&&(m["!merges"]=L),W.length&&(m["!rows"]=W),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),h.push(d.name),f[d.name]=m,M=!1):p[0].charAt(p[0].length-2)!=="/"&&(d=Fr(p[0],!1),T=P=-1,C.s.r=C.s.c=1e7,C.e.r=C.e.c=0,m=r.dense?[]:{},L=[],W=[],M=!0);break;case"table-row-group":p[1]==="/"?--S:++S;break;case"table-row":case"":if(p[1]==="/"){T+=de,de=1;break}if(A=Fr(p[0],!1),A.?T=A.-1:T==-1&&(T=0),de=+A["number-rows-repeated"]||1,de<10)for(G=0;G<de;++G)S>0&&(W[T+G]={level:S});P=-1;break;case"covered-table-cell":p[1]!=="/"&&++P,r.sheetStubs&&(r.dense?(m[T]||(m[T]=[]),m[T][P]={t:"z"}):m[Tr({r:T,c:P})]={t:"z"}),y="",_=[];break;case"table-cell":case"":if(p[0].charAt(p[0].length-2)==="/")++P,x=Fr(p[0],!1),te=parseInt(x["number-columns-repeated"]||"1",10),g={t:"z",v:null},x.formula&&r.cellFormula!=!1&&(g.f=n7(gn(x.formula))),(x.||x["value-type"])=="string"&&(g.t="s",g.v=gn(x["string-value"]||""),r.dense?(m[T]||(m[T]=[]),m[T][P]=g):m[Tr({r:T,c:P})]=g),P+=te-1;else if(p[1]!=="/"){++P,y="",b=0,_=[],te=1;var O=de?T+de-1:T;if(P>C.e.c&&(C.e.c=P),P<C.s.c&&(C.s.c=P),T<C.s.r&&(C.s.r=T),O>C.e.r&&(C.e.r=O),x=Fr(p[0],!1),Ee=[],k={},g={t:x.||x["value-type"],v:null},r.cellFormula)if(x.formula&&(x.formula=gn(x.formula)),x["number-matrix-columns-spanned"]&&x["number-matrix-rows-spanned"]&&(j=parseInt(x["number-matrix-rows-spanned"],10)||0,R=parseInt(x["number-matrix-columns-spanned"],10)||0,E={s:{r:T,c:P},e:{r:T+j-1,c:P+R-1}},g.F=Kr(E),le.push([E,g.F])),x.formula)g.f=n7(x.formula);else for(G=0;G<le.length;++G)T>=le[G][0].s.r&&T<=le[G][0].e.r&&P>=le[G][0].s.c&&P<=le[G][0].e.c&&(g.F=le[G][1]);switch((x["number-columns-spanned"]||x["number-rows-spanned"])&&(j=parseInt(x["number-rows-spanned"],10)||0,R=parseInt(x["number-columns-spanned"],10)||0,E={s:{r:T,c:P},e:{r:T+j-1,c:P+R-1}},L.push(E)),x["number-columns-repeated"]&&(te=parseInt(x["number-columns-repeated"],10)),g.t){case"boolean":g.t="b",g.v=ma(x["boolean-value"]);break;case"float":g.t="n",g.v=parseFloat(x.value);break;case"percentage":g.t="n",g.v=parseFloat(x.value);break;case"currency":g.t="n",g.v=parseFloat(x.value);break;case"date":g.t="d",g.v=va(x["date-value"]),r.cellDates||(g.t="n",g.v=Gs(g.v)),g.z="m/d/yy";break;case"time":g.t="n",g.v=N_e(x["time-value"])/86400,r.cellDates&&(g.t="d",g.v=mS(g.v)),g.z="HH:MM:SS";break;case"number":g.t="n",g.v=parseFloat(x.);break;default:if(g.t==="string"||g.t==="text"||!g.t)g.t="s",x["string-value"]!=null&&(y=gn(x["string-value"]),_=[]);else throw new Error("Unsupported value type "+g.t)}}else{if(D=!1,g.t==="s"&&(g.v=y||"",_.length&&(g.R=_),D=b==0),J.Target&&(g.l=J),Ee.length>0&&(g.c=Ee,Ee=[]),y&&r.cellText!==!1&&(g.w=y),D&&(g.t="z",delete g.v),(!D||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=T))for(var K=0;K<de;++K){if(te=parseInt(x["number-columns-repeated"]||"1",10),r.dense)for(m[T+K]||(m[T+K]=[]),m[T+K][P]=K==0?g:ya(g);--te>0;)m[T+K][P+te]=ya(g);else for(m[Tr({r:T+K,c:P})]=g;--te>0;)m[Tr({r:T+K,c:P+te})]=ya(g);C.e.c<=P&&(C.e.c=P)}te=parseInt(x["number-columns-repeated"]||"1",10),P+=te-1,te=0,g={},y="",_=[]}J={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!0]);break;case"annotation":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s;k.t=y,_.length&&(k.R=_),k.a=F,Ee.push(k)}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!1]);F="",V=0,y="",b=0,_=[];break;case"creator":p[1]==="/"?F=n.slice(V,p.index):V=p.index+p[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!1]);y="",b=0,_=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(p[1]==="/"){if(I[l.name]=c,(s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&(c="",l=Fr(p[0],!1),a.push([p[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":o=Fr(p[0],!1),c+=l7[p[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":o=Fr(p[0],!1),c+=l7[p[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(p[0].slice(-2)==="/>")break;if(p[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,p.index);break}else u=p.index+p[0].length;break;case"named-range":o=Fr(p[0],!1),me=Fj(o["cell-range-address"]);var ee={Name:o.name,Ref:me[0]+"!"+me[1]};M&&(ee.Sheet=h.length),ce.Names.push(ee);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(p[1]==="/"&&(!x||!x["string-value"])){var ne=X4e(n.slice(b,p.index));y=(y.length>0?y+`
`:"")+ne[0]}else Fr(p[0],!1),b=p.index+p[0].length;break;case"s":break;case"database-range":if(p[1]==="/")break;try{me=Fj(Fr(p[0])["target-range-address"]),f[me[0]]["!autofilter"]={ref:me[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(p[1]!=="/"){if(J=Fr(p[0],!1),!J.href)break;J.Target=gn(J.href),delete J.href,J.Target.charAt(0)=="#"&&J.Target.indexOf(".")>-1?(me=Fj(J.Target.slice(1)),J.Target="#"+me[0]+"!"+me[1]):J.Target.match(/^\.\.[\\\/]/)&&(J.Target=J.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(p[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(p)}}var Q={Sheets:f,SheetNames:h,Workbook:ce};return r.bookSheets&&delete Q.Sheets,Q}function c7(e,t){t=t||{},dc(e,"META-INF/manifest.xml")&&NEe(Cs(e,"META-INF/manifest.xml"),t);var r=_l(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=DZ(Kn(r),t);return dc(e,"meta.xml")&&(n.Props=EY(Cs(e,"meta.xml"))),n}function u7(e,t){return DZ(e,t)}var J4e=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+g1({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return bs+t}}(),d7=function(){var e=function(s){return Mn(s).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,o,l){var c=[];c.push('      <table:table table:name="'+Mn(o.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,d=0,A=tl(s["!ref"]||"A1"),f=s["!merges"]||[],h=0,m=Array.isArray(s);if(s["!cols"])for(d=0;d<=A.e.c;++d)c.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var p="",g=s["!rows"]||[];for(u=0;u<A.s.r;++u)p=g[u]?' table:style-name="ro'+g[u].ods+'"':"",c.push("        <table:table-row"+p+`></table:table-row>
`);for(;u<=A.e.r;++u){for(p=g[u]?' table:style-name="ro'+g[u].ods+'"':"",c.push("        <table:table-row"+p+`>
`),d=0;d<A.s.c;++d)c.push(t);for(;d<=A.e.c;++d){var x=!1,y={},b="";for(h=0;h!=f.length;++h)if(!(f[h].s.c>d)&&!(f[h].s.r>u)&&!(f[h].e.c<d)&&!(f[h].e.r<u)){(f[h].s.c!=d||f[h].s.r!=u)&&(x=!0),y["table:number-columns-spanned"]=f[h].e.c-f[h].s.c+1,y["table:number-rows-spanned"]=f[h].e.r-f[h].s.r+1;break}if(x){c.push(r);continue}var _=Tr({r:u,c:d}),T=m?(s[u]||[])[d]:s[_];if(T&&T.f&&(y["table:formula"]=Mn(gPe(T.f)),T.F&&T.F.slice(0,_.length)==_)){var P=tl(T.F);y["table:number-matrix-columns-spanned"]=P.e.c-P.s.c+1,y["table:number-matrix-rows-spanned"]=P.e.r-P.s.r+1}if(!T){c.push(t);continue}switch(T.t){case"b":b=T.v?"TRUE":"FALSE",y["office:value-type"]="boolean",y["office:boolean-value"]=T.v?"true":"false";break;case"n":b=T.w||String(T.v||0),y["office:value-type"]="float",y["office:value"]=T.v||0;break;case"s":case"str":b=T.v==null?"":T.v,y["office:value-type"]="string";break;case"d":b=T.w||va(T.v).toISOString(),y["office:value-type"]="date",y["office:date-value"]=va(T.v).toISOString(),y["table:style-name"]="ce1";break;default:c.push(t);continue}var C=e(b);if(T.l&&T.l.Target){var S=T.l.Target;S=S.charAt(0)=="#"?"#"+xPe(S.slice(1)):S,S.charAt(0)!="#"&&!S.match(/^\w+:/)&&(S="../"+S),C=rr("text:a",C,{"xlink:href":S.replace(/&/g,"&amp;")})}c.push("          "+rr("table:table-cell",rr("text:p",C,{}),y)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(s,o){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var A=u["!cols"][d];if(A.width==null&&A.wpx==null&&A.wch==null)continue;ff(A),A.ods=l;var f=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+f+`"/>
`),s.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var A=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+A+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(o,l){var c=[bs],u=g1({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=g1({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(_Y().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var A=0;A!=o.SheetNames.length;++A)c.push(n(o.Sheets[o.SheetNames[A]],o,A));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function RZ(e,t){if(t.bookType=="fods")return d7(e,t);var r=c3(),n="",a=[],s=[];return n="mimetype",zr(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",zr(r,n,d7(e,t)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",zr(r,n,J4e(e,t)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",zr(r,n,bs+_Y()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",zr(r,n,EEe(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",zr(r,n,CEe(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function o0(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Dk(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Kn(Bf(e))}function Y4e(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Cl(qu(e))}function Z4e(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function pf(e){var t=e.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function A7(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function eFe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,a=t+13;a>=t;--a)n=n*256+e[a];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function tFe(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)e[t+s]=a&255;e[t+15]|=r>=0?0:128}function _1(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function Tn(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function ns(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function yn(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=_1(e,r),s=a&7;a=Math.floor(a/8);var o=0,l;if(a==0)break;switch(s){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=_1(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:l,type:s};t[a]==null?t[a]=[u]:t[a].push(u)}return t}function _i(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(Tn(n*8+a.type)),a.type==2&&t.push(Tn(a.data.length)),t.push(a.data))})}),pf(t)}function D3(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function ic(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=_1(e,n),s=yn(e.slice(n[0],n[0]+a));n[0]+=a;var o={id:ns(s[1][0].data),messages:[]};s[2].forEach(function(l){var c=yn(l.data),u=ns(c[3][0].data);o.messages.push({meta:c,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=s[3])!=null&&t[0]&&(o.merge=ns(s[3][0].data)>>>0>0),r.push(o)}return r}function fp(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:Tn(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Tn(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(o){a.push(o.data),o.meta[3]=[{type:0,data:Tn(o.data.length)}],n[2].push({data:_i(o.meta),type:2})});var s=_i(n);t.push(Tn(s.length)),t.push(s),a.forEach(function(o){return t.push(o)})}),pf(t)}function rFe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=_1(t,r),a=[];r[0]<t.length;){var s=t[r[0]]&3;if(s==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}a.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,u=0;if(s==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,s==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[pf(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=pf(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function oc(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(rFe(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return pf(t)}function mp(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var s=Tn(n),o=s.length;t.push(s),n<=60?(o++,t.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),o+=n,a[0]=0,a[1]=o&255,a[2]=o>>8&255,a[3]=o>>16&255,r+=n}return pf(t)}function nFe(e,t,r,n){var a=o0(e),s=a.getUint32(4,!0),o=(n>1?12:8)+A7(s&(n>1?3470:398))*4,l=-1,c=-1,u=NaN,d=new Date(2001,0,1);s&512&&(l=a.getUint32(o,!0),o+=4),o+=A7(s&(n>1?12288:4096))*4,s&16&&(c=a.getUint32(o,!0),o+=4),s&32&&(u=a.getFloat64(o,!0),o+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(o,!0)*1e3),o+=8);var A;switch(e[2]){case 0:break;case 2:A={t:"n",v:u};break;case 3:A={t:"s",v:t[c]};break;case 5:A={t:"d",v:d};break;case 6:A={t:"b",v:u>0};break;case 7:A={t:"n",v:u/86400};break;case 8:A={t:"e",v:0};break;case 9:if(l>-1)A={t:"s",v:r[l]};else if(c>-1)A={t:"s",v:t[c]};else if(!isNaN(u))A={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return A}function aFe(e,t,r){var n=o0(e),a=n.getUint32(8,!0),s=12,o=-1,l=-1,c=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(c=eFe(e,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(l=n.getUint32(s,!0),s+=4),a&16&&(o=n.getUint32(s,!0),s+=4);var A;switch(e[1]){case 0:break;case 2:A={t:"n",v:c};break;case 3:A={t:"s",v:t[l]};break;case 5:A={t:"d",v:d};break;case 6:A={t:"b",v:u>0};break;case 7:A={t:"n",v:u/86400};break;case 8:A={t:"e",v:0};break;case 9:if(o>-1)A={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)));break;case 10:A={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)))}return A}function Dj(e,t){var r=new Uint8Array(32),n=o0(r),a=12,s=0;switch(r[0]=5,e.t){case"n":r[1]=2,tFe(r,a,e.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),s|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,s,!0),r.slice(0,a)}function Rj(e,t){var r=new Uint8Array(32),n=o0(r),a=12,s=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),s|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,s,!0),r.slice(0,a)}function sFe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return nFe(e,t,r,e[0]);case 5:return aFe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function ro(e){var t=yn(e);return _1(t[1][0].data)}function h7(e,t){var r=yn(t.data),n=ns(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(o){var l=yn(o.data),c=ns(l[1][0].data)>>>0;switch(n){case 1:s[c]=Dk(l[3][0].data);break;case 8:{var u=e[ro(l[9][0].data)][0],d=yn(u.data),A=e[ro(d[1][0].data)][0],f=ns(A.meta[1][0].data);if(f!=2001)throw new Error("2000 unexpected reference to ".concat(f));var h=yn(A.data);s[c]=h[3].map(function(m){return Dk(m.data)}).join("")}break}}),s}function iFe(e,t){var r,n,a,s,o,l,c,u,d,A,f,h,m,p,g=yn(e),x=ns(g[1][0].data)>>>0,y=ns(g[2][0].data)>>>0,b=((n=(r=g[8])==null?void 0:r[0])==null?void 0:n.data)&&ns(g[8][0].data)>0||!1,_,T;if((s=(a=g[7])==null?void 0:a[0])!=null&&s.data&&t!=0)_=(l=(o=g[7])==null?void 0:o[0])==null?void 0:l.data,T=(u=(c=g[6])==null?void 0:c[0])==null?void 0:u.data;else if((A=(d=g[4])==null?void 0:d[0])!=null&&A.data&&t!=1)_=(h=(f=g[4])==null?void 0:f[0])==null?void 0:h.data,T=(p=(m=g[3])==null?void 0:m[0])==null?void 0:p.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var P=b?4:1,C=o0(_),S=[],I=0;I<_.length/2;++I){var L=C.getUint16(I*2,!0);L<65535&&S.push([I,L])}if(S.length!=y)throw"Expected ".concat(y," cells, found ").concat(S.length);var E=[];for(I=0;I<S.length-1;++I)E[S[I][0]]=T.subarray(S[I][1]*P,S[I+1][1]*P);return S.length>=1&&(E[S[S.length-1][0]]=T.subarray(S[S.length-1][1]*P)),{R:x,cells:E}}function oFe(e,t){var r,n=yn(t.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?ns(n[7][0].data)>>>0>0?1:0:-1,s=D3(n[5],function(o){return iFe(o,a)});return{nrows:ns(n[4][0].data)>>>0,data:s.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(c,u){if(o[l.R][u])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(u));o[l.R][u]=c}),o},[])}}function lFe(e,t,r){var n,a=yn(t.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(ns(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(ns(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=Kr(s);var o=yn(a[4][0].data),l=h7(e,e[ro(o[4][0].data)][0]),c=(n=o[17])!=null&&n[0]?h7(e,e[ro(o[17][0].data)][0]):[],u=yn(o[3][0].data),d=0;u[1].forEach(function(A){var f=yn(A.data),h=e[ro(f[2][0].data)][0],m=ns(h.meta[1][0].data);if(m!=6002)throw new Error("6001 unexpected reference to ".concat(m));var p=oFe(e,h);p.data.forEach(function(g,x){g.forEach(function(y,b){var _=Tr({r:d+x,c:b}),T=sFe(y,l,c);T&&(r[_]=T)})}),d+=p.nrows})}function cFe(e,t){var r=yn(t.data),n={"!ref":"A1"},a=e[ro(r[2][0].data)],s=ns(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return lFe(e,a[0],n),n}function uFe(e,t){var r,n=yn(t.data),a={name:(r=n[1])!=null&&r[0]?Dk(n[1][0].data):"",sheets:[]},s=D3(n[2],ro);return s.forEach(function(o){e[o].forEach(function(l){var c=ns(l.meta[1][0].data);c==6e3&&a.sheets.push(cFe(e,l))})}),a}function dFe(e,t){var r=Q3(),n=yn(t.data),a=D3(n[1],ro);if(a.forEach(function(s){e[s].forEach(function(o){var l=ns(o.meta[1][0].data);if(l==2){var c=uFe(e,o);c.sheets.forEach(function(u,d){V3(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function Lj(e){var t,r,n,a,s={},o=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=oc(c.content)}catch(A){return console.log("?? "+c.content.length+" "+(A.message||A))}var d;try{d=ic(u)}catch(A){return console.log("## "+(A.message||A))}d.forEach(function(A){s[A.id]=A.messages,o.push(A.id)})}}),!o.length)throw new Error("File has no messages");var l=((a=(n=(r=(t=s==null?void 0:s[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&ns(s[1][0].meta[1][0].data)==1&&s[1][0];if(l||o.forEach(function(c){s[c].forEach(function(u){var d=ns(u.meta[1][0].data)>>>0;if(d==1)if(!l)l=u;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return dFe(s,l)}function AFe(e,t,r){var n,a,s,o;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(s=e[8])==null?void 0:s[0])==null?void 0:o.data)&&ns(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=o0(e[7][0].data),d=0,A=[],f=o0(e[4][0].data),h=0,m=[],p=0;p<t.length;++p){if(t[p]==null){u.setUint16(p*2,65535,!0),f.setUint16(p*2,65535);continue}u.setUint16(p*2,d,!0),f.setUint16(p*2,h,!0);var g,x;switch(typeof t[p]){case"string":g=Dj({t:"s",v:t[p]},r),x=Rj({t:"s",v:t[p]},r);break;case"number":g=Dj({t:"n",v:t[p]},r),x=Rj({t:"n",v:t[p]},r);break;case"boolean":g=Dj({t:"b",v:t[p]},r),x=Rj({t:"b",v:t[p]},r);break;default:throw new Error("Unsupported value "+t[p])}A.push(g),d+=g.length,m.push(x),h+=x.length,++c}for(e[2][0].data=Tn(c);p<e[7][0].data.length/2;++p)u.setUint16(p*2,65535,!0),f.setUint16(p*2,65535,!0);return e[6][0].data=pf(A),e[3][0].data=pf(m),c}function hFe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=tl(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(Kr(n)));var s=c_(r,{range:n,header:1}),o=["~Sh33tJ5~"];s.forEach(function(F){return F.forEach(function(V){typeof V=="string"&&o.push(V)})});var l={},c=[],u=Ir.read(t.numbers,{type:"base64"});u.FileIndex.map(function(F,V){return[F,u.FullPaths[V]]}).forEach(function(F){var V=F[0],D=F[1];if(V.type==2&&V.name.match(/\.iwa/)){var M=V.content,G=oc(M),O=ic(G);O.forEach(function(K){c.push(K.id),l[K.id]={deps:[],location:D,type:ns(K.messages[0].meta[1][0].data)}})}}),c.sort(function(F,V){return F-V});var d=c.filter(function(F){return F>1}).map(function(F){return[F,Tn(F)]});u.FileIndex.map(function(F,V){return[F,u.FullPaths[V]]}).forEach(function(F){var V=F[0];if(F[1],!!V.name.match(/\.iwa/)){var D=ic(oc(V.content));D.forEach(function(M){M.messages.forEach(function(G){d.forEach(function(O){M.messages.some(function(K){return ns(K.meta[1][0].data)!=11006&&Z4e(K.data,O[1])})&&l[O[0]].deps.push(M.id)})})})}});for(var A=Ir.find(u,l[1].location),f=ic(oc(A.content)),h,m=0;m<f.length;++m){var p=f[m];p.id==1&&(h=p)}var g=ro(yn(h.messages[0].data)[1][0].data);for(A=Ir.find(u,l[g].location),f=ic(oc(A.content)),m=0;m<f.length;++m)p=f[m],p.id==g&&(h=p);for(g=ro(yn(h.messages[0].data)[2][0].data),A=Ir.find(u,l[g].location),f=ic(oc(A.content)),m=0;m<f.length;++m)p=f[m],p.id==g&&(h=p);for(g=ro(yn(h.messages[0].data)[2][0].data),A=Ir.find(u,l[g].location),f=ic(oc(A.content)),m=0;m<f.length;++m)p=f[m],p.id==g&&(h=p);var x=yn(h.messages[0].data);{x[6][0].data=Tn(n.e.r+1),x[7][0].data=Tn(n.e.c+1);var y=ro(x[46][0].data),b=Ir.find(u,l[y].location),_=ic(oc(b.content));{for(var T=0;T<_.length&&_[T].id!=y;++T);if(_[T].id!=y)throw"Bad ColumnRowUIDMapArchive";var P=yn(_[T].messages[0].data);P[1]=[],P[2]=[],P[3]=[];for(var C=0;C<=n.e.c;++C){var S=[];S[1]=S[2]=[{type:0,data:Tn(C+420690)}],P[1].push({type:2,data:_i(S)}),P[2].push({type:0,data:Tn(C)}),P[3].push({type:0,data:Tn(C)})}P[4]=[],P[5]=[],P[6]=[];for(var I=0;I<=n.e.r;++I)S=[],S[1]=S[2]=[{type:0,data:Tn(I+726270)}],P[4].push({type:2,data:_i(S)}),P[5].push({type:0,data:Tn(I)}),P[6].push({type:0,data:Tn(I)});_[T].messages[0].data=_i(P)}b.content=mp(fp(_)),b.size=b.content.length,delete x[46];var L=yn(x[4][0].data);{L[7][0].data=Tn(n.e.r+1);var E=yn(L[1][0].data),j=ro(E[2][0].data);b=Ir.find(u,l[j].location),_=ic(oc(b.content));{if(_[0].id!=j)throw"Bad HeaderStorageBucket";var R=yn(_[0].messages[0].data);for(I=0;I<s.length;++I){var W=yn(R[2][0].data);W[1][0].data=Tn(I),W[4][0].data=Tn(s[I].length),R[2][I]={type:R[2][0].type,data:_i(W)}}_[0].messages[0].data=_i(R)}b.content=mp(fp(_)),b.size=b.content.length;var de=ro(L[2][0].data);b=Ir.find(u,l[de].location),_=ic(oc(b.content));{if(_[0].id!=de)throw"Bad HeaderStorageBucket";for(R=yn(_[0].messages[0].data),C=0;C<=n.e.c;++C)W=yn(R[2][0].data),W[1][0].data=Tn(C),W[4][0].data=Tn(n.e.r+1),R[2][C]={type:R[2][0].type,data:_i(W)};_[0].messages[0].data=_i(R)}b.content=mp(fp(_)),b.size=b.content.length;var te=ro(L[4][0].data);(function(){for(var F=Ir.find(u,l[te].location),V=ic(oc(F.content)),D,M=0;M<V.length;++M){var G=V[M];G.id==te&&(D=G)}var O=yn(D.messages[0].data);{O[3]=[];var K=[];o.forEach(function(Q,be){K[1]=[{type:0,data:Tn(be)}],K[2]=[{type:0,data:Tn(1)}],K[3]=[{type:2,data:Y4e(Q)}],O[3].push({type:2,data:_i(K)})})}D.messages[0].data=_i(O);var ee=fp(V),ne=mp(ee);F.content=ne,F.size=F.content.length})();var le=yn(L[3][0].data);{var ce=le[1][0];delete le[2];var J=yn(ce.data);{var me=ro(J[2][0].data);(function(){for(var F=Ir.find(u,l[me].location),V=ic(oc(F.content)),D,M=0;M<V.length;++M){var G=V[M];G.id==me&&(D=G)}var O=yn(D.messages[0].data);{delete O[6],delete le[7];var K=new Uint8Array(O[5][0].data);O[5]=[];for(var ee=0,ne=0;ne<=n.e.r;++ne){var Q=yn(K);ee+=AFe(Q,s[ne],o),Q[1][0].data=Tn(ne),O[5].push({data:_i(Q),type:2})}O[1]=[{type:0,data:Tn(n.e.c+1)}],O[2]=[{type:0,data:Tn(n.e.r+1)}],O[3]=[{type:0,data:Tn(ee)}],O[4]=[{type:0,data:Tn(n.e.r+1)}]}D.messages[0].data=_i(O);var be=fp(V),Z=mp(be);F.content=Z,F.size=F.content.length})()}ce.data=_i(J)}L[3][0].data=_i(le)}x[4][0].data=_i(L)}h.messages[0].data=_i(x);var Ee=fp(f),k=mp(Ee);return A.content=k,A.size=A.content.length,u}function LZ(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function R3(e){LZ([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function L3(e){LZ([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function fFe(e){return Zr.WS.indexOf(e)>-1?"sheet":e==Zr.CS?"chart":e==Zr.DS?"dialog":e==Zr.MS?"macro":e&&e.length?e:"sheet"}function mFe(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,fFe(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function pFe(e,t,r,n,a,s,o,l,c,u,d,A){try{s[n]=vy(_l(e,r,!0),t);var f=Cs(e,t),h;switch(l){case"sheet":h=LTe(f,t,a,c,s[n],u,d,A);break;case"chart":if(h=MTe(f,t,a,c,s[n],u,d,A),!h||!h["!drawel"])break;var m=Mv(h["!drawel"].Target,t),p=v1(m),g=_je(_l(e,m,!0),vy(_l(e,p,!0),m)),x=Mv(g,m),y=v1(x);h=ATe(_l(e,x,!0),x,c,vy(_l(e,y,!0),x),u,h);break;case"macro":h=UTe(f,t,a,c,s[n],u,d,A);break;case"dialog":h=QTe(f,t,a,c,s[n],u,d,A);break;default:throw new Error("Unrecognized sheet type "+l)}o[n]=h;var b=[];s&&s[n]&&as(s[n]).forEach(function(_){var T="";if(s[n][_].Type==Zr.CMNT){T=Mv(s[n][_].Target,t);var P=KTe(Cs(e,T,!0),T,c);if(!P||!P.length)return;YQ(h,P,!1)}s[n][_].Type==Zr.TCMNT&&(T=Mv(s[n][_].Target,t),b=b.concat(Sje(Cs(e,T,!0),c)))}),b&&b.length&&YQ(h,b,!0,c.people||[])}catch(_){if(c.WTF)throw _}}function ec(e){return e.charAt(0)=="/"?e.slice(1):e}function gFe(e,t){if(sx(),t=t||{},R3(t),dc(e,"META-INF/manifest.xml")||dc(e,"objectdata.xml"))return c7(e,t);if(dc(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof Lj<"u"){if(e.FileIndex)return Lj(e);var r=Ir.utils.cfb_new();return vQ(e).forEach(function(W){zr(r,W,I_e(e,W))}),Lj(r)}throw new Error("Unsupported NUMBERS file")}if(!dc(e,"[Content_Types].xml"))throw dc(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):dc(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=vQ(e),a=bEe(_l(e,"[Content_Types].xml")),s=!1,o,l;if(a.workbooks.length===0&&(l="xl/workbook.xml",Cs(e,l,!0)&&a.workbooks.push(l)),a.workbooks.length===0){if(l="xl/workbook.bin",!Cs(e,l,!0))throw new Error("Could not find workbook");a.workbooks.push(l),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},u={};if(!t.bookSheets&&!t.bookProps){if(yy=[],a.sst)try{yy=$Te(Cs(e,ec(a.sst)),a.sst,t)}catch(W){if(t.WTF)throw W}t.cellStyles&&a.themes.length&&(c=HTe(_l(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],t)),a.style&&(u=VTe(Cs(e,ec(a.style)),a.style,c,t))}a.links.map(function(W){try{var de=vy(_l(e,v1(ec(W))),W);return GTe(Cs(e,ec(W)),de,W,t)}catch{}});var d=RTe(Cs(e,ec(a.workbooks[0])),a.workbooks[0],t),A={},f="";a.coreprops.length&&(f=Cs(e,ec(a.coreprops[0]),!0),f&&(A=EY(f)),a.extprops.length!==0&&(f=Cs(e,ec(a.extprops[0]),!0),f&&IEe(f,A,t)));var h={};(!t.bookSheets||t.bookProps)&&a.custprops.length!==0&&(f=_l(e,ec(a.custprops[0]),!0),f&&(h=jEe(f,t)));var m={};if((t.bookSheets||t.bookProps)&&(d.Sheets?o=d.Sheets.map(function(de){return de.name}):A.Worksheets&&A.SheetNames.length>0&&(o=A.SheetNames),t.bookProps&&(m.Props=A,m.Custprops=h),t.bookSheets&&typeof o<"u"&&(m.SheetNames=o),t.bookSheets?m.SheetNames:t.bookProps))return m;o={};var p={};t.bookDeps&&a.calcchain&&(p=qTe(Cs(e,ec(a.calcchain)),a.calcchain));var g=0,x={},y,b;{var _=d.Sheets;A.Worksheets=_.length,A.SheetNames=[];for(var T=0;T!=_.length;++T)A.SheetNames[T]=_[T].name}var P=s?"bin":"xml",C=a.workbooks[0].lastIndexOf("/"),S=(a.workbooks[0].slice(0,C+1)+"_rels/"+a.workbooks[0].slice(C+1)+".rels").replace(/^\//,"");dc(e,S)||(S="xl/_rels/workbook."+P+".rels");var I=vy(_l(e,S,!0),S.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(t.xlmeta=zTe(Cs(e,ec(a.metadata[0])),a.metadata[0],t)),(a.people||[]).length>=1&&(t.people=Bje(Cs(e,ec(a.people[0])),t)),I&&(I=mFe(I,d.Sheets));var L=Cs(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(g=0;g!=A.Worksheets;++g){var E="sheet";if(I&&I[g]?(y="xl/"+I[g][1].replace(/[\/]?xl\//,""),dc(e,y)||(y=I[g][1]),dc(e,y)||(y=S.replace(/_rels\/.*$/,"")+I[g][1]),E=I[g][2]):(y="xl/worksheets/sheet"+(g+1-L)+"."+P,y=y.replace(/sheet0\./,"sheet.")),b=y.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(g!=t.sheets)continue e;break;case"string":if(A.SheetNames[g].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var j=!1,R=0;R!=t.sheets.length;++R)typeof t.sheets[R]=="number"&&t.sheets[R]==g&&(j=1),typeof t.sheets[R]=="string"&&t.sheets[R].toLowerCase()==A.SheetNames[g].toLowerCase()&&(j=1);if(!j)continue e}}pFe(e,y,b,A.SheetNames[g],g,x,o,E,t,d,c,u)}return m={Directory:a,Workbook:d,Props:A,Custprops:h,Deps:p,Sheets:o,SheetNames:A.SheetNames,Strings:yy,Styles:u,Themes:c,SSF:ya(Pr)},t&&t.bookFiles&&(e.files?(m.keys=n,m.files=e.files):(m.keys=[],m.files={},e.FullPaths.forEach(function(W,de){W=W.replace(/^Root Entry[\/]/,""),m.keys.push(W),m.files[W]=e.FileIndex[de]}))),t&&t.bookVBA&&(a.vba.length>0?m.vbaraw=Cs(e,ec(a.vba[0]),!0):a.defaults&&a.defaults.bin===Rje&&(m.vbaraw=Cs(e,"xl/vbaProject.bin",!0))),m}function xFe(e,t){var r=t||{},n="Workbook",a=Ir.find(e,n);try{if(n="/!DataSpaces/Version",a=Ir.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(zIe(a.content),n="/!DataSpaces/DataSpaceMap",a=Ir.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=XIe(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=Ir.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=JIe(a.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=Ir.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);ZIe(a.content)}catch{}if(n="/EncryptionInfo",a=Ir.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=eBe(a.content);if(n="/EncryptedPackage",a=Ir.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],a.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function vFe(e,t){return t.bookType=="ods"?RZ(e,t):t.bookType=="numbers"?hFe(e,t):t.bookType=="xlsb"?yFe(e,t):bFe(e,t)}function yFe(e,t){Kp=1024,e&&!e.SSF&&(e.SSF=ya(Pr)),e&&e.SSF&&(sx(),AS(e.SSF),t.revssf=fS(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,by?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=dZ.indexOf(t.bookType)>-1,a=N3();L3(t=t||{});var s=c3(),o="",l=0;if(t.cellXfs=[],Pf(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",zr(s,o,SY(e.Props,t)),a.coreprops.push(o),On(t.rels,2,o,Zr.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,zr(s,o,jY(e.Props)),a.extprops.push(o),On(t.rels,3,o,Zr.EXT_PROPS),e.Custprops!==e.Props&&as(e.Custprops||{}).length>0&&(o="docProps/custom.xml",zr(s,o,PY(e.Custprops)),a.custprops.push(o),On(t.rels,4,o,Zr.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var d={"!id":{}},A=e.Sheets[e.SheetNames[l-1]],f=(A||{})["!type"]||"sheet";switch(f){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,zr(s,o,XTe(l-1,o,t,e,d)),a.sheets.push(o),On(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Zr.WS[0])}if(A){var h=A["!comments"],m=!1,p="";h&&h.length>0&&(p="xl/comments"+l+"."+r,zr(s,p,ZTe(h,p)),a.comments.push(p),On(d,-1,"../comments"+l+"."+r,Zr.CMNT),m=!0),A["!legacy"]&&m&&zr(s,"xl/drawings/vmlDrawing"+l+".vml",cZ(l,A["!comments"])),delete A["!comments"],delete A["!legacy"]}d["!id"].rId1&&zr(s,v1(o),ig(d))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,zr(s,o,YTe(t.Strings,o,t)),a.strs.push(o),On(t.wbrels,-1,"sharedStrings."+r,Zr.SST)),o="xl/workbook."+r,zr(s,o,WTe(e,o)),a.workbooks.push(o),On(t.rels,1,o,Zr.WB),o="xl/theme/theme1.xml",zr(s,o,B3(e.Themes,t)),a.themes.push(o),On(t.wbrels,-1,"theme/theme1.xml",Zr.THEME),o="xl/styles."+r,zr(s,o,JTe(e,o,t)),a.styles.push(o),On(t.wbrels,-1,"styles."+r,Zr.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",zr(s,o,e.vbaraw),a.vba.push(o),On(t.wbrels,-1,"vbaProject.bin",Zr.VBA)),o="xl/metadata."+r,zr(s,o,e4e(o)),a.metadata.push(o),On(t.wbrels,-1,"metadata."+r,Zr.XLMETA),zr(s,"[Content_Types].xml",CY(a,t)),zr(s,"_rels/.rels",ig(t.rels)),zr(s,"xl/_rels/workbook."+r+".rels",ig(t.wbrels)),delete t.revssf,delete t.ssf,s}function bFe(e,t){Kp=1024,e&&!e.SSF&&(e.SSF=ya(Pr)),e&&e.SSF&&(sx(),AS(e.SSF),t.revssf=fS(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,by?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=dZ.indexOf(t.bookType)>-1,a=N3();L3(t=t||{});var s=c3(),o="",l=0;if(t.cellXfs=[],Pf(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",zr(s,o,SY(e.Props,t)),a.coreprops.push(o),On(t.rels,2,o,Zr.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,zr(s,o,jY(e.Props)),a.extprops.push(o),On(t.rels,3,o,Zr.EXT_PROPS),e.Custprops!==e.Props&&as(e.Custprops||{}).length>0&&(o="docProps/custom.xml",zr(s,o,PY(e.Custprops)),a.custprops.push(o),On(t.rels,4,o,Zr.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var A={"!id":{}},f=e.Sheets[e.SheetNames[l-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,zr(s,o,wZ(l-1,t,e,A)),a.sheets.push(o),On(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Zr.WS[0])}if(f){var m=f["!comments"],p=!1,g="";if(m&&m.length>0){var x=!1;m.forEach(function(y){y[1].forEach(function(b){b.T==!0&&(x=!0)})}),x&&(g="xl/threadedComments/threadedComment"+l+"."+r,zr(s,g,Ije(m,d,t)),a.threadedcomments.push(g),On(A,-1,"../threadedComments/threadedComment"+l+"."+r,Zr.TCMNT)),g="xl/comments"+l+"."+r,zr(s,g,uZ(m)),a.comments.push(g),On(A,-1,"../comments"+l+"."+r,Zr.CMNT),p=!0}f["!legacy"]&&p&&zr(s,"xl/drawings/vmlDrawing"+l+".vml",cZ(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}A["!id"].rId1&&zr(s,v1(o),ig(A))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,zr(s,o,JY(t.Strings,t)),a.strs.push(o),On(t.wbrels,-1,"sharedStrings."+r,Zr.SST)),o="xl/workbook."+r,zr(s,o,SZ(e)),a.workbooks.push(o),On(t.rels,1,o,Zr.WB),o="xl/theme/theme1.xml",zr(s,o,B3(e.Themes,t)),a.themes.push(o),On(t.wbrels,-1,"theme/theme1.xml",Zr.THEME),o="xl/styles."+r,zr(s,o,sZ(e,t)),a.styles.push(o),On(t.wbrels,-1,"styles."+r,Zr.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",zr(s,o,e.vbaraw),a.vba.push(o),On(t.wbrels,-1,"vbaProject.bin",Zr.VBA)),o="xl/metadata."+r,zr(s,o,lZ()),a.metadata.push(o),On(t.wbrels,-1,"metadata."+r,Zr.XLMETA),d.length>1&&(o="xl/persons/person.xml",zr(s,o,jje(d)),a.people.push(o),On(t.wbrels,-1,"persons/person.xml",Zr.PEOPLE)),zr(s,"[Content_Types].xml",CY(a,t)),zr(s,"_rels/.rels",ig(t.rels)),zr(s,"xl/_rels/workbook."+r+".rels",ig(t.wbrels)),delete t.revssf,delete t.ssf,s}function M3(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Dl(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function wFe(e,t){return Ir.find(e,"EncryptedPackage")?xFe(e,t):PZ(e,t)}function NFe(e,t){var r,n=e,a=t||{};return a.type||(a.type=Wr&&Buffer.isBuffer(e)?"buffer":"base64"),r=ZJ(n,a),gFe(r,a)}function MZ(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return Fk(e.slice(r),t);default:break e}return jg.to_workbook(e,t)}function CFe(e,t){var r="",n=M3(e,t);switch(t.type){case"base64":r=Dl(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=n0(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Kn(r)),t.type="binary",MZ(r,t)}function _Fe(e,t){var r=e;return t.type=="base64"&&(r=Dl(r)),r=h1.utils.decode(1200,r.slice(2),"str"),t.type="binary",MZ(r,t)}function EFe(e){return e.match(/[^\x00-\x7F]/)?qu(e):e}function Mj(e,t,r,n){return n?(r.type="string",jg.to_workbook(e,r)):jg.to_workbook(t,r)}function Rk(e,t){a3();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return Rk(new Uint8Array(e),(r=ya(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),lg={},r.dateNF&&(lg.dateNF=r.dateNF),r.type||(r.type=Wr&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=Wr?"buffer":"binary",n=y_e(e),typeof Uint8Array<"u"&&!Wr&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=EFe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=ya(r),r.type="array",Rk(s3(n),r)}switch((a=M3(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return wFe(Ir.read(n,r),r);break;case 9:if(a[1]<=8)return PZ(n,r);break;case 60:return Fk(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return PIe(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return WY.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?NFe(n,r):Mj(e,n,r,s);case 239:return a[3]===60?Fk(n,r):Mj(e,n,r,s);case 255:if(a[1]===254)return _Fe(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return Tm.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return Tm.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return Tk.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return rZ.to_workbook(n,r);break;case 10:case 13:case 32:return CFe(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return jIe.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?Tk.to_workbook(n,r):Mj(e,n,r,s)}function UZ(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return gb(t.file,Ir.write(e,{type:Wr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Ir.write(e,t)}function SFe(e,t){var r=ya(t||{}),n=vFe(e,r);return IFe(n,r)}function IFe(e,t){var r={},n=Wr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?Ir.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(dS(a))}return t.password&&typeof encrypt_agile<"u"?UZ(encrypt_agile(a,t.password),t):t.type==="file"?gb(t.file,a):t.type=="string"?Kn(a):a}function BFe(e,t){var r=t||{},n=E4e(e,r);return UZ(n,r)}function Mu(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return f1(qu(n));case"binary":return qu(n);case"string":return e;case"file":return gb(t.file,n,"utf8");case"buffer":return Wr?CA(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Mu(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function jFe(e,t){switch(t.type){case"base64":return f1(e);case"binary":return e;case"string":return e;case"file":return gb(t.file,e,"binary");case"buffer":return Wr?CA(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function T2(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?f1(r):t.type=="string"?Kn(r):r;case"file":return gb(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function QZ(e,t){a3(),wTe(e);var r=ya(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=QZ(e,r);return r.type="array",dS(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Mu(v4e(e,r),r);case"slk":case"sylk":return Mu(zY.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return Mu(TZ(e.Sheets[e.SheetNames[a]],r),r);case"txt":return jFe(VZ(e.Sheets[e.SheetNames[a]],r),r);case"csv":return Mu(U3(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return Mu(WY.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return T2(Tk.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return Mu(jg.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return Mu(rZ.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return Mu(XY.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return Mu(RZ(e,r),r);case"wk1":return T2(Tm.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return T2(Tm.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),T2(kZ(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),BFe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return SFe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function PFe(e,t,r,n,a,s,o,l){var c=vs(r),u=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),A=!0,f=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(f,"__rowNum__",{value:r,enumerable:!1})}catch{f.__rowNum__=r}else f.__rowNum__=r;if(!o||e[r])for(var h=t.s.c;h<=t.e.c;++h){var m=o?e[r][h]:e[n[h]+c];if(m===void 0||m.t===void 0){if(u===void 0)continue;s[h]!=null&&(f[s[h]]=u);continue}var p=m.v;switch(m.t){case"z":if(p==null)break;continue;case"e":p=p==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+m.t)}if(s[h]!=null){if(p==null)if(m.t=="e"&&p===null)f[s[h]]=null;else if(u!==void 0)f[s[h]]=u;else if(d&&p===null)f[s[h]]=null;else continue;else f[s[h]]=d&&(m.t!=="n"||m.t==="n"&&l.rawNumbers!==!1)?p:AA(m,p,l);p!=null&&(A=!1)}}return{row:f,isempty:A}}function c_(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=xn(d);break;case"number":c=xn(e["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var A=vs(c.s.r),f=[],h=[],m=0,p=0,g=Array.isArray(e),x=c.s.r,y=0,b={};g&&!e[x]&&(e[x]=[]);var _=u.skipHidden&&e["!cols"]||[],T=u.skipHidden&&e["!rows"]||[];for(y=c.s.c;y<=c.e.c;++y)if(!(_[y]||{}).hidden)switch(f[y]=Qa(y),r=g?e[x][y]:e[f[y]+A],n){case 1:s[y]=y-c.s.c;break;case 2:s[y]=f[y];break;case 3:s[y]=u.header[y-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=AA(r,null,u),p=b[o]||0,!p)b[o]=1;else{do l=o+"_"+p++;while(b[l]);b[o]=p,b[l]=1}s[y]=l}for(x=c.s.r+a;x<=c.e.r;++x)if(!(T[x]||{}).hidden){var P=PFe(e,c,x,f,n,s,g,u);(P.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(h[m++]=P.row)}return h.length=m,h}var f7=/"/g;function kFe(e,t,r,n,a,s,o,l){for(var c=!0,u=[],d="",A=vs(r),f=t.s.c;f<=t.e.c;++f)if(n[f]){var h=l.dense?(e[r]||[])[f]:e[n[f]+A];if(h==null)d="";else if(h.v!=null){c=!1,d=""+(l.rawNumbers&&h.t=="n"?h.v:AA(h,null,l));for(var m=0,p=0;m!==d.length;++m)if((p=d.charCodeAt(m))===a||p===s||p===34||l.forceQuotes){d='"'+d.replace(f7,'""')+'"';break}d=="ID"&&(d='"ID"')}else h.f!=null&&!h.F?(c=!1,d="="+h.f,d.indexOf(",")>=0&&(d='"'+d.replace(f7,'""')+'"')):d="";u.push(d)}return l.blankrows===!1&&c?null:u.join(o)}function U3(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=xn(e["!ref"]),s=n.FS!==void 0?n.FS:",",o=s.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",A=[];n.dense=Array.isArray(e);for(var f=n.skipHidden&&e["!cols"]||[],h=n.skipHidden&&e["!rows"]||[],m=a.s.c;m<=a.e.c;++m)(f[m]||{}).hidden||(A[m]=Qa(m));for(var p=0,g=a.s.r;g<=a.e.r;++g)(h[g]||{}).hidden||(d=kFe(e,a,g,A,o,c,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((p++?l:"")+d)));return delete n.dense,r.join("")}function VZ(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=U3(e,t);return r}function TFe(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=xn(e["!ref"]),s="",o=[],l,c=[],u=Array.isArray(e);for(l=a.s.c;l<=a.e.c;++l)o[l]=Qa(l);for(var d=a.s.r;d<=a.e.r;++d)for(s=vs(d),l=a.s.c;l<=a.e.c;++l)if(t=o[l]+s,r=u?(e[d]||[])[l]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function HZ(e,t,r){var n=r||{},a=+!n.skipHeader,s=e||{},o=0,l=0;if(s&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?Va(n.origin):n.origin;o=c.r,l=c.c}var u,d={s:{c:0,r:0},e:{c:l,r:o+t.length-1+a}};if(s["!ref"]){var A=xn(s["!ref"]);d.e.c=Math.max(d.e.c,A.e.c),d.e.r=Math.max(d.e.r,A.e.r),o==-1&&(o=A.e.r+1,d.e.r=o+t.length-1+a)}else o==-1&&(o=0,d.e.r=t.length-1+a);var f=n.header||[],h=0;t.forEach(function(p,g){as(p).forEach(function(x){(h=f.indexOf(x))==-1&&(f[h=f.length]=x);var y=p[x],b="z",_="",T=Tr({c:l+h,r:o+g+a});u=E1(s,T),y&&typeof y=="object"&&!(y instanceof Date)?s[T]=y:(typeof y=="number"?b="n":typeof y=="boolean"?b="b":typeof y=="string"?b="s":y instanceof Date?(b="d",n.cellDates||(b="n",y=Gs(y)),_=n.dateNF||Pr[14]):y===null&&n.nullError&&(b="e",y=0),u?(u.t=b,u.v=y,delete u.w,delete u.R,_&&(u.z=_)):s[T]=u={t:b,v:y},_&&(u.z=_))})}),d.e.c=Math.max(d.e.c,l+f.length-1);var m=vs(o);if(a)for(h=0;h<f.length;++h)s[Qa(h+l)+m]={t:"s",v:f[h]};return s["!ref"]=Kr(d),s}function FFe(e,t){return HZ(null,e,t)}function E1(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=Va(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?E1(e,Tr(t)):E1(e,Tr({r:t,c:r||0}))}function OFe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function Q3(){return{SheetNames:[],Sheets:{}}}function V3(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var o=s&&s[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=o+a)!=-1;++a);}if(EZ(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function DFe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=OFe(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function RFe(e,t){return e.z=t,e}function $Z(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function LFe(e,t,r){return $Z(e,"#"+t,r)}function MFe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function UFe(e,t,r,n){for(var a=typeof t!="string"?t:xn(t),s=typeof t=="string"?t:Kr(t),o=a.s.r;o<=a.e.r;++o)for(var l=a.s.c;l<=a.e.c;++l){var c=E1(e,o,l);c.t="n",c.F=s,delete c.v,o==a.s.r&&l==a.s.c&&(c.f=r,n&&(c.D=!0))}return e}var F2={encode_col:Qa,encode_row:vs,encode_cell:Tr,encode_range:Kr,decode_col:g3,decode_row:p3,split_cell:Y_e,decode_cell:Va,decode_range:tl,format_cell:AA,sheet_add_aoa:gY,sheet_add_json:HZ,sheet_add_dom:FZ,aoa_to_sheet:ix,json_to_sheet:FFe,table_to_sheet:OZ,table_to_book:z4e,sheet_to_csv:U3,sheet_to_txt:VZ,sheet_to_json:c_,sheet_to_html:TZ,sheet_to_formulae:TFe,sheet_to_row_object_array:c_,sheet_get_cell:E1,book_new:Q3,book_append_sheet:V3,book_set_sheet_visibility:DFe,cell_set_number_format:RFe,cell_set_hyperlink:$Z,cell_set_internal_link:LFe,cell_add_comment:MFe,sheet_set_array_formula:UFe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const QFe=e=>`C$ ${(Number(e)||0).toFixed(2)}`;function sa(e){return String(e??"").trim().replace(/\s+/g," ").toLowerCase()}function hh(e,t=0){const r=Number(String(e??"").replace(",","."));return Number.isFinite(r)?r:t}function Gf(e,t=1){const r=Math.floor(hh(e,t));return r>0?r:t}function VFe(e){return Object.values(e||{}).every(r=>sa(r)==="")}function uv(e,t){const r=Object.keys(e||{}),n=new Map;r.forEach(a=>n.set(sa(a),a));for(const a of t){const s=n.get(sa(a));if(s!=null)return e[s]}}function HFe(){const{refreshKey:e,refresh:t}=Pc(),[r,n]=v.useState(!0),[a,s]=v.useState(""),[o,l]=v.useState([]),[c,u]=v.useState(""),[d,A]=v.useState(""),[f,h]=v.useState(0),[m,p]=v.useState(1),[g,x]=v.useState(null),[y,b]=v.useState(""),[_,T]=v.useState(""),[P,C]=v.useState(0),[S,I]=v.useState(1),[L,E]=v.useState(""),[j,R]=v.useState(!1),[W,de]=v.useState(""),[te,le]=v.useState([]),[ce,J]=v.useState([]),[me,Ee]=v.useState(!1);v.useEffect(()=>{(async()=>{n(!0),s("");try{const X=await jt(Ht(At(ke,"products_candies"),Ur("name","asc"))),ve=[];X.forEach(re=>{const Ne=re.data();ve.push({id:re.id,name:Ne.name||"",category:Ne.category||"",providerPrice:Number(Ne.providerPrice||0),unitsPerPackage:Number(Ne.unitsPerPackage||1),createdAt:Ne.createdAt})}),l(ve)}catch(X){console.error(X),s(" Error cargando catlogo de dulces.")}finally{n(!1)}})()},[e]);const k=v.useMemo(()=>{const X=sa(L);return X?o.filter(ve=>`${ve.category} ${ve.name}`.toLowerCase().includes(X)):o},[o,L]),F=v.useMemo(()=>{const X=new Set;return o.forEach(ve=>{const re=String(ve.category||"").trim();re&&X.add(re)}),Array.from(X).sort((ve,re)=>ve.localeCompare(re,"es"))},[o]),V=()=>{u(""),A(""),h(0),p(1)},D=async X=>{X.preventDefault(),s("");const ve=String(c||"").trim(),re=String(d||"").trim(),Ne=Math.max(0,hh(f,0)),Me=Gf(m,1);if(!ve)return s(" La categora es requerida.");if(!re)return s(" El nombre del producto es requerido.");if(Ne<=0)return s(" El precio proveedor debe ser > 0.");if(Me<=0)return s(" Und x paquete debe ser > 0.");if(o.some(nt=>sa(nt.category)===sa(ve)&&sa(nt.name)===sa(re)))return s(" Ya existe un producto con esa categora y nombre.");try{n(!0);const nt={category:ve,name:re,providerPrice:Ne,unitsPerPackage:Me,createdAt:zt.now()},st=await en(At(ke,"products_candies"),nt);l(lt=>[...lt,{id:st.id,...nt}].sort((bt,ot)=>bt.name.localeCompare(ot.name,"es"))),s(" Producto creado."),V()}catch(nt){console.error(nt),s(" Error creando producto.")}finally{n(!1)}},M=X=>{x(X.id),b(X.category),T(X.name),C(X.providerPrice),I(X.unitsPerPackage||1),s("")},G=()=>{x(null),b(""),T(""),C(0),I(1)},O=async()=>{if(!g)return;s("");const X=String(y||"").trim(),ve=String(_||"").trim(),re=Math.max(0,hh(P,0)),Ne=Gf(S,1);if(!X)return s(" La categora es requerida.");if(!ve)return s(" El nombre del producto es requerido.");if(re<=0)return s(" El precio proveedor debe ser > 0.");if(Ne<=0)return s(" Und x paquete debe ser > 0.");if(o.some(Ve=>Ve.id!==g&&sa(Ve.category)===sa(X)&&sa(Ve.name)===sa(ve)))return s(" Ya existe otro producto con esa categora y nombre.");try{n(!0),await Lr(Mt(ke,"products_candies",g),{category:X,name:ve,providerPrice:re,unitsPerPackage:Ne,updatedAt:zt.now()}),l(Ve=>Ve.map(nt=>nt.id===g?{...nt,category:X,name:ve,providerPrice:re,unitsPerPackage:Ne}:nt).sort((nt,st)=>nt.name.localeCompare(st.name,"es"))),s(" Producto actualizado."),G()}catch(Ve){console.error(Ve),s(" Error actualizando producto.")}finally{n(!1)}},K=async X=>{if(confirm(`Eliminar "${X.name}" (${X.category}) del catlogo?`))try{n(!0),await fn(Mt(ke,"products_candies",X.id)),l(re=>re.filter(Ne=>Ne.id!==X.id)),s(" Producto eliminado.")}catch(re){console.error(re),s(" Error eliminando producto.")}finally{n(!1)}},ee=()=>{const X=[{Id:"",Categoria:"Gomitas",Producto:"Gomita Fresa",PrecioProveedor:120,UnidadesPorPaquete:24}],ve=F2.json_to_sheet(X),re=F2.book_new();F2.book_append_sheet(re,ve,"Productos");const Ne=QZ(re,{type:"array",bookType:"xlsx"}),Me=new Blob([Ne],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),Ve=URL.createObjectURL(Me),nt=document.createElement("a");nt.href=Ve,nt.download="template_productos_dulces.xlsx",document.body.appendChild(nt),nt.click(),nt.remove(),URL.revokeObjectURL(Ve)},ne=X=>{const ve=[],re=[];X.forEach((Me,Ve)=>{if(!Me||typeof Me!="object"||VFe(Me))return;const nt=String(uv(Me,["Id","ID","productId","docId"])??"").trim(),st=String(uv(Me,["Categoria","Categora","Category","cat","category"])??"").trim(),lt=String(uv(Me,["Producto","Product","Nombre","Name","producto","name"])??"").trim(),bt=uv(Me,["PrecioProveedor","Precio Prov","Precio Prov.","ProviderPrice","Precio","Costo","providerPrice"]),ot=uv(Me,["UnidadesPorPaquete","Und x Paquete","UnitsPerPackage","UPP","unitsPerPackage"]),Le=Math.max(0,hh(bt,0)),Ze=Gf(ot,1),ye=Ve+2;st||re.push(`Fila ${ye}: falta Categoria.`),lt||re.push(`Fila ${ye}: falta Producto/Nombre.`),Le<=0&&re.push(`Fila ${ye}: PrecioProveedor debe ser > 0.`),Ze<=0&&re.push(`Fila ${ye}: UnidadesPorPaquete debe ser > 0.`),st&&lt&&Le>0&&Ze>0&&ve.push({id:nt||void 0,category:st,name:lt,providerPrice:Le,unitsPerPackage:Ze,_raw:Me})});const Ne=new Map;for(const Me of ve){const Ve=Me.id?`id::${Me.id}`:`${sa(Me.category)}::${sa(Me.name)}`;Ne.set(Ve,Me)}return{rows:Array.from(Ne.values()),errors:re}},Q=async X=>{if(s(""),J([]),le([]),de((X==null?void 0:X.name)||""),!X)return;const ve=X.name.toLowerCase(),re=ve.endsWith(".xlsx")||ve.endsWith(".xls"),Ne=ve.endsWith(".csv");if(!re&&!Ne){J(["Solo se permiten archivos .xlsx, .xls o .csv"]);return}try{Ee(!0);const Me=new FileReader,Ve=await new Promise((Ze,ye)=>{Me.onerror=()=>ye(new Error("No se pudo leer el archivo.")),Me.onload=()=>Ze(Me.result),Me.readAsArrayBuffer(X)}),nt=Rk(new Uint8Array(Ve),{type:"array"}),st=nt.SheetNames[0],lt=nt.Sheets[st],bt=F2.sheet_to_json(lt,{defval:""}),{rows:ot,errors:Le}=ne(bt);le(ot),J(Le),ot.length===0&&Le.length===0&&J(["No se encontraron filas vlidas para importar."])}catch(Me){console.error(Me),J(["Error leyendo el archivo. Revis que no est corrupto."])}finally{Ee(!1)}},be=(X,ve)=>{le(re=>{const Ne=[...re],Me=Ne[X];return Me?(Ne[X]={...Me,...ve},Ne):re})},Z=async()=>{if(s(""),ce.length>0){s(" Correg los errores antes de importar.");return}if(te.length===0){s(" No hay filas para importar.");return}try{Ee(!0);const X={},ve={};o.forEach(Ve=>{X[Ve.id]=Ve,ve[`${sa(Ve.category)}::${sa(Ve.name)}`]=Ve});const re=_0(ke);let Ne=0,Me=0;for(const Ve of te){const nt=String(Ve.category||"").trim(),st=String(Ve.name||"").trim(),lt=Math.max(0,hh(Ve.providerPrice,0)),bt=Gf(Ve.unitsPerPackage,1);if(!nt||!st||lt<=0||bt<=0)continue;let ot;if(Ve.id&&X[Ve.id])ot=X[Ve.id];else{const Le=`${sa(nt)}::${sa(st)}`;ot=ve[Le]}if(ot)re.update(Mt(ke,"products_candies",ot.id),{category:nt,name:st,providerPrice:lt,unitsPerPackage:bt,updatedAt:zt.now()}),Me+=1;else{const Le=Mt(At(ke,"products_candies"));re.set(Le,{category:nt,name:st,providerPrice:lt,unitsPerPackage:bt,createdAt:zt.now()}),Ne+=1}}await re.commit(),s(` Importacin lista. Creados: ${Ne}, Actualizados: ${Me}`),R(!1),le([]),J([]),de(""),t()}catch(X){console.error(X),s(" Error importando productos a Firestore.")}finally{Ee(!1)}},z=v.useMemo(()=>{const X=new Set(o.map(Me=>Me.id)),ve=new Set(o.map(Me=>`${sa(Me.category)}::${sa(Me.name)}`));let re=0,Ne=0;for(const Me of te){if(Me.id&&X.has(Me.id)){re+=1;continue}const Ve=`${sa(Me.category)}::${sa(Me.name)}`;ve.has(Ve)?re+=1:Ne+=1}return{willCreate:Ne,willUpdate:re,total:te.length}},[te,o]);return i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Catlogo de Productos (Dulces)"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(bu,{onClick:t,loading:r||me}),i.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",onClick:()=>{R(!0),le([]),J([]),de("")},children:"Importar (.xlsx)"})]})]}),i.jsxs("form",{onSubmit:D,className:"bg-white p-3 rounded shadow border mb-4 grid grid-cols-1 md:grid-cols-5 gap-3 items-end text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Categora"}),i.jsx("input",{className:"w-full border rounded px-2 py-1",value:c,onChange:X=>u(X.target.value),placeholder:"Ej: Gomitas"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block font-semibold",children:"Producto"}),i.jsx("input",{className:"w-full border rounded px-2 py-1",value:d,onChange:X=>A(X.target.value),placeholder:"Ej: Gomita Fresa"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio proveedor (paq)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-1 text-right",value:Number.isNaN(f)?"":f,onChange:X=>h(Math.max(0,hh(X.target.value,0)))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Und x paquete"}),i.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-1 text-right",value:m,onChange:X=>p(Gf(X.target.value,1))})]}),i.jsxs("div",{className:"md:col-span-5 flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:V,children:"Limpiar"}),i.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",disabled:r,children:"Crear producto"})]})]}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-3 flex flex-col md:flex-row gap-3 items-center text-sm",children:[i.jsxs("div",{className:"w-full md:w-1/2",children:[i.jsx("label",{className:"block font-semibold",children:"Buscar"}),i.jsx("input",{className:"w-full border rounded px-2 py-1",value:L,onChange:X=>E(X.target.value),placeholder:"Buscar por categora o producto"})]}),i.jsxs("div",{className:"w-full md:w-1/2 text-right",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Productos en catlogo"}),i.jsx("div",{className:"text-lg font-semibold",children:k.length})]})]}),i.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-[900px] w-full text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border text-right",children:"Und x paquete"}),i.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):k.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin productos."})}):k.map(X=>{const ve=g===X.id;return i.jsxs("tr",{className:"align-top",children:[i.jsx("td",{className:"p-2 border",children:ve?i.jsx("input",{className:"w-full border rounded px-2 py-1",value:y,onChange:re=>b(re.target.value)}):X.category}),i.jsx("td",{className:"p-2 border",children:ve?i.jsx("input",{className:"w-full border rounded px-2 py-1",value:_,onChange:re=>T(re.target.value)}):X.name}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:ve?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border rounded px-2 py-1 text-right",value:Number.isNaN(P)?"":P,onChange:re=>C(Math.max(0,hh(re.target.value,0)))}):QFe(X.providerPrice)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:ve?i.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:S,onChange:re=>I(Gf(re.target.value,1))}):X.unitsPerPackage}),i.jsx("td",{className:"p-2 border",children:ve?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:O,type:"button",children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:G,type:"button",children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center flex-wrap",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 hover:bg-yellow-500",onClick:()=>M(X),type:"button",children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>K(X),type:"button",children:"Borrar"})]})})]},X.id)})})]})}),a&&i.jsx("p",{className:"mt-2 text-sm",children:a}),j&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white w-full max-w-6xl max-h-[90vh] overflow-y-auto rounded shadow-lg p-5 text-sm",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"text-xl font-bold",children:"Importar productos (.xlsx / .csv)"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>R(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:[i.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-end md:justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"1) Sub tu archivo"}),i.jsx("div",{className:"text-xs text-gray-600",children:"Columnas esperadas (flexible): Id (opcional), Categoria, Producto/Nombre, PrecioProveedor, UnidadesPorPaquete."})]}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:ee,type:"button",children:"Descargar template .xlsx"})]}),i.jsxs("div",{className:"mt-3 flex flex-col md:flex-row gap-3 md:items-center",children:[i.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:X=>{var ve;return Q(((ve=X.target.files)==null?void 0:ve[0])||null)}}),W&&i.jsxs("span",{className:"text-xs text-gray-600",children:["Archivo: ",i.jsx("b",{children:W})]}),me&&i.jsx("span",{className:"text-xs",children:"Procesando"})]})]}),ce.length>0&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-3 mb-3",children:[i.jsx("div",{className:"font-semibold text-red-700 mb-2",children:"Errores encontrados"}),i.jsx("ul",{className:"list-disc pl-5 text-red-700 text-xs space-y-1",children:ce.slice(0,50).map((X,ve)=>i.jsx("li",{children:X},ve))})]}),i.jsxs("div",{className:"bg-white border rounded p-3",children:[i.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"2) Previsualizacin (editable)"}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Se importarn ",z.total," filas (Crear:"," ",z.willCreate," / Actualizar:"," ",z.willUpdate,")"]})]}),i.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50",onClick:Z,disabled:me||te.length===0||ce.length>0,type:"button",children:"Importar a Firestore"})]}),i.jsxs("div",{className:"overflow-x-auto border rounded",children:[i.jsxs("table",{className:"min-w-[1100px] w-full text-xs",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border text-left",children:"Id (opcional)"}),i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border text-right",children:"Und x paquete"}),i.jsx("th",{className:"p-2 border text-center",children:"Accin"})]})}),i.jsx("tbody",{children:te.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center text-gray-500",children:"Sub un archivo para ver la previsualizacin."})}):te.slice(0,300).map((X,ve)=>{const re=X.id?o.some(Ve=>Ve.id===X.id):!1,Ne=o.some(Ve=>`${sa(Ve.category)}::${sa(Ve.name)}`==`${sa(X.category)}::${sa(X.name)}`),Me=re||Ne;return i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:X.id||"",onChange:Ve=>be(ve,{id:Ve.target.value.trim()||void 0}),placeholder:"docId (si quers update exacto)"})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:X.category,onChange:Ve=>be(ve,{category:Ve.target.value}),list:"categories-list"})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-72 border rounded px-2 py-1",value:X.name,onChange:Ve=>be(ve,{name:Ve.target.value})})}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border rounded px-2 py-1 text-right",value:Number.isNaN(X.providerPrice)?"":X.providerPrice,onChange:Ve=>be(ve,{providerPrice:Math.max(0,hh(Ve.target.value,0))})})}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:i.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:X.unitsPerPackage,onChange:Ve=>be(ve,{unitsPerPackage:Gf(Ve.target.value,1)})})}),i.jsx("td",{className:"p-2 border text-center",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] ${Me?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:Me?"ACTUALIZA":"CREA"})})]},`${X.id||""}-${ve}`)})})]}),i.jsx("datalist",{id:"categories-list",children:F.map(X=>i.jsx("option",{value:X},X))})]}),te.length>300&&i.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:["Mostrando 300 de ",te.length," filas (el import importa todas)."]})]})]})})]})}function H3(e){const t=Math.max(1,Math.floor(Number(e.unitsPerPackage||1))),r=Number(e.totalUnits||0),n=Number(e.quantity||0),a=Number(e.packages||0);return r>0?Math.floor(r):n>0?Math.floor(n):a>0?Math.floor(a*t):0}function Cy(e){const t=Number(e.remaining);return Number.isFinite(t)&&t>0?Math.floor(t):H3(e)}function $Fe(e){const t=Math.max(1,Math.floor(Number(e.unitsPerPackage||1))),r=H3(e);return r>0&&t>0?Math.floor(r/t):Math.max(0,Math.floor(Number(e.packages||0)))}function KFe(e){if(typeof e.remainingPackages=="number"&&isFinite(e.remainingPackages))return Math.max(0,Math.floor(Number(e.remainingPackages)));const t=Math.max(1,Math.floor(Number(e.unitsPerPackage||1))),r=Cy(e);return Math.max(0,Math.floor(r/t))}async function qFe(e){const t=Mt(ke,"candy_main_orders",e);if((await Qi(t)).exists())return t;const n=Ht(At(ke,"candy_main_orders"),Xt("orderId","==",e)),a=await jt(n);return a.empty?null:Mt(ke,"candy_main_orders",a.docs[0].id)}async function Uj(e){if(!e)return;const t=await qFe(e);if(!t)return;const r=Ht(At(ke,"inventory_candies"),Xt("orderId","==",e)),n=await jt(r),a=new Map;n.forEach(l=>{const c=l.data(),u=String(c.productId||"");if(!u)return;const d=$Fe(c),A=KFe(c),f=Math.max(1,Math.floor(Number(c.unitsPerPackage||1))),h=Number(c.providerPrice||0),m=Number(c.unitPriceRivas||0),p=Number(c.unitPriceSanJorge||0),g=Number(c.unitPriceIsla||0),x=h*d,y=m*d,b=p*d,_=g*d,T=y-x,P=b-x,C=_-x;a.has(u)||a.set(u,{productId:u,name:String(c.productName||""),category:String(c.category||""),unitsPerPackage:f,providerPrice:h,marginRivas:typeof c.marginRivas=="number"?Number(c.marginRivas):void 0,marginSanJorge:typeof c.marginSanJorge=="number"?Number(c.marginSanJorge):void 0,marginIsla:typeof c.marginIsla=="number"?Number(c.marginIsla):void 0,packages:0,remainingPackages:0,subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0,unitPriceRivas:m||0,unitPriceSanJorge:p||0,unitPriceIsla:g||0,gainRivas:0,gainSanJorge:0,gainIsla:0});const S=a.get(u);S.packages+=d,S.remainingPackages+=A,S.subtotal+=x,S.totalRivas+=y,S.totalSanJorge+=b,S.totalIsla+=_,S.gainRivas+=T,S.gainSanJorge+=P,S.gainIsla+=C,S.providerPrice=h,S.unitPriceRivas=m||S.unitPriceRivas,S.unitPriceSanJorge=p||S.unitPriceSanJorge,S.unitPriceIsla=g||S.unitPriceIsla,S.unitsPerPackage=f||S.unitsPerPackage,S.name=String(c.productName||S.name),S.category=String(c.category||S.category)});const s=Array.from(a.values()).map(l=>({id:l.productId,name:l.name,category:l.category,providerPrice:l.providerPrice,unitsPerPackage:l.unitsPerPackage,packages:l.packages,remainingPackages:l.remainingPackages,marginRivas:l.marginRivas??void 0,marginSanJorge:l.marginSanJorge??void 0,marginIsla:l.marginIsla??void 0,subtotal:l.subtotal,totalRivas:l.totalRivas,totalSanJorge:l.totalSanJorge,totalIsla:l.totalIsla,unitPriceRivas:l.unitPriceRivas,unitPriceSanJorge:l.unitPriceSanJorge,unitPriceIsla:l.unitPriceIsla,gainRivas:l.gainRivas,gainSanJorge:l.gainSanJorge,gainIsla:l.gainIsla})),o=s.reduce((l,c)=>l+Number(c.packages||0),0);await Lr(t,{totalPackages:o,items:s})}async function GFe(e){const{productId:t,saleDate:r,saleId:n}=e,a=e.quantityPacks,s=e.quantity;if(!t)throw new Error("Parmetros invlidos para allocateSaleFIFOCandy (sin producto)");const o=Ht(At(ke,"inventory_candies"),Xt("productId","==",t)),l=await jt(o);if(l.empty)throw new Error("No hay inventario para este producto.");const c=l.docs.map(h=>({id:h.id,data:h.data()})).sort((h,m)=>{var b,_;const p=String(h.data.date||""),g=String(m.data.date||"");if(p!==g)return p<g?-1:1;const x=((b=h.data.createdAt)==null?void 0:b.seconds)??0,y=((_=m.data.createdAt)==null?void 0:_.seconds)??0;return x-y});let u=0;for(const h of c){const m=Number(h.data.unitsPerPackage??0);if(m>0){u=m;break}}if(!u)for(const h of c){const m=h.data,p=Number(m.totalUnits??0),g=Number(m.packages??0);if(p>0&&g>0){u=p/g;break}}u||(u=1);let d;if(a!=null&&!Number.isNaN(Number(a))){const h=Math.max(0,Math.floor(Number(a)));if(h<=0)throw new Error("La cantidad en paquetes debe ser mayor que cero.");d=h*u}else{const h=Math.max(0,Math.floor(Number(s||0)));if(h<=0)throw new Error("La cantidad debe ser mayor que cero.");d=h}const A=c.map(h=>Mt(ke,"inventory_candies",h.id)),f=[];return await Ks(ke,async h=>{const m=await Promise.all(A.map(g=>h.get(g)));let p=d;for(let g=0;g<A.length&&p>0;g++){const x=A[g],y=m[g];if(!y.exists())continue;const b=y.data(),_=Cy(b);if(_<=0)continue;const T=Math.min(_,p),P=Math.max(0,_-T),C=Math.max(1,Math.floor(Number(b.unitsPerPackage||1))),S=Math.floor(P/C);h.update(x,{remaining:P,remainingPackages:S,packages:S}),f.push({batchId:x.id,qty:T,batchDate:String(b.date||""),productName:String(b.productName||"")}),p-=T}if(p>0){const g=Math.ceil(p/u);throw new Error(`Inventario insuficiente. Faltan aproximadamente ${g} paquetes.`)}if(n)for(const g of f)await en(At(ke,"batch_candies_allocations"),{saleId:n,saleDate:r,productId:t,productName:g.productName??"",batchId:g.batchId,batchDate:g.batchDate??"",quantity:g.qty,createdAt:zt.now()})}),{allocations:f}}function zFe(e){const t=e==null?void 0:e.allocationsByItem;if(!t)return null;const r=[];if(Array.isArray(t))for(const n of t){const a=Array.isArray(n==null?void 0:n.allocations)?n.allocations:[];for(const s of a){const o=String(s.inventorySellerId||""),l=Math.max(0,Math.floor(Number(s.units??s.qty??s.quantity??0)));!o||l<=0||r.push({inventorySellerId:o,units:l})}}else if(typeof t=="object")for(const n of Object.keys(t)){const a=t[n],s=Array.isArray(a==null?void 0:a.allocations)?a.allocations:[];for(const o of s){const l=String(o.inventorySellerId||""),c=Math.max(0,Math.floor(Number(o.units??o.qty??o.quantity??0)));!l||c<=0||r.push({inventorySellerId:l,units:c})}}return r.length?{allocations:r}:null}async function S1(e){const t=e.split("#")[0],r=Mt(ke,"sales_candies",t),n=await Qi(r);if(!n.exists())throw new Error("La venta no existe.");const a=n.data(),s=zFe(a);if(s&&s.allocations.length>0){let u=0;return await Ks(ke,async d=>{const A={};for(const p of s.allocations){const g=p.inventorySellerId,x=Math.max(0,Math.floor(Number(p.units||0)));!g||x<=0||(A[g]=(A[g]||0)+x,u+=x)}const h=Object.keys(A).map(p=>Mt(ke,"inventory_candies_sellers",p)),m=await Promise.all(h.map(p=>d.get(p)));for(let p=0;p<h.length;p++){const g=m[p];if(!g.exists())continue;const x=g.data(),y=Number(x.remainingUnits??x.remaining??0),b=Math.max(0,Math.floor(Number(A[h[p].id]||0))),_=y+b,T=Math.max(1,Math.floor(Number(x.unitsPerPackage||1))),P=Math.floor(_/T);d.update(h[p],{remainingUnits:_,remainingPackages:P})}d.delete(r)}),{restored:u}}const o=[];if(Array.isArray(a.items)&&a.items.length>0){const u={};if(a.allocationsByItem&&typeof a.allocationsByItem=="object")for(const d of Object.keys(a.allocationsByItem)){const A=a.allocationsByItem[d],f=String((A==null?void 0:A.productId)||d||"");if(!f)continue;const h=Array.isArray(A==null?void 0:A.allocations)?A.allocations:[];u[f]=h.map(m=>({batchId:String(m.batchId),qty:Math.max(0,Math.floor(Number(m.qty||m.quantity||0)))}))}if(Array.isArray(a.allocationsByItem))for(const d of a.allocationsByItem){const A=String((d==null?void 0:d.productId)||"");if(!A)continue;const f=Array.isArray(d==null?void 0:d.allocations)?d.allocations:[];u[A]=f.map(h=>({batchId:String(h.batchId),qty:Math.max(0,Math.floor(Number(h.qty||h.quantity||0)))}))}for(const d of a.items){const A=String((d==null?void 0:d.productId)||"");if(!A)continue;const f=Math.max(0,Math.floor(Number((d==null?void 0:d.qty)||(d==null?void 0:d.quantity)||0))),h=Array.isArray(d==null?void 0:d.allocations)?d.allocations.map(m=>({batchId:String(m.batchId),qty:Math.max(0,Math.floor(Number(m.qty||m.quantity||0)))})):u[A]||[];o.push({productId:A,productName:String((d==null?void 0:d.productName)||""),qty:f,allocations:h.length?h:void 0})}}else{const u=a.item||{},d=String(u.productId||a.productId||""),A=Math.max(0,Math.floor(Number(u.qty??a.quantity??0))),f=Array.isArray(a.allocations)?a.allocations.map(h=>({batchId:String(h.batchId),qty:Math.max(0,Math.floor(Number(h.qty||h.quantity||0)))})):[];d&&A>0&&o.push({productId:d,productName:String(u.productName||a.productName||""),qty:A,allocations:f.length?f:void 0})}if(o.length===0)return await Ks(ke,async u=>{u.delete(r)}),{restored:0};if(o.every(u=>Array.isArray(u.allocations)&&u.allocations.length>0)){let u=0;return await Ks(ke,async d=>{const A=[];for(const h of o)for(const m of h.allocations||[]){const p=Math.max(0,Math.floor(Number(m.qty||0)));u+=p,A.push({ref:Mt(ke,"inventory_candies",m.batchId),addBack:p})}const f=await Promise.all(A.map(h=>d.get(h.ref)));for(let h=0;h<A.length;h++){const m=f[h];if(!m.exists())continue;const p=m.data(),g=Cy(p),x=Math.max(0,Math.floor(Number(A[h].addBack||0))),y=g+x,b=Math.max(1,Math.floor(Number(p.unitsPerPackage||1))),_=Math.floor(y/b);d.update(A[h].ref,{remaining:y,remainingPackages:_,packages:_})}d.delete(r)}),{restored:u}}let c=0;return await Ks(ke,async u=>{const d={};for(const p of o){if(!p.productId||p.qty<=0)continue;const g=Ht(At(ke,"inventory_candies"),Xt("productId","==",p.productId)),y=(await jt(g)).docs.map(b=>{const _=b.data(),T=H3(_),P=Cy(_);return{id:b.id,date:String(_.date||""),baseUnits:T,remaining:P}}).sort((b,_)=>b.date.localeCompare(_.date));d[p.productId]=y}const A=[];for(const p of o){if(!p.productId||p.qty<=0)continue;if(Array.isArray(p.allocations)&&p.allocations.length>0){for(const y of p.allocations){const b=Math.max(0,Math.floor(Number(y.qty||0)));c+=b,A.push({id:y.batchId,addBack:b})}continue}const g=d[p.productId]||[];let x=p.qty;for(const y of g){if(x<=0)break;const b=Math.max(0,y.baseUnits-y.remaining);if(b<=0)continue;const _=Math.min(b,x);A.push({id:y.id,addBack:_}),c+=_,x-=_}for(const y of g){if(x<=0)break;const b=Math.min(x,p.qty);A.push({id:y.id,addBack:b}),c+=b,x-=b}}const f={};for(const p of A)f[p.id]=(f[p.id]||0)+Math.max(0,Math.floor(Number(p.addBack||0)));const h=Object.keys(f).map(p=>Mt(ke,"inventory_candies",p)),m=await Promise.all(h.map(p=>u.get(p)));for(let p=0;p<h.length;p++){const g=m[p];if(!g.exists())continue;const x=g.data(),y=Cy(x),b=Math.max(0,Math.floor(Number(f[h[p].id]||0))),_=y+b,T=Math.max(1,Math.floor(Number(x.unitsPerPackage||1))),P=Math.floor(_/T);u.update(h[p],{remaining:_,remainingPackages:P,packages:P})}u.delete(r)}),{restored:c}}async function WFe(e){return S1(e)}const wo=e=>`C$ ${(Number(e)||0).toFixed(2)}`;function Qj(e){return isFinite(e)?Math.round(e):0}function Kc(e){return e.unitsPerPackage>0&&e.totalUnits>0?Math.floor(e.totalUnits/e.unitsPerPackage):Math.max(0,Math.floor(Number(e.packages||0)))}function Vj(e){return typeof e.remainingPackages=="number"&&isFinite(e.remainingPackages)?Math.max(0,Math.floor(e.remainingPackages)):e.unitsPerPackage>0?Math.max(0,Math.floor(Number(e.remaining||0)/e.unitsPerPackage)):0}function XFe(e,t){var o,l;const r=String(e.date||""),n=String(t.date||"");if(r!==n)return n.localeCompare(r);const a=((o=e.createdAt)==null?void 0:o.seconds)??0;return(((l=t.createdAt)==null?void 0:l.seconds)??0)-a}function JFe(){const[e,t]=v.useState([]),[r,n]=v.useState([]),[a,s]=v.useState(!0),[o,l]=v.useState(""),[c,u]=v.useState(ir(gu(new Date),"yyyy-MM-dd")),[d,A]=v.useState(ir(pu(new Date),"yyyy-MM-dd")),[f,h]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(null),[y,b]=v.useState(""),[_,T]=v.useState(0),[P,C]=v.useState(!1),[S,I]=v.useState(""),[L,E]=v.useState(""),[j,R]=v.useState([]);v.useEffect(()=>{(async()=>{try{s(!0);const M=await jt(At(ke,"products_candies")),G=[];M.forEach(ne=>{const Q=ne.data();G.push({id:ne.id,name:Q.name??"(sin nombre)",category:Q.category??"(sin categora)"})}),t(G);const O=Ht(At(ke,"inventory_candies"),Ur("date","desc")),K=await jt(O),ee=[];K.forEach(ne=>{const Q=ne.data(),be=Number(Q.unitsPerPackage||0),Z=Number(Q.totalUnits??Q.quantity??(Q.packages||0)*(Q.unitsPerPackage||0)),z=Number(Q.remaining??Q.totalUnits??Z??0);ee.push({id:ne.id,productId:Q.productId,productName:Q.productName,category:Q.category,measurement:Q.measurement??"unidad",packages:Number(Q.packages||0),unitsPerPackage:be,totalUnits:Z,remaining:z,remainingPackages:typeof Q.remainingPackages=="number"?Number(Q.remainingPackages):void 0,providerPrice:Number(Q.providerPrice||0),subtotal:Number(Q.subtotal||0),totalRivas:Number(Q.totalRivas||0),totalSanJorge:Number(Q.totalSanJorge||0),totalIsla:Number(Q.totalIsla||0),gainRivas:Number(Q.gainRivas||0),gainSanJorge:Number(Q.gainSanJorge||0),gainIsla:Number(Q.gainIsla||0),unitPriceRivas:Number(Q.unitPriceRivas||0),unitPriceSanJorge:Number(Q.unitPriceSanJorge||0),unitPriceIsla:Number(Q.unitPriceIsla||0),date:Q.date,createdAt:Q.createdAt,status:Q.status??"PENDIENTE",orderId:Q.orderId??null})}),n(ee)}catch(M){console.error(M),l(" Error cargando inventario.")}finally{s(!1)}})()},[]);const W=v.useMemo(()=>r.filter(M=>!(c&&M.date<c||d&&M.date>d||f&&M.productId!==f||m&&String(M.category||"")!==m)),[r,c,d,f,m]),de=v.useMemo(()=>{const M=new Set;for(const G of e)G.category&&M.add(G.category);return Array.from(M).sort((G,O)=>G.localeCompare(O))},[e]),te=v.useMemo(()=>{const M=W.reduce((Q,be)=>Q+Kc(be),0),G=W.reduce((Q,be)=>Q+Vj(be),0),O=W.reduce((Q,be)=>{const Z=Kc(be);return Q+Number(be.providerPrice||0)*Z},0),K=W.reduce((Q,be)=>{const Z=Kc(be);return Q+Number(be.unitPriceRivas||0)*Z},0),ee=W.reduce((Q,be)=>{const Z=Kc(be);return Q+Number(be.unitPriceSanJorge||0)*Z},0),ne=W.reduce((Q,be)=>{const Z=Kc(be);return Q+Number(be.unitPriceIsla||0)*Z},0);return{totalPaquetes:M,totalPaquetesRestantes:G,totalSubtotal:O,totalRivas:K,totalSJ:ee,totalIsla:ne}},[W]),le=v.useMemo(()=>{let M=0,G=0;for(const O of W)O.status==="PENDIENTE"&&(M+=1),O.status==="PAGADO"&&(G+=1);return{totalLotes:W.length,pendientes:M,pagados:G}},[W]),ce=v.useMemo(()=>{const M=new Map;for(const O of W){const K=String(O.productId||"");K&&(M.has(K)||M.set(K,{batches:[]}),M.get(K).batches.push(O))}const G=[];for(const[O,K]of M.entries()){const ee=[...K.batches].sort(XFe),ne=ee[0],Q=ee.reduce((lt,bt)=>lt+Kc(bt),0),be=ee.reduce((lt,bt)=>lt+Vj(bt),0),Z=Number((ne==null?void 0:ne.providerPrice)||0),z=Number((ne==null?void 0:ne.unitPriceRivas)||0),X=Number((ne==null?void 0:ne.unitPriceIsla)||0),ve=ee.reduce((lt,bt)=>{const ot=Kc(bt);return lt+Number(bt.providerPrice||0)*ot},0),re=ee.reduce((lt,bt)=>{const ot=Kc(bt);return lt+Number(bt.unitPriceRivas||0)*ot},0),Ne=ee.reduce((lt,bt)=>{const ot=Kc(bt);return lt+Number(bt.unitPriceIsla||0)*ot},0),Me=re-ve,Ve=Ne-ve;let nt="",st;for(const lt of ee)(!nt||String(lt.date||"")>nt)&&(nt=String(lt.date||""),st=lt.createdAt);G.push({productId:O,productName:(ne==null?void 0:ne.productName)||"",category:(ne==null?void 0:ne.category)||"",totalPackages:Q,remainingPackages:be,providerPrice:Z,unitPriceRivas:z,unitPriceIsla:X,subtotal:ve,totalRivas:re,totalIsla:Ne,gainRivas:Me,gainIsla:Ve,lastDate:nt,lastCreatedAt:st,batchCount:ee.length})}return G.sort((O,K)=>String(K.lastDate).localeCompare(String(O.lastDate))),G},[W]),J=M=>{x(M.id),b(M.date),T(M.providerPrice),l("")},me=()=>{x(null),b(""),T(0)},Ee=async()=>{if(!g)return;const M=r.find(Ne=>Ne.id===g);if(!M)return;if(_<0){l("El precio proveedor no puede ser negativo.");return}const G=Kc(M),O=_*G,K=G>0?O/.8:0,ee=G>0?O/.85:0,ne=G>0?O/.7:0,Q=K-O,be=ee-O,Z=ne-O,z=G>0?Qj(K/G):0,X=G>0?Qj(ee/G):0,ve=G>0?Qj(ne/G):0,re=Mt(ke,"inventory_candies",g);await Lr(re,{date:y,providerPrice:_,subtotal:O,totalRivas:K,totalSanJorge:ee,totalIsla:ne,gainRivas:Q,gainSanJorge:be,gainIsla:Z,unitPriceRivas:z,unitPriceSanJorge:X,unitPriceIsla:ve}),n(Ne=>Ne.map(Me=>Me.id===g?{...Me,date:y,providerPrice:_,subtotal:O,totalRivas:K,totalSanJorge:ee,totalIsla:ne,gainRivas:Q,gainSanJorge:be,gainIsla:Z,unitPriceRivas:z,unitPriceSanJorge:X,unitPriceIsla:ve}:Me)),M.orderId&&await Uj(String(M.orderId)),l(" Lote de dulces actualizado"),me()},k=async M=>{confirm(`Marcar PAGADO el lote del ${M.date} (${M.productName})?`)&&(await Lr(Mt(ke,"inventory_candies",M.id),{status:"PAGADO"}),n(O=>O.map(K=>K.id===M.id?{...K,status:"PAGADO"}:K)),l(" Lote marcado como pagado"))},F=async M=>{confirm(`Eliminar el lote del ${M.date} (${M.productName})?`)&&(await fn(Mt(ke,"inventory_candies",M.id)),n(O=>O.filter(K=>K.id!==M.id)),M.orderId&&await Uj(String(M.orderId)),l(" Lote eliminado"))},V=async(M,G)=>{try{s(!0),l("");const O=Ht(At(ke,"inventory_candies"),Xt("productId","==",M),Ur("date","desc")),K=await jt(O),ee=[];K.forEach(ne=>{const Q=ne.data(),be=Number(Q.unitsPerPackage||0),Z=Number(Q.totalUnits??Q.quantity??(Q.packages||0)*(Q.unitsPerPackage||0)),z=Number(Q.remaining??Q.totalUnits??Z??0);ee.push({id:ne.id,productId:Q.productId,productName:Q.productName,category:Q.category,measurement:Q.measurement??"unidad",packages:Number(Q.packages||0),unitsPerPackage:be,totalUnits:Z,remaining:z,remainingPackages:typeof Q.remainingPackages=="number"?Number(Q.remainingPackages):void 0,providerPrice:Number(Q.providerPrice||0),subtotal:Number(Q.subtotal||0),totalRivas:Number(Q.totalRivas||0),totalSanJorge:Number(Q.totalSanJorge||0),totalIsla:Number(Q.totalIsla||0),gainRivas:Number(Q.gainRivas||0),gainSanJorge:Number(Q.gainSanJorge||0),gainIsla:Number(Q.gainIsla||0),unitPriceRivas:Number(Q.unitPriceRivas||0),unitPriceSanJorge:Number(Q.unitPriceSanJorge||0),unitPriceIsla:Number(Q.unitPriceIsla||0),date:Q.date,createdAt:Q.createdAt,status:Q.status??"PENDIENTE",orderId:Q.orderId??null})}),I(M),E(G),R(ee),C(!0)}catch(O){console.error(O),l(" Error abriendo detalle del producto.")}finally{s(!1)}},D=async(M,G)=>{const O=r.filter(ee=>ee.productId===M);if(confirm(`Eliminar COMPLETAMENTE "${G}"?
Esto eliminar ${O.length} lote(s) de este producto.`))try{s(!0),l("");const ee=Array.from(new Set(O.map(ne=>ne.orderId?String(ne.orderId):"").filter(Boolean)));for(const ne of O)await fn(Mt(ke,"inventory_candies",ne.id));n(ne=>ne.filter(Q=>Q.productId!==M)),l(" Producto eliminado (todos sus lotes).");for(const ne of ee)await Uj(ne);P&&S===M&&(C(!1),R([]),I(""),E(""))}catch(ee){console.error(ee),l(" Error eliminando lotes del producto.")}finally{s(!1)}};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx("h2",{className:"text-2xl font-bold",children:"Inventario Productos"})}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:M=>u(M.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:M=>A(M.target.value)})]}),i.jsxs("div",{className:"flex flex-col min-w-[220px]",children:[i.jsx("label",{className:"font-semibold",children:"Categora"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:m,onChange:M=>p(M.target.value),children:[i.jsx("option",{value:"",children:"Todas"}),de.map(M=>i.jsx("option",{value:M,children:M},M))]})]}),i.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[i.jsx("label",{className:"font-semibold",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:f,onChange:M=>h(M.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),e.map(M=>i.jsxs("option",{value:M.id,children:[M.name,"  ",M.category]},M.id))]})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),A(""),h(""),p("")},children:"Quitar filtro"})]}),i.jsx("div",{className:"bg-gray-50 p-2 rounded shadow border mb-2 text-xs md:text-sm",children:i.jsxs("div",{className:"flex flex-wrap gap-x-6 gap-y-1",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Lotes totales:"})," ",le.totalLotes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Lotes pendientes:"})," ",le.pendientes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Lotes pagados:"})," ",le.pagados]})]})}),i.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-sm md:text-base",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-y-1 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Paquetes ingresados:"})," ",te.totalPaquetes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Paquetes restantes:"})," ",te.totalPaquetesRestantes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Sub total:"})," ",wo(te.totalSubtotal)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total Rivas:"})," ",wo(te.totalRivas)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total San Jorge:"})," ",wo(te.totalSJ)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total Isla:"})," ",wo(te.totalIsla)]})]})}),i.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1200px] table-auto text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Paquetes totales"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio venta Rivas"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio venta Isla"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Subtotal"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Total Rivas"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Total Isla"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Ganancia bruta Rivas"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Ganancia bruta Isla"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"ltima fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-center",children:"Opciones"})]})}),i.jsx("tbody",{className:"whitespace-nowrap",children:a?i.jsx("tr",{children:i.jsx("td",{colSpan:14,className:"p-4 text-center",children:"Cargando"})}):ce.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:14,className:"p-4 text-center",children:"Sin productos"})}):ce.map(M=>i.jsxs("tr",{className:"text-left",children:[i.jsx("td",{className:"p-2 border",children:M.category||""}),i.jsxs("td",{className:"p-2 border max-w-[260px]",children:[i.jsx("span",{className:"block truncate",title:M.productName,children:M.productName}),i.jsxs("span",{className:"text-[10px] text-gray-500",children:["Lotes: ",M.batchCount]})]}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:M.totalPackages}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:M.remainingPackages}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:wo(M.providerPrice)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:wo(M.unitPriceRivas)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:wo(M.unitPriceIsla)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:wo(M.subtotal)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:wo(M.totalRivas)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:wo(M.totalIsla)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:wo(M.gainRivas)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:wo(M.gainIsla)}),i.jsx("td",{className:"p-2 border",children:M.lastDate||""}),i.jsx("td",{className:"p-2 border",children:i.jsxs("div",{className:"flex gap-1 justify-center flex-wrap",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>V(M.productId,M.productName),children:"Detalle"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>D(M.productId,M.productName),children:"Borrar"})]})})]},M.productId))})]})})}),o&&i.jsx("p",{className:"mt-2 text-sm",children:o}),P&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-4 rounded shadow-lg w-full max-w-6xl max-h-[90vh] overflow-y-auto text-sm",children:[i.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold",children:"Detalle del producto"}),i.jsxs("div",{className:"text-xs text-gray-600",children:[i.jsx("span",{className:"font-semibold",children:"Producto:"})," ",L||""," ",i.jsxs("span",{className:"ml-2",children:[i.jsx("span",{className:"font-semibold",children:"ID:"})," ",S]})]})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{C(!1),R([]),I(""),E(""),me()},children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1200px] table-auto text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border text-left",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Paquetes ingresados"}),i.jsx("th",{className:"p-2 border text-right",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border text-right",children:"Unidades"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio venta Rivas"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio venta Isla"}),i.jsx("th",{className:"p-2 border",children:"Nmero orden"}),i.jsx("th",{className:"p-2 border",children:"Status"}),i.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),i.jsx("tbody",{className:"whitespace-nowrap",children:j.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center text-gray-500",children:"Sin lotes"})}):j.map(M=>{const G=g===M.id,O=Kc(M),K=Vj(M);return i.jsxs("tr",{className:"text-left",children:[i.jsx("td",{className:"p-2 border align-top",children:G?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:y,onChange:ee=>b(ee.target.value)}):M.date}),i.jsx("td",{className:"p-2 border align-top",children:M.category||""}),i.jsxs("td",{className:"p-2 border align-top max-w-[260px]",children:[i.jsx("span",{className:"block truncate",title:M.productName,children:M.productName}),i.jsxs("span",{className:"text-[10px] text-gray-500",children:["Lote ID: ",M.id]})]}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:O}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:K}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:M.totalUnits}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:G?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(_)?"":_,onChange:ee=>T(Math.max(0,parseFloat(ee.target.value||"0")))}):wo(M.providerPrice)}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:wo(M.unitPriceRivas)}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:wo(M.unitPriceIsla)}),i.jsx("td",{className:"p-2 border align-top",children:M.orderId?String(M.orderId):""}),i.jsx("td",{className:"p-2 border align-top",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] md:text-xs ${M.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:M.status})}),i.jsx("td",{className:"p-2 border align-top",children:G?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Ee,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:me,children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-1 justify-center flex-wrap",children:[M.status==="PENDIENTE"&&i.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:()=>k(M),children:"Pagar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 text-black hover:bg-yellow-500 text-xs",onClick:()=>J(M),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>F(M),children:"Borrar"})]})})]},M.id)})})]})}),i.jsx("div",{className:"mt-3 flex justify-end",children:i.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>D(S,L),children:"Borrar producto (todos los lotes)"})})]})})]})}const Hj=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],tc=e=>`C$ ${(Number(e)||0).toFixed(2)}`;function dv(e){const t="+505 ";if(!e.startsWith(t)){const n=e.replace(/\D/g,"");return t+n.slice(0,8)}const r=e.slice(t.length).replace(/\D/g,"");return t+r.slice(0,8)}async function m7(e){const t=Ht(At(ke,"ar_movements"),Xt("ref.saleId","==",e)),r=await jt(t);await Promise.all(r.docs.map(n=>fn(Mt(ke,"ar_movements",n.id))))}function YFe({role:e="",sellerCandyId:t="",currentUserEmail:r}){const n=String(e||"").trim().toLowerCase(),a=String(t||"").trim(),s=n==="vendedor_dulces",o=n==="admin",[l,c]=v.useState([]),[u,d]=v.useState(!1),[A,f]=v.useState(!1),[h,m]=v.useState(null),[p,g]=v.useState([]),x=async pe=>{d(!0),f(!0),m(pe),g([]);try{const Se=(await jt(Ht(At(ke,"sales_candies"),Xt("__name__","==",pe)))).docs[0],Ye=Se==null?void 0:Se.data(),Xe=(Array.isArray(Ye==null?void 0:Ye.items)?Ye.items:Ye!=null&&Ye.item?[Ye.item]:[]).map(qe=>({productName:String(qe.productName||""),qty:Number(qe.qty||0),unitPrice:Number(qe.unitPrice||0),discount:Number(qe.discount||0),total:Number(qe.total||0)}));g(Xe)}catch(De){console.error(De)}finally{f(!1)}},[y,b]=v.useState(""),[_,T]=v.useState("+505 "),[P,C]=v.useState(""),[S,I]=v.useState(""),[L,E]=v.useState("ACTIVO"),[j,R]=v.useState(0),[W,de]=v.useState(""),[te,le]=v.useState(0),[ce,J]=v.useState([]),[me,Ee]=v.useState(!0),[k,F]=v.useState(""),[V,D]=v.useState(null),[M,G]=v.useState(""),[O,K]=v.useState("+505 "),[ee,ne]=v.useState(""),[Q,be]=v.useState(""),[Z,z]=v.useState("ACTIVO"),[X,ve]=v.useState(0),[re,Ne]=v.useState(""),[Me,Ve]=v.useState(!1),[nt,st]=v.useState(null),[lt,bt]=v.useState(!1),[ot,Le]=v.useState([]),[Ze,ye]=v.useState({saldoActual:0,totalAbonado:0,totalCargos:0}),[xe,ue]=v.useState(!1),[Ge,Je]=v.useState(0),[ht,Ue]=v.useState(new Date().toISOString().slice(0,10)),[rt,Qe]=v.useState(""),[Pe,ze]=v.useState(!1),[it,Bt]=v.useState(null),[ut,It]=v.useState(""),[$t,hr]=v.useState(0),[_e,dt]=v.useState(""),[gt,Ce]=v.useState(!1);v.useEffect(()=>{(async()=>{try{if(Ee(!0),s&&!a){J([]),F(" Este usuario no tiene vendedor asociado (sellerCandyId vaco).");return}const pe=await jt(At(ke,"sellers_candies")),De=[];pe.forEach(Xe=>{const qe=Xe.data(),at=String(qe.status||"ACTIVO");at==="ACTIVO"&&De.push({id:Xe.id,name:String(qe.name||""),status:at})}),c(De);const Se=s?Ht(At(ke,"customers_candies"),Xt("vendorId","==",a),Ur("createdAt","desc")):Ht(At(ke,"customers_candies"),Ur("createdAt","desc")),Ye=await jt(Se),We=[];Ye.forEach(Xe=>{const qe=Xe.data();We.push({id:Xe.id,name:qe.name??"",phone:qe.phone??"+505 ",place:qe.place??"",notes:qe.notes??"",status:qe.status??"ACTIVO",creditLimit:Number(qe.creditLimit??0),createdAt:qe.createdAt??zt.now(),balance:0,sellerId:qe.sellerId||"",vendorId:qe.vendorId||"",vendorName:qe.vendorName||"",initialDebt:Number(qe.initialDebt||0)})});for(const Xe of We)try{const qe=Ht(At(ke,"ar_movements"),Xt("customerId","==",Xe.id)),at=await jt(qe);let mt=0;at.forEach(Kt=>mt+=Number(Kt.data().amount||0)),Xe.balance=mt}catch{Xe.balance=0}J(We)}catch(pe){console.error(pe),F(" Error cargando clientes.")}finally{Ee(!1)}})()},[s,a]);const et=()=>{b(""),T("+505 "),C(""),I(""),E("ACTIVO"),R(0),de(""),le(0)},yt=async pe=>{var We;if(pe.preventDefault(),F(""),!y.trim()){F("Ingresa el nombre.");return}const De=dv(_);if(De.length<6){F("Telfono incompleto.");return}const Se=s?a:String(W||"").trim(),Ye=Se&&((We=l.find(Xe=>Xe.id===Se))==null?void 0:We.name)||"";try{const Xe=await en(At(ke,"customers_candies"),{name:y.trim(),phone:De,place:P||"",notes:S||"",status:L,creditLimit:Number(j||0),vendorId:Se,vendorName:Ye,initialDebt:Number(te||0),createdAt:zt.now()});J(qe=>[{id:Xe.id,name:y.trim(),phone:De,place:P||"",notes:S||"",status:L,creditLimit:Number(j||0),vendorId:Se,vendorName:Ye,initialDebt:Number(te||0),createdAt:zt.now(),balance:0},...qe]),et(),Ce(!1),F(" Cliente creado")}catch(Xe){console.error(Xe),F(" Error al crear cliente")}},Pt=pe=>{if(s){F(" No permitido: vendedores no editan clientes desde el listado.");return}D(pe.id),G(pe.name),K(pe.phone||"+505 "),ne(pe.place||""),be(pe.notes||""),z(pe.status||"ACTIVO"),ve(Number(pe.creditLimit||0)),Ne(String(pe.vendorId||""))},Lt=()=>{D(null),G(""),K("+505 "),ne(""),be(""),z("ACTIVO"),ve(0),Ne("")},qt=async()=>{var qe;if(s){F(" No permitido.");return}if(!V)return;const pe=dv(O);if(!M.trim()){F("Ingresa el nombre.");return}const De=ce.find(at=>at.id===V),Se=String((De==null?void 0:De.vendorId)||""),Ye=s?a:String(re||"");if(s&&Se&&Se!==a){F(" Este cliente pertenece a otro vendedor.");return}if(o&&Se&&Ye&&Se!==Ye){F(" Este cliente ya est asociado a otro vendedor. Primero desasocia (deja vendedor en ) y guarda; luego lo puedes asignar.");return}const We=s?a:String(re||""),Xe=We&&((qe=l.find(at=>at.id===We))==null?void 0:qe.name)||"";try{await Lr(Mt(ke,"customers_candies",V),{name:M.trim(),phone:pe,place:ee||"",notes:Q||"",status:Z,creditLimit:Number(X||0),vendorId:We,vendorName:Xe}),J(at=>at.map(mt=>mt.id===V?{...mt,name:M.trim(),phone:pe,place:ee||"",notes:Q||"",status:Z,creditLimit:Number(X||0),vendorId:We,vendorName:Xe}:mt)),Lt(),F(" Cliente actualizado")}catch(at){console.error(at),F(" Error al actualizar")}},wt=async pe=>{if(confirm(`Eliminar al cliente "${pe.name}"?
Se devolvern al inventario todos los dulces de sus compras y se borrarn sus movimientos.`))try{Ee(!0);const Se=Ht(At(ke,"sales_candies"),Xt("customerId","==",pe.id)),Ye=await jt(Se);for(const qe of Ye.docs){const at=qe.id;try{await S1(at)}catch(mt){console.warn("restoreSaleAndDeleteCandy error",mt);try{await fn(Mt(ke,"sales_candies",at))}catch{}}await m7(at)}const We=Ht(At(ke,"ar_movements"),Xt("customerId","==",pe.id)),Xe=await jt(We);await Promise.all(Xe.docs.map(qe=>fn(Mt(ke,"ar_movements",qe.id)))),await fn(Mt(ke,"customers_candies",pe.id)),J(qe=>qe.filter(at=>at.id!==pe.id)),F(" Cliente eliminado y dulces devueltos al inventario")}catch(Se){console.error(Se),F(" No se pudo eliminar el cliente.")}finally{Ee(!1)}},ie=async pe=>{st(pe),Le([]),ye({saldoActual:0,totalAbonado:0,totalCargos:0}),Ve(!0),ue(!1),Je(0),Ue(new Date().toISOString().slice(0,10)),Qe(""),Bt(null),bt(!0);try{const De=Ht(At(ke,"ar_movements"),Xt("customerId","==",pe.id)),Se=await jt(De),Ye=[];Se.forEach(We=>{var qe,at;const Xe=We.data();Ye.push({id:We.id,date:Xe.date??((at=(qe=Xe.createdAt)==null?void 0:qe.toDate)!=null&&at.call(qe)?Xe.createdAt.toDate().toISOString().slice(0,10):""),type:Xe.type??"CARGO",amount:Number(Xe.amount||0),ref:Xe.ref||{},comment:Xe.comment||"",createdAt:Xe.createdAt})}),Ye.sort((We,Xe)=>{var mt,Kt;if(We.date!==Xe.date)return We.date.localeCompare(Xe.date);const qe=((mt=We.createdAt)==null?void 0:mt.seconds)||0,at=((Kt=Xe.createdAt)==null?void 0:Kt.seconds)||0;return qe-at}),Le(Ye),se(Ye)}catch(De){console.error(De),F(" No se pudo cargar el estado de cuenta")}finally{bt(!1)}},se=pe=>{const De=pe.reduce((We,Xe)=>We+(Number(Xe.amount)||0),0),Se=pe.filter(We=>Number(We.amount)<0).reduce((We,Xe)=>We+Math.abs(Number(Xe.amount)||0),0),Ye=pe.filter(We=>Number(We.amount)>0).reduce((We,Xe)=>We+(Number(Xe.amount)||0),0);ye({saldoActual:De,totalAbonado:Se,totalCargos:Ye})},he=async()=>{if(!nt)return;F("");const pe=Number(Ge||0);if(!(pe>0)){F("Ingresa un monto de abono mayor a 0.");return}const De=parseFloat(pe.toFixed(2));if(!ht){F("Selecciona la fecha del abono.");return}try{ze(!0);const Se={customerId:nt.id,type:"ABONO",amount:-De,date:ht,comment:rt||"",createdAt:zt.now()},We={id:(await en(At(ke,"ar_movements"),Se)).id,date:ht,type:"ABONO",amount:-De,comment:rt||"",createdAt:zt.now()},Xe=[...ot,We].sort((qe,at)=>{var Jt,_r;if(qe.date!==at.date)return qe.date.localeCompare(at.date);const mt=((Jt=qe.createdAt)==null?void 0:Jt.seconds)||0,Kt=((_r=at.createdAt)==null?void 0:_r.seconds)||0;return mt-Kt});Le(Xe),se(Xe),J(qe=>qe.map(at=>at.id===nt.id?{...at,balance:(at.balance||0)-De}:at)),st(qe=>qe&&{...qe,balance:(qe.balance||0)-De}),Je(0),Qe(""),Ue(new Date().toISOString().slice(0,10)),ue(!1),F(" Abono registrado")}catch(Se){console.error(Se),F(" Error al registrar el abono")}finally{ze(!1)}},Ae=pe=>{Bt(pe.id),It(pe.date||new Date().toISOString().slice(0,10)),hr(Math.abs(Number(pe.amount||0))),dt(pe.comment||"")},Be=()=>{Bt(null),It(""),hr(0),dt("")},Fe=async()=>{if(!it)return;const pe=ot.findIndex(We=>We.id===it);if(pe===-1)return;const De=ot[pe],Se=Number($t||0);if(!(Se>0)){F("El monto debe ser mayor a 0.");return}const Ye=De.type==="ABONO"?-parseFloat(Se.toFixed(2)):+parseFloat(Se.toFixed(2));try{await Lr(Mt(ke,"ar_movements",it),{date:ut,amount:Ye,comment:_e||""});const We=[...ot];We[pe]={...De,date:ut,amount:Ye,comment:_e||""},We.sort((qe,at)=>{var Jt,_r;if(qe.date!==at.date)return qe.date.localeCompare(at.date);const mt=((Jt=qe.createdAt)==null?void 0:Jt.seconds)||0,Kt=((_r=at.createdAt)==null?void 0:_r.seconds)||0;return mt-Kt}),Le(We),se(We);const Xe=We.reduce((qe,at)=>qe+(Number(at.amount)||0),0);J(qe=>qe.map(at=>at.id===(nt==null?void 0:nt.id)?{...at,balance:Xe}:at)),st(qe=>qe&&{...qe,balance:Xe}),Be(),F(" Movimiento actualizado")}catch(We){console.error(We),F(" Error al actualizar movimiento")}},ae=async pe=>{var Se,Ye;if(confirm(`Eliminar este movimiento (${pe.type==="ABONO"?"Abono":"Compra"}) del ${pe.date}?${pe.type==="CARGO"&&((Se=pe.ref)!=null&&Se.saleId)?`
Se devolvern al inventario los dulces de esa venta.`:""}`))try{if(Ee(!0),pe.type==="CARGO"&&((Ye=pe.ref)!=null&&Ye.saleId)){try{await S1(pe.ref.saleId)}catch(qe){console.warn("restoreSaleAndDeleteCandy error",qe),Ee(!1),F(" No se pudo devolver inventario de la venta.");return}await m7(pe.ref.saleId)}else await fn(Mt(ke,"ar_movements",pe.id));const We=ot.filter(qe=>{var at,mt;return pe.type==="CARGO"&&((at=pe.ref)!=null&&at.saleId)?((mt=qe.ref)==null?void 0:mt.saleId)!==pe.ref.saleId:qe.id!==pe.id});Le(We),se(We);const Xe=We.reduce((qe,at)=>qe+(Number(at.amount)||0),0);J(qe=>qe.map(at=>at.id===(nt==null?void 0:nt.id)?{...at,balance:Xe}:at)),st(qe=>qe&&{...qe,balance:Xe}),F(" Movimiento eliminado")}catch(We){console.error(We),F(" Error al eliminar movimiento")}finally{Ee(!1)}},Oe=v.useMemo(()=>[...ce].sort((pe,De)=>{var Se,Ye;return pe.status!==De.status?pe.status==="BLOQUEADO"?1:-1:(((Se=De.createdAt)==null?void 0:Se.seconds)||0)-(((Ye=pe.createdAt)==null?void 0:Ye.seconds)||0)}),[ce]);return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Dulces)"}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>{Ce(!0),s&&de(a)},type:"button",children:"Crear Cliente"})]}),i.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[i.jsx("div",{className:"hidden md:block",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Telfono"}),i.jsx("th",{className:"p-2 border",children:"Vendedor"}),i.jsx("th",{className:"p-2 border",children:"Lugar"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Lmite"}),i.jsx("th",{className:"p-2 border",children:"Saldo"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:me?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Cargando"})}):Oe.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Sin clientes"})}):Oe.map(pe=>{var Se;const De=V===pe.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:(Se=pe.createdAt)!=null&&Se.toDate?pe.createdAt.toDate().toISOString().slice(0,10):""}),i.jsx("td",{className:"p-2 border text-left",children:De?i.jsx("input",{className:"w-full border p-1 rounded",value:M,onChange:Ye=>G(Ye.target.value)}):i.jsx("div",{className:"font-medium",children:pe.name})}),i.jsx("td",{className:"p-2 border",children:De?i.jsx("input",{className:"w-full border p-1 rounded",value:O,onChange:Ye=>K(dv(Ye.target.value))}):pe.phone}),i.jsx("td",{className:"p-2 border",children:De?i.jsxs("select",{className:"w-full border p-1 rounded text-xs",value:s?a:re,onChange:Ye=>Ne(Ye.target.value),disabled:s,title:"Vendedor asociado",children:[i.jsx("option",{value:"",children:" Sin vendedor "}),l.map(Ye=>i.jsx("option",{value:Ye.id,children:Ye.name},Ye.id))]}):pe.vendorName||""}),i.jsx("td",{className:"p-2 border",children:De?i.jsxs("select",{className:"w-full border p-1 rounded",value:ee,onChange:Ye=>ne(Ye.target.value),children:[i.jsx("option",{value:"",children:""}),Hj.map(Ye=>i.jsx("option",{value:Ye,children:Ye},Ye))]}):pe.place||""}),i.jsx("td",{className:"p-2 border",children:De?i.jsxs("select",{className:"w-full border p-1 rounded",value:Z,onChange:Ye=>z(Ye.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${pe.status==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:pe.status})}),i.jsx("td",{className:"p-2 border",children:De?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(X)?"":X,onChange:Ye=>ve(Math.max(0,Number(Ye.target.value||0)))}):tc(pe.creditLimit||0)}),i.jsx("td",{className:"p-2 border font-semibold",children:tc(pe.balance||0)}),i.jsx("td",{className:"p-2 border",children:De?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:Q,onChange:Ye=>be(Ye.target.value),maxLength:500}):i.jsx("span",{title:pe.notes||"",children:(pe.notes||"").length>40?(pe.notes||"").slice(0,40)+"":pe.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:De?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:qt,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Lt,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Pt(pe),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",onClick:()=>wt(pe),disabled:!o,title:o?"Borrar":"Solo admin",children:"Borrar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>ie(pe),title:"Ver compras y abonos",children:"Estado de cuenta"})]})})})]},pe.id)})})]})}),i.jsx("div",{className:"md:hidden",children:me?i.jsx("div",{className:"p-4 text-center text-sm",children:"Cargando"}):Oe.length===0?i.jsx("div",{className:"p-4 text-center text-sm",children:"Sin clientes"}):i.jsx("div",{className:"space-y-3",children:Oe.map(pe=>{var Ye;const De=V===pe.id,Se=(Ye=pe.createdAt)!=null&&Ye.toDate?pe.createdAt.toDate().toISOString().slice(0,10):"";return i.jsxs("div",{className:"border rounded-2xl shadow-sm bg-white p-3",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Nombre"}),i.jsx("div",{className:"font-semibold truncate",children:De?i.jsx("input",{className:"w-full border p-2 rounded",value:M,onChange:We=>G(We.target.value)}):pe.name})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Estado"}),i.jsx("div",{children:De?i.jsxs("select",{className:"border p-2 rounded text-sm",value:Z,onChange:We=>z(We.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):i.jsx("span",{className:`inline-flex px-2 py-0.5 rounded text-xs ${pe.status==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:pe.status})})]})]}),i.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Fecha"}),i.jsx("div",{className:"font-medium",children:Se})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Telfono"}),i.jsx("div",{className:"font-medium",children:De?i.jsx("input",{className:"w-full border p-2 rounded",value:O,onChange:We=>K(dv(We.target.value))}):pe.phone})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Vendedor"}),i.jsx("div",{className:"font-medium",children:De?i.jsxs("select",{className:"w-full border p-2 rounded text-sm",value:s?a:re,onChange:We=>Ne(We.target.value),disabled:s,title:"Vendedor asociado",children:[i.jsx("option",{value:"",children:" Sin vendedor "}),l.map(We=>i.jsx("option",{value:We.id,children:We.name},We.id))]}):pe.vendorName||""})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Lugar"}),i.jsx("div",{className:"font-medium",children:De?i.jsxs("select",{className:"w-full border p-2 rounded text-sm",value:ee,onChange:We=>ne(We.target.value),children:[i.jsx("option",{value:"",children:""}),Hj.map(We=>i.jsx("option",{value:We,children:We},We))]}):pe.place||""})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Lmite"}),i.jsx("div",{className:"font-medium",children:De?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:Number.isNaN(X)?"":X,onChange:We=>ve(Math.max(0,Number(We.target.value||0)))}):tc(pe.creditLimit||0)})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Saldo"}),i.jsx("div",{className:"font-semibold",children:tc(pe.balance||0)})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Comentario"}),i.jsx("div",{className:"font-medium",children:De?i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Q,onChange:We=>be(We.target.value),maxLength:500}):i.jsx("div",{title:pe.notes||"",children:(pe.notes||"").trim()?pe.notes:""})})]})]}),i.jsx("div",{className:"mt-3",children:De?i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-blue-600 hover:bg-blue-700",onClick:qt,children:"Guardar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl bg-gray-200 hover:bg-gray-300",onClick:Lt,children:"Cancelar"})]}):i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Pt(pe),children:"Editar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",onClick:()=>wt(pe),disabled:!o,title:o?"Borrar":"Solo admin",children:"Borrar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>ie(pe),children:"Estado"})]})})]},pe.id)})})})]}),k&&i.jsx("p",{className:"mt-2 text-sm",children:k}),gt&&nu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>Ce(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ce(!1),type:"button",children:"Cerrar"})]}),i.jsxs("form",{onSubmit:yt,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:y,onChange:pe=>b(pe.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded",value:_,onChange:pe=>T(dv(pe.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:P,onChange:pe=>C(pe.target.value),children:[i.jsx("option",{value:"",children:""}),Hj.map(pe=>i.jsx("option",{value:pe,children:pe},pe))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:L,onChange:pe=>E(pe.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor asociado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:s?a:W,onChange:pe=>de(pe.target.value),disabled:s,children:[i.jsx("option",{value:"",children:" Sin vendedor "}),l.map(pe=>i.jsx("option",{value:pe.id,children:pe.name},pe.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Deuda inicial"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:te===0?"":te,onChange:pe=>le(Math.max(0,Number(pe.target.value||0))),placeholder:"Ej: 1500"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Este valor queda fijo (no cambia)."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:j===0?"":j,onChange:pe=>R(Math.max(0,Number(pe.target.value||0))),placeholder:"Ej: 2000"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:S,onChange:pe=>I(pe.target.value),maxLength:500,placeholder:"Notas del cliente"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[S.length,"/500"]})]}),i.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ce(!1),children:"Cancelar"}),i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),Me&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(nt==null?void 0:nt.name)||""]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{Je(0),Ue(new Date().toISOString().slice(0,10)),Qe(""),ue(!0)},children:"Abonar"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ve(!1),children:"Cerrar"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Deuda inicial"}),i.jsx("div",{className:"text-xl font-semibold",children:tc(Number((nt==null?void 0:nt.initialDebt)||0))})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-xl font-semibold",children:tc(Ze.saldoActual)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),i.jsx("div",{className:"text-xl font-semibold",children:tc(Ze.totalAbonado)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),i.jsx("div",{className:"text-xl font-semibold",children:tc(Ze.saldoActual)})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Referencia"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:lt?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):ot.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):ot.map(pe=>{var Se,Ye;const De=it===pe.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:De?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:ut,onChange:We=>It(We.target.value)}):pe.date||""}),i.jsx("td",{className:"p-2 border",children:pe.amount>=0?(Se=pe.ref)!=null&&Se.saleId?i.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",title:"Ver dulces de esta compra",onClick:()=>x(pe.ref.saleId),children:"COMPRA (CARGO)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (CARGO)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),i.jsx("td",{className:"p-2 border",children:(Ye=pe.ref)!=null&&Ye.saleId?`Venta #${pe.ref.saleId}`:""}),i.jsx("td",{className:"p-2 border",children:De?i.jsx("input",{className:"w-full border p-1 rounded",value:_e,onChange:We=>dt(We.target.value),placeholder:"Comentario"}):i.jsx("span",{title:pe.comment||"",children:(pe.comment||"").length>40?(pe.comment||"").slice(0,40)+"":pe.comment||""})}),i.jsx("td",{className:"p-2 border font-semibold",children:De?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN($t)?"":$t,onChange:We=>{const Xe=Number(We.target.value||0),qe=Number.isFinite(Xe)?Math.max(0,parseFloat(Xe.toFixed(2))):0;hr(qe)},placeholder:"0.00",title:pe.type==="ABONO"?"Se guardar como negativo":"Se guardar como positivo"}):tc(pe.amount)}),i.jsx("td",{className:"p-2 border",children:De?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Fe,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Be,children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Ae(pe),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>ae(pe),children:"Borrar"})]})})]},pe.id)})})]})})]})}),xe&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(nt==null?void 0:nt.name)||""]}),i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:ht,onChange:pe=>Ue(pe.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto del abono"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Ge===0?"":Ge,onChange:pe=>{const De=Number(pe.target.value||0),Se=Number.isFinite(De)?Math.max(0,parseFloat(De.toFixed(2))):0;Je(Se)},placeholder:"0.00"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se guarda con 2 decimales (se registrar como ABONO negativo)."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:rt,onChange:pe=>Qe(pe.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[rt.length,"/250"]})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ue(!1),disabled:Pe,children:"Cancelar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:he,disabled:Pe,children:Pe?"Guardando...":"Guardar abono"})]})]})}),u&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[65]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Dulces vendidos"," ",h?` #${h}`:""]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>d(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:A?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):p.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):p.map((pe,De)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:pe.productName}),i.jsx("td",{className:"p-2 border text-right",children:pe.qty}),i.jsx("td",{className:"p-2 border text-right",children:tc(pe.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:tc(pe.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:tc(pe.total)})]},De))})]})})]})})]})}const zf=e=>`C$ ${(Number(e)||0).toFixed(2)}`,ZFe=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"];function e3e(e){switch(e){case"RIVAS":return"Rivas";case"SAN_JORGE":return"San Jorge";case"ISLA":return"Isla de Ometepe";default:return""}}function t3e(e){switch(e){case"Rivas":return"RIVAS";case"San Jorge":return"SAN_JORGE";case"Isla Ometepe":return"ISLA";default:return"RIVAS"}}function r3e(e){const{saleId:t,date:r,customerName:n,branch:a,items:s,total:o,vendorName:l,vendorCommissionPercent:c,vendorCommissionAmount:u}=e,d=new Ar;let A=12;if(d.setFontSize(16),d.text("Multiservicios Ortiz",10,A),A+=6,d.setFontSize(12),d.text("Recibo de venta certificada",10,A),A+=8,d.setFontSize(12),d.text(`Fecha: ${r}`,10,A),A+=5,d.text(`Cliente: ${n||"Cliente Mostrador"}`,10,A),A+=5,d.text(`Sucursal: ${e3e(a)}`,10,A),A+=5,d.text(`Autorizado: ${t}`,10,A),A+=5,l&&(d.text(`Vendedor: ${l}`,10,A),A+=5),typeof c=="number"){const f=Number(u||0).toFixed(2),h=c.toFixed(2);d.text(`Comisin vendedor: ${h}%  C$ ${f}`,10,A),A+=8}else A+=3;d.setFontSize(12),d.text("Producto",10,A),d.text("Paquetes",110,A,{align:"right"}),d.text("Precio.",150,A,{align:"right"}),d.text("Subtotal",190,A,{align:"right"}),A+=4,d.line(10,A,190,A),A+=4,s.forEach(f=>{A>270&&(d.addPage(),A=12);const h=(f.productName||"").length>50?f.productName.slice(0,47)+"...":f.productName;d.text(h,10,A),d.text(String(f.qty),110,A,{align:"right"}),d.text(`C$ ${Number(f.unitPrice||0).toFixed(2)}`,150,A,{align:"right"}),d.text(`C$ ${Number(f.total||0).toFixed(2)}`,190,A,{align:"right"}),A+=5}),A+=4,d.line(10,A,190,A),A+=6,d.setFontSize(13),d.text(`Total: C$ ${Number(o||0).toFixed(2)}`,190,A,{align:"right"}),A+=6,d.setFontSize(9),d.text("Gracias por su compra.",10,A),d.save(`venta_dulces_${t}.pdf`)}async function p7(e,t){if(!e||!t)return 0;const r=Ht(At(ke,"inventory_candies_sellers"),Xt("sellerId","==",t),Xt("productId","==",e)),n=await jt(r);let a=0;return n.forEach(s=>{const o=s.data(),l=Number(o.remainingUnits??o.remaining??o.totalUnits??0);l>0&&(a+=l)}),a}const g7=()=>{const e=new Date;return e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e.toISOString().slice(0,10)};async function n3e(e){const{productId:t,vendorId:r,quantityUnits:n,saleDate:a,saleId:s}=e;let o=Math.max(0,Math.floor(Number(n||0)));const l=[];if(!t||!r||o<=0)return{allocations:[]};const c=Ht(At(ke,"inventory_candies_sellers"),Xt("sellerId","==",r),Xt("productId","==",t),Xt("remainingUnits",">",0),Ur("date","asc"),Ur("createdAt","asc")),u=await jt(c);for(const d of u.docs){if(o<=0)break;const A=d.data(),f=Number(A.remainingUnits||0);if(f<=0)continue;const h=Math.min(f,o),m=f-h,p=Math.max(1,Math.floor(Number(A.unitsPerPackage||1))),g=Math.floor(m/p);await Lr(d.ref,{remainingUnits:m,remainingPackages:g}),l.push({inventorySellerId:d.id,productId:t,units:h,saleDate:a,saleId:s}),o-=h}return o>0&&console.warn("[allocateSaleFIFOCandyFromVendor] No alcanz el inventario del vendedor, faltaron unidades.",{productId:t,vendorId:r,remaining:o}),{allocations:l}}function x7(e){const t="+505 ";if(!e.startsWith(t)){const n=e.replace(/\D/g,"");return t+n.slice(0,8)}const r=e.slice(t.length).replace(/\D/g,"");return t+r.slice(0,8)}function a3e({role:e="",sellerCandyId:t="",currentUserEmail:r}){const[n,a]=v.useState([]),[s,o]=v.useState([]),[l,c]=v.useState([]),[u,d]=v.useState({}),[A,f]=v.useState("CONTADO"),[h,m]=v.useState("RIVAS"),[p,g]=v.useState(""),[x,y]=v.useState(""),[b,_]=v.useState(g7()),[T,P]=v.useState(""),[C,S]=v.useState(!1),[I,L]=v.useState(""),[E,j]=v.useState([]),R=v.useMemo(()=>E.reduce((Ue,rt)=>Ue+(rt.qtyPackages||0),0),[E]),W=v.useMemo(()=>E.reduce((Ue,rt)=>Ue+(rt.qtyPackages||0)*(rt.unitsPerPackage||1),0),[E]),de=v.useMemo(()=>{const Ue=E.reduce((rt,Qe)=>{const Pe=(Number(Qe.pricePerPackage)||0)*(Qe.qtyPackages||0),ze=Number(Qe.discount)||0,it=Math.max(0,Pe-ze);return rt+it},0);return Math.floor(Ue*100)/100},[E]),[te,le]=v.useState(0),[ce,J]=v.useState(""),[me,Ee]=v.useState(!1),[k,F]=v.useState(!1),[V,D]=v.useState(""),[M,G]=v.useState("+505 "),[O,K]=v.useState(""),[ee,ne]=v.useState(""),[Q,be]=v.useState("ACTIVO"),[Z,z]=v.useState(0),[X,ve]=v.useState(""),re=()=>{D(""),G("+505 "),K(""),ne(""),be("ACTIVO"),z(0)},Ne=v.useMemo(()=>n.find(Ue=>Ue.id===p),[n,p]),Me=v.useMemo(()=>C&&T?n.filter(Ue=>(Ue.vendorId??Ue.sellerId??"")===T):n,[n,C,T]),Ve=(Ne==null?void 0:Ne.balance)||0,nt=A==="CREDITO"?Ve+Math.max(0,Number(de||0))-Math.max(0,Number(te||0)):0,st=v.useMemo(()=>l.find(Ue=>Ue.id===T)||null,[l,T]),lt=(st==null?void 0:st.commissionPercent)||0,bt=v.useMemo(()=>{const Ue=Number(de||0),rt=Number(lt||0),Qe=Ue*rt/100;return Number(Qe.toFixed(2))},[de,lt]);v.useEffect(()=>{(async()=>{const Ue=Ht(At(ke,"customers_candies"),Ur("createdAt","desc")),rt=await jt(Ue),Qe=[];rt.forEach(Bt=>{const ut=Bt.data();Qe.push({id:Bt.id,name:ut.name??"",phone:ut.phone??"+505 ",place:ut.place??"",status:ut.status??"ACTIVO",creditLimit:Number(ut.creditLimit??0),balance:0,sellerId:ut.sellerId??ut.vendorId??"",vendorId:ut.vendorId??ut.sellerId??""})});for(const Bt of Qe)try{const ut=Ht(At(ke,"ar_movements"),Xt("customerId","==",Bt.id)),It=await jt(ut);let $t=0;It.forEach(hr=>$t+=Number(hr.data().amount||0)),Bt.balance=$t}catch{Bt.balance=0}a(Qe);const Pe=Ht(At(ke,"products_candies"),Ur("createdAt","desc")),ze=await jt(Pe),it=[];ze.forEach(Bt=>{const ut=Bt.data();it.push({id:Bt.id,name:ut.name??"(sin nombre)",sku:ut.sku??"",unitsPerPackage:Number(ut.unitsPerPackage??1),priceRivas:Number(ut.unitPriceRivas??0),priceSanJorge:Number(ut.unitPriceSanJorge??0),priceIsla:Number(ut.unitPriceIsla??0)})}),o(it);try{const Bt=await jt(At(ke,"sellers_candies")),ut=[];Bt.forEach(It=>{const $t=It.data(),hr=$t.branch||"Rivas",_e=t3e(hr);ut.push({id:It.id,name:$t.name??"(sin nombre)",branch:_e,branchLabel:hr,commissionPercent:Number($t.commissionPercent??0)})}),c(ut)}catch(Bt){console.error("Error cargando vendedores:",Bt)}d({})})()},[]),v.useEffect(()=>{if(e==="vendedor_dulces"&&t){P(t),S(!0);try{localStorage.setItem("pos_vendorId",t),localStorage.setItem("pos_role","VENDEDOR")}catch{}return}if(e==="admin"){S(!1);return}try{const Ue=localStorage.getItem("pos_vendorId")||"",rt=localStorage.getItem("pos_role")||"";Ue&&P(Ue),rt.toUpperCase()==="VENDEDOR"&&S(!0)}catch{}},[e,t]);const ot=async Ue=>{if(!Ue){d({});return}const rt=Ht(At(ke,"inventory_candies_sellers"),Xt("sellerId","==",Ue)),Qe=await jt(rt),Pe={};Qe.forEach(ze=>{const it=ze.data(),Bt=it.productId||"";if(!Bt)return;const ut=Number(it.remainingUnits??it.remaining??it.totalUnits??0);ut<=0||(Pe[Bt]=(Pe[Bt]||0)+ut)}),d(Pe),j(ze=>{const it=[];for(const Bt of ze){const ut=Pe[Bt.productId]??0;ut>0&&it.push({...Bt,availableUnits:ut})}return it})};v.useEffect(()=>{if(!T){d({});return}const Ue=l.find(rt=>rt.id===T);Ue&&m(Ue.branch),ot(T)},[T,l]),v.useEffect(()=>{j(Ue=>Ue.map(rt=>{const Qe=s.find(ze=>ze.id===rt.productId);if(!Qe)return rt;const Pe=h==="RIVAS"?Qe.priceRivas:h==="SAN_JORGE"?Qe.priceSanJorge:Qe.priceIsla;return{...rt,pricePerPackage:Number(Pe)||0}}))},[h,s]);async function Le(Ue){const{productId:rt,vendorId:Qe,branch:Pe}=Ue;if(!rt||!Qe)return 0;const ze=Ht(At(ke,"inventory_candies_sellers"),Xt("sellerId","==",Qe),Xt("productId","==",rt)),it=await jt(ze);if(it.empty)return 0;const Bt=it.docs[0].data(),ut=Number(Bt.unitPriceVendor??0);if(ut>0)return ut;const It=Number(Pe==="RIVAS"?Bt.unitPriceRivas??0:Pe==="SAN_JORGE"?Bt.unitPriceSanJorge??0:Bt.unitPriceIsla??0);return Number(It||0)}const Ze=async Ue=>{var Bt;if(!Ue)return;if(!T){J("Selecciona primero el vendedor para usar su inventario."),L("");return}if(E.some(ut=>ut.productId===Ue)){L("");return}const rt=s.find(ut=>ut.id===Ue);if(!rt){L("");return}const Qe=await p7(Ue,T),Pe=((Bt=l.find(ut=>ut.id===T))==null?void 0:Bt.branch)??h,ze=await Le({productId:Ue,vendorId:T,branch:Pe}),it={productId:Ue,productName:rt.name||"",sku:rt.sku||"",unitsPerPackage:rt.unitsPerPackage||1,pricePerPackage:Number(ze)||0,availableUnits:Number(Qe)||0,qtyPackages:0,discount:0};j(ut=>[...ut,it]),L("")},ye=(Ue,rt)=>{j(Qe=>Qe.map(Pe=>{if(Pe.productId!==Ue)return Pe;if(rt==="")return{...Pe,qtyPackages:0};const ze=Math.max(0,Math.floor(Number(rt)));return{...Pe,qtyPackages:ze}}))},xe=(Ue,rt)=>{j(Qe=>Qe.map(Pe=>{if(Pe.productId!==Ue)return Pe;if(rt==="")return{...Pe,discount:0};const ze=Math.max(0,Math.floor(Number(rt)));return{...Pe,discount:ze}}))},ue=Ue=>j(rt=>rt.filter(Qe=>Qe.productId!==Ue)),Ge=async()=>{if(!b)return"Selecciona la fecha.";if(!T)return"Selecciona el vendedor para esta venta.";if(E.length===0)return"Agrega al menos un producto.";const Ue=E.filter(rt=>(rt.qtyPackages||0)>0);if(Ue.length===0)return"Debes ingresar cantidades (> 0) en al menos un producto.";if(!(de>0))return"El total debe ser mayor a cero.";if(A==="CONTADO"){if(!x.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!p)return"Selecciona un cliente (crdito).";if(te<0)return"El pago inicial no puede ser negativo.";if(te>de)return"El pago inicial no puede superar el total.";if((Ne==null?void 0:Ne.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede facturar a crdito."}for(const rt of Ue){const Qe=rt.unitsPerPackage||1,Pe=(rt.qtyPackages||0)*Qe,ze=await p7(rt.productId,T),it=Math.floor(ze/Qe);if(Pe>ze)return`Inventario insuficiente en el pedido del vendedor para "${rt.productName}". Disponible: ${it} paquetes.`;const Bt=(Number(rt.pricePerPackage)||0)*(rt.qtyPackages||0),ut=Number(rt.discount)||0;if(!Number.isInteger(ut)||ut<0)return`El descuento en "${rt.productName}" debe ser entero y  0.`;if(ut>Bt)return`El descuento en "${rt.productName}" no puede exceder C$ ${Bt.toFixed(2)}.`}return null},Je=async Ue=>{Ue.preventDefault(),J("");const rt=await Ge();if(rt){J(" "+rt);return}try{Ee(!0);const Qe=E.filter(ut=>(ut.qtyPackages||0)>0).map(ut=>{const It=ut.unitsPerPackage||1,$t=ut.qtyPackages||0,hr=$t*It,_e=(Number(ut.pricePerPackage)||0)*($t||0),dt=Math.max(0,Math.floor(Number(ut.discount)||0)),gt=Math.max(0,_e-dt);return{productId:ut.productId,productName:ut.productName,sku:ut.sku||"",qty:hr,packages:$t,unitsPerPackage:It,branch:h,unitPricePackage:Number(ut.pricePerPackage)||0,discount:dt,total:Math.floor(gt*100)/100}}),Pe={type:A,branch:h,date:b,createdAt:zt.now(),itemsTotal:Number(de)||0,total:Number(de)||0,quantity:Number(W)||0,packagesTotal:Number(R)||0,items:Qe,vendorId:T},ze=l.find(ut=>ut.id===T);ze&&(Pe.vendorName=ze.name,Pe.vendorBranch=ze.branch,Pe.vendorBranchLabel=ze.branchLabel,Pe.vendorCommissionPercent=ze.commissionPercent||0,Pe.vendorCommissionAmount=bt||0),A==="CONTADO"?Pe.customerName=x.trim():(Pe.customerId=p,Pe.downPayment=Number(te)||0);const it=await en(At(ke,"sales_candies"),Pe);if(A==="CONTADO"){const ut=(x||"").trim();if(ut)try{await en(At(ke,"cash_customers"),{name:ut,date:b,branch:h,vendorId:T,createdAt:zt.now()})}catch(It){console.warn("No se pudo guardar cash_customer:",It)}}if(A==="CREDITO"&&p){const ut={customerId:p,date:b,createdAt:zt.now(),ref:{saleId:it.id}},It=Number((Ne==null?void 0:Ne.balance)||0);if(await en(At(ke,"ar_movements"),{...ut,type:"CARGO",amount:Number(de)||0}),Number(te)>0&&await en(At(ke,"ar_movements"),{...ut,type:"ABONO",amount:-Number(te)}),It===0)try{await Lr(Mt(ke,"customers_candies",p),{initialDebt:Number(de)||0,initialDebtDate:b})}catch($t){console.warn("No se pudo setear initialDebt:",$t)}}const Bt={};for(const ut of Qe)if(ut.qty>0){const{allocations:It}=await n3e({productId:ut.productId,vendorId:T,quantityUnits:ut.qty,saleDate:b,saleId:it.id});Bt[ut.productId]={productId:ut.productId,vendorId:T,allocations:It}}await Lr(Mt(ke,"sales_candies",it.id),{allocationsByItem:Bt});try{const ut=A==="CONTADO"?x.trim()||"Cliente Mostrador":(Ne==null?void 0:Ne.name)||"Cliente crdito";r3e({saleId:it.id,date:b,customerName:ut,branch:h,items:Qe.map(It=>({productName:It.productName,qty:It.packages,unitPrice:It.unitPricePackage,total:It.total})),total:Number(de)||0,vendorName:ze==null?void 0:ze.name,vendorCommissionPercent:(ze==null?void 0:ze.commissionPercent)||0,vendorCommissionAmount:bt})}catch(ut){console.error("Error generando voucher PDF:",ut)}f("CONTADO"),g(""),y(""),_(g7()),j([]),le(0),A==="CREDITO"&&p&&a(ut=>ut.map(It=>It.id===p?{...It,balance:(It.balance||0)+(Number(de)||0)-(Number(te)||0)}:It)),J(" Venta de dulces registrada"),T?await ot(T):d({})}catch(Qe){console.error(Qe),J(" Error al guardar la venta de dulces")}finally{Ee(!1)}},ht=v.useMemo(()=>s.filter(Ue=>{const rt=u[Ue.id]||0,Qe=Math.max(1,Number(Ue.unitsPerPackage||1));return Math.floor(rt/Qe)>0}).sort((Ue,rt)=>(Ue.name||"").localeCompare(rt.name||"")),[s,u]);return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-3",children:i.jsx("h2",{className:"text-2xl font-bold",children:"Ventas (Dulces)"})}),i.jsxs("form",{onSubmit:Je,className:"bg-white p-3 sm:p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:A,onChange:Ue=>f(Ue.target.value),children:[i.jsx("option",{value:"CONTADO",children:"Contado"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),A==="CONTADO"?i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del cliente (contado)"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Cliente Mostrador",value:x,onChange:Ue=>y(Ue.target.value)})]}):i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[i.jsxs("select",{className:"w-full sm:flex-1 border p-2 rounded",value:p,onChange:Ue=>g(Ue.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un cliente"}),Me.map(Ue=>i.jsxs("option",{value:Ue.status==="ACTIVO"?Ue.id:"",disabled:Ue.status==="BLOQUEADO",children:[Ue.name," | ",Ue.phone," | Saldo: ",zf(Ue.balance||0)]},Ue.id))]}),i.jsx("button",{type:"button",className:"w-full sm:w-auto px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>F(!0),children:"Crear Cliente"})]}),i.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-lg font-semibold",children:zf(Ve)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:te===0?"":te,onChange:Ue=>le(Math.max(0,Number(Ue.target.value||0))),placeholder:"0.00"})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),i.jsx("div",{className:"text-lg font-semibold",children:zf(nt)})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:b,onChange:Ue=>_(Ue.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:T,onChange:Ue=>{P(Ue.target.value),j([])},disabled:C,children:[i.jsx("option",{value:"",children:"Selecciona un vendedor"}),l.map(Ue=>i.jsxs("option",{value:Ue.id,children:[Ue.name,"  ",Ue.branchLabel,"  ",Ue.commissionPercent.toFixed(2),"%"," comisin"]},Ue.id))]}),C&&i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Vendedor fijado por el usuario logueado."})]}),i.jsxs("div",{className:"md:col-span-1",children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Lista de precios / Sucursal"}),i.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[i.jsxs("label",{className:"inline-flex items-center gap-1",children:[i.jsx("input",{type:"radio",className:"accent-blue-600",value:"RIVAS",checked:h==="RIVAS",readOnly:!0,disabled:!0}),i.jsx("span",{children:"Rivas"})]}),i.jsxs("label",{className:"inline-flex items-center gap-1",children:[i.jsx("input",{type:"radio",className:"accent-blue-600",value:"SAN_JORGE",checked:h==="SAN_JORGE",readOnly:!0,disabled:!0}),i.jsx("span",{children:"San Jorge"})]}),i.jsxs("label",{className:"inline-flex items-center gap-1",children:[i.jsx("input",{type:"radio",className:"accent-blue-600",value:"ISLA",checked:h==="ISLA",readOnly:!0,disabled:!0}),i.jsx("span",{children:"Isla de Ometepe"})]})]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"La sucursal se toma automticamente del vendedor seleccionado."})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:I,onChange:async Ue=>{const rt=Ue.target.value;L(rt),await Ze(rt)},disabled:!T,children:[i.jsx("option",{value:"",children:T?"Selecciona un producto":"Selecciona un vendedor primero"}),ht.map(Ue=>{const rt=E.some(it=>it.productId===Ue.id),Qe=u[Ue.id]||0,Pe=Math.max(1,Number(Ue.unitsPerPackage||1)),ze=Math.floor(Qe/Pe);return ze<=0?null:i.jsxs("option",{value:rt?"":Ue.id,disabled:rt,children:[Ue.name," ",Ue.sku?` ${Ue.sku}`:""," (disp: ",ze," ","paq.)",rt?" ":""]},Ue.id)})]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"El selector solo muestra productos disponibles del pedido del vendedor seleccionado (sin ceros)."})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("div",{className:"border rounded overflow-hidden min-w-[860px]",children:[i.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 px-3 py-2 text-xs font-semibold border-b",children:[i.jsx("div",{className:"col-span-4",children:"Producto"}),i.jsx("div",{className:"col-span-2 text-right",children:"Precio (paq.)"}),i.jsx("div",{className:"col-span-2 text-right",children:"Existencias (paq.)"}),i.jsx("div",{className:"col-span-1 text-right",children:"Cantidad (paq.)"}),i.jsx("div",{className:"col-span-1 text-right",children:"Descuento"}),i.jsx("div",{className:"col-span-1 text-right",children:"Monto"}),i.jsx("div",{className:"col-span-1 text-center",children:"Quitar"})]}),E.length===0?i.jsx("div",{className:"px-3 py-4 text-sm text-gray-500",children:"No hay productos agregados."}):E.map(Ue=>{const rt=u[Ue.productId]??Ue.availableUnits??0,Qe=Ue.unitsPerPackage?Math.floor(rt/Ue.unitsPerPackage):0,Pe=Math.max(0,Qe-(Ue.qtyPackages||0)),ze=(Number(Ue.pricePerPackage)||0)*(Ue.qtyPackages||0),it=Math.max(0,ze-(Number(Ue.discount)||0));return i.jsxs("div",{className:"grid grid-cols-12 items-center px-3 py-2 border-b text-sm gap-x-2",children:[i.jsx("div",{className:"col-span-4",children:i.jsxs("div",{className:"font-medium",children:[Ue.productName,Ue.sku?`  ${Ue.sku}`:""]})}),i.jsx("div",{className:"col-span-2 text-right",children:zf(Ue.pricePerPackage)}),i.jsxs("div",{className:"col-span-2 text-right",children:[Pe," paq."]}),i.jsx("div",{className:"col-span-1",children:i.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(Ue.qtyPackages)||Ue.qtyPackages===0?"":Ue.qtyPackages,onChange:Bt=>ye(Ue.productId,Bt.target.value),inputMode:"numeric",placeholder:"0",title:"Cantidad de paquetes"})}),i.jsx("div",{className:"col-span-1",children:i.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(Ue.discount)||Ue.discount===0?"":Ue.discount,onChange:Bt=>xe(Ue.productId,Bt.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento entero (C$)"})}),i.jsx("div",{className:"col-span-1 text-right",children:zf(it)}),i.jsx("div",{className:"col-span-1 text-center",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 hover:bg-red-200",onClick:()=>ue(Ue.productId),title:"Quitar producto",children:""})})]},Ue.productId)})]})}),E.length>0&&i.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-end gap-2 sm:gap-6 mt-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Paquetes totales: "}),i.jsx("span",{className:"font-semibold",children:R})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Total: "}),i.jsx("span",{className:"font-semibold",children:zf(de)})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Comisin vendedor: "}),i.jsxs("span",{className:"font-semibold",children:[zf(bt)," ",lt?`(${lt.toFixed(2)}%)`:""]})]})]})]}),i.jsx("div",{className:"md:col-span-2",children:i.jsx("button",{className:"w-full sm:w-auto bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",disabled:me,children:me?"Guardando...":"Registrar venta"})})]}),ce&&i.jsx("p",{className:"mt-2 text-sm",children:ce}),k&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-2 sm:p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[98%] sm:w-[95%] max-w-xl p-3 sm:p-4 max-h-[92vh] overflow-auto",children:[i.jsx("h3",{className:"text-lg font-bold mb-3",children:"Nuevo cliente"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",value:V,onChange:Ue=>D(Ue.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded",value:M,onChange:Ue=>G(x7(Ue.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:O,onChange:Ue=>K(Ue.target.value),children:[i.jsx("option",{value:"",children:""}),ZFe.map(Ue=>i.jsx("option",{value:Ue,children:Ue},Ue))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:Q,onChange:Ue=>be(Ue.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),!C&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:X,onChange:Ue=>ve(Ue.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un vendedor"}),l.filter(Ue=>(Ue.status??"ACTIVO")==="ACTIVO").map(Ue=>i.jsxs("option",{value:Ue.id,children:[Ue.name,"  ",Ue.branchLabel]},Ue.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Z===0?"":Z,onChange:Ue=>z(Math.max(0,Number(Ue.target.value||0))),placeholder:"Ej: 2000"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:ee,onChange:Ue=>ne(Ue.target.value),maxLength:500})]})]}),i.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row justify-end gap-2",children:[i.jsx("button",{className:"w-full sm:w-auto px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{re(),F(!1)},children:"Cancelar"}),i.jsx("button",{className:"w-full sm:w-auto px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:async()=>{var Qe;const Ue=C?T||t:X;if(!Ue){J("Selecciona el vendedor para asociar este cliente.");return}if(J(""),!V.trim()){J("Ingresa el nombre del nuevo cliente.");return}const rt=x7(M);try{const Pe=await en(At(ke,"customers_candies"),{name:V.trim(),phone:rt,place:O||"",notes:ee||"",status:Q,creditLimit:Number(Z||0),createdAt:zt.now(),sellerId:Ue,vendorId:Ue,vendorName:((Qe=l.find(it=>it.id===Ue))==null?void 0:Qe.name)||""}),ze={id:Pe.id,name:V.trim(),phone:rt,place:O||"",status:Q,creditLimit:Number(Z||0),balance:0,sellerId:Ue};a(it=>[ze,...it]),g(Pe.id),re(),F(!1),J(" Cliente creado")}catch(Pe){console.error(Pe),J(" Error al crear cliente")}},children:"Guardar cliente"})]})]})}),me&&i.jsx("div",{className:"fixed inset-0 z-[70] bg-black/40 flex items-center justify-center p-2",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border px-4 py-3 flex items-center gap-3",children:[i.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("span",{className:"font-medium",children:"Guardando venta"})]})})]})}const v7=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal"],O2=e=>`C$ ${(Number(e)||0).toFixed(2)}`;function s3e(){const[e,t]=v.useState(ir(gu(new Date),"yyyy-MM-dd")),[r,n]=v.useState(ir(pu(new Date),"yyyy-MM-dd")),[a,s]=v.useState(ir(new Date,"yyyy-MM-dd")),[o,l]=v.useState(""),[c,u]=v.useState(""),[d,A]=v.useState(0),[f,h]=v.useState("PENDIENTE"),[m,p]=v.useState(""),[g,x]=v.useState([]),[y,b]=v.useState(!0),[_,T]=v.useState(""),[P,C]=v.useState(null),[S,I]=v.useState(""),[L,E]=v.useState(""),[j,R]=v.useState(""),[W,de]=v.useState(0),[te,le]=v.useState("PENDIENTE"),[ce,J]=v.useState("");v.useEffect(()=>{(async()=>{b(!0);try{const O=Ht(At(ke,"expenses_candies"),Ur("date","desc")),K=await jt(O),ee=[];K.forEach(ne=>{const Q=ne.data();ee.push({id:ne.id,date:Q.date||ir(new Date,"yyyy-MM-dd"),category:Q.category||"",description:Q.description||"",amount:Number(Q.amount||0),status:Q.status||"PENDIENTE",notes:Q.notes||"",createdAt:Q.createdAt??zt.now()})}),x(ee)}catch(O){console.error(O),T(" Error al cargar gastos")}finally{b(!1)}})()},[]);const me=v.useMemo(()=>g.filter(O=>!(e&&O.date<e||r&&O.date>r)),[g,e,r]),Ee=v.useMemo(()=>{const O=me.reduce((ne,Q)=>ne+(Q.amount||0),0),K=me.filter(ne=>ne.status==="PAGADO").reduce((ne,Q)=>ne+(Q.amount||0),0),ee=O-K;return{total:O,pagado:K,pendiente:ee}},[me]),k=()=>{s(ir(new Date,"yyyy-MM-dd")),l(""),u(""),A(0),h("PENDIENTE"),p("")},F=async O=>{if(O.preventDefault(),T(""),!o){T("Selecciona una categora.");return}if(!c.trim()){T("Ingresa una descripcin.");return}if(!d||d<=0){T("Ingresa un monto vlido.");return}try{const K=await en(At(ke,"expenses_candies"),{date:a,category:o,description:c.trim(),amount:Number(d.toFixed(2)),status:f,notes:m||"",createdAt:zt.now()});x(ee=>[{id:K.id,date:a,category:o,description:c.trim(),amount:Number(d.toFixed(2)),status:f,notes:m||"",createdAt:zt.now()},...ee]),k(),T(" Gasto registrado")}catch(K){console.error(K),T(" Error al guardar gasto")}},V=O=>{C(O.id),I(O.date),E(O.category||""),R(O.description||""),de(Number(O.amount||0)),le(O.status||"PENDIENTE"),J(O.notes||"")},D=()=>{C(null),I(""),E(""),R(""),de(0),le("PENDIENTE"),J("")},M=async()=>{if(P){if(!L){T("Selecciona una categora.");return}if(!j.trim()){T("Ingresa una descripcin.");return}if(!W||W<=0){T("Ingresa un monto vlido.");return}try{await Lr(Mt(ke,"expenses_candies",P),{date:S,category:L,description:j.trim(),amount:Number(W.toFixed(2)),status:te,notes:ce||""}),x(O=>O.map(K=>K.id===P?{...K,date:S,category:L,description:j.trim(),amount:Number(W.toFixed(2)),status:te,notes:ce||""}:K)),D(),T(" Gasto actualizado")}catch(O){console.error(O),T(" Error al actualizar gasto")}}},G=async O=>{confirm(`Eliminar el gasto "${O.description}"?`)&&(await fn(Mt(ke,"expenses_candies",O.id)),x(ee=>ee.filter(ne=>ne.id!==O.id)),T(" Gasto borrado"))};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Dulces)"}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:e,onChange:O=>t(O.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:O=>n(O.target.value)})]}),i.jsxs("div",{className:"ml-auto text-sm",children:[i.jsx("div",{className:"font-semibold",children:"Totales del rango"}),i.jsxs("div",{children:["Total: ",O2(Ee.total)]}),i.jsxs("div",{children:["Pagado: ",O2(Ee.pagado)]}),i.jsxs("div",{children:["Pendiente: ",O2(Ee.pendiente)]})]})]}),i.jsxs("form",{onSubmit:F,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:a,onChange:O=>s(O.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:o,onChange:O=>l(O.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),v7.map(O=>i.jsx("option",{value:O,children:O},O))]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:c,onChange:O=>u(O.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:d===0?"":d,onChange:O=>A(Math.max(0,Number(O.target.value||0))),placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:f,onChange:O=>h(O.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:m,onChange:O=>p(O.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[m.length,"/500"]})]}),i.jsx("div",{className:"md:col-span-2",children:i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):me.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):me.slice().sort((O,K)=>O.date.localeCompare(K.date)).map(O=>{const K=P===O.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:K?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:S,onChange:ee=>I(ee.target.value)}):O.date}),i.jsx("td",{className:"p-2 border",children:K?i.jsxs("select",{className:"w-full border p-1 rounded",value:L,onChange:ee=>E(ee.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),v7.map(ee=>i.jsx("option",{value:ee,children:ee},ee))]}):O.category||""}),i.jsx("td",{className:"p-2 border",children:K?i.jsx("input",{className:"w-full border p-1 rounded",value:j,onChange:ee=>R(ee.target.value)}):i.jsx("span",{title:O.description,children:O.description.length>40?O.description.slice(0,40)+"":O.description})}),i.jsx("td",{className:"p-2 border",children:K?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(W)?"":W,onChange:ee=>de(Math.max(0,Number(ee.target.value||0)))}):O2(O.amount)}),i.jsx("td",{className:"p-2 border",children:K?i.jsxs("select",{className:"w-full border p-1 rounded",value:te,onChange:ee=>le(ee.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${O.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:O.status})}),i.jsx("td",{className:"p-2 border",children:K?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:ce,onChange:ee=>J(ee.target.value),maxLength:500}):i.jsx("span",{title:O.notes||"",children:(O.notes||"").length>40?(O.notes||"").slice(0,40)+"":O.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:K?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:M,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:D,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>V(O),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>G(O),children:"Borrar"})]})})})]},O.id)})})]})}),_&&i.jsx("p",{className:"mt-2 text-sm",children:_})]})}const Vo=e=>`C$ ${(Number(e)||0).toFixed(2)}`;function i3e(e){var t;return e!=null&&e.date?e.date:(t=e==null?void 0:e.createdAt)!=null&&t.toDate?ir(e.createdAt.toDate(),"yyyy-MM-dd"):""}function o3e(e,t){var s,o,l;const r=i3e(e);if(!r)return null;let n=0,a=0;return Array.isArray(e.items)&&e.items.length>0?(n=e.items.reduce((c,u)=>c+(Number(u.packages??u.qty??u.quantity??0)||0),0),a=Number(e.total??e.itemsTotal??0)||0):(n=Number(e.packagesTotal??e.quantity??((s=e.item)==null?void 0:s.packages)??((o=e.item)==null?void 0:o.qty)??0)||0,a=Number(e.total??((l=e.item)==null?void 0:l.total)??0)||0),{id:t,date:r,type:e.type||"CONTADO",total:a,quantity:n,customerId:e.customerId||void 0,customerName:e.customerName||void 0,downPayment:Number(e.downPayment||0),vendorId:e.vendorId||void 0,vendorName:e.vendorName||e.vendor||void 0,vendorCommissionPercent:Number(e.vendorCommissionPercent||0)||0,vendorCommissionAmount:Number(e.vendorCommissionAmount||0)||0}}async function l3e(e){const t=Ht(At(ke,"ar_movements"),Xt("ref.saleId","==",e)),r=await jt(t);await Promise.all(r.docs.map(n=>fn(Mt(ke,"ar_movements",n.id))))}function c3e({role:e="",sellerCandyId:t=""}){const r=e==="vendedor_dulces",n=e==="admin",a=n?8:7,[s,o]=v.useState(!1),[l,c]=v.useState(!1),[u,d]=v.useState(null),[A,f]=v.useState([]),h=async X=>{o(!0),c(!0),d(X),f([]);try{const ve=await Qi(Mt(ke,"sales_candies",X)),re=ve.exists()?ve.data():null;if(!re){f([]);return}const Me=(Array.isArray(re==null?void 0:re.items)?re.items:re!=null&&re.item?[re.item]:[]).map(Ve=>({productName:String(Ve.productName||""),qty:Number(Ve.packages??Ve.qty??Ve.quantity??0),unitPrice:Number(Ve.unitPricePackage??Ve.unitPrice??0),discount:Number(Ve.discount||0),total:Number(Ve.total??Ve.lineFinal??0)}));f(Me)}catch(ve){console.error(ve)}finally{c(!1)}},[m,p]=v.useState(ir(new Date,"yyyy-MM-01")),[g,x]=v.useState(ir(new Date,"yyyy-MM-dd")),[y,b]=v.useState([]),[_,T]=v.useState([]),[P,C]=v.useState([]),[S,I]=v.useState(!0),[L,E]=v.useState(""),[j,R]=v.useState(""),[W,de]=v.useState(""),[te,le]=v.useState(null),ce=15,[J,me]=v.useState(1),Ee=v.useMemo(()=>{const X={};return y.forEach(ve=>X[ve.id]=ve.name),X},[y]),k=v.useMemo(()=>{const X={};return P.forEach(ve=>{X[ve.id]=ve}),X},[P]),F=X=>{const ve=Number(X.vendorCommissionAmount||0);if(ve>0)return ve;if(!X.vendorId)return 0;const re=k[X.vendorId];if(!re||!re.commissionPercent)return 0;const Ne=(Number(X.total)||0)*(Number(re.commissionPercent)||0)/100;return Number(Ne.toFixed(2))};v.useEffect(()=>{(async()=>{I(!0),E("");try{const X=await jt(At(ke,"customers_candies")),ve=[];X.forEach(nt=>ve.push({id:nt.id,name:nt.data().name||""})),b(ve);const re=await jt(At(ke,"sellers_candies")),Ne=[];re.forEach(nt=>{const st=nt.data();Ne.push({id:nt.id,name:st.name||"",commissionPercent:Number(st.commissionPercent||0)})}),C(Ne);const Me=await jt(Ht(At(ke,"sales_candies"),Ur("createdAt","desc"))),Ve=[];Me.forEach(nt=>{const st=o3e(nt.data(),nt.id);st&&st.date>=m&&st.date<=g&&Ve.push(st)}),T(Ve.sort((nt,st)=>st.date.localeCompare(nt.date))),me(1)}catch(X){console.error(X),E(" Error cargando transacciones.")}finally{I(!1)}})()},[m,g]);const V=v.useMemo(()=>_.filter(X=>!(r&&(!t||!X.vendorId||X.vendorId!==t)||j&&X.customerId!==j||W&&X.type!==W)),[_,j,W,r,t]),D=v.useMemo(()=>{let X=0,ve=0,re=0,Ne=0;for(const Me of V)Me.type==="CONTADO"?(X+=Me.quantity,re+=Me.total):(ve+=Me.quantity,Ne+=Me.total);return{packsCash:X,packsCredito:ve,montoCash:re,montoCredito:Ne}},[V]),M=Math.max(1,Math.ceil(V.length/ce)),G=v.useMemo(()=>{const X=(J-1)*ce;return V.slice(X,X+ce)},[V,J]),O=v.useMemo(()=>u&&_.find(X=>X.id===u)||null,[u,_]),K=async X=>{if(n&&(le(null),!!window.confirm("Eliminar esta venta de dulces? Se restaurar el inventario asociado.")))try{I(!0),await S1(X.id),await l3e(X.id),T(ve=>ve.filter(re=>re.id!==X.id)),E(" Venta eliminada")}catch(ve){console.error(ve),E(" No se pudo eliminar la venta.")}finally{I(!1)}},ee=()=>{const X=`Ventas del dia  ${m} a ${g}`,ve=Ve=>(Ve||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),re=V.map(Ve=>{const nt=Ve.customerName||(Ve.customerId?Ee[Ve.customerId]:"")||"Nombre cliente";return`<tr>
          <td>${Ve.date}</td>
          <td>${ve(nt)}</td>
          <td>${Ve.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${Ve.quantity}</td>
          <td style="text-align:right">${Vo(Ve.total)}</td>
        </tr>`}).join(""),Ne=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${ve(X)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${ve(X)}</h1>
      <div class="kpis">
        <div><b>Paquetes Cash:</b> ${D.packsCash}</div>
        <div><b>Paquetes Crdito:</b> ${D.packsCredito}</div>
        <div><b>Monto Cash:</b> ${Vo(D.montoCash)}</div>
        <div><b>Monto Crdito:</b> ${Vo(D.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Paquetes</th><th>Monto</th>
      </tr></thead><tbody>
      ${re||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,Me=window.open("","_blank");Me&&(Me.document.open(),Me.document.write(Ne),Me.document.close())},ne=()=>me(1),Q=()=>me(X=>Math.max(1,X-1)),be=()=>me(X=>Math.min(M,X+1)),Z=()=>me(M),z=()=>{const X=[];if(M<=7)for(let re=1;re<=M;re++)X.push(re);else{const re=Math.max(1,J-2),Ne=Math.min(M,J+2);X.push(1),re>2&&X.push(-1);for(let Me=re;Me<=Ne;Me++)Me!==1&&Me!==M&&X.push(Me);Ne<M-1&&X.push(-2),X.push(M)}return i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 justify-between mt-3",children:[i.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ne,disabled:J===1,children:" Primero"}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Q,disabled:J===1,children:" Anterior"}),X.map((re,Ne)=>typeof re=="number"?i.jsx("button",{className:`px-3 py-1 border rounded ${re===J?"bg-blue-600 text-white":""}`,onClick:()=>me(re),children:re},Ne):i.jsx("span",{className:"px-2",children:""},Ne)),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:be,disabled:J===M,children:"Siguiente "}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Z,disabled:J===M,children:"ltimo "})]}),i.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",J," de ",M,"  ",V.length," transaccin(es)"]})]})};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas del dia"}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 items-end text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:m,onChange:X=>{p(X.target.value),me(1)}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:g,onChange:X=>{x(X.target.value),me(1)}})]}),i.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[i.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:j,onChange:X=>{R(X.target.value),me(1)},children:[i.jsx("option",{value:"",children:"Todos"}),y.map(X=>i.jsx("option",{value:X.id,children:X.name},X.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Tipo"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:W,onChange:X=>{de(X.target.value),me(1)},children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"CONTADO",children:"Cash"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsx("button",{className:"sm:col-span-2 lg:col-span-1 px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 w-full",onClick:ee,children:"Exportar PDF"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:D.packsCash})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:D.packsCredito})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:Vo(D.montoCash)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:Vo(D.montoCredito)})]})]}),i.jsxs("div",{className:"block md:hidden space-y-3",children:[S?i.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Cargando"}):G.length===0?i.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Sin transacciones en el rango."}):G.map(X=>{const ve=X.customerName||(X.customerId?Ee[X.customerId]:"")||"Nombre cliente",re=F(X);return i.jsx("div",{className:"bg-white border rounded-xl shadow",children:i.jsxs("details",{className:"group",children:[i.jsxs("summary",{className:"list-none cursor-pointer p-3 flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:ve}),i.jsx("div",{className:"text-xs text-gray-600 shrink-0",children:X.date})]}),i.jsxs("div",{className:"mt-1 flex items-center gap-2 flex-wrap text-xs",children:[i.jsx("span",{className:`px-2 py-1 rounded-full border ${X.type==="CREDITO"?"bg-yellow-50 border-yellow-200 text-yellow-700":"bg-green-50 border-green-200 text-green-700"}`,children:X.type==="CREDITO"?"Crdito":"Cash"}),i.jsxs("span",{className:"text-gray-700",children:[i.jsx("b",{children:"Paquetes:"})," ",i.jsx("button",{type:"button",className:"underline text-blue-600",onClick:Ne=>{Ne.preventDefault(),h(X.id)},title:"Ver detalle",children:X.quantity})]}),i.jsxs("span",{className:"text-gray-700",children:[i.jsx("b",{children:"Monto:"})," ",Vo(X.total)]})]})]}),i.jsx("div",{className:"text-gray-500 mt-1",children:i.jsx("span",{className:"inline-block transition-transform group-open:rotate-180",children:""})})]}),i.jsx("div",{className:"px-3 pb-3 pt-0 text-sm",children:i.jsxs("div",{className:"grid grid-cols-1 gap-2 border-t pt-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Cliente"}),i.jsx("span",{className:"font-medium text-right",children:ve})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Fecha"}),i.jsx("span",{className:"font-medium",children:X.date})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Tipo"}),i.jsx("span",{className:"font-medium",children:X.type==="CREDITO"?"Crdito":"Cash"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Paquetes"}),i.jsx("span",{className:"font-medium",children:i.jsx("button",{type:"button",className:"underline text-blue-600",onClick:()=>h(X.id),title:"Ver detalle",children:X.quantity})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Monto"}),i.jsx("span",{className:"font-semibold",children:Vo(X.total)})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Comisin"}),i.jsx("span",{className:"font-medium",children:re>0?Vo(re):""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Vendedor"}),i.jsx("span",{className:"font-medium",children:X.vendorName||""})]}),n&&i.jsxs("div",{className:"pt-2 flex items-center justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded border hover:bg-gray-50",onClick:()=>le(Ne=>Ne===X.id?null:X.id),children:" Acciones"}),te===X.id&&i.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>K(X),children:"Eliminar"})]})]})})]})},X.id)}),i.jsx("div",{className:"bg-white p-3 rounded shadow border",children:z()})]}),i.jsxs("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full",children:[i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Comisin"}),i.jsx("th",{className:"p-2 border",children:"Vendedor"}),n&&i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:S?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:a,children:"Cargando"})}):G.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:a,children:"Sin transacciones en el rango."})}):G.map(X=>{const ve=X.customerName||(X.customerId?Ee[X.customerId]:"")||"Nombre cliente",re=F(X);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:X.date}),i.jsx("td",{className:"p-2 border",children:ve}),i.jsx("td",{className:"p-2 border",children:X.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver detalle de productos de esta venta",onClick:()=>h(X.id),children:X.quantity})}),i.jsx("td",{className:"p-2 border",children:Vo(X.total)}),i.jsx("td",{className:"p-2 border",children:re>0?Vo(re):""}),i.jsx("td",{className:"p-2 border",children:X.vendorName||""}),n&&i.jsxs("td",{className:"p-2 border relative",children:[i.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>le(Ne=>Ne===X.id?null:X.id),title:"Acciones",children:""}),te===X.id&&i.jsx("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:i.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>K(X),children:"Eliminar"})})]})]},X.id)})})]}),z()]}),L&&i.jsx("p",{className:"mt-2 text-sm",children:L}),s&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Productos/paquetes vendidos"," ",u?` #${u}`:""]}),O&&i.jsxs("div",{className:"text-sm text-gray-700 mt-1",children:["Comisin de vendedor:"," ",i.jsx("span",{className:"font-semibold",children:F(O)>0?Vo(F(O)):""})]})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>o(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Paquetes"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:l?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):A.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):A.map((X,ve)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:X.productName}),i.jsx("td",{className:"p-2 border text-right",children:X.qty}),i.jsx("td",{className:"p-2 border text-right",children:Vo(X.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:Vo(X.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:Vo(X.total)})]},ve))})]})})]})})]})}const sn=e=>`C$ ${(Number(e)||0).toFixed(2)}`;function Uv(e){var r;const t=e==null?void 0:e.date;return t||((r=e==null?void 0:e.createdAt)!=null&&r.toDate?ir(e.createdAt.toDate(),"yyyy-MM-dd"):"")}function u3e(e){if(Array.isArray(e==null?void 0:e.items))return e.items.map(n=>{const a=Number((n==null?void 0:n.packages)??(n==null?void 0:n.qty)??(n==null?void 0:n.quantity)??0)||0,s=Number((n==null?void 0:n.unitPricePackage)??(n==null?void 0:n.unitPrice)??0)||(a>0?Number((n==null?void 0:n.total)??(n==null?void 0:n.lineFinal)??0)/a:0)||0;return{productId:String((n==null?void 0:n.productId)||""),productName:String((n==null?void 0:n.productName)||""),sku:(n==null?void 0:n.sku)||"",qty:a,unitPrice:Number(s||0),discount:Number((n==null?void 0:n.discount)||0),vendorCommissionAmount:Number((n==null?void 0:n.vendorCommissionAmount)??(n==null?void 0:n.commissionAmount)??0)}});if(e!=null&&e.item){const n=e.item,a=Number((n==null?void 0:n.packages)??(n==null?void 0:n.qty)??(n==null?void 0:n.quantity)??0)||Number((e==null?void 0:e.packagesTotal)??(e==null?void 0:e.quantity)??0)||0,s=Number((n==null?void 0:n.unitPricePackage)??(n==null?void 0:n.unitPrice)??0)||(a>0?Number((n==null?void 0:n.total)??(e==null?void 0:e.total)??0)/a:0)||0;return[{productId:String((n==null?void 0:n.productId)||""),productName:String((n==null?void 0:n.productName)||""),sku:(n==null?void 0:n.sku)||"",qty:a,unitPrice:Number(s||0),discount:Number((n==null?void 0:n.discount)||0),vendorCommissionAmount:Number((n==null?void 0:n.vendorCommissionAmount)??(n==null?void 0:n.commissionAmount)??0)}]}const t=Number((e==null?void 0:e.packagesTotal)??(e==null?void 0:e.quantity)??0)||0,r=t>0?Number((e==null?void 0:e.total)||0)/t:0;return t>0?[{productId:String((e==null?void 0:e.productId)||""),productName:String((e==null?void 0:e.productName)||""),sku:(e==null?void 0:e.sku)||"",qty:t,unitPrice:Number(r||0),discount:Number((e==null?void 0:e.discount)||0),vendorCommissionAmount:Number((e==null?void 0:e.vendorCommissionAmount)??(e==null?void 0:e.commissionAmount)??0)}]:[]}function d3e(e,t){const r=Uv(e);if(!r)return null;const n=e.vendorId||e.sellerId||void 0,a=e.vendorName||e.sellerName||void 0,s=u3e(e);let o=Number(e.total??e.itemsTotal??0)||s.reduce((l,c)=>{const u=(Number(c.qty||0)||0)*(Number(c.unitPrice||0)||0),d=Math.max(0,Number(c.discount||0)),A=Math.max(0,u-d);return l+A},0);return o=Number(o||0),{id:t,date:r,type:e.type||"CONTADO",total:o,items:s,customerId:e.customerId||void 0,customerName:e.customerName||void 0,vendorId:n,vendorName:a}}function A3e(e,t,r,n){const a={};for(const l of e)a[l.productId]||(a[l.productId]={productName:l.productName,lots:[]}),a[l.productId].lots.push({date:l.date,qtyLeft:Number(l.quantity||0),cost:Number(l.purchasePrice||0)});for(const l of Object.keys(a))a[l].lots.sort((c,u)=>c.date.localeCompare(u.date));const s=[...t].sort((l,c)=>l.date.localeCompare(c.date));let o=0;for(const l of s)for(const c of l.items||[]){const u=a[c.productId];if(!u)continue;let d=Number(c.qty||0);if(!(d<=0))for(const A of u.lots){if(d<=0)break;if(A.qtyLeft<=0)continue;const f=Math.min(A.qtyLeft,d);l.date>=r&&l.date<=n&&(o+=f*A.cost),A.qtyLeft-=f,d-=f}}return o}async function h3e(e){const t=Ht(At(ke,"ar_movements"),Xt("ref.saleId","==",e)),r=await jt(t);await Promise.all(r.docs.map(n=>fn(Mt(ke,"ar_movements",n.id))))}function f3e(){const{refreshKey:e,refresh:t}=Pc(),[r,n]=v.useState(ir(gu(new Date),"yyyy-MM-dd")),[a,s]=v.useState(ir(pu(new Date),"yyyy-MM-dd")),[o,l]=v.useState([]),[c,u]=v.useState([]),[d,A]=v.useState([]),[f,h]=v.useState([]),[m,p]=v.useState([]),[g,x]=v.useState([]),[y,b]=v.useState(!0),[_,T]=v.useState(""),[P,C]=v.useState([]),[S,I]=v.useState({}),[L,E]=v.useState({}),[j,R]=v.useState(!1),[W,de]=v.useState(null),[te,le]=v.useState([]),[ce,J]=v.useState(!1),[me,Ee]=v.useState({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0}),[k,F]=v.useState(!1),[V,D]=v.useState(""),[M,G]=v.useState([]),[O,K]=v.useState(!1),[ee,ne]=v.useState(!1),[Q,be]=v.useState(null);v.useEffect(()=>{(async()=>{try{const Le=await jt(At(ke,"sellers_candies")),Ze=[];Le.forEach(ye=>{const xe=ye.data();Ze.push({id:ye.id,name:xe.name||"",commissionPercent:Number(xe.commissionPercent||0)})}),C(Ze)}catch(Le){console.error("Error cargando sellers_candies",Le)}})()},[]);const Z=v.useMemo(()=>{const Le={};return P.forEach(Ze=>{Le[Ze.id]=Ze}),Le},[P]);v.useEffect(()=>{(async()=>{b(!0),T("");try{const Le=await jt(At(ke,"sales_candies")),Ze=[],ye=[];Le.forEach(ut=>{const It=ut.data(),$t=d3e(It,ut.id);$t&&($t.date<=a&&Ze.push($t),$t.date>=r&&$t.date<=a&&ye.push($t))}),u(Ze),l(ye);const xe=await jt(At(ke,"inventory_candies")),ue=[];xe.forEach(ut=>{const It=ut.data(),$t=Uv(It);if(!$t||$t>a)return;const hr=Math.max(1,Math.floor(Number(It.unitsPerPackage||1))),_e=Number(It.totalUnits??It.quantity??0),dt=Number(It.packages??0),gt=Number(It.remaining??0),Ce=Number(It.remainingPackages??0),et=dt>0?dt:_e>0?Math.floor(_e/hr):0,yt=Ce>0?Ce:gt>0?Math.floor(gt/hr):0;ue.push({id:ut.id,productId:It.productId,productName:It.productName||"",date:$t,quantity:Number(et||0),remaining:Number(yt||0),purchasePrice:Number(It.providerPrice||It.purchasePrice||0),unitsPerPackage:hr})}),A(ue);const Ge=await jt(At(ke,"expenses_candies")),Je=[];Ge.forEach(ut=>{const It=ut.data(),$t=Uv(It);$t&&$t>=r&&$t<=a&&Je.push({id:ut.id,date:$t,category:It.category||"",description:It.description||"",amount:Number(It.amount||0),status:It.status||""})}),h(Je);const ht=await jt(At(ke,"ar_movements")),Ue=[],rt={};ht.forEach(ut=>{const It=ut.data(),$t=Uv(It);if(!$t)return;const hr=It.customerId,_e=Number(It.amount||0);hr&&(rt[hr]=(rt[hr]||0)+_e),It.type==="ABONO"&&$t>=r&&$t<=a&&Ue.push({id:ut.id,customerId:hr,type:"ABONO",amount:_e,date:$t})}),p(Ue);const Qe=await jt(At(ke,"customers_candies")),Pe=[];Qe.forEach(ut=>{const It=ut.data();Pe.push({id:ut.id,name:It.name||"",balance:rt[ut.id]||0})}),x(Pe);const ze=await jt(At(ke,"inventory_candies_sellers")),it={},Bt={};ze.forEach(ut=>{const It=ut.data(),$t=Uv(It);if(!$t||$t<r||$t>a)return;const hr=It.sellerId||It.vendorId||"NO_VENDOR",_e=It.productName||"",dt=It.sku||"",gt=Math.max(1,Math.floor(Number(It.unitsPerPackage||1))),Ce=Number(It.totalUnits??0),et=Number(It.packages??0),yt=Number(It.remainingUnits??It.remaining??0),Pt=Number(It.remainingPackages??0),Lt=et>0?et:Ce>0?Math.floor(Ce/gt):0,qt=Pt>0?Pt:yt>0?Math.floor(yt/gt):0,wt=Number(It.totalVendor??0),ie=Number(It.gainVendor??0),se=Lt,he=se>0?wt/se:0,Ae=se>0?ie/se:0;if(it[hr]||(it[hr]={associated:[],remaining:[]}),Lt>0){const Be=Lt,Fe=Be*he,ae=Fe,Oe=Be*Ae;it[hr].associated.push({saleId:ut.id,date:$t,productName:_e,sku:dt,qty:Be,unitPrice:he,lineTotal:Fe,discount:0,lineFinal:ae,vendorCommissionAmount:Oe,type:"ASSOCIATED"}),Bt[hr]=(Bt[hr]||0)+Be}if(qt>0){const Be=qt,Fe=Be*he,ae=Fe,Oe=Be*Ae;it[hr].remaining.push({saleId:ut.id,date:$t,productName:_e,sku:dt,qty:Be,unitPrice:he,lineTotal:Fe,discount:0,lineFinal:ae,vendorCommissionAmount:Oe,type:"REMAINING"})}}),I(it),E(Bt)}catch(Le){console.error(Le),T(" Error cargando datos del dashboard.")}finally{b(!1)}})()},[r,a,e]);const z=v.useCallback(Le=>{if(Le.vendorId&&Z[Le.vendorId])return Z[Le.vendorId];const Ze=(Le.vendorName||"").trim().toLowerCase();if(Ze)return P.find(ye=>(ye.name||"").trim().toLowerCase()===Ze)},[Z,P]),X=v.useCallback((Le,Ze)=>{const ye=Number(Ze.vendorCommissionAmount||0);if(ye)return ye;const xe=z(Le);if(!xe||!xe.commissionPercent)return 0;const ue=Number(Ze.qty||0),Ge=Number(Ze.unitPrice||0),Je=ue*Ge,ht=Math.max(0,Number(Ze.discount||0)),Ue=Math.max(0,Je-ht);if(!Ue)return 0;const rt=Number(xe.commissionPercent)||0;return Ue*rt/100},[z]),ve=v.useMemo(()=>{try{return A3e(d,c,r,a)}catch(Le){return console.error(Le),0}},[d,c,r,a]),re=v.useMemo(()=>{const Le=o.reduce((Pe,ze)=>Pe+(ze.total||0),0),Ze=f.reduce((Pe,ze)=>Pe+(ze.amount||0),0),ye=Le-ve,xe=ye-Ze,ue=m.reduce((Pe,ze)=>Pe+Math.abs(ze.amount||0),0),Ge=g.filter(Pe=>(Pe.balance||0)>0),Je=Ge.reduce((Pe,ze)=>Pe+(ze.balance||0),0);let ht=0,Ue=0,rt=0,Qe=0;for(const Pe of o){const ze=(Pe.items||[]).reduce((Bt,ut)=>Bt+(Number(ut.qty)||0),0),it=(Pe.items||[]).reduce((Bt,ut)=>Bt+X(Pe,ut),0);Pe.type==="CONTADO"?(ht+=ze,rt+=it):(Ue+=ze,Qe+=it)}return{ventasTotales:Le,costoMercaderia:ve,gastosPeriodo:Ze,gananciaAntes:ye,gananciaDespues:xe,abonosRecibidos:ue,saldosPendientes:Je,clientesConSaldo:Ge.length,paquetesCash:ht,paquetesCredito:Ue,comisionCash:rt,comisionCredito:Qe}},[o,f,m,g,ve,X]),Ne=v.useMemo(()=>{const Le={},Ze={};for(const ye of o)if(!(ye.type!=="CREDITO"||!ye.customerId))for(const xe of ye.items||[]){const ue=Number(xe.qty||0),Ge=Number(xe.unitPrice||0),Je=ue*Ge,ht=Math.max(0,Number(xe.discount||0)),Ue=Math.max(0,Je-ht);Le[ye.customerId]=(Le[ye.customerId]||0)+ue,Ze[ye.customerId]=(Ze[ye.customerId]||0)+Ue}return g.filter(ye=>(ye.balance||0)>0).map(ye=>({customerId:ye.id,name:ye.name,paquetesAsociados:Le[ye.id]||0,saldoTotal:Ze[ye.id]||0,saldoPendiente:ye.balance||0})).sort((ye,xe)=>xe.saldoPendiente-ye.saldoPendiente)},[g,o]),Me=v.useMemo(()=>{const Le={};return g.forEach(Ze=>Le[Ze.id]=Ze.name),Le},[g]),Ve=v.useMemo(()=>[...o].sort((Le,Ze)=>Ze.date.localeCompare(Le.date)).map(Le=>{var ue;const Ze=(Le.items||[]).reduce((Ge,Je)=>Ge+(Number(Je.qty)||0),0);let ye="Cash";Le.type==="CREDITO"&&Le.customerId?ye=Me[Le.customerId]||"":Le.type==="CONTADO"&&(ye=((ue=Le.customerName)==null?void 0:ue.trim())||"Cash");const xe=Ze>0?Le.total/Ze:0;return{id:Le.id,date:Le.date,type:Le.type==="CREDITO"?"Crdito":"Cash",customer:ye,paquetes:Ze,total:Number(Le.total||0),avgPrice:xe}}),[o,Me]),nt=v.useMemo(()=>{var Ze,ye;const Le=new Map;for(const xe of o){const ue=xe.vendorId||"NO_VENDOR",Ge=xe.vendorName||((Ze=Z[ue])==null?void 0:Ze.name)||"Sin vendedor";Le.has(ue)||Le.set(ue,{vendorId:ue,vendorName:Ge,paquetesAsociados:0,paquetesVendidos:0,paquetesFiados:0,totalVendido:0,totalFiado:0,comisionCash:0,comisionCredito:0,paquetesRestantes:0});const Je=Le.get(ue);for(const ht of xe.items||[]){const Ue=Number(ht.qty||0),rt=Number(ht.unitPrice||0),Qe=Ue*rt,Pe=Math.max(0,Number(ht.discount||0)),ze=Math.max(0,Qe-Pe),it=X(xe,ht);xe.type==="CONTADO"?(Je.paquetesVendidos+=Ue,Je.totalVendido+=ze,Je.comisionCash+=it):(Je.paquetesFiados+=Ue,Je.totalFiado+=ze,Je.comisionCredito+=it)}}for(const[xe,ue]of Object.entries(L)){const Ge=Le.get(xe),Je=(Ge==null?void 0:Ge.vendorName)||((ye=Z[xe])==null?void 0:ye.name)||"Sin vendedor",ht=Ge||{vendorId:xe,vendorName:Je,paquetesAsociados:0,paquetesVendidos:0,paquetesFiados:0,totalVendido:0,totalFiado:0,comisionCash:0,comisionCredito:0,paquetesRestantes:0};ht.paquetesAsociados=ue,ht.paquetesRestantes=Math.max(ue-ht.paquetesVendidos-ht.paquetesFiados,0),Le.set(xe,ht)}return Array.from(Le.values()).sort((xe,ue)=>ue.totalVendido+ue.totalFiado-(xe.totalVendido+xe.totalFiado))},[o,L,Z,X]),st=async Le=>{R(!0),de({id:Le.customerId,name:Le.name}),le([]),J(!0),Ee({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});try{const Ze=[];let ye=0,xe=0,ue=0;for(const Ue of o)if(!(Ue.type!=="CREDITO"||Ue.customerId!==Le.customerId))for(const rt of Ue.items||[]){const Qe=Number(rt.qty||0),Pe=Number(rt.unitPrice||0),ze=Qe*Pe,it=Math.max(0,Number(rt.discount||0)),Bt=Math.max(0,ze-it);Ze.push({saleId:Ue.id,date:Ue.date,productName:rt.productName,sku:rt.sku||"",qty:Qe,unitPrice:Pe,lineTotal:ze,discount:it,lineFinal:Bt}),ye+=ze,xe+=it,ue+=Bt}let Ge=0;for(const Ue of m)Ue.customerId===Le.customerId&&(Ge+=Math.abs(Ue.amount||0));const Je=g.find(Ue=>Ue.id===Le.customerId),ht=(Je==null?void 0:Je.balance)||0;le(Ze),Ee({totalBruto:ye,totalDescuento:xe,totalFiado:ue,saldoActual:ht,abonadoPeriodo:Ge})}catch(Ze){console.error(Ze),T(" No se pudo cargar el detalle del cliente.")}finally{J(!1)}},lt=(Le,Ze,ye)=>{F(!0);let xe="";ye==="ASSOCIATED"?xe=`Paquetes asociados  ${Ze}`:ye==="REMAINING"?xe=`Paquetes restantes  ${Ze}`:ye==="CASH"?xe=`Paquetes vendidos (Cash)  ${Ze}`:xe=`Paquetes fiados (Crdito)  ${Ze}`,D(xe),G([]),K(!0);try{if(ye==="ASSOCIATED"||ye==="REMAINING"){const Ge=S[Le],Je=ye==="ASSOCIATED"?(Ge==null?void 0:Ge.associated)||[]:(Ge==null?void 0:Ge.remaining)||[];G([...Je].sort((ht,Ue)=>ht.date.localeCompare(Ue.date))),K(!1);return}const ue=[];for(const Ge of o)if(((Ge.vendorId||"NO_VENDOR")===Le||!Ge.vendorId&&Le==="NO_VENDOR")&&!(ye==="CASH"&&Ge.type!=="CONTADO")&&!(ye==="CREDIT"&&Ge.type!=="CREDITO"))for(const ht of Ge.items||[]){const Ue=Number(ht.qty||0),rt=Number(ht.unitPrice||0),Qe=Ue*rt,Pe=Math.max(0,Number(ht.discount||0)),ze=Math.max(0,Qe-Pe),it=X(Ge,ht);ue.push({saleId:Ge.id,date:Ge.date,productName:ht.productName,sku:ht.sku||"",qty:Ue,unitPrice:rt,lineTotal:Qe,discount:Pe,lineFinal:ze,vendorCommissionAmount:it,type:ye})}G(ue.sort((Ge,Je)=>Ge.date.localeCompare(Je.date)))}catch(ue){console.error(ue),T(" No se pudo cargar el detalle del vendedor.")}finally{K(!1)}},bt=Le=>{const Ze=o.find(ye=>ye.id===Le)||null;be(Ze),ne(!0)},ot=async Le=>{if(window.confirm("Eliminar esta venta? Esta accin no se puede deshacer."))try{await S1(Le),await h3e(Le),l(Ze=>Ze.filter(ye=>ye.id!==Le)),u(Ze=>Ze.filter(ye=>ye.id!==Le)),ne(!1),be(null)}catch(Ze){console.error(Ze),alert("No se pudo eliminar la venta. Revisa la consola para ms detalles.")}};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas (Dulces)"}),i.jsx(bu,{onClick:t,loading:y})]}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:Le=>n(Le.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:Le=>s(Le.target.value)})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),i.jsx("div",{className:"text-xl font-semibold",children:sn(re.ventasTotales)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Contado + Crdito del periodo."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),i.jsx("div",{className:"text-xl font-semibold",children:sn(re.costoMercaderia)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:sn(re.gananciaAntes)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Gastos"}),i.jsx("div",{className:"text-xl font-semibold",children:sn(re.gastosPeriodo)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Neta"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:sn(re.gananciaDespues)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),i.jsx("div",{className:"text-xl font-semibold",children:sn(re.abonosRecibidos)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),i.jsx("div",{className:"text-xl font-semibold",children:sn(re.saldosPendientes)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),i.jsx("div",{className:"text-xl font-semibold",children:re.clientesConSaldo})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:re.paquetesCash})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Crdito (vendidos)"}),i.jsx("div",{className:"text-xl font-semibold",children:re.paquetesCredito})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:sn(re.comisionCash)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:sn(re.comisionCredito)})]})]}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado por cliente (Crdito)"}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Paquetes asociados (periodo)"}),i.jsx("th",{className:"p-2 border",children:"Saldo total (periodo)"}),i.jsx("th",{className:"p-2 border",children:"Saldo pendiente"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Cargando"})}):Ne.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Sin clientes con saldo"})}):Ne.map(Le=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:Le.name}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>st({customerId:Le.customerId,name:Le.name}),title:"Ver paquetes fiados del periodo",children:Le.paquetesAsociados})}),i.jsx("td",{className:"p-2 border",children:sn(Le.saldoTotal)}),i.jsx("td",{className:"p-2 border font-semibold",children:sn(Le.saldoPendiente)})]},Le.customerId))})]})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado vendedores"}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes asociados"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes vendidos (Cash)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total vendido (Cash)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Cash"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes fiados (Crdito)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total fiado (Crdito)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Crdito"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):nt.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin datos de vendedores en el rango seleccionado."})}):nt.map(Le=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Le.vendorName}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>lt(Le.vendorId,Le.vendorName,"ASSOCIATED"),children:Le.paquetesAsociados})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>lt(Le.vendorId,Le.vendorName,"REMAINING"),children:Le.paquetesRestantes})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>lt(Le.vendorId,Le.vendorName,"CASH"),children:Le.paquetesVendidos})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:sn(Le.totalVendido)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:sn(Le.comisionCash)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>lt(Le.vendorId,Le.vendorName,"CREDIT"),children:Le.paquetesFiados})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:sn(Le.totalFiado)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:sn(Le.comisionCredito)})]},Le.vendorId))})]})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Transacciones del periodo"}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cliente"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Tipo"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio venta (prom.)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Acciones"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):Ve.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin transacciones en el rango seleccionado."})}):Ve.map(Le=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Le.date}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Le.customer}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Le.type}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>bt(Le.id),children:Le.paquetes})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:sn(Le.avgPrice)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:sn(Le.total)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>ot(Le.id),children:"Eliminar"})})]},Le.id))})]})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Gastos del periodo"}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):f.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):f.sort((Le,Ze)=>Le.date.localeCompare(Ze.date)).map(Le=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:Le.date}),i.jsx("td",{className:"p-2 border",children:Le.category||""}),i.jsx("td",{className:"p-2 border",children:Le.description?i.jsx("span",{title:Le.description,children:Le.description.length>40?Le.description.slice(0,40)+"":Le.description}):""}),i.jsx("td",{className:"p-2 border",children:sn(Le.amount)}),i.jsx("td",{className:"p-2 border",children:Le.status||""})]},Le.id))})]})}),_&&i.jsx("p",{className:"mt-2 text-sm",children:_}),j&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Detalle cliente  ",(W==null?void 0:W.name)||""]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>R(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total bruto (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:sn(me.totalBruto)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Descuento (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:sn(me.totalDescuento)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto total fiado (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:sn(me.totalFiado)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-xl font-semibold",children:sn(me.saldoActual)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Abonado (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:sn(me.abonadoPeriodo)})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha compra"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"SKU"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"P. Unit"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Descuento"}),i.jsx("th",{className:"p-2 border",children:"Monto final"})]})}),i.jsx("tbody",{children:ce?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Cargando"})}):te.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Sin paquetes fiados en el periodo."})}):te.sort((Le,Ze)=>Le.date.localeCompare(Ze.date)).map((Le,Ze)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:Le.date}),i.jsx("td",{className:"p-2 border",children:Le.productName}),i.jsx("td",{className:"p-2 border",children:Le.sku||""}),i.jsx("td",{className:"p-2 border",children:Le.qty}),i.jsx("td",{className:"p-2 border",children:sn(Le.unitPrice)}),i.jsx("td",{className:"p-2 border",children:sn(Le.lineTotal)}),i.jsx("td",{className:"p-2 border",children:sn(Le.discount)}),i.jsx("td",{className:"p-2 border",children:sn(Le.lineFinal)})]},`${Le.saleId}-${Ze}`))})]})})]})}),k&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:V}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>F(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"SKU"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"P. Unit"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Descuento"}),i.jsx("th",{className:"p-2 border",children:"Monto final"}),i.jsx("th",{className:"p-2 border",children:"Comisin"})]})}),i.jsx("tbody",{children:O?i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando"})}):M.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin paquetes para este vendedor en el periodo."})}):M.map((Le,Ze)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:Le.date}),i.jsx("td",{className:"p-2 border",children:Le.productName}),i.jsx("td",{className:"p-2 border",children:Le.sku||""}),i.jsx("td",{className:"p-2 border",children:Le.qty}),i.jsx("td",{className:"p-2 border",children:sn(Le.unitPrice)}),i.jsx("td",{className:"p-2 border",children:sn(Le.lineTotal)}),i.jsx("td",{className:"p-2 border",children:sn(Le.discount)}),i.jsx("td",{className:"p-2 border",children:sn(Le.lineFinal)}),i.jsx("td",{className:"p-2 border",children:sn(Le.vendorCommissionAmount)})]},`${Le.saleId}-${Ze}`))})]})})]})}),ee&&Q&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-4xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Detalle de venta  ",Q.date]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ne(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto mb-3",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"SKU"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"P. Unit"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Comisin"})]})}),i.jsx("tbody",{children:(Q.items||[]).map((Le,Ze)=>{const ye=Number(Le.qty||0),xe=Number(Le.unitPrice||0),ue=ye*xe,Ge=X(Q,Le);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:Le.productName}),i.jsx("td",{className:"p-2 border",children:Le.sku||""}),i.jsx("td",{className:"p-2 border",children:ye}),i.jsx("td",{className:"p-2 border",children:sn(xe)}),i.jsx("td",{className:"p-2 border",children:sn(ue)}),i.jsx("td",{className:"p-2 border",children:sn(Ge)})]},Ze)})})]})}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"font-semibold",children:"Total venta:"}),sn(Q.total)]}),i.jsx("button",{className:"text-xs bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700",onClick:()=>ot(Q.id),children:"Eliminar venta"})]})]})})]})}const y7=["Rivas","Isla Ometepe","San Jorge"];function m3e(){const{refreshKey:e,refresh:t}=Pc(),[r,n]=v.useState([]),[a,s]=v.useState(!0),[o,l]=v.useState(""),[c,u]=v.useState(!1),[d,A]=v.useState(""),[f,h]=v.useState("0"),[m,p]=v.useState("Rivas"),[g,x]=v.useState(null),[y,b]=v.useState(""),[_,T]=v.useState("0"),[P,C]=v.useState("Rivas");v.useEffect(()=>{(async()=>{s(!0),l("");try{const W=Ht(At(ke,"sellers_candies"),Ur("name","asc")),de=await jt(W),te=[];de.forEach(le=>{const ce=le.data();te.push({id:le.id,name:ce.name||"",commissionPercent:Number(ce.commissionPercent||0),branch:ce.branch||"Rivas",createdAt:ce.createdAt||zt.now()})}),n(te)}catch(W){console.error(W),l(" Error cargando vendedores.")}finally{s(!1)}})()},[e]);const S=()=>{A(""),h("0"),p("Rivas")},I=async W=>{W.preventDefault(),l("");const de=d.trim();if(!de){l("Ingresa el nombre y apellido del vendedor.");return}const te=Number(f||0);if(te<0){l("La comisin no puede ser negativa.");return}try{const le={name:de,commissionPercent:te,branch:m,createdAt:zt.now()},ce=await en(At(ke,"sellers_candies"),le);n(J=>[{id:ce.id,...le},...J]),l(" Vendedor creado correctamente."),S(),u(!1)}catch(le){console.error(le),l(" Error al crear el vendedor.")}},L=W=>{x(W.id),b(W.name),T(W.commissionPercent.toString()),C(W.branch)},E=()=>{x(null),b(""),T("0"),C("Rivas")},j=async()=>{if(!g)return;l("");const W=y.trim();if(!W){l("El nombre y apellido no pueden estar vacos.");return}const de=Number(_||0);if(de<0){l("La comisin no puede ser negativa.");return}try{await Lr(Mt(ke,"sellers_candies",g),{name:W,commissionPercent:de,branch:P}),n(te=>te.map(le=>le.id===g?{...le,name:W,commissionPercent:de,branch:P}:le)),l(" Vendedor actualizado."),E()}catch(te){console.error(te),l(" Error al actualizar el vendedor.")}},R=async W=>{if(window.confirm(`Eliminar al vendedor "${W.name}"? Esta accin no se puede deshacer.`))try{await fn(Mt(ke,"sellers_candies",W.id)),n(te=>te.filter(le=>le.id!==W.id)),l(" Vendedor eliminado.")}catch(te){console.error(te),l(" Error al eliminar el vendedor.")}};return i.jsxs("div",{className:"max-w-5xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Vendedores de Dulces"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(bu,{onClick:t,loading:a}),i.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>u(!0),children:[i.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo vendedor"]})]})]}),c&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo vendedor de dulces"}),i.jsxs("form",{onSubmit:I,className:"space-y-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre y apellido"}),i.jsx("input",{className:"w-full border p-2 rounded",value:d,onChange:W=>A(W.target.value),placeholder:"Ej: Juan Prez"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comisin (% sobre venta total)"}),i.jsx("input",{type:"number",step:"0.01",min:0,className:"w-full border p-2 rounded",value:f,onChange:W=>h(W.target.value),placeholder:"Ej: 10"}),i.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Este porcentaje se usa para calcular la comisin del vendedor sobre el total de la venta (no es el margen del producto)."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Sucursal"}),i.jsx("select",{className:"w-full border p-2 rounded",value:m,onChange:W=>p(W.target.value),children:y7.map(W=>i.jsx("option",{value:W,children:W},W))})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[i.jsx("button",{type:"button",onClick:()=>{S(),u(!1)},className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Guardar vendedor"})]})]})]})}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full overflow-x-auto mt-3",children:i.jsxs("table",{className:"min-w-[700px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Nombre y apellido"}),i.jsx("th",{className:"p-2 border",children:"Comisin (%)"}),i.jsx("th",{className:"p-2 border",children:"Sucursal"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:a?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Cargando"})}):r.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Sin vendedores registrados."})}):r.map(W=>{const de=g===W.id;return i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:de?i.jsx("input",{className:"border p-1 rounded text-xs w-full",value:y,onChange:te=>b(te.target.value)}):W.name}),i.jsx("td",{className:"p-2 border",children:de?i.jsx("input",{type:"number",step:"0.01",min:0,className:"border p-1 rounded text-xs w-24 text-right",value:_,onChange:te=>T(te.target.value)}):`${W.commissionPercent.toFixed(2)} %`}),i.jsx("td",{className:"p-2 border",children:de?i.jsx("select",{className:"border p-1 rounded text-xs",value:P,onChange:te=>C(te.target.value),children:y7.map(te=>i.jsx("option",{value:te,children:te},te))}):W.branch}),i.jsx("td",{className:"p-2 border",children:de?i.jsxs("div",{className:"flex gap-1 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:j,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:E,children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-1 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-yellow-500 text-white hover:bg-yellow-600 text-xs",onClick:()=>L(W),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>R(W),children:"Borrar"})]})})]},W.id)})})]})}),o&&i.jsx("p",{className:"mt-2 text-sm",children:o})]})}const ki=e=>Math.max(0,Math.floor(Number(e||0)));function p3e(e){return Math.max(1,ki(e.unitsPerPackage||1))}async function g3e(e){const{orderId:t,productId:r}=e;let n=ki(e.packagesToReturn);if(!t||!r||n<=0)return;const a=Ht(At(ke,"inventory_candies"),Xt("orderId","==",t),Xt("productId","==",r),Ur("createdAt","asc")),s=await jt(a);if(s.empty)return;const o=s.docs.map(l=>l.ref);await Ks(ke,async l=>{const c=await Promise.all(o.map(u=>l.get(u)));for(let u=0;u<o.length&&n>0;u++){const d=c[u];if(!d.exists())continue;const A=d.data(),f=p3e(A),h=n*f,p=ki(A.remaining??0)+h,g=Math.floor(p/f);l.update(o[u],{remaining:p,remainingPackages:g,packages:g,updatedAt:zt.now()}),n=0}})}async function x3e(e){const{orderId:t,productId:r}=e,n=ki(e.packagesToReturn);if(!t||!r||n<=0)return;const a=Mt(ke,"candy_main_orders",t);await Ks(ke,async s=>{const o=await s.get(a);if(!o.exists())return;const l=o.data(),c=Array.isArray(l.items)?l.items:[];let u=!1;const d=c.map(A=>String((A==null?void 0:A.id)||"")!==String(r)?A:(u=!0,{...A,remainingPackages:ki(A.remainingPackages)+n}));u&&s.update(a,{items:d,updatedAt:zt.now()})})}function v3e(e){if(!Array.isArray(e))return[];const t=[];for(const r of e){const n=String((r==null?void 0:r.batchId)||""),a=String((r==null?void 0:r.masterOrderId)||(r==null?void 0:r.orderId)||""),s=ki((r==null?void 0:r.units)??(r==null?void 0:r.qty)??(r==null?void 0:r.quantity)??0),o=Math.max(1,ki((r==null?void 0:r.unitsPerPackage)||1));!n||!a||s<=0||t.push({batchId:n,masterOrderId:a,units:s,unitsPerPackage:o})}return t}function b7(e,t){const r=ki(e),n=Math.max(1,ki(t));return Math.floor(r/n)}async function w7(e){if(!e)throw new Error("vendorInventoryId requerido");const t=Mt(ke,"inventory_candies_sellers",e),r=await Qi(t);if(!r.exists())throw new Error("No existe la orden del vendedor");const n=r.data(),a=String(n.productId||""),s=ki(n.packages||n.remainingPackages||0),o=v3e(n.masterAllocations||n.allocations||n.allocationsByBatch);if(!o.length){const c=String(n.orderId||"");if(!c)throw new Error("La orden del vendedor no tiene orderId");if(!a)throw new Error("La orden del vendedor no tiene productId");return s<=0?(await Ks(ke,async u=>{u.delete(t)}),{restoredPackages:0,mode:"legacy"}):(await g3e({orderId:c,productId:a,packagesToReturn:s}),await x3e({orderId:c,productId:a,packagesToReturn:s}),await Ks(ke,async u=>{u.delete(t)}),{restoredPackages:s,mode:"legacy"})}let l=0;return await Ks(ke,async c=>{const u={};for(const g of o){const x=Math.max(1,ki(g.unitsPerPackage||1)),y=ki(g.units),b=b7(y,x);b>0&&(u[g.masterOrderId]=(u[g.masterOrderId]||0)+b)}const d=o.map(g=>Mt(ke,"inventory_candies",g.batchId)),f=Object.keys(u).map(g=>Mt(ke,"candy_main_orders",g)),[h,m]=await Promise.all([Promise.all(d.map(g=>c.get(g))),Promise.all(f.map(g=>c.get(g)))]);let p=0;for(let g=0;g<o.length;g++){const x=o[g],y=h[g];if(!y.exists())continue;const b=y.data(),_=Math.max(1,ki(x.unitsPerPackage||b.unitsPerPackage||1)),T=ki(x.units),C=ki(b.remaining??0)+T,S=Math.floor(C/_);c.update(d[g],{remaining:C,remainingPackages:S,packages:S,updatedAt:zt.now()});const I=b7(T,_);I>0&&(p+=I)}for(let g=0;g<f.length;g++){const x=m[g];if(!x.exists())continue;const y=f[g].id,b=ki(u[y]||0);if(b<=0)continue;const _=x.data(),T=Array.isArray(_.items)?_.items:[];let P=!1;const C=T.map(S=>String((S==null?void 0:S.id)||"")!==String(a)?S:(P=!0,{...S,remainingPackages:ki(S.remainingPackages)+b}));P&&c.update(f[g],{items:C,updatedAt:zt.now()})}c.delete(t),l=p}),{restoredPackages:l,mode:"blind"}}const tn=e=>`C$ ${(Number(e)||0).toFixed(2)}`;function y3e(e){const t=String(e||"").trim().toUpperCase();if(t.includes("ISLA"))return"ISLA";if(t.includes("JORGE"))return"SAN_JORGE";if(t.includes("RIVAS"))return"RIVAS"}const N7=e=>Math.max(0,Math.floor(Number(e||0)));function b3e({role:e="",sellerCandyId:t="",currentUserEmail:r}){const{refreshKey:n,refresh:a}=Pc(),s=!e||e==="admin",o=e==="vendedor_dulces",l=(r||"").trim().toLowerCase(),c=!s&&o,[u,d]=v.useState({}),[A,f]=v.useState([]),[h,m]=v.useState([]),[p,g]=v.useState({}),[x,y]=v.useState(null),[b,_]=v.useState([]),[T,P]=v.useState(!0),[C,S]=v.useState(""),[I,L]=v.useState(!1),[E,j]=v.useState(null),[R,W]=v.useState([]),[de,te]=v.useState(""),[le,ce]=v.useState(""),[J,me]=v.useState(""),[Ee,k]=v.useState("0"),[F,V]=v.useState([]),[D,M]=v.useState(!1),G=v.useMemo(()=>A.find(ae=>ae.id===de)||null,[de,A]),O=G==null?void 0:G.branch,K=v.useMemo(()=>h.find(ae=>ae.id===J)||null,[J,h]),ee=v.useMemo(()=>new Set(F.map(ae=>ae.productId)),[F]),ne=v.useMemo(()=>h.filter(ae=>(p[ae.id]??0)>0||ee.has(ae.id)).sort((ae,Oe)=>ae.name.localeCompare(Oe.name)),[h,p,ee]),Q=v.useMemo(()=>{const ae={};return A.forEach(Oe=>ae[Oe.id]=Oe),ae},[A]),be=v.useMemo(()=>!o||!l?null:A.find(ae=>(ae.email||"").trim().toLowerCase()===l)||null,[o,l,A]),Z=v.useMemo(()=>{const ae=A.find(Oe=>(Oe.email||"").trim().toLowerCase()===l)||null;return(ae==null?void 0:ae.name)||(r||"").trim()||""},[A,l,r]),z=async()=>{try{const ae=At(ke,"inventory_transfers_candies");if(!o){const Xe=await jt(ae),qe={};Xe.forEach(at=>{const mt=at.data(),Kt=Number(mt.packagesMoved||0),Jt=String(mt.fromOrderKey||""),_r=String(mt.toOrderKey||"");Jt&&(qe[Jt]=qe[Jt]||{out:0,in:0},qe[Jt].out+=Kt),_r&&(qe[_r]=qe[_r]||{out:0,in:0},qe[_r].in+=Kt)}),d(qe);return}const Oe=Ht(ae,Xt("fromSellerId","==",t)),pe=Ht(ae,Xt("toSellerId","==",t)),[De,Se]=await Promise.all([jt(Oe),jt(pe)]),Ye={},We=(Xe,qe)=>{Xe.forEach(at=>{const mt=at.data(),Kt=Number(mt.packagesMoved||0),Jt=String(qe==="out"?mt.fromOrderKey||"":mt.toOrderKey||"");Jt&&(Ye[Jt]=Ye[Jt]||{out:0,in:0},Ye[Jt][qe]+=Kt)})};We(De.docs,"out"),We(Se.docs,"in"),d(Ye)}catch(ae){console.error(ae),d({})}};v.useEffect(()=>{(async()=>{P(!0),S("");try{const ae=await jt(Ht(At(ke,"sellers_candies"),Ur("name","asc"))),Oe=[];ae.forEach(at=>{const mt=at.data(),Kt=mt.branch||mt.branchLabel||mt.route||mt.sucursal||mt.location||"";Oe.push({id:at.id,name:mt.name||"",email:mt.email||"",commissionPercent:Number(mt.commissionPercent||0),branch:y3e(Kt),branchLabel:Kt})}),f(Oe);const pe=await jt(At(ke,"inventory_candies")),De={},Se={};pe.forEach(at=>{var sl;const mt=at.data(),Kt=String(mt.productId||"");if(!Kt)return;const Jt=Number(mt.remainingPackages);if(Number.isFinite(Jt))De[Kt]=(De[Kt]||0)+Math.max(0,Math.floor(Jt));else{const FA=Number(mt.remaining??mt.quantity??0),ra=Number(mt.unitsPerPackage||0);let Nu=0;ra>0?Nu=FA/ra:Nu=Number(mt.packages||0),De[Kt]=(De[Kt]||0)+Math.max(0,Nu)}const _r=String(mt.date||""),ta=Number(((sl=mt.createdAt)==null?void 0:sl.seconds)??0),Vn={unitPriceRivas:Number(mt.unitPriceRivas||0),unitPriceSanJorge:Number(mt.unitPriceSanJorge||0),unitPriceIsla:Number(mt.unitPriceIsla||0),date:_r,createdAtSec:ta};if(!(Vn.unitPriceRivas>0||Vn.unitPriceSanJorge>0||Vn.unitPriceIsla>0))return;const ss=Se[Kt];if(!ss){Se[Kt]=Vn;return}const al=`${ss.date}#${String(ss.createdAtSec).padStart(10,"0")}`;`${Vn.date}#${String(Vn.createdAtSec).padStart(10,"0")}`>al&&(Se[Kt]=Vn)}),Object.keys(De).forEach(at=>De[at]=Math.floor(De[at])),g(De);const Ye=await jt(Ht(At(ke,"products_candies"),Ur("name","asc"))),We=[];Ye.forEach(at=>{const mt=at.data(),Kt=at.id,Jt=Se[Kt];We.push({id:Kt,name:mt.name||"",category:mt.category||"",providerPrice:Number(mt.providerPrice||0),packages:Number(mt.packages||0),unitsPerPackage:Number(mt.unitsPerPackage||0),unitPriceRivas:Number((Jt==null?void 0:Jt.unitPriceRivas)||0),unitPriceSanJorge:Number((Jt==null?void 0:Jt.unitPriceSanJorge)||0),unitPriceIsla:Number((Jt==null?void 0:Jt.unitPriceIsla)||0)})}),m(We);const Xe=await jt(o?Ht(At(ke,"inventory_candies_sellers"),Xt("sellerId","==",t),Ur("createdAt","desc")):Ht(At(ke,"inventory_candies_sellers"),Ur("createdAt","desc"))),qe=[];Xe.forEach(at=>{const mt=at.data();qe.push({id:at.id,sellerId:mt.sellerId,sellerName:mt.sellerName||"",productId:mt.productId,productName:mt.productName||"",category:mt.category||"",orderId:mt.orderId||null,packages:Number(mt.packages||0),unitsPerPackage:Number(mt.unitsPerPackage||0),totalUnits:Number(mt.totalUnits||0),remainingPackages:Number(mt.remainingPackages||0),remainingUnits:Number(mt.remainingUnits||0),providerPrice:Number(mt.providerPrice||0),totalRivas:Number(mt.totalRivas||0),totalSanJorge:Number(mt.totalSanJorge||0),totalIsla:Number(mt.totalIsla||0),unitPriceRivas:Number(mt.unitPriceRivas||0),unitPriceSanJorge:Number(mt.unitPriceSanJorge||0),unitPriceIsla:Number(mt.unitPriceIsla||0),markupPercent:Number(mt.markupPercent||0),subtotal:Number(mt.subtotal||0),totalVendor:Number(mt.totalVendor||0),gainVendor:Number(mt.gainVendor||0),unitPriceVendor:Number(mt.unitPriceVendor||0),date:mt.date||"",createdAt:mt.createdAt||zt.now()})}),_(qe),await z()}catch(ae){console.error(ae),S(" Error cargando datos de vendedores / pedidos.")}finally{P(!1)}})()},[n,e,t]);const X=v.useMemo(()=>o&&be?b.filter(ae=>ae.sellerId===be.id):b,[b,o,be,de]),ve=ae=>X.filter(Oe=>(Oe.orderId||Oe.id)===ae),re=v.useMemo(()=>{var Oe;const ae={};for(const pe of X){const De=pe.orderId||pe.id,Se=ae[De],Ye=pe.date||((Oe=pe.createdAt)!=null&&Oe.toDate?pe.createdAt.toDate().toISOString().slice(0,10):"");if(Se)Se.totalPackages+=pe.packages,Se.totalRemainingPackages+=pe.remainingPackages,Se.subtotal+=pe.subtotal,Se.totalVendor+=pe.totalVendor,Ye>Se.date&&(Se.date=Ye);else{const We=u[De]||{out:0,in:0};ae[De]={orderKey:De,sellerId:pe.sellerId,sellerName:pe.sellerName,date:Ye,totalPackages:pe.packages,totalRemainingPackages:pe.remainingPackages,subtotal:pe.subtotal,totalVendor:pe.totalVendor,transferredOut:We.out,transferredIn:We.in}}}return Object.values(ae).map(pe=>{const De=u[pe.orderKey]||{out:0,in:0};return{...pe,transferredOut:De.out||0,transferredIn:De.in||0}}).sort((pe,De)=>De.date.localeCompare(pe.date))},[X,u]),Ne=v.useMemo(()=>{const ae={};return re.forEach(Oe=>ae[Oe.orderKey]=Oe),ae},[re]),Me=v.useMemo(()=>{const ae=F.reduce((We,Xe)=>We+Xe.packages,0),Oe=F.reduce((We,Xe)=>We+Xe.subtotal,0),pe=F.reduce((We,Xe)=>We+Xe.totalVendor,0),De=F.reduce((We,Xe)=>We+Xe.gainVendor,0),Se=Number((G==null?void 0:G.commissionPercent)||0),Ye=pe*Se/100;return{totalPackages:ae,subtotal:Oe,totalVendor:pe,gainVendor:De,commissionPercent:Se,commissionAmount:Ye}},[F,G]),Ve=()=>{j(null),W([]),te(""),ce(""),me(""),k("0"),V([])};function nt(ae){const Oe=Number(ae.providerPrice||0),pe=Number(ae.packages||0),De=Number(ae.unitPriceRivas||0),Se=Number(ae.unitPriceSanJorge||0),Ye=Number(ae.unitPriceIsla||0),We=Oe*pe,Xe=De*pe,qe=Se*pe,at=Ye*pe;let mt=De,Kt=Xe;switch(ae.sellerBranch){case"SAN_JORGE":mt=Se,Kt=qe;break;case"ISLA":mt=Ye,Kt=at;break;case"RIVAS":default:mt=De,Kt=Xe;break}const Jt=Kt-We;return{subtotal:We,totalVendor:Kt,gainVendor:Jt,pricePerPackage:mt,totalRivas:Xe,totalSanJorge:qe,totalIsla:at,unitPriceRivas:De,unitPriceSanJorge:Se,unitPriceIsla:Ye}}function st(ae,Oe){const{subtotal:pe,totalVendor:De,gainVendor:Se,pricePerPackage:Ye,totalRivas:We,totalSanJorge:Xe,totalIsla:qe,unitPriceRivas:at,unitPriceSanJorge:mt,unitPriceIsla:Kt}=nt({providerPrice:ae.providerPrice,unitPriceRivas:ae.unitPriceRivas,unitPriceSanJorge:ae.unitPriceSanJorge,unitPriceIsla:ae.unitPriceIsla,packages:Oe,sellerBranch:O});return{id:`${ae.id}-${Date.now()}-${Math.random()}`,productId:ae.id,productName:ae.name,category:ae.category,providerPrice:ae.providerPrice,unitsPerPackage:ae.unitsPerPackage,packages:Oe,subtotal:pe,totalVendor:De,gainVendor:Se,pricePerPackage:Ye,totalRivas:We,totalSanJorge:Xe,totalIsla:qe,unitPriceRivas:at,unitPriceSanJorge:mt,unitPriceIsla:Kt,remainingPackages:Oe}}const lt=()=>{if(c)return;if(!K){S("Selecciona un producto antes de agregarlo.");return}if(ee.has(K.id)){S("Ese producto ya est agregado en este pedido.");return}const ae=Number(Ee||0);if(ae<=0){S("La cantidad de paquetes debe ser mayor a 0.");return}const Oe=p[K.id]??0;if(!E&&ae>Oe){S(`No hay suficientes paquetes en inventario general. Disponibles: ${Oe}`);return}const pe=st(K,ae);V(De=>[...De,pe]),me(""),k("0")},bt=ae=>{c||V(Oe=>Oe.filter(pe=>pe.id!==ae))},ot=(ae,Oe)=>{if(c)return;const pe=Number(Oe||0);V(De=>De.map(Se=>{if(Se.id!==ae)return Se;const{subtotal:Ye,totalVendor:We,gainVendor:Xe,pricePerPackage:qe,totalRivas:at,totalSanJorge:mt,totalIsla:Kt}=nt({providerPrice:Se.providerPrice,unitPriceRivas:Se.unitPriceRivas,unitPriceSanJorge:Se.unitPriceSanJorge,unitPriceIsla:Se.unitPriceIsla,packages:pe,sellerBranch:O});return{...Se,packages:pe,subtotal:Ye,totalVendor:We,gainVendor:Xe,pricePerPackage:qe,totalRivas:at,totalSanJorge:mt,totalIsla:Kt}}))};async function Le(ae,Oe,pe){const De=await GFe({productId:ae,quantityPacks:Oe,saleDate:pe}),Se=Array.isArray(De==null?void 0:De.allocations)?De.allocations:[];if(!Se.length)return[];const Ye=Se.map(qe=>String(qe.batchId||"")).filter(Boolean),We=await Promise.all(Ye.map(qe=>Qi(Mt(ke,"inventory_candies",qe)))),Xe=[];for(let qe=0;qe<Se.length;qe++){const at=Se[qe],mt=String(at.batchId||""),Kt=N7(at.qty||at.units||at.quantity||0),Jt=We[qe];if(!mt||Kt<=0||!Jt.exists())continue;const _r=Jt.data(),ta=String(_r.orderId||""),Vn=Math.max(1,N7(_r.unitsPerPackage||1));ta&&Xe.push({batchId:mt,masterOrderId:ta,units:Kt,unitsPerPackage:Vn})}return Xe}const Ze=async ae=>{if(ae.preventDefault(),D)return;if(!s){S("No tienes permiso para guardar pedidos.");return}if(S(""),!G){S("Selecciona un vendedor.");return}if(!F.length){S("Agrega al menos un producto al pedido.");return}const Oe=new Date().toISOString().slice(0,10),pe=le||Oe;try{if(P(!0),M(!0),E){const De={};R.forEach(We=>{De[We.productId]=We});const Se={};F.forEach(We=>{Se[We.productId]=We});for(const We of Object.keys(Se)){const Xe=Se[We],qe=De[We],at=Number(Xe.packages||0),mt=qe?Number(qe.packages||0):0,Kt=at-mt;if(Kt>0){const Jt=await Le(We,Kt,pe);if(qe&&Jt.length){const _r=Mt(ke,"inventory_candies_sellers",qe.id),ta=await Qi(_r),Vn=ta.exists()?ta.data():{},ss=[...Array.isArray(Vn.masterAllocations)?Vn.masterAllocations:[],...Jt];await Lr(_r,{masterAllocations:ss,updatedAt:zt.now()})}}else Kt<0}let Ye=[...b];for(const We of Object.keys(Se)){const Xe=Se[We],qe=De[We],at=h.find(Jt=>Jt.id===We),mt=(at==null?void 0:at.unitsPerPackage)||Xe.unitsPerPackage||0,Kt=Xe.packages>0&&mt>0?Xe.packages*mt:0;if(qe)await Lr(Mt(ke,"inventory_candies_sellers",qe.id),{sellerId:G.id,sellerName:G.name,productId:We,productName:Xe.productName,category:Xe.category,packages:Xe.packages,unitsPerPackage:mt,totalUnits:Kt,remainingPackages:Xe.packages,remainingUnits:Kt,providerPrice:Xe.providerPrice,totalRivas:Xe.totalRivas,totalSanJorge:Xe.totalSanJorge,totalIsla:Xe.totalIsla,unitPriceRivas:Xe.unitPriceRivas,unitPriceSanJorge:Xe.unitPriceSanJorge,unitPriceIsla:Xe.unitPriceIsla,markupPercent:0,subtotal:Xe.subtotal,totalVendor:Xe.totalVendor,gainVendor:Xe.gainVendor,unitPriceVendor:Xe.pricePerPackage,date:pe,orderId:qe.orderId||E,updatedAt:zt.now()}),Ye=Ye.map(Jt=>Jt.id===qe.id?{...Jt,sellerId:G.id,sellerName:G.name,productId:We,productName:Xe.productName,category:Xe.category,packages:Xe.packages,unitsPerPackage:mt,totalUnits:Kt,remainingPackages:Xe.packages,remainingUnits:Kt,providerPrice:Xe.providerPrice,totalRivas:Xe.totalRivas,totalSanJorge:Xe.totalSanJorge,totalIsla:Xe.totalIsla,unitPriceRivas:Xe.unitPriceRivas,unitPriceSanJorge:Xe.unitPriceSanJorge,unitPriceIsla:Xe.unitPriceIsla,markupPercent:0,subtotal:Xe.subtotal,totalVendor:Xe.totalVendor,gainVendor:Xe.gainVendor,unitPriceVendor:Xe.pricePerPackage,date:pe,orderId:qe.orderId||E}:Jt);else{const Jt=await Le(We,Xe.packages,pe),_r={sellerId:G.id,sellerName:G.name,productId:We,productName:Xe.productName,category:Xe.category,orderId:E,packages:Xe.packages,unitsPerPackage:mt,totalUnits:Kt,remainingPackages:Xe.packages,remainingUnits:Kt,providerPrice:Xe.providerPrice,totalRivas:Xe.totalRivas,totalSanJorge:Xe.totalSanJorge,totalIsla:Xe.totalIsla,unitPriceRivas:Xe.unitPriceRivas,unitPriceSanJorge:Xe.unitPriceSanJorge,unitPriceIsla:Xe.unitPriceIsla,markupPercent:0,subtotal:Xe.subtotal,totalVendor:Xe.totalVendor,gainVendor:Xe.gainVendor,unitPriceVendor:Xe.pricePerPackage,date:pe,createdAt:zt.now(),status:"ASIGNADO",masterAllocations:Jt};Ye=[{id:(await en(At(ke,"inventory_candies_sellers"),_r)).id,..._r},...Ye]}}for(const We of Object.keys(De))if(!Se[We]){const Xe=De[We];await w7(Xe.id),Ye=Ye.filter(qe=>qe.id!==Xe.id)}_(Ye),S(" Pedido actualizado para el vendedor y sincronizado con inventario principal.")}else{const De=`ORD-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;for(const Se of F){const Ye=h.find(mt=>mt.id===Se.productId);if(!Ye)continue;const We=Se.packages>0&&Ye.unitsPerPackage>0?Se.packages*Ye.unitsPerPackage:0,Xe=await Le(Se.productId,Se.packages,pe),qe={sellerId:G.id,sellerName:G.name,productId:Se.productId,productName:Se.productName,category:Se.category,orderId:De,packages:Se.packages,unitsPerPackage:Ye.unitsPerPackage,totalUnits:We,remainingPackages:Se.packages,remainingUnits:We,providerPrice:Se.providerPrice,totalRivas:Se.totalRivas,totalSanJorge:Se.totalSanJorge,totalIsla:Se.totalIsla,unitPriceRivas:Se.unitPriceRivas,unitPriceSanJorge:Se.unitPriceSanJorge,unitPriceIsla:Se.unitPriceIsla,markupPercent:0,subtotal:Se.subtotal,totalVendor:Se.totalVendor,gainVendor:Se.gainVendor,unitPriceVendor:Se.pricePerPackage,date:pe,createdAt:zt.now(),status:"ASIGNADO",masterAllocations:Xe},at=await en(At(ke,"inventory_candies_sellers"),qe);_(mt=>[{id:at.id,...qe},...mt])}S(" Pedido asignado al vendedor y descontado del inventario.")}Ve(),L(!1)}catch(De){console.error(De),S((De==null?void 0:De.message)||" Error al guardar el pedido del vendedor / ajustar inventario.")}finally{M(!1),P(!1)}},ye=()=>{if(!G){S("Selecciona un vendedor para imprimir el pedido.");return}if(!F.length){S("No hay productos en el pedido para imprimir.");return}const ae=le||new Date().toISOString().slice(0,10),Oe=We=>(We||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),pe="Pedido de dulces para vendedor",De=F.map(We=>`
      <tr>
        <td>${Oe(We.productName)}</td>
        <td class="right">${Oe(We.category||"")}</td>
        <td class="right">${We.packages}</td>

        <td class="right">${tn(We.providerPrice)}</td>
        <td class="right">${tn(We.subtotal)}</td>
        <td class="right">${tn(We.pricePerPackage)}</td>
        <td class="right">${tn(We.totalVendor)}</td>
      </tr>`).join(""),Se=`<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>${Oe(pe)}</title>
  <style>
    *{font-family: Arial, sans-serif; box-sizing:border-box;}
    body{margin:16px;font-size:13px;}
    h1{font-size:18px;margin:0 0 4px;}
    h2{font-size:14px;margin:12px 0 6px;}
    .muted{color:#555;font-size:11px;margin-bottom:10px;}
    .grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:6px 18px;margin:10px 0 14px;}
    .card{border:1px solid #ddd;border-radius:6px;padding:6px 8px;background:#fafafa;}
    .label{font-size:11px;color:#555;margin-bottom:2px;}
    .value{font-size:14px;font-weight:bold;}
    table{width:100%;border-collapse:collapse;margin-top:8px;font-size:12px;}
    th,td{border:1px solid #ddd;padding:4px 6px;}
    th{background:#f5f5f5;text-align:left;}
    .right{text-align:right;}
    @media print{
      @page{size:A5;margin:10mm;}
      body{margin:0;font-size:12px;}
    }
  </style>
</head>
<body>
  <h1>${Oe(pe)}</h1>
  <div class="muted">
    Fecha pedido: <b>${Oe(ae)}</b><br/>
    Vendedor: <b>${Oe(G.name)}</b>${G.commissionPercent?` &mdash; Comisin: <b>${G.commissionPercent.toFixed(2)}%</b>`:""}${G.branchLabel?`<br/>Ruta / sucursal: <b>${Oe(G.branchLabel)}</b>`:""}
  </div>

  <div class="grid">
    <div class="card">
      <div class="label">Paquetes totales del pedido</div>
      <div class="value">${Me.totalPackages}</div>
    </div>
    <div class="card">
      <div class="label">Subtotal costo (proveedor)</div>
      <div class="value">${tn(Me.subtotal)}</div>
    </div>
    <div class="card">
      <div class="label">Total vendedor (precio venta)</div>
      <div class="value">${tn(Me.totalVendor)}</div>
    </div>
    <div class="card">
      <div class="label">Comisin posible del vendedor</div>
      <div class="value">${tn(Me.commissionAmount)}</div>
    </div>
  </div>

  <h2>Detalle del pedido</h2>
  <table>
    <thead>
      <tr>
        <th>Producto</th>
        <th class="right">Categora</th>
        <th class="right">Paquetes</th>
        <th class="right">P. Proveedor (paq)</th>
        <th class="right">Subtotal</th>
        <th class="right">P. Paquete vendedor</th>
        <th class="right">Total vendedor</th>
      </tr>
    </thead>
    <tbody>
      ${De}
    </tbody>
  </table>

  <script>window.print()<\/script>
</body>
</html>`,Ye=window.open("","_blank");if(!Ye){alert("No se pudo abrir la ventana de impresin (revisa bloqueadores de pop-ups).");return}Ye.document.open(),Ye.document.write(Se),Ye.document.close()},xe=ae=>{const Oe=X.filter(Se=>(Se.orderId||Se.id)===ae);if(!Oe.length){S("No se encontraron filas para este pedido.");return}const pe=Oe[0];if(o&&be&&pe.sellerId!==be.id){S("No tienes permiso para ver este pedido.");return}j(ae),W(Oe),te(pe.sellerId),ce(pe.date);const De=Oe.map(Se=>{const Ye=Se.unitPriceRivas||0,We=Se.unitPriceSanJorge||0,Xe=Se.unitPriceIsla||0,qe=Se.totalRivas||Ye*Number(Se.packages||0),at=Se.totalSanJorge||We*Number(Se.packages||0),mt=Se.totalIsla||Xe*Number(Se.packages||0);return{id:Se.id,productId:Se.productId,productName:Se.productName,category:Se.category,providerPrice:Se.providerPrice,unitsPerPackage:Se.unitsPerPackage,packages:Se.packages,subtotal:Se.subtotal,totalVendor:Se.totalVendor,gainVendor:Se.gainVendor,pricePerPackage:Se.unitPriceVendor,totalRivas:qe,totalSanJorge:at,totalIsla:mt,unitPriceRivas:Ye,unitPriceSanJorge:We,unitPriceIsla:Xe,remainingPackages:Se.remainingPackages}});V(De),me(""),k("0"),L(!0)},ue=async ae=>{if(!s){S("No tienes permiso para borrar pedidos.");return}const Oe=b.filter(Se=>(Se.orderId||Se.id)===ae);if(!Oe.length)return;const pe=Oe[0].sellerName||"";if(confirm(`Eliminar COMPLETAMENTE este pedido del vendedor "${pe}"? Se regresarn los paquetes al inventario principal.`))try{P(!0);for(const Se of Oe)await w7(Se.id);_(Se=>Se.filter(Ye=>(Ye.orderId||Ye.id)!==ae)),S(" Pedido eliminado y paquetes regresados correctamente.")}catch(Se){console.error(Se),S(" Error al eliminar el pedido / regresar paquetes.")}finally{P(!1)}},[Ge,Je]=v.useState(!1),[ht,Ue]=v.useState(!1),[rt,Qe]=v.useState([]),[Pe,ze]=v.useState(""),[it,Bt]=v.useState(""),[ut,It]=v.useState(""),[$t,hr]=v.useState(""),[_e,dt]=v.useState("0"),[gt,Ce]=v.useState(""),[et,yt]=v.useState(!1),Pt=v.useMemo(()=>re.map(ae=>ae.orderKey),[re]),Lt=v.useMemo(()=>Pe?X.filter(ae=>(ae.orderId||ae.id)===Pe):[],[X,Pe]),qt=v.useMemo(()=>Lt.filter(ae=>Number(ae.remainingPackages||0)>0),[Lt]),wt=v.useMemo(()=>it&&X.find(ae=>ae.id===it)||null,[X,it]),ie=v.useMemo(()=>ut?X.filter(ae=>(ae.orderId||ae.id)===ut):[],[X,ut]),se=v.useMemo(()=>wt?ie.filter(ae=>ae.productId===wt.productId):[],[ie,wt]),he=async()=>{try{Ue(!0);let ae=[];if(o&&t){const Oe=Ht(At(ke,"inventory_transfers_candies"),Xt("fromSellerId","==",t),Ur("createdAt","desc")),pe=Ht(At(ke,"inventory_transfers_candies"),Xt("toSellerId","==",t),Ur("createdAt","desc")),[De,Se]=await Promise.all([jt(Oe),jt(pe)]),Ye=new Set,We=Xe=>{Xe.forEach(qe=>{if(Ye.has(qe.id))return;Ye.add(qe.id);const at=qe.data();ae.push({id:qe.id,createdAt:at.createdAt,date:at.date,createdByEmail:at.createdByEmail||"",createdByName:at.createdByName||"",productId:at.productId||"",productName:at.productName||"",packagesMoved:Number(at.packagesMoved||0),providerPrice:Number(at.providerPrice||0),unitPriceRivas:Number(at.unitPriceRivas||0),unitPriceIsla:Number(at.unitPriceIsla||0),toSellerId:at.toSellerId||"",toSellerName:at.toSellerName||"",toOrderKey:at.toOrderKey||"",toOrderLabel:at.toOrderLabel||"",comment:at.comment||"",fromSellerId:at.fromSellerId||"",fromSellerName:at.fromSellerName||"",fromOrderKey:at.fromOrderKey||"",fromOrderLabel:at.fromOrderLabel||"",fromVendorRowId:at.fromVendorRowId||"",toVendorRowId:at.toVendorRowId||""})})};We(De),We(Se),ae.sort((Xe,qe)=>{var Kt,Jt;const at=((Kt=Xe.createdAt)==null?void 0:Kt.seconds)||0;return(((Jt=qe.createdAt)==null?void 0:Jt.seconds)||0)-at})}else{const Oe=Ht(At(ke,"inventory_transfers_candies"),Ur("createdAt","desc"));(await jt(Oe)).forEach(De=>{const Se=De.data();ae.push({id:De.id,createdAt:Se.createdAt,date:Se.date,createdByEmail:Se.createdByEmail||"",createdByName:Se.createdByName||"",productId:Se.productId||"",productName:Se.productName||"",packagesMoved:Number(Se.packagesMoved||0),providerPrice:Number(Se.providerPrice||0),unitPriceRivas:Number(Se.unitPriceRivas||0),unitPriceIsla:Number(Se.unitPriceIsla||0),toSellerId:Se.toSellerId||"",toSellerName:Se.toSellerName||"",toOrderKey:Se.toOrderKey||"",toOrderLabel:Se.toOrderLabel||"",comment:Se.comment||"",fromSellerId:Se.fromSellerId||"",fromSellerName:Se.fromSellerName||"",fromOrderKey:Se.fromOrderKey||"",fromOrderLabel:Se.fromOrderLabel||"",fromVendorRowId:Se.fromVendorRowId||"",toVendorRowId:Se.toVendorRowId||""})})}Qe(ae)}catch(ae){console.error(ae),S(" Error cargando traslados.")}finally{Ue(!1)}},Ae=async()=>{Je(!0),await he()},Be=()=>{ze(""),Bt(""),It(""),hr(""),dt("0"),Ce("")},Fe=async()=>{if(!s){S("No tienes permiso para hacer traslados.");return}S("");const ae=Number(_e||0);if(!(ae>0)){S("La cantidad de paquetes debe ser mayor a 0.");return}if(!gt.trim()){S("Debes escribir el motivo de la movida.");return}if(!Pe||!it){S("Selecciona el pedido origen y el producto.");return}if(!ut||!$t){S("Selecciona el pedido destino y el producto destino.");return}if(it===$t){S("Origen y destino no pueden ser el mismo.");return}const Oe=b.find(De=>De.id===it)||null,pe=b.find(De=>De.id===$t)||null;if(!Oe||!pe){S("No se encontr la fila origen/destino.");return}if(Oe.productId!==pe.productId){S("El producto destino no coincide con el producto origen.");return}if(Number(Oe.remainingPackages||0)<ae){S("El origen no tiene suficientes paquetes disponibles.");return}try{yt(!0),P(!0);const De=Mt(ke,"inventory_candies_sellers",Oe.id),Se=Mt(ke,"inventory_candies_sellers",pe.id),Ye=zt.now(),We=new Date().toISOString().slice(0,10);await Ks(ke,async Xe=>{const qe=await Xe.get(De),at=await Xe.get(Se);if(!qe.exists())throw new Error("Orden origen no existe.");if(!at.exists())throw new Error("Orden destino no existe.");const mt=qe.data(),Kt=at.data(),Jt=Number(mt.remainingPackages||0);if(Jt<ae)throw new Error("Origen no tiene suficientes paquetes.");const _r=Number(mt.unitsPerPackage||Kt.unitsPerPackage||0),ta=_r>0?ae*_r:0;Xe.update(De,{remainingPackages:Jt-ae,..._r>0?{remainingUnits:Number(mt.remainingUnits||0)-ta}:{},updatedAt:Ye}),Xe.update(Se,{remainingPackages:Number(Kt.remainingPackages||0)+ae,..._r>0?{remainingUnits:Number(Kt.remainingUnits||0)+ta}:{},updatedAt:Ye});const Vn=Mt(At(ke,"inventory_transfers_candies"));Xe.set(Vn,{createdAt:Ye,date:We,createdByEmail:(r||"").trim(),createdByName:String(Z||"").trim(),productId:String(mt.productId||""),productName:String(mt.productName||""),packagesMoved:ae,providerPrice:Number(mt.providerPrice||0),unitPriceRivas:Number(mt.unitPriceRivas||0),unitPriceIsla:Number(mt.unitPriceIsla||0),fromSellerId:String(mt.sellerId||""),fromSellerName:String(mt.sellerName||""),fromOrderKey:String(mt.orderId||Oe.id||""),fromOrderLabel:String(mt.orderId||Oe.id||""),toSellerId:String(Kt.sellerId||""),toSellerName:String(Kt.sellerName||""),toOrderKey:String(Kt.orderId||pe.id||""),toOrderLabel:String(Kt.orderId||pe.id||""),fromVendorRowId:Oe.id,toVendorRowId:pe.id,comment:gt.trim()})}),_(Xe=>Xe.map(qe=>{if(qe.id===Oe.id){const at=Number(qe.unitsPerPackage||0),mt=at>0?ae*at:0;return{...qe,remainingPackages:Number(qe.remainingPackages||0)-ae,remainingUnits:at>0?Number(qe.remainingUnits||0)-mt:qe.remainingUnits}}if(qe.id===pe.id){const at=Number(qe.unitsPerPackage||0),mt=at>0?ae*at:0;return{...qe,remainingPackages:Number(qe.remainingPackages||0)+ae,remainingUnits:at>0?Number(qe.remainingUnits||0)+mt:qe.remainingUnits}}return qe})),await he(),d(Xe=>{const qe={...Xe},at=Pe,mt=ut,Kt=Number(_e||0);return at&&(qe[at]=qe[at]||{out:0,in:0},qe[at].out+=Kt),mt&&(qe[mt]=qe[mt]||{out:0,in:0},qe[mt].in+=Kt),qe}),Be(),S(" Traslado realizado.")}catch(De){console.error(De),S((De==null?void 0:De.message)||" Error realizando el traslado.")}finally{yt(!1),P(!1)}};return i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Ordenes de Rutas"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(bu,{onClick:a,loading:T}),i.jsx("button",{className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-3 py-2 rounded hover:bg-indigo-700 disabled:opacity-30 disabled:bg-gray-300",onClick:Ae,type:"button",disabled:!s,children:"Traslados"}),s&&i.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{Ve(),L(!0)},children:[i.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo pedido a vendedor"]})]})]}),Ge&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[55]",children:i.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-7xl max-h-[90vh] overflow-y-auto text-sm relative",children:[et&&i.jsx("div",{className:"absolute inset-0 bg-white/70 flex items-center justify-center z-50",children:i.jsx("div",{className:"bg-white border rounded-lg px-4 py-3 shadow text-sm font-semibold",children:"Guardando traslado..."})}),i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"text-xl font-bold",children:"Traslado de paquetes"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{Je(!1),Be()},type:"button",children:"Cerrar"})]}),i.jsxs("div",{className:"border rounded p-3 bg-gray-50 mb-4",children:[i.jsx("div",{className:"text-sm font-semibold mb-2",children:"Crear traslado (requiere motivo)"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Pedido origen"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:Pe,onChange:ae=>{ze(ae.target.value),Bt(""),It(""),hr(""),dt("0")},disabled:!s,children:[i.jsx("option",{value:"",children:"Selecciona"}),Pt.map(ae=>{const Oe=Ne[ae];return i.jsxs("option",{value:ae,children:["Vendedor: ",(Oe==null?void 0:Oe.sellerName)||"","  Existencias: ","",(Oe==null?void 0:Oe.totalRemainingPackages)||"0"," Paquetes - Fecha Orden: ",(Oe==null?void 0:Oe.date)||""]},ae)})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto (desde el pedido origen)"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:it,onChange:ae=>{Bt(ae.target.value),It(""),hr(""),dt("0")},disabled:!s||!Pe,children:[i.jsx("option",{value:"",children:"Selecciona"}),qt.map(ae=>i.jsxs("option",{value:ae.id,children:["Tipo: ",ae.category," - ",ae.productName,"  Existencias:"," ",Number(ae.remainingPackages||0)," Paquetes - Precio Costo: $",ae.providerPrice]},ae.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Pedido destino"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:ut,onChange:ae=>{It(ae.target.value),hr("")},disabled:!s||!it,children:[i.jsx("option",{value:"",children:"Selecciona"}),Pt.filter(ae=>ae!==Pe).map(ae=>{const Oe=Ne[ae];return i.jsxs("option",{value:ae,children:["Vendedor: ",(Oe==null?void 0:Oe.sellerName)||"","  Existencias: ","",(Oe==null?void 0:Oe.totalRemainingPackages)||"0"," - Fecha Orden:"," ",(Oe==null?void 0:Oe.date)||""]},ae)})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto destino (mismo producto)"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:$t,onChange:ae=>hr(ae.target.value),disabled:!s||!ut||!wt,children:[i.jsx("option",{value:"",children:"Selecciona"}),se.map(ae=>i.jsxs("option",{value:ae.id,children:["Tipo: ",ae.category," - ",ae.productName,"  Existencias:"," ",Number(ae.remainingPackages||0)," Paquetes - Precio Costo: $",ae.providerPrice]},ae.id))]}),ut&&wt&&se.length===0&&i.jsx("div",{className:"text-xs text-red-600 mt-1",children:" El pedido destino no tiene este producto. (Debe existir en el pedido destino)"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad paquetes a mover"}),i.jsx("input",{type:"number",min:0,className:"w-full border p-2 rounded",value:_e,onChange:ae=>dt(ae.target.value),disabled:!s||!it||!$t})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Motivo de movida (obligatorio)"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:gt,onChange:ae=>Ce(ae.target.value),disabled:!s,placeholder:"Ej: Se cambi de ruta por reorganizacin",maxLength:250})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-60",onClick:Be,disabled:!s||et,children:"Limpiar"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-60",onClick:Fe,disabled:!s||et||!it||!$t||Number(_e||0)<=0||!gt.trim(),children:"Hacer traslado"})]})]}),i.jsxs("div",{className:"bg-white rounded border overflow-x-auto",children:[i.jsxs("div",{className:"flex items-center justify-between p-2",children:[i.jsx("div",{className:"text-lg font-semibold",children:"Historial de traslados"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:he,disabled:ht,type:"button",children:ht?"Cargando...":"Recargar"})]}),i.jsxs("table",{className:"min-w-[1400px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Fecha y hora"}),i.jsx("th",{className:"p-2 border",children:"Usuario"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Cantidad paquetes"}),i.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border",children:"Precio Rivas"}),i.jsx("th",{className:"p-2 border",children:"Precio Isla"}),i.jsx("th",{className:"p-2 border",children:"Movido a vendedor"}),i.jsx("th",{className:"p-2 border",children:"Movido a orden"}),i.jsx("th",{className:"p-2 border",children:"Motivo de movida"})]})}),i.jsx("tbody",{children:ht?i.jsx("tr",{children:i.jsx("td",{colSpan:10,className:"p-4 text-center",children:"Cargando"})}):rt.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:10,className:"p-4 text-center",children:"Sin traslados"})}):rt.map(ae=>{var Se,Ye;const Oe=((Ye=(Se=ae.createdAt)==null?void 0:Se.toDate)==null?void 0:Ye.call(Se))||(ae.createdAt?new Date(ae.createdAt.seconds*1e3):null),pe=Oe?`${Oe.toISOString().slice(0,10)} ${Oe.toISOString().slice(11,19)}`:ae.date||"",De=(ae.createdByName||"").trim()||(ae.createdByEmail||"").trim()||"";return i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:pe}),i.jsx("td",{className:"p-2 border",children:De}),i.jsx("td",{className:"p-2 border text-left",children:ae.productName||""}),i.jsx("td",{className:"p-2 border",children:Number(ae.packagesMoved||0)}),i.jsx("td",{className:"p-2 border",children:tn(ae.providerPrice||0)}),i.jsx("td",{className:"p-2 border",children:tn(ae.unitPriceRivas||0)}),i.jsx("td",{className:"p-2 border",children:tn(ae.unitPriceIsla||0)}),i.jsx("td",{className:"p-2 border",children:ae.toSellerName||""}),i.jsx("td",{className:"p-2 border",children:ae.toOrderLabel||ae.toOrderKey||""}),i.jsx("td",{className:"p-2 border text-left",children:ae.comment||""})]},ae.id)})})]})]}),i.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Nota: el traslado mueve EXISTENCIA (remainingPackages/remainingUnits) del pedido origen al destino."})]})}),I&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-5xl max-h-[90vh] overflow-y-auto text-sm relative",children:[D&&i.jsx("div",{className:"absolute inset-0 bg-white/70 flex items-center justify-center z-50",children:i.jsx("div",{className:"bg-white border rounded-lg px-4 py-3 shadow text-sm font-semibold",children:"Guardando pedido..."})}),i.jsx("h3",{className:"text-xl font-bold mb-4",children:E?"Editar pedido de vendedor":"Nuevo pedido para vendedor"}),A.length===0&&i.jsx("p",{className:"text-sm text-red-600 mb-2",children:" No hay vendedores. Primero crea vendedores en la pantalla correspondiente."}),i.jsxs("form",{onSubmit:Ze,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:de,onChange:ae=>te(ae.target.value),disabled:c,children:[i.jsx("option",{value:"",children:"Selecciona un vendedor"}),A.map(ae=>i.jsxs("option",{value:ae.id,children:[ae.name,ae.branchLabel?` - ${ae.branchLabel}`:"",ae.commissionPercent?` (${ae.commissionPercent.toFixed(1)}% comisin)`:""]},ae.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del pedido"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:le,onChange:ae=>ce(ae.target.value),disabled:c})]})]}),i.jsxs("div",{className:"border rounded p-3 bg-gray-50",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:J,onChange:ae=>me(ae.target.value),disabled:c,children:[i.jsx("option",{value:"",children:"Selecciona un producto"}),ne.map(ae=>{const Oe=p[ae.id]??0,pe=[];pe.push(ae.category?`${ae.category} - ${ae.name}`:ae.name);const De=[];ae.unitPriceRivas>0&&De.push(`R: ${tn(ae.unitPriceRivas)}`),ae.unitPriceSanJorge>0&&De.push(`SJ: ${tn(ae.unitPriceSanJorge)}`),ae.unitPriceIsla>0&&De.push(`I: ${tn(ae.unitPriceIsla)}`),De.length&&pe.push(De.join(" | ")),pe.push(`Disp: ${Oe} paq`);const Se=ee.has(ae.id);return i.jsx("option",{value:ae.id,disabled:Se,children:Se?` (Agregado) ${pe.join("  ")}`:pe.join("  ")},ae.id)})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Paquetes / bolsas"}),i.jsx("input",{type:"number",min:0,className:"w-full border p-2 rounded",value:Ee,onChange:ae=>k(ae.target.value),disabled:c})]})]}),i.jsx("div",{className:"flex justify-end mt-3",children:i.jsx("button",{type:"button",onClick:lt,className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",disabled:c||!J||ee.has(J),title:ee.has(J)?"Ese producto ya est en el pedido":"",children:"Agregar producto al pedido"})})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1100px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border",children:"Paq x Und (ref)"}),i.jsx("th",{className:"p-2 border",children:"P. proveedor (paq)"}),i.jsx("th",{className:"p-2 border",children:"Subtotal"}),i.jsx("th",{className:"p-2 border",children:"Total Rivas"}),i.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),i.jsx("th",{className:"p-2 border",children:"Total Isla"}),i.jsx("th",{className:"p-2 border",children:"P. unidad Rivas"}),i.jsx("th",{className:"p-2 border",children:"P. unidad San Jorge"}),i.jsx("th",{className:"p-2 border",children:"P. unidad Isla"}),i.jsx("th",{className:"p-2 border",children:"P. paquete vendedor"}),i.jsx("th",{className:"p-2 border",children:"Total vendedor"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:F.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:16,className:"p-4 text-center text-gray-500",children:"No hay productos en este pedido. Agrega al menos uno."})}):F.map(ae=>i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:ae.productName}),i.jsx("td",{className:"p-2 border",children:ae.category}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",min:0,className:"border p-1 rounded text-right text-xs w-20",value:ae.packages,onChange:Oe=>ot(ae.id,Oe.target.value),disabled:c})}),i.jsx("td",{className:"p-2 border",children:ae.remainingPackages??ae.packages}),i.jsx("td",{className:"p-2 border",children:ae.unitsPerPackage||""}),i.jsx("td",{className:"p-2 border",children:tn(ae.providerPrice)}),i.jsx("td",{className:"p-2 border",children:tn(ae.subtotal)}),i.jsx("td",{className:"p-2 border",children:tn(ae.totalRivas)}),i.jsx("td",{className:"p-2 border",children:tn(ae.totalSanJorge)}),i.jsx("td",{className:"p-2 border",children:tn(ae.totalIsla)}),i.jsx("td",{className:"p-2 border",children:tn(ae.unitPriceRivas)}),i.jsx("td",{className:"p-2 border",children:tn(ae.unitPriceSanJorge)}),i.jsx("td",{className:"p-2 border",children:tn(ae.unitPriceIsla)}),i.jsx("td",{className:"p-2 border",children:tn(ae.pricePerPackage)}),i.jsx("td",{className:"p-2 border",children:tn(ae.totalVendor)}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs disabled:opacity-50",onClick:()=>bt(ae.id),disabled:c,children:"Quitar"})})]},ae.id))})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mt-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes totales del pedido"}),i.jsx("div",{className:"text-lg font-semibold",children:Me.totalPackages})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal costo (proveedor)"}),i.jsx("div",{className:"text-lg font-semibold",children:tn(Me.subtotal)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total vendedor (precio venta)"}),i.jsx("div",{className:"text-lg font-semibold text-green-600",children:tn(Me.totalVendor)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin posible vendedor"}),i.jsx("div",{className:"text-lg font-semibold",children:tn(Me.commissionAmount)})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[s&&i.jsx("button",{type:"button",onClick:Ve,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-60",disabled:D,children:"Limpiar pedido"}),i.jsx("button",{type:"button",onClick:()=>{Ve(),L(!1)},className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-60",disabled:D,children:"Cerrar"}),i.jsx("button",{type:"button",onClick:ye,className:"px-3 py-1 rounded bg-purple-600 text-white hover:bg-purple-700",disabled:!G||F.length===0,children:"Imprimir pedido"}),s&&i.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",disabled:D||!G||F.length===0,children:D?"Guardando...":"Guardar pedido"})]})]})]})}),i.jsx("div",{className:"block md:hidden space-y-3 mt-4",children:re.map(ae=>{var We,Xe;const Oe=Q[ae.sellerId],pe=Number((Oe==null?void 0:Oe.commissionPercent)||0),De=ae.totalVendor*pe/100,Se=x===ae.orderKey,Ye=Se?ve(ae.orderKey):[];return i.jsxs("div",{className:"border rounded-lg p-3 bg-white shadow-sm",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-sm",children:ae.sellerName}),i.jsx("div",{className:"text-xs text-gray-500",children:(Oe==null?void 0:Oe.branchLabel)||""})]}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[i.jsx("div",{children:ae.date||""}),i.jsx("div",{className:"truncate max-w-[140px]",children:ae.orderKey})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mb-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Paquetes:"})," ",i.jsx("b",{children:ae.totalPackages})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Restantes:"})," ",i.jsx("b",{children:ae.totalRemainingPackages})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Trasl. OUT:"})," ",i.jsx("b",{children:((We=u[ae.orderKey])==null?void 0:We.out)||0})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Trasl. IN:"})," ",i.jsx("b",{children:((Xe=u[ae.orderKey])==null?void 0:Xe.in)||0})]})]}),i.jsxs("div",{className:"text-sm border-t pt-2 space-y-1",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),i.jsx("span",{children:tn(ae.subtotal)})]}),i.jsxs("div",{className:"flex justify-between font-semibold",children:[i.jsx("span",{children:"Total:"}),i.jsx("span",{children:tn(ae.totalVendor)})]}),i.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[i.jsx("span",{children:"Comisin:"}),i.jsx("span",{children:tn(De)})]})]}),i.jsxs("div",{className:"flex gap-2 mt-3",children:[i.jsx("button",{className:"flex-1 bg-blue-600 text-white py-2 rounded text-xs",onClick:()=>xe(ae.orderKey),children:"Ver / Editar"}),s&&i.jsx("button",{className:"flex-1 bg-red-600 text-white py-2 rounded text-xs",onClick:()=>ue(ae.orderKey),children:"Borrar"})]}),i.jsx("button",{type:"button",className:"w-full mt-2 border rounded py-2 text-xs bg-gray-50 hover:bg-gray-100",onClick:()=>{y(qe=>qe===ae.orderKey?null:ae.orderKey)},children:Se?"Ocultar detalle":"Ver detalle del pedido"}),Se&&i.jsxs("div",{className:"mt-2 border rounded bg-white overflow-hidden",children:[i.jsx("div",{className:"px-3 py-2 text-xs font-semibold bg-gray-100",children:"Detalle del pedido"}),Ye.length===0?i.jsx("div",{className:"p-3 text-xs text-gray-500",children:"Sin detalle"}):i.jsx("div",{className:"divide-y",children:Ye.map(qe=>i.jsxs("div",{className:"p-3 text-xs",children:[i.jsxs("div",{className:"flex justify-between gap-2",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:qe.productName}),i.jsx("div",{className:"text-gray-500 truncate",children:qe.category||""})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Paq:"})," ",i.jsx("b",{children:Number(qe.packages||0)})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Rem:"})," ",i.jsx("b",{children:Number(qe.remainingPackages||0)})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500",children:"Costo:"}),i.jsx("span",{children:tn(Number(qe.providerPrice||0))})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500",children:"Total:"}),i.jsx("span",{className:"font-semibold",children:tn(Number(qe.totalVendor||0))})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2 text-[11px] text-gray-600",children:[i.jsxs("div",{className:"text-center border rounded py-1",children:["R ",tn(Number(qe.unitPriceRivas||0))]}),i.jsxs("div",{className:"text-center border rounded py-1",children:["SJ ",tn(Number(qe.unitPriceSanJorge||0))]}),i.jsxs("div",{className:"text-center border rounded py-1",children:["I ",tn(Number(qe.unitPriceIsla||0))]})]})]},qe.id))})]})]},ae.orderKey)})}),i.jsxs("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full overflow-x-auto mt-4",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Listado de pedidos"}),i.jsxs("table",{className:"min-w-[1000px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Vendedor"}),i.jsx("th",{className:"p-2 border",children:"Paquetes totales"}),i.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border",children:"Paquetes Trasladados"}),i.jsx("th",{className:"p-2 border",children:"Paquetes Adicionales"}),i.jsx("th",{className:"p-2 border",children:"Subtotal costo"}),i.jsx("th",{className:"p-2 border",children:"Total vendedor"}),i.jsx("th",{className:"p-2 border",children:"Comisin posible"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:T?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:8,children:"Cargando"})}):re.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:8,children:"Sin pedidos asignados a vendedores."})}):re.map(ae=>{var Se,Ye;const Oe=Q[ae.sellerId],pe=Number((Oe==null?void 0:Oe.commissionPercent)||0),De=ae.totalVendor*pe/100;return i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:ae.date||""}),i.jsxs("td",{className:"p-2 border",children:[ae.sellerName,Oe!=null&&Oe.branchLabel?` - ${Oe.branchLabel}`:""]}),i.jsx("td",{className:"p-2 border",children:ae.totalPackages}),i.jsx("td",{className:"p-2 border",children:ae.totalRemainingPackages}),i.jsx("td",{className:"p-2 border",children:((Se=u[ae.orderKey])==null?void 0:Se.out)||0}),i.jsx("td",{className:"p-2 border",children:((Ye=u[ae.orderKey])==null?void 0:Ye.in)||0}),i.jsx("td",{className:"p-2 border",children:tn(ae.subtotal)}),i.jsx("td",{className:"p-2 border",children:tn(ae.totalVendor)}),i.jsx("td",{className:"p-2 border",children:tn(De)}),i.jsx("td",{className:"p-2 border",children:i.jsxs("div",{className:"flex gap-1 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>xe(ae.orderKey),children:"Ver / Editar"}),s&&i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>ue(ae.orderKey),children:"Borrar"})]})})]},ae.orderKey)})})]})]}),C&&i.jsx("p",{className:"mt-2 text-sm",children:C})]})}function $j(e){return isFinite(e)?Math.round(e):0}function Jn(e){const t=Number(e);return Number.isFinite(t)?Math.floor(t):0}function KZ(e){const t=Math.max(1,Jn(e.unitsPerPackage||1)),r=Jn(e.totalUnits||0),n=Jn(e.quantity||0),a=Jn(e.packages||0);return r>0?r:n>0?n:a>0?a*t:0}function w3e(e){const t=Number(e.remaining);return Number.isFinite(t)&&t>0?Math.floor(t):KZ(e)}function C7(e){const t=Number(e.remainingPackages);if(Number.isFinite(t))return Math.max(0,Math.floor(t));const r=Math.max(1,Jn(e.unitsPerPackage||1)),n=w3e(e);return Math.max(0,Math.floor(n/r))}function N3e(e){const t=Math.max(1,Jn(e.unitsPerPackage||1)),r=KZ(e);return Math.max(0,Math.floor(r/t))}function C3e(){const{refreshKey:e,refresh:t}=Pc(),[r,n]=v.useState(""),[a,s]=v.useState(!0),[o,l]=v.useState([]),[c,u]=v.useState(!1),[d,A]=v.useState([]),[f,h]=v.useState({}),[m,p]=v.useState(!1),[g,x]=v.useState(null),[y,b]=v.useState(""),[_,T]=v.useState(""),[P,C]=v.useState("20"),[S,I]=v.useState("15"),[L,E]=v.useState("30"),[j,R]=v.useState([]),[W,de]=v.useState(""),[te,le]=v.useState(""),[ce,J]=v.useState(""),[me,Ee]=v.useState("1"),[k,F]=v.useState("0"),[V,D]=v.useState("DATOS"),M=v.useMemo(()=>{const re=new Set;for(const Ne of o){const Me=String(Ne.category||"").trim();Me&&re.add(Me)}return Array.from(re).sort((Ne,Me)=>Ne.localeCompare(Me,"es"))},[o]);v.useEffect(()=>{!W&&M.length>0&&de(M[0])},[M]);const G=(re,Ne,Me)=>{const Ve=re*Ne,nt=Math.min(Math.max(Me.marginR,0),99.9)/100,st=Math.min(Math.max(Me.marginSJ,0),99.9)/100,lt=Math.min(Math.max(Me.marginIsla,0),99.9)/100,bt=Ne>0&&nt<1?Ve/(1-nt):Ve,ot=Ne>0&&st<1?Ve/(1-st):Ve,Le=Ne>0&&lt<1?Ve/(1-lt):Ve,Ze=bt-Ve,ye=ot-Ve,xe=Le-Ve,ue=Ne>0?$j(bt/Ne):0,Ge=Ne>0?$j(ot/Ne):0,Je=Ne>0?$j(Le/Ne):0;return{subtotal:Ve,totalRivas:bt,totalSanJorge:ot,totalIsla:Le,gainRivas:Ze,gainSanJorge:ye,gainIsla:xe,unitPriceRivas:ue,unitPriceSanJorge:Ge,unitPriceIsla:Je}},O=()=>{x(null),b(""),T(""),R([]),de(M[0]||""),le(""),J(""),F("0"),Ee("1"),C("20"),I("15"),E("30"),D("DATOS")},K=async()=>{u(!0);try{const re=await jt(Ht(At(ke,"products_candies"),Ur("createdAt","desc"))),Ne=[];re.forEach(Me=>{const Ve=Me.data();Ne.push({id:Me.id,name:String(Ve.name??"").trim(),category:String(Ve.category??"").trim()||"Caramelo",providerPrice:Number(Ve.providerPrice??0),unitsPerPackage:Number(Ve.unitsPerPackage??1)})}),l(Ne)}catch(re){console.error(re),n(" Error cargando catlogo de dulces.")}finally{u(!1)}};v.useEffect(()=>{K()},[e]);const ee=v.useMemo(()=>(W.trim().length>0?o.filter(Ne=>Ne.category===W):o).sort((Ne,Me)=>Ne.name.localeCompare(Me.name,"es")),[o,W]);v.useEffect(()=>{if(!te){J(""),Ee("1");return}const re=o.find(Ne=>Ne.id===te);re&&(J(String(re.providerPrice??0)),Ee(String(re.unitsPerPackage??1)))},[te,o]);const ne=()=>{if(n(""),!te){n("Selecciona un producto del catlogo.");return}const re=o.find(ot=>ot.id===te);if(!re){n("Producto de catlogo no encontrado (refresca).");return}const Ne=Number(re.providerPrice||0),Me=Jn(k||0),Ve=Jn(re.unitsPerPackage||0);if(Ne<0){n("El precio proveedor no puede ser negativo.");return}if(Me<=0){n("Los paquetes del pedido general deben ser mayor que 0.");return}if(Ve<=0){n("Las unidades por paquete deben ser mayor que 0.");return}const nt=Number(P||0),st=Number(S||0),lt=Number(L||0);if(j.find(ot=>ot.id===re.id))R(ot=>ot.map(Le=>{if(Le.id!==re.id)return Le;const Ze=Jn(Le.packages||0)+Me,ye=G(Ne,Ze,{marginR:Number(Le.marginRivas||nt),marginSJ:Number(Le.marginSanJorge||st),marginIsla:Number(Le.marginIsla||lt)});return{...Le,providerPrice:Ne,unitsPerPackage:Ve,packages:Ze,remainingPackages:Jn(Le.remainingPackages??Le.packages)+Me,...ye}}));else{const ot=G(Ne,Me,{marginR:nt,marginSJ:st,marginIsla:lt}),Le={id:re.id,name:re.name,category:re.category,providerPrice:Ne,packages:Me,unitsPerPackage:Ve,marginRivas:nt,marginSanJorge:st,marginIsla:lt,subtotal:ot.subtotal,totalRivas:ot.totalRivas,totalSanJorge:ot.totalSanJorge,totalIsla:ot.totalIsla,gainRivas:ot.gainRivas,gainSanJorge:ot.gainSanJorge,gainIsla:ot.gainIsla,unitPriceRivas:ot.unitPriceRivas,unitPriceSanJorge:ot.unitPriceSanJorge,unitPriceIsla:ot.unitPriceIsla,remainingPackages:Me};R(Ze=>[...Ze,Le])}le(""),F("0"),D("ITEMS")},Q=re=>{R(Ne=>Ne.filter(Me=>Me.id!==re))},be=v.useMemo(()=>{const re=j.reduce((st,lt)=>st+Jn(lt.packages),0),Ne=j.reduce((st,lt)=>st+Number(lt.subtotal||0),0),Me=j.reduce((st,lt)=>st+Number(lt.totalRivas||0),0),Ve=j.reduce((st,lt)=>st+Number(lt.totalSanJorge||0),0),nt=j.reduce((st,lt)=>st+Number(lt.totalIsla||0),0);return{totalPackages:re,subtotal:Ne,totalRivas:Me,totalSanJorge:Ve,totalIsla:nt}},[j]),Z=(re,Ne,Me)=>{R(Ve=>Ve.map(nt=>{if(nt.id!==re)return nt;let st={...nt};if(Ne==="packages"&&(st.packages=Jn(Me||0)),Ne==="unitsPerPackage"&&(st.unitsPerPackage=Jn(Me||0)),Ne==="marginRivas"&&(st.marginRivas=Number(Me||0)),Ne==="marginSanJorge"&&(st.marginSanJorge=Number(Me||0)),Ne==="marginIsla"&&(st.marginIsla=Number(Me||0)),Ne==="packages"||Ne==="marginRivas"||Ne==="marginSanJorge"||Ne==="marginIsla"){const lt=G(st.providerPrice,st.packages,{marginR:Number(st.marginRivas||0),marginSJ:Number(st.marginSanJorge||0),marginIsla:Number(st.marginIsla||0)});st={...st,...lt}}return st}))};v.useEffect(()=>{(async()=>{s(!0);try{const re=Ht(At(ke,"candy_main_orders"),Ur("createdAt","desc")),Ne=await jt(re),Me=[];Ne.forEach(st=>{const lt=st.data();Me.push({id:st.id,name:lt.name??"",date:lt.date??"",totalPackages:Number(lt.totalPackages??0),subtotal:Number(lt.subtotal??0),totalRivas:Number(lt.totalRivas??0),totalSanJorge:Number(lt.totalSanJorge??0),totalIsla:Number(lt.totalIsla??0),marginRivas:Number(lt.marginRivas??20),marginSanJorge:Number(lt.marginSanJorge??15),marginIsla:Number(lt.marginIsla??30),createdAt:lt.createdAt??zt.now()})}),A(Me);const Ve=await jt(At(ke,"inventory_candies")),nt={};Ve.forEach(st=>{const lt=st.data(),bt=lt.orderId;if(!bt)return;const ot=N3e(lt),Le=C7(lt);nt[bt]||(nt[bt]={orderId:bt,totalPackages:0,remainingPackages:0}),nt[bt].totalPackages+=ot,nt[bt].remainingPackages+=Le}),h(nt)}catch(re){console.error(re),n(" Error cargando pedidos generales.")}finally{s(!1)}})()},[e]);const z=async re=>{if(re.preventDefault(),n(""),!j.length){n("Agrega al menos un producto al pedido general.");return}try{const Ne=new Date().toISOString().slice(0,10),Me=_||Ne,Ve=be,nt=Number(P||0),st=Number(S||0),lt=Number(L||0);for(const ot of j){if(!ot.name.trim()){n("Hay un producto sin nombre en el pedido.");return}if(ot.providerPrice<0){n(`El precio proveedor no puede ser negativo (producto: ${ot.name}).`);return}if(ot.packages<=0){n(`Los paquetes deben ser mayor que 0 (producto: ${ot.name}).`);return}if(ot.unitsPerPackage<=0){n(`Las unidades por paquete deben ser mayor que 0 (producto: ${ot.name}).`);return}}const bt={name:y||`Pedido ${Me}`,date:Me,totalPackages:Ve.totalPackages,subtotal:Ve.subtotal,totalRivas:Ve.totalRivas,totalSanJorge:Ve.totalSanJorge,totalIsla:Ve.totalIsla,marginRivas:nt,marginSanJorge:st,marginIsla:lt,items:j};if(g){await Lr(Mt(ke,"candy_main_orders",g),{...bt});for(const Ze of j){const ye=await jt(Ht(At(ke,"inventory_candies"),Xt("orderId","==",g),Xt("productId","==",Ze.id))),xe=Jn(Ze.packages)*Jn(Ze.unitsPerPackage),ue=Math.max(1,Jn(Ze.unitsPerPackage||1));if(ye.empty)await en(At(ke,"inventory_candies"),{productId:Ze.id,productName:Ze.name,category:Ze.category,measurement:"unidad",quantity:xe,remaining:xe,packages:Jn(Ze.packages),remainingPackages:Jn(Ze.packages),unitsPerPackage:ue,totalUnits:xe,providerPrice:Ze.providerPrice,subtotal:Ze.subtotal,totalRivas:Ze.totalRivas,totalSanJorge:Ze.totalSanJorge,totalIsla:Ze.totalIsla,gainRivas:Ze.gainRivas,gainSanJorge:Ze.gainSanJorge,gainIsla:Ze.gainIsla,unitPriceRivas:Ze.unitPriceRivas,unitPriceSanJorge:Ze.unitPriceSanJorge,unitPriceIsla:Ze.unitPriceIsla,date:Me,createdAt:zt.now(),status:"PENDIENTE",orderId:g});else for(const Ge of ye.docs){const Je=Ge.data(),ht=Jn(Je.totalUnits??0),Ue=Jn(Je.remaining??ht),rt=xe-ht,Qe=Math.max(0,Ue+rt),Pe=Math.max(0,Math.floor(Qe/ue));await Lr(Mt(ke,"inventory_candies",Ge.id),{productName:Ze.name,category:Ze.category,unitsPerPackage:ue,totalUnits:xe,quantity:xe,remaining:Qe,packages:Jn(Ze.packages),remainingPackages:Pe,providerPrice:Ze.providerPrice,subtotal:Ze.subtotal,totalRivas:Ze.totalRivas,totalSanJorge:Ze.totalSanJorge,totalIsla:Ze.totalIsla,gainRivas:Ze.gainRivas,gainSanJorge:Ze.gainSanJorge,gainIsla:Ze.gainIsla,unitPriceRivas:Ze.unitPriceRivas,unitPriceSanJorge:Ze.unitPriceSanJorge,unitPriceIsla:Ze.unitPriceIsla,date:Me})}}const ot=await jt(Ht(At(ke,"inventory_candies"),Xt("orderId","==",g))),Le=new Set(j.map(Ze=>Ze.id));for(const Ze of ot.docs){const ye=Ze.data(),xe=String(ye.productId||"");xe&&!Le.has(xe)&&await fn(Mt(ke,"inventory_candies",Ze.id))}A(Ze=>Ze.map(ye=>ye.id===g?{...ye,name:bt.name,date:bt.date,totalPackages:bt.totalPackages,subtotal:bt.subtotal,totalRivas:bt.totalRivas,totalSanJorge:bt.totalSanJorge,totalIsla:bt.totalIsla,marginRivas:bt.marginRivas,marginSanJorge:bt.marginSanJorge,marginIsla:bt.marginIsla}:ye)),n(" Orden maestra actualizada (pedido + inventario).")}else{const Le=(await en(At(ke,"candy_main_orders"),{...bt,createdAt:zt.now()})).id,Ze=_0(ke);for(const ye of j){const xe=Math.max(1,Jn(ye.unitsPerPackage||1)),ue=Jn(ye.packages)*xe,Ge=Mt(At(ke,"inventory_candies"));Ze.set(Ge,{productId:ye.id,productName:ye.name,category:ye.category,measurement:"unidad",quantity:ue,remaining:ue,packages:Jn(ye.packages),remainingPackages:Jn(ye.packages),unitsPerPackage:xe,totalUnits:ue,providerPrice:ye.providerPrice,subtotal:ye.subtotal,totalRivas:ye.totalRivas,totalSanJorge:ye.totalSanJorge,totalIsla:ye.totalIsla,gainRivas:ye.gainRivas,gainSanJorge:ye.gainSanJorge,gainIsla:ye.gainIsla,unitPriceRivas:ye.unitPriceRivas,unitPriceSanJorge:ye.unitPriceSanJorge,unitPriceIsla:ye.unitPriceIsla,date:Me,createdAt:zt.now(),status:"PENDIENTE",orderId:Le})}await Ze.commit(),n(" Orden maestra creada y registrada en inventario.")}O(),p(!1),t()}catch(Ne){console.error(Ne),n(" Error al guardar orden maestra.")}},X=async re=>{try{s(!0),n(""),x(re.id),b(re.name),T(re.date),C(String(re.marginRivas??20)),I(String(re.marginSanJorge??15)),E(String(re.marginIsla??30)),D("DATOS");const Ne=Mt(ke,"candy_main_orders",re.id),Me=await Qi(Ne);if(!Me.exists()){n(" No se encontr la orden.");return}const Ve=Me.data(),nt=Array.isArray(Ve.items)?Ve.items:[],st=await jt(Ht(At(ke,"inventory_candies"),Xt("orderId","==",re.id))),lt={};st.forEach(ot=>{const Le=ot.data(),Ze=String(Le.productId||"");if(!Ze)return;const ye=C7(Le);lt[Ze]=(lt[Ze]||0)+ye});const bt=nt.map(ot=>{const Le=o.find(ue=>ue.id===ot.id),Ze=Number((Le==null?void 0:Le.providerPrice)??ot.providerPrice??0),ye=Math.max(1,Jn((Le==null?void 0:Le.unitsPerPackage)??ot.unitsPerPackage??1)),xe=G(Ze,Jn(ot.packages||0),{marginR:Number(ot.marginRivas||0),marginSJ:Number(ot.marginSanJorge||0),marginIsla:Number(ot.marginIsla||0)});return{...ot,name:String((Le==null?void 0:Le.name)??ot.name??""),category:String((Le==null?void 0:Le.category)??ot.category??"Caramelo"),providerPrice:Ze,unitsPerPackage:ye,remainingPackages:lt[ot.id]??ot.remainingPackages??ot.packages??0,...xe}});R(bt),p(!0)}catch(Ne){console.error(Ne),n(" Error al abrir orden maestra.")}finally{s(!1)}},ve=async re=>{if(confirm(`Eliminar la orden "${re.name}" y todo su inventario asociado?`)){n("");try{const Me=await jt(Ht(At(ke,"inventory_candies"),Xt("orderId","==",re.id)));for(const Ve of Me.docs)await fn(Mt(ke,"inventory_candies",Ve.id));await fn(Mt(ke,"candy_main_orders",re.id)),A(Ve=>Ve.filter(nt=>nt.id!==re.id)),n(" Orden maestra eliminada."),t()}catch(Me){console.error(Me),n(" Error al eliminar orden maestra.")}}};return i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsx("h2",{className:"text-2xl font-bold",children:"Ordenes Maestras"})}),i.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-2",children:[i.jsx("div",{className:"w-full",children:i.jsx(bu,{onClick:t,loading:a||c})}),i.jsxs("button",{className:"items-center gap-2 bg-indigo-600 text-white px-3 py-2 rounded-2xl hover:bg-indigo-700",onClick:()=>{O(),p(!0)},children:[i.jsx("span",{className:"items-center gap-4 inline-block bg-indigo-700/40 rounded-full ",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nueva Orden"]})]})]}),m&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 p-3",children:i.jsxs("div",{className:"bg-white p-4 md:p-6 rounded shadow-lg w-full max-w-5xl max-h-[90vh] overflow-y-auto text-sm",children:[i.jsxs("div",{className:"sticky top-0 bg-white z-20 pb-3 border-b",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("h3",{className:"text-lg md:text-xl font-bold",children:g?"Editar Orden Maestra":"Nueva Orden Maestra"}),i.jsx("div",{className:"ml-auto flex gap-2",children:i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{O(),p(!1)},children:"Cerrar"})})]}),i.jsx("div",{className:"md:hidden mt-3",children:i.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[i.jsx("button",{type:"button",onClick:()=>D("DATOS"),className:`px-2 py-2 rounded text-xs font-semibold border ${V==="DATOS"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:"Datos"}),i.jsx("button",{type:"button",onClick:()=>D("AGREGAR"),disabled:!!g,className:`px-2 py-2 rounded text-xs font-semibold border ${g?"bg-gray-100 text-gray-400 border-gray-200":V==="AGREGAR"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,title:g?"En edicin no se agregan productos":"",children:"Agregar"}),i.jsxs("button",{type:"button",onClick:()=>D("ITEMS"),className:`px-2 py-2 rounded text-xs font-semibold border ${V==="ITEMS"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:["Items (",j.length,")"]}),i.jsx("button",{type:"button",onClick:()=>D("TOTALES"),className:`px-2 py-2 rounded text-xs font-semibold border ${V==="TOTALES"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:"Totales"})]})})]}),i.jsxs("form",{onSubmit:z,className:"space-y-4 pt-4",children:[i.jsx("div",{className:`${V==="DATOS"?"block":"hidden"} md:block`,children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre de Orden"}),i.jsx("input",{className:"w-full border p-2 rounded",value:y,onChange:re=>b(re.target.value),placeholder:"Ej: Pedido diciembre 01"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del pedido"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:_,onChange:re=>T(re.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"% Ganancia Rivas"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:P,onChange:re=>C(re.target.value),disabled:!!g})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"% Ganancia San Jorge"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:S,onChange:re=>I(re.target.value),disabled:!!g})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"% Ganancia Isla Ometepe"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:L,onChange:re=>E(re.target.value),disabled:!!g})]})]})}),!g&&i.jsx("div",{className:`${V==="AGREGAR"?"block":"hidden"} md:block`,children:i.jsxs("div",{className:"border rounded p-3 bg-gray-50",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Categora (dinmica)"}),i.jsx("select",{className:"w-full border p-2 rounded",value:W,onChange:re=>{de(re.target.value),le("")},disabled:c,children:M.length===0?i.jsx("option",{value:"",children:c?"Cargando...":"No hay categoras en catlogo"}):M.map(re=>i.jsx("option",{value:re,children:re},re))})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto (catlogo)"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:te,onChange:re=>le(re.target.value),children:[i.jsx("option",{value:"",children:c?"Cargando catlogo...":"Selecciona producto"}),ee.map(re=>i.jsx("option",{value:re.id,children:re.name},re.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio proveedor (paq)"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded bg-gray-100",value:ce,readOnly:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Paquetes"}),i.jsx("input",{type:"number",min:0,className:"w-full border p-2 rounded",value:k,onChange:re=>F(re.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Unidades por paquete"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded bg-gray-100",value:me,readOnly:!0})]})]}),i.jsx("div",{className:"flex justify-end mt-3",children:i.jsx("button",{type:"button",onClick:ne,className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Agregar producto al pedido"})})]})}),i.jsxs("div",{className:`${V==="ITEMS"?"block":"hidden"} md:block`,children:[i.jsx("div",{className:"md:hidden space-y-3",children:j.length===0?i.jsx("div",{className:"p-4 border rounded bg-gray-50 text-gray-600",children:"No hay productos en esta orden."}):j.map(re=>i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-semibold text-base leading-tight",children:re.name}),i.jsx("div",{className:"text-xs text-gray-500",children:re.category})]}),!g&&i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Q(re.id),children:"Quitar"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Paquetes"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:re.packages,onChange:Ne=>Z(re.id,"packages",Ne.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Restantes"}),i.jsx("input",{className:"w-full border p-2 rounded text-right bg-gray-100",value:re.remainingPackages??re.packages,readOnly:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Und x Paq"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:re.unitsPerPackage,onChange:Ne=>Z(re.id,"unitsPerPackage",Ne.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"P. proveedor"}),i.jsx("input",{className:"w-full border p-2 rounded text-right bg-gray-100",value:Number(re.providerPrice||0).toFixed(2),readOnly:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"% Rivas"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:re.marginRivas??0,onChange:Ne=>Z(re.id,"marginRivas",Ne.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"% SJ"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:re.marginSanJorge??0,onChange:Ne=>Z(re.id,"marginSanJorge",Ne.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"% Isla"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:re.marginIsla??0,onChange:Ne=>Z(re.id,"marginIsla",Ne.target.value)})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal"}),i.jsx("div",{className:"font-semibold",children:Number(re.subtotal||0).toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total Rivas"}),i.jsx("div",{className:"font-semibold",children:Number(re.totalRivas||0).toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total SJ"}),i.jsx("div",{className:"font-semibold",children:Number(re.totalSanJorge||0).toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total Isla"}),i.jsx("div",{className:"font-semibold",children:Number(re.totalIsla||0).toFixed(2)})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3 text-xs",children:[i.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"P. unidad Rivas"}),i.jsx("div",{className:"font-semibold",children:re.unitPriceRivas})]}),i.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"P. unidad SJ"}),i.jsx("div",{className:"font-semibold",children:re.unitPriceSanJorge})]}),i.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"P. unidad Isla"}),i.jsx("div",{className:"font-semibold",children:re.unitPriceIsla})]})]})]},re.id))}),i.jsx("div",{className:"hidden md:block bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1100px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border",children:"Und x Paq"}),i.jsx("th",{className:"p-2 border",children:"P. proveedor (paq)"}),i.jsx("th",{className:"p-2 border",children:"Margen Rivas (%)"}),i.jsx("th",{className:"p-2 border",children:"Margen San Jorge (%)"}),i.jsx("th",{className:"p-2 border",children:"Margen Isla (%)"}),i.jsx("th",{className:"p-2 border",children:"Subtotal"}),i.jsx("th",{className:"p-2 border",children:"Total Rivas"}),i.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),i.jsx("th",{className:"p-2 border",children:"Total Isla"}),i.jsx("th",{className:"p-2 border",children:"P. unidad Rivas"}),i.jsx("th",{className:"p-2 border",children:"P. unidad San Jorge"}),i.jsx("th",{className:"p-2 border",children:"P. unidad Isla"}),!g&&i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:j.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:g?16:17,className:"p-4 text-center text-gray-500",children:"No hay productos en esta orden."})}):j.map(re=>i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border text-left",children:re.name}),i.jsx("td",{className:"p-2 border",children:re.category}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",className:"w-24 border p-1 rounded text-right",value:re.packages,onChange:Ne=>Z(re.id,"packages",Ne.target.value)})}),i.jsx("td",{className:"p-2 border",children:re.remainingPackages??re.packages}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",className:"w-20 border p-1 rounded text-right",value:re.unitsPerPackage,onChange:Ne=>Z(re.id,"unitsPerPackage",Ne.target.value)})}),i.jsx("td",{className:"p-2 border",children:Number(re.providerPrice||0).toFixed(2)}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",className:"w-20 border p-1 rounded text-right",value:re.marginRivas??0,onChange:Ne=>Z(re.id,"marginRivas",Ne.target.value)})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",className:"w-20 border p-1 rounded text-right",value:re.marginSanJorge??0,onChange:Ne=>Z(re.id,"marginSanJorge",Ne.target.value)})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",className:"w-20 border p-1 rounded text-right",value:re.marginIsla??0,onChange:Ne=>Z(re.id,"marginIsla",Ne.target.value)})}),i.jsx("td",{className:"p-2 border",children:Number(re.subtotal||0).toFixed(2)}),i.jsx("td",{className:"p-2 border",children:Number(re.totalRivas||0).toFixed(2)}),i.jsx("td",{className:"p-2 border",children:Number(re.totalSanJorge||0).toFixed(2)}),i.jsx("td",{className:"p-2 border",children:Number(re.totalIsla||0).toFixed(2)}),i.jsx("td",{className:"p-2 border",children:re.unitPriceRivas}),i.jsx("td",{className:"p-2 border",children:re.unitPriceSanJorge}),i.jsx("td",{className:"p-2 border",children:re.unitPriceIsla}),!g&&i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Q(re.id),children:"Quitar"})})]},re.id))})]})})]}),i.jsx("div",{className:`${V==="TOTALES"?"block":"hidden"} md:block`,children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mt-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes totales de la orden"}),i.jsx("div",{className:"text-lg font-semibold",children:be.totalPackages})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal costo (proveedor)"}),i.jsx("div",{className:"text-lg font-semibold",children:be.subtotal.toFixed(2)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total Rivas (orden)"}),i.jsx("div",{className:"text-lg font-semibold",children:be.totalRivas.toFixed(2)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total San Jorge / Isla"}),i.jsxs("div",{className:"text-sm font-semibold",children:["SJ: ",be.totalSanJorge.toFixed(2),i.jsx("br",{}),"Isla: ",be.totalIsla.toFixed(2)]})]})]})}),i.jsxs("div",{className:"sticky bottom-0 bg-white pt-3 mt-4 border-t",children:[i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{type:"button",onClick:O,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Limpiar orden"}),i.jsx("button",{type:"button",onClick:()=>{O(),p(!1)},className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Cerrar"}),i.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60",disabled:j.length===0,children:"Guardar orden"})]}),i.jsx("div",{className:"md:hidden mt-2",children:i.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 text-sm",onClick:()=>{D(V==="DATOS"&&!g?"AGREGAR":V==="DATOS"||V==="AGREGAR"?"ITEMS":V==="ITEMS"?"TOTALES":"DATOS")},children:"Siguiente"})})]})]})]})}),i.jsxs("div",{className:"mt-4",children:[i.jsx("div",{className:"md:hidden space-y-3",children:a?i.jsx("div",{className:"p-4 border rounded bg-white text-center",children:"Cargando"}):d.length===0?i.jsx("div",{className:"p-4 border rounded bg-white text-center",children:"Sin ordenes maestras."}):d.map(re=>{var nt;const Ne=f[re.id],Me=re.date||((nt=re.createdAt)!=null&&nt.toDate?re.createdAt.toDate().toISOString().slice(0,10):""),Ve=re.totalPackages>0?(re.subtotal/re.totalPackages).toFixed(2):"0.00";return i.jsxs("div",{className:"border rounded-xl p-3 bg-white shadow-sm",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-xs text-gray-500",children:Me}),i.jsx("div",{className:"font-semibold text-base leading-tight",children:re.name})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white text-xs",onClick:()=>X(re),children:"Ver"}),i.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white text-xs",onClick:()=>ve(re),children:"Borrar"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),i.jsx("div",{className:"font-semibold",children:re.totalPackages})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Restantes"}),i.jsx("div",{className:"font-semibold",children:Ne?Ne.remainingPackages:0})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"P. Proveedor"}),i.jsx("div",{className:"font-semibold",children:Ve})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal"}),i.jsx("div",{className:"font-semibold",children:re.subtotal.toFixed(2)})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2 text-xs",children:[i.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"Total Rivas"}),i.jsx("div",{className:"font-semibold",children:re.totalRivas.toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"Total SJ"}),i.jsx("div",{className:"font-semibold",children:re.totalSanJorge.toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"Total Isla"}),i.jsx("div",{className:"font-semibold",children:re.totalIsla.toFixed(2)})]})]})]},re.id)})}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-[900px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Paquetes totales"}),i.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border",children:"Precio Proveedor"}),i.jsx("th",{className:"p-2 border",children:"Subtotal"}),i.jsx("th",{className:"p-2 border",children:"Total Rivas"}),i.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),i.jsx("th",{className:"p-2 border",children:"Total Isla"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:a?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):d.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin ordenes maestras."})}):d.map(re=>{var Me;const Ne=f[re.id];return i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:re.date||((Me=re.createdAt)!=null&&Me.toDate?re.createdAt.toDate().toISOString().slice(0,10):"")}),i.jsx("td",{className:"p-2 border",children:re.name}),i.jsx("td",{className:"p-2 border",children:re.totalPackages}),i.jsx("td",{className:"p-2 border",children:Ne?Ne.remainingPackages:0}),i.jsx("td",{className:"p-2 border",children:re.totalPackages>0?(re.subtotal/re.totalPackages).toFixed(2):"0.00"}),i.jsx("td",{className:"p-2 border",children:re.subtotal.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:re.totalRivas.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:re.totalSanJorge.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:re.totalIsla.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:i.jsxs("div",{className:"flex gap-1 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>X(re),children:"Ver / Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>ve(re),children:"Borrar"})]})})]},re.id)})})]})})]}),r&&i.jsx("p",{className:"mt-2 text-sm",children:r})]})}const ch=e=>`C$ ${(Number(e)||0).toFixed(2)}`;function Kj(e){const t=Number(e.packages||0),r=Number(e.providerPrice||0),n=Number(e.unitsPerPackage||0),a=r*t,s=t>0&&n>0?t*n:1,o=Number(e.marginRivas||0),l=Number(e.marginSanJorge||0),c=Number(e.marginIsla||0),u=a*(1+o/100),d=a*(1+l/100),A=a*(1+c/100),f=u-a,h=d-a,m=A-a,p=u/s,g=d/s,x=A/s;return{...e,subtotal:Number(a.toFixed(2)),totalRivas:Number(u.toFixed(2)),totalSanJorge:Number(d.toFixed(2)),totalIsla:Number(A.toFixed(2)),gainRivas:Number(f.toFixed(2)),gainSanJorge:Number(h.toFixed(2)),gainIsla:Number(m.toFixed(2)),unitPriceRivas:Number(p.toFixed(2)),unitPriceSanJorge:Number(g.toFixed(2)),unitPriceIsla:Number(x.toFixed(2))}}function _7(e){return e.reduce((t,r)=>(t.totalPackages+=Number(r.packages||0),t.subtotal+=Number(r.subtotal||0),t.totalRivas+=Number(r.totalRivas||0),t.totalSanJorge+=Number(r.totalSanJorge||0),t.totalIsla+=Number(r.totalIsla||0),t),{totalPackages:0,subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0})}function Ho(e,t=0){const r=Number(e);return Number.isFinite(r)?r:t}function qj(e){const{margin:t,gain:r,subtotal:n,orderMargin:a}=e;if(t!=null&&Number.isFinite(Number(t)))return Number(t);const s=Number(n||0),o=Number(r);return Number.isFinite(o)&&s>0?o/s*100:Number(a||0)}function _3e(){var D,M,G;const[e,t]=v.useState([]),[r,n]=v.useState({}),[a,s]=v.useState(!0),[o,l]=v.useState(""),[c,u]=v.useState(ir(gu(new Date),"yyyy-MM-dd")),[d,A]=v.useState(ir(pu(new Date),"yyyy-MM-dd")),[f,h]=v.useState(!1),[m,p]=v.useState(!1),[g,x]=v.useState(null),[y,b]=v.useState([]),[_,T]=v.useState(0),[P,C]=v.useState(0),[S,I]=v.useState(0),[L,E]=v.useState(""),[j,R]=v.useState(""),[W,de]=v.useState(0),[te,le]=v.useState(0),[ce,J]=v.useState(1);v.useEffect(()=>{(async()=>{try{s(!0),l("");const O=Ht(At(ke,"candy_main_orders"),Ur("createdAt","desc")),K=await jt(O),ee=[];K.forEach(be=>{const Z=be.data();ee.push({id:be.id,name:Z.name??"",date:Z.date??"",totalPackages:Number(Z.totalPackages??0),subtotal:Number(Z.subtotal??0),totalRivas:Number(Z.totalRivas??0),totalSanJorge:Number(Z.totalSanJorge??0),totalIsla:Number(Z.totalIsla??0),marginRivas:Number(Z.marginRivas??0),marginSanJorge:Number(Z.marginSanJorge??0),marginIsla:Number(Z.marginIsla??0),createdAt:Z.createdAt??zt.now()})}),t(ee);const ne=await jt(Ht(At(ke,"inventory_candies"))),Q={};ne.forEach(be=>{const Z=be.data(),z=Z.orderId;if(!z)return;const X=Number(Z.unitsPerPackage||1)||1,ve=Number(Z.totalUnits??(Z.packages||0)*X),re=Math.round(ve/X),Ne=Number(Z.remaining??Z.totalUnits??ve),Me=Number(Z.remainingPackages??NaN),Ve=Number.isFinite(Me)?Math.round(Me):Math.round(Ne/X);Q[z]||(Q[z]={orderId:z,totalPackages:0,remainingPackages:0}),Q[z].totalPackages+=re,Q[z].remainingPackages+=Ve}),n(Q)}catch(O){console.error(O),l(" Error cargando inventario de pedidos.")}finally{s(!1)}})()},[]);const me=v.useMemo(()=>e.filter(O=>{var ee;const K=O.date||((ee=O.createdAt)!=null&&ee.toDate?O.createdAt.toDate().toISOString().slice(0,10):"");return!(!K||c&&K<c||d&&K>d)}),[e,c,d]),Ee=v.useMemo(()=>{let O=0,K=0,ee=0,ne=0,Q=0,be=0;for(const Z of me){O+=Z.totalPackages,K+=Z.subtotal,ee+=Z.totalRivas,ne+=Z.totalSanJorge,Q+=Z.totalIsla;const z=r[Z.id];z&&(be+=z.remainingPackages)}return{totalPaquetes:O,totalSubtotal:K,totalRivas:ee,totalSJ:ne,totalIsla:Q,totalPaquetesRestantes:be,totalPedidos:me.length}},[me,r]),k=async(O,K,ee)=>{if(!g)return;const ne=Number(ee||0),Q=y.map(z=>z.id!==O?z:Kj({...z,[K]:ne}));b(Q);const be=Q.find(z=>z.id===O);if(!be)return;const Z=_7(Q);try{await Lr(Mt(ke,"products_candies",O),{marginRivas:be.marginRivas,marginSanJorge:be.marginSanJorge,marginIsla:be.marginIsla,subtotal:be.subtotal,totalRivas:be.totalRivas,totalSanJorge:be.totalSanJorge,totalIsla:be.totalIsla,unitPriceRivas:be.unitPriceRivas,unitPriceSanJorge:be.unitPriceSanJorge,unitPriceIsla:be.unitPriceIsla,gainRivas:be.gainRivas,gainSanJorge:be.gainSanJorge,gainIsla:be.gainIsla}),await Lr(Mt(ke,"candy_main_orders",g.id),{totalPackages:Z.totalPackages,subtotal:Number(Z.subtotal.toFixed(2)),totalRivas:Number(Z.totalRivas.toFixed(2)),totalSanJorge:Number(Z.totalSanJorge.toFixed(2)),totalIsla:Number(Z.totalIsla.toFixed(2))}),x(z=>z&&{...z,totalPackages:Z.totalPackages,subtotal:Number(Z.subtotal.toFixed(2)),totalRivas:Number(Z.totalRivas.toFixed(2)),totalSanJorge:Number(Z.totalSanJorge.toFixed(2)),totalIsla:Number(Z.totalIsla.toFixed(2))}),l(" Mrgenes del producto actualizados.")}catch(z){console.error(z),l(" Error actualizando mrgenes del producto.")}},F=async()=>{if(g)try{l("");const O=Number.isFinite(_)&&_!==0?_:g.marginRivas||0,K=Number.isFinite(P)&&P!==0?P:g.marginSanJorge||0,ee=Number.isFinite(S)&&S!==0?S:g.marginIsla||0,ne=Kj({id:"tmp",name:L.trim(),category:j.trim(),providerPrice:Number(W||0),packages:Number(te||0),unitsPerPackage:Number(ce||1),marginRivas:Number(O||0),marginSanJorge:Number(K||0),marginIsla:Number(ee||0),subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0,gainRivas:0,gainSanJorge:0,gainIsla:0,unitPriceRivas:0,unitPriceSanJorge:0,unitPriceIsla:0,remainingPackages:Number(te||0)}),Q=await en(At(ke,"products_candies"),{orderId:g.id,inventoryDate:g.date||"",name:ne.name,category:ne.category,providerPrice:ne.providerPrice,packages:ne.packages,unitsPerPackage:ne.unitsPerPackage,marginRivas:ne.marginRivas,marginSanJorge:ne.marginSanJorge,marginIsla:ne.marginIsla,gainRivas:ne.gainRivas,gainSanJorge:ne.gainSanJorge,gainIsla:ne.gainIsla,subtotal:ne.subtotal,totalRivas:ne.totalRivas,totalSanJorge:ne.totalSanJorge,totalIsla:ne.totalIsla,unitPriceRivas:ne.unitPriceRivas,unitPriceSanJorge:ne.unitPriceSanJorge,unitPriceIsla:ne.unitPriceIsla,createdAt:zt.now()}),Z=[{...ne,id:Q.id},...y];b(Z);const z=_7(Z);await Lr(Mt(ke,"candy_main_orders",g.id),{totalPackages:z.totalPackages,subtotal:Number(z.subtotal.toFixed(2)),totalRivas:Number(z.totalRivas.toFixed(2)),totalSanJorge:Number(z.totalSanJorge.toFixed(2)),totalIsla:Number(z.totalIsla.toFixed(2))}),x(X=>X&&{...X,totalPackages:z.totalPackages,subtotal:Number(z.subtotal.toFixed(2)),totalRivas:Number(z.totalRivas.toFixed(2)),totalSanJorge:Number(z.totalSanJorge.toFixed(2)),totalIsla:Number(z.totalIsla.toFixed(2))}),T(0),C(0),I(0),E(""),R(""),de(0),le(0),J(1),l(" Producto agregado con mrgenes por sucursal.")}catch(O){console.error(O),l(" Error agregando producto al pedido.")}},V=async O=>{try{x(O),b([]),h(!0),p(!0),l("");const K=await jt(Ht(At(ke,"inventory_candies"),Xt("orderId","==",O.id))),ee={};K.forEach(be=>{const Z=be.data(),z=Z.productId;if(!z)return;const X=Number(Z.unitsPerPackage||1)||1,ve=Number(Z.remaining??Z.totalUnits??0),re=Number(Z.remainingPackages??NaN),Ne=Number.isFinite(re)?Math.round(re):Math.round(ve/X);ee[z]=(ee[z]||0)+Ne});const ne=await jt(Ht(At(ke,"products_candies"),Xt("orderId","==",O.id))),Q=[];ne.forEach(be=>{const Z=be.data(),z=Ho(Z.providerPrice,0),X=Ho(Z.packages,0),ve=Z.subtotal??z*X,re=qj({margin:Z.marginRivas,gain:Z.gainRivas,subtotal:ve,orderMargin:O.marginRivas||0}),Ne=qj({margin:Z.marginSanJorge,gain:Z.gainSanJorge,subtotal:ve,orderMargin:O.marginSanJorge||0}),Me=qj({margin:Z.marginIsla,gain:Z.gainIsla,subtotal:ve,orderMargin:O.marginIsla||0}),Ve=Kj({id:be.id,name:Z.name??"",category:Z.category??"",providerPrice:z,packages:X,unitsPerPackage:Ho(Z.unitsPerPackage,1),marginRivas:Number(re||0),marginSanJorge:Number(Ne||0),marginIsla:Number(Me||0),subtotal:Ho(Z.subtotal,0),totalRivas:Ho(Z.totalRivas,0),totalSanJorge:Ho(Z.totalSanJorge,0),totalIsla:Ho(Z.totalIsla,0),gainRivas:Ho(Z.gainRivas,0),gainSanJorge:Ho(Z.gainSanJorge,0),gainIsla:Ho(Z.gainIsla,0),unitPriceRivas:Ho(Z.unitPriceRivas,0),unitPriceSanJorge:Ho(Z.unitPriceSanJorge,0),unitPriceIsla:Ho(Z.unitPriceIsla,0),remainingPackages:ee[be.id]??Ho(Z.packages,0)});Q.push(Ve)}),b(Q)}catch(K){console.error(K),l(" Error cargando productos del pedido.")}finally{p(!1)}};return i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx("h2",{className:"text-2xl font-bold",children:"Inventario Ordenes Maestras"})}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:O=>u(O.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:O=>A(O.target.value)})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),A("")},children:"Quitar filtro"}),i.jsxs("div",{className:"ml-auto text-xs md:text-sm text-gray-600",children:["Cantidad de pedidos:"," ",i.jsx("span",{className:"font-semibold",children:Ee.totalPedidos})]})]}),i.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-sm md:text-base",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-y-2 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Paquetes totales:"})," ",Ee.totalPaquetes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Paquetes restantes:"})," ",Ee.totalPaquetesRestantes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Subtotal total:"})," ",ch(Ee.totalSubtotal)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total Rivas (todo):"})," ",ch(Ee.totalRivas)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total San Jorge (todo):"})," ",ch(Ee.totalSJ)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total Isla (todo):"})," ",ch(Ee.totalIsla)]})]})}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full overflow-x-auto mt-2",children:i.jsxs("table",{className:"min-w-[900px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Paquetes totales"}),i.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border",children:"Subtotal"}),i.jsx("th",{className:"p-2 border",children:"Total Rivas"}),i.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),i.jsx("th",{className:"p-2 border",children:"Total Isla"}),i.jsx("th",{className:"p-2 border",children:"P. prom. Rivas"}),i.jsx("th",{className:"p-2 border",children:"P. prom. San Jorge"}),i.jsx("th",{className:"p-2 border",children:"P. prom. Isla"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:a?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):me.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin pedidos generales en este rango."})}):me.map(O=>{var Z;const K=O.totalPackages>0?Math.round(O.totalRivas/O.totalPackages):0,ee=O.totalPackages>0?Math.round(O.totalSanJorge/O.totalPackages):0,ne=O.totalPackages>0?Math.round(O.totalIsla/O.totalPackages):0,Q=O.date||((Z=O.createdAt)!=null&&Z.toDate?O.createdAt.toDate().toISOString().slice(0,10):""),be=r[O.id];return i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:Q}),i.jsx("td",{className:"p-2 border",children:O.name}),i.jsx("td",{className:"p-2 border",children:O.totalPackages}),i.jsx("td",{className:"p-2 border",children:be?be.remainingPackages:0}),i.jsx("td",{className:"p-2 border",children:O.subtotal.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:O.totalRivas.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:O.totalSanJorge.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:O.totalIsla.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:K}),i.jsx("td",{className:"p-2 border",children:ee}),i.jsx("td",{className:"p-2 border",children:ne}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>V(O),children:"Ver pedido"})})]},O.id)})})]})}),f&&g&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-5xl max-h-[90vh] overflow-y-auto text-sm",children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsxs("h3",{className:"text-xl font-bold",children:["Detalle: ",g.name]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:()=>{h(!1),x(null),b([]),l("")},children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4 text-xs md:text-sm",children:[i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Fecha del pedido"}),i.jsx("div",{className:"font-semibold",children:g.date||((D=g.createdAt)!=null&&D.toDate?g.createdAt.toDate().toISOString().slice(0,10):"")})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Paquetes totales"}),i.jsx("div",{className:"font-semibold",children:((M=r[g.id])==null?void 0:M.totalPackages)??g.totalPackages})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Paquetes restantes"}),i.jsx("div",{className:"font-semibold",children:((G=r[g.id])==null?void 0:G.remainingPackages)??0})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Subtotal (proveedor)"}),i.jsx("div",{className:"font-semibold",children:ch(g.subtotal)})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Total Rivas"}),i.jsx("div",{className:"font-semibold",children:ch(g.totalRivas)})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Total San Jorge"}),i.jsx("div",{className:"font-semibold",children:ch(g.totalSanJorge)})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Total Isla"}),i.jsx("div",{className:"font-semibold",children:ch(g.totalIsla)})]})]}),i.jsxs("div",{className:"bg-white border rounded p-3 mb-4",children:[i.jsx("div",{className:"font-semibold mb-2",children:"Agregar producto"}),i.jsxs("div",{className:"flex flex-wrap gap-2 items-end text-xs",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Margen Rivas"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:_,onChange:O=>T(Number(O.target.value||0))})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Margen SJ"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:P,onChange:O=>C(Number(O.target.value||0))})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Margen Isla"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:S,onChange:O=>I(Number(O.target.value||0))})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Producto"}),i.jsx("input",{className:"border rounded px-2 py-1 w-56",value:L,onChange:O=>E(O.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Categora"}),i.jsx("input",{className:"border rounded px-2 py-1 w-40",value:j,onChange:O=>R(O.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"P. proveedor (paq)"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-32 text-right",value:W,onChange:O=>de(Number(O.target.value||0))})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Paquetes"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-right",value:te,onChange:O=>le(Number(O.target.value||0))})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Und x Paq"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-right",value:ce,onChange:O=>J(Number(O.target.value||1))})]}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:F,children:"Agregar producto"})]})]}),i.jsx("h4",{className:"font-semibold mb-2",children:"Productos del pedido"}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1200px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border",children:"Und x Paq"}),i.jsx("th",{className:"p-2 border",children:"P. proveedor (paq)"}),i.jsx("th",{className:"p-2 border",children:"Margen Rivas (%)"}),i.jsx("th",{className:"p-2 border",children:"Margen San Jorge (%)"}),i.jsx("th",{className:"p-2 border",children:"Margen Isla (%)"}),i.jsx("th",{className:"p-2 border",children:"Subtotal"}),i.jsx("th",{className:"p-2 border",children:"Total Rivas"}),i.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),i.jsx("th",{className:"p-2 border",children:"Total Isla"}),i.jsx("th",{className:"p-2 border",children:"P. unidad Rivas"}),i.jsx("th",{className:"p-2 border",children:"P. unidad San Jorge"}),i.jsx("th",{className:"p-2 border",children:"P. unidad Isla"})]})}),i.jsx("tbody",{children:m?i.jsx("tr",{children:i.jsx("td",{colSpan:16,className:"p-4 text-center",children:"Cargando productos"})}):y.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:16,className:"p-4 text-center",children:"Este pedido no tiene productos registrados."})}):y.map(O=>i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:O.name}),i.jsx("td",{className:"p-2 border",children:O.category}),i.jsx("td",{className:"p-2 border",children:O.packages}),i.jsx("td",{className:"p-2 border",children:O.remainingPackages??O.packages}),i.jsx("td",{className:"p-2 border",children:O.unitsPerPackage}),i.jsx("td",{className:"p-2 border",children:O.providerPrice.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:O.marginRivas??0,onChange:K=>k(O.id,"marginRivas",K.target.value)})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:O.marginSanJorge??0,onChange:K=>k(O.id,"marginSanJorge",K.target.value)})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:O.marginIsla??0,onChange:K=>k(O.id,"marginIsla",K.target.value)})}),i.jsx("td",{className:"p-2 border",children:O.subtotal.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:O.totalRivas.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:O.totalSanJorge.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:O.totalIsla.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:O.unitPriceRivas}),i.jsx("td",{className:"p-2 border",children:O.unitPriceSanJorge}),i.jsx("td",{className:"p-2 border",children:O.unitPriceIsla})]},O.id))})]})}),o&&i.jsx("p",{className:"mt-3 text-sm",children:o})]})}),o&&!f&&i.jsx("p",{className:"mt-2 text-sm",children:o})]})}const Xn=e=>Math.round((Number(e)||0)*100)/100,pp=e=>Math.round((Number(e)||0)*1e3)/1e3,wi=e=>Number(e??0).toFixed(2),Wf=e=>Number(e??0).toFixed(3),E3e=(e,t)=>{var h;const r=e.date??((h=e.timestamp)!=null&&h.toDate?ir(e.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=e.userEmail??"",a=e.vendorName||e.vendor||n||e.vendorId||"(sin vendedor)",s=e.type||"CONTADO",o=e.vendorId,l=Number(e.total??e.itemsTotal??e.amount??e.amountCharged??0)||0,c=Number(e.vendorCommissionAmount??0)||0,u=e.processedDate??e.closureDate??"";if(Array.isArray(e.items)&&e.items.length>0)return e.items.map((m,p)=>{const g=Number((m==null?void 0:m.packages)??(m==null?void 0:m.qty)??(m==null?void 0:m.quantity)??0),x=Number((m==null?void 0:m.lineFinal)??0)||Math.max(0,Number((m==null?void 0:m.unitPricePackage)||(m==null?void 0:m.unitPrice)||0)*g-Number((m==null?void 0:m.discount)||0));let y=0;return c>0&&l>0&&Number(x||0)>0&&(y=Xn(c*Number(x||0)/l)),{id:`${t}#${p}`,productName:String((m==null?void 0:m.productName)??"(sin nombre)"),quantity:g,amount:Xn(x),amountSuggested:Number(e.amountSuggested??0),date:r,userEmail:a,sellerEmail:n,clientName:e.clientName??"",amountReceived:Number(e.amountReceived??0),change:String(e.change??"0"),status:e.status??"FLOTANTE",allocations:Array.isArray(m==null?void 0:m.allocations)?m.allocations:e.allocations,avgUnitCost:Number((m==null?void 0:m.avgUnitCost)??e.avgUnitCost??0),cogsAmount:Number((m==null?void 0:m.cogsAmount)??0),type:s,vendorId:o,vendorCommissionAmount:y,processedDate:u||""}});const d=Number(e.packagesTotal??e.quantity??0),A=Number(e.amount??e.amountCharged??e.total??0)||0;let f=0;return f=Xn(Number(e.vendorCommissionAmount??0)||0),[{id:t,productName:e.productName??"(sin nombre)",quantity:d,amount:A,amountSuggested:Number(e.amountSuggested??0),date:r,userEmail:a,sellerEmail:n,clientName:e.clientName??"",amountReceived:Number(e.amountReceived??0),change:String(e.change??"0"),status:e.status??"FLOTANTE",allocations:e.allocations,avgUnitCost:e.avgUnitCost,cogsAmount:e.cogsAmount,type:s,vendorId:o,vendorCommissionAmount:f,processedDate:u||""}]};function S3e({role:e,currentUserEmail:t,sellerCandyId:r}){const[n,a]=v.useState([]),[s,o]=v.useState(null),[l,c]=v.useState(!0),[u,d]=v.useState(""),[A,f]=v.useState("ALL"),h=ir(new Date,"yyyy-MM-dd"),[m,p]=v.useState(h),[g,x]=v.useState(h),[y,b]=v.useState("ALL"),[_,T]=v.useState(null),[P,C]=v.useState(0),[S,I]=v.useState(0),[L,E]=v.useState(""),[j,R]=v.useState(0),[W,de]=v.useState("0"),te=v.useRef(null),le=!e||e==="admin",ce=e==="vendedor_dulces",J=(t||"").trim().toLowerCase(),[me,Ee]=v.useState([]);v.useEffect(()=>{if(!m||!g)return;c(!0);const ye=Ht(At(ke,"sales_candies"),Xt("date",">=",m),Xt("date","<=",g),Ur("date","asc")),xe=uf(ye,ue=>{const Ge=[];ue.forEach(Je=>{const ht=E3e(Je.data(),Je.id);Ge.push(...ht)}),a(Ge),c(!1)},ue=>{console.error("Error cargando ventas por periodo:",ue),a([]),c(!1)});return()=>xe()},[m,g]),v.useEffect(()=>{(async()=>{const xe=Ht(At(ke,"daily_closures_candies"),Xt("date","==",h)),ue=await jt(xe);if(ue.empty)o(null);else{const Ge=ue.docs[0];o({id:Ge.id,...Ge.data()})}})()},[h]),v.useEffect(()=>{(async()=>{try{const xe=await jt(At(ke,"sellers_candies")),ue=[];xe.forEach(Ge=>{const Je=Ge.data();ue.push({id:Ge.id,name:Je.name||"",commissionPercent:Number(Je.commissionPercent||0)})}),Ee(ue)}catch(xe){console.error("Error cargando sellers_candies",xe)}})()},[]);const k=ye=>Xn(Number(ye.vendorCommissionAmount??0)||0),F=Ti.useMemo(()=>{let ye=[...n];return A==="FLOTANTE"&&(ye=ye.filter(xe=>xe.status==="FLOTANTE")),A==="PROCESADA"&&(ye=ye.filter(xe=>xe.status==="PROCESADA")),le&&y!=="ALL"&&(ye=ye.filter(xe=>(xe.vendorId||"")===y)),ce&&(r?ye=ye.filter(xe=>(xe.vendorId||"")===r):J?ye=ye.filter(xe=>(xe.sellerEmail||"").toLowerCase()===J):ye=[]),ye},[A,n,le,y,ce,r,J]),V=Ti.useMemo(()=>F.filter(ye=>ye.status==="FLOTANTE").length,[F]),D=Ti.useMemo(()=>F.filter(ye=>ye.status==="PROCESADA").length,[F]),M=Ti.useMemo(()=>F.filter(ye=>ye.type==="CREDITO").length,[F]),G=Ti.useMemo(()=>F.filter(ye=>ye.type!=="CREDITO").length,[F]),O=pp(F.reduce((ye,xe)=>ye+(xe.quantity||0),0)),K=Xn(F.reduce((ye,xe)=>ye+Number(xe.cogsAmount??0),0)),ee=Xn(F.reduce((ye,xe)=>ye+(xe.amount||0),0)),ne=Xn(ee-K);let Q=0,be=0,Z=0,z=0,X=0,ve=0,re=0;F.forEach(ye=>{const xe=Number(ye.amount||0),ue=Number(ye.amountReceived||0),Ge=k(ye);X+=Ge,ye.type==="CREDITO"?(Q+=ye.quantity||0,Z+=xe-ue,re+=Ge):(be+=ye.quantity||0,z+=xe,ve+=Ge)}),Z=Xn(Z),z=Xn(z),X=Xn(X),ve=Xn(ve),re=Xn(re);const Ne=Ti.useMemo(()=>{const ye={};for(const xe of F){const ue=(xe.vendorId||"").trim();if(!ue||xe.type==="CREDITO")continue;const Ge=k(xe);if(!ye[ue]){const Je=me.find(ht=>ht.id===ue);ye[ue]={vendorId:ue,name:(Je==null?void 0:Je.name)||xe.userEmail||"(sin vendedor)",total:0}}ye[ue].total=Xn(ye[ue].total+Ge)}return Object.values(ye).filter(xe=>xe.total>0).sort((xe,ue)=>ue.total-xe.total)},[F,me]),Me=Ti.useMemo(()=>{const ye={};for(const xe of F){const ue=(xe.vendorId||"").trim();if(!ue||xe.type!=="CREDITO")continue;const Ge=k(xe);if(!ye[ue]){const Je=me.find(ht=>ht.id===ue);ye[ue]={vendorId:ue,name:(Je==null?void 0:Je.name)||xe.userEmail||"(sin vendedor)",total:0}}ye[ue].total=Xn(ye[ue].total+Ge)}return Object.values(ye).filter(xe=>xe.total>0).sort((xe,ue)=>ue.total-xe.total)},[F,me]),Ve={};F.forEach(ye=>{const xe=ye.productName||"(sin nombre)";Ve[xe]||(Ve[xe]={totalQuantity:0,totalAmount:0,totalCommission:0}),Ve[xe].totalQuantity=pp(Ve[xe].totalQuantity+(ye.quantity||0)),Ve[xe].totalAmount=Xn(Ve[xe].totalAmount+(ye.amount||0)),Ve[xe].totalCommission=Xn(Ve[xe].totalCommission+k(ye))});const nt=Object.entries(Ve).map(([ye,xe])=>({productName:ye,totalQuantity:xe.totalQuantity,totalAmount:xe.totalAmount,totalCommission:xe.totalCommission})),st=async()=>{if(le)try{const ye=F.filter(Qe=>Qe.status==="FLOTANTE");if(ye.length===0){d("No hay ventas flotantes para procesar en este perodo.");return}const xe={totalCharged:Xn(ye.reduce((Qe,Pe)=>Qe+(Pe.amount||0),0)),totalSuggested:Xn(ye.reduce((Qe,Pe)=>Qe+(Pe.amountSuggested||0),0)),totalUnits:pp(ye.reduce((Qe,Pe)=>Qe+(Pe.quantity||0),0)),totalCOGS:Xn(ye.reduce((Qe,Pe)=>Qe+Number(Pe.cogsAmount??0),0))},ue=Xn(xe.totalCharged-xe.totalSuggested),Ge=Xn(xe.totalCharged-xe.totalCOGS),Je=ye.reduce((Qe,Pe)=>{const ze=Number(Pe.quantity||0),it=Number(Pe.amount||0),Bt=Number(Pe.vendorCommissionAmount||0);return Pe.type==="CREDITO"?(Qe.packsCredit+=ze,Qe.amountCredit+=it,Qe.comCredit+=Bt):(Qe.packsCash+=ze,Qe.amountCash+=it,Qe.comCash+=Bt),Qe},{packsCash:0,packsCredit:0,amountCash:0,amountCredit:0,comCash:0,comCredit:0}),ht={totalPacksCash:pp(Je.packsCash),totalPacksCredit:pp(Je.packsCredit),totalAmountCash:Xn(Je.amountCash),totalAmountCredit:Xn(Je.amountCredit),totalCommissionCash:Xn(Je.comCash),totalCommissionCredit:Xn(Je.comCredit)},Ue=await en(At(ke,"daily_closures_candies"),{date:h,createdAt:zt.now(),periodStart:m,periodEnd:g,totalCharged:xe.totalCharged,totalSuggested:xe.totalSuggested,totalDifference:ue,totalUnits:xe.totalUnits,totalCOGS:xe.totalCOGS,grossProfit:Ge,...ht,products:ye.map(Qe=>({productName:Qe.productName,quantity:Qe.quantity,amount:Qe.amount})),sales:ye.map(Qe=>({id:Qe.id,productName:Qe.productName,quantity:Qe.quantity,amount:Qe.amount,amountSuggested:Qe.amountSuggested,userEmail:Qe.userEmail,clientName:Qe.clientName,amountReceived:Qe.amountReceived,change:Qe.change,status:Qe.status,cogsAmount:Qe.cogsAmount??0,avgUnitCost:Qe.avgUnitCost??null,allocations:Qe.allocations??[],date:Qe.date,type:Qe.type??"CONTADO",vendorId:Qe.vendorId??"",vendorCommissionAmount:Number(Qe.vendorCommissionAmount??0)||0,processedDate:h})),productSummary:Object.entries(ye.reduce((Qe,Pe)=>{const ze=Pe.productName||"(sin nombre)";return Qe[ze]||(Qe[ze]={totalQuantity:0,totalAmount:0}),Qe[ze].totalQuantity=pp(Qe[ze].totalQuantity+(Pe.quantity||0)),Qe[ze].totalAmount=Xn(Qe[ze].totalAmount+(Pe.amount||0)),Qe},{})).map(([Qe,Pe])=>({productName:Qe,totalQuantity:Pe.totalQuantity,totalAmount:Pe.totalAmount}))}),rt=_0(ke);ye.forEach(Qe=>{rt.update(Mt(ke,"sales_candies",Qe.id.split("#")[0]),{status:"PROCESADA",closureId:Ue.id,closureDate:h,processedDate:h,processedAt:zt.now()})}),await rt.commit(),d(` Cierre guardado. Ventas procesadas: ${ye.length}. (Proceso: ${h})`)}catch(ye){console.error(ye),d(" Error al guardar el cierre de dulces.")}},lt=async ye=>{if(le&&window.confirm("Revertir esta venta? Esta accin no se puede deshacer."))try{await Lr(Mt(ke,"sales_candies",ye.split("#")[0]),{status:"FLOTANTE",closureId:null,closureDate:null,processedDate:null,processedAt:null}),d(" Venta revertida a FLOTANTE.")}catch(xe){console.error(xe),d(" No se pudo revertir la venta.")}},bt=ye=>{le&&(T(ye),C(ye.quantity),I(ye.amount),E(ye.clientName),R(ye.amountReceived),de(ye.change))},ot=async()=>{if(!(!_||!le))try{await Lr(Mt(ke,"sales_candies",_.id.split("#")[0]),{packagesTotal:P,amount:S,amountCharged:S,clientName:L,amountReceived:j,change:W}),T(null),d(" Venta de dulces actualizada.")}catch(ye){console.error(ye),d(" No se pudo actualizar la venta de dulces.")}},Le=async ye=>{if(le&&window.confirm("Eliminar esta venta? Se restaurar el stock (paquetes) en los lotes asignados."))try{const{restored:xe}=await WFe(ye.split("#")[0]);d(` Venta eliminada. Stock restaurado (unidades internas): ${Number(xe).toFixed(2)}.`)}catch(xe){console.error(xe),d(" No se pudo eliminar la venta de dulces.")}},Ze=async()=>{if(te.current){te.current.classList.add("force-pdf-colors"),te.current.classList.add("pdf-print-mode");try{const xe=(await If(te.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),ue=new Ar;ue.addImage(xe,"PNG",10,10,190,0),ue.save(`cierre_dulces_${m}_a_${g}_proc_${h}.pdf`)}finally{te.current.classList.remove("pdf-print-mode"),te.current.classList.remove("force-pdf-colors")}}};return i.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[i.jsx("style",{children:`
        .pdf-print-mode .pdf-desktop { display: block !important; }
        .pdf-print-mode .pdf-mobile  { display: none !important; }
      `}),i.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Cierre de Ventas de Dulces - Proceso: ",h]}),i.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-3 mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm",children:"Desde:"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:m,onChange:ye=>p(ye.target.value)})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm",children:"Hasta:"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:g,onChange:ye=>x(ye.target.value)})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm",children:"Filtrar:"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:A,onChange:ye=>f(ye.target.value),children:[i.jsx("option",{value:"ALL",children:"Todas"}),i.jsx("option",{value:"FLOTANTE",children:"Venta Flotante"}),i.jsx("option",{value:"PROCESADA",children:"Venta Procesada"})]})]}),le&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm",children:"Vendedor:"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:y,onChange:ye=>b(ye.target.value),children:[i.jsx("option",{value:"ALL",children:"Todos"}),me.map(ye=>i.jsx("option",{value:ye.id,children:ye.name||ye.id},ye.id))]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas flotantes"}),i.jsx("div",{className:"text-2xl font-bold",children:V}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",m,"  ",g]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas procesadas"}),i.jsx("div",{className:"text-2xl font-bold",children:D}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",m,"  ",g]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),i.jsx("div",{className:"text-2xl font-bold",children:M}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",m,"  ",g]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),i.jsx("div",{className:"text-2xl font-bold",children:G}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",m,"  ",g]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash (perodo)"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",wi(ve)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",m,"  ",g]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito (perodo)"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",wi(re)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",m,"  ",g]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin CASH del perodo)"}),Ne.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:Ne.map(ye=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:ye.name}),i.jsxs("strong",{className:"ml-2",children:["C$",wi(ye.total)]})]},ye.vendorId))})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin CRDITO del perodo)"}),Me.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:Me.map(ye=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:ye.name}),i.jsxs("strong",{className:"ml-2",children:["C$",wi(ye.total)]})]},ye.vendorId))})]})]}),l?i.jsx("p",{children:"Cargando ventas..."}):i.jsxs("div",{ref:te,children:[i.jsx("div",{className:"pdf-desktop hidden md:block",children:i.jsxs("table",{className:"min-w-full border text-sm mb-4 shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Estado"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Paquetes"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Comisin"}),i.jsx("th",{className:"border p-2",children:"Fecha venta"}),i.jsx("th",{className:"border p-2",children:"Fecha proceso"}),i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Acciones"})]})}),i.jsxs("tbody",{children:[F.map(ye=>{const xe=k(ye),ue=(ye.processedDate||"").trim();return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ye.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:ye.status})}),i.jsx("td",{className:"border p-1",children:ye.productName}),i.jsx("td",{className:"border p-1",children:ye.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"border p-1",children:Wf(ye.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",wi(ye.amount)]}),i.jsx("td",{className:"border p-1",children:xe>0?`C$${wi(xe)}`:""}),i.jsx("td",{className:"border p-1",children:ye.date}),i.jsx("td",{className:"border p-1",children:ue||""}),i.jsx("td",{className:"border p-1",children:ye.userEmail}),i.jsx("td",{className:"border p-1",children:ye.status==="FLOTANTE"?i.jsx("div",{className:"flex gap-2 justify-center",children:le?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>bt(ye),className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",children:"Editar"}),i.jsx("button",{onClick:()=>Le(ye.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]}):i.jsx("span",{className:"text-gray-400 text-xs",children:""})}):ye.status==="PROCESADA"?i.jsx("div",{className:"flex gap-2 justify-center",children:le?i.jsx("button",{onClick:()=>lt(ye.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Revertir"}):i.jsx("span",{className:"text-gray-400 text-xs",children:""})}):i.jsx("span",{className:"text-gray-400 text-xs",children:"No options"})})]},ye.id)}),F.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:10,className:"p-3 text-center text-gray-500",children:"Sin ventas para mostrar."})})]})]})}),i.jsxs("div",{className:"pdf-mobile md:hidden space-y-3 mb-4",children:[F.map(ye=>{const xe=k(ye),ue=(ye.processedDate||"").trim();return i.jsxs("details",{className:"border rounded-xl bg-white shadow-sm",children:[i.jsxs("summary",{className:"px-4 py-3 flex justify-between items-center cursor-pointer",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:ye.productName}),i.jsxs("div",{className:"text-xs text-gray-500",children:[ye.type==="CREDITO"?"Crdito":"Cash","  ",ye.date]})]}),i.jsxs("div",{className:"text-right shrink-0 ml-3",children:[i.jsxs("div",{className:"font-bold",children:["C$",wi(ye.amount)]}),i.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${ye.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:ye.status})]})]}),i.jsxs("div",{className:"px-4 pb-4 pt-2 text-sm space-y-2",children:[i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Paquetes"}),i.jsx("strong",{children:Wf(ye.quantity)})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Comisin"}),i.jsx("strong",{children:xe>0?`C$${wi(xe)}`:""})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Fecha proceso"}),i.jsx("strong",{children:ue||""})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Vendedor"}),i.jsx("strong",{className:"text-right break-all",children:ye.userEmail})]}),i.jsx("div",{className:"pt-2",children:ye.status==="FLOTANTE"?i.jsx("div",{className:"flex gap-2",children:le?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>bt(ye),className:"flex-1 text-xs bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700",children:"Editar"}),i.jsx("button",{onClick:()=>Le(ye.id),className:"flex-1 text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Eliminar"})]}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):ye.status==="PROCESADA"?i.jsx("div",{className:"flex gap-2",children:le?i.jsx("button",{onClick:()=>lt(ye.id),className:"w-full text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Revertir"}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:"No options"})})]})]},ye.id)}),F.length===0&&i.jsx("div",{className:"text-center text-gray-500 text-sm py-6",children:"Sin ventas para mostrar."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-2 text-sm mb-4",children:[i.jsxs("div",{children:["Total paquetes crdito: ",i.jsx("strong",{children:Wf(Q)})]}),i.jsxs("div",{children:["Total paquetes cash: ",i.jsx("strong",{children:Wf(be)})]}),i.jsxs("div",{children:["Total pendiente crdito:"," ",i.jsxs("strong",{children:["C$",wi(Z)]})]}),i.jsxs("div",{children:["Total cobrado cash: ",i.jsxs("strong",{children:["C$",wi(z)]})]}),i.jsxs("div",{children:["Total comisin: ",i.jsxs("strong",{children:["C$",wi(X)]})]})]}),(K>0||ne!==ee)&&i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm mb-6",children:[i.jsxs("div",{children:["Costo total (COGS): ",i.jsxs("strong",{children:["C$",wi(K)]})]}),i.jsxs("div",{children:["Ganancia antes de gasto:"," ",i.jsxs("strong",{children:["C$",wi(ne)]})]}),i.jsxs("div",{children:["Total paquetes (visibles):"," ",i.jsx("strong",{children:Wf(O)})]})]}),i.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),i.jsx("div",{className:"pdf-desktop hidden md:block",children:i.jsxs("table",{className:"min-w-full border text-sm mb-2 shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Total paquetes"}),i.jsx("th",{className:"border p-2",children:"Total dinero"}),i.jsx("th",{className:"border p-2",children:"Comisin"})]})}),i.jsxs("tbody",{children:[nt.map(ye=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:ye.productName}),i.jsx("td",{className:"border p-1",children:Wf(ye.totalQuantity)}),i.jsxs("td",{className:"border p-1",children:["C$",wi(ye.totalAmount)]}),i.jsx("td",{className:"border p-1",children:ye.totalCommission>0?`C$${wi(ye.totalCommission)}`:""})]},ye.productName)),nt.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"Sin datos para consolidar."})})]})]})}),i.jsxs("div",{className:"pdf-mobile md:hidden space-y-2",children:[nt.map(ye=>i.jsxs("div",{className:"border rounded-xl bg-white shadow-sm p-3",children:[i.jsx("div",{className:"font-semibold",children:ye.productName}),i.jsxs("div",{className:"mt-2 text-sm space-y-1",children:[i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Total paquetes"}),i.jsx("strong",{children:Wf(ye.totalQuantity)})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Total dinero"}),i.jsxs("strong",{children:["C$",wi(ye.totalAmount)]})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Comisin"}),i.jsx("strong",{children:ye.totalCommission>0?`C$${wi(ye.totalCommission)}`:""})]})]})]},ye.productName)),nt.length===0&&i.jsx("div",{className:"text-center text-gray-500 text-sm py-6",children:"Sin datos para consolidar."})]})]}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[le&&i.jsx("button",{onClick:st,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Cerrar ventas del perodo"}),i.jsx("button",{onClick:Ze,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Descargar PDF"})]}),u&&i.jsx("p",{className:"mt-2 text-sm",children:u}),_&&le&&i.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-4 space-y-3",children:[i.jsx("h4",{className:"font-semibold text-lg",children:"Editar venta de dulces"}),i.jsxs("div",{className:"text-sm text-gray-500",children:[_.productName,"  ",_.userEmail]}),i.jsx("label",{className:"text-sm",children:"Paquetes"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:P,onChange:ye=>C(parseFloat(ye.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Monto cobrado"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:S,onChange:ye=>I(parseFloat(ye.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Cliente"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:L,onChange:ye=>E(ye.target.value)}),i.jsx("label",{className:"text-sm",children:"Paga con"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:j,onChange:ye=>R(parseFloat(ye.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Vuelto"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:W,onChange:ye=>de(ye.target.value)}),i.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[i.jsx("button",{onClick:()=>T(null),className:"px-3 py-1 border rounded",children:"Cancelar"}),i.jsx("button",{onClick:ot,className:"px-3 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",children:"Guardar cambios"})]})]})})]})}const Bd=e=>`C$ ${(Number(e)||0).toFixed(2)}`,xl=e=>Math.round((Number(e)||0)*100)/100;function I3e(e){if(!e)return"";switch(e){case"RIVAS":return"Rivas";case"SAN_JORGE":return"San Jorge";case"ISLA":return"Isla de Ometepe";default:return""}}function B3e(e){return e.toISOString().slice(0,10)}function j3e(){const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-01`}function P3e(){const e=new Date,t=new Date(e.getFullYear(),e.getMonth()+1,1),r=new Date(t.getTime()-24*60*60*1e3);return B3e(r)}function k3e(){const[e,t]=v.useState(j3e()),[r,n]=v.useState(P3e()),[a,s]=v.useState(!1),[o,l]=v.useState(""),[c,u]=v.useState({}),[d,A]=v.useState({}),[f,h]=v.useState([]),[m,p]=v.useState([]),[g,x]=v.useState({}),[y,b]=v.useState(!1),[_,T]=v.useState(null),[P,C]=v.useState(null),S=v.useMemo(()=>_&&f.find(te=>te.vendorId===_)||null,[_,f]),I=v.useMemo(()=>{var te;return!_||!P?[]:((te=g[_])==null?void 0:te[P])||[]},[_,P,g]),L=v.useMemo(()=>xl(f.reduce((te,le)=>te+(le.totalSoldMoney||0),0)),[f]),E=v.useMemo(()=>xl(f.reduce((te,le)=>te+(le.totalCreditMoney||0),0)),[f]);v.useEffect(()=>{(async()=>{try{const te=await jt(At(ke,"sellers_candies")),le={};te.forEach(me=>{const Ee=me.data(),k=Ee.branch||"Rivas";let F="RIVAS";k==="San Jorge"?F="SAN_JORGE":k==="Isla Ometepe"&&(F="ISLA"),le[me.id]={id:me.id,name:Ee.name??"(sin nombre)",branch:F,branchLabel:k,commissionPercent:Number(Ee.commissionPercent??0)}});const ce=await jt(At(ke,"products_candies")),J={};ce.forEach(me=>{const Ee=me.data();J[me.id]={id:me.id,name:Ee.name??"(sin nombre)"}}),u(le),A(J)}catch(te){console.error(te),l(" Error cargando catlogos de vendedores/productos.")}})()},[]);const j=async()=>{if(!e||!r){l("Selecciona rango de fechas vlido.");return}if(!Object.keys(c).length){l("Cargando vendedores, intenta de nuevo en unos segundos.");return}s(!0),l("");try{const te={},le={},ce=Ht(At(ke,"inventory_candies_sellers"),Xt("date",">=",e),Xt("date","<=",r)),J=await jt(ce),me={},Ee={},k={},F={};J.forEach(ve=>{var Bt,ut;const re=ve.data(),Ne=re.sellerId||"";if(!Ne)return;const Me=re.productId||"",Ve=re.productName||((Bt=d[Me])==null?void 0:Bt.name)||"(sin nombre)",nt=Math.max(1,Math.floor(Number(re.unitsPerPackage||1))),st=Number(re.totalUnits??0),lt=Number(re.packages??0),bt=Number(re.remainingUnits??re.remaining??0),ot=Number(re.remainingPackages??0),Le=lt>0?lt:st>0?Math.floor(st/nt):0,Ze=ot>0?ot:bt>0?Math.floor(bt/nt):0;me[Ne]=(me[Ne]||0)+Le,Ee[Ne]=(Ee[Ne]||0)+Ze;const ye=re.orderId||re.vendorOrderId||re.orderNumber||re.order||ve.id;k[Ne]||(k[Ne]=new Set),k[Ne].add(ye);const xe=((ut=c[Ne])==null?void 0:ut.name)||re.sellerName||"(sin vendedor)",ue=String(re.date||""),Ge=Number(re.totalVendor??0),Je=Number(re.gainVendor??0),ht=lt>0?lt:st>0?Math.floor(st/nt):0,Ue=ht>0?Ge/ht:0,rt=ht>0?Je/ht:0,Qe=xl(Le*Ue),Pe=xl(Le*rt),ze=xl(Ze*Ue),it=xl(Ze*rt);F[Ne]||(F[Ne]={ordered:[],remaining:[]}),Le>0&&F[Ne].ordered.push({date:ue,vendorName:xe,productName:Ve,packages:Le,totalMoney:Qe,vendorCommission:Pe}),Ze>0&&F[Ne].remaining.push({date:ue,vendorName:xe,productName:Ve,packages:Ze,totalMoney:ze,vendorCommission:it})});const V={};Object.keys(k).forEach(ve=>{V[ve]=k[ve].size});const D=Ht(At(ke,"sales_candies"),Xt("date",">=",e),Xt("date","<=",r)),M=await jt(D),G={},O={},K={},ee={},ne={},Q={};M.forEach(ve=>{const re=ve.data(),Ne=re.date||"",Me=re.vendorId||re.sellerId||"";if(!Me)return;const Ve=c[Me],nt=re.vendorName||(Ve==null?void 0:Ve.name)||"(sin vendedor)",st=Number(re.vendorCommissionPercent??(Ve==null?void 0:Ve.commissionPercent)??0)||0,lt=Array.isArray(re.items)?re.items:[];if(!lt.length)return;const bt=String(re.type||"").toUpperCase()==="CREDITO";ne[Me]||(ne[Me]={sold:[],credit:[]}),lt.forEach(ot=>{var Qe;const Le=ot.productName||((Qe=d[ot.productId||""])==null?void 0:Qe.name)||"(sin nombre)",Ze=ot.packages??ot.qty??ot.quantity??0,ye=Number(Ze||0);if(ye<=0)return;const xe=Number(ot.unitPricePackage??ot.unitPrice??0)||0,ue=Math.max(0,Number(ot.discount||0)),Ge=ye*xe,Je=xl(Math.max(0,Ge-ue));if(Je<=0)return;console.log("DBG",{isCredit:bt,vendorId:Me,commissionPercent:st,lineFinal:Je,storedItemCommission:Number(ot.vendorCommissionAmount??0)});let ht=0;const Ue=Number(ot.vendorCommissionAmount??0);Ue?ht=xl(Ue):st>0&&(ht=xl(Je*st/100)),bt?(O[Me]=(O[Me]||0)+ye,ee[Me]=(ee[Me]||0)+Je):(G[Me]=(G[Me]||0)+ye,K[Me]=(K[Me]||0)+Je),bt?le[Me]=(le[Me]||0)+ht:te[Me]=(te[Me]||0)+ht,bt?ne[Me].credit.push({date:Ne,vendorName:nt,productName:Le,packages:ye,totalMoney:Je,vendorCommission:0}):ne[Me].sold.push({date:Ne,vendorName:nt,productName:Le,packages:ye,totalMoney:Je,vendorCommission:ht});const rt=Le;Q[rt]||(Q[rt]={productName:Le,packages:0,totalMoney:0}),Q[rt].packages+=ye,Q[rt].totalMoney+=Je})});const be=new Set([...Object.keys(me),...Object.keys(Ee),...Object.keys(G),...Object.keys(O)]),Z=[],z={};be.forEach(ve=>{var Ze,ye,xe,ue;const re=c[ve],Ne=(re==null?void 0:re.name)||"(sin vendedor)",Me=re?re.branchLabel||I3e(re.branch):"",Ve=me[ve]||0,nt=Ee[ve]||0,st=G[ve]||0,lt=O[ve]||0,bt=xl(K[ve]||0),ot=xl(ee[ve]||0),Le=V[ve]||0;Z.push({vendorId:ve,vendorName:Ne,branchLabel:Me,orderedPackages:Ve,remainingPackages:nt,soldPackages:st,creditPackages:lt,totalSoldMoney:bt,totalCreditMoney:ot,ordersCreated:Le,commissionCash:xl(te[ve]||0),commissionCredit:0}),z[ve]={ordered:(((Ze=F[ve])==null?void 0:Ze.ordered)||[]).sort((Ge,Je)=>Ge.date.localeCompare(Je.date)),remaining:(((ye=F[ve])==null?void 0:ye.remaining)||[]).sort((Ge,Je)=>Ge.date.localeCompare(Je.date)),sold:(((xe=ne[ve])==null?void 0:xe.sold)||[]).sort((Ge,Je)=>Ge.date.localeCompare(Je.date)),credit:(((ue=ne[ve])==null?void 0:ue.credit)||[]).sort((Ge,Je)=>Ge.date.localeCompare(Je.date))}}),Z.sort((ve,re)=>ve.vendorName.localeCompare(re.vendorName,"es")),h(Z),x(z);const X=Object.values(Q).map(ve=>({productName:ve.productName,packages:ve.packages,totalMoney:xl(ve.totalMoney)})).sort((ve,re)=>re.packages-ve.packages).slice(0,10);p(X),Z.length||l("Sin datos para el rango seleccionado.")}catch(te){console.error(te),l(" Error cargando consolidado de vendedores.")}finally{s(!1)}};v.useEffect(()=>{Object.keys(c).length&&j()},[c]);const R=(te,le)=>{T(te),C(le),b(!0)},W=()=>{b(!1),T(null),C(null)},de=()=>{if(!f.length){l("No hay datos para exportar.");return}const te=["Vendedor","Sucursal","Paquetes ordenados","Paquetes restantes","Paquetes vendidos","Paquetes fiados","Total vendidos (C$)","Comisin Cash (C$)","Total fiado (C$)","Comisin Crdito (C$)","rdenes creadas"],le=f.map(k=>[k.vendorName,k.branchLabel,k.orderedPackages.toString(),k.remainingPackages.toString(),k.soldPackages.toString(),k.creditPackages.toString(),k.totalSoldMoney.toFixed(2),k.commissionCash.toFixed(2),k.totalCreditMoney.toFixed(2),k.commissionCredit.toFixed(2),k.ordersCreated.toString()]),ce=[te,...le].map(k=>k.map(F=>`"${String(F).replace(/"/g,'""')}"`).join(",")).join(`
`),J=new Blob([ce],{type:"text/csv;charset=utf-8;"}),me=URL.createObjectURL(J),Ee=document.createElement("a");Ee.href=me,Ee.download=`consolidado_vendedores_dulces_${e}_a_${r}.csv`,Ee.click(),URL.revokeObjectURL(me)};return i.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Consolidado por Vendedor - Dulces"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold mb-1",children:"Desde"}),i.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:e,onChange:te=>t(te.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold mb-1",children:"Hasta"}),i.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:r,onChange:te=>n(te.target.value)})]}),i.jsx("div",{className:"flex items-end",children:i.jsx("button",{type:"button",onClick:j,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",disabled:a,children:a?"Cargando...":"Aplicar filtros"})}),i.jsx("div",{className:"flex items-end",children:i.jsx("button",{type:"button",onClick:de,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 w-full",children:"Exportar CSV"})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 text-sm",children:[i.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Ventas Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:Bd(L)})]}),i.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Ventas Credito"}),i.jsx("div",{className:"text-xl font-semibold",children:Bd(E)})]}),i.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Vendedores con Inventario"}),i.jsx("div",{className:"text-xl font-semibold",children:f.length})]})]}),i.jsx("div",{className:"overflow-x-auto mb-6",children:i.jsxs("table",{className:"min-w-full border text-sm shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Sucursal"}),i.jsx("th",{className:"border p-2",children:"Paquetes ordenados"}),i.jsx("th",{className:"border p-2",children:"Paquetes restantes"}),i.jsx("th",{className:"border p-2",children:"Paquetes vendidos"}),i.jsx("th",{className:"border p-2",children:"Paquetes fiados"}),i.jsx("th",{className:"border p-2",children:"Total vendidos (C$)"}),i.jsx("th",{className:"border p-2",children:"Comisin Cash (C$)"}),i.jsx("th",{className:"border p-2",children:"Total fiado (C$)"}),i.jsx("th",{className:"border p-2",children:"Comisin Crdito (C$)"}),i.jsx("th",{className:"border p-2",children:"rdenes creadas"})]})}),i.jsxs("tbody",{children:[f.map(te=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:te.vendorName}),i.jsx("td",{className:"border p-1",children:te.branchLabel}),i.jsx("td",{className:"border p-1",children:i.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>R(te.vendorId,"ordered"),children:te.orderedPackages})}),i.jsx("td",{className:"border p-1",children:i.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>R(te.vendorId,"remaining"),children:te.remainingPackages})}),i.jsx("td",{className:"border p-1",children:i.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>R(te.vendorId,"sold"),children:te.soldPackages})}),i.jsx("td",{className:"border p-1",children:i.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>R(te.vendorId,"credit"),children:te.creditPackages})}),i.jsx("td",{className:"border p-1",children:Bd(te.totalSoldMoney)}),i.jsx("td",{className:"border p-1",children:Bd(te.commissionCash)}),i.jsx("td",{className:"border p-1",children:Bd(te.totalCreditMoney)}),i.jsx("td",{className:"border p-1",children:Bd(te.commissionCredit)}),i.jsx("td",{className:"border p-1",children:te.ordersCreated})]},te.vendorId)),f.length===0&&!a&&i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-3 text-center text-gray-500",children:"Sin datos para mostrar."})})]})]})}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-semibold mb-2 text-sm",children:"Top 10 productos ms vendidos (paquetes)"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-xs shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"#"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Paquetes vendidos"}),i.jsx("th",{className:"border p-2",children:"Total dinero (C$)"})]})}),i.jsxs("tbody",{children:[m.map((te,le)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:le+1}),i.jsx("td",{className:"border p-1",children:te.productName}),i.jsx("td",{className:"border p-1",children:te.packages}),i.jsx("td",{className:"border p-1",children:Bd(te.totalMoney)})]},te.productName)),m.length===0&&!a&&i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"Sin productos para mostrar."})})]})]})})]}),o&&i.jsx("p",{className:"mt-2 text-sm text-gray-700",children:o}),y&&P&&_&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-[95%] max-w-4xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"font-semibold text-lg",children:["Detalle"," ",P==="ordered"?"Paquetes ordenados":P==="remaining"?"Paquetes restantes":P==="sold"?"Paquetes vendidos":"Paquetes fiados"]}),i.jsxs("p",{className:"text-xs text-gray-500",children:[S==null?void 0:S.vendorName,"  ",S==null?void 0:S.branchLabel]})]}),i.jsx("button",{onClick:W,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 text-sm",children:"Cerrar"})]}),i.jsx("div",{className:"flex-1 overflow-auto p-4",children:i.jsxs("table",{className:"min-w-full border text-xs",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Paquetes"}),i.jsx("th",{className:"border p-2",children:"Total dinero (C$)"}),i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Comisin vendedor (C$)"})]})}),i.jsxs("tbody",{children:[I.map((te,le)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:te.date}),i.jsx("td",{className:"border p-1",children:te.productName}),i.jsx("td",{className:"border p-1",children:te.packages}),i.jsx("td",{className:"border p-1",children:Bd(te.totalMoney)}),i.jsx("td",{className:"border p-1",children:te.vendorName}),i.jsx("td",{className:"border p-1",children:Bd(te.vendorCommission)})]},le)),I.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Sin registros para mostrar."})})]})]})})]})})]})}const Zi=e=>`C$${Number(e||0).toFixed(2)}`,D2=e=>Number(e||0).toFixed(3),Gj=()=>{const e=new Date;return ir(new Date(e.getFullYear(),e.getMonth(),1),"yyyy-MM-dd")},R2=()=>ir(new Date,"yyyy-MM-dd");function T3e({transactions:e=[],onClose:t,onCreated:r}){const n=Array.isArray(e)?e:[],[a,s]=v.useState([]),o=v.useMemo(()=>{const Pe={};return a.forEach(ze=>{ze.email&&(Pe[ze.email.trim().toLowerCase()]=ze)}),Pe},[a]);v.useEffect(()=>{(async()=>{try{const Pe=Ht(At(ke,"sellers_candies"),Ur("name","asc")),ze=await jt(Pe),it=[];ze.forEach(Bt=>{const ut=Bt.data();it.push({id:Bt.id,name:ut.name||"",email:ut.email||"",commissionPercent:Number(ut.commissionPercent||0)})}),s(it)}catch(Pe){console.error(Pe)}})()},[]);const[l,c]=v.useState(Gj()),[u,d]=v.useState(R2()),[A,f]=v.useState(""),[h,m]=v.useState(""),p=v.useMemo(()=>{const Pe=new Map;return n.forEach(ze=>{const it=ze.productId||ze.productName;Pe.set(it,{key:it,name:ze.productName})}),Array.from(Pe.values()).sort((ze,it)=>ze.name.localeCompare(it.name))},[n]),g=v.useMemo(()=>{const Pe=new Map;return n.forEach(ze=>{const it=(ze.sellerEmail||"").trim().toLowerCase();if(!it)return;const Bt=o[it],ut=(Bt==null?void 0:Bt.name)||ze.vendorName||it;Pe.set(it,{email:it,label:ut})}),Array.from(Pe.values()).sort((ze,it)=>ze.label.localeCompare(it.label))},[n,o]),x=v.useMemo(()=>n.filter(Pe=>!(l&&Pe.date<l||u&&Pe.date>u||A&&(Pe.productId||Pe.productName)!==A||h&&(Pe.sellerEmail||"").trim().toLowerCase()!==h)),[n,l,u,A,h]),[y,b]=v.useState(R2()),[_,T]=v.useState(()=>`FAC-CANDY-${Date.now().toString().slice(-6)}`),[P,C]=v.useState(""),[S,I]=v.useState("0"),[L,E]=v.useState(()=>x.map(Pe=>Pe.id));v.useEffect(()=>{E(Pe=>Pe.filter(ze=>x.some(it=>it.id===ze)))},[x]);const[j,R]=v.useState([]),[W,de]=v.useState([]),[te,le]=v.useState(!1),[ce,J]=v.useState(Gj()),[me,Ee]=v.useState(R2());v.useEffect(()=>{(async()=>{try{le(!0);const Pe=Ht(At(ke,"expensesCandies"),Ur("date","desc")),ze=await jt(Pe),it=[];ze.forEach(Bt=>{const ut=Bt.data();it.push({id:Bt.id,date:ut.date,description:ut.description,amount:Number(ut.amount||0)})}),R(it)}catch(Pe){console.error(Pe)}finally{le(!1)}})()},[]);const k=v.useMemo(()=>j.filter(Pe=>!(!Pe.date||ce&&Pe.date<ce||me&&Pe.date>me)),[j,ce,me]),[F,V]=v.useState([]),[D,M]=v.useState(!1),[G,O]=v.useState(""),[K,ee]=v.useState("DEBITO"),[ne,Q]=v.useState(""),be=()=>{const Pe=Number(ne);!G.trim()||!isFinite(Pe)||Pe<=0||(V(ze=>[...ze,{id:`${Date.now()}_${ze.length+1}`,description:G.trim(),type:K,amount:Number(Pe.toFixed(2))}]),O(""),Q(""))},[Z,z]=v.useState(null),[X,ve]=v.useState(""),[re,Ne]=v.useState("DEBITO"),[Me,Ve]=v.useState(""),nt=Pe=>{z(Pe.id),ve(Pe.description),Ne(Pe.type),Ve(Pe.amount.toFixed(2))},st=()=>{z(null),ve(""),Ne("DEBITO"),Ve("")},lt=()=>{if(!Z)return;const Pe=Number(Me);!isFinite(Pe)||Pe<=0||(V(ze=>ze.map(it=>it.id===Z?{...it,description:X.trim(),type:re,amount:Number(Pe.toFixed(2))}:it)),st())},bt=Pe=>{V(ze=>ze.filter(it=>it.id!==Pe)),Z===Pe&&st()},ot=(Pe,ze)=>{E(it=>ze?[...new Set([...it,Pe])]:it.filter(Bt=>Bt!==Pe))},Le=Pe=>{E(Pe?x.map(ze=>ze.id):[])},Ze=(Pe,ze)=>{de(it=>ze?[...new Set([...it,Pe])]:it.filter(Bt=>Bt!==Pe))},ye=v.useMemo(()=>x.filter(Pe=>L.includes(Pe.id)),[x,L]),xe=v.useMemo(()=>F.filter(Pe=>Pe.type==="DEBITO").reduce((Pe,ze)=>Pe+ze.amount,0),[F]),ue=v.useMemo(()=>F.filter(Pe=>Pe.type==="CREDITO").reduce((Pe,ze)=>Pe+ze.amount,0),[F]),Ge=v.useMemo(()=>{let Pe=0,ze=0,it=0,Bt=0;for(const dt of ye){const gt=Number(dt.packages||0),Ce=Number(dt.cogsAmount||0),et=Number(dt.amount||0);Pe+=gt,ze+=Ce,it+=et;const yt=(dt.sellerEmail||"").trim().toLowerCase(),Pt=o[yt],Lt=Number((Pt==null?void 0:Pt.commissionPercent)||0),qt=et*Lt/100;Bt+=qt}const ut=k.filter(dt=>W.includes(dt.id)).reduce((dt,gt)=>dt+Number(gt.amount||0),0),It=it-ze,$t=it-ut-xe+ue-Bt,hr=Number(S||0),_e=it*hr/100;return{totalPackages:Number(D2(Pe)),totalProvider:Number(ze.toFixed(2)),totalSale:Number(it.toFixed(2)),totalGastos:Number(ut.toFixed(2)),debits:Number(xe.toFixed(2)),credits:Number(ue.toFixed(2)),grossProfit:Number(It.toFixed(2)),finalAmount:Number($t.toFixed(2)),totalCommissionVendors:Number(Bt.toFixed(2)),branchProfit:Number(_e.toFixed(2)),branchFactor:hr}},[ye,k,W,xe,ue,o,S]),[Je,ht]=v.useState(!1),[Ue,rt]=v.useState(""),Qe=async()=>{if(rt(""),ye.length===0){rt("Selecciona al menos 1 transaccin procesada.");return}try{ht(!0);const Pe={number:_.trim(),date:y,description:P.trim(),status:"PENDIENTE",createdAt:zt.now(),totalPackages:Ge.totalPackages,totalProvider:Ge.totalProvider,totalSale:Ge.totalSale,totalExpenses:Ge.totalGastos,totalDebits:Ge.debits,totalCredits:Ge.credits,grossProfit:Ge.grossProfit,totalCommissionVendors:Ge.totalCommissionVendors,branchFactorPercent:Ge.branchFactor,branchProfit:Ge.branchProfit,finalAmount:Ge.finalAmount,transactions:ye.map(ze=>{const it=Number(ze.packages||0)||1,Bt=Number(ze.cogsAmount||0),ut=Number(ze.amount||0),It=Bt/it,$t=ut/it,hr=(ze.sellerEmail||"").trim().toLowerCase(),_e=o[hr],dt=Number((_e==null?void 0:_e.commissionPercent)||0),gt=ut*dt/100;return{id:ze.id,date:ze.date,productId:ze.productId||null,productName:ze.productName,vendorName:ze.vendorName,sellerEmail:ze.sellerEmail||null,packages:Number(D2(ze.packages)),providerPricePack:Number(It.toFixed(4)),salePricePack:Number($t.toFixed(4)),totalProvider:Number(Bt.toFixed(2)),totalSale:Number(ut.toFixed(2)),commissionPercent:dt,commissionAmount:Number(gt.toFixed(2))}}),expenses:k.filter(ze=>W.includes(ze.id)).map(ze=>({id:ze.id,date:ze.date||null,description:ze.description||"",amount:Number(Number(ze.amount||0).toFixed(2))})),adjustments:F.map(ze=>({id:ze.id,description:ze.description,type:ze.type,amount:Number(ze.amount.toFixed(2))}))};await en(At(ke,"invoicesCandies"),Pe),rt(" Factura de dulces creada."),r()}catch(Pe){console.error(Pe),rt(` Error al crear factura: ${(Pe==null?void 0:Pe.message)||"desconocido"}`)}finally{ht(!1)}};return i.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/40 flex items-center justify-center p-3",children:[i.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-xl shadow-xl p-4 md:p-6 max-h-[90vh] overflow-auto relative",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Crear factura CandyShop"}),i.jsx("button",{onClick:t,className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:y,onChange:Pe=>b(Pe.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Nmero"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:_,onChange:Pe=>T(Pe.target.value),placeholder:"FAC-CANDY-001"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Factor sucursal (%)"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:S,onChange:Pe=>I(Pe.target.value),placeholder:"Ej: 30"}),i.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Se aplica sobre el total de ventas para calcular la ganancia de sucursal."})]}),i.jsxs("div",{className:"md:col-span-1",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Descripcin"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:P,onChange:Pe=>C(Pe.target.value),placeholder:"Comentarios de la factura"})]})]}),i.jsx("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:i.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Desde (transaccin)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:l,onChange:Pe=>c(Pe.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Hasta (transaccin)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:Pe=>d(Pe.target.value)})]}),i.jsxs("div",{className:"min-w-[180px]",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:A,onChange:Pe=>f(Pe.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),p.map(Pe=>i.jsx("option",{value:Pe.key,children:Pe.name},Pe.key))]})]}),i.jsxs("div",{className:"min-w-[180px]",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Vendedor"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:h,onChange:Pe=>m(Pe.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),g.map(Pe=>i.jsx("option",{value:Pe.email,children:Pe.label},Pe.email))]})]}),i.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{c(Gj()),d(R2()),f(""),m("")},children:"Quitar filtro"})]})}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Transacciones procesadas"}),i.jsxs("label",{className:"text-sm flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:x.length>0&&L.length===x.length,onChange:Pe=>Le(Pe.target.checked)}),"Seleccionar todas (sobre el filtro)"]})]}),x.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No hay transacciones procesadas en el filtro actual."}):i.jsx("div",{className:"border rounded max-h-80 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Sel"}),i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Vendedor"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border",children:"Precio venta"}),i.jsx("th",{className:"p-2 border",children:"Total proveedor"}),i.jsx("th",{className:"p-2 border",children:"Total venta"}),i.jsx("th",{className:"p-2 border",children:"Comisin venta"})]})}),i.jsx("tbody",{children:x.map(Pe=>{const ze=L.includes(Pe.id),it=Number(Pe.packages||0)||1,Bt=Number(Pe.cogsAmount||0),ut=Number(Pe.amount||0),It=Bt/it,$t=ut/it,hr=(Pe.sellerEmail||"").trim().toLowerCase(),_e=o[hr],dt=Number((_e==null?void 0:_e.commissionPercent)||0),gt=ut*dt/100;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"checkbox",checked:ze,onChange:Ce=>ot(Pe.id,Ce.target.checked)})}),i.jsx("td",{className:"p-2 border",children:Pe.date}),i.jsx("td",{className:"p-2 border",children:(_e==null?void 0:_e.name)||Pe.vendorName}),i.jsx("td",{className:"p-2 border",children:Pe.productName}),i.jsx("td",{className:"p-2 border",children:D2(Pe.packages)}),i.jsx("td",{className:"p-2 border",children:Zi(It)}),i.jsx("td",{className:"p-2 border",children:Zi($t)}),i.jsx("td",{className:"p-2 border",children:Zi(Bt)}),i.jsx("td",{className:"p-2 border",children:Zi(ut)}),i.jsx("td",{className:"p-2 border",children:dt>0?`${Zi(gt)} (${dt.toFixed(2)}%)`:""})]},Pe.id)})})]})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Gastos a incluir (opcional)"}),te&&i.jsx("span",{className:"text-xs text-gray-500",children:"Cargando"}),i.jsxs("div",{className:"ml-auto flex items-end gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Desde (gasto)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:ce,onChange:Pe=>J(Pe.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta (gasto)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:me,onChange:Pe=>Ee(Pe.target.value)})]})]})]}),k.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No hay gastos en el rango seleccionado."}):i.jsx("div",{className:"border rounded max-h-48 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Sel"}),i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"})]})}),i.jsx("tbody",{children:k.map(Pe=>{const ze=W.includes(Pe.id);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"checkbox",checked:ze,onChange:it=>Ze(Pe.id,it.target.checked)})}),i.jsx("td",{className:"p-2 border",children:Pe.date||""}),i.jsx("td",{className:"p-2 border",children:Pe.description||""}),i.jsx("td",{className:"p-2 border",children:Zi(Number(Pe.amount||0))})]},Pe.id)})})]})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Notas Crdito/Dbito (Cargos extras)"}),i.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>M(!0),children:"Crear Cargo"})]}),F.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin cargos agregados."}):i.jsx("div",{className:"border rounded max-h-40 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:F.map(Pe=>{const ze=Z===Pe.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ze?i.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[70px]",value:X,onChange:it=>ve(it.target.value)}):i.jsx("span",{title:Pe.description,children:Pe.description.length>60?`${Pe.description.slice(0,60)}`:Pe.description})}),i.jsx("td",{className:"p-2 border",children:ze?i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:re,onChange:it=>Ne(it.target.value),children:[i.jsx("option",{value:"DEBITO",children:"Dbito"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Pe.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:Pe.type})}),i.jsx("td",{className:"p-2 border",children:ze?i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1 text-right",value:Me,onChange:it=>Ve(it.target.value)}):Zi(Pe.amount)}),i.jsx("td",{className:"p-2 border",children:ze?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:lt,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:st,children:"Cancelar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>bt(Pe.id),children:"Eliminar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-indigo-600 text-white hover:bg-indigo-700 text-xs",onClick:()=>nt(Pe),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>bt(Pe.id),children:"Eliminar"})]})})]},Pe.id)})})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-4 justify-between",children:[i.jsx("div",{className:"space-y-1",children:i.jsxs("div",{children:["Total paquetes: ",i.jsx("strong",{children:D2(Ge.totalPackages)})]})}),i.jsxs("div",{className:"space-y-1 text-center",children:[i.jsxs("div",{children:["Total proveedor (costo):"," ",i.jsx("strong",{children:Zi(Ge.totalProvider)})]}),i.jsxs("div",{children:["Total venta: ",i.jsx("strong",{children:Zi(Ge.totalSale)})]}),i.jsxs("div",{children:["Ganancia bruta (venta  costo):"," ",i.jsx("strong",{children:Zi(Ge.grossProfit)})]})]}),i.jsxs("div",{className:"space-y-1 text-right",children:[i.jsxs("div",{children:["Gastos: ",i.jsx("strong",{children:Zi(Ge.totalGastos)})]}),i.jsxs("div",{children:["Dbitos: ",i.jsx("strong",{children:Zi(Ge.debits)})]}),i.jsxs("div",{children:["Crditos: ",i.jsx("strong",{children:Zi(Ge.credits)})]}),i.jsxs("div",{children:["Comisin total vendedores:"," ",i.jsx("strong",{children:Zi(Ge.totalCommissionVendors)})]}),i.jsxs("div",{children:["Ganancia sucursal (ventas  factor):"," ",i.jsx("strong",{children:Zi(Ge.branchProfit)})]})]}),i.jsx("div",{className:"md:col-span-3 mt-3",children:i.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-center font-semibold text-lg",children:["Monto final (ventas  gastos  dbitos + crditos  comisin vendedores):"," ",i.jsx("span",{className:"text-blue-700",children:Zi(Ge.finalAmount)})]})})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{disabled:Je,onClick:Qe,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",children:Je?"Creando":"Crear factura"}),i.jsx("button",{onClick:t,className:"px-4 py-2 border rounded",children:"Cancelar"}),Ue&&i.jsx("span",{className:"text-sm ml-2",children:Ue})]}),Je&&i.jsxs("div",{className:"absolute inset-0 z-[11000] bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center gap-3",children:[i.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Creando factura"})]})]}),D&&i.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/50 flex items-center justify-center p-3",children:i.jsxs("div",{className:"bg_WHITE w-full max-w-lg rounded-xl shadow-xl p-4",children:[i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx("h4",{className:"font-semibold",children:"Nuevo cargo"}),i.jsx("button",{className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",onClick:()=>M(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripcin"}),i.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[90px]",value:G,onChange:Pe=>O(Pe.target.value),placeholder:"Detalle del cargo"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Tipo de cargo"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:K,onChange:Pe=>ee(Pe.target.value),children:[i.jsx("option",{value:"DEBITO",children:"Dbito"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:ne,onChange:Pe=>Q(Pe.target.value),placeholder:"0.00"})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:be,children:"Agregar"})})]})]})})]})}const kn=e=>`C$ ${Number(e??0).toFixed(2)}`,L2=e=>Number(e??0).toFixed(3);function zj(e){const t=e.transactions||[];let r=Number(e.totalPackages??0),n=Number(e.totalProvider??0),a=Number(e.totalSale??0),s=Number(e.totalCommissionVendors??0);if(t.length>0&&(a===0||r===0)){r=0,n=0,a=0,s=0;for(const x of t){const y=Number(x.packages??0);r+=y,n+=Number(x.totalProvider??y*(x.providerPricePack??0)),a+=Number(x.totalSale??y*(x.salePricePack??0));const b=x.commissionAmount??Number(x.totalSale??0)*Number(x.commissionPercent??0)/100;s+=Number(b||0)}}const o=e.expenses||[],l=e.adjustments||[],c=e.totalExpenses!==void 0?Number(e.totalExpenses):o.reduce((x,y)=>x+Number(y.amount||0),0),u=l.filter(x=>x.type==="DEBITO").reduce((x,y)=>x+Number(y.amount||0),0),d=l.filter(x=>x.type==="CREDITO").reduce((x,y)=>x+Number(y.amount||0),0),A=e.totalDebits!==void 0?Number(e.totalDebits):u,f=e.totalCredits!==void 0?Number(e.totalCredits):d,h=a-n,m=Number(e.branchFactorPercent??0),p=e.branchProfit!==void 0?Number(e.branchProfit):Number((h*m/100).toFixed(2)),g=e.finalAmount!==void 0?Number(e.finalAmount):a-s-c-A+f;return{totalPackages:r,totalProvider:n,totalSale:a,commissionTotal:s,expenses:c,debits:A,credits:f,grossProfit:h,branchProfit:p,finalAmount:g}}function E7(e){const t=e.transactions||[];if(t.length===0)return"";const r=Array.from(new Set(t.map(n=>n.vendorName||"Sin nombre")));return r.length===1?r[0]:"Varios"}function F3e(){const[e,t]=v.useState([]),[r,n]=v.useState(!0),[a,s]=v.useState(null),o=v.useRef(null),[l,c]=v.useState(!1),u=async()=>{n(!0);const h=Ht(At(ke,"invoicesCandies"),Ur("date","desc")),m=await jt(h),p=[];m.forEach(g=>{const x=g.data();p.push({id:g.id,date:x.date,number:x.number,description:x.description,status:x.status||"PENDIENTE",totalPackages:x.totalPackages||0,totalProvider:x.totalProvider||0,totalSale:x.totalSale||0,totalExpenses:x.totalExpenses||0,totalDebits:x.totalDebits||0,totalCredits:x.totalCredits||0,totalCommissionVendors:x.totalCommissionVendors||0,finalAmount:x.finalAmount||0,branchFactorPercent:x.branchFactorPercent||0,branchProfit:x.branchProfit||0,transactions:(x.transactions||[]).map(y=>({id:y.id,date:y.date,vendorId:y.vendorId||null,vendorName:y.vendorName||"Sin nombre",sellerEmail:y.sellerEmail||null,productId:y.productId,productName:y.productName||"Sin nombre",packages:Number(y.packages||0),providerPricePack:Number(y.providerPricePack||0),salePricePack:Number(y.salePricePack||0),totalProvider:Number(y.totalProvider||0),totalSale:Number(y.totalSale||0),commissionPercent:Number(y.commissionPercent||0),commissionAmount:Number(y.commissionAmount||0)})),expenses:(x.expenses||[]).map(y=>({id:y.id,description:y.description||"",date:y.date||null,amount:Number(y.amount||0)})),adjustments:(x.adjustments||[]).map(y=>({id:y.id,description:y.description||"",type:y.type||"DEBITO",amount:Number(y.amount||0)}))})}),t(p),n(!1)};v.useEffect(()=>{u()},[]);const d=async h=>{const m=h.status==="PAGADA"?"PENDIENTE":"PAGADA";await Lr(Mt(ke,"invoicesCandies",h.id),{status:m}),t(p=>p.map(g=>g.id===h.id?{...g,status:m}:g)),(a==null?void 0:a.id)===h.id&&s({...h,status:m})},A=async h=>{if(window.confirm(`Eliminar factura del ${h.date}?`))try{await fn(Mt(ke,"invoicesCandies",h.id)),t(m=>m.filter(p=>p.id!==h.id)),(a==null?void 0:a.id)===h.id&&s(null)}catch(m){console.error(m),alert("No se pudo eliminar la factura.")}},f=async()=>{if(!o.current||!a)return;const h=o.current,m=await If(h,{backgroundColor:"#ffffff",onclone:b=>{const _=b.body;_.style.background="#ffffff",_.querySelectorAll("*").forEach(T=>{const P=b.defaultView.getComputedStyle(T);P.boxShadow&&P.boxShadow!=="none"&&(T.style.boxShadow="none")})},scale:2}),p=m.toDataURL("image/png"),g=new Ar("p","mm","a4"),x=g.internal.pageSize.getWidth(),y=m.height*x/m.width;g.addImage(p,"PNG",0,0,x,y),g.save(`factura_candy_${a.number||a.date}.pdf`)};return i.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded shadow",children:[i.jsxs("div",{className:"flex items-center mb-4 gap-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Facturacin CandyShop"}),i.jsx("button",{className:"ml-auto bg-blue-600 text-white px-4 py-2 rounded-2xl hover:bg-blue-700 text-sm",onClick:()=>c(!0),children:"Crear factura Candy"})]}),l&&i.jsx(T3e,{onClose:()=>c(!1),onCreated:()=>{c(!1),u()}}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-4 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"N factura"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin total"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Sub total (sin gastos/ajustes)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Gastos"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Dbitos"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Crditos"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Estado"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Acciones"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):e.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin facturas"})}):e.map(h=>{const m=zj(h),p=E7(h);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.date}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.number||""}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:p}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:kn(m.commissionTotal)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:L2(m.totalPackages)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:kn(m.totalSale)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:kn(m.expenses)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:kn(m.debits)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:kn(m.credits)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:kn(m.finalAmount)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${h.status==="PAGADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:h.status})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",onClick:()=>s(h),children:"Ver"}),i.jsx("button",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",onClick:()=>d(h),children:h.status==="PAGADA"?"Marcar PENDIENTE":"Marcar PAGADA"}),i.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>A(h),children:"Eliminar"})]})})]},h.id)})})]})}),a&&i.jsxs("div",{ref:o,className:"bg-white p-4 rounded shadow-2xl",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsxs("h3",{className:"text-lg font-semibold",children:["Detalle ",a.date," ",a.number?` ${a.number}`:""]}),i.jsx("button",{className:"ml-auto px-3 py-1 border rounded",onClick:()=>s(null),children:"Cerrar"}),i.jsx("button",{onClick:f,className:"bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Imprimir PDF"})]}),(()=>{const h=zj(a),m=E7(a);return i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm mb-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Estado:"})," ",a.status]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Vendedor:"})," ",m]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Paquetes:"})," ",L2(h.totalPackages)]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total proveedor:"})," ",kn(h.totalProvider)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Sub total ventas:"})," ",kn(h.totalSale)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Ganancia bruta:"})," ",kn(h.grossProfit)]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Comisin vendedores:"})," ",kn(h.commissionTotal)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Gastos:"})," ",kn(h.expenses)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Dbitos:"})," ",kn(h.debits)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Crditos:"})," ",kn(h.credits)]})]})]})})(),i.jsx("h4",{className:"font-semibold mb-1",children:"Transacciones"}),i.jsx("div",{className:"overflow-x-auto mb-4",children:i.jsxs("table",{className:"min-w-full text-sm shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Producto"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio venta"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total proveedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total venta"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin venta"})]})}),i.jsx("tbody",{children:(a.transactions||[]).length>0?(a.transactions||[]).map((h,m)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.date}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.vendorName}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.productName}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:L2(h.packages)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:kn(h.providerPricePack)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:kn(h.salePricePack)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:kn(h.totalProvider)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:kn(h.totalSale)}),i.jsxs("td",{className:"p-2 border whitespace-nowrap",children:[kn(h.commissionAmount||0),h.commissionPercent?` (${h.commissionPercent.toFixed(2)}%)`:""]})]},m)):i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin transacciones"})})})]})}),i.jsx("h4",{className:"font-semibold mb-1",children:"Gastos"}),i.jsx("div",{className:"overflow-x-auto mb-4",children:i.jsxs("table",{className:"min-w-full text-sm shadow-xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descripcin"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"})]})}),i.jsx("tbody",{children:(a.expenses||[]).length>0?(a.expenses||[]).map((h,m)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.date||""}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.description||""}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:kn(h.amount)})]},m)):i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin gastos"})})})]})}),i.jsx("h4",{className:"font-semibold mb-1",children:"Cargos extras (Notas crdito/dbito)"}),i.jsx("div",{className:"overflow-x-auto mb-4",children:i.jsxs("table",{className:"min-w-full text-sm shadow-xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descripcin"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Tipo de cargo"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"})]})}),i.jsx("tbody",{children:(a.adjustments||[]).length>0?(a.adjustments||[]).map((h,m)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.description}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${h.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:h.type})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:kn(h.amount)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:a.date})]},m)):i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin cargos extras"})})})]})}),(()=>{const h=zj(a);return i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-2 justify-between",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:["Total paquetes: ",i.jsx("strong",{children:L2(h.totalPackages)})]}),i.jsxs("div",{children:["Total proveedor: ",i.jsx("strong",{children:kn(h.totalProvider)})]})]}),i.jsxs("div",{className:"space-y-1 text-center",children:[i.jsxs("div",{children:["Sub total ventas: ",i.jsx("strong",{children:kn(h.totalSale)})]}),i.jsxs("div",{children:["Ganancia bruta: ",i.jsx("strong",{children:kn(h.grossProfit)})]}),i.jsxs("div",{children:["Ganancia sucursal: ",i.jsx("strong",{children:kn(h.branchProfit)})]})]}),i.jsxs("div",{className:"space-y-1 text-right",children:[i.jsxs("div",{children:["Comisin vendedores:"," ",i.jsx("strong",{children:kn(h.commissionTotal)})]}),i.jsxs("div",{children:["Gastos: ",i.jsx("strong",{children:kn(h.expenses)})]}),i.jsxs("div",{children:["Dbitos: ",i.jsx("strong",{children:kn(h.debits)})]}),i.jsxs("div",{children:["Crditos: ",i.jsx("strong",{children:kn(h.credits)})]})]}),i.jsx("div",{className:"md:col-span-3 mt-3",children:i.jsxs("div",{className:"bg-blue-50 border border-blue-300 rounded-lg p-4 text-center",children:[i.jsx("span",{className:"block text-lg font-semibold text-gray-800",children:"Total (sub total  comisin  gastos  dbitos + crditos):"}),i.jsx("span",{className:"block text-2xl font-bold text-blue-700 mt-1",children:kn(h.finalAmount)})]})})]})})()]})]})}const Na=e=>Math.round((Number(e)||0)*100)/100,uh=e=>Math.round((Number(e)||0)*1e3)/1e3,Rs=e=>Number(e??0).toFixed(2),jd=e=>Number(e??0).toFixed(3),O3e=(e,t)=>{var f,h;const r=e.date??((f=e.timestamp)!=null&&f.toDate?ir(e.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=e.userEmail??"",a=e.vendorName||e.vendor||n||e.vendorId||"(sin vendedor)",s=e.type||"CONTADO",o=e.vendorId,l=Number(e.total??e.itemsTotal??e.amount??e.amountCharged??0)||0,c=Number(e.vendorCommissionAmount??0)||0;if(Array.isArray(e.items)&&e.items.length>0)return e.items.map((m,p)=>{const g=Number((m==null?void 0:m.packages)??(m==null?void 0:m.qty)??(m==null?void 0:m.quantity)??0),x=Number((m==null?void 0:m.lineFinal)??0)||Math.max(0,Number((m==null?void 0:m.unitPricePackage)||(m==null?void 0:m.unitPrice)||0)*g-Number((m==null?void 0:m.discount)||0));let y=0;return c>0&&l>0&&Number(x||0)>0&&(y=Na(c*Number(x||0)/l)),{id:`${t}#${p}`,productName:String((m==null?void 0:m.productName)??"(sin nombre)"),quantity:g,amount:Na(x),date:r,type:s,vendorId:o,userEmail:a,vendorCommissionAmount:y}});const u=Number(e.packagesTotal??e.quantity??0),d=Number(e.amount??e.amountCharged??e.total??0)||0,A=Na(Number(e.vendorCommissionAmount??0)||0);return[{id:t,productName:((h=String(e))==null?void 0:h.productName)??"(sin nombre)",quantity:u,amount:Na(d),date:r,type:s,vendorId:o,userEmail:a,vendorCommissionAmount:A}]};function D3e({role:e}){const t=!e||e==="admin",r="daily_closures_candies",n="sales_candies",a="sellers_candies",[s,o]=v.useState(ir(OW(new Date),"yyyy-MM-dd")),[l,c]=v.useState(ir(new Date,"yyyy-MM-dd")),[u,d]=v.useState(!0),[A,f]=v.useState([]),[h,m]=v.useState(null),[p,g]=v.useState(""),[x,y]=v.useState([]),[b,_]=v.useState("ALL"),[T,P]=v.useState({}),C=v.useRef(null);if(!t)return i.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Liquidaciones"}),i.jsx("p",{className:"text-sm text-red-600",children:"Acceso denegado: solo admin."})]});const S=async()=>{try{const F=await jt(At(ke,a)),V=[];F.forEach(D=>{const M=D.data();V.push({id:D.id,name:M.name||"",commissionPercent:Number(M.commissionPercent||0)})}),y(V)}catch(F){console.error("Error cargando sellers_candies",F)}},I=async()=>{const F=performance.now();try{d(!0);const V=Ht(At(ke,r),Xt("date",">=",s),Xt("date","<=",l)),D=await jt(V),M=performance.now();console.log(" getDocs ms:",(M-F).toFixed(1),"docs:",D.size);const G=[];D.forEach(ne=>G.push({id:ne.id,...ne.data()}));const O=performance.now();console.log(" parse+set ms:",(O-M).toFixed(1),"rows:",G.length),G.sort((ne,Q)=>ne.date<Q.date?1:ne.date>Q.date?-1:0),f(G),m(null);const K=new Set;G.forEach(ne=>{(ne.sales||[]).forEach(Q=>{const be=String((Q==null?void 0:Q.id)??"").split("#")[0].trim();be&&K.add(be)})});const ee=Array.from(K).filter(ne=>!T[ne]);if(ee.length>0){const ne={};for(const Q of ee)try{const be=await Qi(Mt(ke,n,Q));if(be.exists()){const Z=be.data();ne[Q]=O3e(Z,Q)}else ne[Q]=[]}catch(be){console.error("Error leyendo sale",Q,be),ne[Q]=[]}P(Q=>({...Q,...ne}))}}catch(V){console.error(V),g(" Error cargando liquidaciones.")}finally{d(!1)}};v.useEffect(()=>{S()},[]),v.useEffect(()=>{I()},[]);const L=async F=>{F.preventDefault(),await I()},E=v.useMemo(()=>{const F={};return x.forEach(V=>F[V.id]=V.name||V.id),F},[x]),j=F=>{const V=[];return(F.sales||[]).forEach(D=>{const M=String((D==null?void 0:D.id)??"").trim();if(!M)return;const G=M.split("#")[0],K=(T[G]||[]).find(ee=>ee.id===M);K?V.push(K):V.push({id:M,productName:String((D==null?void 0:D.productName)??"(sin nombre)"),quantity:Number((D==null?void 0:D.quantity)??0),amount:Na(Number((D==null?void 0:D.amount)??0)),date:String((D==null?void 0:D.date)??""),type:"CONTADO",vendorId:"",userEmail:String((D==null?void 0:D.userEmail)??"(sin vendedor)"),vendorCommissionAmount:0})}),V},R=F=>b==="ALL"?F:F.filter(V=>(V.vendorId||"")===b),W=v.useMemo(()=>A.map(F=>{const V=R(j(F));let D=0,M=0,G=0,O=0,K=0,ee=0;for(const ne of V){const Q=Number(ne.quantity||0),be=Number(ne.amount||0),Z=Number(ne.vendorCommissionAmount||0);ne.type==="CREDITO"?(M+=Q,O+=be,ee+=Z):(D+=Q,G+=be,K+=Z)}return{...F,_sales:V,_packsCash:uh(D),_packsCredit:uh(M),_amountCash:Na(G),_amountCredit:Na(O),_comCash:Na(K),_comCredit:Na(ee)}}),[A,T,b]),de=v.useMemo(()=>{let F=0,V=0,D=0,M=0,G=0,O=0;for(const K of W)F+=Number(K._packsCash||0),V+=Number(K._packsCredit||0),D+=Number(K._amountCash||0),M+=Number(K._amountCredit||0),G+=Number(K._comCash||0),O+=Number(K._comCredit||0);return{packsCash:uh(F),packsCredit:uh(V),totalSales:Na(D+M),amountCash:Na(D),amountCredit:Na(M),comCash:Na(G),comCredit:Na(O)}},[W]),te=v.useMemo(()=>{const F={},V={};for(const D of W){const M=D._sales||[];for(const G of M){const O=(G.vendorId||"").trim();if(!O)continue;const K=E[O]||G.userEmail||O,ee=Na(Number(G.vendorCommissionAmount||0));G.type==="CREDITO"?(V[O]||(V[O]={vendorId:O,name:K,total:0}),V[O].total=Na(V[O].total+ee)):(F[O]||(F[O]={vendorId:O,name:K,total:0}),F[O].total=Na(F[O].total+ee))}}return{cashRows:Object.values(F).filter(D=>D.total>0).sort((D,M)=>M.total-D.total),creditRows:Object.values(V).filter(D=>D.total>0).sort((D,M)=>M.total-D.total)}},[W,E]),le=v.useMemo(()=>x.map(F=>({id:F.id,label:F.name||F.id})).sort((F,V)=>F.label.localeCompare(V.label)),[x]),ce=v.useMemo(()=>h&&W.find(F=>F.id===h.id)||null,[h,W]),J=v.useMemo(()=>ce?ce._sales||[]:[],[ce]),me=v.useMemo(()=>{let F=0,V=0,D=0,M=0;for(const G of J)G.type==="CREDITO"?(V+=Number(G.quantity||0),M+=Number(G.amount||0)):(F+=Number(G.quantity||0),D+=Number(G.amount||0));return{packsCash:uh(F),packsCredit:uh(V),amountCash:Na(D),amountCredit:Na(M)}},[J]),Ee=v.useMemo(()=>{const F={};for(const V of J){const D=V.productName||"(sin nombre)";F[D]||(F[D]={productName:D,packsCash:0,packsCredit:0,amountCash:0,amountCredit:0,comCash:0,comCredit:0});const M=Number(V.quantity||0),G=Number(V.amount||0),O=Number(V.vendorCommissionAmount||0);V.type==="CREDITO"?(F[D].packsCredit=uh(F[D].packsCredit+M),F[D].amountCredit=Na(F[D].amountCredit+G),F[D].comCredit=Na(F[D].comCredit+O)):(F[D].packsCash=uh(F[D].packsCash+M),F[D].amountCash=Na(F[D].amountCash+G),F[D].comCash=Na(F[D].comCash+O))}return Object.values(F)},[J]),k=async()=>{if(!C.current||!ce)return;const F=C.current;F.classList.add("force-pdf-colors");try{const D=(await If(F,{backgroundColor:"#ffffff"})).toDataURL("image/png"),M=new Ar;M.addImage(D,"PNG",10,10,190,0),M.save(`liquidacion_${ce.date}.pdf`)}finally{F.classList.remove("force-pdf-colors")}};return i.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Liquidaciones"}),i.jsxs("form",{onSubmit:L,className:"flex flex-wrap items-end gap-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:s,onChange:F=>o(F.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:l,onChange:F=>c(F.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Vendedor"}),i.jsxs("select",{className:"border rounded px-2 py-1 min-w-[240px]",value:b,onChange:F=>_(F.target.value),children:[i.jsx("option",{value:"ALL",children:"Todos"}),le.map(F=>i.jsx("option",{value:F.id,children:F.label},F.id))]})]}),i.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Aplicar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3 mb-6",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),i.jsx("div",{className:"text-2xl font-bold",children:jd(de.packsCash)})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),i.jsx("div",{className:"text-2xl font-bold",children:jd(de.packsCredit)})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas totales"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",Rs(de.totalSales)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",Rs(de.amountCash)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",Rs(de.amountCredit)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",Rs(de.comCash)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",Rs(de.comCredit)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin cash)"}),te.cashRows.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:te.cashRows.map(F=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:F.name}),i.jsxs("strong",{className:"ml-2",children:["C$",Rs(F.total)]})]},F.vendorId))})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin crdito)"}),te.creditRows.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:te.creditRows.map(F=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:F.name}),i.jsxs("strong",{className:"ml-2",children:["C$",Rs(F.total)]})]},F.vendorId))})]})]}),u?i.jsx("p",{children:"Cargando..."}):W.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin cierres en el rango seleccionado."}):i.jsxs("table",{className:"min-w-full text-sm mb-6 shadow-lg p-4 bg-white border-gray-100",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Total paquetes Cash"}),i.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),i.jsx("th",{className:"border p-2",children:"Total Ventas cash"}),i.jsx("th",{className:"border p-2",children:"Total Ventas crdito"}),i.jsx("th",{className:"border p-2",children:"Comisin cash"}),i.jsx("th",{className:"border p-2",children:"Comisin crdito"}),i.jsx("th",{className:"border p-2",children:"Opciones"})]})}),i.jsx("tbody",{children:W.map(F=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:F.date}),i.jsx("td",{className:"border p-1",children:jd(F._packsCash)}),i.jsx("td",{className:"border p-1",children:jd(F._packsCredit)}),i.jsxs("td",{className:"border p-1",children:["C$",Rs(F._amountCash)]}),i.jsxs("td",{className:"border p-1",children:["C$",Rs(F._amountCredit)]}),i.jsxs("td",{className:"border p-1",children:["C$",Rs(F._comCash)]}),i.jsxs("td",{className:"border p-1",children:["C$",Rs(F._comCredit)]}),i.jsx("td",{className:"border p-1",children:i.jsx("div",{className:"flex items-center gap-2 justify-center",children:i.jsx("button",{className:"text-xs bg-gray-800 text-white px-2 py-1 rounded hover:bg-black",onClick:()=>m(F),children:"Ver detalle"})})})]},F.id))})]}),ce&&i.jsxs("div",{className:"mt-6 rounded-2xl shadow-lg p-4 bg-white border-solid border-2 border-gray-100",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2 ",children:[i.jsxs("h2",{className:"text-xl font-semibold",children:["Detalle ",ce.date]}),i.jsx("button",{onClick:()=>m(null),className:"text-sm px-2 py-1 border rounded",children:"Cerrar"}),i.jsx("button",{onClick:k,className:"ml-auto bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Descargar PDF"})]}),i.jsxs("div",{ref:C,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[i.jsxs("div",{children:["Total Ventas cash:"," ",i.jsxs("strong",{children:["C$",Rs(me.amountCash)]})]}),i.jsxs("div",{children:["Total Ventas crdito:"," ",i.jsxs("strong",{children:["C$",Rs(me.amountCredit)]})]}),i.jsxs("div",{children:["Total paquetes cash:"," ",i.jsx("strong",{children:jd(me.packsCash)})]}),i.jsxs("div",{children:["Total paquetes crdito:"," ",i.jsx("strong",{children:jd(me.packsCredit)})]})]}),i.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),J.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin ventas en este cierre."}):i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Paquetes"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Comisin"}),i.jsx("th",{className:"border p-2",children:"Fecha venta"})]})}),i.jsx("tbody",{children:J.map((F,V)=>{const D=F.vendorId&&E[F.vendorId]?E[F.vendorId]:F.userEmail,M=Na(Number(F.vendorCommissionAmount||0));return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:D}),i.jsx("td",{className:"border p-1",children:F.productName}),i.jsx("td",{className:"border p-1",children:F.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"border p-1",children:jd(F.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",Rs(F.amount)]}),i.jsx("td",{className:"border p-1",children:M>0?`C$${Rs(M)}`:""}),i.jsx("td",{className:"border p-1",children:F.date||""})]},V)})})]}),i.jsx("h3",{className:"font-semibold",children:"Consolidado por producto"}),Ee.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin datos para consolidar."}):i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Total paquetes cash"}),i.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),i.jsx("th",{className:"border p-2",children:"Ventas cash"}),i.jsx("th",{className:"border p-2",children:"Ventas crdito"}),i.jsx("th",{className:"border p-2",children:"Comisin cash"}),i.jsx("th",{className:"border p-2",children:"Comisin crdito"})]})}),i.jsx("tbody",{children:Ee.map((F,V)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:F.productName}),i.jsx("td",{className:"border p-1",children:jd(F.packsCash)}),i.jsx("td",{className:"border p-1",children:jd(F.packsCredit)}),i.jsxs("td",{className:"border p-1",children:["C$",Rs(F.amountCash)]}),i.jsxs("td",{className:"border p-1",children:["C$",Rs(F.amountCredit)]}),i.jsxs("td",{className:"border p-1",children:["C$",Rs(F.comCash)]}),i.jsxs("td",{className:"border p-1",children:["C$",Rs(F.comCredit)]})]},V))})]})]})]}),p&&i.jsx("p",{className:"mt-3 text-sm",children:p})]})}const cr=e=>Math.round((Number(e)||0)*100)/100,Ni=e=>Math.round((Number(e)||0)*1e3)/1e3,tr=e=>Number(e??0).toFixed(2),La=e=>Number(e??0).toFixed(3),u_=e=>{const t=String(e||"").toUpperCase().trim();return t==="RIVAS"?"RIVAS":t==="SAN_JORGE"||t==="SANJORGE"||t==="SJ"?"SAN_JORGE":t==="ISLA"||t==="OMETEPE"?"ISLA":""},or=e=>{const t=Number(e);return Number.isFinite(t)?t:0},R3e=e=>Math.max(0,Math.min(1,e));function S7({title:e,series:t,valuePrefix:r="C$"}){const u=t.map(b=>Number(b.value||0)),d=u.length?Math.min(...u):0,A=u.length?Math.max(...u):0,f=A-d||1,h=840,m=204,p=t.map((b,_)=>{const T=44+(t.length<=1?h/2:_/(t.length-1)*h),P=18+(1-(Number(b.value||0)-d)/f)*m;return{x:T,y:P,...b}}),g=p.map((b,_)=>`${_===0?"M":"L"} ${b.x.toFixed(2)} ${b.y.toFixed(2)}`).join(" "),x=p[p.length-1],y=x?x.value:0;return i.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[i.jsx("div",{className:"font-semibold text-sm sm:text-base",children:e}),i.jsxs("div",{className:"text-xs text-gray-600 whitespace-nowrap",children:["ltimo: ",i.jsx("strong",{children:r+tr(y)})]})]}),i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("svg",{viewBox:"0 0 900 260",className:"min-w-[720px] w-full h-auto",role:"img","aria-label":e,children:[[0,1,2,3].map(b=>{const _=18+b/3*m;return i.jsx("line",{x1:44,y1:_,x2:884,y2:_,stroke:"#e5e7eb",strokeWidth:"1"},b)}),i.jsxs("text",{x:8,y:28,fontSize:"12",fill:"#6b7280",children:[r,tr(A)]}),i.jsxs("text",{x:8,y:18+m,fontSize:"12",fill:"#6b7280",children:[r,tr(d)]}),i.jsx("path",{d:g,fill:"none",stroke:"#111827",strokeWidth:"2.5"}),p.map((b,_)=>i.jsx("circle",{cx:b.x,cy:b.y,r:"3.5",fill:"#111827"},_)),t.length>0&&i.jsxs(i.Fragment,{children:[i.jsx("text",{x:44,y:246,fontSize:"12",fill:"#6b7280",textAnchor:"start",children:t[0].label}),i.jsx("text",{x:884,y:246,fontSize:"12",fill:"#6b7280",textAnchor:"end",children:t[t.length-1].label})]})]})})]})}function L3e({title:e,items:t}){const r=t.reduce((A,f)=>A+Number(f.value||0),0),n=240,a=86,s=120,o=120,l=r>0?r:1;let c=0;const u=["#111827","#374151","#6b7280","#9ca3af"],d=t.map((A,f)=>{const h=Math.max(0,Number(A.value||0)),m=c/l,p=h/l;c+=h;const g=m+p,x=m*Math.PI*2-Math.PI/2,y=g*Math.PI*2-Math.PI/2,b=s+a*Math.cos(x),_=o+a*Math.sin(x),T=s+a*Math.cos(y),P=o+a*Math.sin(y),C=p>.5?1:0;return{d:[`M ${s} ${o}`,`L ${b.toFixed(2)} ${_.toFixed(2)}`,`A ${a} ${a} 0 ${C} 1 ${T.toFixed(2)} ${P.toFixed(2)}`,"Z"].join(" "),fill:u[f%u.length],...A,frac:p}});return i.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[i.jsx("div",{className:"font-semibold text-sm sm:text-base mb-2",children:e}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-center",children:[i.jsx("div",{className:"w-full md:w-auto overflow-x-auto",children:i.jsxs("svg",{viewBox:`0 0 ${n} ${n}`,className:"min-w-[240px] w-[260px] h-auto",role:"img","aria-label":e,children:[d.map((A,f)=>i.jsx("path",{d:A.d,fill:A.fill},f)),i.jsx("circle",{cx:s,cy:o,r:"48",fill:"#ffffff"}),i.jsx("text",{x:s,y:o-4,textAnchor:"middle",fontSize:"12",fill:"#6b7280",children:"Total"}),i.jsxs("text",{x:s,y:o+16,textAnchor:"middle",fontSize:"14",fill:"#111827",fontWeight:"700",children:["C$",tr(r)]})]})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:t.map((A,f)=>{const h=Number(A.value||0),m=R3e(h/(r||1))*100;return i.jsxs("div",{className:"border rounded-xl p-2 bg-gray-50",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("div",{className:"text-sm font-semibold truncate",children:A.label}),i.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",tr(h)]})]}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[m.toFixed(1),"%"]}),i.jsx("div",{className:"h-2 bg-white border rounded-full mt-2 overflow-hidden",children:i.jsx("div",{className:"h-full",style:{width:`${m}%`,background:u[f%u.length]}})})]},A.label)})}),i.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"*Distribucin basada en ventas del perodo con los filtros actuales."})]})]})]})}const M3e=(e,t)=>{var g;const r=e.date??((g=e.timestamp)!=null&&g.toDate?ir(e.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=String(e.processedDate??e.closureDate??"").trim(),a=e.status??"FLOTANTE",s=e.type||"CONTADO",o=String(e.vendorId??"").trim(),l=String(e.vendorName??"").trim()||String(e.userEmail??"").trim()||o||"(sin vendedor)",c=String(e.customerId??"").trim(),u=String(e.customerName??"").trim()||String(e.clientName??"").trim()||"",d=Number(e.total??e.itemsTotal??e.amount??e.amountCharged??0)||0,A=Number(e.vendorCommissionAmount??0)||0,f=u_(e.branch??e.vendorBranch);if(Array.isArray(e.items)&&e.items.length>0)return e.items.map((x,y)=>{const b=Number((x==null?void 0:x.packages)??0)||0,_=Number((x==null?void 0:x.total)??0)||Math.max(0,Number((x==null?void 0:x.unitPricePackage)||0)*b-Number((x==null?void 0:x.discount)||0)),T=u_(x==null?void 0:x.branch)||f;let P=0;return A>0&&d>0&&_>0&&(P=cr(A*_/d)),{id:`${t}#${y}`,docId:t,productId:String((x==null?void 0:x.productId)??""),productName:String((x==null?void 0:x.productName)??"(sin nombre)"),date:r,processedDate:n,status:a,type:s,vendorId:o,vendorName:l,customerId:c,customerName:u,branch:T||"",packages:b,amount:cr(_),commission:cr(P)}});const h=Number(e.packagesTotal??0)||0,m=Number(e.total??e.amount??e.amountCharged??0)||0,p=cr(Number(e.vendorCommissionAmount??0)||0);return[{id:`${t}#0`,docId:t,productId:"",productName:"(sin nombre)",date:r,processedDate:n,status:a,type:s,vendorId:o,vendorName:l,customerId:c,customerName:u,branch:f||"",packages:h,amount:cr(m),commission:cr(p)}]};function U3e({role:e}){var hr;const t=!e||e==="admin",r=ir(new Date,"yyyy-MM-dd"),[n,a]=v.useState(r),[s,o]=v.useState(r),[l,c]=v.useState("TODAS"),[u,d]=v.useState("AMBAS"),[A,f]=v.useState("ALL"),[h,m]=v.useState("ALL"),[p,g]=v.useState(""),[x,y]=v.useState(""),[b,_]=v.useState(""),[T,P]=v.useState(""),[C,S]=v.useState("DIA"),[I,L]=v.useState(!0),[E,j]=v.useState(""),[R,W]=v.useState([]),[de,te]=v.useState([]),[le,ce]=v.useState([]),[J,me]=v.useState([]),[Ee,k]=v.useState([]),[F,V]=v.useState([]),[D,M]=v.useState([]),[G,O]=v.useState([]),[K,ee]=v.useState([]),[ne,Q]=v.useState(""),[be,Z]=v.useState(""),z=v.useRef(null),[X,ve]=v.useState([]),[re,Ne]=v.useState("DETALLE"),Me=v.useMemo(()=>{const _e={};return Ee.forEach(dt=>_e[dt.id]=String(dt.name||"").trim()),_e},[Ee]),Ve=v.useMemo(()=>{const _e={};return de.forEach(dt=>_e[dt.id]=dt),_e},[de]),nt=_e=>{const dt=_e.customerId?Me[_e.customerId]:"";return(_e.customerName||dt||"").trim()||(_e.customerId?Me[_e.customerId]||_e.customerId:"")||""};v.useEffect(()=>{if(!t)return;(async()=>{try{const dt=await jt(At(ke,"inventory_candies")),gt=[];dt.forEach(Ce=>gt.push({id:Ce.id,...Ce.data()})),ve(gt)}catch(dt){console.error("inventory_candies all error:",dt),ve([])}})()},[t]),v.useEffect(()=>{(async()=>{try{const dt=await jt(At(ke,"sellers_candies")),gt=[];dt.forEach(et=>{const yt=et.data();gt.push({id:et.id,name:String(yt.name||"").trim(),commissionPercent:Number(yt.commissionPercent||0),branch:yt.branch||""})});const Ce=new Map;gt.forEach(et=>Ce.set(et.id,et)),te(Array.from(Ce.values()).sort((et,yt)=>et.name.localeCompare(yt.name)))}catch(dt){console.error(dt)}})()},[]),v.useEffect(()=>{if(!t||!n||!s)return;L(!0),j("");const _e=Ht(At(ke,"sales_candies"),Xt("date",">=",n),Xt("date","<=",s),Ur("date","asc")),dt=uf(_e,gt=>{const Ce=[];gt.forEach(et=>Ce.push(...M3e(et.data(),et.id))),W(Ce),L(!1)},gt=>{console.error("sales_candies periodo error:",gt),W([]),L(!1),j(" Error cargando ventas del perodo (revis ndices si aplica).")});return()=>dt()},[t,n,s]),v.useEffect(()=>{if(!t)return;(async()=>{try{const dt=Ht(At(ke,"candy_main_orders"),Xt("date",">=",n),Xt("date","<=",s)),gt=await jt(dt),Ce=[];gt.forEach(et=>Ce.push({id:et.id,...et.data()})),ce(Ce)}catch(dt){console.error("candy_main_orders error:",dt),ce([])}})()},[t,n,s]),v.useEffect(()=>{if(!t)return;(async()=>{try{const dt=Ht(At(ke,"inventory_candies_sellers"),Xt("date",">=",n),Xt("date","<=",s)),gt=await jt(dt),Ce=[];gt.forEach(et=>Ce.push({id:et.id,...et.data()})),me(Ce)}catch(dt){console.error("inventory_candies_sellers error:",dt),me([])}})()},[t,n,s]),v.useEffect(()=>{if(!t)return;(async()=>{try{const dt=Ht(At(ke,"expenses_candies"),Xt("date",">=",n),Xt("date","<=",s),Ur("date","asc")),gt=await jt(dt),Ce=[];gt.forEach(et=>Ce.push({id:et.id,...et.data()})),M(Ce)}catch(dt){console.warn("expenses_candies sin ndice, usando fallback:",dt);try{const gt=await jt(At(ke,"expenses_candies")),Ce=[];gt.forEach(et=>Ce.push({id:et.id,...et.data()})),M(Ce.filter(et=>String(et.date||"")>=n&&String(et.date||"")<=s))}catch(gt){console.error(gt),M([])}}})()},[t,n,s]),v.useEffect(()=>{if(!t)return;(async()=>{try{const dt=await jt(At(ke,"inventory_candies")),gt=[];dt.forEach(Ce=>gt.push({id:Ce.id,...Ce.data()})),O(gt)}catch(dt){console.error("inventory_candies global error:",dt),O([])}})()},[t]),v.useEffect(()=>{if(!t)return;(async()=>{try{const dt=await jt(At(ke,"inventory_candies_sellers")),gt=[];dt.forEach(Ce=>gt.push({id:Ce.id,...Ce.data()})),ee(gt)}catch(dt){console.error("inventory_candies_sellers global error:",dt),ee([])}})()},[t]),v.useEffect(()=>{if(!t)return;const _e=Ht(At(ke,"customers_candies")),dt=uf(_e,gt=>{const Ce=[];gt.forEach(et=>{var yt;return Ce.push({id:et.id,name:String(((yt=et.data())==null?void 0:yt.name)||"").trim()})}),k(Ce)},gt=>{console.error("customers_candies snapshot error:",gt),k([])});return()=>dt()},[t]),v.useEffect(()=>{if(!t)return;(async()=>{try{const dt=Ht(At(ke,"ar_movements"),Xt("date","<=",s),Ur("date","asc")),gt=await jt(dt),Ce=[];gt.forEach(et=>Ce.push({id:et.id,...et.data()})),V(Ce)}catch(dt){console.warn("ar_movements sin ndice, usando fallback:",dt);try{const gt=await jt(At(ke,"ar_movements")),Ce=[];gt.forEach(et=>Ce.push({id:et.id,...et.data()})),V(Ce.filter(et=>String(et.date||"")<=s))}catch(gt){console.error(gt),V([])}}})()},[t,s]);const st=v.useMemo(()=>{let _e=[...R];if(l!=="TODAS"&&(_e=_e.filter(Ce=>Ce.status===l)),u==="CASH"&&(_e=_e.filter(Ce=>Ce.type==="CONTADO")),u==="CREDITO"&&(_e=_e.filter(Ce=>Ce.type==="CREDITO")),A!=="ALL"&&(_e=_e.filter(Ce=>(Ce.vendorId||"")===A)),h!=="ALL"&&(_e=_e.filter(Ce=>Ce.branch===h)),p.trim()){const Ce=p.trim().toLowerCase();_e=_e.filter(et=>(et.productName||"").toLowerCase().includes(Ce))}if(x.trim()){const Ce=x.trim().toLowerCase();_e=_e.filter(et=>(nt(et)||"").toLowerCase().includes(Ce))}const dt=b.trim()?Number(b):null,gt=T.trim()?Number(T):null;return dt!==null&&!Number.isNaN(dt)&&(_e=_e.filter(Ce=>(Ce.amount||0)>=dt)),gt!==null&&!Number.isNaN(gt)&&(_e=_e.filter(Ce=>(Ce.amount||0)<=gt)),_e},[R,l,u,A,h,p,x,b,T,Me]),lt=v.useMemo(()=>{let _e=0,dt=0,gt=0,Ce=0,et=0,yt=0;for(const Lt of st){const qt=or(Lt.packages),wt=or(Lt.amount),ie=or(Lt.commission);Lt.type==="CREDITO"?(dt+=qt,Ce+=wt,yt+=ie):(_e+=qt,gt+=wt,et+=ie)}const Pt=cr(gt+Ce);return{packsCash:Ni(_e),packsCredit:Ni(dt),salesCash:cr(gt),salesCredit:cr(Ce),salesTotal:Pt,commCash:cr(et),commCredit:cr(yt),commTotal:cr(et+yt)}},[st]),bt=v.useMemo(()=>{let _e=0,dt=0,gt=0,Ce=0,et=0,yt=0;for(const Pt of le){const Lt=Array.isArray(Pt.items)?Pt.items:[];for(const qt of Lt)_e+=or(qt.totalRivas),dt+=or(qt.totalSanJorge),gt+=or(qt.totalIsla),Ce+=or(qt.gainRivas),et+=or(qt.gainSanJorge),yt+=or(qt.gainIsla)}return{expectedRivas:cr(_e),expectedSanJorge:cr(dt),expectedIsla:cr(gt),grossRivas:cr(Ce),grossSanJorge:cr(et),grossIsla:cr(yt),grossTotal:cr(Ce+et+yt),expectedTotal:cr(_e+dt+gt)}},[le]),ot=v.useMemo(()=>{const _e={RIVAS:{sales:0,packages:0},SAN_JORGE:{sales:0,packages:0},ISLA:{sales:0,packages:0}};for(const dt of st){const gt=dt.branch;gt&&(_e[gt].sales+=or(dt.amount),_e[gt].packages+=or(dt.packages))}return{RIVAS:{sales:cr(_e.RIVAS.sales),packages:Ni(_e.RIVAS.packages)},SAN_JORGE:{sales:cr(_e.SAN_JORGE.sales),packages:Ni(_e.SAN_JORGE.packages)},ISLA:{sales:cr(_e.ISLA.sales),packages:Ni(_e.ISLA.packages)}}},[st]),Le=v.useMemo(()=>({RIVAS:cr(ot.RIVAS.sales-bt.expectedRivas),SAN_JORGE:cr(ot.SAN_JORGE.sales-bt.expectedSanJorge),ISLA:cr(ot.ISLA.sales-bt.expectedIsla)}),[ot,bt]),Ze=v.useMemo(()=>{const _e={},dt={};for(const et of st){const yt=(et.vendorId||"").trim();if(!yt)continue;const Pt=de.find(wt=>wt.id===yt),Lt=(Pt==null?void 0:Pt.name)||et.vendorName||"(sin vendedor)",qt=or(et.commission);et.type==="CREDITO"?(dt[yt]||(dt[yt]={vendorId:yt,name:Lt,total:0}),dt[yt].total=cr(dt[yt].total+qt)):(_e[yt]||(_e[yt]={vendorId:yt,name:Lt,total:0}),_e[yt].total=cr(_e[yt].total+qt))}const gt=Object.values(_e).sort((et,yt)=>yt.total-et.total),Ce=Object.values(dt).sort((et,yt)=>yt.total-et.total);return{cashArr:gt,creditArr:Ce}},[st,de]),ye=v.useMemo(()=>{const _e=(Ae,Be)=>Ae.reduce((Fe,ae)=>Fe+Number((ae==null?void 0:ae[Be])??0),0),dt=Ae=>{const Be=Number(Ae);return Number.isFinite(Be)?Math.floor(Be):0},gt=Ae=>{const Be=Number((Ae==null?void 0:Ae.totalPackages)??0);if(Be>0)return Be;const Fe=Array.isArray(Ae==null?void 0:Ae.items)?Ae.items:[];return _e(Fe,"packages")};let Ce=0,et=0;for(const Ae of le){const Be=Array.isArray(Ae.items)?Ae.items:[];if(Be.length)for(const Fe of Be)Ce+=Number((Fe==null?void 0:Fe.subtotal)??0);else Ce+=Number(Ae.subtotal??0);et+=gt(Ae)}let yt=0,Pt=0,Lt=0;const qt=Ae=>{const Be=Number(Ae==null?void 0:Ae.remainingPackages);if(Number.isFinite(Be)&&Be>0)return Math.floor(Be);const Fe=Math.max(1,dt((Ae==null?void 0:Ae.unitsPerPackage)??1)),ae=dt((Ae==null?void 0:Ae.remainingUnits)??(Ae==null?void 0:Ae.remaining)??0);return ae>0?Math.max(0,Math.floor(ae/Fe)):0};for(const Ae of J)yt+=Number(Ae.subtotal??0),Pt+=Number(Ae.packages??0),Lt+=qt(Ae);const wt=new Set(le.filter(Ae=>String(Ae.date||"")>=n&&String(Ae.date||"")<=s).map(Ae=>Ae.id));let ie=0;for(const Ae of X){const Be=String(Ae.orderId||"").trim();Be&&wt.has(Be)&&(ie+=Number(Ae.remainingPackages??0))}const se=G.reduce((Ae,Be)=>Ae+or(Be.remainingPackages),0),he=K.reduce((Ae,Be)=>Ae+or(Be.remainingPackages),0);return{providerTotalMaster:cr(Ce),providerTotalVendor:cr(yt),orderedPacksMaster:Ni(et),remainingPacksMaster:Ni(ie),orderedPacksVendor:Ni(Pt),remainingPacksVendor:Ni(Lt),globalRemainingMaster:Ni(se),globalRemainingVendor:Ni(he)}},[le,J,X,n,s,G,K]),xe=v.useMemo(()=>{const _e={};let dt=0;for(const gt of D){const Ce=String(gt.date||"").trim();if(!Ce)continue;const et=Math.max(0,or(gt.amount));dt+=et,_e[Ce]=cr((_e[Ce]||0)+et)}return{total:cr(dt),byDay:_e}},[D]),ue=v.useMemo(()=>{let _e=0;for(const dt of le){const gt=Array.isArray(dt.items)?dt.items:[];if(gt.length)for(const Ce of gt)_e+=or(Ce==null?void 0:Ce.subtotal);else _e+=or(dt.subtotal)}return cr(_e)},[le]),Ge=v.useMemo(()=>{let _e=0,dt=0;for(const Ce of J){const et=String(Ce.sellerId||"").trim(),yt=et?Ve[et]:void 0,Pt=u_(yt==null?void 0:yt.branch)||"ISLA",Lt=or(Ce.totalVendor)||or(Pt==="ISLA"?Ce.totalIsla:Pt==="RIVAS"?Ce.totalRivas:Ce.totalSanJorge);_e+=Lt,Pt==="ISLA"&&(dt+=Lt)}const gt=cr(or(bt.expectedIsla)-dt);return{dispersedTotal:cr(_e),dispersedIsla:cr(dt),totalExistenteIsla:gt}},[J,Ve,bt.expectedIsla]),Je=v.useMemo(()=>{var Lt,qt;const _e=wt=>{const ie=Math.max(1,Math.floor(or(wt.unitsPerPackage||1))),se=or(wt.totalUnits)>0?or(wt.totalUnits):or(wt.packages)*ie;let he=0;or(wt.remainingUnits)>0?he=or(wt.remainingUnits):or(wt.remainingPackages)>0?he=or(wt.remainingPackages)*ie:he=0;const Ae=Math.max(0,se-he);return{orderedUnits:se,remainingUnits:he,soldUnits:Ae,upp:ie}},dt=wt=>{const ie=Ve[wt];return u_(ie==null?void 0:ie.branch)},gt=(wt,ie)=>{const se=or(wt.totalVendor)||(ie==="ISLA"?or(wt.totalIsla):ie==="RIVAS"?or(wt.totalRivas):ie==="SAN_JORGE"?or(wt.totalSanJorge):0);if(se>0)return se;const he=or(wt.unitPriceVendor);if(he>0){const{orderedUnits:Ae}=_e(wt);return he*Ae}return 0},Ce=(wt,ie)=>{const se=or(wt.unitPriceVendor);if(se>0)return se;const he=gt(wt,ie),{orderedUnits:Ae}=_e(wt);return he>0&&Ae>0?he/Ae:0},et=new Map;for(const wt of J){const ie=String(wt.orderId||"").trim(),se=ie||`DOC:${wt.id}`,he=String(wt.sellerId||"").trim(),Ae=String(wt.sellerName||"").trim()||he&&((Lt=Ve[he])==null?void 0:Lt.name)||""||"(sin vendedor)",Be=String(wt.date||"").trim(),Fe=he?dt(he):"",{orderedUnits:ae,remainingUnits:Oe,soldUnits:pe}=_e(wt),De=gt(wt,Fe),Se=Ce(wt,Fe),Ye=Se>0?Se*pe:ae>0?De*pe/ae:0,We=Se>0?Se*Oe:ae>0?De*Oe/ae:0;et.has(se)||et.set(se,{orderKey:se,orderId:ie||se,date:Be,sellerId:he,sellerName:Ae,branch:Fe,totalOrden:0,vendido:0,restante:0,comision:0,totalEsperado:0,lines:[]});const Xe=et.get(se);Xe.lines.push({...wt,orderedUnits:ae,soldUnits:pe,remainingUnits:Oe,lineTotal:cr(De),lineSoldValue:cr(Ye),lineRemainingValue:cr(We)}),Xe.totalOrden+=De,Xe.vendido+=Ye,Xe.restante+=We}for(const wt of et.values()){const ie=wt.sellerId?or((qt=Ve[wt.sellerId])==null?void 0:qt.commissionPercent):0;wt.comision=cr(wt.totalOrden*ie/100),wt.totalEsperado=cr(wt.totalOrden-wt.comision),wt.totalOrden=cr(wt.totalOrden),wt.vendido=cr(wt.vendido),wt.restante=cr(wt.restante)}const yt=Array.from(et.values()).sort((wt,ie)=>wt.date&&ie.date?wt.date<ie.date?1:-1:ie.totalOrden-wt.totalOrden),Pt=yt.reduce((wt,ie)=>(wt.totalOrden+=or(ie.totalOrden),wt.vendido+=or(ie.vendido),wt.restante+=or(ie.restante),wt.comision+=or(ie.comision),wt.totalEsperado+=or(ie.totalEsperado),wt),{totalOrden:0,vendido:0,restante:0,comision:0,totalEsperado:0});return{global:{totalOrden:cr(Pt.totalOrden),vendido:cr(Pt.vendido),restante:cr(Pt.restante),comision:cr(Pt.comision),totalEsperado:cr(Pt.totalEsperado)},orders:yt}},[J,Ve]),ht=v.useMemo(()=>{if(!be)return null;const _e=Je.orders.find(Ce=>Ce.orderKey===be);if(!_e)return null;const dt={};for(const Ce of _e.lines){const et=String(Ce.productName||"(sin nombre)");dt[et]||(dt[et]={productName:et,asociados:0,vendidos:0,restantes:0}),dt[et].asociados+=or(Ce.orderedUnits),dt[et].vendidos+=or(Ce.soldUnits),dt[et].restantes+=or(Ce.remainingUnits)}const gt=Object.values(dt).map(Ce=>({...Ce,asociados:Math.floor(Ce.asociados),vendidos:Math.floor(Ce.vendidos),restantes:Math.floor(Ce.restantes)})).sort((Ce,et)=>et.asociados-Ce.asociados);return{..._e,products:gt}},[be,Je.orders]),Ue=v.useMemo(()=>{const _e=G.reduce((gt,Ce)=>gt+or(Ce.remainingPackages),0),dt=K.reduce((gt,Ce)=>gt+or(Ce.remainingPackages),0);return{masterRemainingPackages:Ni(_e),vendorRemainingPackages:Ni(dt)}},[G,K]),rt=v.useMemo(()=>{const _e=new Map,dt=Ce=>C==="DIA"?{key:Ce.date,label:Ce.date}:C==="VENDEDOR"?{key:Ce.vendorId||"",label:Ce.vendorName||""}:C==="PRODUCTO"?{key:Ce.productName||"",label:Ce.productName||""}:{key:Ce.branch||"",label:Ce.branch||""};for(const Ce of st){const{key:et,label:yt}=dt(Ce);_e.has(et)||_e.set(et,{key:et,label:yt,packsCash:0,packsCredit:0,salesCash:0,salesCredit:0,commCash:0,commCredit:0,rows:[]});const Pt=_e.get(et);Pt.rows.push(Ce),Ce.type==="CREDITO"?(Pt.packsCredit+=or(Ce.packages),Pt.salesCredit+=or(Ce.amount),Pt.commCredit+=or(Ce.commission)):(Pt.packsCash+=or(Ce.packages),Pt.salesCash+=or(Ce.amount),Pt.commCash+=or(Ce.commission))}const gt=Array.from(_e.values()).map(Ce=>({...Ce,packsCash:Ni(Ce.packsCash),packsCredit:Ni(Ce.packsCredit),salesCash:cr(Ce.salesCash),salesCredit:cr(Ce.salesCredit),commCash:cr(Ce.commCash),commCredit:cr(Ce.commCredit)}));return C==="DIA"?gt.sort((Ce,et)=>Ce.key<et.key?1:-1):gt.sort((Ce,et)=>et.salesCash+et.salesCredit-(Ce.salesCash+Ce.salesCredit)),gt},[st,C]),Qe=v.useMemo(()=>{if(!ne)return[];const _e=rt.find(dt=>dt.key===ne);return(_e==null?void 0:_e.rows)||[]},[ne,rt]),Pe=v.useMemo(()=>{const _e={};for(const dt of Qe){const gt=dt.productName||"(sin nombre)";_e[gt]||(_e[gt]={productName:gt,packsCash:0,packsCredit:0,salesCash:0,salesCredit:0,commCash:0,commCredit:0}),dt.type==="CREDITO"?(_e[gt].packsCredit+=or(dt.packages),_e[gt].salesCredit+=or(dt.amount),_e[gt].commCredit+=or(dt.commission)):(_e[gt].packsCash+=or(dt.packages),_e[gt].salesCash+=or(dt.amount),_e[gt].commCash+=or(dt.commission))}return Object.values(_e).map(dt=>({...dt,packsCash:Ni(dt.packsCash),packsCredit:Ni(dt.packsCredit),salesCash:cr(dt.salesCash),salesCredit:cr(dt.salesCredit),commCash:cr(dt.commCash),commCredit:cr(dt.commCredit)})).sort((dt,gt)=>gt.salesCash+gt.salesCredit-(dt.salesCash+dt.salesCredit))},[Qe]),ze=v.useMemo(()=>{const _e={},dt=et=>(Me[et]||"").trim()||et;for(const et of F){const yt=String(et.customerId||"").trim();if(!yt)continue;const Pt=String(et.date||"");if(Pt&&Pt>s)continue;_e[yt]||(_e[yt]={customerId:yt,name:dt(yt),balance:0,lastPayment:""});const Lt=or(et.amount);et.type==="CARGO"&&(_e[yt].balance+=Lt),et.type==="ABONO"&&(_e[yt].balance-=Lt,(!_e[yt].lastPayment||Pt>_e[yt].lastPayment)&&(_e[yt].lastPayment=Pt))}const gt=Object.values(_e).map(et=>({...et,balance:cr(et.balance)})).filter(et=>et.balance>0).sort((et,yt)=>yt.balance-et.balance),Ce=cr(gt.reduce((et,yt)=>et+yt.balance,0));return{count:gt.length,totalPending:Ce,list:gt.slice(0,20)}},[F,Me,s]),it=v.useMemo(()=>{const _e=cr(lt.salesTotal),dt=cr(lt.commTotal),gt=cr(xe.total),Ce=cr(_e-dt-gt),et=new Set;for(const ie of st)ie.date&&et.add(ie.date);const yt=Math.max(1,et.size),Pt=cr(_e/yt),Lt=cr(dt/yt),qt=cr(gt/yt),wt=cr(Ce/yt);return{ingreso:_e,comision:dt,gastos:gt,gananciaNeta:Ce,daysCount:yt,ingresoDia:Pt,comisionDia:Lt,gastosDia:qt,netaDia:wt}},[lt,xe.total,st]),Bt=v.useMemo(()=>{const _e={};for(const et of st){const yt=et.date;yt&&(_e[yt]||(_e[yt]={date:yt,ingreso:0,comision:0}),_e[yt].ingreso+=or(et.amount),_e[yt].comision+=or(et.commission))}const dt=Object.keys(_e).sort((et,yt)=>et<yt?-1:1),gt=dt.map(et=>({label:et.slice(5),value:cr(_e[et].ingreso)})),Ce=dt.map(et=>{var wt,ie;const yt=or((wt=_e[et])==null?void 0:wt.ingreso),Pt=or((ie=_e[et])==null?void 0:ie.comision),Lt=or(xe.byDay[et]||0),qt=yt-Pt-Lt;return{label:et.slice(5),value:cr(qt)}});return{seriesIngreso:gt,seriesNeta:Ce,datesCount:dt.length}},[st,xe.byDay]),ut=v.useMemo(()=>[{label:"Rivas",value:or(ot.RIVAS.sales)},{label:"San Jorge",value:or(ot.SAN_JORGE.sales)},{label:"Isla",value:or(ot.ISLA.sales)}].map(_e=>({..._e,value:cr(_e.value)})),[ot]),It=async()=>{if(z.current){z.current.classList.add("force-pdf-colors");try{const dt=(await If(z.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),gt=new Ar;gt.addImage(dt,"PNG",10,10,190,0),gt.save(`data_center_dulces_${n}_a_${s}.pdf`)}finally{z.current.classList.remove("force-pdf-colors")}}},$t=()=>{const dt=[["date","processedDate","status","type","vendorId","vendorName","branch","productName","packages","amount","commission","customerId","customerName"].join(","),...st.map(yt=>[yt.date,yt.processedDate||"",yt.status,yt.type,yt.vendorId,`"${String(yt.vendorName||"").replace(/"/g,'""')}"`,yt.branch||"",`"${String(yt.productName||"").replace(/"/g,'""')}"`,La(yt.packages),tr(yt.amount),tr(yt.commission),yt.customerId||"",`"${String(nt(yt)||"").replace(/"/g,'""')}"`].join(","))],gt=new Blob([dt.join(`
`)],{type:"text/csv;charset=utf-8;"}),Ce=URL.createObjectURL(gt),et=document.createElement("a");et.href=Ce,et.download=`data_center_dulces_${n}_a_${s}.csv`,et.click(),URL.revokeObjectURL(Ce)};return t?i.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 md:px-0",children:i.jsxs("div",{className:"bg-white p-3 sm:p-4 md:p-6 rounded-2xl shadow-2xl",children:[i.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between mb-4",children:[i.jsx("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:"Data Center - Dulces"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center sm:justify-end",children:[i.jsx("button",{onClick:It,className:`\r
                inline-flex items-center justify-center gap-2\r
                w-full sm:w-auto\r
                px-3 py-2 text-sm font-semibold\r
                rounded-lg md:rounded-md\r
                bg-green-600 text-white hover:bg-green-700 transition-colors\r
              `,children:"Exportar PDF"}),i.jsx("button",{onClick:$t,className:`\r
                inline-flex items-center justify-center gap-2\r
                w-full sm:w-auto\r
                px-3 py-2 text-sm font-semibold\r
                rounded-lg md:rounded-md\r
                bg-gray-800 text-white hover:bg-black transition-colors\r
              `,children:"Exportar CSV"})]})]}),i.jsx("div",{className:"rounded-2xl border border-gray-100 p-3 sm:p-4 mb-3 shadow-sm bg-white",children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded-lg px-3 py-2 w-full text-sm",value:n,onChange:_e=>a(_e.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded-lg px-3 py-2 w-full text-sm",value:s,onChange:_e=>o(_e.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Estado"}),i.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:l,onChange:_e=>c(_e.target.value),children:[i.jsx("option",{value:"TODAS",children:"Todas"}),i.jsx("option",{value:"FLOTANTE",children:"Flotante"}),i.jsx("option",{value:"PROCESADA",children:"Procesada"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Tipo"}),i.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:u,onChange:_e=>d(_e.target.value),children:[i.jsx("option",{value:"AMBAS",children:"Ambas"}),i.jsx("option",{value:"CASH",children:"Cash"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Vendedor"}),i.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:A,onChange:_e=>f(_e.target.value),children:[i.jsx("option",{value:"ALL",children:"Todos"}),de.map(_e=>i.jsx("option",{value:_e.id,children:_e.name||_e.id},_e.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Sucursal"}),i.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:h,onChange:_e=>m(_e.target.value),children:[i.jsx("option",{value:"ALL",children:"Todas"}),i.jsx("option",{value:"RIVAS",children:"Rivas"}),i.jsx("option",{value:"SAN_JORGE",children:"San Jorge"}),i.jsx("option",{value:"ISLA",children:"Isla"})]})]}),i.jsxs("div",{className:"sm:col-span-2 lg:col-span-3",children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Producto (opcional)"}),i.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:p,onChange:_e=>g(_e.target.value),placeholder:"Ej: Conitos"})]}),i.jsxs("div",{className:"sm:col-span-2 lg:col-span-3",children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Cliente (opcional)"}),i.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:x,onChange:_e=>y(_e.target.value),placeholder:"Ej: Javier"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Monto min"}),i.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:b,onChange:_e=>_(_e.target.value),placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Monto max"}),i.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:T,onChange:_e=>P(_e.target.value),placeholder:"999999"})]}),i.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Agrupar por"}),i.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:C,onChange:_e=>{Q(""),S(_e.target.value)},children:[i.jsx("option",{value:"DIA",children:"Da"}),i.jsx("option",{value:"VENDEDOR",children:"Vendedor"}),i.jsx("option",{value:"PRODUCTO",children:"Producto"}),i.jsx("option",{value:"SUCURSAL",children:"Sucursal"})]})]})]})}),i.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between mb-4",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{Z(""),Ne("MACRO")},className:["px-3 py-2 rounded-full text-sm font-semibold border transition-colors",re==="MACRO"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50"].join(" "),children:"Data Macro"}),i.jsx("button",{onClick:()=>{Z(""),Ne("DETALLE")},className:["px-3 py-2 rounded-full text-sm font-semibold border transition-colors",re==="DETALLE"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50"].join(" "),children:"Data Detalle"})]}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Gastos del perodo (expenses_candies):"," ",i.jsxs("strong",{children:["C$",tr(xe.total)]})]})]}),i.jsxs("div",{ref:z,children:[re==="MACRO"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ingreso (ventas)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",tr(it.ingreso)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[n,"  ",s]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin vendedor"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["-C$",tr(it.comision)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",tr(lt.commCash),"  Crdito: C$",tr(lt.commCredit)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Gastos (expenses_candies)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["-C$",tr(it.gastos)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se calcula automtico por fechas"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia neta (real)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",tr(it.gananciaNeta)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Ingreso  Comisin  Gastos"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Promedio neto por da"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",tr(it.netaDia)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Das con ventas: ",i.jsx("strong",{children:it.daysCount})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mb-3",children:[i.jsx(S7,{title:"Ventas por da (Ingreso)",series:Bt.seriesIngreso,valuePrefix:"C$"}),i.jsx(S7,{title:"Ganancia neta por da (real)",series:Bt.seriesNeta,valuePrefix:"C$"})]}),i.jsx("div",{className:"mb-6",children:i.jsx(L3e,{title:"Distribucin de ventas por sucursal",items:ut})})]}),re==="DETALLE"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:La(lt.packsCash)}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[n,"  ",s]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:La(lt.packsCredit)}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[n,"  ",s]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas totales"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",tr(lt.salesTotal)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",tr(lt.salesCash),"  Crdito: C$",tr(lt.salesCredit)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",tr(lt.commTotal)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",tr(lt.commCash),"  Crdito: C$",tr(lt.commCredit)]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Gross Profit total (rdenes maestras)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",tr(bt.grossTotal)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["R: ",tr(bt.grossRivas),"  SJ:"," ",tr(bt.grossSanJorge),"  I:"," ",tr(bt.grossIsla)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total esperado (por sucursal)"}),i.jsxs("div",{className:"text-sm mt-2 space-y-1",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Rivas"}),i.jsxs("strong",{children:["C$",tr(bt.expectedRivas)]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"San Jorge"}),i.jsxs("strong",{children:["C$",tr(bt.expectedSanJorge)]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Isla"}),i.jsxs("strong",{children:["C$",tr(bt.expectedIsla)]})]})]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Actual ventas por sucursal"}),i.jsxs("div",{className:"text-sm mt-2 space-y-1",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Rivas"}),i.jsxs("strong",{children:["C$",tr(ot.RIVAS.sales)]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"San Jorge"}),i.jsxs("strong",{children:["C$",tr(ot.SAN_JORGE.sales)]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Isla"}),i.jsxs("strong",{children:["C$",tr(ot.ISLA.sales)]})]})]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Diferencia vs esperado"}),i.jsxs("div",{className:"text-sm mt-2 space-y-1",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Rivas"}),i.jsxs("strong",{children:["C$",tr(Le.RIVAS)]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"San Jorge"}),i.jsxs("strong",{children:["C$",tr(Le.SAN_JORGE)]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Isla"}),i.jsxs("strong",{children:["C$",tr(Le.ISLA)]})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado a precio proveedor (rdenes vendedor)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",tr(ye.providerTotalVendor)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[n,"  ",s]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes ordenados (maestras)"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:La(ye.orderedPacksMaster)}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Restantes (perodo):"," ",i.jsx("strong",{children:La(ye.remainingPacksMaster)})]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Existencia global (todas):"," ",i.jsx("strong",{children:La(Ue.masterRemainingPackages)})]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes ordenados (rdenes vendedor)"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:La(ye.orderedPacksVendor)}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Restantes (perodo):"," ",i.jsx("strong",{children:La(ye.remainingPacksVendor)})]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Existencia global (todas):"," ",i.jsx("strong",{children:La(Ue.vendorRemainingPackages)})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado (precio proveedor)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",tr(ue)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Sumatoria rdenes maestras (perodo)"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Productos dispersados (precio venta)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",tr(Ge.dispersedTotal)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Sumatoria rdenes de vendedores (perodo)"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Dispersado Isla (precio venta)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",tr(Ge.dispersedIsla)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Usado para Total existente"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total existente (Isla)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",tr(Ge.totalExistenteIsla)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Esperado Isla  Dispersado Isla"})]})]}),i.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-4 shadow-sm bg-white border-gray-100",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[i.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"rdenes de vendedores (Global)"}),i.jsxs("div",{className:"text-xs text-gray-500",children:["Basado en ",i.jsx("strong",{children:"precio de venta"})," (por sucursal del vendedor)"]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-2 text-sm",children:[i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total orden:"," ",i.jsxs("strong",{children:["C$",tr(Je.global.totalOrden)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Vendido:"," ",i.jsxs("strong",{children:["C$",tr(Je.global.vendido)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Restante:"," ",i.jsxs("strong",{children:["C$",tr(Je.global.restante)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Comisin:"," ",i.jsxs("strong",{children:["C$",tr(Je.global.comision)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total esperado:"," ",i.jsxs("strong",{children:["C$",tr(Je.global.totalEsperado)]})]})]})]}),i.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-6 shadow-sm bg-white border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2 mb-3",children:[i.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"rdenes de vendedores (Detalle por orden)"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Click/Tap en una orden para ver productos asociados/vendidos/restantes"})]}),Je.orders.length===0?i.jsx("div",{className:"text-sm text-gray-500",children:""}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"md:hidden space-y-2",children:Je.orders.map(_e=>i.jsxs("div",{className:"border rounded-2xl p-3",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:_e.orderId}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1 truncate",children:[_e.sellerName," ",_e.branch?` ${_e.branch}`:""," ",_e.date?` ${_e.date}`:""]})]}),i.jsx("button",{className:"px-3 py-2 rounded-lg bg-gray-800 text-white text-sm font-semibold",onClick:()=>Z(_e.orderKey),children:"Ver"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total"}),i.jsxs("div",{className:"font-bold",children:["C$",tr(_e.totalOrden)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendido"}),i.jsxs("div",{className:"font-bold",children:["C$",tr(_e.vendido)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Restante"}),i.jsxs("div",{className:"font-bold",children:["C$",tr(_e.restante)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),i.jsxs("div",{className:"font-bold",children:["C$",tr(_e.comision)]})]})]})]},_e.orderKey))}),i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2 text-left",children:"Orden"}),i.jsx("th",{className:"border p-2 text-left",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Sucursal"}),i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Total orden"}),i.jsx("th",{className:"border p-2",children:"Vendido"}),i.jsx("th",{className:"border p-2",children:"Restante"}),i.jsx("th",{className:"border p-2",children:"Comisin"}),i.jsx("th",{className:"border p-2",children:"Total esperado"}),i.jsx("th",{className:"border p-2",children:"Accin"})]})}),i.jsx("tbody",{children:Je.orders.map(_e=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2 text-left",children:_e.orderId}),i.jsx("td",{className:"border p-2 text-left",children:_e.sellerName}),i.jsx("td",{className:"border p-2",children:_e.branch||""}),i.jsx("td",{className:"border p-2",children:_e.date||""}),i.jsxs("td",{className:"border p-2",children:["C$",tr(_e.totalOrden)]}),i.jsxs("td",{className:"border p-2",children:["C$",tr(_e.vendido)]}),i.jsxs("td",{className:"border p-2",children:["C$",tr(_e.restante)]}),i.jsxs("td",{className:"border p-2",children:["C$",tr(_e.comision)]}),i.jsxs("td",{className:"border p-2",children:["C$",tr(_e.totalEsperado)]}),i.jsx("td",{className:"border p-2",children:i.jsx("button",{className:"text-xs bg-gray-800 text-white px-3 py-2 rounded-lg hover:bg-black",onClick:()=>Z(_e.orderKey),children:"Ver detalle"})})]},_e.orderKey))})]})}),ht&&i.jsxs("div",{className:"mt-4 rounded-2xl border-2 border-gray-100 p-3 sm:p-4 shadow-lg bg-white",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-3",children:[i.jsxs("h4",{className:"text-base sm:text-xl font-semibold truncate",children:["Detalle orden vendedor  ",ht.orderId]}),i.jsx("button",{onClick:()=>Z(""),className:"w-full sm:w-auto text-sm px-3 py-2 border rounded-lg hover:bg-gray-50",children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-2 text-sm mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total orden:"," ",i.jsxs("strong",{children:["C$",tr(ht.totalOrden)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Vendido:"," ",i.jsxs("strong",{children:["C$",tr(ht.vendido)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Restante:"," ",i.jsxs("strong",{children:["C$",tr(ht.restante)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Comisin:"," ",i.jsxs("strong",{children:["C$",tr(ht.comision)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total esperado:"," ",i.jsxs("strong",{children:["C$",tr(ht.totalEsperado)]})]})]}),i.jsx("h5",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Productos asociados (Nombre - Asociados - Vendidos - Restantes)"}),i.jsx("div",{className:"md:hidden space-y-2",children:ht.products.map(_e=>i.jsxs("div",{className:"border rounded-2xl p-3",children:[i.jsx("div",{className:"font-semibold",children:_e.productName}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Asociados"}),i.jsx("div",{className:"font-bold",children:_e.asociados})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendidos"}),i.jsx("div",{className:"font-bold",children:_e.vendidos})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Restantes"}),i.jsx("div",{className:"font-bold",children:_e.restantes})]})]})]},_e.productName))}),i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2 text-left",children:"Nombre producto"}),i.jsx("th",{className:"border p-2",children:"Asociados"}),i.jsx("th",{className:"border p-2",children:"Vendidos"}),i.jsx("th",{className:"border p-2",children:"Restantes"})]})}),i.jsxs("tbody",{children:[ht.products.map(_e=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2 text-left",children:_e.productName}),i.jsx("td",{className:"border p-2",children:_e.asociados}),i.jsx("td",{className:"border p-2",children:_e.vendidos}),i.jsx("td",{className:"border p-2",children:_e.restantes})]},_e.productName)),ht.products.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-4 text-center text-gray-500",children:"Sin productos."})})]})]})})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Existencia global (maestras)"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:La(Ue.masterRemainingPackages)}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"remainingPackages (todas)"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Existencia global (vendedores)"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:La(Ue.vendorRemainingPackages)}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"remainingPackages (todas)"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin cash)"}),Ze.cashArr.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-40 overflow-auto pr-1",children:Ze.cashArr.map(_e=>i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:_e.name}),i.jsxs("strong",{className:"ml-2",children:["C$",tr(_e.total)]})]},_e.vendorId))})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin crdito)"}),Ze.creditArr.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-40 overflow-auto pr-1",children:Ze.creditArr.map(_e=>i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:_e.name}),i.jsxs("strong",{className:"ml-2",children:["C$",tr(_e.total)]})]},_e.vendorId))})]})]}),i.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-6 shadow-sm bg-white border-gray-100",children:[i.jsxs("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:["Cartera (saldo pendiente hasta ",s,")"]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-sm mb-3",children:[i.jsxs("div",{children:["Clientes con saldo: ",i.jsx("strong",{children:ze.count})]}),i.jsxs("div",{children:["Saldo total pendiente:"," ",i.jsxs("strong",{children:["C$",tr(ze.totalPending)]})]}),i.jsx("div",{className:"text-gray-500",children:"*Muestra top 20 por monto"})]}),ze.list.length===0?i.jsx("div",{className:"text-sm text-gray-500",children:""}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"md:hidden space-y-2",children:ze.list.map(_e=>i.jsxs("div",{className:"border rounded-xl p-3",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:_e.name}),i.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",tr(_e.balance)]})]}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["ltimo abono:"," ",i.jsx("span",{className:"font-medium",children:_e.lastPayment||""})]})]},_e.customerId))}),i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2 text-left",children:"Cliente"}),i.jsx("th",{className:"border p-2",children:"Saldo"}),i.jsx("th",{className:"border p-2",children:"ltimo abono"})]})}),i.jsx("tbody",{children:ze.list.map(_e=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2 text-left",children:_e.name}),i.jsxs("td",{className:"border p-2",children:["C$",tr(_e.balance)]}),i.jsx("td",{className:"border p-2",children:_e.lastPayment||""})]},_e.customerId))})]})})]})]}),i.jsxs("div",{className:"mb-3 flex flex-col sm:flex-row sm:items-center gap-2",children:[i.jsxs("h3",{className:"font-semibold text-sm sm:text-base",children:["Tabla principal (Agrupar por: ",C,")"]}),i.jsx("span",{className:"text-xs text-gray-500 sm:ml-auto",children:"Tap/Click en Ver detalle para drill-down"})]}),I?i.jsx("p",{className:"text-sm",children:"Cargando..."}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"md:hidden space-y-2 mb-6",children:rt.length===0?i.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin datos con los filtros seleccionados."}):rt.map(_e=>i.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:_e.label}),i.jsx("button",{className:"px-3 py-2 rounded-lg bg-gray-800 text-white text-sm font-semibold",onClick:()=>Q(_e.key),children:"Ver detalle"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),i.jsx("div",{className:"font-bold",children:La(_e.packsCash)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),i.jsx("div",{className:"font-bold",children:La(_e.packsCredit)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),i.jsxs("div",{className:"font-bold",children:["C$",tr(_e.salesCash)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),i.jsxs("div",{className:"font-bold",children:["C$",tr(_e.salesCredit)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash"}),i.jsxs("div",{className:"font-bold",children:["C$",tr(_e.commCash)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito"}),i.jsxs("div",{className:"font-bold",children:["C$",tr(_e.commCredit)]})]})]})]},_e.key))}),i.jsx("div",{className:"hidden md:block overflow-x-auto mb-6 shadow-2xl rounded-xl border",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2 text-left",children:C==="DIA"?"Da":C==="VENDEDOR"?"Vendedor":C==="PRODUCTO"?"Producto":"Sucursal"}),i.jsx("th",{className:"border p-2",children:"Paquetes cash"}),i.jsx("th",{className:"border p-2",children:"Paquetes crdito"}),i.jsx("th",{className:"border p-2",children:"Ventas cash"}),i.jsx("th",{className:"border p-2",children:"Ventas crdito"}),i.jsx("th",{className:"border p-2",children:"Comisin cash"}),i.jsx("th",{className:"border p-2",children:"Comisin crdito"}),i.jsx("th",{className:"border p-2",children:"Opciones"})]})}),i.jsxs("tbody",{children:[rt.map(_e=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2 text-left",children:_e.label}),i.jsx("td",{className:"border p-2",children:La(_e.packsCash)}),i.jsx("td",{className:"border p-2",children:La(_e.packsCredit)}),i.jsxs("td",{className:"border p-2",children:["C$",tr(_e.salesCash)]}),i.jsxs("td",{className:"border p-2",children:["C$",tr(_e.salesCredit)]}),i.jsxs("td",{className:"border p-2",children:["C$",tr(_e.commCash)]}),i.jsxs("td",{className:"border p-2",children:["C$",tr(_e.commCredit)]}),i.jsx("td",{className:"border p-2",children:i.jsx("button",{className:"text-xs bg-gray-800 text-white px-3 py-2 rounded-lg hover:bg-black",onClick:()=>Q(_e.key),children:"Ver detalle"})})]},_e.key)),rt.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sin datos con los filtros seleccionados."})})]})]})})]}),ne&&i.jsxs("div",{className:"rounded-2xl shadow-lg p-3 sm:p-4 bg-white border-solid border-2 border-gray-100",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-3",children:[i.jsxs("h2",{className:"text-base sm:text-xl font-semibold truncate",children:["Detalle "," ",((hr=rt.find(_e=>_e.key===ne))==null?void 0:hr.label)||ne]}),i.jsx("button",{onClick:()=>Q(""),className:"w-full sm:w-auto text-sm px-3 py-2 border rounded-lg hover:bg-gray-50",children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 text-sm mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total Ventas cash:"," ",i.jsxs("strong",{children:["C$",tr(Qe.filter(_e=>_e.type==="CONTADO").reduce((_e,dt)=>_e+or(dt.amount),0))]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total Ventas crdito:"," ",i.jsxs("strong",{children:["C$",tr(Qe.filter(_e=>_e.type==="CREDITO").reduce((_e,dt)=>_e+or(dt.amount),0))]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total paquetes cash:"," ",i.jsx("strong",{children:La(Qe.filter(_e=>_e.type==="CONTADO").reduce((_e,dt)=>_e+or(dt.packages),0))})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total paquetes crdito:"," ",i.jsx("strong",{children:La(Qe.filter(_e=>_e.type==="CREDITO").reduce((_e,dt)=>_e+or(dt.packages),0))})]})]}),i.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Ventas incluidas"}),i.jsx("div",{className:"md:hidden space-y-2 mb-4",children:Qe.length===0?i.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin detalle."}):Qe.map(_e=>i.jsxs("div",{className:"border rounded-2xl p-3",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:_e.productName}),i.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",tr(_e.amount)]})]}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Vendedor:"," ",i.jsx("span",{className:"font-medium",children:_e.vendorName})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Tipo"}),i.jsx("div",{className:"font-bold",children:_e.type==="CREDITO"?"Crdito":"Cash"})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Sucursal"}),i.jsx("div",{className:"font-bold",children:_e.branch||""})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),i.jsx("div",{className:"font-bold",children:La(_e.packages)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),i.jsxs("div",{className:"font-bold",children:["C$",tr(_e.commission)]})]})]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Fecha: ",_e.date]})]},_e.id))}),i.jsx("div",{className:"hidden md:block overflow-x-auto mb-4",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Sucursal"}),i.jsx("th",{className:"border p-2",children:"Paquetes"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Comisin"}),i.jsx("th",{className:"border p-2",children:"Fecha venta"})]})}),i.jsxs("tbody",{children:[Qe.map(_e=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2",children:_e.vendorName}),i.jsx("td",{className:"border p-2",children:_e.productName}),i.jsx("td",{className:"border p-2",children:_e.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"border p-2",children:_e.branch||""}),i.jsx("td",{className:"border p-2",children:La(_e.packages)}),i.jsxs("td",{className:"border p-2",children:["C$",tr(_e.amount)]}),i.jsxs("td",{className:"border p-2",children:["C$",tr(_e.commission)]}),i.jsx("td",{className:"border p-2",children:_e.date})]},_e.id)),Qe.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sin detalle."})})]})]})}),i.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Consolidado por producto"}),i.jsx("div",{className:"md:hidden space-y-2",children:Pe.length===0?i.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin consolidado."}):Pe.map(_e=>i.jsxs("div",{className:"border rounded-2xl p-3",children:[i.jsx("div",{className:"font-semibold",children:_e.productName}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paq cash"}),i.jsx("div",{className:"font-bold",children:La(_e.packsCash)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paq crdito"}),i.jsx("div",{className:"font-bold",children:La(_e.packsCredit)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),i.jsxs("div",{className:"font-bold",children:["C$",tr(_e.salesCash)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),i.jsxs("div",{className:"font-bold",children:["C$",tr(_e.salesCredit)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Com cash"}),i.jsxs("div",{className:"font-bold",children:["C$",tr(_e.commCash)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Com crdito"}),i.jsxs("div",{className:"font-bold",children:["C$",tr(_e.commCredit)]})]})]})]},_e.productName))}),i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Total paquetes cash"}),i.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),i.jsx("th",{className:"border p-2",children:"Ventas cash"}),i.jsx("th",{className:"border p-2",children:"Ventas crdito"}),i.jsx("th",{className:"border p-2",children:"Comisin cash"}),i.jsx("th",{className:"border p-2",children:"Comisin crdito"})]})}),i.jsxs("tbody",{children:[Pe.map(_e=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2 text-left",children:_e.productName}),i.jsx("td",{className:"border p-2",children:La(_e.packsCash)}),i.jsx("td",{className:"border p-2",children:La(_e.packsCredit)}),i.jsxs("td",{className:"border p-2",children:["C$",tr(_e.salesCash)]}),i.jsxs("td",{className:"border p-2",children:["C$",tr(_e.salesCredit)]}),i.jsxs("td",{className:"border p-2",children:["C$",tr(_e.commCash)]}),i.jsxs("td",{className:"border p-2",children:["C$",tr(_e.commCredit)]})]},_e.productName)),Pe.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"p-4 text-center text-gray-500",children:"Sin consolidado."})})]})]})})]})]})]}),E&&i.jsx("p",{className:"mt-3 text-sm",children:E})]})}):i.jsxs("div",{className:"max-w-5xl mx-auto p-3 sm:p-4 md:p-6 bg-white rounded-2xl shadow-2xl",children:[i.jsx("h2",{className:"text-lg md:text-xl font-bold",children:"Data Center - Dulces"}),i.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"No autorizado."})]})}function qZ(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=qZ(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Qn(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=qZ(e))&&(n&&(n+=" "),n+=t);return n}var Q3e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function $3(e){if(typeof e!="string")return!1;var t=Q3e;return t.includes(e)}var V3e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],H3e=new Set(V3e);function GZ(e){return typeof e!="string"?!1:H3e.has(e)}function zZ(e){return typeof e=="string"&&e.startsWith("data-")}function ed(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(GZ(r)||zZ(r))&&(t[r]=e[r]);return t}function I1(e){if(e==null)return null;if(v.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return ed(t)}return typeof e=="object"&&!Array.isArray(e)?ed(e):null}function Ic(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(GZ(r)||zZ(r)||$3(r))&&(t[r]=e[r]);return t}var $3e=["children","width","height","viewBox","className","style","title","desc"];function Lk(){return Lk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lk.apply(null,arguments)}function K3e(e,t){if(e==null)return{};var r,n,a=q3e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function q3e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var K3=v.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:s,className:o,style:l,title:c,desc:u}=e,d=K3e(e,$3e),A=s||{width:n,height:a,x:0,y:0},f=Qn("recharts-surface",o);return v.createElement("svg",Lk({},Ic(d),{className:f,width:n,height:a,style:l,viewBox:"".concat(A.x," ").concat(A.y," ").concat(A.width," ").concat(A.height),ref:t}),v.createElement("title",null,c),v.createElement("desc",null,u),r)}),G3e=["children","className"];function Mk(){return Mk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mk.apply(null,arguments)}function z3e(e,t){if(e==null)return{};var r,n,a=W3e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function W3e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var To=v.forwardRef((e,t)=>{var{children:r,className:n}=e,a=z3e(e,G3e),s=Qn("recharts-layer",n);return v.createElement("g",Mk({className:s},Ic(a),{ref:t}),r)}),WZ=v.createContext(null),X3e=()=>v.useContext(WZ);function ia(e){return function(){return e}}const XZ=Math.cos,d_=Math.sin,wu=Math.sqrt,A_=Math.PI,yS=2*A_,Uk=Math.PI,Qk=2*Uk,nm=1e-6,J3e=Qk-nm;function JZ(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Y3e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return JZ;const r=10**t;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class Z3e{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?JZ:Y3e(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,s,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+s},${this._y1=+o}`}arcTo(t,r,n,a,s){if(t=+t,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=n-t,u=a-r,d=o-t,A=l-r,f=d*d+A*A;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(f>nm)if(!(Math.abs(A*c-u*d)>nm)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let h=n-o,m=a-l,p=c*c+u*u,g=h*h+m*m,x=Math.sqrt(p),y=Math.sqrt(f),b=s*Math.tan((Uk-Math.acos((p+f-g)/(2*x*y)))/2),_=b/y,T=b/x;Math.abs(_-1)>nm&&this._append`L${t+_*d},${r+_*A}`,this._append`A${s},${s},0,0,${+(A*h>d*m)},${this._x1=t+T*c},${this._y1=r+T*u}`}}arc(t,r,n,a,s,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=t+l,d=r+c,A=1^o,f=o?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>nm||Math.abs(this._y1-d)>nm)&&this._append`L${u},${d}`,n&&(f<0&&(f=f%Qk+Qk),f>J3e?this._append`A${n},${n},0,1,${A},${t-l},${r-c}A${n},${n},0,1,${A},${this._x1=u},${this._y1=d}`:f>nm&&this._append`A${n},${n},0,${+(f>=Uk)},${A},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function q3(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new Z3e(t)}function G3(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function YZ(e){this._context=e}YZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function bS(e){return new YZ(e)}function ZZ(e){return e[0]}function eee(e){return e[1]}function tee(e,t){var r=ia(!0),n=null,a=bS,s=null,o=q3(l);e=typeof e=="function"?e:e===void 0?ZZ:ia(e),t=typeof t=="function"?t:t===void 0?eee:ia(t);function l(c){var u,d=(c=G3(c)).length,A,f=!1,h;for(n==null&&(s=a(h=o())),u=0;u<=d;++u)!(u<d&&r(A=c[u],u,c))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+e(A,u,c),+t(A,u,c));if(h)return s=null,h+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:ia(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:ia(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:ia(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(s=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=s=null:s=a(n=c),l):n},l}function M2(e,t,r){var n=null,a=ia(!0),s=null,o=bS,l=null,c=q3(u);e=typeof e=="function"?e:e===void 0?ZZ:ia(+e),t=typeof t=="function"?t:ia(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?eee:ia(+r);function u(A){var f,h,m,p=(A=G3(A)).length,g,x=!1,y,b=new Array(p),_=new Array(p);for(s==null&&(l=o(y=c())),f=0;f<=p;++f){if(!(f<p&&a(g=A[f],f,A))===x)if(x=!x)h=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),m=f-1;m>=h;--m)l.point(b[m],_[m]);l.lineEnd(),l.areaEnd()}x&&(b[f]=+e(g,f,A),_[f]=+t(g,f,A),l.point(n?+n(g,f,A):b[f],r?+r(g,f,A):_[f]))}if(y)return l=null,y+""||null}function d(){return tee().defined(a).curve(o).context(s)}return u.x=function(A){return arguments.length?(e=typeof A=="function"?A:ia(+A),n=null,u):e},u.x0=function(A){return arguments.length?(e=typeof A=="function"?A:ia(+A),u):e},u.x1=function(A){return arguments.length?(n=A==null?null:typeof A=="function"?A:ia(+A),u):n},u.y=function(A){return arguments.length?(t=typeof A=="function"?A:ia(+A),r=null,u):t},u.y0=function(A){return arguments.length?(t=typeof A=="function"?A:ia(+A),u):t},u.y1=function(A){return arguments.length?(r=A==null?null:typeof A=="function"?A:ia(+A),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(A){return arguments.length?(a=typeof A=="function"?A:ia(!!A),u):a},u.curve=function(A){return arguments.length?(o=A,s!=null&&(l=o(s)),u):o},u.context=function(A){return arguments.length?(A==null?s=l=null:l=o(s=A),u):s},u}class ree{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function eOe(e){return new ree(e,!0)}function tOe(e){return new ree(e,!1)}const z3={draw(e,t){const r=wu(t/A_);e.moveTo(r,0),e.arc(0,0,r,0,yS)}},rOe={draw(e,t){const r=wu(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},nee=wu(1/3),nOe=nee*2,aOe={draw(e,t){const r=wu(t/nOe),n=r*nee;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},sOe={draw(e,t){const r=wu(t),n=-r/2;e.rect(n,n,r,r)}},iOe=.8908130915292852,aee=d_(A_/10)/d_(7*A_/10),oOe=d_(yS/10)*aee,lOe=-XZ(yS/10)*aee,cOe={draw(e,t){const r=wu(t*iOe),n=oOe*r,a=lOe*r;e.moveTo(0,-r),e.lineTo(n,a);for(let s=1;s<5;++s){const o=yS*s/5,l=XZ(o),c=d_(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*a,c*n+l*a)}e.closePath()}},Wj=wu(3),uOe={draw(e,t){const r=-wu(t/(Wj*3));e.moveTo(0,r*2),e.lineTo(-Wj*r,-r),e.lineTo(Wj*r,-r),e.closePath()}},rc=-.5,nc=wu(3)/2,Vk=1/wu(12),dOe=(Vk/2+1)*3,AOe={draw(e,t){const r=wu(t/dOe),n=r/2,a=r*Vk,s=n,o=r*Vk+r,l=-s,c=o;e.moveTo(n,a),e.lineTo(s,o),e.lineTo(l,c),e.lineTo(rc*n-nc*a,nc*n+rc*a),e.lineTo(rc*s-nc*o,nc*s+rc*o),e.lineTo(rc*l-nc*c,nc*l+rc*c),e.lineTo(rc*n+nc*a,rc*a-nc*n),e.lineTo(rc*s+nc*o,rc*o-nc*s),e.lineTo(rc*l+nc*c,rc*c-nc*l),e.closePath()}};function hOe(e,t){let r=null,n=q3(a);e=typeof e=="function"?e:ia(e||z3),t=typeof t=="function"?t:ia(t===void 0?64:+t);function a(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:ia(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:ia(+s),a):t},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function h_(){}function f_(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function see(e){this._context=e}see.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:f_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:f_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function fOe(e){return new see(e)}function iee(e){this._context=e}iee.prototype={areaStart:h_,areaEnd:h_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:f_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function mOe(e){return new iee(e)}function oee(e){this._context=e}oee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:f_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function pOe(e){return new oee(e)}function lee(e){this._context=e}lee.prototype={areaStart:h_,areaEnd:h_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function gOe(e){return new lee(e)}function I7(e){return e<0?-1:1}function B7(e,t,r){var n=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),l=(s*a+o*n)/(n+a);return(I7(s)+I7(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function j7(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Xj(e,t,r){var n=e._x0,a=e._y0,s=e._x1,o=e._y1,l=(s-n)/3;e._context.bezierCurveTo(n+l,a+l*t,s-l,o-l*r,s,o)}function m_(e){this._context=e}m_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Xj(this,this._t0,j7(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Xj(this,j7(this,r=B7(this,e,t)),r);break;default:Xj(this,this._t0,r=B7(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function cee(e){this._context=new uee(e)}(cee.prototype=Object.create(m_.prototype)).point=function(e,t){m_.prototype.point.call(this,t,e)};function uee(e){this._context=e}uee.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,s){this._context.bezierCurveTo(t,e,n,r,s,a)}};function xOe(e){return new m_(e)}function vOe(e){return new cee(e)}function dee(e){this._context=e}dee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=P7(e),a=P7(t),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function P7(e){var t,r=e.length-1,n,a=new Array(r),s=new Array(r),o=new Array(r);for(a[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,s[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/s[t-1],s[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/s[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/s[t];for(s[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function yOe(e){return new dee(e)}function wS(e,t){this._context=e,this._t=t}wS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function bOe(e){return new wS(e,.5)}function wOe(e){return new wS(e,0)}function NOe(e){return new wS(e,1)}function l0(e,t){if((o=e.length)>1)for(var r=1,n,a,s=e[t[0]],o,l=s.length;r<o;++r)for(a=s,s=e[t[r]],n=0;n<l;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function Hk(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function COe(e,t){return e[t]}function _Oe(e){const t=[];return t.key=e,t}function EOe(){var e=ia([]),t=Hk,r=l0,n=COe;function a(s){var o=Array.from(e.apply(this,arguments),_Oe),l,c=o.length,u=-1,d;for(const A of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(A,o[l].key,u,s)]).data=A;for(l=0,d=G3(t(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:ia(Array.from(s)),a):e},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:ia(+s),a):n},a.order=function(s){return arguments.length?(t=s==null?Hk:typeof s=="function"?s:ia(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(r=s??l0,a):r},a}function SOe(e,t){if((n=e.length)>0){for(var r,n,a=0,s=e[0].length,o;a<s;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}l0(e,t)}}function IOe(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,s=n.length;r<s;++r){for(var o=0,l=0;o<a;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}l0(e,t)}}function BOe(e,t){if(!(!((o=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,s,o;n<s;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],A=d[n][1]||0,f=d[n-1][1]||0,h=(A-f)/2,m=0;m<l;++m){var p=e[t[m]],g=p[n][1]||0,x=p[n-1][1]||0;h+=g-x}c+=A,u+=h*A}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,l0(e,t)}}var NS={},Aee={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(Aee);var W3={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(W3);var CS={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(CS);var _S={},hee={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(hee);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hee,r=CS;function n(a){if(Array.isArray(a))return a.map(r.toKey);if(typeof a=="symbol")return[a];a=t.toString(a);const s=[],o=a.length;if(o===0)return s;let l=0,c="",u="",d=!1;for(a.charCodeAt(0)===46&&(s.push(""),l++);l<o;){const A=a[l];u?A==="\\"&&l+1<o?(l++,c+=a[l]):A===u?u="":c+=A:d?A==='"'||A==="'"?u=A:A==="]"?(d=!1,s.push(c),c=""):c+=A:A==="["?(d=!0,c&&(s.push(c),c="")):A==="."?c&&(s.push(c),c=""):c+=A,l++}return c&&s.push(c),s}e.toPath=n})(_S);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Aee,r=W3,n=CS,a=_S;function s(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?s(l,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return o(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function o(l,c,u){if(c.length===0)return u;let d=l;for(let A=0;A<c.length;A++){if(d==null||t.isUnsafeProperty(c[A]))return u;d=d[c[A]]}return d===void 0?u:d}e.get=s})(NS);var jOe=NS.get;const c0=yA(jOe);var POe=4;function Lh(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:POe,r=10**t,n=Math.round(e*r)/r;return Object.is(n,-0)?0:n}function Za(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.reduce((a,s,o)=>{var l=r[o-1];return typeof l=="string"?a+l+s:l!==void 0?a+Lh(l)+s:a+s},"")}var Li=e=>e===0?0:e>0?1:-1,td=e=>typeof e=="number"&&e!=+e,hA=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Sr=e=>(typeof e=="number"||e instanceof Number)&&!td(e),rd=e=>Sr(e)||typeof e=="string",kOe=0,B1=e=>{var t=++kOe;return"".concat(e||"").concat(t)},uo=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Sr(t)&&typeof t!="string")return n;var s;if(hA(t)){if(r==null)return n;var o=t.indexOf("%");s=r*parseFloat(t.slice(0,o))/100}else s=+t;return td(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},fee=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[String(e[n])])r[String(e[n])]=!0;else return!0;return!1};function Us(e,t,r){return Sr(e)&&Sr(t)?Lh(e+r*(t-e)):t}function TOe(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):c0(n,t))===r)}var mi=e=>e===null||typeof e>"u",_b=e=>mi(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function FOe(e){return e!=null}function Eb(){}var OOe=["type","size","sizeType"];function $k(){return $k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$k.apply(null,arguments)}function k7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function T7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k7(Object(r),!0).forEach(function(n){DOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k7(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DOe(e,t,r){return(t=ROe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ROe(e){var t=LOe(e,"string");return typeof t=="symbol"?t:t+""}function LOe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MOe(e,t){if(e==null)return{};var r,n,a=UOe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function UOe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var mee={symbolCircle:z3,symbolCross:rOe,symbolDiamond:aOe,symbolSquare:sOe,symbolStar:cOe,symbolTriangle:uOe,symbolWye:AOe},QOe=Math.PI/180,VOe=e=>{var t="symbol".concat(_b(e));return mee[t]||z3},HOe=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*QOe;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},$Oe=(e,t)=>{mee["symbol".concat(_b(e))]=t},X3=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=MOe(e,OOe),s=T7(T7({},a),{},{type:t,size:r,sizeType:n}),o="circle";typeof t=="string"&&(o=t);var l=()=>{var f=VOe(o),h=hOe().type(f).size(HOe(r,n,o)),m=h();if(m!==null)return m},{className:c,cx:u,cy:d}=s,A=Ic(s);return Sr(u)&&Sr(d)&&Sr(r)?v.createElement("path",$k({},A,{className:Qn("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:l()})):null};X3.registerSymbol=$Oe;var pee=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,KOe=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(v.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{$3(a)&&(n[a]=s=>r[a](r,s))}),n},qOe=(e,t,r)=>n=>(e(t,r,n),null),Sb=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var s=e[a];$3(a)&&typeof s=="function"&&(n||(n={}),n[a]=qOe(s,t,r))}),n};function F7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function GOe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F7(Object(r),!0).forEach(function(n){zOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F7(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zOe(e,t,r){return(t=WOe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WOe(e){var t=XOe(e,"string");return typeof t=="symbol"?t:t+""}function XOe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vi(e,t){var r=GOe({},e),n=t,a=Object.keys(t),s=a.reduce((o,l)=>(o[l]===void 0&&n[l]!==void 0&&(o[l]=n[l]),o),r);return s}function p_(){return p_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p_.apply(null,arguments)}function O7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function JOe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O7(Object(r),!0).forEach(function(n){YOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O7(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YOe(e,t,r){return(t=ZOe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZOe(e){var t=eDe(e,"string");return typeof t=="symbol"?t:t+""}function eDe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cc=32,tDe={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function rDe(e){var{data:t,iconType:r,inactiveColor:n}=e,a=cc/2,s=cc/6,o=cc/3,l=t.inactive?n:t.color,c=r??t.type;if(c==="none")return null;if(c==="plainline"){var u;return v.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:(u=t.payload)===null||u===void 0?void 0:u.strokeDasharray,x1:0,y1:a,x2:cc,y2:a,className:"recharts-legend-icon"})}if(c==="line")return v.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(cc,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return v.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(cc/8,"h").concat(cc,"v").concat(cc*3/4,"h").concat(-cc,"z"),className:"recharts-legend-icon"});if(v.isValidElement(t.legendIcon)){var d=JOe({},t);return delete d.legendIcon,v.cloneElement(t.legendIcon,d)}return v.createElement(X3,{fill:l,cx:a,cy:a,size:cc,sizeType:"diameter",type:c})}function nDe(e){var{payload:t,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:o}=e,l={x:0,y:0,width:cc,height:cc},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((d,A)=>{var f=d.formatter||a,h=Qn({"recharts-legend-item":!0,["legend-item-".concat(A)]:!0,inactive:d.inactive});if(d.type==="none")return null;var m=d.inactive?s:d.color,p=f?f(d.value,d,A):d.value;return v.createElement("li",p_({className:h,style:c,key:"legend-item-".concat(A)},Sb(e,d,A)),v.createElement(K3,{width:r,height:r,viewBox:l,style:u,"aria-label":"".concat(p," legend icon")},v.createElement(rDe,{data:d,iconType:o,inactiveColor:s})),v.createElement("span",{className:"recharts-legend-item-text",style:{color:m}},p))})}var aDe=e=>{var t=Vi(e,tDe),{payload:r,layout:n,align:a}=t;if(!r||!r.length)return null;var s={padding:0,margin:0,textAlign:n==="horizontal"?a:"left"};return v.createElement("ul",{className:"recharts-default-legend",style:s},v.createElement(nDe,p_({},t,{payload:r})))},gee={},xee={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let s=0;s<r.length;s++){const o=r[s],l=n(o);a.has(l)||a.set(l,o)}return Array.from(a.values())}e.uniqBy=t})(xee);var J3={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(J3);var vee={},ES={},yee={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(yee);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yee;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(ES);var bee={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(bee);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ES,r=bee;function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n})(vee);var wee={},Nee={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NS;function r(n){return function(a){return t.get(a,n)}}e.property=r})(Nee);var Cee={},Y3={},_ee={},Z3={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(Z3);var eO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(eO);var tO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(tO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Z3,r=eO,n=tO;function a(d,A,f){return typeof f!="function"?a(d,A,()=>{}):s(d,A,function h(m,p,g,x,y,b){const _=f(m,p,g,x,y,b);return _!==void 0?!!_:s(m,p,h,b)},new Map)}function s(d,A,f,h){if(A===d)return!0;switch(typeof A){case"object":return o(d,A,f,h);case"function":return Object.keys(A).length>0?s(d,{...A},f,h):n.eq(d,A);default:return t.isObject(d)?typeof A=="string"?A==="":!0:n.eq(d,A)}}function o(d,A,f,h){if(A==null)return!0;if(Array.isArray(A))return c(d,A,f,h);if(A instanceof Map)return l(d,A,f,h);if(A instanceof Set)return u(d,A,f,h);const m=Object.keys(A);if(d==null||r.isPrimitive(d))return m.length===0;if(m.length===0)return!0;if(h!=null&&h.has(A))return h.get(A)===d;h==null||h.set(A,d);try{for(let p=0;p<m.length;p++){const g=m[p];if(!r.isPrimitive(d)&&!(g in d)||A[g]===void 0&&d[g]!==void 0||A[g]===null&&d[g]!==null||!f(d[g],A[g],g,d,A,h))return!1}return!0}finally{h==null||h.delete(A)}}function l(d,A,f,h){if(A.size===0)return!0;if(!(d instanceof Map))return!1;for(const[m,p]of A.entries()){const g=d.get(m);if(f(g,p,m,d,A,h)===!1)return!1}return!0}function c(d,A,f,h){if(A.length===0)return!0;if(!Array.isArray(d))return!1;const m=new Set;for(let p=0;p<A.length;p++){const g=A[p];let x=!1;for(let y=0;y<d.length;y++){if(m.has(y))continue;const b=d[y];let _=!1;if(f(b,g,p,d,A,h)&&(_=!0),_){m.add(y),x=!0;break}}if(!x)return!1}return!0}function u(d,A,f,h){return A.size===0?!0:d instanceof Set?c([...d],[...A],f,h):!1}e.isMatchWith=a,e.isSetMatch=u})(_ee);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_ee;function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r})(Y3);var Eee={},rO={},See={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(See);var nO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(nO);var aO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",A="[object Function]",f="[object ArrayBuffer]",h="[object Object]",m="[object Error]",p="[object DataView]",g="[object Uint8Array]",x="[object Uint8ClampedArray]",y="[object Uint16Array]",b="[object Uint32Array]",_="[object BigUint64Array]",T="[object Int8Array]",P="[object Int16Array]",C="[object Int32Array]",S="[object BigInt64Array]",I="[object Float32Array]",L="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=f,e.arrayTag=d,e.bigInt64ArrayTag=S,e.bigUint64ArrayTag=_,e.booleanTag=a,e.dataViewTag=p,e.dateTag=l,e.errorTag=m,e.float32ArrayTag=I,e.float64ArrayTag=L,e.functionTag=A,e.int16ArrayTag=P,e.int32ArrayTag=C,e.int8ArrayTag=T,e.mapTag=c,e.numberTag=n,e.objectTag=h,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=y,e.uint32ArrayTag=b,e.uint8ArrayTag=g,e.uint8ClampedArrayTag=x})(aO);var Iee={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(Iee);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=See,r=nO,n=aO,a=eO,s=Iee;function o(d,A){return l(d,void 0,d,new Map,A)}function l(d,A,f,h=new Map,m=void 0){const p=m==null?void 0:m(d,A,f,h);if(p!==void 0)return p;if(a.isPrimitive(d))return d;if(h.has(d))return h.get(d);if(Array.isArray(d)){const g=new Array(d.length);h.set(d,g);for(let x=0;x<d.length;x++)g[x]=l(d[x],x,f,h,m);return Object.hasOwn(d,"index")&&(g.index=d.index),Object.hasOwn(d,"input")&&(g.input=d.input),g}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const g=new RegExp(d.source,d.flags);return g.lastIndex=d.lastIndex,g}if(d instanceof Map){const g=new Map;h.set(d,g);for(const[x,y]of d)g.set(x,l(y,x,f,h,m));return g}if(d instanceof Set){const g=new Set;h.set(d,g);for(const x of d)g.add(l(x,void 0,f,h,m));return g}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const g=new(Object.getPrototypeOf(d)).constructor(d.length);h.set(d,g);for(let x=0;x<d.length;x++)g[x]=l(d[x],x,f,h,m);return g}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const g=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return h.set(d,g),c(g,d,f,h,m),g}if(typeof File<"u"&&d instanceof File){const g=new File([d],d.name,{type:d.type});return h.set(d,g),c(g,d,f,h,m),g}if(typeof Blob<"u"&&d instanceof Blob){const g=new Blob([d],{type:d.type});return h.set(d,g),c(g,d,f,h,m),g}if(d instanceof Error){const g=new d.constructor;return h.set(d,g),g.message=d.message,g.name=d.name,g.stack=d.stack,g.cause=d.cause,c(g,d,f,h,m),g}if(d instanceof Boolean){const g=new Boolean(d.valueOf());return h.set(d,g),c(g,d,f,h,m),g}if(d instanceof Number){const g=new Number(d.valueOf());return h.set(d,g),c(g,d,f,h,m),g}if(d instanceof String){const g=new String(d.valueOf());return h.set(d,g),c(g,d,f,h,m),g}if(typeof d=="object"&&u(d)){const g=Object.create(Object.getPrototypeOf(d));return h.set(d,g),c(g,d,f,h,m),g}return d}function c(d,A,f=d,h,m){const p=[...Object.keys(A),...t.getSymbols(A)];for(let g=0;g<p.length;g++){const x=p[g],y=Object.getOwnPropertyDescriptor(d,x);(y==null||y.writable)&&(d[x]=l(A[x],x,f,h,m))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c})(rO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rO;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(Eee);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Y3,r=Eee;function n(a){return a=r.cloneDeep(a),s=>t.isMatch(s,a)}e.matches=n})(Cee);var Bee={},jee={},Pee={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rO,r=aO;function n(a,s){return t.cloneDeepWith(a,(o,l,c,u)=>{const d=s==null?void 0:s(o,l,c,u);if(d!==void 0)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const A=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(A,a),A}case r.argumentsTag:{const A={};return t.copyProperties(A,a),A.length=a.length,A[Symbol.iterator]=a[Symbol.iterator],A}default:return}})}e.cloneDeepWith=n})(Pee);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Pee;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(jee);var kee={},sO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(sO);var Tee={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nO;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(Tee);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=W3,r=sO,n=Tee,a=_S;function s(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&(o==null?void 0:o[l])==null?c=a.toPath(l):c=[l],c.length===0)return!1;let u=o;for(let d=0;d<c.length;d++){const A=c[d];if((u==null||!Object.hasOwn(u,A))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(A)&&A<u.length))return!1;u=u[A]}return!0}e.has=s})(kee);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Y3,r=CS,n=jee,a=NS,s=kee;function o(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,l);return d===void 0?s.has(u,l):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=o})(Bee);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=J3,r=Nee,n=Cee,a=Bee;function s(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?a.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=s})(wee);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xee,r=J3,n=vee,a=wee;function s(o,l=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),a.iteratee(l)):[]}e.uniqBy=s})(gee);var sDe=gee.uniqBy;const D7=yA(sDe);function Fee(e,t,r){return t===!0?D7(e,r):typeof t=="function"?D7(e,t):e}var Oee={exports:{}},Dee={},Ree={exports:{}},Lee={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kg=v;function iDe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var oDe=typeof Object.is=="function"?Object.is:iDe,lDe=kg.useState,cDe=kg.useEffect,uDe=kg.useLayoutEffect,dDe=kg.useDebugValue;function ADe(e,t){var r=t(),n=lDe({inst:{value:r,getSnapshot:t}}),a=n[0].inst,s=n[1];return uDe(function(){a.value=r,a.getSnapshot=t,Jj(a)&&s({inst:a})},[e,r,t]),cDe(function(){return Jj(a)&&s({inst:a}),e(function(){Jj(a)&&s({inst:a})})},[e]),dDe(r),r}function Jj(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!oDe(e,r)}catch{return!0}}function hDe(e,t){return t()}var fDe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?hDe:ADe;Lee.useSyncExternalStore=kg.useSyncExternalStore!==void 0?kg.useSyncExternalStore:fDe;Ree.exports=Lee;var mDe=Ree.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SS=v,pDe=mDe;function gDe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xDe=typeof Object.is=="function"?Object.is:gDe,vDe=pDe.useSyncExternalStore,yDe=SS.useRef,bDe=SS.useEffect,wDe=SS.useMemo,NDe=SS.useDebugValue;Dee.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var s=yDe(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=wDe(function(){function c(h){if(!u){if(u=!0,d=h,h=n(h),a!==void 0&&o.hasValue){var m=o.value;if(a(m,h))return A=m}return A=h}if(m=A,xDe(d,h))return m;var p=n(h);return a!==void 0&&a(m,p)?(d=h,m):(d=h,A=p)}var u=!1,d,A,f=r===void 0?null:r;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,r,n,a]);var l=vDe(e,s[0],s[1]);return bDe(function(){o.hasValue=!0,o.value=l},[l]),NDe(l),l};Oee.exports=Dee;var CDe=Oee.exports,iO=v.createContext(null),_De=e=>e,ca=()=>{var e=v.useContext(iO);return e?e.store.dispatch:_De},MN=()=>{},EDe=()=>MN,SDe=(e,t)=>e===t;function Nr(e){var t=v.useContext(iO);return CDe.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:EDe,t?t.store.getState:MN,t?t.store.getState:MN,t?e:MN,SDe)}function IDe(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function BDe(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function jDe(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var R7=e=>Array.isArray(e)?e:[e];function PDe(e){const t=Array.isArray(e[0])?e[0]:e;return jDe(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function kDe(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var TDe=class{constructor(e){this.value=e}deref(){return this.value}},FDe=typeof WeakRef<"u"?WeakRef:TDe,ODe=0,L7=1;function U2(){return{s:ODe,v:void 0,o:null,p:null}}function Mee(e,t={}){let r=U2();const{resultEqualityCheck:n}=t;let a,s=0;function o(){var A;let l=r;const{length:c}=arguments;for(let f=0,h=c;f<h;f++){const m=arguments[f];if(typeof m=="function"||typeof m=="object"&&m!==null){let p=l.o;p===null&&(l.o=p=new WeakMap);const g=p.get(m);g===void 0?(l=U2(),p.set(m,l)):l=g}else{let p=l.p;p===null&&(l.p=p=new Map);const g=p.get(m);g===void 0?(l=U2(),p.set(m,l)):l=g}}const u=l;let d;if(l.s===L7)d=l.v;else if(d=e.apply(null,arguments),s++,n){const f=((A=a==null?void 0:a.deref)==null?void 0:A.call(a))??a;f!=null&&n(f,d)&&(d=f,s!==0&&s--),a=typeof d=="object"&&d!==null||typeof d=="function"?new FDe(d):d}return u.s=L7,u.v=d,d}return o.clearCache=()=>{r=U2(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function DDe(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let s=0,o=0,l,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),IDe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:A,memoizeOptions:f=[],argsMemoize:h=Mee,argsMemoizeOptions:m=[]}=d,p=R7(f),g=R7(m),x=PDe(a),y=A(function(){return s++,u.apply(null,arguments)},...p),b=h(function(){o++;const T=kDe(x,arguments);return l=y.apply(null,T),l},...g);return Object.assign(b,{resultFunc:u,memoizedResultFunc:y,dependencies:x,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:A,argsMemoize:h})};return Object.assign(n,{withTypes:()=>n}),n}var Et=DDe(Mee),RDe=Object.assign((e,t=Et)=>{BDe(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>RDe}),Uee={},Qee={},Vee={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const o=t(n),l=t(a);if(o===l&&o===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?l-o:o-l}return 0};e.compareValues=r})(Vee);var Hee={},oO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(oO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oO,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,o){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||o!=null&&Object.hasOwn(o,s)}e.isKey=a})(Hee);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Vee,r=Hee,n=_S;function a(s,o,l,c){if(s==null)return[];l=c?void 0:l,Array.isArray(s)||(s=Object.values(s)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(h=>String(h));const u=(h,m)=>{let p=h;for(let g=0;g<m.length&&p!=null;++g)p=p[m[g]];return p},d=(h,m)=>m==null||h==null?m:typeof h=="object"&&"key"in h?Object.hasOwn(m,h.key)?m[h.key]:u(m,h.path):typeof h=="function"?h(m):Array.isArray(h)?u(m,h):typeof m=="object"?m[h]:m,A=o.map(h=>(Array.isArray(h)&&h.length===1&&(h=h[0]),h==null||typeof h=="function"||Array.isArray(h)||r.isKey(h)?h:{key:h,path:n.toPath(h)}));return s.map(h=>({original:h,criteria:A.map(m=>d(m,h))})).slice().sort((h,m)=>{for(let p=0;p<A.length;p++){const g=t.compareValues(h.criteria[p],m.criteria[p],l[p]);if(g!==0)return g}return 0}).map(h=>h.original)}e.orderBy=a})(Qee);var $ee={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],s=Math.floor(n),o=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<s?o(d,c+1):a.push(d)}};return o(r,0),a}e.flatten=t})($ee);var lO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sO,r=ES,n=Z3,a=tO;function s(o,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?a.eq(c[l],o):!1}e.isIterateeCall=s})(lO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qee,r=$ee,n=lO;function a(s,...o){const l=o.length;return l>1&&n.isIterateeCall(s,o[0],o[1])?o=[]:l>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(s,r.flatten(o),["asc"])}e.sortBy=a})(Uee);var LDe=Uee.sortBy;const IS=yA(LDe);var Kee=e=>e.legend.settings,MDe=e=>e.legend.size,UDe=e=>e.legend.payload,QDe=Et([UDe,Kee],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?IS(n,r):n});function VDe(){return Nr(QDe)}var Q2=1;function qee(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=v.useState({height:0,left:0,top:0,width:0}),n=v.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),o={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(o.height-t.height)>Q2||Math.abs(o.left-t.left)>Q2||Math.abs(o.top-t.top)>Q2||Math.abs(o.width-t.width)>Q2)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Ei(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var HDe=typeof Symbol=="function"&&Symbol.observable||"@@observable",M7=HDe,Yj=()=>Math.random().toString(36).substring(7).split("").join("."),$De={INIT:`@@redux/INIT${Yj()}`,REPLACE:`@@redux/REPLACE${Yj()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Yj()}`},g_=$De;function cO(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Gee(e,t,r){if(typeof e!="function")throw new Error(Ei(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ei(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ei(1));return r(Gee)(e,t)}let n=e,a=t,s=new Map,o=s,l=0,c=!1;function u(){o===s&&(o=new Map,s.forEach((g,x)=>{o.set(x,g)}))}function d(){if(c)throw new Error(Ei(3));return a}function A(g){if(typeof g!="function")throw new Error(Ei(4));if(c)throw new Error(Ei(5));let x=!0;u();const y=l++;return o.set(y,g),function(){if(x){if(c)throw new Error(Ei(6));x=!1,u(),o.delete(y),s=null}}}function f(g){if(!cO(g))throw new Error(Ei(7));if(typeof g.type>"u")throw new Error(Ei(8));if(typeof g.type!="string")throw new Error(Ei(17));if(c)throw new Error(Ei(9));try{c=!0,a=n(a,g)}finally{c=!1}return(s=o).forEach(y=>{y()}),g}function h(g){if(typeof g!="function")throw new Error(Ei(10));n=g,f({type:g_.REPLACE})}function m(){const g=A;return{subscribe(x){if(typeof x!="object"||x===null)throw new Error(Ei(11));function y(){const _=x;_.next&&_.next(d())}return y(),{unsubscribe:g(y)}},[M7](){return this}}}return f({type:g_.INIT}),{dispatch:f,subscribe:A,getState:d,replaceReducer:h,[M7]:m}}function KDe(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:g_.INIT})>"u")throw new Error(Ei(12));if(typeof r(void 0,{type:g_.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ei(13))})}function zee(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let a;try{KDe(r)}catch(s){a=s}return function(o={},l){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const A=n[d],f=r[A],h=o[A],m=f(h,l);if(typeof m>"u")throw l&&l.type,new Error(Ei(14));u[A]=m,c=c||m!==h}return c=c||n.length!==Object.keys(o).length,c?u:o}}function x_(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function qDe(...e){return t=>(r,n)=>{const a=t(r,n);let s=()=>{throw new Error(Ei(15))};const o={getState:a.getState,dispatch:(c,...u)=>s(c,...u)},l=e.map(c=>c(o));return s=x_(...l)(a.dispatch),{...a,dispatch:s}}}function Wee(e){return cO(e)&&"type"in e&&typeof e.type=="string"}var Xee=Symbol.for("immer-nothing"),U7=Symbol.for("immer-draftable"),Fo=Symbol.for("immer-state");function Xc(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var jl=Object,Tg=jl.getPrototypeOf,v_="constructor",BS="prototype",Kk="configurable",y_="enumerable",UN="writable",j1="value",fA=e=>!!e&&!!e[Fo];function hu(e){var t;return e?Jee(e)||PS(e)||!!e[U7]||!!((t=e[v_])!=null&&t[U7])||kS(e)||TS(e):!1}var GDe=jl[BS][v_].toString(),Q7=new WeakMap;function Jee(e){if(!e||!uO(e))return!1;const t=Tg(e);if(t===null||t===jl[BS])return!0;const r=jl.hasOwnProperty.call(t,v_)&&t[v_];if(r===Object)return!0;if(!jp(r))return!1;let n=Q7.get(r);return n===void 0&&(n=Function.toString.call(r),Q7.set(r,n)),n===GDe}function jS(e,t,r=!0){Ib(e)===0?(r?Reflect.ownKeys(e):jl.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((n,a)=>t(a,n,e))}function Ib(e){const t=e[Fo];return t?t.type_:PS(e)?1:kS(e)?2:TS(e)?3:0}var V7=(e,t,r=Ib(e))=>r===2?e.has(t):jl[BS].hasOwnProperty.call(e,t),qk=(e,t,r=Ib(e))=>r===2?e.get(t):e[t],b_=(e,t,r,n=Ib(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function zDe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var PS=Array.isArray,kS=e=>e instanceof Map,TS=e=>e instanceof Set,uO=e=>typeof e=="object",jp=e=>typeof e=="function",Zj=e=>typeof e=="boolean";function WDe(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var Fd=e=>e.copy_||e.base_,dO=e=>e.modified_?e.copy_:e.base_;function Gk(e,t){if(kS(e))return new Map(e);if(TS(e))return new Set(e);if(PS(e))return Array[BS].slice.call(e);const r=Jee(e);if(t===!0||t==="class_only"&&!r){const n=jl.getOwnPropertyDescriptors(e);delete n[Fo];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const o=a[s],l=n[o];l[UN]===!1&&(l[UN]=!0,l[Kk]=!0),(l.get||l.set)&&(n[o]={[Kk]:!0,[UN]:!0,[y_]:l[y_],[j1]:e[o]})}return jl.create(Tg(e),n)}else{const n=Tg(e);if(n!==null&&r)return{...e};const a=jl.create(n);return jl.assign(a,e)}}function AO(e,t=!1){return FS(e)||fA(e)||!hu(e)||(Ib(e)>1&&jl.defineProperties(e,{set:V2,add:V2,clear:V2,delete:V2}),jl.freeze(e),t&&jS(e,(r,n)=>{AO(n,!0)},!1)),e}function XDe(){Xc(2)}var V2={[j1]:XDe};function FS(e){return e===null||!uO(e)?!0:jl.isFrozen(e)}var w_="MapSet",zk="Patches",H7="ArrayMethods",Yee={};function u0(e){const t=Yee[e];return t||Xc(0,e),t}var $7=e=>!!Yee[e],P1,Zee=()=>P1,JDe=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:$7(w_)?u0(w_):void 0,arrayMethodsPlugin_:$7(H7)?u0(H7):void 0});function K7(e,t){t&&(e.patchPlugin_=u0(zk),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Wk(e){Xk(e),e.drafts_.forEach(YDe),e.drafts_=null}function Xk(e){e===P1&&(P1=e.parent_)}var q7=e=>P1=JDe(P1,e);function YDe(e){const t=e[Fo];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function G7(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[Fo].modified_&&(Wk(t),Xc(4)),hu(e)&&(e=z7(t,e));const{patchPlugin_:a}=t;a&&a.generateReplacementPatches_(r[Fo].base_,e,t)}else e=z7(t,r);return ZDe(t,e,!0),Wk(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Xee?e:void 0}function z7(e,t){if(FS(t))return t;const r=t[Fo];if(!r)return N_(t,e.handledSet_,e);if(!OS(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);rte(r,e)}return r.copy_}function ZDe(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&AO(t,r)}function ete(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var OS=(e,t)=>e.scope_===t,eRe=[];function tte(e,t,r,n){const a=Fd(e),s=e.type_;if(n!==void 0&&qk(a,n,s)===t){b_(a,n,r,s);return}if(!e.draftLocations_){const l=e.draftLocations_=new Map;jS(a,(c,u)=>{if(fA(u)){const d=l.get(u)||[];d.push(c),l.set(u,d)}})}const o=e.draftLocations_.get(t)??eRe;for(const l of o)b_(a,l,r,s)}function tRe(e,t,r){e.callbacks_.push(function(a){var l;const s=t;if(!s||!OS(s,a))return;(l=a.mapSetPlugin_)==null||l.fixSetContents(s);const o=dO(s);tte(e,s.draft_??s,o,r),rte(s,a)})}function rte(e,t){var n;if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(((n=e.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:a}=t;if(a){const s=a.getPath(e);s&&a.generatePatches_(e,s,t)}ete(e)}}function rRe(e,t,r){const{scope_:n}=e;if(fA(r)){const a=r[Fo];OS(a,n)&&a.callbacks_.push(function(){QN(e);const o=dO(a);tte(e,r,o,t)})}else hu(r)&&e.callbacks_.push(function(){const s=Fd(e);e.type_===3?s.has(r)&&N_(r,n.handledSet_,n):qk(s,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&N_(qk(e.copy_,t,e.type_),n.handledSet_,n)})}function N_(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||fA(e)||t.has(e)||!hu(e)||FS(e)||(t.add(e),jS(e,(n,a)=>{if(fA(a)){const s=a[Fo];if(OS(s,r)){const o=dO(s);b_(e,n,o,e.type_),ete(s)}}else hu(a)&&N_(a,t,r)})),e}function nRe(e,t){const r=PS(e),n={type_:r?1:0,scope_:t?t.scope_:Zee(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=n,s=C_;r&&(a=[n],s=k1);const{revoke:o,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=o,[l,n]}var C_={get(e,t){if(t===Fo)return e;let r=e.scope_.arrayMethodsPlugin_;const n=e.type_===1&&typeof t=="string";if(n&&r!=null&&r.isArrayOperationMethod(t))return r.createMethodInterceptor(e,t);const a=Fd(e);if(!V7(a,t,e.type_))return aRe(e,a,t);const s=a[t];if(e.finalized_||!hu(s)||n&&e.operationMethod&&(r!=null&&r.isMutatingArrayMethod(e.operationMethod))&&WDe(t))return s;if(s===e5(e.base_,t)){QN(e);const o=e.type_===1?+t:t,l=Yk(e.scope_,s,e,o);return e.copy_[o]=l}return s},has(e,t){return t in Fd(e)},ownKeys(e){return Reflect.ownKeys(Fd(e))},set(e,t,r){const n=nte(Fd(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=e5(Fd(e),t),s=a==null?void 0:a[Fo];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(zDe(r,a)&&(r!==void 0||V7(e.base_,t,e.type_)))return!0;QN(e),Jk(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),rRe(e,t,r)),!0},deleteProperty(e,t){return QN(e),e5(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Jk(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Fd(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[UN]:!0,[Kk]:e.type_!==1||t!=="length",[y_]:n[y_],[j1]:r[t]}},defineProperty(){Xc(11)},getPrototypeOf(e){return Tg(e.base_)},setPrototypeOf(){Xc(12)}},k1={};for(let e in C_){let t=C_[e];k1[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}}k1.deleteProperty=function(e,t){return k1.set.call(this,e,t,void 0)};k1.set=function(e,t,r){return C_.set.call(this,e[0],t,r,e[0])};function e5(e,t){const r=e[Fo];return(r?Fd(r):e)[t]}function aRe(e,t,r){var a;const n=nte(t,r);return n?j1 in n?n[j1]:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function nte(e,t){if(!(t in e))return;let r=Tg(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Tg(r)}}function Jk(e){e.modified_||(e.modified_=!0,e.parent_&&Jk(e.parent_))}function QN(e){e.copy_||(e.assigned_=new Map,e.copy_=Gk(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var sRe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,a)=>{if(jp(r)&&!jp(n)){const o=n;n=r;const l=this;return function(u=o,...d){return l.produce(u,A=>n.call(this,A,...d))}}jp(n)||Xc(6),a!==void 0&&!jp(a)&&Xc(7);let s;if(hu(r)){const o=q7(this),l=Yk(o,r,void 0);let c=!0;try{s=n(l),c=!1}finally{c?Wk(o):Xk(o)}return K7(o,a),G7(s,o)}else if(!r||!uO(r)){if(s=n(r),s===void 0&&(s=r),s===Xee&&(s=void 0),this.autoFreeze_&&AO(s,!0),a){const o=[],l=[];u0(zk).generateReplacementPatches_(r,s,{patches_:o,inversePatches_:l}),a(o,l)}return s}else Xc(1,r)},this.produceWithPatches=(r,n)=>{if(jp(r))return(l,...c)=>this.produceWithPatches(l,u=>r(u,...c));let a,s;return[this.produce(r,n,(l,c)=>{a=l,s=c}),a,s]},Zj(t==null?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),Zj(t==null?void 0:t.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),Zj(t==null?void 0:t.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){hu(t)||Xc(8),fA(t)&&(t=ou(t));const r=q7(this),n=Yk(r,t,void 0);return n[Fo].isManual_=!0,Xk(r),n}finishDraft(t,r){const n=t&&t[Fo];(!n||!n.isManual_)&&Xc(9);const{scope_:a}=n;return K7(a,r),G7(void 0,a)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const s=r[n];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}n>-1&&(r=r.slice(n+1));const a=u0(zk).applyPatches_;return fA(t)?a(t,r):this.produce(t,s=>a(s,r))}};function Yk(e,t,r,n){const[a,s]=kS(t)?u0(w_).proxyMap_(t,r):TS(t)?u0(w_).proxySet_(t,r):nRe(t,r);return((r==null?void 0:r.scope_)??Zee()).drafts_.push(a),s.callbacks_=(r==null?void 0:r.callbacks_)??[],s.key_=n,r&&n!==void 0?tRe(r,s,n):s.callbacks_.push(function(c){var d;(d=c.mapSetPlugin_)==null||d.fixSetContents(s);const{patchPlugin_:u}=c;s.modified_&&u&&u.generatePatches_(s,[],c)}),a}function ou(e){return fA(e)||Xc(10,e),ate(e)}function ate(e){if(!hu(e)||FS(e))return e;const t=e[Fo];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Gk(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Gk(e,!0);return jS(r,(a,s)=>{b_(r,a,ate(s))},n),t&&(t.finalized_=!1),r}var iRe=new sRe,ste=iRe.produce;function ite(e){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,e):a(s)}var oRe=ite(),lRe=ite,cRe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?x_:x_.apply(null,arguments)};function Bc(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(kl(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>Wee(n)&&n.type===e,r}var ote=class Qv extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Qv.prototype)}static get[Symbol.species](){return Qv}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Qv(...t[0].concat(this)):new Qv(...t.concat(this))}};function W7(e){return hu(e)?ste(e,()=>{}):e}function H2(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function uRe(e){return typeof e=="boolean"}var dRe=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=t??{};let o=new ote;return r&&(uRe(r)?o.push(oRe):o.push(lRe(r.extraArgument))),o},lte="RTK_autoBatch",Ca=()=>e=>({payload:e,meta:{[lte]:!0}}),X7=e=>t=>{setTimeout(t,e)},cte=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,s=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:X7(10):e.type==="callback"?e.queueNotification:X7(e.timeout),u=()=>{o=!1,s&&(s=!1,l.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const A=()=>a&&d(),f=n.subscribe(A);return l.add(d),()=>{f(),l.delete(d)}},dispatch(d){var A;try{return a=!((A=d==null?void 0:d.meta)!=null&&A[lte]),s=!a,s&&(o||(o=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},ARe=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new ote(e);return n&&a.push(cte(typeof n=="object"?n:void 0)),a};function hRe(e){const t=dRe(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let l;if(typeof r=="function")l=r;else if(cO(r))l=zee(r);else throw new Error(kl(1));let c;typeof n=="function"?c=n(t):c=t();let u=x_;a&&(u=cRe({trace:!1,...typeof a=="object"&&a}));const d=qDe(...c),A=ARe(d);let f=typeof o=="function"?o(A):A();const h=u(...f);return Gee(l,s,h)}function ute(e){const t={},r=[];let n;const a={addCase(s,o){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(kl(28));if(l in t)throw new Error(kl(29));return t[l]=o,a},addAsyncThunk(s,o){return o.pending&&(t[s.pending.type]=o.pending),o.rejected&&(t[s.rejected.type]=o.rejected),o.fulfilled&&(t[s.fulfilled.type]=o.fulfilled),o.settled&&r.push({matcher:s.settled,reducer:o.settled}),a},addMatcher(s,o){return r.push({matcher:s,reducer:o}),a},addDefaultCase(s){return n=s,a}};return e(a),[t,r,n]}function fRe(e){return typeof e=="function"}function mRe(e,t){let[r,n,a]=ute(t),s;if(fRe(e))s=()=>W7(e());else{const l=W7(e);s=()=>l}function o(l=s(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,A)=>{if(A)if(fA(d)){const h=A(d,c);return h===void 0?d:h}else{if(hu(d))return ste(d,f=>A(f,c));{const f=A(d,c);if(f===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return d},l)}return o.getInitialState=s,o}var pRe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",gRe=(e=21)=>{let t="",r=e;for(;r--;)t+=pRe[Math.random()*64|0];return t},xRe=Symbol.for("rtk-slice-createasyncthunk");function vRe(e,t){return`${e}/${t}`}function yRe({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[xRe];return function(a){const{name:s,reducerPath:o=s}=a;if(!s)throw new Error(kl(11));const l=(typeof a.reducers=="function"?a.reducers(wRe()):a.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(_,T){const P=typeof _=="string"?_:_.type;if(!P)throw new Error(kl(12));if(P in u.sliceCaseReducersByType)throw new Error(kl(13));return u.sliceCaseReducersByType[P]=T,d},addMatcher(_,T){return u.sliceMatchers.push({matcher:_,reducer:T}),d},exposeAction(_,T){return u.actionCreators[_]=T,d},exposeCaseReducer(_,T){return u.sliceCaseReducersByName[_]=T,d}};c.forEach(_=>{const T=l[_],P={reducerName:_,type:vRe(s,_),createNotation:typeof a.reducers=="function"};CRe(T)?ERe(P,T,d,t):NRe(P,T,d)});function A(){const[_={},T=[],P=void 0]=typeof a.extraReducers=="function"?ute(a.extraReducers):[a.extraReducers],C={..._,...u.sliceCaseReducersByType};return mRe(a.initialState,S=>{for(let I in C)S.addCase(I,C[I]);for(let I of u.sliceMatchers)S.addMatcher(I.matcher,I.reducer);for(let I of T)S.addMatcher(I.matcher,I.reducer);P&&S.addDefaultCase(P)})}const f=_=>_,h=new Map,m=new WeakMap;let p;function g(_,T){return p||(p=A()),p(_,T)}function x(){return p||(p=A()),p.getInitialState()}function y(_,T=!1){function P(S){let I=S[_];return typeof I>"u"&&T&&(I=H2(m,P,x)),I}function C(S=f){const I=H2(h,T,()=>new WeakMap);return H2(I,S,()=>{const L={};for(const[E,j]of Object.entries(a.selectors??{}))L[E]=bRe(j,S,()=>H2(m,S,x),T);return L})}return{reducerPath:_,getSelectors:C,get selectors(){return C(P)},selectSlice:P}}const b={name:s,reducer:g,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:x,...y(o),injectInto(_,{reducerPath:T,...P}={}){const C=T??o;return _.inject({reducerPath:C,reducer:g},P),{...b,...y(C,!0)}}};return b}}function bRe(e,t,r,n){function a(s,...o){let l=t(s);return typeof l>"u"&&n&&(l=r()),e(l,...o)}return a.unwrapped=e,a}var nl=yRe();function wRe(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function NRe({type:e,reducerName:t,createNotation:r},n,a){let s,o;if("reducer"in n){if(r&&!_Re(n))throw new Error(kl(17));s=n.reducer,o=n.prepare}else s=n;a.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?Bc(e,o):Bc(e))}function CRe(e){return e._reducerDefinitionType==="asyncThunk"}function _Re(e){return e._reducerDefinitionType==="reducerWithPrepare"}function ERe({type:e,reducerName:t},r,n,a){if(!a)throw new Error(kl(18));const{payloadCreator:s,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=r,A=a(e,s,d);n.exposeAction(t,A),o&&n.addCase(A.fulfilled,o),l&&n.addCase(A.pending,l),c&&n.addCase(A.rejected,c),u&&n.addMatcher(A.settled,u),n.exposeCaseReducer(t,{fulfilled:o||$2,pending:l||$2,rejected:c||$2,settled:u||$2})}function $2(){}var SRe="task",dte="listener",Ate="completed",hO="cancelled",IRe=`task-${hO}`,BRe=`task-${Ate}`,Zk=`${dte}-${hO}`,jRe=`${dte}-${Ate}`,DS=class{constructor(e){_n(this,"name","TaskAbortError");_n(this,"message");this.code=e,this.message=`${SRe} ${hO} (reason: ${e})`}},fO=(e,t)=>{if(typeof e!="function")throw new TypeError(kl(32))},__=()=>{},hte=(e,t=__)=>(e.catch(t),e),fte=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Om=e=>{if(e.aborted)throw new DS(e.reason)};function mte(e,t){let r=__;return new Promise((n,a)=>{const s=()=>a(new DS(e.reason));if(e.aborted){s();return}r=fte(e,s),t.finally(()=>r()).then(n,a)}).finally(()=>{r=__})}var PRe=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof DS?"cancelled":"rejected",error:r}}finally{t==null||t()}},E_=e=>t=>hte(mte(e,t).then(r=>(Om(e),r))),pte=e=>{const t=E_(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:cg}=Object,J7={},RS="listenerMiddleware",kRe=(e,t)=>{const r=n=>fte(e,()=>n.abort(e.reason));return(n,a)=>{fO(n);const s=new AbortController;r(s);const o=PRe(async()=>{Om(e),Om(s.signal);const l=await n({pause:E_(s.signal),delay:pte(s.signal),signal:s.signal});return Om(s.signal),l},()=>s.abort(BRe));return a!=null&&a.autoJoin&&t.push(o.catch(__)),{result:E_(e)(o),cancel(){s.abort(IRe)}}}},TRe=(e,t)=>{const r=async(n,a)=>{Om(t);let s=()=>{};const l=[new Promise((c,u)=>{let d=e({predicate:n,effect:(A,f)=>{f.unsubscribe(),c([A,f.getState(),f.getOriginalState()])}});s=()=>{d(),u()}})];a!=null&&l.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await mte(t,Promise.race(l));return Om(t),c}finally{s()}};return(n,a)=>hte(r(n,a))},gte=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:s}=e;if(t)a=Bc(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(kl(21));return fO(s),{predicate:a,type:t,effect:s}},xte=cg(e=>{const{type:t,predicate:r,effect:n}=gte(e);return{id:gRe(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(kl(22))}}},{withTypes:()=>xte}),Y7=(e,t)=>{const{type:r,effect:n,predicate:a}=gte(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},eT=e=>{e.pending.forEach(t=>{t.abort(Zk)})},FRe=(e,t)=>()=>{for(const r of t.keys())eT(r);e.clear()},Z7=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},vte=cg(Bc(`${RS}/add`),{withTypes:()=>vte}),ORe=Bc(`${RS}/removeAll`),yte=cg(Bc(`${RS}/remove`),{withTypes:()=>yte}),DRe=(...e)=>{console.error(`${RS}/error`,...e)},Bb=(e={})=>{const t=new Map,r=new Map,n=h=>{const m=r.get(h)??0;r.set(h,m+1)},a=h=>{const m=r.get(h)??1;m===1?r.delete(h):r.set(h,m-1)},{extra:s,onError:o=DRe}=e;fO(o);const l=h=>(h.unsubscribe=()=>t.delete(h.id),t.set(h.id,h),m=>{h.unsubscribe(),m!=null&&m.cancelActive&&eT(h)}),c=h=>{const m=Y7(t,h)??xte(h);return l(m)};cg(c,{withTypes:()=>c});const u=h=>{const m=Y7(t,h);return m&&(m.unsubscribe(),h.cancelActive&&eT(m)),!!m};cg(u,{withTypes:()=>u});const d=async(h,m,p,g)=>{const x=new AbortController,y=TRe(c,x.signal),b=[];try{h.pending.add(x),n(h),await Promise.resolve(h.effect(m,cg({},p,{getOriginalState:g,condition:(_,T)=>y(_,T).then(Boolean),take:y,delay:pte(x.signal),pause:E_(x.signal),extra:s,signal:x.signal,fork:kRe(x.signal,b),unsubscribe:h.unsubscribe,subscribe:()=>{t.set(h.id,h)},cancelActiveListeners:()=>{h.pending.forEach((_,T,P)=>{_!==x&&(_.abort(Zk),P.delete(_))})},cancel:()=>{x.abort(Zk),h.pending.delete(x)},throwIfCancelled:()=>{Om(x.signal)}})))}catch(_){_ instanceof DS||Z7(o,_,{raisedBy:"effect"})}finally{await Promise.all(b),x.abort(jRe),a(h),h.pending.delete(x)}},A=FRe(t,r);return{middleware:h=>m=>p=>{if(!Wee(p))return m(p);if(vte.match(p))return c(p.payload);if(ORe.match(p)){A();return}if(yte.match(p))return u(p.payload);let g=h.getState();const x=()=>{if(g===J7)throw new Error(kl(23));return g};let y;try{if(y=m(p),t.size>0){const b=h.getState(),_=Array.from(t.values());for(const T of _){let P=!1;try{P=T.predicate(p,b,g)}catch(C){P=!1,Z7(o,C,{raisedBy:"predicate"})}P&&d(T,p,h,x)}}}finally{g=J7}return y},startListening:c,stopListening:u,clearListeners:A}};function kl(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var RRe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},bte=nl({name:"chartLayout",initialState:RRe,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,a,s;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(a=t.payload.bottom)!==null&&a!==void 0?a:0,e.margin.left=(s=t.payload.left)!==null&&s!==void 0?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:LRe,setLayout:MRe,setChartSize:URe,setScale:QRe}=bte.actions,VRe=bte.reducer;function wte(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function qa(e){return Number.isFinite(e)}function gf(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function eV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eV(Object(r),!0).forEach(function(n){HRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HRe(e,t,r){return(t=$Re(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Re(e){var t=KRe(e,"string");return typeof t=="symbol"?t:t+""}function KRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xa(e,t,r){return mi(e)||mi(t)?r:rd(t)?c0(e,t,r):typeof t=="function"?t(e):r}var qRe=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:s,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&s!=="center"&&Sr(e[s]))return qp(qp({},e),{},{[s]:e[s]+(n||0)});if((l==="horizontal"||l==="vertical"&&s==="center")&&o!=="middle"&&Sr(e[o]))return qp(qp({},e),{},{[o]:e[o]+(a||0)})}return e},F0=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",tV=1e-4,GRe=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-tV,s=Math.max(n[0],n[1])+tV,o=e(t[0]),l=e(t[r-1]);(o<a||o>s||l<a||l>s)&&e.domain([t[0],t[r-1]])}},zRe=(e,t)=>{if(!t||t.length!==2||!Sr(t[0])||!Sr(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!Sr(e[0])||e[0]<r)&&(a[0]=r),(!Sr(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},WRe=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var s=0,o=0,l=0;l<r;++l){var c=e[l],u=c==null?void 0:c[a];if(u!=null){var d=u[1],A=u[0],f=td(d)?A:d;f>=0?(u[0]=s,u[1]=s+f,s=d):(u[0]=o,u[1]=o+f,o=d)}}}},XRe=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var s=0,o=0;o<r;++o){var l=e[o],c=l==null?void 0:l[a];if(c!=null){var u=td(c[1])?c[0]:c[1];u>=0?(c[0]=s,c[1]=s+u,s=c[1]):(c[0]=0,c[1]=0)}}}},JRe={sign:WRe,expand:SOe,none:l0,silhouette:IOe,wiggle:BOe,positive:XRe},YRe=(e,t,r)=>{var n,a=(n=JRe[r])!==null&&n!==void 0?n:l0,s=EOe().keys(t).value((l,c)=>Number(xa(l,c,0))).order(Hk).offset(a),o=s(e);return o.forEach((l,c)=>{l.forEach((u,d)=>{var A=xa(e[d],t[c],0);Array.isArray(A)&&A.length===2&&Sr(A[0])&&Sr(A[1])&&(u[0]=A[0],u[1]=A[1])})}),o};function ZRe(e){return e==null?void 0:String(e)}var rV=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:s,index:o}=e;if(t.type==="category")return r[o]?r[o].coordinate+n:null;var l=xa(s,t.dataKey,t.scale.domain()[o]);return mi(l)?null:t.scale(l)-a/2+n},eLe=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},tLe=e=>{var t=e.flat(2).filter(Sr);return[Math.min(...t),Math.max(...t)]},rLe=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],nLe=(e,t,r)=>{if(e!=null)return rLe(Object.keys(e).reduce((n,a)=>{var s=e[a];if(!s)return n;var{stackedData:o}=s,l=o.reduce((c,u)=>{var d=wte(u,t,r),A=tLe(d);return!qa(A[0])||!qa(A[1])?c:[Math.min(c[0],A[0]),Math.max(c[1],A[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},nV=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,aV=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,S_=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=IS(t,d=>d.coordinate),s=1/0,o=1,l=a.length;o<l;o++){var c=a[o],u=a[o-1];s=Math.min(((c==null?void 0:c.coordinate)||0)-((u==null?void 0:u.coordinate)||0),s)}return s===1/0?0:s}return r?void 0:0};function sV(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:s}=e;return qp(qp({},t),{},{dataKey:r,payload:n,value:a,name:s})}function LS(e,t){if(e)return String(e);if(typeof t=="string")return t}var aLe=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},sLe=(e,t)=>t==="centric"?e.angle:e.radius,SA=e=>e.layout.width,IA=e=>e.layout.height,iLe=e=>e.layout.scale,Nte=e=>e.layout.margin,MS=Et(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),US=Et(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Cte="data-recharts-item-index",_te="data-recharts-item-id",jb=60;function iV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function K2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iV(Object(r),!0).forEach(function(n){oLe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oLe(e,t,r){return(t=lLe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lLe(e){var t=cLe(e,"string");return typeof t=="symbol"?t:t+""}function cLe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uLe=e=>e.brush.height;function dLe(e){var t=US(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:jb;return r+a}return r},0)}function ALe(e){var t=US(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:jb;return r+a}return r},0)}function hLe(e){var t=MS(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function fLe(e){var t=MS(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Ws=Et([SA,IA,Nte,uLe,dLe,ALe,hLe,fLe,Kee,MDe],(e,t,r,n,a,s,o,l,c,u)=>{var d={left:(r.left||0)+a,right:(r.right||0)+s},A={top:(r.top||0)+o,bottom:(r.bottom||0)+l},f=K2(K2({},A),d),h=f.bottom;f.bottom+=n,f=qRe(f,c,u);var m=e-f.left-f.right,p=t-f.top-f.bottom;return K2(K2({brushBottom:h},f),{},{width:Math.max(m,0),height:Math.max(p,0)})}),mLe=Et(Ws,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),mO=Et(SA,IA,(e,t)=>({x:0,y:0,width:e,height:t})),pLe=v.createContext(null),Ul=()=>v.useContext(pLe)!=null,QS=e=>e.brush,VS=Et([QS,Ws,Nte],(e,t,r)=>({height:e.height,x:Sr(e.x)?e.x:t.left,y:Sr(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:Sr(e.width)?e.width:t.width})),Ete={},Ste={},Ite={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:s}={}){let o,l=null;const c=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{l!==null&&(r.apply(o,l),o=void 0,l=null)},A=()=>{u&&d(),p()};let f=null;const h=()=>{f!=null&&clearTimeout(f),f=setTimeout(()=>{f=null,A()},n)},m=()=>{f!==null&&(clearTimeout(f),f=null)},p=()=>{m(),o=void 0,l=null},g=()=>{d()},x=function(...y){if(a!=null&&a.aborted)return;o=this,l=y;const b=f==null;h(),c&&b&&d()};return x.schedule=h,x.cancel=p,x.flush=g,a==null||a.addEventListener("abort",p,{once:!0}),x}e.debounce=t})(Ite);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ite;function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:o=!1,trailing:l=!0,maxWait:c}=s,u=Array(2);o&&(u[0]="leading"),l&&(u[1]="trailing");let d,A=null;const f=t.debounce(function(...p){d=n.apply(this,p),A=null},a,{edges:u}),h=function(...p){return c!=null&&(A===null&&(A=Date.now()),Date.now()-A>=c)?(d=n.apply(this,p),A=Date.now(),f.cancel(),f.schedule(),d):(f.apply(this,p),d)},m=()=>(f.flush(),d);return h.cancel=f.cancel,h.flush=m,h}e.debounce=r})(Ste);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ste;function r(n,a=0,s={}){const{leading:o=!0,trailing:l=!0}=s;return t.debounce(n,a,{leading:o,maxWait:a,trailing:l})}e.throttle=r})(Ete);var gLe=Ete.throttle;const xLe=yA(gLe);var oV=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(r.replace(/%s/g,()=>a[o++]))}},Bte=(e,t,r)=>{var{width:n="100%",height:a="100%",aspect:s,maxHeight:o}=r,l=hA(n)?e:Number(n),c=hA(a)?t:Number(a);return s&&s>0&&(l?c=l/s:c&&(l=c*s),o&&c!=null&&c>o&&(c=o)),{calculatedWidth:l,calculatedHeight:c}},vLe={width:0,height:0,overflow:"visible"},yLe={width:0,overflowX:"visible"},bLe={height:0,overflowY:"visible"},wLe={},NLe=e=>{var{width:t,height:r}=e,n=hA(t),a=hA(r);return n&&a?vLe:n?yLe:a?bLe:wLe};function CLe(e){var{width:t,height:r,aspect:n}=e,a=t,s=r;return a===void 0&&s===void 0?(a="100%",s="100%"):a===void 0?a=n&&n>0?void 0:"100%":s===void 0&&(s=n&&n>0?void 0:"100%"),{width:a,height:s}}function tT(){return tT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tT.apply(null,arguments)}function lV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cV(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lV(Object(r),!0).forEach(function(n){_Le(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _Le(e,t,r){return(t=ELe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ELe(e){var t=SLe(e,"string");return typeof t=="symbol"?t:t+""}function SLe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jte=v.createContext({width:-1,height:-1});function ILe(e){return gf(e.width)&&gf(e.height)}function Pte(e){var{children:t,width:r,height:n}=e,a=v.useMemo(()=>({width:r,height:n}),[r,n]);return ILe(a)?v.createElement(jte.Provider,{value:a},t):null}var pO=()=>v.useContext(jte),BLe=v.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a,height:s,minWidth:o=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:A,className:f,onResize:h,style:m={}}=e,p=v.useRef(null),g=v.useRef();g.current=h,v.useImperativeHandle(t,()=>p.current);var[x,y]=v.useState({containerWidth:n.width,containerHeight:n.height}),b=v.useCallback((S,I)=>{y(L=>{var E=Math.round(S),j=Math.round(I);return L.containerWidth===E&&L.containerHeight===j?L:{containerWidth:E,containerHeight:j}})},[]);v.useEffect(()=>{if(p.current==null||typeof ResizeObserver>"u")return Eb;var S=j=>{var R,{width:W,height:de}=j[0].contentRect;b(W,de),(R=g.current)===null||R===void 0||R.call(g,W,de)};d>0&&(S=xLe(S,d,{trailing:!0,leading:!1}));var I=new ResizeObserver(S),{width:L,height:E}=p.current.getBoundingClientRect();return b(L,E),I.observe(p.current),()=>{I.disconnect()}},[b,d]);var{containerWidth:_,containerHeight:T}=x;oV(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:P,calculatedHeight:C}=Bte(_,T,{width:a,height:s,aspect:r,maxHeight:c});return oV(P!=null&&P>0||C!=null&&C>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,C,a,s,o,l,r),v.createElement("div",{id:A?"".concat(A):void 0,className:Qn("recharts-responsive-container",f),style:cV(cV({},m),{},{width:a,height:s,minWidth:o,minHeight:l,maxHeight:c}),ref:p},v.createElement("div",{style:NLe({width:a,height:s})},v.createElement(Pte,{width:P,height:C},u)))}),uV=v.forwardRef((e,t)=>{var r=pO();if(gf(r.width)&&gf(r.height))return e.children;var{width:n,height:a}=CLe({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:s,calculatedHeight:o}=Bte(void 0,void 0,{width:n,height:a,aspect:e.aspect,maxHeight:e.maxHeight});return Sr(s)&&Sr(o)?v.createElement(Pte,{width:s,height:o},e.children):v.createElement(BLe,tT({},e,{width:n,height:a,ref:t}))});function kte(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var HS=()=>{var e,t=Ul(),r=Nr(mLe),n=Nr(VS),a=(e=Nr(QS))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},jLe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},PLe=()=>{var e;return(e=Nr(Ws))!==null&&e!==void 0?e:jLe},Tte=()=>Nr(SA),Fte=()=>Nr(IA),kLe=()=>Nr(e=>e.layout.margin),Nn=e=>e.layout.layoutType,Pb=()=>Nr(Nn),TLe=()=>{var e=Pb();return e!==void 0},$S=e=>{var t=ca(),r=Ul(),{width:n,height:a}=e,s=pO(),o=n,l=a;return s&&(o=s.width>0?s.width:n,l=s.height>0?s.height:a),v.useEffect(()=>{!r&&gf(o)&&gf(l)&&t(URe({width:o,height:l}))},[t,r,o,l]),null},Ote=Symbol.for("immer-nothing"),dV=Symbol.for("immer-draftable"),Rl=Symbol.for("immer-state");function Jc(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var T1=Object.getPrototypeOf;function Fg(e){return!!e&&!!e[Rl]}function d0(e){var t;return e?Dte(e)||Array.isArray(e)||!!e[dV]||!!((t=e.constructor)!=null&&t[dV])||kb(e)||qS(e):!1}var FLe=Object.prototype.constructor.toString(),AV=new WeakMap;function Dte(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=AV.get(r);return n===void 0&&(n=Function.toString.call(r),AV.set(r,n)),n===FLe}function I_(e,t,r=!0){KS(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((n,a)=>t(a,n,e))}function KS(e){const t=e[Rl];return t?t.type_:Array.isArray(e)?1:kb(e)?2:qS(e)?3:0}function rT(e,t){return KS(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Rte(e,t,r){const n=KS(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function OLe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function kb(e){return e instanceof Map}function qS(e){return e instanceof Set}function am(e){return e.copy_||e.base_}function nT(e,t){if(kb(e))return new Map(e);if(qS(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Dte(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Rl];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const o=a[s],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(T1(e),n)}else{const n=T1(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function gO(e,t=!1){return GS(e)||Fg(e)||!d0(e)||(KS(e)>1&&Object.defineProperties(e,{set:q2,add:q2,clear:q2,delete:q2}),Object.freeze(e),t&&Object.values(e).forEach(r=>gO(r,!0))),e}function DLe(){Jc(2)}var q2={value:DLe};function GS(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var RLe={};function A0(e){const t=RLe[e];return t||Jc(0,e),t}var F1;function Lte(){return F1}function LLe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function hV(e,t){t&&(A0("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function aT(e){sT(e),e.drafts_.forEach(MLe),e.drafts_=null}function sT(e){e===F1&&(F1=e.parent_)}function fV(e){return F1=LLe(F1,e)}function MLe(e){const t=e[Rl];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function mV(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Rl].modified_&&(aT(t),Jc(4)),d0(e)&&(e=B_(t,e),t.parent_||j_(t,e)),t.patches_&&A0("Patches").generateReplacementPatches_(r[Rl].base_,e,t.patches_,t.inversePatches_)):e=B_(t,r,[]),aT(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Ote?e:void 0}function B_(e,t,r){if(GS(t))return t;const n=e.immer_.shouldUseStrictIteration(),a=t[Rl];if(!a)return I_(t,(s,o)=>pV(e,a,t,s,o,r),n),t;if(a.scope_!==e)return t;if(!a.modified_)return j_(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const s=a.copy_;let o=s,l=!1;a.type_===3&&(o=new Set(s),s.clear(),l=!0),I_(o,(c,u)=>pV(e,a,s,c,u,r,l),n),j_(e,s,!1),r&&e.patches_&&A0("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function pV(e,t,r,n,a,s,o){if(a==null||typeof a!="object"&&!o)return;const l=GS(a);if(!(l&&!o)){if(Fg(a)){const c=s&&t&&t.type_!==3&&!rT(t.assigned_,n)?s.concat(n):void 0,u=B_(e,a,c);if(Rte(r,n,u),Fg(u))e.canAutoFreeze_=!1;else return}else o&&r.add(a);if(d0(a)&&!l){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===a&&l)return;B_(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(kb(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&j_(e,a)}}}function j_(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&gO(t,r)}function ULe(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Lte(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=xO;r&&(a=[n],s=O1);const{revoke:o,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=o,l}var xO={get(e,t){if(t===Rl)return e;const r=am(e);if(!rT(r,t))return QLe(e,r,t);const n=r[t];return e.finalized_||!d0(n)?n:n===t5(e.base_,t)?(r5(e),e.copy_[t]=oT(n,e)):n},has(e,t){return t in am(e)},ownKeys(e){return Reflect.ownKeys(am(e))},set(e,t,r){const n=Mte(am(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=t5(am(e),t),s=a==null?void 0:a[Rl];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(OLe(r,a)&&(r!==void 0||rT(e.base_,t)))return!0;r5(e),iT(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return t5(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,r5(e),iT(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=am(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Jc(11)},getPrototypeOf(e){return T1(e.base_)},setPrototypeOf(){Jc(12)}},O1={};I_(xO,(e,t)=>{O1[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});O1.deleteProperty=function(e,t){return O1.set.call(this,e,t,void 0)};O1.set=function(e,t,r){return xO.set.call(this,e[0],t,r,e[0])};function t5(e,t){const r=e[Rl];return(r?am(r):e)[t]}function QLe(e,t,r){var a;const n=Mte(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function Mte(e,t){if(!(t in e))return;let r=T1(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=T1(r)}}function iT(e){e.modified_||(e.modified_=!0,e.parent_&&iT(e.parent_))}function r5(e){e.copy_||(e.copy_=nT(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var VLe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const o=this;return function(c=s,...u){return o.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&Jc(6),n!==void 0&&typeof n!="function"&&Jc(7);let a;if(d0(t)){const s=fV(this),o=oT(t,void 0);let l=!0;try{a=r(o),l=!1}finally{l?aT(s):sT(s)}return hV(s,n),mV(a,s)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===Ote&&(a=void 0),this.autoFreeze_&&gO(a,!0),n){const s=[],o=[];A0("Patches").generateReplacementPatches_(t,a,s,o),n(s,o)}return a}else Jc(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let n,a;return[this.produce(t,r,(o,l)=>{n=o,a=l}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){d0(e)||Jc(8),Fg(e)&&(e=HLe(e));const t=fV(this),r=oT(e,void 0);return r[Rl].isManual_=!0,sT(t),r}finishDraft(e,t){const r=e&&e[Rl];(!r||!r.isManual_)&&Jc(9);const{scope_:n}=r;return hV(n,t),mV(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=A0("Patches").applyPatches_;return Fg(e)?n(e,t):this.produce(e,a=>n(a,t))}};function oT(e,t){const r=kb(e)?A0("MapSet").proxyMap_(e,t):qS(e)?A0("MapSet").proxySet_(e,t):ULe(e,t);return(t?t.scope_:Lte()).drafts_.push(r),r}function HLe(e){return Fg(e)||Jc(10,e),Ute(e)}function Ute(e){if(!d0(e)||GS(e))return e;const t=e[Rl];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=nT(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=nT(e,!0);return I_(r,(a,s)=>{Rte(r,a,Ute(s))},n),t&&(t.finalized_=!1),r}var $Le=new VLe;$Le.produce;var KLe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Qte=nl({name:"legend",initialState:KLe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Ca()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,a=ou(e).payload.indexOf(r);a>-1&&(e.payload[a]=n)},prepare:Ca()},removeLegendPayload:{reducer(e,t){var r=ou(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Ca()}}}),{setLegendSize:gV,setLegendSettings:qLe,addLegendPayload:Vte,replaceLegendPayload:Hte,removeLegendPayload:$te}=Qte.actions,GLe=Qte.reducer,zLe=["contextPayload"];function lT(){return lT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lT.apply(null,arguments)}function xV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Og(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xV(Object(r),!0).forEach(function(n){WLe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WLe(e,t,r){return(t=XLe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XLe(e){var t=JLe(e,"string");return typeof t=="symbol"?t:t+""}function JLe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function YLe(e,t){if(e==null)return{};var r,n,a=ZLe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ZLe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function eMe(e){return e.value}function tMe(e){var{contextPayload:t}=e,r=YLe(e,zLe),n=Fee(t,e.payloadUniqBy,eMe),a=Og(Og({},r),{},{payload:n});return v.isValidElement(e.content)?v.cloneElement(e.content,a):typeof e.content=="function"?v.createElement(e.content,a):v.createElement(aDe,a)}function rMe(e,t,r,n,a,s){var{layout:o,align:l,verticalAlign:c}=t,u,d;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&o==="vertical"?u={left:((n||0)-s.width)/2}:u=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?d={top:((a||0)-s.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Og(Og({},u),d)}function nMe(e){var t=ca();return v.useEffect(()=>{t(qLe(e))},[t,e]),null}function aMe(e){var t=ca();return v.useEffect(()=>(t(gV(e)),()=>{t(gV({width:0,height:0}))}),[t,e]),null}function sMe(e,t,r,n){return e==="vertical"&&Sr(t)?{height:t}:e==="horizontal"?{width:r||n}:null}var iMe={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function cT(e){var t=Vi(e,iMe),r=VDe(),n=X3e(),a=kLe(),{width:s,height:o,wrapperStyle:l,portal:c}=t,[u,d]=qee([r]),A=Tte(),f=Fte();if(A==null||f==null)return null;var h=A-((a==null?void 0:a.left)||0)-((a==null?void 0:a.right)||0),m=sMe(t.layout,o,s,h),p=c?l:Og(Og({position:"absolute",width:(m==null?void 0:m.width)||s||"auto",height:(m==null?void 0:m.height)||o||"auto"},rMe(l,t,a,A,f,u)),l),g=c??n;if(g==null||r==null)return null;var x=v.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:d},v.createElement(nMe,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!c&&v.createElement(aMe,{width:u.width,height:u.height}),v.createElement(tMe,lT({},t,m,{margin:a,chartWidth:A,chartHeight:f,contextPayload:r})));return nu.createPortal(x,g)}cT.displayName="Legend";function uT(){return uT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uT.apply(null,arguments)}function vV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function n5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vV(Object(r),!0).forEach(function(n){oMe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oMe(e,t,r){return(t=lMe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lMe(e){var t=cMe(e,"string");return typeof t=="symbol"?t:t+""}function cMe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uMe(e){return Array.isArray(e)&&rd(e[0])&&rd(e[1])?e.join(" ~ "):e}var dMe=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:A,accessibilityLayer:f=!1}=e,h=()=>{if(s&&s.length){var T={padding:0,margin:0},P=(l?IS(s,l):s).map((C,S)=>{if(C.type==="none")return null;var I=C.formatter||o||uMe,{value:L,name:E}=C,j=L,R=E;if(I){var W=I(L,E,C,S,s);if(Array.isArray(W))[j,R]=W;else if(W!=null)j=W;else return null}var de=n5({display:"block",paddingTop:4,paddingBottom:4,color:C.color||"#000"},n);return v.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(S),style:de},rd(R)?v.createElement("span",{className:"recharts-tooltip-item-name"},R):null,rd(R)?v.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,v.createElement("span",{className:"recharts-tooltip-item-value"},j),v.createElement("span",{className:"recharts-tooltip-item-unit"},C.unit||""))});return v.createElement("ul",{className:"recharts-tooltip-item-list",style:T},P)}return null},m=n5({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),p=n5({margin:0},a),g=!mi(d),x=g?d:"",y=Qn("recharts-default-tooltip",c),b=Qn("recharts-tooltip-label",u);g&&A&&s!==void 0&&s!==null&&(x=A(d,s));var _=f?{role:"status","aria-live":"assertive"}:{};return v.createElement("div",uT({className:y,style:m},_),v.createElement("p",{className:b,style:p},v.isValidElement(x)?x:"".concat(x)),h())},Av="recharts-tooltip-wrapper",AMe={visibility:"hidden"};function hMe(e){var{coordinate:t,translateX:r,translateY:n}=e;return Qn(Av,{["".concat(Av,"-right")]:Sr(r)&&t&&Sr(t.x)&&r>=t.x,["".concat(Av,"-left")]:Sr(r)&&t&&Sr(t.x)&&r<t.x,["".concat(Av,"-bottom")]:Sr(n)&&t&&Sr(t.y)&&n>=t.y,["".concat(Av,"-top")]:Sr(n)&&t&&Sr(t.y)&&n<t.y})}function yV(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=e;if(s&&Sr(s[n]))return s[n];var d=r[n]-l-(a>0?a:0),A=r[n]+a;if(t[n])return o[n]?d:A;var f=c[n];if(f==null)return 0;if(o[n]){var h=d,m=f;return h<m?Math.max(A,f):Math.max(d,f)}if(u==null)return 0;var p=A+l,g=f+u;return p>g?Math.max(d,f):Math.max(A,f)}function fMe(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function mMe(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,u,d,A;return o.height>0&&o.width>0&&r?(d=yV({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),A=yV({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=fMe({translateX:d,translateY:A,useTranslate3d:l})):u=AMe,{cssProperties:u,cssClasses:hMe({translateX:d,translateY:A,coordinate:r})}}function bV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function G2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bV(Object(r),!0).forEach(function(n){dT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dT(e,t,r){return(t=pMe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pMe(e){var t=gMe(e,"string");return typeof t=="symbol"?t:t+""}function gMe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class xMe extends v.PureComponent{constructor(){super(...arguments),dT(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),dT(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:o,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:A,useTranslate3d:f,viewBox:h,wrapperStyle:m,lastBoundingBox:p,innerRef:g,hasPortalFromProps:x}=this.props,{cssClasses:y,cssProperties:b}=mMe({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:u,position:d,reverseDirection:A,tooltipBox:{height:p.height,width:p.width},useTranslate3d:f,viewBox:h}),_=x?{}:G2(G2({transition:c&&t?"transform ".concat(n,"ms ").concat(a):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),T=G2(G2({},_),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},m);return v.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:y,style:T,ref:g},s)}}var Kte=()=>{var e;return(e=Nr(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function AT(){return AT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},AT.apply(null,arguments)}function wV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function NV(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wV(Object(r),!0).forEach(function(n){vMe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vMe(e,t,r){return(t=yMe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yMe(e){var t=bMe(e,"string");return typeof t=="symbol"?t:t+""}function bMe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CV={curveBasisClosed:mOe,curveBasisOpen:pOe,curveBasis:fOe,curveBumpX:eOe,curveBumpY:tOe,curveLinearClosed:gOe,curveLinear:bS,curveMonotoneX:xOe,curveMonotoneY:vOe,curveNatural:yOe,curveStep:bOe,curveStepAfter:NOe,curveStepBefore:wOe},P_=e=>qa(e.x)&&qa(e.y),_V=e=>e.base!=null&&P_(e.base)&&P_(e),hv=e=>e.x,fv=e=>e.y,wMe=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(_b(e));return(r==="curveMonotone"||r==="curveBump")&&t?CV["".concat(r).concat(t==="vertical"?"Y":"X")]:CV[r]||bS},NMe=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=e,o=wMe(t,a),l=s?r.filter(P_):r,c;if(Array.isArray(n)){var u=r.map((h,m)=>NV(NV({},h),{},{base:n[m]}));a==="vertical"?c=M2().y(fv).x1(hv).x0(h=>h.base.x):c=M2().x(hv).y1(fv).y0(h=>h.base.y);var d=c.defined(_V).curve(o),A=s?u.filter(_V):u;return d(A)}a==="vertical"&&Sr(n)?c=M2().y(fv).x1(hv).x0(n):Sr(n)?c=M2().x(hv).y1(fv).y0(n):c=tee().x(hv).y(fv);var f=c.defined(P_).curve(o);return f(l)},vO=e=>{var{className:t,points:r,path:n,pathRef:a}=e,s=Pb();if((!r||!r.length)&&!n)return null;var o={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||s,connectNulls:e.connectNulls},l=r&&r.length?NMe(o):n;return v.createElement("path",AT({},ed(e),KOe(e),{className:Qn("recharts-curve",t),d:l===null?void 0:l,ref:a}))},CMe=["x","y","top","left","width","height","className"];function hT(){return hT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hT.apply(null,arguments)}function EV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _Me(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EV(Object(r),!0).forEach(function(n){EMe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EMe(e,t,r){return(t=SMe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SMe(e){var t=IMe(e,"string");return typeof t=="symbol"?t:t+""}function IMe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BMe(e,t){if(e==null)return{};var r,n,a=jMe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function jMe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var PMe=(e,t,r,n,a,s)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),kMe=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:s=0,height:o=0,className:l}=e,c=BMe(e,CMe),u=_Me({x:t,y:r,top:n,left:a,width:s,height:o},c);return!Sr(t)||!Sr(r)||!Sr(s)||!Sr(o)||!Sr(n)||!Sr(a)?null:v.createElement("path",hT({},Ic(u),{className:Qn("recharts-cross",l),d:PMe(t,r,s,o,n,a)}))};function TMe(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function SV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function IV(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SV(Object(r),!0).forEach(function(n){FMe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FMe(e,t,r){return(t=OMe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OMe(e){var t=DMe(e,"string");return typeof t=="symbol"?t:t+""}function DMe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RMe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),qte=(e,t,r)=>e.map(n=>"".concat(RMe(n)," ").concat(t,"ms ").concat(r)).join(","),LMe=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),D1=(e,t)=>Object.keys(t).reduce((r,n)=>IV(IV({},r),{},{[n]:e(n,t[n])}),{});function BV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Qs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BV(Object(r),!0).forEach(function(n){MMe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MMe(e,t,r){return(t=UMe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UMe(e){var t=QMe(e,"string");return typeof t=="symbol"?t:t+""}function QMe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var k_=(e,t,r)=>e+(t-e)*r,fT=e=>{var{from:t,to:r}=e;return t!==r},Gte=(e,t,r)=>{var n=D1((a,s)=>{if(fT(s)){var[o,l]=e(s.from,s.to,s.velocity);return Qs(Qs({},s),{},{from:o,velocity:l})}return s},t);return r<1?D1((a,s)=>fT(s)&&n[a]!=null?Qs(Qs({},s),{},{velocity:k_(s.velocity,n[a].velocity,r),from:k_(s.from,n[a].from,r)}):s,t):Gte(e,n,r-1)};function VMe(e,t,r,n,a,s){var o,l=n.reduce((f,h)=>Qs(Qs({},f),{},{[h]:{from:e[h],velocity:0,to:t[h]}}),{}),c=()=>D1((f,h)=>h.from,l),u=()=>!Object.values(l).filter(fT).length,d=null,A=f=>{o||(o=f);var h=f-o,m=h/r.dt;l=Gte(r,l,m),a(Qs(Qs(Qs({},e),t),c())),o=f,u()||(d=s.setTimeout(A))};return()=>(d=s.setTimeout(A),()=>{var f;(f=d)===null||f===void 0||f()})}function HMe(e,t,r,n,a,s,o){var l=null,c=a.reduce((A,f)=>{var h=e[f],m=t[f];return h==null||m==null?A:Qs(Qs({},A),{},{[f]:[h,m]})},{}),u,d=A=>{u||(u=A);var f=(A-u)/n,h=D1((p,g)=>k_(...g,r(f)),c);if(s(Qs(Qs(Qs({},e),t),h)),f<1)l=o.setTimeout(d);else{var m=D1((p,g)=>k_(...g,r(1)),c);s(Qs(Qs(Qs({},e),t),m))}};return()=>(l=o.setTimeout(d),()=>{var A;(A=l)===null||A===void 0||A()})}const $Me=(e,t,r,n,a,s)=>{var o=LMe(e,t);return r==null?()=>(a(Qs(Qs({},e),t)),()=>{}):r.isStepper===!0?VMe(e,t,r,o,a,s):HMe(e,t,r,n,o,a,s)};var T_=1e-4,zte=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],Wte=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),jV=(e,t)=>r=>{var n=zte(e,t);return Wte(n,r)},KMe=(e,t)=>r=>{var n=zte(e,t),a=[...n.map((s,o)=>s*o).slice(1),0];return Wte(a,r)},qMe=e=>{var t,r=e.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(t=r[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(n==null||n.length!==4)return null;var a=n.map(s=>parseFloat(s));return[a[0],a[1],a[2],a[3]]},GMe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a=qMe(r[0]);if(a)return a}}return r.length===4?r:[0,0,1,1]},zMe=(e,t,r,n)=>{var a=jV(e,r),s=jV(t,n),o=KMe(e,r),l=u=>u>1?1:u<0?0:u,c=u=>{for(var d=u>1?1:u,A=d,f=0;f<8;++f){var h=a(A)-d,m=o(A);if(Math.abs(h-d)<T_||m<T_)return s(A);A=l(A-h/m)}return s(A)};return c.isStepper=!1,c},PV=function(){return zMe(...GMe(...arguments))},WMe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,s=(o,l,c)=>{var u=-(o-l)*r,d=c*n,A=c+(u-d)*a/1e3,f=c*a/1e3+o;return Math.abs(f-l)<T_&&Math.abs(A)<T_?[l,0]:[f,A]};return s.isStepper=!0,s.dt=a,s},XMe=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return PV(e);case"spring":return WMe();default:if(e.split("(")[0]==="cubic-bezier")return PV(e)}return typeof e=="function"?e:null};function JMe(e){var t,r=()=>null,n=!1,a=null,s=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...u]=l;if(typeof c=="number"){a=e.setTimeout(s.bind(null,u),c);return}s(c),a=e.setTimeout(s.bind(null,u));return}typeof o=="string"&&(t=o,r(t)),typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,a&&(a(),a=null),s(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}class YMe{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{a!=null&&cancelAnimationFrame(a)}}}function ZMe(){return JMe(new YMe)}var e6e=v.createContext(ZMe);function t6e(e,t){var r=v.useContext(e6e);return v.useMemo(()=>t??r(e),[e,t,r])}var r6e=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),zS={isSsr:r6e()},n6e={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},kV={t:0},a5={t:1};function WS(e){var t=Vi(e,n6e),{isActive:r,canBegin:n,duration:a,easing:s,begin:o,onAnimationEnd:l,onAnimationStart:c,children:u}=t,d=r==="auto"?!zS.isSsr:r,A=t6e(t.animationId,t.animationManager),[f,h]=v.useState(d?kV:a5),m=v.useRef(null);return v.useEffect(()=>{d||h(a5)},[d]),v.useEffect(()=>{if(!d||!n)return Eb;var p=$Me(kV,a5,XMe(s),a,h,A.getTimeoutController()),g=()=>{m.current=p()};return A.start([c,o,g,a,l]),()=>{A.stop(),m.current&&m.current(),l()}},[d,n,a,s,o,c,l,A]),u(f.t)}function XS(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=v.useRef(B1(t)),n=v.useRef(e);return n.current!==e&&(r.current=B1(t),n.current=e),r.current}var a6e=["radius"],s6e=["radius"],TV,FV,OV,DV,RV,LV,MV,UV,QV,VV;function HV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $V(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HV(Object(r),!0).forEach(function(n){i6e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function i6e(e,t,r){return(t=o6e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o6e(e){var t=l6e(e,"string");return typeof t=="symbol"?t:t+""}function l6e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function F_(){return F_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F_.apply(null,arguments)}function KV(e,t){if(e==null)return{};var r,n,a=c6e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function c6e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Du(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var qV=(e,t,r,n,a)=>{var s=Lh(r),o=Lh(n),l=Math.min(Math.abs(s)/2,Math.abs(o)/2),c=o>=0?1:-1,u=s>=0?1:-1,d=o>=0&&s>=0||o<0&&s<0?1:0,A;if(l>0&&a instanceof Array){for(var f=[0,0,0,0],h=0,m=4;h<m;h++)f[h]=a[h]>l?l:a[h];A=Za(TV||(TV=Du(["M",",",""])),e,t+c*f[0]),f[0]>0&&(A+=Za(FV||(FV=Du(["A ",",",",0,0,",",",",",""])),f[0],f[0],d,e+u*f[0],t)),A+=Za(OV||(OV=Du(["L ",",",""])),e+r-u*f[1],t),f[1]>0&&(A+=Za(DV||(DV=Du(["A ",",",",0,0,",`,
        `,",",""])),f[1],f[1],d,e+r,t+c*f[1])),A+=Za(RV||(RV=Du(["L ",",",""])),e+r,t+n-c*f[2]),f[2]>0&&(A+=Za(LV||(LV=Du(["A ",",",",0,0,",`,
        `,",",""])),f[2],f[2],d,e+r-u*f[2],t+n)),A+=Za(MV||(MV=Du(["L ",",",""])),e+u*f[3],t+n),f[3]>0&&(A+=Za(UV||(UV=Du(["A ",",",",0,0,",`,
        `,",",""])),f[3],f[3],d,e,t+n-c*f[3])),A+="Z"}else if(l>0&&a===+a&&a>0){var p=Math.min(l,a);A=Za(QV||(QV=Du(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+c*p,p,p,d,e+u*p,t,e+r-u*p,t,p,p,d,e+r,t+c*p,e+r,t+n-c*p,p,p,d,e+r-u*p,t+n,e+u*p,t+n,p,p,d,e,t+n-c*p)}else A=Za(VV||(VV=Du(["M ",","," h "," v "," h "," Z"])),e,t,r,n,-r);return A},GV={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Xte=e=>{var t=Vi(e,GV),r=v.useRef(null),[n,a]=v.useState(-1);v.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var le=r.current.getTotalLength();le&&a(le)}catch{}},[]);var{x:s,y:o,width:l,height:c,radius:u,className:d}=t,{animationEasing:A,animationDuration:f,animationBegin:h,isAnimationActive:m,isUpdateAnimationActive:p}=t,g=v.useRef(l),x=v.useRef(c),y=v.useRef(s),b=v.useRef(o),_=v.useMemo(()=>({x:s,y:o,width:l,height:c,radius:u}),[s,o,l,c,u]),T=XS(_,"rectangle-");if(s!==+s||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var P=Qn("recharts-rectangle",d);if(!p){var C=Ic(t),{radius:S}=C,I=KV(C,a6e);return v.createElement("path",F_({},I,{x:Lh(s),y:Lh(o),width:Lh(l),height:Lh(c),radius:typeof u=="number"?u:void 0,className:P,d:qV(s,o,l,c,u)}))}var L=g.current,E=x.current,j=y.current,R=b.current,W="0px ".concat(n===-1?1:n,"px"),de="".concat(n,"px 0px"),te=qte(["strokeDasharray"],f,typeof A=="string"?A:GV.animationEasing);return v.createElement(WS,{animationId:T,key:T,canBegin:n>0,duration:f,easing:A,isActive:p,begin:h},le=>{var ce=Us(L,l,le),J=Us(E,c,le),me=Us(j,s,le),Ee=Us(R,o,le);r.current&&(g.current=ce,x.current=J,y.current=me,b.current=Ee);var k;m?le>0?k={transition:te,strokeDasharray:de}:k={strokeDasharray:W}:k={strokeDasharray:de};var F=Ic(t),{radius:V}=F,D=KV(F,s6e);return v.createElement("path",F_({},D,{radius:typeof u=="number"?u:void 0,className:P,d:qV(me,Ee,ce,J,u),ref:r,style:$V($V({},k),t.style)}))})};function zV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function WV(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zV(Object(r),!0).forEach(function(n){u6e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function u6e(e,t,r){return(t=d6e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d6e(e){var t=A6e(e,"string");return typeof t=="symbol"?t:t+""}function A6e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var O_=Math.PI/180,h6e=e=>e*180/Math.PI,Bs=(e,t,r,n)=>({x:e+Math.cos(-O_*n)*r,y:t+Math.sin(-O_*n)*r}),Jte=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},f6e=(e,t)=>{var{x:r,y:n}=e,{x:a,y:s}=t;return Math.sqrt((r-a)**2+(n-s)**2)},m6e=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:s}=t,o=f6e({x:r,y:n},{x:a,y:s});if(o<=0)return{radius:o,angle:0};var l=(r-a)/o,c=Math.acos(l);return n>s&&(c=2*Math.PI-c),{radius:o,angle:h6e(c),angleInRadian:c}},p6e=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:t-s*360,endAngle:r-s*360}},g6e=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),s=Math.floor(n/360),o=Math.min(a,s);return e+o*360},x6e=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:a,angle:s}=m6e({x:r,y:n},t),{innerRadius:o,outerRadius:l}=t;if(a<o||a>l||a===0)return null;var{startAngle:c,endAngle:u}=p6e(t),d=s,A;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;A=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;A=d>=u&&d<=c}return A?WV(WV({},t),{},{radius:a,angle:g6e(d,t)}):null};function Yte(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:s}=e,o=Bs(t,r,n,a),l=Bs(t,r,n,s);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:a,endAngle:s}}var XV,JV,YV,ZV,e9,t9,r9;function mT(){return mT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mT.apply(null,arguments)}function vm(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var v6e=(e,t)=>{var r=Li(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},z2=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:s,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,u=l*(o?1:-1)+n,d=Math.asin(l/u)/O_,A=c?a:a+s*d,f=Bs(t,r,u,A),h=Bs(t,r,n,A),m=c?a-s*d:a,p=Bs(t,r,u*Math.cos(d*O_),m);return{center:f,circleTangency:h,lineTangency:p,theta:d}},Zte=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:o}=e,l=v6e(s,o),c=s+l,u=Bs(t,r,a,s),d=Bs(t,r,a,c),A=Za(XV||(XV=vm(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,a,a,+(Math.abs(l)>180),+(s>c),d.x,d.y);if(n>0){var f=Bs(t,r,n,s),h=Bs(t,r,n,c);A+=Za(JV||(JV=vm(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),h.x,h.y,n,n,+(Math.abs(l)>180),+(s<=c),f.x,f.y)}else A+=Za(YV||(YV=vm(["L ",","," Z"])),t,r);return A},y6e=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}=e,d=Li(u-c),{circleTangency:A,lineTangency:f,theta:h}=z2({cx:t,cy:r,radius:a,angle:c,sign:d,cornerRadius:s,cornerIsExternal:l}),{circleTangency:m,lineTangency:p,theta:g}=z2({cx:t,cy:r,radius:a,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:l}),x=l?Math.abs(c-u):Math.abs(c-u)-h-g;if(x<0)return o?Za(ZV||(ZV=vm(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),f.x,f.y,s,s,s*2,s,s,-s*2):Zte({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var y=Za(e9||(e9=vm(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),f.x,f.y,s,s,+(d<0),A.x,A.y,a,a,+(x>180),+(d<0),m.x,m.y,s,s,+(d<0),p.x,p.y);if(n>0){var{circleTangency:b,lineTangency:_,theta:T}=z2({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),{circleTangency:P,lineTangency:C,theta:S}=z2({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),I=l?Math.abs(c-u):Math.abs(c-u)-T-S;if(I<0&&s===0)return"".concat(y,"L").concat(t,",").concat(r,"Z");y+=Za(t9||(t9=vm(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),C.x,C.y,s,s,+(d<0),P.x,P.y,n,n,+(I>180),+(d>0),b.x,b.y,s,s,+(d<0),_.x,_.y)}else y+=Za(r9||(r9=vm(["L",",","Z"])),t,r);return y},b6e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},ere=e=>{var t=Vi(e,b6e),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:A}=t;if(s<a||u===d)return null;var f=Qn("recharts-sector",A),h=s-a,m=uo(o,h,0,!0),p;return m>0&&Math.abs(u-d)<360?p=y6e({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(m,h/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):p=Zte({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),v.createElement("path",mT({},Ic(t),{className:f,d:p}))};function w6e(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(pee(t)){if(e==="centric"){var{cx:n,cy:a,innerRadius:s,outerRadius:o,angle:l}=t,c=Bs(n,a,s,l),u=Bs(n,a,o,l);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return Yte(t)}}var tre={},rre={},nre={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oO;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(nre);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nre;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(rre);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lO,r=rre;function n(a,s,o){o&&typeof o!="number"&&t.isIterateeCall(a,s,o)&&(s=o=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),o=o===void 0?a<s?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((s-a)/(o||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=a,a+=o;return c}e.range=n})(tre);var N6e=tre.range;const are=yA(N6e);function ef(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function C6e(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function yO(e){let t,r,n;e.length!==2?(t=ef,r=(l,c)=>ef(e(l),c),n=(l,c)=>e(l)-c):(t=e===ef||e===C6e?e:_6e,r=e,n=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const A=u+d>>>1;r(l[A],c)<0?u=A+1:d=A}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const A=u+d>>>1;r(l[A],c)<=0?u=A+1:d=A}while(u<d)}return u}function o(l,c,u=0,d=l.length){const A=a(l,c,u,d-1);return A>u&&n(l[A-1],c)>-n(l[A],c)?A-1:A}return{left:a,center:o,right:s}}function _6e(){return 0}function sre(e){return e===null?NaN:+e}function*E6e(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const S6e=yO(ef),Tb=S6e.right;yO(sre).center;class n9 extends Map{constructor(t,r=j6e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(a9(this,t))}has(t){return super.has(a9(this,t))}set(t,r){return super.set(I6e(this,t),r)}delete(t){return super.delete(B6e(this,t))}}function a9({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function I6e({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function B6e({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function j6e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function P6e(e=ef){if(e===ef)return ire;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function ire(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const k6e=Math.sqrt(50),T6e=Math.sqrt(10),F6e=Math.sqrt(2);function D_(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),o=s>=k6e?10:s>=T6e?5:s>=F6e?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?D_(e,t,r*2):[l,c,u]}function pT(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,s,o]=n?D_(t,e,r):D_(e,t,r);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function gT(e,t,r){return t=+t,e=+e,r=+r,D_(e,t,r)[2]}function xT(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?gT(t,e,r):gT(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function s9(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function i9(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function ore(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?ire:P6e(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),A=.5*Math.exp(2*d/3),f=.5*Math.sqrt(d*A*(c-A)/c)*(u-c/2<0?-1:1),h=Math.max(r,Math.floor(t-u*A/c+f)),m=Math.min(n,Math.floor(t+(c-u)*A/c+f));ore(e,t,h,m,a)}const s=e[t];let o=r,l=n;for(mv(e,r,t),a(e[n],s)>0&&mv(e,r,n);o<l;){for(mv(e,o,l),++o,--l;a(e[o],s)<0;)++o;for(;a(e[l],s)>0;)--l}a(e[r],s)===0?mv(e,r,l):(++l,mv(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function mv(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function O6e(e,t,r){if(e=Float64Array.from(E6e(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return i9(e);if(t>=1)return s9(e);var n,a=(n-1)*t,s=Math.floor(a),o=s9(ore(e,s).subarray(0,s+1)),l=i9(e.subarray(s+1));return o+(l-o)*(a-s)}}function D6e(e,t,r=sre){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,s=Math.floor(a),o=+r(e[s],s,e),l=+r(e[s+1],s+1,e);return o+(l-o)*(a-s)}}function R6e(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(a);++n<a;)s[n]=e+n*r;return s}function Tc(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function BA(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const vT=Symbol("implicit");function bO(){var e=new n9,t=[],r=[],n=vT;function a(s){let o=e.get(s);if(o===void 0){if(n!==vT)return n;e.set(s,o=t.push(s)-1)}return r[o%r.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new n9;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return bO(t,r).unknown(n)},Tc.apply(a,arguments),a}function wO(){var e=bO().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,s,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function A(){var f=t().length,h=a<n,m=h?a:n,p=h?n:a;s=(p-m)/Math.max(1,f-c+u*2),l&&(s=Math.floor(s)),m+=(p-m-s*(f-c))*d,o=s*(1-c),l&&(m=Math.round(m),o=Math.round(o));var g=R6e(f).map(function(x){return m+s*x});return r(h?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),A()):t()},e.range=function(f){return arguments.length?([n,a]=f,n=+n,a=+a,A()):[n,a]},e.rangeRound=function(f){return[n,a]=f,n=+n,a=+a,l=!0,A()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(f){return arguments.length?(l=!!f,A()):l},e.padding=function(f){return arguments.length?(c=Math.min(1,u=+f),A()):c},e.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),A()):c},e.paddingOuter=function(f){return arguments.length?(u=+f,A()):u},e.align=function(f){return arguments.length?(d=Math.max(0,Math.min(1,f)),A()):d},e.copy=function(){return wO(t(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},Tc.apply(A(),arguments)}function lre(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return lre(t())},e}function L6e(){return lre(wO.apply(null,arguments).paddingInner(1))}function NO(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function cre(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Fb(){}var R1=.7,R_=1/R1,ug="\\s*([+-]?\\d+)\\s*",L1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Yu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",M6e=/^#([0-9a-f]{3,8})$/,U6e=new RegExp(`^rgb\\(${ug},${ug},${ug}\\)$`),Q6e=new RegExp(`^rgb\\(${Yu},${Yu},${Yu}\\)$`),V6e=new RegExp(`^rgba\\(${ug},${ug},${ug},${L1}\\)$`),H6e=new RegExp(`^rgba\\(${Yu},${Yu},${Yu},${L1}\\)$`),$6e=new RegExp(`^hsl\\(${L1},${Yu},${Yu}\\)$`),K6e=new RegExp(`^hsla\\(${L1},${Yu},${Yu},${L1}\\)$`),o9={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};NO(Fb,M1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:l9,formatHex:l9,formatHex8:q6e,formatHsl:G6e,formatRgb:c9,toString:c9});function l9(){return this.rgb().formatHex()}function q6e(){return this.rgb().formatHex8()}function G6e(){return ure(this).formatHsl()}function c9(){return this.rgb().formatRgb()}function M1(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=M6e.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?u9(t):r===3?new Xo(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?W2(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?W2(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=U6e.exec(e))?new Xo(t[1],t[2],t[3],1):(t=Q6e.exec(e))?new Xo(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=V6e.exec(e))?W2(t[1],t[2],t[3],t[4]):(t=H6e.exec(e))?W2(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=$6e.exec(e))?h9(t[1],t[2]/100,t[3]/100,1):(t=K6e.exec(e))?h9(t[1],t[2]/100,t[3]/100,t[4]):o9.hasOwnProperty(e)?u9(o9[e]):e==="transparent"?new Xo(NaN,NaN,NaN,0):null}function u9(e){return new Xo(e>>16&255,e>>8&255,e&255,1)}function W2(e,t,r,n){return n<=0&&(e=t=r=NaN),new Xo(e,t,r,n)}function z6e(e){return e instanceof Fb||(e=M1(e)),e?(e=e.rgb(),new Xo(e.r,e.g,e.b,e.opacity)):new Xo}function yT(e,t,r,n){return arguments.length===1?z6e(e):new Xo(e,t,r,n??1)}function Xo(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}NO(Xo,yT,cre(Fb,{brighter(e){return e=e==null?R_:Math.pow(R_,e),new Xo(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?R1:Math.pow(R1,e),new Xo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Xo(Dm(this.r),Dm(this.g),Dm(this.b),L_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:d9,formatHex:d9,formatHex8:W6e,formatRgb:A9,toString:A9}));function d9(){return`#${ym(this.r)}${ym(this.g)}${ym(this.b)}`}function W6e(){return`#${ym(this.r)}${ym(this.g)}${ym(this.b)}${ym((isNaN(this.opacity)?1:this.opacity)*255)}`}function A9(){const e=L_(this.opacity);return`${e===1?"rgb(":"rgba("}${Dm(this.r)}, ${Dm(this.g)}, ${Dm(this.b)}${e===1?")":`, ${e})`}`}function L_(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Dm(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ym(e){return e=Dm(e),(e<16?"0":"")+e.toString(16)}function h9(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Yc(e,t,r,n)}function ure(e){if(e instanceof Yc)return new Yc(e.h,e.s,e.l,e.opacity);if(e instanceof Fb||(e=M1(e)),!e)return new Yc;if(e instanceof Yc)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),s=Math.max(t,r,n),o=NaN,l=s-a,c=(s+a)/2;return l?(t===s?o=(r-n)/l+(r<n)*6:r===s?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?s+a:2-s-a,o*=60):l=c>0&&c<1?0:o,new Yc(o,l,c,e.opacity)}function X6e(e,t,r,n){return arguments.length===1?ure(e):new Yc(e,t,r,n??1)}function Yc(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}NO(Yc,X6e,cre(Fb,{brighter(e){return e=e==null?R_:Math.pow(R_,e),new Yc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?R1:Math.pow(R1,e),new Yc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Xo(s5(e>=240?e-240:e+120,a,n),s5(e,a,n),s5(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Yc(f9(this.h),X2(this.s),X2(this.l),L_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=L_(this.opacity);return`${e===1?"hsl(":"hsla("}${f9(this.h)}, ${X2(this.s)*100}%, ${X2(this.l)*100}%${e===1?")":`, ${e})`}`}}));function f9(e){return e=(e||0)%360,e<0?e+360:e}function X2(e){return Math.max(0,Math.min(1,e||0))}function s5(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const CO=e=>()=>e;function J6e(e,t){return function(r){return e+r*t}}function Y6e(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function Z6e(e){return(e=+e)==1?dre:function(t,r){return r-t?Y6e(t,r,e):CO(isNaN(t)?r:t)}}function dre(e,t){var r=t-e;return r?J6e(e,r):CO(isNaN(e)?t:e)}const m9=function e(t){var r=Z6e(t);function n(a,s){var o=r((a=yT(a)).r,(s=yT(s)).r),l=r(a.g,s.g),c=r(a.b,s.b),u=dre(a.opacity,s.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function eUe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=e[a]*(1-s)+t[a]*s;return n}}function tUe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function rUe(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),s=new Array(r),o;for(o=0;o<n;++o)a[o]=lx(e[o],t[o]);for(;o<r;++o)s[o]=t[o];return function(l){for(o=0;o<n;++o)s[o]=a[o](l);return s}}function nUe(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function M_(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function aUe(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=lx(e[a],t[a]):n[a]=t[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var bT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,i5=new RegExp(bT.source,"g");function sUe(e){return function(){return e}}function iUe(e){return function(t){return e(t)+""}}function oUe(e,t){var r=bT.lastIndex=i5.lastIndex=0,n,a,s,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=bT.exec(e))&&(a=i5.exec(t));)(s=a.index)>r&&(s=t.slice(r,s),l[o]?l[o]+=s:l[++o]=s),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:M_(n,a)})),r=i5.lastIndex;return r<t.length&&(s=t.slice(r),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?iUe(c[0].x):sUe(t):(t=c.length,function(u){for(var d=0,A;d<t;++d)l[(A=c[d]).i]=A.x(u);return l.join("")})}function lx(e,t){var r=typeof t,n;return t==null||r==="boolean"?CO(t):(r==="number"?M_:r==="string"?(n=M1(t))?(t=n,m9):oUe:t instanceof M1?m9:t instanceof Date?nUe:tUe(t)?eUe:Array.isArray(t)?rUe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?aUe:M_)(e,t)}function _O(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function lUe(e,t){t===void 0&&(t=e,e=lx);for(var r=0,n=t.length-1,a=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(a,a=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return s[l](o-l)}}function cUe(e){return function(){return e}}function U_(e){return+e}var p9=[0,1];function Bo(e){return e}function wT(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:cUe(isNaN(t)?NaN:.5)}function uUe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function dUe(e,t,r){var n=e[0],a=e[1],s=t[0],o=t[1];return a<n?(n=wT(a,n),s=r(o,s)):(n=wT(n,a),s=r(s,o)),function(l){return s(n(l))}}function AUe(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),s=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=wT(e[o],e[o+1]),s[o]=r(t[o],t[o+1]);return function(l){var c=Tb(e,l,1,n)-1;return s[c](a[c](l))}}function Ob(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function JS(){var e=p9,t=p9,r=lx,n,a,s,o=Bo,l,c,u;function d(){var f=Math.min(e.length,t.length);return o!==Bo&&(o=uUe(e[0],e[f-1])),l=f>2?AUe:dUe,c=u=null,A}function A(f){return f==null||isNaN(f=+f)?s:(c||(c=l(e.map(n),t,r)))(n(o(f)))}return A.invert=function(f){return o(a((u||(u=l(t,e.map(n),M_)))(f)))},A.domain=function(f){return arguments.length?(e=Array.from(f,U_),d()):e.slice()},A.range=function(f){return arguments.length?(t=Array.from(f),d()):t.slice()},A.rangeRound=function(f){return t=Array.from(f),r=_O,d()},A.clamp=function(f){return arguments.length?(o=f?!0:Bo,d()):o!==Bo},A.interpolate=function(f){return arguments.length?(r=f,d()):r},A.unknown=function(f){return arguments.length?(s=f,A):s},function(f,h){return n=f,a=h,d()}}function EO(){return JS()(Bo,Bo)}function hUe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Q_(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Dg(e){return e=Q_(Math.abs(e)),e?e[1]:NaN}function fUe(e,t){return function(r,n){for(var a=r.length,s=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),s.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return s.reverse().join(t)}}function mUe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var pUe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function U1(e){if(!(t=pUe.exec(e)))throw new Error("invalid format: "+e);var t;return new SO({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}U1.prototype=SO.prototype;function SO(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}SO.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function gUe(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var V_;function xUe(e,t){var r=Q_(e,t);if(!r)return V_=void 0,e.toPrecision(t);var n=r[0],a=r[1],s=a-(V_=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+Q_(e,Math.max(0,t+s-1))[0]}function g9(e,t){var r=Q_(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const x9={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:hUe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>g9(e*100,t),r:g9,s:xUe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function v9(e){return e}var y9=Array.prototype.map,b9=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function vUe(e){var t=e.grouping===void 0||e.thousands===void 0?v9:fUe(y9.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?v9:mUe(y9.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(A,f){A=U1(A);var h=A.fill,m=A.align,p=A.sign,g=A.symbol,x=A.zero,y=A.width,b=A.comma,_=A.precision,T=A.trim,P=A.type;P==="n"?(b=!0,P="g"):x9[P]||(_===void 0&&(_=12),T=!0,P="g"),(x||h==="0"&&m==="=")&&(x=!0,h="0",m="=");var C=(f&&f.prefix!==void 0?f.prefix:"")+(g==="$"?r:g==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():""),S=(g==="$"?n:/[%p]/.test(P)?o:"")+(f&&f.suffix!==void 0?f.suffix:""),I=x9[P],L=/[defgprs%]/.test(P);_=_===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function E(j){var R=C,W=S,de,te,le;if(P==="c")W=I(j)+W,j="";else{j=+j;var ce=j<0||1/j<0;if(j=isNaN(j)?c:I(Math.abs(j),_),T&&(j=gUe(j)),ce&&+j==0&&p!=="+"&&(ce=!1),R=(ce?p==="("?p:l:p==="-"||p==="("?"":p)+R,W=(P==="s"&&!isNaN(j)&&V_!==void 0?b9[8+V_/3]:"")+W+(ce&&p==="("?")":""),L){for(de=-1,te=j.length;++de<te;)if(le=j.charCodeAt(de),48>le||le>57){W=(le===46?a+j.slice(de+1):j.slice(de))+W,j=j.slice(0,de);break}}}b&&!x&&(j=t(j,1/0));var J=R.length+j.length+W.length,me=J<y?new Array(y-J+1).join(h):"";switch(b&&x&&(j=t(me+j,me.length?y-W.length:1/0),me=""),m){case"<":j=R+j+W+me;break;case"=":j=R+me+j+W;break;case"^":j=me.slice(0,J=me.length>>1)+R+j+W+me.slice(J);break;default:j=me+R+j+W;break}return s(j)}return E.toString=function(){return A+""},E}function d(A,f){var h=Math.max(-8,Math.min(8,Math.floor(Dg(f)/3)))*3,m=Math.pow(10,-h),p=u((A=U1(A),A.type="f",A),{suffix:b9[8+h/3]});return function(g){return p(m*g)}}return{format:u,formatPrefix:d}}var J2,IO,Are;yUe({thousands:",",grouping:[3],currency:["$",""]});function yUe(e){return J2=vUe(e),IO=J2.format,Are=J2.formatPrefix,J2}function bUe(e){return Math.max(0,-Dg(Math.abs(e)))}function wUe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Dg(t)/3)))*3-Dg(Math.abs(e)))}function NUe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Dg(t)-Dg(e))+1}function hre(e,t,r,n){var a=xT(e,t,r),s;switch(n=U1(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=wUe(a,o))&&(n.precision=s),Are(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=NUe(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=bUe(a))&&(n.precision=s-(n.type==="%")*2);break}}return IO(n)}function kf(e){var t=e.domain;return e.ticks=function(r){var n=t();return pT(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return hre(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,s=n.length-1,o=n[a],l=n[s],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=s,s=u);d-- >0;){if(u=gT(o,l,r),u===c)return n[a]=o,n[s]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function fre(){var e=EO();return e.copy=function(){return Ob(e,fre())},Tc.apply(e,arguments),kf(e)}function mre(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,U_),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return mre(e).unknown(t)},e=arguments.length?Array.from(e,U_):[0,1],kf(r)}function pre(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],s=e[n],o;return s<a&&(o=r,r=n,n=o,o=a,a=s,s=o),e[r]=t.floor(a),e[n]=t.ceil(s),e}function w9(e){return Math.log(e)}function N9(e){return Math.exp(e)}function CUe(e){return-Math.log(-e)}function _Ue(e){return-Math.exp(-e)}function EUe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function SUe(e){return e===10?EUe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function IUe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function C9(e){return(t,r)=>-e(-t,r)}function BO(e){const t=e(w9,N9),r=t.domain;let n=10,a,s;function o(){return a=IUe(n),s=SUe(n),r()[0]<0?(a=C9(a),s=C9(s),e(CUe,_Ue)):e(w9,N9),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const A=d<u;A&&([u,d]=[d,u]);let f=a(u),h=a(d),m,p;const g=l==null?10:+l;let x=[];if(!(n%1)&&h-f<g){if(f=Math.floor(f),h=Math.ceil(h),u>0){for(;f<=h;++f)for(m=1;m<n;++m)if(p=f<0?m/s(-f):m*s(f),!(p<u)){if(p>d)break;x.push(p)}}else for(;f<=h;++f)for(m=n-1;m>=1;--m)if(p=f>0?m/s(-f):m*s(f),!(p<u)){if(p>d)break;x.push(p)}x.length*2<g&&(x=pT(u,d,g))}else x=pT(f,h,Math.min(h-f,g)).map(s);return A?x.reverse():x},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=U1(c)).precision==null&&(c.trim=!0),c=IO(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let A=d/s(Math.round(a(d)));return A*n<n-.5&&(A*=n),A<=u?c(d):""}},t.nice=()=>r(pre(r(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),t}function gre(){const e=BO(JS()).domain([1,10]);return e.copy=()=>Ob(e,gre()).base(e.base()),Tc.apply(e,arguments),e}function _9(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function E9(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function jO(e){var t=1,r=e(_9(t),E9(t));return r.constant=function(n){return arguments.length?e(_9(t=+n),E9(t)):t},kf(r)}function xre(){var e=jO(JS());return e.copy=function(){return Ob(e,xre()).constant(e.constant())},Tc.apply(e,arguments)}function S9(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function BUe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function jUe(e){return e<0?-e*e:e*e}function PO(e){var t=e(Bo,Bo),r=1;function n(){return r===1?e(Bo,Bo):r===.5?e(BUe,jUe):e(S9(r),S9(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},kf(t)}function kO(){var e=PO(JS());return e.copy=function(){return Ob(e,kO()).exponent(e.exponent())},Tc.apply(e,arguments),e}function PUe(){return kO.apply(null,arguments).exponent(.5)}function I9(e){return Math.sign(e)*e*e}function kUe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function vre(){var e=EO(),t=[0,1],r=!1,n;function a(s){var o=kUe(e(s));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(s){return e.invert(I9(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,U_)).map(I9)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return vre(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Tc.apply(a,arguments),kf(a)}function yre(){var e=[],t=[],r=[],n;function a(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=D6e(e,o/l);return s}function s(o){return o==null||isNaN(o=+o)?n:t[Tb(r,o)]}return s.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(ef),a()},s.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return yre().domain(e).range(t).unknown(n)},Tc.apply(s,arguments)}function bre(){var e=0,t=1,r=1,n=[.5],a=[0,1],s;function o(c){return c!=null&&c<=c?a[Tb(n,c,0,r)]:s}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return bre().domain([e,t]).range(a).unknown(s)},Tc.apply(kf(o),arguments)}function wre(){var e=[.5],t=[0,1],r,n=1;function a(s){return s!=null&&s<=s?t[Tb(e,s,0,n)]:r}return a.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return wre().domain(e).range(t).unknown(r)},Tc.apply(a,arguments)}const o5=new Date,l5=new Date;function Xs(e,t,r,n){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const o=a(s),l=a.ceil(s);return s-o<l-s?o:l},a.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),a.range=(s,o,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),t(s,l),e(s);while(u<s&&s<o);return c},a.filter=s=>Xs(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!s(o););else for(;--l>=0;)for(;t(o,1),!s(o););}),r&&(a.count=(s,o)=>(o5.setTime(+s),l5.setTime(+o),e(o5),e(l5),Math.floor(r(o5,l5))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?o=>n(o)%s===0:o=>a.count(0,o)%s===0):a)),a}const H_=Xs(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);H_.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Xs(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):H_);H_.range;const $d=1e3,yc=$d*60,Kd=yc*60,mA=Kd*24,TO=mA*7,B9=mA*30,c5=mA*365,bm=Xs(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*$d)},(e,t)=>(t-e)/$d,e=>e.getUTCSeconds());bm.range;const FO=Xs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*$d)},(e,t)=>{e.setTime(+e+t*yc)},(e,t)=>(t-e)/yc,e=>e.getMinutes());FO.range;const OO=Xs(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*yc)},(e,t)=>(t-e)/yc,e=>e.getUTCMinutes());OO.range;const DO=Xs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*$d-e.getMinutes()*yc)},(e,t)=>{e.setTime(+e+t*Kd)},(e,t)=>(t-e)/Kd,e=>e.getHours());DO.range;const RO=Xs(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Kd)},(e,t)=>(t-e)/Kd,e=>e.getUTCHours());RO.range;const Db=Xs(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*yc)/mA,e=>e.getDate()-1);Db.range;const YS=Xs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/mA,e=>e.getUTCDate()-1);YS.range;const Nre=Xs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/mA,e=>Math.floor(e/mA));Nre.range;function O0(e){return Xs(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*yc)/TO)}const ZS=O0(0),$_=O0(1),TUe=O0(2),FUe=O0(3),Rg=O0(4),OUe=O0(5),DUe=O0(6);ZS.range;$_.range;TUe.range;FUe.range;Rg.range;OUe.range;DUe.range;function D0(e){return Xs(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/TO)}const eI=D0(0),K_=D0(1),RUe=D0(2),LUe=D0(3),Lg=D0(4),MUe=D0(5),UUe=D0(6);eI.range;K_.range;RUe.range;LUe.range;Lg.range;MUe.range;UUe.range;const LO=Xs(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());LO.range;const MO=Xs(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());MO.range;const pA=Xs(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());pA.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Xs(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});pA.range;const gA=Xs(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());gA.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Xs(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});gA.range;function Cre(e,t,r,n,a,s){const o=[[bm,1,$d],[bm,5,5*$d],[bm,15,15*$d],[bm,30,30*$d],[s,1,yc],[s,5,5*yc],[s,15,15*yc],[s,30,30*yc],[a,1,Kd],[a,3,3*Kd],[a,6,6*Kd],[a,12,12*Kd],[n,1,mA],[n,2,2*mA],[r,1,TO],[t,1,B9],[t,3,3*B9],[e,1,c5]];function l(u,d,A){const f=d<u;f&&([u,d]=[d,u]);const h=A&&typeof A.range=="function"?A:c(u,d,A),m=h?h.range(u,+d+1):[];return f?m.reverse():m}function c(u,d,A){const f=Math.abs(d-u)/A,h=yO(([,,g])=>g).right(o,f);if(h===o.length)return e.every(xT(u/c5,d/c5,A));if(h===0)return H_.every(Math.max(xT(u,d,A),1));const[m,p]=o[f/o[h-1][2]<o[h][2]/f?h-1:h];return m.every(p)}return[l,c]}const[QUe,VUe]=Cre(gA,MO,eI,Nre,RO,OO),[HUe,$Ue]=Cre(pA,LO,ZS,Db,DO,FO);function u5(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function d5(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function pv(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function KUe(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,s=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=gv(a),d=xv(a),A=gv(s),f=xv(s),h=gv(o),m=xv(o),p=gv(l),g=xv(l),x=gv(c),y=xv(c),b={a:le,A:ce,b:J,B:me,c:null,d:O9,e:O9,f:f8e,g:C8e,G:E8e,H:d8e,I:A8e,j:h8e,L:_re,m:m8e,M:p8e,p:Ee,q:k,Q:L9,s:M9,S:g8e,u:x8e,U:v8e,V:y8e,w:b8e,W:w8e,x:null,X:null,y:N8e,Y:_8e,Z:S8e,"%":R9},_={a:F,A:V,b:D,B:M,c:null,d:D9,e:D9,f:P8e,g:Q8e,G:H8e,H:I8e,I:B8e,j:j8e,L:Sre,m:k8e,M:T8e,p:G,q:O,Q:L9,s:M9,S:F8e,u:O8e,U:D8e,V:R8e,w:L8e,W:M8e,x:null,X:null,y:U8e,Y:V8e,Z:$8e,"%":R9},T={a:L,A:E,b:j,B:R,c:W,d:T9,e:T9,f:o8e,g:k9,G:P9,H:F9,I:F9,j:n8e,L:i8e,m:r8e,M:a8e,p:I,q:t8e,Q:c8e,s:u8e,S:s8e,u:XUe,U:JUe,V:YUe,w:WUe,W:ZUe,x:de,X:te,y:k9,Y:P9,Z:e8e,"%":l8e};b.x=P(r,b),b.X=P(n,b),b.c=P(t,b),_.x=P(r,_),_.X=P(n,_),_.c=P(t,_);function P(K,ee){return function(ne){var Q=[],be=-1,Z=0,z=K.length,X,ve,re;for(ne instanceof Date||(ne=new Date(+ne));++be<z;)K.charCodeAt(be)===37&&(Q.push(K.slice(Z,be)),(ve=j9[X=K.charAt(++be)])!=null?X=K.charAt(++be):ve=X==="e"?" ":"0",(re=ee[X])&&(X=re(ne,ve)),Q.push(X),Z=be+1);return Q.push(K.slice(Z,be)),Q.join("")}}function C(K,ee){return function(ne){var Q=pv(1900,void 0,1),be=S(Q,K,ne+="",0),Z,z;if(be!=ne.length)return null;if("Q"in Q)return new Date(Q.Q);if("s"in Q)return new Date(Q.s*1e3+("L"in Q?Q.L:0));if(ee&&!("Z"in Q)&&(Q.Z=0),"p"in Q&&(Q.H=Q.H%12+Q.p*12),Q.m===void 0&&(Q.m="q"in Q?Q.q:0),"V"in Q){if(Q.V<1||Q.V>53)return null;"w"in Q||(Q.w=1),"Z"in Q?(Z=d5(pv(Q.y,0,1)),z=Z.getUTCDay(),Z=z>4||z===0?K_.ceil(Z):K_(Z),Z=YS.offset(Z,(Q.V-1)*7),Q.y=Z.getUTCFullYear(),Q.m=Z.getUTCMonth(),Q.d=Z.getUTCDate()+(Q.w+6)%7):(Z=u5(pv(Q.y,0,1)),z=Z.getDay(),Z=z>4||z===0?$_.ceil(Z):$_(Z),Z=Db.offset(Z,(Q.V-1)*7),Q.y=Z.getFullYear(),Q.m=Z.getMonth(),Q.d=Z.getDate()+(Q.w+6)%7)}else("W"in Q||"U"in Q)&&("w"in Q||(Q.w="u"in Q?Q.u%7:"W"in Q?1:0),z="Z"in Q?d5(pv(Q.y,0,1)).getUTCDay():u5(pv(Q.y,0,1)).getDay(),Q.m=0,Q.d="W"in Q?(Q.w+6)%7+Q.W*7-(z+5)%7:Q.w+Q.U*7-(z+6)%7);return"Z"in Q?(Q.H+=Q.Z/100|0,Q.M+=Q.Z%100,d5(Q)):u5(Q)}}function S(K,ee,ne,Q){for(var be=0,Z=ee.length,z=ne.length,X,ve;be<Z;){if(Q>=z)return-1;if(X=ee.charCodeAt(be++),X===37){if(X=ee.charAt(be++),ve=T[X in j9?ee.charAt(be++):X],!ve||(Q=ve(K,ne,Q))<0)return-1}else if(X!=ne.charCodeAt(Q++))return-1}return Q}function I(K,ee,ne){var Q=u.exec(ee.slice(ne));return Q?(K.p=d.get(Q[0].toLowerCase()),ne+Q[0].length):-1}function L(K,ee,ne){var Q=h.exec(ee.slice(ne));return Q?(K.w=m.get(Q[0].toLowerCase()),ne+Q[0].length):-1}function E(K,ee,ne){var Q=A.exec(ee.slice(ne));return Q?(K.w=f.get(Q[0].toLowerCase()),ne+Q[0].length):-1}function j(K,ee,ne){var Q=x.exec(ee.slice(ne));return Q?(K.m=y.get(Q[0].toLowerCase()),ne+Q[0].length):-1}function R(K,ee,ne){var Q=p.exec(ee.slice(ne));return Q?(K.m=g.get(Q[0].toLowerCase()),ne+Q[0].length):-1}function W(K,ee,ne){return S(K,t,ee,ne)}function de(K,ee,ne){return S(K,r,ee,ne)}function te(K,ee,ne){return S(K,n,ee,ne)}function le(K){return o[K.getDay()]}function ce(K){return s[K.getDay()]}function J(K){return c[K.getMonth()]}function me(K){return l[K.getMonth()]}function Ee(K){return a[+(K.getHours()>=12)]}function k(K){return 1+~~(K.getMonth()/3)}function F(K){return o[K.getUTCDay()]}function V(K){return s[K.getUTCDay()]}function D(K){return c[K.getUTCMonth()]}function M(K){return l[K.getUTCMonth()]}function G(K){return a[+(K.getUTCHours()>=12)]}function O(K){return 1+~~(K.getUTCMonth()/3)}return{format:function(K){var ee=P(K+="",b);return ee.toString=function(){return K},ee},parse:function(K){var ee=C(K+="",!1);return ee.toString=function(){return K},ee},utcFormat:function(K){var ee=P(K+="",_);return ee.toString=function(){return K},ee},utcParse:function(K){var ee=C(K+="",!0);return ee.toString=function(){return K},ee}}}var j9={"-":"",_:" ",0:"0"},pi=/^\s*\d+/,qUe=/^%/,GUe=/[\\^$*+?|[\]().{}]/g;function wn(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(t)+a:a)}function zUe(e){return e.replace(GUe,"\\$&")}function gv(e){return new RegExp("^(?:"+e.map(zUe).join("|")+")","i")}function xv(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function WUe(e,t,r){var n=pi.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function XUe(e,t,r){var n=pi.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function JUe(e,t,r){var n=pi.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function YUe(e,t,r){var n=pi.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function ZUe(e,t,r){var n=pi.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function P9(e,t,r){var n=pi.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function k9(e,t,r){var n=pi.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function e8e(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function t8e(e,t,r){var n=pi.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function r8e(e,t,r){var n=pi.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function T9(e,t,r){var n=pi.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function n8e(e,t,r){var n=pi.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function F9(e,t,r){var n=pi.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function a8e(e,t,r){var n=pi.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function s8e(e,t,r){var n=pi.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function i8e(e,t,r){var n=pi.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function o8e(e,t,r){var n=pi.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function l8e(e,t,r){var n=qUe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function c8e(e,t,r){var n=pi.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function u8e(e,t,r){var n=pi.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function O9(e,t){return wn(e.getDate(),t,2)}function d8e(e,t){return wn(e.getHours(),t,2)}function A8e(e,t){return wn(e.getHours()%12||12,t,2)}function h8e(e,t){return wn(1+Db.count(pA(e),e),t,3)}function _re(e,t){return wn(e.getMilliseconds(),t,3)}function f8e(e,t){return _re(e,t)+"000"}function m8e(e,t){return wn(e.getMonth()+1,t,2)}function p8e(e,t){return wn(e.getMinutes(),t,2)}function g8e(e,t){return wn(e.getSeconds(),t,2)}function x8e(e){var t=e.getDay();return t===0?7:t}function v8e(e,t){return wn(ZS.count(pA(e)-1,e),t,2)}function Ere(e){var t=e.getDay();return t>=4||t===0?Rg(e):Rg.ceil(e)}function y8e(e,t){return e=Ere(e),wn(Rg.count(pA(e),e)+(pA(e).getDay()===4),t,2)}function b8e(e){return e.getDay()}function w8e(e,t){return wn($_.count(pA(e)-1,e),t,2)}function N8e(e,t){return wn(e.getFullYear()%100,t,2)}function C8e(e,t){return e=Ere(e),wn(e.getFullYear()%100,t,2)}function _8e(e,t){return wn(e.getFullYear()%1e4,t,4)}function E8e(e,t){var r=e.getDay();return e=r>=4||r===0?Rg(e):Rg.ceil(e),wn(e.getFullYear()%1e4,t,4)}function S8e(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+wn(t/60|0,"0",2)+wn(t%60,"0",2)}function D9(e,t){return wn(e.getUTCDate(),t,2)}function I8e(e,t){return wn(e.getUTCHours(),t,2)}function B8e(e,t){return wn(e.getUTCHours()%12||12,t,2)}function j8e(e,t){return wn(1+YS.count(gA(e),e),t,3)}function Sre(e,t){return wn(e.getUTCMilliseconds(),t,3)}function P8e(e,t){return Sre(e,t)+"000"}function k8e(e,t){return wn(e.getUTCMonth()+1,t,2)}function T8e(e,t){return wn(e.getUTCMinutes(),t,2)}function F8e(e,t){return wn(e.getUTCSeconds(),t,2)}function O8e(e){var t=e.getUTCDay();return t===0?7:t}function D8e(e,t){return wn(eI.count(gA(e)-1,e),t,2)}function Ire(e){var t=e.getUTCDay();return t>=4||t===0?Lg(e):Lg.ceil(e)}function R8e(e,t){return e=Ire(e),wn(Lg.count(gA(e),e)+(gA(e).getUTCDay()===4),t,2)}function L8e(e){return e.getUTCDay()}function M8e(e,t){return wn(K_.count(gA(e)-1,e),t,2)}function U8e(e,t){return wn(e.getUTCFullYear()%100,t,2)}function Q8e(e,t){return e=Ire(e),wn(e.getUTCFullYear()%100,t,2)}function V8e(e,t){return wn(e.getUTCFullYear()%1e4,t,4)}function H8e(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Lg(e):Lg.ceil(e),wn(e.getUTCFullYear()%1e4,t,4)}function $8e(){return"+0000"}function R9(){return"%"}function L9(e){return+e}function M9(e){return Math.floor(+e/1e3)}var gp,Bre,jre;K8e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function K8e(e){return gp=KUe(e),Bre=gp.format,gp.parse,jre=gp.utcFormat,gp.utcParse,gp}function q8e(e){return new Date(e)}function G8e(e){return e instanceof Date?+e:+new Date(+e)}function UO(e,t,r,n,a,s,o,l,c,u){var d=EO(),A=d.invert,f=d.domain,h=u(".%L"),m=u(":%S"),p=u("%I:%M"),g=u("%I %p"),x=u("%a %d"),y=u("%b %d"),b=u("%B"),_=u("%Y");function T(P){return(c(P)<P?h:l(P)<P?m:o(P)<P?p:s(P)<P?g:n(P)<P?a(P)<P?x:y:r(P)<P?b:_)(P)}return d.invert=function(P){return new Date(A(P))},d.domain=function(P){return arguments.length?f(Array.from(P,G8e)):f().map(q8e)},d.ticks=function(P){var C=f();return e(C[0],C[C.length-1],P??10)},d.tickFormat=function(P,C){return C==null?T:u(C)},d.nice=function(P){var C=f();return(!P||typeof P.range!="function")&&(P=t(C[0],C[C.length-1],P??10)),P?f(pre(C,P)):d},d.copy=function(){return Ob(d,UO(e,t,r,n,a,s,o,l,c,u))},d}function z8e(){return Tc.apply(UO(HUe,$Ue,pA,LO,ZS,Db,DO,FO,bm,Bre).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function W8e(){return Tc.apply(UO(QUe,VUe,gA,MO,eI,YS,RO,OO,bm,jre).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function tI(){var e=0,t=1,r,n,a,s,o=Bo,l=!1,c;function u(A){return A==null||isNaN(A=+A)?c:o(a===0?.5:(A=(s(A)-r)*a,l?Math.max(0,Math.min(1,A)):A))}u.domain=function(A){return arguments.length?([e,t]=A,r=s(e=+e),n=s(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(A){return arguments.length?(l=!!A,u):l},u.interpolator=function(A){return arguments.length?(o=A,u):o};function d(A){return function(f){var h,m;return arguments.length?([h,m]=f,o=A(h,m),u):[o(0),o(1)]}}return u.range=d(lx),u.rangeRound=d(_O),u.unknown=function(A){return arguments.length?(c=A,u):c},function(A){return s=A,r=A(e),n=A(t),a=r===n?0:1/(n-r),u}}function Tf(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Pre(){var e=kf(tI()(Bo));return e.copy=function(){return Tf(e,Pre())},BA.apply(e,arguments)}function kre(){var e=BO(tI()).domain([1,10]);return e.copy=function(){return Tf(e,kre()).base(e.base())},BA.apply(e,arguments)}function Tre(){var e=jO(tI());return e.copy=function(){return Tf(e,Tre()).constant(e.constant())},BA.apply(e,arguments)}function QO(){var e=PO(tI());return e.copy=function(){return Tf(e,QO()).exponent(e.exponent())},BA.apply(e,arguments)}function X8e(){return QO.apply(null,arguments).exponent(.5)}function Fre(){var e=[],t=Bo;function r(n){if(n!=null&&!isNaN(n=+n))return t((Tb(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(ef),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>O6e(e,s/n))},r.copy=function(){return Fre(t).domain(e)},BA.apply(r,arguments)}function rI(){var e=0,t=.5,r=1,n=1,a,s,o,l,c,u=Bo,d,A=!1,f;function h(p){return isNaN(p=+p)?f:(p=.5+((p=+d(p))-s)*(n*p<n*s?l:c),u(A?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([e,t,r]=p,a=d(e=+e),s=d(t=+t),o=d(r=+r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,h):[e,t,r]},h.clamp=function(p){return arguments.length?(A=!!p,h):A},h.interpolator=function(p){return arguments.length?(u=p,h):u};function m(p){return function(g){var x,y,b;return arguments.length?([x,y,b]=g,u=lUe(p,[x,y,b]),h):[u(0),u(.5),u(1)]}}return h.range=m(lx),h.rangeRound=m(_O),h.unknown=function(p){return arguments.length?(f=p,h):f},function(p){return d=p,a=p(e),s=p(t),o=p(r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,h}}function Ore(){var e=kf(rI()(Bo));return e.copy=function(){return Tf(e,Ore())},BA.apply(e,arguments)}function Dre(){var e=BO(rI()).domain([.1,1,10]);return e.copy=function(){return Tf(e,Dre()).base(e.base())},BA.apply(e,arguments)}function Rre(){var e=jO(rI());return e.copy=function(){return Tf(e,Rre()).constant(e.constant())},BA.apply(e,arguments)}function VO(){var e=PO(rI());return e.copy=function(){return Tf(e,VO()).exponent(e.exponent())},BA.apply(e,arguments)}function J8e(){return VO.apply(null,arguments).exponent(.5)}const Vv=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:wO,scaleDiverging:Ore,scaleDivergingLog:Dre,scaleDivergingPow:VO,scaleDivergingSqrt:J8e,scaleDivergingSymlog:Rre,scaleIdentity:mre,scaleImplicit:vT,scaleLinear:fre,scaleLog:gre,scaleOrdinal:bO,scalePoint:L6e,scalePow:kO,scaleQuantile:yre,scaleQuantize:bre,scaleRadial:vre,scaleSequential:Pre,scaleSequentialLog:kre,scaleSequentialPow:QO,scaleSequentialQuantile:Fre,scaleSequentialSqrt:X8e,scaleSequentialSymlog:Tre,scaleSqrt:PUe,scaleSymlog:xre,scaleThreshold:wre,scaleTime:z8e,scaleUtc:W8e,tickFormat:hre},Symbol.toStringTag,{value:"Module"}));var jA=e=>e.chartData,nI=Et([jA],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Lre=(e,t,r,n)=>n?nI(e):jA(e),Y8e=(e,t,r)=>r?nI(e):jA(e);function xf(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(qa(t)&&qa(r))return!0}return!1}function U9(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function Mre(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,s;if(qa(r))a=r;else if(typeof r=="function")return;if(qa(n))s=n;else if(typeof n=="function")return;var o=[a,s];if(xf(o))return o}}function Z8e(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(xf(n))return U9(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,s]=e,o,l;if(a==="auto")t!=null&&(o=Math.min(...t));else if(Sr(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&nV.test(a)){var c=nV.exec(a);if(c==null||c[1]==null||t==null)o=void 0;else{var u=+c[1];o=t[0]-u}}else o=t==null?void 0:t[0];if(s==="auto")t!=null&&(l=Math.max(...t));else if(Sr(s))l=s;else if(typeof s=="function")try{t!=null&&(l=s(t==null?void 0:t[1]))}catch{}else if(typeof s=="string"&&aV.test(s)){var d=aV.exec(s);if(d==null||d[1]==null||t==null)l=void 0;else{var A=+d[1];l=t[1]+A}}else l=t==null?void 0:t[1];var f=[o,l];if(xf(f))return t==null?f:U9(f,t,r)}}}var cx=1e9,eQe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},$O,ja=!0,jc="[DecimalError] ",Rm=jc+"Invalid argument: ",HO=jc+"Exponent out of range: ",ux=Math.floor,sm=Math.pow,tQe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,El,oi=1e7,fa=7,Ure=9007199254740991,q_=ux(Ure/fa),mr={};mr.absoluteValue=mr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};mr.comparedTo=mr.cmp=function(e){var t,r,n,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};mr.decimalPlaces=mr.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*fa;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};mr.dividedBy=mr.div=function(e){return rA(this,new this.constructor(e))};mr.dividedToIntegerBy=mr.idiv=function(e){var t=this,r=t.constructor;return Zn(rA(t,new r(e),0,1),r.precision)};mr.equals=mr.eq=function(e){return!this.cmp(e)};mr.exponent=function(){return js(this)};mr.greaterThan=mr.gt=function(e){return this.cmp(e)>0};mr.greaterThanOrEqualTo=mr.gte=function(e){return this.cmp(e)>=0};mr.isInteger=mr.isint=function(){return this.e>this.d.length-2};mr.isNegative=mr.isneg=function(){return this.s<0};mr.isPositive=mr.ispos=function(){return this.s>0};mr.isZero=function(){return this.s===0};mr.lessThan=mr.lt=function(e){return this.cmp(e)<0};mr.lessThanOrEqualTo=mr.lte=function(e){return this.cmp(e)<1};mr.logarithm=mr.log=function(e){var t,r=this,n=r.constructor,a=n.precision,s=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(El))throw Error(jc+"NaN");if(r.s<1)throw Error(jc+(r.s?"NaN":"-Infinity"));return r.eq(El)?new n(0):(ja=!1,t=rA(Q1(r,s),Q1(e,s),s),ja=!0,Zn(t,a))};mr.minus=mr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Hre(t,e):Qre(t,(e.s=-e.s,e))};mr.modulo=mr.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(jc+"NaN");return r.s?(ja=!1,t=rA(r,e,0,1).times(e),ja=!0,r.minus(t)):Zn(new n(r),a)};mr.naturalExponential=mr.exp=function(){return Vre(this)};mr.naturalLogarithm=mr.ln=function(){return Q1(this)};mr.negated=mr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};mr.plus=mr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Qre(t,e):Hre(t,(e.s=-e.s,e))};mr.precision=mr.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Rm+e);if(t=js(a)+1,n=a.d.length-1,r=n*fa+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};mr.squareRoot=mr.sqrt=function(){var e,t,r,n,a,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(jc+"NaN")}for(e=js(l),ja=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=Gu(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=ux((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(s=n,n=s.plus(rA(l,s,o+2)).times(.5),Gu(s.d).slice(0,o)===(t=Gu(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(Zn(s,r+1,0),s.times(s).eq(l)){n=s;break}}else if(t!="9999")break;o+=4}return ja=!0,Zn(n,r)};mr.times=mr.mul=function(e){var t,r,n,a,s,o,l,c,u,d=this,A=d.constructor,f=d.d,h=(e=new A(e)).d;if(!d.s||!e.s)return new A(0);for(e.s*=d.s,r=d.e+e.e,c=f.length,u=h.length,c<u&&(s=f,f=h,h=s,o=c,c=u,u=o),s=[],o=c+u,n=o;n--;)s.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)l=s[a]+h[n]*f[a-n-1]+t,s[a--]=l%oi|0,t=l/oi|0;s[a]=(s[a]+t)%oi|0}for(;!s[--o];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,ja?Zn(e,A.precision):e};mr.toDecimalPlaces=mr.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(nd(e,0,cx),t===void 0?t=n.rounding:nd(t,0,8),Zn(r,e+js(r)+1,t))};mr.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=h0(n,!0):(nd(e,0,cx),t===void 0?t=a.rounding:nd(t,0,8),n=Zn(new a(n),e+1,t),r=h0(n,!0,e+1)),r};mr.toFixed=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?h0(a):(nd(e,0,cx),t===void 0?t=s.rounding:nd(t,0,8),n=Zn(new s(a),e+js(a)+1,t),r=h0(n.abs(),!1,e+js(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};mr.toInteger=mr.toint=function(){var e=this,t=e.constructor;return Zn(new t(e),js(e)+1,t.rounding)};mr.toNumber=function(){return+this};mr.toPower=mr.pow=function(e){var t,r,n,a,s,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(El);if(l=new c(l),!l.s){if(e.s<1)throw Error(jc+"Infinity");return l}if(l.eq(El))return l;if(n=c.precision,e.eq(El))return Zn(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,s=l.s,o){if((r=d<0?-d:d)<=Ure){for(a=new c(El),t=Math.ceil(n/fa+4),ja=!1;r%2&&(a=a.times(l),V9(a.d,t)),r=ux(r/2),r!==0;)l=l.times(l),V9(l.d,t);return ja=!0,e.s<0?new c(El).div(a):Zn(a,n)}}else if(s<0)throw Error(jc+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,ja=!1,a=e.times(Q1(l,n+u)),ja=!0,a=Vre(a),a.s=s,a};mr.toPrecision=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?(r=js(a),n=h0(a,r<=s.toExpNeg||r>=s.toExpPos)):(nd(e,1,cx),t===void 0?t=s.rounding:nd(t,0,8),a=Zn(new s(a),e,t),r=js(a),n=h0(a,e<=r||r<=s.toExpNeg,e)),n};mr.toSignificantDigits=mr.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(nd(e,1,cx),t===void 0?t=n.rounding:nd(t,0,8)),Zn(new n(r),e,t)};mr.toString=mr.valueOf=mr.val=mr.toJSON=mr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=js(e),r=e.constructor;return h0(e,t<=r.toExpNeg||t>=r.toExpPos)};function Qre(e,t){var r,n,a,s,o,l,c,u,d=e.constructor,A=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),ja?Zn(t,A):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),s=o-a,s){for(s<0?(n=c,s=-s,l=u.length):(n=u,a=o,l=c.length),o=Math.ceil(A/fa),l=o>l?o+1:l+1,s>l&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/oi|0,c[s]%=oi;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,ja?Zn(t,A):t}function nd(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Rm+e)}function Gu(e){var t,r,n,a=e.length-1,s="",o=e[0];if(a>0){for(s+=o,t=1;t<a;t++)n=e[t]+"",r=fa-n.length,r&&(s+=gh(r)),s+=n;o=e[t],n=o+"",r=fa-n.length,r&&(s+=gh(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var rA=function(){function e(n,a){var s,o=0,l=n.length;for(n=n.slice();l--;)s=n[l]*a+o,n[l]=s%oi|0,o=s/oi|0;return o&&n.unshift(o),n}function t(n,a,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,s){for(var o=0;s--;)n[s]-=o,o=n[s]<a[s]?1:0,n[s]=o*oi+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,o){var l,c,u,d,A,f,h,m,p,g,x,y,b,_,T,P,C,S,I=n.constructor,L=n.s==a.s?1:-1,E=n.d,j=a.d;if(!n.s)return new I(n);if(!a.s)throw Error(jc+"Division by zero");for(c=n.e-a.e,C=j.length,T=E.length,h=new I(L),m=h.d=[],u=0;j[u]==(E[u]||0);)++u;if(j[u]>(E[u]||0)&&--c,s==null?y=s=I.precision:o?y=s+(js(n)-js(a))+1:y=s,y<0)return new I(0);if(y=y/fa+2|0,u=0,C==1)for(d=0,j=j[0],y++;(u<T||d)&&y--;u++)b=d*oi+(E[u]||0),m[u]=b/j|0,d=b%j|0;else{for(d=oi/(j[0]+1)|0,d>1&&(j=e(j,d),E=e(E,d),C=j.length,T=E.length),_=C,p=E.slice(0,C),g=p.length;g<C;)p[g++]=0;S=j.slice(),S.unshift(0),P=j[0],j[1]>=oi/2&&++P;do d=0,l=t(j,p,C,g),l<0?(x=p[0],C!=g&&(x=x*oi+(p[1]||0)),d=x/P|0,d>1?(d>=oi&&(d=oi-1),A=e(j,d),f=A.length,g=p.length,l=t(A,p,f,g),l==1&&(d--,r(A,C<f?S:j,f))):(d==0&&(l=d=1),A=j.slice()),f=A.length,f<g&&A.unshift(0),r(p,A,g),l==-1&&(g=p.length,l=t(j,p,C,g),l<1&&(d++,r(p,C<g?S:j,g))),g=p.length):l===0&&(d++,p=[0]),m[u++]=d,l&&p[0]?p[g++]=E[_]||0:(p=[E[_]],g=1);while((_++<T||p[0]!==void 0)&&y--)}return m[0]||m.shift(),h.e=c,Zn(h,o?s+js(h)+1:s)}}();function Vre(e,t){var r,n,a,s,o,l,c=0,u=0,d=e.constructor,A=d.precision;if(js(e)>16)throw Error(HO+js(e));if(!e.s)return new d(El);for(ja=!1,l=A,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(sm(2,u))/Math.LN10*2+5|0,l+=n,r=a=s=new d(El),d.precision=l;;){if(a=Zn(a.times(e),l),r=r.times(++c),o=s.plus(rA(a,r,l)),Gu(o.d).slice(0,l)===Gu(s.d).slice(0,l)){for(;u--;)s=Zn(s.times(s),l);return d.precision=A,t==null?(ja=!0,Zn(s,A)):s}s=o}}function js(e){for(var t=e.e*fa,r=e.d[0];r>=10;r/=10)t++;return t}function A5(e,t,r){if(t>e.LN10.sd())throw ja=!0,r&&(e.precision=r),Error(jc+"LN10 precision limit exceeded");return Zn(new e(e.LN10),t)}function gh(e){for(var t="";e--;)t+="0";return t}function Q1(e,t){var r,n,a,s,o,l,c,u,d,A=1,f=10,h=e,m=h.d,p=h.constructor,g=p.precision;if(h.s<1)throw Error(jc+(h.s?"NaN":"-Infinity"));if(h.eq(El))return new p(0);if(t==null?(ja=!1,u=g):u=t,h.eq(10))return t==null&&(ja=!0),A5(p,u);if(u+=f,p.precision=u,r=Gu(m),n=r.charAt(0),s=js(h),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)h=h.times(e),r=Gu(h.d),n=r.charAt(0),A++;s=js(h),n>1?(h=new p("0."+r),s++):h=new p(n+"."+r.slice(1))}else return c=A5(p,u+2,g).times(s+""),h=Q1(new p(n+"."+r.slice(1)),u-f).plus(c),p.precision=g,t==null?(ja=!0,Zn(h,g)):h;for(l=o=h=rA(h.minus(El),h.plus(El),u),d=Zn(h.times(h),u),a=3;;){if(o=Zn(o.times(d),u),c=l.plus(rA(o,new p(a),u)),Gu(c.d).slice(0,u)===Gu(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(A5(p,u+2,g).times(s+""))),l=rA(l,new p(A),u),p.precision=g,t==null?(ja=!0,Zn(l,g)):l;l=c,a+=2}}function Q9(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=ux(r/fa),e.d=[],n=(r+1)%fa,r<0&&(n+=fa),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=fa;n<a;)e.d.push(+t.slice(n,n+=fa));t=t.slice(n),n=fa-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),ja&&(e.e>q_||e.e<-q_))throw Error(HO+r)}else e.s=0,e.e=0,e.d=[0];return e}function Zn(e,t,r){var n,a,s,o,l,c,u,d,A=e.d;for(o=1,s=A[0];s>=10;s/=10)o++;if(n=t-o,n<0)n+=fa,a=t,u=A[d=0];else{if(d=Math.ceil((n+1)/fa),s=A.length,d>=s)return e;for(u=s=A[d],o=1;s>=10;s/=10)o++;n%=fa,a=n-fa+o}if(r!==void 0&&(s=sm(10,o-a-1),l=u/s%10|0,c=t<0||A[d+1]!==void 0||u%s,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/sm(10,o-a):0:A[d-1])%10&1||r==(e.s<0?8:7))),t<1||!A[0])return c?(s=js(e),A.length=1,t=t-s-1,A[0]=sm(10,(fa-t%fa)%fa),e.e=ux(-t/fa)||0):(A.length=1,A[0]=e.e=e.s=0),e;if(n==0?(A.length=d,s=1,d--):(A.length=d+1,s=sm(10,fa-n),A[d]=a>0?(u/sm(10,o-a)%sm(10,a)|0)*s:0),c)for(;;)if(d==0){(A[0]+=s)==oi&&(A[0]=1,++e.e);break}else{if(A[d]+=s,A[d]!=oi)break;A[d--]=0,s=1}for(n=A.length;A[--n]===0;)A.pop();if(ja&&(e.e>q_||e.e<-q_))throw Error(HO+js(e));return e}function Hre(e,t){var r,n,a,s,o,l,c,u,d,A,f=e.constructor,h=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),ja?Zn(t,h):t;if(c=e.d,A=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=A.length):(r=A,n=u,l=c.length),a=Math.max(Math.ceil(h/fa),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=A.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=A[a]){d=c[a]<A[a];break}o=0}for(d&&(r=c,c=A,A=r,t.s=-t.s),l=c.length,a=A.length-l;a>0;--a)c[l++]=0;for(a=A.length;a>o;){if(c[--a]<A[a]){for(s=a;s&&c[--s]===0;)c[s]=oi-1;--c[s],c[a]+=oi}c[a]-=A[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,ja?Zn(t,h):t):new f(0)}function h0(e,t,r){var n,a=js(e),s=Gu(e.d),o=s.length;return t?(r&&(n=r-o)>0?s=s.charAt(0)+"."+s.slice(1)+gh(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+gh(-a-1)+s,r&&(n=r-o)>0&&(s+=gh(n))):a>=o?(s+=gh(a+1-o),r&&(n=r-a-1)>0&&(s=s+"."+gh(n))):((n=a+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(s+="."),s+=gh(n))),e.s<0?"-"+s:s}function V9(e,t){if(e.length>t)return e.length=t,!0}function $re(e){var t,r,n;function a(s){var o=this;if(!(o instanceof a))return new a(s);if(o.constructor=a,s instanceof a){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Rm+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return Q9(o,s.toString())}else if(typeof s!="string")throw Error(Rm+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,tQe.test(s))Q9(o,s);else throw Error(Rm+s)}if(a.prototype=mr,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=$re,a.config=a.set=rQe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function rQe(e){if(!e||typeof e!="object")throw Error(jc+"Object expected");var t,r,n,a=["precision",1,cx,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(ux(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(Rm+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Rm+r+": "+n);return this}var $O=$re(eQe);El=new $O(1);const Dn=$O;var nQe=e=>e,Kre={},qre=e=>e===Kre,H9=e=>function t(){return arguments.length===0||arguments.length===1&&qre(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},Gre=(e,t)=>e===1?t:H9(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(o=>o!==Kre).length;return s>=e?t(...n):Gre(e-s,H9(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=n.map(d=>qre(d)?l.shift():d);return t(...u,...l)}))}),aQe=e=>Gre(e.length,e),NT=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},sQe=aQe((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),iQe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return nQe;var a=r.reverse(),s=a[0],o=a.slice(1);return function(){return o.reduce((l,c)=>c(l),s(...arguments))}};function zre(e){var t;return e===0?t=1:t=Math.floor(new Dn(e).abs().log(10).toNumber())+1,t}function Wre(e,t,r){for(var n=new Dn(e),a=0,s=[];n.lt(t)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}var Xre=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},Jre=(e,t,r)=>{if(e.lte(0))return new Dn(0);var n=zre(e.toNumber()),a=new Dn(10).pow(n),s=e.div(a),o=n!==1?.05:.1,l=new Dn(Math.ceil(s.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return t?new Dn(c.toNumber()):new Dn(Math.ceil(c.toNumber()))},oQe=(e,t,r)=>{var n=new Dn(1),a=new Dn(e);if(!a.isint()&&r){var s=Math.abs(e);s<1?(n=new Dn(10).pow(zre(e)-1),a=new Dn(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new Dn(Math.floor(e)))}else e===0?a=new Dn(Math.floor((t-1)/2)):r||(a=new Dn(Math.floor(e)));var o=Math.floor((t-1)/2),l=iQe(sQe(c=>a.add(new Dn(c-o).mul(n)).toNumber()),NT);return l(0,t)},Yre=function(t,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new Dn(0),tickMin:new Dn(0),tickMax:new Dn(0)};var o=Jre(new Dn(r).sub(t).div(n-1),a,s),l;t<=0&&r>=0?l=new Dn(0):(l=new Dn(t).add(r).div(2),l=l.sub(new Dn(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),u=Math.ceil(new Dn(r).sub(l).div(o).toNumber()),d=c+u+1;return d>n?Yre(t,r,n,a,s+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:o,tickMin:l.sub(new Dn(c).mul(o)),tickMax:l.add(new Dn(u).mul(o))})},lQe=function(t){var[r,n]=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),[l,c]=Xre([r,n]);if(l===-1/0||c===1/0){var u=c===1/0?[l,...NT(0,a-1).map(()=>1/0)]:[...NT(0,a-1).map(()=>-1/0),c];return r>n?u.reverse():u}if(l===c)return oQe(l,a,s);var{step:d,tickMin:A,tickMax:f}=Yre(l,c,o,s,0),h=Wre(A,f.add(new Dn(.1).mul(d)),d);return r>n?h.reverse():h},cQe=function(t,r){var[n,a]=t,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,l]=Xre([n,a]);if(o===-1/0||l===1/0)return[n,a];if(o===l)return[o];var c=Math.max(r,2),u=Jre(new Dn(l).sub(o).div(c-1),s,0),d=[...Wre(new Dn(o),new Dn(l),u),l];return s===!1&&(d=d.map(A=>Math.round(A))),n>a?d.reverse():d},Zre=e=>e.rootProps.maxBarSize,uQe=e=>e.rootProps.barGap,ene=e=>e.rootProps.barCategoryGap,dQe=e=>e.rootProps.barSize,Rb=e=>e.rootProps.stackOffset,tne=e=>e.rootProps.reverseStackOrder,KO=e=>e.options.chartName,qO=e=>e.rootProps.syncId,rne=e=>e.rootProps.syncMethod,GO=e=>e.options.eventEmitter,lo={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Od={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},bl={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},aI=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},AQe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Od.angleAxisId,includeHidden:!1,name:void 0,reversed:Od.reversed,scale:Od.scale,tick:Od.tick,tickCount:void 0,ticks:void 0,type:Od.type,unit:void 0},hQe={allowDataOverflow:bl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:bl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:bl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:bl.scale,tick:bl.tick,tickCount:bl.tickCount,ticks:void 0,type:bl.type,unit:void 0},fQe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Od.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Od.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Od.scale,tick:Od.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},mQe={allowDataOverflow:bl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:bl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:bl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:bl.scale,tick:bl.tick,tickCount:bl.tickCount,ticks:void 0,type:"category",unit:void 0},zO=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?fQe:AQe,WO=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?mQe:hQe,sI=e=>e.polarOptions,XO=Et([SA,IA,Ws],Jte),nne=Et([sI,XO],(e,t)=>{if(e!=null)return uo(e.innerRadius,t,0)}),ane=Et([sI,XO],(e,t)=>{if(e!=null)return uo(e.outerRadius,t,t*.8)}),pQe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},sne=Et([sI],pQe);Et([zO,sne],aI);var ine=Et([XO,nne,ane],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});Et([WO,ine],aI);var one=Et([Nn,sI,nne,ane,SA,IA],(e,t,r,n,a,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:l,startAngle:c,endAngle:u}=t;return{cx:uo(o,a,a/2),cy:uo(l,s,s/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),Ta=(e,t)=>t,Lb=(e,t,r)=>r;function JO(e){return e==null?void 0:e.id}function lne(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:a,dataKey:s}=r,o=new Map;return e.forEach(l=>{var c,u=(c=l.data)!==null&&c!==void 0?c:n;if(!(u==null||u.length===0)){var d=JO(l);u.forEach((A,f)=>{var h=s==null||a?f:String(xa(A,s,null)),m=xa(A,l.dataKey,0),p;o.has(h)?p=o.get(h):p={},Object.assign(p,{[d]:m}),o.set(h,p)})}}),Array.from(o.values())}function iI(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var oI=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function lI(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function gQe(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var Js=e=>{var t=Nn(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},dx=e=>e.tooltip.settings.axisId;function $9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function G_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$9(Object(r),!0).forEach(function(n){xQe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$9(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xQe(e,t,r){return(t=vQe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vQe(e){var t=yQe(e,"string");return typeof t=="symbol"?t:t+""}function yQe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CT=[0,"auto"],ni={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},cne=(e,t)=>e.cartesianAxis.xAxis[t],PA=(e,t)=>{var r=cne(e,t);return r??ni},ai={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:CT,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:jb},une=(e,t)=>e.cartesianAxis.yAxis[t],kA=(e,t)=>{var r=une(e,t);return r??ai},bQe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},YO=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??bQe},Ga=(e,t,r)=>{switch(t){case"xAxis":return PA(e,r);case"yAxis":return kA(e,r);case"zAxis":return YO(e,r);case"angleAxis":return zO(e,r);case"radiusAxis":return WO(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},wQe=(e,t,r)=>{switch(t){case"xAxis":return PA(e,r);case"yAxis":return kA(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Mb=(e,t,r)=>{switch(t){case"xAxis":return PA(e,r);case"yAxis":return kA(e,r);case"angleAxis":return zO(e,r);case"radiusAxis":return WO(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},dne=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function ZO(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var eD=e=>e.graphicalItems.cartesianItems,NQe=Et([Ta,Lb],ZO),tD=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),Ub=Et([eD,Ga,NQe],tD,{memoizeOptions:{resultEqualityCheck:lI}}),Ane=Et([Ub],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(iI)),hne=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),CQe=Et([Ub],hne),rD=e=>e.map(t=>t.data).filter(Boolean).flat(1),_Qe=Et([Ub],rD,{memoizeOptions:{resultEqualityCheck:lI}}),nD=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},aD=Et([_Qe,Lre],nD),sD=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:xa(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:xa(a,n)}))):e.map(n=>({value:n})),cI=Et([aD,Ga,Ub],sD);function fne(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function VN(e){if(rd(e)||e instanceof Date){var t=Number(e);if(qa(t))return t}}function K9(e){if(Array.isArray(e)){var t=[VN(e[0]),VN(e[1])];return xf(t)?t:void 0}var r=VN(e);if(r!=null)return[r,r]}function xA(e){return e.map(VN).filter(FOe)}function EQe(e,t,r){return!r||typeof t!="number"||td(t)?[]:r.length?xA(r.flatMap(n=>{var a=xa(e,n.dataKey),s,o;if(Array.isArray(a)?[s,o]=a:s=o=a,!(!qa(s)||!qa(o)))return[t-s,t+o]})):[]}var Ys=e=>{var t=Js(e),r=dx(e);return Mb(e,t,r)},Qb=Et([Ys],e=>e==null?void 0:e.dataKey),SQe=Et([Ane,Lre,Ys],lne),mne=(e,t,r,n)=>{var a={},s=t.reduce((o,l)=>{if(l.stackId==null)return o;var c=o[l.stackId];return c==null&&(c=[]),c.push(l),o[l.stackId]=c,o},a);return Object.fromEntries(Object.entries(s).map(o=>{var[l,c]=o,u=n?[...c].reverse():c,d=u.map(JO);return[l,{stackedData:YRe(e,d,r),graphicalItems:u}]}))},_T=Et([SQe,Ane,Rb,tne],mne),pne=(e,t,r,n)=>{var{dataStartIndex:a,dataEndIndex:s}=t;if(n==null&&r!=="zAxis"){var o=nLe(e,a,s);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},IQe=Et([Ga],e=>e.allowDataOverflow),iD=e=>{var t;if(e==null||!("domain"in e))return CT;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var r=xA(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:CT},oD=Et([Ga],iD),lD=Et([oD,IQe],Mre),BQe=Et([_T,jA,Ta,lD],pne,{memoizeOptions:{resultEqualityCheck:oI}}),uI=e=>e.errorBars,jQe=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>fne(r,n)),z_=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),o=Math.min(...s),l=Math.max(...s);return[o,l]}},cD=(e,t,r,n,a)=>{var s,o;if(r.length>0&&e.forEach(l=>{r.forEach(c=>{var u,d,A=(u=n[c.id])===null||u===void 0?void 0:u.filter(x=>fne(a,x)),f=xa(l,(d=t.dataKey)!==null&&d!==void 0?d:c.dataKey),h=EQe(l,f,A);if(h.length>=2){var m=Math.min(...h),p=Math.max(...h);(s==null||m<s)&&(s=m),(o==null||p>o)&&(o=p)}var g=K9(f);g!=null&&(s=s==null?g[0]:Math.min(s,g[0]),o=o==null?g[1]:Math.max(o,g[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(l=>{var c=K9(xa(l,t.dataKey));c!=null&&(s=s==null?c[0]:Math.min(s,c[0]),o=o==null?c[1]:Math.max(o,c[1]))}),qa(s)&&qa(o))return[s,o]},PQe=Et([aD,Ga,CQe,uI,Ta],cD,{memoizeOptions:{resultEqualityCheck:oI}});function kQe(e){var{value:t}=e;if(rd(t)||t instanceof Date)return t}var TQe=(e,t,r)=>{var n=e.map(kQe).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&fee(n))?are(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},gne=e=>e.referenceElements.dots,Ax=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),FQe=Et([gne,Ta,Lb],Ax),xne=e=>e.referenceElements.areas,OQe=Et([xne,Ta,Lb],Ax),vne=e=>e.referenceElements.lines,DQe=Et([vne,Ta,Lb],Ax),yne=(e,t)=>{if(e!=null){var r=xA(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},RQe=Et(FQe,Ta,yne),bne=(e,t)=>{if(e!=null){var r=xA(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},LQe=Et([OQe,Ta],bne);function MQe(e){var t;if(e.x!=null)return xA([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:xA(r)}function UQe(e){var t;if(e.y!=null)return xA([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:xA(r)}var wne=(e,t)=>{if(e!=null){var r=e.flatMap(n=>t==="xAxis"?MQe(n):UQe(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},QQe=Et([DQe,Ta],wne),VQe=Et(RQe,QQe,LQe,(e,t,r)=>z_(e,r,t)),uD=(e,t,r,n,a,s,o,l)=>{if(r!=null)return r;var c=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",u=c?z_(n,s,a):z_(s,a);return Z8e(t,u,e.allowDataOverflow)},HQe=Et([Ga,oD,lD,BQe,PQe,VQe,Nn,Ta],uD,{memoizeOptions:{resultEqualityCheck:oI}}),$Qe=[0,1],dD=(e,t,r,n,a,s,o)=>{if(!((e==null||r==null||r.length===0)&&o===void 0)){var{dataKey:l,type:c}=e,u=F0(t,s);if(u&&l==null){var d;return are(0,(d=r==null?void 0:r.length)!==null&&d!==void 0?d:0)}return c==="category"?TQe(n,e,u):a==="expand"?$Qe:o}},AD=Et([Ga,Nn,aD,cI,Rb,Ta,HQe],dD),Nne=(e,t,r,n,a)=>{if(e!=null){var{scale:s,type:o}=e;if(s==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof s=="string"){var l="scale".concat(_b(s));return l in Vv?l:"point"}}},hx=Et([Ga,Nn,dne,KO,Ta],Nne);function KQe(e){if(e!=null){if(e in Vv)return Vv[e]();var t="scale".concat(_b(e));if(t in Vv)return Vv[t]()}}function hD(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=KQe(t);if(a!=null){var s=a.domain(r).range(n);return GRe(s),s}}}var fD=(e,t,r)=>{var n=iD(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&xf(e))return lQe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&xf(e))return cQe(e,t.tickCount,t.allowDecimals)}},mD=Et([AD,Mb,hx],fD),pD=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&xf(t)&&Array.isArray(r)&&r.length>0){var a=t[0],s=r[0],o=t[1],l=r[r.length-1];return[Math.min(a,s),Math.max(o,l)]}return t},qQe=Et([Ga,AD,mD,Ta],pD),GQe=Et(cI,Ga,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(xA(e.map(A=>A.value))).sort((A,f)=>A-f),a=n[0],s=n[n.length-1];if(a==null||s==null)return 1/0;var o=s-a;if(o===0)return 1/0;for(var l=0;l<n.length-1;l++){var c=n[l],u=n[l+1];if(!(c==null||u==null)){var d=u-c;r=Math.min(r,d)}}return r/o}}),Cne=Et(GQe,Nn,ene,Ws,(e,t,r,n,a)=>a,(e,t,r,n,a)=>{if(!qa(e))return 0;var s=t==="vertical"?n.height:n.width;if(a==="gap")return e*s/2;if(a==="no-gap"){var o=uo(r,e*s),l=e*s/2;return l-o-(l-o)/s*o}return 0}),zQe=(e,t,r)=>{var n=PA(e,t);return n==null||typeof n.padding!="string"?0:Cne(e,"xAxis",t,r,n.padding)},WQe=(e,t,r)=>{var n=kA(e,t);return n==null||typeof n.padding!="string"?0:Cne(e,"yAxis",t,r,n.padding)},XQe=Et(PA,zQe,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),JQe=Et(kA,WQe,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),YQe=Et([Ws,XQe,VS,QS,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),ZQe=Et([Ws,Nn,JQe,VS,QS,(e,t,r)=>r],(e,t,r,n,a,s)=>{var{padding:o}=a;return s?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Vb=(e,t,r,n)=>{var a;switch(t){case"xAxis":return YQe(e,r,n);case"yAxis":return ZQe(e,r,n);case"zAxis":return(a=YO(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return sne(e);case"radiusAxis":return ine(e,r);default:return}},_ne=Et([Ga,Vb],aI),dI=Et([Ga,hx,qQe,_ne],hD);Et([Ub,uI,Ta],jQe);function Ene(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var AI=(e,t)=>t,hI=(e,t,r)=>r,e7e=Et(MS,AI,hI,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Ene)),t7e=Et(US,AI,hI,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Ene)),Sne=(e,t)=>({width:e.width,height:t.height}),r7e=(e,t)=>{var r=typeof t.width=="number"?t.width:jb;return{width:r,height:e.height}},Ine=Et(Ws,PA,Sne),n7e=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},a7e=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},s7e=Et(IA,Ws,e7e,AI,hI,(e,t,r,n,a)=>{var s={},o;return r.forEach(l=>{var c=Sne(t,l);o==null&&(o=n7e(t,n,e));var u=n==="top"&&!a||n==="bottom"&&a;s[l.id]=o-Number(u)*c.height,o+=(u?-1:1)*c.height}),s}),i7e=Et(SA,Ws,t7e,AI,hI,(e,t,r,n,a)=>{var s={},o;return r.forEach(l=>{var c=r7e(t,l);o==null&&(o=a7e(t,n,e));var u=n==="left"&&!a||n==="right"&&a;s[l.id]=o-Number(u)*c.width,o+=(u?-1:1)*c.width}),s}),o7e=(e,t)=>{var r=PA(e,t);if(r!=null)return s7e(e,r.orientation,r.mirror)},l7e=Et([Ws,PA,o7e,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var a=r==null?void 0:r[n];return a==null?{x:e.left,y:0}:{x:e.left,y:a}}}),c7e=(e,t)=>{var r=kA(e,t);if(r!=null)return i7e(e,r.orientation,r.mirror)},u7e=Et([Ws,kA,c7e,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var a=r==null?void 0:r[n];return a==null?{x:0,y:e.top}:{x:a,y:e.top}}}),Bne=Et(Ws,kA,(e,t)=>{var r=typeof t.width=="number"?t.width:jb;return{width:r,height:e.height}}),q9=(e,t,r)=>{switch(t){case"xAxis":return Ine(e,r).width;case"yAxis":return Bne(e,r).height;default:return}},jne=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:o}=r,l=F0(e,n),c=t.map(u=>u.value);if(o&&l&&s==="category"&&a&&fee(c))return c}},gD=Et([Nn,cI,Ga,Ta],jne),Pne=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,o=F0(e,n);if(o&&(a==="number"||s!=="auto"))return t.map(l=>l.value)}},xD=Et([Nn,cI,Mb,Ta],Pne);Et([Nn,wQe,hx,dI,gD,xD,Vb,mD,Ta],(e,t,r,n,a,s,o,l,c)=>{if(t!=null){var u=F0(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:s,duplicateDomain:a,isCategorical:u,niceTicks:l,range:o,realScaleType:r,scale:n}}});var d7e=(e,t,r,n,a,s,o,l,c)=>{if(!(t==null||n==null)){var u=F0(e,c),{type:d,ticks:A,tickCount:f}=t,h=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,m=d==="category"&&n.bandwidth?n.bandwidth()/h:0;m=c==="angleAxis"&&s!=null&&s.length>=2?Li(s[0]-s[1])*2*m:m;var p=A||a;if(p){var g=p.map((x,y)=>{var b=o?o.indexOf(x):x;return{index:y,coordinate:n(b)+m,value:x,offset:m}});return g.filter(x=>qa(x.coordinate))}return u&&l?l.map((x,y)=>({coordinate:n(x)+m,value:x,index:y,offset:m})).filter(x=>qa(x.coordinate)):n.ticks?n.ticks(f).map(x=>({coordinate:n(x)+m,value:x,offset:m})):n.domain().map((x,y)=>({coordinate:n(x)+m,value:o?o[x]:x,index:y,offset:m}))}},kne=Et([Nn,Mb,hx,dI,mD,Vb,gD,xD,Ta],d7e),A7e=(e,t,r,n,a,s,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var l=F0(e,o),{tickCount:c}=t,u=0;return u=o==="angleAxis"&&(n==null?void 0:n.length)>=2?Li(n[0]-n[1])*2*u:u,l&&s?s.map((d,A)=>({coordinate:r(d)+u,value:d,index:A,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,A)=>({coordinate:r(d)+u,value:a?a[d]:d,index:A,offset:u}))}},Mg=Et([Nn,Mb,dI,Vb,gD,xD,Ta],A7e),Ug=Et(Ga,dI,(e,t)=>{if(!(e==null||t==null))return G_(G_({},e),{},{scale:t})}),h7e=Et([Ga,hx,AD,_ne],hD);Et((e,t,r)=>YO(e,r),h7e,(e,t)=>{if(!(e==null||t==null))return G_(G_({},e),{},{scale:t})});var f7e=Et([Nn,MS,US],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Tne=e=>e.options.defaultTooltipEventType,Fne=e=>e.options.validateTooltipEventTypes;function One(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function vD(e,t){var r=Tne(e),n=Fne(e);return One(t,r,n)}function m7e(e){return Nr(t=>vD(t,e))}var Dne=(e,t)=>{var r,n=Number(t);if(!(td(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},p7e=e=>e.tooltip.settings,Ih={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},g7e={itemInteraction:{click:Ih,hover:Ih},axisInteraction:{click:Ih,hover:Ih},keyboardInteraction:Ih,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Rne=nl({name:"tooltip",initialState:g7e,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Ca()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,a=ou(e).tooltipItemPayloads.indexOf(r);a>-1&&(e.tooltipItemPayloads[a]=n)},prepare:Ca()},removeTooltipEntrySettings:{reducer(e,t){var r=ou(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Ca()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:x7e,replaceTooltipEntrySettings:v7e,removeTooltipEntrySettings:y7e,setTooltipSettingsState:b7e,setActiveMouseOverItemIndex:Lne,mouseLeaveItem:w7e,mouseLeaveChart:Mne,setActiveClickItemIndex:N7e,setMouseOverAxisIndex:Une,setMouseClickAxisIndex:C7e,setSyncInteraction:ET,setKeyboardInteraction:ST}=Rne.actions,_7e=Rne.reducer;function G9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Y2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G9(Object(r),!0).forEach(function(n){E7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G9(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function E7e(e,t,r){return(t=S7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S7e(e){var t=I7e(e,"string");return typeof t=="symbol"?t:t+""}function I7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function B7e(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function j7e(e){return e.index!=null}var Qne=(e,t,r,n)=>{if(t==null)return Ih;var a=B7e(e,t,r);if(a==null)return Ih;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(j7e(a)){if(s)return Y2(Y2({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return Y2(Y2({},Ih),{},{coordinate:a.coordinate})};function P7e(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function k7e(e,t){var r=P7e(e),n=t[0],a=t[1];if(r===void 0)return!1;var s=Math.min(n,a),o=Math.max(n,a);return r>=s&&r<=o}function T7e(e,t,r){if(r==null||t==null)return!0;var n=xa(e,t);return n==null||!xf(r)?!0:k7e(n,r)}var yD=(e,t,r,n)=>{var a=e==null?void 0:e.index;if(a==null)return null;var s=Number(a);if(!qa(s))return a;var o=0,l=1/0;t.length>0&&(l=t.length-1);var c=Math.max(o,Math.min(s,l)),u=t[c];return u==null||T7e(u,r,n)?String(c):null},Vne=(e,t,r,n,a,s,o,l)=>{if(!(s==null||l==null)){var c=o[0],u=c==null?void 0:l(c.positions,s);if(u!=null)return u;var d=a==null?void 0:a[Number(s)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},Hne=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;if(r==="hover"?a=e.itemInteraction.hover.graphicalItemId:a=e.itemInteraction.click.graphicalItemId,a==null&&n!=null){var s=e.tooltipItemPayloads[0];return s!=null?[s]:[]}return e.tooltipItemPayloads.filter(o=>{var l;return((l=o.settings)===null||l===void 0?void 0:l.graphicalItemId)===a})},Hb=e=>e.options.tooltipPayloadSearcher,fx=e=>e.tooltip;function z9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function W9(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z9(Object(r),!0).forEach(function(n){F7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z9(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function F7e(e,t,r){return(t=O7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O7e(e){var t=D7e(e,"string");return typeof t=="symbol"?t:t+""}function D7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function R7e(e,t){return e??t}var $ne=(e,t,r,n,a,s,o)=>{if(!(t==null||s==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,A=[];return e.reduce((f,h)=>{var m,{dataDefinedOnItem:p,settings:g}=h,x=R7e(p,l),y=Array.isArray(x)?wte(x,u,d):x,b=(m=g==null?void 0:g.dataKey)!==null&&m!==void 0?m:n,_=g==null?void 0:g.nameKey,T;if(n&&Array.isArray(y)&&!Array.isArray(y[0])&&o==="axis"?T=TOe(y,n,a):T=s(y,t,c,_),Array.isArray(T))T.forEach(C=>{var S=W9(W9({},g),{},{name:C.name,unit:C.unit,color:void 0,fill:void 0});f.push(sV({tooltipEntrySettings:S,dataKey:C.dataKey,payload:C.payload,value:xa(C.payload,C.dataKey),name:C.name}))});else{var P;f.push(sV({tooltipEntrySettings:g,dataKey:b,payload:T,value:xa(T,b),name:(P=xa(T,_))!==null&&P!==void 0?P:g==null?void 0:g.name}))}return f},A)}},bD=Et([Ys,Nn,dne,KO,Js],Nne),L7e=Et([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),M7e=Et([Js,dx],ZO),mx=Et([L7e,Ys,M7e],tD,{memoizeOptions:{resultEqualityCheck:lI}}),U7e=Et([mx],e=>e.filter(iI)),Q7e=Et([mx],rD,{memoizeOptions:{resultEqualityCheck:lI}}),px=Et([Q7e,jA],nD),V7e=Et([U7e,jA,Ys],lne),wD=Et([px,Ys,mx],sD),Kne=Et([Ys],iD),H7e=Et([Ys],e=>e.allowDataOverflow),qne=Et([Kne,H7e],Mre),$7e=Et([mx],e=>e.filter(iI)),K7e=Et([V7e,$7e,Rb,tne],mne),q7e=Et([K7e,jA,Js,qne],pne),G7e=Et([mx],hne),z7e=Et([px,Ys,G7e,uI,Js],cD,{memoizeOptions:{resultEqualityCheck:oI}}),W7e=Et([gne,Js,dx],Ax),X7e=Et([W7e,Js],yne),J7e=Et([xne,Js,dx],Ax),Y7e=Et([J7e,Js],bne),Z7e=Et([vne,Js,dx],Ax),eVe=Et([Z7e,Js],wne),tVe=Et([X7e,eVe,Y7e],z_),rVe=Et([Ys,Kne,qne,q7e,z7e,tVe,Nn,Js],uD),$b=Et([Ys,Nn,px,wD,Rb,Js,rVe],dD),nVe=Et([$b,Ys,bD],fD),aVe=Et([Ys,$b,nVe,Js],pD),Gne=e=>{var t=Js(e),r=dx(e),n=!1;return Vb(e,t,r,n)},zne=Et([Ys,Gne],aI),Wne=Et([Ys,bD,aVe,zne],hD),sVe=Et([Nn,wD,Ys,Js],jne),iVe=Et([Nn,wD,Ys,Js],Pne),oVe=(e,t,r,n,a,s,o,l)=>{if(t){var{type:c}=t,u=F0(e,l);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,A=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return A=l==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?Li(a[0]-a[1])*2*A:A,u&&o?o.map((f,h)=>({coordinate:n(f)+A,value:f,index:h,offset:A})):n.domain().map((f,h)=>({coordinate:n(f)+A,value:s?s[f]:f,index:h,offset:A}))}}},TA=Et([Nn,Ys,bD,Wne,Gne,sVe,iVe,Js],oVe),ND=Et([Tne,Fne,p7e],(e,t,r)=>One(r.shared,e,t)),Xne=e=>e.tooltip.settings.trigger,CD=e=>e.tooltip.settings.defaultIndex,Kb=Et([fx,ND,Xne,CD],Qne),f0=Et([Kb,px,Qb,$b],yD),Jne=Et([TA,f0],Dne),_D=Et([Kb],e=>{if(e)return e.dataKey}),lVe=Et([Kb],e=>{if(e)return e.graphicalItemId}),Yne=Et([fx,ND,Xne,CD],Hne),cVe=Et([SA,IA,Nn,Ws,TA,CD,Yne,Hb],Vne),uVe=Et([Kb,cVe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),dVe=Et([Kb],e=>{var t;return(t=e==null?void 0:e.active)!==null&&t!==void 0?t:!1}),AVe=Et([Yne,f0,jA,Qb,Jne,Hb,ND],$ne);Et([AVe],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function X9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function J9(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X9(Object(r),!0).forEach(function(n){hVe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X9(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hVe(e,t,r){return(t=fVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fVe(e){var t=mVe(e,"string");return typeof t=="symbol"?t:t+""}function mVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pVe=()=>Nr(Ys),gVe=()=>{var e=pVe(),t=Nr(TA),r=Nr(Wne);return S_(!e||!r?void 0:J9(J9({},e),{},{scale:r}),t)};function Y9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y9(Object(r),!0).forEach(function(n){xVe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y9(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xVe(e,t,r){return(t=vVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vVe(e){var t=yVe(e,"string");return typeof t=="symbol"?t:t+""}function yVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bVe=(e,t,r,n)=>{var a=t.find(s=>s&&s.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:a.coordinate}}return{x:0,y:0}},wVe=(e,t,r,n)=>{var a=t.find(u=>u&&u.index===r);if(a){if(e==="centric"){var s=a.coordinate,{radius:o}=n;return xp(xp(xp({},n),Bs(n.cx,n.cy,o,s)),{},{angle:s,radius:o})}var l=a.coordinate,{angle:c}=n;return xp(xp(xp({},n),Bs(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function NVe(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var Zne=(e,t,r,n,a)=>{var s,o=(s=t==null?void 0:t.length)!==null&&s!==void 0?s:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var l=0;l<o;l++){var c,u,d,A,f,h=l>0?(c=r[l-1])===null||c===void 0?void 0:c.coordinate:(u=r[o-1])===null||u===void 0?void 0:u.coordinate,m=(d=r[l])===null||d===void 0?void 0:d.coordinate,p=l>=o-1?(A=r[0])===null||A===void 0?void 0:A.coordinate:(f=r[l+1])===null||f===void 0?void 0:f.coordinate,g=void 0;if(!(h==null||m==null||p==null))if(Li(m-h)!==Li(p-m)){var x=[];if(Li(p-m)===Li(a[1]-a[0])){g=p;var y=m+a[1]-a[0];x[0]=Math.min(y,(y+h)/2),x[1]=Math.max(y,(y+h)/2)}else{g=h;var b=p+a[1]-a[0];x[0]=Math.min(m,(b+m)/2),x[1]=Math.max(m,(b+m)/2)}var _=[Math.min(m,(g+m)/2),Math.max(m,(g+m)/2)];if(e>_[0]&&e<=_[1]||e>=x[0]&&e<=x[1]){var T;return(T=r[l])===null||T===void 0?void 0:T.index}}else{var P=Math.min(h,p),C=Math.max(h,p);if(e>(P+m)/2&&e<=(C+m)/2){var S;return(S=r[l])===null||S===void 0?void 0:S.index}}}else if(t)for(var I=0;I<o;I++){var L=t[I];if(L!=null){var E=t[I+1],j=t[I-1];if(I===0&&E!=null&&e<=(L.coordinate+E.coordinate)/2||I===o-1&&j!=null&&e>(L.coordinate+j.coordinate)/2||I>0&&I<o-1&&j!=null&&E!=null&&e>(L.coordinate+j.coordinate)/2&&e<=(L.coordinate+E.coordinate)/2)return L.index}}return-1},CVe=()=>Nr(KO),ED=(e,t)=>t,eae=(e,t,r)=>r,SD=(e,t,r,n)=>n,_Ve=Et(TA,e=>IS(e,t=>t.coordinate)),ID=Et([fx,ED,eae,SD],Qne),BD=Et([ID,px,Qb,$b],yD),EVe=(e,t,r)=>{if(t!=null){var n=fx(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},tae=Et([fx,ED,eae,SD],Hne),W_=Et([SA,IA,Nn,Ws,TA,SD,tae,Hb],Vne),SVe=Et([ID,W_],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),rae=Et([TA,BD],Dne),IVe=Et([tae,BD,jA,Qb,rae,Hb,ED],$ne),BVe=Et([ID,BD],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),jVe=(e,t,r,n,a,s,o)=>{if(!(!e||!r||!n||!a)&&NVe(e,o)){var l=aLe(e,t),c=Zne(l,s,a,r,n),u=bVe(t,a,c,e);return{activeIndex:String(c),activeCoordinate:u}}},PVe=(e,t,r,n,a,s,o)=>{if(!(!e||!n||!a||!s||!r)){var l=x6e(e,r);if(l){var c=sLe(l,t),u=Zne(c,o,s,n,a),d=wVe(t,s,u,l);return{activeIndex:String(u),activeCoordinate:d}}}},kVe=(e,t,r,n,a,s,o,l)=>{if(!(!e||!t||!n||!a||!s))return t==="horizontal"||t==="vertical"?jVe(e,t,n,a,s,o,l):PVe(e,t,r,n,a,s,o)},TVe=Et(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElement:n.element}}),FVe=Et(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(lo)),r=Array.from(new Set(t));return r.sort((n,a)=>n-a)},{memoizeOptions:{resultEqualityCheck:gQe}});function Z9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function eH(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z9(Object(r),!0).forEach(function(n){OVe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z9(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OVe(e,t,r){return(t=DVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DVe(e){var t=RVe(e,"string");return typeof t=="symbol"?t:t+""}function RVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LVe={},MVe={zIndexMap:Object.values(lo).reduce((e,t)=>eH(eH({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),LVe)},UVe=new Set(Object.values(lo));function QVe(e){return UVe.has(e)}var nae=nl({name:"zIndex",initialState:MVe,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Ca()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!QVe(r)&&delete e.zIndexMap[r])},prepare:Ca()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r,element:n,isPanorama:a}=t.payload;e.zIndexMap[r]?a?e.zIndexMap[r].panoramaElement=n:e.zIndexMap[r].element=n:e.zIndexMap[r]={consumers:0,element:a?void 0:n,panoramaElement:a?n:void 0}},prepare:Ca()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElement=void 0:e.zIndexMap[r].element=void 0)},prepare:Ca()}}}),{registerZIndexPortal:VVe,unregisterZIndexPortal:HVe,registerZIndexPortalElement:$Ve,unregisterZIndexPortalElement:KVe}=nae.actions,qVe=nae.reducer;function ud(e){var{zIndex:t,children:r}=e,n=TLe(),a=n&&t!==void 0&&t!==0,s=Ul(),o=ca();v.useLayoutEffect(()=>a?(o(VVe({zIndex:t})),()=>{o(HVe({zIndex:t}))}):Eb,[o,t,a]);var l=Nr(c=>TVe(c,t,s));return a?l?nu.createPortal(r,l):null:r}function IT(){return IT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},IT.apply(null,arguments)}function tH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Z2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tH(Object(r),!0).forEach(function(n){GVe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GVe(e,t,r){return(t=zVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zVe(e){var t=WVe(e,"string");return typeof t=="symbol"?t:t+""}function WVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XVe(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return v.isValidElement(t)?v.cloneElement(t,n):v.createElement(r,n)}function JVe(e){var t,{coordinate:r,payload:n,index:a,offset:s,tooltipAxisBandSize:o,layout:l,cursor:c,tooltipEventType:u,chartName:d}=e,A=r,f=n,h=a;if(!c||!A||d!=="ScatterChart"&&u!=="axis")return null;var m,p,g;if(d==="ScatterChart")m=A,p=kMe,g=lo.cursorLine;else if(d==="BarChart")m=TMe(l,A,s,o),p=Xte,g=lo.cursorRectangle;else if(l==="radial"&&pee(A)){var{cx:x,cy:y,radius:b,startAngle:_,endAngle:T}=Yte(A);m={cx:x,cy:y,startAngle:_,endAngle:T,innerRadius:b,outerRadius:b},p=ere,g=lo.cursorLine}else m={points:w6e(l,A,s)},p=vO,g=lo.cursorLine;var P=typeof c=="object"&&"className"in c?c.className:void 0,C=Z2(Z2(Z2(Z2({stroke:"#ccc",pointerEvents:"none"},s),m),I1(c)),{},{payload:f,payloadIndex:h,className:Qn("recharts-tooltip-cursor",P)});return v.createElement(ud,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:g},v.createElement(XVe,{cursor:c,cursorComp:p,cursorProps:C}))}function YVe(e){var t=gVe(),r=PLe(),n=Pb(),a=CVe();return t==null||r==null||n==null||a==null?null:v.createElement(JVe,IT({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var aae=v.createContext(null),ZVe=()=>v.useContext(aae),sae={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,A,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new a(d,A||c,f),m=r?r+u:u;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],h]:c._events[m].push(h):(c._events[m]=h,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,A;if(this._eventsCount===0)return u;for(A in d=this._events)t.call(d,A)&&u.push(r?A.slice(1):A);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,A=this._events[d];if(!A)return[];if(A.fn)return[A.fn];for(var f=0,h=A.length,m=new Array(h);f<h;f++)m[f]=A[f].fn;return m},l.prototype.listenerCount=function(u){var d=r?r+u:u,A=this._events[d];return A?A.fn?1:A.length:0},l.prototype.emit=function(u,d,A,f,h,m){var p=r?r+u:u;if(!this._events[p])return!1;var g=this._events[p],x=arguments.length,y,b;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),x){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,d),!0;case 3:return g.fn.call(g.context,d,A),!0;case 4:return g.fn.call(g.context,d,A,f),!0;case 5:return g.fn.call(g.context,d,A,f,h),!0;case 6:return g.fn.call(g.context,d,A,f,h,m),!0}for(b=1,y=new Array(x-1);b<x;b++)y[b-1]=arguments[b];g.fn.apply(g.context,y)}else{var _=g.length,T;for(b=0;b<_;b++)switch(g[b].once&&this.removeListener(u,g[b].fn,void 0,!0),x){case 1:g[b].fn.call(g[b].context);break;case 2:g[b].fn.call(g[b].context,d);break;case 3:g[b].fn.call(g[b].context,d,A);break;case 4:g[b].fn.call(g[b].context,d,A,f);break;default:if(!y)for(T=1,y=new Array(x-1);T<x;T++)y[T-1]=arguments[T];g[b].fn.apply(g[b].context,y)}}return!0},l.prototype.on=function(u,d,A){return s(this,u,d,A,!1)},l.prototype.once=function(u,d,A){return s(this,u,d,A,!0)},l.prototype.removeListener=function(u,d,A,f){var h=r?r+u:u;if(!this._events[h])return this;if(!d)return o(this,h),this;var m=this._events[h];if(m.fn)m.fn===d&&(!f||m.once)&&(!A||m.context===A)&&o(this,h);else{for(var p=0,g=[],x=m.length;p<x;p++)(m[p].fn!==d||f&&!m[p].once||A&&m[p].context!==A)&&g.push(m[p]);g.length?this._events[h]=g.length===1?g[0]:g:o(this,h)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(sae);var e9e=sae.exports;const t9e=yA(e9e);var V1=new t9e,BT="recharts.syncEvent.tooltip",rH="recharts.syncEvent.brush";function iae(e,t){if(t){var r=Number.parseInt(t,10);if(!td(r))return e==null?void 0:e[r]}}var r9e={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},oae=nl({name:"options",initialState:r9e,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),n9e=oae.reducer,{createEventEmitter:a9e}=oae.actions;function s9e(e){return e.tooltip.syncInteraction}var i9e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},lae=nl({name:"chartData",initialState:i9e,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:nH,setDataStartEndIndexes:o9e,setComputedData:Zze}=lae.actions,l9e=lae.reducer,c9e=["x","y"];function aH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aH(Object(r),!0).forEach(function(n){u9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function u9e(e,t,r){return(t=d9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d9e(e){var t=A9e(e,"string");return typeof t=="symbol"?t:t+""}function A9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function h9e(e,t){if(e==null)return{};var r,n,a=f9e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function f9e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function m9e(){var e=Nr(qO),t=Nr(GO),r=ca(),n=Nr(rne),a=Nr(TA),s=Pb(),o=HS(),l=Nr(c=>c.rootProps.className);v.useEffect(()=>{if(e==null)return Eb;var c=(u,d,A)=>{if(t!==A&&e===u){if(n==="index"){var f;if(o&&d!==null&&d!==void 0&&(f=d.payload)!==null&&f!==void 0&&f.coordinate&&d.payload.sourceViewBox){var h=d.payload.coordinate,{x:m,y:p}=h,g=h9e(h,c9e),{x,y,width:b,height:_}=d.payload.sourceViewBox,T=vp(vp({},g),{},{x:o.x+(b?(m-x)/b:0)*o.width,y:o.y+(_?(p-y)/_:0)*o.height});r(vp(vp({},d),{},{payload:vp(vp({},d.payload),{},{coordinate:T})}))}else r(d);return}if(a!=null){var P;if(typeof n=="function"){var C={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},S=n(a,C);P=a[S]}else n==="value"&&(P=a.find(te=>String(te.value)===d.payload.label));var{coordinate:I}=d.payload;if(P==null||d.payload.active===!1||I==null||o==null){r(ET({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:L,y:E}=I,j=Math.min(L,o.x+o.width),R=Math.min(E,o.y+o.height),W={x:s==="horizontal"?P.coordinate:j,y:s==="horizontal"?R:P.coordinate},de=ET({active:d.payload.active,coordinate:W,dataKey:d.payload.dataKey,index:String(P.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});r(de)}}};return V1.on(BT,c),()=>{V1.off(BT,c)}},[l,r,t,e,n,a,s,o])}function p9e(){var e=Nr(qO),t=Nr(GO),r=ca();v.useEffect(()=>{if(e==null)return Eb;var n=(a,s,o)=>{t!==o&&e===a&&r(o9e(s))};return V1.on(rH,n),()=>{V1.off(rH,n)}},[r,t,e])}function g9e(){var e=ca();v.useEffect(()=>{e(a9e())},[e]),m9e(),p9e()}function x9e(e,t,r,n,a,s){var o=Nr(h=>EVe(h,e,t)),l=Nr(GO),c=Nr(qO),u=Nr(rne),d=Nr(s9e),A=d==null?void 0:d.active,f=HS();v.useEffect(()=>{if(!A&&c!=null&&l!=null){var h=ET({active:s,coordinate:r,dataKey:o,index:a,label:typeof n=="number"?String(n):n,sourceViewBox:f,graphicalItemId:void 0});V1.emit(BT,c,h,l)}},[A,r,o,a,n,l,c,u,s,f])}function sH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function iH(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sH(Object(r),!0).forEach(function(n){v9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function v9e(e,t,r){return(t=y9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y9e(e){var t=b9e(e,"string");return typeof t=="symbol"?t:t+""}function b9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function w9e(e){return e.dataKey}function N9e(e,t){return v.isValidElement(e)?v.cloneElement(e,t):typeof e=="function"?v.createElement(e,t):v.createElement(dMe,t)}var oH=[],C9e={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function lH(e){var t,r,n=Vi(e,C9e),{active:a,allowEscapeViewBox:s,animationDuration:o,animationEasing:l,content:c,filterNull:u,isAnimationActive:d,offset:A,payloadUniqBy:f,position:h,reverseDirection:m,useTranslate3d:p,wrapperStyle:g,cursor:x,shared:y,trigger:b,defaultIndex:_,portal:T,axisId:P}=n,C=ca(),S=typeof _=="number"?String(_):_;v.useEffect(()=>{C(b7e({shared:y,trigger:b,axisId:P,active:a,defaultIndex:S}))},[C,y,b,P,a,S]);var I=HS(),L=Kte(),E=m7e(y),{activeIndex:j,isActive:R}=(t=Nr(G=>BVe(G,E,b,S)))!==null&&t!==void 0?t:{},W=Nr(G=>IVe(G,E,b,S)),de=Nr(G=>rae(G,E,b,S)),te=Nr(G=>SVe(G,E,b,S)),le=W,ce=ZVe(),J=(r=a??R)!==null&&r!==void 0?r:!1,[me,Ee]=qee([le,J]),k=E==="axis"?de:void 0;x9e(E,b,te,k,j,J);var F=T??ce;if(F==null||I==null||E==null)return null;var V=le??oH;J||(V=oH),u&&V.length&&(V=Fee(V.filter(G=>G.value!=null&&(G.hide!==!0||n.includeHidden)),f,w9e));var D=V.length>0,M=v.createElement(xMe,{allowEscapeViewBox:s,animationDuration:o,animationEasing:l,isAnimationActive:d,active:J,coordinate:te,hasPayload:D,offset:A,position:h,reverseDirection:m,useTranslate3d:p,viewBox:I,wrapperStyle:g,lastBoundingBox:me,innerRef:Ee,hasPortalFromProps:!!T},N9e(c,iH(iH({},n),{},{payload:V,label:k,active:J,activeIndex:j,coordinate:te,accessibilityLayer:L})));return v.createElement(v.Fragment,null,nu.createPortal(M,F),J&&v.createElement(YVe,{cursor:x,tooltipEventType:E,coordinate:te,payload:V,index:j}))}var qb=e=>null;qb.displayName="Cell";function _9e(e,t,r){return(t=E9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E9e(e){var t=S9e(e,"string");return typeof t=="symbol"?t:t+""}function S9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class I9e{constructor(t){_9e(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function cH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function B9e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cH(Object(r),!0).forEach(function(n){j9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function j9e(e,t,r){return(t=P9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P9e(e){var t=k9e(e,"string");return typeof t=="symbol"?t:t+""}function k9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var T9e={cacheSize:2e3,enableCache:!0},cae=B9e({},T9e),uH=new I9e(cae.cacheSize),F9e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},dH="recharts_measurement_span";function O9e(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",s=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(o,"|").concat(l)}var AH=(e,t)=>{try{var r=document.getElementById(dH);r||(r=document.createElement("span"),r.setAttribute("id",dH),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,F9e,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},_y=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||zS.isSsr)return{width:0,height:0};if(!cae.enableCache)return AH(t,r);var n=O9e(t,r),a=uH.get(n);if(a)return a;var s=AH(t,r);return uH.set(n,s),s},uae;function D9e(e,t,r){return(t=R9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R9e(e){var t=L9e(e,"string");return typeof t=="symbol"?t:t+""}function L9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hH=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,fH=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,M9e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,U9e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Q9e={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},V9e=["cm","mm","pt","pc","in","Q","px"];function H9e(e){return V9e.includes(e)}var Gp="NaN";function $9e(e,t){return e*Q9e[t]}class Ii{static parse(t){var r,[,n,a]=(r=U9e.exec(t))!==null&&r!==void 0?r:[];return n==null?Ii.NaN:new Ii(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,td(t)&&(this.unit=""),r!==""&&!M9e.test(r)&&(this.num=NaN,this.unit=""),H9e(r)&&(this.num=$9e(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Ii(NaN,""):new Ii(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Ii(NaN,""):new Ii(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ii(NaN,""):new Ii(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ii(NaN,""):new Ii(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return td(this.num)}}uae=Ii;D9e(Ii,"NaN",new uae(NaN,""));function dae(e){if(e==null||e.includes(Gp))return Gp;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,s]=(r=hH.exec(t))!==null&&r!==void 0?r:[],o=Ii.parse(n??""),l=Ii.parse(s??""),c=a==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return Gp;t=t.replace(hH,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,A,f]=(u=fH.exec(t))!==null&&u!==void 0?u:[],h=Ii.parse(d??""),m=Ii.parse(f??""),p=A==="+"?h.add(m):h.subtract(m);if(p.isNaN())return Gp;t=t.replace(fH,p.toString())}return t}var mH=/\(([^()]*)\)/;function K9e(e){for(var t=e,r;(r=mH.exec(t))!=null;){var[,n]=r;t=t.replace(mH,dae(n))}return t}function q9e(e){var t=e.replace(/\s+/g,"");return t=K9e(t),t=dae(t),t}function G9e(e){try{return q9e(e)}catch{return Gp}}function h5(e){var t=G9e(e.slice(5,-1));return t===Gp?"":t}var z9e=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],W9e=["dx","dy","angle","className","breakAll"];function jT(){return jT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jT.apply(null,arguments)}function pH(e,t){if(e==null)return{};var r,n,a=X9e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function X9e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Aae=/[ \f\n\r\t\v\u2028\u2029]+/,hae=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];mi(t)||(r?a=t.toString().split(""):a=t.toString().split(Aae));var s=a.map(l=>({word:l,width:_y(l,n).width})),o=r?0:_y("",n).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}};function J9e(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var fae=(e,t,r,n)=>e.reduce((a,s)=>{var{word:o,width:l}=s,c=a[a.length-1];if(c&&l!=null&&(t==null||n||c.width+l+r<Number(t)))c.words.push(o),c.width+=l+r;else{var u={words:[o],width:l};a.push(u)}return a},[]),mae=e=>e.reduce((t,r)=>t.width>r.width?t:r),Y9e="",gH=(e,t,r,n,a,s,o,l)=>{var c=e.slice(0,t),u=hae({breakAll:r,style:n,children:c+Y9e});if(!u)return[!1,[]];var d=fae(u.wordsWithComputedWidth,s,o,l),A=d.length>a||mae(d).width>Number(s);return[A,d]},Z9e=(e,t,r,n,a)=>{var{maxLines:s,children:o,style:l,breakAll:c}=e,u=Sr(s),d=String(o),A=fae(t,n,r,a);if(!u||a)return A;var f=A.length>s||mae(A).width>Number(n);if(!f)return A;for(var h=0,m=d.length-1,p=0,g;h<=m&&p<=d.length-1;){var x=Math.floor((h+m)/2),y=x-1,[b,_]=gH(d,y,c,l,s,n,r,a),[T]=gH(d,x,c,l,s,n,r,a);if(!b&&!T&&(h=x+1),b&&T&&(m=x-1),!b&&T){g=_;break}p++}return g||A},xH=e=>{var t=mi(e)?[]:e.toString().split(Aae);return[{words:t,width:void 0}]},eHe=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:o}=e;if((t||r)&&!zS.isSsr){var l,c,u=hae({breakAll:s,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:A}=u;l=d,c=A}else return xH(n);return Z9e({breakAll:s,children:n,maxLines:o,style:a},l,c,t,!!r)}return xH(n)},pae="#808080",tHe={angle:0,breakAll:!1,capHeight:"0.71em",fill:pae,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},fI=v.forwardRef((e,t)=>{var r=Vi(e,tHe),{x:n,y:a,lineHeight:s,capHeight:o,fill:l,scaleToFit:c,textAnchor:u,verticalAnchor:d}=r,A=pH(r,z9e),f=v.useMemo(()=>eHe({breakAll:A.breakAll,children:A.children,maxLines:A.maxLines,scaleToFit:c,style:A.style,width:A.width}),[A.breakAll,A.children,A.maxLines,c,A.style,A.width]),{dx:h,dy:m,angle:p,className:g,breakAll:x}=A,y=pH(A,W9e);if(!rd(n)||!rd(a)||f.length===0)return null;var b=Number(n)+(Sr(h)?h:0),_=Number(a)+(Sr(m)?m:0);if(!qa(b)||!qa(_))return null;var T;switch(d){case"start":T=h5("calc(".concat(o,")"));break;case"middle":T=h5("calc(".concat((f.length-1)/2," * -").concat(s," + (").concat(o," / 2))"));break;default:T=h5("calc(".concat(f.length-1," * -").concat(s,")"));break}var P=[];if(c){var C=f[0].width,{width:S}=A;P.push("scale(".concat(Sr(S)&&Sr(C)?S/C:1,")"))}return p&&P.push("rotate(".concat(p,", ").concat(b,", ").concat(_,")")),P.length&&(y.transform=P.join(" ")),v.createElement("text",jT({},Ic(y),{ref:t,x:b,y:_,className:Qn("recharts-text",g),textAnchor:u,fill:l.includes("url")?pae:l}),f.map((I,L)=>{var E=I.words.join(x?"":" ");return v.createElement("tspan",{x:b,dy:L===0?T:s,key:"".concat(E,"-").concat(L)},E)}))});fI.displayName="Text";var rHe=["labelRef"],nHe=["content"];function vH(e,t){if(e==null)return{};var r,n,a=aHe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function aHe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function yH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yH(Object(r),!0).forEach(function(n){sHe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sHe(e,t,r){return(t=iHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iHe(e){var t=oHe(e,"string");return typeof t=="symbol"?t:t+""}function oHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dd(){return Dd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dd.apply(null,arguments)}var gae=v.createContext(null),lHe=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:a,width:s,height:o,children:l}=e,c=v.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:a,width:s,height:o}),[t,r,n,a,s,o]);return v.createElement(gae.Provider,{value:c},l)},xae=()=>{var e=v.useContext(gae),t=HS();return e||kte(t)},cHe=v.createContext(null),uHe=()=>{var e=v.useContext(cHe),t=Nr(one);return e||t},dHe=e=>{var{value:t,formatter:r}=e,n=mi(e.children)?t:e.children;return typeof r=="function"?r(n):n},jD=e=>e!=null&&typeof e=="function",AHe=(e,t)=>{var r=Li(t-e),n=Math.min(Math.abs(t-e),360);return r*n},hHe=(e,t,r,n,a)=>{var{offset:s,className:o}=e,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:A,endAngle:f,clockWise:h}=a,m=(u+d)/2,p=AHe(A,f),g=p>=0?1:-1,x,y;switch(t){case"insideStart":x=A+g*s,y=h;break;case"insideEnd":x=f-g*s,y=!h;break;case"end":x=f+g*s,y=h;break;default:throw new Error("Unsupported position ".concat(t))}y=p<=0?y:!y;var b=Bs(l,c,m,x),_=Bs(l,c,m,x+(y?1:-1)*359),T="M".concat(b.x,",").concat(b.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(y?0:1,`,
    `).concat(_.x,",").concat(_.y),P=mi(e.id)?B1("recharts-radial-line-"):e.id;return v.createElement("text",Dd({},n,{dominantBaseline:"central",className:Qn("recharts-radial-bar-label",o)}),v.createElement("defs",null,v.createElement("path",{id:P,d:T})),v.createElement("textPath",{xlinkHref:"#".concat(P)},r))},fHe=(e,t,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:o,startAngle:l,endAngle:c}=e,u=(l+c)/2;if(r==="outside"){var{x:d,y:A}=Bs(n,a,o+t,u);return{x:d,y:A,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var f=(s+o)/2,{x:h,y:m}=Bs(n,a,f,u);return{x:h,y:m,textAnchor:"middle",verticalAnchor:"middle"}},PT=e=>"cx"in e&&Sr(e.cx),mHe=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,s;r!=null&&!PT(r)&&(s=r);var{x:o,y:l,upperWidth:c,lowerWidth:u,height:d}=t,A=o,f=o+(c-u)/2,h=(A+f)/2,m=(c+u)/2,p=A+c/2,g=d>=0?1:-1,x=g*n,y=g>0?"end":"start",b=g>0?"start":"end",_=c>=0?1:-1,T=_*n,P=_>0?"end":"start",C=_>0?"start":"end";if(a==="top"){var S={x:A+c/2,y:l-x,textAnchor:"middle",verticalAnchor:y};return hs(hs({},S),s?{height:Math.max(l-s.y,0),width:c}:{})}if(a==="bottom"){var I={x:f+u/2,y:l+d+x,textAnchor:"middle",verticalAnchor:b};return hs(hs({},I),s?{height:Math.max(s.y+s.height-(l+d),0),width:u}:{})}if(a==="left"){var L={x:h-T,y:l+d/2,textAnchor:P,verticalAnchor:"middle"};return hs(hs({},L),s?{width:Math.max(L.x-s.x,0),height:d}:{})}if(a==="right"){var E={x:h+m+T,y:l+d/2,textAnchor:C,verticalAnchor:"middle"};return hs(hs({},E),s?{width:Math.max(s.x+s.width-E.x,0),height:d}:{})}var j=s?{width:m,height:d}:{};return a==="insideLeft"?hs({x:h+T,y:l+d/2,textAnchor:C,verticalAnchor:"middle"},j):a==="insideRight"?hs({x:h+m-T,y:l+d/2,textAnchor:P,verticalAnchor:"middle"},j):a==="insideTop"?hs({x:A+c/2,y:l+x,textAnchor:"middle",verticalAnchor:b},j):a==="insideBottom"?hs({x:f+u/2,y:l+d-x,textAnchor:"middle",verticalAnchor:y},j):a==="insideTopLeft"?hs({x:A+T,y:l+x,textAnchor:C,verticalAnchor:b},j):a==="insideTopRight"?hs({x:A+c-T,y:l+x,textAnchor:P,verticalAnchor:b},j):a==="insideBottomLeft"?hs({x:f+T,y:l+d-x,textAnchor:C,verticalAnchor:y},j):a==="insideBottomRight"?hs({x:f+u-T,y:l+d-x,textAnchor:P,verticalAnchor:y},j):a&&typeof a=="object"&&(Sr(a.x)||hA(a.x))&&(Sr(a.y)||hA(a.y))?hs({x:o+uo(a.x,m),y:l+uo(a.y,d),textAnchor:"end",verticalAnchor:"end"},j):hs({x:p,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},j)},pHe={angle:0,offset:5,zIndex:lo.label,position:"middle",textBreakAll:!1};function xh(e){var t=Vi(e,pHe),{viewBox:r,position:n,value:a,children:s,content:o,className:l="",textBreakAll:c,labelRef:u}=t,d=uHe(),A=xae(),f=n==="center"?A:d??A,h,m,p;if(r==null?h=f:PT(r)?h=r:h=kte(r),!h||mi(a)&&mi(s)&&!v.isValidElement(o)&&typeof o!="function")return null;var g=hs(hs({},t),{},{viewBox:h});if(v.isValidElement(o)){var{labelRef:x}=g,y=vH(g,rHe);return v.cloneElement(o,y)}if(typeof o=="function"){var{content:b}=g,_=vH(g,nHe);if(m=v.createElement(o,_),v.isValidElement(m))return m}else m=dHe(t);var T=Ic(t);if(PT(h)){if(n==="insideStart"||n==="insideEnd"||n==="end")return hHe(t,n,m,T,h);p=fHe(h,t.offset,t.position)}else p=mHe(t,h);return v.createElement(ud,{zIndex:t.zIndex},v.createElement(fI,Dd({ref:u,className:Qn("recharts-label",l)},T,p,{textAnchor:J9e(T.textAnchor)?T.textAnchor:p.textAnchor,breakAll:c}),m))}xh.displayName="Label";var gHe=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?v.createElement(xh,Dd({key:"label-implicit"},n)):rd(e)?v.createElement(xh,Dd({key:"label-implicit",value:e},n)):v.isValidElement(e)?e.type===xh?v.cloneElement(e,hs({key:"label-implicit"},n)):v.createElement(xh,Dd({key:"label-implicit",content:e},n)):jD(e)?v.createElement(xh,Dd({key:"label-implicit",content:e},n)):e&&typeof e=="object"?v.createElement(xh,Dd({},e,{key:"label-implicit"},n)):null};function xHe(e){var{label:t,labelRef:r}=e,n=xae();return gHe(t,n,r)||null}var vae={},yae={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(yae);var bae={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(bae);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yae,r=bae,n=ES;function a(s){if(n.isArrayLike(s))return t.last(r.toArray(s))}e.last=a})(vae);var vHe=vae.last;const yHe=yA(vHe);var bHe=["valueAccessor"],wHe=["dataKey","clockWise","id","textBreakAll","zIndex"];function X_(){return X_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},X_.apply(null,arguments)}function bH(e,t){if(e==null)return{};var r,n,a=NHe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function NHe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var CHe=e=>Array.isArray(e.value)?yHe(e.value):e.value,wae=v.createContext(void 0),_He=wae.Provider,Nae=v.createContext(void 0),EHe=Nae.Provider;function SHe(){return v.useContext(wae)}function IHe(){return v.useContext(Nae)}function HN(e){var{valueAccessor:t=CHe}=e,r=bH(e,bHe),{dataKey:n,clockWise:a,id:s,textBreakAll:o,zIndex:l}=r,c=bH(r,wHe),u=SHe(),d=IHe(),A=u||d;return!A||!A.length?null:v.createElement(ud,{zIndex:l??lo.label},v.createElement(To,{className:"recharts-label-list"},A.map((f,h)=>{var m,p=mi(n)?t(f,h):xa(f&&f.payload,n),g=mi(s)?{}:{id:"".concat(s,"-").concat(h)};return v.createElement(xh,X_({key:"label-".concat(h)},Ic(f),c,g,{fill:(m=r.fill)!==null&&m!==void 0?m:f.fill,parentViewBox:f.parentViewBox,value:p,textBreakAll:o,viewBox:f.viewBox,index:h,zIndex:0}))})))}HN.displayName="LabelList";function Cae(e){var{label:t}=e;return t?t===!0?v.createElement(HN,{key:"labelList-implicit"}):v.isValidElement(t)||jD(t)?v.createElement(HN,{key:"labelList-implicit",content:t}):typeof t=="object"?v.createElement(HN,X_({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var _ae=e=>e.graphicalItems.polarItems,BHe=Et([Ta,Lb],ZO),mI=Et([_ae,Ga,BHe],tD),jHe=Et([mI],rD),pI=Et([jHe,nI],nD),PHe=Et([pI,Ga,mI],sD);Et([pI,Ga,mI],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(a=>{var s,o=xa(n,(s=t.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:xa(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var wH=()=>{},kHe=Et([pI,Ga,mI,uI,Ta],cD),THe=Et([Ga,oD,lD,wH,kHe,wH,Nn,Ta],uD),Eae=Et([Ga,Nn,pI,PHe,Rb,Ta,THe],dD),FHe=Et([Eae,Ga,hx],fD);Et([Ga,Eae,FHe,Ta],pD);var OHe={radiusAxis:{},angleAxis:{}},Sae=nl({name:"polarAxis",initialState:OHe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:eWe,removeRadiusAxis:tWe,addAngleAxis:rWe,removeAngleAxis:nWe}=Sae.actions,DHe=Sae.reducer;function NH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function CH(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NH(Object(r),!0).forEach(function(n){RHe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RHe(e,t,r){return(t=LHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LHe(e){var t=MHe(e,"string");return typeof t=="symbol"?t:t+""}function MHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var UHe=(e,t)=>t,PD=Et([_ae,UHe],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),QHe=[],kD=(e,t,r)=>(r==null?void 0:r.length)===0?QHe:r,Iae=Et([nI,PD,kD],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var a;if((t==null?void 0:t.data)!=null&&t.data.length>0?a=t.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>CH(CH({},t.presentationProps),s.props))),a!=null)return a}}),VHe=Et([Iae,PD,kD],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,a)=>{var s,o=xa(n,t.nameKey,t.name),l;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?l=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?l=n.fill:l=t.fill,{value:LS(o,t.dataKey),color:l,payload:n,type:t.legendType}})}),HHe=Et([Iae,PD,kD,Ws],(e,t,r,n)=>{if(!(t==null||e==null))return K$e({offset:n,pieSettings:t,displayedData:e,cells:r})}),Bae={exports:{}},ea={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TD=Symbol.for("react.transitional.element"),FD=Symbol.for("react.portal"),gI=Symbol.for("react.fragment"),xI=Symbol.for("react.strict_mode"),vI=Symbol.for("react.profiler"),yI=Symbol.for("react.consumer"),bI=Symbol.for("react.context"),wI=Symbol.for("react.forward_ref"),NI=Symbol.for("react.suspense"),CI=Symbol.for("react.suspense_list"),_I=Symbol.for("react.memo"),EI=Symbol.for("react.lazy"),$He=Symbol.for("react.view_transition"),KHe=Symbol.for("react.client.reference");function Fc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case TD:switch(e=e.type,e){case gI:case vI:case xI:case NI:case CI:case $He:return e;default:switch(e=e&&e.$$typeof,e){case bI:case wI:case EI:case _I:return e;case yI:return e;default:return t}}case FD:return t}}}ea.ContextConsumer=yI;ea.ContextProvider=bI;ea.Element=TD;ea.ForwardRef=wI;ea.Fragment=gI;ea.Lazy=EI;ea.Memo=_I;ea.Portal=FD;ea.Profiler=vI;ea.StrictMode=xI;ea.Suspense=NI;ea.SuspenseList=CI;ea.isContextConsumer=function(e){return Fc(e)===yI};ea.isContextProvider=function(e){return Fc(e)===bI};ea.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===TD};ea.isForwardRef=function(e){return Fc(e)===wI};ea.isFragment=function(e){return Fc(e)===gI};ea.isLazy=function(e){return Fc(e)===EI};ea.isMemo=function(e){return Fc(e)===_I};ea.isPortal=function(e){return Fc(e)===FD};ea.isProfiler=function(e){return Fc(e)===vI};ea.isStrictMode=function(e){return Fc(e)===xI};ea.isSuspense=function(e){return Fc(e)===NI};ea.isSuspenseList=function(e){return Fc(e)===CI};ea.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===gI||e===vI||e===xI||e===NI||e===CI||typeof e=="object"&&e!==null&&(e.$$typeof===EI||e.$$typeof===_I||e.$$typeof===bI||e.$$typeof===yI||e.$$typeof===wI||e.$$typeof===KHe||e.getModuleId!==void 0)};ea.typeOf=Fc;Bae.exports=ea;var qHe=Bae.exports,_H=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",EH=null,f5=null,jae=e=>{if(e===EH&&Array.isArray(f5))return f5;var t=[];return v.Children.forEach(e,r=>{mi(r)||(qHe.isFragment(r)?t=t.concat(jae(r.props.children)):t.push(r))}),f5=t,EH=e,t};function OD(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>_H(a)):n=[_H(t)],jae(e).forEach(a=>{var s=c0(a,"type.displayName")||c0(a,"type.name");s&&n.indexOf(s)!==-1&&r.push(a)}),r}var Pae={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(Pae);var GHe=Pae.isPlainObject;const zHe=yA(GHe);var SH,IH,BH,jH,PH;function kH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function TH(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kH(Object(r),!0).forEach(function(n){WHe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WHe(e,t,r){return(t=XHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XHe(e){var t=JHe(e,"string");return typeof t=="symbol"?t:t+""}function JHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function J_(){return J_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},J_.apply(null,arguments)}function vv(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var FH=(e,t,r,n,a)=>{var s=r-n,o;return o=Za(SH||(SH=vv(["M ",",",""])),e,t),o+=Za(IH||(IH=vv(["L ",",",""])),e+r,t),o+=Za(BH||(BH=vv(["L ",",",""])),e+r-s/2,t+a),o+=Za(jH||(jH=vv(["L ",",",""])),e+r-s/2-n,t+a),o+=Za(PH||(PH=vv(["L ",","," Z"])),e,t),o},YHe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ZHe=e=>{var t=Vi(e,YHe),{x:r,y:n,upperWidth:a,lowerWidth:s,height:o,className:l}=t,{animationEasing:c,animationDuration:u,animationBegin:d,isUpdateAnimationActive:A}=t,f=v.useRef(null),[h,m]=v.useState(-1),p=v.useRef(a),g=v.useRef(s),x=v.useRef(o),y=v.useRef(r),b=v.useRef(n),_=XS(e,"trapezoid-");if(v.useEffect(()=>{if(f.current&&f.current.getTotalLength)try{var W=f.current.getTotalLength();W&&m(W)}catch{}},[]),r!==+r||n!==+n||a!==+a||s!==+s||o!==+o||a===0&&s===0||o===0)return null;var T=Qn("recharts-trapezoid",l);if(!A)return v.createElement("g",null,v.createElement("path",J_({},Ic(t),{className:T,d:FH(r,n,a,s,o)})));var P=p.current,C=g.current,S=x.current,I=y.current,L=b.current,E="0px ".concat(h===-1?1:h,"px"),j="".concat(h,"px 0px"),R=qte(["strokeDasharray"],u,c);return v.createElement(WS,{animationId:_,key:_,canBegin:h>0,duration:u,easing:c,isActive:A,begin:d},W=>{var de=Us(P,a,W),te=Us(C,s,W),le=Us(S,o,W),ce=Us(I,r,W),J=Us(L,n,W);f.current&&(p.current=de,g.current=te,x.current=le,y.current=ce,b.current=J);var me=W>0?{transition:R,strokeDasharray:j}:{strokeDasharray:E};return v.createElement("path",J_({},Ic(t),{className:T,d:FH(ce,J,de,te,le),ref:f,style:TH(TH({},me),t.style)}))})},e$e=["option","shapeType","activeClassName"];function t$e(e,t){if(e==null)return{};var r,n,a=r$e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function r$e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function OH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Y_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OH(Object(r),!0).forEach(function(n){n$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function n$e(e,t,r){return(t=a$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a$e(e){var t=s$e(e,"string");return typeof t=="symbol"?t:t+""}function s$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function i$e(e,t){return Y_(Y_({},t),e)}function o$e(e,t){return e==="symbols"}function DH(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return v.createElement(Xte,r);case"trapezoid":return v.createElement(ZHe,r);case"sector":return v.createElement(ere,r);case"symbols":if(o$e(t))return v.createElement(X3,r);break;case"curve":return v.createElement(vO,r);default:return null}}function l$e(e){return v.isValidElement(e)?e.props:e}function kae(e){var{option:t,shapeType:r,activeClassName:n="recharts-active-shape"}=e,a=t$e(e,e$e),s;if(v.isValidElement(t))s=v.cloneElement(t,Y_(Y_({},a),l$e(t)));else if(typeof t=="function")s=t(a,a.index);else if(zHe(t)&&typeof t!="boolean"){var o=i$e(t,a);s=v.createElement(DH,{shapeType:r,elementProps:o})}else{var l=a;s=v.createElement(DH,{shapeType:r,elementProps:l})}return a.isActive?v.createElement(To,{className:n},s):s}var DD=(e,t,r)=>{var n=ca();return(a,s)=>o=>{e==null||e(a,s,o),n(Lne({activeIndex:String(s),activeDataKey:t,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}},RD=e=>{var t=ca();return(r,n)=>a=>{e==null||e(r,n,a),t(w7e())}},LD=(e,t,r)=>{var n=ca();return(a,s)=>o=>{e==null||e(a,s,o),n(N7e({activeIndex:String(s),activeDataKey:t,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}};function Tae(e){var{tooltipEntrySettings:t}=e,r=ca(),n=Ul(),a=v.useRef(null);return v.useLayoutEffect(()=>{n||(a.current===null?r(x7e(t)):a.current!==t&&r(v7e({prev:a.current,next:t})),a.current=t)},[t,r,n]),v.useLayoutEffect(()=>()=>{a.current&&(r(y7e(a.current)),a.current=null)},[r]),null}function c$e(e){var{legendPayload:t}=e,r=ca(),n=Ul(),a=v.useRef(null);return v.useLayoutEffect(()=>{n||(a.current===null?r(Vte(t)):a.current!==t&&r(Hte({prev:a.current,next:t})),a.current=t)},[r,n,t]),v.useLayoutEffect(()=>()=>{a.current&&(r($te(a.current)),a.current=null)},[r]),null}function u$e(e){var{legendPayload:t}=e,r=ca(),n=Nr(Nn),a=v.useRef(null);return v.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(a.current===null?r(Vte(t)):a.current!==t&&r(Hte({prev:a.current,next:t})),a.current=t)},[r,n,t]),v.useLayoutEffect(()=>()=>{a.current&&(r($te(a.current)),a.current=null)},[r]),null}var m5,d$e=()=>{var[e]=v.useState(()=>B1("uid-"));return e},A$e=(m5=fie.useId)!==null&&m5!==void 0?m5:d$e;function h$e(e,t){var r=A$e();return t||(e?"".concat(e,"-").concat(r):r)}var f$e=v.createContext(void 0),Fae=e=>{var{id:t,type:r,children:n}=e,a=h$e("recharts-".concat(r),t);return v.createElement(f$e.Provider,{value:a},n(a))},m$e={cartesianItems:[],polarItems:[]},Oae=nl({name:"graphicalItems",initialState:m$e,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Ca()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,a=ou(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},prepare:Ca()},removeCartesianGraphicalItem:{reducer(e,t){var r=ou(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Ca()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Ca()},removePolarGraphicalItem:{reducer(e,t){var r=ou(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Ca()}}}),{addCartesianGraphicalItem:p$e,replaceCartesianGraphicalItem:g$e,removeCartesianGraphicalItem:x$e,addPolarGraphicalItem:v$e,removePolarGraphicalItem:y$e}=Oae.actions,b$e=Oae.reducer,w$e=e=>{var t=ca(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?t(p$e(e)):r.current!==e&&t(g$e({prev:r.current,next:e})),r.current=e},[t,e]),v.useLayoutEffect(()=>()=>{r.current&&(t(x$e(r.current)),r.current=null)},[t]),null},N$e=v.memo(w$e);function C$e(e){var t=ca();return v.useLayoutEffect(()=>(t(v$e(e)),()=>{t(y$e(e))}),[t,e]),null}var _$e=["key"],E$e=["onMouseEnter","onClick","onMouseLeave"],S$e=["id"],I$e=["id"];function RH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function rs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RH(Object(r),!0).forEach(function(n){B$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function B$e(e,t,r){return(t=j$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j$e(e){var t=P$e(e,"string");return typeof t=="symbol"?t:t+""}function P$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vf(){return vf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vf.apply(null,arguments)}function SI(e,t){if(e==null)return{};var r,n,a=k$e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function k$e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function T$e(e){var t=v.useMemo(()=>OD(e.children,qb),[e.children]),r=Nr(n=>VHe(n,e.id,t));return r==null?null:v.createElement(u$e,{legendPayload:r})}var F$e=v.memo(e=>{var{dataKey:t,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:o,name:l,hide:c,tooltipType:u,id:d}=e,A={dataDefinedOnItem:n.map(f=>f.tooltipPayload),positions:n.map(f=>f.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:o,dataKey:t,nameKey:r,name:LS(l,t),hide:c,type:u,color:o,unit:"",graphicalItemId:d}};return v.createElement(Tae,{tooltipEntrySettings:A})}),O$e=(e,t)=>e>t?"start":e<t?"end":"middle",D$e=(e,t,r)=>uo(typeof t=="function"?t(e):t,r,r*.8),R$e=(e,t,r)=>{var{top:n,left:a,width:s,height:o}=t,l=Jte(s,o),c=a+uo(e.cx,s,s/2),u=n+uo(e.cy,o,o/2),d=uo(e.innerRadius,l,0),A=D$e(r,e.outerRadius,l),f=e.maxRadius||Math.sqrt(s*s+o*o)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:A,maxRadius:f}},L$e=(e,t)=>{var r=Li(t-e),n=Math.min(Math.abs(t-e),360);return r*n};function M$e(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var U$e=(e,t)=>{if(v.isValidElement(e))return v.cloneElement(e,t);if(typeof e=="function")return e(t);var r=Qn("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:n}=t,a=SI(t,_$e);return v.createElement(vO,vf({},a,{type:"linear",className:r}))},Q$e=(e,t,r)=>{if(v.isValidElement(e))return v.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),v.isValidElement(n)))return n;var a=Qn("recharts-pie-label-text",M$e(e));return v.createElement(fI,vf({},t,{alignmentBaseline:"middle",className:a}),n)};function V$e(e){var{sectors:t,props:r,showLabels:n}=e,{label:a,labelLine:s,dataKey:o}=r;if(!n||!a||!t)return null;var l=ed(r),c=I1(a),u=I1(s),d=typeof a=="object"&&"offsetRadius"in a&&typeof a.offsetRadius=="number"&&a.offsetRadius||20,A=t.map((f,h)=>{var m=(f.startAngle+f.endAngle)/2,p=Bs(f.cx,f.cy,f.outerRadius+d,m),g=rs(rs(rs(rs({},l),f),{},{stroke:"none"},c),{},{index:h,textAnchor:O$e(p.x,f.cx)},p),x=rs(rs(rs(rs({},l),f),{},{fill:"none",stroke:f.fill},u),{},{index:h,points:[Bs(f.cx,f.cy,f.outerRadius,m),p],key:"line"});return v.createElement(ud,{zIndex:lo.label,key:"label-".concat(f.startAngle,"-").concat(f.endAngle,"-").concat(f.midAngle,"-").concat(h)},v.createElement(To,null,s&&U$e(s,x),Q$e(a,g,xa(f,o))))});return v.createElement(To,{className:"recharts-pie-labels"},A)}function H$e(e){var{sectors:t,props:r,showLabels:n}=e,{label:a}=r;return typeof a=="object"&&a!=null&&"position"in a?v.createElement(Cae,{label:a}):v.createElement(V$e,{sectors:t,props:r,showLabels:n})}function $$e(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:a,shape:s,id:o}=e,l=Nr(f0),c=Nr(_D),u=Nr(lVe),{onMouseEnter:d,onClick:A,onMouseLeave:f}=a,h=SI(a,E$e),m=DD(d,a.dataKey,o),p=RD(f),g=LD(A,a.dataKey,o);return t==null||t.length===0?null:v.createElement(v.Fragment,null,t.map((x,y)=>{if((x==null?void 0:x.startAngle)===0&&(x==null?void 0:x.endAngle)===0&&t.length!==1)return null;var b=u==null||u===o,_=String(y)===l&&(c==null||a.dataKey===c)&&b,T=l?n:null,P=r&&_?r:T,C=rs(rs({},x),{},{stroke:x.stroke,tabIndex:-1,[Cte]:y,[_te]:o});return v.createElement(To,vf({key:"sector-".concat(x==null?void 0:x.startAngle,"-").concat(x==null?void 0:x.endAngle,"-").concat(x.midAngle,"-").concat(y),tabIndex:-1,className:"recharts-pie-sector"},Sb(h,x,y),{onMouseEnter:m(x,y),onMouseLeave:p(x,y),onClick:g(x,y)}),v.createElement(kae,vf({option:s??P,index:y,shapeType:"sector",isActive:_},C)))}))}function K$e(e){var t,{pieSettings:r,displayedData:n,cells:a,offset:s}=e,{cornerRadius:o,startAngle:l,endAngle:c,dataKey:u,nameKey:d,tooltipType:A}=r,f=Math.abs(r.minAngle),h=L$e(l,c),m=Math.abs(h),p=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,g=n.filter(P=>xa(P,u,0)!==0).length,x=(m>=360?g:g-1)*p,y=m-g*f-x,b=n.reduce((P,C)=>{var S=xa(C,u,0);return P+(Sr(S)?S:0)},0),_;if(b>0){var T;_=n.map((P,C)=>{var S=xa(P,u,0),I=xa(P,d,C),L=R$e(r,s,P),E=(Sr(S)?S:0)/b,j,R=rs(rs({},P),a&&a[C]&&a[C].props);C?j=T.endAngle+Li(h)*p*(S!==0?1:0):j=l;var W=j+Li(h)*((S!==0?f:0)+E*y),de=(j+W)/2,te=(L.innerRadius+L.outerRadius)/2,le=[{name:I,value:S,payload:R,dataKey:u,type:A,graphicalItemId:r.id}],ce=Bs(L.cx,L.cy,te,de);return T=rs(rs(rs(rs({},r.presentationProps),{},{percent:E,cornerRadius:typeof o=="string"?parseFloat(o):o,name:I,tooltipPayload:le,midAngle:de,middleRadius:te,tooltipPosition:ce},R),L),{},{value:S,dataKey:u,startAngle:j,endAngle:W,payload:R,paddingAngle:Li(h)*p}),T})}return _}function q$e(e){var{showLabels:t,sectors:r,children:n}=e,a=v.useMemo(()=>!t||!r?[]:r.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[r,t]);return v.createElement(EHe,{value:t?a:void 0},n)}function G$e(e){var{props:t,previousSectorsRef:r,id:n}=e,{sectors:a,isAnimationActive:s,animationBegin:o,animationDuration:l,animationEasing:c,activeShape:u,inactiveShape:d,onAnimationStart:A,onAnimationEnd:f}=t,h=XS(t,"recharts-pie-"),m=r.current,[p,g]=v.useState(!1),x=v.useCallback(()=>{typeof f=="function"&&f(),g(!1)},[f]),y=v.useCallback(()=>{typeof A=="function"&&A(),g(!0)},[A]);return v.createElement(q$e,{showLabels:!p,sectors:a},v.createElement(WS,{animationId:h,begin:o,duration:l,isActive:s,easing:c,onAnimationStart:y,onAnimationEnd:x,key:h},b=>{var _=[],T=a&&a[0],P=T==null?void 0:T.startAngle;return a==null||a.forEach((C,S)=>{var I=m&&m[S],L=S>0?c0(C,"paddingAngle",0):0;if(I){var E=Us(I.endAngle-I.startAngle,C.endAngle-C.startAngle,b),j=rs(rs({},C),{},{startAngle:P+L,endAngle:P+E+L});_.push(j),P=j.endAngle}else{var{endAngle:R,startAngle:W}=C,de=Us(0,R-W,b),te=rs(rs({},C),{},{startAngle:P+L,endAngle:P+de+L});_.push(te),P=te.endAngle}}),r.current=_,v.createElement(To,null,v.createElement($$e,{sectors:_,activeShape:u,inactiveShape:d,allOtherPieProps:t,shape:t.shape,id:n}))}),v.createElement(H$e,{showLabels:!p,sectors:a,props:t}),t.children)}var z$e={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:lo.area};function W$e(e){var{id:t}=e,r=SI(e,S$e),{hide:n,className:a,rootTabIndex:s}=e,o=v.useMemo(()=>OD(e.children,qb),[e.children]),l=Nr(d=>HHe(d,t,o)),c=v.useRef(null),u=Qn("recharts-pie",a);return n||l==null?(c.current=null,v.createElement(To,{tabIndex:s,className:u})):v.createElement(ud,{zIndex:e.zIndex},v.createElement(F$e,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:l,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),v.createElement(To,{tabIndex:s,className:u},v.createElement(G$e,{props:rs(rs({},r),{},{sectors:l}),previousSectorsRef:c,id:t})))}function Dae(e){var t=Vi(e,z$e),{id:r}=t,n=SI(t,I$e),a=ed(n);return v.createElement(Fae,{id:r,type:"pie"},s=>v.createElement(v.Fragment,null,v.createElement(C$e,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a,maxRadius:t.maxRadius}),v.createElement(T$e,vf({},n,{id:s})),v.createElement(W$e,vf({},n,{id:s}))))}Dae.displayName="Pie";function LH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function MH(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LH(Object(r),!0).forEach(function(n){X$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function X$e(e,t,r){return(t=J$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J$e(e){var t=Y$e(e,"string");return typeof t=="symbol"?t:t+""}function Y$e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rae=0,Z$e={xAxis:{},yAxis:{},zAxis:{}},Lae=nl({name:"cartesianAxis",initialState:Z$e,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Ca()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:Ca()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Ca()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Ca()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:Ca()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Ca()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Ca()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:Ca()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Ca()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,a=e.yAxis[r];if(a){var s=a.widthHistory||[];if(s.length===3&&s[0]===s[2]&&n===s[1]&&n!==a.width&&Math.abs(n-s[0])<=1)return;var o=[...s,n].slice(-3);e.yAxis[r]=MH(MH({},e.yAxis[r]),{},{width:n,widthHistory:o})}}}}),{addXAxis:eKe,replaceXAxis:tKe,removeXAxis:rKe,addYAxis:nKe,replaceYAxis:aKe,removeYAxis:sKe,addZAxis:aWe,replaceZAxis:sWe,removeZAxis:iWe,updateYAxisWidth:iKe}=Lae.actions,oKe=Lae.reducer,lKe=Et([Ws],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),cKe=Et([lKe,SA,IA],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),Mae=()=>Nr(cKe),UH=(e,t,r)=>{var n=r??e;if(!mi(n))return uo(n,t,0)},uKe=(e,t,r)=>{var n={},a=e.filter(iI),s=e.filter(u=>u.stackId==null),o=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),l=Object.entries(o).map(u=>{var[d,A]=u,f=A.map(m=>m.dataKey),h=UH(t,r,A[0].barSize);return{stackId:d,dataKeys:f,barSize:h}}),c=s.map(u=>{var d=[u.dataKey].filter(f=>f!=null),A=UH(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:A}});return[...l,...c]};function QH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function eN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QH(Object(r),!0).forEach(function(n){dKe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dKe(e,t,r){return(t=AKe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AKe(e){var t=hKe(e,"string");return typeof t=="symbol"?t:t+""}function hKe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fKe(e,t,r,n,a){var s=n.length;if(!(s<1)){var o=uo(e,r,0,!0),l,c=[];if(qa(n[0].barSize)){var u=!1,d=r/s,A=n.reduce((x,y)=>x+(y.barSize||0),0);A+=(s-1)*o,A>=r&&(A-=(s-1)*o,o=0),A>=r&&d>0&&(u=!0,d*=.9,A=s*d);var f=(r-A)/2>>0,h={offset:f-o,size:0};l=n.reduce((x,y)=>{var b,_={stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:h.offset+h.size+o,size:u?d:(b=y.barSize)!==null&&b!==void 0?b:0}},T=[...x,_];return h=T[T.length-1].position,T},c)}else{var m=uo(t,r,0,!0);r-2*m-(s-1)*o<=0&&(o=0);var p=(r-2*m-(s-1)*o)/s;p>1&&(p>>=0);var g=qa(a)?Math.min(p,a):p;l=n.reduce((x,y,b)=>[...x,{stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:m+(p+o)*b+(p-g)/2,size:g}}],c)}return l}}var mKe=(e,t,r,n,a,s,o)=>{var l=mi(o)?t:o,c=fKe(r,n,a!==s?a:s,e,l);return a!==s&&c!=null&&(c=c.map(u=>eN(eN({},u),{},{position:eN(eN({},u.position),{},{offset:u.position.offset-a/2})}))),c},pKe=(e,t)=>{var r=JO(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:s}=a;if(s)return s.find(o=>o.key===r)}}}};function gKe(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&qa(e.zIndex)?e.zIndex:t}var Uae=e=>{var{chartData:t}=e,r=ca(),n=Ul();return v.useEffect(()=>n?()=>{}:(r(nH(t)),()=>{r(nH(void 0))}),[t,r,n]),null},VH={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Qae=nl({name:"brush",initialState:VH,reducers:{setBrushSettings(e,t){return t.payload==null?VH:t.payload}}}),{setBrushSettings:oWe}=Qae.actions,xKe=Qae.reducer;function vKe(e,t,r){return(t=yKe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yKe(e){var t=bKe(e,"string");return typeof t=="symbol"?t:t+""}function bKe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class MD{static create(t){return new MD(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}vKe(MD,"EPS",1e-4);function wKe(e){return(e%180+180)%180}var NKe=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=wKe(a),o=s*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},CKe={dots:[],areas:[],lines:[]},Vae=nl({name:"referenceElements",initialState:CKe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=ou(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=ou(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=ou(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:lWe,removeDot:cWe,addArea:uWe,removeArea:dWe,addLine:AWe,removeLine:hWe}=Vae.actions,_Ke=Vae.reducer,EKe=v.createContext(void 0),SKe=e=>{var{children:t}=e,[r]=v.useState("".concat(B1("recharts"),"-clip")),n=Mae();if(n==null)return null;var{x:a,y:s,width:o,height:l}=n;return v.createElement(EKe.Provider,{value:r},v.createElement("defs",null,v.createElement("clipPath",{id:r},v.createElement("rect",{x:a,y:s,height:l,width:o}))),t)};function Hae(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t){var a=e[n];a!==void 0&&r.push(a)}return r}function IKe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return NKe(n,r)}function BKe(e,t,r){var n=r==="width",{x:a,y:s,width:o,height:l}=e;return t===1?{start:n?a:s,end:n?a+o:s+l}:{start:n?a+o:s+l,end:n?a:s}}function H1(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-a)<=0}function jKe(e,t){return Hae(e,t+1)}function PKe(e,t,r,n,a){for(var s=(n||[]).slice(),{start:o,end:l}=t,c=0,u=1,d=o,A=function(){var m=n==null?void 0:n[c];if(m===void 0)return{v:Hae(n,u)};var p=c,g,x=()=>(g===void 0&&(g=r(m,p)),g),y=m.coordinate,b=c===0||H1(e,y,x,d,l);b||(c=0,d=o,u+=1),b&&(d=y+e*(x()/2+a),c+=u)},f;u<=s.length;)if(f=A(),f)return f.v;return[]}function kKe(e,t,r,n,a){var s=(n||[]).slice(),o=s.length;if(o===0)return[];for(var{start:l,end:c}=t,u=1;u<=o;u++){for(var d=(o-1)%u,A=l,f=!0,h=function(){var y=n[m],b=m,_,T=()=>(_===void 0&&(_=r(y,b)),_),P=y.coordinate,C=m===d||H1(e,P,T,A,c);if(!C)return f=!1,1;C&&(A=P+e*(T()/2+a))},m=d;m<o&&!h();m+=u);if(f){for(var p=[],g=d;g<o;g+=u)p.push(n[g]);return p}}return[]}function HH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function to(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HH(Object(r),!0).forEach(function(n){TKe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TKe(e,t,r){return(t=FKe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FKe(e){var t=OKe(e,"string");return typeof t=="symbol"?t:t+""}function OKe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DKe(e,t,r,n,a){for(var s=(n||[]).slice(),o=s.length,{start:l}=t,{end:c}=t,u=function(f){var h=s[f],m,p=()=>(m===void 0&&(m=r(h,f)),m);if(f===o-1){var g=e*(h.coordinate+e*p()/2-c);s[f]=h=to(to({},h),{},{tickCoord:g>0?h.coordinate-g*e:h.coordinate})}else s[f]=h=to(to({},h),{},{tickCoord:h.coordinate});if(h.tickCoord!=null){var x=H1(e,h.tickCoord,p,l,c);x&&(c=h.tickCoord-e*(p()/2+a),s[f]=to(to({},h),{},{isShow:!0}))}},d=o-1;d>=0;d--)u(d);return s}function RKe(e,t,r,n,a,s){var o=(n||[]).slice(),l=o.length,{start:c,end:u}=t;if(s){var d=n[l-1],A=r(d,l-1),f=e*(d.coordinate+e*A/2-u);if(o[l-1]=d=to(to({},d),{},{tickCoord:f>0?d.coordinate-f*e:d.coordinate}),d.tickCoord!=null){var h=H1(e,d.tickCoord,()=>A,c,u);h&&(u=d.tickCoord-e*(A/2+a),o[l-1]=to(to({},d),{},{isShow:!0}))}}for(var m=s?l-1:l,p=function(y){var b=o[y],_,T=()=>(_===void 0&&(_=r(b,y)),_);if(y===0){var P=e*(b.coordinate-e*T()/2-c);o[y]=b=to(to({},b),{},{tickCoord:P<0?b.coordinate-P*e:b.coordinate})}else o[y]=b=to(to({},b),{},{tickCoord:b.coordinate});if(b.tickCoord!=null){var C=H1(e,b.tickCoord,T,c,u);C&&(c=b.tickCoord+e*(T()/2+a),o[y]=to(to({},b),{},{isShow:!0}))}},g=0;g<m;g++)p(g);return o}function LKe(e,t,r){var{tick:n,ticks:a,viewBox:s,minTickGap:o,orientation:l,interval:c,tickFormatter:u,unit:d,angle:A}=e;if(!a||!a.length||!n)return[];if(Sr(c)||zS.isSsr){var f;return(f=jKe(a,Sr(c)?c:0))!==null&&f!==void 0?f:[]}var h=[],m=l==="top"||l==="bottom"?"width":"height",p=d&&m==="width"?_y(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},g=(b,_)=>{var T=typeof u=="function"?u(b.value,_):b.value;return m==="width"?IKe(_y(T,{fontSize:t,letterSpacing:r}),p,A):_y(T,{fontSize:t,letterSpacing:r})[m]},x=a.length>=2?Li(a[1].coordinate-a[0].coordinate):1,y=BKe(s,x,m);return c==="equidistantPreserveStart"?PKe(x,y,g,a,o):c==="equidistantPreserveEnd"?kKe(x,y,g,a,o):(c==="preserveStart"||c==="preserveStartEnd"?h=RKe(x,y,g,a,o,c==="preserveStartEnd"):h=DKe(x,y,g,a,o),h.filter(b=>b.isShow))}var MKe=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=e,o=0;if(t){Array.from(t).forEach(d=>{if(d){var A=d.getBoundingClientRect();A.width>o&&(o=A.width)}});var l=r?r.getBoundingClientRect().width:0,c=a+s,u=o+c+l+(r?n:0);return Math.round(u)}return 0},UKe=["axisLine","width","height","className","hide","ticks","axisType"];function QKe(e,t){if(e==null)return{};var r,n,a=VKe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function VKe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function m0(){return m0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m0.apply(null,arguments)}function $H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Es(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$H(Object(r),!0).forEach(function(n){HKe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$H(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HKe(e,t,r){return(t=$Ke(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Ke(e){var t=KKe(e,"string");return typeof t=="symbol"?t:t+""}function KKe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Lm={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:lo.axis};function qKe(e){var{x:t,y:r,width:n,height:a,orientation:s,mirror:o,axisLine:l,otherSvgProps:c}=e;if(!l)return null;var u=Es(Es(Es({},c),ed(l)),{},{fill:"none"});if(s==="top"||s==="bottom"){var d=+(s==="top"&&!o||s==="bottom"&&o);u=Es(Es({},u),{},{x1:t,y1:r+d*a,x2:t+n,y2:r+d*a})}else{var A=+(s==="left"&&!o||s==="right"&&o);u=Es(Es({},u),{},{x1:t+A*n,y1:r,x2:t+A*n,y2:r+a})}return v.createElement("line",m0({},u,{className:Qn("recharts-cartesian-axis-line",c0(l,"className"))}))}function GKe(e,t,r,n,a,s,o,l,c){var u,d,A,f,h,m,p=l?-1:1,g=e.tickSize||o,x=Sr(e.tickCoord)?e.tickCoord:e.coordinate;switch(s){case"top":u=d=e.coordinate,f=r+ +!l*a,A=f-p*g,m=A-p*c,h=x;break;case"left":A=f=e.coordinate,d=t+ +!l*n,u=d-p*g,h=u-p*c,m=x;break;case"right":A=f=e.coordinate,d=t+ +l*n,u=d+p*g,h=u+p*c,m=x;break;default:u=d=e.coordinate,f=r+ +l*a,A=f+p*g,m=A+p*c,h=x;break}return{line:{x1:u,y1:A,x2:d,y2:f},tick:{x:h,y:m}}}function zKe(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function WKe(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function XKe(e){var{option:t,tickProps:r,value:n}=e,a,s=Qn(r.className,"recharts-cartesian-axis-tick-value");if(v.isValidElement(t))a=v.cloneElement(t,Es(Es({},r),{},{className:s}));else if(typeof t=="function")a=t(Es(Es({},r),{},{className:s}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=Qn(o,t==null?void 0:t.className)),a=v.createElement(fI,m0({},r,{className:o}),n)}return a}var JKe=v.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:a,stroke:s,tickFormatter:o,unit:l,padding:c,tickTextProps:u,orientation:d,mirror:A,x:f,y:h,width:m,height:p,tickSize:g,tickMargin:x,fontSize:y,letterSpacing:b,getTicksConfig:_,events:T,axisType:P}=e,C=LKe(Es(Es({},_),{},{ticks:r}),y,b),S=zKe(d,A),I=WKe(d,A),L=ed(_),E=I1(n),j={};typeof a=="object"&&(j=a);var R=Es(Es({},L),{},{fill:"none"},j),W=C.map(le=>Es({entry:le},GKe(le,f,h,m,p,d,g,A,x))),de=W.map(le=>{var{entry:ce,line:J}=le;return v.createElement(To,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(ce.value,"-").concat(ce.coordinate,"-").concat(ce.tickCoord)},a&&v.createElement("line",m0({},R,J,{className:Qn("recharts-cartesian-axis-tick-line",c0(a,"className"))})))}),te=W.map((le,ce)=>{var{entry:J,tick:me}=le,Ee=Es(Es(Es(Es({textAnchor:S,verticalAnchor:I},L),{},{stroke:"none",fill:s},E),me),{},{index:ce,payload:J,visibleTicksCount:C.length,tickFormatter:o,padding:c},u);return v.createElement(To,m0({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(J.value,"-").concat(J.coordinate,"-").concat(J.tickCoord)},Sb(T,J,ce)),n&&v.createElement(XKe,{option:n,tickProps:Ee,value:"".concat(typeof o=="function"?o(J.value,ce):J.value).concat(l||"")}))});return v.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(P,"-ticks")},te.length>0&&v.createElement(ud,{zIndex:lo.label},v.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(P,"-tick-labels"),ref:t},te)),de.length>0&&v.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(P,"-tick-lines")},de))}),YKe=v.forwardRef((e,t)=>{var{axisLine:r,width:n,height:a,className:s,hide:o,ticks:l,axisType:c}=e,u=QKe(e,UKe),[d,A]=v.useState(""),[f,h]=v.useState(""),m=v.useRef(null);v.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var g;return MKe({ticks:m.current,label:(g=e.labelRef)===null||g===void 0?void 0:g.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var p=v.useCallback(g=>{if(g){var x=g.getElementsByClassName("recharts-cartesian-axis-tick-value");m.current=x;var y=x[0];if(y){var b=window.getComputedStyle(y),_=b.fontSize,T=b.letterSpacing;(_!==d||T!==f)&&(A(_),h(T))}}},[d,f]);return o||n!=null&&n<=0||a!=null&&a<=0?null:v.createElement(ud,{zIndex:e.zIndex},v.createElement(To,{className:Qn("recharts-cartesian-axis",s)},v.createElement(qKe,{x:e.x,y:e.y,width:n,height:a,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:ed(e)}),v.createElement(JKe,{ref:p,axisType:c,events:u,fontSize:d,getTicksConfig:e,height:e.height,letterSpacing:f,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:l,unit:e.unit,width:e.width,x:e.x,y:e.y}),v.createElement(lHe,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},v.createElement(xHe,{label:e.label,labelRef:e.labelRef}),e.children)))}),UD=v.forwardRef((e,t)=>{var r=Vi(e,Lm);return v.createElement(YKe,m0({},r,{ref:t}))});UD.displayName="CartesianAxis";var ZKe={},$ae=nl({name:"errorBars",initialState:ZKe,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:a}=t.payload;e[r]&&(e[r]=e[r].map(s=>s.dataKey===n.dataKey&&s.direction===n.direction?a:s))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:fWe,replaceErrorBar:mWe,removeErrorBar:pWe}=$ae.actions,eqe=$ae.reducer,tqe=["children"];function rqe(e,t){if(e==null)return{};var r,n,a=nqe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function nqe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var aqe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},sqe=v.createContext(aqe);function iqe(e){var{children:t}=e,r=rqe(e,tqe);return v.createElement(sqe.Provider,{value:r},t)}function Kae(e,t){var r,n,a=Nr(u=>PA(u,e)),s=Nr(u=>kA(u,t)),o=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:ni.allowDataOverflow,l=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:ai.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function oqe(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=Mae(),{needClipX:s,needClipY:o,needClip:l}=Kae(t,r);if(!l||!a)return null;var{x:c,y:u,width:d,height:A}=a;return v.createElement("clipPath",{id:"clipPath-".concat(n)},v.createElement("rect",{x:s?c:c-d/2,y:o?u:u-A/2,width:s?d:d*2,height:o?A:A*2}))}var lqe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gb=v;function cqe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var uqe=typeof Object.is=="function"?Object.is:cqe,dqe=Gb.useSyncExternalStore,Aqe=Gb.useRef,hqe=Gb.useEffect,fqe=Gb.useMemo,mqe=Gb.useDebugValue;lqe.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var s=Aqe(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=fqe(function(){function c(h){if(!u){if(u=!0,d=h,h=n(h),a!==void 0&&o.hasValue){var m=o.value;if(a(m,h))return A=m}return A=h}if(m=A,uqe(d,h))return m;var p=n(h);return a!==void 0&&a(m,p)?(d=h,m):(d=h,A=p)}var u=!1,d,A,f=r===void 0?null:r;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,r,n,a]);var l=dqe(e,s[0],s[1]);return hqe(function(){o.hasValue=!0,o.value=l},[l]),mqe(l),l};function pqe(e){e()}function gqe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){pqe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var KH={notify(){},get:()=>[]};function xqe(e,t){let r,n=KH,a=0,s=!1;function o(p){d();const g=n.subscribe(p);let x=!1;return()=>{x||(x=!0,g(),A())}}function l(){n.notify()}function c(){m.onStateChange&&m.onStateChange()}function u(){return s}function d(){a++,r||(r=e.subscribe(c),n=gqe())}function A(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=KH)}function f(){s||(s=!0,d())}function h(){s&&(s=!1,A())}const m={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:f,tryUnsubscribe:h,getListeners:()=>n};return m}var vqe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yqe=vqe(),bqe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",wqe=bqe(),Nqe=()=>yqe||wqe?v.useLayoutEffect:v.useEffect,Cqe=Nqe();function qH(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function _qe(e,t){if(qH(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!qH(e[r[a]],t[r[a]]))return!1;return!0}var p5=Symbol.for("react-redux-context"),g5=typeof globalThis<"u"?globalThis:{};function Eqe(){if(!v.createContext)return{};const e=g5[p5]??(g5[p5]=new Map);let t=e.get(v.createContext);return t||(t=v.createContext(null),e.set(v.createContext,t)),t}var Sqe=Eqe();function Iqe(e){const{children:t,context:r,serverState:n,store:a}=e,s=v.useMemo(()=>{const c=xqe(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),o=v.useMemo(()=>a.getState(),[a]);Cqe(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,o]);const l=r||Sqe;return v.createElement(l.Provider,{value:s},t)}var Bqe=Iqe,jqe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function Pqe(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function QD(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(jqe.has(n)){if(e[n]==null&&t[n]==null)continue;if(!_qe(e[n],t[n]))return!1}else if(!Pqe(e[n],t[n]))return!1;return!0}function R0(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(a=>a.id===t))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:Rae}function L0(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(a=>a.id===t))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:Rae}var kqe="Invariant failed";function Tqe(e,t){throw new Error(kqe)}function kT(){return kT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kT.apply(null,arguments)}function Z_(e){return v.createElement(kae,kT({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var Fqe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(Sr(t))return t;var s=Sr(n)||mi(n);return s?t(n,a):(s||Tqe(),r)}},Oqe=(e,t,r)=>r,Dqe=(e,t)=>t,zb=Et([eD,Dqe],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),Rqe=Et([zb],e=>e==null?void 0:e.maxBarSize),Lqe=(e,t,r,n)=>n,Mqe=Et([Nn,eD,R0,L0,Oqe],(e,t,r,n,a)=>t.filter(s=>e==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),Uqe=(e,t,r)=>{var n=Nn(e),a=R0(e,t),s=L0(e,t);if(!(a==null||s==null))return n==="horizontal"?_T(e,"yAxis",s,r):_T(e,"xAxis",a,r)},Qqe=(e,t)=>{var r=Nn(e),n=R0(e,t),a=L0(e,t);if(!(n==null||a==null))return r==="horizontal"?q9(e,"xAxis",n):q9(e,"yAxis",a)},Vqe=Et([Mqe,dQe,Qqe],uKe),Hqe=(e,t,r)=>{var n,a,s=zb(e,t);if(s!=null){var o=R0(e,t),l=L0(e,t);if(!(o==null||l==null)){var c=Nn(e),u=Zre(e),{maxBarSize:d}=s,A=mi(d)?u:d,f,h;return c==="horizontal"?(f=Ug(e,"xAxis",o,r),h=Mg(e,"xAxis",o,r)):(f=Ug(e,"yAxis",l,r),h=Mg(e,"yAxis",l,r)),(n=(a=S_(f,h,!0))!==null&&a!==void 0?a:A)!==null&&n!==void 0?n:0}}},qae=(e,t,r)=>{var n=Nn(e),a=R0(e,t),s=L0(e,t);if(!(a==null||s==null)){var o,l;return n==="horizontal"?(o=Ug(e,"xAxis",a,r),l=Mg(e,"xAxis",a,r)):(o=Ug(e,"yAxis",s,r),l=Mg(e,"yAxis",s,r)),S_(o,l)}},$qe=Et([Vqe,Zre,uQe,ene,Hqe,qae,Rqe],mKe),Kqe=(e,t,r)=>{var n=R0(e,t);if(n!=null)return Ug(e,"xAxis",n,r)},qqe=(e,t,r)=>{var n=L0(e,t);if(n!=null)return Ug(e,"yAxis",n,r)},Gqe=(e,t,r)=>{var n=R0(e,t);if(n!=null)return Mg(e,"xAxis",n,r)},zqe=(e,t,r)=>{var n=L0(e,t);if(n!=null)return Mg(e,"yAxis",n,r)},Wqe=Et([$qe,zb],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),Xqe=Et([Uqe,zb],pKe),Jqe=Et([Ws,mO,Kqe,qqe,Gqe,zqe,Wqe,Nn,Y8e,qae,Xqe,zb,Lqe],(e,t,r,n,a,s,o,l,c,u,d,A,f)=>{var{chartData:h,dataStartIndex:m,dataEndIndex:p}=c;if(!(A==null||o==null||t==null||l!=="horizontal"&&l!=="vertical"||r==null||n==null||a==null||s==null||u==null)){var{data:g}=A,x;if(g!=null&&g.length>0?x=g:x=h==null?void 0:h.slice(m,p+1),x!=null)return EGe({layout:l,barSettings:A,pos:o,parentViewBox:t,bandSize:u,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:s,stackedData:d,displayedData:x,offset:e,cells:f,dataStartIndex:m})}}),Yqe=["index"];function TT(){return TT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},TT.apply(null,arguments)}function Zqe(e,t){if(e==null)return{};var r,n,a=eGe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function eGe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Gae=v.createContext(void 0),tGe=e=>{var t=v.useContext(Gae);if(t!=null)return t.stackId;if(e!=null)return ZRe(e)},rGe=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),nGe=e=>{var t=v.useContext(Gae);if(t!=null){var{stackId:r}=t;return"url(#".concat(rGe(r,e),")")}},aGe=e=>{var{index:t}=e,r=Zqe(e,Yqe),n=nGe(t);return v.createElement(To,TT({className:"recharts-bar-stack-layer",clipPath:n},r))},sGe=["onMouseEnter","onMouseLeave","onClick"],iGe=["value","background","tooltipPosition"],oGe=["id"],lGe=["onMouseEnter","onClick","onMouseLeave"];function vA(){return vA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vA.apply(null,arguments)}function GH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function So(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GH(Object(r),!0).forEach(function(n){cGe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cGe(e,t,r){return(t=uGe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uGe(e){var t=dGe(e,"string");return typeof t=="symbol"?t:t+""}function dGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eE(e,t){if(e==null)return{};var r,n,a=AGe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function AGe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var hGe=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:n,value:LS(r,t),payload:e}]},fGe=v.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:o,unit:l,tooltipType:c,id:u}=e,d={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:LS(s,t),hide:o,type:c,color:a,unit:l,graphicalItemId:u}};return v.createElement(Tae,{tooltipEntrySettings:d})});function mGe(e){var t=Nr(f0),{data:r,dataKey:n,background:a,allOtherBarProps:s}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=s,u=eE(s,sGe),d=DD(o,n,s.id),A=RD(l),f=LD(c,n,s.id);if(!a||r==null)return null;var h=I1(a);return v.createElement(ud,{zIndex:gKe(a,lo.barBackground)},r.map((m,p)=>{var{value:g,background:x,tooltipPosition:y}=m,b=eE(m,iGe);if(!x)return null;var _=d(m,p),T=A(m,p),P=f(m,p),C=So(So(So(So(So({option:a,isActive:String(p)===t},b),{},{fill:"#eee"},x),h),Sb(u,m,p)),{},{onMouseEnter:_,onMouseLeave:T,onClick:P,dataKey:n,index:p,className:"recharts-bar-background-rectangle"});return v.createElement(Z_,vA({key:"background-bar-".concat(p)},C))}))}function pGe(e){var{showLabels:t,children:r,rects:n}=e,a=n==null?void 0:n.map(s=>{var o={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return So(So({},o),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:o,fill:s.fill})});return v.createElement(_He,{value:t?a:void 0},r)}function gGe(e){var{shape:t,activeBar:r,baseProps:n,entry:a,index:s,dataKey:o}=e,l=Nr(f0),c=Nr(_D),u=r&&String(s)===l&&(c==null||o===c),d=u?r:t;return u?v.createElement(ud,{zIndex:lo.activeBar},v.createElement(Z_,vA({},n,{name:String(n.name)},a,{isActive:u,option:d,index:s,dataKey:o}))):v.createElement(Z_,vA({},n,{name:String(n.name)},a,{isActive:u,option:d,index:s,dataKey:o}))}function xGe(e){var{shape:t,baseProps:r,entry:n,index:a,dataKey:s}=e;return v.createElement(Z_,vA({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:a,dataKey:s}))}function vGe(e){var t,{data:r,props:n}=e,a=(t=ed(n))!==null&&t!==void 0?t:{},{id:s}=a,o=eE(a,oGe),{shape:l,dataKey:c,activeBar:u}=n,{onMouseEnter:d,onClick:A,onMouseLeave:f}=n,h=eE(n,lGe),m=DD(d,c,s),p=RD(f),g=LD(A,c,s);return r?v.createElement(v.Fragment,null,r.map((x,y)=>v.createElement(aGe,vA({index:y,key:"rectangle-".concat(x==null?void 0:x.x,"-").concat(x==null?void 0:x.y,"-").concat(x==null?void 0:x.value,"-").concat(y),className:"recharts-bar-rectangle"},Sb(h,x,y),{onMouseEnter:m(x,y),onMouseLeave:p(x,y),onClick:g(x,y)}),u?v.createElement(gGe,{shape:l,activeBar:u,baseProps:o,entry:x,index:y,dataKey:c}):v.createElement(xGe,{shape:l,baseProps:o,entry:x,index:y,dataKey:c})))):null}function yGe(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:s,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,A=r.current,f=XS(t,"recharts-bar-"),[h,m]=v.useState(!1),p=!h,g=v.useCallback(()=>{typeof u=="function"&&u(),m(!1)},[u]),x=v.useCallback(()=>{typeof d=="function"&&d(),m(!0)},[d]);return v.createElement(pGe,{showLabels:p,rects:n},v.createElement(WS,{animationId:f,begin:o,duration:l,isActive:s,easing:c,onAnimationEnd:g,onAnimationStart:x,key:f},y=>{var b=y===1?n:n==null?void 0:n.map((_,T)=>{var P=A&&A[T];if(P)return So(So({},_),{},{x:Us(P.x,_.x,y),y:Us(P.y,_.y,y),width:Us(P.width,_.width,y),height:Us(P.height,_.height,y)});if(a==="horizontal"){var C=Us(0,_.height,y),S=Us(_.stackedBarStart,_.y,y);return So(So({},_),{},{y:S,height:C})}var I=Us(0,_.width,y),L=Us(_.stackedBarStart,_.x,y);return So(So({},_),{},{width:I,x:L})});return y>0&&(r.current=b??null),b==null?null:v.createElement(To,null,v.createElement(vGe,{props:t,data:b}))}),v.createElement(Cae,{label:t.label}),t.children)}function bGe(e){var t=v.useRef(null);return v.createElement(yGe,{previousRectanglesRef:t,props:e})}var zae=0,wGe=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:xa(e,t)}};class NGe extends v.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:o,needClip:l,background:c,id:u}=this.props;if(t||r==null)return null;var d=Qn("recharts-bar",a),A=u;return v.createElement(To,{className:d,id:u},l&&v.createElement("defs",null,v.createElement(oqe,{clipPathId:A,xAxisId:s,yAxisId:o})),v.createElement(To,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(A,")"):void 0},v.createElement(mGe,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),v.createElement(bGe,this.props)))}}var CGe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:zae,xAxisId:0,yAxisId:0,zIndex:lo.bar};function _Ge(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=e,{needClip:A}=Kae(t,r),f=Pb(),h=Ul(),m=OD(e.children,qb),p=Nr(y=>Jqe(y,e.id,h,m));if(f!=="vertical"&&f!=="horizontal")return null;var g,x=p==null?void 0:p[0];return x==null||x.height==null||x.width==null?g=0:g=f==="vertical"?x.height/2:x.width/2,v.createElement(iqe,{xAxisId:t,yAxisId:r,data:p,dataPointFormatter:wGe,errorBarOffset:g},v.createElement(NGe,vA({},e,{layout:f,needClip:A,data:p,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function EGe(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:A,offset:f,cells:h,parentViewBox:m,dataStartIndex:p}=e,g=t==="horizontal"?l:o,x=d?g.scale.domain():null,y=eLe({numericAxis:g}),b=g.scale(y);return A.map((_,T)=>{var P,C,S,I,L,E;if(d){var j=d[T+p];if(j==null)return null;P=zRe(j,x)}else P=xa(_,r),Array.isArray(P)||(P=[y,P]);var R=Fqe(n,zae)(P[1],T);if(t==="horizontal"){var W,[de,te]=[l.scale(P[0]),l.scale(P[1])];C=rV({axis:o,ticks:c,bandSize:s,offset:a.offset,entry:_,index:T}),S=(W=te??de)!==null&&W!==void 0?W:void 0,I=a.size;var le=de-te;if(L=td(le)?0:le,E={x:C,y:f.top,width:I,height:f.height},Math.abs(R)>0&&Math.abs(L)<Math.abs(R)){var ce=Li(L||R)*(Math.abs(R)-Math.abs(L));S-=ce,L+=ce}}else{var[J,me]=[o.scale(P[0]),o.scale(P[1])];if(C=J,S=rV({axis:l,ticks:u,bandSize:s,offset:a.offset,entry:_,index:T}),I=me-J,L=a.size,E={x:f.left,y:S,width:f.width,height:L},Math.abs(R)>0&&Math.abs(I)<Math.abs(R)){var Ee=Li(I||R)*(Math.abs(R)-Math.abs(I));I+=Ee}}if(C==null||S==null||I==null||L==null)return null;var k=So(So({},_),{},{stackedBarStart:b,x:C,y:S,width:I,height:L,value:d?P:P[1],payload:_,background:E,tooltipPosition:{x:C+I/2,y:S+L/2},parentViewBox:m},h&&h[T]&&h[T].props);return k}).filter(Boolean)}function SGe(e){var t=Vi(e,CGe),r=tGe(t.stackId),n=Ul();return v.createElement(Fae,{id:t.id,type:"bar"},a=>v.createElement(v.Fragment,null,v.createElement(c$e,{legendPayload:hGe(t)}),v.createElement(fGe,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:a}),v.createElement(N$e,{type:"bar",id:a,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:r,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),v.createElement(ud,{zIndex:t.zIndex},v.createElement(_Ge,vA({},t,{id:a})))))}var FT=v.memo(SGe,QD);FT.displayName="Bar";var IGe=["domain","range"],BGe=["domain","range"];function zH(e,t){if(e==null)return{};var r,n,a=jGe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function jGe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function WH(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function Wae(e,t){if(e===t)return!0;var{domain:r,range:n}=e,a=zH(e,IGe),{domain:s,range:o}=t,l=zH(t,BGe);return!WH(r,s)||!WH(n,o)?!1:QD(a,l)}var PGe=["dangerouslySetInnerHTML","ticks","scale"],kGe=["id","scale"];function OT(){return OT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},OT.apply(null,arguments)}function XH(e,t){if(e==null)return{};var r,n,a=TGe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function TGe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function FGe(e){var t=ca(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?t(eKe(e)):r.current!==e&&t(tKe({prev:r.current,next:e})),r.current=e},[e,t]),v.useLayoutEffect(()=>()=>{r.current&&(t(rKe(r.current)),r.current=null)},[t]),null}var OGe=e=>{var{xAxisId:t,className:r}=e,n=Nr(mO),a=Ul(),s="xAxis",o=Nr(x=>kne(x,s,t,a)),l=Nr(x=>Ine(x,t)),c=Nr(x=>l7e(x,t)),u=Nr(x=>cne(x,t));if(l==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:A,scale:f}=e,h=XH(e,PGe),{id:m,scale:p}=u,g=XH(u,kGe);return v.createElement(UD,OT({},h,g,{x:c.x,y:c.y,width:l.width,height:l.height,className:Qn("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:o,axisType:s}))},DGe={allowDataOverflow:ni.allowDataOverflow,allowDecimals:ni.allowDecimals,allowDuplicatedCategory:ni.allowDuplicatedCategory,angle:ni.angle,axisLine:Lm.axisLine,height:ni.height,hide:!1,includeHidden:ni.includeHidden,interval:ni.interval,minTickGap:ni.minTickGap,mirror:ni.mirror,orientation:ni.orientation,padding:ni.padding,reversed:ni.reversed,scale:ni.scale,tick:ni.tick,tickCount:ni.tickCount,tickLine:Lm.tickLine,tickSize:Lm.tickSize,type:ni.type,xAxisId:0},RGe=e=>{var t=Vi(e,DGe);return v.createElement(v.Fragment,null,v.createElement(FGe,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),v.createElement(OGe,t))},Xae=v.memo(RGe,Wae);Xae.displayName="XAxis";var LGe=["dangerouslySetInnerHTML","ticks","scale"],MGe=["id","scale"];function DT(){return DT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},DT.apply(null,arguments)}function JH(e,t){if(e==null)return{};var r,n,a=UGe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function UGe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function QGe(e){var t=ca(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?t(nKe(e)):r.current!==e&&t(aKe({prev:r.current,next:e})),r.current=e},[e,t]),v.useLayoutEffect(()=>()=>{r.current&&(t(sKe(r.current)),r.current=null)},[t]),null}var VGe=e=>{var{yAxisId:t,className:r,width:n,label:a}=e,s=v.useRef(null),o=v.useRef(null),l=Nr(mO),c=Ul(),u=ca(),d="yAxis",A=Nr(P=>Bne(P,t)),f=Nr(P=>u7e(P,t)),h=Nr(P=>kne(P,d,t,c)),m=Nr(P=>une(P,t));if(v.useLayoutEffect(()=>{if(!(n!=="auto"||!A||jD(a)||v.isValidElement(a)||m==null)){var P=s.current;if(P){var C=P.getCalculatedWidth();Math.round(A.width)!==Math.round(C)&&u(iKe({id:t,width:C}))}}},[h,A,u,a,t,n,m]),A==null||f==null||m==null)return null;var{dangerouslySetInnerHTML:p,ticks:g,scale:x}=e,y=JH(e,LGe),{id:b,scale:_}=m,T=JH(m,MGe);return v.createElement(UD,DT({},y,T,{ref:s,labelRef:o,x:f.x,y:f.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:A.width,height:A.height,className:Qn("recharts-".concat(d," ").concat(d),r),viewBox:l,ticks:h,axisType:d}))},HGe={allowDataOverflow:ai.allowDataOverflow,allowDecimals:ai.allowDecimals,allowDuplicatedCategory:ai.allowDuplicatedCategory,angle:ai.angle,axisLine:Lm.axisLine,hide:!1,includeHidden:ai.includeHidden,interval:ai.interval,minTickGap:ai.minTickGap,mirror:ai.mirror,orientation:ai.orientation,padding:ai.padding,reversed:ai.reversed,scale:ai.scale,tick:ai.tick,tickCount:ai.tickCount,tickLine:Lm.tickLine,tickSize:Lm.tickSize,type:ai.type,width:ai.width,yAxisId:0},$Ge=e=>{var t=Vi(e,HGe);return v.createElement(v.Fragment,null,v.createElement(QGe,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),v.createElement(VGe,t))},Jae=v.memo($Ge,Wae);Jae.displayName="YAxis";var KGe=(e,t)=>t,VD=Et([KGe,Nn,one,Js,zne,TA,_Ve,Ws],kVe),HD=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},Yae=Bc("mouseClick"),Zae=Bb();Zae.startListening({actionCreator:Yae,effect:(e,t)=>{var r=e.payload,n=VD(t.getState(),HD(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(C7e({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var RT=Bc("mouseMove"),ese=Bb(),tN=null;ese.startListening({actionCreator:RT,effect:(e,t)=>{var r=e.payload;tN!==null&&cancelAnimationFrame(tN);var n=HD(r);tN=requestAnimationFrame(()=>{var a=t.getState(),s=vD(a,a.tooltip.settings.shared);if(s==="axis"){var o=VD(a,n);(o==null?void 0:o.activeIndex)!=null?t.dispatch(Une({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):t.dispatch(Mne())}tN=null})}});function qGe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var YH={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},tse=nl({name:"rootProps",initialState:YH,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:YH.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),GGe=tse.reducer,{updateOptions:zGe}=tse.actions,rse=nl({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:WGe}=rse.actions,XGe=rse.reducer,nse=Bc("keyDown"),ase=Bc("focus"),$D=Bb();$D.startListening({actionCreator:nse,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var o=yD(a,px(r),Qb(r),$b(r)),l=o==null?-1:Number(o);if(!(!Number.isFinite(l)||l<0)){var c=TA(r);if(s==="Enter"){var u=W_(r,"axis","hover",String(a.index));t.dispatch(ST({active:!a.active,activeIndex:a.index,activeCoordinate:u}));return}var d=f7e(r),A=d==="left-to-right"?1:-1,f=s==="ArrowRight"?1:-1,h=l+f*A;if(!(c==null||h>=c.length||h<0)){var m=W_(r,"axis","hover",String(h));t.dispatch(ST({active:!0,activeIndex:h.toString(),activeCoordinate:m}))}}}}}});$D.startListening({actionCreator:ase,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",o=W_(r,"axis","hover",String(s));t.dispatch(ST({active:!0,activeIndex:s,activeCoordinate:o}))}}}});var lc=Bc("externalEvent"),sse=Bb(),x5=new Map;sse.startListening({actionCreator:lc,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(r!=null){n.persist();var a=n.type,s=x5.get(a);s!==void 0&&cancelAnimationFrame(s);var o=requestAnimationFrame(()=>{try{var l=t.getState(),c={activeCoordinate:uVe(l),activeDataKey:_D(l),activeIndex:f0(l),activeLabel:Jne(l),activeTooltipIndex:f0(l),isTooltipActive:dVe(l)};r(c,n)}finally{x5.delete(a)}});x5.set(a,o)}}});var JGe=Et([fx],e=>e.tooltipItemPayloads),YGe=Et([JGe,Hb,(e,t)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(l=>l.settings.graphicalItemId===n);if(a!=null){var{positions:s}=a;if(s!=null){var o=t(s,r);return o}}}),ise=Bc("touchMove"),ose=Bb();ose.startListening({actionCreator:ise,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),a=vD(n,n.tooltip.settings.shared);if(a==="axis"){var s=r.touches[0];if(s==null)return;var o=VD(n,HD({clientX:s.clientX,clientY:s.clientY,currentTarget:r.currentTarget}));(o==null?void 0:o.activeIndex)!=null&&t.dispatch(Une({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(a==="item"){var l,c=r.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute(Cte),A=(l=u.getAttribute(_te))!==null&&l!==void 0?l:void 0,f=mx(n).find(p=>p.id===A);if(d==null||f==null||A==null)return;var{dataKey:h}=f,m=YGe(n,d,A);t.dispatch(Lne({activeDataKey:h,activeIndex:d,activeCoordinate:m,activeGraphicalItemId:A}))}}}});var ZGe=zee({brush:xKe,cartesianAxis:oKe,chartData:l9e,errorBars:eqe,graphicalItems:b$e,layout:VRe,legend:GLe,options:n9e,polarAxis:DHe,polarOptions:XGe,referenceElements:_Ke,rootProps:GGe,tooltip:_7e,zIndex:qVe}),eze=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return hRe({reducer:ZGe,preloadedState:t,middleware:n=>{var a;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((a="es6")!==null&&a!==void 0?a:"")}).concat([Zae.middleware,ese.middleware,$D.middleware,sse.middleware,ose.middleware])},enhancers:n=>{var a=n;return typeof n=="function"&&(a=n()),a.concat(cte({type:"raf"}))},devTools:{serialize:{replacer:qGe},name:"recharts-".concat(r)}})};function lse(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=Ul(),s=v.useRef(null);if(a)return r;s.current==null&&(s.current=eze(t,n));var o=iO;return v.createElement(Bqe,{context:o,store:s.current},r)}function tze(e){var{layout:t,margin:r}=e,n=ca(),a=Ul();return v.useEffect(()=>{a||(n(MRe(t)),n(LRe(r)))},[n,a,t,r]),null}var cse=v.memo(tze,QD);function use(e){var t=ca();return v.useEffect(()=>{t(zGe(e))},[t,e]),null}function ZH(e){var{zIndex:t,isPanorama:r}=e,n=v.useRef(null),a=ca();return v.useLayoutEffect(()=>(n.current&&a($Ve({zIndex:t,element:n.current,isPanorama:r})),()=>{a(KVe({zIndex:t,isPanorama:r}))}),[a,t,r]),v.createElement("g",{tabIndex:-1,ref:n})}function e$(e){var{children:t,isPanorama:r}=e,n=Nr(FVe);if(!n||n.length===0)return t;var a=n.filter(o=>o<0),s=n.filter(o=>o>0);return v.createElement(v.Fragment,null,a.map(o=>v.createElement(ZH,{key:o,zIndex:o,isPanorama:r})),t,s.map(o=>v.createElement(ZH,{key:o,zIndex:o,isPanorama:r})))}var rze=["children"];function nze(e,t){if(e==null)return{};var r,n,a=aze(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function aze(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function tE(){return tE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tE.apply(null,arguments)}var sze={width:"100%",height:"100%",display:"block"},ize=v.forwardRef((e,t)=>{var r=Tte(),n=Fte(),a=Kte();if(!gf(r)||!gf(n))return null;var{children:s,otherAttributes:o,title:l,desc:c}=e,u,d;return o!=null&&(typeof o.tabIndex=="number"?u=o.tabIndex:u=a?0:void 0,typeof o.role=="string"?d=o.role:d=a?"application":void 0),v.createElement(K3,tE({},o,{title:l,desc:c,role:d,tabIndex:u,width:r,height:n,style:sze,ref:t}),s)}),oze=e=>{var{children:t}=e,r=Nr(VS);if(!r)return null;var{width:n,height:a,y:s,x:o}=r;return v.createElement(K3,{width:n,height:a,x:o,y:s},t)},t$=v.forwardRef((e,t)=>{var{children:r}=e,n=nze(e,rze),a=Ul();return a?v.createElement(oze,null,v.createElement(e$,{isPanorama:!0},r)):v.createElement(ize,tE({ref:t},n),v.createElement(e$,{isPanorama:!1},r))});function lze(){var e=ca(),[t,r]=v.useState(null),n=Nr(iLe);return v.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),s=a.width/t.offsetWidth;qa(s)&&s!==n&&e(QRe(s))}},[t,e,n]),r}function r$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cze(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r$(Object(r),!0).forEach(function(n){uze(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uze(e,t,r){return(t=dze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dze(e){var t=Aze(e,"string");return typeof t=="symbol"?t:t+""}function Aze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function p0(){return p0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p0.apply(null,arguments)}var hze=()=>(g9e(),null);function rE(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var fze=v.forwardRef((e,t)=>{var r,n,a=v.useRef(null),[s,o]=v.useState({containerWidth:rE((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:rE((n=e.style)===null||n===void 0?void 0:n.height)}),l=v.useCallback((u,d)=>{o(A=>{var f=Math.round(u),h=Math.round(d);return A.containerWidth===f&&A.containerHeight===h?A:{containerWidth:f,containerHeight:h}})},[]),c=v.useCallback(u=>{if(typeof t=="function"&&t(u),u!=null&&typeof ResizeObserver<"u"){var{width:d,height:A}=u.getBoundingClientRect();l(d,A);var f=m=>{var{width:p,height:g}=m[0].contentRect;l(p,g)},h=new ResizeObserver(f);h.observe(u),a.current=h}},[t,l]);return v.useEffect(()=>()=>{var u=a.current;u!=null&&u.disconnect()},[l]),v.createElement(v.Fragment,null,v.createElement($S,{width:s.containerWidth,height:s.containerHeight}),v.createElement("div",p0({ref:c},e)))}),mze=v.forwardRef((e,t)=>{var{width:r,height:n}=e,[a,s]=v.useState({containerWidth:rE(r),containerHeight:rE(n)}),o=v.useCallback((c,u)=>{s(d=>{var A=Math.round(c),f=Math.round(u);return d.containerWidth===A&&d.containerHeight===f?d:{containerWidth:A,containerHeight:f}})},[]),l=v.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null){var{width:u,height:d}=c.getBoundingClientRect();o(u,d)}},[t,o]);return v.createElement(v.Fragment,null,v.createElement($S,{width:a.containerWidth,height:a.containerHeight}),v.createElement("div",p0({ref:l},e)))}),pze=v.forwardRef((e,t)=>{var{width:r,height:n}=e;return v.createElement(v.Fragment,null,v.createElement($S,{width:r,height:n}),v.createElement("div",p0({ref:t},e)))}),gze=v.forwardRef((e,t)=>{var{width:r,height:n}=e;return hA(r)||hA(n)?v.createElement(mze,p0({},e,{ref:t})):v.createElement(pze,p0({},e,{ref:t}))});function xze(e){return e===!0?fze:gze}var vze=v.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:A,onMouseUp:f,onTouchEnd:h,onTouchMove:m,onTouchStart:p,style:g,width:x,responsive:y,dispatchTouchEvents:b=!0}=e,_=v.useRef(null),T=ca(),[P,C]=v.useState(null),[S,I]=v.useState(null),L=lze(),E=pO(),j=(E==null?void 0:E.width)>0?E.width:x,R=(E==null?void 0:E.height)>0?E.height:a,W=v.useCallback(K=>{L(K),typeof t=="function"&&t(K),C(K),I(K),K!=null&&(_.current=K)},[L,t,C,I]),de=v.useCallback(K=>{T(Yae(K)),T(lc({handler:s,reactEvent:K}))},[T,s]),te=v.useCallback(K=>{T(RT(K)),T(lc({handler:u,reactEvent:K}))},[T,u]),le=v.useCallback(K=>{T(Mne()),T(lc({handler:d,reactEvent:K}))},[T,d]),ce=v.useCallback(K=>{T(RT(K)),T(lc({handler:A,reactEvent:K}))},[T,A]),J=v.useCallback(()=>{T(ase())},[T]),me=v.useCallback(K=>{T(nse(K.key))},[T]),Ee=v.useCallback(K=>{T(lc({handler:o,reactEvent:K}))},[T,o]),k=v.useCallback(K=>{T(lc({handler:l,reactEvent:K}))},[T,l]),F=v.useCallback(K=>{T(lc({handler:c,reactEvent:K}))},[T,c]),V=v.useCallback(K=>{T(lc({handler:f,reactEvent:K}))},[T,f]),D=v.useCallback(K=>{T(lc({handler:p,reactEvent:K}))},[T,p]),M=v.useCallback(K=>{b&&T(ise(K)),T(lc({handler:m,reactEvent:K}))},[T,b,m]),G=v.useCallback(K=>{T(lc({handler:h,reactEvent:K}))},[T,h]),O=xze(y);return v.createElement(aae.Provider,{value:P},v.createElement(WZ.Provider,{value:S},v.createElement(O,{width:j??(g==null?void 0:g.width),height:R??(g==null?void 0:g.height),className:Qn("recharts-wrapper",n),style:cze({position:"relative",cursor:"default",width:j,height:R},g),onClick:de,onContextMenu:Ee,onDoubleClick:k,onFocus:J,onKeyDown:me,onMouseDown:F,onMouseEnter:te,onMouseLeave:le,onMouseMove:ce,onMouseUp:V,onTouchEnd:G,onTouchMove:M,onTouchStart:D,ref:W},v.createElement(hze,null),r)))}),yze=["width","height","responsive","children","className","style","compact","title","desc"];function bze(e,t){if(e==null)return{};var r,n,a=wze(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function wze(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var dse=v.forwardRef((e,t)=>{var{width:r,height:n,responsive:a,children:s,className:o,style:l,compact:c,title:u,desc:d}=e,A=bze(e,yze),f=ed(A);return c?v.createElement(v.Fragment,null,v.createElement($S,{width:r,height:n}),v.createElement(t$,{otherAttributes:f,title:u,desc:d},s)):v.createElement(vze,{className:o,style:l,width:r,height:n,responsive:a??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},v.createElement(t$,{otherAttributes:f,title:u,desc:d,ref:t},v.createElement(SKe,null,s)))});function LT(){return LT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},LT.apply(null,arguments)}var Nze={top:5,right:5,bottom:5,left:5},Cze={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:Nze,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},_ze=v.forwardRef(function(t,r){var n,a=Vi(t.categoricalChartProps,Cze),{chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:u}=t,d={chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return v.createElement(lse,{preloadedState:{options:d},reduxStoreName:(n=u.id)!==null&&n!==void 0?n:s},v.createElement(Uae,{chartData:u.data}),v.createElement(cse,{layout:a.layout,margin:a.margin}),v.createElement(use,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),v.createElement(dse,LT({},a,{ref:r})))}),Eze=["axis","item"],Sze=v.forwardRef((e,t)=>v.createElement(_ze,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Eze,tooltipPayloadSearcher:iae,categoricalChartProps:e,ref:t}));function Ize(e){var t=ca();return v.useEffect(()=>{t(WGe(e))},[t,e]),null}var Bze=["layout"];function MT(){return MT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},MT.apply(null,arguments)}function jze(e,t){if(e==null)return{};var r,n,a=Pze(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Pze(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var kze={top:5,right:5,bottom:5,left:5},Ase={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:kze,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Tze=v.forwardRef(function(t,r){var n,a=Vi(t.categoricalChartProps,Ase),{layout:s}=a,o=jze(a,Bze),{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d}=t,A={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return v.createElement(lse,{preloadedState:{options:A},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:l},v.createElement(Uae,{chartData:a.data}),v.createElement(cse,{layout:s,margin:a.margin}),v.createElement(use,{baseValue:void 0,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),v.createElement(Ize,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),v.createElement(dse,MT({},o,{ref:r})))});function n$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function a$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n$(Object(r),!0).forEach(function(n){Fze(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fze(e,t,r){return(t=Oze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oze(e){var t=Dze(e,"string");return typeof t=="symbol"?t:t+""}function Dze(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rze=["item"],Lze=a$(a$({},Ase),{},{layout:"centric",startAngle:0,endAngle:360}),Mze=v.forwardRef((e,t)=>{var r=Vi(e,Lze);return v.createElement(Tze,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Rze,tooltipPayloadSearcher:iae,categoricalChartProps:r,ref:t})});const Uze="sellers_candies",rN="cash_deliveries_candies";function En(e){const t=typeof e=="number"?e:parseFloat(String(e??"").replace(/,/g,""));return Number.isFinite(t)?t:0}function ds(e){return Number.isFinite(e)?e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}function nN(e,t){return e*t/100}function aN(e,t,r){return e-t-r}function s$(e){return e?ir(e.toDate(),"yyyy-MM-dd"):""}function sN(e){if(!e)return zt.fromDate(new Date);const[t,r,n]=e.split("-").map(s=>parseInt(s,10)),a=new Date(t,(r||1)-1,n||1,0,0,0,0);return zt.fromDate(a)}function Qze(){const e=new Date,[t,r]=v.useState(ir(gu(e),"yyyy-MM-dd")),[n,a]=v.useState(ir(pu(e),"yyyy-MM-dd")),[s,o]=v.useState([]),l=v.useMemo(()=>{const O=new Map;return s.forEach(K=>O.set(K.id,K)),O},[s]),[c,u]=v.useState([]),[d,A]=v.useState(!0),[f,h]=v.useState(()=>ir(new Date,"yyyy-MM-dd")),[m,p]=v.useState(""),[g,x]=v.useState(""),[y,b]=v.useState("0"),[_,T]=v.useState(""),[P,C]=v.useState(null),[S,I]=v.useState({}),L=v.useRef(null);v.useEffect(()=>{const O=Ht(At(ke,Uze),Ur("name","asc")),K=uf(O,ee=>{const ne=ee.docs.map(Q=>{const be=Q.data();return{id:Q.id,name:String((be==null?void 0:be.name)??""),branch:be!=null&&be.branch?String(be.branch):"",commissionPercent:En((be==null?void 0:be.commissionPercent)??0)}});o(ne)},()=>o([]));return()=>K()},[]),v.useEffect(()=>{A(!0);const O=sN(t),K=new Date(sN(n).toDate().getTime());K.setDate(K.getDate()+1);const ee=zt.fromDate(K),ne=Ht(At(ke,rN),Xt("date",">=",O),Xt("date","<",ee),Ur("date","desc")),Q=uf(ne,be=>{const Z=be.docs.map(z=>{const X=z.data();return{id:z.id,date:X==null?void 0:X.date,sellerId:String((X==null?void 0:X.sellerId)??""),sellerName:String((X==null?void 0:X.sellerName)??""),amountDelivered:En(X==null?void 0:X.amountDelivered),commissionPercent:En(X==null?void 0:X.commissionPercent),commissionPaid:En(X==null?void 0:X.commissionPaid),extraExpenses:En(X==null?void 0:X.extraExpenses),totalFinal:En(X==null?void 0:X.totalFinal),comment:String((X==null?void 0:X.comment)??""),createdAt:X==null?void 0:X.createdAt,updatedAt:X==null?void 0:X.updatedAt}});u(Z),A(!1)},be=>{console.error("Firestore deliveries query error:",be),u([]),A(!1),alert("Firestore query fall. Revis consola (probable ndice).")});return()=>Q()},[t,n]);const E=v.useMemo(()=>m?l.get(m):void 0,[m,l]),j=En((E==null?void 0:E.commissionPercent)??0),R=En(g),W=En(y),de=nN(R,j),te=aN(R,de,W),le=v.useMemo(()=>{var K;const O=new Map;for(const ee of c){const ne=ee.sellerId||ee.sellerName||"UNKNOWN",Q=O.get(ne)??{sellerId:ee.sellerId,sellerName:ee.sellerName||((K=l.get(ee.sellerId))==null?void 0:K.name)||"Sin nombre",delivered:0,commission:0,totalFinal:0};Q.delivered+=En(ee.amountDelivered),Q.commission+=En(ee.commissionPaid),Q.totalFinal+=En(ee.totalFinal),O.set(ne,Q)}return Array.from(O.values()).sort((ee,ne)=>ee.sellerName.localeCompare(ne.sellerName))},[c,l]),ce=v.useMemo(()=>{let O=0,K=0,ee=0,ne=0;for(const Q of c)O+=En(Q.amountDelivered),K+=En(Q.commissionPaid),ee+=En(Q.extraExpenses),ne+=En(Q.totalFinal);return{delivered:O,commission:K,expenses:ee,totalFinal:ne}},[c]),J=v.useMemo(()=>le.map(O=>({name:O.sellerName,Entregado:Number(O.delivered.toFixed(2)),Comision:Number(O.commission.toFixed(2))})),[le]),me=v.useMemo(()=>[{name:"Total Entregado (Bruto)",value:Number(ce.delivered.toFixed(2))},{name:"Total Comisin",value:Number(ce.commission.toFixed(2))},{name:"Total Gastos",value:Number(ce.expenses.toFixed(2))}].filter(O=>O.value>0),[ce]),Ee=["#3B82F6","#F59E0B","#EF4444"];async function k(){if(!m)return alert("Seleccion un vendedor.");if(R<=0)return alert("Ingres un Monto entregado vlido (> 0).");const O=l.get(m),K=(O==null?void 0:O.name)??"Sin nombre",ee=En((O==null?void 0:O.commissionPercent)??0),ne=nN(R,ee),Q=aN(R,ne,W);await en(At(ke,rN),{date:sN(f),sellerId:m,sellerName:K,amountDelivered:R,commissionPercent:ee,commissionPaid:ne,extraExpenses:W,totalFinal:Q,comment:_??"",createdAt:zt.now()}),x(""),b("0"),T("")}function F(O){C(O.id),I({...O,dateInput:s$(O.date)})}function V(){C(null),I({})}async function D(O){const K=S,ee=String(K.sellerId??""),ne=l.get(ee),Q=String(K.sellerName??(ne==null?void 0:ne.name)??"Sin nombre"),be=En(K.amountDelivered),Z=En(K.extraExpenses),z=En(K.commissionPercent??(ne==null?void 0:ne.commissionPercent)??0),X=nN(be,z),ve=aN(be,X,Z),re=sN(String(K.dateInput??s$(K.date)));await Lr(Mt(ke,rN,O),{date:re,sellerId:ee,sellerName:Q,amountDelivered:be,commissionPercent:z,commissionPaid:X,extraExpenses:Z,totalFinal:ve,comment:String(K.comment??""),updatedAt:zt.now()}),V()}async function M(O){confirm("Eliminar este registro?")&&await fn(Mt(ke,rN,O))}async function G(){if(!L.current)return;const O=await If(L.current,{scale:2,useCORS:!0,backgroundColor:"#ffffff",scrollX:0,scrollY:-window.scrollY}),K=O.toDataURL("image/png"),ee=new Ar("p","mm","a4"),ne=ee.internal.pageSize.getWidth(),Q=ee.internal.pageSize.getHeight(),be=ne,Z=O.height*be/O.width;let z=Z,X=0;for(ee.addImage(K,"PNG",0,X,be,Z),z-=Q;z>0;)ee.addPage(),X=-(Z-z),ee.addImage(K,"PNG",0,X,be,Z),z-=Q;ee.save(`Entregas_Dulces_${t}_a_${n}.pdf`)}return i.jsxs("div",{className:"p-3 md:p-6 max-w-7xl mx-auto space-y-3 md:space-y-4",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-lg md:text-2xl font-black text-gray-900",children:"Control Contable - Entregas de Vendedores (Dulces)"}),i.jsxs("p",{className:"text-xs md:text-sm text-gray-600",children:["Periodo: ",i.jsx("span",{className:"font-bold",children:t})," "," ",i.jsx("span",{className:"font-bold",children:n})]})]}),i.jsx("button",{onClick:G,className:"h-10 px-4 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800 active:scale-[0.99] transition",children:"Exportar a PDF"})]}),i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Filtros de periodo"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Desde"}),i.jsx("input",{type:"date",value:t,onChange:O=>r(O.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Hasta"}),i.jsx("input",{type:"date",value:n,onChange:O=>a(O.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]})]})]}),i.jsxs("div",{ref:L,className:"space-y-3 md:space-y-4",children:[i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"KPIs Consolidados"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[i.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[i.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Entradas (Neto)"}),i.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",ds(ce.totalFinal)]}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Entregado - Comisin - Gastos"})]}),i.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[i.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Comisiones"}),i.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",ds(ce.commission)]}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Suma de comisin pagada"})]}),i.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[i.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Gastos extras"}),i.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",ds(ce.expenses)]}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Suma de gastos registrados"})]}),i.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[i.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"Total entregado (Bruto)"}),i.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",ds(ce.delivered)]}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Sin restar nada"})]})]}),i.jsx("div",{className:"font-black text-sm text-gray-900 mt-4 mb-2",children:"KPI Vendedores (sumatoria del periodo)"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-[520px] w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-gray-50 text-gray-700",children:[i.jsx("th",{className:"text-left p-2 font-black",children:"Vendedor"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Entregado"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Comisin"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Total final"})]})}),i.jsx("tbody",{children:le.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-2 text-gray-500",colSpan:4,children:"Sin datos en el periodo seleccionado."})}):le.map(O=>i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"p-2",children:O.sellerName}),i.jsxs("td",{className:"p-2 text-right",children:["$ ",ds(O.delivered)]}),i.jsxs("td",{className:"p-2 text-right",children:["$ ",ds(O.commission)]}),i.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",ds(O.totalFinal)]})]},O.sellerId||O.sellerName))})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Entregas y Comisin por vendedor (Barras)"}),i.jsx("div",{className:"w-full h-[320px]",children:i.jsx(uV,{children:i.jsxs(Sze,{data:J,children:[i.jsx(Xae,{dataKey:"name",interval:0,angle:-12,height:70}),i.jsx(Jae,{}),i.jsx(lH,{}),i.jsx(cT,{}),i.jsx(FT,{dataKey:"Entregado"}),i.jsx(FT,{dataKey:"Comision"})]})})})]}),i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Distribucin (Pastel)"}),i.jsx("div",{className:"w-full h-[320px]",children:i.jsx(uV,{children:i.jsxs(Mze,{children:[i.jsx(Dae,{data:me,dataKey:"value",nameKey:"name",outerRadius:110,label:!0,children:me.map((O,K)=>i.jsx(qb,{fill:Ee[K%Ee.length]},K))}),i.jsx(lH,{}),i.jsx(cT,{})]})})})]})]}),i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Agregar movimiento"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Fecha"}),i.jsx("input",{type:"date",value:f,onChange:O=>h(O.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Vendedor"}),i.jsxs("select",{value:m,onChange:O=>p(O.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10 bg-white",children:[i.jsx("option",{value:"",children:"Seleccionar..."}),s.map(O=>i.jsxs("option",{value:O.id,children:[O.name," ",O.branch?`(${O.branch})`:""]},O.id))]})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Monto entregado"}),i.jsx("input",{type:"number",inputMode:"decimal",value:g,onChange:O=>x(O.target.value),placeholder:"0.00",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin configurada"}),i.jsx("input",{value:`${j}%`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-800"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin pagada"}),i.jsx("input",{value:`$ ${ds(de)}`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-800"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Gastos extras"}),i.jsx("input",{type:"number",inputMode:"decimal",value:y,onChange:O=>b(O.target.value),placeholder:"0.00",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Total final"}),i.jsx("input",{value:`$ ${ds(te)}`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-900 font-extrabold"})]}),i.jsxs("label",{className:"space-y-1 md:col-span-2",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comentario"}),i.jsx("input",{value:_,onChange:O=>T(O.target.value),placeholder:"Opcional...",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]})]}),i.jsx("div",{className:"mt-3",children:i.jsx("button",{onClick:k,className:"w-full md:w-auto h-10 px-4 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800 active:scale-[0.99] transition",children:"Guardar movimiento"})})]}),i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Registro detallado"}),d?i.jsx("div",{className:"text-sm text-gray-500",children:"Cargando..."}):c.length===0?i.jsx("div",{className:"text-sm text-gray-500",children:"No hay registros en el periodo."}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1100px] w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-gray-50 text-gray-700",children:[i.jsx("th",{className:"text-left p-2 font-black",children:"Fecha"}),i.jsx("th",{className:"text-left p-2 font-black",children:"Vendedor"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Monto entregado"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Comisin %"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Comisin pagada"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Gastos"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Total final"}),i.jsx("th",{className:"text-left p-2 font-black",children:"Comentario"}),i.jsx("th",{className:"text-left p-2 font-black",children:"Acciones"})]})}),i.jsx("tbody",{children:c.map(O=>{if(!(P===O.id))return i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"p-2",children:ir(O.date.toDate(),"yyyy-MM-dd")}),i.jsx("td",{className:"p-2 font-semibold",children:O.sellerName}),i.jsxs("td",{className:"p-2 text-right",children:["$ ",ds(O.amountDelivered)]}),i.jsxs("td",{className:"p-2 text-right",children:[ds(O.commissionPercent),"%"]}),i.jsxs("td",{className:"p-2 text-right",children:["$ ",ds(O.commissionPaid)]}),i.jsxs("td",{className:"p-2 text-right",children:["$ ",ds(O.extraExpenses)]}),i.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",ds(O.totalFinal)]}),i.jsx("td",{className:"p-2",children:O.comment}),i.jsx("td",{className:"p-2",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>F(O),className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Editar"}),i.jsx("button",{onClick:()=>M(O.id),className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold text-red-700 hover:bg-red-50",children:"Eliminar"})]})})]},O.id);const ee=En(S.amountDelivered??O.amountDelivered),ne=En(S.commissionPercent??O.commissionPercent),Q=En(S.extraExpenses??O.extraExpenses),be=nN(ee,ne),Z=aN(ee,be,Q);return i.jsxs("tr",{className:"border-t bg-yellow-50/40",children:[i.jsx("td",{className:"p-2",children:i.jsx("input",{type:"date",value:String(S.dateInput??""),onChange:z=>I(X=>({...X,dateInput:z.target.value})),className:"h-9 px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),i.jsx("td",{className:"p-2",children:i.jsxs("select",{value:String(S.sellerId??O.sellerId),onChange:z=>{const X=z.target.value,ve=l.get(X);I(re=>({...re,sellerId:X,sellerName:(ve==null?void 0:ve.name)??"",commissionPercent:En((ve==null?void 0:ve.commissionPercent)??0)}))},className:"h-9 px-3 rounded-xl border border-gray-200 bg-white outline-none",children:[i.jsx("option",{value:"",children:"Seleccionar..."}),s.map(z=>i.jsxs("option",{value:z.id,children:[z.name," ",z.branch?`(${z.branch})`:""]},z.id))]})}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("input",{type:"number",value:String(ee),onChange:z=>I(X=>({...X,amountDelivered:En(z.target.value)})),className:"h-9 w-32 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("input",{type:"number",value:String(ne),onChange:z=>I(X=>({...X,commissionPercent:En(z.target.value)})),className:"h-9 w-24 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),i.jsxs("td",{className:"p-2 text-right font-semibold",children:["$ ",ds(be)]}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("input",{type:"number",value:String(Q),onChange:z=>I(X=>({...X,extraExpenses:En(z.target.value)})),className:"h-9 w-32 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),i.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",ds(Z)]}),i.jsx("td",{className:"p-2",children:i.jsx("input",{type:"text",value:String(S.comment??O.comment),onChange:z=>I(X=>({...X,comment:z.target.value})),className:"h-9 w-full px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),i.jsx("td",{className:"p-2",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>D(O.id),className:"h-8 px-3 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800",children:"Guardar"}),i.jsx("button",{onClick:V,className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Cancelar"})]})})]},O.id)})})]})}),i.jsxs("div",{className:"md:hidden space-y-3",children:[c.map(O=>i.jsxs("div",{className:"rounded-2xl border border-gray-100 p-3 bg-white",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("div",{className:"font-black text-gray-900",children:O.sellerName}),i.jsx("div",{className:"text-xs font-extrabold bg-gray-100 rounded-full px-3 py-1",children:ir(O.date.toDate(),"yyyy-MM-dd")})]}),i.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Monto entregado"}),i.jsxs("div",{className:"font-extrabold",children:["$ ",ds(O.amountDelivered)]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comisin %"}),i.jsxs("div",{className:"font-semibold",children:[ds(O.commissionPercent),"%"]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comisin pagada"}),i.jsxs("div",{className:"font-semibold",children:["$ ",ds(O.commissionPaid)]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Gastos"}),i.jsxs("div",{className:"font-semibold",children:["$ ",ds(O.extraExpenses)]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Total final"}),i.jsxs("div",{className:"text-base font-black",children:["$ ",ds(O.totalFinal)]})]}),O.comment?i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comentario"}),i.jsx("div",{className:"text-sm text-gray-800",children:O.comment})]}):null]}),i.jsxs("div",{className:"mt-3 flex gap-2",children:[i.jsx("button",{onClick:()=>F(O),className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Editar"}),i.jsx("button",{onClick:()=>M(O.id),className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold text-red-700 hover:bg-red-50",children:"Eliminar"})]})]},O.id)),P?i.jsxs("div",{className:"rounded-2xl border border-yellow-200 bg-yellow-50 p-3",children:[i.jsx("div",{className:"font-black text-gray-900 mb-3",children:"Editando registro"}),i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Fecha"}),i.jsx("input",{type:"date",value:String(S.dateInput??""),onChange:O=>I(K=>({...K,dateInput:O.target.value})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Vendedor"}),i.jsxs("select",{value:String(S.sellerId??""),onChange:O=>{const K=O.target.value,ee=l.get(K);I(ne=>({...ne,sellerId:K,sellerName:(ee==null?void 0:ee.name)??"",commissionPercent:En((ee==null?void 0:ee.commissionPercent)??0)}))},className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white",children:[i.jsx("option",{value:"",children:"Seleccionar..."}),s.map(O=>i.jsxs("option",{value:O.id,children:[O.name," ",O.branch?`(${O.branch})`:""]},O.id))]})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Monto entregado"}),i.jsx("input",{type:"number",value:String(S.amountDelivered??""),onChange:O=>I(K=>({...K,amountDelivered:En(O.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Gastos extras"}),i.jsx("input",{type:"number",value:String(S.extraExpenses??""),onChange:O=>I(K=>({...K,extraExpenses:En(O.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin %"}),i.jsx("input",{type:"number",value:String(S.commissionPercent??""),onChange:O=>I(K=>({...K,commissionPercent:En(O.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comentario"}),i.jsx("input",{type:"text",value:String(S.comment??""),onChange:O=>I(K=>({...K,comment:O.target.value})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>D(P),className:"flex-1 h-10 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800",children:"Guardar"}),i.jsx("button",{onClick:V,className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Cancelar"})]})]})]}):null]})]})]})]})]})}function Vze(){const[e,t]=v.useState(!1);return v.useEffect(()=>{var a;const r=window.matchMedia("(max-width: 900px)"),n=()=>t(r.matches);return n(),(a=r.addEventListener)==null||a.call(r,"change",n),()=>{var s;return(s=r.removeEventListener)==null?void 0:s.call(r,"change",n)}},[]),e}function Hze(){const[e,t]=v.useState(null),[r,n]=v.useState(""),[a,s]=v.useState(""),[o,l]=v.useState(!0),c=Vze(),u=v.useMemo(()=>c?i.jsx(rpe,{role:r}):i.jsx(tpe,{role:r}),[c,r]),d=(e==null?void 0:e.email)||"";if(v.useEffect(()=>{const f=pG(Zm,async h=>{l(!0);try{const m="POSYS_LOGIN_AT";if(h){const g=localStorage.getItem(m),x=g?Number(g):NaN;if(!Number.isFinite(x))localStorage.setItem(m,String(Date.now()));else if(Date.now()-x>1296e6){await NE(Zm),localStorage.removeItem(m),localStorage.removeItem("role"),localStorage.removeItem("user_email"),localStorage.removeItem("user_name"),t(null),n(""),s(""),l(!1);return}}}catch{}if(h){t(h);try{const m=Mt(ke,"users",h.uid),p=await Qi(m);if(p.exists()){const g=p.data(),x=g.role||"",y=g.sellerCandyId||"";n(x||""),s(y||"")}else n(""),s("")}catch{n(""),s("")}}else t(null),n(""),s("");l(!1)});return()=>f()},[]),o)return i.jsx("div",{className:"p-6 text-center",children:"Cargando..."});const A=()=>r==="admin"?i.jsx(Yf,{to:"financialDashboard",replace:!0}):r==="vendedor_pollo"?i.jsx(Yf,{to:"salesV2",replace:!0}):r==="vendedor_ropa"?i.jsx(Yf,{to:"salesClothes",replace:!0}):r==="vendedor_dulces"?i.jsx(Yf,{to:"salesCandies",replace:!0}):i.jsx(Yf,{to:"/",replace:!0});return i.jsx(Mce,{children:i.jsxs(pce,{children:[i.jsx($r,{path:"/",element:i.jsx(epe,{})}),i.jsxs($r,{path:"/admin",element:i.jsx(Yr,{allowedRoles:["admin","vendedor_pollo","vendedor_ropa","vendedor_dulces"],children:u}),children:[i.jsx($r,{index:!0,element:i.jsx(A,{})}),i.jsx($r,{path:"bills",element:i.jsx(Yr,{allowedRoles:["admin","vendedor_pollo"],children:i.jsx(BNe,{})})}),i.jsx($r,{path:"salesV2",element:i.jsx(Yr,{allowedRoles:["admin","vendedor_pollo"],children:i.jsx(J8,{user:e})})}),i.jsx($r,{path:"financialDashboard",element:i.jsx(Yr,{allowedRoles:["admin"],children:i.jsx(eCe,{})})}),i.jsx($r,{path:"expenses",element:i.jsx(Yr,{allowedRoles:["admin"],children:i.jsx(rCe,{})})}),i.jsx($r,{path:"billing",element:i.jsx(Yr,{allowedRoles:["admin"],children:i.jsx(oCe,{})})}),i.jsx($r,{path:"batches",element:i.jsx(Yr,{allowedRoles:["admin","vendedor_pollo"],children:i.jsx(JNe,{role:r})})}),i.jsx($r,{path:"paidBatches",element:i.jsx(Yr,{allowedRoles:["admin"],children:i.jsx(dCe,{})})}),i.jsx($r,{path:"fix",element:i.jsx(Yr,{allowedRoles:["admin"],children:i.jsx(sCe,{})})}),i.jsx($r,{path:"transactionclose",element:i.jsx(Yr,{allowedRoles:["admin"],children:i.jsx(YNe,{})})}),i.jsx($r,{path:"billhistoric",element:i.jsx(Yr,{allowedRoles:["admin"],children:i.jsx(jNe,{})})}),i.jsx($r,{path:"users",element:i.jsx(Yr,{allowedRoles:["admin"],children:i.jsx(PNe,{})})}),i.jsx($r,{path:"products",element:i.jsx(Yr,{allowedRoles:["admin"],children:i.jsx(TNe,{})})}),i.jsx($r,{path:"datacenter",element:i.jsx(Yr,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(U3e,{})})}),i.jsx($r,{path:"productsCandies",element:i.jsx(Yr,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(HFe,{})})}),i.jsx($r,{path:"mainordersCandies",element:i.jsx(Yr,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(C3e,{})})}),i.jsx($r,{path:"inventoryMainOrderCandies",element:i.jsx(Yr,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(_3e,{})})}),i.jsx($r,{path:"inventoryCandies",element:i.jsx(Yr,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(JFe,{})})}),i.jsx($r,{path:"billingsCandies",element:i.jsx(Yr,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(F3e,{})})}),i.jsx($r,{path:"cashDeliveries",element:i.jsx(Yr,{allowedRoles:["admin"],children:i.jsx(Qze,{})})}),i.jsx($r,{path:"customersCandies",element:i.jsx(Yr,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(YFe,{role:r,currentUserEmail:d,sellerCandyId:a})})}),i.jsx($r,{path:"salesCandies",element:i.jsx(Yr,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(a3e,{role:r,currentUserEmail:d,sellerCandyId:a})})}),i.jsx($r,{path:"expensesCandies",element:i.jsx(Yr,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(s3e,{})})}),i.jsx($r,{path:"dashboardCandies",element:i.jsx(Yr,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(f3e,{})})}),i.jsx($r,{path:"transactionCandies",element:i.jsx(Yr,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(c3e,{role:r,currentUserEmail:d,sellerCandyId:a})})}),i.jsx($r,{path:"vendorsCandies",element:i.jsx(Yr,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(m3e,{})})}),i.jsx($r,{path:"productsVendorsCandies",element:i.jsx(Yr,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(b3e,{role:r,currentUserEmail:d,sellerCandyId:a})})}),i.jsx($r,{path:"cierreVentasCandies",element:i.jsx(Yr,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(S3e,{role:r,currentUserEmail:d,sellerCandyId:a})})}),i.jsx($r,{path:"reporteCierresCandies",element:i.jsx(Yr,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(D3e,{role:r,currentUserEmail:d,sellerCandyId:a})})}),i.jsx($r,{path:"consolidatedVendors",element:i.jsx(Yr,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(k3e,{})})}),i.jsx($r,{path:"salesClothes",element:i.jsx(Yr,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(PCe,{})})}),i.jsx($r,{path:"TransactionsReportClothes",element:i.jsx(Yr,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(QCe,{})})}),i.jsx($r,{path:"financialDashboardClothes",element:i.jsx(Yr,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(FCe,{})})}),i.jsx($r,{path:"ExpensesClothes",element:i.jsx(Yr,{allowedRoles:["admin"],children:i.jsx(OCe,{})})}),i.jsx($r,{path:"inventoryClothesBatches",element:i.jsx(Yr,{allowedRoles:["admin"],children:i.jsx(mCe,{})})}),i.jsx($r,{path:"productsClothes",element:i.jsx(Yr,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(ECe,{})})}),i.jsx($r,{path:"CustomersClothes",element:i.jsx(Yr,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(ICe,{})})})]}),i.jsx($r,{path:"/salesV2",element:i.jsx(Yr,{allowedRoles:["admin","vendedor_pollo"],children:i.jsx(J8,{user:e})})}),i.jsx($r,{path:"*",element:i.jsx(Yf,{to:"/"})})]})})}v5.createRoot(document.getElementById("root")).render(i.jsx(Ti.StrictMode,{children:i.jsx(Hze,{})}));export{Rn as _,Kze as c,yA as g};
