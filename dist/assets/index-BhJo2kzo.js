var Bue=Object.defineProperty;var Tue=(t,e,r)=>e in t?Bue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var dr=(t,e,r)=>Tue(t,typeof e!="symbol"?e+"":e,r);function kue(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(t,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var _at=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function oh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cz={exports:{}},BI={},uz={exports:{}},Tn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y2=Symbol.for("react.element"),Fue=Symbol.for("react.portal"),Oue=Symbol.for("react.fragment"),Due=Symbol.for("react.strict_mode"),Rue=Symbol.for("react.profiler"),Mue=Symbol.for("react.provider"),Lue=Symbol.for("react.context"),Uue=Symbol.for("react.forward_ref"),Que=Symbol.for("react.suspense"),Vue=Symbol.for("react.memo"),Hue=Symbol.for("react.lazy"),HM=Symbol.iterator;function $ue(t){return t===null||typeof t!="object"?null:(t=HM&&t[HM]||t["@@iterator"],typeof t=="function"?t:null)}var dz={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fz=Object.assign,Az={};function Lv(t,e,r){this.props=t,this.context=e,this.refs=Az,this.updater=r||dz}Lv.prototype.isReactComponent={};Lv.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Lv.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function hz(){}hz.prototype=Lv.prototype;function LF(t,e,r){this.props=t,this.context=e,this.refs=Az,this.updater=r||dz}var UF=LF.prototype=new hz;UF.constructor=LF;fz(UF,Lv.prototype);UF.isPureReactComponent=!0;var $M=Array.isArray,mz=Object.prototype.hasOwnProperty,QF={current:null},pz={key:!0,ref:!0,__self:!0,__source:!0};function gz(t,e,r){var n,a={},s=null,i=null;if(e!=null)for(n in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(s=""+e.key),e)mz.call(e,n)&&!pz.hasOwnProperty(n)&&(a[n]=e[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:Y2,type:t,key:s,ref:i,props:a,_owner:QF.current}}function Gue(t,e){return{$$typeof:Y2,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function VF(t){return typeof t=="object"&&t!==null&&t.$$typeof===Y2}function Kue(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var GM=/\/+/g;function y3(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Kue(""+t.key):e.toString(36)}function w_(t,e,r,n,a){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case Y2:case Fue:i=!0}}if(i)return i=t,a=a(i),t=n===""?"."+y3(i,0):n,$M(a)?(r="",t!=null&&(r=t.replace(GM,"$&/")+"/"),w_(a,e,r,"",function(u){return u})):a!=null&&(VF(a)&&(a=Gue(a,r+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(GM,"$&/")+"/")+t)),e.push(a)),1;if(i=0,n=n===""?".":n+":",$M(t))for(var l=0;l<t.length;l++){s=t[l];var c=n+y3(s,l);i+=w_(s,e,r,c,a)}else if(c=$ue(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=n+y3(s,l++),i+=w_(s,e,r,c,a);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function wN(t,e,r){if(t==null)return t;var n=[],a=0;return w_(t,n,"","",function(s){return e.call(r,s,a++)}),n}function que(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ac={current:null},N_={transition:null},zue={ReactCurrentDispatcher:ac,ReactCurrentBatchConfig:N_,ReactCurrentOwner:QF};function xz(){throw Error("act(...) is not supported in production builds of React.")}Tn.Children={map:wN,forEach:function(t,e,r){wN(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return wN(t,function(){e++}),e},toArray:function(t){return wN(t,function(e){return e})||[]},only:function(t){if(!VF(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Tn.Component=Lv;Tn.Fragment=Oue;Tn.Profiler=Rue;Tn.PureComponent=LF;Tn.StrictMode=Due;Tn.Suspense=Que;Tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zue;Tn.act=xz;Tn.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=fz({},t.props),a=t.key,s=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,i=QF.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)mz.call(e,c)&&!pz.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Y2,type:t.type,key:a,ref:s,props:n,_owner:i}};Tn.createContext=function(t){return t={$$typeof:Lue,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Mue,_context:t},t.Consumer=t};Tn.createElement=gz;Tn.createFactory=function(t){var e=gz.bind(null,t);return e.type=t,e};Tn.createRef=function(){return{current:null}};Tn.forwardRef=function(t){return{$$typeof:Uue,render:t}};Tn.isValidElement=VF;Tn.lazy=function(t){return{$$typeof:Hue,_payload:{_status:-1,_result:t},_init:que}};Tn.memo=function(t,e){return{$$typeof:Vue,type:t,compare:e===void 0?null:e}};Tn.startTransition=function(t){var e=N_.transition;N_.transition={};try{t()}finally{N_.transition=e}};Tn.unstable_act=xz;Tn.useCallback=function(t,e){return ac.current.useCallback(t,e)};Tn.useContext=function(t){return ac.current.useContext(t)};Tn.useDebugValue=function(){};Tn.useDeferredValue=function(t){return ac.current.useDeferredValue(t)};Tn.useEffect=function(t,e){return ac.current.useEffect(t,e)};Tn.useId=function(){return ac.current.useId()};Tn.useImperativeHandle=function(t,e,r){return ac.current.useImperativeHandle(t,e,r)};Tn.useInsertionEffect=function(t,e){return ac.current.useInsertionEffect(t,e)};Tn.useLayoutEffect=function(t,e){return ac.current.useLayoutEffect(t,e)};Tn.useMemo=function(t,e){return ac.current.useMemo(t,e)};Tn.useReducer=function(t,e,r){return ac.current.useReducer(t,e,r)};Tn.useRef=function(t){return ac.current.useRef(t)};Tn.useState=function(t){return ac.current.useState(t)};Tn.useSyncExternalStore=function(t,e,r){return ac.current.useSyncExternalStore(t,e,r)};Tn.useTransition=function(){return ac.current.useTransition()};Tn.version="18.3.1";uz.exports=Tn;var v=uz.exports;const No=oh(v),Wue=kue({__proto__:null,default:No},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xue=v,Yue=Symbol.for("react.element"),Jue=Symbol.for("react.fragment"),Zue=Object.prototype.hasOwnProperty,ede=Xue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tde={key:!0,ref:!0,__self:!0,__source:!0};function vz(t,e,r){var n,a={},s=null,i=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(i=e.ref);for(n in e)Zue.call(e,n)&&!tde.hasOwnProperty(n)&&(a[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:Yue,type:t,key:s,ref:i,props:a,_owner:ede.current}}BI.Fragment=Jue;BI.jsx=vz;BI.jsxs=vz;cz.exports=BI;var o=cz.exports,sB={},yz={exports:{}},fu={},bz={exports:{}},wz={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ge,ee){var Fe=ge.length;ge.push(ee);e:for(;0<Fe;){var Pe=Fe-1>>>1,F=ge[Pe];if(0<a(F,ee))ge[Pe]=ee,ge[Fe]=F,Fe=Pe;else break e}}function r(ge){return ge.length===0?null:ge[0]}function n(ge){if(ge.length===0)return null;var ee=ge[0],Fe=ge.pop();if(Fe!==ee){ge[0]=Fe;e:for(var Pe=0,F=ge.length,Q=F>>>1;Pe<Q;){var H=2*(Pe+1)-1,R=ge[H],z=H+1,J=ge[z];if(0>a(R,Fe))z<F&&0>a(J,R)?(ge[Pe]=J,ge[z]=Fe,Pe=z):(ge[Pe]=R,ge[H]=Fe,Pe=H);else if(z<F&&0>a(J,Fe))ge[Pe]=J,ge[z]=Fe,Pe=z;else break e}}return ee}function a(ge,ee){var Fe=ge.sortIndex-ee.sortIndex;return Fe!==0?Fe:ge.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var c=[],u=[],d=1,f=null,h=3,A=!1,m=!1,p=!1,g=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(ge){for(var ee=r(u);ee!==null;){if(ee.callback===null)n(u);else if(ee.startTime<=ge)n(u),ee.sortIndex=ee.expirationTime,e(c,ee);else break;ee=r(u)}}function w(ge){if(p=!1,b(ge),!m)if(r(c)!==null)m=!0,de(j);else{var ee=r(u);ee!==null&&fe(w,ee.startTime-ge)}}function j(ge,ee){m=!1,p&&(p=!1,x(S),S=-1),A=!0;var Fe=h;try{for(b(ee),f=r(c);f!==null&&(!(f.expirationTime>ee)||ge&&!P());){var Pe=f.callback;if(typeof Pe=="function"){f.callback=null,h=f.priorityLevel;var F=Pe(f.expirationTime<=ee);ee=t.unstable_now(),typeof F=="function"?f.callback=F:f===r(c)&&n(c),b(ee)}else n(c);f=r(c)}if(f!==null)var Q=!0;else{var H=r(u);H!==null&&fe(w,H.startTime-ee),Q=!1}return Q}finally{f=null,h=Fe,A=!1}}var I=!1,_=null,S=-1,E=5,k=-1;function P(){return!(t.unstable_now()-k<E)}function T(){if(_!==null){var ge=t.unstable_now();k=ge;var ee=!0;try{ee=_(!0,ge)}finally{ee?O():(I=!1,_=null)}}else I=!1}var O;if(typeof y=="function")O=function(){y(T)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,Ae=W.port2;W.port1.onmessage=T,O=function(){Ae.postMessage(null)}}else O=function(){g(T,0)};function de(ge){_=ge,I||(I=!0,O())}function fe(ge,ee){S=g(function(){ge(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ge){ge.callback=null},t.unstable_continueExecution=function(){m||A||(m=!0,de(j))},t.unstable_forceFrameRate=function(ge){0>ge||125<ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<ge?Math.floor(1e3/ge):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(ge){switch(h){case 1:case 2:case 3:var ee=3;break;default:ee=h}var Fe=h;h=ee;try{return ge()}finally{h=Fe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ge,ee){switch(ge){case 1:case 2:case 3:case 4:case 5:break;default:ge=3}var Fe=h;h=ge;try{return ee()}finally{h=Fe}},t.unstable_scheduleCallback=function(ge,ee,Fe){var Pe=t.unstable_now();switch(typeof Fe=="object"&&Fe!==null?(Fe=Fe.delay,Fe=typeof Fe=="number"&&0<Fe?Pe+Fe:Pe):Fe=Pe,ge){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=Fe+F,ge={id:d++,callback:ee,priorityLevel:ge,startTime:Fe,expirationTime:F,sortIndex:-1},Fe>Pe?(ge.sortIndex=Fe,e(u,ge),r(c)===null&&ge===r(u)&&(p?(x(S),S=-1):p=!0,fe(w,Fe-Pe))):(ge.sortIndex=F,e(c,ge),m||A||(m=!0,de(j))),ge},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(ge){var ee=h;return function(){var Fe=h;h=ee;try{return ge.apply(this,arguments)}finally{h=Fe}}}})(wz);bz.exports=wz;var rde=bz.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nde=v,ou=rde;function hr(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Nz=new Set,Pb={};function cg(t,e){lv(t,e),lv(t+"Capture",e)}function lv(t,e){for(Pb[t]=e,t=0;t<e.length;t++)Nz.add(e[t])}var $A=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),iB=Object.prototype.hasOwnProperty,ade=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,KM={},qM={};function sde(t){return iB.call(qM,t)?!0:iB.call(KM,t)?!1:ade.test(t)?qM[t]=!0:(KM[t]=!0,!1)}function ide(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ode(t,e,r,n){if(e===null||typeof e>"u"||ide(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sc(t,e,r,n,a,s,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=i}var al={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){al[t]=new sc(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];al[e]=new sc(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){al[t]=new sc(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){al[t]=new sc(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){al[t]=new sc(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){al[t]=new sc(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){al[t]=new sc(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){al[t]=new sc(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){al[t]=new sc(t,5,!1,t.toLowerCase(),null,!1,!1)});var HF=/[\-:]([a-z])/g;function $F(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(HF,$F);al[e]=new sc(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(HF,$F);al[e]=new sc(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(HF,$F);al[e]=new sc(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){al[t]=new sc(t,1,!1,t.toLowerCase(),null,!1,!1)});al.xlinkHref=new sc("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){al[t]=new sc(t,1,!1,t.toLowerCase(),null,!0,!0)});function GF(t,e,r,n){var a=al.hasOwnProperty(e)?al[e]:null;(a!==null?a.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ode(e,r,a,n)&&(r=null),n||a===null?sde(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(e=a.attributeName,n=a.attributeNamespace,r===null?t.removeAttribute(e):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var lh=nde.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,NN=Symbol.for("react.element"),Cx=Symbol.for("react.portal"),_x=Symbol.for("react.fragment"),KF=Symbol.for("react.strict_mode"),oB=Symbol.for("react.profiler"),Cz=Symbol.for("react.provider"),_z=Symbol.for("react.context"),qF=Symbol.for("react.forward_ref"),lB=Symbol.for("react.suspense"),cB=Symbol.for("react.suspense_list"),zF=Symbol.for("react.memo"),a0=Symbol.for("react.lazy"),Ez=Symbol.for("react.offscreen"),zM=Symbol.iterator;function R1(t){return t===null||typeof t!="object"?null:(t=zM&&t[zM]||t["@@iterator"],typeof t=="function"?t:null)}var Os=Object.assign,b3;function yy(t){if(b3===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);b3=e&&e[1]||""}return`
`+b3+t}var w3=!1;function N3(t,e){if(!t||w3)return"";w3=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),s=n.stack.split(`
`),i=a.length-1,l=s.length-1;1<=i&&0<=l&&a[i]!==s[l];)l--;for(;1<=i&&0<=l;i--,l--)if(a[i]!==s[l]){if(i!==1||l!==1)do if(i--,l--,0>l||a[i]!==s[l]){var c=`
`+a[i].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=i&&0<=l);break}}}finally{w3=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?yy(t):""}function lde(t){switch(t.tag){case 5:return yy(t.type);case 16:return yy("Lazy");case 13:return yy("Suspense");case 19:return yy("SuspenseList");case 0:case 2:case 15:return t=N3(t.type,!1),t;case 11:return t=N3(t.type.render,!1),t;case 1:return t=N3(t.type,!0),t;default:return""}}function uB(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _x:return"Fragment";case Cx:return"Portal";case oB:return"Profiler";case KF:return"StrictMode";case lB:return"Suspense";case cB:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _z:return(t.displayName||"Context")+".Consumer";case Cz:return(t._context.displayName||"Context")+".Provider";case qF:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case zF:return e=t.displayName||null,e!==null?e:uB(t.type)||"Memo";case a0:e=t._payload,t=t._init;try{return uB(t(e))}catch{}}return null}function cde(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return uB(e);case 8:return e===KF?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function z0(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Sz(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ude(t){var e=Sz(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(i){n=""+i,s.call(this,i)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function CN(t){t._valueTracker||(t._valueTracker=ude(t))}function Iz(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Sz(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function dE(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function dB(t,e){var r=e.checked;return Os({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function WM(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=z0(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function jz(t,e){e=e.checked,e!=null&&GF(t,"checked",e,!1)}function fB(t,e){jz(t,e);var r=z0(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?AB(t,e.type,r):e.hasOwnProperty("defaultValue")&&AB(t,e.type,z0(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function XM(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function AB(t,e,r){(e!=="number"||dE(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var by=Array.isArray;function Gx(t,e,r,n){if(t=t.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=e.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&n&&(t[r].defaultSelected=!0)}else{for(r=""+z0(r),e=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function hB(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(hr(91));return Os({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function YM(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(hr(92));if(by(r)){if(1<r.length)throw Error(hr(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:z0(r)}}function Pz(t,e){var r=z0(e.value),n=z0(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function JM(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Bz(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mB(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Bz(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var _N,Tz=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,a){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(_N=_N||document.createElement("div"),_N.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=_N.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Bb(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Ky={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dde=["Webkit","ms","Moz","O"];Object.keys(Ky).forEach(function(t){dde.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ky[e]=Ky[t]})});function kz(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Ky.hasOwnProperty(t)&&Ky[t]?(""+e).trim():e+"px"}function Fz(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=kz(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,a):t[r]=a}}var fde=Os({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pB(t,e){if(e){if(fde[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(hr(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(hr(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(hr(61))}if(e.style!=null&&typeof e.style!="object")throw Error(hr(62))}}function gB(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xB=null;function WF(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vB=null,Kx=null,qx=null;function ZM(t){if(t=ew(t)){if(typeof vB!="function")throw Error(hr(280));var e=t.stateNode;e&&(e=DI(e),vB(t.stateNode,t.type,e))}}function Oz(t){Kx?qx?qx.push(t):qx=[t]:Kx=t}function Dz(){if(Kx){var t=Kx,e=qx;if(qx=Kx=null,ZM(t),e)for(t=0;t<e.length;t++)ZM(e[t])}}function Rz(t,e){return t(e)}function Mz(){}var C3=!1;function Lz(t,e,r){if(C3)return t(e,r);C3=!0;try{return Rz(t,e,r)}finally{C3=!1,(Kx!==null||qx!==null)&&(Mz(),Dz())}}function Tb(t,e){var r=t.stateNode;if(r===null)return null;var n=DI(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(hr(231,e,typeof r));return r}var yB=!1;if($A)try{var M1={};Object.defineProperty(M1,"passive",{get:function(){yB=!0}}),window.addEventListener("test",M1,M1),window.removeEventListener("test",M1,M1)}catch{yB=!1}function Ade(t,e,r,n,a,s,i,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var qy=!1,fE=null,AE=!1,bB=null,hde={onError:function(t){qy=!0,fE=t}};function mde(t,e,r,n,a,s,i,l,c){qy=!1,fE=null,Ade.apply(hde,arguments)}function pde(t,e,r,n,a,s,i,l,c){if(mde.apply(this,arguments),qy){if(qy){var u=fE;qy=!1,fE=null}else throw Error(hr(198));AE||(AE=!0,bB=u)}}function ug(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Uz(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function eL(t){if(ug(t)!==t)throw Error(hr(188))}function gde(t){var e=t.alternate;if(!e){if(e=ug(t),e===null)throw Error(hr(188));return e!==t?null:t}for(var r=t,n=e;;){var a=r.return;if(a===null)break;var s=a.alternate;if(s===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===r)return eL(a),t;if(s===n)return eL(a),e;s=s.sibling}throw Error(hr(188))}if(r.return!==n.return)r=a,n=s;else{for(var i=!1,l=a.child;l;){if(l===r){i=!0,r=a,n=s;break}if(l===n){i=!0,n=a,r=s;break}l=l.sibling}if(!i){for(l=s.child;l;){if(l===r){i=!0,r=s,n=a;break}if(l===n){i=!0,n=s,r=a;break}l=l.sibling}if(!i)throw Error(hr(189))}}if(r.alternate!==n)throw Error(hr(190))}if(r.tag!==3)throw Error(hr(188));return r.stateNode.current===r?t:e}function Qz(t){return t=gde(t),t!==null?Vz(t):null}function Vz(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Vz(t);if(e!==null)return e;t=t.sibling}return null}var Hz=ou.unstable_scheduleCallback,tL=ou.unstable_cancelCallback,xde=ou.unstable_shouldYield,vde=ou.unstable_requestPaint,fi=ou.unstable_now,yde=ou.unstable_getCurrentPriorityLevel,XF=ou.unstable_ImmediatePriority,$z=ou.unstable_UserBlockingPriority,hE=ou.unstable_NormalPriority,bde=ou.unstable_LowPriority,Gz=ou.unstable_IdlePriority,TI=null,kf=null;function wde(t){if(kf&&typeof kf.onCommitFiberRoot=="function")try{kf.onCommitFiberRoot(TI,t,void 0,(t.current.flags&128)===128)}catch{}}var Md=Math.clz32?Math.clz32:_de,Nde=Math.log,Cde=Math.LN2;function _de(t){return t>>>=0,t===0?32:31-(Nde(t)/Cde|0)|0}var EN=64,SN=4194304;function wy(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function mE(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,a=t.suspendedLanes,s=t.pingedLanes,i=r&268435455;if(i!==0){var l=i&~a;l!==0?n=wy(l):(s&=i,s!==0&&(n=wy(s)))}else i=r&~a,i!==0?n=wy(i):s!==0&&(n=wy(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&a)&&(a=n&-n,s=e&-e,a>=s||a===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Md(e),a=1<<r,n|=t[r],e&=~a;return n}function Ede(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sde(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,s=t.pendingLanes;0<s;){var i=31-Md(s),l=1<<i,c=a[i];c===-1?(!(l&r)||l&n)&&(a[i]=Ede(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function wB(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Kz(){var t=EN;return EN<<=1,!(EN&4194240)&&(EN=64),t}function _3(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function J2(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Md(e),t[e]=r}function Ide(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-Md(r),s=1<<a;e[a]=0,n[a]=-1,t[a]=-1,r&=~s}}function YF(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Md(r),a=1<<n;a&e|t[n]&e&&(t[n]|=e),r&=~a}}var Ea=0;function qz(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var zz,JF,Wz,Xz,Yz,NB=!1,IN=[],P0=null,B0=null,T0=null,kb=new Map,Fb=new Map,u0=[],jde="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rL(t,e){switch(t){case"focusin":case"focusout":P0=null;break;case"dragenter":case"dragleave":B0=null;break;case"mouseover":case"mouseout":T0=null;break;case"pointerover":case"pointerout":kb.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fb.delete(e.pointerId)}}function L1(t,e,r,n,a,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[a]},e!==null&&(e=ew(e),e!==null&&JF(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function Pde(t,e,r,n,a){switch(e){case"focusin":return P0=L1(P0,t,e,r,n,a),!0;case"dragenter":return B0=L1(B0,t,e,r,n,a),!0;case"mouseover":return T0=L1(T0,t,e,r,n,a),!0;case"pointerover":var s=a.pointerId;return kb.set(s,L1(kb.get(s)||null,t,e,r,n,a)),!0;case"gotpointercapture":return s=a.pointerId,Fb.set(s,L1(Fb.get(s)||null,t,e,r,n,a)),!0}return!1}function Jz(t){var e=tp(t.target);if(e!==null){var r=ug(e);if(r!==null){if(e=r.tag,e===13){if(e=Uz(r),e!==null){t.blockedOn=e,Yz(t.priority,function(){Wz(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function C_(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=CB(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);xB=n,r.target.dispatchEvent(n),xB=null}else return e=ew(r),e!==null&&JF(e),t.blockedOn=r,!1;e.shift()}return!0}function nL(t,e,r){C_(t)&&r.delete(e)}function Bde(){NB=!1,P0!==null&&C_(P0)&&(P0=null),B0!==null&&C_(B0)&&(B0=null),T0!==null&&C_(T0)&&(T0=null),kb.forEach(nL),Fb.forEach(nL)}function U1(t,e){t.blockedOn===e&&(t.blockedOn=null,NB||(NB=!0,ou.unstable_scheduleCallback(ou.unstable_NormalPriority,Bde)))}function Ob(t){function e(a){return U1(a,t)}if(0<IN.length){U1(IN[0],t);for(var r=1;r<IN.length;r++){var n=IN[r];n.blockedOn===t&&(n.blockedOn=null)}}for(P0!==null&&U1(P0,t),B0!==null&&U1(B0,t),T0!==null&&U1(T0,t),kb.forEach(e),Fb.forEach(e),r=0;r<u0.length;r++)n=u0[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<u0.length&&(r=u0[0],r.blockedOn===null);)Jz(r),r.blockedOn===null&&u0.shift()}var zx=lh.ReactCurrentBatchConfig,pE=!0;function Tde(t,e,r,n){var a=Ea,s=zx.transition;zx.transition=null;try{Ea=1,ZF(t,e,r,n)}finally{Ea=a,zx.transition=s}}function kde(t,e,r,n){var a=Ea,s=zx.transition;zx.transition=null;try{Ea=4,ZF(t,e,r,n)}finally{Ea=a,zx.transition=s}}function ZF(t,e,r,n){if(pE){var a=CB(t,e,r,n);if(a===null)O3(t,e,n,gE,r),rL(t,n);else if(Pde(a,t,e,r,n))n.stopPropagation();else if(rL(t,n),e&4&&-1<jde.indexOf(t)){for(;a!==null;){var s=ew(a);if(s!==null&&zz(s),s=CB(t,e,r,n),s===null&&O3(t,e,n,gE,r),s===a)break;a=s}a!==null&&n.stopPropagation()}else O3(t,e,n,null,r)}}var gE=null;function CB(t,e,r,n){if(gE=null,t=WF(n),t=tp(t),t!==null)if(e=ug(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Uz(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return gE=t,null}function Zz(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yde()){case XF:return 1;case $z:return 4;case hE:case bde:return 16;case Gz:return 536870912;default:return 16}default:return 16}}var y0=null,eO=null,__=null;function eW(){if(__)return __;var t,e=eO,r=e.length,n,a="value"in y0?y0.value:y0.textContent,s=a.length;for(t=0;t<r&&e[t]===a[t];t++);var i=r-t;for(n=1;n<=i&&e[r-n]===a[s-n];n++);return __=a.slice(t,1<n?1-n:void 0)}function E_(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jN(){return!0}function aL(){return!1}function Au(t){function e(r,n,a,s,i){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?jN:aL,this.isPropagationStopped=aL,this}return Os(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=jN)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=jN)},persist:function(){},isPersistent:jN}),e}var Uv={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tO=Au(Uv),Z2=Os({},Uv,{view:0,detail:0}),Fde=Au(Z2),E3,S3,Q1,kI=Os({},Z2,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rO,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Q1&&(Q1&&t.type==="mousemove"?(E3=t.screenX-Q1.screenX,S3=t.screenY-Q1.screenY):S3=E3=0,Q1=t),E3)},movementY:function(t){return"movementY"in t?t.movementY:S3}}),sL=Au(kI),Ode=Os({},kI,{dataTransfer:0}),Dde=Au(Ode),Rde=Os({},Z2,{relatedTarget:0}),I3=Au(Rde),Mde=Os({},Uv,{animationName:0,elapsedTime:0,pseudoElement:0}),Lde=Au(Mde),Ude=Os({},Uv,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Qde=Au(Ude),Vde=Os({},Uv,{data:0}),iL=Au(Vde),Hde={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$de={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gde={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kde(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Gde[t])?!!e[t]:!1}function rO(){return Kde}var qde=Os({},Z2,{key:function(t){if(t.key){var e=Hde[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=E_(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$de[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rO,charCode:function(t){return t.type==="keypress"?E_(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?E_(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zde=Au(qde),Wde=Os({},kI,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oL=Au(Wde),Xde=Os({},Z2,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rO}),Yde=Au(Xde),Jde=Os({},Uv,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zde=Au(Jde),efe=Os({},kI,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tfe=Au(efe),rfe=[9,13,27,32],nO=$A&&"CompositionEvent"in window,zy=null;$A&&"documentMode"in document&&(zy=document.documentMode);var nfe=$A&&"TextEvent"in window&&!zy,tW=$A&&(!nO||zy&&8<zy&&11>=zy),lL=" ",cL=!1;function rW(t,e){switch(t){case"keyup":return rfe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nW(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ex=!1;function afe(t,e){switch(t){case"compositionend":return nW(e);case"keypress":return e.which!==32?null:(cL=!0,lL);case"textInput":return t=e.data,t===lL&&cL?null:t;default:return null}}function sfe(t,e){if(Ex)return t==="compositionend"||!nO&&rW(t,e)?(t=eW(),__=eO=y0=null,Ex=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tW&&e.locale!=="ko"?null:e.data;default:return null}}var ife={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uL(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ife[t.type]:e==="textarea"}function aW(t,e,r,n){Oz(n),e=xE(e,"onChange"),0<e.length&&(r=new tO("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Wy=null,Db=null;function ofe(t){mW(t,0)}function FI(t){var e=jx(t);if(Iz(e))return t}function lfe(t,e){if(t==="change")return e}var sW=!1;if($A){var j3;if($A){var P3="oninput"in document;if(!P3){var dL=document.createElement("div");dL.setAttribute("oninput","return;"),P3=typeof dL.oninput=="function"}j3=P3}else j3=!1;sW=j3&&(!document.documentMode||9<document.documentMode)}function fL(){Wy&&(Wy.detachEvent("onpropertychange",iW),Db=Wy=null)}function iW(t){if(t.propertyName==="value"&&FI(Db)){var e=[];aW(e,Db,t,WF(t)),Lz(ofe,e)}}function cfe(t,e,r){t==="focusin"?(fL(),Wy=e,Db=r,Wy.attachEvent("onpropertychange",iW)):t==="focusout"&&fL()}function ufe(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return FI(Db)}function dfe(t,e){if(t==="click")return FI(e)}function ffe(t,e){if(t==="input"||t==="change")return FI(e)}function Afe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $d=typeof Object.is=="function"?Object.is:Afe;function Rb(t,e){if($d(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!iB.call(e,a)||!$d(t[a],e[a]))return!1}return!0}function AL(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hL(t,e){var r=AL(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=AL(r)}}function oW(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?oW(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function lW(){for(var t=window,e=dE();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=dE(t.document)}return e}function aO(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hfe(t){var e=lW(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&oW(r.ownerDocument.documentElement,r)){if(n!==null&&aO(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,s=Math.min(n.start,a);n=n.end===void 0?s:Math.min(n.end,a),!t.extend&&s>n&&(a=n,n=s,s=a),a=hL(r,s);var i=hL(r,n);a&&i&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mfe=$A&&"documentMode"in document&&11>=document.documentMode,Sx=null,_B=null,Xy=null,EB=!1;function mL(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;EB||Sx==null||Sx!==dE(n)||(n=Sx,"selectionStart"in n&&aO(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Xy&&Rb(Xy,n)||(Xy=n,n=xE(_B,"onSelect"),0<n.length&&(e=new tO("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Sx)))}function PN(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Ix={animationend:PN("Animation","AnimationEnd"),animationiteration:PN("Animation","AnimationIteration"),animationstart:PN("Animation","AnimationStart"),transitionend:PN("Transition","TransitionEnd")},B3={},cW={};$A&&(cW=document.createElement("div").style,"AnimationEvent"in window||(delete Ix.animationend.animation,delete Ix.animationiteration.animation,delete Ix.animationstart.animation),"TransitionEvent"in window||delete Ix.transitionend.transition);function OI(t){if(B3[t])return B3[t];if(!Ix[t])return t;var e=Ix[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in cW)return B3[t]=e[r];return t}var uW=OI("animationend"),dW=OI("animationiteration"),fW=OI("animationstart"),AW=OI("transitionend"),hW=new Map,pL="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fm(t,e){hW.set(t,e),cg(e,[t])}for(var T3=0;T3<pL.length;T3++){var k3=pL[T3],pfe=k3.toLowerCase(),gfe=k3[0].toUpperCase()+k3.slice(1);fm(pfe,"on"+gfe)}fm(uW,"onAnimationEnd");fm(dW,"onAnimationIteration");fm(fW,"onAnimationStart");fm("dblclick","onDoubleClick");fm("focusin","onFocus");fm("focusout","onBlur");fm(AW,"onTransitionEnd");lv("onMouseEnter",["mouseout","mouseover"]);lv("onMouseLeave",["mouseout","mouseover"]);lv("onPointerEnter",["pointerout","pointerover"]);lv("onPointerLeave",["pointerout","pointerover"]);cg("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cg("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cg("onBeforeInput",["compositionend","keypress","textInput","paste"]);cg("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cg("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cg("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ny="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xfe=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ny));function gL(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,pde(n,e,void 0,t),t.currentTarget=null}function mW(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],a=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var i=n.length-1;0<=i;i--){var l=n[i],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&a.isPropagationStopped())break e;gL(a,l,u),s=c}else for(i=0;i<n.length;i++){if(l=n[i],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&a.isPropagationStopped())break e;gL(a,l,u),s=c}}}if(AE)throw t=bB,AE=!1,bB=null,t}function Xa(t,e){var r=e[BB];r===void 0&&(r=e[BB]=new Set);var n=t+"__bubble";r.has(n)||(pW(e,t,2,!1),r.add(n))}function F3(t,e,r){var n=0;e&&(n|=4),pW(r,t,n,e)}var BN="_reactListening"+Math.random().toString(36).slice(2);function Mb(t){if(!t[BN]){t[BN]=!0,Nz.forEach(function(r){r!=="selectionchange"&&(xfe.has(r)||F3(r,!1,t),F3(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[BN]||(e[BN]=!0,F3("selectionchange",!1,e))}}function pW(t,e,r,n){switch(Zz(e)){case 1:var a=Tde;break;case 4:a=kde;break;default:a=ZF}r=a.bind(null,e,r,t),a=void 0,!yB||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(e,r,{capture:!0,passive:a}):t.addEventListener(e,r,!0):a!==void 0?t.addEventListener(e,r,{passive:a}):t.addEventListener(e,r,!1)}function O3(t,e,r,n,a){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;i=i.return}for(;l!==null;){if(i=tp(l),i===null)return;if(c=i.tag,c===5||c===6){n=s=i;continue e}l=l.parentNode}}n=n.return}Lz(function(){var u=s,d=WF(r),f=[];e:{var h=hW.get(t);if(h!==void 0){var A=tO,m=t;switch(t){case"keypress":if(E_(r)===0)break e;case"keydown":case"keyup":A=zde;break;case"focusin":m="focus",A=I3;break;case"focusout":m="blur",A=I3;break;case"beforeblur":case"afterblur":A=I3;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=sL;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=Dde;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=Yde;break;case uW:case dW:case fW:A=Lde;break;case AW:A=Zde;break;case"scroll":A=Fde;break;case"wheel":A=tfe;break;case"copy":case"cut":case"paste":A=Qde;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=oL}var p=(e&4)!==0,g=!p&&t==="scroll",x=p?h!==null?h+"Capture":null:h;p=[];for(var y=u,b;y!==null;){b=y;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,x!==null&&(w=Tb(y,x),w!=null&&p.push(Lb(y,w,b)))),g)break;y=y.return}0<p.length&&(h=new A(h,m,null,r,d),f.push({event:h,listeners:p}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",A=t==="mouseout"||t==="pointerout",h&&r!==xB&&(m=r.relatedTarget||r.fromElement)&&(tp(m)||m[GA]))break e;if((A||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,A?(m=r.relatedTarget||r.toElement,A=u,m=m?tp(m):null,m!==null&&(g=ug(m),m!==g||m.tag!==5&&m.tag!==6)&&(m=null)):(A=null,m=u),A!==m)){if(p=sL,w="onMouseLeave",x="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(p=oL,w="onPointerLeave",x="onPointerEnter",y="pointer"),g=A==null?h:jx(A),b=m==null?h:jx(m),h=new p(w,y+"leave",A,r,d),h.target=g,h.relatedTarget=b,w=null,tp(d)===u&&(p=new p(x,y+"enter",m,r,d),p.target=b,p.relatedTarget=g,w=p),g=w,A&&m)t:{for(p=A,x=m,y=0,b=p;b;b=Rg(b))y++;for(b=0,w=x;w;w=Rg(w))b++;for(;0<y-b;)p=Rg(p),y--;for(;0<b-y;)x=Rg(x),b--;for(;y--;){if(p===x||x!==null&&p===x.alternate)break t;p=Rg(p),x=Rg(x)}p=null}else p=null;A!==null&&xL(f,h,A,p,!1),m!==null&&g!==null&&xL(f,g,m,p,!0)}}e:{if(h=u?jx(u):window,A=h.nodeName&&h.nodeName.toLowerCase(),A==="select"||A==="input"&&h.type==="file")var j=lfe;else if(uL(h))if(sW)j=ffe;else{j=ufe;var I=cfe}else(A=h.nodeName)&&A.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=dfe);if(j&&(j=j(t,u))){aW(f,j,r,d);break e}I&&I(t,h,u),t==="focusout"&&(I=h._wrapperState)&&I.controlled&&h.type==="number"&&AB(h,"number",h.value)}switch(I=u?jx(u):window,t){case"focusin":(uL(I)||I.contentEditable==="true")&&(Sx=I,_B=u,Xy=null);break;case"focusout":Xy=_B=Sx=null;break;case"mousedown":EB=!0;break;case"contextmenu":case"mouseup":case"dragend":EB=!1,mL(f,r,d);break;case"selectionchange":if(mfe)break;case"keydown":case"keyup":mL(f,r,d)}var _;if(nO)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Ex?rW(t,r)&&(S="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(S="onCompositionStart");S&&(tW&&r.locale!=="ko"&&(Ex||S!=="onCompositionStart"?S==="onCompositionEnd"&&Ex&&(_=eW()):(y0=d,eO="value"in y0?y0.value:y0.textContent,Ex=!0)),I=xE(u,S),0<I.length&&(S=new iL(S,t,null,r,d),f.push({event:S,listeners:I}),_?S.data=_:(_=nW(r),_!==null&&(S.data=_)))),(_=nfe?afe(t,r):sfe(t,r))&&(u=xE(u,"onBeforeInput"),0<u.length&&(d=new iL("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=_))}mW(f,e)})}function Lb(t,e,r){return{instance:t,listener:e,currentTarget:r}}function xE(t,e){for(var r=e+"Capture",n=[];t!==null;){var a=t,s=a.stateNode;a.tag===5&&s!==null&&(a=s,s=Tb(t,r),s!=null&&n.unshift(Lb(t,s,a)),s=Tb(t,e),s!=null&&n.push(Lb(t,s,a))),t=t.return}return n}function Rg(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xL(t,e,r,n,a){for(var s=e._reactName,i=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=Tb(r,s),c!=null&&i.unshift(Lb(r,c,l))):a||(c=Tb(r,s),c!=null&&i.push(Lb(r,c,l)))),r=r.return}i.length!==0&&t.push({event:e,listeners:i})}var vfe=/\r\n?/g,yfe=/\u0000|\uFFFD/g;function vL(t){return(typeof t=="string"?t:""+t).replace(vfe,`
`).replace(yfe,"")}function TN(t,e,r){if(e=vL(e),vL(t)!==e&&r)throw Error(hr(425))}function vE(){}var SB=null,IB=null;function jB(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var PB=typeof setTimeout=="function"?setTimeout:void 0,bfe=typeof clearTimeout=="function"?clearTimeout:void 0,yL=typeof Promise=="function"?Promise:void 0,wfe=typeof queueMicrotask=="function"?queueMicrotask:typeof yL<"u"?function(t){return yL.resolve(null).then(t).catch(Nfe)}:PB;function Nfe(t){setTimeout(function(){throw t})}function D3(t,e){var r=e,n=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){t.removeChild(a),Ob(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Ob(e)}function k0(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bL(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Qv=Math.random().toString(36).slice(2),Nf="__reactFiber$"+Qv,Ub="__reactProps$"+Qv,GA="__reactContainer$"+Qv,BB="__reactEvents$"+Qv,Cfe="__reactListeners$"+Qv,_fe="__reactHandles$"+Qv;function tp(t){var e=t[Nf];if(e)return e;for(var r=t.parentNode;r;){if(e=r[GA]||r[Nf]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=bL(t);t!==null;){if(r=t[Nf])return r;t=bL(t)}return e}t=r,r=t.parentNode}return null}function ew(t){return t=t[Nf]||t[GA],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function jx(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(hr(33))}function DI(t){return t[Ub]||null}var TB=[],Px=-1;function Am(t){return{current:t}}function ns(t){0>Px||(t.current=TB[Px],TB[Px]=null,Px--)}function $a(t,e){Px++,TB[Px]=t.current,t.current=e}var W0={},Tl=Am(W0),wc=Am(!1),Bp=W0;function cv(t,e){var r=t.type.contextTypes;if(!r)return W0;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var a={},s;for(s in r)a[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function Nc(t){return t=t.childContextTypes,t!=null}function yE(){ns(wc),ns(Tl)}function wL(t,e,r){if(Tl.current!==W0)throw Error(hr(168));$a(Tl,e),$a(wc,r)}function gW(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in e))throw Error(hr(108,cde(t)||"Unknown",a));return Os({},r,n)}function bE(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||W0,Bp=Tl.current,$a(Tl,t),$a(wc,wc.current),!0}function NL(t,e,r){var n=t.stateNode;if(!n)throw Error(hr(169));r?(t=gW(t,e,Bp),n.__reactInternalMemoizedMergedChildContext=t,ns(wc),ns(Tl),$a(Tl,t)):ns(wc),$a(wc,r)}var vA=null,RI=!1,R3=!1;function xW(t){vA===null?vA=[t]:vA.push(t)}function Efe(t){RI=!0,xW(t)}function hm(){if(!R3&&vA!==null){R3=!0;var t=0,e=Ea;try{var r=vA;for(Ea=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}vA=null,RI=!1}catch(a){throw vA!==null&&(vA=vA.slice(t+1)),Hz(XF,hm),a}finally{Ea=e,R3=!1}}return null}var Bx=[],Tx=0,wE=null,NE=0,Vu=[],Hu=0,Tp=null,CA=1,_A="";function Lm(t,e){Bx[Tx++]=NE,Bx[Tx++]=wE,wE=t,NE=e}function vW(t,e,r){Vu[Hu++]=CA,Vu[Hu++]=_A,Vu[Hu++]=Tp,Tp=t;var n=CA;t=_A;var a=32-Md(n)-1;n&=~(1<<a),r+=1;var s=32-Md(e)+a;if(30<s){var i=a-a%5;s=(n&(1<<i)-1).toString(32),n>>=i,a-=i,CA=1<<32-Md(e)+a|r<<a|n,_A=s+t}else CA=1<<s|r<<a|n,_A=t}function sO(t){t.return!==null&&(Lm(t,1),vW(t,1,0))}function iO(t){for(;t===wE;)wE=Bx[--Tx],Bx[Tx]=null,NE=Bx[--Tx],Bx[Tx]=null;for(;t===Tp;)Tp=Vu[--Hu],Vu[Hu]=null,_A=Vu[--Hu],Vu[Hu]=null,CA=Vu[--Hu],Vu[Hu]=null}var au=null,eu=null,As=!1,Pd=null;function yW(t,e){var r=Gu(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function CL(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,au=t,eu=k0(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,au=t,eu=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Tp!==null?{id:CA,overflow:_A}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Gu(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,au=t,eu=null,!0):!1;default:return!1}}function kB(t){return(t.mode&1)!==0&&(t.flags&128)===0}function FB(t){if(As){var e=eu;if(e){var r=e;if(!CL(t,e)){if(kB(t))throw Error(hr(418));e=k0(r.nextSibling);var n=au;e&&CL(t,e)?yW(n,r):(t.flags=t.flags&-4097|2,As=!1,au=t)}}else{if(kB(t))throw Error(hr(418));t.flags=t.flags&-4097|2,As=!1,au=t}}}function _L(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;au=t}function kN(t){if(t!==au)return!1;if(!As)return _L(t),As=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!jB(t.type,t.memoizedProps)),e&&(e=eu)){if(kB(t))throw bW(),Error(hr(418));for(;e;)yW(t,e),e=k0(e.nextSibling)}if(_L(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(hr(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){eu=k0(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}eu=null}}else eu=au?k0(t.stateNode.nextSibling):null;return!0}function bW(){for(var t=eu;t;)t=k0(t.nextSibling)}function uv(){eu=au=null,As=!1}function oO(t){Pd===null?Pd=[t]:Pd.push(t)}var Sfe=lh.ReactCurrentBatchConfig;function V1(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(hr(309));var n=r.stateNode}if(!n)throw Error(hr(147,t));var a=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(i){var l=a.refs;i===null?delete l[s]:l[s]=i},e._stringRef=s,e)}if(typeof t!="string")throw Error(hr(284));if(!r._owner)throw Error(hr(290,t))}return t}function FN(t,e){throw t=Object.prototype.toString.call(e),Error(hr(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function EL(t){var e=t._init;return e(t._payload)}function wW(t){function e(x,y){if(t){var b=x.deletions;b===null?(x.deletions=[y],x.flags|=16):b.push(y)}}function r(x,y){if(!t)return null;for(;y!==null;)e(x,y),y=y.sibling;return null}function n(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function a(x,y){return x=R0(x,y),x.index=0,x.sibling=null,x}function s(x,y,b){return x.index=b,t?(b=x.alternate,b!==null?(b=b.index,b<y?(x.flags|=2,y):b):(x.flags|=2,y)):(x.flags|=1048576,y)}function i(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,y,b,w){return y===null||y.tag!==6?(y=$3(b,x.mode,w),y.return=x,y):(y=a(y,b),y.return=x,y)}function c(x,y,b,w){var j=b.type;return j===_x?d(x,y,b.props.children,w,b.key):y!==null&&(y.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===a0&&EL(j)===y.type)?(w=a(y,b.props),w.ref=V1(x,y,b),w.return=x,w):(w=k_(b.type,b.key,b.props,null,x.mode,w),w.ref=V1(x,y,b),w.return=x,w)}function u(x,y,b,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=G3(b,x.mode,w),y.return=x,y):(y=a(y,b.children||[]),y.return=x,y)}function d(x,y,b,w,j){return y===null||y.tag!==7?(y=hp(b,x.mode,w,j),y.return=x,y):(y=a(y,b),y.return=x,y)}function f(x,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=$3(""+y,x.mode,b),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case NN:return b=k_(y.type,y.key,y.props,null,x.mode,b),b.ref=V1(x,null,y),b.return=x,b;case Cx:return y=G3(y,x.mode,b),y.return=x,y;case a0:var w=y._init;return f(x,w(y._payload),b)}if(by(y)||R1(y))return y=hp(y,x.mode,b,null),y.return=x,y;FN(x,y)}return null}function h(x,y,b,w){var j=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return j!==null?null:l(x,y,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case NN:return b.key===j?c(x,y,b,w):null;case Cx:return b.key===j?u(x,y,b,w):null;case a0:return j=b._init,h(x,y,j(b._payload),w)}if(by(b)||R1(b))return j!==null?null:d(x,y,b,w,null);FN(x,b)}return null}function A(x,y,b,w,j){if(typeof w=="string"&&w!==""||typeof w=="number")return x=x.get(b)||null,l(y,x,""+w,j);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case NN:return x=x.get(w.key===null?b:w.key)||null,c(y,x,w,j);case Cx:return x=x.get(w.key===null?b:w.key)||null,u(y,x,w,j);case a0:var I=w._init;return A(x,y,b,I(w._payload),j)}if(by(w)||R1(w))return x=x.get(b)||null,d(y,x,w,j,null);FN(y,w)}return null}function m(x,y,b,w){for(var j=null,I=null,_=y,S=y=0,E=null;_!==null&&S<b.length;S++){_.index>S?(E=_,_=null):E=_.sibling;var k=h(x,_,b[S],w);if(k===null){_===null&&(_=E);break}t&&_&&k.alternate===null&&e(x,_),y=s(k,y,S),I===null?j=k:I.sibling=k,I=k,_=E}if(S===b.length)return r(x,_),As&&Lm(x,S),j;if(_===null){for(;S<b.length;S++)_=f(x,b[S],w),_!==null&&(y=s(_,y,S),I===null?j=_:I.sibling=_,I=_);return As&&Lm(x,S),j}for(_=n(x,_);S<b.length;S++)E=A(_,x,S,b[S],w),E!==null&&(t&&E.alternate!==null&&_.delete(E.key===null?S:E.key),y=s(E,y,S),I===null?j=E:I.sibling=E,I=E);return t&&_.forEach(function(P){return e(x,P)}),As&&Lm(x,S),j}function p(x,y,b,w){var j=R1(b);if(typeof j!="function")throw Error(hr(150));if(b=j.call(b),b==null)throw Error(hr(151));for(var I=j=null,_=y,S=y=0,E=null,k=b.next();_!==null&&!k.done;S++,k=b.next()){_.index>S?(E=_,_=null):E=_.sibling;var P=h(x,_,k.value,w);if(P===null){_===null&&(_=E);break}t&&_&&P.alternate===null&&e(x,_),y=s(P,y,S),I===null?j=P:I.sibling=P,I=P,_=E}if(k.done)return r(x,_),As&&Lm(x,S),j;if(_===null){for(;!k.done;S++,k=b.next())k=f(x,k.value,w),k!==null&&(y=s(k,y,S),I===null?j=k:I.sibling=k,I=k);return As&&Lm(x,S),j}for(_=n(x,_);!k.done;S++,k=b.next())k=A(_,x,S,k.value,w),k!==null&&(t&&k.alternate!==null&&_.delete(k.key===null?S:k.key),y=s(k,y,S),I===null?j=k:I.sibling=k,I=k);return t&&_.forEach(function(T){return e(x,T)}),As&&Lm(x,S),j}function g(x,y,b,w){if(typeof b=="object"&&b!==null&&b.type===_x&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case NN:e:{for(var j=b.key,I=y;I!==null;){if(I.key===j){if(j=b.type,j===_x){if(I.tag===7){r(x,I.sibling),y=a(I,b.props.children),y.return=x,x=y;break e}}else if(I.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===a0&&EL(j)===I.type){r(x,I.sibling),y=a(I,b.props),y.ref=V1(x,I,b),y.return=x,x=y;break e}r(x,I);break}else e(x,I);I=I.sibling}b.type===_x?(y=hp(b.props.children,x.mode,w,b.key),y.return=x,x=y):(w=k_(b.type,b.key,b.props,null,x.mode,w),w.ref=V1(x,y,b),w.return=x,x=w)}return i(x);case Cx:e:{for(I=b.key;y!==null;){if(y.key===I)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){r(x,y.sibling),y=a(y,b.children||[]),y.return=x,x=y;break e}else{r(x,y);break}else e(x,y);y=y.sibling}y=G3(b,x.mode,w),y.return=x,x=y}return i(x);case a0:return I=b._init,g(x,y,I(b._payload),w)}if(by(b))return m(x,y,b,w);if(R1(b))return p(x,y,b,w);FN(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(r(x,y.sibling),y=a(y,b),y.return=x,x=y):(r(x,y),y=$3(b,x.mode,w),y.return=x,x=y),i(x)):r(x,y)}return g}var dv=wW(!0),NW=wW(!1),CE=Am(null),_E=null,kx=null,lO=null;function cO(){lO=kx=_E=null}function uO(t){var e=CE.current;ns(CE),t._currentValue=e}function OB(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Wx(t,e){_E=t,lO=kx=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(vc=!0),t.firstContext=null)}function td(t){var e=t._currentValue;if(lO!==t)if(t={context:t,memoizedValue:e,next:null},kx===null){if(_E===null)throw Error(hr(308));kx=t,_E.dependencies={lanes:0,firstContext:t}}else kx=kx.next=t;return e}var rp=null;function dO(t){rp===null?rp=[t]:rp.push(t)}function CW(t,e,r,n){var a=e.interleaved;return a===null?(r.next=r,dO(e)):(r.next=a.next,a.next=r),e.interleaved=r,KA(t,n)}function KA(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var s0=!1;function fO(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _W(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function kA(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function F0(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,qn&2){var a=n.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),n.pending=e,KA(t,r)}return a=n.interleaved,a===null?(e.next=e,dO(n)):(e.next=a.next,a.next=e),n.interleaved=e,KA(t,r)}function S_(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,YF(t,r)}}function SL(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?a=s=i:s=s.next=i,r=r.next}while(r!==null);s===null?a=s=e:s=s.next=e}else a=s=e;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function EE(t,e,r,n){var a=t.updateQueue;s0=!1;var s=a.firstBaseUpdate,i=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,i===null?s=u:i.next=u,i=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==i&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(s!==null){var f=a.baseState;i=0,d=u=c=null,l=s;do{var h=l.lane,A=l.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:A,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=t,p=l;switch(h=e,A=r,p.tag){case 1:if(m=p.payload,typeof m=="function"){f=m.call(A,f,h);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=p.payload,h=typeof m=="function"?m.call(A,f,h):m,h==null)break e;f=Os({},f,h);break e;case 2:s0=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else A={eventTime:A,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=A,c=f):d=d.next=A,i|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,e=a.shared.interleaved,e!==null){a=e;do i|=a.lane,a=a.next;while(a!==e)}else s===null&&(a.shared.lanes=0);Fp|=i,t.lanes=i,t.memoizedState=f}}function IL(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(hr(191,a));a.call(n)}}}var tw={},Ff=Am(tw),Qb=Am(tw),Vb=Am(tw);function np(t){if(t===tw)throw Error(hr(174));return t}function AO(t,e){switch($a(Vb,e),$a(Qb,t),$a(Ff,tw),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mB(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=mB(e,t)}ns(Ff),$a(Ff,e)}function fv(){ns(Ff),ns(Qb),ns(Vb)}function EW(t){np(Vb.current);var e=np(Ff.current),r=mB(e,t.type);e!==r&&($a(Qb,t),$a(Ff,r))}function hO(t){Qb.current===t&&(ns(Ff),ns(Qb))}var Ps=Am(0);function SE(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var M3=[];function mO(){for(var t=0;t<M3.length;t++)M3[t]._workInProgressVersionPrimary=null;M3.length=0}var I_=lh.ReactCurrentDispatcher,L3=lh.ReactCurrentBatchConfig,kp=0,Fs=null,Gi=null,wo=null,IE=!1,Yy=!1,Hb=0,Ife=0;function cl(){throw Error(hr(321))}function pO(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!$d(t[r],e[r]))return!1;return!0}function gO(t,e,r,n,a,s){if(kp=s,Fs=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,I_.current=t===null||t.memoizedState===null?Tfe:kfe,t=r(n,a),Yy){s=0;do{if(Yy=!1,Hb=0,25<=s)throw Error(hr(301));s+=1,wo=Gi=null,e.updateQueue=null,I_.current=Ffe,t=r(n,a)}while(Yy)}if(I_.current=jE,e=Gi!==null&&Gi.next!==null,kp=0,wo=Gi=Fs=null,IE=!1,e)throw Error(hr(300));return t}function xO(){var t=Hb!==0;return Hb=0,t}function wf(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wo===null?Fs.memoizedState=wo=t:wo=wo.next=t,wo}function rd(){if(Gi===null){var t=Fs.alternate;t=t!==null?t.memoizedState:null}else t=Gi.next;var e=wo===null?Fs.memoizedState:wo.next;if(e!==null)wo=e,Gi=t;else{if(t===null)throw Error(hr(310));Gi=t,t={memoizedState:Gi.memoizedState,baseState:Gi.baseState,baseQueue:Gi.baseQueue,queue:Gi.queue,next:null},wo===null?Fs.memoizedState=wo=t:wo=wo.next=t}return wo}function $b(t,e){return typeof e=="function"?e(t):e}function U3(t){var e=rd(),r=e.queue;if(r===null)throw Error(hr(311));r.lastRenderedReducer=t;var n=Gi,a=n.baseQueue,s=r.pending;if(s!==null){if(a!==null){var i=a.next;a.next=s.next,s.next=i}n.baseQueue=a=s,r.pending=null}if(a!==null){s=a.next,n=n.baseState;var l=i=null,c=null,u=s;do{var d=u.lane;if((kp&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,i=n):c=c.next=f,Fs.lanes|=d,Fp|=d}u=u.next}while(u!==null&&u!==s);c===null?i=n:c.next=l,$d(n,e.memoizedState)||(vc=!0),e.memoizedState=n,e.baseState=i,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){a=t;do s=a.lane,Fs.lanes|=s,Fp|=s,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Q3(t){var e=rd(),r=e.queue;if(r===null)throw Error(hr(311));r.lastRenderedReducer=t;var n=r.dispatch,a=r.pending,s=e.memoizedState;if(a!==null){r.pending=null;var i=a=a.next;do s=t(s,i.action),i=i.next;while(i!==a);$d(s,e.memoizedState)||(vc=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function SW(){}function IW(t,e){var r=Fs,n=rd(),a=e(),s=!$d(n.memoizedState,a);if(s&&(n.memoizedState=a,vc=!0),n=n.queue,vO(BW.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||wo!==null&&wo.memoizedState.tag&1){if(r.flags|=2048,Gb(9,PW.bind(null,r,n,a,e),void 0,null),So===null)throw Error(hr(349));kp&30||jW(r,e,a)}return a}function jW(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Fs.updateQueue,e===null?(e={lastEffect:null,stores:null},Fs.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function PW(t,e,r,n){e.value=r,e.getSnapshot=n,TW(e)&&kW(t)}function BW(t,e,r){return r(function(){TW(e)&&kW(t)})}function TW(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!$d(t,r)}catch{return!0}}function kW(t){var e=KA(t,1);e!==null&&Ld(e,t,1,-1)}function jL(t){var e=wf();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$b,lastRenderedState:t},e.queue=t,t=t.dispatch=Bfe.bind(null,Fs,t),[e.memoizedState,t]}function Gb(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Fs.updateQueue,e===null?(e={lastEffect:null,stores:null},Fs.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function FW(){return rd().memoizedState}function j_(t,e,r,n){var a=wf();Fs.flags|=t,a.memoizedState=Gb(1|e,r,void 0,n===void 0?null:n)}function MI(t,e,r,n){var a=rd();n=n===void 0?null:n;var s=void 0;if(Gi!==null){var i=Gi.memoizedState;if(s=i.destroy,n!==null&&pO(n,i.deps)){a.memoizedState=Gb(e,r,s,n);return}}Fs.flags|=t,a.memoizedState=Gb(1|e,r,s,n)}function PL(t,e){return j_(8390656,8,t,e)}function vO(t,e){return MI(2048,8,t,e)}function OW(t,e){return MI(4,2,t,e)}function DW(t,e){return MI(4,4,t,e)}function RW(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function MW(t,e,r){return r=r!=null?r.concat([t]):null,MI(4,4,RW.bind(null,e,t),r)}function yO(){}function LW(t,e){var r=rd();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&pO(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function UW(t,e){var r=rd();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&pO(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function QW(t,e,r){return kp&21?($d(r,e)||(r=Kz(),Fs.lanes|=r,Fp|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,vc=!0),t.memoizedState=r)}function jfe(t,e){var r=Ea;Ea=r!==0&&4>r?r:4,t(!0);var n=L3.transition;L3.transition={};try{t(!1),e()}finally{Ea=r,L3.transition=n}}function VW(){return rd().memoizedState}function Pfe(t,e,r){var n=D0(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},HW(t))$W(e,r);else if(r=CW(t,e,r,n),r!==null){var a=Zl();Ld(r,t,n,a),GW(r,e,n)}}function Bfe(t,e,r){var n=D0(t),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(HW(t))$W(e,a);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var i=e.lastRenderedState,l=s(i,r);if(a.hasEagerState=!0,a.eagerState=l,$d(l,i)){var c=e.interleaved;c===null?(a.next=a,dO(e)):(a.next=c.next,c.next=a),e.interleaved=a;return}}catch{}finally{}r=CW(t,e,a,n),r!==null&&(a=Zl(),Ld(r,t,n,a),GW(r,e,n))}}function HW(t){var e=t.alternate;return t===Fs||e!==null&&e===Fs}function $W(t,e){Yy=IE=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function GW(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,YF(t,r)}}var jE={readContext:td,useCallback:cl,useContext:cl,useEffect:cl,useImperativeHandle:cl,useInsertionEffect:cl,useLayoutEffect:cl,useMemo:cl,useReducer:cl,useRef:cl,useState:cl,useDebugValue:cl,useDeferredValue:cl,useTransition:cl,useMutableSource:cl,useSyncExternalStore:cl,useId:cl,unstable_isNewReconciler:!1},Tfe={readContext:td,useCallback:function(t,e){return wf().memoizedState=[t,e===void 0?null:e],t},useContext:td,useEffect:PL,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,j_(4194308,4,RW.bind(null,e,t),r)},useLayoutEffect:function(t,e){return j_(4194308,4,t,e)},useInsertionEffect:function(t,e){return j_(4,2,t,e)},useMemo:function(t,e){var r=wf();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=wf();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Pfe.bind(null,Fs,t),[n.memoizedState,t]},useRef:function(t){var e=wf();return t={current:t},e.memoizedState=t},useState:jL,useDebugValue:yO,useDeferredValue:function(t){return wf().memoizedState=t},useTransition:function(){var t=jL(!1),e=t[0];return t=jfe.bind(null,t[1]),wf().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Fs,a=wf();if(As){if(r===void 0)throw Error(hr(407));r=r()}else{if(r=e(),So===null)throw Error(hr(349));kp&30||jW(n,e,r)}a.memoizedState=r;var s={value:r,getSnapshot:e};return a.queue=s,PL(BW.bind(null,n,s,t),[t]),n.flags|=2048,Gb(9,PW.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=wf(),e=So.identifierPrefix;if(As){var r=_A,n=CA;r=(n&~(1<<32-Md(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Hb++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Ife++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},kfe={readContext:td,useCallback:LW,useContext:td,useEffect:vO,useImperativeHandle:MW,useInsertionEffect:OW,useLayoutEffect:DW,useMemo:UW,useReducer:U3,useRef:FW,useState:function(){return U3($b)},useDebugValue:yO,useDeferredValue:function(t){var e=rd();return QW(e,Gi.memoizedState,t)},useTransition:function(){var t=U3($b)[0],e=rd().memoizedState;return[t,e]},useMutableSource:SW,useSyncExternalStore:IW,useId:VW,unstable_isNewReconciler:!1},Ffe={readContext:td,useCallback:LW,useContext:td,useEffect:vO,useImperativeHandle:MW,useInsertionEffect:OW,useLayoutEffect:DW,useMemo:UW,useReducer:Q3,useRef:FW,useState:function(){return Q3($b)},useDebugValue:yO,useDeferredValue:function(t){var e=rd();return Gi===null?e.memoizedState=t:QW(e,Gi.memoizedState,t)},useTransition:function(){var t=Q3($b)[0],e=rd().memoizedState;return[t,e]},useMutableSource:SW,useSyncExternalStore:IW,useId:VW,unstable_isNewReconciler:!1};function Id(t,e){if(t&&t.defaultProps){e=Os({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function DB(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Os({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var LI={isMounted:function(t){return(t=t._reactInternals)?ug(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Zl(),a=D0(t),s=kA(n,a);s.payload=e,r!=null&&(s.callback=r),e=F0(t,s,a),e!==null&&(Ld(e,t,a,n),S_(e,t,a))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Zl(),a=D0(t),s=kA(n,a);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=F0(t,s,a),e!==null&&(Ld(e,t,a,n),S_(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Zl(),n=D0(t),a=kA(r,n);a.tag=2,e!=null&&(a.callback=e),e=F0(t,a,n),e!==null&&(Ld(e,t,n,r),S_(e,t,n))}};function BL(t,e,r,n,a,s,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,i):e.prototype&&e.prototype.isPureReactComponent?!Rb(r,n)||!Rb(a,s):!0}function KW(t,e,r){var n=!1,a=W0,s=e.contextType;return typeof s=="object"&&s!==null?s=td(s):(a=Nc(e)?Bp:Tl.current,n=e.contextTypes,s=(n=n!=null)?cv(t,a):W0),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=LI,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=s),e}function TL(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&LI.enqueueReplaceState(e,e.state,null)}function RB(t,e,r,n){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},fO(t);var s=e.contextType;typeof s=="object"&&s!==null?a.context=td(s):(s=Nc(e)?Bp:Tl.current,a.context=cv(t,s)),a.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(DB(t,e,s,r),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&LI.enqueueReplaceState(a,a.state,null),EE(t,r,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function Av(t,e){try{var r="",n=e;do r+=lde(n),n=n.return;while(n);var a=r}catch(s){a=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:a,digest:null}}function V3(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function MB(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Ofe=typeof WeakMap=="function"?WeakMap:Map;function qW(t,e,r){r=kA(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){BE||(BE=!0,zB=n),MB(t,e)},r}function zW(t,e,r){r=kA(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=e.value;r.payload=function(){return n(a)},r.callback=function(){MB(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){MB(t,e),typeof n!="function"&&(O0===null?O0=new Set([this]):O0.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),r}function kL(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Ofe;var a=new Set;n.set(e,a)}else a=n.get(e),a===void 0&&(a=new Set,n.set(e,a));a.has(r)||(a.add(r),t=Wfe.bind(null,t,e,r),e.then(t,t))}function FL(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function OL(t,e,r,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=kA(-1,1),e.tag=2,F0(r,e,1))),r.lanes|=1),t)}var Dfe=lh.ReactCurrentOwner,vc=!1;function ql(t,e,r,n){e.child=t===null?NW(e,null,r,n):dv(e,t.child,r,n)}function DL(t,e,r,n,a){r=r.render;var s=e.ref;return Wx(e,a),n=gO(t,e,r,n,s,a),r=xO(),t!==null&&!vc?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,qA(t,e,a)):(As&&r&&sO(e),e.flags|=1,ql(t,e,n,a),e.child)}function RL(t,e,r,n,a){if(t===null){var s=r.type;return typeof s=="function"&&!IO(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,WW(t,e,s,n,a)):(t=k_(r.type,null,n,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&a)){var i=s.memoizedProps;if(r=r.compare,r=r!==null?r:Rb,r(i,n)&&t.ref===e.ref)return qA(t,e,a)}return e.flags|=1,t=R0(s,n),t.ref=e.ref,t.return=e,e.child=t}function WW(t,e,r,n,a){if(t!==null){var s=t.memoizedProps;if(Rb(s,n)&&t.ref===e.ref)if(vc=!1,e.pendingProps=n=s,(t.lanes&a)!==0)t.flags&131072&&(vc=!0);else return e.lanes=t.lanes,qA(t,e,a)}return LB(t,e,r,n,a)}function XW(t,e,r){var n=e.pendingProps,a=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$a(Ox,qc),qc|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$a(Ox,qc),qc|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,$a(Ox,qc),qc|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,$a(Ox,qc),qc|=n;return ql(t,e,a,r),e.child}function YW(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function LB(t,e,r,n,a){var s=Nc(r)?Bp:Tl.current;return s=cv(e,s),Wx(e,a),r=gO(t,e,r,n,s,a),n=xO(),t!==null&&!vc?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,qA(t,e,a)):(As&&n&&sO(e),e.flags|=1,ql(t,e,r,a),e.child)}function ML(t,e,r,n,a){if(Nc(r)){var s=!0;bE(e)}else s=!1;if(Wx(e,a),e.stateNode===null)P_(t,e),KW(e,r,n),RB(e,r,n,a),n=!0;else if(t===null){var i=e.stateNode,l=e.memoizedProps;i.props=l;var c=i.context,u=r.contextType;typeof u=="object"&&u!==null?u=td(u):(u=Nc(r)?Bp:Tl.current,u=cv(e,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==n||c!==u)&&TL(e,i,n,u),s0=!1;var h=e.memoizedState;i.state=h,EE(e,n,i,a),c=e.memoizedState,l!==n||h!==c||wc.current||s0?(typeof d=="function"&&(DB(e,r,d,n),c=e.memoizedState),(l=s0||BL(e,r,l,n,h,c,u))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),i.props=n,i.state=c,i.context=u,n=l):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{i=e.stateNode,_W(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Id(e.type,l),i.props=u,f=e.pendingProps,h=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=td(c):(c=Nc(r)?Bp:Tl.current,c=cv(e,c));var A=r.getDerivedStateFromProps;(d=typeof A=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==f||h!==c)&&TL(e,i,n,c),s0=!1,h=e.memoizedState,i.state=h,EE(e,n,i,a);var m=e.memoizedState;l!==f||h!==m||wc.current||s0?(typeof A=="function"&&(DB(e,r,A,n),m=e.memoizedState),(u=s0||BL(e,r,u,n,h,m,c)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,m,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,m,c)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),i.props=n,i.state=m,i.context=c,n=u):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return UB(t,e,r,n,s,a)}function UB(t,e,r,n,a,s){YW(t,e);var i=(e.flags&128)!==0;if(!n&&!i)return a&&NL(e,r,!1),qA(t,e,s);n=e.stateNode,Dfe.current=e;var l=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&i?(e.child=dv(e,t.child,null,s),e.child=dv(e,null,l,s)):ql(t,e,l,s),e.memoizedState=n.state,a&&NL(e,r,!0),e.child}function JW(t){var e=t.stateNode;e.pendingContext?wL(t,e.pendingContext,e.pendingContext!==e.context):e.context&&wL(t,e.context,!1),AO(t,e.containerInfo)}function LL(t,e,r,n,a){return uv(),oO(a),e.flags|=256,ql(t,e,r,n),e.child}var QB={dehydrated:null,treeContext:null,retryLane:0};function VB(t){return{baseLanes:t,cachePool:null,transitions:null}}function ZW(t,e,r){var n=e.pendingProps,a=Ps.current,s=!1,i=(e.flags&128)!==0,l;if((l=i)||(l=t!==null&&t.memoizedState===null?!1:(a&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),$a(Ps,a&1),t===null)return FB(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=n.children,t=n.fallback,s?(n=e.mode,s=e.child,i={mode:"hidden",children:i},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=VI(i,n,0,null),t=hp(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=VB(r),e.memoizedState=QB,t):bO(e,i));if(a=t.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return Rfe(t,e,i,n,l,a,r);if(s){s=n.fallback,i=e.mode,a=t.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&e.child!==a?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=R0(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?s=R0(l,s):(s=hp(s,i,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,i=t.child.memoizedState,i=i===null?VB(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=t.childLanes&~r,e.memoizedState=QB,n}return s=t.child,t=s.sibling,n=R0(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function bO(t,e){return e=VI({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ON(t,e,r,n){return n!==null&&oO(n),dv(e,t.child,null,r),t=bO(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Rfe(t,e,r,n,a,s,i){if(r)return e.flags&256?(e.flags&=-257,n=V3(Error(hr(422))),ON(t,e,i,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,a=e.mode,n=VI({mode:"visible",children:n.children},a,0,null),s=hp(s,a,i,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&dv(e,t.child,null,i),e.child.memoizedState=VB(i),e.memoizedState=QB,s);if(!(e.mode&1))return ON(t,e,i,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,s=Error(hr(419)),n=V3(s,n,void 0),ON(t,e,i,n)}if(l=(i&t.childLanes)!==0,vc||l){if(n=So,n!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|i)?0:a,a!==0&&a!==s.retryLane&&(s.retryLane=a,KA(t,a),Ld(n,t,a,-1))}return SO(),n=V3(Error(hr(421))),ON(t,e,i,n)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=Xfe.bind(null,t),a._reactRetry=e,null):(t=s.treeContext,eu=k0(a.nextSibling),au=e,As=!0,Pd=null,t!==null&&(Vu[Hu++]=CA,Vu[Hu++]=_A,Vu[Hu++]=Tp,CA=t.id,_A=t.overflow,Tp=e),e=bO(e,n.children),e.flags|=4096,e)}function UL(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),OB(t.return,e,r)}function H3(t,e,r,n,a){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=a)}function eX(t,e,r){var n=e.pendingProps,a=n.revealOrder,s=n.tail;if(ql(t,e,n.children,r),n=Ps.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&UL(t,r,e);else if(t.tag===19)UL(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if($a(Ps,n),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(r=e.child,a=null;r!==null;)t=r.alternate,t!==null&&SE(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),H3(e,!1,a,r,s);break;case"backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&SE(t)===null){e.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}H3(e,!0,r,null,s);break;case"together":H3(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function P_(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function qA(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Fp|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(hr(153));if(e.child!==null){for(t=e.child,r=R0(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=R0(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Mfe(t,e,r){switch(e.tag){case 3:JW(e),uv();break;case 5:EW(e);break;case 1:Nc(e.type)&&bE(e);break;case 4:AO(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,a=e.memoizedProps.value;$a(CE,n._currentValue),n._currentValue=a;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?($a(Ps,Ps.current&1),e.flags|=128,null):r&e.child.childLanes?ZW(t,e,r):($a(Ps,Ps.current&1),t=qA(t,e,r),t!==null?t.sibling:null);$a(Ps,Ps.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return eX(t,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),$a(Ps,Ps.current),n)break;return null;case 22:case 23:return e.lanes=0,XW(t,e,r)}return qA(t,e,r)}var tX,HB,rX,nX;tX=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};HB=function(){};rX=function(t,e,r,n){var a=t.memoizedProps;if(a!==n){t=e.stateNode,np(Ff.current);var s=null;switch(r){case"input":a=dB(t,a),n=dB(t,n),s=[];break;case"select":a=Os({},a,{value:void 0}),n=Os({},n,{value:void 0}),s=[];break;case"textarea":a=hB(t,a),n=hB(t,n),s=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=vE)}pB(r,n);var i;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Pb.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var c=n[u];if(l=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(s||(s=[]),s.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Pb.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Xa("scroll",t),s||l===c||(s=[])):(s=s||[]).push(u,c))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};nX=function(t,e,r,n){r!==n&&(e.flags|=4)};function H1(t,e){if(!As)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function ul(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Lfe(t,e,r){var n=e.pendingProps;switch(iO(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ul(e),null;case 1:return Nc(e.type)&&yE(),ul(e),null;case 3:return n=e.stateNode,fv(),ns(wc),ns(Tl),mO(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(kN(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Pd!==null&&(YB(Pd),Pd=null))),HB(t,e),ul(e),null;case 5:hO(e);var a=np(Vb.current);if(r=e.type,t!==null&&e.stateNode!=null)rX(t,e,r,n,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(hr(166));return ul(e),null}if(t=np(Ff.current),kN(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Nf]=e,n[Ub]=s,t=(e.mode&1)!==0,r){case"dialog":Xa("cancel",n),Xa("close",n);break;case"iframe":case"object":case"embed":Xa("load",n);break;case"video":case"audio":for(a=0;a<Ny.length;a++)Xa(Ny[a],n);break;case"source":Xa("error",n);break;case"img":case"image":case"link":Xa("error",n),Xa("load",n);break;case"details":Xa("toggle",n);break;case"input":WM(n,s),Xa("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Xa("invalid",n);break;case"textarea":YM(n,s),Xa("invalid",n)}pB(r,s),a=null;for(var i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="children"?typeof l=="string"?n.textContent!==l&&(s.suppressHydrationWarning!==!0&&TN(n.textContent,l,t),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&TN(n.textContent,l,t),a=["children",""+l]):Pb.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&Xa("scroll",n)}switch(r){case"input":CN(n),XM(n,s,!0);break;case"textarea":CN(n),JM(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=vE)}n=a,e.updateQueue=n,n!==null&&(e.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Bz(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=i.createElement(r,{is:n.is}):(t=i.createElement(r),r==="select"&&(i=t,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):t=i.createElementNS(t,r),t[Nf]=e,t[Ub]=n,tX(t,e,!1,!1),e.stateNode=t;e:{switch(i=gB(r,n),r){case"dialog":Xa("cancel",t),Xa("close",t),a=n;break;case"iframe":case"object":case"embed":Xa("load",t),a=n;break;case"video":case"audio":for(a=0;a<Ny.length;a++)Xa(Ny[a],t);a=n;break;case"source":Xa("error",t),a=n;break;case"img":case"image":case"link":Xa("error",t),Xa("load",t),a=n;break;case"details":Xa("toggle",t),a=n;break;case"input":WM(t,n),a=dB(t,n),Xa("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=Os({},n,{value:void 0}),Xa("invalid",t);break;case"textarea":YM(t,n),a=hB(t,n),Xa("invalid",t);break;default:a=n}pB(r,a),l=a;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?Fz(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Tz(t,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Bb(t,c):typeof c=="number"&&Bb(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Pb.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Xa("scroll",t):c!=null&&GF(t,s,c,i))}switch(r){case"input":CN(t),XM(t,n,!1);break;case"textarea":CN(t),JM(t);break;case"option":n.value!=null&&t.setAttribute("value",""+z0(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Gx(t,!!n.multiple,s,!1):n.defaultValue!=null&&Gx(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=vE)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ul(e),null;case 6:if(t&&e.stateNode!=null)nX(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(hr(166));if(r=np(Vb.current),np(Ff.current),kN(e)){if(n=e.stateNode,r=e.memoizedProps,n[Nf]=e,(s=n.nodeValue!==r)&&(t=au,t!==null))switch(t.tag){case 3:TN(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&TN(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Nf]=e,e.stateNode=n}return ul(e),null;case 13:if(ns(Ps),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(As&&eu!==null&&e.mode&1&&!(e.flags&128))bW(),uv(),e.flags|=98560,s=!1;else if(s=kN(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(hr(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(hr(317));s[Nf]=e}else uv(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ul(e),s=!1}else Pd!==null&&(YB(Pd),Pd=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Ps.current&1?eo===0&&(eo=3):SO())),e.updateQueue!==null&&(e.flags|=4),ul(e),null);case 4:return fv(),HB(t,e),t===null&&Mb(e.stateNode.containerInfo),ul(e),null;case 10:return uO(e.type._context),ul(e),null;case 17:return Nc(e.type)&&yE(),ul(e),null;case 19:if(ns(Ps),s=e.memoizedState,s===null)return ul(e),null;if(n=(e.flags&128)!==0,i=s.rendering,i===null)if(n)H1(s,!1);else{if(eo!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=SE(t),i!==null){for(e.flags|=128,H1(s,!1),n=i.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,t=i.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return $a(Ps,Ps.current&1|2),e.child}t=t.sibling}s.tail!==null&&fi()>hv&&(e.flags|=128,n=!0,H1(s,!1),e.lanes=4194304)}else{if(!n)if(t=SE(i),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),H1(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!As)return ul(e),null}else 2*fi()-s.renderingStartTime>hv&&r!==1073741824&&(e.flags|=128,n=!0,H1(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(r=s.last,r!==null?r.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=fi(),e.sibling=null,r=Ps.current,$a(Ps,n?r&1|2:r&1),e):(ul(e),null);case 22:case 23:return EO(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?qc&1073741824&&(ul(e),e.subtreeFlags&6&&(e.flags|=8192)):ul(e),null;case 24:return null;case 25:return null}throw Error(hr(156,e.tag))}function Ufe(t,e){switch(iO(e),e.tag){case 1:return Nc(e.type)&&yE(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return fv(),ns(wc),ns(Tl),mO(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return hO(e),null;case 13:if(ns(Ps),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(hr(340));uv()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ns(Ps),null;case 4:return fv(),null;case 10:return uO(e.type._context),null;case 22:case 23:return EO(),null;case 24:return null;default:return null}}var DN=!1,El=!1,Qfe=typeof WeakSet=="function"?WeakSet:Set,Tr=null;function Fx(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ws(t,e,n)}else r.current=null}function $B(t,e,r){try{r()}catch(n){Ws(t,e,n)}}var QL=!1;function Vfe(t,e){if(SB=pE,t=lW(),aO(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var i=0,l=-1,c=-1,u=0,d=0,f=t,h=null;t:for(;;){for(var A;f!==r||a!==0&&f.nodeType!==3||(l=i+a),f!==s||n!==0&&f.nodeType!==3||(c=i+n),f.nodeType===3&&(i+=f.nodeValue.length),(A=f.firstChild)!==null;)h=f,f=A;for(;;){if(f===t)break t;if(h===r&&++u===a&&(l=i),h===s&&++d===n&&(c=i),(A=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=A}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(IB={focusedElem:t,selectionRange:r},pE=!1,Tr=e;Tr!==null;)if(e=Tr,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Tr=t;else for(;Tr!==null;){e=Tr;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var p=m.memoizedProps,g=m.memoizedState,x=e.stateNode,y=x.getSnapshotBeforeUpdate(e.elementType===e.type?p:Id(e.type,p),g);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(hr(163))}}catch(w){Ws(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,Tr=t;break}Tr=e.return}return m=QL,QL=!1,m}function Jy(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var s=a.destroy;a.destroy=void 0,s!==void 0&&$B(e,r,s)}a=a.next}while(a!==n)}}function UI(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function GB(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function aX(t){var e=t.alternate;e!==null&&(t.alternate=null,aX(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Nf],delete e[Ub],delete e[BB],delete e[Cfe],delete e[_fe])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sX(t){return t.tag===5||t.tag===3||t.tag===4}function VL(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||sX(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function KB(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=vE));else if(n!==4&&(t=t.child,t!==null))for(KB(t,e,r),t=t.sibling;t!==null;)KB(t,e,r),t=t.sibling}function qB(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(qB(t,e,r),t=t.sibling;t!==null;)qB(t,e,r),t=t.sibling}var Ko=null,jd=!1;function Vh(t,e,r){for(r=r.child;r!==null;)iX(t,e,r),r=r.sibling}function iX(t,e,r){if(kf&&typeof kf.onCommitFiberUnmount=="function")try{kf.onCommitFiberUnmount(TI,r)}catch{}switch(r.tag){case 5:El||Fx(r,e);case 6:var n=Ko,a=jd;Ko=null,Vh(t,e,r),Ko=n,jd=a,Ko!==null&&(jd?(t=Ko,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Ko.removeChild(r.stateNode));break;case 18:Ko!==null&&(jd?(t=Ko,r=r.stateNode,t.nodeType===8?D3(t.parentNode,r):t.nodeType===1&&D3(t,r),Ob(t)):D3(Ko,r.stateNode));break;case 4:n=Ko,a=jd,Ko=r.stateNode.containerInfo,jd=!0,Vh(t,e,r),Ko=n,jd=a;break;case 0:case 11:case 14:case 15:if(!El&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var s=a,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&$B(r,e,i),a=a.next}while(a!==n)}Vh(t,e,r);break;case 1:if(!El&&(Fx(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Ws(r,e,l)}Vh(t,e,r);break;case 21:Vh(t,e,r);break;case 22:r.mode&1?(El=(n=El)||r.memoizedState!==null,Vh(t,e,r),El=n):Vh(t,e,r);break;default:Vh(t,e,r)}}function HL(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Qfe),e.forEach(function(n){var a=Yfe.bind(null,t,n);r.has(n)||(r.add(n),n.then(a,a))})}}function yd(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var s=t,i=e,l=i;e:for(;l!==null;){switch(l.tag){case 5:Ko=l.stateNode,jd=!1;break e;case 3:Ko=l.stateNode.containerInfo,jd=!0;break e;case 4:Ko=l.stateNode.containerInfo,jd=!0;break e}l=l.return}if(Ko===null)throw Error(hr(160));iX(s,i,a),Ko=null,jd=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){Ws(a,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)oX(e,t),e=e.sibling}function oX(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(yd(e,t),df(t),n&4){try{Jy(3,t,t.return),UI(3,t)}catch(p){Ws(t,t.return,p)}try{Jy(5,t,t.return)}catch(p){Ws(t,t.return,p)}}break;case 1:yd(e,t),df(t),n&512&&r!==null&&Fx(r,r.return);break;case 5:if(yd(e,t),df(t),n&512&&r!==null&&Fx(r,r.return),t.flags&32){var a=t.stateNode;try{Bb(a,"")}catch(p){Ws(t,t.return,p)}}if(n&4&&(a=t.stateNode,a!=null)){var s=t.memoizedProps,i=r!==null?r.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&jz(a,s),gB(l,i);var u=gB(l,s);for(i=0;i<c.length;i+=2){var d=c[i],f=c[i+1];d==="style"?Fz(a,f):d==="dangerouslySetInnerHTML"?Tz(a,f):d==="children"?Bb(a,f):GF(a,d,f,u)}switch(l){case"input":fB(a,s);break;case"textarea":Pz(a,s);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var A=s.value;A!=null?Gx(a,!!s.multiple,A,!1):h!==!!s.multiple&&(s.defaultValue!=null?Gx(a,!!s.multiple,s.defaultValue,!0):Gx(a,!!s.multiple,s.multiple?[]:"",!1))}a[Ub]=s}catch(p){Ws(t,t.return,p)}}break;case 6:if(yd(e,t),df(t),n&4){if(t.stateNode===null)throw Error(hr(162));a=t.stateNode,s=t.memoizedProps;try{a.nodeValue=s}catch(p){Ws(t,t.return,p)}}break;case 3:if(yd(e,t),df(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ob(e.containerInfo)}catch(p){Ws(t,t.return,p)}break;case 4:yd(e,t),df(t);break;case 13:yd(e,t),df(t),a=t.child,a.flags&8192&&(s=a.memoizedState!==null,a.stateNode.isHidden=s,!s||a.alternate!==null&&a.alternate.memoizedState!==null||(CO=fi())),n&4&&HL(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(El=(u=El)||d,yd(e,t),El=u):yd(e,t),df(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Tr=t,d=t.child;d!==null;){for(f=Tr=d;Tr!==null;){switch(h=Tr,A=h.child,h.tag){case 0:case 11:case 14:case 15:Jy(4,h,h.return);break;case 1:Fx(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(p){Ws(n,r,p)}}break;case 5:Fx(h,h.return);break;case 22:if(h.memoizedState!==null){GL(f);continue}}A!==null?(A.return=h,Tr=A):GL(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,c=f.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=kz("display",i))}catch(p){Ws(t,t.return,p)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(p){Ws(t,t.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:yd(e,t),df(t),n&4&&HL(t);break;case 21:break;default:yd(e,t),df(t)}}function df(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(sX(r)){var n=r;break e}r=r.return}throw Error(hr(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Bb(a,""),n.flags&=-33);var s=VL(t);qB(t,s,a);break;case 3:case 4:var i=n.stateNode.containerInfo,l=VL(t);KB(t,l,i);break;default:throw Error(hr(161))}}catch(c){Ws(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Hfe(t,e,r){Tr=t,lX(t)}function lX(t,e,r){for(var n=(t.mode&1)!==0;Tr!==null;){var a=Tr,s=a.child;if(a.tag===22&&n){var i=a.memoizedState!==null||DN;if(!i){var l=a.alternate,c=l!==null&&l.memoizedState!==null||El;l=DN;var u=El;if(DN=i,(El=c)&&!u)for(Tr=a;Tr!==null;)i=Tr,c=i.child,i.tag===22&&i.memoizedState!==null?KL(a):c!==null?(c.return=i,Tr=c):KL(a);for(;s!==null;)Tr=s,lX(s),s=s.sibling;Tr=a,DN=l,El=u}$L(t)}else a.subtreeFlags&8772&&s!==null?(s.return=a,Tr=s):$L(t)}}function $L(t){for(;Tr!==null;){var e=Tr;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:El||UI(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!El)if(r===null)n.componentDidMount();else{var a=e.elementType===e.type?r.memoizedProps:Id(e.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&IL(e,s,n);break;case 3:var i=e.updateQueue;if(i!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}IL(e,i,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Ob(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(hr(163))}El||e.flags&512&&GB(e)}catch(h){Ws(e,e.return,h)}}if(e===t){Tr=null;break}if(r=e.sibling,r!==null){r.return=e.return,Tr=r;break}Tr=e.return}}function GL(t){for(;Tr!==null;){var e=Tr;if(e===t){Tr=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Tr=r;break}Tr=e.return}}function KL(t){for(;Tr!==null;){var e=Tr;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{UI(4,e)}catch(c){Ws(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var a=e.return;try{n.componentDidMount()}catch(c){Ws(e,a,c)}}var s=e.return;try{GB(e)}catch(c){Ws(e,s,c)}break;case 5:var i=e.return;try{GB(e)}catch(c){Ws(e,i,c)}}}catch(c){Ws(e,e.return,c)}if(e===t){Tr=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Tr=l;break}Tr=e.return}}var $fe=Math.ceil,PE=lh.ReactCurrentDispatcher,wO=lh.ReactCurrentOwner,Yu=lh.ReactCurrentBatchConfig,qn=0,So=null,Pi=null,nl=0,qc=0,Ox=Am(0),eo=0,Kb=null,Fp=0,QI=0,NO=0,Zy=null,gc=null,CO=0,hv=1/0,xA=null,BE=!1,zB=null,O0=null,RN=!1,b0=null,TE=0,eb=0,WB=null,B_=-1,T_=0;function Zl(){return qn&6?fi():B_!==-1?B_:B_=fi()}function D0(t){return t.mode&1?qn&2&&nl!==0?nl&-nl:Sfe.transition!==null?(T_===0&&(T_=Kz()),T_):(t=Ea,t!==0||(t=window.event,t=t===void 0?16:Zz(t.type)),t):1}function Ld(t,e,r,n){if(50<eb)throw eb=0,WB=null,Error(hr(185));J2(t,r,n),(!(qn&2)||t!==So)&&(t===So&&(!(qn&2)&&(QI|=r),eo===4&&d0(t,nl)),Cc(t,n),r===1&&qn===0&&!(e.mode&1)&&(hv=fi()+500,RI&&hm()))}function Cc(t,e){var r=t.callbackNode;Sde(t,e);var n=mE(t,t===So?nl:0);if(n===0)r!==null&&tL(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&tL(r),e===1)t.tag===0?Efe(qL.bind(null,t)):xW(qL.bind(null,t)),wfe(function(){!(qn&6)&&hm()}),r=null;else{switch(qz(n)){case 1:r=XF;break;case 4:r=$z;break;case 16:r=hE;break;case 536870912:r=Gz;break;default:r=hE}r=pX(r,cX.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function cX(t,e){if(B_=-1,T_=0,qn&6)throw Error(hr(327));var r=t.callbackNode;if(Xx()&&t.callbackNode!==r)return null;var n=mE(t,t===So?nl:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=kE(t,n);else{e=n;var a=qn;qn|=2;var s=dX();(So!==t||nl!==e)&&(xA=null,hv=fi()+500,Ap(t,e));do try{qfe();break}catch(l){uX(t,l)}while(!0);cO(),PE.current=s,qn=a,Pi!==null?e=0:(So=null,nl=0,e=eo)}if(e!==0){if(e===2&&(a=wB(t),a!==0&&(n=a,e=XB(t,a))),e===1)throw r=Kb,Ap(t,0),d0(t,n),Cc(t,fi()),r;if(e===6)d0(t,n);else{if(a=t.current.alternate,!(n&30)&&!Gfe(a)&&(e=kE(t,n),e===2&&(s=wB(t),s!==0&&(n=s,e=XB(t,s))),e===1))throw r=Kb,Ap(t,0),d0(t,n),Cc(t,fi()),r;switch(t.finishedWork=a,t.finishedLanes=n,e){case 0:case 1:throw Error(hr(345));case 2:Um(t,gc,xA);break;case 3:if(d0(t,n),(n&130023424)===n&&(e=CO+500-fi(),10<e)){if(mE(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){Zl(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=PB(Um.bind(null,t,gc,xA),e);break}Um(t,gc,xA);break;case 4:if(d0(t,n),(n&4194240)===n)break;for(e=t.eventTimes,a=-1;0<n;){var i=31-Md(n);s=1<<i,i=e[i],i>a&&(a=i),n&=~s}if(n=a,n=fi()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*$fe(n/1960))-n,10<n){t.timeoutHandle=PB(Um.bind(null,t,gc,xA),n);break}Um(t,gc,xA);break;case 5:Um(t,gc,xA);break;default:throw Error(hr(329))}}}return Cc(t,fi()),t.callbackNode===r?cX.bind(null,t):null}function XB(t,e){var r=Zy;return t.current.memoizedState.isDehydrated&&(Ap(t,e).flags|=256),t=kE(t,e),t!==2&&(e=gc,gc=r,e!==null&&YB(e)),t}function YB(t){gc===null?gc=t:gc.push.apply(gc,t)}function Gfe(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],s=a.getSnapshot;a=a.value;try{if(!$d(s(),a))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function d0(t,e){for(e&=~NO,e&=~QI,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Md(e),n=1<<r;t[r]=-1,e&=~n}}function qL(t){if(qn&6)throw Error(hr(327));Xx();var e=mE(t,0);if(!(e&1))return Cc(t,fi()),null;var r=kE(t,e);if(t.tag!==0&&r===2){var n=wB(t);n!==0&&(e=n,r=XB(t,n))}if(r===1)throw r=Kb,Ap(t,0),d0(t,e),Cc(t,fi()),r;if(r===6)throw Error(hr(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Um(t,gc,xA),Cc(t,fi()),null}function _O(t,e){var r=qn;qn|=1;try{return t(e)}finally{qn=r,qn===0&&(hv=fi()+500,RI&&hm())}}function Op(t){b0!==null&&b0.tag===0&&!(qn&6)&&Xx();var e=qn;qn|=1;var r=Yu.transition,n=Ea;try{if(Yu.transition=null,Ea=1,t)return t()}finally{Ea=n,Yu.transition=r,qn=e,!(qn&6)&&hm()}}function EO(){qc=Ox.current,ns(Ox)}function Ap(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,bfe(r)),Pi!==null)for(r=Pi.return;r!==null;){var n=r;switch(iO(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&yE();break;case 3:fv(),ns(wc),ns(Tl),mO();break;case 5:hO(n);break;case 4:fv();break;case 13:ns(Ps);break;case 19:ns(Ps);break;case 10:uO(n.type._context);break;case 22:case 23:EO()}r=r.return}if(So=t,Pi=t=R0(t.current,null),nl=qc=e,eo=0,Kb=null,NO=QI=Fp=0,gc=Zy=null,rp!==null){for(e=0;e<rp.length;e++)if(r=rp[e],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,s=r.pending;if(s!==null){var i=s.next;s.next=a,n.next=i}r.pending=n}rp=null}return t}function uX(t,e){do{var r=Pi;try{if(cO(),I_.current=jE,IE){for(var n=Fs.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}IE=!1}if(kp=0,wo=Gi=Fs=null,Yy=!1,Hb=0,wO.current=null,r===null||r.return===null){eo=1,Kb=e,Pi=null;break}e:{var s=t,i=r.return,l=r,c=e;if(e=nl,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var A=FL(i);if(A!==null){A.flags&=-257,OL(A,i,l,s,e),A.mode&1&&kL(s,u,e),e=A,c=u;var m=e.updateQueue;if(m===null){var p=new Set;p.add(c),e.updateQueue=p}else m.add(c);break e}else{if(!(e&1)){kL(s,u,e),SO();break e}c=Error(hr(426))}}else if(As&&l.mode&1){var g=FL(i);if(g!==null){!(g.flags&65536)&&(g.flags|=256),OL(g,i,l,s,e),oO(Av(c,l));break e}}s=c=Av(c,l),eo!==4&&(eo=2),Zy===null?Zy=[s]:Zy.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=qW(s,c,e);SL(s,x);break e;case 1:l=c;var y=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(O0===null||!O0.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=zW(s,l,e);SL(s,w);break e}}s=s.return}while(s!==null)}AX(r)}catch(j){e=j,Pi===r&&r!==null&&(Pi=r=r.return);continue}break}while(!0)}function dX(){var t=PE.current;return PE.current=jE,t===null?jE:t}function SO(){(eo===0||eo===3||eo===2)&&(eo=4),So===null||!(Fp&268435455)&&!(QI&268435455)||d0(So,nl)}function kE(t,e){var r=qn;qn|=2;var n=dX();(So!==t||nl!==e)&&(xA=null,Ap(t,e));do try{Kfe();break}catch(a){uX(t,a)}while(!0);if(cO(),qn=r,PE.current=n,Pi!==null)throw Error(hr(261));return So=null,nl=0,eo}function Kfe(){for(;Pi!==null;)fX(Pi)}function qfe(){for(;Pi!==null&&!xde();)fX(Pi)}function fX(t){var e=mX(t.alternate,t,qc);t.memoizedProps=t.pendingProps,e===null?AX(t):Pi=e,wO.current=null}function AX(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Ufe(r,e),r!==null){r.flags&=32767,Pi=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{eo=6,Pi=null;return}}else if(r=Lfe(r,e,qc),r!==null){Pi=r;return}if(e=e.sibling,e!==null){Pi=e;return}Pi=e=t}while(e!==null);eo===0&&(eo=5)}function Um(t,e,r){var n=Ea,a=Yu.transition;try{Yu.transition=null,Ea=1,zfe(t,e,r,n)}finally{Yu.transition=a,Ea=n}return null}function zfe(t,e,r,n){do Xx();while(b0!==null);if(qn&6)throw Error(hr(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(hr(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(Ide(t,s),t===So&&(Pi=So=null,nl=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||RN||(RN=!0,pX(hE,function(){return Xx(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Yu.transition,Yu.transition=null;var i=Ea;Ea=1;var l=qn;qn|=4,wO.current=null,Vfe(t,r),oX(r,t),hfe(IB),pE=!!SB,IB=SB=null,t.current=r,Hfe(r),vde(),qn=l,Ea=i,Yu.transition=s}else t.current=r;if(RN&&(RN=!1,b0=t,TE=a),s=t.pendingLanes,s===0&&(O0=null),wde(r.stateNode),Cc(t,fi()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)a=e[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(BE)throw BE=!1,t=zB,zB=null,t;return TE&1&&t.tag!==0&&Xx(),s=t.pendingLanes,s&1?t===WB?eb++:(eb=0,WB=t):eb=0,hm(),null}function Xx(){if(b0!==null){var t=qz(TE),e=Yu.transition,r=Ea;try{if(Yu.transition=null,Ea=16>t?16:t,b0===null)var n=!1;else{if(t=b0,b0=null,TE=0,qn&6)throw Error(hr(331));var a=qn;for(qn|=4,Tr=t.current;Tr!==null;){var s=Tr,i=s.child;if(Tr.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Tr=u;Tr!==null;){var d=Tr;switch(d.tag){case 0:case 11:case 15:Jy(8,d,s)}var f=d.child;if(f!==null)f.return=d,Tr=f;else for(;Tr!==null;){d=Tr;var h=d.sibling,A=d.return;if(aX(d),d===u){Tr=null;break}if(h!==null){h.return=A,Tr=h;break}Tr=A}}}var m=s.alternate;if(m!==null){var p=m.child;if(p!==null){m.child=null;do{var g=p.sibling;p.sibling=null,p=g}while(p!==null)}}Tr=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,Tr=i;else e:for(;Tr!==null;){if(s=Tr,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Jy(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,Tr=x;break e}Tr=s.return}}var y=t.current;for(Tr=y;Tr!==null;){i=Tr;var b=i.child;if(i.subtreeFlags&2064&&b!==null)b.return=i,Tr=b;else e:for(i=y;Tr!==null;){if(l=Tr,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:UI(9,l)}}catch(j){Ws(l,l.return,j)}if(l===i){Tr=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,Tr=w;break e}Tr=l.return}}if(qn=a,hm(),kf&&typeof kf.onPostCommitFiberRoot=="function")try{kf.onPostCommitFiberRoot(TI,t)}catch{}n=!0}return n}finally{Ea=r,Yu.transition=e}}return!1}function zL(t,e,r){e=Av(r,e),e=qW(t,e,1),t=F0(t,e,1),e=Zl(),t!==null&&(J2(t,1,e),Cc(t,e))}function Ws(t,e,r){if(t.tag===3)zL(t,t,r);else for(;e!==null;){if(e.tag===3){zL(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(O0===null||!O0.has(n))){t=Av(r,t),t=zW(e,t,1),e=F0(e,t,1),t=Zl(),e!==null&&(J2(e,1,t),Cc(e,t));break}}e=e.return}}function Wfe(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Zl(),t.pingedLanes|=t.suspendedLanes&r,So===t&&(nl&r)===r&&(eo===4||eo===3&&(nl&130023424)===nl&&500>fi()-CO?Ap(t,0):NO|=r),Cc(t,e)}function hX(t,e){e===0&&(t.mode&1?(e=SN,SN<<=1,!(SN&130023424)&&(SN=4194304)):e=1);var r=Zl();t=KA(t,e),t!==null&&(J2(t,e,r),Cc(t,r))}function Xfe(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),hX(t,r)}function Yfe(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(hr(314))}n!==null&&n.delete(e),hX(t,r)}var mX;mX=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||wc.current)vc=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return vc=!1,Mfe(t,e,r);vc=!!(t.flags&131072)}else vc=!1,As&&e.flags&1048576&&vW(e,NE,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;P_(t,e),t=e.pendingProps;var a=cv(e,Tl.current);Wx(e,r),a=gO(null,e,n,t,a,r);var s=xO();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nc(n)?(s=!0,bE(e)):s=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,fO(e),a.updater=LI,e.stateNode=a,a._reactInternals=e,RB(e,n,t,r),e=UB(null,e,n,!0,s,r)):(e.tag=0,As&&s&&sO(e),ql(null,e,a,r),e=e.child),e;case 16:n=e.elementType;e:{switch(P_(t,e),t=e.pendingProps,a=n._init,n=a(n._payload),e.type=n,a=e.tag=Zfe(n),t=Id(n,t),a){case 0:e=LB(null,e,n,t,r);break e;case 1:e=ML(null,e,n,t,r);break e;case 11:e=DL(null,e,n,t,r);break e;case 14:e=RL(null,e,n,Id(n.type,t),r);break e}throw Error(hr(306,n,""))}return e;case 0:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Id(n,a),LB(t,e,n,a,r);case 1:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Id(n,a),ML(t,e,n,a,r);case 3:e:{if(JW(e),t===null)throw Error(hr(387));n=e.pendingProps,s=e.memoizedState,a=s.element,_W(t,e),EE(e,n,null,r);var i=e.memoizedState;if(n=i.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){a=Av(Error(hr(423)),e),e=LL(t,e,n,r,a);break e}else if(n!==a){a=Av(Error(hr(424)),e),e=LL(t,e,n,r,a);break e}else for(eu=k0(e.stateNode.containerInfo.firstChild),au=e,As=!0,Pd=null,r=NW(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(uv(),n===a){e=qA(t,e,r);break e}ql(t,e,n,r)}e=e.child}return e;case 5:return EW(e),t===null&&FB(e),n=e.type,a=e.pendingProps,s=t!==null?t.memoizedProps:null,i=a.children,jB(n,a)?i=null:s!==null&&jB(n,s)&&(e.flags|=32),YW(t,e),ql(t,e,i,r),e.child;case 6:return t===null&&FB(e),null;case 13:return ZW(t,e,r);case 4:return AO(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=dv(e,null,n,r):ql(t,e,n,r),e.child;case 11:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Id(n,a),DL(t,e,n,a,r);case 7:return ql(t,e,e.pendingProps,r),e.child;case 8:return ql(t,e,e.pendingProps.children,r),e.child;case 12:return ql(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,a=e.pendingProps,s=e.memoizedProps,i=a.value,$a(CE,n._currentValue),n._currentValue=i,s!==null)if($d(s.value,i)){if(s.children===a.children&&!wc.current){e=qA(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){i=s.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=kA(-1,r&-r),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),OB(s.return,r,e),l.lanes|=r;break}c=c.next}}else if(s.tag===10)i=s.type===e.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(hr(341));i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),OB(i,r,e),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===e){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}ql(t,e,a.children,r),e=e.child}return e;case 9:return a=e.type,n=e.pendingProps.children,Wx(e,r),a=td(a),n=n(a),e.flags|=1,ql(t,e,n,r),e.child;case 14:return n=e.type,a=Id(n,e.pendingProps),a=Id(n.type,a),RL(t,e,n,a,r);case 15:return WW(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Id(n,a),P_(t,e),e.tag=1,Nc(n)?(t=!0,bE(e)):t=!1,Wx(e,r),KW(e,n,a),RB(e,n,a,r),UB(null,e,n,!0,t,r);case 19:return eX(t,e,r);case 22:return XW(t,e,r)}throw Error(hr(156,e.tag))};function pX(t,e){return Hz(t,e)}function Jfe(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gu(t,e,r,n){return new Jfe(t,e,r,n)}function IO(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Zfe(t){if(typeof t=="function")return IO(t)?1:0;if(t!=null){if(t=t.$$typeof,t===qF)return 11;if(t===zF)return 14}return 2}function R0(t,e){var r=t.alternate;return r===null?(r=Gu(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function k_(t,e,r,n,a,s){var i=2;if(n=t,typeof t=="function")IO(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case _x:return hp(r.children,a,s,e);case KF:i=8,a|=8;break;case oB:return t=Gu(12,r,e,a|2),t.elementType=oB,t.lanes=s,t;case lB:return t=Gu(13,r,e,a),t.elementType=lB,t.lanes=s,t;case cB:return t=Gu(19,r,e,a),t.elementType=cB,t.lanes=s,t;case Ez:return VI(r,a,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Cz:i=10;break e;case _z:i=9;break e;case qF:i=11;break e;case zF:i=14;break e;case a0:i=16,n=null;break e}throw Error(hr(130,t==null?t:typeof t,""))}return e=Gu(i,r,e,a),e.elementType=t,e.type=n,e.lanes=s,e}function hp(t,e,r,n){return t=Gu(7,t,n,e),t.lanes=r,t}function VI(t,e,r,n){return t=Gu(22,t,n,e),t.elementType=Ez,t.lanes=r,t.stateNode={isHidden:!1},t}function $3(t,e,r){return t=Gu(6,t,null,e),t.lanes=r,t}function G3(t,e,r){return e=Gu(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function eAe(t,e,r,n,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_3(0),this.expirationTimes=_3(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_3(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function jO(t,e,r,n,a,s,i,l,c){return t=new eAe(t,e,r,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Gu(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},fO(s),t}function tAe(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cx,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function gX(t){if(!t)return W0;t=t._reactInternals;e:{if(ug(t)!==t||t.tag!==1)throw Error(hr(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Nc(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(hr(171))}if(t.tag===1){var r=t.type;if(Nc(r))return gW(t,r,e)}return e}function xX(t,e,r,n,a,s,i,l,c){return t=jO(r,n,!0,t,a,s,i,l,c),t.context=gX(null),r=t.current,n=Zl(),a=D0(r),s=kA(n,a),s.callback=e??null,F0(r,s,a),t.current.lanes=a,J2(t,a,n),Cc(t,n),t}function HI(t,e,r,n){var a=e.current,s=Zl(),i=D0(a);return r=gX(r),e.context===null?e.context=r:e.pendingContext=r,e=kA(s,i),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=F0(a,e,i),t!==null&&(Ld(t,a,i,s),S_(t,a,i)),i}function FE(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function WL(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function PO(t,e){WL(t,e),(t=t.alternate)&&WL(t,e)}function rAe(){return null}var vX=typeof reportError=="function"?reportError:function(t){console.error(t)};function BO(t){this._internalRoot=t}$I.prototype.render=BO.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(hr(409));HI(t,e,null,null)};$I.prototype.unmount=BO.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Op(function(){HI(null,t,null,null)}),e[GA]=null}};function $I(t){this._internalRoot=t}$I.prototype.unstable_scheduleHydration=function(t){if(t){var e=Xz();t={blockedOn:null,target:t,priority:e};for(var r=0;r<u0.length&&e!==0&&e<u0[r].priority;r++);u0.splice(r,0,t),r===0&&Jz(t)}};function TO(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function GI(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function XL(){}function nAe(t,e,r,n,a){if(a){if(typeof n=="function"){var s=n;n=function(){var u=FE(i);s.call(u)}}var i=xX(e,n,t,0,null,!1,!1,"",XL);return t._reactRootContainer=i,t[GA]=i.current,Mb(t.nodeType===8?t.parentNode:t),Op(),i}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=FE(c);l.call(u)}}var c=jO(t,0,!1,null,null,!1,!1,"",XL);return t._reactRootContainer=c,t[GA]=c.current,Mb(t.nodeType===8?t.parentNode:t),Op(function(){HI(e,c,r,n)}),c}function KI(t,e,r,n,a){var s=r._reactRootContainer;if(s){var i=s;if(typeof a=="function"){var l=a;a=function(){var c=FE(i);l.call(c)}}HI(e,i,t,a)}else i=nAe(r,e,t,a,n);return FE(i)}zz=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=wy(e.pendingLanes);r!==0&&(YF(e,r|1),Cc(e,fi()),!(qn&6)&&(hv=fi()+500,hm()))}break;case 13:Op(function(){var n=KA(t,1);if(n!==null){var a=Zl();Ld(n,t,1,a)}}),PO(t,1)}};JF=function(t){if(t.tag===13){var e=KA(t,134217728);if(e!==null){var r=Zl();Ld(e,t,134217728,r)}PO(t,134217728)}};Wz=function(t){if(t.tag===13){var e=D0(t),r=KA(t,e);if(r!==null){var n=Zl();Ld(r,t,e,n)}PO(t,e)}};Xz=function(){return Ea};Yz=function(t,e){var r=Ea;try{return Ea=t,e()}finally{Ea=r}};vB=function(t,e,r){switch(e){case"input":if(fB(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var a=DI(n);if(!a)throw Error(hr(90));Iz(n),fB(n,a)}}}break;case"textarea":Pz(t,r);break;case"select":e=r.value,e!=null&&Gx(t,!!r.multiple,e,!1)}};Rz=_O;Mz=Op;var aAe={usingClientEntryPoint:!1,Events:[ew,jx,DI,Oz,Dz,_O]},$1={findFiberByHostInstance:tp,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sAe={bundleType:$1.bundleType,version:$1.version,rendererPackageName:$1.rendererPackageName,rendererConfig:$1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:lh.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Qz(t),t===null?null:t.stateNode},findFiberByHostInstance:$1.findFiberByHostInstance||rAe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var MN=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!MN.isDisabled&&MN.supportsFiber)try{TI=MN.inject(sAe),kf=MN}catch{}}fu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aAe;fu.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!TO(e))throw Error(hr(200));return tAe(t,e,null,r)};fu.createRoot=function(t,e){if(!TO(t))throw Error(hr(299));var r=!1,n="",a=vX;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=jO(t,1,!1,null,null,r,!1,n,a),t[GA]=e.current,Mb(t.nodeType===8?t.parentNode:t),new BO(e)};fu.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(hr(188)):(t=Object.keys(t).join(","),Error(hr(268,t)));return t=Qz(e),t=t===null?null:t.stateNode,t};fu.flushSync=function(t){return Op(t)};fu.hydrate=function(t,e,r){if(!GI(e))throw Error(hr(200));return KI(null,t,e,!0,r)};fu.hydrateRoot=function(t,e,r){if(!TO(t))throw Error(hr(405));var n=r!=null&&r.hydratedSources||null,a=!1,s="",i=vX;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),e=xX(e,null,t,1,r??null,a,!1,s,i),t[GA]=e.current,Mb(t),n)for(t=0;t<n.length;t++)r=n[t],a=r._getVersion,a=a(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,a]:e.mutableSourceEagerHydrationData.push(r,a);return new $I(e)};fu.render=function(t,e,r){if(!GI(e))throw Error(hr(200));return KI(null,t,e,!1,r)};fu.unmountComponentAtNode=function(t){if(!GI(t))throw Error(hr(40));return t._reactRootContainer?(Op(function(){KI(null,null,t,!1,function(){t._reactRootContainer=null,t[GA]=null})}),!0):!1};fu.unstable_batchedUpdates=_O;fu.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!GI(r))throw Error(hr(200));if(t==null||t._reactInternals===void 0)throw Error(hr(38));return KI(t,e,r,!1,n)};fu.version="18.3.1-next-f1338f8080-20240426";function yX(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yX)}catch(t){console.error(t)}}yX(),yz.exports=fu;var su=yz.exports,YL=su;sB.createRoot=YL.createRoot,sB.hydrateRoot=YL.hydrateRoot;/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var JL="popstate";function iAe(t={}){function e(n,a){let{pathname:s,search:i,hash:l}=n.location;return JB("",{pathname:s,search:i,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:qb(a)}return lAe(e,r,null,t)}function xs(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Gd(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function oAe(){return Math.random().toString(36).substring(2,10)}function ZL(t,e){return{usr:t.state,key:t.key,idx:e}}function JB(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Vv(e):e,state:r,key:e&&e.key||n||oAe()}}function qb({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Vv(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function lAe(t,e,r,n={}){let{window:a=document.defaultView,v5Compat:s=!1}=n,i=a.history,l="POP",c=null,u=d();u==null&&(u=0,i.replaceState({...i.state,idx:u},""));function d(){return(i.state||{idx:null}).idx}function f(){l="POP";let g=d(),x=g==null?null:g-u;u=g,c&&c({action:l,location:p.location,delta:x})}function h(g,x){l="PUSH";let y=JB(p.location,g,x);u=d()+1;let b=ZL(y,u),w=p.createHref(y);try{i.pushState(b,"",w)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(w)}s&&c&&c({action:l,location:p.location,delta:1})}function A(g,x){l="REPLACE";let y=JB(p.location,g,x);u=d();let b=ZL(y,u),w=p.createHref(y);i.replaceState(b,"",w),s&&c&&c({action:l,location:p.location,delta:0})}function m(g){return cAe(g)}let p={get action(){return l},get location(){return t(a,i)},listen(g){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(JL,f),c=g,()=>{a.removeEventListener(JL,f),c=null}},createHref(g){return e(a,g)},createURL:m,encodeLocation(g){let x=m(g);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:A,go(g){return i.go(g)}};return p}function cAe(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),xs(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:qb(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function bX(t,e,r="/"){return uAe(t,e,r,!1)}function uAe(t,e,r,n){let a=typeof e=="string"?Vv(e):e,s=zA(a.pathname||"/",r);if(s==null)return null;let i=wX(t);dAe(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let u=wAe(s);l=yAe(i[c],u,n)}return l}function wX(t,e=[],r=[],n="",a=!1){let s=(i,l,c=a,u)=>{let d={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(n)&&c)return;xs(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length)}let f=FA([n,d.relativePath]),h=r.concat(d);i.children&&i.children.length>0&&(xs(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),wX(i.children,e,h,f,c)),!(i.path==null&&!i.index)&&e.push({path:f,score:xAe(f,i.index),routesMeta:h})};return t.forEach((i,l)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,l);else for(let u of NX(i.path))s(i,l,!0,u)}),e}function NX(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return a?[s,""]:[s];let i=NX(n.join("/")),l=[];return l.push(...i.map(c=>c===""?s:[s,c].join("/"))),a&&l.push(...i),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function dAe(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:vAe(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var fAe=/^:[\w-]+$/,AAe=3,hAe=2,mAe=1,pAe=10,gAe=-2,eU=t=>t==="*";function xAe(t,e){let r=t.split("/"),n=r.length;return r.some(eU)&&(n+=gAe),e&&(n+=hAe),r.filter(a=>!eU(a)).reduce((a,s)=>a+(fAe.test(s)?AAe:s===""?mAe:pAe),n)}function vAe(t,e){return t.length===e.length&&t.slice(0,-1).every((n,a)=>n===e[a])?t[t.length-1]-e[e.length-1]:0}function yAe(t,e,r=!1){let{routesMeta:n}=t,a={},s="/",i=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",f=OE({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=OE({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(a,f.params),i.push({params:a,pathname:FA([s,f.pathname]),pathnameBase:EAe(FA([s,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(s=FA([s,f.pathnameBase]))}return i}function OE(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=bAe(t.path,t.caseSensitive,t.end),a=e.match(r);if(!a)return null;let s=a[0],i=s.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:f},h)=>{if(d==="*"){let m=l[h]||"";i=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const A=l[h];return f&&!A?u[d]=void 0:u[d]=(A||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:i,pattern:t}}function bAe(t,e=!1,r=!0){Gd(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function wAe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Gd(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function zA(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function NAe(t,e="/"){let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?Vv(t):t;return{pathname:r?r.startsWith("/")?r:CAe(r,e):e,search:SAe(n),hash:IAe(a)}}function CAe(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function K3(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function _Ae(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function kO(t){let e=_Ae(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function FO(t,e,r,n=!1){let a;typeof t=="string"?a=Vv(t):(a={...t},xs(!a.pathname||!a.pathname.includes("?"),K3("?","pathname","search",a)),xs(!a.pathname||!a.pathname.includes("#"),K3("#","pathname","hash",a)),xs(!a.search||!a.search.includes("#"),K3("#","search","hash",a)));let s=t===""||a.pathname==="",i=s?"/":a.pathname,l;if(i==null)l=r;else{let f=e.length-1;if(!n&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),f-=1;a.pathname=h.join("/")}l=f>=0?e[f]:"/"}let c=NAe(a,l),u=i&&i!=="/"&&i.endsWith("/"),d=(s||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var FA=t=>t.join("/").replace(/\/\/+/g,"/"),EAe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),SAe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,IAe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function jAe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var CX=["POST","PUT","PATCH","DELETE"];new Set(CX);var PAe=["GET",...CX];new Set(PAe);var Hv=v.createContext(null);Hv.displayName="DataRouter";var qI=v.createContext(null);qI.displayName="DataRouterState";v.createContext(!1);var _X=v.createContext({isTransitioning:!1});_X.displayName="ViewTransition";var BAe=v.createContext(new Map);BAe.displayName="Fetchers";var TAe=v.createContext(null);TAe.displayName="Await";var Xd=v.createContext(null);Xd.displayName="Navigation";var rw=v.createContext(null);rw.displayName="Location";var Yd=v.createContext({outlet:null,matches:[],isDataRoute:!1});Yd.displayName="Route";var OO=v.createContext(null);OO.displayName="RouteError";function kAe(t,{relative:e}={}){xs($v(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=v.useContext(Xd),{hash:a,pathname:s,search:i}=aw(t,{relative:e}),l=s;return r!=="/"&&(l=s==="/"?r:FA([r,s])),n.createHref({pathname:l,search:i,hash:a})}function $v(){return v.useContext(rw)!=null}function ch(){return xs($v(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(rw).location}var EX="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function SX(t){v.useContext(Xd).static||v.useLayoutEffect(t)}function nw(){let{isDataRoute:t}=v.useContext(Yd);return t?zAe():FAe()}function FAe(){xs($v(),"useNavigate() may be used only in the context of a <Router> component.");let t=v.useContext(Hv),{basename:e,navigator:r}=v.useContext(Xd),{matches:n}=v.useContext(Yd),{pathname:a}=ch(),s=JSON.stringify(kO(n)),i=v.useRef(!1);return SX(()=>{i.current=!0}),v.useCallback((c,u={})=>{if(Gd(i.current,EX),!i.current)return;if(typeof c=="number"){r.go(c);return}let d=FO(c,JSON.parse(s),a,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:FA([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,s,a,t])}var OAe=v.createContext(null);function DAe(t){let e=v.useContext(Yd).outlet;return e&&v.createElement(OAe.Provider,{value:t},e)}function aw(t,{relative:e}={}){let{matches:r}=v.useContext(Yd),{pathname:n}=ch(),a=JSON.stringify(kO(r));return v.useMemo(()=>FO(t,JSON.parse(a),n,e==="path"),[t,a,n,e])}function RAe(t,e){return IX(t,e)}function IX(t,e,r,n){var x;xs($v(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=v.useContext(Xd),{matches:s}=v.useContext(Yd),i=s[s.length-1],l=i?i.params:{},c=i?i.pathname:"/",u=i?i.pathnameBase:"/",d=i&&i.route;{let y=d&&d.path||"";jX(c,!d||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let f=ch(),h;if(e){let y=typeof e=="string"?Vv(e):e;xs(u==="/"||((x=y.pathname)==null?void 0:x.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${y.pathname}" was given in the \`location\` prop.`),h=y}else h=f;let A=h.pathname||"/",m=A;if(u!=="/"){let y=u.replace(/^\//,"").split("/");m="/"+A.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=bX(t,{pathname:m});Gd(d||p!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),Gd(p==null||p[p.length-1].route.element!==void 0||p[p.length-1].route.Component!==void 0||p[p.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=VAe(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:FA([u,a.encodeLocation?a.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?u:FA([u,a.encodeLocation?a.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,r,n);return e&&g?v.createElement(rw.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},g):g}function MAe(){let t=qAe(),e=jAe(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},i=null;return console.error("Error handled by React Router default ErrorBoundary:",t),i=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:s},"ErrorBoundary")," or"," ",v.createElement("code",{style:s},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),r?v.createElement("pre",{style:a},r):null,i)}var LAe=v.createElement(MAe,null),UAe=class extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?v.createElement(Yd.Provider,{value:this.props.routeContext},v.createElement(OO.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function QAe({routeContext:t,match:e,children:r}){let n=v.useContext(Hv);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),v.createElement(Yd.Provider,{value:t},r)}function VAe(t,e=[],r=null,n=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,s=r==null?void 0:r.errors;if(s!=null){let c=a.findIndex(u=>u.route.id&&(s==null?void 0:s[u.route.id])!==void 0);xs(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,c+1))}let i=!1,l=-1;if(r)for(let c=0;c<a.length;c++){let u=a[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:d,errors:f}=r,h=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||h){i=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((c,u,d)=>{let f,h=!1,A=null,m=null;r&&(f=s&&u.route.id?s[u.route.id]:void 0,A=u.route.errorElement||LAe,i&&(l<0&&d===0?(jX("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,m=null):l===d&&(h=!0,m=u.route.hydrateFallbackElement||null)));let p=e.concat(a.slice(0,d+1)),g=()=>{let x;return f?x=A:h?x=m:u.route.Component?x=v.createElement(u.route.Component,null):u.route.element?x=u.route.element:x=c,v.createElement(QAe,{match:u,routeContext:{outlet:c,matches:p,isDataRoute:r!=null},children:x})};return r&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?v.createElement(UAe,{location:r.location,revalidation:r.revalidation,component:A,error:f,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}function DO(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function HAe(t){let e=v.useContext(Hv);return xs(e,DO(t)),e}function $Ae(t){let e=v.useContext(qI);return xs(e,DO(t)),e}function GAe(t){let e=v.useContext(Yd);return xs(e,DO(t)),e}function RO(t){let e=GAe(t),r=e.matches[e.matches.length-1];return xs(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function KAe(){return RO("useRouteId")}function qAe(){var n;let t=v.useContext(OO),e=$Ae("useRouteError"),r=RO("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}function zAe(){let{router:t}=HAe("useNavigate"),e=RO("useNavigate"),r=v.useRef(!1);return SX(()=>{r.current=!0}),v.useCallback(async(a,s={})=>{Gd(r.current,EX),r.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...s}))},[t,e])}var tU={};function jX(t,e,r){!e&&!tU[t]&&(tU[t]=!0,Gd(!1,r))}v.memo(WAe);function WAe({routes:t,future:e,state:r}){return IX(t,void 0,r,e)}function pA({to:t,replace:e,state:r,relative:n}){xs($v(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=v.useContext(Xd);Gd(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=v.useContext(Yd),{pathname:i}=ch(),l=nw(),c=FO(t,kO(s),i,n==="path"),u=JSON.stringify(c);return v.useEffect(()=>{l(JSON.parse(u),{replace:e,state:r,relative:n})},[l,u,n,e,r]),null}function PX(t){return DAe(t.context)}function un(t){xs(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function XAe({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:a,static:s=!1}){xs(!$v(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=t.replace(/^\/*/,"/"),l=v.useMemo(()=>({basename:i,navigator:a,static:s,future:{}}),[i,a,s]);typeof r=="string"&&(r=Vv(r));let{pathname:c="/",search:u="",hash:d="",state:f=null,key:h="default"}=r,A=v.useMemo(()=>{let m=zA(c,i);return m==null?null:{location:{pathname:m,search:u,hash:d,state:f,key:h},navigationType:n}},[i,c,u,d,f,h,n]);return Gd(A!=null,`<Router basename="${i}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:v.createElement(Xd.Provider,{value:l},v.createElement(rw.Provider,{children:e,value:A}))}function YAe({children:t,location:e}){return RAe(ZB(t),e)}function ZB(t,e=[]){let r=[];return v.Children.forEach(t,(n,a)=>{if(!v.isValidElement(n))return;let s=[...e,a];if(n.type===v.Fragment){r.push.apply(r,ZB(n.props.children,s));return}xs(n.type===un,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),xs(!n.props.index||!n.props.children,"An index route cannot have child routes.");let i={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=ZB(n.props.children,s)),r.push(i)}),r}var F_="get",O_="application/x-www-form-urlencoded";function zI(t){return t!=null&&typeof t.tagName=="string"}function JAe(t){return zI(t)&&t.tagName.toLowerCase()==="button"}function ZAe(t){return zI(t)&&t.tagName.toLowerCase()==="form"}function ehe(t){return zI(t)&&t.tagName.toLowerCase()==="input"}function the(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function rhe(t,e){return t.button===0&&(!e||e==="_self")&&!the(t)}var LN=null;function nhe(){if(LN===null)try{new FormData(document.createElement("form"),0),LN=!1}catch{LN=!0}return LN}var ahe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function q3(t){return t!=null&&!ahe.has(t)?(Gd(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${O_}"`),null):t}function she(t,e){let r,n,a,s,i;if(ZAe(t)){let l=t.getAttribute("action");n=l?zA(l,e):null,r=t.getAttribute("method")||F_,a=q3(t.getAttribute("enctype"))||O_,s=new FormData(t)}else if(JAe(t)||ehe(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(n=c?zA(c,e):null,r=t.getAttribute("formmethod")||l.getAttribute("method")||F_,a=q3(t.getAttribute("formenctype"))||q3(l.getAttribute("enctype"))||O_,s=new FormData(l,t),!nhe()){let{name:u,type:d,value:f}=t;if(d==="image"){let h=u?`${u}.`:"";s.append(`${h}x`,"0"),s.append(`${h}y`,"0")}else u&&s.append(u,f)}}else{if(zI(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=F_,n=null,a=O_,i=t}return s&&a==="text/plain"&&(i=s,s=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:s,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function MO(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ihe(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&zA(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function ohe(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function lhe(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function che(t,e,r){let n=await Promise.all(t.map(async a=>{let s=e.routes[a.route.id];if(s){let i=await ohe(s,r);return i.links?i.links():[]}return[]}));return Ahe(n.flat(1).filter(lhe).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function rU(t,e,r,n,a,s){let i=(c,u)=>r[u]?c.route.id!==r[u].route.id:!0,l=(c,u)=>{var d;return r[u].pathname!==c.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,u)=>i(c,u)||l(c,u)):s==="data"?e.filter((c,u)=>{var f;let d=n.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(i(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function uhe(t,e,{includeHydrateFallback:r}={}){return dhe(t.map(n=>{let a=e.routes[n.route.id];if(!a)return[];let s=[a.module];return a.clientActionModule&&(s=s.concat(a.clientActionModule)),a.clientLoaderModule&&(s=s.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(s=s.concat(a.hydrateFallbackModule)),a.imports&&(s=s.concat(a.imports)),s}).flat(1))}function dhe(t){return[...new Set(t)]}function fhe(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function Ahe(t,e){let r=new Set;return new Set(e),t.reduce((n,a)=>{let s=JSON.stringify(fhe(a));return r.has(s)||(r.add(s),n.push({key:s,link:a})),n},[])}function BX(){let t=v.useContext(Hv);return MO(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function hhe(){let t=v.useContext(qI);return MO(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var LO=v.createContext(void 0);LO.displayName="FrameworkContext";function TX(){let t=v.useContext(LO);return MO(t,"You must render this element inside a <HydratedRouter> element"),t}function mhe(t,e){let r=v.useContext(LO),[n,a]=v.useState(!1),[s,i]=v.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=e,h=v.useRef(null);v.useEffect(()=>{if(t==="render"&&i(!0),t==="viewport"){let p=x=>{x.forEach(y=>{i(y.isIntersecting)})},g=new IntersectionObserver(p,{threshold:.5});return h.current&&g.observe(h.current),()=>{g.disconnect()}}},[t]),v.useEffect(()=>{if(n){let p=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(p)}}},[n]);let A=()=>{a(!0)},m=()=>{a(!1),i(!1)};return r?t!=="intent"?[s,h,{}]:[s,h,{onFocus:G1(l,A),onBlur:G1(c,m),onMouseEnter:G1(u,A),onMouseLeave:G1(d,m),onTouchStart:G1(f,A)}]:[!1,h,{}]}function G1(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function phe({page:t,...e}){let{router:r}=BX(),n=v.useMemo(()=>bX(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?v.createElement(xhe,{page:t,matches:n,...e}):null}function ghe(t){let{manifest:e,routeModules:r}=TX(),[n,a]=v.useState([]);return v.useEffect(()=>{let s=!1;return che(t,e,r).then(i=>{s||a(i)}),()=>{s=!0}},[t,e,r]),n}function xhe({page:t,matches:e,...r}){let n=ch(),{manifest:a,routeModules:s}=TX(),{basename:i}=BX(),{loaderData:l,matches:c}=hhe(),u=v.useMemo(()=>rU(t,e,c,a,n,"data"),[t,e,c,a,n]),d=v.useMemo(()=>rU(t,e,c,a,n,"assets"),[t,e,c,a,n]),f=v.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let m=new Set,p=!1;if(e.forEach(x=>{var b;let y=a.routes[x.route.id];!y||!y.hasLoader||(!u.some(w=>w.route.id===x.route.id)&&x.route.id in l&&((b=s[x.route.id])!=null&&b.shouldRevalidate)||y.hasClientLoader?p=!0:m.add(x.route.id))}),m.size===0)return[];let g=ihe(t,i,"data");return p&&m.size>0&&g.searchParams.set("_routes",e.filter(x=>m.has(x.route.id)).map(x=>x.route.id).join(",")),[g.pathname+g.search]},[i,l,n,a,u,e,t,s]),h=v.useMemo(()=>uhe(d,a),[d,a]),A=ghe(d);return v.createElement(v.Fragment,null,f.map(m=>v.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...r})),h.map(m=>v.createElement("link",{key:m,rel:"modulepreload",href:m,...r})),A.map(({key:m,link:p})=>v.createElement("link",{key:m,nonce:r.nonce,...p})))}function vhe(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var kX=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{kX&&(window.__reactRouterVersion="7.8.1")}catch{}function yhe({basename:t,children:e,window:r}){let n=v.useRef();n.current==null&&(n.current=iAe({window:r,v5Compat:!0}));let a=n.current,[s,i]=v.useState({action:a.action,location:a.location}),l=v.useCallback(c=>{v.startTransition(()=>i(c))},[i]);return v.useLayoutEffect(()=>a.listen(l),[a,l]),v.createElement(XAe,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:a})}var FX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,OX=v.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:a,reloadDocument:s,replace:i,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f,...h},A){let{basename:m}=v.useContext(Xd),p=typeof u=="string"&&FX.test(u),g,x=!1;if(typeof u=="string"&&p&&(g=u,kX))try{let E=new URL(window.location.href),k=u.startsWith("//")?new URL(E.protocol+u):new URL(u),P=zA(k.pathname,m);k.origin===E.origin&&P!=null?u=P+k.search+k.hash:x=!0}catch{Gd(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=kAe(u,{relative:a}),[b,w,j]=mhe(n,h),I=Nhe(u,{replace:i,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:f});function _(E){e&&e(E),E.defaultPrevented||I(E)}let S=v.createElement("a",{...h,...j,href:g||y,onClick:x||s?e:_,ref:vhe(A,w),target:c,"data-discover":!p&&r==="render"?"true":void 0});return b&&!p?v.createElement(v.Fragment,null,S,v.createElement(phe,{page:y})):S});OX.displayName="Link";var Wr=v.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:a=!1,style:s,to:i,viewTransition:l,children:c,...u},d){let f=aw(i,{relative:u.relative}),h=ch(),A=v.useContext(qI),{navigator:m,basename:p}=v.useContext(Xd),g=A!=null&&Ihe(f)&&l===!0,x=m.encodeLocation?m.encodeLocation(f).pathname:f.pathname,y=h.pathname,b=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;r||(y=y.toLowerCase(),b=b?b.toLowerCase():null,x=x.toLowerCase()),b&&p&&(b=zA(b,p)||b);const w=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let j=y===x||!a&&y.startsWith(x)&&y.charAt(w)==="/",I=b!=null&&(b===x||!a&&b.startsWith(x)&&b.charAt(x.length)==="/"),_={isActive:j,isPending:I,isTransitioning:g},S=j?e:void 0,E;typeof n=="function"?E=n(_):E=[n,j?"active":null,I?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let k=typeof s=="function"?s(_):s;return v.createElement(OX,{...u,"aria-current":S,className:E,ref:d,style:k,to:i,viewTransition:l},typeof c=="function"?c(_):c)});Wr.displayName="NavLink";var bhe=v.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:a,state:s,method:i=F_,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:f,...h},A)=>{let m=Ehe(),p=She(l,{relative:u}),g=i.toLowerCase()==="get"?"get":"post",x=typeof l=="string"&&FX.test(l),y=b=>{if(c&&c(b),b.defaultPrevented)return;b.preventDefault();let w=b.nativeEvent.submitter,j=(w==null?void 0:w.getAttribute("formmethod"))||i;m(w||b.currentTarget,{fetcherKey:e,method:j,navigate:r,replace:a,state:s,relative:u,preventScrollReset:d,viewTransition:f})};return v.createElement("form",{ref:A,method:g,action:p,onSubmit:n?c:y,...h,"data-discover":!x&&t==="render"?"true":void 0})});bhe.displayName="Form";function whe(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function DX(t){let e=v.useContext(Hv);return xs(e,whe(t)),e}function Nhe(t,{target:e,replace:r,state:n,preventScrollReset:a,relative:s,viewTransition:i}={}){let l=nw(),c=ch(),u=aw(t,{relative:s});return v.useCallback(d=>{if(rhe(d,e)){d.preventDefault();let f=r!==void 0?r:qb(c)===qb(u);l(t,{replace:f,state:n,preventScrollReset:a,relative:s,viewTransition:i})}},[c,l,u,r,n,e,t,a,s,i])}var Che=0,_he=()=>`__${String(++Che)}__`;function Ehe(){let{router:t}=DX("useSubmit"),{basename:e}=v.useContext(Xd),r=KAe();return v.useCallback(async(n,a={})=>{let{action:s,method:i,encType:l,formData:c,body:u}=she(n,e);if(a.navigate===!1){let d=a.fetcherKey||_he();await t.fetch(d,r,a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||i,formEncType:a.encType||l,flushSync:a.flushSync})}else await t.navigate(a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||i,formEncType:a.encType||l,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,r])}function She(t,{relative:e}={}){let{basename:r}=v.useContext(Xd),n=v.useContext(Yd);xs(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),s={...aw(t||".",{relative:e})},i=ch();if(t==null){s.search=i.search;let l=new URLSearchParams(s.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let d=l.toString();s.search=d?`?${d}`:""}}return(!t||t===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:FA([r,s.pathname])),qb(s)}function Ihe(t,{relative:e}={}){let r=v.useContext(_X);xs(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=DX("useViewTransitionState"),a=aw(t,{relative:e});if(!r.isTransitioning)return!1;let s=zA(r.currentLocation.pathname,n)||r.currentLocation.pathname,i=zA(r.nextLocation.pathname,n)||r.nextLocation.pathname;return OE(a.pathname,i)!=null||OE(a.pathname,s)!=null}function zr(t,e){if(!t)return!1;const r=String(e);if(Array.isArray(t))return t.map(String).includes(r);const n=String(t);return n===r||n==="vendedor"&&r==="vendedor_pollo"}var nU={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RX=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},jhe=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=t[r++];e[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=t[r++],i=t[r++],l=t[r++],c=((a&7)<<18|(s&63)<<12|(i&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const s=t[r++],i=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63)}}return e.join("")},MX={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const s=t[a],i=a+1<t.length,l=i?t[a+1]:0,c=a+2<t.length,u=c?t[a+2]:0,d=s>>2,f=(s&3)<<4|l>>4;let h=(l&15)<<2|u>>6,A=u&63;c||(A=64,i||(h=64)),n.push(r[d],r[f],r[h],r[A])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(RX(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):jhe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const s=r[t.charAt(a++)],l=a<t.length?r[t.charAt(a)]:0;++a;const u=a<t.length?r[t.charAt(a)]:64;++a;const f=a<t.length?r[t.charAt(a)]:64;if(++a,s==null||l==null||u==null||f==null)throw new Phe;const h=s<<2|l>>4;if(n.push(h),u!==64){const A=l<<4&240|u>>2;if(n.push(A),f!==64){const m=u<<6&192|f;n.push(m)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Phe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Bhe=function(t){const e=RX(t);return MX.encodeByteArray(e,!0)},DE=function(t){return Bhe(t).replace(/\./g,"")},LX=function(t){try{return MX.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function The(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const khe=()=>The().__FIREBASE_DEFAULTS__,Fhe=()=>{if(typeof process>"u"||typeof nU>"u")return;const t=nU.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Ohe=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&LX(t[1]);return e&&JSON.parse(e)},WI=()=>{try{return khe()||Fhe()||Ohe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},UX=t=>{var e,r;return(r=(e=WI())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},Dhe=t=>{const e=UX(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},QX=()=>{var t;return(t=WI())===null||t===void 0?void 0:t.config},VX=t=>{var e;return(e=WI())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rhe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mhe(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[DE(JSON.stringify(r)),DE(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Lhe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ro())}function Uhe(){var t;const e=(t=WI())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Qhe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Vhe(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Hhe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $he(){const t=ro();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function HX(){return!Uhe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $X(){try{return typeof indexedDB=="object"}catch{return!1}}function Ghe(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;e(((s=a.error)===null||s===void 0?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Khe="FirebaseError";class uh extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=Khe,Object.setPrototypeOf(this,uh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sw.prototype.create)}}class sw{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,s=this.errors[e],i=s?qhe(s,n):"Error",l=`${this.serviceName}: ${i} (${a}).`;return new uh(a,l,n)}}function qhe(t,e){return t.replace(zhe,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const zhe=/\{\$([^}]+)}/g;function Whe(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function zb(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const s=t[a],i=e[a];if(aU(s)&&aU(i)){if(!zb(s,i))return!1}else if(s!==i)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function aU(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Cy(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");e[decodeURIComponent(a)]=decodeURIComponent(s)}}),e}function _y(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function Xhe(t,e){const r=new Yhe(t,e);return r.subscribe.bind(r)}class Yhe{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");Jhe(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=z3),a.error===void 0&&(a.error=z3),a.complete===void 0&&(a.complete=z3);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Jhe(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function z3(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(t){return t&&t._delegate?t._delegate:t}class Dp{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zhe=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new Rhe;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(a)return null;throw s}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(t0e(e))try{this.getOrInitializeService({instanceIdentifier:Qm})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(e=Qm){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qm){return this.instances.has(e)}getOptions(e=Qm){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);n===l&&i.resolve(a)}return a}onInit(e,r){var n;const a=this.normalizeInstanceIdentifier(r),s=(n=this.onInitCallbacks.get(a))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(a,s);const i=this.instances.get(a);return i&&e(i,a),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:e0e(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Qm){return this.component?this.component.multipleInstances?e:Qm:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function e0e(t){return t===Qm?void 0:t}function t0e(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0e{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new Zhe(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Dn||(Dn={}));const n0e={debug:Dn.DEBUG,verbose:Dn.VERBOSE,info:Dn.INFO,warn:Dn.WARN,error:Dn.ERROR,silent:Dn.SILENT},a0e=Dn.INFO,s0e={[Dn.DEBUG]:"log",[Dn.VERBOSE]:"log",[Dn.INFO]:"info",[Dn.WARN]:"warn",[Dn.ERROR]:"error"},i0e=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=s0e[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let UO=class{constructor(e){this.name=e,this._logLevel=a0e,this._logHandler=i0e,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Dn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?n0e[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Dn.DEBUG,...e),this._logHandler(this,Dn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Dn.VERBOSE,...e),this._logHandler(this,Dn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Dn.INFO,...e),this._logHandler(this,Dn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Dn.WARN,...e),this._logHandler(this,Dn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Dn.ERROR,...e),this._logHandler(this,Dn.ERROR,...e)}};const o0e=(t,e)=>e.some(r=>t instanceof r);let sU,iU;function l0e(){return sU||(sU=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function c0e(){return iU||(iU=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GX=new WeakMap,eT=new WeakMap,KX=new WeakMap,W3=new WeakMap,QO=new WeakMap;function u0e(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",s),t.removeEventListener("error",i)},s=()=>{r(M0(t.result)),a()},i=()=>{n(t.error),a()};t.addEventListener("success",s),t.addEventListener("error",i)});return e.then(r=>{r instanceof IDBCursor&&GX.set(r,t)}).catch(()=>{}),QO.set(e,t),e}function d0e(t){if(eT.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",i),t.removeEventListener("abort",i)},s=()=>{r(),a()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",s),t.addEventListener("error",i),t.addEventListener("abort",i)});eT.set(t,e)}let tT={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return eT.get(t);if(e==="objectStoreNames")return t.objectStoreNames||KX.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return M0(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function f0e(t){tT=t(tT)}function A0e(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(X3(this),e,...r);return KX.set(n,e.sort?e.sort():[e]),M0(n)}:c0e().includes(t)?function(...e){return t.apply(X3(this),e),M0(GX.get(this))}:function(...e){return M0(t.apply(X3(this),e))}}function h0e(t){return typeof t=="function"?A0e(t):(t instanceof IDBTransaction&&d0e(t),o0e(t,l0e())?new Proxy(t,tT):t)}function M0(t){if(t instanceof IDBRequest)return u0e(t);if(W3.has(t))return W3.get(t);const e=h0e(t);return e!==t&&(W3.set(t,e),QO.set(e,t)),e}const X3=t=>QO.get(t);function m0e(t,e,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const i=indexedDB.open(t,e),l=M0(i);return n&&i.addEventListener("upgradeneeded",c=>{n(M0(i.result),c.oldVersion,c.newVersion,M0(i.transaction),c)}),r&&i.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),a&&c.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const p0e=["get","getKey","getAll","getAllKeys","count"],g0e=["put","add","delete","clear"],Y3=new Map;function oU(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Y3.get(e))return Y3.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=g0e.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||p0e.includes(r)))return;const s=async function(i,...l){const c=this.transaction(i,a?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),a&&c.done]))[0]};return Y3.set(e,s),s}f0e(t=>({...t,get:(e,r,n)=>oU(e,r)||t.get(e,r,n),has:(e,r)=>!!oU(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0e{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(v0e(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function v0e(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rT="@firebase/app",lU="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=new UO("@firebase/app"),y0e="@firebase/app-compat",b0e="@firebase/analytics-compat",w0e="@firebase/analytics",N0e="@firebase/app-check-compat",C0e="@firebase/app-check",_0e="@firebase/auth",E0e="@firebase/auth-compat",S0e="@firebase/database",I0e="@firebase/data-connect",j0e="@firebase/database-compat",P0e="@firebase/functions",B0e="@firebase/functions-compat",T0e="@firebase/installations",k0e="@firebase/installations-compat",F0e="@firebase/messaging",O0e="@firebase/messaging-compat",D0e="@firebase/performance",R0e="@firebase/performance-compat",M0e="@firebase/remote-config",L0e="@firebase/remote-config-compat",U0e="@firebase/storage",Q0e="@firebase/storage-compat",V0e="@firebase/firestore",H0e="@firebase/vertexai-preview",$0e="@firebase/firestore-compat",G0e="firebase",K0e="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="[DEFAULT]",q0e={[rT]:"fire-core",[y0e]:"fire-core-compat",[w0e]:"fire-analytics",[b0e]:"fire-analytics-compat",[C0e]:"fire-app-check",[N0e]:"fire-app-check-compat",[_0e]:"fire-auth",[E0e]:"fire-auth-compat",[S0e]:"fire-rtdb",[I0e]:"fire-data-connect",[j0e]:"fire-rtdb-compat",[P0e]:"fire-fn",[B0e]:"fire-fn-compat",[T0e]:"fire-iid",[k0e]:"fire-iid-compat",[F0e]:"fire-fcm",[O0e]:"fire-fcm-compat",[D0e]:"fire-perf",[R0e]:"fire-perf-compat",[M0e]:"fire-rc",[L0e]:"fire-rc-compat",[U0e]:"fire-gcs",[Q0e]:"fire-gcs-compat",[V0e]:"fire-fst",[$0e]:"fire-fst-compat",[H0e]:"fire-vertex","fire-js":"fire-js",[G0e]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv=new Map,aT=new Map,sT=new Map;function cU(t,e){try{t.container.addComponent(e)}catch(r){WA.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function pv(t){const e=t.name;if(sT.has(e))return WA.debug(`There were multiple attempts to register component ${e}.`),!1;sT.set(e,t);for(const r of mv.values())cU(r,t);for(const r of aT.values())cU(r,t);return!0}function VO(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Ef(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0e={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},L0=new sw("app","Firebase",z0e);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0e{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Dp("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw L0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=K0e;function HO(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:nT,automaticDataCollectionEnabled:!1},e),a=n.name;if(typeof a!="string"||!a)throw L0.create("bad-app-name",{appName:String(a)});if(r||(r=QX()),!r)throw L0.create("no-options");const s=mv.get(a);if(s){if(zb(r,s.options)&&zb(n,s.config))return s;throw L0.create("duplicate-app",{appName:a})}const i=new r0e(a);for(const c of sT.values())i.addComponent(c);const l=new W0e(r,n,i);return mv.set(a,l),l}function $O(t=nT){const e=mv.get(t);if(!e&&t===nT&&QX())return HO();if(!e)throw L0.create("no-app",{appName:t});return e}async function X0e(t){let e=!1;const r=t.name;mv.has(r)?(e=!0,mv.delete(r)):aT.has(r)&&t.decRefCount()<=0&&(aT.delete(r),e=!0),e&&(await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function U0(t,e,r){var n;let a=(n=q0e[t])!==null&&n!==void 0?n:t;r&&(a+=`-${r}`);const s=a.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const l=[`Unable to register library "${a}" with version "${e}":`];s&&l.push(`library name "${a}" contains illegal characters (whitespace or "/")`),s&&i&&l.push("and"),i&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),WA.warn(l.join(" "));return}pv(new Dp(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0e="firebase-heartbeat-database",J0e=1,Wb="firebase-heartbeat-store";let J3=null;function qX(){return J3||(J3=m0e(Y0e,J0e,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Wb)}catch(r){console.warn(r)}}}}).catch(t=>{throw L0.create("idb-open",{originalErrorMessage:t.message})})),J3}async function Z0e(t){try{const r=(await qX()).transaction(Wb),n=await r.objectStore(Wb).get(zX(t));return await r.done,n}catch(e){if(e instanceof uh)WA.warn(e.message);else{const r=L0.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});WA.warn(r.message)}}}async function uU(t,e){try{const n=(await qX()).transaction(Wb,"readwrite");await n.objectStore(Wb).put(e,zX(t)),await n.done}catch(r){if(r instanceof uh)WA.warn(r.message);else{const n=L0.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});WA.warn(n.message)}}}function zX(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eme=1024,tme=30*24*60*60*1e3;class rme{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new ame(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=dU();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const l=new Date(i.date).valueOf();return Date.now()-l<=tme}),this._storage.overwrite(this._heartbeatsCache))}catch(n){WA.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=dU(),{heartbeatsToSend:n,unsentEntries:a}=nme(this._heartbeatsCache.heartbeats),s=DE(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return WA.warn(r),""}}}function dU(){return new Date().toISOString().substring(0,10)}function nme(t,e=eme){const r=[];let n=t.slice();for(const a of t){const s=r.find(i=>i.agent===a.agent);if(s){if(s.dates.push(a.date),fU(r)>e){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),fU(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class ame{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $X()?Ghe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Z0e(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return uU(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return uU(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function fU(t){return DE(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sme(t){pv(new Dp("platform-logger",e=>new x0e(e),"PRIVATE")),pv(new Dp("heartbeat",e=>new rme(e),"PRIVATE")),U0(rT,lU,t),U0(rT,lU,"esm2017"),U0("fire-js","")}sme("");function GO(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function WX(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ime=WX,XX=new sw("auth","Firebase",WX());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE=new UO("@firebase/auth");function ome(t,...e){RE.logLevel<=Dn.WARN&&RE.warn(`Auth (${Gv}): ${t}`,...e)}function D_(t,...e){RE.logLevel<=Dn.ERROR&&RE.error(`Auth (${Gv}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(t,...e){throw KO(t,...e)}function Of(t,...e){return KO(t,...e)}function YX(t,e,r){const n=Object.assign(Object.assign({},ime()),{[e]:r});return new sw("auth","Firebase",n).create(e,{appName:t.name})}function OA(t){return YX(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function KO(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return XX.create(t,...e)}function an(t,e,...r){if(!t)throw KO(e,...r)}function EA(t){const e="INTERNAL ASSERTION FAILED: "+t;throw D_(e),new Error(e)}function XA(t,e){t||EA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function lme(){return AU()==="http:"||AU()==="https:"}function AU(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cme(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lme()||Vhe()||"connection"in navigator)?navigator.onLine:!0}function ume(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e,r){this.shortDelay=e,this.longDelay=r,XA(r>e,"Short delay should be less than long delay!"),this.isMobile=Lhe()||Hhe()}get(){return cme()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(t,e){XA(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JX{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;EA("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;EA("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;EA("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dme={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fme=new ow(3e4,6e4);function dh(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function fh(t,e,r,n,a={}){return ZX(t,a,async()=>{let s={},i={};n&&(e==="GET"?i=n:s={body:JSON.stringify(n)});const l=iw(Object.assign({key:t.config.apiKey},i)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},s);return Qhe()||(u.referrerPolicy="no-referrer"),JX.fetch()(eY(t,t.config.apiHost,r,l),u)})}async function ZX(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},dme),e);try{const a=new hme(t),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw UN(t,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const l=s.ok?i.errorMessage:i.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw UN(t,"credential-already-in-use",i);if(c==="EMAIL_EXISTS")throw UN(t,"email-already-in-use",i);if(c==="USER_DISABLED")throw UN(t,"user-disabled",i);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw YX(t,d,u);Kd(t,d)}}catch(a){if(a instanceof uh)throw a;Kd(t,"network-request-failed",{message:String(a)})}}async function lw(t,e,r,n,a={}){const s=await fh(t,e,r,n,a);return"mfaPendingCredential"in s&&Kd(t,"multi-factor-auth-required",{_serverResponse:s}),s}function eY(t,e,r,n){const a=`${e}${r}?${n}`;return t.config.emulator?qO(t.config,a):`${t.config.apiScheme}://${a}`}function Ame(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class hme{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Of(this.auth,"network-request-failed")),fme.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function UN(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=Of(t,e,n);return a.customData._tokenResponse=r,a}function hU(t){return t!==void 0&&t.enterprise!==void 0}class mme{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return Ame(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function pme(t,e){return fh(t,"GET","/v2/recaptchaConfig",dh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gme(t,e){return fh(t,"POST","/v1/accounts:delete",e)}async function tY(t,e){return fh(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xme(t,e=!1){const r=Ds(t),n=await r.getIdToken(e),a=zO(n);an(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:tb(Z3(a.auth_time)),issuedAtTime:tb(Z3(a.iat)),expirationTime:tb(Z3(a.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Z3(t){return Number(t)*1e3}function zO(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return D_("JWT malformed, contained fewer than 3 sections"),null;try{const a=LX(r);return a?JSON.parse(a):(D_("Failed to decode base64 JWT payload"),null)}catch(a){return D_("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function mU(t){const e=zO(t);return an(e,"internal-error"),an(typeof e.exp<"u","internal-error"),an(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xb(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof uh&&vme(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function vme({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yme{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=tb(this.lastLoginAt),this.creationTime=tb(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ME(t){var e;const r=t.auth,n=await t.getIdToken(),a=await Xb(t,tY(r,{idToken:n}));an(a==null?void 0:a.users.length,r,"internal-error");const s=a.users[0];t._notifyReloadListener(s);const i=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?rY(s.providerUserInfo):[],l=wme(t.providerData,i),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),d=c?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new oT(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function bme(t){const e=Ds(t);await ME(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wme(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function rY(t){return t.map(e=>{var{providerId:r}=e,n=GO(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nme(t,e){const r=await ZX(t,{},async()=>{const n=iw({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:s}=t.config,i=eY(t,a,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",JX.fetch()(i,{method:"POST",headers:l,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function Cme(t,e){return fh(t,"POST","/v2/accounts:revokeToken",dh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){an(e.idToken,"internal-error"),an(typeof e.idToken<"u","internal-error"),an(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mU(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){an(e.length!==0,"internal-error");const r=mU(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(an(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await Nme(e,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,i=new Yx;return n&&(an(typeof n=="string","internal-error",{appName:e}),i.refreshToken=n),a&&(an(typeof a=="string","internal-error",{appName:e}),i.accessToken=a),s&&(an(typeof s=="number","internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yx,this.toJSON())}_performRefresh(){return EA("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(t,e){an(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class SA{constructor(e){var{uid:r,auth:n,stsTokenManager:a}=e,s=GO(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yme(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new oT(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await Xb(this,this.stsTokenManager.getToken(this.auth,e));return an(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return xme(this,e)}reload(){return bme(this)}_assign(e){this!==e&&(an(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new SA(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){an(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await ME(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ef(this.auth.app))return Promise.reject(OA(this.auth));const e=await this.getIdToken();return await Xb(this,gme(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,a,s,i,l,c,u,d;const f=(n=r.displayName)!==null&&n!==void 0?n:void 0,h=(a=r.email)!==null&&a!==void 0?a:void 0,A=(s=r.phoneNumber)!==null&&s!==void 0?s:void 0,m=(i=r.photoURL)!==null&&i!==void 0?i:void 0,p=(l=r.tenantId)!==null&&l!==void 0?l:void 0,g=(c=r._redirectEventId)!==null&&c!==void 0?c:void 0,x=(u=r.createdAt)!==null&&u!==void 0?u:void 0,y=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:b,emailVerified:w,isAnonymous:j,providerData:I,stsTokenManager:_}=r;an(b&&_,e,"internal-error");const S=Yx.fromJSON(this.name,_);an(typeof b=="string",e,"internal-error"),Hh(f,e.name),Hh(h,e.name),an(typeof w=="boolean",e,"internal-error"),an(typeof j=="boolean",e,"internal-error"),Hh(A,e.name),Hh(m,e.name),Hh(p,e.name),Hh(g,e.name),Hh(x,e.name),Hh(y,e.name);const E=new SA({uid:b,auth:e,email:h,emailVerified:w,displayName:f,isAnonymous:j,photoURL:m,phoneNumber:A,tenantId:p,stsTokenManager:S,createdAt:x,lastLoginAt:y});return I&&Array.isArray(I)&&(E.providerData=I.map(k=>Object.assign({},k))),g&&(E._redirectEventId=g),E}static async _fromIdTokenResponse(e,r,n=!1){const a=new Yx;a.updateFromServerResponse(r);const s=new SA({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await ME(s),s}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];an(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?rY(a.providerUserInfo):[],i=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),l=new Yx;l.updateFromIdToken(n);const c=new SA({uid:a.localId,auth:e,stsTokenManager:l,isAnonymous:i}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new oT(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pU=new Map;function IA(t){XA(t instanceof Function,"Expected a class definition");let e=pU.get(t);return e?(XA(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,pU.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nY{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}nY.type="NONE";const gU=nY;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(t,e,r){return`firebase:${t}:${e}:${r}`}class Jx{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=R_(this.userKey,a.apiKey,s),this.fullPersistenceKey=R_("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?SA._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Jx(IA(gU),e,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||IA(gU);const i=R_(n,e.config.apiKey,e.name);let l=null;for(const u of r)try{const d=await u._get(i);if(d){const f=SA._fromJSON(e,d);u!==s&&(l=f),s=u;break}}catch{}const c=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Jx(s,e,n):(s=c[0],l&&await s._set(i,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(i)}catch{}})),new Jx(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xU(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(oY(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aY(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cY(e))return"Blackberry";if(uY(e))return"Webos";if(sY(e))return"Safari";if((e.includes("chrome/")||iY(e))&&!e.includes("edge/"))return"Chrome";if(lY(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function aY(t=ro()){return/firefox\//i.test(t)}function sY(t=ro()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iY(t=ro()){return/crios\//i.test(t)}function oY(t=ro()){return/iemobile/i.test(t)}function lY(t=ro()){return/android/i.test(t)}function cY(t=ro()){return/blackberry/i.test(t)}function uY(t=ro()){return/webos/i.test(t)}function WO(t=ro()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _me(t=ro()){var e;return WO(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Eme(){return $he()&&document.documentMode===10}function dY(t=ro()){return WO(t)||lY(t)||uY(t)||cY(t)||/windows phone/i.test(t)||oY(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fY(t,e=[]){let r;switch(t){case"Browser":r=xU(ro());break;case"Worker":r=`${xU(ro())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Gv}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sme{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((i,l)=>{try{const c=e(s);i(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ime(t,e={}){return fh(t,"GET","/v2/passwordPolicy",dh(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jme=6;class Pme{constructor(e){var r,n,a,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=i.minPasswordLength)!==null&&r!==void 0?r:jme,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,a,s,i,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(r=c.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(n=c.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(a=c.containsLowercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsNumericCharacter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bme{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vU(this),this.idTokenSubscription=new vU(this),this.beforeStateQueue=new Sme(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=XX,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=IA(r)),this._initializationPromise=this.queue(async()=>{var n,a;if(!this._deleted&&(this.persistenceManager=await Jx.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await tY(this,{idToken:e}),n=await SA._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Ef(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=a==null?void 0:a._redirectEventId,c=await this.tryRedirectSignIn(e);(!i||i===l)&&(c!=null&&c.user)&&(a=c.user,s=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(a)}catch(i){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return an(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await ME(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ume()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ef(this.app))return Promise.reject(OA(this));const r=e?Ds(e):null;return r&&an(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&an(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ef(this.app)?Promise.reject(OA(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ef(this.app)?Promise.reject(OA(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(IA(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Ime(this),r=new Pme(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new sw("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await Cme(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&IA(e)||this._popupRedirectResolver;an(r,this,"argument-error"),this.redirectPersistenceManager=await Jx.create(this,[IA(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let i=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(an(l,this,"internal-error"),l.then(()=>{i||s(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,a);return()=>{i=!0,c()}}else{const c=e.addObserver(r);return()=>{i=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return an(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fY(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(r["X-Firebase-AppCheck"]=a),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&ome(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function mm(t){return Ds(t)}class vU{constructor(e){this.auth=e,this.observer=null,this.addObserver=Xhe(r=>this.observer=r)}get next(){return an(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XI={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Tme(t){XI=t}function AY(t){return XI.loadJS(t)}function kme(){return XI.recaptchaEnterpriseScript}function Fme(){return XI.gapiScript}function Ome(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Dme="recaptcha-enterprise",Rme="NO_RECAPTCHA";class Mme{constructor(e){this.type=Dme,this.auth=mm(e)}async verify(e="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,l)=>{pme(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new mme(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,i(u.siteKey)}}).catch(c=>{l(c)})})}function a(s,i,l){const c=window.grecaptcha;hU(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{i(u)}).catch(()=>{i(Rme)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,i)=>{n(this.auth).then(l=>{if(!r&&hU(window.grecaptcha))a(l,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let c=kme();c.length!==0&&(c+=l),AY(c).then(()=>{a(l,s,i)}).catch(u=>{i(u)})}}).catch(l=>{i(l)})})}}async function yU(t,e,r,n=!1){const a=new Mme(t);let s;try{s=await a.verify(r)}catch{s=await a.verify(r,!0)}const i=Object.assign({},e);return n?Object.assign(i,{captchaResp:s}):Object.assign(i,{captchaResponse:s}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function LE(t,e,r,n){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await yU(t,e,r,r==="getOobCode");return n(t,s)}else return n(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await yU(t,e,r,r==="getOobCode");return n(t,i)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lme(t,e){const r=VO(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(zb(s,e??{}))return a;Kd(a,"already-initialized")}return r.initialize({options:e})}function Ume(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(IA);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function Qme(t,e,r){const n=mm(t);an(n._canInitEmulator,n,"emulator-config-failed"),an(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,s=hY(e),{host:i,port:l}=Vme(e),c=l===null?"":`:${l}`;n.config.emulator={url:`${s}//${i}${c}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:i,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})}),Hme()}function hY(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Vme(t){const e=hY(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:bU(n.substr(s.length+1))}}else{const[s,i]=n.split(":");return{host:s,port:bU(i)}}}function bU(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Hme(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return EA("not implemented")}_getIdTokenResponse(e){return EA("not implemented")}_linkToIdToken(e,r){return EA("not implemented")}_getReauthenticationResolver(e){return EA("not implemented")}}async function $me(t,e){return fh(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gme(t,e){return lw(t,"POST","/v1/accounts:signInWithPassword",dh(t,e))}async function Kme(t,e){return fh(t,"POST","/v1/accounts:sendOobCode",dh(t,e))}async function qme(t,e){return Kme(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zme(t,e){return lw(t,"POST","/v1/accounts:signInWithEmailLink",dh(t,e))}async function Wme(t,e){return lw(t,"POST","/v1/accounts:signInWithEmailLink",dh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb extends XO{constructor(e,r,n,a=null){super("password",n),this._email=e,this._password=r,this._tenantId=a}static _fromEmailAndPassword(e,r){return new Yb(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Yb(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return LE(e,r,"signInWithPassword",Gme);case"emailLink":return zme(e,{email:this._email,oobCode:this._password});default:Kd(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return LE(e,n,"signUpPassword",$me);case"emailLink":return Wme(e,{idToken:r,email:this._email,oobCode:this._password});default:Kd(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zx(t,e){return lw(t,"POST","/v1/accounts:signInWithIdp",dh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xme="http://localhost";class Rp extends XO{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Rp(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Kd("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a}=r,s=GO(r,["providerId","signInMethod"]);if(!n||!a)return null;const i=new Rp(n,a);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){const r=this.buildRequest();return Zx(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Zx(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Zx(e,r)}buildRequest(){const e={requestUri:Xme,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=iw(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yme(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Jme(t){const e=Cy(_y(t)).link,r=e?Cy(_y(e)).deep_link_id:null,n=Cy(_y(t)).deep_link_id;return(n?Cy(_y(n)).link:null)||n||r||e||t}class YO{constructor(e){var r,n,a,s,i,l;const c=Cy(_y(e)),u=(r=c.apiKey)!==null&&r!==void 0?r:null,d=(n=c.oobCode)!==null&&n!==void 0?n:null,f=Yme((a=c.mode)!==null&&a!==void 0?a:null);an(u&&d&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=d,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(i=c.languageCode)!==null&&i!==void 0?i:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=Jme(e);try{return new YO(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(){this.providerId=Kv.PROVIDER_ID}static credential(e,r){return Yb._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=YO.parseLink(r);return an(n,"argument-error"),Yb._fromEmailAndCode(e,n.code,n.tenantId)}}Kv.PROVIDER_ID="password";Kv.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Kv.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mY{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw extends mY{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0 extends cw{constructor(){super("facebook.com")}static credential(e){return Rp._fromParams({providerId:f0.PROVIDER_ID,signInMethod:f0.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return f0.credentialFromTaggedObject(e)}static credentialFromError(e){return f0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return f0.credential(e.oauthAccessToken)}catch{return null}}}f0.FACEBOOK_SIGN_IN_METHOD="facebook.com";f0.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0 extends cw{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Rp._fromParams({providerId:A0.PROVIDER_ID,signInMethod:A0.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return A0.credentialFromTaggedObject(e)}static credentialFromError(e){return A0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return A0.credential(r,n)}catch{return null}}}A0.GOOGLE_SIGN_IN_METHOD="google.com";A0.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0 extends cw{constructor(){super("github.com")}static credential(e){return Rp._fromParams({providerId:h0.PROVIDER_ID,signInMethod:h0.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return h0.credentialFromTaggedObject(e)}static credentialFromError(e){return h0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return h0.credential(e.oauthAccessToken)}catch{return null}}}h0.GITHUB_SIGN_IN_METHOD="github.com";h0.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0 extends cw{constructor(){super("twitter.com")}static credential(e,r){return Rp._fromParams({providerId:m0.PROVIDER_ID,signInMethod:m0.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return m0.credentialFromTaggedObject(e)}static credentialFromError(e){return m0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return m0.credential(r,n)}catch{return null}}}m0.TWITTER_SIGN_IN_METHOD="twitter.com";m0.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zme(t,e){return lw(t,"POST","/v1/accounts:signUp",dh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const s=await SA._fromIdTokenResponse(e,n,a),i=wU(n);return new Mp({user:s,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=wU(n);return new Mp({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function wU(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE extends uh{constructor(e,r,n,a){var s;super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,UE.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new UE(e,r,n,a)}}function pY(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?UE._fromErrorAndOperation(t,s,e,n):s})}async function epe(t,e,r=!1){const n=await Xb(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Mp._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tpe(t,e,r=!1){const{auth:n}=t;if(Ef(n.app))return Promise.reject(OA(n));const a="reauthenticate";try{const s=await Xb(t,pY(n,a,e,t),r);an(s.idToken,n,"internal-error");const i=zO(s.idToken);an(i,n,"internal-error");const{sub:l}=i;return an(t.uid===l,n,"user-mismatch"),Mp._forOperation(t,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Kd(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gY(t,e,r=!1){if(Ef(t.app))return Promise.reject(OA(t));const n="signIn",a=await pY(t,n,e),s=await Mp._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(s.user),s}async function rpe(t,e){return gY(mm(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xY(t){const e=mm(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function npe(t,e,r){const n=mm(t);await LE(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",qme)}async function ape(t,e,r){if(Ef(t.app))return Promise.reject(OA(t));const n=mm(t),i=await LE(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Zme).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&xY(t),c}),l=await Mp._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(l.user),l}function spe(t,e,r){return Ef(t.app)?Promise.reject(OA(t)):rpe(Ds(t),Kv.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&xY(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(t,e){return Ds(t).setPersistence(e)}function ipe(t,e,r,n){return Ds(t).onIdTokenChanged(e,r,n)}function ope(t,e,r){return Ds(t).beforeAuthStateChanged(e,r)}function JO(t,e,r,n){return Ds(t).onAuthStateChanged(e,r,n)}function ZO(t){return Ds(t).signOut()}const QE="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vY{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(QE,"1"),this.storage.removeItem(QE),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lpe=1e3,cpe=10;class yY extends vY{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dY(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((i,l,c)=>{this.notifyListeners(i,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},s=this.storage.getItem(n);Eme()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,cpe):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},lpe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}yY.type="LOCAL";const e6=yY;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bY extends vY{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}bY.type="SESSION";const t6=bY;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function upe(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new YI(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:s}=r.data,i=this.handlersMap[a];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const l=Array.from(i).map(async u=>u(r.origin,s)),c=await upe(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}YI.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r6(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dpe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,i;return new Promise((l,c)=>{const u=r6("",20);a.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);i={messageChannel:a,onMessage(f){const h=f;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(h.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(i),a.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[a.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(){return window}function fpe(t){Df().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wY(){return typeof Df().WorkerGlobalScope<"u"&&typeof Df().importScripts=="function"}async function Ape(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hpe(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function mpe(){return wY()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NY="firebaseLocalStorageDb",ppe=1,VE="firebaseLocalStorage",CY="fbase_key";class uw{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function JI(t,e){return t.transaction([VE],e?"readwrite":"readonly").objectStore(VE)}function gpe(){const t=indexedDB.deleteDatabase(NY);return new uw(t).toPromise()}function lT(){const t=indexedDB.open(NY,ppe);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(VE,{keyPath:CY})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(VE)?e(n):(n.close(),await gpe(),e(await lT()))})})}async function NU(t,e,r){const n=JI(t,!0).put({[CY]:e,value:r});return new uw(n).toPromise()}async function xpe(t,e){const r=JI(t,!1).get(e),n=await new uw(r).toPromise();return n===void 0?null:n.value}function CU(t,e){const r=JI(t,!0).delete(e);return new uw(r).toPromise()}const vpe=800,ype=3;class _Y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await lT(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>ype)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wY()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=YI._getInstance(mpe()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await Ape(),!this.activeServiceWorker)return;this.sender=new dpe(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hpe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await lT();return await NU(e,QE,"1"),await CU(e,QE),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>NU(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>xpe(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>CU(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const s=JI(a,!1).getAll();return new uw(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:s}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vpe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_Y.type="LOCAL";const EY=_Y;new ow(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bpe(t,e){return e?IA(e):(an(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6 extends XO{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zx(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Zx(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Zx(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function wpe(t){return gY(t.auth,new n6(t),t.bypassAuthState)}function Npe(t){const{auth:e,user:r}=t;return an(r,e,"internal-error"),tpe(r,new n6(t),t.bypassAuthState)}async function Cpe(t){const{auth:e,user:r}=t;return an(r,e,"internal-error"),epe(r,new n6(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SY{constructor(e,r,n,a,s=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:i,type:l}=e;if(i){this.reject(i);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wpe;case"linkViaPopup":case"linkViaRedirect":return Cpe;case"reauthViaPopup":case"reauthViaRedirect":return Npe;default:Kd(this.auth,"internal-error")}}resolve(e){XA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){XA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _pe=new ow(2e3,1e4);class Dx extends SY{constructor(e,r,n,a,s){super(e,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,Dx.currentPopupAction&&Dx.currentPopupAction.cancel(),Dx.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return an(e,this.auth,"internal-error"),e}async onExecution(){XA(this.filter.length===1,"Popup operations only handle one event");const e=r6();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Of(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Of(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Dx.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Of(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_pe.get())};e()}}Dx.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Epe="pendingRedirect",L_=new Map;class Spe extends SY{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=L_.get(this.auth._key());if(!e){try{const n=await Ipe(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}L_.set(this.auth._key(),e)}return this.bypassAuthState||L_.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ipe(t,e){const r=Bpe(e),n=Ppe(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function jpe(t,e){L_.set(t._key(),e)}function Ppe(t){return IA(t._redirectPersistence)}function Bpe(t){return R_(Epe,t.config.apiKey,t.name)}async function Tpe(t,e,r=!1){if(Ef(t.app))return Promise.reject(OA(t));const n=mm(t),a=bpe(n,e),i=await new Spe(n,a,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kpe=10*60*1e3;class Fpe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Ope(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!IY(e)){const a=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Of(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kpe&&this.cachedEventUids.clear(),this.cachedEventUids.has(_U(e))}saveEventToCache(e){this.cachedEventUids.add(_U(e)),this.lastProcessedEventTime=Date.now()}}function _U(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function IY({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Ope(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return IY(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dpe(t,e={}){return fh(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rpe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Mpe=/^https?/;async function Lpe(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Dpe(t);for(const r of e)try{if(Upe(r))return}catch{}Kd(t,"unauthorized-domain")}function Upe(t){const e=iT(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!Mpe.test(r))return!1;if(Rpe.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qpe=new ow(3e4,6e4);function EU(){const t=Df().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function Vpe(t){return new Promise((e,r)=>{var n,a,s;function i(){EU(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{EU(),r(Of(t,"network-request-failed"))},timeout:Qpe.get()})}if(!((a=(n=Df().gapi)===null||n===void 0?void 0:n.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((s=Df().gapi)===null||s===void 0)&&s.load)i();else{const l=Ome("iframefcb");return Df()[l]=()=>{gapi.load?i():r(Of(t,"network-request-failed"))},AY(`${Fme()}?onload=${l}`).catch(c=>r(c))}}).catch(e=>{throw U_=null,e})}let U_=null;function Hpe(t){return U_=U_||Vpe(t),U_}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $pe=new ow(5e3,15e3),Gpe="__/auth/iframe",Kpe="emulator/auth/iframe",qpe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zpe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Wpe(t){const e=t.config;an(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?qO(e,Kpe):`https://${t.config.authDomain}/${Gpe}`,n={apiKey:e.apiKey,appName:t.name,v:Gv},a=zpe.get(t.config.apiHost);a&&(n.eid=a);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${iw(n).slice(1)}`}async function Xpe(t){const e=await Hpe(t),r=Df().gapi;return an(r,t,"internal-error"),e.open({where:document.body,url:Wpe(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qpe,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const i=Of(t,"network-request-failed"),l=Df().setTimeout(()=>{s(i)},$pe.get());function c(){Df().clearTimeout(l),a(n)}n.ping(c).then(c,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ype={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Jpe=500,Zpe=600,ege="_blank",tge="http://localhost";class SU{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rge(t,e,r,n=Jpe,a=Zpe){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c=Object.assign(Object.assign({},Ype),{width:n.toString(),height:a.toString(),top:s,left:i}),u=ro().toLowerCase();r&&(l=iY(u)?ege:r),aY(u)&&(e=e||tge,c.scrollbars="yes");const d=Object.entries(c).reduce((h,[A,m])=>`${h}${A}=${m},`,"");if(_me(u)&&l!=="_self")return nge(e||"",l),new SU(null);const f=window.open(e||"",l,d);an(f,t,"popup-blocked");try{f.focus()}catch{}return new SU(f)}function nge(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const age="__/auth/handler",sge="emulator/auth/handler",ige=encodeURIComponent("fac");async function IU(t,e,r,n,a,s){an(t.config.authDomain,t,"auth-domain-config-required"),an(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Gv,eventId:a};if(e instanceof mY){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",Whe(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))i[d]=f}if(e instanceof cw){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const l=i;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${ige}=${encodeURIComponent(c)}`:"";return`${oge(t)}?${iw(l).slice(1)}${u}`}function oge({config:t}){return t.emulator?qO(t,sge):`https://${t.authDomain}/${age}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5="webStorageSupport";class lge{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=t6,this._completeRedirectFn=Tpe,this._overrideRedirectResult=jpe}async _openPopup(e,r,n,a){var s;XA((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const i=await IU(e,r,n,iT(),a);return rge(e,i,r6())}async _openRedirect(e,r,n,a){await this._originValidation(e);const s=await IU(e,r,n,iT(),a);return fpe(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(XA(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await Xpe(e),n=new Fpe(e);return r.register("authEvent",a=>(an(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(e5,{type:e5},a=>{var s;const i=(s=a==null?void 0:a[0])===null||s===void 0?void 0:s[e5];i!==void 0&&r(!!i),Kd(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Lpe(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return dY()||sY()||WO()}}const cge=lge;var jU="@firebase/auth",PU="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uge{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){an(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dge(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fge(t){pv(new Dp("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:i,authDomain:l}=n.options;an(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:i,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fY(t)},u=new Bme(n,a,s,c);return Ume(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),pv(new Dp("auth-internal",e=>{const r=mm(e.getProvider("auth").getImmediate());return(n=>new uge(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),U0(jU,PU,dge(t)),U0(jU,PU,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Age=5*60,hge=VX("authIdTokenMaxAge")||Age;let BU=null;const mge=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>hge)return;const a=r==null?void 0:r.token;BU!==a&&(BU=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function cT(t=$O()){const e=VO(t,"auth");if(e.isInitialized())return e.getImmediate();const r=Lme(t,{popupRedirectResolver:cge,persistence:[EY,e6,t6]}),n=VX("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const i=mge(s.toString());ope(r,i,()=>i(r.currentUser)),ipe(r,l=>i(l))}}const a=UX("auth");return a&&Qme(r,`http://${a}`),r}function pge(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Tme({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const s=Of("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",pge().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fge("Browser");var gge="firebase",xge="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */U0(gge,xge,"app");var TU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mp,jY;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,S){function E(){}E.prototype=S.prototype,_.D=S.prototype,_.prototype=new E,_.prototype.constructor=_,_.C=function(k,P,T){for(var O=Array(arguments.length-2),W=2;W<arguments.length;W++)O[W-2]=arguments[W];return S.prototype[P].apply(k,O)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(_,S,E){E||(E=0);var k=Array(16);if(typeof S=="string")for(var P=0;16>P;++P)k[P]=S.charCodeAt(E++)|S.charCodeAt(E++)<<8|S.charCodeAt(E++)<<16|S.charCodeAt(E++)<<24;else for(P=0;16>P;++P)k[P]=S[E++]|S[E++]<<8|S[E++]<<16|S[E++]<<24;S=_.g[0],E=_.g[1],P=_.g[2];var T=_.g[3],O=S+(T^E&(P^T))+k[0]+3614090360&4294967295;S=E+(O<<7&4294967295|O>>>25),O=T+(P^S&(E^P))+k[1]+3905402710&4294967295,T=S+(O<<12&4294967295|O>>>20),O=P+(E^T&(S^E))+k[2]+606105819&4294967295,P=T+(O<<17&4294967295|O>>>15),O=E+(S^P&(T^S))+k[3]+3250441966&4294967295,E=P+(O<<22&4294967295|O>>>10),O=S+(T^E&(P^T))+k[4]+4118548399&4294967295,S=E+(O<<7&4294967295|O>>>25),O=T+(P^S&(E^P))+k[5]+1200080426&4294967295,T=S+(O<<12&4294967295|O>>>20),O=P+(E^T&(S^E))+k[6]+2821735955&4294967295,P=T+(O<<17&4294967295|O>>>15),O=E+(S^P&(T^S))+k[7]+4249261313&4294967295,E=P+(O<<22&4294967295|O>>>10),O=S+(T^E&(P^T))+k[8]+1770035416&4294967295,S=E+(O<<7&4294967295|O>>>25),O=T+(P^S&(E^P))+k[9]+2336552879&4294967295,T=S+(O<<12&4294967295|O>>>20),O=P+(E^T&(S^E))+k[10]+4294925233&4294967295,P=T+(O<<17&4294967295|O>>>15),O=E+(S^P&(T^S))+k[11]+2304563134&4294967295,E=P+(O<<22&4294967295|O>>>10),O=S+(T^E&(P^T))+k[12]+1804603682&4294967295,S=E+(O<<7&4294967295|O>>>25),O=T+(P^S&(E^P))+k[13]+4254626195&4294967295,T=S+(O<<12&4294967295|O>>>20),O=P+(E^T&(S^E))+k[14]+2792965006&4294967295,P=T+(O<<17&4294967295|O>>>15),O=E+(S^P&(T^S))+k[15]+1236535329&4294967295,E=P+(O<<22&4294967295|O>>>10),O=S+(P^T&(E^P))+k[1]+4129170786&4294967295,S=E+(O<<5&4294967295|O>>>27),O=T+(E^P&(S^E))+k[6]+3225465664&4294967295,T=S+(O<<9&4294967295|O>>>23),O=P+(S^E&(T^S))+k[11]+643717713&4294967295,P=T+(O<<14&4294967295|O>>>18),O=E+(T^S&(P^T))+k[0]+3921069994&4294967295,E=P+(O<<20&4294967295|O>>>12),O=S+(P^T&(E^P))+k[5]+3593408605&4294967295,S=E+(O<<5&4294967295|O>>>27),O=T+(E^P&(S^E))+k[10]+38016083&4294967295,T=S+(O<<9&4294967295|O>>>23),O=P+(S^E&(T^S))+k[15]+3634488961&4294967295,P=T+(O<<14&4294967295|O>>>18),O=E+(T^S&(P^T))+k[4]+3889429448&4294967295,E=P+(O<<20&4294967295|O>>>12),O=S+(P^T&(E^P))+k[9]+568446438&4294967295,S=E+(O<<5&4294967295|O>>>27),O=T+(E^P&(S^E))+k[14]+3275163606&4294967295,T=S+(O<<9&4294967295|O>>>23),O=P+(S^E&(T^S))+k[3]+4107603335&4294967295,P=T+(O<<14&4294967295|O>>>18),O=E+(T^S&(P^T))+k[8]+1163531501&4294967295,E=P+(O<<20&4294967295|O>>>12),O=S+(P^T&(E^P))+k[13]+2850285829&4294967295,S=E+(O<<5&4294967295|O>>>27),O=T+(E^P&(S^E))+k[2]+4243563512&4294967295,T=S+(O<<9&4294967295|O>>>23),O=P+(S^E&(T^S))+k[7]+1735328473&4294967295,P=T+(O<<14&4294967295|O>>>18),O=E+(T^S&(P^T))+k[12]+2368359562&4294967295,E=P+(O<<20&4294967295|O>>>12),O=S+(E^P^T)+k[5]+4294588738&4294967295,S=E+(O<<4&4294967295|O>>>28),O=T+(S^E^P)+k[8]+2272392833&4294967295,T=S+(O<<11&4294967295|O>>>21),O=P+(T^S^E)+k[11]+1839030562&4294967295,P=T+(O<<16&4294967295|O>>>16),O=E+(P^T^S)+k[14]+4259657740&4294967295,E=P+(O<<23&4294967295|O>>>9),O=S+(E^P^T)+k[1]+2763975236&4294967295,S=E+(O<<4&4294967295|O>>>28),O=T+(S^E^P)+k[4]+1272893353&4294967295,T=S+(O<<11&4294967295|O>>>21),O=P+(T^S^E)+k[7]+4139469664&4294967295,P=T+(O<<16&4294967295|O>>>16),O=E+(P^T^S)+k[10]+3200236656&4294967295,E=P+(O<<23&4294967295|O>>>9),O=S+(E^P^T)+k[13]+681279174&4294967295,S=E+(O<<4&4294967295|O>>>28),O=T+(S^E^P)+k[0]+3936430074&4294967295,T=S+(O<<11&4294967295|O>>>21),O=P+(T^S^E)+k[3]+3572445317&4294967295,P=T+(O<<16&4294967295|O>>>16),O=E+(P^T^S)+k[6]+76029189&4294967295,E=P+(O<<23&4294967295|O>>>9),O=S+(E^P^T)+k[9]+3654602809&4294967295,S=E+(O<<4&4294967295|O>>>28),O=T+(S^E^P)+k[12]+3873151461&4294967295,T=S+(O<<11&4294967295|O>>>21),O=P+(T^S^E)+k[15]+530742520&4294967295,P=T+(O<<16&4294967295|O>>>16),O=E+(P^T^S)+k[2]+3299628645&4294967295,E=P+(O<<23&4294967295|O>>>9),O=S+(P^(E|~T))+k[0]+4096336452&4294967295,S=E+(O<<6&4294967295|O>>>26),O=T+(E^(S|~P))+k[7]+1126891415&4294967295,T=S+(O<<10&4294967295|O>>>22),O=P+(S^(T|~E))+k[14]+2878612391&4294967295,P=T+(O<<15&4294967295|O>>>17),O=E+(T^(P|~S))+k[5]+4237533241&4294967295,E=P+(O<<21&4294967295|O>>>11),O=S+(P^(E|~T))+k[12]+1700485571&4294967295,S=E+(O<<6&4294967295|O>>>26),O=T+(E^(S|~P))+k[3]+2399980690&4294967295,T=S+(O<<10&4294967295|O>>>22),O=P+(S^(T|~E))+k[10]+4293915773&4294967295,P=T+(O<<15&4294967295|O>>>17),O=E+(T^(P|~S))+k[1]+2240044497&4294967295,E=P+(O<<21&4294967295|O>>>11),O=S+(P^(E|~T))+k[8]+1873313359&4294967295,S=E+(O<<6&4294967295|O>>>26),O=T+(E^(S|~P))+k[15]+4264355552&4294967295,T=S+(O<<10&4294967295|O>>>22),O=P+(S^(T|~E))+k[6]+2734768916&4294967295,P=T+(O<<15&4294967295|O>>>17),O=E+(T^(P|~S))+k[13]+1309151649&4294967295,E=P+(O<<21&4294967295|O>>>11),O=S+(P^(E|~T))+k[4]+4149444226&4294967295,S=E+(O<<6&4294967295|O>>>26),O=T+(E^(S|~P))+k[11]+3174756917&4294967295,T=S+(O<<10&4294967295|O>>>22),O=P+(S^(T|~E))+k[2]+718787259&4294967295,P=T+(O<<15&4294967295|O>>>17),O=E+(T^(P|~S))+k[9]+3951481745&4294967295,_.g[0]=_.g[0]+S&4294967295,_.g[1]=_.g[1]+(P+(O<<21&4294967295|O>>>11))&4294967295,_.g[2]=_.g[2]+P&4294967295,_.g[3]=_.g[3]+T&4294967295}n.prototype.u=function(_,S){S===void 0&&(S=_.length);for(var E=S-this.blockSize,k=this.B,P=this.h,T=0;T<S;){if(P==0)for(;T<=E;)a(this,_,T),T+=this.blockSize;if(typeof _=="string"){for(;T<S;)if(k[P++]=_.charCodeAt(T++),P==this.blockSize){a(this,k),P=0;break}}else for(;T<S;)if(k[P++]=_[T++],P==this.blockSize){a(this,k),P=0;break}}this.h=P,this.o+=S},n.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var S=1;S<_.length-8;++S)_[S]=0;var E=8*this.o;for(S=_.length-8;S<_.length;++S)_[S]=E&255,E/=256;for(this.u(_),_=Array(16),S=E=0;4>S;++S)for(var k=0;32>k;k+=8)_[E++]=this.g[S]>>>k&255;return _};function s(_,S){var E=l;return Object.prototype.hasOwnProperty.call(E,_)?E[_]:E[_]=S(_)}function i(_,S){this.h=S;for(var E=[],k=!0,P=_.length-1;0<=P;P--){var T=_[P]|0;k&&T==S||(E[P]=T,k=!1)}this.g=E}var l={};function c(_){return-128<=_&&128>_?s(_,function(S){return new i([S|0],0>S?-1:0)}):new i([_|0],0>_?-1:0)}function u(_){if(isNaN(_)||!isFinite(_))return f;if(0>_)return g(u(-_));for(var S=[],E=1,k=0;_>=E;k++)S[k]=_/E|0,E*=4294967296;return new i(S,0)}function d(_,S){if(_.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(_.charAt(0)=="-")return g(d(_.substring(1),S));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=u(Math.pow(S,8)),k=f,P=0;P<_.length;P+=8){var T=Math.min(8,_.length-P),O=parseInt(_.substring(P,P+T),S);8>T?(T=u(Math.pow(S,T)),k=k.j(T).add(u(O))):(k=k.j(E),k=k.add(u(O)))}return k}var f=c(0),h=c(1),A=c(16777216);t=i.prototype,t.m=function(){if(p(this))return-g(this).m();for(var _=0,S=1,E=0;E<this.g.length;E++){var k=this.i(E);_+=(0<=k?k:4294967296+k)*S,S*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(m(this))return"0";if(p(this))return"-"+g(this).toString(_);for(var S=u(Math.pow(_,6)),E=this,k="";;){var P=w(E,S).g;E=x(E,P.j(S));var T=((0<E.g.length?E.g[0]:E.h)>>>0).toString(_);if(E=P,m(E))return T+k;for(;6>T.length;)T="0"+T;k=T+k}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function m(_){if(_.h!=0)return!1;for(var S=0;S<_.g.length;S++)if(_.g[S]!=0)return!1;return!0}function p(_){return _.h==-1}t.l=function(_){return _=x(this,_),p(_)?-1:m(_)?0:1};function g(_){for(var S=_.g.length,E=[],k=0;k<S;k++)E[k]=~_.g[k];return new i(E,~_.h).add(h)}t.abs=function(){return p(this)?g(this):this},t.add=function(_){for(var S=Math.max(this.g.length,_.g.length),E=[],k=0,P=0;P<=S;P++){var T=k+(this.i(P)&65535)+(_.i(P)&65535),O=(T>>>16)+(this.i(P)>>>16)+(_.i(P)>>>16);k=O>>>16,T&=65535,O&=65535,E[P]=O<<16|T}return new i(E,E[E.length-1]&-2147483648?-1:0)};function x(_,S){return _.add(g(S))}t.j=function(_){if(m(this)||m(_))return f;if(p(this))return p(_)?g(this).j(g(_)):g(g(this).j(_));if(p(_))return g(this.j(g(_)));if(0>this.l(A)&&0>_.l(A))return u(this.m()*_.m());for(var S=this.g.length+_.g.length,E=[],k=0;k<2*S;k++)E[k]=0;for(k=0;k<this.g.length;k++)for(var P=0;P<_.g.length;P++){var T=this.i(k)>>>16,O=this.i(k)&65535,W=_.i(P)>>>16,Ae=_.i(P)&65535;E[2*k+2*P]+=O*Ae,y(E,2*k+2*P),E[2*k+2*P+1]+=T*Ae,y(E,2*k+2*P+1),E[2*k+2*P+1]+=O*W,y(E,2*k+2*P+1),E[2*k+2*P+2]+=T*W,y(E,2*k+2*P+2)}for(k=0;k<S;k++)E[k]=E[2*k+1]<<16|E[2*k];for(k=S;k<2*S;k++)E[k]=0;return new i(E,0)};function y(_,S){for(;(_[S]&65535)!=_[S];)_[S+1]+=_[S]>>>16,_[S]&=65535,S++}function b(_,S){this.g=_,this.h=S}function w(_,S){if(m(S))throw Error("division by zero");if(m(_))return new b(f,f);if(p(_))return S=w(g(_),S),new b(g(S.g),g(S.h));if(p(S))return S=w(_,g(S)),new b(g(S.g),S.h);if(30<_.g.length){if(p(_)||p(S))throw Error("slowDivide_ only works with positive integers.");for(var E=h,k=S;0>=k.l(_);)E=j(E),k=j(k);var P=I(E,1),T=I(k,1);for(k=I(k,2),E=I(E,2);!m(k);){var O=T.add(k);0>=O.l(_)&&(P=P.add(E),T=O),k=I(k,1),E=I(E,1)}return S=x(_,P.j(S)),new b(P,S)}for(P=f;0<=_.l(S);){for(E=Math.max(1,Math.floor(_.m()/S.m())),k=Math.ceil(Math.log(E)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),T=u(E),O=T.j(S);p(O)||0<O.l(_);)E-=k,T=u(E),O=T.j(S);m(T)&&(T=h),P=P.add(T),_=x(_,O)}return new b(P,_)}t.A=function(_){return w(this,_).h},t.and=function(_){for(var S=Math.max(this.g.length,_.g.length),E=[],k=0;k<S;k++)E[k]=this.i(k)&_.i(k);return new i(E,this.h&_.h)},t.or=function(_){for(var S=Math.max(this.g.length,_.g.length),E=[],k=0;k<S;k++)E[k]=this.i(k)|_.i(k);return new i(E,this.h|_.h)},t.xor=function(_){for(var S=Math.max(this.g.length,_.g.length),E=[],k=0;k<S;k++)E[k]=this.i(k)^_.i(k);return new i(E,this.h^_.h)};function j(_){for(var S=_.g.length+1,E=[],k=0;k<S;k++)E[k]=_.i(k)<<1|_.i(k-1)>>>31;return new i(E,_.h)}function I(_,S){var E=S>>5;S%=32;for(var k=_.g.length-E,P=[],T=0;T<k;T++)P[T]=0<S?_.i(T+E)>>>S|_.i(T+E+1)<<32-S:_.i(T+E);return new i(P,_.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,jY=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=u,i.fromString=d,mp=i}).apply(typeof TU<"u"?TU:typeof self<"u"?self:typeof window<"u"?window:{});var QN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var PY,Ey,BY,Q_,uT,TY,kY,FY;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(C,q,he){return C==Array.prototype||C==Object.prototype||(C[q]=he.value),C};function r(C){C=[typeof globalThis=="object"&&globalThis,C,typeof window=="object"&&window,typeof self=="object"&&self,typeof QN=="object"&&QN];for(var q=0;q<C.length;++q){var he=C[q];if(he&&he.Math==Math)return he}throw Error("Cannot find global object")}var n=r(this);function a(C,q){if(q)e:{var he=n;C=C.split(".");for(var We=0;We<C.length-1;We++){var jt=C[We];if(!(jt in he))break e;he=he[jt]}C=C[C.length-1],We=he[C],q=q(We),q!=We&&q!=null&&e(he,C,{configurable:!0,writable:!0,value:q})}}function s(C,q){C instanceof String&&(C+="");var he=0,We=!1,jt={next:function(){if(!We&&he<C.length){var Qt=he++;return{value:q(Qt,C[Qt]),done:!1}}return We=!0,{done:!0,value:void 0}}};return jt[Symbol.iterator]=function(){return jt},jt}a("Array.prototype.values",function(C){return C||function(){return s(this,function(q,he){return he})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},l=this||self;function c(C){var q=typeof C;return q=q!="object"?q:C?Array.isArray(C)?"array":q:"null",q=="array"||q=="object"&&typeof C.length=="number"}function u(C){var q=typeof C;return q=="object"&&C!=null||q=="function"}function d(C,q,he){return C.call.apply(C.bind,arguments)}function f(C,q,he){if(!C)throw Error();if(2<arguments.length){var We=Array.prototype.slice.call(arguments,2);return function(){var jt=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(jt,We),C.apply(q,jt)}}return function(){return C.apply(q,arguments)}}function h(C,q,he){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,h.apply(null,arguments)}function A(C,q){var he=Array.prototype.slice.call(arguments,1);return function(){var We=he.slice();return We.push.apply(We,arguments),C.apply(this,We)}}function m(C,q){function he(){}he.prototype=q.prototype,C.aa=q.prototype,C.prototype=new he,C.prototype.constructor=C,C.Qb=function(We,jt,Qt){for(var mr=Array(arguments.length-2),Ln=2;Ln<arguments.length;Ln++)mr[Ln-2]=arguments[Ln];return q.prototype[jt].apply(We,mr)}}function p(C){const q=C.length;if(0<q){const he=Array(q);for(let We=0;We<q;We++)he[We]=C[We];return he}return[]}function g(C,q){for(let he=1;he<arguments.length;he++){const We=arguments[he];if(c(We)){const jt=C.length||0,Qt=We.length||0;C.length=jt+Qt;for(let mr=0;mr<Qt;mr++)C[jt+mr]=We[mr]}else C.push(We)}}class x{constructor(q,he){this.i=q,this.j=he,this.h=0,this.g=null}get(){let q;return 0<this.h?(this.h--,q=this.g,this.g=q.next,q.next=null):q=this.i(),q}}function y(C){return/^[\s\xa0]*$/.test(C)}function b(){var C=l.navigator;return C&&(C=C.userAgent)?C:""}function w(C){return w[" "](C),C}w[" "]=function(){};var j=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function I(C,q,he){for(const We in C)q.call(he,C[We],We,C)}function _(C,q){for(const he in C)q.call(void 0,C[he],he,C)}function S(C){const q={};for(const he in C)q[he]=C[he];return q}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(C,q){let he,We;for(let jt=1;jt<arguments.length;jt++){We=arguments[jt];for(he in We)C[he]=We[he];for(let Qt=0;Qt<E.length;Qt++)he=E[Qt],Object.prototype.hasOwnProperty.call(We,he)&&(C[he]=We[he])}}function P(C){var q=1;C=C.split(":");const he=[];for(;0<q&&C.length;)he.push(C.shift()),q--;return C.length&&he.push(C.join(":")),he}function T(C){l.setTimeout(()=>{throw C},0)}function O(){var C=ee;let q=null;return C.g&&(q=C.g,C.g=C.g.next,C.g||(C.h=null),q.next=null),q}class W{constructor(){this.h=this.g=null}add(q,he){const We=Ae.get();We.set(q,he),this.h?this.h.next=We:this.g=We,this.h=We}}var Ae=new x(()=>new de,C=>C.reset());class de{constructor(){this.next=this.g=this.h=null}set(q,he){this.h=q,this.g=he,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,ge=!1,ee=new W,Fe=()=>{const C=l.Promise.resolve(void 0);fe=()=>{C.then(Pe)}};var Pe=()=>{for(var C;C=O();){try{C.h.call(C.g)}catch(he){T(he)}var q=Ae;q.j(C),100>q.h&&(q.h++,C.next=q.g,q.g=C)}ge=!1};function F(){this.s=this.s,this.C=this.C}F.prototype.s=!1,F.prototype.ma=function(){this.s||(this.s=!0,this.N())},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Q(C,q){this.type=C,this.g=this.target=q,this.defaultPrevented=!1}Q.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var C=!1,q=Object.defineProperty({},"passive",{get:function(){C=!0}});try{const he=()=>{};l.addEventListener("test",he,q),l.removeEventListener("test",he,q)}catch{}return C}();function R(C,q){if(Q.call(this,C?C.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,C){var he=this.type=C.type,We=C.changedTouches&&C.changedTouches.length?C.changedTouches[0]:null;if(this.target=C.target||C.srcElement,this.g=q,q=C.relatedTarget){if(j){e:{try{w(q.nodeName);var jt=!0;break e}catch{}jt=!1}jt||(q=null)}}else he=="mouseover"?q=C.fromElement:he=="mouseout"&&(q=C.toElement);this.relatedTarget=q,We?(this.clientX=We.clientX!==void 0?We.clientX:We.pageX,this.clientY=We.clientY!==void 0?We.clientY:We.pageY,this.screenX=We.screenX||0,this.screenY=We.screenY||0):(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0),this.button=C.button,this.key=C.key||"",this.ctrlKey=C.ctrlKey,this.altKey=C.altKey,this.shiftKey=C.shiftKey,this.metaKey=C.metaKey,this.pointerId=C.pointerId||0,this.pointerType=typeof C.pointerType=="string"?C.pointerType:z[C.pointerType]||"",this.state=C.state,this.i=C,C.defaultPrevented&&R.aa.h.call(this)}}m(R,Q);var z={2:"touch",3:"pen",4:"mouse"};R.prototype.h=function(){R.aa.h.call(this);var C=this.i;C.preventDefault?C.preventDefault():C.returnValue=!1};var J="closure_listenable_"+(1e6*Math.random()|0),D=0;function U(C,q,he,We,jt){this.listener=C,this.proxy=null,this.src=q,this.type=he,this.capture=!!We,this.ha=jt,this.key=++D,this.da=this.fa=!1}function ne(C){C.da=!0,C.listener=null,C.proxy=null,C.src=null,C.ha=null}function ve(C){this.src=C,this.g={},this.h=0}ve.prototype.add=function(C,q,he,We,jt){var Qt=C.toString();C=this.g[Qt],C||(C=this.g[Qt]=[],this.h++);var mr=Ye(C,q,We,jt);return-1<mr?(q=C[mr],he||(q.fa=!1)):(q=new U(q,this.src,Qt,!!We,jt),q.fa=he,C.push(q)),q};function L(C,q){var he=q.type;if(he in C.g){var We=C.g[he],jt=Array.prototype.indexOf.call(We,q,void 0),Qt;(Qt=0<=jt)&&Array.prototype.splice.call(We,jt,1),Qt&&(ne(q),C.g[he].length==0&&(delete C.g[he],C.h--))}}function Ye(C,q,he,We){for(var jt=0;jt<C.length;++jt){var Qt=C[jt];if(!Qt.da&&Qt.listener==q&&Qt.capture==!!he&&Qt.ha==We)return jt}return-1}var ie="closure_lm_"+(1e6*Math.random()|0),Z={};function Oe(C,q,he,We,jt){if(Array.isArray(q)){for(var Qt=0;Qt<q.length;Qt++)Oe(C,q[Qt],he,We,jt);return null}return he=rt(he),C&&C[J]?C.K(q,he,u(We)?!!We.capture:!1,jt):le(C,q,he,!1,We,jt)}function le(C,q,he,We,jt,Qt){if(!q)throw Error("Invalid event type");var mr=u(jt)?!!jt.capture:!!jt,Ln=ut(C);if(Ln||(C[ie]=Ln=new ve(C)),he=Ln.add(q,he,We,mr,Qt),he.proxy)return he;if(We=se(),he.proxy=We,We.src=C,We.listener=he,C.addEventListener)H||(jt=mr),jt===void 0&&(jt=!1),C.addEventListener(q.toString(),We,jt);else if(C.attachEvent)C.attachEvent(ot(q.toString()),We);else if(C.addListener&&C.removeListener)C.addListener(We);else throw Error("addEventListener and attachEvent are unavailable.");return he}function se(){function C(he){return q.call(C.src,C.listener,he)}const q=mt;return C}function Be(C,q,he,We,jt){if(Array.isArray(q))for(var Qt=0;Qt<q.length;Qt++)Be(C,q[Qt],he,We,jt);else We=u(We)?!!We.capture:!!We,he=rt(he),C&&C[J]?(C=C.i,q=String(q).toString(),q in C.g&&(Qt=C.g[q],he=Ye(Qt,he,We,jt),-1<he&&(ne(Qt[he]),Array.prototype.splice.call(Qt,he,1),Qt.length==0&&(delete C.g[q],C.h--)))):C&&(C=ut(C))&&(q=C.g[q.toString()],C=-1,q&&(C=Ye(q,he,We,jt)),(he=-1<C?q[C]:null)&&je(he))}function je(C){if(typeof C!="number"&&C&&!C.da){var q=C.src;if(q&&q[J])L(q.i,C);else{var he=C.type,We=C.proxy;q.removeEventListener?q.removeEventListener(he,We,C.capture):q.detachEvent?q.detachEvent(ot(he),We):q.addListener&&q.removeListener&&q.removeListener(We),(he=ut(q))?(L(he,C),he.h==0&&(he.src=null,q[ie]=null)):ne(C)}}}function ot(C){return C in Z?Z[C]:Z[C]="on"+C}function mt(C,q){if(C.da)C=!0;else{q=new R(q,this);var he=C.listener,We=C.ha||C.src;C.fa&&je(C),C=he.call(We,q)}return C}function ut(C){return C=C[ie],C instanceof ve?C:null}var _e="__closure_events_fn_"+(1e9*Math.random()>>>0);function rt(C){return typeof C=="function"?C:(C[_e]||(C[_e]=function(q){return C.handleEvent(q)}),C[_e])}function we(){F.call(this),this.i=new ve(this),this.M=this,this.F=null}m(we,F),we.prototype[J]=!0,we.prototype.removeEventListener=function(C,q,he,We){Be(this,C,q,he,We)};function Ce(C,q){var he,We=C.F;if(We)for(he=[];We;We=We.F)he.push(We);if(C=C.M,We=q.type||q,typeof q=="string")q=new Q(q,C);else if(q instanceof Q)q.target=q.target||C;else{var jt=q;q=new Q(We,C),k(q,jt)}if(jt=!0,he)for(var Qt=he.length-1;0<=Qt;Qt--){var mr=q.g=he[Qt];jt=Ue(mr,We,!0,q)&&jt}if(mr=q.g=C,jt=Ue(mr,We,!0,q)&&jt,jt=Ue(mr,We,!1,q)&&jt,he)for(Qt=0;Qt<he.length;Qt++)mr=q.g=he[Qt],jt=Ue(mr,We,!1,q)&&jt}we.prototype.N=function(){if(we.aa.N.call(this),this.i){var C=this.i,q;for(q in C.g){for(var he=C.g[q],We=0;We<he.length;We++)ne(he[We]);delete C.g[q],C.h--}}this.F=null},we.prototype.K=function(C,q,he,We){return this.i.add(String(C),q,!1,he,We)},we.prototype.L=function(C,q,he,We){return this.i.add(String(C),q,!0,he,We)};function Ue(C,q,he,We){if(q=C.i.g[String(q)],!q)return!0;q=q.concat();for(var jt=!0,Qt=0;Qt<q.length;++Qt){var mr=q[Qt];if(mr&&!mr.da&&mr.capture==he){var Ln=mr.listener,_s=mr.ha||mr.src;mr.fa&&L(C.i,mr),jt=Ln.call(_s,We)!==!1&&jt}}return jt&&!We.defaultPrevented}function Ve(C,q,he){if(typeof C=="function")he&&(C=h(C,he));else if(C&&typeof C.handleEvent=="function")C=h(C.handleEvent,C);else throw Error("Invalid listener argument");return 2147483647<Number(q)?-1:l.setTimeout(C,q||0)}function ue(C){C.g=Ve(()=>{C.g=null,C.i&&(C.i=!1,ue(C))},C.l);const q=C.h;C.h=null,C.m.apply(null,q)}class ce extends F{constructor(q,he){super(),this.m=q,this.l=he,this.h=null,this.i=!1,this.g=null}j(q){this.h=arguments,this.g?this.i=!0:ue(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Te(C){F.call(this),this.h=C,this.g={}}m(Te,F);var Xe=[];function ft(C){I(C.g,function(q,he){this.g.hasOwnProperty(he)&&je(q)},C),C.g={}}Te.prototype.N=function(){Te.aa.N.call(this),ft(this)},Te.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gt=l.JSON.stringify,vt=l.JSON.parse,At=class{stringify(C){return l.JSON.stringify(C,void 0)}parse(C){return l.JSON.parse(C,void 0)}};function ye(){}ye.prototype.h=null;function $e(C){return C.h||(C.h=C.i())}function Ne(){}var ct={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xe(){Q.call(this,"d")}m(xe,Q);function Qe(){Q.call(this,"c")}m(Qe,Q);var dt={},Bt=null;function qe(){return Bt=Bt||new we}dt.La="serverreachability";function bt(C){Q.call(this,dt.La,C)}m(bt,Q);function G(C){const q=qe();Ce(q,new bt(q))}dt.STAT_EVENT="statevent";function te(C,q){Q.call(this,dt.STAT_EVENT,C),this.stat=q}m(te,Q);function He(C){const q=qe();Ce(q,new te(q,C))}dt.Ma="timingevent";function re(C,q){Q.call(this,dt.Ma,C),this.size=q}m(re,Q);function be(C,q){if(typeof C!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){C()},q)}function Me(){this.g=!0}Me.prototype.xa=function(){this.g=!1};function tt(C,q,he,We,jt,Qt){C.info(function(){if(C.g)if(Qt)for(var mr="",Ln=Qt.split("&"),_s=0;_s<Ln.length;_s++){var In=Ln[_s].split("=");if(1<In.length){var Yn=In[0];In=In[1];var La=Yn.split("_");mr=2<=La.length&&La[1]=="type"?mr+(Yn+"="+In+"&"):mr+(Yn+"=redacted&")}}else mr=null;else mr=Qt;return"XMLHTTP REQ ("+We+") [attempt "+jt+"]: "+q+`
`+he+`
`+mr})}function lt(C,q,he,We,jt,Qt,mr){C.info(function(){return"XMLHTTP RESP ("+We+") [ attempt "+jt+"]: "+q+`
`+he+`
`+Qt+" "+mr})}function ae(C,q,he,We){C.info(function(){return"XMLHTTP TEXT ("+q+"): "+X(C,he)+(We?" "+We:"")})}function V(C,q){C.info(function(){return"TIMEOUT: "+q})}Me.prototype.info=function(){};function X(C,q){if(!C.g)return q;if(!q)return null;try{var he=JSON.parse(q);if(he){for(C=0;C<he.length;C++)if(Array.isArray(he[C])){var We=he[C];if(!(2>We.length)){var jt=We[1];if(Array.isArray(jt)&&!(1>jt.length)){var Qt=jt[0];if(Qt!="noop"&&Qt!="stop"&&Qt!="close")for(var mr=1;mr<jt.length;mr++)jt[mr]=""}}}}return gt(he)}catch{return q}}var me={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ie={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Y;function pe(){}m(pe,ye),pe.prototype.g=function(){return new XMLHttpRequest},pe.prototype.i=function(){return{}},Y=new pe;function ke(C,q,he,We){this.j=C,this.i=q,this.l=he,this.R=We||1,this.U=new Te(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Re}function Re(){this.i=null,this.g="",this.h=!1}var Ze={},nt={};function _t(C,q,he){C.L=1,C.v=fa(Ht(q)),C.m=he,C.P=!0,Ct(C,null)}function Ct(C,q){C.F=Date.now(),St(C),C.A=Ht(C.v);var he=C.A,We=C.R;Array.isArray(We)||(We=[String(We)]),Bg(he.i,"t",We),C.C=0,he=C.j.J,C.h=new Re,C.g=Qs(C.j,he?q:null,!C.m),0<C.O&&(C.M=new ce(h(C.Y,C,C.g),C.O)),q=C.U,he=C.g,We=C.ca;var jt="readystatechange";Array.isArray(jt)||(jt&&(Xe[0]=jt.toString()),jt=Xe);for(var Qt=0;Qt<jt.length;Qt++){var mr=Oe(he,jt[Qt],We||q.handleEvent,!1,q.h||q);if(!mr)break;q.g[mr.key]=mr}q=C.H?S(C.H):{},C.m?(C.u||(C.u="POST"),q["Content-Type"]="application/x-www-form-urlencoded",C.g.ea(C.A,C.u,C.m,q)):(C.u="GET",C.g.ea(C.A,C.u,null,q)),G(),tt(C.i,C.u,C.A,C.l,C.R,C.m)}ke.prototype.ca=function(C){C=C.target;const q=this.M;q&&Dl(C)==3?q.j():this.Y(C)},ke.prototype.Y=function(C){try{if(C==this.g)e:{const La=Dl(this.g);var q=this.g.Ba();const kc=this.g.Z();if(!(3>La)&&(La!=3||this.g&&(this.h.h||this.g.oa()||_m(this.g)))){this.J||La!=4||q==7||(q==8||0>=kc?G(3):G(2)),cr(this);var he=this.g.Z();this.X=he;t:if(Nt(this)){var We=_m(this.g);C="";var jt=We.length,Qt=Dl(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){lr(this),ur(this);var mr="";break t}this.h.i=new l.TextDecoder}for(q=0;q<jt;q++)this.h.h=!0,C+=this.h.i.decode(We[q],{stream:!(Qt&&q==jt-1)});We.length=0,this.h.g+=C,this.C=0,mr=this.h.g}else mr=this.g.oa();if(this.o=he==200,lt(this.i,this.u,this.A,this.l,this.R,La,he),this.o){if(this.T&&!this.K){t:{if(this.g){var Ln,_s=this.g;if((Ln=_s.g?_s.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Ln)){var In=Ln;break t}}In=null}if(he=In)ae(this.i,this.l,he,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cr(this,he);else{this.o=!1,this.s=3,He(12),lr(this),ur(this);break e}}if(this.P){he=!0;let ol;for(;!this.J&&this.C<mr.length;)if(ol=Tt(this,mr),ol==nt){La==4&&(this.s=4,He(14),he=!1),ae(this.i,this.l,null,"[Incomplete Response]");break}else if(ol==Ze){this.s=4,He(15),ae(this.i,this.l,mr,"[Invalid Chunk]"),he=!1;break}else ae(this.i,this.l,ol,null),Cr(this,ol);if(Nt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),La!=4||mr.length!=0||this.h.h||(this.s=1,He(16),he=!1),this.o=this.o&&he,!he)ae(this.i,this.l,mr,"[Invalid Chunked Response]"),lr(this),ur(this);else if(0<mr.length&&!this.W){this.W=!0;var Yn=this.j;Yn.g==this&&Yn.ba&&!Yn.M&&(Yn.j.info("Great, no buffering proxy detected. Bytes received: "+mr.length),Pr(Yn),Yn.M=!0,He(11))}}else ae(this.i,this.l,mr,null),Cr(this,mr);La==4&&lr(this),this.o&&!this.J&&(La==4?cn(this.j,this):(this.o=!1,St(this)))}else kg(this.g),he==400&&0<mr.indexOf("Unknown SID")?(this.s=3,He(12)):(this.s=0,He(13)),lr(this),ur(this)}}}catch{}finally{}};function Nt(C){return C.g?C.u=="GET"&&C.L!=2&&C.j.Ca:!1}function Tt(C,q){var he=C.C,We=q.indexOf(`
`,he);return We==-1?nt:(he=Number(q.substring(he,We)),isNaN(he)?Ze:(We+=1,We+he>q.length?nt:(q=q.slice(We,We+he),C.C=We+he,q)))}ke.prototype.cancel=function(){this.J=!0,lr(this)};function St(C){C.S=Date.now()+C.I,yt(C,C.I)}function yt(C,q){if(C.B!=null)throw Error("WatchDog timer not null");C.B=be(h(C.ba,C),q)}function cr(C){C.B&&(l.clearTimeout(C.B),C.B=null)}ke.prototype.ba=function(){this.B=null;const C=Date.now();0<=C-this.S?(V(this.i,this.A),this.L!=2&&(G(),He(17)),lr(this),this.s=2,ur(this)):yt(this,this.S-C)};function ur(C){C.j.G==0||C.J||cn(C.j,C)}function lr(C){cr(C);var q=C.M;q&&typeof q.ma=="function"&&q.ma(),C.M=null,ft(C.U),C.g&&(q=C.g,C.g=null,q.abort(),q.ma())}function Cr(C,q){try{var he=C.j;if(he.G!=0&&(he.g==C||Nn(he.h,C))){if(!C.K&&Nn(he.h,C)&&he.G==3){try{var We=he.Da.g.parse(q)}catch{We=null}if(Array.isArray(We)&&We.length==3){var jt=We;if(jt[0]==0){e:if(!he.u){if(he.g)if(he.g.F+3e3<C.F)Zr(he),yu(he);else break e;rr(he),He(18)}}else he.za=jt[1],0<he.za-he.T&&37500>jt[2]&&he.F&&he.v==0&&!he.C&&(he.C=be(h(he.Za,he),6e3));if(1>=Rr(he.h)&&he.ca){try{he.ca()}catch{}he.ca=void 0}}else na(he,11)}else if((C.K||he.g==C)&&Zr(he),!y(q))for(jt=he.Da.g.parse(q),q=0;q<jt.length;q++){let In=jt[q];if(he.T=In[0],In=In[1],he.G==2)if(In[0]=="c"){he.K=In[1],he.ia=In[2];const Yn=In[3];Yn!=null&&(he.la=Yn,he.j.info("VER="+he.la));const La=In[4];La!=null&&(he.Aa=La,he.j.info("SVER="+he.Aa));const kc=In[5];kc!=null&&typeof kc=="number"&&0<kc&&(We=1.5*kc,he.L=We,he.j.info("backChannelRequestTimeoutMs_="+We)),We=he;const ol=C.g;if(ol){const Fo=ol.g?ol.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fo){var Qt=We.h;Qt.g||Fo.indexOf("spdy")==-1&&Fo.indexOf("quic")==-1&&Fo.indexOf("h2")==-1||(Qt.j=Qt.l,Qt.g=new Set,Qt.h&&(za(Qt,Qt.h),Qt.h=null))}if(We.D){const pd=ol.g?ol.g.getResponseHeader("X-HTTP-Session-Id"):null;pd&&(We.ya=pd,Zt(We.I,We.D,pd))}}he.G=3,he.l&&he.l.ua(),he.ba&&(he.R=Date.now()-C.F,he.j.info("Handshake RTT: "+he.R+"ms")),We=he;var mr=C;if(We.qa=Aa(We,We.J?We.ia:null,We.W),mr.K){ti(We.h,mr);var Ln=mr,_s=We.L;_s&&(Ln.I=_s),Ln.B&&(cr(Ln),St(Ln)),We.g=mr}else Yt(We);0<he.i.length&&M(he)}else In[0]!="stop"&&In[0]!="close"||na(he,7);else he.G==3&&(In[0]=="stop"||In[0]=="close"?In[0]=="stop"?na(he,7):Ih(he):In[0]!="noop"&&he.l&&he.l.ta(In),he.v=0)}}G(4)}catch{}}var Nr=class{constructor(C,q){this.g=C,this.map=q}};function mn(C){this.l=C||10,l.PerformanceNavigationTiming?(C=l.performance.getEntriesByType("navigation"),C=0<C.length&&(C[0].nextHopProtocol=="hq"||C[0].nextHopProtocol=="h2")):C=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=C?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function bn(C){return C.h?!0:C.g?C.g.size>=C.j:!1}function Rr(C){return C.h?1:C.g?C.g.size:0}function Nn(C,q){return C.h?C.h==q:C.g?C.g.has(q):!1}function za(C,q){C.g?C.g.add(q):C.h=q}function ti(C,q){C.h&&C.h==q?C.h=null:C.g&&C.g.has(q)&&C.g.delete(q)}mn.prototype.cancel=function(){if(this.i=Mn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const C of this.g.values())C.cancel();this.g.clear()}};function Mn(C){if(C.h!=null)return C.i.concat(C.h.D);if(C.g!=null&&C.g.size!==0){let q=C.i;for(const he of C.g.values())q=q.concat(he.D);return q}return p(C.i)}function Us(C){if(C.V&&typeof C.V=="function")return C.V();if(typeof Map<"u"&&C instanceof Map||typeof Set<"u"&&C instanceof Set)return Array.from(C.values());if(typeof C=="string")return C.split("");if(c(C)){for(var q=[],he=C.length,We=0;We<he;We++)q.push(C[We]);return q}q=[],he=0;for(We in C)q[he++]=C[We];return q}function De(C){if(C.na&&typeof C.na=="function")return C.na();if(!C.V||typeof C.V!="function"){if(typeof Map<"u"&&C instanceof Map)return Array.from(C.keys());if(!(typeof Set<"u"&&C instanceof Set)){if(c(C)||typeof C=="string"){var q=[];C=C.length;for(var he=0;he<C;he++)q.push(he);return q}q=[],he=0;for(const We in C)q[he++]=We;return q}}}function $t(C,q){if(C.forEach&&typeof C.forEach=="function")C.forEach(q,void 0);else if(c(C)||typeof C=="string")Array.prototype.forEach.call(C,q,void 0);else for(var he=De(C),We=Us(C),jt=We.length,Qt=0;Qt<jt;Qt++)q.call(void 0,We[Qt],he&&he[Qt],C)}var Gt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function It(C,q){if(C){C=C.split("&");for(var he=0;he<C.length;he++){var We=C[he].indexOf("="),jt=null;if(0<=We){var Qt=C[he].substring(0,We);jt=C[he].substring(We+1)}else Qt=C[he];q(Qt,jt?decodeURIComponent(jt.replace(/\+/g," ")):"")}}}function kt(C){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,C instanceof kt){this.h=C.h,Ft(this,C.j),this.o=C.o,this.g=C.g,Vt(this,C.s),this.l=C.l;var q=C.i,he=new ko;he.i=q.i,q.g&&(he.g=new Map(q.g),he.h=q.h),nr(this,he),this.m=C.m}else C&&(q=String(C).match(Gt))?(this.h=!1,Ft(this,q[1]||"",!0),this.o=os(q[2]||""),this.g=os(q[3]||"",!0),Vt(this,q[4]),this.l=os(q[5]||"",!0),nr(this,q[6]||"",!0),this.m=os(q[7]||"")):(this.h=!1,this.i=new ko(null,this.h))}kt.prototype.toString=function(){var C=[],q=this.j;q&&C.push(Xn(q,il,!0),":");var he=this.g;return(he||q=="file")&&(C.push("//"),(q=this.o)&&C.push(Xn(q,il,!0),"@"),C.push(encodeURIComponent(String(he)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),he=this.s,he!=null&&C.push(":",String(he))),(he=this.l)&&(this.g&&he.charAt(0)!="/"&&C.push("/"),C.push(Xn(he,he.charAt(0)=="/"?fd:dd,!0))),(he=this.i.toString())&&C.push("?",he),(he=this.m)&&C.push("#",Xn(he,mu)),C.join("")};function Ht(C){return new kt(C)}function Ft(C,q,he){C.j=he?os(q,!0):q,C.j&&(C.j=C.j.replace(/:$/,""))}function Vt(C,q){if(q){if(q=Number(q),isNaN(q)||0>q)throw Error("Bad port number "+q);C.s=q}else C.s=null}function nr(C,q,he){q instanceof ko?(C.i=q,v1(C.i,C.h)):(he||(q=Xn(q,Ad)),C.i=new ko(q,C.h))}function Zt(C,q,he){C.i.set(q,he)}function fa(C){return Zt(C,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),C}function os(C,q){return C?q?decodeURI(C.replace(/%25/g,"%2525")):decodeURIComponent(C):""}function Xn(C,q,he){return typeof C=="string"?(C=encodeURI(C).replace(q,bs),he&&(C=C.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C):null}function bs(C){return C=C.charCodeAt(0),"%"+(C>>4&15).toString(16)+(C&15).toString(16)}var il=/[#\/\?@]/g,dd=/[#\?:]/g,fd=/[#\?]/g,Ad=/[#\?@]/g,mu=/#/g;function ko(C,q){this.h=this.g=null,this.i=C||null,this.j=!!q}function pu(C){C.g||(C.g=new Map,C.h=0,C.i&&It(C.i,function(q,he){C.add(decodeURIComponent(q.replace(/\+/g," ")),he)}))}t=ko.prototype,t.add=function(C,q){pu(this),this.i=null,C=Jr(this,C);var he=this.g.get(C);return he||this.g.set(C,he=[]),he.push(q),this.h+=1,this};function af(C,q){pu(C),q=Jr(C,q),C.g.has(q)&&(C.i=null,C.h-=C.g.get(q).length,C.g.delete(q))}function Ch(C,q){return pu(C),q=Jr(C,q),C.g.has(q)}t.forEach=function(C,q){pu(this),this.g.forEach(function(he,We){he.forEach(function(jt){C.call(q,jt,We,this)},this)},this)},t.na=function(){pu(this);const C=Array.from(this.g.values()),q=Array.from(this.g.keys()),he=[];for(let We=0;We<q.length;We++){const jt=C[We];for(let Qt=0;Qt<jt.length;Qt++)he.push(q[We])}return he},t.V=function(C){pu(this);let q=[];if(typeof C=="string")Ch(this,C)&&(q=q.concat(this.g.get(Jr(this,C))));else{C=Array.from(this.g.values());for(let he=0;he<C.length;he++)q=q.concat(C[he])}return q},t.set=function(C,q){return pu(this),this.i=null,C=Jr(this,C),Ch(this,C)&&(this.h-=this.g.get(C).length),this.g.set(C,[q]),this.h+=1,this},t.get=function(C,q){return C?(C=this.V(C),0<C.length?String(C[0]):q):q};function Bg(C,q,he){af(C,q),0<he.length&&(C.i=null,C.g.set(Jr(C,q),p(he)),C.h+=he.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const C=[],q=Array.from(this.g.keys());for(var he=0;he<q.length;he++){var We=q[he];const Qt=encodeURIComponent(String(We)),mr=this.V(We);for(We=0;We<mr.length;We++){var jt=Qt;mr[We]!==""&&(jt+="="+encodeURIComponent(String(mr[We]))),C.push(jt)}}return this.i=C.join("&")};function Jr(C,q){return q=String(q),C.j&&(q=q.toLowerCase()),q}function v1(C,q){q&&!C.j&&(pu(C),C.i=null,C.g.forEach(function(he,We){var jt=We.toLowerCase();We!=jt&&(af(this,We),Bg(this,jt,he))},C)),C.j=q}function y1(C,q){const he=new Me;if(l.Image){const We=new Image;We.onload=A(co,he,"TestLoadImage: loaded",!0,q,We),We.onerror=A(co,he,"TestLoadImage: error",!1,q,We),We.onabort=A(co,he,"TestLoadImage: abort",!1,q,We),We.ontimeout=A(co,he,"TestLoadImage: timeout",!1,q,We),l.setTimeout(function(){We.ontimeout&&We.ontimeout()},1e4),We.src=C}else q(!1)}function b1(C,q){const he=new Me,We=new AbortController,jt=setTimeout(()=>{We.abort(),co(he,"TestPingServer: timeout",!1,q)},1e4);fetch(C,{signal:We.signal}).then(Qt=>{clearTimeout(jt),Qt.ok?co(he,"TestPingServer: ok",!0,q):co(he,"TestPingServer: server error",!1,q)}).catch(()=>{clearTimeout(jt),co(he,"TestPingServer: error",!1,q)})}function co(C,q,he,We,jt){try{jt&&(jt.onload=null,jt.onerror=null,jt.onabort=null,jt.ontimeout=null),We(he)}catch{}}function hd(){this.g=new At}function w1(C,q,he){const We=he||"";try{$t(C,function(jt,Qt){let mr=jt;u(jt)&&(mr=gt(jt)),q.push(We+Qt+"="+encodeURIComponent(mr))})}catch(jt){throw q.push(We+"type="+encodeURIComponent("_badmap")),jt}}function _h(C){this.l=C.Ub||null,this.j=C.eb||!1}m(_h,ye),_h.prototype.g=function(){return new md(this.l,this.j)},_h.prototype.i=function(C){return function(){return C}}({});function md(C,q){we.call(this),this.D=C,this.o=q,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(md,we),t=md.prototype,t.open=function(C,q){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=C,this.A=q,this.readyState=1,Jf(this)},t.send=function(C){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const q={headers:this.u,method:this.B,credentials:this.m,cache:void 0};C&&(q.body=C),(this.D||l).fetch(new Request(this.A,q)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Tc(this)),this.readyState=0},t.Sa=function(C){if(this.g&&(this.l=C,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=C.headers,this.readyState=2,Jf(this)),this.g&&(this.readyState=3,Jf(this),this.g)))if(this.responseType==="arraybuffer")C.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in C){if(this.j=C.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Eh(this)}else C.text().then(this.Ra.bind(this),this.ga.bind(this))};function Eh(C){C.j.read().then(C.Pa.bind(C)).catch(C.ga.bind(C))}t.Pa=function(C){if(this.g){if(this.o&&C.value)this.response.push(C.value);else if(!this.o){var q=C.value?C.value:new Uint8Array(0);(q=this.v.decode(q,{stream:!C.done}))&&(this.response=this.responseText+=q)}C.done?Tc(this):Jf(this),this.readyState==3&&Eh(this)}},t.Ra=function(C){this.g&&(this.response=this.responseText=C,Tc(this))},t.Qa=function(C){this.g&&(this.response=C,Tc(this))},t.ga=function(){this.g&&Tc(this)};function Tc(C){C.readyState=4,C.l=null,C.j=null,C.v=null,Jf(C)}t.setRequestHeader=function(C,q){this.u.append(C,q)},t.getResponseHeader=function(C){return this.h&&this.h.get(C.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const C=[],q=this.h.entries();for(var he=q.next();!he.done;)he=he.value,C.push(he[0]+": "+he[1]),he=q.next();return C.join(`\r
`)};function Jf(C){C.onreadystatechange&&C.onreadystatechange.call(C)}Object.defineProperty(md.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(C){this.m=C?"include":"same-origin"}});function gu(C){let q="";return I(C,function(he,We){q+=We,q+=":",q+=he,q+=`\r
`}),q}function Nm(C,q,he){e:{for(We in he){var We=!1;break e}We=!0}We||(he=gu(he),typeof C=="string"?he!=null&&encodeURIComponent(String(he)):Zt(C,q,he))}function Ia(C){we.call(this),this.headers=new Map,this.o=C||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(Ia,we);var Cm=/^https?$/i,Tg=["POST","PUT"];t=Ia.prototype,t.Ha=function(C){this.J=C},t.ea=function(C,q,he,We){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+C);q=q?q.toUpperCase():"GET",this.D=C,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Y.g(),this.v=this.o?$e(this.o):$e(Y),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(q,String(C),!0),this.B=!1}catch(Qt){xu(this,Qt);return}if(C=he||"",he=new Map(this.headers),We)if(Object.getPrototypeOf(We)===Object.prototype)for(var jt in We)he.set(jt,We[jt]);else if(typeof We.keys=="function"&&typeof We.get=="function")for(const Qt of We.keys())he.set(Qt,We.get(Qt));else throw Error("Unknown input type for opt_headers: "+String(We));We=Array.from(he.keys()).find(Qt=>Qt.toLowerCase()=="content-type"),jt=l.FormData&&C instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Tg,q,void 0))||We||jt||he.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Qt,mr]of he)this.g.setRequestHeader(Qt,mr);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{of(this),this.u=!0,this.g.send(C),this.u=!1}catch(Qt){xu(this,Qt)}};function xu(C,q){C.h=!1,C.g&&(C.j=!0,C.g.abort(),C.j=!1),C.l=q,C.m=5,Sh(C),sf(C)}function Sh(C){C.A||(C.A=!0,Ce(C,"complete"),Ce(C,"error"))}t.abort=function(C){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=C||7,Ce(this,"complete"),Ce(this,"abort"),sf(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),sf(this,!0)),Ia.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Zf(this):this.bb())},t.bb=function(){Zf(this)};function Zf(C){if(C.h&&typeof i<"u"&&(!C.v[1]||Dl(C)!=4||C.Z()!=2)){if(C.u&&Dl(C)==4)Ve(C.Ea,0,C);else if(Ce(C,"readystatechange"),Dl(C)==4){C.h=!1;try{const mr=C.Z();e:switch(mr){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var q=!0;break e;default:q=!1}var he;if(!(he=q)){var We;if(We=mr===0){var jt=String(C.D).match(Gt)[1]||null;!jt&&l.self&&l.self.location&&(jt=l.self.location.protocol.slice(0,-1)),We=!Cm.test(jt?jt.toLowerCase():"")}he=We}if(he)Ce(C,"complete"),Ce(C,"success");else{C.m=6;try{var Qt=2<Dl(C)?C.g.statusText:""}catch{Qt=""}C.l=Qt+" ["+C.Z()+"]",Sh(C)}}finally{sf(C)}}}}function sf(C,q){if(C.g){of(C);const he=C.g,We=C.v[0]?()=>{}:null;C.g=null,C.v=null,q||Ce(C,"ready");try{he.onreadystatechange=We}catch{}}}function of(C){C.I&&(l.clearTimeout(C.I),C.I=null)}t.isActive=function(){return!!this.g};function Dl(C){return C.g?C.g.readyState:0}t.Z=function(){try{return 2<Dl(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(C){if(this.g){var q=this.g.responseText;return C&&q.indexOf(C)==0&&(q=q.substring(C.length)),vt(q)}};function _m(C){try{if(!C.g)return null;if("response"in C.g)return C.g.response;switch(C.H){case"":case"text":return C.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in C.g)return C.g.mozResponseArrayBuffer}return null}catch{return null}}function kg(C){const q={};C=(C.g&&2<=Dl(C)&&C.g.getAllResponseHeaders()||"").split(`\r
`);for(let We=0;We<C.length;We++){if(y(C[We]))continue;var he=P(C[We]);const jt=he[0];if(he=he[1],typeof he!="string")continue;he=he.trim();const Qt=q[jt]||[];q[jt]=Qt,Qt.push(he)}_(q,function(We){return We.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rl(C,q,he){return he&&he.internalChannelParams&&he.internalChannelParams[C]||q}function vu(C){this.Aa=0,this.i=[],this.j=new Me,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Rl("failFast",!1,C),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Rl("baseRetryDelayMs",5e3,C),this.cb=Rl("retryDelaySeedMs",1e4,C),this.Wa=Rl("forwardChannelMaxRetries",2,C),this.wa=Rl("forwardChannelRequestTimeoutMs",2e4,C),this.pa=C&&C.xmlHttpFactory||void 0,this.Xa=C&&C.Tb||void 0,this.Ca=C&&C.useFetchStreams||!1,this.L=void 0,this.J=C&&C.supportsCrossDomainXhr||!1,this.K="",this.h=new mn(C&&C.concurrentRequestLimit),this.Da=new hd,this.P=C&&C.fastHandshake||!1,this.O=C&&C.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=C&&C.Rb||!1,C&&C.xa&&this.j.xa(),C&&C.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&C&&C.detectBufferingProxy||!1,this.ja=void 0,C&&C.longPollingTimeout&&0<C.longPollingTimeout&&(this.ja=C.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=vu.prototype,t.la=8,t.G=1,t.connect=function(C,q,he,We){He(0),this.W=C,this.H=q||{},he&&We!==void 0&&(this.H.OSID=he,this.H.OAID=We),this.F=this.X,this.I=Aa(this,null,this.W),M(this)};function Ih(C){if(Em(C),C.G==3){var q=C.U++,he=Ht(C.I);if(Zt(he,"SID",C.K),Zt(he,"RID",q),Zt(he,"TYPE","terminate"),ht(C,he),q=new ke(C,C.j,q),q.L=2,q.v=fa(Ht(he)),he=!1,l.navigator&&l.navigator.sendBeacon)try{he=l.navigator.sendBeacon(q.v.toString(),"")}catch{}!he&&l.Image&&(new Image().src=q.v,he=!0),he||(q.g=Qs(q.j,null),q.g.ea(q.v)),q.F=Date.now(),St(q)}ws(C)}function yu(C){C.g&&(Pr(C),C.g.cancel(),C.g=null)}function Em(C){yu(C),C.u&&(l.clearTimeout(C.u),C.u=null),Zr(C),C.h.cancel(),C.s&&(typeof C.s=="number"&&l.clearTimeout(C.s),C.s=null)}function M(C){if(!bn(C.h)&&!C.s){C.s=!0;var q=C.Ga;fe||Fe(),ge||(fe(),ge=!0),ee.add(q,C),C.B=0}}function Ee(C,q){return Rr(C.h)>=C.h.j-(C.s?1:0)?!1:C.s?(C.i=q.D.concat(C.i),!0):C.G==1||C.G==2||C.B>=(C.Va?0:C.Wa)?!1:(C.s=be(h(C.Ga,C,q),kn(C,C.B)),C.B++,!0)}t.Ga=function(C){if(this.s)if(this.s=null,this.G==1){if(!C){this.U=Math.floor(1e5*Math.random()),C=this.U++;const jt=new ke(this,this.j,C);let Qt=this.o;if(this.S&&(Qt?(Qt=S(Qt),k(Qt,this.S)):Qt=this.S),this.m!==null||this.O||(jt.H=Qt,Qt=null),this.P)e:{for(var q=0,he=0;he<this.i.length;he++){t:{var We=this.i[he];if("__data__"in We.map&&(We=We.map.__data__,typeof We=="string")){We=We.length;break t}We=void 0}if(We===void 0)break;if(q+=We,4096<q){q=he;break e}if(q===4096||he===this.i.length-1){q=he+1;break e}}q=1e3}else q=1e3;q=Et(this,jt,q),he=Ht(this.I),Zt(he,"RID",C),Zt(he,"CVER",22),this.D&&Zt(he,"X-HTTP-Session-Id",this.D),ht(this,he),Qt&&(this.O?q="headers="+encodeURIComponent(String(gu(Qt)))+"&"+q:this.m&&Nm(he,this.m,Qt)),za(this.h,jt),this.Ua&&Zt(he,"TYPE","init"),this.P?(Zt(he,"$req",q),Zt(he,"SID","null"),jt.T=!0,_t(jt,he,null)):_t(jt,he,q),this.G=2}}else this.G==3&&(C?at(this,C):this.i.length==0||bn(this.h)||at(this))};function at(C,q){var he;q?he=q.l:he=C.U++;const We=Ht(C.I);Zt(We,"SID",C.K),Zt(We,"RID",he),Zt(We,"AID",C.T),ht(C,We),C.m&&C.o&&Nm(We,C.m,C.o),he=new ke(C,C.j,he,C.B+1),C.m===null&&(he.H=C.o),q&&(C.i=q.D.concat(C.i)),q=Et(C,he,1e3),he.I=Math.round(.5*C.wa)+Math.round(.5*C.wa*Math.random()),za(C.h,he),_t(he,We,q)}function ht(C,q){C.H&&I(C.H,function(he,We){Zt(q,We,he)}),C.l&&$t({},function(he,We){Zt(q,We,he)})}function Et(C,q,he){he=Math.min(C.i.length,he);var We=C.l?h(C.l.Na,C.l,C):null;e:{var jt=C.i;let Qt=-1;for(;;){const mr=["count="+he];Qt==-1?0<he?(Qt=jt[0].g,mr.push("ofs="+Qt)):Qt=0:mr.push("ofs="+Qt);let Ln=!0;for(let _s=0;_s<he;_s++){let In=jt[_s].g;const Yn=jt[_s].map;if(In-=Qt,0>In)Qt=Math.max(0,jt[_s].g-100),Ln=!1;else try{w1(Yn,mr,"req"+In+"_")}catch{We&&We(Yn)}}if(Ln){We=mr.join("&");break e}}}return C=C.i.splice(0,he),q.D=C,We}function Yt(C){if(!C.g&&!C.u){C.Y=1;var q=C.Fa;fe||Fe(),ge||(fe(),ge=!0),ee.add(q,C),C.v=0}}function rr(C){return C.g||C.u||3<=C.v?!1:(C.Y++,C.u=be(h(C.Fa,C),kn(C,C.v)),C.v++,!0)}t.Fa=function(){if(this.u=null,Mr(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var C=2*this.R;this.j.info("BP detection timer enabled: "+C),this.A=be(h(this.ab,this),C)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,He(10),yu(this),Mr(this))};function Pr(C){C.A!=null&&(l.clearTimeout(C.A),C.A=null)}function Mr(C){C.g=new ke(C,C.j,"rpc",C.Y),C.m===null&&(C.g.H=C.o),C.g.O=0;var q=Ht(C.qa);Zt(q,"RID","rpc"),Zt(q,"SID",C.K),Zt(q,"AID",C.T),Zt(q,"CI",C.F?"0":"1"),!C.F&&C.ja&&Zt(q,"TO",C.ja),Zt(q,"TYPE","xmlhttp"),ht(C,q),C.m&&C.o&&Nm(q,C.m,C.o),C.L&&(C.g.I=C.L);var he=C.g;C=C.ia,he.L=1,he.v=fa(Ht(q)),he.m=null,he.P=!0,Ct(he,C)}t.Za=function(){this.C!=null&&(this.C=null,yu(this),rr(this),He(19))};function Zr(C){C.C!=null&&(l.clearTimeout(C.C),C.C=null)}function cn(C,q){var he=null;if(C.g==q){Zr(C),Pr(C),C.g=null;var We=2}else if(Nn(C.h,q))he=q.D,ti(C.h,q),We=1;else return;if(C.G!=0){if(q.o)if(We==1){he=q.m?q.m.length:0,q=Date.now()-q.F;var jt=C.B;We=qe(),Ce(We,new re(We,he)),M(C)}else Yt(C);else if(jt=q.s,jt==3||jt==0&&0<q.X||!(We==1&&Ee(C,q)||We==2&&rr(C)))switch(he&&0<he.length&&(q=C.h,q.i=q.i.concat(he)),jt){case 1:na(C,5);break;case 4:na(C,10);break;case 3:na(C,6);break;default:na(C,2)}}}function kn(C,q){let he=C.Ta+Math.floor(Math.random()*C.cb);return C.isActive()||(he*=2),he*q}function na(C,q){if(C.j.info("Error code "+q),q==2){var he=h(C.fb,C),We=C.Xa;const jt=!We;We=new kt(We||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ft(We,"https"),fa(We),jt?y1(We.toString(),he):b1(We.toString(),he)}else He(2);C.G=0,C.l&&C.l.sa(q),ws(C),Em(C)}t.fb=function(C){C?(this.j.info("Successfully pinged google.com"),He(2)):(this.j.info("Failed to ping google.com"),He(1))};function ws(C){if(C.G=0,C.ka=[],C.l){const q=Mn(C.h);(q.length!=0||C.i.length!=0)&&(g(C.ka,q),g(C.ka,C.i),C.h.i.length=0,p(C.i),C.i.length=0),C.l.ra()}}function Aa(C,q,he){var We=he instanceof kt?Ht(he):new kt(he);if(We.g!="")q&&(We.g=q+"."+We.g),Vt(We,We.s);else{var jt=l.location;We=jt.protocol,q=q?q+"."+jt.hostname:jt.hostname,jt=+jt.port;var Qt=new kt(null);We&&Ft(Qt,We),q&&(Qt.g=q),jt&&Vt(Qt,jt),he&&(Qt.l=he),We=Qt}return he=C.D,q=C.ya,he&&q&&Zt(We,he,q),Zt(We,"VER",C.la),ht(C,We),We}function Qs(C,q,he){if(q&&!C.J)throw Error("Can't create secondary domain capable XhrIo object.");return q=C.Ca&&!C.pa?new Ia(new _h({eb:he})):new Ia(C.pa),q.Ha(C.J),q}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ns(){}t=Ns.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Vs(){}Vs.prototype.g=function(C,q){return new Cs(C,q)};function Cs(C,q){we.call(this),this.g=new vu(q),this.l=C,this.h=q&&q.messageUrlParams||null,C=q&&q.messageHeaders||null,q&&q.clientProtocolHeaderRequired&&(C?C["X-Client-Protocol"]="webchannel":C={"X-Client-Protocol":"webchannel"}),this.g.o=C,C=q&&q.initMessageHeaders||null,q&&q.messageContentType&&(C?C["X-WebChannel-Content-Type"]=q.messageContentType:C={"X-WebChannel-Content-Type":q.messageContentType}),q&&q.va&&(C?C["X-WebChannel-Client-Profile"]=q.va:C={"X-WebChannel-Client-Profile":q.va}),this.g.S=C,(C=q&&q.Sb)&&!y(C)&&(this.g.m=C),this.v=q&&q.supportsCrossDomainXhr||!1,this.u=q&&q.sendRawJson||!1,(q=q&&q.httpSessionIdParam)&&!y(q)&&(this.g.D=q,C=this.h,C!==null&&q in C&&(C=this.h,q in C&&delete C[q])),this.j=new wu(this)}m(Cs,we),Cs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cs.prototype.close=function(){Ih(this.g)},Cs.prototype.o=function(C){var q=this.g;if(typeof C=="string"){var he={};he.__data__=C,C=he}else this.u&&(he={},he.__data__=gt(C),C=he);q.i.push(new Nr(q.Ya++,C)),q.G==3&&M(q)},Cs.prototype.N=function(){this.g.l=null,delete this.j,Ih(this.g),delete this.g,Cs.aa.N.call(this)};function ic(C){xe.call(this),C.__headers__&&(this.headers=C.__headers__,this.statusCode=C.__status__,delete C.__headers__,delete C.__status__);var q=C.__sm__;if(q){e:{for(const he in q){C=he;break e}C=void 0}(this.i=C)&&(C=this.i,q=q!==null&&C in q?q[C]:void 0),this.data=q}else this.data=C}m(ic,xe);function bu(){Qe.call(this),this.status=1}m(bu,Qe);function wu(C){this.g=C}m(wu,Ns),wu.prototype.ua=function(){Ce(this.g,"a")},wu.prototype.ta=function(C){Ce(this.g,new ic(C))},wu.prototype.sa=function(C){Ce(this.g,new bu)},wu.prototype.ra=function(){Ce(this.g,"b")},Vs.prototype.createWebChannel=Vs.prototype.g,Cs.prototype.send=Cs.prototype.o,Cs.prototype.open=Cs.prototype.m,Cs.prototype.close=Cs.prototype.close,FY=function(){return new Vs},kY=function(){return qe()},TY=dt,uT={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},me.NO_ERROR=0,me.TIMEOUT=8,me.HTTP_ERROR=6,Q_=me,Ie.COMPLETE="complete",BY=Ie,Ne.EventType=ct,ct.OPEN="a",ct.CLOSE="b",ct.ERROR="c",ct.MESSAGE="d",we.prototype.listen=we.prototype.K,Ey=Ne,Ia.prototype.listenOnce=Ia.prototype.L,Ia.prototype.getLastError=Ia.prototype.Ka,Ia.prototype.getLastErrorCode=Ia.prototype.Ba,Ia.prototype.getStatus=Ia.prototype.Z,Ia.prototype.getResponseJson=Ia.prototype.Oa,Ia.prototype.getResponseText=Ia.prototype.oa,Ia.prototype.send=Ia.prototype.ea,Ia.prototype.setWithCredentials=Ia.prototype.Ha,PY=Ia}).apply(typeof QN<"u"?QN:typeof self<"u"?self:typeof window<"u"?window:{});const kU="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wo.UNAUTHENTICATED=new Wo(null),Wo.GOOGLE_CREDENTIALS=new Wo("google-credentials-uid"),Wo.FIRST_PARTY=new Wo("first-party-uid"),Wo.MOCK_USER=new Wo("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qv="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp=new UO("@firebase/firestore");function dx(){return Lp.logLevel}function Ar(t,...e){if(Lp.logLevel<=Dn.DEBUG){const r=e.map(a6);Lp.debug(`Firestore (${qv}): ${t}`,...r)}}function Yl(t,...e){if(Lp.logLevel<=Dn.ERROR){const r=e.map(a6);Lp.error(`Firestore (${qv}): ${t}`,...r)}}function X0(t,...e){if(Lp.logLevel<=Dn.WARN){const r=e.map(a6);Lp.warn(`Firestore (${qv}): ${t}`,...r)}}function a6(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(t="Unexpected state"){const e=`FIRESTORE (${qv}) INTERNAL ASSERTION FAILED: `+t;throw Yl(e),new Error(e)}function Vr(t,e){t||Dr()}function on(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pr extends uh{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OY{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class DY{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Wo.UNAUTHENTICATED))}shutdown(){}}class vge{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class yge{constructor(e){this.t=e,this.currentUser=Wo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Vr(this.o===void 0);let n=this.i;const a=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new Ud;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ud,e.enqueueRetryable(()=>a(this.currentUser))};const i=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},l=c=>{Ar("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Ar("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ud)}},0),i()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Ar("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Vr(typeof n.accessToken=="string"),new OY(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Vr(e===null||typeof e=="string"),new Wo(e)}}class bge{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Wo.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class wge{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new bge(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Wo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Nge{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Cge{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Vr(this.o===void 0);const n=s=>{s.error!=null&&Ar("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.R;return this.R=s.token,Ar("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const a=s=>{Ar("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?a(s):Ar("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Vr(typeof r.token=="string"),this.R=r.token,new Nge(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _ge(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const a=_ge(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=e.charAt(a[s]%e.length))}return n}}function An(t,e){return t<e?-1:t>e?1:0}function gv(t,e,r){return t.length===e.length&&t.every((n,a)=>r(n,e[a]))}function RY(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new pr(Xt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new pr(Xt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new pr(Xt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pr(Xt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return or.fromMillis(Date.now())}static fromDate(e){return or.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new or(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?An(this.nanoseconds,e.nanoseconds):An(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Gr(e)}static min(){return new Gr(new or(0,0))}static max(){return new Gr(new or(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e,r,n){r===void 0?r=0:r>e.length&&Dr(),n===void 0?n=e.length-r:n>e.length-r&&Dr(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Jb.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Jb?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const s=e.get(a),i=r.get(a);if(s<i)return-1;if(s>i)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class ea extends Jb{construct(e,r,n){return new ea(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new pr(Xt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new ea(r)}static emptyPath(){return new ea([])}}const Ege=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ms extends Jb{construct(e,r,n){return new ms(e,r,n)}static isValidIdentifier(e){return Ege.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ms.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ms(["__name__"])}static fromServerFormat(e){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new pr(Xt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;a<e.length;){const l=e[a];if(l==="\\"){if(a+1===e.length)throw new pr(Xt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new pr(Xt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,a+=2}else l==="`"?(i=!i,a++):l!=="."||i?(n+=l,a++):(s(),a++)}if(s(),i)throw new pr(Xt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ms(r)}static emptyPath(){return new ms([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.path=e}static fromPath(e){return new _r(ea.fromString(e))}static fromName(e){return new _r(ea.fromString(e).popFirst(5))}static empty(){return new _r(ea.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ea.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return ea.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _r(new ea(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e,r,n,a){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=a}}function dT(t){return t.fields.find(e=>e.kind===2)}function Vm(t){return t.fields.filter(e=>e.kind!==2)}HE.UNKNOWN_ID=-1;class V_{constructor(e,r){this.fieldPath=e,this.kind=r}}class Zb{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Zb(0,lu.min())}}function Sge(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=Gr.fromTimestamp(n===1e9?new or(r+1,0):new or(r,n));return new lu(a,_r.empty(),e)}function MY(t){return new lu(t.readTime,t.key,-1)}class lu{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new lu(Gr.min(),_r.empty(),-1)}static max(){return new lu(Gr.max(),_r.empty(),-1)}}function i6(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=_r.comparator(t.documentKey,e.documentKey),r!==0?r:An(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LY="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UY{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dg(t){if(t.code!==Xt.FAILED_PRECONDITION||t.message!==LY)throw t;Ar("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Dr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Mt((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Mt?r:Mt.resolve(r)}catch(r){return Mt.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Mt.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Mt.reject(r)}static resolve(e){return new Mt((r,n)=>{r(e)})}static reject(e){return new Mt((r,n)=>{n(e)})}static waitFor(e){return new Mt((r,n)=>{let a=0,s=0,i=!1;e.forEach(l=>{++a,l.next(()=>{++s,i&&s===a&&r()},c=>n(c))}),i=!0,s===a&&r()})}static or(e){let r=Mt.resolve(!1);for(const n of e)r=r.next(a=>a?Mt.resolve(a):n());return r}static forEach(e,r){const n=[];return e.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(e,r){return new Mt((n,a)=>{const s=e.length,i=new Array(s);let l=0;for(let c=0;c<s;c++){const u=c;r(e[u]).next(d=>{i[u]=d,++l,l===s&&n(i)},d=>a(d))}})}static doWhile(e,r){return new Mt((n,a)=>{const s=()=>{e()===!0?r().next(()=>{s()},a):n()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Ud,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new rb(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const a=o6(n.target.error);this.V.reject(new rb(e,a))}}static open(e,r,n,a){try{return new ZI(r,e.transaction(a,n))}catch(s){throw new rb(r,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ar("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new jge(r)}}class Q0{constructor(e,r,n){this.name=e,this.version=r,this.p=n,Q0.S(ro())===12.2&&Yl("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ar("SimpleDb","Removing database:",e),Wm(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!$X())return!1;if(Q0.v())return!0;const e=ro(),r=Q0.S(e),n=0<r&&r<10,a=QY(e),s=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(Ar("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=s=>{const i=s.target.result;r(i)},a.onblocked=()=>{n(new rb(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=s=>{const i=s.target.error;i.name==="VersionError"?n(new pr(Xt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i.name==="InvalidStateError"?n(new pr(Xt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new rb(e,i))},a.onupgradeneeded=s=>{Ar("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const i=s.target.result;this.p.O(i,a.transaction,s.oldVersion,this.version).next(()=>{Ar("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,a){const s=r==="readonly";let i=0;for(;;){++i;try{this.db=await this.M(e);const l=ZI.open(this.db,e,s?"readonly":"readwrite",n),c=a(l).next(u=>(l.g(),u)).catch(u=>(l.abort(u),Mt.reject(u))).toPromise();return c.catch(()=>{}),await l.m,c}catch(l){const c=l,u=c.name!=="FirebaseError"&&i<3;if(Ar("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function QY(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class Ige{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Wm(this.B.delete())}}class rb extends pr{constructor(e,r){super(Xt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function pm(t){return t.name==="IndexedDbTransactionError"}class jge{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(Ar("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(Ar("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Wm(n)}add(e){return Ar("SimpleDb","ADD",this.store.name,e,e),Wm(this.store.add(e))}get(e){return Wm(this.store.get(e)).next(r=>(r===void 0&&(r=null),Ar("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return Ar("SimpleDb","DELETE",this.store.name,e),Wm(this.store.delete(e))}count(){return Ar("SimpleDb","COUNT",this.store.name),Wm(this.store.count())}U(e,r){const n=this.options(e,r),a=n.index?this.store.index(n.index):this.store;if(typeof a.getAll=="function"){const s=a.getAll(n.range);return new Mt((i,l)=>{s.onerror=c=>{l(c.target.error)},s.onsuccess=c=>{i(c.target.result)}})}{const s=this.cursor(n),i=[];return this.W(s,(l,c)=>{i.push(c)}).next(()=>i)}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new Mt((a,s)=>{n.onerror=i=>{s(i.target.error)},n.onsuccess=i=>{a(i.target.result)}})}j(e,r){Ar("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const a=this.cursor(n);return this.W(a,(s,i,l)=>l.delete())}J(e,r){let n;r?n=e:(n={},r=e);const a=this.cursor(n);return this.W(a,r)}Y(e){const r=this.cursor({});return new Mt((n,a)=>{r.onerror=s=>{const i=o6(s.target.error);a(i)},r.onsuccess=s=>{const i=s.target.result;i?e(i.primaryKey,i.value).next(l=>{l?i.continue():n()}):n()}})}W(e,r){const n=[];return new Mt((a,s)=>{e.onerror=i=>{s(i.target.error)},e.onsuccess=i=>{const l=i.target.result;if(!l)return void a();const c=new Ige(l),u=r(l.primaryKey,l.value,c);if(u instanceof Mt){const d=u.catch(f=>(c.done(),Mt.reject(f)));n.push(d)}c.isDone?a():c.K===null?l.continue():l.continue(c.K)}}).next(()=>Mt.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Wm(t){return new Mt((e,r)=>{t.onsuccess=n=>{const a=n.target.result;e(a)},t.onerror=n=>{const a=o6(n.target.error);r(a)}})}let FU=!1;function o6(t){const e=Q0.S(ro());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new pr("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return FU||(FU=!0,setTimeout(()=>{throw n},0)),n}}return t}class Pge{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Ar("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{Ar("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){pm(r)?Ar("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await dg(r)}await this.X(6e4)})}}class Bge{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){const n=new Set;let a=r,s=!0;return Mt.doWhile(()=>s===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(i=>{if(i!==null&&!n.has(i))return Ar("IndexBackfiller",`Processing collection: ${i}`),this.ne(e,i,a).next(l=>{a-=l,n.add(i)});s=!1})).next(()=>r-a)}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(a=>this.localStore.localDocuments.getNextDocuments(e,r,a,n).next(s=>{const i=s.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.re(a,s)).next(l=>(Ar("IndexBackfiller",`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,r,l))).next(()=>i.size)}))}re(e,r){let n=e;return r.changes.forEach((a,s)=>{const i=MY(s);i6(i,n)>0&&(n=i)}),new lu(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Ku.oe=-1;function dw(t){return t==null}function e2(t){return t===0&&1/t==-1/0}function Tge(t){return typeof t=="number"&&Number.isInteger(t)&&!e2(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=OU(e)),e=kge(t.get(r),e);return OU(e)}function kge(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const s=t.charAt(a);switch(s){case"\0":r+="";break;case"":r+="";break;default:r+=s}}return r}function OU(t){return t+""}function Sf(t){const e=t.length;if(Vr(e>=2),e===2)return Vr(t.charAt(0)===""&&t.charAt(1)===""),ea.emptyPath();const r=e-2,n=[];let a="";for(let s=0;s<e;){const i=t.indexOf("",s);switch((i<0||i>r)&&Dr(),t.charAt(i+1)){case"":const l=t.substring(s,i);let c;a.length===0?c=l:(a+=l,c=a,a=""),n.push(c);break;case"":a+=t.substring(s,i),a+="\0";break;case"":a+=t.substring(s,i+1);break;default:Dr()}s=i+2}return new ea(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DU=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(t,e){return[t,ec(e)]}function VY(t,e,r){return[t,ec(e),r]}const Fge={},Oge=["prefixPath","collectionGroup","readTime","documentId"],Dge=["prefixPath","collectionGroup","documentId"],Rge=["collectionGroup","readTime","prefixPath","documentId"],Mge=["canonicalId","targetId"],Lge=["targetId","path"],Uge=["path","targetId"],Qge=["collectionId","parent"],Vge=["indexId","uid"],Hge=["uid","sequenceNumber"],$ge=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Gge=["indexId","uid","orderedDocumentKey"],Kge=["userId","collectionPath","documentId"],qge=["userId","collectionPath","largestBatchId"],zge=["userId","collectionGroup","largestBatchId"],HY=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Wge=[...HY,"documentOverlays"],$Y=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],GY=$Y,l6=[...GY,"indexConfiguration","indexState","indexEntries"],Xge=l6,Yge=[...l6,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT extends UY{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function ao(t,e){const r=on(t);return Q0.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RU(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function fg(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function KY(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,r){this.comparator=e,this.root=r||Xo.EMPTY}insert(e,r){return new vs(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Xo.BLACK,null,null))}remove(e){return new vs(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xo.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new VN(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new VN(this.root,e,this.comparator,!1)}getReverseIterator(){return new VN(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new VN(this.root,e,this.comparator,!0)}}class VN{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&a&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xo{constructor(e,r,n,a,s){this.key=e,this.value=r,this.color=n??Xo.RED,this.left=a??Xo.EMPTY,this.right=s??Xo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,s){return new Xo(e??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const s=n(e,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(e,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Xo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return Xo.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Dr();const e=this.left.check();if(e!==this.right.check())throw Dr();return e+(this.isRed()?0:1)}}Xo.EMPTY=null,Xo.RED=!0,Xo.BLACK=!1;Xo.EMPTY=new class{constructor(){this.size=0}get key(){throw Dr()}get value(){throw Dr()}get color(){throw Dr()}get left(){throw Dr()}get right(){throw Dr()}copy(e,r,n,a,s){return this}insert(e,r,n){return new Xo(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e){this.comparator=e,this.data=new vs(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new MU(this.data.getIterator())}getIteratorFrom(e){return new MU(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Ta)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Ta(this.comparator);return r.data=e,r}}class MU{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Mg(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e){this.fields=e,e.sort(ms.comparator)}static empty(){return new yc([])}unionWith(e){let r=new Ta(ms.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new yc(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return gv(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qY extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new qY("Invalid base64 string: "+s):s}}(e);return new yi(r)}static fromUint8Array(e){const r=function(a){let s="";for(let i=0;i<a.length;++i)s+=String.fromCharCode(a[i]);return s}(e);return new yi(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return An(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yi.EMPTY_BYTE_STRING=new yi("");const Jge=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function YA(t){if(Vr(!!t),typeof t=="string"){let e=0;const r=Jge.exec(t);if(Vr(!!r),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:fs(t.seconds),nanos:fs(t.nanos)}}function fs(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Y0(t){return typeof t=="string"?yi.fromBase64String(t):yi.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c6(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function u6(t){const e=t.mapValue.fields.__previous_value__;return c6(e)?u6(e):e}function t2(t){const e=YA(t.mapValue.fields.__local_write_time__.timestampValue);return new or(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zge{constructor(e,r,n,a,s,i,l,c,u){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u}}class J0{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new J0("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof J0&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},$_={nullValue:"NULL_VALUE"};function Up(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?c6(t)?4:zY(t)?9007199254740991:e4(t)?10:11:Dr()}function Lf(t,e){if(t===e)return!0;const r=Up(t);if(r!==Up(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return t2(t).isEqual(t2(e));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const i=YA(a.timestampValue),l=YA(s.timestampValue);return i.seconds===l.seconds&&i.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,s){return Y0(a.bytesValue).isEqual(Y0(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,s){return fs(a.geoPointValue.latitude)===fs(s.geoPointValue.latitude)&&fs(a.geoPointValue.longitude)===fs(s.geoPointValue.longitude)}(t,e);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return fs(a.integerValue)===fs(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const i=fs(a.doubleValue),l=fs(s.doubleValue);return i===l?e2(i)===e2(l):isNaN(i)&&isNaN(l)}return!1}(t,e);case 9:return gv(t.arrayValue.values||[],e.arrayValue.values||[],Lf);case 10:case 11:return function(a,s){const i=a.mapValue.fields||{},l=s.mapValue.fields||{};if(RU(i)!==RU(l))return!1;for(const c in i)if(i.hasOwnProperty(c)&&(l[c]===void 0||!Lf(i[c],l[c])))return!1;return!0}(t,e);default:return Dr()}}function r2(t,e){return(t.values||[]).find(r=>Lf(r,e))!==void 0}function Z0(t,e){if(t===e)return 0;const r=Up(t),n=Up(e);if(r!==n)return An(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return An(t.booleanValue,e.booleanValue);case 2:return function(s,i){const l=fs(s.integerValue||s.doubleValue),c=fs(i.integerValue||i.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return LU(t.timestampValue,e.timestampValue);case 4:return LU(t2(t),t2(e));case 5:return An(t.stringValue,e.stringValue);case 6:return function(s,i){const l=Y0(s),c=Y0(i);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const l=s.split("/"),c=i.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=An(l[u],c[u]);if(d!==0)return d}return An(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const l=An(fs(s.latitude),fs(i.latitude));return l!==0?l:An(fs(s.longitude),fs(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return UU(t.arrayValue,e.arrayValue);case 10:return function(s,i){var l,c,u,d;const f=s.fields||{},h=i.fields||{},A=(l=f.value)===null||l===void 0?void 0:l.arrayValue,m=(c=h.value)===null||c===void 0?void 0:c.arrayValue,p=An(((u=A==null?void 0:A.values)===null||u===void 0?void 0:u.length)||0,((d=m==null?void 0:m.values)===null||d===void 0?void 0:d.length)||0);return p!==0?p:UU(A,m)}(t.mapValue,e.mapValue);case 11:return function(s,i){if(s===w0.mapValue&&i===w0.mapValue)return 0;if(s===w0.mapValue)return 1;if(i===w0.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),u=i.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const h=An(c[f],d[f]);if(h!==0)return h;const A=Z0(l[c[f]],u[d[f]]);if(A!==0)return A}return An(c.length,d.length)}(t.mapValue,e.mapValue);default:throw Dr()}}function LU(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return An(t,e);const r=YA(t),n=YA(e),a=An(r.seconds,n.seconds);return a!==0?a:An(r.nanos,n.nanos)}function UU(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=Z0(r[a],n[a]);if(s)return s}return An(r.length,n.length)}function xv(t){return AT(t)}function AT(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=YA(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Y0(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return _r.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=AT(s);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const i of n)s?s=!1:a+=",",a+=`${i}:${AT(r.fields[i])}`;return a+"}"}(t.mapValue):Dr()}function n2(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function hT(t){return!!t&&"integerValue"in t}function a2(t){return!!t&&"arrayValue"in t}function QU(t){return!!t&&"nullValue"in t}function VU(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function G_(t){return!!t&&"mapValue"in t}function e4(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function nb(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return fg(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=nb(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=nb(t.arrayValue.values[r]);return e}return Object.assign({},t)}function zY(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const WY={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function exe(t){return"nullValue"in t?$_:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?n2(J0.empty(),_r.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?e4(t)?WY:{mapValue:{}}:Dr()}function txe(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?n2(J0.empty(),_r.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?WY:"mapValue"in t?e4(t)?{mapValue:{}}:w0:Dr()}function HU(t,e){const r=Z0(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function $U(t,e){const r=Z0(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e){this.value=e}static empty(){return new Jo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!G_(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=nb(r)}setAll(e){let r=ms.emptyPath(),n={},a=[];e.forEach((i,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,a),n={},a=[],r=l.popLast()}i?n[l.lastSegment()]=nb(i):a.push(l.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(e){const r=this.field(e.popLast());G_(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Lf(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];G_(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){fg(r,(a,s)=>e[a]=s);for(const a of n)delete e[a]}clone(){return new Jo(nb(this.value))}}function XY(t){const e=[];return fg(t.fields,(r,n)=>{const a=new ms([r]);if(G_(n)){const s=XY(n.mapValue).fields;if(s.length===0)e.push(a);else for(const i of s)e.push(a.child(i))}else e.push(a)}),new yc(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,r,n,a,s,i,l){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=i,this.documentState=l}static newInvalidDocument(e){return new hs(e,0,Gr.min(),Gr.min(),Gr.min(),Jo.empty(),0)}static newFoundDocument(e,r,n,a){return new hs(e,1,r,Gr.min(),n,a,0)}static newNoDocument(e,r){return new hs(e,2,r,Gr.min(),Gr.min(),Jo.empty(),0)}static newUnknownDocument(e,r){return new hs(e,3,r,Gr.min(),Gr.min(),Jo.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Gr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Gr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof hs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e,r){this.position=e,this.inclusive=r}}function GU(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const s=e[a],i=t.position[a];if(s.field.isKeyField()?n=_r.comparator(_r.fromName(i.referenceValue),r.key):n=Z0(i,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function KU(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Lf(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,r="asc"){this.field=e,this.dir=r}}function rxe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YY{}class Rn extends YY{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new nxe(e,r,n):r==="array-contains"?new ixe(e,n):r==="in"?new nJ(e,n):r==="not-in"?new oxe(e,n):r==="array-contains-any"?new lxe(e,n):new Rn(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new axe(e,n):new sxe(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Z0(r,this.value)):r!==null&&Up(this.value)===Up(r)&&this.matchesComparison(Z0(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Dr()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ca extends YY{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Ca(e,r)}matches(e){return yv(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function yv(t){return t.op==="and"}function mT(t){return t.op==="or"}function d6(t){return JY(t)&&yv(t)}function JY(t){for(const e of t.filters)if(e instanceof Ca)return!1;return!0}function pT(t){if(t instanceof Rn)return t.field.canonicalString()+t.op.toString()+xv(t.value);if(d6(t))return t.filters.map(e=>pT(e)).join(",");{const e=t.filters.map(r=>pT(r)).join(",");return`${t.op}(${e})`}}function ZY(t,e){return t instanceof Rn?function(n,a){return a instanceof Rn&&n.op===a.op&&n.field.isEqual(a.field)&&Lf(n.value,a.value)}(t,e):t instanceof Ca?function(n,a){return a instanceof Ca&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,i,l)=>s&&ZY(i,a.filters[l]),!0):!1}(t,e):void Dr()}function eJ(t,e){const r=t.filters.concat(e);return Ca.create(r,t.op)}function tJ(t){return t instanceof Rn?function(r){return`${r.field.canonicalString()} ${r.op} ${xv(r.value)}`}(t):t instanceof Ca?function(r){return r.op.toString()+" {"+r.getFilters().map(tJ).join(" ,")+"}"}(t):"Filter"}class nxe extends Rn{constructor(e,r,n){super(e,r,n),this.key=_r.fromName(n.referenceValue)}matches(e){const r=_r.comparator(e.key,this.key);return this.matchesComparison(r)}}class axe extends Rn{constructor(e,r){super(e,"in",r),this.keys=rJ("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class sxe extends Rn{constructor(e,r){super(e,"not-in",r),this.keys=rJ("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function rJ(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>_r.fromName(n.referenceValue))}class ixe extends Rn{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return a2(r)&&r2(r.arrayValue,this.value)}}class nJ extends Rn{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&r2(this.value.arrayValue,r)}}class oxe extends Rn{constructor(e,r){super(e,"not-in",r)}matches(e){if(r2(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!r2(this.value.arrayValue,r)}}class lxe extends Rn{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!a2(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>r2(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cxe{constructor(e,r=null,n=[],a=[],s=null,i=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=i,this.endAt=l,this.ue=null}}function gT(t,e=null,r=[],n=[],a=null,s=null,i=null){return new cxe(t,e,r,n,a,s,i)}function Qp(t){const e=on(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>pT(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),dw(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>xv(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>xv(n)).join(",")),e.ue=r}return e.ue}function fw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!rxe(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!ZY(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!KU(t.startAt,e.startAt)&&KU(t.endAt,e.endAt)}function $E(t){return _r.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function GE(t,e){return t.filters.filter(r=>r instanceof Rn&&r.field.isEqual(e))}function qU(t,e,r){let n=$_,a=!0;for(const s of GE(t,e)){let i=$_,l=!0;switch(s.op){case"<":case"<=":i=exe(s.value);break;case"==":case"in":case">=":i=s.value;break;case">":i=s.value,l=!1;break;case"!=":case"not-in":i=$_}HU({value:n,inclusive:a},{value:i,inclusive:l})<0&&(n=i,a=l)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const i=r.position[s];HU({value:n,inclusive:a},{value:i,inclusive:r.inclusive})<0&&(n=i,a=r.inclusive);break}}return{value:n,inclusive:a}}function zU(t,e,r){let n=w0,a=!0;for(const s of GE(t,e)){let i=w0,l=!0;switch(s.op){case">=":case">":i=txe(s.value),l=!1;break;case"==":case"in":case"<=":i=s.value;break;case"<":i=s.value,l=!1;break;case"!=":case"not-in":i=w0}$U({value:n,inclusive:a},{value:i,inclusive:l})>0&&(n=i,a=l)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const i=r.position[s];$U({value:n,inclusive:a},{value:i,inclusive:r.inclusive})>0&&(n=i,a=r.inclusive);break}}return{value:n,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e,r=null,n=[],a=[],s=null,i="F",l=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=i,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function uxe(t,e,r,n,a,s,i,l){return new zv(t,e,r,n,a,s,i,l)}function Aw(t){return new zv(t)}function WU(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function aJ(t){return t.collectionGroup!==null}function ab(t){const e=on(t);if(e.ce===null){e.ce=[];const r=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let l=new Ta(ms.comparator);return i.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||e.ce.push(new s2(s,n))}),r.has(ms.keyField().canonicalString())||e.ce.push(new s2(ms.keyField(),n))}return e.ce}function Ju(t){const e=on(t);return e.le||(e.le=dxe(e,ab(t))),e.le}function dxe(t,e){if(t.limitType==="F")return gT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new s2(a.field,s)});const r=t.endAt?new vv(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new vv(t.startAt.position,t.startAt.inclusive):null;return gT(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function xT(t,e){const r=t.filters.concat([e]);return new zv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function KE(t,e,r){return new zv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function t4(t,e){return fw(Ju(t),Ju(e))&&t.limitType===e.limitType}function sJ(t){return`${Qp(Ju(t))}|lt:${t.limitType}`}function fx(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>tJ(a)).join(", ")}]`),dw(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>xv(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>xv(a)).join(",")),`Target(${n})`}(Ju(t))}; limitType=${t.limitType})`}function hw(t,e){return e.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):_r.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,a){for(const s of ab(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(t,e)&&function(n,a){return!(n.startAt&&!function(i,l,c){const u=GU(i,l,c);return i.inclusive?u<=0:u<0}(n.startAt,ab(n),a)||n.endAt&&!function(i,l,c){const u=GU(i,l,c);return i.inclusive?u>=0:u>0}(n.endAt,ab(n),a))}(t,e)}function fxe(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function iJ(t){return(e,r)=>{let n=!1;for(const a of ab(t)){const s=Axe(a,e,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function Axe(t,e,r){const n=t.field.isKeyField()?_r.comparator(e.key,r.key):function(s,i,l){const c=i.data.field(s),u=l.data.field(s);return c!==null&&u!==null?Z0(c,u):Dr()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Dr()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return void(a[s]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){fg(this.inner,(r,n)=>{for(const[a,s]of n)e(a,s)})}isEmpty(){return KY(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hxe=new vs(_r.comparator);function tu(){return hxe}const oJ=new vs(_r.comparator);function Sy(...t){let e=oJ;for(const r of t)e=e.insert(r.key,r);return e}function lJ(t){let e=oJ;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function If(){return sb()}function cJ(){return sb()}function sb(){return new gm(t=>t.toString(),(t,e)=>t.isEqual(e))}const mxe=new vs(_r.comparator),pxe=new Ta(_r.comparator);function Sn(...t){let e=pxe;for(const r of t)e=e.add(r);return e}const gxe=new Ta(An);function xxe(){return gxe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f6(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e2(e)?"-0":e}}function uJ(t){return{integerValue:""+t}}function vxe(t,e){return Tge(e)?uJ(e):f6(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(){this._=void 0}}function yxe(t,e,r){return t instanceof i2?function(a,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&c6(s)&&(s=u6(s)),s&&(i.fields.__previous_value__=s),{mapValue:i}}(r,e):t instanceof Vp?fJ(t,e):t instanceof bv?AJ(t,e):function(a,s){const i=dJ(a,s),l=XU(i)+XU(a.Pe);return hT(i)&&hT(a.Pe)?uJ(l):f6(a.serializer,l)}(t,e)}function bxe(t,e,r){return t instanceof Vp?fJ(t,e):t instanceof bv?AJ(t,e):r}function dJ(t,e){return t instanceof o2?function(n){return hT(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class i2 extends r4{}class Vp extends r4{constructor(e){super(),this.elements=e}}function fJ(t,e){const r=hJ(e);for(const n of t.elements)r.some(a=>Lf(a,n))||r.push(n);return{arrayValue:{values:r}}}class bv extends r4{constructor(e){super(),this.elements=e}}function AJ(t,e){let r=hJ(e);for(const n of t.elements)r=r.filter(a=>!Lf(a,n));return{arrayValue:{values:r}}}class o2 extends r4{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function XU(t){return fs(t.integerValue||t.doubleValue)}function hJ(t){return a2(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mJ{constructor(e,r){this.field=e,this.transform=r}}function wxe(t,e){return t.field.isEqual(e.field)&&function(n,a){return n instanceof Vp&&a instanceof Vp||n instanceof bv&&a instanceof bv?gv(n.elements,a.elements,Lf):n instanceof o2&&a instanceof o2?Lf(n.Pe,a.Pe):n instanceof i2&&a instanceof i2}(t.transform,e.transform)}class Nxe{constructor(e,r){this.version=e,this.transformResults=r}}class ps{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ps}static exists(e){return new ps(void 0,e)}static updateTime(e){return new ps(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function K_(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class n4{}function pJ(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Xv(t.key,ps.none()):new Wv(t.key,t.data,ps.none());{const r=t.data,n=Jo.empty();let a=new Ta(ms.comparator);for(let s of e.fields)if(!a.has(s)){let i=r.field(s);i===null&&s.length>1&&(s=s.popLast(),i=r.field(s)),i===null?n.delete(s):n.set(s,i),a=a.add(s)}return new Ah(t.key,n,new yc(a.toArray()),ps.none())}}function Cxe(t,e,r){t instanceof Wv?function(a,s,i){const l=a.value.clone(),c=JU(a.fieldTransforms,s,i.transformResults);l.setAll(c),s.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(t,e,r):t instanceof Ah?function(a,s,i){if(!K_(a.precondition,s))return void s.convertToUnknownDocument(i.version);const l=JU(a.fieldTransforms,s,i.transformResults),c=s.data;c.setAll(gJ(a)),c.setAll(l),s.convertToFoundDocument(i.version,c).setHasCommittedMutations()}(t,e,r):function(a,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,r)}function ib(t,e,r,n){return t instanceof Wv?function(s,i,l,c){if(!K_(s.precondition,i))return l;const u=s.value.clone(),d=ZU(s.fieldTransforms,c,i);return u.setAll(d),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof Ah?function(s,i,l,c){if(!K_(s.precondition,i))return l;const u=ZU(s.fieldTransforms,c,i),d=i.data;return d.setAll(gJ(s)),d.setAll(u),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(s,i,l){return K_(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):l}(t,e,r)}function _xe(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),s=dJ(n.transform,a||null);s!=null&&(r===null&&(r=Jo.empty()),r.set(n.field,s))}return r||null}function YU(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&gv(n,a,(s,i)=>wxe(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Wv extends n4{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ah extends n4{constructor(e,r,n,a,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function gJ(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function JU(t,e,r){const n=new Map;Vr(t.length===r.length);for(let a=0;a<r.length;a++){const s=t[a],i=s.transform,l=e.data.field(s.field);n.set(s.field,bxe(i,l,r[a]))}return n}function ZU(t,e,r){const n=new Map;for(const a of t){const s=a.transform,i=r.data.field(a.field);n.set(a.field,yxe(s,i,e))}return n}class Xv extends n4{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class A6 extends n4{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(e.key)&&Cxe(s,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=ib(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=ib(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=cJ();return this.mutations.forEach(a=>{const s=e.get(a.key),i=s.overlayedDocument;let l=this.applyToLocalView(i,s.mutatedFields);l=r.has(a.key)?null:l;const c=pJ(i,l);c!==null&&n.set(a.key,c),i.isValidDocument()||i.convertToNoDocument(Gr.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Sn())}isEqual(e){return this.batchId===e.batchId&&gv(this.mutations,e.mutations,(r,n)=>YU(r,n))&&gv(this.baseMutations,e.baseMutations,(r,n)=>YU(r,n))}}class m6{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){Vr(e.mutations.length===n.length);let a=function(){return mxe}();const s=e.mutations;for(let i=0;i<s.length;i++)a=a.insert(s[i].key,n[i].version);return new m6(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Exe{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _i,Hn;function xJ(t){switch(t){default:return Dr();case Xt.CANCELLED:case Xt.UNKNOWN:case Xt.DEADLINE_EXCEEDED:case Xt.RESOURCE_EXHAUSTED:case Xt.INTERNAL:case Xt.UNAVAILABLE:case Xt.UNAUTHENTICATED:return!1;case Xt.INVALID_ARGUMENT:case Xt.NOT_FOUND:case Xt.ALREADY_EXISTS:case Xt.PERMISSION_DENIED:case Xt.FAILED_PRECONDITION:case Xt.ABORTED:case Xt.OUT_OF_RANGE:case Xt.UNIMPLEMENTED:case Xt.DATA_LOSS:return!0}}function vJ(t){if(t===void 0)return Yl("GRPC error has no .code"),Xt.UNKNOWN;switch(t){case _i.OK:return Xt.OK;case _i.CANCELLED:return Xt.CANCELLED;case _i.UNKNOWN:return Xt.UNKNOWN;case _i.DEADLINE_EXCEEDED:return Xt.DEADLINE_EXCEEDED;case _i.RESOURCE_EXHAUSTED:return Xt.RESOURCE_EXHAUSTED;case _i.INTERNAL:return Xt.INTERNAL;case _i.UNAVAILABLE:return Xt.UNAVAILABLE;case _i.UNAUTHENTICATED:return Xt.UNAUTHENTICATED;case _i.INVALID_ARGUMENT:return Xt.INVALID_ARGUMENT;case _i.NOT_FOUND:return Xt.NOT_FOUND;case _i.ALREADY_EXISTS:return Xt.ALREADY_EXISTS;case _i.PERMISSION_DENIED:return Xt.PERMISSION_DENIED;case _i.FAILED_PRECONDITION:return Xt.FAILED_PRECONDITION;case _i.ABORTED:return Xt.ABORTED;case _i.OUT_OF_RANGE:return Xt.OUT_OF_RANGE;case _i.UNIMPLEMENTED:return Xt.UNIMPLEMENTED;case _i.DATA_LOSS:return Xt.DATA_LOSS;default:return Dr()}}(Hn=_i||(_i={}))[Hn.OK=0]="OK",Hn[Hn.CANCELLED=1]="CANCELLED",Hn[Hn.UNKNOWN=2]="UNKNOWN",Hn[Hn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Hn[Hn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Hn[Hn.NOT_FOUND=5]="NOT_FOUND",Hn[Hn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Hn[Hn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Hn[Hn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Hn[Hn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Hn[Hn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Hn[Hn.ABORTED=10]="ABORTED",Hn[Hn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Hn[Hn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Hn[Hn.INTERNAL=13]="INTERNAL",Hn[Hn.UNAVAILABLE=14]="UNAVAILABLE",Hn[Hn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sxe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ixe=new mp([4294967295,4294967295],0);function e7(t){const e=Sxe().encode(t),r=new jY;return r.update(e),new Uint8Array(r.digest())}function t7(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new mp([r,n],0),new mp([a,s],0)]}class g6{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Iy(`Invalid padding: ${r}`);if(n<0)throw new Iy(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Iy(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Iy(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=mp.fromNumber(this.Ie)}Ee(e,r,n){let a=e.add(r.multiply(mp.fromNumber(n)));return a.compare(Ixe)===1&&(a=new mp([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=e7(e),[n,a]=t7(r);for(let s=0;s<this.hashCount;s++){const i=this.Ee(n,a,s);if(!this.de(i))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new g6(s,a,r);return n.forEach(l=>i.insert(l)),i}insert(e){if(this.Ie===0)return;const r=e7(e),[n,a]=t7(r);for(let s=0;s<this.hashCount;s++){const i=this.Ee(n,a,s);this.Ae(i)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Iy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e,r,n,a,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,mw.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new a4(Gr.min(),a,new vs(An),tu(),Sn())}}class mw{constructor(e,r,n,a,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new mw(n,r,Sn(),Sn(),Sn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e,r,n,a){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=a}}class yJ{constructor(e,r){this.targetId=e,this.me=r}}class bJ{constructor(e,r,n=yi.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class r7{constructor(){this.fe=0,this.ge=a7(),this.pe=yi.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Sn(),r=Sn(),n=Sn();return this.ge.forEach((a,s)=>{switch(s){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Dr()}}),new mw(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=a7()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Vr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class jxe{constructor(e){this.Le=e,this.Be=new Map,this.ke=tu(),this.qe=n7(),this.Qe=new vs(An)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Dr()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,a)=>{this.ze(a)&&r(a)})}He(e){const r=e.targetId,n=e.me.count,a=this.Je(r);if(a){const s=a.target;if($E(s))if(n===0){const i=new _r(s.path);this.Ue(r,i,hs.newNoDocument(i,Gr.min()))}else Vr(n===1);else{const i=this.Ye(r);if(i!==n){const l=this.Ze(e),c=l?this.Xe(l,e,i):1;if(c!==0){this.je(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,u)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let i,l;try{i=Y0(n).toUint8Array()}catch(c){if(c instanceof qY)return X0("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new g6(i,a,s)}catch(c){return X0(c instanceof Iy?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const i=this.Le.tt(),l=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(r,s,null),a++)}),a}rt(e){const r=new Map;this.Be.forEach((s,i)=>{const l=this.Je(i);if(l){if(s.current&&$E(l.target)){const c=new _r(l.target.path);this.ke.get(c)!==null||this.it(i,c)||this.Ue(i,c,hs.newNoDocument(c,e))}s.be&&(r.set(i,s.ve()),s.Ce())}});let n=Sn();this.qe.forEach((s,i)=>{let l=!0;i.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(s))}),this.ke.forEach((s,i)=>i.setReadTime(e));const a=new a4(e,r,this.Qe,this.ke,n);return this.ke=tu(),this.qe=n7(),this.Qe=new vs(An),a}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,r)?a.Fe(r,1):a.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new r7,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Ta(An),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||Ar("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new r7),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function n7(){return new vs(_r.comparator)}function a7(){return new vs(_r.comparator)}const Pxe={asc:"ASCENDING",desc:"DESCENDING"},Bxe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Txe={and:"AND",or:"OR"};class kxe{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function vT(t,e){return t.useProto3Json||dw(e)?e:{value:e}}function wv(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wJ(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Fxe(t,e){return wv(t,e.toTimestamp())}function Io(t){return Vr(!!t),Gr.fromTimestamp(function(r){const n=YA(r);return new or(n.seconds,n.nanos)}(t))}function x6(t,e){return yT(t,e).canonicalString()}function yT(t,e){const r=function(a){return new ea(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?r:r.child(e)}function NJ(t){const e=ea.fromString(t);return Vr(TJ(e)),e}function l2(t,e){return x6(t.databaseId,e.path)}function DA(t,e){const r=NJ(e);if(r.get(1)!==t.databaseId.projectId)throw new pr(Xt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new pr(Xt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new _r(EJ(r))}function CJ(t,e){return x6(t.databaseId,e)}function _J(t){const e=NJ(t);return e.length===4?ea.emptyPath():EJ(e)}function bT(t){return new ea(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function EJ(t){return Vr(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function s7(t,e,r){return{name:l2(t,e),fields:r.value.mapValue.fields}}function Oxe(t,e,r){const n=DA(t,e.name),a=Io(e.updateTime),s=e.createTime?Io(e.createTime):Gr.min(),i=new Jo({mapValue:{fields:e.fields}}),l=hs.newFoundDocument(n,a,s,i);return r&&l.setHasCommittedMutations(),r?l.setHasCommittedMutations():l}function Dxe(t,e){return"found"in e?function(n,a){Vr(!!a.found),a.found.name,a.found.updateTime;const s=DA(n,a.found.name),i=Io(a.found.updateTime),l=a.found.createTime?Io(a.found.createTime):Gr.min(),c=new Jo({mapValue:{fields:a.found.fields}});return hs.newFoundDocument(s,i,l,c)}(t,e):"missing"in e?function(n,a){Vr(!!a.missing),Vr(!!a.readTime);const s=DA(n,a.missing),i=Io(a.readTime);return hs.newNoDocument(s,i)}(t,e):Dr()}function Rxe(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Dr()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(Vr(d===void 0||typeof d=="string"),yi.fromBase64String(d||"")):(Vr(d===void 0||d instanceof Buffer||d instanceof Uint8Array),yi.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,l=i&&function(u){const d=u.code===void 0?Xt.UNKNOWN:vJ(u.code);return new pr(d,u.message||"")}(i);r=new bJ(n,a,s,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=DA(t,n.document.name),s=Io(n.document.updateTime),i=n.document.createTime?Io(n.document.createTime):Gr.min(),l=new Jo({mapValue:{fields:n.document.fields}}),c=hs.newFoundDocument(a,s,i,l),u=n.targetIds||[],d=n.removedTargetIds||[];r=new q_(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=DA(t,n.document),s=n.readTime?Io(n.readTime):Gr.min(),i=hs.newNoDocument(a,s),l=n.removedTargetIds||[];r=new q_([],l,i.key,i)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=DA(t,n.document),s=n.removedTargetIds||[];r=new q_([],s,a,null)}else{if(!("filter"in e))return Dr();{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,i=new Exe(a,s),l=n.targetId;r=new yJ(l,i)}}return r}function c2(t,e){let r;if(e instanceof Wv)r={update:s7(t,e.key,e.value)};else if(e instanceof Xv)r={delete:l2(t,e.key)};else if(e instanceof Ah)r={update:s7(t,e.key,e.data),updateMask:Hxe(e.fieldMask)};else{if(!(e instanceof A6))return Dr();r={verify:l2(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(s,i){const l=i.transform;if(l instanceof i2)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Vp)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof bv)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof o2)return{fieldPath:i.field.canonicalString(),increment:l.Pe};throw Dr()}(0,n))),e.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:Fxe(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Dr()}(t,e.precondition)),r}function wT(t,e){const r=e.currentDocument?function(s){return s.updateTime!==void 0?ps.updateTime(Io(s.updateTime)):s.exists!==void 0?ps.exists(s.exists):ps.none()}(e.currentDocument):ps.none(),n=e.updateTransforms?e.updateTransforms.map(a=>function(i,l){let c=null;if("setToServerValue"in l)Vr(l.setToServerValue==="REQUEST_TIME"),c=new i2;else if("appendMissingElements"in l){const d=l.appendMissingElements.values||[];c=new Vp(d)}else if("removeAllFromArray"in l){const d=l.removeAllFromArray.values||[];c=new bv(d)}else"increment"in l?c=new o2(i,l.increment):Dr();const u=ms.fromServerFormat(l.fieldPath);return new mJ(u,c)}(t,a)):[];if(e.update){e.update.name;const a=DA(t,e.update.name),s=new Jo({mapValue:{fields:e.update.fields}});if(e.updateMask){const i=function(c){const u=c.fieldPaths||[];return new yc(u.map(d=>ms.fromServerFormat(d)))}(e.updateMask);return new Ah(a,s,i,r,n)}return new Wv(a,s,r,n)}if(e.delete){const a=DA(t,e.delete);return new Xv(a,r)}if(e.verify){const a=DA(t,e.verify);return new A6(a,r)}return Dr()}function Mxe(t,e){return t&&t.length>0?(Vr(e!==void 0),t.map(r=>function(a,s){let i=a.updateTime?Io(a.updateTime):Io(s);return i.isEqual(Gr.min())&&(i=Io(s)),new Nxe(i,a.transformResults||[])}(r,e))):[]}function SJ(t,e){return{documents:[CJ(t,e.path)]}}function IJ(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=CJ(t,a);const s=function(u){if(u.length!==0)return BJ(Ca.create(u,"and"))}(e.filters);s&&(r.structuredQuery.where=s);const i=function(u){if(u.length!==0)return u.map(d=>function(h){return{field:Ax(h.field),direction:Uxe(h.dir)}}(d))}(e.orderBy);i&&(r.structuredQuery.orderBy=i);const l=vT(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:r,parent:a}}function jJ(t){let e=_J(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){Vr(n===1);const d=r.from[0];d.allDescendants?a=d.collectionId:e=e.child(d.collectionId)}let s=[];r.where&&(s=function(f){const h=PJ(f);return h instanceof Ca&&d6(h)?h.getFilters():[h]}(r.where));let i=[];r.orderBy&&(i=function(f){return f.map(h=>function(m){return new s2(hx(m.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(r.orderBy));let l=null;r.limit&&(l=function(f){let h;return h=typeof f=="object"?f.value:f,dw(h)?null:h}(r.limit));let c=null;r.startAt&&(c=function(f){const h=!!f.before,A=f.values||[];return new vv(A,h)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const h=!f.before,A=f.values||[];return new vv(A,h)}(r.endAt)),uxe(e,a,i,s,l,"F",c,u)}function Lxe(t,e){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Dr()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function PJ(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=hx(r.unaryFilter.field);return Rn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=hx(r.unaryFilter.field);return Rn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=hx(r.unaryFilter.field);return Rn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=hx(r.unaryFilter.field);return Rn.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Dr()}}(t):t.fieldFilter!==void 0?function(r){return Rn.create(hx(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Dr()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Ca.create(r.compositeFilter.filters.map(n=>PJ(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Dr()}}(r.compositeFilter.op))}(t):Dr()}function Uxe(t){return Pxe[t]}function Qxe(t){return Bxe[t]}function Vxe(t){return Txe[t]}function Ax(t){return{fieldPath:t.canonicalString()}}function hx(t){return ms.fromServerFormat(t.fieldPath)}function BJ(t){return t instanceof Rn?function(r){if(r.op==="=="){if(VU(r.value))return{unaryFilter:{field:Ax(r.field),op:"IS_NAN"}};if(QU(r.value))return{unaryFilter:{field:Ax(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(VU(r.value))return{unaryFilter:{field:Ax(r.field),op:"IS_NOT_NAN"}};if(QU(r.value))return{unaryFilter:{field:Ax(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ax(r.field),op:Qxe(r.op),value:r.value}}}(t):t instanceof Ca?function(r){const n=r.getFilters().map(a=>BJ(a));return n.length===1?n[0]:{compositeFilter:{op:Vxe(r.op),filters:n}}}(t):Dr()}function Hxe(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function TJ(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,r,n,a,s=Gr.min(),i=Gr.min(),l=yi.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new jA(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new jA(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new jA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new jA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kJ{constructor(e){this.ct=e}}function $xe(t,e){let r;if(e.document)r=Oxe(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=_r.fromSegments(e.noDocument.path),a=$p(e.noDocument.readTime);r=hs.newNoDocument(n,a),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Dr();{const n=_r.fromSegments(e.unknownDocument.path),a=$p(e.unknownDocument.version);r=hs.newUnknownDocument(n,a)}}return e.readTime&&r.setReadTime(function(a){const s=new or(a[0],a[1]);return Gr.fromTimestamp(s)}(e.readTime)),r}function i7(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:qE(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(s,i){return{name:l2(s,i.key),fields:i.data.value.mapValue.fields,updateTime:wv(s,i.version.toTimestamp()),createTime:wv(s,i.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:Hp(e.version)};else{if(!e.isUnknownDocument())return Dr();n.unknownDocument={path:r.path.toArray(),version:Hp(e.version)}}return n}function qE(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Hp(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function $p(t){const e=new or(t.seconds,t.nanoseconds);return Gr.fromTimestamp(e)}function Xm(t,e){const r=(e.baseMutations||[]).map(s=>wT(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const i=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const l=e.mutations[s+1];i.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const n=e.mutations.map(s=>wT(t.ct,s)),a=or.fromMillis(e.localWriteTimeMs);return new h6(e.batchId,a,r,n)}function jy(t){const e=$p(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?$p(t.lastLimboFreeSnapshotVersion):Gr.min();let n;return n=function(s){return s.documents!==void 0}(t.query)?function(s){return Vr(s.documents.length===1),Ju(Aw(_J(s.documents[0])))}(t.query):function(s){return Ju(jJ(s))}(t.query),new jA(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,yi.fromBase64String(t.resumeToken))}function FJ(t,e){const r=Hp(e.snapshotVersion),n=Hp(e.lastLimboFreeSnapshotVersion);let a;a=$E(e.target)?SJ(t.ct,e.target):IJ(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Qp(e.target),readTime:r,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:a}}function OJ(t){const e=jJ({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?KE(e,e.limit,"L"):e}function t5(t,e){return new p6(e.largestBatchId,wT(t.ct,e.overlayMutation))}function o7(t,e){const r=e.path.lastSegment();return[t,ec(e.path.popLast()),r]}function l7(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:Hp(n.readTime),documentKey:ec(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gxe{getBundleMetadata(e,r){return c7(e).get(r).next(n=>{if(n)return function(s){return{id:s.bundleId,createTime:$p(s.createTime),version:s.version}}(n)})}saveBundleMetadata(e,r){return c7(e).put(function(a){return{bundleId:a.id,createTime:Hp(Io(a.createTime)),version:a.version}}(r))}getNamedQuery(e,r){return u7(e).get(r).next(n=>{if(n)return function(s){return{name:s.name,query:OJ(s.bundledQuery),readTime:$p(s.readTime)}}(n)})}saveNamedQuery(e,r){return u7(e).put(function(a){return{name:a.name,readTime:Hp(Io(a.readTime)),bundledQuery:a.bundledQuery}}(r))}}function c7(t){return ao(t,"bundles")}function u7(t){return ao(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new s4(e,n)}getOverlay(e,r){return K1(e).get(o7(this.userId,r)).next(n=>n?t5(this.serializer,n):null)}getOverlays(e,r){const n=If();return Mt.forEach(r,a=>this.getOverlay(e,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(e,r,n){const a=[];return n.forEach((s,i)=>{const l=new p6(r,i);a.push(this.ht(e,l))}),Mt.waitFor(a)}removeOverlaysForBatchId(e,r,n){const a=new Set;r.forEach(i=>a.add(ec(i.getCollectionPath())));const s=[];return a.forEach(i=>{const l=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,n+1],!1,!0);s.push(K1(e).j("collectionPathOverlayIndex",l))}),Mt.waitFor(s)}getOverlaysForCollection(e,r,n){const a=If(),s=ec(r),i=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return K1(e).U("collectionPathOverlayIndex",i).next(l=>{for(const c of l){const u=t5(this.serializer,c);a.set(u.getKey(),u)}return a})}getOverlaysForCollectionGroup(e,r,n,a){const s=If();let i;const l=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return K1(e).J({index:"collectionGroupOverlayIndex",range:l},(c,u,d)=>{const f=t5(this.serializer,u);s.size()<a||f.largestBatchId===i?(s.set(f.getKey(),f),i=f.largestBatchId):d.done()}).next(()=>s)}ht(e,r){return K1(e).put(function(a,s,i){const[l,c,u]=o7(s,i.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:c2(a.ct,i.mutation)}}(this.serializer,this.userId,r))}}function K1(t){return ao(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kxe{Pt(e){return ao(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?yi.fromUint8Array(n):yi.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(fs(e.integerValue));else if("doubleValue"in e){const n=fs(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),e2(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=YA(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(Y0(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?zY(e)?this.dt(r,Number.MAX_SAFE_INTEGER):e4(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):Dr()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const a of Object.keys(n))this.Vt(a,r),this.Tt(n[a],r)}wt(e,r){var n,a;const s=e.fields||{};this.dt(r,53);const i="value",l=((a=(n=s[i].arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.length)||0;this.dt(r,15),r.At(fs(l)),this.Vt(i,r),this.Tt(s[i],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const a of n)this.Tt(a,r)}yt(e,r){this.dt(r,37),_r.fromName(e).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}Ym.vt=new Ym;function qxe(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function d7(t){const e=64-function(n){let a=0;for(let s=0;s<8;++s){const i=qxe(255&n[s]);if(a+=i,i!==8)break}return a}(t);return Math.ceil(e/8)}class zxe{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const a=r.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const a=r.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}this.Nt()}kt(e){const r=this.qt(e),n=d7(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=255&r[a]}Kt(e){const r=this.qt(e),n=d7(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=~(255&r[a])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(s){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,s,!1),new Uint8Array(i.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let a=1;a<r.length;++a)r[a]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const a=new Uint8Array(n);a.set(this.buffer),this.buffer=a}}class Wxe{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class Xxe{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class q1{constructor(){this.jt=new zxe,this.Ht=new Wxe(this.jt),this.Jt=new Xxe(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e,r,n,a){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=a}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Jm(this.indexId,this.documentKey,this.arrayValue,n)}}function $h(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=f7(t.arrayValue,e.arrayValue),r!==0?r:(r=f7(t.directionalValue,e.directionalValue),r!==0?r:_r.comparator(t.documentKey,e.documentKey)))}function f7(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A7{constructor(e){this.Xt=new Ta((r,n)=>ms.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(Vr(e.collectionGroup===this.collectionId),this.nn)return!1;const r=dT(e);if(r!==void 0&&!this.sn(r))return!1;const n=Vm(e);let a=new Set,s=0,i=0;for(;s<n.length&&this.sn(n[s]);++s)a=a.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.Xt.size>0){const l=this.Xt.getIterator().getNext();if(!a.has(l.field.canonicalString())){const c=n[s];if(!this.on(l,c)||!this._n(this.en[i++],c))return!1}++s}for(;s<n.length;++s){const l=n[s];if(i>=this.en.length||!this._n(this.en[i++],l))return!1}return!0}an(){if(this.nn)return null;let e=new Ta(ms.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new V_(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new V_(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new V_(n.field,n.dir==="asc"?0:1)));return new HE(HE.UNKNOWN_ID,this.collectionId,r,Zb.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DJ(t){var e,r;if(Vr(t instanceof Rn||t instanceof Ca),t instanceof Rn){if(t instanceof nJ){const a=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(s=>Rn.create(t.field,"==",s)))||[];return Ca.create(a,"or")}return t}const n=t.filters.map(a=>DJ(a));return Ca.create(n,t.op)}function Yxe(t){if(t.getFilters().length===0)return[];const e=_T(DJ(t));return Vr(RJ(e)),NT(e)||CT(e)?[e]:e.getFilters()}function NT(t){return t instanceof Rn}function CT(t){return t instanceof Ca&&d6(t)}function RJ(t){return NT(t)||CT(t)||function(r){if(r instanceof Ca&&mT(r)){for(const n of r.getFilters())if(!NT(n)&&!CT(n))return!1;return!0}return!1}(t)}function _T(t){if(Vr(t instanceof Rn||t instanceof Ca),t instanceof Rn)return t;if(t.filters.length===1)return _T(t.filters[0]);const e=t.filters.map(n=>_T(n));let r=Ca.create(e,t.op);return r=zE(r),RJ(r)?r:(Vr(r instanceof Ca),Vr(yv(r)),Vr(r.filters.length>1),r.filters.reduce((n,a)=>v6(n,a)))}function v6(t,e){let r;return Vr(t instanceof Rn||t instanceof Ca),Vr(e instanceof Rn||e instanceof Ca),r=t instanceof Rn?e instanceof Rn?function(a,s){return Ca.create([a,s],"and")}(t,e):h7(t,e):e instanceof Rn?h7(e,t):function(a,s){if(Vr(a.filters.length>0&&s.filters.length>0),yv(a)&&yv(s))return eJ(a,s.getFilters());const i=mT(a)?a:s,l=mT(a)?s:a,c=i.filters.map(u=>v6(u,l));return Ca.create(c,"or")}(t,e),zE(r)}function h7(t,e){if(yv(e))return eJ(e,t.getFilters());{const r=e.filters.map(n=>v6(t,n));return Ca.create(r,"or")}}function zE(t){if(Vr(t instanceof Rn||t instanceof Ca),t instanceof Rn)return t;const e=t.getFilters();if(e.length===1)return zE(e[0]);if(JY(t))return t;const r=e.map(a=>zE(a)),n=[];return r.forEach(a=>{a instanceof Rn?n.push(a):a instanceof Ca&&(a.op===t.op?n.push(...a.filters):n.push(a))}),n.length===1?n[0]:Ca.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jxe{constructor(){this.un=new y6}addToCollectionParentIndex(e,r){return this.un.add(r),Mt.resolve()}getCollectionParents(e,r){return Mt.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Mt.resolve()}deleteFieldIndex(e,r){return Mt.resolve()}deleteAllFieldIndexes(e){return Mt.resolve()}createTargetIndexes(e,r){return Mt.resolve()}getDocumentsMatchingTarget(e,r){return Mt.resolve(null)}getIndexType(e,r){return Mt.resolve(0)}getFieldIndexes(e,r){return Mt.resolve([])}getNextCollectionGroupToUpdate(e){return Mt.resolve(null)}getMinOffset(e,r){return Mt.resolve(lu.min())}getMinOffsetFromCollectionGroup(e,r){return Mt.resolve(lu.min())}updateCollectionGroup(e,r,n){return Mt.resolve()}updateIndexEntries(e,r){return Mt.resolve()}}class y6{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new Ta(ea.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new Ta(ea.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=new Uint8Array(0);class Zxe{constructor(e,r){this.databaseId=r,this.cn=new y6,this.ln=new gm(n=>Qp(n),(n,a)=>fw(n,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),a=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const s={collectionId:n,parent:ec(a)};return m7(e).put(s)}return Mt.resolve()}getCollectionParents(e,r){const n=[],a=IDBKeyRange.bound([r,""],[RY(r),""],!1,!0);return m7(e).U(a).next(s=>{for(const i of s){if(i.collectionId!==r)break;n.push(Sf(i.parent))}return n})}addFieldIndex(e,r){const n=z1(e),a=function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(r);delete a.indexId;const s=n.add(a);if(r.indexState){const i=Ug(e);return s.next(l=>{i.put(l7(l,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return s.next()}deleteFieldIndex(e,r){const n=z1(e),a=Ug(e),s=Lg(e);return n.delete(r.indexId).next(()=>a.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=z1(e),n=Lg(e),a=Ug(e);return r.j().next(()=>n.j()).next(()=>a.j())}createTargetIndexes(e,r){return Mt.forEach(this.hn(r),n=>this.getIndexType(e,n).next(a=>{if(a===0||a===1){const s=new A7(n).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,r){const n=Lg(e);let a=!0;const s=new Map;return Mt.forEach(this.hn(r),i=>this.Pn(e,i).next(l=>{a&&(a=!!l),s.set(i,l)})).next(()=>{if(a){let i=Sn();const l=[];return Mt.forEach(s,(c,u)=>{Ar("IndexedDbIndexManager",`Using index ${function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(w=>`${w.fieldPath}:${w.kind}`).join(",")}`}(c)} to execute ${Qp(r)}`);const d=function(b,w){const j=dT(w);if(j===void 0)return null;for(const I of GE(b,j.fieldPath))switch(I.op){case"array-contains-any":return I.value.arrayValue.values||[];case"array-contains":return[I.value]}return null}(u,c),f=function(b,w){const j=new Map;for(const I of Vm(w))for(const _ of GE(b,I.fieldPath))switch(_.op){case"==":case"in":j.set(I.fieldPath.canonicalString(),_.value);break;case"not-in":case"!=":return j.set(I.fieldPath.canonicalString(),_.value),Array.from(j.values())}return null}(u,c),h=function(b,w){const j=[];let I=!0;for(const _ of Vm(w)){const S=_.kind===0?qU(b,_.fieldPath,b.startAt):zU(b,_.fieldPath,b.startAt);j.push(S.value),I&&(I=S.inclusive)}return new vv(j,I)}(u,c),A=function(b,w){const j=[];let I=!0;for(const _ of Vm(w)){const S=_.kind===0?zU(b,_.fieldPath,b.endAt):qU(b,_.fieldPath,b.endAt);j.push(S.value),I&&(I=S.inclusive)}return new vv(j,I)}(u,c),m=this.In(c,u,h),p=this.In(c,u,A),g=this.Tn(c,u,f),x=this.En(c.indexId,d,m,h.inclusive,p,A.inclusive,g);return Mt.forEach(x,y=>n.G(y,r.limit).next(b=>{b.forEach(w=>{const j=_r.fromSegments(w.documentKey);i.has(j)||(i=i.add(j),l.push(j))})}))}).next(()=>l)}return Mt.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=Yxe(Ca.create(e.filters,"and")).map(n=>gT(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,n,a,s,i,l){const c=(r!=null?r.length:1)*Math.max(n.length,s.length),u=c/(r!=null?r.length:1),d=[];for(let f=0;f<c;++f){const h=r?this.dn(r[f/u]):HN,A=this.An(e,h,n[f%u],a),m=this.Rn(e,h,s[f%u],i),p=l.map(g=>this.An(e,h,g,!0));d.push(...this.createRange(A,m,p))}return d}An(e,r,n,a){const s=new Jm(e,_r.empty(),r,n);return a?s:s.Zt()}Rn(e,r,n,a){const s=new Jm(e,_r.empty(),r,n);return a?s.Zt():s}Pn(e,r){const n=new A7(r),a=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,a).next(s=>{let i=null;for(const l of s)n.rn(l)&&(!i||l.fields.length>i.fields.length)&&(i=l);return i})}getIndexType(e,r){let n=2;const a=this.hn(r);return Mt.forEach(a,s=>this.Pn(e,s).next(i=>{i?n!==0&&i.fields.length<function(c){let u=new Ta(ms.comparator),d=!1;for(const f of c.filters)for(const h of f.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?d=!0:u=u.add(h.field));for(const f of c.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(d?1:0)}(s)&&(n=1):n=0})).next(()=>function(i){return i.limit!==null}(r)&&a.length>1&&n===2?1:n)}Vn(e,r){const n=new q1;for(const a of Vm(e)){const s=r.data.field(a.fieldPath);if(s==null)return null;const i=n.Yt(a.kind);Ym.vt.It(s,i)}return n.zt()}dn(e){const r=new q1;return Ym.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new q1;return Ym.vt.It(n2(this.databaseId,r),n.Yt(function(s){const i=Vm(s);return i.length===0?0:i[i.length-1].kind}(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let a=[];a.push(new q1);let s=0;for(const i of Vm(e)){const l=n[s++];for(const c of a)if(this.fn(r,i.fieldPath)&&a2(l))a=this.gn(a,i,l);else{const u=c.Yt(i.kind);Ym.vt.It(l,u)}}return this.pn(a)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const a=[...e],s=[];for(const i of n.arrayValue.values||[])for(const l of a){const c=new q1;c.seed(l.zt()),Ym.vt.It(i,c.Yt(r.kind)),s.push(c)}return s}fn(e,r){return!!e.filters.find(n=>n instanceof Rn&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=z1(e),a=Ug(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(s=>{const i=[];return Mt.forEach(s,l=>a.get([l.indexId,this.uid]).next(c=>{i.push(function(d,f){const h=f?new Zb(f.sequenceNumber,new lu($p(f.readTime),new _r(Sf(f.documentKey)),f.largestBatchId)):Zb.empty(),A=d.fields.map(([m,p])=>new V_(ms.fromServerFormat(m),p));return new HE(d.indexId,d.collectionGroup,A,h)}(l,c))})).next(()=>i)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,a)=>{const s=n.indexState.sequenceNumber-a.indexState.sequenceNumber;return s!==0?s:An(n.collectionGroup,a.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const a=z1(e),s=Ug(e);return this.yn(e).next(i=>a.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(l=>Mt.forEach(l,c=>s.put(l7(c.indexId,this.uid,i,n)))))}updateIndexEntries(e,r){const n=new Map;return Mt.forEach(r,(a,s)=>{const i=n.get(a.collectionGroup);return(i?Mt.resolve(i):this.getFieldIndexes(e,a.collectionGroup)).next(l=>(n.set(a.collectionGroup,l),Mt.forEach(l,c=>this.wn(e,a,c).next(u=>{const d=this.Sn(s,c);return u.isEqual(d)?Mt.resolve():this.bn(e,s,c,u,d)}))))})}Dn(e,r,n,a){return Lg(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,a){return Lg(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const a=Lg(e);let s=new Ta($h);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(i,l)=>{s=s.add(new Jm(n.indexId,r,l.arrayValue,l.directionalValue))}).next(()=>s)}Sn(e,r){let n=new Ta($h);const a=this.Vn(r,e);if(a==null)return n;const s=dT(r);if(s!=null){const i=e.data.field(s.fieldPath);if(a2(i))for(const l of i.arrayValue.values||[])n=n.add(new Jm(r.indexId,e.key,this.dn(l),a))}else n=n.add(new Jm(r.indexId,e.key,HN,a));return n}bn(e,r,n,a,s){Ar("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const i=[];return function(c,u,d,f,h){const A=c.getIterator(),m=u.getIterator();let p=Mg(A),g=Mg(m);for(;p||g;){let x=!1,y=!1;if(p&&g){const b=d(p,g);b<0?y=!0:b>0&&(x=!0)}else p!=null?y=!0:x=!0;x?(f(g),g=Mg(m)):y?(h(p),p=Mg(A)):(p=Mg(A),g=Mg(m))}}(a,s,$h,l=>{i.push(this.Dn(e,r,n,l))},l=>{i.push(this.vn(e,r,n,l))}),Mt.waitFor(i)}yn(e){let r=1;return Ug(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,a,s)=>{s.done(),r=a.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((i,l)=>$h(i,l)).filter((i,l,c)=>!l||$h(i,c[l-1])!==0);const a=[];a.push(e);for(const i of n){const l=$h(i,e),c=$h(i,r);if(l===0)a[0]=e.Zt();else if(l>0&&c<0)a.push(i),a.push(i.Zt());else if(c>0)break}a.push(r);const s=[];for(let i=0;i<a.length;i+=2){if(this.Cn(a[i],a[i+1]))return[];const l=[a[i].indexId,this.uid,a[i].arrayValue,a[i].directionalValue,HN,[]],c=[a[i+1].indexId,this.uid,a[i+1].arrayValue,a[i+1].directionalValue,HN,[]];s.push(IDBKeyRange.bound(l,c))}return s}Cn(e,r){return $h(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(p7)}getMinOffset(e,r){return Mt.mapArray(this.hn(r),n=>this.Pn(e,n).next(a=>a||Dr())).next(p7)}}function m7(t){return ao(t,"collectionParents")}function Lg(t){return ao(t,"indexEntries")}function z1(t){return ao(t,"indexConfiguration")}function Ug(t){return ao(t,"indexState")}function p7(t){Vr(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const a=t[n].indexState.offset;i6(a,e)<0&&(e=a),r<a.largestBatchId&&(r=a.largestBatchId)}return new lu(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g7={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class mc{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new mc(e,mc.DEFAULT_COLLECTION_PERCENTILE,mc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MJ(t,e,r){const n=t.store("mutations"),a=t.store("documentMutations"),s=[],i=IDBKeyRange.only(r.batchId);let l=0;const c=n.J({range:i},(d,f,h)=>(l++,h.delete()));s.push(c.next(()=>{Vr(l===1)}));const u=[];for(const d of r.mutations){const f=VY(e,d.key.path,r.batchId);s.push(a.delete(f)),u.push(d.key)}return Mt.waitFor(s).next(()=>u)}function WE(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Dr();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mc.DEFAULT_COLLECTION_PERCENTILE=10,mc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mc.DEFAULT=new mc(41943040,mc.DEFAULT_COLLECTION_PERCENTILE,mc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mc.DISABLED=new mc(-1,0,0);class i4{constructor(e,r,n,a){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=a,this.Fn={}}static lt(e,r,n,a){Vr(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new i4(s,r,n,a)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gh(e).J({index:"userMutationsIndex",range:n},(a,s,i)=>{r=!1,i.done()}).next(()=>r)}addMutationBatch(e,r,n,a){const s=mx(e),i=Gh(e);return i.add({}).next(l=>{Vr(typeof l=="number");const c=new h6(l,r,n,a),u=function(A,m,p){const g=p.baseMutations.map(y=>c2(A.ct,y)),x=p.mutations.map(y=>c2(A.ct,y));return{userId:m,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:g,mutations:x}}(this.serializer,this.userId,c),d=[];let f=new Ta((h,A)=>An(h.canonicalString(),A.canonicalString()));for(const h of a){const A=VY(this.userId,h.key.path,l);f=f.add(h.key.path.popLast()),d.push(i.put(u)),d.push(s.put(A,Fge))}return f.forEach(h=>{d.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Fn[l]=c.keys()}),Mt.waitFor(d).next(()=>c)})}lookupMutationBatch(e,r){return Gh(e).get(r).next(n=>n?(Vr(n.userId===this.userId),Xm(this.serializer,n)):null)}Mn(e,r){return this.Fn[r]?Mt.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const a=n.keys();return this.Fn[r]=a,a}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return Gh(e).J({index:"userMutationsIndex",range:a},(i,l,c)=>{l.userId===this.userId&&(Vr(l.batchId>=n),s=Xm(this.serializer,l)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Gh(e).J({index:"userMutationsIndex",range:r,reverse:!0},(a,s,i)=>{n=s.batchId,i.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Gh(e).U("userMutationsIndex",r).next(n=>n.map(a=>Xm(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=H_(this.userId,r.path),a=IDBKeyRange.lowerBound(n),s=[];return mx(e).J({range:a},(i,l,c)=>{const[u,d,f]=i,h=Sf(d);if(u===this.userId&&r.path.isEqual(h))return Gh(e).get(f).next(A=>{if(!A)throw Dr();Vr(A.userId===this.userId),s.push(Xm(this.serializer,A))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Ta(An);const a=[];return r.forEach(s=>{const i=H_(this.userId,s.path),l=IDBKeyRange.lowerBound(i),c=mx(e).J({range:l},(u,d,f)=>{const[h,A,m]=u,p=Sf(A);h===this.userId&&s.path.isEqual(p)?n=n.add(m):f.done()});a.push(c)}),Mt.waitFor(a).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1,s=H_(this.userId,n),i=IDBKeyRange.lowerBound(s);let l=new Ta(An);return mx(e).J({range:i},(c,u,d)=>{const[f,h,A]=c,m=Sf(h);f===this.userId&&n.isPrefixOf(m)?m.length===a&&(l=l.add(A)):d.done()}).next(()=>this.xn(e,l))}xn(e,r){const n=[],a=[];return r.forEach(s=>{a.push(Gh(e).get(s).next(i=>{if(i===null)throw Dr();Vr(i.userId===this.userId),n.push(Xm(this.serializer,i))}))}),Mt.waitFor(a).next(()=>n)}removeMutationBatch(e,r){return MJ(e._e,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),Mt.forEach(n,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return Mt.resolve();const n=IDBKeyRange.lowerBound(function(i){return[i]}(this.userId)),a=[];return mx(e).J({range:n},(s,i,l)=>{if(s[0]===this.userId){const c=Sf(s[1]);a.push(c)}else l.done()}).next(()=>{Vr(a.length===0)})})}containsKey(e,r){return LJ(e,this.userId,r)}Nn(e){return UJ(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function LJ(t,e,r){const n=H_(e,r.path),a=n[1],s=IDBKeyRange.lowerBound(n);let i=!1;return mx(t).J({range:s,H:!0},(l,c,u)=>{const[d,f,h]=l;d===e&&f===a&&(i=!0),u.done()}).next(()=>i)}function Gh(t){return ao(t,"mutations")}function mx(t){return ao(t,"documentMutations")}function UJ(t){return ao(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Gp(0)}static kn(){return new Gp(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eve{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const n=new Gp(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>Gr.fromTimestamp(new or(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.qn(e).next(a=>(a.highestListenSequenceNumber=r,n&&(a.lastRemoteSnapshotVersion=n.toTimestamp()),r>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=r),this.Qn(e,a)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>Qg(e).delete(r.targetId)).next(()=>this.qn(e)).next(n=>(Vr(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,r,n){let a=0;const s=[];return Qg(e).J((i,l)=>{const c=jy(l);c.sequenceNumber<=r&&n.get(c.targetId)===null&&(a++,s.push(this.removeTargetData(e,c)))}).next(()=>Mt.waitFor(s)).next(()=>a)}forEachTarget(e,r){return Qg(e).J((n,a)=>{const s=jy(a);r(s)})}qn(e){return x7(e).get("targetGlobalKey").next(r=>(Vr(r!==null),r))}Qn(e,r){return x7(e).put("targetGlobalKey",r)}Kn(e,r){return Qg(e).put(FJ(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=Qp(r),a=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return Qg(e).J({range:a,index:"queryTargetsIndex"},(i,l,c)=>{const u=jy(l);fw(r,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,r,n){const a=[],s=p0(e);return r.forEach(i=>{const l=ec(i.path);a.push(s.put({targetId:n,path:l})),a.push(this.referenceDelegate.addReference(e,n,i))}),Mt.waitFor(a)}removeMatchingKeys(e,r,n){const a=p0(e);return Mt.forEach(r,s=>{const i=ec(s.path);return Mt.waitFor([a.delete([n,i]),this.referenceDelegate.removeReference(e,n,s)])})}removeMatchingKeysForTargetId(e,r){const n=p0(e),a=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(a)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),a=p0(e);let s=Sn();return a.J({range:n,H:!0},(i,l,c)=>{const u=Sf(i[1]),d=new _r(u);s=s.add(d)}).next(()=>s)}containsKey(e,r){const n=ec(r.path),a=IDBKeyRange.bound([n],[RY(n)],!1,!0);let s=0;return p0(e).J({index:"documentTargetsIndex",H:!0,range:a},([i,l],c,u)=>{i!==0&&(s++,u.done())}).next(()=>s>0)}ot(e,r){return Qg(e).get(r).next(n=>n?jy(n):null)}}function Qg(t){return ao(t,"targets")}function x7(t){return ao(t,"targetGlobal")}function p0(t){return ao(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v7([t,e],[r,n]){const a=An(t,r);return a===0?An(e,n):a}class tve{constructor(e){this.Un=e,this.buffer=new Ta(v7),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();v7(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class rve{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Ar("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){pm(r)?Ar("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await dg(r)}await this.Hn(3e5)})}}class nve{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return Mt.resolve(Ku.oe);const n=new tve(r);return this.Jn.forEachTarget(e,a=>n.zn(a.sequenceNumber)).next(()=>this.Jn.Zn(e,a=>n.zn(a))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Ar("LruGarbageCollector","Garbage collection skipped; disabled"),Mt.resolve(g7)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Ar("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),g7):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,a,s,i,l,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Ar("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),a=this.params.maximumSequenceNumbersToCollect):a=f,i=Date.now(),this.nthSequenceNumber(e,a))).next(f=>(n=f,l=Date.now(),this.removeTargets(e,n,r))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(f=>(u=Date.now(),dx()<=Dn.DEBUG&&Ar("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${a} in `+(l-i)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),Mt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:f})))}}function ave(t,e){return new nve(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sve{constructor(e,r){this.db=e,this.garbageCollector=ave(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(a=>n+a))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(n,a)=>r(a))}addReference(e,r,n){return $N(e,n)}removeReference(e,r,n){return $N(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return $N(e,r)}nr(e,r){return function(a,s){let i=!1;return UJ(a).Y(l=>LJ(a,l,s).next(c=>(c&&(i=!0),Mt.resolve(!c)))).next(()=>i)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let s=0;return this.tr(e,(i,l)=>{if(l<=r){const c=this.nr(e,i).next(u=>{if(!u)return s++,n.getEntry(e,i).next(()=>(n.removeEntry(i,Gr.min()),p0(e).delete(function(f){return[0,ec(f.path)]}(i))))});a.push(c)}}).next(()=>Mt.waitFor(a)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return $N(e,r)}tr(e,r){const n=p0(e);let a,s=Ku.oe;return n.J({index:"documentTargetsIndex"},([i,l],{path:c,sequenceNumber:u})=>{i===0?(s!==Ku.oe&&r(new _r(Sf(a)),s),s=u,a=c):s=Ku.oe}).next(()=>{s!==Ku.oe&&r(new _r(Sf(a)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function $N(t,e){return p0(t).put(function(n,a){return{targetId:0,path:ec(n.path),sequenceNumber:a}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QJ{constructor(){this.changes=new gm(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,hs.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Mt.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ive{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return Bm(e).put(n)}removeEntry(e,r,n){return Bm(e).delete(function(s,i){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],qE(i),l[l.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.rr(e,n)))}getEntry(e,r){let n=hs.newInvalidDocument(r);return Bm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(W1(r))},(a,s)=>{n=this.ir(r,s)}).next(()=>n)}sr(e,r){let n={size:0,document:hs.newInvalidDocument(r)};return Bm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(W1(r))},(a,s)=>{n={document:this.ir(r,s),size:WE(s)}}).next(()=>n)}getEntries(e,r){let n=tu();return this._r(e,r,(a,s)=>{const i=this.ir(a,s);n=n.insert(a,i)}).next(()=>n)}ar(e,r){let n=tu(),a=new vs(_r.comparator);return this._r(e,r,(s,i)=>{const l=this.ir(s,i);n=n.insert(s,l),a=a.insert(s,WE(i))}).next(()=>({documents:n,ur:a}))}_r(e,r,n){if(r.isEmpty())return Mt.resolve();let a=new Ta(w7);r.forEach(c=>a=a.add(c));const s=IDBKeyRange.bound(W1(a.first()),W1(a.last())),i=a.getIterator();let l=i.getNext();return Bm(e).J({index:"documentKeyIndex",range:s},(c,u,d)=>{const f=_r.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;l&&w7(l,f)<0;)n(l,null),l=i.getNext();l&&l.isEqual(f)&&(n(l,u),l=i.hasNext()?i.getNext():null),l?d.$(W1(l)):d.done()}).next(()=>{for(;l;)n(l,null),l=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,r,n,a,s){const i=r.path,l=[i.popLast().toArray(),i.lastSegment(),qE(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],c=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Bm(e).U(IDBKeyRange.bound(l,c,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let d=tu();for(const f of u){const h=this.ir(_r.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);h.isFoundDocument()&&(hw(r,h)||a.has(h.key))&&(d=d.insert(h.key,h))}return d})}getAllFromCollectionGroup(e,r,n,a){let s=tu();const i=b7(r,n),l=b7(r,lu.max());return Bm(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,l,!0)},(c,u,d)=>{const f=this.ir(_r.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(f.key,f),s.size===a&&d.done()}).next(()=>s)}newChangeBuffer(e){return new ove(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return y7(e).get("remoteDocumentGlobalKey").next(r=>(Vr(!!r),r))}rr(e,r){return y7(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=$xe(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(Gr.min())))return n}return hs.newInvalidDocument(e)}}function VJ(t){return new ive(t)}class ove extends QJ{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new gm(n=>n.toString(),(n,a)=>n.isEqual(a))}applyChanges(e){const r=[];let n=0,a=new Ta((s,i)=>An(s.canonicalString(),i.canonicalString()));return this.changes.forEach((s,i)=>{const l=this.lr.get(s);if(r.push(this.cr.removeEntry(e,s,l.readTime)),i.isValidDocument()){const c=i7(this.cr.serializer,i);a=a.add(s.path.popLast());const u=WE(c);n+=u-l.size,r.push(this.cr.addEntry(e,s,c))}else if(n-=l.size,this.trackRemovals){const c=i7(this.cr.serializer,i.convertToNoDocument(Gr.min()));r.push(this.cr.addEntry(e,s,c))}}),a.forEach(s=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),r.push(this.cr.updateMetadata(e,n)),Mt.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:n,ur:a})=>(a.forEach((s,i)=>{this.lr.set(s,{size:i,readTime:n.get(s).readTime})}),n))}}function y7(t){return ao(t,"remoteDocumentGlobal")}function Bm(t){return ao(t,"remoteDocumentsV14")}function W1(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function b7(t,e){const r=e.documentKey.path.toArray();return[t,qE(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function w7(t,e){const r=t.path.toArray(),n=e.path.toArray();let a=0;for(let s=0;s<r.length-2&&s<n.length-2;++s)if(a=An(r[s],n[s]),a)return a;return a=An(r.length,n.length),a||(a=An(r[r.length-2],n[n.length-2]),a||An(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lve{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HJ{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(e,r))).next(a=>(n!==null&&ib(n.mutation,a,yc.empty(),or.now()),a))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Sn()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Sn()){const a=If();return this.populateOverlays(e,a,r).next(()=>this.computeViews(e,r,a,n).next(s=>{let i=Sy();return s.forEach((l,c)=>{i=i.insert(l,c.overlayedDocument)}),i}))}getOverlayedDocuments(e,r){const n=If();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Sn()))}populateOverlays(e,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(e,a).next(s=>{s.forEach((i,l)=>{r.set(i,l)})})}computeViews(e,r,n,a){let s=tu();const i=sb(),l=function(){return sb()}();return r.forEach((c,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof Ah)?s=s.insert(u.key,u):d!==void 0?(i.set(u.key,d.mutation.getFieldMask()),ib(d.mutation,u,d.mutation.getFieldMask(),or.now())):i.set(u.key,yc.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,d)=>i.set(u,d)),r.forEach((u,d)=>{var f;return l.set(u,new lve(d,(f=i.get(u))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,r){const n=sb();let a=new vs((i,l)=>i-l),s=Sn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(i=>{for(const l of i)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||yc.empty();d=l.applyToLocalView(u,d),n.set(c,d);const f=(a.get(l.batchId)||Sn()).add(c);a=a.insert(l.batchId,f)})}).next(()=>{const i=[],l=a.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,f=cJ();d.forEach(h=>{if(!s.has(h)){const A=pJ(r.get(h),n.get(h));A!==null&&f.set(h,A),s=s.add(h)}}),i.push(this.documentOverlayCache.saveOverlays(e,u,f))}return Mt.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,a){return function(i){return _r.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):aJ(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next(s=>{const i=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-s.size):Mt.resolve(If());let l=-1,c=s;return i.next(u=>Mt.forEach(u,(d,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),s.get(d)?Mt.resolve():this.remoteDocumentCache.getEntry(e,d).next(h=>{c=c.insert(d,h)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,Sn())).next(d=>({batchId:l,changes:lJ(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new _r(r)).next(n=>{let a=Sy();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const s=r.collectionGroup;let i=Sy();return this.indexManager.getCollectionParents(e,s).next(l=>Mt.forEach(l,c=>{const u=function(f,h){return new zv(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,n,a).next(d=>{d.forEach((f,h)=>{i=i.insert(f,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,a))).next(i=>{s.forEach((c,u)=>{const d=u.getKey();i.get(d)===null&&(i=i.insert(d,hs.newInvalidDocument(d)))});let l=Sy();return i.forEach((c,u)=>{const d=s.get(c);d!==void 0&&ib(d.mutation,u,yc.empty(),or.now()),hw(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cve{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Mt.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:Io(a.createTime)}}(r)),Mt.resolve()}getNamedQuery(e,r){return Mt.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(a){return{name:a.name,query:OJ(a.bundledQuery),readTime:Io(a.readTime)}}(r)),Mt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uve{constructor(){this.overlays=new vs(_r.comparator),this.Ir=new Map}getOverlay(e,r){return Mt.resolve(this.overlays.get(r))}getOverlays(e,r){const n=If();return Mt.forEach(r,a=>this.getOverlay(e,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((a,s)=>{this.ht(e,r,s)}),Mt.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.Ir.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(n)),Mt.resolve()}getOverlaysForCollection(e,r,n){const a=If(),s=r.length+1,i=new _r(r.child("")),l=this.overlays.getIteratorFrom(i);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&a.set(c.getKey(),c)}return Mt.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let s=new vs((u,d)=>u-d);const i=this.overlays.getIterator();for(;i.hasNext();){const u=i.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=If(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=If(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=a)););return Mt.resolve(l)}ht(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const i=this.Ir.get(a.largestBatchId).delete(n.key);this.Ir.set(a.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new p6(r,n));let s=this.Ir.get(r);s===void 0&&(s=Sn(),this.Ir.set(r,s)),this.Ir.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dve{constructor(){this.sessionToken=yi.EMPTY_BYTE_STRING}getSessionToken(e){return Mt.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Mt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(){this.Tr=new Ta(vo.Er),this.dr=new Ta(vo.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new vo(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new vo(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new _r(new ea([])),n=new vo(r,e),a=new vo(r,e+1),s=[];return this.dr.forEachInRange([n,a],i=>{this.Vr(i),s.push(i.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new _r(new ea([])),n=new vo(r,e),a=new vo(r,e+1);let s=Sn();return this.dr.forEachInRange([n,a],i=>{s=s.add(i.key)}),s}containsKey(e){const r=new vo(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class vo{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return _r.comparator(e.key,r.key)||An(e.wr,r.wr)}static Ar(e,r){return An(e.wr,r.wr)||_r.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fve{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Ta(vo.Er)}checkEmpty(e){return Mt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new h6(s,r,n,a);this.mutationQueue.push(i);for(const l of a)this.br=this.br.add(new vo(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Mt.resolve(i)}lookupMutationBatch(e,r){return Mt.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.vr(n),s=a<0?0:a;return Mt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Mt.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Mt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new vo(r,0),a=new vo(r,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,a],i=>{const l=this.Dr(i.wr);s.push(l)}),Mt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Ta(An);return r.forEach(a=>{const s=new vo(a,0),i=new vo(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,i],l=>{n=n.add(l.wr)})}),Mt.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let s=n;_r.isDocumentKey(s)||(s=s.child(""));const i=new vo(new _r(s),0);let l=new Ta(An);return this.br.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(l=l.add(c.wr)),!0)},i),Mt.resolve(this.Cr(l))}Cr(e){const r=[];return e.forEach(n=>{const a=this.Dr(n);a!==null&&r.push(a)}),r}removeMutationBatch(e,r){Vr(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Mt.forEach(r.mutations,a=>{const s=new vo(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new vo(r,0),a=this.br.firstAfterOrEqual(n);return Mt.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Mt.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ave{constructor(e){this.Mr=e,this.docs=function(){return new vs(_r.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,i=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Mt.resolve(n?n.document.mutableCopy():hs.newInvalidDocument(r))}getEntries(e,r){let n=tu();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():hs.newInvalidDocument(a))}),Mt.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let s=tu();const i=r.path,l=new _r(i.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!i.isPrefixOf(u.path))break;u.path.length>i.length+1||i6(MY(d),n)<=0||(a.has(d.key)||hw(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Mt.resolve(s)}getAllFromCollectionGroup(e,r,n,a){Dr()}Or(e,r){return Mt.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new hve(this)}getSize(e){return Mt.resolve(this.size)}}class hve extends QJ{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.cr.addEntry(e,a)):this.cr.removeEntry(n)}),Mt.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mve{constructor(e){this.persistence=e,this.Nr=new gm(r=>Qp(r),fw),this.lastRemoteSnapshotVersion=Gr.min(),this.highestTargetId=0,this.Lr=0,this.Br=new b6,this.targetCount=0,this.kr=Gp.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,a)=>r(a)),Mt.resolve()}getLastRemoteSnapshotVersion(e){return Mt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Mt.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Mt.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Mt.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Gp(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Mt.resolve()}updateTargetData(e,r){return this.Kn(r),Mt.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Mt.resolve()}removeTargets(e,r,n){let a=0;const s=[];return this.Nr.forEach((i,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.Nr.delete(i),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),a++)}),Mt.waitFor(s).next(()=>a)}getTargetCount(e){return Mt.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Mt.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Mt.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(i=>{s.push(a.markPotentiallyOrphaned(e,i))}),Mt.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Mt.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Mt.resolve(n)}containsKey(e,r){return Mt.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $J{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Ku(0),this.Kr=!1,this.Kr=!0,this.$r=new dve,this.referenceDelegate=e(this),this.Ur=new mve(this),this.indexManager=new Jxe,this.remoteDocumentCache=function(a){return new Ave(a)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new kJ(r),this.Gr=new cve(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new uve,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new fve(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){Ar("MemoryPersistence","Starting transaction:",e);const a=new pve(this.Qr.next());return this.referenceDelegate.zr(),n(a).next(s=>this.referenceDelegate.jr(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Hr(e,r){return Mt.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class pve extends UY{constructor(e){super(),this.currentSequenceNumber=e}}class o4{constructor(e){this.persistence=e,this.Jr=new b6,this.Yr=null}static Zr(e){return new o4(e)}get Xr(){if(this.Yr)return this.Yr;throw Dr()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Mt.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Mt.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Mt.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(a=>this.Xr.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(a=>{a.forEach(s=>this.Xr.add(s.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Mt.forEach(this.Xr,n=>{const a=_r.fromPath(n);return this.ei(e,a).next(s=>{s||r.removeEntry(a,Gr.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return Mt.or([()=>Mt.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gve{constructor(e){this.serializer=e}O(e,r,n,a){const s=new ZI("createOrUpgrade",r);n<1&&a>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",DU,{unique:!0}),c.createObjectStore("documentMutations")}(e),N7(e),function(c){c.createObjectStore("remoteDocuments")}(e));let i=Mt.resolve();return n<3&&a>=3&&(n!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),N7(e)),i=i.next(()=>function(c){const u=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Gr.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",d)}(s))),n<4&&a>=4&&(n!==0&&(i=i.next(()=>function(c,u){return u.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",DU,{unique:!0});const f=u.store("mutations"),h=d.map(A=>f.put(A));return Mt.waitFor(h)})}(e,s))),i=i.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&a>=5&&(i=i.next(()=>this.ni(s))),n<6&&a>=6&&(i=i.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),n<7&&a>=7&&(i=i.next(()=>this.ii(s))),n<8&&a>=8&&(i=i.next(()=>this.si(e,s))),n<9&&a>=9&&(i=i.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&a>=10&&(i=i.next(()=>this.oi(s))),n<11&&a>=11&&(i=i.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&a>=12&&(i=i.next(()=>{(function(c){const u=c.createObjectStore("documentOverlays",{keyPath:Kge});u.createIndex("collectionPathOverlayIndex",qge,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",zge,{unique:!1})})(e)})),n<13&&a>=13&&(i=i.next(()=>function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:Oge});u.createIndex("documentKeyIndex",Dge),u.createIndex("collectionGroupIndex",Rge)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&a>=14&&(i=i.next(()=>this.ai(e,s))),n<15&&a>=15&&(i=i.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:Vge}).createIndex("sequenceNumberIndex",Hge,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:$ge}).createIndex("documentKeyIndex",Gge,{unique:!1})}(e))),n<16&&a>=16&&(i=i.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&a>=17&&(i=i.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),i}ri(e){let r=0;return e.store("remoteDocuments").J((n,a)=>{r+=WE(a)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next(a=>Mt.forEach(a,s=>{const i=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",i).next(l=>Mt.forEach(l,c=>{Vr(c.userId===s.userId);const u=Xm(this.serializer,c);return MJ(e,s.userId,u).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const s=[];return n.J((i,l)=>{const c=new ea(i),u=function(f){return[0,ec(f)]}(c);s.push(r.get(u).next(d=>d?Mt.resolve():(f=>r.put({targetId:0,path:ec(f),sequenceNumber:a.highestListenSequenceNumber}))(c)))}).next(()=>Mt.waitFor(s))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:Qge});const n=r.store("collectionParents"),a=new y6,s=i=>{if(a.add(i)){const l=i.lastSegment(),c=i.popLast();return n.put({collectionId:l,parent:ec(c)})}};return r.store("remoteDocuments").J({H:!0},(i,l)=>{const c=new ea(i);return s(c.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([i,l,c],u)=>{const d=Sf(l);return s(d.popLast())}))}oi(e){const r=e.store("targets");return r.J((n,a)=>{const s=jy(a),i=FJ(this.serializer,s);return r.put(i)})}_i(e,r){const n=r.store("remoteDocuments"),a=[];return n.J((s,i)=>{const l=r.store("remoteDocumentsV14"),c=function(f){return f.document?new _r(ea.fromString(f.document.name).popFirst(5)):f.noDocument?_r.fromSegments(f.noDocument.path):f.unknownDocument?_r.fromSegments(f.unknownDocument.path):Dr()}(i).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:i.readTime||[0,0],unknownDocument:i.unknownDocument,noDocument:i.noDocument,document:i.document,hasCommittedMutations:!!i.hasCommittedMutations};a.push(l.put(u))}).next(()=>Mt.waitFor(a))}ai(e,r){const n=r.store("mutations"),a=VJ(this.serializer),s=new $J(o4.Zr,this.serializer.ct);return n.U().next(i=>{const l=new Map;return i.forEach(c=>{var u;let d=(u=l.get(c.userId))!==null&&u!==void 0?u:Sn();Xm(this.serializer,c).keys().forEach(f=>d=d.add(f)),l.set(c.userId,d)}),Mt.forEach(l,(c,u)=>{const d=new Wo(u),f=s4.lt(this.serializer,d),h=s.getIndexManager(d),A=i4.lt(d,this.serializer,h,s.referenceDelegate);return new HJ(a,A,f,h).recalculateAndSaveOverlaysForDocumentKeys(new fT(r,Ku.oe),c).next()})})}}function N7(t){t.createObjectStore("targetDocuments",{keyPath:Lge}).createIndex("documentTargetsIndex",Uge,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Mge,{unique:!0}),t.createObjectStore("targetGlobal")}const r5="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class w6{constructor(e,r,n,a,s,i,l,c,u,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=s,this.window=i,this.document=l,this.ci=u,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=h=>Promise.resolve(),!w6.D())throw new pr(Xt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new sve(this,a),this.Ai=r+"main",this.serializer=new kJ(c),this.Ri=new Q0(this.Ai,this.hi,new gve(this.serializer)),this.$r=new Kxe,this.Ur=new eve(this.referenceDelegate,this.serializer),this.remoteDocumentCache=VJ(this.serializer),this.Gr=new Gxe,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&Yl("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new pr(Xt.FAILED_PRECONDITION,r5);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Ku(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>GN(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(pm(e))return Ar("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ar("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return X1(e).get("owner").next(r=>Mt.resolve(this.vi(r)))}Ci(e){return GN(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=ao(r,"clientMetadata");return n.U().next(a=>{const s=this.xi(a,18e5),i=a.filter(l=>s.indexOf(l)===-1);return Mt.forEach(i,l=>n.delete(l.clientId)).next(()=>i)})}).catch(()=>[]);if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Mt.resolve(!0):X1(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new pr(Xt.FAILED_PRECONDITION,r5);return!1}}return!(!this.networkEnabled||!this.inForeground)||GN(e).U().next(n=>this.xi(n,5e3).find(a=>{if(this.clientId!==a.clientId){const s=!this.networkEnabled&&a.networkEnabled,i=!this.inForeground&&a.inForeground,l=this.networkEnabled===a.networkEnabled;if(s||i&&l)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&Ar("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new fT(e,Ku.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(e,r){return e.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>GN(e).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return i4.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Zxe(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return s4.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){Ar("IndexedDbPersistence","Starting transaction:",e);const a=r==="readonly"?"readonly":"readwrite",s=function(c){return c===17?Yge:c===16?Xge:c===15?l6:c===14?GY:c===13?$Y:c===12?Wge:c===11?HY:void Dr()}(this.hi);let i;return this.Ri.runTransaction(e,a,s,l=>(i=new fT(l,this.Qr?this.Qr.next():Ku.oe),r==="readwrite-primary"?this.wi(i).next(c=>!!c||this.Si(i)).next(c=>{if(!c)throw Yl(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new pr(Xt.FAILED_PRECONDITION,LY);return n(i)}).next(c=>this.Di(i).next(()=>c)):this.Ki(i).next(()=>n(i)))).then(l=>(i.raiseOnCommittedEvent(),l))}Ki(e){return X1(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new pr(Xt.FAILED_PRECONDITION,r5)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return X1(e).put("owner",r)}static D(){return Q0.D()}bi(e){const r=X1(e);return r.get("owner").next(n=>this.vi(n)?(Ar("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Mt.resolve())}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(Yl(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;HX()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return Ar("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Yl("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Yl("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function X1(t){return ao(t,"owner")}function GN(t){return ao(t,"clientMetadata")}function xve(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=a}static Wi(e,r){let n=Sn(),a=Sn();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new N6(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vve{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GJ{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return HX()?8:QY(ro())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,a){const s={result:null};return this.Yi(e,r).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.Zi(e,r,a,n).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new vve;return this.Xi(e,r,i).next(l=>{if(s.result=l,this.zi)return this.es(e,r,i,l.size)})}).next(()=>s.result)}es(e,r,n,a){return n.documentReadCount<this.ji?(dx()<=Dn.DEBUG&&Ar("QueryEngine","SDK will not create cache indexes for query:",fx(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Mt.resolve()):(dx()<=Dn.DEBUG&&Ar("QueryEngine","Query:",fx(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.Hi*a?(dx()<=Dn.DEBUG&&Ar("QueryEngine","The SDK decides to create cache indexes for query:",fx(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ju(r))):Mt.resolve())}Yi(e,r){if(WU(r))return Mt.resolve(null);let n=Ju(r);return this.indexManager.getIndexType(e,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=KE(r,null,"F"),n=Ju(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const i=Sn(...s);return this.Ji.getDocuments(e,i).next(l=>this.indexManager.getMinOffset(e,n).next(c=>{const u=this.ts(r,l);return this.ns(r,u,i,c.readTime)?this.Yi(e,KE(r,null,"F")):this.rs(e,u,r,c)}))})))}Zi(e,r,n,a){return WU(r)||a.isEqual(Gr.min())?Mt.resolve(null):this.Ji.getDocuments(e,n).next(s=>{const i=this.ts(r,s);return this.ns(r,i,n,a)?Mt.resolve(null):(dx()<=Dn.DEBUG&&Ar("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),fx(r)),this.rs(e,i,r,Sge(a,-1)).next(l=>l))})}ts(e,r){let n=new Ta(iJ(e));return r.forEach((a,s)=>{hw(e,s)&&(n=n.add(s))}),n}ns(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Xi(e,r,n){return dx()<=Dn.DEBUG&&Ar("QueryEngine","Using full collection scan to execute query:",fx(r)),this.Ji.getDocumentsMatchingQuery(e,r,lu.min(),n)}rs(e,r,n,a){return this.Ji.getDocumentsMatchingQuery(e,n,a).next(s=>(r.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yve{constructor(e,r,n,a){this.persistence=e,this.ss=r,this.serializer=a,this.os=new vs(An),this._s=new gm(s=>Qp(s),fw),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HJ(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function KJ(t,e,r,n){return new yve(t,e,r,n)}async function qJ(t,e){const r=on(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const i=[],l=[];let c=Sn();for(const u of a){i.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({hs:u,removedBatchIds:i,addedBatchIds:l}))})})}function bve(t,e){const r=on(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=e.batch.keys(),s=r.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const f=u.batch,h=f.keys();let A=Mt.resolve();return h.forEach(m=>{A=A.next(()=>d.getEntry(c,m)).next(p=>{const g=u.docVersions.get(m);Vr(g!==null),p.version.compareTo(g)<0&&(f.applyToRemoteDocument(p,u),p.isValidDocument()&&(p.setReadTime(u.commitVersion),d.addEntry(p)))})}),A.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(r,n,e,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=Sn();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>r.localDocuments.getDocuments(n,a))})}function zJ(t){const e=on(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function wve(t,e){const r=on(t),n=e.snapshotVersion;let a=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=r.cs.newChangeBuffer({trackRemovals:!0});a=r.os;const l=[];e.targetChanges.forEach((d,f)=>{const h=a.get(f);if(!h)return;l.push(r.Ur.removeMatchingKeys(s,d.removedDocuments,f).next(()=>r.Ur.addMatchingKeys(s,d.addedDocuments,f)));let A=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?A=A.withResumeToken(yi.EMPTY_BYTE_STRING,Gr.min()).withLastLimboFreeSnapshotVersion(Gr.min()):d.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(d.resumeToken,n)),a=a.insert(f,A),function(p,g,x){return p.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(h,A,d)&&l.push(r.Ur.updateTargetData(s,A))});let c=tu(),u=Sn();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(Nve(s,i,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!n.isEqual(Gr.min())){const d=r.Ur.getLastRemoteSnapshotVersion(s).next(f=>r.Ur.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(d)}return Mt.waitFor(l).next(()=>i.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.os=a,s))}function Nve(t,e,r){let n=Sn(),a=Sn();return r.forEach(s=>n=n.add(s)),e.getEntries(t,n).next(s=>{let i=tu();return r.forEach((l,c)=>{const u=s.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(l)),c.isNoDocument()&&c.version.isEqual(Gr.min())?(e.removeEntry(l,c.readTime),i=i.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),i=i.insert(l,c)):Ar("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Ps:i,Is:a}})}function Cve(t,e){const r=on(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function _ve(t,e){const r=on(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Ur.getTargetData(n,e).next(s=>s?(a=s,Mt.resolve(a)):r.Ur.allocateTargetId(n).next(i=>(a=new jA(e,i,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.os.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function ET(t,e,r){const n=on(t),a=n.os.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,i=>n.persistence.referenceDelegate.removeTarget(i,a))}catch(i){if(!pm(i))throw i;Ar("LocalStore",`Failed to update sequence numbers for target ${e}: ${i}`)}n.os=n.os.remove(e),n._s.delete(a.target)}function C7(t,e,r){const n=on(t);let a=Gr.min(),s=Sn();return n.persistence.runTransaction("Execute query","readwrite",i=>function(c,u,d){const f=on(c),h=f._s.get(d);return h!==void 0?Mt.resolve(f.os.get(h)):f.Ur.getTargetData(u,d)}(n,i,Ju(e)).next(l=>{if(l)return a=l.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(i,l.targetId).next(c=>{s=c})}).next(()=>n.ss.getDocumentsMatchingQuery(i,e,r?a:Gr.min(),r?s:Sn())).next(l=>(Eve(n,fxe(e),l),{documents:l,Ts:s})))}function Eve(t,e,r){let n=t.us.get(e)||Gr.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),t.us.set(e,n)}class _7{constructor(){this.activeTargetIds=xxe()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class WJ{constructor(){this.so=new _7,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new _7,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sve{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E7{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ar("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ar("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KN=null;function n5(){return KN===null?KN=function(){return 268435456+Math.round(2147483648*Math.random())}():KN++,"0x"+KN.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ive={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jve{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl="WebChannelConnection";class Pve extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${a}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${s}`}get Fo(){return!1}Mo(r,n,a,s,i){const l=n5(),c=this.xo(r,n.toUriEncodedString());Ar("RestConnection",`Sending RPC '${r}' ${l}:`,c,a);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,i),this.No(r,c,u,a).then(d=>(Ar("RestConnection",`Received RPC '${r}' ${l}: `,d),d),d=>{throw X0("RestConnection",`RPC '${r}' ${l} failed with error: `,d,"url: ",c,"request:",a),d})}Lo(r,n,a,s,i,l){return this.Mo(r,n,a,s,i)}Oo(r,n,a){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qv}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>r[i]=s),a&&a.headers.forEach((s,i)=>r[i]=s)}xo(r,n){const a=Ive[r];return`${this.Do}/v1/${n}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,a){const s=n5();return new Promise((i,l)=>{const c=new PY;c.setWithCredentials(!0),c.listenOnce(BY.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Q_.NO_ERROR:const d=c.getResponseJson();Ar(dl,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),i(d);break;case Q_.TIMEOUT:Ar(dl,`RPC '${e}' ${s} timed out`),l(new pr(Xt.DEADLINE_EXCEEDED,"Request time out"));break;case Q_.HTTP_ERROR:const f=c.getStatus();if(Ar(dl,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);const A=h==null?void 0:h.error;if(A&&A.status&&A.message){const m=function(g){const x=g.toLowerCase().replace(/_/g,"-");return Object.values(Xt).indexOf(x)>=0?x:Xt.UNKNOWN}(A.status);l(new pr(m,A.message))}else l(new pr(Xt.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new pr(Xt.UNAVAILABLE,"Connection failed."));break;default:Dr()}}finally{Ar(dl,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(a);Ar(dl,`RPC '${e}' ${s} sending request:`,a),c.send(r,"POST",u,n,15)})}Bo(e,r,n){const a=n5(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=FY(),l=kY(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=s.join("");Ar(dl,`Creating RPC '${e}' stream ${a}: ${d}`,c);const f=i.createWebChannel(d,c);let h=!1,A=!1;const m=new jve({Io:g=>{A?Ar(dl,`Not sending because RPC '${e}' stream ${a} is closed:`,g):(h||(Ar(dl,`Opening RPC '${e}' stream ${a} transport.`),f.open(),h=!0),Ar(dl,`RPC '${e}' stream ${a} sending:`,g),f.send(g))},To:()=>f.close()}),p=(g,x,y)=>{g.listen(x,b=>{try{y(b)}catch(w){setTimeout(()=>{throw w},0)}})};return p(f,Ey.EventType.OPEN,()=>{A||(Ar(dl,`RPC '${e}' stream ${a} transport opened.`),m.yo())}),p(f,Ey.EventType.CLOSE,()=>{A||(A=!0,Ar(dl,`RPC '${e}' stream ${a} transport closed`),m.So())}),p(f,Ey.EventType.ERROR,g=>{A||(A=!0,X0(dl,`RPC '${e}' stream ${a} transport errored:`,g),m.So(new pr(Xt.UNAVAILABLE,"The operation could not be completed")))}),p(f,Ey.EventType.MESSAGE,g=>{var x;if(!A){const y=g.data[0];Vr(!!y);const b=y,w=b.error||((x=b[0])===null||x===void 0?void 0:x.error);if(w){Ar(dl,`RPC '${e}' stream ${a} received error:`,w);const j=w.status;let I=function(E){const k=_i[E];if(k!==void 0)return vJ(k)}(j),_=w.message;I===void 0&&(I=Xt.INTERNAL,_="Unknown error status: "+j+" with message "+w.message),A=!0,m.So(new pr(I,_)),f.close()}else Ar(dl,`RPC '${e}' stream ${a} received:`,y),m.bo(y)}}),p(l,TY.STAT_EVENT,g=>{g.stat===uT.PROXY?Ar(dl,`RPC '${e}' stream ${a} detected buffering proxy`):g.stat===uT.NOPROXY&&Ar(dl,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{m.wo()},0),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bve(){return typeof window<"u"?window:null}function z_(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l4(t){return new kxe(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(e,r,n=1e3,a=1.5,s=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=a,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),a=Math.max(0,r-n);a>0&&Ar("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XJ{constructor(e,r,n,a,s,i,l,c){this.ui=e,this.Ho=n,this.Jo=a,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new C6(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Xt.RESOURCE_EXHAUSTED?(Yl(r.toString()),Yl("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Xt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.Yo===r&&this.P_(n,a)},n=>{e(()=>{const a=new pr(Xt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(a)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(a=>{n(()=>this.I_(a))}),this.stream.onMessage(a=>{n(()=>++this.e_==1?this.E_(a):this.onNext(a))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Ar("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(Ar("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Tve extends XJ{constructor(e,r,n,a,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=Rxe(this.serializer,e),n=function(s){if(!("targetChange"in s))return Gr.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?Gr.min():i.readTime?Io(i.readTime):Gr.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=bT(this.serializer),r.addTarget=function(s,i){let l;const c=i.target;if(l=$E(c)?{documents:SJ(s,c)}:{query:IJ(s,c)._t},l.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){l.resumeToken=wJ(s,i.resumeToken);const u=vT(s,i.expectedCount);u!==null&&(l.expectedCount=u)}else if(i.snapshotVersion.compareTo(Gr.min())>0){l.readTime=wv(s,i.snapshotVersion.toTimestamp());const u=vT(s,i.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const n=Lxe(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=bT(this.serializer),r.removeTarget=e,this.a_(r)}}class kve extends XJ{constructor(e,r,n,a,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Vr(!!e.streamToken),this.lastStreamToken=e.streamToken,Vr(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Vr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=Mxe(e.writeResults,e.commitTime),n=Io(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=bT(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>c2(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fve extends class{}{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new pr(Xt.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Mo(e,yT(r,n),a,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Xt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new pr(Xt.UNKNOWN,s.toString())})}Lo(e,r,n,a,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.connection.Lo(e,yT(r,n),a,i,l,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Xt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new pr(Xt.UNKNOWN,i.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Ove{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Yl(r),this.D_=!1):Ar("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dve{constructor(e,r,n,a,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(i=>{n.enqueueAndForget(async()=>{Ag(this)&&(Ar("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=on(c);u.L_.add(4),await pw(u),u.q_.set("Unknown"),u.L_.delete(4),await c4(u)}(this))})}),this.q_=new Ove(n,a)}}async function c4(t){if(Ag(t))for(const e of t.B_)await e(!0)}async function pw(t){for(const e of t.B_)await e(!1)}function YJ(t,e){const r=on(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),I6(r)?S6(r):Yv(r).r_()&&E6(r,e))}function _6(t,e){const r=on(t),n=Yv(r);r.N_.delete(e),n.r_()&&JJ(r,e),r.N_.size===0&&(n.r_()?n.o_():Ag(r)&&r.q_.set("Unknown"))}function E6(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Gr.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Yv(t).A_(e)}function JJ(t,e){t.Q_.xe(e),Yv(t).R_(e)}function S6(t){t.Q_=new jxe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Yv(t).start(),t.q_.v_()}function I6(t){return Ag(t)&&!Yv(t).n_()&&t.N_.size>0}function Ag(t){return on(t).L_.size===0}function ZJ(t){t.Q_=void 0}async function Rve(t){t.q_.set("Online")}async function Mve(t){t.N_.forEach((e,r)=>{E6(t,e)})}async function Lve(t,e){ZJ(t),I6(t)?(t.q_.M_(e),S6(t)):t.q_.set("Unknown")}async function Uve(t,e,r){if(t.q_.set("Online"),e instanceof bJ&&e.state===2&&e.cause)try{await async function(a,s){const i=s.cause;for(const l of s.targetIds)a.N_.has(l)&&(await a.remoteSyncer.rejectListen(l,i),a.N_.delete(l),a.Q_.removeTarget(l))}(t,e)}catch(n){Ar("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await XE(t,n)}else if(e instanceof q_?t.Q_.Ke(e):e instanceof yJ?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Gr.min()))try{const n=await zJ(t.localStore);r.compareTo(n)>=0&&await function(s,i){const l=s.Q_.rt(i);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(c.resumeToken,i))}}),l.targetMismatches.forEach((c,u)=>{const d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(yi.EMPTY_BYTE_STRING,d.snapshotVersion)),JJ(s,c);const f=new jA(d.target,c,u,d.sequenceNumber);E6(s,f)}),s.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){Ar("RemoteStore","Failed to raise snapshot:",n),await XE(t,n)}}async function XE(t,e,r){if(!pm(e))throw e;t.L_.add(1),await pw(t),t.q_.set("Offline"),r||(r=()=>zJ(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ar("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await c4(t)})}function eZ(t,e){return e().catch(r=>XE(t,r,e))}async function gw(t){const e=on(t),r=em(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Qve(e);)try{const a=await Cve(e.localStore,n);if(a===null){e.O_.length===0&&r.o_();break}n=a.batchId,Vve(e,a)}catch(a){await XE(e,a)}tZ(e)&&rZ(e)}function Qve(t){return Ag(t)&&t.O_.length<10}function Vve(t,e){t.O_.push(e);const r=em(t);r.r_()&&r.V_&&r.m_(e.mutations)}function tZ(t){return Ag(t)&&!em(t).n_()&&t.O_.length>0}function rZ(t){em(t).start()}async function Hve(t){em(t).p_()}async function $ve(t){const e=em(t);for(const r of t.O_)e.m_(r.mutations)}async function Gve(t,e,r){const n=t.O_.shift(),a=m6.from(n,e,r);await eZ(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await gw(t)}async function Kve(t,e){e&&em(t).V_&&await async function(n,a){if(function(i){return xJ(i)&&i!==Xt.ABORTED}(a.code)){const s=n.O_.shift();em(n).s_(),await eZ(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await gw(n)}}(t,e),tZ(t)&&rZ(t)}async function S7(t,e){const r=on(t);r.asyncQueue.verifyOperationInProgress(),Ar("RemoteStore","RemoteStore received new credentials");const n=Ag(r);r.L_.add(3),await pw(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await c4(r)}async function qve(t,e){const r=on(t);e?(r.L_.delete(2),await c4(r)):e||(r.L_.add(2),await pw(r),r.q_.set("Unknown"))}function Yv(t){return t.K_||(t.K_=function(r,n,a){const s=on(r);return s.w_(),new Tve(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Eo:Rve.bind(null,t),Ro:Mve.bind(null,t),mo:Lve.bind(null,t),d_:Uve.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),I6(t)?S6(t):t.q_.set("Unknown")):(await t.K_.stop(),ZJ(t))})),t.K_}function em(t){return t.U_||(t.U_=function(r,n,a){const s=on(r);return s.w_(),new kve(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Hve.bind(null,t),mo:Kve.bind(null,t),f_:$ve.bind(null,t),g_:Gve.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await gw(t)):(await t.U_.stop(),t.O_.length>0&&(Ar("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e,r,n,a,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new Ud,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,s){const i=Date.now()+n,l=new j6(e,r,i,a,s);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pr(Xt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function P6(t,e){if(Yl("AsyncQueue",`${e}: ${t}`),pm(t))return new pr(Xt.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e){this.comparator=e?(r,n)=>e(r,n)||_r.comparator(r.key,n.key):(r,n)=>_r.comparator(r.key,n.key),this.keyedMap=Sy(),this.sortedSet=new vs(this.comparator)}static emptySet(e){return new ev(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof ev)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new ev;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I7{constructor(){this.W_=new vs(_r.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Dr():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class Nv{constructor(e,r,n,a,s,i,l,c,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,a,s){const i=[];return r.forEach(l=>{i.push({type:0,doc:l})}),new Nv(e,r,ev.emptySet(r),i,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&t4(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zve{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Wve{constructor(){this.queries=j7(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const a=on(r),s=a.queries;a.queries=j7(),s.forEach((i,l)=>{for(const c of l.j_)c.onError(n)})})(this,new pr(Xt.ABORTED,"Firestore shutting down"))}}function j7(){return new gm(t=>sJ(t),t4)}async function B6(t,e){const r=on(t);let n=3;const a=e.query;let s=r.queries.get(a);s?!s.H_()&&e.J_()&&(n=2):(s=new zve,n=e.J_()?0:1);try{switch(n){case 0:s.z_=await r.onListen(a,!0);break;case 1:s.z_=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(i){const l=P6(i,`Initialization of query '${fx(e.query)}' failed`);return void e.onError(l)}r.queries.set(a,s),s.j_.push(e),e.Z_(r.onlineState),s.z_&&e.X_(s.z_)&&k6(r)}async function T6(t,e){const r=on(t),n=e.query;let a=3;const s=r.queries.get(n);if(s){const i=s.j_.indexOf(e);i>=0&&(s.j_.splice(i,1),s.j_.length===0?a=e.J_()?0:1:!s.H_()&&e.J_()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function Xve(t,e){const r=on(t);let n=!1;for(const a of e){const s=a.query,i=r.queries.get(s);if(i){for(const l of i.j_)l.X_(a)&&(n=!0);i.z_=a}}n&&k6(r)}function Yve(t,e,r){const n=on(t),a=n.queries.get(e);if(a)for(const s of a.j_)s.onError(r);n.queries.delete(e)}function k6(t){t.Y_.forEach(e=>{e.next()})}var ST,P7;(P7=ST||(ST={})).ea="default",P7.Cache="cache";class F6{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new Nv(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Nv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ST.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nZ{constructor(e){this.key=e}}class aZ{constructor(e){this.key=e}}class Jve{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Sn(),this.mutatedKeys=Sn(),this.Aa=iJ(e),this.Ra=new ev(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new I7,a=r?r.Ra:this.Ra;let s=r?r.mutatedKeys:this.mutatedKeys,i=a,l=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((d,f)=>{const h=a.get(d),A=hw(this.query,f)?f:null,m=!!h&&this.mutatedKeys.has(h.key),p=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let g=!1;h&&A?h.data.isEqual(A.data)?m!==p&&(n.track({type:3,doc:A}),g=!0):this.ga(h,A)||(n.track({type:2,doc:A}),g=!0,(c&&this.Aa(A,c)>0||u&&this.Aa(A,u)<0)&&(l=!0)):!h&&A?(n.track({type:0,doc:A}),g=!0):h&&!A&&(n.track({type:1,doc:h}),g=!0,(c||u)&&(l=!0)),g&&(A?(i=i.add(A),s=p?s.add(d):s.delete(d)):(i=i.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{Ra:i,fa:n,ns:l,mutatedKeys:s}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((d,f)=>function(A,m){const p=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Dr()}};return p(A)-p(m)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(n),a=a!=null&&a;const l=r&&!a?this.ya():[],c=this.da.size===0&&this.current&&!a?1:0,u=c!==this.Ea;return this.Ea=c,i.length!==0||u?{snapshot:new Nv(this.query,e.Ra,s,i,e.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new I7,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Sn(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new aZ(n))}),this.da.forEach(n=>{e.has(n)||r.push(new nZ(n))}),r}ba(e){this.Ta=e.Ts,this.da=Sn();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Nv.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Zve{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class e1e{constructor(e){this.key=e,this.va=!1}}class t1e{constructor(e,r,n,a,s,i){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new gm(l=>sJ(l),t4),this.Ma=new Map,this.xa=new Set,this.Oa=new vs(_r.comparator),this.Na=new Map,this.La=new b6,this.Ba={},this.ka=new Map,this.qa=Gp.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function r1e(t,e,r=!0){const n=uZ(t);let a;const s=n.Fa.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.Da()):a=await sZ(n,e,r,!0),a}async function n1e(t,e){const r=uZ(t);await sZ(r,e,!0,!1)}async function sZ(t,e,r,n){const a=await _ve(t.localStore,Ju(e)),s=a.targetId,i=t.sharedClientState.addLocalQueryTarget(s,r);let l;return n&&(l=await a1e(t,e,s,i==="current",a.resumeToken)),t.isPrimaryClient&&r&&YJ(t.remoteStore,a),l}async function a1e(t,e,r,n,a){t.Ka=(f,h,A)=>async function(p,g,x,y){let b=g.view.ma(x);b.ns&&(b=await C7(p.localStore,g.query,!1).then(({documents:_})=>g.view.ma(_,b)));const w=y&&y.targetChanges.get(g.targetId),j=y&&y.targetMismatches.get(g.targetId)!=null,I=g.view.applyChanges(b,p.isPrimaryClient,w,j);return T7(p,g.targetId,I.wa),I.snapshot}(t,f,h,A);const s=await C7(t.localStore,e,!0),i=new Jve(e,s.Ts),l=i.ma(s.documents),c=mw.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),u=i.applyChanges(l,t.isPrimaryClient,c);T7(t,r,u.wa);const d=new Zve(e,r,i);return t.Fa.set(e,d),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),u.snapshot}async function s1e(t,e,r){const n=on(t),a=n.Fa.get(e),s=n.Ma.get(a.targetId);if(s.length>1)return n.Ma.set(a.targetId,s.filter(i=>!t4(i,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await ET(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&_6(n.remoteStore,a.targetId),IT(n,a.targetId)}).catch(dg)):(IT(n,a.targetId),await ET(n.localStore,a.targetId,!0))}async function i1e(t,e){const r=on(t),n=r.Fa.get(e),a=r.Ma.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),_6(r.remoteStore,n.targetId))}async function o1e(t,e,r){const n=dZ(t);try{const a=await function(i,l){const c=on(i),u=or.now(),d=l.reduce((A,m)=>A.add(m.key),Sn());let f,h;return c.persistence.runTransaction("Locally write mutations","readwrite",A=>{let m=tu(),p=Sn();return c.cs.getEntries(A,d).next(g=>{m=g,m.forEach((x,y)=>{y.isValidDocument()||(p=p.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(A,m)).next(g=>{f=g;const x=[];for(const y of l){const b=_xe(y,f.get(y.key).overlayedDocument);b!=null&&x.push(new Ah(y.key,b,XY(b.value.mapValue),ps.exists(!0)))}return c.mutationQueue.addMutationBatch(A,u,x,l)}).next(g=>{h=g;const x=g.applyToLocalDocumentSet(f,p);return c.documentOverlayCache.saveOverlays(A,g.batchId,x)})}).then(()=>({batchId:h.batchId,changes:lJ(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),function(i,l,c){let u=i.Ba[i.currentUser.toKey()];u||(u=new vs(An)),u=u.insert(l,c),i.Ba[i.currentUser.toKey()]=u}(n,a.batchId,r),await xw(n,a.changes),await gw(n.remoteStore)}catch(a){const s=P6(a,"Failed to persist write");r.reject(s)}}async function iZ(t,e){const r=on(t);try{const n=await wve(r.localStore,e);e.targetChanges.forEach((a,s)=>{const i=r.Na.get(s);i&&(Vr(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?i.va=!0:a.modifiedDocuments.size>0?Vr(i.va):a.removedDocuments.size>0&&(Vr(i.va),i.va=!1))}),await xw(r,n,e)}catch(n){await dg(n)}}function B7(t,e,r){const n=on(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Fa.forEach((s,i)=>{const l=i.view.Z_(e);l.snapshot&&a.push(l.snapshot)}),function(i,l){const c=on(i);c.onlineState=l;let u=!1;c.queries.forEach((d,f)=>{for(const h of f.j_)h.Z_(l)&&(u=!0)}),u&&k6(c)}(n.eventManager,e),a.length&&n.Ca.d_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function l1e(t,e,r){const n=on(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Na.get(e),s=a&&a.key;if(s){let i=new vs(_r.comparator);i=i.insert(s,hs.newNoDocument(s,Gr.min()));const l=Sn().add(s),c=new a4(Gr.min(),new Map,new vs(An),i,l);await iZ(n,c),n.Oa=n.Oa.remove(s),n.Na.delete(e),O6(n)}else await ET(n.localStore,e,!1).then(()=>IT(n,e,r)).catch(dg)}async function c1e(t,e){const r=on(t),n=e.batch.batchId;try{const a=await bve(r.localStore,e);lZ(r,n,null),oZ(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await xw(r,a)}catch(a){await dg(a)}}async function u1e(t,e,r){const n=on(t);try{const a=await function(i,l){const c=on(i);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(Vr(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,e);lZ(n,e,r),oZ(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await xw(n,a)}catch(a){await dg(a)}}function oZ(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function lZ(t,e,r){const n=on(t);let a=n.Ba[n.currentUser.toKey()];if(a){const s=a.get(e);s&&(r?s.reject(r):s.resolve(),a=a.remove(e)),n.Ba[n.currentUser.toKey()]=a}}function IT(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||cZ(t,n)})}function cZ(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(_6(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),O6(t))}function T7(t,e,r){for(const n of r)n instanceof nZ?(t.La.addReference(n.key,e),d1e(t,n)):n instanceof aZ?(Ar("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||cZ(t,n.key)):Dr()}function d1e(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(Ar("SyncEngine","New document in limbo: "+r),t.xa.add(n),O6(t))}function O6(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new _r(ea.fromString(e)),n=t.qa.next();t.Na.set(n,new e1e(r)),t.Oa=t.Oa.insert(r,n),YJ(t.remoteStore,new jA(Ju(Aw(r.path)),n,"TargetPurposeLimboResolution",Ku.oe))}}async function xw(t,e,r){const n=on(t),a=[],s=[],i=[];n.Fa.isEmpty()||(n.Fa.forEach((l,c)=>{i.push(n.Ka(c,e,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){a.push(u);const f=N6.Wi(c.targetId,u);s.push(f)}}))}),await Promise.all(i),n.Ca.d_(a),await async function(c,u){const d=on(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Mt.forEach(u,h=>Mt.forEach(h.$i,A=>d.persistence.referenceDelegate.addReference(f,h.targetId,A)).next(()=>Mt.forEach(h.Ui,A=>d.persistence.referenceDelegate.removeReference(f,h.targetId,A)))))}catch(f){if(!pm(f))throw f;Ar("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const h=f.targetId;if(!f.fromCache){const A=d.os.get(h),m=A.snapshotVersion,p=A.withLastLimboFreeSnapshotVersion(m);d.os=d.os.insert(h,p)}}}(n.localStore,s))}async function f1e(t,e){const r=on(t);if(!r.currentUser.isEqual(e)){Ar("SyncEngine","User change. New user:",e.toKey());const n=await qJ(r.localStore,e);r.currentUser=e,function(s,i){s.ka.forEach(l=>{l.forEach(c=>{c.reject(new pr(Xt.CANCELLED,i))})}),s.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await xw(r,n.hs)}}function A1e(t,e){const r=on(t),n=r.Na.get(e);if(n&&n.va)return Sn().add(n.key);{let a=Sn();const s=r.Ma.get(e);if(!s)return a;for(const i of s){const l=r.Fa.get(i);a=a.unionWith(l.view.Va)}return a}}function uZ(t){const e=on(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=iZ.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=A1e.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=l1e.bind(null,e),e.Ca.d_=Xve.bind(null,e.eventManager),e.Ca.$a=Yve.bind(null,e.eventManager),e}function dZ(t){const e=on(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=c1e.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=u1e.bind(null,e),e}class u2{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=l4(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return KJ(this.persistence,new GJ,e.initialUser,this.serializer)}Ga(e){return new $J(o4.Zr,this.serializer)}Wa(e){return new WJ}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}u2.provider={build:()=>new u2};class h1e extends u2{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await dZ(this.Ja.syncEngine),await gw(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return KJ(this.persistence,new GJ,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new rve(n,e.asyncQueue,r)}Ha(e,r){const n=new Bge(r,this.persistence);return new Pge(e.asyncQueue,n)}Ga(e){const r=xve(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?mc.withCacheSize(this.cacheSizeBytes):mc.DEFAULT;return new w6(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,Bve(),z_(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new WJ}}class YE{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>B7(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=f1e.bind(null,this.syncEngine),await qve(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Wve}()}createDatastore(e){const r=l4(e.databaseInfo.databaseId),n=function(s){return new Pve(s)}(e.databaseInfo);return function(s,i,l,c){return new Fve(s,i,l,c)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,a,s,i,l){return new Dve(n,a,s,i,l)}(this.localStore,this.datastore,e.asyncQueue,r=>B7(this.syncEngine,r,0),function(){return E7.D()?new E7:new Sve}())}createSyncEngine(e,r){return function(a,s,i,l,c,u,d){const f=new t1e(a,s,i,l,c,u);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(a){const s=on(a);Ar("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await pw(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}YE.provider={build:()=>new YE};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Yl("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1e{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new pr(Xt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(a,s){const i=on(a),l={documents:s.map(f=>l2(i.serializer,f))},c=await i.Lo("BatchGetDocuments",i.serializer.databaseId,ea.emptyPath(),l,s.length),u=new Map;c.forEach(f=>{const h=Dxe(i.serializer,f);u.set(h.key.toString(),h)});const d=[];return s.forEach(f=>{const h=u.get(f.toString());Vr(!!h),d.push(h)}),d}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Xv(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const a=_r.fromPath(n);this.mutations.push(new A6(a,this.precondition(a)))}),await async function(n,a){const s=on(n),i={writes:a.map(l=>c2(s.serializer,l))};await s.Mo("Commit",s.serializer.databaseId,ea.emptyPath(),i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Dr();r=Gr.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new pr(Xt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(Gr.min())?ps.exists(!1):ps.updateTime(r):ps.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Gr.min()))throw new pr(Xt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ps.updateTime(r)}return ps.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1e{constructor(e,r,n,a,s){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=a,this.deferred=s,this._u=n.maxAttempts,this.t_=new C6(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new m1e(this.datastore),r=this.cu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(a=>{this.lu(a)}))}).catch(n=>{this.lu(n)})})}cu(e){try{const r=this.updateFunction(e);return!dw(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!xJ(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1e{constructor(e,r,n,a,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=Wo.UNAUTHENTICATED,this.clientId=s6.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async i=>{Ar("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(Ar("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ud;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=P6(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function a5(t,e){t.asyncQueue.verifyOperationInProgress(),Ar("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async a=>{n.isEqual(a)||(await qJ(e.localStore,a),n=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function k7(t,e){t.asyncQueue.verifyOperationInProgress();const r=await x1e(t);Ar("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>S7(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,a)=>S7(e.remoteStore,a)),t._onlineComponents=e}async function x1e(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ar("FirestoreClient","Using user provided OfflineComponentProvider");try{await a5(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(a){return a.name==="FirebaseError"?a.code===Xt.FAILED_PRECONDITION||a.code===Xt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;X0("Error using user provided cache. Falling back to memory cache: "+r),await a5(t,new u2)}}else Ar("FirestoreClient","Using default OfflineComponentProvider"),await a5(t,new u2);return t._offlineComponents}async function R6(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ar("FirestoreClient","Using user provided OnlineComponentProvider"),await k7(t,t._uninitializedComponentsProvider._online)):(Ar("FirestoreClient","Using default OnlineComponentProvider"),await k7(t,new YE))),t._onlineComponents}function v1e(t){return R6(t).then(e=>e.syncEngine)}function y1e(t){return R6(t).then(e=>e.datastore)}async function JE(t){const e=await R6(t),r=e.eventManager;return r.onListen=r1e.bind(null,e.syncEngine),r.onUnlisten=s1e.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=n1e.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=i1e.bind(null,e.syncEngine),r}function b1e(t,e,r={}){const n=new Ud;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,l,c,u){const d=new D6({next:h=>{d.Za(),i.enqueueAndForget(()=>T6(s,f));const A=h.docs.has(l);!A&&h.fromCache?u.reject(new pr(Xt.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&h.fromCache&&c&&c.source==="server"?u.reject(new pr(Xt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new F6(Aw(l.path),d,{includeMetadataChanges:!0,_a:!0});return B6(s,f)}(await JE(t),t.asyncQueue,e,r,n)),n.promise}function w1e(t,e,r={}){const n=new Ud;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,l,c,u){const d=new D6({next:h=>{d.Za(),i.enqueueAndForget(()=>T6(s,f)),h.fromCache&&c.source==="server"?u.reject(new pr(Xt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new F6(l,d,{includeMetadataChanges:!0,_a:!0});return B6(s,f)}(await JE(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fZ(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F7=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AZ(t,e,r){if(!r)throw new pr(Xt.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function hZ(t,e,r,n){if(e===!0&&n===!0)throw new pr(Xt.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function O7(t){if(!_r.isDocumentKey(t))throw new pr(Xt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function D7(t){if(_r.isDocumentKey(t))throw new pr(Xt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function u4(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Dr()}function jo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new pr(Xt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=u4(t);throw new pr(Xt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new pr(Xt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new pr(Xt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hZ("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fZ((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new pr(Xt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new pr(Xt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new pr(Xt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class d4{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new R7({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pr(Xt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pr(Xt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new R7(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new DY;switch(n.type){case"firstParty":return new wge(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new pr(Xt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=F7.get(r);n&&(Ar("ComponentProvider","Removing Datastore"),F7.delete(r),n.terminate())}(this),Promise.resolve()}}function mZ(t,e,r,n={}){var a;const s=(t=jo(t,d4))._getSettings(),i=`${e}:${r}`;if(s.host!=="firestore.googleapis.com"&&s.host!==i&&X0("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:i,ssl:!1})),n.mockUserToken){let l,c;if(typeof n.mockUserToken=="string")l=n.mockUserToken,c=Wo.MOCK_USER;else{l=Mhe(n.mockUserToken,(a=t._app)===null||a===void 0?void 0:a.options.projectId);const u=n.mockUserToken.sub||n.mockUserToken.user_id;if(!u)throw new pr(Xt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Wo(u)}t._authCredentials=new vge(new OY(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Gf(this.firestore,e,this._query)}}class Po{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new RA(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Po(this.firestore,e,this._key)}}class RA extends Gf{constructor(e,r,n){super(e,r,Aw(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Po(this.firestore,null,new _r(e))}withConverter(e){return new RA(this.firestore,e,this._path)}}function pt(t,e,...r){if(t=Ds(t),AZ("collection","path",e),t instanceof d4){const n=ea.fromString(e,...r);return D7(n),new RA(t,null,n)}{if(!(t instanceof Po||t instanceof RA))throw new pr(Xt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ea.fromString(e,...r));return D7(n),new RA(t.firestore,null,n)}}function Kt(t,e,...r){if(t=Ds(t),arguments.length===1&&(e=s6.newId()),AZ("doc","path",e),t instanceof d4){const n=ea.fromString(e,...r);return O7(n),new Po(t,null,new _r(n))}{if(!(t instanceof Po||t instanceof RA))throw new pr(Xt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ea.fromString(e,...r));return O7(n),new Po(t.firestore,t instanceof RA?t.converter:null,new _r(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M7{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new C6(this,"async_queue_retry"),this.Vu=()=>{const n=z_();n&&Ar("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=z_();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=z_();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new Ud;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!pm(e))throw e;Ar("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const a=function(i){let l=i.message||"";return i.stack&&(l=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),l}(n);throw Yl("INTERNAL UNHANDLED ERROR: ",a),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const a=j6.createAndSchedule(this,e,r,n,s=>this.yu(s));return this.Tu.push(a),a}fu(){this.Eu&&Dr()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function L7(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(t,["next","error","complete"])}class cu extends d4{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new M7,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new M7(e),this._firestoreClient=void 0,await e}}}function pZ(t,e){const r=typeof t=="object"?t:$O(),n=typeof t=="string"?t:"(default)",a=VO(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=Dhe("firestore");s&&mZ(a,...s)}return a}function hg(t){if(t._terminated)throw new pr(Xt.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||gZ(t),t._firestoreClient}function gZ(t){var e,r,n;const a=t._freezeSettings(),s=function(l,c,u,d){return new Zge(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,fZ(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((r=a.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=a.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new g1e(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}function xZ(t,e){X0("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return N1e(t,YE.provider,{build:n=>new h1e(n,r.cacheSizeBytes,void 0)}),Promise.resolve()}function N1e(t,e,r){if((t=jo(t,cu))._firestoreClient||t._terminated)throw new pr(Xt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new pr(Xt.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},gZ(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e){this._byteString=e}static fromBase64String(e){try{return new tm(yi.fromBase64String(e))}catch(r){throw new pr(Xt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new tm(yi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new pr(Xt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ms(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new pr(Xt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new pr(Xt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return An(this._lat,e._lat)||An(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1e=/^__.*__$/;class _1e{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Ah(e,this.data,this.fieldMask,r,this.fieldTransforms):new Wv(e,this.data,r,this.fieldTransforms)}}class vZ{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Ah(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function yZ(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Dr()}}class h4{constructor(e,r,n,a,s,i){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new h4(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.Ou(e),a}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ZE(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(yZ(this.Cu)&&C1e.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class E1e{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||l4(e)}Qu(e,r,n,a=!1){return new h4({Cu:e,methodName:r,qu:n,path:ms.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jv(t){const e=t._freezeSettings(),r=l4(t._databaseId);return new E1e(t._databaseId,!!e.ignoreUndefinedProperties,r)}function m4(t,e,r,n,a,s={}){const i=t.Qu(s.merge||s.mergeFields?2:0,e,r,a);Q6("Data must be an object, but it was:",i,n);const l=bZ(n,i);let c,u;if(s.merge)c=new yc(i.fieldMask),u=i.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const h=jT(e,f,r);if(!i.contains(h))throw new pr(Xt.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);NZ(d,h)||d.push(h)}c=new yc(d),u=i.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=i.fieldTransforms;return new _1e(new Jo(l),c,u)}class p4 extends vw{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof p4}}function S1e(t,e,r){return new h4({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class M6 extends vw{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=S1e(this,e,!0),n=this.Ku.map(s=>Zv(s,r)),a=new Vp(n);return new mJ(e.path,a)}isEqual(e){return e instanceof M6&&zb(this.Ku,e.Ku)}}function L6(t,e,r,n){const a=t.Qu(1,e,r);Q6("Data must be an object, but it was:",a,n);const s=[],i=Jo.empty();fg(n,(c,u)=>{const d=V6(e,c,r);u=Ds(u);const f=a.Nu(d);if(u instanceof p4)s.push(d);else{const h=Zv(u,f);h!=null&&(s.push(d),i.set(d,h))}});const l=new yc(s);return new vZ(i,l,a.fieldTransforms)}function U6(t,e,r,n,a,s){const i=t.Qu(1,e,r),l=[jT(e,n,r)],c=[a];if(s.length%2!=0)throw new pr(Xt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)l.push(jT(e,s[h])),c.push(s[h+1]);const u=[],d=Jo.empty();for(let h=l.length-1;h>=0;--h)if(!NZ(u,l[h])){const A=l[h];let m=c[h];m=Ds(m);const p=i.Nu(A);if(m instanceof p4)u.push(A);else{const g=Zv(m,p);g!=null&&(u.push(A),d.set(A,g))}}const f=new yc(u);return new vZ(d,f,i.fieldTransforms)}function I1e(t,e,r,n=!1){return Zv(r,t.Qu(n?4:3,e))}function Zv(t,e){if(wZ(t=Ds(t)))return Q6("Unsupported field value:",e,t),bZ(t,e);if(t instanceof vw)return function(n,a){if(!yZ(a.Cu))throw a.Bu(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,a){const s=[];let i=0;for(const l of n){let c=Zv(l,a.Lu(i));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),i++}return{arrayValue:{values:s}}}(t,e)}return function(n,a){if((n=Ds(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return vxe(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=or.fromDate(n);return{timestampValue:wv(a.serializer,s)}}if(n instanceof or){const s=new or(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:wv(a.serializer,s)}}if(n instanceof f4)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof tm)return{bytesValue:wJ(a.serializer,n._byteString)};if(n instanceof Po){const s=a.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw a.Bu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:x6(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof A4)return function(i,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:i.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return f6(l.serializer,c)})}}}}}}(n,a);throw a.Bu(`Unsupported field value: ${u4(n)}`)}(t,e)}function bZ(t,e){const r={};return KY(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fg(t,(n,a)=>{const s=Zv(a,e.Mu(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function wZ(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof or||t instanceof f4||t instanceof tm||t instanceof Po||t instanceof vw||t instanceof A4)}function Q6(t,e,r){if(!wZ(r)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(r)){const n=u4(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function jT(t,e,r){if((e=Ds(e))instanceof mg)return e._internalPath;if(typeof e=="string")return V6(t,e);throw ZE("Field path arguments must be of type string or ",t,!1,void 0,r)}const j1e=new RegExp("[~\\*/\\[\\]]");function V6(t,e,r){if(e.search(j1e)>=0)throw ZE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new mg(...e.split("."))._internalPath}catch{throw ZE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function ZE(t,e,r,n,a){const s=n&&!n.isEmpty(),i=a!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||i)&&(c+=" (found",s&&(c+=` in field ${n}`),i&&(c+=` in document ${a}`),c+=")"),new pr(Xt.INVALID_ARGUMENT,l+t+c)}function NZ(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,r,n,a,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Po(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new P1e(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(g4("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class P1e extends eS{data(){return super.data()}}function g4(t,e){return typeof e=="string"?V6(t,e):e instanceof mg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CZ(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new pr(Xt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class H6{}class x4 extends H6{}function tr(t,e,...r){let n=[];e instanceof H6&&n.push(e),n=n.concat(r),function(s){const i=s.filter(c=>c instanceof v4).length,l=s.filter(c=>c instanceof yw).length;if(i>1||i>0&&l>0)throw new pr(Xt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)t=a._apply(t);return t}class yw extends x4{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new yw(e,r,n)}_apply(e){const r=this._parse(e);return EZ(e._query,r),new Gf(e.firestore,e.converter,xT(e._query,r))}_parse(e){const r=Jv(e.firestore);return function(s,i,l,c,u,d,f){let h;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new pr(Xt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Q7(f,d);const A=[];for(const m of f)A.push(U7(c,s,m));h={arrayValue:{values:A}}}else h=U7(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Q7(f,d),h=I1e(l,i,f,d==="in"||d==="not-in");return Rn.create(u,d,h)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function sr(t,e,r){const n=e,a=g4("where",t);return yw._create(a,n,r)}class v4 extends H6{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new v4(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Ca.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(a,s){let i=a;const l=s.getFlattenedFilters();for(const c of l)EZ(i,c),i=xT(i,c)}(e._query,r),new Gf(e.firestore,e.converter,xT(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class y4 extends x4{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new y4(e,r)}_apply(e){const r=function(a,s,i){if(a.startAt!==null)throw new pr(Xt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new pr(Xt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new s2(s,i)}(e._query,this._field,this._direction);return new Gf(e.firestore,e.converter,function(a,s){const i=a.explicitOrderBy.concat([s]);return new zv(a.path,a.collectionGroup,i,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}function ln(t,e="asc"){const r=e,n=g4("orderBy",t);return y4._create(n,r)}class b4 extends x4{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new b4(e,r,n)}_apply(e){return new Gf(e.firestore,e.converter,KE(e._query,this._limit,this._limitType))}}function _Z(t){return b4._create("limit",t,"F")}function U7(t,e,r){if(typeof(r=Ds(r))=="string"){if(r==="")throw new pr(Xt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aJ(e)&&r.indexOf("/")!==-1)throw new pr(Xt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(ea.fromString(r));if(!_r.isDocumentKey(n))throw new pr(Xt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return n2(t,new _r(n))}if(r instanceof Po)return n2(t,r._key);throw new pr(Xt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${u4(r)}.`)}function Q7(t,e){if(!Array.isArray(t)||t.length===0)throw new pr(Xt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function EZ(t,e){const r=function(a,s){for(const i of a)for(const l of i.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new pr(Xt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pr(Xt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class $6{convertValue(e,r="none"){switch(Up(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Y0(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Dr()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return fg(e,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(e){var r,n,a;const s=(a=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.map(i=>fs(i.doubleValue));return new A4(s)}convertGeoPoint(e){return new f4(fs(e.latitude),fs(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=u6(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(t2(e));default:return null}}convertTimestamp(e){const r=YA(e);return new or(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=ea.fromString(e);Vr(TJ(n));const a=new J0(n.get(1),n.get(3)),s=new _r(n.popFirst(5));return a.isEqual(r)||Yl(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class B1e extends $6{constructor(e){super(),this.firestore=e}convertBytes(e){return new tm(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Po(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class N4 extends eS{constructor(e,r,n,a,s,i){super(e,r,n,a,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new ob(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(g4("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class ob extends N4{data(e={}){return super.data(e)}}class G6{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new ap(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new ob(this._firestore,this._userDataWriter,n.key,n,new ap(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new pr(Xt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let i=0;return a._snapshot.docChanges.map(l=>{const c=new ob(a._firestore,a._userDataWriter,l.doc.key,l.doc,new ap(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:i++}})}{let i=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new ob(a._firestore,a._userDataWriter,l.doc.key,l.doc,new ap(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return l.type!==0&&(u=i.indexOf(l.doc.key),i=i.delete(l.doc.key)),l.type!==1&&(i=i.add(l.doc),d=i.indexOf(l.doc.key)),{type:T1e(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function T1e(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Dr()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(t){t=jo(t,Po);const e=jo(t.firestore,cu);return b1e(hg(e),t._key).then(r=>IZ(e,t,r))}class C4 extends $6{constructor(e){super(),this.firestore=e}convertBytes(e){return new tm(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Po(this.firestore,null,r)}}function Lt(t){t=jo(t,Gf);const e=jo(t.firestore,cu),r=hg(e),n=new C4(e);return CZ(t._query),w1e(r,t._query).then(a=>new G6(e,n,t,a))}function SZ(t,e,r){t=jo(t,Po);const n=jo(t.firestore,cu),a=w4(t.converter,e,r);return e1(n,[m4(Jv(n),"setDoc",t._key,a,t.converter!==null,r).toMutation(t._key,ps.none())])}function rn(t,e,r,...n){t=jo(t,Po);const a=jo(t.firestore,cu),s=Jv(a);let i;return i=typeof(e=Ds(e))=="string"||e instanceof mg?U6(s,"updateDoc",t._key,e,r,n):L6(s,"updateDoc",t._key,e),e1(a,[i.toMutation(t._key,ps.exists(!0))])}function yn(t){return e1(jo(t.firestore,cu),[new Xv(t._key,ps.none())])}function wn(t,e){const r=jo(t.firestore,cu),n=Kt(t),a=w4(t.converter,e);return e1(r,[m4(Jv(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,ps.exists(!1))]).then(()=>n)}function qd(t,...e){var r,n,a;t=Ds(t);let s={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||L7(e[i])||(s=e[i],i++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(L7(e[i])){const f=e[i];e[i]=(r=f.next)===null||r===void 0?void 0:r.bind(f),e[i+1]=(n=f.error)===null||n===void 0?void 0:n.bind(f),e[i+2]=(a=f.complete)===null||a===void 0?void 0:a.bind(f)}let c,u,d;if(t instanceof Po)u=jo(t.firestore,cu),d=Aw(t._key.path),c={next:f=>{e[i]&&e[i](IZ(u,t,f))},error:e[i+1],complete:e[i+2]};else{const f=jo(t,Gf);u=jo(f.firestore,cu),d=f._query;const h=new C4(u);c={next:A=>{e[i]&&e[i](new G6(u,h,f,A))},error:e[i+1],complete:e[i+2]},CZ(t._query)}return function(h,A,m,p){const g=new D6(p),x=new F6(A,g,m);return h.asyncQueue.enqueueAndForget(async()=>B6(await JE(h),x)),()=>{g.Za(),h.asyncQueue.enqueueAndForget(async()=>T6(await JE(h),x))}}(hg(u),d,l,c)}function e1(t,e){return function(n,a){const s=new Ud;return n.asyncQueue.enqueueAndForget(async()=>o1e(await v1e(n),a,s)),s.promise}(hg(t),e)}function IZ(t,e,r){const n=r.docs.get(e._key),a=new C4(t);return new N4(t,a,e._key,n,new ap(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1e={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jZ{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Jv(e)}set(e,r,n){this._verifyNotCommitted();const a=g0(e,this._firestore),s=w4(a.converter,r,n),i=m4(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(i.toMutation(a._key,ps.none())),this}update(e,r,n,...a){this._verifyNotCommitted();const s=g0(e,this._firestore);let i;return i=typeof(r=Ds(r))=="string"||r instanceof mg?U6(this._dataReader,"WriteBatch.update",s._key,r,n,a):L6(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(i.toMutation(s._key,ps.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=g0(e,this._firestore);return this._mutations=this._mutations.concat(new Xv(r._key,ps.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new pr(Xt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function g0(t,e){if((t=Ds(t)).firestore!==e)throw new pr(Xt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PZ extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=Jv(r)}get(r){const n=g0(r,this._firestore),a=new B1e(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return Dr();const i=s[0];if(i.isFoundDocument())return new eS(this._firestore,a,i.key,i,n.converter);if(i.isNoDocument())return new eS(this._firestore,a,n._key,null,n.converter);throw Dr()})}set(r,n,a){const s=g0(r,this._firestore),i=w4(s.converter,n,a),l=m4(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,a);return this._transaction.set(s._key,l),this}update(r,n,a,...s){const i=g0(r,this._firestore);let l;return l=typeof(n=Ds(n))=="string"||n instanceof mg?U6(this._dataReader,"Transaction.update",i._key,n,a,s):L6(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,l),this}delete(r){const n=g0(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=g0(e,this._firestore),n=new C4(this._firestore);return super.get(e).then(a=>new N4(this._firestore,n,r._key,a._document,new ap(!1,!1),r.converter))}}function Ti(t,e,r){t=jo(t,cu);const n=Object.assign(Object.assign({},k1e),r);return function(s){if(s.maxAttempts<1)throw new pr(Xt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(s,i,l){const c=new Ud;return s.asyncQueue.enqueueAndForget(async()=>{const u=await y1e(s);new p1e(s.asyncQueue,u,l,i,c).au()}),c.promise}(hg(t),a=>e(new PZ(t,a)),n)}function BZ(...t){return new M6("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(t){return hg(t=jo(t,cu)),new jZ(t,e=>e1(t,e))}(function(e,r=!0){(function(a){qv=a})(Gv),pv(new Dp("firestore",(n,{instanceIdentifier:a,options:s})=>{const i=n.getProvider("app").getImmediate(),l=new cu(new yge(n.getProvider("auth-internal")),new Cge(n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new pr(Xt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new J0(u.options.projectId,d)}(i,a),i);return s=Object.assign({useFetchStreams:r},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),U0(kU,"4.7.3",e),U0(kU,"4.7.3","esm2017")})();const F1e=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:$6,Bytes:tm,CollectionReference:RA,DocumentReference:Po,DocumentSnapshot:N4,FieldPath:mg,FieldValue:vw,Firestore:cu,FirestoreError:pr,GeoPoint:f4,Query:Gf,QueryCompositeFilterConstraint:v4,QueryConstraint:x4,QueryDocumentSnapshot:ob,QueryFieldFilterConstraint:yw,QueryLimitConstraint:b4,QueryOrderByConstraint:y4,QuerySnapshot:G6,SnapshotMetadata:ap,Timestamp:or,Transaction:PZ,VectorValue:A4,WriteBatch:jZ,_AutoId:s6,_ByteString:yi,_DatabaseId:J0,_DocumentKey:_r,_EmptyAuthCredentialsProvider:DY,_FieldPath:ms,_cast:jo,_logWarn:X0,_validateIsNotUsedTogether:hZ,addDoc:wn,arrayUnion:BZ,collection:pt,connectFirestoreEmulator:mZ,deleteDoc:yn,doc:Kt,enableIndexedDbPersistence:xZ,ensureFirestoreConfigured:hg,executeWrite:e1,getDoc:xi,getDocs:Lt,getFirestore:pZ,limit:_Z,onSnapshot:qd,orderBy:ln,query:tr,runTransaction:Ti,setDoc:SZ,updateDoc:rn,where:sr,writeBatch:pg},Symbol.toStringTag,{value:"Module"})),O1e={apiKey:"AIzaSyA_ZzeP_DAoXeRuallrOaJ4xFaxjnuhw-8",authDomain:"posys-103de.firebaseapp.com",projectId:"posys-103de",storageBucket:"posys-103de.firebasestorage.app",messagingSenderId:"401054148688",appId:"1:401054148688:web:1c2aea9e8b40958b514955",measurementId:"G-Q2GWQXMFLX"},TZ=HO(O1e),Ge=pZ(TZ),Rf=cT(TZ),D1e=(async()=>{try{return await M_(Rf,e6),console.info(" Auth persistence: browserLocalPersistence enabled"),"local"}catch(t){console.warn(" browserLocalPersistence failed:",(t==null?void 0:t.code)||t)}try{return await M_(Rf,EY),console.info(" Auth persistence: indexedDBLocalPersistence enabled"),"indexeddb"}catch(t){console.warn(" indexedDBLocalPersistence failed:",(t==null?void 0:t.code)||t)}try{return await M_(Rf,t6),console.info(" Auth persistence: browserSessionPersistence enabled (session only)"),"session"}catch(t){console.warn(" browserSessionPersistence failed:",(t==null?void 0:t.code)||t)}return console.warn(" No se pudo establecer ninguna persistencia para Auth."),"none"})();xZ(Ge).catch(t=>{t.code==="failed-precondition"?console.warn(" Ya hay otra pestaa usando persistencia."):t.code==="unimplemented"?console.warn(" El navegador no soporta persistencia offline."):console.error(" Error en persistencia offline:",t)});function R1e(){const[t,e]=v.useState(""),[r,n]=v.useState(""),[a,s]=v.useState(!1),[i,l]=v.useState(""),[c,u]=v.useState(!1),d=nw(),f=A=>{if(Array.isArray(A)){if(A.length!==1)return localStorage.setItem("role",A[0]||""),d("/admin");A=A[0]||""}const m=String(A||"");if(localStorage.setItem("role",m),zr(m,"admin"))return d("/admin");if(zr(m,"vendedor_pollo"))return d("/admin/salesV2");if(zr(m,"vendedor_ropa"))return d("/admin/salesClothes");if(zr(m,"vendedor_dulces"))return d("/admin/salesCandies");if(zr(m,"supervisor_pollo")||zr(m,"contador"))return d("/admin/batches")},h=async A=>{if(A.preventDefault(),l(""),!t.trim()){l("Ingresa el correo.");return}if(r.length<6){l("La contrasea debe tener al menos 6 caracteres.");return}try{u(!0),console.info&&console.info("[Login] attempting signIn",{email:t}),await M_(Rf,e6);const m=await spe(Rf,t,r);console.info&&console.info("[Login] signInWithEmailAndPassword success",{uid:m.user.uid,email:m.user.email});const p=m.user.uid;localStorage.setItem("POSYS_LOGIN_AT",String(Date.now()));const g=await xi(Kt(Ge,"users",p));if(console.info&&console.info("[Login] firestore users doc snap: exists=",g.exists()),!g.exists()){console.warn&&console.warn("[Login] user doc missing for uid",p),l("Tu usuario no tiene perfil en la base de datos.");return}const x=g.data();console.info&&console.info("[Login] user profile:",x);const y=Array.isArray(x.roles)?x.roles:x.role?[x.role]:[],b=y[0]||"",w=x.name||"",j=["admin","vendedor_pollo","vendedor_ropa","vendedor_dulces","supervisor_pollo","contador"];if(!y.some(I=>j.includes(I))){l("Rol no vlido. Consulta al administrador.");return}localStorage.setItem("user_email",m.user.email||""),w&&localStorage.setItem("user_name",w),localStorage.setItem("roles",JSON.stringify(y)),y.length===1?f(b):d("/admin")}catch(m){console.error&&console.error("[Login] sign-in error:",m);const p=String((m==null?void 0:m.code)||"");l(p==="auth/invalid-credential"||p==="auth/wrong-password"?"Credenciales incorrectas. ("+p+")":p==="auth/user-not-found"?"Usuario no encontrado. ("+p+")":p==="auth/too-many-requests"?"Demasiados intentos. Intenta ms tarde. ("+p+")":((m==null?void 0:m.message)||"Error al iniciar sesin.")+(p?` (${p})`:""))}finally{u(!1)}};return o.jsx("div",{className:"min-h-screen grid place-items-center ",children:o.jsxs("form",{onSubmit:h,className:"w-[92%] max-w-md bg-white p-6 rounded-2xl shadow-2xl",children:[o.jsx("h2",{className:"text-2xl font-bold text-center mb-4",children:"Iniciar Sesin"}),o.jsx("label",{className:"block text-sm font-semibold",children:"Correo electrnico"}),o.jsx("input",{type:"email",className:"w-full border rounded-2xl px-3 py-2 mb-3 shadow-2xl",value:t,onChange:A=>e(A.target.value),autoComplete:"username"}),o.jsx("label",{className:"block text-sm font-semibold",children:"Contrasea"}),o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsx("input",{type:a?"text":"password",className:"flex-1 border rounded-2xl px-3 py-2 shadow-2xl",value:r,onChange:A=>n(A.target.value),minLength:6,autoComplete:"current-password"}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded-2xl shadow-2xl bg-gray-200 hover:bg-gray-300",onClick:()=>s(A=>!A),children:a?"Ocultar":"Mostrar"})]}),o.jsx("div",{className:"text-xs text-gray-600 mb-3",children:"Mnimo 6 caracteres (requisito de Firebase)."}),o.jsx("button",{className:"w-full bg-blue-600 text-white px-4 py-2 rounded-2xl shadow-2xl hover:bg-blue-700 disabled:opacity-60",disabled:c,children:c?"Entrando...":"Entrar"}),i&&o.jsx("p",{className:`mt-3 text-sm ${i.startsWith("Error")||i.includes("no vlido")?"text-red-600":"text-gray-700"}`,children:i})]})})}function xn({children:t,allowedRoles:e}){const[r,n]=v.useState(!0),[a,s]=v.useState(!1);return v.useEffect(()=>{const i=JO(Rf,async l=>{if(l){const c=Kt(Ge,"users",l.uid),u=await xi(c);if(u.exists()){const d=u.data(),f=Array.isArray(d.roles)?d.roles:d.role?[d.role]:[];try{typeof window<"u"&&window.location&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")?console.info&&console.info("[PrivateRoute] uid:",l.uid,"roleFromDoc:",role,"allowedRoles:",e):console.debug&&console.debug("[PrivateRoute] uid:",l.uid,"roleFromDoc:",role,"allowedRoles:",e)}catch{}let h=!1;for(const A of e)if(zr(f,A)){h=!0;break}s(h)}else try{typeof window<"u"&&window.location&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")?console.info&&console.info("[PrivateRoute] no user doc for uid:",l.uid):console.debug&&console.debug("[PrivateRoute] no user doc for uid:",l.uid)}catch{}}n(!1)});return()=>i()},[e]),r?o.jsx("div",{className:"p-4",children:"Cargando..."}):a?t:o.jsx(pA,{to:"/"})}const M1e={admin:{},supervisor_pollo:{bills:{view:!0,edit:!1},customersPollo:{view:!0,edit:!1},transactionsPollo:{view:!0,edit:!1},batches:{view:!0,edit:!1}},contador:{salesV2:{view:!0,edit:!0},customersPollo:{view:!0,edit:!0},batches:{view:!0,edit:!0},transactionsPollo:{view:!0,edit:!1},bills:{view:!0,edit:!1}},vendedor_pollo:{salesV2:{view:!0,edit:!0},transactionsPollo:{view:!0,edit:!1},bills:{view:!0,edit:!1},customersPollo:{view:!0,edit:!0}},vendedor_dulces:{salesCandies:{view:!0,edit:!0},productsVendorsCandies:{view:!0,edit:!1},productsPricesCandies:{view:!0,edit:!1},transactionCandies:{view:!0,edit:!1},cierreVentasCandies:{view:!0,edit:!1},customersCandies:{view:!0,edit:!0}},vendedor_ropa:{}};function kZ(t){return t?Array.isArray(t)?t.filter(Boolean):[t].filter(Boolean):[]}function Qn(t,e,r="view"){const n=kZ(t);return n.some(a=>a==="admin")?!0:n.some(a=>{var s,i;return!!((i=(s=M1e[a])==null?void 0:s[e])!=null&&i[r])})}const L1e={admin:{},supervisor_pollo:{bills:{cerrarVentas:!1},batches:{create:!1,update:!1,delete:!1,export:!1}},contador:{batches:{create:!0,update:!1,delete:!1,export:!0},bills:{cerrarVentas:!1}},vendedor_pollo:{salesV2:{create:!0,update:!0},customersPollo:{update:!0},bills:{cerrarVentas:!0}},vendedor_dulces:{salesCandies:{create:!0,update:!0},productsVendorsCandies:{create:!0,update:!1,delete:!1},customersCandies:{update:!0},productsPricesCandies:{price_edit:!1}},vendedor_ropa:{}};function U1e(t,e,r){const n=kZ(t);return n.some(a=>a==="admin")?!0:Qn(t,e,"view")?n.some(a=>{var i;const s=(i=L1e[a])==null?void 0:i[e];return!!(s!=null&&s[r])}):!1}function Q1e({role:t,roles:e}){const r="/admin",n=({isActive:ie})=>`block rounded px-3 py-2 text-sm ${ie?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,a=nw(),[s,i]=v.useState(!1),[l,c]=v.useState(!1),[u,d]=v.useState(!1),[f,h]=v.useState(!1),[A,m]=v.useState(!1),[p,g]=v.useState(!1),[x,y]=v.useState(!1),[b,w]=v.useState(!1),[j,I]=v.useState(!1),[_,S]=v.useState(!1),[E,k]=v.useState(!1),[P,T]=v.useState(!1),[O,W]=v.useState(!1),[Ae,de]=v.useState(!1),[fe,ge]=v.useState(!1),[ee,Fe]=v.useState(!1),[Pe,F]=v.useState(!1),[Q,H]=v.useState(!1),R=async()=>{H(!0)},z=async()=>{try{await ZO(Rf)}catch(ie){console.error("signOut error:",ie)}finally{try{localStorage.removeItem("user_name"),localStorage.removeItem("user_email"),localStorage.removeItem("roles"),localStorage.removeItem("role")}catch{}H(!1),a("/")}},J=({open:ie,onClick:Z,children:Oe})=>o.jsxs("button",{type:"button",onClick:Z,className:"w-full flex items-center justify-between px-3 py-2 text-left text-sm font-semibold rounded hover:bg-gray-100",children:[o.jsx("span",{children:Oe}),o.jsx("span",{className:"text-xs",children:ie?"":""})]}),D=({open:ie,onClick:Z,title:Oe})=>o.jsxs("button",{type:"button",onClick:Z,className:"ml-2 w-[calc(100%-0.5rem)] flex items-center justify-between px-3 py-2 text-left text-sm rounded hover:bg-gray-100",children:[o.jsx("span",{className:"text-blue-500 font-medium ",children:Oe}),o.jsx("span",{className:"text-xs",children:ie?"":""})]}),U=e&&e.length?e:t,ne=zr(U,"admin");zr(U,"vendedor_pollo");const ve=zr(U,"vendedor_ropa");zr(U,"vendedor_dulces"),zr(U,"supervisor_pollo")||zr(U,"contador"),zr(U,"contador");const L=Qn(U,"salesV2","view")||Qn(U,"customersPollo","view")||Qn(U,"transactionsPollo","view")||Qn(U,"bills","view")||Qn(U,"batches","view"),Ye=Qn(U,"salesCandies","view")||Qn(U,"productsVendorsCandies","view")||Qn(U,"customersCandies","view")||Qn(U,"productsPricesCandies","view")||Qn(U,"transactionCandies","view")||Qn(U,"cierreVentasCandies","view");return o.jsxs("div",{className:"min-h-screen flex",children:[o.jsxs("aside",{className:`${s?"w-15 bg-gray-50 border-r p-3 transition-all duration-300 flex flex-col items-center":"w-55"} bg-[#f1f3f7] border-r p-3 transition-all duration-300 flex flex-col`,children:[o.jsx("button",{onClick:()=>i(!s),className:"mb-2 p-2 rounded-2xl shadow-2xl bg-gray-300 hover:bg-gray-400","aria-label":s?"Expandir men":"Colapsar men",children:s?o.jsx("span",{title:"Expandir men",children:"Menu "}):o.jsx("span",{title:"Colapsar men",children:"Cerrar "})}),!s&&o.jsxs(o.Fragment,{children:[o.jsxs("nav",{className:"space-y-1",children:[ne&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[o.jsx(J,{open:l,onClick:()=>c(ie=>!ie),children:"Pollos Bea"}),l&&o.jsxs("div",{className:"pb-2",children:[o.jsx(D,{open:p,onClick:()=>g(ie=>!ie),title:"Operaciones"}),p&&o.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[o.jsx(Wr,{to:`${r}/salesV2`,className:n,children:"Vender"}),o.jsx(Wr,{to:`${r}/customersPollo`,className:n,children:"Saldo Pendientes"}),o.jsx(Wr,{to:`${r}/transactionsPollo`,className:n,children:"Transacciones"}),o.jsx(Wr,{to:`${r}/bills`,className:n,children:"Cierre Ventas"})]}),o.jsx(D,{open:u,onClick:()=>d(ie=>!ie),title:"Inventarios"}),u&&o.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[o.jsx(Wr,{to:`${r}/batches`,className:n,children:"Inventario Pollo"}),o.jsx(Wr,{to:`${r}/paidBatches`,className:n,children:"Inventarios Pagados"})]}),o.jsx(D,{open:f,onClick:()=>h(ie=>!ie),title:"Finanzas"}),f&&o.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[o.jsx(Wr,{to:`${r}/financialDashboard`,className:n,children:"Dashboard"}),o.jsx(Wr,{to:`${r}/billing`,className:n,children:"Facturacion"}),o.jsx(Wr,{to:`${r}/expenses`,className:n,children:"Gastos"}),o.jsx(Wr,{to:`${r}/salesV2`,className:n,children:"Venta"}),o.jsx(Wr,{to:`${r}/bills`,className:n,children:"Cierre Ventas"}),o.jsx(Wr,{to:`${r}/billhistoric`,className:n,children:"Historial de Cierres"})]}),o.jsx(D,{open:A,onClick:()=>m(ie=>!ie),title:"Productos"}),A&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Wr,{to:`${r}/products`,className:n,children:"Productos"})})]})]}),o.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[o.jsx(J,{open:x,onClick:()=>y(ie=>!ie),children:"Gonper"}),x&&o.jsxs("div",{className:"pb-2",children:[o.jsx(D,{open:b,onClick:()=>w(ie=>!ie),title:"Inventarios"}),b&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Wr,{to:`${r}/notebooksInventory`,className:n,children:"Productos y Precios"})})]})]}),o.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[o.jsx(J,{open:O,onClick:()=>W(ie=>!ie),children:"CandyShop"}),O&&o.jsxs("div",{className:"pb-2",children:[o.jsx(D,{open:fe,onClick:()=>ge(ie=>!ie),title:"Vendedores"}),fe&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Wr,{to:`${r}/salesCandies`,className:n,children:"Venta"})}),fe&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Wr,{to:`${r}/productsVendorsCandies`,className:n,children:"Sub ordenes"})}),fe&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Wr,{to:`${r}/productsPricesCandies`,className:n,children:"Precios Venta"})}),o.jsx(D,{open:Ae,onClick:()=>de(ie=>!ie),title:"Inventario"}),Ae&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Wr,{to:`${r}/mainordersCandies`,className:n,children:"Ordenes Maestras"})}),Ae&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Wr,{to:`${r}/inventoryMainOrderCandies`,className:n,children:"Lista de Ordenes"})}),Ae&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Wr,{to:`${r}/inventoryCandies`,className:n,children:"Lista Productos"})}),Ae&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Wr,{to:`${r}/productsCandies`,className:n,children:"Productos"})}),o.jsx(D,{open:ee,onClick:()=>Fe(ie=>!ie),title:"Finanzas"}),ee&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Wr,{to:`${r}/datacenter`,className:n,children:"Data Center"})}),ee&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Wr,{to:`${r}/cashDeliveries`,className:n,children:"Entregas Cash"})}),ee&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Wr,{to:`${r}/transactionCandies`,className:n,children:"Transacciones"})}),ee&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Wr,{to:`${r}/cierreVentasCandies`,className:n,children:"Cierres"})}),ee&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Wr,{to:`${r}/reporteCierresCandies`,className:n,children:"Reporte Cierres"})}),ee&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Wr,{to:`${r}/billingsCandies`,className:n,children:"Facturas"})}),ee&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Wr,{to:`${r}/consolidatedVendors`,className:n,children:"Consolidado Vendedores"})}),ee&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Wr,{to:`${r}/dashboardCandies`,className:n,children:"Dashboard"})}),ee&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Wr,{to:`${r}/customersCandies`,className:n,children:"Clientes"})}),ee&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Wr,{to:`${r}/vendorsCandies`,className:n,children:"Vendedores"})}),ee&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Wr,{to:`${r}/expensesCandies`,className:n,children:"Gastos"})})]})]}),o.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[o.jsx(J,{open:Pe,onClick:()=>F(ie=>!ie),children:"Operaciones Otras"}),Pe&&o.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[o.jsx(Wr,{to:`${r}/users`,className:n,children:"Usuarios"}),o.jsx(Wr,{to:`${r}/fix`,className:n,children:"Fix de lotes"}),o.jsx(Wr,{to:`${r}/transactionclose`,className:n,children:"Liquidaciones"})]})]})]}),!ne&&L&&o.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[o.jsx(J,{open:l,onClick:()=>c(ie=>!ie),children:"Pollos Bea"}),l&&o.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[Qn(U,"salesV2")&&o.jsx(Wr,{to:`${r}/salesV2`,className:n,children:"Vender"}),Qn(U,"batches")&&o.jsx(Wr,{to:`${r}/batches`,className:n,children:"Inventario Pollo"}),Qn(U,"bills")&&o.jsx(Wr,{to:`${r}/bills`,className:n,children:"Cierre Ventas"}),Qn(U,"transactionsPollo")&&o.jsx(Wr,{to:`${r}/transactionsPollo`,className:n,children:"Transacciones"}),Qn(U,"customersPollo")&&o.jsx(Wr,{to:`${r}/customersPollo`,className:n,children:"Saldos Pendientes"})]})]}),!ne&&Ye&&o.jsxs("div",{className:"border rounded",children:[o.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:Qn(U,"salesCandies")&&o.jsx(Wr,{to:`${r}/salesCandies`,className:n,children:"Venta"})}),o.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:Qn(U,"transactionCandies")&&o.jsx(Wr,{to:`${r}/transactionCandies`,className:n,children:"Ventas del dia"})}),o.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:Qn(U,"cierreVentasCandies")&&o.jsx(Wr,{to:`${r}/cierreVentasCandies`,className:n,children:"Cierre de Ventas"})}),o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:Qn(U,"productsVendorsCandies")&&o.jsx(Wr,{to:`${r}/productsVendorsCandies`,className:n,children:"Pedidos"})}),o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:Qn(U,"customersCandies")&&o.jsx(Wr,{to:`${r}/customersCandies`,className:n,children:"Clientes"})}),o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:Qn(U,"productsPricesCandies")&&o.jsx(Wr,{to:`${r}/productsPricesCandies`,className:n,children:"Precios Venta"})})]}),ve&&o.jsxs("div",{className:"border rounded",children:[o.jsx(J,{open:x,onClick:()=>y(ie=>!ie),children:"Operaciones Ropa"}),x&&o.jsxs("div",{className:"pb-2",children:[o.jsx(D,{open:E,onClick:()=>k(ie=>!ie),title:"Ventas"}),E&&o.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[o.jsx(Wr,{to:`${r}/salesClothes`,className:n,children:"Venta Ropa"}),o.jsx(Wr,{to:`${r}/TransactionsReportClothes`,className:n,children:"Transacciones"})]}),o.jsx(D,{open:j,onClick:()=>I(ie=>!ie),title:"Productos"}),j&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Wr,{to:`${r}/productsClothes`,className:n,children:"Agregar Productos"})}),o.jsx(D,{open:_,onClick:()=>S(ie=>!ie),title:"Clientes"}),_&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Wr,{to:`${r}/CustomersClothes`,className:n,children:"Listado de Clientes"})})]})]})]}),o.jsx("button",{onClick:R,className:"mt-4 bg-red-500 text-white px-3 py-2 rounded-2xl shadow-2xl hover:bg-red-600",children:"Cerrar sesin"}),o.jsx("div",{className:"mt-2 text-[20px] text-gray-700",children:typeof window<"u"&&(localStorage.getItem("user_name")||localStorage.getItem("user_email"))}),Q&&o.jsxs("div",{className:"fixed inset-0 z-[120] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/20",onClick:()=>H(!1)}),o.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg z-[130] w-[90%] max-w-sm",children:[o.jsx("div",{className:"font-semibold mb-3",children:"Ests seguro de cerrar sesin?"}),o.jsxs("div",{className:"flex gap-2 justify-end",children:[o.jsx("button",{onClick:()=>H(!1),className:"px-3 py-2 rounded bg-gray-200",children:"No"}),o.jsx("button",{onClick:z,className:"px-3 py-2 rounded bg-red-500 text-white",children:"SI"})]})]})]})]})]}),o.jsx("main",{className:"flex-1 p-6",children:o.jsx(PX,{})})]})}function Y1(...t){return t.filter(Boolean).join(" ")}function V1e({role:t,roles:e}){const r=nw(),n=ch(),a="/admin",s=e&&e.length?e:t,i=zr(s,"admin"),l=zr(s,"vendedor_pollo"),c=zr(s,"vendedor_dulces"),u=zr(s,"supervisor_pollo")||zr(s,"contador"),d=zr(s,"contador"),f=Qn(s,"salesV2","view")||Qn(s,"batches","view")||Qn(s,"bills","view")||Qn(s,"transactionsPollo","view")||Qn(s,"customersPollo","view"),h=Qn(s,"salesCandies","view")||Qn(s,"productsVendorsCandies","view")||Qn(s,"customersCandies","view")||Qn(s,"productsPricesCandies","view")||Qn(s,"transactionCandies","view")||Qn(s,"cierreVentasCandies","view"),A=f&&h,[m,p]=v.useState(()=>{try{const k=typeof window<"u"?localStorage.getItem("rubro"):null;if(k==="POLLO"||k==="DULCES")return k}catch{}return f?"POLLO":h?"DULCES":"POLLO"}),[g,x]=v.useState(!1),[y,b]=v.useState(!1),w=v.useMemo(()=>{let k=[];if(i||A){if(m==="POLLO")if(i)k=[{key:"venta",label:"Vender",to:`${a}/salesV2`},{key:"clientes",label:"Saldos pendientes",to:`${a}/customersPollo`},{key:"dash",label:"Dashboard",to:`${a}/financialDashboard`},{key:"cierre",label:"Cierre Ventas",to:`${a}/bills`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`},{key:"inv",label:"Inventario",to:`${a}/batches`},{key:"invPag",label:"Factura",to:`${a}/paidBatches`},{key:"gastos",label:"Gastos",to:`${a}/expenses`}];else if(u){const O=[{key:"venta",label:"Vender",to:`${a}/salesV2`},{key:"clientes",label:"Saldos pendientes",to:`${a}/customersPollo`},{key:"inv",label:"Inventario",to:`${a}/batches`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`},{key:"cierre",label:"Cierre Ventas",to:`${a}/bills`}];zr(s,"contador")&&(k=O)}else l?k=[{key:"venta",label:"Vender",to:`${a}/salesV2`},{key:"clientes",label:"Saldos Pendientes",to:`${a}/customersPollo`},{key:"cierre",label:"Cierre Ventas",to:`${a}/bills`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`}]:d?k=[{key:"venta",label:"Vender",to:`${a}/salesV2`},{key:"clientes",label:"Saldos Pendientes",to:`${a}/customersPollo`},{key:"cierre",label:"Cierre Ventas",to:`${a}/bills`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`}]:k=[{key:"home",label:"Inicio",to:`${a}`}];m==="DULCES"&&(i?k=[{key:"dc",label:"Data Center Reporte",to:`${a}/datacenter`},{key:"maes",label:"Inventario Maestro",to:`${a}/mainordersCandies`},{key:"ord",label:"Inventario Vendedor",to:`${a}/productsVendorsCandies`},{key:"cli",label:"Saldos Pendientes",to:`${a}/customersCandies`},{key:"trx",label:"Ventas del dia",to:`${a}/transactionCandies`},{key:"cier",label:"Cierre de ventas",to:`${a}/cierreVentasCandies`},{key:"cash",label:"Entregas Efectivo ",to:`${a}/cashDeliveries`},{key:"items",label:"Productos",to:`${a}/productsCandies`},{key:"precios",label:"Precio Ventas",to:`${a}/productsPricesCandies`},{key:"gonper",label:"Productos Gonper",to:`${a}/notebooksInventory`}]:c?k=[{key:"venta",label:"Vender",to:`${a}/salesCandies`},{key:"precios",label:"Precios",to:`${a}/productsPricesCandies`},{key:"ped",label:"Inventario",to:`${a}/productsVendorsCandies`},{key:"cli",label:"Saldos Pendientes",to:`${a}/customersCandies`},{key:"trx",label:"Ventas",to:`${a}/transactionCandies`},{key:"cier",label:"Cierre",to:`${a}/cierreVentasCandies`}]:k=[{key:"home",label:"Inicio",to:`${a}`}])}else if(u){const O=[{key:"venta",label:"Venta",to:`${a}/salesV2`},{key:"inv",label:"Inventario",to:`${a}/batches`},{key:"clientes",label:"Saldos Pendientes",to:`${a}/customersPollo`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`},{key:"cierre",label:"Cierre",to:`${a}/bills`}];zr(s,"contador"),k=O}else l?k=[{key:"venta",label:"Venta",to:`${a}/salesV2`},{key:"cierre",label:"Cierre",to:`${a}/bills`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`}]:c?k=[{key:"venta",label:"Vender",to:`${a}/salesCandies`},{key:"precios",label:"Precios",to:`${a}/productsPricesCandies`},{key:"ped",label:"Inventario",to:`${a}/productsVendorsCandies`},{key:"cli",label:"Saldos Pendientes",to:`${a}/customersCandies`},{key:"trx",label:"Ventas",to:`${a}/transactionCandies`},{key:"cier",label:"Cierre",to:`${a}/cierreVentasCandies`}]:k=[{key:"home",label:"Inicio",to:`${a}`}];const P=new Set(["bills","customersPollo","transactionsPollo","batches","salesV2","salesCandies","productsVendorsCandies","productsPricesCandies","transactionCandies","cierreVentasCandies","customersCandies"]);return k.filter(O=>{const Ae=O.to.replace(`${a}/`,"");return P.has(Ae)?Qn(s,Ae,"view"):!0})},[a,m,i,A,u,l,c,d,s]);v.useEffect(()=>{if((i||A)&&w.length){try{localStorage.setItem("rubro",m)}catch{}r(w[0].to,{replace:!0})}},[m]),v.useEffect(()=>{g&&x(!1)},[n.pathname]),v.useEffect(()=>{const k=P=>{P.key==="Escape"&&x(!1)};return g&&window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[g]);const j=async()=>{b(!0)},I=async()=>{try{await ZO(Rf)}catch(k){console.error("signOut error:",k)}finally{try{localStorage.removeItem("user_name"),localStorage.removeItem("user_email"),localStorage.removeItem("roles"),localStorage.removeItem("role")}catch{}b(!1),x(!1),r("/")}},_=({isActive:k})=>Y1("flex-1 text-center text-[11px] py-1.5 rounded-lg","leading-none select-none",k?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"),S=w.length<=2,E=({isActive:k})=>Y1("w-full flex items-center justify-between px-4 py-3 rounded-xl border",k?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50");return o.jsxs("div",{className:"min-h-screen bg-[#f1f3f7] flex flex-col",children:[o.jsx("header",{className:"sticky top-0 z-50 bg-white border-b shadow-sm",children:o.jsxs("div",{className:"px-3 py-3 flex items-center gap-2",children:[i||A?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",onClick:()=>p("POLLO"),className:Y1("px-3 py-2 rounded-2xl text-sm font-semibold",m==="POLLO"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"),children:"Carniceria"}),o.jsx("button",{type:"button",onClick:()=>p("DULCES"),className:Y1("px-3 py-2 rounded-2xl text-sm font-semibold",m==="DULCES"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"),children:"Mr. Candy"})]}):o.jsx("div",{className:"text-sm font-semibold text-gray-800",children:l?"Pollos Bea":c?"CandyShop":"Posys"}),o.jsx("div",{className:"ml-auto flex items-center gap-2",children:o.jsx("button",{type:"button",onClick:()=>x(!0),className:"px-3 py-2 rounded-2xl bg-gray-100 text-gray-800 text-sm font-bold shadow hover:bg-gray-200","aria-label":"Abrir men",title:"Men",children:""})})]})}),g&&o.jsxs("div",{className:"fixed inset-0 z-[80]",children:[o.jsx("button",{type:"button",className:"absolute inset-0 bg-black/40",onClick:()=>x(!1),"aria-label":"Cerrar men"}),o.jsxs("aside",{className:"absolute right-0 top-0 h-full w-[86%] max-w-sm bg-white shadow-2xl border-l flex flex-col",children:[o.jsxs("div",{className:"p-4 border-b",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"font-bold text-gray-900",children:"Men"}),o.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-3 py-2 rounded-xl bg-gray-100 hover:bg-gray-200",children:""})]}),o.jsx("div",{className:"mt-2 text-[20px] text-gray-600",children:typeof window<"u"&&(localStorage.getItem("user_name")||localStorage.getItem("user_email"))})]}),o.jsx("div",{className:"p-3 flex-1 overflow-y-auto space-y-2",children:w.map(k=>o.jsxs(Wr,{to:k.to,className:E,children:[o.jsx("span",{className:"font-semibold",children:k.label}),o.jsx("span",{className:"text-sm opacity-80",children:""})]},k.key))}),o.jsxs("div",{className:"p-3 border-t space-y-2 pb-[calc(12px+env(safe-area-inset-bottom))]",children:[o.jsx("button",{onClick:j,className:"w-full px-4 py-3 rounded-xl bg-red-500 text-white font-semibold shadow hover:bg-red-600",children:"Cerrar sesin"}),y&&o.jsxs("div",{className:"fixed inset-0 z-[120] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/20",onClick:()=>b(!1)}),o.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg z-[130] w-[90%] max-w-sm",children:[o.jsx("div",{className:"font-semibold mb-3",children:"Ests seguro de cerrar sesin?"}),o.jsxs("div",{className:"flex gap-2 justify-end",children:[o.jsx("button",{onClick:()=>b(!1),className:"px-3 py-2 rounded bg-gray-200",children:"No"}),o.jsx("button",{onClick:I,className:"px-3 py-2 rounded bg-red-500 text-white",children:"SI"})]})]})]})]})]})]}),o.jsx("main",{className:Y1("flex-1 overflow-y-auto px-3 pt-3",S?"pb-[calc(92px+env(safe-area-inset-bottom))]":"pb-[calc(16px+env(safe-area-inset-bottom))]"),children:o.jsx(PX,{})}),S&&o.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white border-t shadow-md pb-[env(safe-area-inset-bottom)]",children:o.jsx("div",{className:"max-w-3xl mx-auto px-2 py-1.5 flex gap-1.5",children:w.map(k=>o.jsx(Wr,{to:k.to,className:_,children:k.label},k.key))})})]})}const FZ=6048e5,H1e=864e5,$1e=6e4,G1e=36e5,K1e=1e3,V7=Symbol.for("constructDateFrom");function Oi(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&V7 in t?t[V7](e):t instanceof Date?new t.constructor(e):new Date(e)}function Rs(t,e){return Oi(e||t,t)}function K6(t,e,r){const n=Rs(t,r==null?void 0:r.in);return isNaN(e)?Oi((r==null?void 0:r.in)||t,NaN):(e&&n.setDate(n.getDate()+e),n)}function q1e(t,e,r){const n=Rs(t,r==null?void 0:r.in);if(isNaN(e))return Oi(t,NaN);const a=n.getDate(),s=Oi(t,n.getTime());s.setMonth(n.getMonth()+e+1,0);const i=s.getDate();return a>=i?s:(n.setFullYear(s.getFullYear(),s.getMonth(),a),n)}let z1e={};function t1(){return z1e}function rm(t,e){var l,c,u,d;const r=t1(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=Rs(t,e==null?void 0:e.in),s=a.getDay(),i=(s<n?7:0)+s-n;return a.setDate(a.getDate()-i),a.setHours(0,0,0,0),a}function Cv(t,e){return rm(t,{...e,weekStartsOn:1})}function OZ(t,e){const r=Rs(t,e==null?void 0:e.in),n=r.getFullYear(),a=Oi(r,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const s=Cv(a),i=Oi(r,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const l=Cv(i);return r.getTime()>=s.getTime()?n+1:r.getTime()>=l.getTime()?n:n-1}function tS(t){const e=Rs(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function W1e(t,...e){const r=Oi.bind(null,e.find(n=>typeof n=="object"));return e.map(r)}function H7(t,e){const r=Rs(t,e==null?void 0:e.in);return r.setHours(0,0,0,0),r}function X1e(t,e,r){const[n,a]=W1e(r==null?void 0:r.in,t,e),s=H7(n),i=H7(a),l=+s-tS(s),c=+i-tS(i);return Math.round((l-c)/H1e)}function Y1e(t,e){const r=OZ(t,e),n=Oi(t,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),Cv(n)}function J1e(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function q6(t){return!(!J1e(t)&&typeof t!="number"||isNaN(+Rs(t)))}function Jd(t,e){const r=Rs(t,e==null?void 0:e.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function Zd(t,e){const r=Rs(t,e==null?void 0:e.in);return r.setDate(1),r.setHours(0,0,0,0),r}function Z1e(t,e){const r=Rs(t,e==null?void 0:e.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const eye={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},tye=(t,e,r)=>{let n;const a=eye[t];return typeof a=="string"?n=a:e===1?n=a.one:n=a.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function s5(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const rye={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},nye={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},aye={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},sye={date:s5({formats:rye,defaultWidth:"full"}),time:s5({formats:nye,defaultWidth:"full"}),dateTime:s5({formats:aye,defaultWidth:"full"})},iye={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},oye=(t,e,r,n)=>iye[t];function J1(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):i;a=t.formattingValues[l]||t.formattingValues[i]}else{const i=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;a=t.values[l]||t.values[i]}const s=t.argumentCallback?t.argumentCallback(e):e;return a[s]}}const lye={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},cye={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},uye={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dye={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},fye={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Aye={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},hye=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},mye={ordinalNumber:hye,era:J1({values:lye,defaultWidth:"wide"}),quarter:J1({values:cye,defaultWidth:"wide",argumentCallback:t=>t-1}),month:J1({values:uye,defaultWidth:"wide"}),day:J1({values:dye,defaultWidth:"wide"}),dayPeriod:J1({values:fye,defaultWidth:"wide",formattingValues:Aye,defaultFormattingWidth:"wide"})};function Z1(t){return(e,r={})=>{const n=r.width,a=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],s=e.match(a);if(!s)return null;const i=s[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?gye(l,f=>f.test(i)):pye(l,f=>f.test(i));let u;u=t.valueCallback?t.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(i.length);return{value:u,rest:d}}}function pye(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function gye(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function xye(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const a=n[0],s=e.match(t.parsePattern);if(!s)return null;let i=t.valueCallback?t.valueCallback(s[0]):s[0];i=r.valueCallback?r.valueCallback(i):i;const l=e.slice(a.length);return{value:i,rest:l}}}const vye=/^(\d+)(th|st|nd|rd)?/i,yye=/\d+/i,bye={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},wye={any:[/^b/i,/^(a|c)/i]},Nye={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Cye={any:[/1/i,/2/i,/3/i,/4/i]},_ye={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Eye={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Sye={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Iye={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},jye={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Pye={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Bye={ordinalNumber:xye({matchPattern:vye,parsePattern:yye,valueCallback:t=>parseInt(t,10)}),era:Z1({matchPatterns:bye,defaultMatchWidth:"wide",parsePatterns:wye,defaultParseWidth:"any"}),quarter:Z1({matchPatterns:Nye,defaultMatchWidth:"wide",parsePatterns:Cye,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Z1({matchPatterns:_ye,defaultMatchWidth:"wide",parsePatterns:Eye,defaultParseWidth:"any"}),day:Z1({matchPatterns:Sye,defaultMatchWidth:"wide",parsePatterns:Iye,defaultParseWidth:"any"}),dayPeriod:Z1({matchPatterns:jye,defaultMatchWidth:"any",parsePatterns:Pye,defaultParseWidth:"any"})},DZ={code:"en-US",formatDistance:tye,formatLong:sye,formatRelative:oye,localize:mye,match:Bye,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Tye(t,e){const r=Rs(t,e==null?void 0:e.in);return X1e(r,Z1e(r))+1}function RZ(t,e){const r=Rs(t,e==null?void 0:e.in),n=+Cv(r)-+Y1e(r);return Math.round(n/FZ)+1}function z6(t,e){var d,f,h,A;const r=Rs(t,e==null?void 0:e.in),n=r.getFullYear(),a=t1(),s=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((A=(h=a.locale)==null?void 0:h.options)==null?void 0:A.firstWeekContainsDate)??1,i=Oi((e==null?void 0:e.in)||t,0);i.setFullYear(n+1,0,s),i.setHours(0,0,0,0);const l=rm(i,e),c=Oi((e==null?void 0:e.in)||t,0);c.setFullYear(n,0,s),c.setHours(0,0,0,0);const u=rm(c,e);return+r>=+l?n+1:+r>=+u?n:n-1}function kye(t,e){var l,c,u,d;const r=t1(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=z6(t,e),s=Oi((e==null?void 0:e.in)||t,0);return s.setFullYear(a,0,n),s.setHours(0,0,0,0),rm(s,e)}function MZ(t,e){const r=Rs(t,e==null?void 0:e.in),n=+rm(r,e)-+kye(r,e);return Math.round(n/FZ)+1}function ya(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const Kh={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return ya(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):ya(r+1,2)},d(t,e){return ya(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return ya(t.getHours()%12||12,e.length)},H(t,e){return ya(t.getHours(),e.length)},m(t,e){return ya(t.getMinutes(),e.length)},s(t,e){return ya(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return ya(a,e.length)}},Vg={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},$7={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return Kh.y(t,e)},Y:function(t,e,r,n){const a=z6(t,n),s=a>0?a:1-a;if(e==="YY"){const i=s%100;return ya(i,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):ya(s,e.length)},R:function(t,e){const r=OZ(t);return ya(r,e.length)},u:function(t,e){const r=t.getFullYear();return ya(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return ya(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return ya(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return Kh.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return ya(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const a=MZ(t,n);return e==="wo"?r.ordinalNumber(a,{unit:"week"}):ya(a,e.length)},I:function(t,e,r){const n=RZ(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):ya(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):Kh.d(t,e)},D:function(t,e,r){const n=Tye(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):ya(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const a=t.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return ya(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const a=t.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return ya(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),a=n===0?7:n;switch(e){case"i":return String(a);case"ii":return ya(a,e.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const a=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let a;switch(n===12?a=Vg.noon:n===0?a=Vg.midnight:a=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let a;switch(n>=17?a=Vg.evening:n>=12?a=Vg.afternoon:n>=4?a=Vg.morning:a=Vg.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Kh.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):Kh.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):ya(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):ya(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):Kh.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):Kh.s(t,e)},S:function(t,e){return Kh.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return K7(n);case"XXXX":case"XX":return Hm(n);case"XXXXX":case"XXX":default:return Hm(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return K7(n);case"xxxx":case"xx":return Hm(n);case"xxxxx":case"xxx":default:return Hm(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+G7(n,":");case"OOOO":default:return"GMT"+Hm(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+G7(n,":");case"zzzz":default:return"GMT"+Hm(n,":")}},t:function(t,e,r){const n=Math.trunc(+t/1e3);return ya(n,e.length)},T:function(t,e,r){return ya(+t,e.length)}};function G7(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),a=Math.trunc(n/60),s=n%60;return s===0?r+String(a):r+String(a)+e+ya(s,2)}function K7(t,e){return t%60===0?(t>0?"-":"+")+ya(Math.abs(t)/60,2):Hm(t,e)}function Hm(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),a=ya(Math.trunc(n/60),2),s=ya(n%60,2);return r+a+e+s}const q7=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},LZ=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Fye=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return q7(t,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",q7(n,e)).replace("{{time}}",LZ(a,e))},PT={p:LZ,P:Fye},Oye=/^D+$/,Dye=/^Y+$/,Rye=["D","DD","YY","YYYY"];function UZ(t){return Oye.test(t)}function QZ(t){return Dye.test(t)}function BT(t,e,r){const n=Mye(t,e,r);if(console.warn(n),Rye.includes(t))throw new RangeError(n)}function Mye(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Lye=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Uye=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Qye=/^'([^]*?)'?$/,Vye=/''/g,Hye=/[a-zA-Z]/;function br(t,e,r){var d,f,h,A;const n=t1(),a=n.locale??DZ,s=n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,i=n.weekStartsOn??((A=(h=n.locale)==null?void 0:h.options)==null?void 0:A.weekStartsOn)??0,l=Rs(t,r==null?void 0:r.in);if(!q6(l))throw new RangeError("Invalid time value");let c=e.match(Uye).map(m=>{const p=m[0];if(p==="p"||p==="P"){const g=PT[p];return g(m,a.formatLong)}return m}).join("").match(Lye).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const p=m[0];if(p==="'")return{isToken:!1,value:$ye(m)};if($7[p])return{isToken:!0,value:m};if(p.match(Hye))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:m}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:s,weekStartsOn:i,locale:a};return c.map(m=>{if(!m.isToken)return m.value;const p=m.value;(QZ(p)||UZ(p))&&BT(p,e,String(t));const g=$7[p[0]];return g(l,p,a.localize,u)}).join("")}function $ye(t){const e=t.match(Qye);return e?e[1].replace(Vye,"'"):t}function Gye(){return Object.assign({},t1())}function Kye(t,e){const r=Rs(t,e==null?void 0:e.in).getDay();return r===0?7:r}function qye(t,e){const r=zye(e)?new e(0):Oi(e,0);return r.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),r.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),r}function zye(t){var e;return typeof t=="function"&&((e=t.prototype)==null?void 0:e.constructor)===t}const Wye=10;class VZ{constructor(){dr(this,"subPriority",0)}validate(e,r){return!0}}class Xye extends VZ{constructor(e,r,n,a,s){super(),this.value=e,this.validateValue=r,this.setValue=n,this.priority=a,s&&(this.subPriority=s)}validate(e,r){return this.validateValue(e,this.value,r)}set(e,r,n){return this.setValue(e,r,this.value,n)}}class Yye extends VZ{constructor(r,n){super();dr(this,"priority",Wye);dr(this,"subPriority",-1);this.context=r||(a=>Oi(n,a))}set(r,n){return n.timestampIsSet?r:Oi(r,qye(r,this.context))}}let la=class{run(e,r,n,a){const s=this.parse(e,r,n,a);return s?{setter:new Xye(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,r,n){return!0}};class Jye extends la{constructor(){super(...arguments);dr(this,"priority",140);dr(this,"incompatibleTokens",["R","u","t","T"])}parse(r,n,a){switch(n){case"G":case"GG":case"GGG":return a.era(r,{width:"abbreviated"})||a.era(r,{width:"narrow"});case"GGGGG":return a.era(r,{width:"narrow"});case"GGGG":default:return a.era(r,{width:"wide"})||a.era(r,{width:"abbreviated"})||a.era(r,{width:"narrow"})}}set(r,n,a){return n.era=a,r.setFullYear(a,0,1),r.setHours(0,0,0,0),r}}const pi={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Cf={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function gi(t,e){return t&&{value:e(t.value),rest:t.rest}}function Bs(t,e){const r=e.match(t);return r?{value:parseInt(r[0],10),rest:e.slice(r[0].length)}:null}function _f(t,e){const r=e.match(t);if(!r)return null;if(r[0]==="Z")return{value:0,rest:e.slice(1)};const n=r[1]==="+"?1:-1,a=r[2]?parseInt(r[2],10):0,s=r[3]?parseInt(r[3],10):0,i=r[5]?parseInt(r[5],10):0;return{value:n*(a*G1e+s*$1e+i*K1e),rest:e.slice(r[0].length)}}function HZ(t){return Bs(pi.anyDigitsSigned,t)}function Zs(t,e){switch(t){case 1:return Bs(pi.singleDigit,e);case 2:return Bs(pi.twoDigits,e);case 3:return Bs(pi.threeDigits,e);case 4:return Bs(pi.fourDigits,e);default:return Bs(new RegExp("^\\d{1,"+t+"}"),e)}}function rS(t,e){switch(t){case 1:return Bs(pi.singleDigitSigned,e);case 2:return Bs(pi.twoDigitsSigned,e);case 3:return Bs(pi.threeDigitsSigned,e);case 4:return Bs(pi.fourDigitsSigned,e);default:return Bs(new RegExp("^-?\\d{1,"+t+"}"),e)}}function W6(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function $Z(t,e){const r=e>0,n=r?e:1-e;let a;if(n<=50)a=t||100;else{const s=n+50,i=Math.trunc(s/100)*100,l=t>=s%100;a=t+i-(l?100:0)}return r?a:1-a}function GZ(t){return t%400===0||t%4===0&&t%100!==0}class Zye extends la{constructor(){super(...arguments);dr(this,"priority",130);dr(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(r,n,a){const s=i=>({year:i,isTwoDigitYear:n==="yy"});switch(n){case"y":return gi(Zs(4,r),s);case"yo":return gi(a.ordinalNumber(r,{unit:"year"}),s);default:return gi(Zs(n.length,r),s)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,a){const s=r.getFullYear();if(a.isTwoDigitYear){const l=$Z(a.year,s);return r.setFullYear(l,0,1),r.setHours(0,0,0,0),r}const i=!("era"in n)||n.era===1?a.year:1-a.year;return r.setFullYear(i,0,1),r.setHours(0,0,0,0),r}}class ebe extends la{constructor(){super(...arguments);dr(this,"priority",130);dr(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(r,n,a){const s=i=>({year:i,isTwoDigitYear:n==="YY"});switch(n){case"Y":return gi(Zs(4,r),s);case"Yo":return gi(a.ordinalNumber(r,{unit:"year"}),s);default:return gi(Zs(n.length,r),s)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,a,s){const i=z6(r,s);if(a.isTwoDigitYear){const c=$Z(a.year,i);return r.setFullYear(c,0,s.firstWeekContainsDate),r.setHours(0,0,0,0),rm(r,s)}const l=!("era"in n)||n.era===1?a.year:1-a.year;return r.setFullYear(l,0,s.firstWeekContainsDate),r.setHours(0,0,0,0),rm(r,s)}}class tbe extends la{constructor(){super(...arguments);dr(this,"priority",130);dr(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(r,n){return rS(n==="R"?4:n.length,r)}set(r,n,a){const s=Oi(r,0);return s.setFullYear(a,0,4),s.setHours(0,0,0,0),Cv(s)}}class rbe extends la{constructor(){super(...arguments);dr(this,"priority",130);dr(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(r,n){return rS(n==="u"?4:n.length,r)}set(r,n,a){return r.setFullYear(a,0,1),r.setHours(0,0,0,0),r}}class nbe extends la{constructor(){super(...arguments);dr(this,"priority",120);dr(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,a){switch(n){case"Q":case"QQ":return Zs(n.length,r);case"Qo":return a.ordinalNumber(r,{unit:"quarter"});case"QQQ":return a.quarter(r,{width:"abbreviated",context:"formatting"})||a.quarter(r,{width:"narrow",context:"formatting"});case"QQQQQ":return a.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(r,{width:"wide",context:"formatting"})||a.quarter(r,{width:"abbreviated",context:"formatting"})||a.quarter(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=1&&n<=4}set(r,n,a){return r.setMonth((a-1)*3,1),r.setHours(0,0,0,0),r}}class abe extends la{constructor(){super(...arguments);dr(this,"priority",120);dr(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,a){switch(n){case"q":case"qq":return Zs(n.length,r);case"qo":return a.ordinalNumber(r,{unit:"quarter"});case"qqq":return a.quarter(r,{width:"abbreviated",context:"standalone"})||a.quarter(r,{width:"narrow",context:"standalone"});case"qqqqq":return a.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(r,{width:"wide",context:"standalone"})||a.quarter(r,{width:"abbreviated",context:"standalone"})||a.quarter(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=1&&n<=4}set(r,n,a){return r.setMonth((a-1)*3,1),r.setHours(0,0,0,0),r}}class sbe extends la{constructor(){super(...arguments);dr(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);dr(this,"priority",110)}parse(r,n,a){const s=i=>i-1;switch(n){case"M":return gi(Bs(pi.month,r),s);case"MM":return gi(Zs(2,r),s);case"Mo":return gi(a.ordinalNumber(r,{unit:"month"}),s);case"MMM":return a.month(r,{width:"abbreviated",context:"formatting"})||a.month(r,{width:"narrow",context:"formatting"});case"MMMMM":return a.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(r,{width:"wide",context:"formatting"})||a.month(r,{width:"abbreviated",context:"formatting"})||a.month(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=11}set(r,n,a){return r.setMonth(a,1),r.setHours(0,0,0,0),r}}class ibe extends la{constructor(){super(...arguments);dr(this,"priority",110);dr(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(r,n,a){const s=i=>i-1;switch(n){case"L":return gi(Bs(pi.month,r),s);case"LL":return gi(Zs(2,r),s);case"Lo":return gi(a.ordinalNumber(r,{unit:"month"}),s);case"LLL":return a.month(r,{width:"abbreviated",context:"standalone"})||a.month(r,{width:"narrow",context:"standalone"});case"LLLLL":return a.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(r,{width:"wide",context:"standalone"})||a.month(r,{width:"abbreviated",context:"standalone"})||a.month(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=11}set(r,n,a){return r.setMonth(a,1),r.setHours(0,0,0,0),r}}function obe(t,e,r){const n=Rs(t,r==null?void 0:r.in),a=MZ(n,r)-e;return n.setDate(n.getDate()-a*7),Rs(n,r==null?void 0:r.in)}class lbe extends la{constructor(){super(...arguments);dr(this,"priority",100);dr(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(r,n,a){switch(n){case"w":return Bs(pi.week,r);case"wo":return a.ordinalNumber(r,{unit:"week"});default:return Zs(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,a,s){return rm(obe(r,a,s),s)}}function cbe(t,e,r){const n=Rs(t,r==null?void 0:r.in),a=RZ(n,r)-e;return n.setDate(n.getDate()-a*7),n}class ube extends la{constructor(){super(...arguments);dr(this,"priority",100);dr(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(r,n,a){switch(n){case"I":return Bs(pi.week,r);case"Io":return a.ordinalNumber(r,{unit:"week"});default:return Zs(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,a){return Cv(cbe(r,a))}}const dbe=[31,28,31,30,31,30,31,31,30,31,30,31],fbe=[31,29,31,30,31,30,31,31,30,31,30,31];class Abe extends la{constructor(){super(...arguments);dr(this,"priority",90);dr(this,"subPriority",1);dr(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(r,n,a){switch(n){case"d":return Bs(pi.date,r);case"do":return a.ordinalNumber(r,{unit:"date"});default:return Zs(n.length,r)}}validate(r,n){const a=r.getFullYear(),s=GZ(a),i=r.getMonth();return s?n>=1&&n<=fbe[i]:n>=1&&n<=dbe[i]}set(r,n,a){return r.setDate(a),r.setHours(0,0,0,0),r}}class hbe extends la{constructor(){super(...arguments);dr(this,"priority",90);dr(this,"subpriority",1);dr(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(r,n,a){switch(n){case"D":case"DD":return Bs(pi.dayOfYear,r);case"Do":return a.ordinalNumber(r,{unit:"date"});default:return Zs(n.length,r)}}validate(r,n){const a=r.getFullYear();return GZ(a)?n>=1&&n<=366:n>=1&&n<=365}set(r,n,a){return r.setMonth(0,a),r.setHours(0,0,0,0),r}}function X6(t,e,r){var f,h,A,m;const n=t1(),a=(r==null?void 0:r.weekStartsOn)??((h=(f=r==null?void 0:r.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??n.weekStartsOn??((m=(A=n.locale)==null?void 0:A.options)==null?void 0:m.weekStartsOn)??0,s=Rs(t,r==null?void 0:r.in),i=s.getDay(),c=(e%7+7)%7,u=7-a,d=e<0||e>6?e-(i+u)%7:(c+u)%7-(i+u)%7;return K6(s,d,r)}class mbe extends la{constructor(){super(...arguments);dr(this,"priority",90);dr(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(r,n,a){switch(n){case"E":case"EE":case"EEE":return a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"EEEEE":return a.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"EEEE":default:return a.day(r,{width:"wide",context:"formatting"})||a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,a,s){return r=X6(r,a,s),r.setHours(0,0,0,0),r}}class pbe extends la{constructor(){super(...arguments);dr(this,"priority",90);dr(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(r,n,a,s){const i=l=>{const c=Math.floor((l-1)/7)*7;return(l+s.weekStartsOn+6)%7+c};switch(n){case"e":case"ee":return gi(Zs(n.length,r),i);case"eo":return gi(a.ordinalNumber(r,{unit:"day"}),i);case"eee":return a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"eeeee":return a.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"eeee":default:return a.day(r,{width:"wide",context:"formatting"})||a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,a,s){return r=X6(r,a,s),r.setHours(0,0,0,0),r}}class gbe extends la{constructor(){super(...arguments);dr(this,"priority",90);dr(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(r,n,a,s){const i=l=>{const c=Math.floor((l-1)/7)*7;return(l+s.weekStartsOn+6)%7+c};switch(n){case"c":case"cc":return gi(Zs(n.length,r),i);case"co":return gi(a.ordinalNumber(r,{unit:"day"}),i);case"ccc":return a.day(r,{width:"abbreviated",context:"standalone"})||a.day(r,{width:"short",context:"standalone"})||a.day(r,{width:"narrow",context:"standalone"});case"ccccc":return a.day(r,{width:"narrow",context:"standalone"});case"cccccc":return a.day(r,{width:"short",context:"standalone"})||a.day(r,{width:"narrow",context:"standalone"});case"cccc":default:return a.day(r,{width:"wide",context:"standalone"})||a.day(r,{width:"abbreviated",context:"standalone"})||a.day(r,{width:"short",context:"standalone"})||a.day(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=6}set(r,n,a,s){return r=X6(r,a,s),r.setHours(0,0,0,0),r}}function xbe(t,e,r){const n=Rs(t,r==null?void 0:r.in),a=Kye(n,r),s=e-a;return K6(n,s,r)}class vbe extends la{constructor(){super(...arguments);dr(this,"priority",90);dr(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(r,n,a){const s=i=>i===0?7:i;switch(n){case"i":case"ii":return Zs(n.length,r);case"io":return a.ordinalNumber(r,{unit:"day"});case"iii":return gi(a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"}),s);case"iiiii":return gi(a.day(r,{width:"narrow",context:"formatting"}),s);case"iiiiii":return gi(a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"}),s);case"iiii":default:return gi(a.day(r,{width:"wide",context:"formatting"})||a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"}),s)}}validate(r,n){return n>=1&&n<=7}set(r,n,a){return r=xbe(r,a),r.setHours(0,0,0,0),r}}class ybe extends la{constructor(){super(...arguments);dr(this,"priority",80);dr(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(r,n,a){switch(n){case"a":case"aa":case"aaa":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaaa":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})||a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,a){return r.setHours(W6(a),0,0,0),r}}class bbe extends la{constructor(){super(...arguments);dr(this,"priority",80);dr(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(r,n,a){switch(n){case"b":case"bb":case"bbb":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbbb":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})||a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,a){return r.setHours(W6(a),0,0,0),r}}class wbe extends la{constructor(){super(...arguments);dr(this,"priority",80);dr(this,"incompatibleTokens",["a","b","t","T"])}parse(r,n,a){switch(n){case"B":case"BB":case"BBB":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBBB":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})||a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,a){return r.setHours(W6(a),0,0,0),r}}class Nbe extends la{constructor(){super(...arguments);dr(this,"priority",70);dr(this,"incompatibleTokens",["H","K","k","t","T"])}parse(r,n,a){switch(n){case"h":return Bs(pi.hour12h,r);case"ho":return a.ordinalNumber(r,{unit:"hour"});default:return Zs(n.length,r)}}validate(r,n){return n>=1&&n<=12}set(r,n,a){const s=r.getHours()>=12;return s&&a<12?r.setHours(a+12,0,0,0):!s&&a===12?r.setHours(0,0,0,0):r.setHours(a,0,0,0),r}}class Cbe extends la{constructor(){super(...arguments);dr(this,"priority",70);dr(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(r,n,a){switch(n){case"H":return Bs(pi.hour23h,r);case"Ho":return a.ordinalNumber(r,{unit:"hour"});default:return Zs(n.length,r)}}validate(r,n){return n>=0&&n<=23}set(r,n,a){return r.setHours(a,0,0,0),r}}class _be extends la{constructor(){super(...arguments);dr(this,"priority",70);dr(this,"incompatibleTokens",["h","H","k","t","T"])}parse(r,n,a){switch(n){case"K":return Bs(pi.hour11h,r);case"Ko":return a.ordinalNumber(r,{unit:"hour"});default:return Zs(n.length,r)}}validate(r,n){return n>=0&&n<=11}set(r,n,a){return r.getHours()>=12&&a<12?r.setHours(a+12,0,0,0):r.setHours(a,0,0,0),r}}class Ebe extends la{constructor(){super(...arguments);dr(this,"priority",70);dr(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(r,n,a){switch(n){case"k":return Bs(pi.hour24h,r);case"ko":return a.ordinalNumber(r,{unit:"hour"});default:return Zs(n.length,r)}}validate(r,n){return n>=1&&n<=24}set(r,n,a){const s=a<=24?a%24:a;return r.setHours(s,0,0,0),r}}class Sbe extends la{constructor(){super(...arguments);dr(this,"priority",60);dr(this,"incompatibleTokens",["t","T"])}parse(r,n,a){switch(n){case"m":return Bs(pi.minute,r);case"mo":return a.ordinalNumber(r,{unit:"minute"});default:return Zs(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,a){return r.setMinutes(a,0,0),r}}class Ibe extends la{constructor(){super(...arguments);dr(this,"priority",50);dr(this,"incompatibleTokens",["t","T"])}parse(r,n,a){switch(n){case"s":return Bs(pi.second,r);case"so":return a.ordinalNumber(r,{unit:"second"});default:return Zs(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,a){return r.setSeconds(a,0),r}}class jbe extends la{constructor(){super(...arguments);dr(this,"priority",30);dr(this,"incompatibleTokens",["t","T"])}parse(r,n){const a=s=>Math.trunc(s*Math.pow(10,-n.length+3));return gi(Zs(n.length,r),a)}set(r,n,a){return r.setMilliseconds(a),r}}class Pbe extends la{constructor(){super(...arguments);dr(this,"priority",10);dr(this,"incompatibleTokens",["t","T","x"])}parse(r,n){switch(n){case"X":return _f(Cf.basicOptionalMinutes,r);case"XX":return _f(Cf.basic,r);case"XXXX":return _f(Cf.basicOptionalSeconds,r);case"XXXXX":return _f(Cf.extendedOptionalSeconds,r);case"XXX":default:return _f(Cf.extended,r)}}set(r,n,a){return n.timestampIsSet?r:Oi(r,r.getTime()-tS(r)-a)}}class Bbe extends la{constructor(){super(...arguments);dr(this,"priority",10);dr(this,"incompatibleTokens",["t","T","X"])}parse(r,n){switch(n){case"x":return _f(Cf.basicOptionalMinutes,r);case"xx":return _f(Cf.basic,r);case"xxxx":return _f(Cf.basicOptionalSeconds,r);case"xxxxx":return _f(Cf.extendedOptionalSeconds,r);case"xxx":default:return _f(Cf.extended,r)}}set(r,n,a){return n.timestampIsSet?r:Oi(r,r.getTime()-tS(r)-a)}}class Tbe extends la{constructor(){super(...arguments);dr(this,"priority",40);dr(this,"incompatibleTokens","*")}parse(r){return HZ(r)}set(r,n,a){return[Oi(r,a*1e3),{timestampIsSet:!0}]}}class kbe extends la{constructor(){super(...arguments);dr(this,"priority",20);dr(this,"incompatibleTokens","*")}parse(r){return HZ(r)}set(r,n,a){return[Oi(r,a),{timestampIsSet:!0}]}}const Fbe={G:new Jye,y:new Zye,Y:new ebe,R:new tbe,u:new rbe,Q:new nbe,q:new abe,M:new sbe,L:new ibe,w:new lbe,I:new ube,d:new Abe,D:new hbe,E:new mbe,e:new pbe,c:new gbe,i:new vbe,a:new ybe,b:new bbe,B:new wbe,h:new Nbe,H:new Cbe,K:new _be,k:new Ebe,m:new Sbe,s:new Ibe,S:new jbe,X:new Pbe,x:new Bbe,t:new Tbe,T:new kbe},Obe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Dbe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Rbe=/^'([^]*?)'?$/,Mbe=/''/g,Lbe=/\S/,Ube=/[a-zA-Z]/;function KZ(t,e,r,n){var g,x,y,b;const a=()=>Oi(r,NaN),s=Gye(),i=s.locale??DZ,l=s.firstWeekContainsDate??((x=(g=s.locale)==null?void 0:g.options)==null?void 0:x.firstWeekContainsDate)??1,c=s.weekStartsOn??((b=(y=s.locale)==null?void 0:y.options)==null?void 0:b.weekStartsOn)??0;if(!e)return t?a():Rs(r,n==null?void 0:n.in);const u={firstWeekContainsDate:l,weekStartsOn:c,locale:i},d=[new Yye(n==null?void 0:n.in,r)],f=e.match(Dbe).map(w=>{const j=w[0];if(j in PT){const I=PT[j];return I(w,i.formatLong)}return w}).join("").match(Obe),h=[];for(let w of f){QZ(w)&&BT(w,e,t),UZ(w)&&BT(w,e,t);const j=w[0],I=Fbe[j];if(I){const{incompatibleTokens:_}=I;if(Array.isArray(_)){const E=h.find(k=>_.includes(k.token)||k.token===j);if(E)throw new RangeError(`The format string mustn't contain \`${E.fullToken}\` and \`${w}\` at the same time`)}else if(I.incompatibleTokens==="*"&&h.length>0)throw new RangeError(`The format string mustn't contain \`${w}\` and any other token at the same time`);h.push({token:j,fullToken:w});const S=I.run(t,w,i.match,u);if(!S)return a();d.push(S.setter),t=S.rest}else{if(j.match(Ube))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");if(w==="''"?w="'":j==="'"&&(w=Qbe(w)),t.indexOf(w)===0)t=t.slice(w.length);else return a()}}if(t.length>0&&Lbe.test(t))return a();const A=d.map(w=>w.priority).sort((w,j)=>j-w).filter((w,j,I)=>I.indexOf(w)===j).map(w=>d.filter(j=>j.priority===w).sort((j,I)=>I.subPriority-j.subPriority)).map(w=>w[0]);let m=Rs(r,n==null?void 0:n.in);if(isNaN(+m))return a();const p={};for(const w of A){if(!w.validate(m,u))return a();const j=w.set(m,p,u);Array.isArray(j)?(m=j[0],Object.assign(p,j[1])):m=j}return m}function Qbe(t){return t.match(Rbe)[1].replace(Mbe,"'")}function qZ(t,e,r){return K6(t,-14,r)}function Vbe(t,e,r){return q1e(t,-1,r)}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var TT=function(t,e){return TT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},TT(t,e)};function ef(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");TT(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var kT=function(){return kT=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},kT.apply(this,arguments)};function Gl(t,e,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,[])).next())})}function bl(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function qN(t,e,r){if(arguments.length===2)for(var n=0,a=e.length,s;n<a;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||e)}var JA=function(){function t(e,r,n,a){this.left=e,this.top=r,this.width=n,this.height=a}return t.prototype.add=function(e,r,n,a){return new t(this.left+e,this.top+r,this.width+n,this.height+a)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),_4=function(t,e){return JA.fromClientRect(t,e.getBoundingClientRect())},Hbe=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),a=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new JA(0,0,n,a)},E4=function(t){for(var e=[],r=0,n=t.length;r<n;){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},ui=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=t[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},z7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$be=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var zN=0;zN<z7.length;zN++)$be[z7.charCodeAt(zN)]=zN;var W7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Py=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var WN=0;WN<W7.length;WN++)Py[W7.charCodeAt(WN)]=WN;var Gbe=function(t){var e=t.length*.75,r=t.length,n,a=0,s,i,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=Py[t.charCodeAt(n)],i=Py[t.charCodeAt(n+1)],l=Py[t.charCodeAt(n+2)],c=Py[t.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},Kbe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},qbe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},pp=5,Y6=11,i5=2,zbe=Y6-pp,zZ=65536>>pp,Wbe=1<<pp,o5=Wbe-1,Xbe=1024>>pp,Ybe=zZ+Xbe,Jbe=Ybe,Zbe=32,e2e=Jbe+Zbe,t2e=65536>>Y6,r2e=1<<zbe,n2e=r2e-1,X7=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},a2e=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},s2e=function(t,e){var r=Gbe(t),n=Array.isArray(r)?qbe(r):new Uint32Array(r),a=Array.isArray(r)?Kbe(r):new Uint16Array(r),s=24,i=X7(a,s/2,n[4]/2),l=n[5]===2?X7(a,(s+n[4])/2):a2e(n,Math.ceil((s+n[4])/4));return new i2e(n[0],n[1],n[2],n[3],i,l)},i2e=function(){function t(e,r,n,a,s,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>pp],r=(r<<i5)+(e&o5),this.data[r];if(e<=65535)return r=this.index[zZ+(e-55296>>pp)],r=(r<<i5)+(e&o5),this.data[r];if(e<this.highStart)return r=e2e-t2e+(e>>Y6),r=this.index[r],r+=e>>pp&n2e,r=this.index[r],r=(r<<i5)+(e&o5),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),Y7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o2e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var XN=0;XN<Y7.length;XN++)o2e[Y7.charCodeAt(XN)]=XN;var l2e="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",J7=50,c2e=1,WZ=2,XZ=3,u2e=4,d2e=5,Z7=7,YZ=8,e9=9,N0=10,FT=11,t9=12,OT=13,f2e=14,By=15,DT=16,YN=17,ey=18,A2e=19,r9=20,RT=21,ty=22,l5=23,Hg=24,Kc=25,Ty=26,ky=27,$g=28,h2e=29,Zm=30,m2e=31,JN=32,ZN=33,MT=34,LT=35,UT=36,d2=37,QT=38,W_=39,X_=40,c5=41,JZ=42,p2e=43,g2e=[9001,65288],ZZ="!",On="",eC="",VT=s2e(l2e),sA=[Zm,UT],HT=[c2e,WZ,XZ,d2e],eee=[N0,YZ],n9=[ky,Ty],x2e=HT.concat(eee),a9=[QT,W_,X_,MT,LT],v2e=[By,OT],y2e=function(t,e){e===void 0&&(e="strict");var r=[],n=[],a=[];return t.forEach(function(s,i){var l=VT.get(s);if(l>J7?(a.push(!0),l-=J7):a.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(i),r.push(DT);if(l===u2e||l===FT){if(i===0)return n.push(i),r.push(Zm);var c=r[i-1];return x2e.indexOf(c)===-1?(n.push(n[i-1]),r.push(c)):(n.push(i),r.push(Zm))}if(n.push(i),l===m2e)return r.push(e==="strict"?RT:d2);if(l===JZ||l===h2e)return r.push(Zm);if(l===p2e)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(d2):r.push(Zm);r.push(l)}),[n,r,a]},u5=function(t,e,r,n){var a=n[r];if(Array.isArray(t)?t.indexOf(a)!==-1:t===a)for(var s=r;s<=n.length;){s++;var i=n[s];if(i===e)return!0;if(i!==N0)break}if(a===N0)for(var s=r;s>0;){s--;var l=n[s];if(Array.isArray(t)?t.indexOf(l)!==-1:t===l)for(var c=r;c<=n.length;){c++;var i=n[c];if(i===e)return!0;if(i!==N0)break}if(l!==N0)break}return!1},s9=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===N0)r--;else return n}return 0},b2e=function(t,e,r,n,a){if(r[n]===0)return On;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return On;var i=s-1,l=s+1,c=e[s],u=i>=0?e[i]:0,d=e[l];if(c===WZ&&d===XZ)return On;if(HT.indexOf(c)!==-1)return ZZ;if(HT.indexOf(d)!==-1||eee.indexOf(d)!==-1)return On;if(s9(s,e)===YZ)return eC;if(VT.get(t[s])===FT||(c===JN||c===ZN)&&VT.get(t[l])===FT||c===Z7||d===Z7||c===e9||[N0,OT,By].indexOf(c)===-1&&d===e9||[YN,ey,A2e,Hg,$g].indexOf(d)!==-1||s9(s,e)===ty||u5(l5,ty,s,e)||u5([YN,ey],RT,s,e)||u5(t9,t9,s,e))return On;if(c===N0)return eC;if(c===l5||d===l5)return On;if(d===DT||c===DT)return eC;if([OT,By,RT].indexOf(d)!==-1||c===f2e||u===UT&&v2e.indexOf(c)!==-1||c===$g&&d===UT||d===r9||sA.indexOf(d)!==-1&&c===Kc||sA.indexOf(c)!==-1&&d===Kc||c===ky&&[d2,JN,ZN].indexOf(d)!==-1||[d2,JN,ZN].indexOf(c)!==-1&&d===Ty||sA.indexOf(c)!==-1&&n9.indexOf(d)!==-1||n9.indexOf(c)!==-1&&sA.indexOf(d)!==-1||[ky,Ty].indexOf(c)!==-1&&(d===Kc||[ty,By].indexOf(d)!==-1&&e[l+1]===Kc)||[ty,By].indexOf(c)!==-1&&d===Kc||c===Kc&&[Kc,$g,Hg].indexOf(d)!==-1)return On;if([Kc,$g,Hg,YN,ey].indexOf(d)!==-1)for(var f=s;f>=0;){var h=e[f];if(h===Kc)return On;if([$g,Hg].indexOf(h)!==-1)f--;else break}if([ky,Ty].indexOf(d)!==-1)for(var f=[YN,ey].indexOf(c)!==-1?i:s;f>=0;){var h=e[f];if(h===Kc)return On;if([$g,Hg].indexOf(h)!==-1)f--;else break}if(QT===c&&[QT,W_,MT,LT].indexOf(d)!==-1||[W_,MT].indexOf(c)!==-1&&[W_,X_].indexOf(d)!==-1||[X_,LT].indexOf(c)!==-1&&d===X_||a9.indexOf(c)!==-1&&[r9,Ty].indexOf(d)!==-1||a9.indexOf(d)!==-1&&c===ky||sA.indexOf(c)!==-1&&sA.indexOf(d)!==-1||c===Hg&&sA.indexOf(d)!==-1||sA.concat(Kc).indexOf(c)!==-1&&d===ty&&g2e.indexOf(t[l])===-1||sA.concat(Kc).indexOf(d)!==-1&&c===ey)return On;if(c===c5&&d===c5){for(var A=r[s],m=1;A>0&&(A--,e[A]===c5);)m++;if(m%2!==0)return On}return c===JN&&d===ZN?On:eC},w2e=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=y2e(t,e.lineBreak),n=r[0],a=r[1],s=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(a=a.map(function(l){return[Kc,Zm,JZ].indexOf(l)!==-1?d2:l}));var i=e.wordBreak==="keep-all"?s.map(function(l,c){return l&&t[c]>=19968&&t[c]<=40959}):void 0;return[n,a,i]},N2e=function(){function t(e,r,n,a){this.codePoints=e,this.required=r===ZZ,this.start=n,this.end=a}return t.prototype.slice=function(){return ui.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),C2e=function(t,e){var r=E4(t),n=w2e(r,e),a=n[0],s=n[1],i=n[2],l=r.length,c=0,u=0;return{next:function(){if(u>=l)return{done:!0,value:null};for(var d=On;u<l&&(d=b2e(r,s,a,++u,i))===On;);if(d!==On||u===l){var f=new N2e(r,d,c,u);return c=u,{value:f,done:!1}}return{done:!0,value:null}}}},_2e=1,E2e=2,bw=4,i9=8,nS=10,o9=47,lb=92,S2e=9,I2e=32,tC=34,ry=61,j2e=35,P2e=36,B2e=37,rC=39,nC=40,ny=41,T2e=95,pc=45,k2e=33,F2e=60,O2e=62,D2e=64,R2e=91,M2e=93,L2e=61,U2e=123,aC=63,Q2e=125,l9=124,V2e=126,H2e=128,c9=65533,d5=42,sp=43,$2e=44,G2e=58,K2e=59,f2=46,q2e=0,z2e=8,W2e=11,X2e=14,Y2e=31,J2e=127,ff=-1,tee=48,ree=97,nee=101,Z2e=102,ewe=117,twe=122,aee=65,see=69,iee=70,rwe=85,nwe=90,Cl=function(t){return t>=tee&&t<=57},awe=function(t){return t>=55296&&t<=57343},Gg=function(t){return Cl(t)||t>=aee&&t<=iee||t>=ree&&t<=Z2e},swe=function(t){return t>=ree&&t<=twe},iwe=function(t){return t>=aee&&t<=nwe},owe=function(t){return swe(t)||iwe(t)},lwe=function(t){return t>=H2e},sC=function(t){return t===nS||t===S2e||t===I2e},aS=function(t){return owe(t)||lwe(t)||t===T2e},u9=function(t){return aS(t)||Cl(t)||t===pc},cwe=function(t){return t>=q2e&&t<=z2e||t===W2e||t>=X2e&&t<=Y2e||t===J2e},i0=function(t,e){return t!==lb?!1:e!==nS},iC=function(t,e,r){return t===pc?aS(e)||i0(e,r):aS(t)?!0:!!(t===lb&&i0(t,e))},f5=function(t,e,r){return t===sp||t===pc?Cl(e)?!0:e===f2&&Cl(r):Cl(t===f2?e:t)},uwe=function(t){var e=0,r=1;(t[e]===sp||t[e]===pc)&&(t[e]===pc&&(r=-1),e++);for(var n=[];Cl(t[e]);)n.push(t[e++]);var a=n.length?parseInt(ui.apply(void 0,n),10):0;t[e]===f2&&e++;for(var s=[];Cl(t[e]);)s.push(t[e++]);var i=s.length,l=i?parseInt(ui.apply(void 0,s),10):0;(t[e]===see||t[e]===nee)&&e++;var c=1;(t[e]===sp||t[e]===pc)&&(t[e]===pc&&(c=-1),e++);for(var u=[];Cl(t[e]);)u.push(t[e++]);var d=u.length?parseInt(ui.apply(void 0,u),10):0;return r*(a+l*Math.pow(10,-i))*Math.pow(10,c*d)},dwe={type:2},fwe={type:3},Awe={type:4},hwe={type:13},mwe={type:8},pwe={type:21},gwe={type:9},xwe={type:10},vwe={type:11},ywe={type:12},bwe={type:14},oC={type:23},wwe={type:1},Nwe={type:25},Cwe={type:24},_we={type:26},Ewe={type:27},Swe={type:28},Iwe={type:29},jwe={type:31},$T={type:32},oee=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(E4(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==$T;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case tC:return this.consumeStringToken(tC);case j2e:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(u9(r)||i0(n,a)){var s=iC(r,n,a)?E2e:_2e,i=this.consumeName();return{type:5,value:i,flags:s}}break;case P2e:if(this.peekCodePoint(0)===ry)return this.consumeCodePoint(),hwe;break;case rC:return this.consumeStringToken(rC);case nC:return dwe;case ny:return fwe;case d5:if(this.peekCodePoint(0)===ry)return this.consumeCodePoint(),bwe;break;case sp:if(f5(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case $2e:return Awe;case pc:var l=e,c=this.peekCodePoint(0),u=this.peekCodePoint(1);if(f5(l,c,u))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(iC(l,c,u))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(c===pc&&u===O2e)return this.consumeCodePoint(),this.consumeCodePoint(),Cwe;break;case f2:if(f5(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case o9:if(this.peekCodePoint(0)===d5)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===d5&&(d=this.consumeCodePoint(),d===o9))return this.consumeToken();if(d===ff)return this.consumeToken()}break;case G2e:return _we;case K2e:return Ewe;case F2e:if(this.peekCodePoint(0)===k2e&&this.peekCodePoint(1)===pc&&this.peekCodePoint(2)===pc)return this.consumeCodePoint(),this.consumeCodePoint(),Nwe;break;case D2e:var f=this.peekCodePoint(0),h=this.peekCodePoint(1),A=this.peekCodePoint(2);if(iC(f,h,A)){var i=this.consumeName();return{type:7,value:i}}break;case R2e:return Swe;case lb:if(i0(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case M2e:return Iwe;case L2e:if(this.peekCodePoint(0)===ry)return this.consumeCodePoint(),mwe;break;case U2e:return vwe;case Q2e:return ywe;case ewe:case rwe:var m=this.peekCodePoint(0),p=this.peekCodePoint(1);return m===sp&&(Gg(p)||p===aC)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case l9:if(this.peekCodePoint(0)===ry)return this.consumeCodePoint(),gwe;if(this.peekCodePoint(0)===l9)return this.consumeCodePoint(),pwe;break;case V2e:if(this.peekCodePoint(0)===ry)return this.consumeCodePoint(),xwe;break;case ff:return $T}return sC(e)?(this.consumeWhiteSpace(),jwe):Cl(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):aS(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:ui(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();Gg(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===aC&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(ui.apply(void 0,e.map(function(c){return c===aC?tee:c})),16),s=parseInt(ui.apply(void 0,e.map(function(c){return c===aC?iee:c})),16);return{type:30,start:a,end:s}}var i=parseInt(ui.apply(void 0,e),16);if(this.peekCodePoint(0)===pc&&Gg(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var l=[];Gg(r)&&l.length<6;)l.push(r),r=this.consumeCodePoint();var s=parseInt(ui.apply(void 0,l),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===nC?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===nC?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===ff)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===rC||r===tC){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===ff||this.peekCodePoint(0)===ny)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),oC)}for(;;){var a=this.consumeCodePoint();if(a===ff||a===ny)return{type:22,value:ui.apply(void 0,e)};if(sC(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===ff||this.peekCodePoint(0)===ny?(this.consumeCodePoint(),{type:22,value:ui.apply(void 0,e)}):(this.consumeBadUrlRemnants(),oC);if(a===tC||a===rC||a===nC||cwe(a))return this.consumeBadUrlRemnants(),oC;if(a===lb)if(i0(a,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),oC;else e.push(a)}},t.prototype.consumeWhiteSpace=function(){for(;sC(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===ny||e===ff)return;i0(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var a=Math.min(r,e);n+=ui.apply(void 0,this._value.splice(0,a)),e-=a}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var a=this._value[n];if(a===ff||a===void 0||a===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===nS)return this._value.splice(0,n),wwe;if(a===lb){var s=this._value[n+1];s!==ff&&s!==void 0&&(s===nS?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):i0(a,s)&&(r+=this.consumeStringSlice(n),r+=ui(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=bw,n=this.peekCodePoint(0);for((n===sp||n===pc)&&e.push(this.consumeCodePoint());Cl(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===f2&&Cl(a))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=i9;Cl(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===see||n===nee)&&((a===sp||a===pc)&&Cl(s)||Cl(a)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=i9;Cl(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[uwe(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(iC(a,s,i)){var l=this.consumeName();return{type:15,number:r,flags:n,unit:l}}return a===B2e?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Gg(e)){for(var r=ui(e);Gg(this.peekCodePoint(0))&&r.length<6;)r+=ui(this.consumeCodePoint());sC(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||awe(n)||n>1114111?c9:n}return e===ff?c9:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(u9(r))e+=ui(r);else if(i0(r,this.peekCodePoint(0)))e+=ui(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),lee=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new oee;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||Bwe(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?$T:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),ww=function(t){return t.type===15},r1=function(t){return t.type===17},Pa=function(t){return t.type===20},Pwe=function(t){return t.type===0},GT=function(t,e){return Pa(t)&&t.value===e},cee=function(t){return t.type!==31},_v=function(t){return t.type!==31&&t.type!==4},Kf=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},Bwe=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},nm=function(t){return t.type===17||t.type===15},ji=function(t){return t.type===16||nm(t)},uee=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},el={type:17,number:0,flags:bw},J6={type:16,number:50,flags:bw},C0={type:16,number:100,flags:bw},Fy=function(t,e,r){var n=t[0],a=t[1];return[Ha(n,e),Ha(typeof a<"u"?a:n,r)]},Ha=function(t,e){if(t.type===16)return t.number/100*e;if(ww(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},dee="deg",fee="grad",Aee="rad",hee="turn",S4={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case dee:return Math.PI*e.number/180;case fee:return Math.PI/200*e.number;case Aee:return e.number;case hee:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},mee=function(t){return t.type===15&&(t.unit===dee||t.unit===fee||t.unit===Aee||t.unit===hee)},pee=function(t){var e=t.filter(Pa).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[el,el];case"to top":case"bottom":return qu(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[el,C0];case"to right":case"left":return qu(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[C0,C0];case"to bottom":case"top":return qu(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[C0,el];case"to left":case"right":return qu(270)}return 0},qu=function(t){return Math.PI*t/180},V0={name:"color",parse:function(t,e){if(e.type===18){var r=Twe[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),a=e.value.substring(1,2),s=e.value.substring(2,3);return _0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),a=e.value.substring(1,2),s=e.value.substring(2,3),i=e.value.substring(3,4);return _0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),a=e.value.substring(2,4),s=e.value.substring(4,6);return _0(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),a=e.value.substring(2,4),s=e.value.substring(4,6),i=e.value.substring(6,8);return _0(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(i,16)/255)}}if(e.type===20){var l=MA[e.value.toUpperCase()];if(typeof l<"u")return l}return MA.TRANSPARENT}},H0=function(t){return(255&t)===0},ho=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,a=255&t>>24;return e<255?"rgba("+a+","+n+","+r+","+e/255+")":"rgb("+a+","+n+","+r+")"},_0=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},d9=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},f9=function(t,e){var r=e.filter(_v);if(r.length===3){var n=r.map(d9),a=n[0],s=n[1],i=n[2];return _0(a,s,i,1)}if(r.length===4){var l=r.map(d9),a=l[0],s=l[1],i=l[2],c=l[3];return _0(a,s,i,c)}return 0};function A5(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var A9=function(t,e){var r=e.filter(_v),n=r[0],a=r[1],s=r[2],i=r[3],l=(n.type===17?qu(n.number):S4.parse(t,n))/(Math.PI*2),c=ji(a)?a.number/100:0,u=ji(s)?s.number/100:0,d=typeof i<"u"&&ji(i)?Ha(i,1):1;if(c===0)return _0(u*255,u*255,u*255,1);var f=u<=.5?u*(c+1):u+c-u*c,h=u*2-f,A=A5(h,f,l+1/3),m=A5(h,f,l),p=A5(h,f,l-1/3);return _0(A*255,m*255,p*255,d)},Twe={hsl:A9,hsla:A9,rgb:f9,rgba:f9},cb=function(t,e){return V0.parse(t,lee.create(e).parseComponentValue())},MA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},kwe={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Pa(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Fwe={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},I4=function(t,e){var r=V0.parse(t,e[0]),n=e[1];return n&&ji(n)?{color:r,stop:n}:{color:r,stop:null}},h9=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=el),n.stop===null&&(n.stop=C0);for(var a=[],s=0,i=0;i<t.length;i++){var l=t[i].stop;if(l!==null){var c=Ha(l,e);c>s?a.push(c):a.push(s),s=c}else a.push(null)}for(var u=null,i=0;i<a.length;i++){var d=a[i];if(d===null)u===null&&(u=i);else if(u!==null){for(var f=i-u,h=a[u-1],A=(d-h)/(f+1),m=1;m<=f;m++)a[u+m-1]=A*m;u=null}}return t.map(function(p,g){var x=p.color;return{color:x,stop:Math.max(Math.min(1,a[g]/e),0)}})},Owe=function(t,e,r){var n=e/2,a=r/2,s=Ha(t[0],e)-n,i=a-Ha(t[1],r);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},Dwe=function(t,e,r){var n=typeof t=="number"?t:Owe(t,e,r),a=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),s=e/2,i=r/2,l=a/2,c=Math.sin(n-Math.PI/2)*l,u=Math.cos(n-Math.PI/2)*l;return[a,s-u,s+u,i-c,i+c]},Sd=function(t,e){return Math.sqrt(t*t+e*e)},m9=function(t,e,r,n,a){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(i,l){var c=l[0],u=l[1],d=Sd(r-c,n-u);return(a?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:l,optimumDistance:d}:i},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},Rwe=function(t,e,r,n,a){var s=0,i=0;switch(t.size){case 0:t.shape===0?s=i=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-n)),i=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(t.shape===0)s=i=Math.min(Sd(e,r),Sd(e,r-a),Sd(e-n,r),Sd(e-n,r-a));else if(t.shape===1){var l=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(e),Math.abs(e-n)),c=m9(n,a,e,r,!0),u=c[0],d=c[1];s=Sd(u-e,(d-r)/l),i=l*s}break;case 1:t.shape===0?s=i=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-n)),i=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(t.shape===0)s=i=Math.max(Sd(e,r),Sd(e,r-a),Sd(e-n,r),Sd(e-n,r-a));else if(t.shape===1){var l=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(e),Math.abs(e-n)),f=m9(n,a,e,r,!1),u=f[0],d=f[1];s=Sd(u-e,(d-r)/l),i=l*s}break}return Array.isArray(t.size)&&(s=Ha(t.size[0],n),i=t.size.length===2?Ha(t.size[1],a):s),[s,i]},Mwe=function(t,e){var r=qu(180),n=[];return Kf(e).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&i.value==="to"){r=pee(a);return}else if(mee(i)){r=S4.parse(t,i);return}}var l=I4(t,a);n.push(l)}),{angle:r,stops:n,type:1}},lC=function(t,e){var r=qu(180),n=[];return Kf(e).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=pee(a);return}else if(mee(i)){r=(S4.parse(t,i)+qu(270))%qu(360);return}}var l=I4(t,a);n.push(l)}),{angle:r,stops:n,type:1}},Lwe=function(t,e){var r=qu(180),n=[],a=1,s=0,i=3,l=[];return Kf(e).forEach(function(c,u){var d=c[0];if(u===0){if(Pa(d)&&d.value==="linear"){a=1;return}else if(Pa(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var f=V0.parse(t,d.values[0]);n.push({stop:el,color:f})}else if(d.name==="to"){var f=V0.parse(t,d.values[0]);n.push({stop:C0,color:f})}else if(d.name==="color-stop"){var h=d.values.filter(_v);if(h.length===2){var f=V0.parse(t,h[1]),A=h[0];r1(A)&&n.push({stop:{type:16,number:A.number*100,flags:A.flags},color:f})}}}}),a===1?{angle:(r+qu(180))%qu(360),stops:n,type:a}:{size:i,shape:s,stops:n,position:l,type:a}},gee="closest-side",xee="farthest-side",vee="closest-corner",yee="farthest-corner",bee="circle",wee="ellipse",Nee="cover",Cee="contain",Uwe=function(t,e){var r=0,n=3,a=[],s=[];return Kf(e).forEach(function(i,l){var c=!0;if(l===0){var u=!1;c=i.reduce(function(f,h){if(u)if(Pa(h))switch(h.value){case"center":return s.push(J6),f;case"top":case"left":return s.push(el),f;case"right":case"bottom":return s.push(C0),f}else(ji(h)||nm(h))&&s.push(h);else if(Pa(h))switch(h.value){case bee:return r=0,!1;case wee:return r=1,!1;case"at":return u=!0,!1;case gee:return n=0,!1;case Nee:case xee:return n=1,!1;case Cee:case vee:return n=2,!1;case yee:return n=3,!1}else if(nm(h)||ji(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return f},c)}if(c){var d=I4(t,i);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},cC=function(t,e){var r=0,n=3,a=[],s=[];return Kf(e).forEach(function(i,l){var c=!0;if(l===0?c=i.reduce(function(d,f){if(Pa(f))switch(f.value){case"center":return s.push(J6),!1;case"top":case"left":return s.push(el),!1;case"right":case"bottom":return s.push(C0),!1}else if(ji(f)||nm(f))return s.push(f),!1;return d},c):l===1&&(c=i.reduce(function(d,f){if(Pa(f))switch(f.value){case bee:return r=0,!1;case wee:return r=1,!1;case Cee:case gee:return n=0,!1;case xee:return n=1,!1;case vee:return n=2,!1;case Nee:case yee:return n=3,!1}else if(nm(f)||ji(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return d},c)),c){var u=I4(t,i);a.push(u)}}),{size:n,shape:r,stops:a,position:s,type:2}},Qwe=function(t){return t.type===1},Vwe=function(t){return t.type===2},Z6={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=_ee[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function Hwe(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!_ee[t.name])}var _ee={"linear-gradient":Mwe,"-moz-linear-gradient":lC,"-ms-linear-gradient":lC,"-o-linear-gradient":lC,"-webkit-linear-gradient":lC,"radial-gradient":Uwe,"-moz-radial-gradient":cC,"-ms-radial-gradient":cC,"-o-radial-gradient":cC,"-webkit-radial-gradient":cC,"-webkit-gradient":Lwe},$we={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return _v(n)&&Hwe(n)}).map(function(n){return Z6.parse(t,n)})}},Gwe={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Pa(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Kwe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return Kf(e).map(function(r){return r.filter(ji)}).map(uee)}},qwe={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return Kf(e).map(function(r){return r.filter(Pa).map(function(n){return n.value}).join(" ")}).map(zwe)}},zwe=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},tv;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(tv||(tv={}));var Wwe={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return Kf(e).map(function(r){return r.filter(Xwe)})}},Xwe=function(t){return Pa(t)||ji(t)},j4=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Ywe=j4("top"),Jwe=j4("right"),Zwe=j4("bottom"),eNe=j4("left"),P4=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return uee(r.filter(ji))}}},tNe=P4("top-left"),rNe=P4("top-right"),nNe=P4("bottom-right"),aNe=P4("bottom-left"),B4=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},sNe=B4("top"),iNe=B4("right"),oNe=B4("bottom"),lNe=B4("left"),T4=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return ww(r)?r.number:0}}},cNe=T4("top"),uNe=T4("right"),dNe=T4("bottom"),fNe=T4("left"),ANe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},hNe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},mNe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Pa).reduce(function(r,n){return r|pNe(n.value)},0)}},pNe=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},gNe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},xNe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},sS;(function(t){t.NORMAL="normal",t.STRICT="strict"})(sS||(sS={}));var vNe={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return sS.STRICT;case"normal":default:return sS.NORMAL}}},yNe={name:"line-height",initialValue:"normal",prefix:!1,type:4},p9=function(t,e){return Pa(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:ji(t)?Ha(t,e):e},bNe={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:Z6.parse(t,e)}},wNe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},KT={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},k4=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},NNe=k4("top"),CNe=k4("right"),_Ne=k4("bottom"),ENe=k4("left"),SNe={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Pa).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},INe={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},F4=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},jNe=F4("top"),PNe=F4("right"),BNe=F4("bottom"),TNe=F4("left"),kNe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},FNe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},ONe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&GT(e[0],"none")?[]:Kf(e).map(function(r){for(var n={color:MA.TRANSPARENT,offsetX:el,offsetY:el,blur:el},a=0,s=0;s<r.length;s++){var i=r[s];nm(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:n.blur=i,a++):n.color=V0.parse(t,i)}return n})}},DNe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},RNe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=UNe[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},MNe=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},LNe=function(t){var e=t.filter(function(c){return c.type===17}).map(function(c){return c.number}),r=e[0],n=e[1];e[2],e[3];var a=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],l=e[13];return e[14],e[15],e.length===16?[r,n,a,s,i,l]:null},UNe={matrix:MNe,matrix3d:LNe},g9={type:16,number:50,flags:bw},QNe=[g9,g9],VNe={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(ji);return r.length!==2?QNe:[r[0],r[1]]}},HNe={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},ub;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(ub||(ub={}));var $Ne={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return ub.BREAK_ALL;case"keep-all":return ub.KEEP_ALL;case"normal":default:return ub.NORMAL}}},GNe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(r1(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},Eee={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},KNe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return r1(e)?e.number:1}},qNe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},zNe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Pa).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},WNe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},XNe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},YNe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(r1(e))return e.number;if(Pa(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},JNe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Pa).map(function(r){return r.value})}},ZNe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Xi=function(t,e){return(t&e)!==0},eCe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},tCe={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=e.filter(cee),s=0;s<a.length;s++){var i=a[s],l=a[s+1];if(i.type===20){var c=l&&r1(l)?l.number:1;n.push({counter:i.value,increment:c})}}return n}},rCe={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(cee),a=0;a<n.length;a++){var s=n[a],i=n[a+1];if(Pa(s)&&s.value!=="none"){var l=i&&r1(i)?i.number:0;r.push({counter:s.value,reset:l})}}return r}},nCe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(ww).map(function(r){return Eee.parse(t,r)})}},aCe={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],a=e.filter(Pwe);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var i=a[s].value,l=a[s+1].value;n.push({open:i,close:l})}return n}},x9=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},sCe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&GT(e[0],"none")?[]:Kf(e).map(function(r){for(var n={color:255,offsetX:el,offsetY:el,blur:el,spread:el,inset:!1},a=0,s=0;s<r.length;s++){var i=r[s];GT(i,"inset")?n.inset=!0:nm(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:a===2?n.blur=i:n.spread=i,a++):n.color=V0.parse(t,i)}return n})}},iCe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(Pa).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},oCe={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},lCe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return ww(e)?e.number:0}},cCe=function(){function t(e,r){var n,a;this.animationDuration=jr(e,nCe,r.animationDuration),this.backgroundClip=jr(e,kwe,r.backgroundClip),this.backgroundColor=jr(e,Fwe,r.backgroundColor),this.backgroundImage=jr(e,$we,r.backgroundImage),this.backgroundOrigin=jr(e,Gwe,r.backgroundOrigin),this.backgroundPosition=jr(e,Kwe,r.backgroundPosition),this.backgroundRepeat=jr(e,qwe,r.backgroundRepeat),this.backgroundSize=jr(e,Wwe,r.backgroundSize),this.borderTopColor=jr(e,Ywe,r.borderTopColor),this.borderRightColor=jr(e,Jwe,r.borderRightColor),this.borderBottomColor=jr(e,Zwe,r.borderBottomColor),this.borderLeftColor=jr(e,eNe,r.borderLeftColor),this.borderTopLeftRadius=jr(e,tNe,r.borderTopLeftRadius),this.borderTopRightRadius=jr(e,rNe,r.borderTopRightRadius),this.borderBottomRightRadius=jr(e,nNe,r.borderBottomRightRadius),this.borderBottomLeftRadius=jr(e,aNe,r.borderBottomLeftRadius),this.borderTopStyle=jr(e,sNe,r.borderTopStyle),this.borderRightStyle=jr(e,iNe,r.borderRightStyle),this.borderBottomStyle=jr(e,oNe,r.borderBottomStyle),this.borderLeftStyle=jr(e,lNe,r.borderLeftStyle),this.borderTopWidth=jr(e,cNe,r.borderTopWidth),this.borderRightWidth=jr(e,uNe,r.borderRightWidth),this.borderBottomWidth=jr(e,dNe,r.borderBottomWidth),this.borderLeftWidth=jr(e,fNe,r.borderLeftWidth),this.boxShadow=jr(e,sCe,r.boxShadow),this.color=jr(e,ANe,r.color),this.direction=jr(e,hNe,r.direction),this.display=jr(e,mNe,r.display),this.float=jr(e,gNe,r.cssFloat),this.fontFamily=jr(e,WNe,r.fontFamily),this.fontSize=jr(e,XNe,r.fontSize),this.fontStyle=jr(e,ZNe,r.fontStyle),this.fontVariant=jr(e,JNe,r.fontVariant),this.fontWeight=jr(e,YNe,r.fontWeight),this.letterSpacing=jr(e,xNe,r.letterSpacing),this.lineBreak=jr(e,vNe,r.lineBreak),this.lineHeight=jr(e,yNe,r.lineHeight),this.listStyleImage=jr(e,bNe,r.listStyleImage),this.listStylePosition=jr(e,wNe,r.listStylePosition),this.listStyleType=jr(e,KT,r.listStyleType),this.marginTop=jr(e,NNe,r.marginTop),this.marginRight=jr(e,CNe,r.marginRight),this.marginBottom=jr(e,_Ne,r.marginBottom),this.marginLeft=jr(e,ENe,r.marginLeft),this.opacity=jr(e,KNe,r.opacity);var s=jr(e,SNe,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=jr(e,INe,r.overflowWrap),this.paddingTop=jr(e,jNe,r.paddingTop),this.paddingRight=jr(e,PNe,r.paddingRight),this.paddingBottom=jr(e,BNe,r.paddingBottom),this.paddingLeft=jr(e,TNe,r.paddingLeft),this.paintOrder=jr(e,iCe,r.paintOrder),this.position=jr(e,FNe,r.position),this.textAlign=jr(e,kNe,r.textAlign),this.textDecorationColor=jr(e,qNe,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=jr(e,zNe,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=jr(e,ONe,r.textShadow),this.textTransform=jr(e,DNe,r.textTransform),this.transform=jr(e,RNe,r.transform),this.transformOrigin=jr(e,VNe,r.transformOrigin),this.visibility=jr(e,HNe,r.visibility),this.webkitTextStrokeColor=jr(e,oCe,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=jr(e,lCe,r.webkitTextStrokeWidth),this.wordBreak=jr(e,$Ne,r.wordBreak),this.zIndex=jr(e,GNe,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return H0(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Xi(this.display,4)||Xi(this.display,33554432)||Xi(this.display,268435456)||Xi(this.display,536870912)||Xi(this.display,67108864)||Xi(this.display,134217728)},t}(),uCe=function(){function t(e,r){this.content=jr(e,eCe,r.content),this.quotes=jr(e,aCe,r.quotes)}return t}(),v9=function(){function t(e,r){this.counterIncrement=jr(e,tCe,r.counterIncrement),this.counterReset=jr(e,rCe,r.counterReset)}return t}(),jr=function(t,e,r){var n=new oee,a=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(a);var s=new lee(n.read());switch(e.type){case 2:var i=s.parseComponentValue();return e.parse(t,Pa(i)?i.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return S4.parse(t,s.parseComponentValue());case"color":return V0.parse(t,s.parseComponentValue());case"image":return Z6.parse(t,s.parseComponentValue());case"length":var l=s.parseComponentValue();return nm(l)?l:el;case"length-percentage":var c=s.parseComponentValue();return ji(c)?c:el;case"time":return Eee.parse(t,s.parseComponentValue())}break}},dCe="data-html2canvas-debug",fCe=function(t){var e=t.getAttribute(dCe);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},qT=function(t,e){var r=fCe(t);return r===1||e===r},qf=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,qT(r,3))debugger;this.styles=new cCe(e,window.getComputedStyle(r,null)),XT(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=_4(this.context,r),qT(r,4)&&(this.flags|=16)}return t}(),ACe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",y9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Oy=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var uC=0;uC<y9.length;uC++)Oy[y9.charCodeAt(uC)]=uC;var hCe=function(t){var e=t.length*.75,r=t.length,n,a=0,s,i,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=Oy[t.charCodeAt(n)],i=Oy[t.charCodeAt(n+1)],l=Oy[t.charCodeAt(n+2)],c=Oy[t.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},mCe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},pCe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},gp=5,eD=11,h5=2,gCe=eD-gp,See=65536>>gp,xCe=1<<gp,m5=xCe-1,vCe=1024>>gp,yCe=See+vCe,bCe=yCe,wCe=32,NCe=bCe+wCe,CCe=65536>>eD,_Ce=1<<gCe,ECe=_Ce-1,b9=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},SCe=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},ICe=function(t,e){var r=hCe(t),n=Array.isArray(r)?pCe(r):new Uint32Array(r),a=Array.isArray(r)?mCe(r):new Uint16Array(r),s=24,i=b9(a,s/2,n[4]/2),l=n[5]===2?b9(a,(s+n[4])/2):SCe(n,Math.ceil((s+n[4])/4));return new jCe(n[0],n[1],n[2],n[3],i,l)},jCe=function(){function t(e,r,n,a,s,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>gp],r=(r<<h5)+(e&m5),this.data[r];if(e<=65535)return r=this.index[See+(e-55296>>gp)],r=(r<<h5)+(e&m5),this.data[r];if(e<this.highStart)return r=NCe-CCe+(e>>eD),r=this.index[r],r+=e>>gp&ECe,r=this.index[r],r=(r<<h5)+(e&m5),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),w9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",PCe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var dC=0;dC<w9.length;dC++)PCe[w9.charCodeAt(dC)]=dC;var BCe=1,p5=2,g5=3,N9=4,C9=5,TCe=7,_9=8,x5=9,v5=10,E9=11,S9=12,I9=13,j9=14,y5=15,kCe=function(t){for(var e=[],r=0,n=t.length;r<n;){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},FCe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=t[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},OCe=ICe(ACe),Lu="",b5="",DCe=function(t){return OCe.get(t)},RCe=function(t,e,r){var n=r-2,a=e[n],s=e[r-1],i=e[r];if(s===p5&&i===g5)return Lu;if(s===p5||s===g5||s===N9||i===p5||i===g5||i===N9)return b5;if(s===_9&&[_9,x5,E9,S9].indexOf(i)!==-1||(s===E9||s===x5)&&(i===x5||i===v5)||(s===S9||s===v5)&&i===v5||i===I9||i===C9||i===TCe||s===BCe)return Lu;if(s===I9&&i===j9){for(;a===C9;)a=e[--n];if(a===j9)return Lu}if(s===y5&&i===y5){for(var l=0;a===y5;)l++,a=e[--n];if(l%2===0)return Lu}return b5},MCe=function(t){var e=kCe(t),r=e.length,n=0,a=0,s=e.map(DCe);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=Lu;n<r&&(i=RCe(e,s,++n))===Lu;);if(i!==Lu||n===r){var l=FCe.apply(null,e.slice(a,n));return a=n,{value:l,done:!1}}return{done:!0,value:null}}}},LCe=function(t){for(var e=MCe(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},UCe=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(t.body.removeChild(n),s===e)return!0}}return!1},QCe=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,a=E4(n.data).map(function(c){return ui(c)}),s=0,i={},l=a.every(function(c,u){r.setStart(n,s),r.setEnd(n,s+c.length);var d=r.getBoundingClientRect();s+=c.length;var f=d.x>i.x||d.y>i.y;return i=d,u===0?!0:f});return t.body.removeChild(e),l},VCe=function(){return typeof new Image().crossOrigin<"u"},HCe=function(){return typeof new XMLHttpRequest().responseType=="string"},$Ce=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},P9=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},GCe=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=e.toDataURL();a.src=s;var i=zT(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),B9(i).then(function(l){n.drawImage(l,0,0);var c=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=t.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",P9(c)?B9(zT(r,r,0,0,u)):Promise.reject(!1)}).then(function(l){return n.drawImage(l,0,0),P9(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},zT=function(t,e,r,n,a){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",r.toString()),l.setAttributeNS(null,"y",n.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(l),l.appendChild(a),i},B9=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},zo={get SUPPORT_RANGE_BOUNDS(){var t=UCe(document);return Object.defineProperty(zo,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=zo.SUPPORT_RANGE_BOUNDS&&QCe(document);return Object.defineProperty(zo,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=$Ce(document);return Object.defineProperty(zo,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?GCe(document):Promise.resolve(!1);return Object.defineProperty(zo,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=VCe();return Object.defineProperty(zo,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=HCe();return Object.defineProperty(zo,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(zo,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(zo,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},db=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),KCe=function(t,e,r,n){var a=WCe(e,r),s=[],i=0;return a.forEach(function(l){if(r.textDecorationLine.length||l.trim().length>0)if(zo.SUPPORT_RANGE_BOUNDS){var c=T9(n,i,l.length).getClientRects();if(c.length>1){var u=tD(l),d=0;u.forEach(function(h){s.push(new db(h,JA.fromDOMRectList(t,T9(n,d+i,h.length).getClientRects()))),d+=h.length})}else s.push(new db(l,JA.fromDOMRectList(t,c)))}else{var f=n.splitText(l.length);s.push(new db(l,qCe(t,n))),n=f}else zo.SUPPORT_RANGE_BOUNDS||(n=n.splitText(l.length));i+=l.length}),s},qCe=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var a=e.parentNode;if(a){a.replaceChild(n,e);var s=_4(t,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return JA.EMPTY},T9=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(t,e),a.setEnd(t,e+r),a},tD=function(t){if(zo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return LCe(t)},zCe=function(t,e){if(zo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return YCe(t,e)},WCe=function(t,e){return e.letterSpacing!==0?tD(t):zCe(t,e)},XCe=[32,160,4961,65792,65793,4153,4241],YCe=function(t,e){for(var r=C2e(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],a,s=function(){if(a.value){var i=a.value.slice(),l=E4(i),c="";l.forEach(function(u){XCe.indexOf(u)===-1?c+=ui(u):(c.length&&n.push(c),n.push(ui(u)),c="")}),c.length&&n.push(c)}};!(a=r.next()).done;)s();return n},JCe=function(){function t(e,r,n){this.text=ZCe(r.data,n.textTransform),this.textBounds=KCe(e,this.text,n,r)}return t}(),ZCe=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(e_e,t_e);case 2:return t.toUpperCase();default:return t}},e_e=/(^|\s|:|-|\(|\))([a-z])/g,t_e=function(t,e,r){return t.length>0?e+r.toUpperCase():t},Iee=function(t){ef(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return e}(qf),jee=function(t){ef(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return e}(qf),Pee=function(t){ef(e,t);function e(r,n){var a=t.call(this,r,n)||this,s=new XMLSerializer,i=_4(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return e}(qf),Bee=function(t){ef(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.value=n.value,a}return e}(qf),WT=function(t){ef(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return e}(qf),r_e=[{type:15,flags:0,unit:"px",number:3}],n_e=[{type:16,flags:0,number:50}],a_e=function(t){return t.width>t.height?new JA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new JA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},s_e=function(t){var e=t.type===i_e?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},iS="checkbox",oS="radio",i_e="password",k9=707406591,rD=function(t){ef(e,t);function e(r,n){var a=t.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=s_e(n),(a.type===iS||a.type===oS)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=a_e(a.bounds)),a.type){case iS:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=r_e;break;case oS:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=n_e;break}return a}return e}(qf),Tee=function(t){ef(e,t);function e(r,n){var a=t.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return e}(qf),kee=function(t){ef(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.value=n.value,a}return e}(qf),Fee=function(t){ef(e,t);function e(r,n){var a=t.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=Dee(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?cb(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):MA.TRANSPARENT,i=n.contentWindow.document.body?cb(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):MA.TRANSPARENT;a.backgroundColor=H0(s)?H0(i)?a.styles.backgroundColor:i:s}}catch{}return a}return e}(qf),o_e=["OL","UL","MENU"],Y_=function(t,e,r,n){for(var a=e.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,Ree(a)&&a.data.trim().length>0)r.textNodes.push(new JCe(t,a,r.styles));else if(Rx(a))if(Qee(a)&&a.assignedNodes)a.assignedNodes().forEach(function(l){return Y_(t,l,r,n)});else{var i=Oee(t,a);i.styles.isVisible()&&(l_e(a,i,n)?i.flags|=4:c_e(i.styles)&&(i.flags|=2),o_e.indexOf(a.tagName)!==-1&&(i.flags|=8),r.elements.push(i),a.slot,a.shadowRoot?Y_(t,a.shadowRoot,i,n):!lS(a)&&!Mee(a)&&!cS(a)&&Y_(t,a,i,n))}},Oee=function(t,e){return YT(e)?new Iee(t,e):Lee(e)?new jee(t,e):Mee(e)?new Pee(t,e):u_e(e)?new Bee(t,e):d_e(e)?new WT(t,e):f_e(e)?new rD(t,e):cS(e)?new Tee(t,e):lS(e)?new kee(t,e):Uee(e)?new Fee(t,e):new qf(t,e)},Dee=function(t,e){var r=Oee(t,e);return r.flags|=4,Y_(t,e,r,r),r},l_e=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||nD(t)&&r.styles.isTransparent()},c_e=function(t){return t.isPositioned()||t.isFloating()},Ree=function(t){return t.nodeType===Node.TEXT_NODE},Rx=function(t){return t.nodeType===Node.ELEMENT_NODE},XT=function(t){return Rx(t)&&typeof t.style<"u"&&!J_(t)},J_=function(t){return typeof t.className=="object"},u_e=function(t){return t.tagName==="LI"},d_e=function(t){return t.tagName==="OL"},f_e=function(t){return t.tagName==="INPUT"},A_e=function(t){return t.tagName==="HTML"},Mee=function(t){return t.tagName==="svg"},nD=function(t){return t.tagName==="BODY"},Lee=function(t){return t.tagName==="CANVAS"},F9=function(t){return t.tagName==="VIDEO"},YT=function(t){return t.tagName==="IMG"},Uee=function(t){return t.tagName==="IFRAME"},O9=function(t){return t.tagName==="STYLE"},h_e=function(t){return t.tagName==="SCRIPT"},lS=function(t){return t.tagName==="TEXTAREA"},cS=function(t){return t.tagName==="SELECT"},Qee=function(t){return t.tagName==="SLOT"},D9=function(t){return t.tagName.indexOf("-")>0},m_e=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,a=e.counterReset,s=!0;n!==null&&n.forEach(function(l){var c=r.counters[l.counter];c&&l.increment!==0&&(s=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=l.increment)});var i=[];return s&&a.forEach(function(l){var c=r.counters[l.counter];i.push(l.counter),c||(c=r.counters[l.counter]=[]),c.push(l.reset)}),i},t}(),R9={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},M9={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},p_e={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},g_e={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Kg=function(t,e,r,n,a,s){return t<e||t>r?A2(t,a,s.length>0):n.integers.reduce(function(i,l,c){for(;t>=l;)t-=l,i+=n.values[c];return i},"")+s},Vee=function(t,e,r,n){var a="";do r||t--,a=n(t)+a,t/=e;while(t*e>=e);return a},ii=function(t,e,r,n,a){var s=r-e+1;return(t<0?"-":"")+(Vee(Math.abs(t),s,n,function(i){return ui(Math.floor(i%s)+e)})+a)},Tm=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return Vee(Math.abs(t),n,!1,function(a){return e[Math.floor(a%n)]})+r},px=1,r0=2,n0=4,Dy=8,iA=function(t,e,r,n,a,s){if(t<-9999||t>9999)return A2(t,4,a.length>0);var i=Math.abs(t),l=a;if(i===0)return e[0]+l;for(var c=0;i>0&&c<=4;c++){var u=i%10;u===0&&Xi(s,px)&&l!==""?l=e[u]+l:u>1||u===1&&c===0||u===1&&c===1&&Xi(s,r0)||u===1&&c===1&&Xi(s,n0)&&t>100||u===1&&c>1&&Xi(s,Dy)?l=e[u]+(c>0?r[c-1]:"")+l:u===1&&c>0&&(l=r[c-1]+l),i=Math.floor(i/10)}return(t<0?n:"")+l},L9="",U9="",Q9="",w5="",A2=function(t,e,r){var n=r?". ":"",a=r?"":"",s=r?", ":"",i=r?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var l=ii(t,48,57,!0,n);return l.length<4?"0"+l:l;case 4:return Tm(t,"",a);case 6:return Kg(t,1,3999,R9,3,n).toLowerCase();case 7:return Kg(t,1,3999,R9,3,n);case 8:return ii(t,945,969,!1,n);case 9:return ii(t,97,122,!1,n);case 10:return ii(t,65,90,!1,n);case 11:return ii(t,1632,1641,!0,n);case 12:case 49:return Kg(t,1,9999,M9,3,n);case 35:return Kg(t,1,9999,M9,3,n).toLowerCase();case 13:return ii(t,2534,2543,!0,n);case 14:case 30:return ii(t,6112,6121,!0,n);case 15:return Tm(t,"",a);case 16:return Tm(t,"",a);case 17:case 48:return iA(t,"",L9,"",a,r0|n0|Dy);case 47:return iA(t,"",U9,"",a,px|r0|n0|Dy);case 42:return iA(t,"",L9,"",a,r0|n0|Dy);case 41:return iA(t,"",U9,"",a,px|r0|n0|Dy);case 26:return iA(t,"","",Q9,a,0);case 25:return iA(t,"","",Q9,a,px|r0|n0);case 31:return iA(t,"","",w5,s,px|r0|n0);case 33:return iA(t,"","",w5,s,0);case 32:return iA(t,"","",w5,s,px|r0|n0);case 18:return ii(t,2406,2415,!0,n);case 20:return Kg(t,1,19999,g_e,3,n);case 21:return ii(t,2790,2799,!0,n);case 22:return ii(t,2662,2671,!0,n);case 22:return Kg(t,1,10999,p_e,3,n);case 23:return Tm(t,"");case 24:return Tm(t,"");case 27:return ii(t,3302,3311,!0,n);case 28:return Tm(t,"",a);case 29:return Tm(t,"",a);case 34:return ii(t,3792,3801,!0,n);case 37:return ii(t,6160,6169,!0,n);case 38:return ii(t,4160,4169,!0,n);case 39:return ii(t,2918,2927,!0,n);case 40:return ii(t,1776,1785,!0,n);case 43:return ii(t,3046,3055,!0,n);case 44:return ii(t,3174,3183,!0,n);case 45:return ii(t,3664,3673,!0,n);case 46:return ii(t,3872,3881,!0,n);case 3:default:return ii(t,48,57,!0,n)}},Hee="data-html2canvas-ignore",V9=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new m_e,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,a=x_e(e,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,l=a.contentWindow,c=l.document,u=b_e(a).then(function(){return Gl(n,void 0,void 0,function(){var d,f;return bl(this,function(h){switch(h.label){case 0:return this.scrolledElements.forEach(__e),l&&(l.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==r.top||l.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-r.left,l.scrollY-r.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:h.sent(),h.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,y_e(c)]:[3,4];case 3:h.sent(),h.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,f)}).then(function(){return a})]:[2,a]}})})});return c.open(),c.write(N_e(document.doctype)+"<html></html>"),C_e(this.referenceElement.ownerDocument,s,i),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},t.prototype.createElementClone=function(e){if(qT(e,2))debugger;if(Lee(e))return this.createCanvasClone(e);if(F9(e))return this.createVideoClone(e);if(O9(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return YT(r)&&(YT(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),D9(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return N5(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),a=e.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var a=e.cloneNode(!1);try{a.width=e.width,a.height=e.height;var s=e.getContext("2d"),i=a.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var l=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(l){var c=l.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return a},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var a=e.ownerDocument.createElement("canvas");return a.width=e.offsetWidth,a.height=e.offsetHeight,a},t.prototype.appendChildNode=function(e,r,n){(!Rx(r)||!h_e(r)&&!r.hasAttribute(Hee)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Rx(r)||!O9(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var a=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(Rx(s)&&Qee(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(l){return a.appendChildNode(r,l,n)})}else this.appendChildNode(r,s,n)},t.prototype.cloneNode=function(e,r){if(Ree(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&Rx(e)&&(XT(e)||J_(e))){var a=this.createElementClone(e);a.style.transitionProperty="none";var s=n.getComputedStyle(e),i=n.getComputedStyle(e,":before"),l=n.getComputedStyle(e,":after");this.referenceElement===e&&XT(a)&&(this.clonedReferenceElement=a),nD(a)&&I_e(a);var c=this.counters.parse(new v9(this.context,s)),u=this.resolvePseudoContent(e,a,i,fb.BEFORE);D9(e)&&(r=!0),F9(e)||this.cloneChildNodes(e,a,r),u&&a.insertBefore(u,a.firstChild);var d=this.resolvePseudoContent(e,a,l,fb.AFTER);return d&&a.appendChild(d),this.counters.pop(c),(s&&(this.options.copyStyles||J_(e))&&!Uee(e)||r)&&N5(s,a),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([a,e.scrollLeft,e.scrollTop]),(lS(e)||cS(e))&&(lS(a)||cS(a))&&(a.value=e.value),a}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,a){var s=this;if(n){var i=n.content,l=r.ownerDocument;if(!(!l||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new v9(this.context,n));var c=new uCe(this.context,n),u=l.createElement("html2canvaspseudoelement");N5(n,u),c.content.forEach(function(f){if(f.type===0)u.appendChild(l.createTextNode(f.value));else if(f.type===22){var h=l.createElement("img");h.src=f.value,h.style.opacity="1",u.appendChild(h)}else if(f.type===18){if(f.name==="attr"){var A=f.values.filter(Pa);A.length&&u.appendChild(l.createTextNode(e.getAttribute(A[0].value)||""))}else if(f.name==="counter"){var m=f.values.filter(_v),p=m[0],g=m[1];if(p&&Pa(p)){var x=s.counters.getCounterValue(p.value),y=g&&Pa(g)?KT.parse(s.context,g.value):3;u.appendChild(l.createTextNode(A2(x,y,!1)))}}else if(f.name==="counters"){var b=f.values.filter(_v),p=b[0],w=b[1],g=b[2];if(p&&Pa(p)){var j=s.counters.getCounterValues(p.value),I=g&&Pa(g)?KT.parse(s.context,g.value):3,_=w&&w.type===0?w.value:"",S=j.map(function(P){return A2(P,I,!1)}).join(_);u.appendChild(l.createTextNode(S))}}}else if(f.type===20)switch(f.value){case"open-quote":u.appendChild(l.createTextNode(x9(c.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(l.createTextNode(x9(c.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(l.createTextNode(f.value))}}),u.className=JT+" "+ZT;var d=a===fb.BEFORE?" "+JT:" "+ZT;return J_(r)?r.className.baseValue+=d:r.className+=d,u}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),fb;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(fb||(fb={}));var x_e=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(Hee,"true"),t.body.appendChild(r),r},v_e=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},y_e=function(t){return Promise.all([].slice.call(t.images,0).map(v_e))},b_e=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),e(t))},50)}})},w_e=["all","d","content"],N5=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);w_e.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},N_e=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},C_e=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},__e=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},E_e=":before",S_e=":after",JT="___html2canvas___pseudoelement_before",ZT="___html2canvas___pseudoelement_after",H9=`{
    content: "" !important;
    display: none !important;
}`,I_e=function(t){j_e(t,"."+JT+E_e+H9+`
         .`+ZT+S_e+H9)},j_e=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},$ee=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),P_e=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(_5(e)||F_e(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Gl(this,void 0,void 0,function(){var r,n,a,s,i=this;return bl(this,function(l){switch(l.label){case 0:return r=$ee.isSameOrigin(e),n=!C5(e)&&this._options.useCORS===!0&&zo.SUPPORT_CORS_IMAGES&&!r,a=!C5(e)&&!r&&!_5(e)&&typeof this._options.proxy=="string"&&zo.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!C5(e)&&!_5(e)&&!a&&!n?[2]:(s=e,a?[4,this.proxy(s)]:[3,2]);case 1:s=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(c,u){var d=new Image;d.onload=function(){return c(d)},d.onerror=u,(O_e(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return c(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=e.substring(0,256);return new Promise(function(s,i){var l=zo.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(l==="text")s(c.response);else{var f=new FileReader;f.addEventListener("load",function(){return s(f.result)},!1),f.addEventListener("error",function(h){return i(h)},!1),f.readAsDataURL(c.response)}else i("Failed to proxy resource "+a+" with status code "+c.status)},c.onerror=i;var u=n.indexOf("?")>-1?"&":"?";if(c.open("GET",""+n+u+"url="+encodeURIComponent(e)+"&responseType="+l),l!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=l),r._options.imageTimeout){var d=r._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+a)}}c.send()})},t}(),B_e=/^data:image\/svg\+xml/i,T_e=/^data:image\/.*;base64,/i,k_e=/^data:image\/.*/i,F_e=function(t){return zo.SUPPORT_SVG_DRAWING||!D_e(t)},C5=function(t){return k_e.test(t)},O_e=function(t){return T_e.test(t)},_5=function(t){return t.substr(0,4)==="blob"},D_e=function(t){return t.substr(-3).toLowerCase()==="svg"||B_e.test(t)},Sr=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),qg=function(t,e,r){return new Sr(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},fC=function(){function t(e,r,n,a){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=a}return t.prototype.subdivide=function(e,r){var n=qg(this.start,this.startControl,e),a=qg(this.startControl,this.endControl,e),s=qg(this.endControl,this.end,e),i=qg(n,a,e),l=qg(a,s,e),c=qg(i,l,e);return r?new t(this.start,n,i,c):new t(c,l,s,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),$u=function(t){return t.type===1},R_e=function(){function t(e){var r=e.styles,n=e.bounds,a=Fy(r.borderTopLeftRadius,n.width,n.height),s=a[0],i=a[1],l=Fy(r.borderTopRightRadius,n.width,n.height),c=l[0],u=l[1],d=Fy(r.borderBottomRightRadius,n.width,n.height),f=d[0],h=d[1],A=Fy(r.borderBottomLeftRadius,n.width,n.height),m=A[0],p=A[1],g=[];g.push((s+c)/n.width),g.push((m+f)/n.width),g.push((i+p)/n.height),g.push((u+h)/n.height);var x=Math.max.apply(Math,g);x>1&&(s/=x,i/=x,c/=x,u/=x,f/=x,h/=x,m/=x,p/=x);var y=n.width-c,b=n.height-h,w=n.width-f,j=n.height-p,I=r.borderTopWidth,_=r.borderRightWidth,S=r.borderBottomWidth,E=r.borderLeftWidth,k=Ha(r.paddingTop,e.bounds.width),P=Ha(r.paddingRight,e.bounds.width),T=Ha(r.paddingBottom,e.bounds.width),O=Ha(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?ls(n.left+E/3,n.top+I/3,s-E/3,i-I/3,da.TOP_LEFT):new Sr(n.left+E/3,n.top+I/3),this.topRightBorderDoubleOuterBox=s>0||i>0?ls(n.left+y,n.top+I/3,c-_/3,u-I/3,da.TOP_RIGHT):new Sr(n.left+n.width-_/3,n.top+I/3),this.bottomRightBorderDoubleOuterBox=f>0||h>0?ls(n.left+w,n.top+b,f-_/3,h-S/3,da.BOTTOM_RIGHT):new Sr(n.left+n.width-_/3,n.top+n.height-S/3),this.bottomLeftBorderDoubleOuterBox=m>0||p>0?ls(n.left+E/3,n.top+j,m-E/3,p-S/3,da.BOTTOM_LEFT):new Sr(n.left+E/3,n.top+n.height-S/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?ls(n.left+E*2/3,n.top+I*2/3,s-E*2/3,i-I*2/3,da.TOP_LEFT):new Sr(n.left+E*2/3,n.top+I*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?ls(n.left+y,n.top+I*2/3,c-_*2/3,u-I*2/3,da.TOP_RIGHT):new Sr(n.left+n.width-_*2/3,n.top+I*2/3),this.bottomRightBorderDoubleInnerBox=f>0||h>0?ls(n.left+w,n.top+b,f-_*2/3,h-S*2/3,da.BOTTOM_RIGHT):new Sr(n.left+n.width-_*2/3,n.top+n.height-S*2/3),this.bottomLeftBorderDoubleInnerBox=m>0||p>0?ls(n.left+E*2/3,n.top+j,m-E*2/3,p-S*2/3,da.BOTTOM_LEFT):new Sr(n.left+E*2/3,n.top+n.height-S*2/3),this.topLeftBorderStroke=s>0||i>0?ls(n.left+E/2,n.top+I/2,s-E/2,i-I/2,da.TOP_LEFT):new Sr(n.left+E/2,n.top+I/2),this.topRightBorderStroke=s>0||i>0?ls(n.left+y,n.top+I/2,c-_/2,u-I/2,da.TOP_RIGHT):new Sr(n.left+n.width-_/2,n.top+I/2),this.bottomRightBorderStroke=f>0||h>0?ls(n.left+w,n.top+b,f-_/2,h-S/2,da.BOTTOM_RIGHT):new Sr(n.left+n.width-_/2,n.top+n.height-S/2),this.bottomLeftBorderStroke=m>0||p>0?ls(n.left+E/2,n.top+j,m-E/2,p-S/2,da.BOTTOM_LEFT):new Sr(n.left+E/2,n.top+n.height-S/2),this.topLeftBorderBox=s>0||i>0?ls(n.left,n.top,s,i,da.TOP_LEFT):new Sr(n.left,n.top),this.topRightBorderBox=c>0||u>0?ls(n.left+y,n.top,c,u,da.TOP_RIGHT):new Sr(n.left+n.width,n.top),this.bottomRightBorderBox=f>0||h>0?ls(n.left+w,n.top+b,f,h,da.BOTTOM_RIGHT):new Sr(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=m>0||p>0?ls(n.left,n.top+j,m,p,da.BOTTOM_LEFT):new Sr(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||i>0?ls(n.left+E,n.top+I,Math.max(0,s-E),Math.max(0,i-I),da.TOP_LEFT):new Sr(n.left+E,n.top+I),this.topRightPaddingBox=c>0||u>0?ls(n.left+Math.min(y,n.width-_),n.top+I,y>n.width+_?0:Math.max(0,c-_),Math.max(0,u-I),da.TOP_RIGHT):new Sr(n.left+n.width-_,n.top+I),this.bottomRightPaddingBox=f>0||h>0?ls(n.left+Math.min(w,n.width-E),n.top+Math.min(b,n.height-S),Math.max(0,f-_),Math.max(0,h-S),da.BOTTOM_RIGHT):new Sr(n.left+n.width-_,n.top+n.height-S),this.bottomLeftPaddingBox=m>0||p>0?ls(n.left+E,n.top+Math.min(j,n.height-S),Math.max(0,m-E),Math.max(0,p-S),da.BOTTOM_LEFT):new Sr(n.left+E,n.top+n.height-S),this.topLeftContentBox=s>0||i>0?ls(n.left+E+O,n.top+I+k,Math.max(0,s-(E+O)),Math.max(0,i-(I+k)),da.TOP_LEFT):new Sr(n.left+E+O,n.top+I+k),this.topRightContentBox=c>0||u>0?ls(n.left+Math.min(y,n.width+E+O),n.top+I+k,y>n.width+E+O?0:c-E+O,u-(I+k),da.TOP_RIGHT):new Sr(n.left+n.width-(_+P),n.top+I+k),this.bottomRightContentBox=f>0||h>0?ls(n.left+Math.min(w,n.width-(E+O)),n.top+Math.min(b,n.height+I+k),Math.max(0,f-(_+P)),h-(S+T),da.BOTTOM_RIGHT):new Sr(n.left+n.width-(_+P),n.top+n.height-(S+T)),this.bottomLeftContentBox=m>0||p>0?ls(n.left+E+O,n.top+j,Math.max(0,m-(E+O)),p-(S+T),da.BOTTOM_LEFT):new Sr(n.left+E+O,n.top+n.height-(S+T))}return t}(),da;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(da||(da={}));var ls=function(t,e,r,n,a){var s=4*((Math.sqrt(2)-1)/3),i=r*s,l=n*s,c=t+r,u=e+n;switch(a){case da.TOP_LEFT:return new fC(new Sr(t,u),new Sr(t,u-l),new Sr(c-i,e),new Sr(c,e));case da.TOP_RIGHT:return new fC(new Sr(t,e),new Sr(t+i,e),new Sr(c,u-l),new Sr(c,u));case da.BOTTOM_RIGHT:return new fC(new Sr(c,e),new Sr(c,e+l),new Sr(t+i,u),new Sr(t,u));case da.BOTTOM_LEFT:default:return new fC(new Sr(c,u),new Sr(c-i,u),new Sr(t,e+l),new Sr(t,e))}},uS=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},M_e=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},dS=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},L_e=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),AC=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),U_e=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),Q_e=function(t){return t.type===0},Gee=function(t){return t.type===1},V_e=function(t){return t.type===2},$9=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},H_e=function(t,e,r,n,a){return t.map(function(s,i){switch(i){case 0:return s.add(e,r);case 1:return s.add(e+n,r);case 2:return s.add(e+n,r+a);case 3:return s.add(e,r+a)}return s})},Kee=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),qee=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new R_e(this.container),this.container.styles.opacity<1&&this.effects.push(new U_e(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new L_e(n,a,s))}if(this.container.styles.overflowX!==0){var i=uS(this.curves),l=dS(this.curves);$9(i,l)?this.effects.push(new AC(i,6)):(this.effects.push(new AC(i,2)),this.effects.push(new AC(l,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(c){return!Gee(c)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=uS(n.curves),l=dS(n.curves);$9(i,l)||a.unshift(new AC(l,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(c){return Xi(c.target,e)})},t}(),ek=function(t,e,r,n){t.container.elements.forEach(function(a){var s=Xi(a.flags,4),i=Xi(a.flags,2),l=new qee(a,t);Xi(a.styles.display,2048)&&n.push(l);var c=Xi(a.flags,8)?[]:n;if(s||i){var u=s||a.styles.isPositioned()?r:e,d=new Kee(l);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var f=a.styles.zIndex.order;if(f<0){var h=0;u.negativeZIndex.some(function(m,p){return f>m.element.container.styles.zIndex.order?(h=p,!1):h>0}),u.negativeZIndex.splice(h,0,d)}else if(f>0){var A=0;u.positiveZIndex.some(function(m,p){return f>=m.element.container.styles.zIndex.order?(A=p+1,!1):A>0}),u.positiveZIndex.splice(A,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);ek(l,d,s?d:r,c)}else a.styles.isInlineLevel()?e.inlineLevel.push(l):e.nonInlineLevel.push(l),ek(l,e,r,c);Xi(a.flags,8)&&zee(a,c)})},zee=function(t,e){for(var r=t instanceof WT?t.start:1,n=t instanceof WT?t.reversed:!1,a=0;a<e.length;a++){var s=e[a];s.container instanceof Bee&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=A2(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},$_e=function(t){var e=new qee(t,null),r=new Kee(e),n=[];return ek(e,r,r,n),zee(e.container,n),r},G9=function(t,e){switch(e){case 0:return zu(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return zu(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return zu(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return zu(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},G_e=function(t,e){switch(e){case 0:return zu(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return zu(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return zu(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return zu(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},K_e=function(t,e){switch(e){case 0:return zu(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return zu(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return zu(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return zu(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},q_e=function(t,e){switch(e){case 0:return hC(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return hC(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return hC(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return hC(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},hC=function(t,e){var r=[];return $u(t)?r.push(t.subdivide(.5,!1)):r.push(t),$u(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},zu=function(t,e,r,n){var a=[];return $u(t)?a.push(t.subdivide(.5,!1)):a.push(t),$u(r)?a.push(r.subdivide(.5,!0)):a.push(r),$u(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),$u(e)?a.push(e.subdivide(.5,!1).reverse()):a.push(e),a},Wee=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},fS=function(t){var e=t.styles,r=t.bounds,n=Ha(e.paddingLeft,r.width),a=Ha(e.paddingRight,r.width),s=Ha(e.paddingTop,r.width),i=Ha(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+a),-(e.borderTopWidth+e.borderBottomWidth+s+i))},z_e=function(t,e){return t===0?e.bounds:t===2?fS(e):Wee(e)},W_e=function(t,e){return t===0?e.bounds:t===2?fS(e):Wee(e)},E5=function(t,e,r){var n=z_e(gx(t.styles.backgroundOrigin,e),t),a=W_e(gx(t.styles.backgroundClip,e),t),s=X_e(gx(t.styles.backgroundSize,e),r,n),i=s[0],l=s[1],c=Fy(gx(t.styles.backgroundPosition,e),n.width-i,n.height-l),u=Y_e(gx(t.styles.backgroundRepeat,e),c,s,n,a),d=Math.round(n.left+c[0]),f=Math.round(n.top+c[1]);return[u,d,f,i,l]},zg=function(t){return Pa(t)&&t.value===tv.AUTO},mC=function(t){return typeof t=="number"},X_e=function(t,e,r){var n=e[0],a=e[1],s=e[2],i=t[0],l=t[1];if(!i)return[0,0];if(ji(i)&&l&&ji(l))return[Ha(i,r.width),Ha(l,r.height)];var c=mC(s);if(Pa(i)&&(i.value===tv.CONTAIN||i.value===tv.COVER)){if(mC(s)){var u=r.width/r.height;return u<s!=(i.value===tv.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=mC(n),f=mC(a),h=d||f;if(zg(i)&&(!l||zg(l))){if(d&&f)return[n,a];if(!c&&!h)return[r.width,r.height];if(h&&c){var A=d?n:a*s,m=f?a:n/s;return[A,m]}var p=d?n:r.width,g=f?a:r.height;return[p,g]}if(c){var x=0,y=0;return ji(i)?x=Ha(i,r.width):ji(l)&&(y=Ha(l,r.height)),zg(i)?x=y*s:(!l||zg(l))&&(y=x/s),[x,y]}var b=null,w=null;if(ji(i)?b=Ha(i,r.width):l&&ji(l)&&(w=Ha(l,r.height)),b!==null&&(!l||zg(l))&&(w=d&&f?b/n*a:r.height),w!==null&&zg(i)&&(b=d&&f?w/a*n:r.width),b!==null&&w!==null)return[b,w];throw new Error("Unable to calculate background-size for element")},gx=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},Y_e=function(t,e,r,n,a){var s=e[0],i=e[1],l=r[0],c=r[1];switch(t){case 2:return[new Sr(Math.round(n.left),Math.round(n.top+i)),new Sr(Math.round(n.left+n.width),Math.round(n.top+i)),new Sr(Math.round(n.left+n.width),Math.round(c+n.top+i)),new Sr(Math.round(n.left),Math.round(c+n.top+i))];case 3:return[new Sr(Math.round(n.left+s),Math.round(n.top)),new Sr(Math.round(n.left+s+l),Math.round(n.top)),new Sr(Math.round(n.left+s+l),Math.round(n.height+n.top)),new Sr(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new Sr(Math.round(n.left+s),Math.round(n.top+i)),new Sr(Math.round(n.left+s+l),Math.round(n.top+i)),new Sr(Math.round(n.left+s+l),Math.round(n.top+i+c)),new Sr(Math.round(n.left+s),Math.round(n.top+i+c))];default:return[new Sr(Math.round(a.left),Math.round(a.top)),new Sr(Math.round(a.left+a.width),Math.round(a.top)),new Sr(Math.round(a.left+a.width),Math.round(a.height+a.top)),new Sr(Math.round(a.left),Math.round(a.height+a.top))]}},J_e="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",K9="Hidden Text",Z_e=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),a.src=J_e,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(K9)),n.appendChild(s),n.appendChild(a);var l=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(K9)),n.style.lineHeight="normal",a.style.verticalAlign="super";var c=a.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:l,middle:c}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),Xee=function(){function t(e,r){this.context=e,this.options=r}return t}(),eEe=1e4,tEe=function(t){ef(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new Z_e(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},e.prototype.applyEffect=function(r){this.ctx.save(),V_e(r)&&(this.ctx.globalAlpha=r.opacity),Q_e(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),Gee(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return Gl(this,void 0,void 0,function(){var n;return bl(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return Gl(this,void 0,void 0,function(){return bl(this,function(n){switch(n.label){case 0:if(Xi(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var i=tD(r.text);i.reduce(function(l,c){return s.ctx.fillText(c,l,r.bounds.top+a),l+s.ctx.measureText(c).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),a=iEe(r.fontFamily).join(", "),s=ww(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},e.prototype.renderTextNode=function(r,n){return Gl(this,void 0,void 0,function(){var a,s,i,l,c,u,d,f,h=this;return bl(this,function(A){return a=this.createFontStyle(n),s=a[0],i=a[1],l=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(i,l),u=c.baseline,d=c.middle,f=n.paintOrder,r.textBounds.forEach(function(m){f.forEach(function(p){switch(p){case 0:h.ctx.fillStyle=ho(n.color),h.renderTextWithLetterSpacing(m,n.letterSpacing,u);var g=n.textShadow;g.length&&m.text.trim().length&&(g.slice(0).reverse().forEach(function(x){h.ctx.shadowColor=ho(x.color),h.ctx.shadowOffsetX=x.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=x.offsetY.number*h.options.scale,h.ctx.shadowBlur=x.blur.number,h.renderTextWithLetterSpacing(m,n.letterSpacing,u)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),n.textDecorationLine.length&&(h.ctx.fillStyle=ho(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(x){switch(x){case 1:h.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top+u),m.bounds.width,1);break;case 2:h.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top),m.bounds.width,1);break;case 3:h.ctx.fillRect(m.bounds.left,Math.ceil(m.bounds.top+d),m.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&m.text.trim().length&&(h.ctx.strokeStyle=ho(n.webkitTextStrokeColor),h.ctx.lineWidth=n.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(m.text,m.bounds.left,m.bounds.top+u)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=fS(r),i=dS(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return Gl(this,void 0,void 0,function(){var n,a,s,i,l,c,y,y,u,d,f,h,w,A,m,j,p,g,x,y,b,w,j;return bl(this,function(I){switch(I.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,i=0,l=n.textNodes,I.label=1;case 1:return i<l.length?(c=l[i],[4,this.renderTextNode(c,s)]):[3,4];case 2:I.sent(),I.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof Iee))return[3,8];I.label=5;case 5:return I.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return y=I.sent(),this.renderReplacedElement(n,a,y),[3,8];case 7:return I.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof jee&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof Pee))return[3,12];I.label=9;case 9:return I.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return y=I.sent(),this.renderReplacedElement(n,a,y),[3,12];case 11:return I.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof Fee&&n.tree?(u=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=I.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),I.label=14;case 14:if(n instanceof rD&&(f=Math.min(n.bounds.width,n.bounds.height),n.type===iS?n.checked&&(this.ctx.save(),this.path([new Sr(n.bounds.left+f*.39363,n.bounds.top+f*.79),new Sr(n.bounds.left+f*.16,n.bounds.top+f*.5549),new Sr(n.bounds.left+f*.27347,n.bounds.top+f*.44071),new Sr(n.bounds.left+f*.39694,n.bounds.top+f*.5649),new Sr(n.bounds.left+f*.72983,n.bounds.top+f*.23),new Sr(n.bounds.left+f*.84,n.bounds.top+f*.34085),new Sr(n.bounds.left+f*.39363,n.bounds.top+f*.79)]),this.ctx.fillStyle=ho(k9),this.ctx.fill(),this.ctx.restore()):n.type===oS&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+f/2,n.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=ho(k9),this.ctx.fill(),this.ctx.restore())),rEe(n)&&n.value.length){switch(h=this.createFontStyle(s),w=h[0],A=h[1],m=this.fontMetrics.getMetrics(w,A).baseline,this.ctx.font=w,this.ctx.fillStyle=ho(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=aEe(n.styles.textAlign),j=fS(n),p=0,n.styles.textAlign){case 1:p+=j.width/2;break;case 2:p+=j.width;break}g=j.add(p,0,0,-j.height/2+1),this.ctx.save(),this.path([new Sr(j.left,j.top),new Sr(j.left+j.width,j.top),new Sr(j.left+j.width,j.top+j.height),new Sr(j.left,j.top+j.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new db(n.value,g),s.letterSpacing,m),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Xi(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(x=n.styles.listStyleImage,x.type!==0)return[3,18];y=void 0,b=x.url,I.label=15;case 15:return I.trys.push([15,17,,18]),[4,this.context.cache.match(b)];case 16:return y=I.sent(),this.ctx.drawImage(y,n.bounds.left-(y.width+10),n.bounds.top),[3,18];case 17:return I.sent(),this.context.logger.error("Error loading list-style-image "+b),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(w=this.createFontStyle(s)[0],this.ctx.font=w,this.ctx.fillStyle=ho(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",j=new JA(n.bounds.left,n.bounds.top+Ha(n.styles.paddingTop,n.bounds.width),n.bounds.width,p9(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new db(r.listValue,j),s.letterSpacing,p9(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),I.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return Gl(this,void 0,void 0,function(){var n,a,x,s,i,x,l,c,x,u,d,x,f,h,x,A,m,x,p,g,x;return bl(this,function(y){switch(y.label){case 0:if(Xi(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:y.sent(),n=0,a=r.negativeZIndex,y.label=2;case 2:return n<a.length?(x=a[n],[4,this.renderStack(x)]):[3,5];case 3:y.sent(),y.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:y.sent(),s=0,i=r.nonInlineLevel,y.label=7;case 7:return s<i.length?(x=i[s],[4,this.renderNode(x)]):[3,10];case 8:y.sent(),y.label=9;case 9:return s++,[3,7];case 10:l=0,c=r.nonPositionedFloats,y.label=11;case 11:return l<c.length?(x=c[l],[4,this.renderStack(x)]):[3,14];case 12:y.sent(),y.label=13;case 13:return l++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,y.label=15;case 15:return u<d.length?(x=d[u],[4,this.renderStack(x)]):[3,18];case 16:y.sent(),y.label=17;case 17:return u++,[3,15];case 18:f=0,h=r.inlineLevel,y.label=19;case 19:return f<h.length?(x=h[f],[4,this.renderNode(x)]):[3,22];case 20:y.sent(),y.label=21;case 21:return f++,[3,19];case 22:A=0,m=r.zeroOrAutoZIndexOrTransformedOrOpacity,y.label=23;case 23:return A<m.length?(x=m[A],[4,this.renderStack(x)]):[3,26];case 24:y.sent(),y.label=25;case 25:return A++,[3,23];case 26:p=0,g=r.positiveZIndex,y.label=27;case 27:return p<g.length?(x=g[p],[4,this.renderStack(x)]):[3,30];case 28:y.sent(),y.label=29;case 29:return p++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var i=$u(a)?a.start:a;s===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),$u(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},e.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},e.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,l=i.createElement("canvas");l.width=Math.max(1,n),l.height=Math.max(1,a);var c=l.getContext("2d");return c.drawImage(r,0,0,r.width,r.height,0,0,n,a),l},e.prototype.renderBackgroundImage=function(r){return Gl(this,void 0,void 0,function(){var n,a,s,i,l,c;return bl(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var f,h,A,k,de,fe,O,W,S,m,k,de,fe,O,W,p,g,x,y,b,w,j,I,_,S,E,k,P,T,O,W,Ae,de,fe,ge,ee,Fe,Pe,F,Q,H,R;return bl(this,function(z){switch(z.label){case 0:if(d.type!==0)return[3,5];f=void 0,h=d.url,z.label=1;case 1:return z.trys.push([1,3,,4]),[4,s.context.cache.match(h)];case 2:return f=z.sent(),[3,4];case 3:return z.sent(),s.context.logger.error("Error loading background-image "+h),[3,4];case 4:return f&&(A=E5(r,n,[f.width,f.height,f.width/f.height]),k=A[0],de=A[1],fe=A[2],O=A[3],W=A[4],S=s.ctx.createPattern(s.resizeImage(f,O,W),"repeat"),s.renderRepeat(k,S,de,fe)),[3,6];case 5:Qwe(d)?(m=E5(r,n,[null,null,null]),k=m[0],de=m[1],fe=m[2],O=m[3],W=m[4],p=Dwe(d.angle,O,W),g=p[0],x=p[1],y=p[2],b=p[3],w=p[4],j=document.createElement("canvas"),j.width=O,j.height=W,I=j.getContext("2d"),_=I.createLinearGradient(x,b,y,w),h9(d.stops,g).forEach(function(J){return _.addColorStop(J.stop,ho(J.color))}),I.fillStyle=_,I.fillRect(0,0,O,W),O>0&&W>0&&(S=s.ctx.createPattern(j,"repeat"),s.renderRepeat(k,S,de,fe))):Vwe(d)&&(E=E5(r,n,[null,null,null]),k=E[0],P=E[1],T=E[2],O=E[3],W=E[4],Ae=d.position.length===0?[J6]:d.position,de=Ha(Ae[0],O),fe=Ha(Ae[Ae.length-1],W),ge=Rwe(d,de,fe,O,W),ee=ge[0],Fe=ge[1],ee>0&&Fe>0&&(Pe=s.ctx.createRadialGradient(P+de,T+fe,0,P+de,T+fe,ee),h9(d.stops,ee*2).forEach(function(J){return Pe.addColorStop(J.stop,ho(J.color))}),s.path(k),s.ctx.fillStyle=Pe,ee!==Fe?(F=r.bounds.left+.5*r.bounds.width,Q=r.bounds.top+.5*r.bounds.height,H=Fe/ee,R=1/H,s.ctx.save(),s.ctx.translate(F,Q),s.ctx.transform(1,0,0,H,0,0),s.ctx.translate(-F,-Q),s.ctx.fillRect(P,R*(T-Q)+Q,O,W*R),s.ctx.restore()):s.ctx.fill())),z.label=6;case 6:return n--,[2]}})},s=this,i=0,l=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return i<l.length?(c=l[i],[5,a(c)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,a){return Gl(this,void 0,void 0,function(){return bl(this,function(s){return this.path(G9(a,n)),this.ctx.fillStyle=ho(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,a,s){return Gl(this,void 0,void 0,function(){var i,l;return bl(this,function(c){switch(c.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return c.sent(),[2];case 2:return i=G_e(s,a),this.path(i),this.ctx.fillStyle=ho(r),this.ctx.fill(),l=K_e(s,a),this.path(l),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return Gl(this,void 0,void 0,function(){var n,a,s,i,l,c,u,d,f=this;return bl(this,function(h){switch(h.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!H0(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=nEe(gx(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),H0(n.backgroundColor)||(this.ctx.fillStyle=ho(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(A){f.ctx.save();var m=uS(r.curves),p=A.inset?0:eEe,g=H_e(m,-p+(A.inset?1:-1)*A.spread.number,(A.inset?1:-1)*A.spread.number,A.spread.number*(A.inset?-2:2),A.spread.number*(A.inset?-2:2));A.inset?(f.path(m),f.ctx.clip(),f.mask(g)):(f.mask(m),f.ctx.clip(),f.path(g)),f.ctx.shadowOffsetX=A.offsetX.number+p,f.ctx.shadowOffsetY=A.offsetY.number,f.ctx.shadowColor=ho(A.color),f.ctx.shadowBlur=A.blur.number,f.ctx.fillStyle=A.inset?ho(A.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),h.label=2;case 2:l=0,c=0,u=s,h.label=3;case 3:return c<u.length?(d=u[c],d.style!==0&&!H0(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,3)];case 6:return h.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,l,r.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,l,r.curves)];case 10:h.sent(),h.label=11;case 11:l++,h.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,a,s,i){return Gl(this,void 0,void 0,function(){var l,c,u,d,f,h,A,m,p,g,x,y,b,w,j,I,j,I;return bl(this,function(_){return this.ctx.save(),l=q_e(s,a),c=G9(s,a),i===2&&(this.path(c),this.ctx.clip()),$u(c[0])?(u=c[0].start.x,d=c[0].start.y):(u=c[0].x,d=c[0].y),$u(c[1])?(f=c[1].end.x,h=c[1].end.y):(f=c[1].x,h=c[1].y),a===0||a===2?A=Math.abs(u-f):A=Math.abs(d-h),this.ctx.beginPath(),i===3?this.formatPath(l):this.formatPath(c.slice(0,2)),m=n<3?n*3:n*2,p=n<3?n*2:n,i===3&&(m=n,p=n),g=!0,A<=m*2?g=!1:A<=m*2+p?(x=A/(2*m+p),m*=x,p*=x):(y=Math.floor((A+p)/(m+p)),b=(A-y*m)/(y-1),w=(A-(y+1)*m)/y,p=w<=0||Math.abs(p-b)<Math.abs(p-w)?b:w),g&&(i===3?this.ctx.setLineDash([0,m+p]):this.ctx.setLineDash([m,p])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=ho(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&($u(c[0])&&(j=c[3],I=c[0],this.ctx.beginPath(),this.formatPath([new Sr(j.end.x,j.end.y),new Sr(I.start.x,I.start.y)]),this.ctx.stroke()),$u(c[1])&&(j=c[1],I=c[2],this.ctx.beginPath(),this.formatPath([new Sr(j.end.x,j.end.y),new Sr(I.start.x,I.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return Gl(this,void 0,void 0,function(){var n;return bl(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=ho(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=$_e(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(Xee),rEe=function(t){return t instanceof kee||t instanceof Tee?!0:t instanceof rD&&t.type!==oS&&t.type!==iS},nEe=function(t,e){switch(t){case 0:return uS(e);case 2:return M_e(e);case 1:default:return dS(e)}},aEe=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},sEe=["-apple-system","system-ui"],iEe=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return sEe.indexOf(e)===-1}):t},oEe=function(t){ef(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return e.prototype.render=function(r){return Gl(this,void 0,void 0,function(){var n,a;return bl(this,function(s){switch(s.label){case 0:return n=zT(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,lEe(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=ho(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(Xee),lEe=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},cEe=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,qN([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,qN([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,qN([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,qN([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),uEe=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new cEe({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new P_e(this,e)}return t.instanceCount=1,t}(),gg=function(t,e){return e===void 0&&(e={}),dEe(t,e)};typeof window<"u"&&$ee.setContext(window);var dEe=function(t,e){return Gl(void 0,void 0,void 0,function(){var r,n,a,s,i,l,c,u,d,f,h,A,m,p,g,x,y,b,w,j,_,I,_,S,E,k,P,T,O,W,Ae,de,fe,ge,ee,Fe,Pe,F,Q,H;return bl(this,function(R){switch(R.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(S=e.allowTaint)!==null&&S!==void 0?S:!1,imageTimeout:(E=e.imageTimeout)!==null&&E!==void 0?E:15e3,proxy:e.proxy,useCORS:(k=e.useCORS)!==null&&k!==void 0?k:!1},s=kT({logging:(P=e.logging)!==null&&P!==void 0?P:!0,cache:e.cache},a),i={windowWidth:(T=e.windowWidth)!==null&&T!==void 0?T:n.innerWidth,windowHeight:(O=e.windowHeight)!==null&&O!==void 0?O:n.innerHeight,scrollX:(W=e.scrollX)!==null&&W!==void 0?W:n.pageXOffset,scrollY:(Ae=e.scrollY)!==null&&Ae!==void 0?Ae:n.pageYOffset},l=new JA(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),c=new uEe(s,l),u=(de=e.foreignObjectRendering)!==null&&de!==void 0?de:!1,d={allowTaint:(fe=e.allowTaint)!==null&&fe!==void 0?fe:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:u,copyStyles:u},c.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),f=new V9(c,t,d),h=f.clonedReferenceElement,h?[4,f.toIFrame(r,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return A=R.sent(),m=nD(h)||A_e(h)?Hbe(h.ownerDocument):_4(c,h),p=m.width,g=m.height,x=m.left,y=m.top,b=fEe(c,h,e.backgroundColor),w={canvas:e.canvas,backgroundColor:b,scale:(ee=(ge=e.scale)!==null&&ge!==void 0?ge:n.devicePixelRatio)!==null&&ee!==void 0?ee:1,x:((Fe=e.x)!==null&&Fe!==void 0?Fe:0)+x,y:((Pe=e.y)!==null&&Pe!==void 0?Pe:0)+y,width:(F=e.width)!==null&&F!==void 0?F:Math.ceil(p),height:(Q=e.height)!==null&&Q!==void 0?Q:Math.ceil(g)},u?(c.logger.debug("Document cloned, using foreign object rendering"),_=new oEe(c,w),[4,_.render(h)]):[3,3];case 2:return j=R.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+x+","+y+" with size "+p+"x"+g+" using computed rendering"),c.logger.debug("Starting DOM parsing"),I=Dee(c,h),b===I.styles.backgroundColor&&(I.styles.backgroundColor=MA.TRANSPARENT),c.logger.debug("Starting renderer for element at "+w.x+","+w.y+" with size "+w.width+"x"+w.height),_=new tEe(c,w),[4,_.render(I)];case 4:j=R.sent(),R.label=5;case 5:return(!((H=e.removeContainer)!==null&&H!==void 0)||H)&&(V9.destroy(A)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,j]}})})},fEe=function(t,e,r){var n=e.ownerDocument,a=n.documentElement?cb(t,getComputedStyle(n.documentElement).backgroundColor):MA.TRANSPARENT,s=n.body?cb(t,getComputedStyle(n.body).backgroundColor):MA.TRANSPARENT,i=typeof r=="string"?cb(t,r):r===null?MA.TRANSPARENT:4294967295;return e===n.documentElement?H0(a)?H0(s)?i:s:a:i};const aD=Object.freeze(Object.defineProperty({__proto__:null,default:gg},Symbol.toStringTag,{value:"Module"})),AEe="modulepreload",hEe=function(t){return"/"+t},q9={},LA=function(e,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=hEe(c),c in q9)return;q9[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":AEe,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((h,A)=>{f.addEventListener("load",h),f.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return a.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};function Na(t){"@babel/helpers - typeof";return Na=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Na(t)}var zd=Uint8Array,ru=Uint16Array,sD=Int32Array,iD=new zd([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),oD=new zd([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),z9=new zd([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Yee=function(t,e){for(var r=new ru(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var a=new sD(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},Jee=Yee(iD,2),mEe=Jee.b,tk=Jee.r;mEe[28]=258,tk[258]=28;var pEe=Yee(oD,0),W9=pEe.r,rk=new ru(32768);for(var rs=0;rs<32768;++rs){var qh=(rs&43690)>>1|(rs&21845)<<1;qh=(qh&52428)>>2|(qh&13107)<<2,qh=(qh&61680)>>4|(qh&3855)<<4,rk[rs]=((qh&65280)>>8|(qh&255)<<8)>>1}var Ab=function(t,e,r){for(var n=t.length,a=0,s=new ru(e);a<n;++a)t[a]&&++s[t[a]-1];var i=new ru(e);for(a=1;a<e;++a)i[a]=i[a-1]+s[a-1]<<1;var l;if(r){l=new ru(1<<e);var c=15-e;for(a=0;a<n;++a)if(t[a])for(var u=a<<4|t[a],d=e-t[a],f=i[t[a]-1]++<<d,h=f|(1<<d)-1;f<=h;++f)l[rk[f]>>c]=u}else for(l=new ru(n),a=0;a<n;++a)t[a]&&(l[a]=rk[i[t[a]-1]++]>>15-t[a]);return l},Kp=new zd(288);for(var rs=0;rs<144;++rs)Kp[rs]=8;for(var rs=144;rs<256;++rs)Kp[rs]=9;for(var rs=256;rs<280;++rs)Kp[rs]=7;for(var rs=280;rs<288;++rs)Kp[rs]=8;var AS=new zd(32);for(var rs=0;rs<32;++rs)AS[rs]=5;var gEe=Ab(Kp,9,0),xEe=Ab(AS,5,0),Zee=function(t){return(t+7)/8|0},vEe=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new zd(t.subarray(e,r))},oA=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},ay=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},S5=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var a=r.length,s=r.slice();if(!a)return{t:tte,l:0};if(a==1){var i=new zd(r[0].s+1);return i[r[0].s]=1,{t:i,l:1}}r.sort(function(j,I){return j.f-I.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=a-1;)l=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var h=s[0].s,n=1;n<a;++n)s[n].s>h&&(h=s[n].s);var A=new ru(h+1),m=nk(r[d-1],A,0);if(m>e){var n=0,p=0,g=m-e,x=1<<g;for(s.sort(function(I,_){return A[_.s]-A[I.s]||I.f-_.f});n<a;++n){var y=s[n].s;if(A[y]>e)p+=x-(1<<m-A[y]),A[y]=e;else break}for(p>>=g;p>0;){var b=s[n].s;A[b]<e?p-=1<<e-A[b]++-1:++n}for(;n>=0&&p;--n){var w=s[n].s;A[w]==e&&(--A[w],++p)}m=e}return{t:new zd(A),l:m}},nk=function(t,e,r){return t.s==-1?Math.max(nk(t.l,e,r+1),nk(t.r,e,r+1)):e[t.s]=r},X9=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new ru(++e),n=0,a=t[0],s=1,i=function(c){r[n++]=c},l=1;l<=e;++l)if(t[l]==a&&l!=e)++s;else{if(!a&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(a),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(a);s=1,a=t[l]}return{c:r.subarray(0,n),n:e}},sy=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},ete=function(t,e,r){var n=r.length,a=Zee(e+2);t[a]=n&255,t[a+1]=n>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var s=0;s<n;++s)t[a+s+4]=r[s];return(a+4+n)*8},Y9=function(t,e,r,n,a,s,i,l,c,u,d){oA(e,d++,r),++a[256];for(var f=S5(a,15),h=f.t,A=f.l,m=S5(s,15),p=m.t,g=m.l,x=X9(h),y=x.c,b=x.n,w=X9(p),j=w.c,I=w.n,_=new ru(19),S=0;S<y.length;++S)++_[y[S]&31];for(var S=0;S<j.length;++S)++_[j[S]&31];for(var E=S5(_,7),k=E.t,P=E.l,T=19;T>4&&!k[z9[T-1]];--T);var O=u+5<<3,W=sy(a,Kp)+sy(s,AS)+i,Ae=sy(a,h)+sy(s,p)+i+14+3*T+sy(_,k)+2*_[16]+3*_[17]+7*_[18];if(c>=0&&O<=W&&O<=Ae)return ete(e,d,t.subarray(c,c+u));var de,fe,ge,ee;if(oA(e,d,1+(Ae<W)),d+=2,Ae<W){de=Ab(h,A,0),fe=h,ge=Ab(p,g,0),ee=p;var Fe=Ab(k,P,0);oA(e,d,b-257),oA(e,d+5,I-1),oA(e,d+10,T-4),d+=14;for(var S=0;S<T;++S)oA(e,d+3*S,k[z9[S]]);d+=3*T;for(var Pe=[y,j],F=0;F<2;++F)for(var Q=Pe[F],S=0;S<Q.length;++S){var H=Q[S]&31;oA(e,d,Fe[H]),d+=k[H],H>15&&(oA(e,d,Q[S]>>5&127),d+=Q[S]>>12)}}else de=gEe,fe=Kp,ge=xEe,ee=AS;for(var S=0;S<l;++S){var R=n[S];if(R>255){var H=R>>18&31;ay(e,d,de[H+257]),d+=fe[H+257],H>7&&(oA(e,d,R>>23&31),d+=iD[H]);var z=R&31;ay(e,d,ge[z]),d+=ee[z],z>3&&(ay(e,d,R>>5&8191),d+=oD[z])}else ay(e,d,de[R]),d+=fe[R]}return ay(e,d,de[256]),d+fe[256]},yEe=new sD([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),tte=new zd(0),bEe=function(t,e,r,n,a,s){var i=s.z||t.length,l=new zd(n+i+5*(1+Math.ceil(i/7e3))+a),c=l.subarray(n,l.length-a),u=s.l,d=(s.r||0)&7;if(e){d&&(c[0]=s.r>>3);for(var f=yEe[e-1],h=f>>13,A=f&8191,m=(1<<r)-1,p=s.p||new ru(32768),g=s.h||new ru(m+1),x=Math.ceil(r/3),y=2*x,b=function(ie){return(t[ie]^t[ie+1]<<x^t[ie+2]<<y)&m},w=new sD(25e3),j=new ru(288),I=new ru(32),_=0,S=0,E=s.i||0,k=0,P=s.w||0,T=0;E+2<i;++E){var O=b(E),W=E&32767,Ae=g[O];if(p[W]=Ae,g[O]=W,P<=E){var de=i-E;if((_>7e3||k>24576)&&(de>423||!u)){d=Y9(t,c,0,w,j,I,S,k,T,E-T,d),k=_=S=0,T=E;for(var fe=0;fe<286;++fe)j[fe]=0;for(var fe=0;fe<30;++fe)I[fe]=0}var ge=2,ee=0,Fe=A,Pe=W-Ae&32767;if(de>2&&O==b(E-Pe))for(var F=Math.min(h,de)-1,Q=Math.min(32767,E),H=Math.min(258,de);Pe<=Q&&--Fe&&W!=Ae;){if(t[E+ge]==t[E+ge-Pe]){for(var R=0;R<H&&t[E+R]==t[E+R-Pe];++R);if(R>ge){if(ge=R,ee=Pe,R>F)break;for(var z=Math.min(Pe,R-2),J=0,fe=0;fe<z;++fe){var D=E-Pe+fe&32767,U=p[D],ne=D-U&32767;ne>J&&(J=ne,Ae=D)}}}W=Ae,Ae=p[W],Pe+=W-Ae&32767}if(ee){w[k++]=268435456|tk[ge]<<18|W9[ee];var ve=tk[ge]&31,L=W9[ee]&31;S+=iD[ve]+oD[L],++j[257+ve],++I[L],P=E+ge,++_}else w[k++]=t[E],++j[t[E]]}}for(E=Math.max(E,P);E<i;++E)w[k++]=t[E],++j[t[E]];d=Y9(t,c,u,w,j,I,S,k,T,E-T,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=g,s.p=p,s.i=E,s.w=P)}else{for(var E=s.w||0;E<i+u;E+=65535){var Ye=E+65535;Ye>=i&&(c[d/8|0]=u,Ye=i),d=ete(c,d+1,t.subarray(E,Ye))}s.i=i}return vEe(l,0,n+Zee(d)+a)},rte=function(){var t=1,e=0;return{p:function(r){for(var n=t,a=e,s=r.length|0,i=0;i!=s;){for(var l=Math.min(i+2655,s);i<l;++i)a+=n+=r[i];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}t=n,e=a},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},wEe=function(t,e,r,n,a){if(!a&&(a={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),i=new zd(s.length+t.length);i.set(s),i.set(t,s.length),t=i,a.w=s.length}return bEe(t,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,a)},nte=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},NEe=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var a=rte();a.p(e.dictionary),nte(t,2,a.d())}};function ak(t,e){e||(e={});var r=rte();r.p(t);var n=wEe(t,e,e.dictionary?6:2,4);return NEe(n,e),nte(n,n.length-4,r.d()),n}var CEe=typeof TextDecoder<"u"&&new TextDecoder,_Ee=0;try{CEe.decode(tte,{stream:!0}),_Ee=1}catch{}function EEe(t){if(Array.isArray(t))return t}function SEe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,i,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}function J9(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function IEe(t,e){if(t){if(typeof t=="string")return J9(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?J9(t,e):void 0}}function jEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z9(t,e){return EEe(t)||SEe(t,e)||IEe(t,e)||jEe()}function eQ(t,e="utf8"){return new TextDecoder(e).decode(t)}const PEe=new TextEncoder;function BEe(t){return PEe.encode(t)}const TEe=1024*8,kEe=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),I5={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class lD{constructor(e=TEe,r={}){dr(this,"buffer");dr(this,"byteLength");dr(this,"byteOffset");dr(this,"length");dr(this,"offset");dr(this,"lastWrittenByte");dr(this,"littleEndian");dr(this,"_data");dr(this,"_mark");dr(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const a=r.offset?r.offset>>>0:0,s=e.byteLength-a;let i=a;(ArrayBuffer.isView(e)||e instanceof lD)&&(e.byteLength!==e.buffer.byteLength&&(i=e.byteOffset+a),e=e.buffer),n?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=i,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,i,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=I5[r].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,s=this.buffer.slice(a,a+n);if(this.littleEndian===kEe&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(a,a+n));l.reverse();const c=new I5[r](l.buffer);return this.offset+=n,c.reverse(),c}const i=new I5[r](s);return this.offset+=n,i}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return eQ(this.readBytes(e))}decodeText(e=1,r="utf8"){return eQ(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(BEe(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function n1(t){let e=t.length;for(;--e>=0;)t[e]=0}const FEe=3,OEe=258,ate=29,DEe=256,REe=DEe+1+ate,ste=30,MEe=512,LEe=new Array((REe+2)*2);n1(LEe);const UEe=new Array(ste*2);n1(UEe);const QEe=new Array(MEe);n1(QEe);const VEe=new Array(OEe-FEe+1);n1(VEe);const HEe=new Array(ate);n1(HEe);const $Ee=new Array(ste);n1($Ee);const GEe=(t,e,r,n)=>{let a=t&65535|0,s=t>>>16&65535|0,i=0;for(;r!==0;){i=r>2e3?2e3:r,r-=i;do a=a+e[n++]|0,s=s+a|0;while(--i);a%=65521,s%=65521}return a|s<<16|0};var sk=GEe;const KEe=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},qEe=new Uint32Array(KEe()),zEe=(t,e,r,n)=>{const a=qEe,s=n+r;t^=-1;for(let i=n;i<s;i++)t=t>>>8^a[(t^e[i])&255];return t^-1};var Af=zEe,ik={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ite={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const WEe=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var XEe=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)WEe(r,n)&&(t[n]=r[n])}}return t},YEe=t=>{let e=0;for(let n=0,a=t.length;n<a;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,a=0,s=t.length;n<s;n++){let i=t[n];r.set(i,a),a+=i.length}return r},ote={assign:XEe,flattenChunks:YEe};let lte=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{lte=!1}const h2=new Uint8Array(256);for(let t=0;t<256;t++)h2[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;h2[254]=h2[254]=1;var JEe=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,a,s,i=t.length,l=0;for(a=0;a<i;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<i&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(l),s=0,a=0;s<l;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<i&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|r&63):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|r&63):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|r&63);return e};const ZEe=(t,e)=>{if(e<65534&&t.subarray&&lte)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var eSe=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,a;const s=new Array(r*2);for(a=0,n=0;n<r;){let i=t[n++];if(i<128){s[a++]=i;continue}let l=h2[i];if(l>4){s[a++]=65533,n+=l-1;continue}for(i&=l===2?31:l===3?15:7;l>1&&n<r;)i=i<<6|t[n++]&63,l--;if(l>1){s[a++]=65533;continue}i<65536?s[a++]=i:(i-=65536,s[a++]=55296|i>>10&1023,s[a++]=56320|i&1023)}return ZEe(s,a)},tSe=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+h2[t[r]]>e?r:e},ok={string2buf:JEe,buf2string:eSe,utf8border:tSe};function rSe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var nSe=rSe;const pC=16209,aSe=16191;var sSe=function(e,r){let n,a,s,i,l,c,u,d,f,h,A,m,p,g,x,y,b,w,j,I,_,S,E,k;const P=e.state;n=e.next_in,E=e.input,a=n+(e.avail_in-5),s=e.next_out,k=e.output,i=s-(r-e.avail_out),l=s+(e.avail_out-257),c=P.dmax,u=P.wsize,d=P.whave,f=P.wnext,h=P.window,A=P.hold,m=P.bits,p=P.lencode,g=P.distcode,x=(1<<P.lenbits)-1,y=(1<<P.distbits)-1;e:do{m<15&&(A+=E[n++]<<m,m+=8,A+=E[n++]<<m,m+=8),b=p[A&x];t:for(;;){if(w=b>>>24,A>>>=w,m-=w,w=b>>>16&255,w===0)k[s++]=b&65535;else if(w&16){j=b&65535,w&=15,w&&(m<w&&(A+=E[n++]<<m,m+=8),j+=A&(1<<w)-1,A>>>=w,m-=w),m<15&&(A+=E[n++]<<m,m+=8,A+=E[n++]<<m,m+=8),b=g[A&y];r:for(;;){if(w=b>>>24,A>>>=w,m-=w,w=b>>>16&255,w&16){if(I=b&65535,w&=15,m<w&&(A+=E[n++]<<m,m+=8,m<w&&(A+=E[n++]<<m,m+=8)),I+=A&(1<<w)-1,I>c){e.msg="invalid distance too far back",P.mode=pC;break e}if(A>>>=w,m-=w,w=s-i,I>w){if(w=I-w,w>d&&P.sane){e.msg="invalid distance too far back",P.mode=pC;break e}if(_=0,S=h,f===0){if(_+=u-w,w<j){j-=w;do k[s++]=h[_++];while(--w);_=s-I,S=k}}else if(f<w){if(_+=u+f-w,w-=f,w<j){j-=w;do k[s++]=h[_++];while(--w);if(_=0,f<j){w=f,j-=w;do k[s++]=h[_++];while(--w);_=s-I,S=k}}}else if(_+=f-w,w<j){j-=w;do k[s++]=h[_++];while(--w);_=s-I,S=k}for(;j>2;)k[s++]=S[_++],k[s++]=S[_++],k[s++]=S[_++],j-=3;j&&(k[s++]=S[_++],j>1&&(k[s++]=S[_++]))}else{_=s-I;do k[s++]=k[_++],k[s++]=k[_++],k[s++]=k[_++],j-=3;while(j>2);j&&(k[s++]=k[_++],j>1&&(k[s++]=k[_++]))}}else if(w&64){e.msg="invalid distance code",P.mode=pC;break e}else{b=g[(b&65535)+(A&(1<<w)-1)];continue r}break}}else if(w&64)if(w&32){P.mode=aSe;break e}else{e.msg="invalid literal/length code",P.mode=pC;break e}else{b=p[(b&65535)+(A&(1<<w)-1)];continue t}break}}while(n<a&&s<l);j=m>>3,n-=j,m-=j<<3,A&=(1<<m)-1,e.next_in=n,e.next_out=s,e.avail_in=n<a?5+(a-n):5-(n-a),e.avail_out=s<l?257+(l-s):257-(s-l),P.hold=A,P.bits=m};const Wg=15,tQ=852,rQ=592,nQ=0,j5=1,aQ=2,iSe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),oSe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),lSe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),cSe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),uSe=(t,e,r,n,a,s,i,l)=>{const c=l.bits;let u=0,d=0,f=0,h=0,A=0,m=0,p=0,g=0,x=0,y=0,b,w,j,I,_,S=null,E;const k=new Uint16Array(Wg+1),P=new Uint16Array(Wg+1);let T=null,O,W,Ae;for(u=0;u<=Wg;u++)k[u]=0;for(d=0;d<n;d++)k[e[r+d]]++;for(A=c,h=Wg;h>=1&&k[h]===0;h--);if(A>h&&(A=h),h===0)return a[s++]=1<<24|64<<16|0,a[s++]=1<<24|64<<16|0,l.bits=1,0;for(f=1;f<h&&k[f]===0;f++);for(A<f&&(A=f),g=1,u=1;u<=Wg;u++)if(g<<=1,g-=k[u],g<0)return-1;if(g>0&&(t===nQ||h!==1))return-1;for(P[1]=0,u=1;u<Wg;u++)P[u+1]=P[u]+k[u];for(d=0;d<n;d++)e[r+d]!==0&&(i[P[e[r+d]]++]=d);if(t===nQ?(S=T=i,E=20):t===j5?(S=iSe,T=oSe,E=257):(S=lSe,T=cSe,E=0),y=0,d=0,u=f,_=s,m=A,p=0,j=-1,x=1<<A,I=x-1,t===j5&&x>tQ||t===aQ&&x>rQ)return 1;for(;;){O=u-p,i[d]+1<E?(W=0,Ae=i[d]):i[d]>=E?(W=T[i[d]-E],Ae=S[i[d]-E]):(W=96,Ae=0),b=1<<u-p,w=1<<m,f=w;do w-=b,a[_+(y>>p)+w]=O<<24|W<<16|Ae|0;while(w!==0);for(b=1<<u-1;y&b;)b>>=1;if(b!==0?(y&=b-1,y+=b):y=0,d++,--k[u]===0){if(u===h)break;u=e[r+i[d]]}if(u>A&&(y&I)!==j){for(p===0&&(p=A),_+=f,m=u-p,g=1<<m;m+p<h&&(g-=k[m+p],!(g<=0));)m++,g<<=1;if(x+=1<<m,t===j5&&x>tQ||t===aQ&&x>rQ)return 1;j=y&I,a[j]=A<<24|m<<16|_-s|0}}return y!==0&&(a[_+y]=u-p<<24|64<<16|0),l.bits=A,0};var hb=uSe;const dSe=0,cte=1,ute=2,{Z_FINISH:sQ,Z_BLOCK:fSe,Z_TREES:gC,Z_OK:qp,Z_STREAM_END:ASe,Z_NEED_DICT:hSe,Z_STREAM_ERROR:nd,Z_DATA_ERROR:dte,Z_MEM_ERROR:fte,Z_BUF_ERROR:mSe,Z_DEFLATED:iQ}=ite,O4=16180,oQ=16181,lQ=16182,cQ=16183,uQ=16184,dQ=16185,fQ=16186,AQ=16187,hQ=16188,mQ=16189,hS=16190,lA=16191,P5=16192,pQ=16193,B5=16194,gQ=16195,xQ=16196,vQ=16197,yQ=16198,xC=16199,vC=16200,bQ=16201,wQ=16202,NQ=16203,CQ=16204,_Q=16205,T5=16206,EQ=16207,SQ=16208,cs=16209,Ate=16210,hte=16211,pSe=852,gSe=592,xSe=15,vSe=xSe,IQ=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function ySe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const xg=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<O4||e.mode>hte?1:0},mte=t=>{if(xg(t))return nd;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=O4,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(pSe),e.distcode=e.distdyn=new Int32Array(gSe),e.sane=1,e.back=-1,qp},pte=t=>{if(xg(t))return nd;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,mte(t)},gte=(t,e)=>{let r;if(xg(t))return nd;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?nd:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,pte(t))},xte=(t,e)=>{if(!t)return nd;const r=new ySe;t.state=r,r.strm=t,r.window=null,r.mode=O4;const n=gte(t,e);return n!==qp&&(t.state=null),n},bSe=t=>xte(t,vSe);let jQ=!0,k5,F5;const wSe=t=>{if(jQ){k5=new Int32Array(512),F5=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(hb(cte,t.lens,0,288,k5,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;hb(ute,t.lens,0,32,F5,0,t.work,{bits:5}),jQ=!1}t.lencode=k5,t.lenbits=9,t.distcode=F5,t.distbits=5},vte=(t,e,r,n)=>{let a;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(a=s.wsize-s.wnext,a>n&&(a=n),s.window.set(e.subarray(r-n,r-n+a),s.wnext),n-=a,n?(s.window.set(e.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0},NSe=(t,e)=>{let r,n,a,s,i,l,c,u,d,f,h,A,m,p,g=0,x,y,b,w,j,I,_,S;const E=new Uint8Array(4);let k,P;const T=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(xg(t)||!t.output||!t.input&&t.avail_in!==0)return nd;r=t.state,r.mode===lA&&(r.mode=P5),i=t.next_out,a=t.output,c=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,u=r.hold,d=r.bits,f=l,h=c,S=qp;e:for(;;)switch(r.mode){case O4:if(r.wrap===0){r.mode=P5;break}for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,E[0]=u&255,E[1]=u>>>8&255,r.check=Af(r.check,E,2,0),u=0,d=0,r.mode=oQ;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=cs;break}if((u&15)!==iQ){t.msg="unknown compression method",r.mode=cs;break}if(u>>>=4,d-=4,_=(u&15)+8,r.wbits===0&&(r.wbits=_),_>15||_>r.wbits){t.msg="invalid window size",r.mode=cs;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=u&512?mQ:lA,u=0,d=0;break;case oQ:for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.flags=u,(r.flags&255)!==iQ){t.msg="unknown compression method",r.mode=cs;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=cs;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(E[0]=u&255,E[1]=u>>>8&255,r.check=Af(r.check,E,2,0)),u=0,d=0,r.mode=lQ;case lQ:for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(E[0]=u&255,E[1]=u>>>8&255,E[2]=u>>>16&255,E[3]=u>>>24&255,r.check=Af(r.check,E,4,0)),u=0,d=0,r.mode=cQ;case cQ:for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(E[0]=u&255,E[1]=u>>>8&255,r.check=Af(r.check,E,2,0)),u=0,d=0,r.mode=uQ;case uQ:if(r.flags&1024){for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(E[0]=u&255,E[1]=u>>>8&255,r.check=Af(r.check,E,2,0)),u=0,d=0}else r.head&&(r.head.extra=null);r.mode=dQ;case dQ:if(r.flags&1024&&(A=r.length,A>l&&(A=l),A&&(r.head&&(_=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+A),_)),r.flags&512&&r.wrap&4&&(r.check=Af(r.check,n,A,s)),l-=A,s+=A,r.length-=A),r.length))break e;r.length=0,r.mode=fQ;case fQ:if(r.flags&2048){if(l===0)break e;A=0;do _=n[s+A++],r.head&&_&&r.length<65536&&(r.head.name+=String.fromCharCode(_));while(_&&A<l);if(r.flags&512&&r.wrap&4&&(r.check=Af(r.check,n,A,s)),l-=A,s+=A,_)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=AQ;case AQ:if(r.flags&4096){if(l===0)break e;A=0;do _=n[s+A++],r.head&&_&&r.length<65536&&(r.head.comment+=String.fromCharCode(_));while(_&&A<l);if(r.flags&512&&r.wrap&4&&(r.check=Af(r.check,n,A,s)),l-=A,s+=A,_)break e}else r.head&&(r.head.comment=null);r.mode=hQ;case hQ:if(r.flags&512){for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.check&65535)){t.msg="header crc mismatch",r.mode=cs;break}u=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=lA;break;case mQ:for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}t.adler=r.check=IQ(u),u=0,d=0,r.mode=hS;case hS:if(r.havedict===0)return t.next_out=i,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,hSe;t.adler=r.check=1,r.mode=lA;case lA:if(e===fSe||e===gC)break e;case P5:if(r.last){u>>>=d&7,d-=d&7,r.mode=T5;break}for(;d<3;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}switch(r.last=u&1,u>>>=1,d-=1,u&3){case 0:r.mode=pQ;break;case 1:if(wSe(r),r.mode=xC,e===gC){u>>>=2,d-=2;break e}break;case 2:r.mode=xQ;break;case 3:t.msg="invalid block type",r.mode=cs}u>>>=2,d-=2;break;case pQ:for(u>>>=d&7,d-=d&7;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=cs;break}if(r.length=u&65535,u=0,d=0,r.mode=B5,e===gC)break e;case B5:r.mode=gQ;case gQ:if(A=r.length,A){if(A>l&&(A=l),A>c&&(A=c),A===0)break e;a.set(n.subarray(s,s+A),i),l-=A,s+=A,c-=A,i+=A,r.length-=A;break}r.mode=lA;break;case xQ:for(;d<14;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.nlen=(u&31)+257,u>>>=5,d-=5,r.ndist=(u&31)+1,u>>>=5,d-=5,r.ncode=(u&15)+4,u>>>=4,d-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=cs;break}r.have=0,r.mode=vQ;case vQ:for(;r.have<r.ncode;){for(;d<3;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.lens[T[r.have++]]=u&7,u>>>=3,d-=3}for(;r.have<19;)r.lens[T[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,k={bits:r.lenbits},S=hb(dSe,r.lens,0,19,r.lencode,0,r.work,k),r.lenbits=k.bits,S){t.msg="invalid code lengths set",r.mode=cs;break}r.have=0,r.mode=yQ;case yQ:for(;r.have<r.nlen+r.ndist;){for(;g=r.lencode[u&(1<<r.lenbits)-1],x=g>>>24,y=g>>>16&255,b=g&65535,!(x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(b<16)u>>>=x,d-=x,r.lens[r.have++]=b;else{if(b===16){for(P=x+2;d<P;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(u>>>=x,d-=x,r.have===0){t.msg="invalid bit length repeat",r.mode=cs;break}_=r.lens[r.have-1],A=3+(u&3),u>>>=2,d-=2}else if(b===17){for(P=x+3;d<P;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=x,d-=x,_=0,A=3+(u&7),u>>>=3,d-=3}else{for(P=x+7;d<P;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=x,d-=x,_=0,A=11+(u&127),u>>>=7,d-=7}if(r.have+A>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=cs;break}for(;A--;)r.lens[r.have++]=_}}if(r.mode===cs)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=cs;break}if(r.lenbits=9,k={bits:r.lenbits},S=hb(cte,r.lens,0,r.nlen,r.lencode,0,r.work,k),r.lenbits=k.bits,S){t.msg="invalid literal/lengths set",r.mode=cs;break}if(r.distbits=6,r.distcode=r.distdyn,k={bits:r.distbits},S=hb(ute,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,k),r.distbits=k.bits,S){t.msg="invalid distances set",r.mode=cs;break}if(r.mode=xC,e===gC)break e;case xC:r.mode=vC;case vC:if(l>=6&&c>=258){t.next_out=i,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,sSe(t,h),i=t.next_out,a=t.output,c=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,u=r.hold,d=r.bits,r.mode===lA&&(r.back=-1);break}for(r.back=0;g=r.lencode[u&(1<<r.lenbits)-1],x=g>>>24,y=g>>>16&255,b=g&65535,!(x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(y&&!(y&240)){for(w=x,j=y,I=b;g=r.lencode[I+((u&(1<<w+j)-1)>>w)],x=g>>>24,y=g>>>16&255,b=g&65535,!(w+x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=w,d-=w,r.back+=w}if(u>>>=x,d-=x,r.back+=x,r.length=b,y===0){r.mode=_Q;break}if(y&32){r.back=-1,r.mode=lA;break}if(y&64){t.msg="invalid literal/length code",r.mode=cs;break}r.extra=y&15,r.mode=bQ;case bQ:if(r.extra){for(P=r.extra;d<P;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=wQ;case wQ:for(;g=r.distcode[u&(1<<r.distbits)-1],x=g>>>24,y=g>>>16&255,b=g&65535,!(x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(!(y&240)){for(w=x,j=y,I=b;g=r.distcode[I+((u&(1<<w+j)-1)>>w)],x=g>>>24,y=g>>>16&255,b=g&65535,!(w+x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=w,d-=w,r.back+=w}if(u>>>=x,d-=x,r.back+=x,y&64){t.msg="invalid distance code",r.mode=cs;break}r.offset=b,r.extra=y&15,r.mode=NQ;case NQ:if(r.extra){for(P=r.extra;d<P;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=cs;break}r.mode=CQ;case CQ:if(c===0)break e;if(A=h-c,r.offset>A){if(A=r.offset-A,A>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=cs;break}A>r.wnext?(A-=r.wnext,m=r.wsize-A):m=r.wnext-A,A>r.length&&(A=r.length),p=r.window}else p=a,m=i-r.offset,A=r.length;A>c&&(A=c),c-=A,r.length-=A;do a[i++]=p[m++];while(--A);r.length===0&&(r.mode=vC);break;case _Q:if(c===0)break e;a[i++]=r.length,c--,r.mode=vC;break;case T5:if(r.wrap){for(;d<32;){if(l===0)break e;l--,u|=n[s++]<<d,d+=8}if(h-=c,t.total_out+=h,r.total+=h,r.wrap&4&&h&&(t.adler=r.check=r.flags?Af(r.check,a,h,i-h):sk(r.check,a,h,i-h)),h=c,r.wrap&4&&(r.flags?u:IQ(u))!==r.check){t.msg="incorrect data check",r.mode=cs;break}u=0,d=0}r.mode=EQ;case EQ:if(r.wrap&&r.flags){for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=cs;break}u=0,d=0}r.mode=SQ;case SQ:S=ASe;break e;case cs:S=dte;break e;case Ate:return fte;case hte:default:return nd}return t.next_out=i,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,(r.wsize||h!==t.avail_out&&r.mode<cs&&(r.mode<T5||e!==sQ))&&vte(t,t.output,t.next_out,h-t.avail_out),f-=t.avail_in,h-=t.avail_out,t.total_in+=f,t.total_out+=h,r.total+=h,r.wrap&4&&h&&(t.adler=r.check=r.flags?Af(r.check,a,h,t.next_out-h):sk(r.check,a,h,t.next_out-h)),t.data_type=r.bits+(r.last?64:0)+(r.mode===lA?128:0)+(r.mode===xC||r.mode===B5?256:0),(f===0&&h===0||e===sQ)&&S===qp&&(S=mSe),S},CSe=t=>{if(xg(t))return nd;let e=t.state;return e.window&&(e.window=null),t.state=null,qp},_Se=(t,e)=>{if(xg(t))return nd;const r=t.state;return r.wrap&2?(r.head=e,e.done=!1,qp):nd},ESe=(t,e)=>{const r=e.length;let n,a,s;return xg(t)||(n=t.state,n.wrap!==0&&n.mode!==hS)?nd:n.mode===hS&&(a=1,a=sk(a,e,r,0),a!==n.check)?dte:(s=vte(t,e,r,r),s?(n.mode=Ate,fte):(n.havedict=1,qp))};var SSe=pte,ISe=gte,jSe=mte,PSe=bSe,BSe=xte,TSe=NSe,kSe=CSe,FSe=_Se,OSe=ESe,DSe="pako inflate (from Nodeca project)",yA={inflateReset:SSe,inflateReset2:ISe,inflateResetKeep:jSe,inflateInit:PSe,inflateInit2:BSe,inflate:TSe,inflateEnd:kSe,inflateGetHeader:FSe,inflateSetDictionary:OSe,inflateInfo:DSe};function RSe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var MSe=RSe;const yte=Object.prototype.toString,{Z_NO_FLUSH:LSe,Z_FINISH:USe,Z_OK:m2,Z_STREAM_END:O5,Z_NEED_DICT:D5,Z_STREAM_ERROR:QSe,Z_DATA_ERROR:PQ,Z_MEM_ERROR:VSe}=ite;function Nw(t){this.options=ote.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new nSe,this.strm.avail_out=0;let r=yA.inflateInit2(this.strm,e.windowBits);if(r!==m2)throw new Error(ik[r]);if(this.header=new MSe,yA.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=ok.string2buf(e.dictionary):yte.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=yA.inflateSetDictionary(this.strm,e.dictionary),r!==m2)))throw new Error(ik[r])}Nw.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let s,i,l;if(this.ended)return!1;for(e===~~e?i=e:i=e===!0?USe:LSe,yte.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=yA.inflate(r,i),s===D5&&a&&(s=yA.inflateSetDictionary(r,a),s===m2?s=yA.inflate(r,i):s===PQ&&(s=D5));r.avail_in>0&&s===O5&&r.state.wrap>0&&t[r.next_in]!==0;)yA.inflateReset(r),s=yA.inflate(r,i);switch(s){case QSe:case PQ:case D5:case VSe:return this.onEnd(s),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||s===O5))if(this.options.to==="string"){let c=ok.utf8border(r.output,r.next_out),u=r.next_out-c,d=ok.buf2string(r.output,c);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(c,c+u),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(s===m2&&l===0)){if(s===O5)return s=yA.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Nw.prototype.onData=function(t){this.chunks.push(t)};Nw.prototype.onEnd=function(t){t===m2&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=ote.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function HSe(t,e){const r=new Nw(e);if(r.push(t),r.err)throw r.msg||ik[r.err];return r.result}var $Se=Nw,GSe=HSe,KSe={Inflate:$Se,inflate:GSe};const{Inflate:qSe,inflate:zSe}=KSe;var BQ=qSe,WSe=zSe;const bte=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;bte[t]=e}const TQ=4294967295;function XSe(t,e,r){let n=t;for(let a=0;a<r;a++)n=bte[(n^e[a])&255]^n>>>8;return n}function YSe(t,e){return(XSe(TQ,t,e)^TQ)>>>0}function kQ(t,e,r){const n=t.readUint32(),a=YSe(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(a!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${a}`)}function wte(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function Nte(t,e,r,n){let a=0;for(;a<n;a++)e[a]=t[a];for(;a<r;a++)e[a]=t[a]+e[a-n]&255}function Cte(t,e,r,n){let a=0;if(r.length===0)for(;a<n;a++)e[a]=t[a];else for(;a<n;a++)e[a]=t[a]+r[a]&255}function _te(t,e,r,n,a){let s=0;if(r.length===0){for(;s<a;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+(e[s-a]>>1)&255}else{for(;s<a;s++)e[s]=t[s]+(r[s]>>1)&255;for(;s<n;s++)e[s]=t[s]+(e[s-a]+r[s]>>1)&255}}function Ete(t,e,r,n,a){let s=0;if(r.length===0){for(;s<a;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+e[s-a]&255}else{for(;s<a;s++)e[s]=t[s]+r[s]&255;for(;s<n;s++)e[s]=t[s]+JSe(e[s-a],r[s],r[s-a])&255}}function JSe(t,e,r){const n=t+e-r,a=Math.abs(n-t),s=Math.abs(n-e),i=Math.abs(n-r);return a<=s&&a<=i?t:s<=i?e:r}function ZSe(t,e,r,n,a,s){switch(t){case 0:wte(e,r,a);break;case 1:Nte(e,r,a,s);break;case 2:Cte(e,r,n,a);break;case 3:_te(e,r,n,a,s);break;case 4:Ete(e,r,n,a,s);break;default:throw new Error(`Unsupported filter: ${t}`)}}const eIe=new Uint16Array([255]),tIe=new Uint8Array(eIe.buffer),rIe=tIe[0]===255;function nIe(t){const{data:e,width:r,height:n,channels:a,depth:s}=t,i=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(s/8)*a,c=new Uint8Array(n*r*l);let u=0;for(let d=0;d<7;d++){const f=i[d],h=Math.ceil((r-f.x)/f.xStep),A=Math.ceil((n-f.y)/f.yStep);if(h<=0||A<=0)continue;const m=h*l,p=new Uint8Array(m);for(let g=0;g<A;g++){const x=e[u++],y=e.subarray(u,u+m);u+=m;const b=new Uint8Array(m);ZSe(x,y,b,p,m,l),p.set(b);for(let w=0;w<h;w++){const j=f.x+w*f.xStep,I=f.y+g*f.yStep;if(!(j>=r||I>=n))for(let _=0;_<l;_++)c[(I*r+j)*l+_]=b[w*l+_]}}}if(s===16){const d=new Uint16Array(c.buffer);if(rIe)for(let f=0;f<d.length;f++)d[f]=aIe(d[f]);return d}else return c}function aIe(t){return(t&255)<<8|t>>8&255}const sIe=new Uint16Array([255]),iIe=new Uint8Array(sIe.buffer),oIe=iIe[0]===255,lIe=new Uint8Array(0);function FQ(t){const{data:e,width:r,height:n,channels:a,depth:s}=t,i=Math.ceil(s/8)*a,l=Math.ceil(s/8*a*r),c=new Uint8Array(n*l);let u=lIe,d=0,f,h;for(let A=0;A<n;A++){switch(f=e.subarray(d+1,d+1+l),h=c.subarray(A*l,(A+1)*l),e[d]){case 0:wte(f,h,l);break;case 1:Nte(f,h,l,i);break;case 2:Cte(f,h,u,l);break;case 3:_te(f,h,u,l,i);break;case 4:Ete(f,h,u,l,i);break;default:throw new Error(`Unsupported filter: ${e[d]}`)}u=h,d+=l+1}if(s===16){const A=new Uint16Array(c.buffer);if(oIe)for(let m=0;m<A.length;m++)A[m]=cIe(A[m]);return A}else return c}function cIe(t){return(t&255)<<8|t>>8&255}const Z_=Uint8Array.of(137,80,78,71,13,10,26,10);function OQ(t){if(!uIe(t.readBytes(Z_.length)))throw new Error("wrong PNG signature")}function uIe(t){if(t.length<Z_.length)return!1;for(let e=0;e<Z_.length;e++)if(t[e]!==Z_[e])return!1;return!0}const dIe="tEXt",fIe=0,Ste=new TextDecoder("latin1");function AIe(t){if(mIe(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const hIe=/^[\u0000-\u00FF]*$/;function mIe(t){if(!hIe.test(t))throw new Error("invalid latin1 text")}function pIe(t,e,r){const n=Ite(e);t[n]=gIe(e,r-n.length-1)}function Ite(t){for(t.mark();t.readByte()!==fIe;);const e=t.offset;t.reset();const r=Ste.decode(t.readBytes(e-t.offset-1));return t.skip(1),AIe(r),r}function gIe(t,e){return Ste.decode(t.readBytes(e))}const Vc={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},R5={UNKNOWN:-1,DEFLATE:0},DQ={UNKNOWN:-1,ADAPTIVE:0},M5={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},yC={NONE:0,BACKGROUND:1,PREVIOUS:2},L5={SOURCE:0,OVER:1};class xIe extends lD{constructor(r,n={}){super(r);dr(this,"_checkCrc");dr(this,"_inflator");dr(this,"_png");dr(this,"_apng");dr(this,"_end");dr(this,"_hasPalette");dr(this,"_palette");dr(this,"_hasTransparency");dr(this,"_transparency");dr(this,"_compressionMethod");dr(this,"_filterMethod");dr(this,"_interlaceMethod");dr(this,"_colorType");dr(this,"_isAnimated");dr(this,"_numberOfFrames");dr(this,"_numberOfPlays");dr(this,"_frames");dr(this,"_writingDataChunks");const{checkCrc:a=!1}=n;this._checkCrc=a,this._inflator=new BQ,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=R5.UNKNOWN,this._filterMethod=DQ.UNKNOWN,this._interlaceMethod=M5.UNKNOWN,this._colorType=Vc.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(OQ(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(OQ(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const a=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case dIe:pIe(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?kQ(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const a=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?kQ(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=vIe(this.readUint8());const n=this.readUint8();this._colorType=n;let a;switch(n){case Vc.GREYSCALE:a=1;break;case Vc.TRUECOLOUR:a=3;break;case Vc.INDEXED_COLOUR:a=1;break;case Vc.GREYSCALE_ALPHA:a=2;break;case Vc.TRUECOLOUR_ALPHA:a=4;break;case Vc.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==R5.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let s=0;s<n;s++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,a=this.offset+this.byteOffset;if(a+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case Vc.GREYSCALE:case Vc.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case Vc.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const a=this.readByte();this._palette[n].push(a)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case Vc.UNKNOWN:case Vc.GREYSCALE_ALPHA:case Vc.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=Ite(this),a=this.readUint8();if(a!==R5.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const s=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:WSe(s)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:n,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=FQ({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)n.data=a.data;else{const s=this._apng.frames.at(r-1);this.disposeFrame(a,s,n),this.addFrameDataToCanvas(n,a)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,a){switch(r.disposeOp){case yC.NONE:break;case yC.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let i=0;i<this._png.width;i++){const l=(s*r.width+i)*this._png.channels;for(let c=0;c<this._png.channels;c++)a.data[l+c]=0}break;case yC.PREVIOUS:a.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const a=1<<this._png.depth,s=(i,l)=>{const c=((i+n.yOffset)*this._png.width+n.xOffset+l)*this._png.channels,u=(i*n.width+l)*this._png.channels;return{index:c,frameIndex:u}};switch(n.blendOp){case L5.SOURCE:for(let i=0;i<n.height;i++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=s(i,l);for(let d=0;d<this._png.channels;d++)r.data[c+d]=n.data[u+d]}break;case L5.OVER:for(let i=0;i<n.height;i++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=s(i,l);for(let d=0;d<this._png.channels;d++){const f=n.data[u+this._png.channels-1]/a,h=d%(this._png.channels-1)===0?1:n.data[u+d],A=Math.floor(f*h+(1-f)*r.data[c+d]);r.data[c+d]+=A}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==DQ.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===M5.NO_INTERLACE)this._png.data=FQ({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===M5.ADAM7)this._png.data=nIe({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:yC.NONE,blendOp:L5.SOURCE,data:r}),this._inflator=new BQ,this._writingDataChunks=!1}}function vIe(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var RQ;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(RQ||(RQ={}));function yIe(t,e){return new xIe(t,e).decode()}var sn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function U5(){sn.console&&typeof sn.console.log=="function"&&sn.console.log.apply(sn.console,arguments)}var Da={log:U5,warn:function(t){sn.console&&(typeof sn.console.warn=="function"?sn.console.warn.apply(sn.console,arguments):U5.call(null,arguments))},error:function(t){sn.console&&(typeof sn.console.error=="function"?sn.console.error.apply(sn.console,arguments):U5(t))}};function Q5(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){$m(n.response,e,r)},n.onerror=function(){Da.error("could not download file")},n.send()}function MQ(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function bC(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var $m=sn.saveAs||((typeof window>"u"?"undefined":Na(window))!=="object"||window!==sn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=sn.URL||sn.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?MQ(a.href)?Q5(t,e,r):bC(a,a.target="_blank"):bC(a)):(a.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){bC(a)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(MQ(t))Q5(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){bC(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:Na(s)!=="object"&&(Da.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return Q5(t,e,r);var a=t.type==="application/octet-stream",s=/constructor/i.test(sn.HTMLElement)||sn.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||a&&s)&&(typeof FileReader>"u"?"undefined":Na(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=i?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},l.readAsDataURL(t)}else{var c=sn.URL||sn.webkitURL,u=c.createObjectURL(t);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function jte(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,i=a.exec(t);i&&(e=s(i),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}var eE=sn.atob.bind(sn),LQ=sn.btoa.bind(sn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function V5(t,e){var r=t[0],n=t[1],a=t[2],s=t[3];r=fl(r,n,a,s,e[0],7,-680876936),s=fl(s,r,n,a,e[1],12,-389564586),a=fl(a,s,r,n,e[2],17,606105819),n=fl(n,a,s,r,e[3],22,-1044525330),r=fl(r,n,a,s,e[4],7,-176418897),s=fl(s,r,n,a,e[5],12,1200080426),a=fl(a,s,r,n,e[6],17,-1473231341),n=fl(n,a,s,r,e[7],22,-45705983),r=fl(r,n,a,s,e[8],7,1770035416),s=fl(s,r,n,a,e[9],12,-1958414417),a=fl(a,s,r,n,e[10],17,-42063),n=fl(n,a,s,r,e[11],22,-1990404162),r=fl(r,n,a,s,e[12],7,1804603682),s=fl(s,r,n,a,e[13],12,-40341101),a=fl(a,s,r,n,e[14],17,-1502002290),r=Al(r,n=fl(n,a,s,r,e[15],22,1236535329),a,s,e[1],5,-165796510),s=Al(s,r,n,a,e[6],9,-1069501632),a=Al(a,s,r,n,e[11],14,643717713),n=Al(n,a,s,r,e[0],20,-373897302),r=Al(r,n,a,s,e[5],5,-701558691),s=Al(s,r,n,a,e[10],9,38016083),a=Al(a,s,r,n,e[15],14,-660478335),n=Al(n,a,s,r,e[4],20,-405537848),r=Al(r,n,a,s,e[9],5,568446438),s=Al(s,r,n,a,e[14],9,-1019803690),a=Al(a,s,r,n,e[3],14,-187363961),n=Al(n,a,s,r,e[8],20,1163531501),r=Al(r,n,a,s,e[13],5,-1444681467),s=Al(s,r,n,a,e[2],9,-51403784),a=Al(a,s,r,n,e[7],14,1735328473),r=hl(r,n=Al(n,a,s,r,e[12],20,-1926607734),a,s,e[5],4,-378558),s=hl(s,r,n,a,e[8],11,-2022574463),a=hl(a,s,r,n,e[11],16,1839030562),n=hl(n,a,s,r,e[14],23,-35309556),r=hl(r,n,a,s,e[1],4,-1530992060),s=hl(s,r,n,a,e[4],11,1272893353),a=hl(a,s,r,n,e[7],16,-155497632),n=hl(n,a,s,r,e[10],23,-1094730640),r=hl(r,n,a,s,e[13],4,681279174),s=hl(s,r,n,a,e[0],11,-358537222),a=hl(a,s,r,n,e[3],16,-722521979),n=hl(n,a,s,r,e[6],23,76029189),r=hl(r,n,a,s,e[9],4,-640364487),s=hl(s,r,n,a,e[12],11,-421815835),a=hl(a,s,r,n,e[15],16,530742520),r=ml(r,n=hl(n,a,s,r,e[2],23,-995338651),a,s,e[0],6,-198630844),s=ml(s,r,n,a,e[7],10,1126891415),a=ml(a,s,r,n,e[14],15,-1416354905),n=ml(n,a,s,r,e[5],21,-57434055),r=ml(r,n,a,s,e[12],6,1700485571),s=ml(s,r,n,a,e[3],10,-1894986606),a=ml(a,s,r,n,e[10],15,-1051523),n=ml(n,a,s,r,e[1],21,-2054922799),r=ml(r,n,a,s,e[8],6,1873313359),s=ml(s,r,n,a,e[15],10,-30611744),a=ml(a,s,r,n,e[6],15,-1560198380),n=ml(n,a,s,r,e[13],21,1309151649),r=ml(r,n,a,s,e[4],6,-145523070),s=ml(s,r,n,a,e[11],10,-1120210379),a=ml(a,s,r,n,e[2],15,718787259),n=ml(n,a,s,r,e[9],21,-343485551),t[0]=E0(r,t[0]),t[1]=E0(n,t[1]),t[2]=E0(a,t[2]),t[3]=E0(s,t[3])}function D4(t,e,r,n,a,s){return e=E0(E0(e,t),E0(n,s)),E0(e<<a|e>>>32-a,r)}function fl(t,e,r,n,a,s,i){return D4(e&r|~e&n,t,e,a,s,i)}function Al(t,e,r,n,a,s,i){return D4(e&n|r&~n,t,e,a,s,i)}function hl(t,e,r,n,a,s,i){return D4(e^r^n,t,e,a,s,i)}function ml(t,e,r,n,a,s,i){return D4(r^(e|~n),t,e,a,s,i)}function Pte(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)V5(n,bIe(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(V5(n,a),e=0;e<16;e++)a[e]=0;return a[14]=8*r,V5(n,a),n}function bIe(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var UQ="0123456789abcdef".split("");function wIe(t){for(var e="",r=0;r<4;r++)e+=UQ[t>>8*r+4&15]+UQ[t>>8*r&15];return e}function NIe(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function lk(t){return Pte(t).map(NIe).join("")}var CIe=function(t){for(var e=0;e<t.length;e++)t[e]=wIe(t[e]);return t.join("")}(Pte("hello"))!="5d41402abc4b2a76b9719d911017c592";function E0(t,e){if(CIe){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function ck(t,e){var r,n,a,s;if(t!==r){for(var i=(a=t,s=1+(256/t.length|0),new Array(s+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+i.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=t,n=l}else l=n;var f=e.length,h=0,A=0,m="";for(c=0;c<f;c++)A=(A+(d=l[h=(h+1)%256]))%256,l[h]=l[A],l[A]=d,i=l[(l[h]+l[A])%256],m+=String.fromCharCode(e.charCodeAt(c)^i);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var QQ={print:4,modify:8,copy:16,"annot-forms":32};function xx(t,e,r,n){this.v=1,this.r=2;var a=192;t.forEach(function(l){if(QQ.perm!==void 0)throw new Error("Invalid permission: "+l);a+=QQ[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),i=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^a)),this.encryptionKey=lk(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=ck(this.encryptionKey,this.padding)}function vx(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var a=t.charCodeAt(n);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):t[n]}return e}function VQ(t){if(Na(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var s=Math.random().toString(35);return e[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in e[r]){var i=e[r][s];try{i[0].apply(t,n)}catch(l){sn.console&&Da.error("jsPDF PubSub Error",l.message,l)}i[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function p2(t){if(!(this instanceof p2))return new p2(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function Bte(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function x0(t,e,r,n,a){if(!(this instanceof x0))return new x0(t,e,r,n,a);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,Bte.call(this,n,a)}function ip(t,e,r,n,a){if(!(this instanceof ip))return new ip(t,e,r,n,a);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,Bte.call(this,n,a)}function Br(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],i=[],l=1,c=16,u="S",d=null;Na(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,a=t.format||a,s=t.compress||t.compressPdf||s,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),u=t.defaultPathOperation||"S"),i=t.filters||(s===!0?["FlateEncode"]:i),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=t.putOnlyUsedFonts||!1,h={},A={internal:{},__private__:{}};A.__private__.PubSub=VQ;var m="1.3",p=A.__private__.getPdfVersion=function(){return m};A.__private__.setPdfVersion=function(M){m=M};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};A.__private__.getPageFormats=function(){return g};var x=A.__private__.getPageFormat=function(M){return g[M]};a=a||"a4";var y="compat",b="advanced",w=y;function j(){this.saveGraphicsState(),Z(new te(ue,0,0,-ue,0,yu()*ue).toString()+" cm"),this.setFontSize(this.getFontSize()/ue),u="n",w=b}function I(){this.restoreGraphicsState(),u="S",w=y}var _=A.__private__.combineFontStyleAndFontWeight=function(M,Ee){if(M=="bold"&&Ee=="normal"||M=="bold"&&Ee==400||M=="normal"&&Ee=="italic"||M=="bold"&&Ee=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ee&&(M=Ee==400||Ee==="normal"?M==="italic"?"italic":"normal":Ee!=700&&Ee!=="bold"||M!=="normal"?(Ee==700?"bold":Ee)+""+M:"bold"),M};A.advancedAPI=function(M){var Ee=w===y;return Ee&&j.call(this),typeof M!="function"||(M(this),Ee&&I.call(this)),this},A.compatAPI=function(M){var Ee=w===b;return Ee&&I.call(this),typeof M!="function"||(M(this),Ee&&j.call(this)),this},A.isAdvancedAPI=function(){return w===b};var S,E=function(M){if(w!==b)throw new Error(M+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},k=A.roundToPrecision=A.__private__.roundToPrecision=function(M,Ee){var at=e||Ee;if(isNaN(M)||isNaN(at))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return M.toFixed(at).replace(/0+$/,"")};S=A.hpf=A.__private__.hpf=typeof c=="number"?function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.hpf");return k(M,c)}:c==="smart"?function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.hpf");return k(M,M>-1&&M<1?16:5)}:function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.hpf");return k(M,16)};var P=A.f2=A.__private__.f2=function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.f2");return k(M,2)},T=A.__private__.f3=function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.f3");return k(M,3)},O=A.scale=A.__private__.scale=function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.scale");return w===y?M*ue:w===b?M:void 0},W=function(M){return O(function(Ee){return w===y?yu()-Ee:w===b?Ee:void 0}(M))};A.__private__.setPrecision=A.setPrecision=function(M){typeof parseInt(M,10)=="number"&&(e=parseInt(M,10))};var Ae,de="00000000000000000000000000000000",fe=A.__private__.getFileId=function(){return de},ge=A.__private__.setFileId=function(M){return de=M!==void 0&&/^[a-fA-F0-9]{32}$/.test(M)?M.toUpperCase():de.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(kt=new xx(d.userPermissions,d.userPassword,d.ownerPassword,de)),de};A.setFileId=function(M){return ge(M),this},A.getFileId=function(){return fe()};var ee=A.__private__.convertDateToPDFDate=function(M){var Ee=M.getTimezoneOffset(),at=Ee<0?"+":"-",ht=Math.floor(Math.abs(Ee/60)),Et=Math.abs(Ee%60),Yt=[at,H(ht),"'",H(Et),"'"].join("");return["D:",M.getFullYear(),H(M.getMonth()+1),H(M.getDate()),H(M.getHours()),H(M.getMinutes()),H(M.getSeconds()),Yt].join("")},Fe=A.__private__.convertPDFDateToDate=function(M){var Ee=parseInt(M.substr(2,4),10),at=parseInt(M.substr(6,2),10)-1,ht=parseInt(M.substr(8,2),10),Et=parseInt(M.substr(10,2),10),Yt=parseInt(M.substr(12,2),10),rr=parseInt(M.substr(14,2),10);return new Date(Ee,at,ht,Et,Yt,rr,0)},Pe=A.__private__.setCreationDate=function(M){var Ee;if(M===void 0&&(M=new Date),M instanceof Date)Ee=ee(M);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(M))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ee=M}return Ae=Ee},F=A.__private__.getCreationDate=function(M){var Ee=Ae;return M==="jsDate"&&(Ee=Fe(Ae)),Ee};A.setCreationDate=function(M){return Pe(M),this},A.getCreationDate=function(M){return F(M)};var Q,H=A.__private__.padd2=function(M){return("0"+parseInt(M)).slice(-2)},R=A.__private__.padd2Hex=function(M){return("00"+(M=M.toString())).substr(M.length)},z=0,J=[],D=[],U=0,ne=[],ve=[],L=!1,Ye=D;A.__private__.setCustomOutputDestination=function(M){L=!0,Ye=M};var ie=function(M){L||(Ye=M)};A.__private__.resetCustomOutputDestination=function(){L=!1,Ye=D};var Z=A.__private__.out=function(M){return M=M.toString(),U+=M.length+1,Ye.push(M),Ye},Oe=A.__private__.write=function(M){return Z(arguments.length===1?M.toString():Array.prototype.join.call(arguments," "))},le=A.__private__.getArrayBuffer=function(M){for(var Ee=M.length,at=new ArrayBuffer(Ee),ht=new Uint8Array(at);Ee--;)ht[Ee]=M.charCodeAt(Ee);return at},se=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];A.__private__.getStandardFonts=function(){return se};var Be=t.fontSize||16;A.__private__.setFontSize=A.setFontSize=function(M){return Be=w===b?M/ue:M,this};var je,ot=A.__private__.getFontSize=A.getFontSize=function(){return w===y?Be:Be*ue},mt=t.R2L||!1;A.__private__.setR2L=A.setR2L=function(M){return mt=M,this},A.__private__.getR2L=A.getR2L=function(){return mt};var ut,_e=A.__private__.setZoomMode=function(M){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(M))je=M;else if(isNaN(M)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(M)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+M+'" is not recognized.');je=M}else je=parseInt(M,10)};A.__private__.getZoomMode=function(){return je};var rt,we=A.__private__.setPageMode=function(M){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(M)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+M+'" is not recognized.');ut=M};A.__private__.getPageMode=function(){return ut};var Ce=A.__private__.setLayoutMode=function(M){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(M)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+M+'" is not recognized.');rt=M};A.__private__.getLayoutMode=function(){return rt},A.__private__.setDisplayMode=A.setDisplayMode=function(M,Ee,at){return _e(M),Ce(Ee),we(at),this};var Ue={title:"",subject:"",author:"",keywords:"",creator:""};A.__private__.getDocumentProperty=function(M){if(Object.keys(Ue).indexOf(M)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ue[M]},A.__private__.getDocumentProperties=function(){return Ue},A.__private__.setDocumentProperties=A.setProperties=A.setDocumentProperties=function(M){for(var Ee in Ue)Ue.hasOwnProperty(Ee)&&M[Ee]&&(Ue[Ee]=M[Ee]);return this},A.__private__.setDocumentProperty=function(M,Ee){if(Object.keys(Ue).indexOf(M)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ue[M]=Ee};var Ve,ue,ce,Te,Xe,ft={},gt={},vt=[],At={},ye={},$e={},Ne={},ct=null,xe=0,Qe=[],dt=new VQ(A),Bt=t.hotfixes||[],qe={},bt={},G=[],te=function M(Ee,at,ht,Et,Yt,rr){if(!(this instanceof M))return new M(Ee,at,ht,Et,Yt,rr);isNaN(Ee)&&(Ee=1),isNaN(at)&&(at=0),isNaN(ht)&&(ht=0),isNaN(Et)&&(Et=1),isNaN(Yt)&&(Yt=0),isNaN(rr)&&(rr=0),this._matrix=[Ee,at,ht,Et,Yt,rr]};Object.defineProperty(te.prototype,"sx",{get:function(){return this._matrix[0]},set:function(M){this._matrix[0]=M}}),Object.defineProperty(te.prototype,"shy",{get:function(){return this._matrix[1]},set:function(M){this._matrix[1]=M}}),Object.defineProperty(te.prototype,"shx",{get:function(){return this._matrix[2]},set:function(M){this._matrix[2]=M}}),Object.defineProperty(te.prototype,"sy",{get:function(){return this._matrix[3]},set:function(M){this._matrix[3]=M}}),Object.defineProperty(te.prototype,"tx",{get:function(){return this._matrix[4]},set:function(M){this._matrix[4]=M}}),Object.defineProperty(te.prototype,"ty",{get:function(){return this._matrix[5]},set:function(M){this._matrix[5]=M}}),Object.defineProperty(te.prototype,"a",{get:function(){return this._matrix[0]},set:function(M){this._matrix[0]=M}}),Object.defineProperty(te.prototype,"b",{get:function(){return this._matrix[1]},set:function(M){this._matrix[1]=M}}),Object.defineProperty(te.prototype,"c",{get:function(){return this._matrix[2]},set:function(M){this._matrix[2]=M}}),Object.defineProperty(te.prototype,"d",{get:function(){return this._matrix[3]},set:function(M){this._matrix[3]=M}}),Object.defineProperty(te.prototype,"e",{get:function(){return this._matrix[4]},set:function(M){this._matrix[4]=M}}),Object.defineProperty(te.prototype,"f",{get:function(){return this._matrix[5]},set:function(M){this._matrix[5]=M}}),Object.defineProperty(te.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(te.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(te.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(te.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),te.prototype.join=function(M){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(S).join(M)},te.prototype.multiply=function(M){var Ee=M.sx*this.sx+M.shy*this.shx,at=M.sx*this.shy+M.shy*this.sy,ht=M.shx*this.sx+M.sy*this.shx,Et=M.shx*this.shy+M.sy*this.sy,Yt=M.tx*this.sx+M.ty*this.shx+this.tx,rr=M.tx*this.shy+M.ty*this.sy+this.ty;return new te(Ee,at,ht,Et,Yt,rr)},te.prototype.decompose=function(){var M=this.sx,Ee=this.shy,at=this.shx,ht=this.sy,Et=this.tx,Yt=this.ty,rr=Math.sqrt(M*M+Ee*Ee),Pr=(M/=rr)*at+(Ee/=rr)*ht;at-=M*Pr,ht-=Ee*Pr;var Mr=Math.sqrt(at*at+ht*ht);return Pr/=Mr,M*(ht/=Mr)<Ee*(at/=Mr)&&(M=-M,Ee=-Ee,Pr=-Pr,rr=-rr),{scale:new te(rr,0,0,Mr,0,0),translate:new te(1,0,0,1,Et,Yt),rotate:new te(M,Ee,-Ee,M,0,0),skew:new te(1,0,Pr,1,0,0)}},te.prototype.toString=function(M){return this.join(" ")},te.prototype.inversed=function(){var M=this.sx,Ee=this.shy,at=this.shx,ht=this.sy,Et=this.tx,Yt=this.ty,rr=1/(M*ht-Ee*at),Pr=ht*rr,Mr=-Ee*rr,Zr=-at*rr,cn=M*rr;return new te(Pr,Mr,Zr,cn,-Pr*Et-Zr*Yt,-Mr*Et-cn*Yt)},te.prototype.applyToPoint=function(M){var Ee=M.x*this.sx+M.y*this.shx+this.tx,at=M.x*this.shy+M.y*this.sy+this.ty;return new xu(Ee,at)},te.prototype.applyToRectangle=function(M){var Ee=this.applyToPoint(M),at=this.applyToPoint(new xu(M.x+M.w,M.y+M.h));return new Sh(Ee.x,Ee.y,at.x-Ee.x,at.y-Ee.y)},te.prototype.clone=function(){var M=this.sx,Ee=this.shy,at=this.shx,ht=this.sy,Et=this.tx,Yt=this.ty;return new te(M,Ee,at,ht,Et,Yt)},A.Matrix=te;var He=A.matrixMult=function(M,Ee){return Ee.multiply(M)},re=new te(1,0,0,1,0,0);A.unitMatrix=A.identityMatrix=re;var be=function(M,Ee){if(!ye[M]){var at=(Ee instanceof x0?"Sh":"P")+(Object.keys(At).length+1).toString(10);Ee.id=at,ye[M]=at,At[at]=Ee,dt.publish("addPattern",Ee)}};A.ShadingPattern=x0,A.TilingPattern=ip,A.addShadingPattern=function(M,Ee){return E("addShadingPattern()"),be(M,Ee),this},A.beginTilingPattern=function(M){E("beginTilingPattern()"),sf(M.boundingBox[0],M.boundingBox[1],M.boundingBox[2]-M.boundingBox[0],M.boundingBox[3]-M.boundingBox[1],M.matrix)},A.endTilingPattern=function(M,Ee){E("endTilingPattern()"),Ee.stream=ve[Q].join(`
`),be(M,Ee),dt.publish("endTilingPattern",Ee),G.pop().restore()};var Me,tt=A.__private__.newObject=function(){var M=lt();return ae(M,!0),M},lt=A.__private__.newObjectDeferred=function(){return z++,J[z]=function(){return U},z},ae=function(M,Ee){return Ee=typeof Ee=="boolean"&&Ee,J[M]=U,Ee&&Z(M+" 0 obj"),M},V=A.__private__.newAdditionalObject=function(){var M={objId:lt(),content:""};return ne.push(M),M},X=lt(),me=lt(),Ie=A.__private__.decodeColorString=function(M){var Ee=M.split(" ");if(Ee.length!==2||Ee[1]!=="g"&&Ee[1]!=="G")Ee.length!==5||Ee[4]!=="k"&&Ee[4]!=="K"||(Ee=[(1-Ee[0])*(1-Ee[3]),(1-Ee[1])*(1-Ee[3]),(1-Ee[2])*(1-Ee[3]),"r"]);else{var at=parseFloat(Ee[0]);Ee=[at,at,at,"r"]}for(var ht="#",Et=0;Et<3;Et++)ht+=("0"+Math.floor(255*parseFloat(Ee[Et])).toString(16)).slice(-2);return ht},Y=A.__private__.encodeColorString=function(M){var Ee;typeof M=="string"&&(M={ch1:M});var at=M.ch1,ht=M.ch2,Et=M.ch3,Yt=M.ch4,rr=M.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof at=="string"&&at.charAt(0)!=="#"){var Pr=new jte(at);if(Pr.ok)at=Pr.toHex();else if(!/^\d*\.?\d*$/.test(at))throw new Error('Invalid color "'+at+'" passed to jsPDF.encodeColorString.')}if(typeof at=="string"&&/^#[0-9A-Fa-f]{3}$/.test(at)&&(at="#"+at[1]+at[1]+at[2]+at[2]+at[3]+at[3]),typeof at=="string"&&/^#[0-9A-Fa-f]{6}$/.test(at)){var Mr=parseInt(at.substr(1),16);at=Mr>>16&255,ht=Mr>>8&255,Et=255&Mr}if(ht===void 0||Yt===void 0&&at===ht&&ht===Et)Ee=typeof at=="string"?at+" "+rr[0]:M.precision===2?P(at/255)+" "+rr[0]:T(at/255)+" "+rr[0];else if(Yt===void 0||Na(Yt)==="object"){if(Yt&&!isNaN(Yt.a)&&Yt.a===0)return["1.","1.","1.",rr[1]].join(" ");Ee=typeof at=="string"?[at,ht,Et,rr[1]].join(" "):M.precision===2?[P(at/255),P(ht/255),P(Et/255),rr[1]].join(" "):[T(at/255),T(ht/255),T(Et/255),rr[1]].join(" ")}else Ee=typeof at=="string"?[at,ht,Et,Yt,rr[2]].join(" "):M.precision===2?[P(at),P(ht),P(Et),P(Yt),rr[2]].join(" "):[T(at),T(ht),T(Et),T(Yt),rr[2]].join(" ");return Ee},pe=A.__private__.getFilters=function(){return i},ke=A.__private__.putStream=function(M){var Ee=(M=M||{}).data||"",at=M.filters||pe(),ht=M.alreadyAppliedFilters||[],Et=M.addLength1||!1,Yt=Ee.length,rr=M.objectId,Pr=function(Qs){return Qs};if(d!==null&&rr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Pr=kt.encryptor(rr,0));var Mr={};at===!0&&(at=["FlateEncode"]);var Zr=M.additionalKeyValues||[],cn=(Mr=Br.API.processDataByFilters!==void 0?Br.API.processDataByFilters(Ee,at):{data:Ee,reverseChain:[]}).reverseChain+(Array.isArray(ht)?ht.join(" "):ht.toString());if(Mr.data.length!==0&&(Zr.push({key:"Length",value:Mr.data.length}),Et===!0&&Zr.push({key:"Length1",value:Yt})),cn.length!=0)if(cn.split("/").length-1==1)Zr.push({key:"Filter",value:cn});else{Zr.push({key:"Filter",value:"["+cn+"]"});for(var kn=0;kn<Zr.length;kn+=1)if(Zr[kn].key==="DecodeParms"){for(var na=[],ws=0;ws<Mr.reverseChain.split("/").length-1;ws+=1)na.push("null");na.push(Zr[kn].value),Zr[kn].value="["+na.join(" ")+"]"}}Z("<<");for(var Aa=0;Aa<Zr.length;Aa++)Z("/"+Zr[Aa].key+" "+Zr[Aa].value);Z(">>"),Mr.data.length!==0&&(Z("stream"),Z(Pr(Mr.data)),Z("endstream"))},Re=A.__private__.putPage=function(M){var Ee=M.number,at=M.data,ht=M.objId,Et=M.contentsObjId;ae(ht,!0),Z("<</Type /Page"),Z("/Parent "+M.rootDictionaryObjId+" 0 R"),Z("/Resources "+M.resourceDictionaryObjId+" 0 R"),Z("/MediaBox ["+parseFloat(S(M.mediaBox.bottomLeftX))+" "+parseFloat(S(M.mediaBox.bottomLeftY))+" "+S(M.mediaBox.topRightX)+" "+S(M.mediaBox.topRightY)+"]"),M.cropBox!==null&&Z("/CropBox ["+S(M.cropBox.bottomLeftX)+" "+S(M.cropBox.bottomLeftY)+" "+S(M.cropBox.topRightX)+" "+S(M.cropBox.topRightY)+"]"),M.bleedBox!==null&&Z("/BleedBox ["+S(M.bleedBox.bottomLeftX)+" "+S(M.bleedBox.bottomLeftY)+" "+S(M.bleedBox.topRightX)+" "+S(M.bleedBox.topRightY)+"]"),M.trimBox!==null&&Z("/TrimBox ["+S(M.trimBox.bottomLeftX)+" "+S(M.trimBox.bottomLeftY)+" "+S(M.trimBox.topRightX)+" "+S(M.trimBox.topRightY)+"]"),M.artBox!==null&&Z("/ArtBox ["+S(M.artBox.bottomLeftX)+" "+S(M.artBox.bottomLeftY)+" "+S(M.artBox.topRightX)+" "+S(M.artBox.topRightY)+"]"),typeof M.userUnit=="number"&&M.userUnit!==1&&Z("/UserUnit "+M.userUnit),dt.publish("putPage",{objId:ht,pageContext:Qe[Ee],pageNumber:Ee,page:at}),Z("/Contents "+Et+" 0 R"),Z(">>"),Z("endobj");var Yt=at.join(`
`);return w===b&&(Yt+=`
Q`),ae(Et,!0),ke({data:Yt,filters:pe(),objectId:Et}),Z("endobj"),ht},Ze=A.__private__.putPages=function(){var M,Ee,at=[];for(M=1;M<=xe;M++)Qe[M].objId=lt(),Qe[M].contentsObjId=lt();for(M=1;M<=xe;M++)at.push(Re({number:M,data:ve[M],objId:Qe[M].objId,contentsObjId:Qe[M].contentsObjId,mediaBox:Qe[M].mediaBox,cropBox:Qe[M].cropBox,bleedBox:Qe[M].bleedBox,trimBox:Qe[M].trimBox,artBox:Qe[M].artBox,userUnit:Qe[M].userUnit,rootDictionaryObjId:X,resourceDictionaryObjId:me}));ae(X,!0),Z("<</Type /Pages");var ht="/Kids [";for(Ee=0;Ee<xe;Ee++)ht+=at[Ee]+" 0 R ";Z(ht+"]"),Z("/Count "+xe),Z(">>"),Z("endobj"),dt.publish("postPutPages")},nt=function(M){dt.publish("putFont",{font:M,out:Z,newObject:tt,putStream:ke}),M.isAlreadyPutted!==!0&&(M.objectNumber=tt(),Z("<<"),Z("/Type /Font"),Z("/BaseFont /"+vx(M.postScriptName)),Z("/Subtype /Type1"),typeof M.encoding=="string"&&Z("/Encoding /"+M.encoding),Z("/FirstChar 32"),Z("/LastChar 255"),Z(">>"),Z("endobj"))},_t=function(M){M.objectNumber=tt();var Ee=[];Ee.push({key:"Type",value:"/XObject"}),Ee.push({key:"Subtype",value:"/Form"}),Ee.push({key:"BBox",value:"["+[S(M.x),S(M.y),S(M.x+M.width),S(M.y+M.height)].join(" ")+"]"}),Ee.push({key:"Matrix",value:"["+M.matrix.toString()+"]"});var at=M.pages[1].join(`
`);ke({data:at,additionalKeyValues:Ee,objectId:M.objectNumber}),Z("endobj")},Ct=function(M,Ee){Ee||(Ee=21);var at=tt(),ht=function(rr,Pr){var Mr,Zr=[],cn=1/(Pr-1);for(Mr=0;Mr<1;Mr+=cn)Zr.push(Mr);if(Zr.push(1),rr[0].offset!=0){var kn={offset:0,color:rr[0].color};rr.unshift(kn)}if(rr[rr.length-1].offset!=1){var na={offset:1,color:rr[rr.length-1].color};rr.push(na)}for(var ws="",Aa=0,Qs=0;Qs<Zr.length;Qs++){for(Mr=Zr[Qs];Mr>rr[Aa+1].offset;)Aa++;var Ns=rr[Aa].offset,Vs=(Mr-Ns)/(rr[Aa+1].offset-Ns),Cs=rr[Aa].color,ic=rr[Aa+1].color;ws+=R(Math.round((1-Vs)*Cs[0]+Vs*ic[0]).toString(16))+R(Math.round((1-Vs)*Cs[1]+Vs*ic[1]).toString(16))+R(Math.round((1-Vs)*Cs[2]+Vs*ic[2]).toString(16))}return ws.trim()}(M.colors,Ee),Et=[];Et.push({key:"FunctionType",value:"0"}),Et.push({key:"Domain",value:"[0.0 1.0]"}),Et.push({key:"Size",value:"["+Ee+"]"}),Et.push({key:"BitsPerSample",value:"8"}),Et.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Et.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ke({data:ht,additionalKeyValues:Et,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:at}),Z("endobj"),M.objectNumber=tt(),Z("<< /ShadingType "+M.type),Z("/ColorSpace /DeviceRGB");var Yt="/Coords ["+S(parseFloat(M.coords[0]))+" "+S(parseFloat(M.coords[1]))+" ";M.type===2?Yt+=S(parseFloat(M.coords[2]))+" "+S(parseFloat(M.coords[3])):Yt+=S(parseFloat(M.coords[2]))+" "+S(parseFloat(M.coords[3]))+" "+S(parseFloat(M.coords[4]))+" "+S(parseFloat(M.coords[5])),Z(Yt+="]"),M.matrix&&Z("/Matrix ["+M.matrix.toString()+"]"),Z("/Function "+at+" 0 R"),Z("/Extend [true true]"),Z(">>"),Z("endobj")},Nt=function(M,Ee){var at=lt(),ht=tt();Ee.push({resourcesOid:at,objectOid:ht}),M.objectNumber=ht;var Et=[];Et.push({key:"Type",value:"/Pattern"}),Et.push({key:"PatternType",value:"1"}),Et.push({key:"PaintType",value:"1"}),Et.push({key:"TilingType",value:"1"}),Et.push({key:"BBox",value:"["+M.boundingBox.map(S).join(" ")+"]"}),Et.push({key:"XStep",value:S(M.xStep)}),Et.push({key:"YStep",value:S(M.yStep)}),Et.push({key:"Resources",value:at+" 0 R"}),M.matrix&&Et.push({key:"Matrix",value:"["+M.matrix.toString()+"]"}),ke({data:M.stream,additionalKeyValues:Et,objectId:M.objectNumber}),Z("endobj")},Tt=function(M){for(var Ee in M.objectNumber=tt(),Z("<<"),M)switch(Ee){case"opacity":Z("/ca "+P(M[Ee]));break;case"stroke-opacity":Z("/CA "+P(M[Ee]))}Z(">>"),Z("endobj")},St=function(M){ae(M.resourcesOid,!0),Z("<<"),Z("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var Ee in Z("/Font <<"),ft)ft.hasOwnProperty(Ee)&&(f===!1||f===!0&&h.hasOwnProperty(Ee))&&Z("/"+Ee+" "+ft[Ee].objectNumber+" 0 R");Z(">>")}(),function(){if(Object.keys(At).length>0){for(var Ee in Z("/Shading <<"),At)At.hasOwnProperty(Ee)&&At[Ee]instanceof x0&&At[Ee].objectNumber>=0&&Z("/"+Ee+" "+At[Ee].objectNumber+" 0 R");dt.publish("putShadingPatternDict"),Z(">>")}}(),function(Ee){if(Object.keys(At).length>0){for(var at in Z("/Pattern <<"),At)At.hasOwnProperty(at)&&At[at]instanceof A.TilingPattern&&At[at].objectNumber>=0&&At[at].objectNumber<Ee&&Z("/"+at+" "+At[at].objectNumber+" 0 R");dt.publish("putTilingPatternDict"),Z(">>")}}(M.objectOid),function(){if(Object.keys($e).length>0){var Ee;for(Ee in Z("/ExtGState <<"),$e)$e.hasOwnProperty(Ee)&&$e[Ee].objectNumber>=0&&Z("/"+Ee+" "+$e[Ee].objectNumber+" 0 R");dt.publish("putGStateDict"),Z(">>")}}(),function(){for(var Ee in Z("/XObject <<"),qe)qe.hasOwnProperty(Ee)&&qe[Ee].objectNumber>=0&&Z("/"+Ee+" "+qe[Ee].objectNumber+" 0 R");dt.publish("putXobjectDict"),Z(">>")}(),Z(">>"),Z("endobj")},yt=function(M){gt[M.fontName]=gt[M.fontName]||{},gt[M.fontName][M.fontStyle]=M.id},cr=function(M,Ee,at,ht,Et){var Yt={id:"F"+(Object.keys(ft).length+1).toString(10),postScriptName:M,fontName:Ee,fontStyle:at,encoding:ht,isStandardFont:Et||!1,metadata:{}};return dt.publish("addFont",{font:Yt,instance:this}),ft[Yt.id]=Yt,yt(Yt),Yt.id},ur=A.__private__.pdfEscape=A.pdfEscape=function(M,Ee){return function(at,ht){var Et,Yt,rr,Pr,Mr,Zr,cn,kn,na;if(rr=(ht=ht||{}).sourceEncoding||"Unicode",Mr=ht.outputEncoding,(ht.autoencode||Mr)&&ft[Ve].metadata&&ft[Ve].metadata[rr]&&ft[Ve].metadata[rr].encoding&&(Pr=ft[Ve].metadata[rr].encoding,!Mr&&ft[Ve].encoding&&(Mr=ft[Ve].encoding),!Mr&&Pr.codePages&&(Mr=Pr.codePages[0]),typeof Mr=="string"&&(Mr=Pr[Mr]),Mr)){for(cn=!1,Zr=[],Et=0,Yt=at.length;Et<Yt;Et++)(kn=Mr[at.charCodeAt(Et)])?Zr.push(String.fromCharCode(kn)):Zr.push(at[Et]),Zr[Et].charCodeAt(0)>>8&&(cn=!0);at=Zr.join("")}for(Et=at.length;cn===void 0&&Et!==0;)at.charCodeAt(Et-1)>>8&&(cn=!0),Et--;if(!cn)return at;for(Zr=ht.noBOM?[]:[254,255],Et=0,Yt=at.length;Et<Yt;Et++){if((na=(kn=at.charCodeAt(Et))>>8)>>8)throw new Error("Character at position "+Et+" of string '"+at+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Zr.push(na),Zr.push(kn-(na<<8))}return String.fromCharCode.apply(void 0,Zr)}(M,Ee).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},lr=A.__private__.beginPage=function(M){ve[++xe]=[],Qe[xe]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(M[0]),topRightY:Number(M[1])}},mn(xe),ie(ve[Q])},Cr=function(M,Ee){var at,ht,Et;switch(r=Ee||r,typeof M=="string"&&(at=x(M.toLowerCase()),Array.isArray(at)&&(ht=at[0],Et=at[1])),Array.isArray(M)&&(ht=M[0]*ue,Et=M[1]*ue),isNaN(ht)&&(ht=a[0],Et=a[1]),(ht>14400||Et>14400)&&(Da.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ht=Math.min(14400,ht),Et=Math.min(14400,Et)),a=[ht,Et],r.substr(0,1)){case"l":Et>ht&&(a=[Et,ht]);break;case"p":ht>Et&&(a=[Et,ht])}lr(a),Jr(Ch),Z(md),Ia!==0&&Z(Ia+" J"),Cm!==0&&Z(Cm+" j"),dt.publish("addPage",{pageNumber:xe})},Nr=function(M){M>0&&M<=xe&&(ve.splice(M,1),Qe.splice(M,1),xe--,Q>xe&&(Q=xe),this.setPage(Q))},mn=function(M){M>0&&M<=xe&&(Q=M)},bn=A.__private__.getNumberOfPages=A.getNumberOfPages=function(){return ve.length-1},Rr=function(M,Ee,at){var ht,Et=void 0;return at=at||{},M=M!==void 0?M:ft[Ve].fontName,Ee=Ee!==void 0?Ee:ft[Ve].fontStyle,ht=M.toLowerCase(),gt[ht]!==void 0&&gt[ht][Ee]!==void 0?Et=gt[ht][Ee]:gt[M]!==void 0&&gt[M][Ee]!==void 0?Et=gt[M][Ee]:at.disableWarning===!1&&Da.warn("Unable to look up font label for font '"+M+"', '"+Ee+"'. Refer to getFontList() for available fonts."),Et||at.noFallback||(Et=gt.times[Ee])==null&&(Et=gt.times.normal),Et},Nn=A.__private__.putInfo=function(){var M=tt(),Ee=function(ht){return ht};for(var at in d!==null&&(Ee=kt.encryptor(M,0)),Z("<<"),Z("/Producer ("+ur(Ee("jsPDF "+Br.version))+")"),Ue)Ue.hasOwnProperty(at)&&Ue[at]&&Z("/"+at.substr(0,1).toUpperCase()+at.substr(1)+" ("+ur(Ee(Ue[at]))+")");Z("/CreationDate ("+ur(Ee(Ae))+")"),Z(">>"),Z("endobj")},za=A.__private__.putCatalog=function(M){var Ee=(M=M||{}).rootDictionaryObjId||X;switch(tt(),Z("<<"),Z("/Type /Catalog"),Z("/Pages "+Ee+" 0 R"),je||(je="fullwidth"),je){case"fullwidth":Z("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Z("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Z("/OpenAction [3 0 R /Fit]");break;case"original":Z("/OpenAction [3 0 R /XYZ null null 1]");break;default:var at=""+je;at.substr(at.length-1)==="%"&&(je=parseInt(je)/100),typeof je=="number"&&Z("/OpenAction [3 0 R /XYZ null null "+P(je)+"]")}switch(rt||(rt="continuous"),rt){case"continuous":Z("/PageLayout /OneColumn");break;case"single":Z("/PageLayout /SinglePage");break;case"two":case"twoleft":Z("/PageLayout /TwoColumnLeft");break;case"tworight":Z("/PageLayout /TwoColumnRight")}ut&&Z("/PageMode /"+ut),dt.publish("putCatalog"),Z(">>"),Z("endobj")},ti=A.__private__.putTrailer=function(){Z("trailer"),Z("<<"),Z("/Size "+(z+1)),Z("/Root "+z+" 0 R"),Z("/Info "+(z-1)+" 0 R"),d!==null&&Z("/Encrypt "+kt.oid+" 0 R"),Z("/ID [ <"+de+"> <"+de+"> ]"),Z(">>")},Mn=A.__private__.putHeader=function(){Z("%PDF-"+m),Z("%")},Us=A.__private__.putXRef=function(){var M="0000000000";Z("xref"),Z("0 "+(z+1)),Z("0000000000 65535 f ");for(var Ee=1;Ee<=z;Ee++)typeof J[Ee]=="function"?Z((M+J[Ee]()).slice(-10)+" 00000 n "):J[Ee]!==void 0?Z((M+J[Ee]).slice(-10)+" 00000 n "):Z("0000000000 00000 n ")},De=A.__private__.buildDocument=function(){var M;z=0,U=0,D=[],J=[],ne=[],X=lt(),me=lt(),ie(D),dt.publish("buildDocument"),Mn(),Ze(),function(){dt.publish("putAdditionalObjects");for(var at=0;at<ne.length;at++){var ht=ne[at];ae(ht.objId,!0),Z(ht.content),Z("endobj")}dt.publish("postPutAdditionalObjects")}(),M=[],function(){for(var at in ft)ft.hasOwnProperty(at)&&(f===!1||f===!0&&h.hasOwnProperty(at))&&nt(ft[at])}(),function(){var at;for(at in $e)$e.hasOwnProperty(at)&&Tt($e[at])}(),function(){for(var at in qe)qe.hasOwnProperty(at)&&_t(qe[at])}(),function(at){var ht;for(ht in At)At.hasOwnProperty(ht)&&(At[ht]instanceof x0?Ct(At[ht]):At[ht]instanceof ip&&Nt(At[ht],at))}(M),dt.publish("putResources"),M.forEach(St),St({resourcesOid:me,objectOid:Number.MAX_SAFE_INTEGER}),dt.publish("postPutResources"),d!==null&&(kt.oid=tt(),Z("<<"),Z("/Filter /Standard"),Z("/V "+kt.v),Z("/R "+kt.r),Z("/U <"+kt.toHexString(kt.U)+">"),Z("/O <"+kt.toHexString(kt.O)+">"),Z("/P "+kt.P),Z(">>"),Z("endobj")),Nn(),za();var Ee=U;return Us(),ti(),Z("startxref"),Z(""+Ee),Z("%%EOF"),ie(ve[Q]),D.join(`
`)},$t=A.__private__.getBlob=function(M){return new Blob([le(M)],{type:"application/pdf"})},Gt=A.output=A.__private__.output=(Me=function(M,Ee){switch(typeof(Ee=Ee||{})=="string"?Ee={filename:Ee}:Ee.filename=Ee.filename||"generated.pdf",M){case void 0:return De();case"save":A.save(Ee.filename);break;case"arraybuffer":return le(De());case"blob":return $t(De());case"bloburi":case"bloburl":if(sn.URL!==void 0&&typeof sn.URL.createObjectURL=="function")return sn.URL&&sn.URL.createObjectURL($t(De()))||void 0;Da.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var at="",ht=De();try{at=LQ(ht)}catch{at=LQ(unescape(encodeURIComponent(ht)))}return"data:application/pdf;filename="+Ee.filename+";base64,"+at;case"pdfobjectnewwindow":if(Object.prototype.toString.call(sn)==="[object Window]"){var Et="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Yt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ee.pdfObjectUrl&&(Et=Ee.pdfObjectUrl,Yt="");var rr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Et+'"'+Yt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ee)+");<\/script></body></html>",Pr=sn.open();return Pr!==null&&Pr.document.write(rr),Pr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(sn)==="[object Window]"){var Mr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ee.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ee.filename+'" width="500px" height="400px" /></body></html>',Zr=sn.open();if(Zr!==null){Zr.document.write(Mr);var cn=this;Zr.document.documentElement.querySelector("#pdfViewer").onload=function(){Zr.document.title=Ee.filename,Zr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(cn.output("bloburl"))}}return Zr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(sn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var kn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ee)+'"></iframe></body></html>',na=sn.open();if(na!==null&&(na.document.write(kn),na.document.title=Ee.filename),na||typeof safari>"u")return na;break;case"datauri":case"dataurl":return sn.document.location.href=this.output("datauristring",Ee);default:return null}},Me.foo=function(){try{return Me.apply(this,arguments)}catch(at){var M=at.stack||"";~M.indexOf(" at ")&&(M=M.split(" at ")[1]);var Ee="Error in function "+M.split(`
`)[0].split("<")[0]+": "+at.message;if(!sn.console)throw new Error(Ee);sn.console.error(Ee,at),sn.alert&&alert(Ee)}},Me.foo.bar=Me,Me.foo),It=function(M){return Array.isArray(Bt)===!0&&Bt.indexOf(M)>-1};switch(n){case"pt":ue=1;break;case"mm":ue=72/25.4;break;case"cm":ue=72/2.54;break;case"in":ue=72;break;case"px":ue=It("px_scaling")==1?.75:96/72;break;case"pc":case"em":ue=12;break;case"ex":ue=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);ue=n}var kt=null;Pe(),ge();var Ht=A.__private__.getPageInfo=A.getPageInfo=function(M){if(isNaN(M)||M%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Qe[M].objId,pageNumber:M,pageContext:Qe[M]}},Ft=A.__private__.getPageInfoByObjId=function(M){if(isNaN(M)||M%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ee in Qe)if(Qe[Ee].objId===M)break;return Ht(Ee)},Vt=A.__private__.getCurrentPageInfo=A.getCurrentPageInfo=function(){return{objId:Qe[Q].objId,pageNumber:Q,pageContext:Qe[Q]}};A.addPage=function(){return Cr.apply(this,arguments),this},A.setPage=function(){return mn.apply(this,arguments),ie.call(this,ve[Q]),this},A.insertPage=function(M){return this.addPage(),this.movePage(Q,M),this},A.movePage=function(M,Ee){var at,ht;if(M>Ee){at=ve[M],ht=Qe[M];for(var Et=M;Et>Ee;Et--)ve[Et]=ve[Et-1],Qe[Et]=Qe[Et-1];ve[Ee]=at,Qe[Ee]=ht,this.setPage(Ee)}else if(M<Ee){at=ve[M],ht=Qe[M];for(var Yt=M;Yt<Ee;Yt++)ve[Yt]=ve[Yt+1],Qe[Yt]=Qe[Yt+1];ve[Ee]=at,Qe[Ee]=ht,this.setPage(Ee)}return this},A.deletePage=function(){return Nr.apply(this,arguments),this},A.__private__.text=A.text=function(M,Ee,at,ht,Et){var Yt,rr,Pr,Mr,Zr,cn,kn,na,ws,Aa=(ht=ht||{}).scope||this;if(typeof M=="number"&&typeof Ee=="number"&&(typeof at=="string"||Array.isArray(at))){var Qs=at;at=Ee,Ee=M,M=Qs}if(arguments[3]instanceof te==0?(Pr=arguments[4],Mr=arguments[5],Na(kn=arguments[3])==="object"&&kn!==null||(typeof Pr=="string"&&(Mr=Pr,Pr=null),typeof kn=="string"&&(Mr=kn,kn=null),typeof kn=="number"&&(Pr=kn,kn=null),ht={flags:kn,angle:Pr,align:Mr})):(E("The transform parameter of text() with a Matrix value"),ws=Et),isNaN(Ee)||isNaN(at)||M==null)throw new Error("Invalid arguments passed to jsPDF.text");if(M.length===0)return Aa;var Ns,Vs="",Cs=typeof ht.lineHeightFactor=="number"?ht.lineHeightFactor:af,ic=Aa.internal.scaleFactor;function bu(ca){return ca=ca.split("	").join(Array(ht.TabLen||9).join(" ")),ur(ca,kn)}function wu(ca){for(var ka,ni=ca.concat(),Di=[],tA=ni.length;tA--;)typeof(ka=ni.shift())=="string"?Di.push(ka):Array.isArray(ca)&&(ka.length===1||ka[1]===void 0&&ka[2]===void 0)?Di.push(ka[0]):Di.push([ka[0],ka[1],ka[2]]);return Di}function C(ca,ka){var ni;if(typeof ca=="string")ni=ka(ca)[0];else if(Array.isArray(ca)){for(var Di,tA,P1=ca.concat(),Og=[],sN=P1.length;sN--;)typeof(Di=P1.shift())=="string"?Og.push(ka(Di)[0]):Array.isArray(Di)&&typeof Di[0]=="string"&&(tA=ka(Di[0],Di[1],Di[2]),Og.push([tA[0],tA[1],tA[2]]));ni=Og}return ni}var q=!1,he=!0;if(typeof M=="string")q=!0;else if(Array.isArray(M)){var We=M.concat();rr=[];for(var jt,Qt=We.length;Qt--;)(typeof(jt=We.shift())!="string"||Array.isArray(jt)&&typeof jt[0]!="string")&&(he=!1);q=he}if(q===!1)throw new Error('Type of text must be string or Array. "'+M+'" is not recognized.');typeof M=="string"&&(M=M.match(/[\r?\n]/)?M.split(/\r\n|\r|\n/g):[M]);var mr=Be/Aa.internal.scaleFactor,Ln=mr*(Cs-1);switch(ht.baseline){case"bottom":at-=Ln;break;case"top":at+=mr-Ln;break;case"hanging":at+=mr-2*Ln;break;case"middle":at+=mr/2-Ln}if((cn=ht.maxWidth||0)>0&&(typeof M=="string"?M=Aa.splitTextToSize(M,cn):Object.prototype.toString.call(M)==="[object Array]"&&(M=M.reduce(function(ca,ka){return ca.concat(Aa.splitTextToSize(ka,cn))},[]))),Yt={text:M,x:Ee,y:at,options:ht,mutex:{pdfEscape:ur,activeFontKey:Ve,fonts:ft,activeFontSize:Be}},dt.publish("preProcessText",Yt),M=Yt.text,Pr=(ht=Yt.options).angle,ws instanceof te==0&&Pr&&typeof Pr=="number"){Pr*=Math.PI/180,ht.rotationDirection===0&&(Pr=-Pr),w===b&&(Pr=-Pr);var _s=Math.cos(Pr),In=Math.sin(Pr);ws=new te(_s,In,-In,_s,0,0)}else Pr&&Pr instanceof te&&(ws=Pr);w!==b||ws||(ws=re),(Zr=ht.charSpace||gu)!==void 0&&(Vs+=S(O(Zr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(na=ht.horizontalScale)!==void 0&&(Vs+=S(100*na)+` Tz
`),ht.lang;var Yn=-1,La=ht.renderingMode!==void 0?ht.renderingMode:ht.stroke,kc=Aa.internal.getCurrentPageInfo().pageContext;switch(La){case 0:case!1:case"fill":Yn=0;break;case 1:case!0:case"stroke":Yn=1;break;case 2:case"fillThenStroke":Yn=2;break;case 3:case"invisible":Yn=3;break;case 4:case"fillAndAddForClipping":Yn=4;break;case 5:case"strokeAndAddPathForClipping":Yn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Yn=6;break;case 7:case"addToPathForClipping":Yn=7}var ol=kc.usedRenderingMode!==void 0?kc.usedRenderingMode:-1;Yn!==-1?Vs+=Yn+` Tr
`:ol!==-1&&(Vs+=`0 Tr
`),Yn!==-1&&(kc.usedRenderingMode=Yn),Mr=ht.align||"left";var Fo,pd=Be*Cs,N1=Aa.internal.pageSize.getWidth(),C1=ft[Ve];Zr=ht.charSpace||gu,cn=ht.maxWidth||0,kn=Object.assign({autoencode:!0,noBOM:!0},ht.flags);var jh=[],Sm=function(ca){return Aa.getStringUnitWidth(ca,{font:C1,charSpace:Zr,fontSize:Be,doKerning:!1})*Be/ic};if(Object.prototype.toString.call(M)==="[object Array]"){var Fc;rr=wu(M),Mr!=="left"&&(Fo=rr.map(Sm));var Oc,Ph=0;if(Mr==="right"){Ee-=Fo[0],M=[],Qt=rr.length;for(var eA=0;eA<Qt;eA++)eA===0?(Oc=co(Ee),Fc=hd(at)):(Oc=O(Ph-Fo[eA]),Fc=-pd),M.push([rr[eA],Oc,Fc]),Ph=Fo[eA]}else if(Mr==="center"){Ee-=Fo[0]/2,M=[],Qt=rr.length;for(var Bh=0;Bh<Qt;Bh++)Bh===0?(Oc=co(Ee),Fc=hd(at)):(Oc=O((Ph-Fo[Bh])/2),Fc=-pd),M.push([rr[Bh],Oc,Fc]),Ph=Fo[Bh]}else if(Mr==="left"){M=[],Qt=rr.length;for(var _1=0;_1<Qt;_1++)M.push(rr[_1])}else if(Mr==="justify"&&C1.encoding==="Identity-H"){M=[],Qt=rr.length,cn=cn!==0?cn:N1;for(var Fg=0,ri=0;ri<Qt;ri++)if(Fc=ri===0?hd(at):-pd,Oc=ri===0?co(Ee):Fg,ri<Qt-1){var aN=O((cn-Fo[ri])/(rr[ri].split(" ").length-1)),lf=rr[ri].split(" ");M.push([lf[0]+" ",Oc,Fc]),Fg=0;for(var cf=1;cf<lf.length;cf++){var E1=(Sm(lf[cf-1]+" "+lf[cf])-Sm(lf[cf]))*ic+aN;cf==lf.length-1?M.push([lf[cf],E1,0]):M.push([lf[cf]+" ",E1,0]),Fg-=E1}}else M.push([rr[ri],Oc,Fc]);M.push(["",Fg,0])}else{if(Mr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(M=[],Qt=rr.length,cn=cn!==0?cn:N1,ri=0;ri<Qt;ri++){Fc=ri===0?hd(at):-pd,Oc=ri===0?co(Ee):0;var S1=rr[ri].split(" ").length-1,I1=S1>0?(cn-Fo[ri])/S1:0;ri<Qt-1?jh.push(S(O(I1))):jh.push(0),M.push([rr[ri],Oc,Fc])}}}(typeof ht.R2L=="boolean"?ht.R2L:mt)===!0&&(M=C(M,function(ca,ka,ni){return[ca.split("").reverse().join(""),ka,ni]})),Yt={text:M,x:Ee,y:at,options:ht,mutex:{pdfEscape:ur,activeFontKey:Ve,fonts:ft,activeFontSize:Be}},dt.publish("postProcessText",Yt),M=Yt.text,Ns=Yt.mutex.isHex||!1;var j1=ft[Ve].encoding;j1!=="WinAnsiEncoding"&&j1!=="StandardEncoding"||(M=C(M,function(ca,ka,ni){return[bu(ca),ka,ni]})),rr=wu(M),M=[];for(var Th,kh,Fh,Im=Array.isArray(rr[0])?1:0,Oh="",jm=function(ca,ka,ni){var Di="";return ni instanceof te?(ni=typeof ht.angle=="number"?He(ni,new te(1,0,0,1,ca,ka)):He(new te(1,0,0,1,ca,ka),ni),w===b&&(ni=He(new te(1,0,0,-1,0,0),ni)),Di=ni.join(" ")+` Tm
`):Di=S(ca)+" "+S(ka)+` Td
`,Di},Nu=0;Nu<rr.length;Nu++){switch(Oh="",Im){case 1:Fh=(Ns?"<":"(")+rr[Nu][0]+(Ns?">":")"),Th=parseFloat(rr[Nu][1]),kh=parseFloat(rr[Nu][2]);break;case 0:Fh=(Ns?"<":"(")+rr[Nu]+(Ns?">":")"),Th=co(Ee),kh=hd(at)}jh!==void 0&&jh[Nu]!==void 0&&(Oh=jh[Nu]+` Tw
`),Nu===0?M.push(Oh+jm(Th,kh,ws)+Fh):Im===0?M.push(Oh+Fh):Im===1&&M.push(Oh+jm(Th,kh,ws)+Fh)}M=Im===0?M.join(` Tj
T* `):M.join(` Tj
`),M+=` Tj
`;var uf=`BT
/`;return uf+=Ve+" "+Be+` Tf
`,uf+=S(Be*Cs)+` TL
`,uf+=Tc+`
`,uf+=Vs,uf+=M,Z(uf+="ET"),h[Ve]=!0,Aa};var nr=A.__private__.clip=A.clip=function(M){return Z(M==="evenodd"?"W*":"W"),this};A.clipEvenOdd=function(){return nr("evenodd")},A.__private__.discardPath=A.discardPath=function(){return Z("n"),this};var Zt=A.__private__.isValidStyle=function(M){var Ee=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(M)!==-1&&(Ee=!0),Ee};A.__private__.setDefaultPathOperation=A.setDefaultPathOperation=function(M){return Zt(M)&&(u=M),this};var fa=A.__private__.getStyle=A.getStyle=function(M){var Ee=u;switch(M){case"D":case"S":Ee="S";break;case"F":Ee="f";break;case"FD":case"DF":Ee="B";break;case"f":case"f*":case"B":case"B*":Ee=M}return Ee},os=A.close=function(){return Z("h"),this};A.stroke=function(){return Z("S"),this},A.fill=function(M){return Xn("f",M),this},A.fillEvenOdd=function(M){return Xn("f*",M),this},A.fillStroke=function(M){return Xn("B",M),this},A.fillStrokeEvenOdd=function(M){return Xn("B*",M),this};var Xn=function(M,Ee){Na(Ee)==="object"?dd(Ee,M):Z(M)},bs=function(M){M===null||w===b&&M===void 0||(M=fa(M),Z(M))};function il(M,Ee,at,ht,Et){var Yt=new ip(Ee||this.boundingBox,at||this.xStep,ht||this.yStep,this.gState,Et||this.matrix);Yt.stream=this.stream;var rr=M+"$$"+this.cloneIndex+++"$$";return be(rr,Yt),Yt}var dd=function(M,Ee){var at=ye[M.key],ht=At[at];if(ht instanceof x0)Z("q"),Z(fd(Ee)),ht.gState&&A.setGState(ht.gState),Z(M.matrix.toString()+" cm"),Z("/"+at+" sh"),Z("Q");else if(ht instanceof ip){var Et=new te(1,0,0,-1,0,yu());M.matrix&&(Et=Et.multiply(M.matrix||re),at=il.call(ht,M.key,M.boundingBox,M.xStep,M.yStep,Et).id),Z("q"),Z("/Pattern cs"),Z("/"+at+" scn"),ht.gState&&A.setGState(ht.gState),Z(Ee),Z("Q")}},fd=function(M){switch(M){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Ad=A.moveTo=function(M,Ee){return Z(S(O(M))+" "+S(W(Ee))+" m"),this},mu=A.lineTo=function(M,Ee){return Z(S(O(M))+" "+S(W(Ee))+" l"),this},ko=A.curveTo=function(M,Ee,at,ht,Et,Yt){return Z([S(O(M)),S(W(Ee)),S(O(at)),S(W(ht)),S(O(Et)),S(W(Yt)),"c"].join(" ")),this};A.__private__.line=A.line=function(M,Ee,at,ht,Et){if(isNaN(M)||isNaN(Ee)||isNaN(at)||isNaN(ht)||!Zt(Et))throw new Error("Invalid arguments passed to jsPDF.line");return w===y?this.lines([[at-M,ht-Ee]],M,Ee,[1,1],Et||"S"):this.lines([[at-M,ht-Ee]],M,Ee,[1,1]).stroke()},A.__private__.lines=A.lines=function(M,Ee,at,ht,Et,Yt){var rr,Pr,Mr,Zr,cn,kn,na,ws,Aa,Qs,Ns,Vs;if(typeof M=="number"&&(Vs=at,at=Ee,Ee=M,M=Vs),ht=ht||[1,1],Yt=Yt||!1,isNaN(Ee)||isNaN(at)||!Array.isArray(M)||!Array.isArray(ht)||!Zt(Et)||typeof Yt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ad(Ee,at),rr=ht[0],Pr=ht[1],Zr=M.length,Qs=Ee,Ns=at,Mr=0;Mr<Zr;Mr++)(cn=M[Mr]).length===2?(Qs=cn[0]*rr+Qs,Ns=cn[1]*Pr+Ns,mu(Qs,Ns)):(kn=cn[0]*rr+Qs,na=cn[1]*Pr+Ns,ws=cn[2]*rr+Qs,Aa=cn[3]*Pr+Ns,Qs=cn[4]*rr+Qs,Ns=cn[5]*Pr+Ns,ko(kn,na,ws,Aa,Qs,Ns));return Yt&&os(),bs(Et),this},A.path=function(M){for(var Ee=0;Ee<M.length;Ee++){var at=M[Ee],ht=at.c;switch(at.op){case"m":Ad(ht[0],ht[1]);break;case"l":mu(ht[0],ht[1]);break;case"c":ko.apply(this,ht);break;case"h":os()}}return this},A.__private__.rect=A.rect=function(M,Ee,at,ht,Et){if(isNaN(M)||isNaN(Ee)||isNaN(at)||isNaN(ht)||!Zt(Et))throw new Error("Invalid arguments passed to jsPDF.rect");return w===y&&(ht=-ht),Z([S(O(M)),S(W(Ee)),S(O(at)),S(O(ht)),"re"].join(" ")),bs(Et),this},A.__private__.triangle=A.triangle=function(M,Ee,at,ht,Et,Yt,rr){if(isNaN(M)||isNaN(Ee)||isNaN(at)||isNaN(ht)||isNaN(Et)||isNaN(Yt)||!Zt(rr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[at-M,ht-Ee],[Et-at,Yt-ht],[M-Et,Ee-Yt]],M,Ee,[1,1],rr,!0),this},A.__private__.roundedRect=A.roundedRect=function(M,Ee,at,ht,Et,Yt,rr){if(isNaN(M)||isNaN(Ee)||isNaN(at)||isNaN(ht)||isNaN(Et)||isNaN(Yt)||!Zt(rr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Pr=4/3*(Math.SQRT2-1);return Et=Math.min(Et,.5*at),Yt=Math.min(Yt,.5*ht),this.lines([[at-2*Et,0],[Et*Pr,0,Et,Yt-Yt*Pr,Et,Yt],[0,ht-2*Yt],[0,Yt*Pr,-Et*Pr,Yt,-Et,Yt],[2*Et-at,0],[-Et*Pr,0,-Et,-Yt*Pr,-Et,-Yt],[0,2*Yt-ht],[0,-Yt*Pr,Et*Pr,-Yt,Et,-Yt]],M+Et,Ee,[1,1],rr,!0),this},A.__private__.ellipse=A.ellipse=function(M,Ee,at,ht,Et){if(isNaN(M)||isNaN(Ee)||isNaN(at)||isNaN(ht)||!Zt(Et))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Yt=4/3*(Math.SQRT2-1)*at,rr=4/3*(Math.SQRT2-1)*ht;return Ad(M+at,Ee),ko(M+at,Ee-rr,M+Yt,Ee-ht,M,Ee-ht),ko(M-Yt,Ee-ht,M-at,Ee-rr,M-at,Ee),ko(M-at,Ee+rr,M-Yt,Ee+ht,M,Ee+ht),ko(M+Yt,Ee+ht,M+at,Ee+rr,M+at,Ee),bs(Et),this},A.__private__.circle=A.circle=function(M,Ee,at,ht){if(isNaN(M)||isNaN(Ee)||isNaN(at)||!Zt(ht))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(M,Ee,at,at,ht)},A.setFont=function(M,Ee,at){return at&&(Ee=_(Ee,at)),Ve=Rr(M,Ee,{disableWarning:!1}),this};var pu=A.__private__.getFont=A.getFont=function(){return ft[Rr.apply(A,arguments)]};A.__private__.getFontList=A.getFontList=function(){var M,Ee,at={};for(M in gt)if(gt.hasOwnProperty(M))for(Ee in at[M]=[],gt[M])gt[M].hasOwnProperty(Ee)&&at[M].push(Ee);return at},A.addFont=function(M,Ee,at,ht,Et){var Yt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Yt.indexOf(arguments[3])!==-1?Et=arguments[3]:arguments[3]&&Yt.indexOf(arguments[3])==-1&&(at=_(at,ht)),cr.call(this,M,Ee,at,Et=Et||"Identity-H")};var af,Ch=t.lineWidth||.200025,Bg=A.__private__.getLineWidth=A.getLineWidth=function(){return Ch},Jr=A.__private__.setLineWidth=A.setLineWidth=function(M){return Ch=M,Z(S(O(M))+" w"),this};A.__private__.setLineDash=Br.API.setLineDash=Br.API.setLineDashPattern=function(M,Ee){if(M=M||[],Ee=Ee||0,isNaN(Ee)||!Array.isArray(M))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return M=M.map(function(at){return S(O(at))}).join(" "),Ee=S(O(Ee)),Z("["+M+"] "+Ee+" d"),this};var v1=A.__private__.getLineHeight=A.getLineHeight=function(){return Be*af};A.__private__.getLineHeight=A.getLineHeight=function(){return Be*af};var y1=A.__private__.setLineHeightFactor=A.setLineHeightFactor=function(M){return typeof(M=M||1.15)=="number"&&(af=M),this},b1=A.__private__.getLineHeightFactor=A.getLineHeightFactor=function(){return af};y1(t.lineHeight);var co=A.__private__.getHorizontalCoordinate=function(M){return O(M)},hd=A.__private__.getVerticalCoordinate=function(M){return w===b?M:Qe[Q].mediaBox.topRightY-Qe[Q].mediaBox.bottomLeftY-O(M)},w1=A.__private__.getHorizontalCoordinateString=A.getHorizontalCoordinateString=function(M){return S(co(M))},_h=A.__private__.getVerticalCoordinateString=A.getVerticalCoordinateString=function(M){return S(hd(M))},md=t.strokeColor||"0 G";A.__private__.getStrokeColor=A.getDrawColor=function(){return Ie(md)},A.__private__.setStrokeColor=A.setDrawColor=function(M,Ee,at,ht){return md=Y({ch1:M,ch2:Ee,ch3:at,ch4:ht,pdfColorType:"draw",precision:2}),Z(md),this};var Eh=t.fillColor||"0 g";A.__private__.getFillColor=A.getFillColor=function(){return Ie(Eh)},A.__private__.setFillColor=A.setFillColor=function(M,Ee,at,ht){return Eh=Y({ch1:M,ch2:Ee,ch3:at,ch4:ht,pdfColorType:"fill",precision:2}),Z(Eh),this};var Tc=t.textColor||"0 g",Jf=A.__private__.getTextColor=A.getTextColor=function(){return Ie(Tc)};A.__private__.setTextColor=A.setTextColor=function(M,Ee,at,ht){return Tc=Y({ch1:M,ch2:Ee,ch3:at,ch4:ht,pdfColorType:"text",precision:3}),this};var gu=t.charSpace,Nm=A.__private__.getCharSpace=A.getCharSpace=function(){return parseFloat(gu||0)};A.__private__.setCharSpace=A.setCharSpace=function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return gu=M,this};var Ia=0;A.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},A.__private__.setLineCap=A.setLineCap=function(M){var Ee=A.CapJoinStyles[M];if(Ee===void 0)throw new Error("Line cap style of '"+M+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ia=Ee,Z(Ee+" J"),this};var Cm=0;A.__private__.setLineJoin=A.setLineJoin=function(M){var Ee=A.CapJoinStyles[M];if(Ee===void 0)throw new Error("Line join style of '"+M+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Cm=Ee,Z(Ee+" j"),this},A.__private__.setLineMiterLimit=A.__private__.setMiterLimit=A.setLineMiterLimit=A.setMiterLimit=function(M){if(M=M||0,isNaN(M))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Z(S(O(M))+" M"),this},A.GState=p2,A.setGState=function(M){(M=typeof M=="string"?$e[Ne[M]]:Tg(null,M)).equals(ct)||(Z("/"+M.id+" gs"),ct=M)};var Tg=function(M,Ee){if(!M||!Ne[M]){var at=!1;for(var ht in $e)if($e.hasOwnProperty(ht)&&$e[ht].equals(Ee)){at=!0;break}if(at)Ee=$e[ht];else{var Et="GS"+(Object.keys($e).length+1).toString(10);$e[Et]=Ee,Ee.id=Et}return M&&(Ne[M]=Ee.id),dt.publish("addGState",Ee),Ee}};A.addGState=function(M,Ee){return Tg(M,Ee),this},A.saveGraphicsState=function(){return Z("q"),vt.push({key:Ve,size:Be,color:Tc}),this},A.restoreGraphicsState=function(){Z("Q");var M=vt.pop();return Ve=M.key,Be=M.size,Tc=M.color,ct=null,this},A.setCurrentTransformationMatrix=function(M){return Z(M.toString()+" cm"),this},A.comment=function(M){return Z("#"+M),this};var xu=function(M,Ee){var at=M||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return at},set:function(Yt){isNaN(Yt)||(at=parseFloat(Yt))}});var ht=Ee||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ht},set:function(Yt){isNaN(Yt)||(ht=parseFloat(Yt))}});var Et="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Et},set:function(Yt){Et=Yt.toString()}}),this},Sh=function(M,Ee,at,ht){xu.call(this,M,Ee),this.type="rect";var Et=at||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Et},set:function(rr){isNaN(rr)||(Et=parseFloat(rr))}});var Yt=ht||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Yt},set:function(rr){isNaN(rr)||(Yt=parseFloat(rr))}}),this},Zf=function(){this.page=xe,this.currentPage=Q,this.pages=ve.slice(0),this.pagesContext=Qe.slice(0),this.x=ce,this.y=Te,this.matrix=Xe,this.width=Dl(Q),this.height=kg(Q),this.outputDestination=Ye,this.id="",this.objectNumber=-1};Zf.prototype.restore=function(){xe=this.page,Q=this.currentPage,Qe=this.pagesContext,ve=this.pages,ce=this.x,Te=this.y,Xe=this.matrix,_m(Q,this.width),Rl(Q,this.height),Ye=this.outputDestination};var sf=function(M,Ee,at,ht,Et){G.push(new Zf),xe=Q=0,ve=[],ce=M,Te=Ee,Xe=Et,lr([at,ht])};for(var of in A.beginFormObject=function(M,Ee,at,ht,Et){return sf(M,Ee,at,ht,Et),this},A.endFormObject=function(M){return function(Ee){if(bt[Ee])G.pop().restore();else{var at=new Zf,ht="Xo"+(Object.keys(qe).length+1).toString(10);at.id=ht,bt[Ee]=ht,qe[ht]=at,dt.publish("addFormObject",at),G.pop().restore()}}(M),this},A.doFormObject=function(M,Ee){var at=qe[bt[M]];return Z("q"),Z(Ee.toString()+" cm"),Z("/"+at.id+" Do"),Z("Q"),this},A.getFormObject=function(M){var Ee=qe[bt[M]];return{x:Ee.x,y:Ee.y,width:Ee.width,height:Ee.height,matrix:Ee.matrix}},A.save=function(M,Ee){return M=M||"generated.pdf",(Ee=Ee||{}).returnPromise=Ee.returnPromise||!1,Ee.returnPromise===!1?($m($t(De()),M),typeof $m.unload=="function"&&sn.setTimeout&&setTimeout($m.unload,911),this):new Promise(function(at,ht){try{var Et=$m($t(De()),M);typeof $m.unload=="function"&&sn.setTimeout&&setTimeout($m.unload,911),at(Et)}catch(Yt){ht(Yt.message)}})},Br.API)Br.API.hasOwnProperty(of)&&(of==="events"&&Br.API.events.length?function(M,Ee){var at,ht,Et;for(Et=Ee.length-1;Et!==-1;Et--)at=Ee[Et][0],ht=Ee[Et][1],M.subscribe.apply(M,[at].concat(typeof ht=="function"?[ht]:ht))}(dt,Br.API.events):A[of]=Br.API[of]);function Dl(M){return Qe[M].mediaBox.topRightX-Qe[M].mediaBox.bottomLeftX}function _m(M,Ee){Qe[M].mediaBox.topRightX=Ee+Qe[M].mediaBox.bottomLeftX}function kg(M){return Qe[M].mediaBox.topRightY-Qe[M].mediaBox.bottomLeftY}function Rl(M,Ee){Qe[M].mediaBox.topRightY=Ee+Qe[M].mediaBox.bottomLeftY}var vu=A.getPageWidth=function(M){return Dl(M=M||Q)/ue},Ih=A.setPageWidth=function(M,Ee){_m(M,Ee*ue)},yu=A.getPageHeight=function(M){return kg(M=M||Q)/ue},Em=A.setPageHeight=function(M,Ee){Rl(M,Ee*ue)};return A.internal={pdfEscape:ur,getStyle:fa,getFont:pu,getFontSize:ot,getCharSpace:Nm,getTextColor:Jf,getLineHeight:v1,getLineHeightFactor:b1,getLineWidth:Bg,write:Oe,getHorizontalCoordinate:co,getVerticalCoordinate:hd,getCoordinateString:w1,getVerticalCoordinateString:_h,collections:{},newObject:tt,newAdditionalObject:V,newObjectDeferred:lt,newObjectDeferredBegin:ae,getFilters:pe,putStream:ke,events:dt,scaleFactor:ue,pageSize:{getWidth:function(){return vu(Q)},setWidth:function(M){Ih(Q,M)},getHeight:function(){return yu(Q)},setHeight:function(M){Em(Q,M)}},encryptionOptions:d,encryption:kt,getEncryptor:function(M){return d!==null?kt.encryptor(M,0):function(Ee){return Ee}},output:Gt,getNumberOfPages:bn,get pages(){return ve},out:Z,f2:P,f3:T,getPageInfo:Ht,getPageInfoByObjId:Ft,getCurrentPageInfo:Vt,getPDFVersion:p,Point:xu,Rectangle:Sh,Matrix:te,hasHotfix:It},Object.defineProperty(A.internal.pageSize,"width",{get:function(){return vu(Q)},set:function(M){Ih(Q,M)},enumerable:!0,configurable:!0}),Object.defineProperty(A.internal.pageSize,"height",{get:function(){return yu(Q)},set:function(M){Em(Q,M)},enumerable:!0,configurable:!0}),(function(M){for(var Ee=0,at=se.length;Ee<at;Ee++){var ht=cr.call(this,M[Ee][0],M[Ee][1],M[Ee][2],se[Ee][3],!0);f===!1&&(h[ht]=!0);var Et=M[Ee][0].split("-");yt({id:ht,fontName:Et[0],fontStyle:Et[1]||""})}dt.publish("addFonts",{fonts:ft,dictionary:gt})}).call(A,se),Ve="F1",Cr(a,r),dt.publish("initialized"),A}xx.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},xx.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},xx.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},xx.prototype.processOwnerPassword=function(t,e){return ck(lk(e).substr(0,5),t)},xx.prototype.encryptor=function(t,e){var r=lk(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return ck(r,n)}},p2.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||Na(t)!==Na(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},Br.API={events:[]},Br.version="3.0.4";var qs=Br.API,cD=1,vg=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Xg=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},dn=function(t){return t.toFixed(2)},zh=function(t){return t.toFixed(5)};qs.__acroform__={};var Sc=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},HQ=function(t){return t*cD},vf=function(t){var e=new kte,r=Or.internal.getHeight(t)||0,n=Or.internal.getWidth(t)||0;return e.BBox=[0,0,Number(dn(n)),Number(dn(r))],e},_Ie=qs.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},EIe=qs.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},SIe=qs.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Ai=qs.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return SIe(t,e-1)},hi=qs.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return _Ie(t,e-1)},mi=qs.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return EIe(t,e-1)},IIe=qs.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,a=t[0],s=t[1],i=t[2],l=t[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(s+l)||0,c.upperRight_X=r(a+i)||0,c.upperRight_Y=n(s)||0,[Number(dn(c.lowerLeft_X)),Number(dn(c.lowerLeft_Y)),Number(dn(c.upperRight_X)),Number(dn(c.upperRight_Y))]},jIe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=uk(t,r),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+a+" "+dn(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=vf(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},uk=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=t.multiline?a.map(function(P){return P.split(`
`)}):a.map(function(P){return[P]});var s=r,i=Or.internal.getHeight(t)||0;i=i<0?-i:i;var l=Or.internal.getWidth(t)||0;l=l<0?-l:l;var c=function(P,T,O){if(P+1<a.length){var W=T+" "+a[P+1][0];return wC(W,t,O).width<=l-4}return!1};s++;e:for(;s>0;){e="",s--;var u,d,f=wC("3",t,s).height,h=t.multiline?i-s:(i-f)/2,A=h+=2,m=0,p=0,g=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+wC(e,t,s=12).width+", FieldWidth:"+l+`
`;break}for(var x="",y=0,b=0;b<a.length;b++)if(a.hasOwnProperty(b)){var w=!1;if(a[b].length!==1&&g!==a[b].length-1){if((f+2)*(y+2)+2>i)continue e;x+=a[b][g],w=!0,p=b,b--}else{x=(x+=a[b][g]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var j=parseInt(b),I=c(j,x,s),_=b>=a.length-1;if(I&&!_){x+=" ",g=0;continue}if(I||_){if(_)p=j;else if(t.multiline&&(f+2)*(y+2)+2>i)continue e}else{if(!t.multiline||(f+2)*(y+2)+2>i)continue e;p=j}}for(var S="",E=m;E<=p;E++){var k=a[E];if(t.multiline){if(E===p){S+=k[g]+" ",g=(g+1)%k.length;continue}if(E===m){S+=k[k.length-1]+" ";continue}}S+=k[0]+" "}switch(S=S.substr(S.length-1)==" "?S.substr(0,S.length-1):S,d=wC(S,t,s).width,t.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;default:u=2}e+=dn(u)+" "+dn(A)+` Td
`,e+="("+vg(S)+`) Tj
`,e+=-dn(u)+` 0 Td
`,A=-(s+2),d=0,m=w?p:p+1,y++,x=""}break}return n.text=e,n.fontSize=s,n},wC=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},PIe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},BIe=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},TIe=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(tf.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(PIe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");cD=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Fte,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&BIe(s,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var i in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(i)){var l=n[i],c=[],u=l.Rect;if(l.Rect&&(l.Rect=IIe(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Or.createDefaultAppearanceStream(l),Na(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=jIe(l);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var f="";for(var h in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(h)){var A=l.appearanceStreamContent[h];if(f+="/"+h+" ",f+="<<",Object.keys(A).length>=1||Array.isArray(A)){for(var i in A)if(A.hasOwnProperty(i)){var m=A[i];typeof m=="function"&&(m=m.call(a,l)),f+="/"+i+" "+m+" ",a.internal.acroformPlugin.xForms.indexOf(m)>=0||a.internal.acroformPlugin.xForms.push(m)}}else typeof(m=A)=="function"&&(m=m.call(a,l)),f+="/"+i+" "+m,a.internal.acroformPlugin.xForms.indexOf(m)>=0||a.internal.acroformPlugin.xForms.push(m);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}s&&function(p,g){for(var x in p)if(p.hasOwnProperty(x)){var y=x,b=p[x];g.internal.newObjectDeferredBegin(b.objId,!0),Na(b)==="object"&&typeof b.putStream=="function"&&b.putStream(),delete p[y]}}(a.internal.acroformPlugin.xForms,a)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},Tte=qs.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(i){return i};if(Array.isArray(t)){for(var a="[",s=0;s<t.length;s++)switch(s!==0&&(a+=" "),Na(t[s])){case"boolean":case"number":case"object":a+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),a+="("+vg(n(t[s].toString()))+")"):a+=t[s].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},H5=function(t,e,r){var n=function(a){return a};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+vg(n(t))+")"},jf=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};jf.prototype.toString=function(){return this.objId+" 0 R"},jf.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},jf.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],a=this[n];a&&(Array.isArray(a)?t.push({key:n,value:Tte(a,this.objId,this.scope)}):a instanceof jf?(a.scope=this.scope,t.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:n,value:a}))}return t};var kte=function(){jf.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};Sc(kte,jf);var Fte=function(){jf.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+vg(r(t))+")"}},set:function(r){t=r}})};Sc(Fte,jf);var tf=function t(){jf.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');e=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ai(e,3)},set:function(x){x?this.F=hi(e,3):this.F=mi(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');r=x}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(x){n=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(x){n[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(x){n[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(x){n[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(x){n[3]=x}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof mS)return;s="FieldObject"+t.FieldNum++}var x=function(y){return y};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+vg(x(s))+")"},set:function(x){s=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(x){s=x}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(x){i=x}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(x){l=x}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(x){c=x}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/cD:u},set:function(x){u=x}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(x){d=x}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof mS||this instanceof $0))return H5(f,this.objId,this.scope)},set:function(x){x=x.toString(),f=x}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Ki==0?H5(h,this.objId,this.scope):h},set:function(x){x=x.toString(),h=this instanceof Ki==0?x.substr(0,1)==="("?Xg(x.substr(1,x.length-2)):Xg(x):x}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ki==1?Xg(h.substr(1,h.length-1)):h},set:function(x){x=x.toString(),h=this instanceof Ki==1?"/"+x:x}});var A=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(A)return A},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(A)return this instanceof Ki==0?H5(A,this.objId,this.scope):A},set:function(x){x=x.toString(),A=this instanceof Ki==0?x.substr(0,1)==="("?Xg(x.substr(1,x.length-2)):Xg(x):x}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ki==1?Xg(A.substr(1,A.length-1)):A},set:function(x){x=x.toString(),A=this instanceof Ki==1?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,p=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return p},set:function(x){x=!!x,p=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(x){m=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,1)},set:function(x){x?this.Ff=hi(this.Ff,1):this.Ff=mi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,2)},set:function(x){x?this.Ff=hi(this.Ff,2):this.Ff=mi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,3)},set:function(x){x?this.Ff=hi(this.Ff,3):this.Ff=mi(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(g!==null)return g},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');g=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(g){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};Sc(tf,jf);var xp=function(){tf.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Tte(e,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,i,l){l||(l=1);for(var c,u=[];c=i.exec(s);)u.push(c[l]);return u}(n,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,18)},set:function(r){r?this.Ff=hi(this.Ff,18):this.Ff=mi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=hi(this.Ff,19):this.Ff=mi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,20)},set:function(r){r?(this.Ff=hi(this.Ff,20),e.sort()):this.Ff=mi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,22)},set:function(r){r?this.Ff=hi(this.Ff,22):this.Ff=mi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,23)},set:function(r){r?this.Ff=hi(this.Ff,23):this.Ff=mi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,27)},set:function(r){r?this.Ff=hi(this.Ff,27):this.Ff=mi(this.Ff,27)}}),this.hasAppearanceStream=!1};Sc(xp,tf);var vp=function(){xp.call(this),this.fontName="helvetica",this.combo=!1};Sc(vp,xp);var yp=function(){vp.call(this),this.combo=!0};Sc(yp,vp);var mb=function(){yp.call(this),this.edit=!0};Sc(mb,yp);var Ki=function(){tf.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,15)},set:function(r){r?this.Ff=hi(this.Ff,15):this.Ff=mi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,16)},set:function(r){r?this.Ff=hi(this.Ff,16):this.Ff=mi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,17)},set:function(r){r?this.Ff=hi(this.Ff,17):this.Ff=mi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,26)},set:function(r){r?this.Ff=hi(this.Ff,26):this.Ff=mi(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,a=[];for(n in a.push("<<"),e)a.push("/"+n+" ("+vg(r(e[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){Na(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};Sc(Ki,tf);var pb=function(){Ki.call(this),this.pushButton=!0};Sc(pb,Ki);var bp=function(){Ki.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Sc(bp,Ki);var mS=function(){var t,e;tf.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,i=[];for(s in i.push("<<"),n)i.push("/"+s+" ("+vg(a(n[s]))+")");return i.push(">>"),i.join(`
`)},set:function(a){Na(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Or.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Sc(mS,tf),bp.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},bp.prototype.createOption=function(t){var e=new mS;return e.Parent=this,e.optionName=t,this.Kids.push(e),kIe.call(this.scope,e),e};var gb=function(){Ki.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Or.CheckBox.createAppearanceStream()};Sc(gb,Ki);var $0=function(){tf.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,13)},set:function(e){e?this.Ff=hi(this.Ff,13):this.Ff=mi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,21)},set:function(e){e?this.Ff=hi(this.Ff,21):this.Ff=mi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,23)},set:function(e){e?this.Ff=hi(this.Ff,23):this.Ff=mi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,24)},set:function(e){e?this.Ff=hi(this.Ff,24):this.Ff=mi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,25)},set:function(e){e?this.Ff=hi(this.Ff,25):this.Ff=mi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,26)},set:function(e){e?this.Ff=hi(this.Ff,26):this.Ff=mi(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Sc($0,tf);var xb=function(){$0.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,14)},set:function(t){t?this.Ff=hi(this.Ff,14):this.Ff=mi(this.Ff,14)}}),this.password=!0};Sc(xb,$0);var Or={CheckBox:{createAppearanceStream:function(){return{N:{On:Or.CheckBox.YesNormal},D:{On:Or.CheckBox.YesPushDown,Off:Or.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=vf(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),s=uk(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+dn(Or.internal.getWidth(t))+" "+dn(Or.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+dn(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=vf(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),a=[],s=Or.internal.getHeight(t),i=Or.internal.getWidth(t),l=uk(t,t.caption);return a.push("1 g"),a.push("0 0 "+dn(i)+" "+dn(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+dn(i-1)+" "+dn(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+dn(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=vf(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+dn(Or.internal.getWidth(t))+" "+dn(Or.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Or.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Or.RadioButton.Circle.YesNormal,e.D[t]=Or.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=vf(t);e.scope=t.scope;var r=[],n=Or.internal.getWidth(t)<=Or.internal.getHeight(t)?Or.internal.getWidth(t)/4:Or.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Or.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+zh(Or.internal.getWidth(t)/2)+" "+zh(Or.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=vf(t);e.scope=t.scope;var r=[],n=Or.internal.getWidth(t)<=Or.internal.getHeight(t)?Or.internal.getWidth(t)/4:Or.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*Or.internal.Bezier_C).toFixed(5)),i=Number((n*Or.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+zh(Or.internal.getWidth(t)/2)+" "+zh(Or.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+zh(Or.internal.getWidth(t)/2)+" "+zh(Or.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=vf(t);e.scope=t.scope;var r=[],n=Or.internal.getWidth(t)<=Or.internal.getHeight(t)?Or.internal.getWidth(t)/4:Or.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*Or.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+zh(Or.internal.getWidth(t)/2)+" "+zh(Or.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Or.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Or.RadioButton.Cross.YesNormal,e.D[t]=Or.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=vf(t);e.scope=t.scope;var r=[],n=Or.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+dn(Or.internal.getWidth(t)-2)+" "+dn(Or.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(dn(n.x1.x)+" "+dn(n.x1.y)+" m"),r.push(dn(n.x2.x)+" "+dn(n.x2.y)+" l"),r.push(dn(n.x4.x)+" "+dn(n.x4.y)+" m"),r.push(dn(n.x3.x)+" "+dn(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=vf(t);e.scope=t.scope;var r=Or.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+dn(Or.internal.getWidth(t))+" "+dn(Or.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+dn(Or.internal.getWidth(t)-2)+" "+dn(Or.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(dn(r.x1.x)+" "+dn(r.x1.y)+" m"),n.push(dn(r.x2.x)+" "+dn(r.x2.y)+" l"),n.push(dn(r.x4.x)+" "+dn(r.x4.y)+" m"),n.push(dn(r.x3.x)+" "+dn(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=vf(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+dn(Or.internal.getWidth(t))+" "+dn(Or.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};Or.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Or.internal.getWidth(t),r=Or.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},Or.internal.getWidth=function(t){var e=0;return Na(t)==="object"&&(e=HQ(t.Rect[2])),e},Or.internal.getHeight=function(t){var e=0;return Na(t)==="object"&&(e=HQ(t.Rect[3])),e};var kIe=qs.addField=function(t){if(TIe(this,t),!(t instanceof tf))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};qs.AcroFormChoiceField=xp,qs.AcroFormListBox=vp,qs.AcroFormComboBox=yp,qs.AcroFormEditBox=mb,qs.AcroFormButton=Ki,qs.AcroFormPushButton=pb,qs.AcroFormRadioButton=bp,qs.AcroFormCheckBox=gb,qs.AcroFormTextField=$0,qs.AcroFormPasswordField=xb,qs.AcroFormAppearance=Or,qs.AcroForm={ChoiceField:xp,ListBox:vp,ComboBox:yp,EditBox:mb,Button:Ki,PushButton:pb,RadioButton:bp,CheckBox:gb,TextField:$0,PasswordField:xb,Appearance:Or},Br.AcroForm={ChoiceField:xp,ListBox:vp,ComboBox:yp,EditBox:mb,Button:Ki,PushButton:pb,RadioButton:bp,CheckBox:gb,TextField:$0,PasswordField:xb,Appearance:Or};var FIe=Br.AcroForm;function Ote(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=t.__addimage__.getImageFileTypeByImageData=function(P,T){var O,W,Ae,de,fe,ge=r;if((T=T||r)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(I(P))for(fe in n)for(Ae=n[fe],O=0;O<Ae.length;O+=1){for(de=!0,W=0;W<Ae[O].length;W+=1)if(Ae[O][W]!==void 0&&Ae[O][W]!==P[W]){de=!1;break}if(de===!0){ge=fe;break}}else for(fe in n)for(Ae=n[fe],O=0;O<Ae.length;O+=1){for(de=!0,W=0;W<Ae[O].length;W+=1)if(Ae[O][W]!==void 0&&Ae[O][W]!==P.charCodeAt(W)){de=!1;break}if(de===!0){ge=fe;break}}return ge===r&&T!==r&&(ge=T),ge},s=function P(T){for(var O=this.internal.write,W=this.internal.putStream,Ae=(0,this.internal.getFilters)();Ae.indexOf("FlateEncode")!==-1;)Ae.splice(Ae.indexOf("FlateEncode"),1);T.objectId=this.internal.newObject();var de=[];if(de.push({key:"Type",value:"/XObject"}),de.push({key:"Subtype",value:"/Image"}),de.push({key:"Width",value:T.width}),de.push({key:"Height",value:T.height}),T.colorSpace===x.INDEXED?de.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(T.palette.length/3-1)+" "+("sMask"in T&&T.sMask!==void 0?T.objectId+2:T.objectId+1)+" 0 R]"}):(de.push({key:"ColorSpace",value:"/"+T.colorSpace}),T.colorSpace===x.DEVICE_CMYK&&de.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),de.push({key:"BitsPerComponent",value:T.bitsPerComponent}),"decodeParameters"in T&&T.decodeParameters!==void 0&&de.push({key:"DecodeParms",value:"<<"+T.decodeParameters+">>"}),"transparency"in T&&Array.isArray(T.transparency)&&T.transparency.length>0){for(var fe="",ge=0,ee=T.transparency.length;ge<ee;ge++)fe+=T.transparency[ge]+" "+T.transparency[ge]+" ";de.push({key:"Mask",value:"["+fe+"]"})}T.sMask!==void 0&&de.push({key:"SMask",value:T.objectId+1+" 0 R"});var Fe=T.filter!==void 0?["/"+T.filter]:void 0;if(W({data:T.data,additionalKeyValues:de,alreadyAppliedFilters:Fe,objectId:T.objectId}),O("endobj"),"sMask"in T&&T.sMask!==void 0){var Pe,F=(Pe=T.sMaskBitsPerComponent)!==null&&Pe!==void 0?Pe:T.bitsPerComponent,Q={width:T.width,height:T.height,colorSpace:"DeviceGray",bitsPerComponent:F,data:T.sMask};"filter"in T&&(Q.decodeParameters="/Predictor ".concat(T.predictor," /Colors 1 /BitsPerComponent ").concat(F," /Columns ").concat(T.width),Q.filter=T.filter),P.call(this,Q)}if(T.colorSpace===x.INDEXED){var H=this.internal.newObject();W({data:S(new Uint8Array(T.palette)),objectId:H}),O("endobj")}},i=function(){var P=this.internal.collections[e+"images"];for(var T in P)s.call(this,P[T])},l=function(){var P,T=this.internal.collections[e+"images"],O=this.internal.write;for(var W in T)O("/I"+(P=T[W]).index,P.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",l))},u=function(){var P=this.internal.collections[e+"images"];return c.call(this),P},d=function(){return Object.keys(this.internal.collections[e+"images"]).length},f=function(P){return typeof t["process"+P.toUpperCase()]=="function"},h=function(P){return Na(P)==="object"&&P.nodeType===1},A=function(P,T){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var O=""+P.getAttribute("src");if(O.indexOf("data:image/")===0)return eE(unescape(O).split("base64,").pop());var W=t.loadFile(O,!0);if(W!==void 0)return W}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var Ae;switch(T){case"PNG":Ae="image/png";break;case"WEBP":Ae="image/webp";break;default:Ae="image/jpeg"}return eE(P.toDataURL(Ae,1).split("base64,").pop())}},m=function(P){var T=this.internal.collections[e+"images"];if(T){for(var O in T)if(P===T[O].alias)return T[O]}},p=function(P,T,O){return P||T||(P=-96,T=-96),P<0&&(P=-1*O.width*72/P/this.internal.scaleFactor),T<0&&(T=-1*O.height*72/T/this.internal.scaleFactor),P===0&&(P=T*O.width/O.height),T===0&&(T=P*O.height/O.width),[P,T]},g=function(P,T,O,W,Ae,de){var fe=p.call(this,O,W,Ae),ge=this.internal.getCoordinateString,ee=this.internal.getVerticalCoordinateString,Fe=u.call(this);if(O=fe[0],W=fe[1],Fe[Ae.index]=Ae,de){de*=Math.PI/180;var Pe=Math.cos(de),F=Math.sin(de),Q=function(R){return R.toFixed(4)},H=[Q(Pe),Q(F),Q(-1*F),Q(Pe),0,0,"cm"]}this.internal.write("q"),de?(this.internal.write([1,"0","0",1,ge(P),ee(T+W),"cm"].join(" ")),this.internal.write(H.join(" ")),this.internal.write([ge(O),"0","0",ge(W),"0","0","cm"].join(" "))):this.internal.write([ge(O),"0","0",ge(W),ge(P),ee(T+W),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Ae.index+" Do"),this.internal.write("Q")},x=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=t.__addimage__.sHashCode=function(P){var T,O,W=0;if(typeof P=="string")for(O=P.length,T=0;T<O;T++)W=(W<<5)-W+P.charCodeAt(T),W|=0;else if(I(P))for(O=P.byteLength/2,T=0;T<O;T++)W=(W<<5)-W+P[T],W|=0;return W},w=t.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var T=!0;return P.length===0&&(T=!1),P.length%4!=0&&(T=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(T=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(T=!1),T},j=t.__addimage__.extractImageFromDataUrl=function(P){if(P==null||!(P=P.trim()).startsWith("data:"))return null;var T=P.indexOf(",");return T<0?null:P.substring(0,T).trim().endsWith("base64")?P.substring(T+1):null};t.__addimage__.isArrayBuffer=function(P){return P instanceof ArrayBuffer};var I=t.__addimage__.isArrayBufferView=function(P){return P instanceof Int8Array||P instanceof Uint8Array||P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array},_=t.__addimage__.binaryStringToUint8Array=function(P){for(var T=P.length,O=new Uint8Array(T),W=0;W<T;W++)O[W]=P.charCodeAt(W);return O},S=t.__addimage__.arrayBufferToBinaryString=function(P){for(var T="",O=I(P)?P:new Uint8Array(P),W=0;W<O.length;W+=8192)T+=String.fromCharCode.apply(null,O.subarray(W,W+8192));return T};t.addImage=function(){var P,T,O,W,Ae,de,fe,ge,ee;if(typeof arguments[1]=="number"?(T=r,O=arguments[1],W=arguments[2],Ae=arguments[3],de=arguments[4],fe=arguments[5],ge=arguments[6],ee=arguments[7]):(T=arguments[1],O=arguments[2],W=arguments[3],Ae=arguments[4],de=arguments[5],fe=arguments[6],ge=arguments[7],ee=arguments[8]),Na(P=arguments[0])==="object"&&!h(P)&&"imageData"in P){var Fe=P;P=Fe.imageData,T=Fe.format||T||r,O=Fe.x||O||0,W=Fe.y||W||0,Ae=Fe.w||Fe.width||Ae,de=Fe.h||Fe.height||de,fe=Fe.alias||fe,ge=Fe.compression||ge,ee=Fe.rotation||Fe.angle||ee}var Pe=this.internal.getFilters();if(ge===void 0&&Pe.indexOf("FlateEncode")!==-1&&(ge="SLOW"),isNaN(O)||isNaN(W))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var F=E.call(this,P,T,fe,ge);return g.call(this,O,W,Ae,de,F,ee),this};var E=function(P,T,O,W){var Ae,de,fe;if(typeof P=="string"&&a(P)===r){P=unescape(P);var ge=k(P,!1);(ge!==""||(ge=t.loadFile(P,!0))!==void 0)&&(P=ge)}if(h(P)&&(P=A(P,T)),T=a(P,T),!f(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(((fe=O)==null||fe.length===0)&&(O=function(ee){return typeof ee=="string"||I(ee)?b(ee):I(ee.data)?b(ee.data):null}(P)),(Ae=m.call(this,O))||(P instanceof Uint8Array||T==="RGBA"||(de=P,P=_(P)),Ae=this["process"+T.toUpperCase()](P,d.call(this),O,function(ee){return ee&&typeof ee=="string"&&(ee=ee.toUpperCase()),ee in t.image_compression?ee:y.NONE}(W),de)),!Ae)throw new Error("An unknown error occurred whilst processing the image.");return Ae},k=t.__addimage__.convertBase64ToBinaryString=function(P,T){T=typeof T!="boolean"||T;var O,W="";if(typeof P=="string"){var Ae;O=(Ae=j(P))!==null&&Ae!==void 0?Ae:P;try{W=eE(O)}catch(de){if(T)throw w(O)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+de.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return W};t.getImageProperties=function(P){var T,O,W="";if(h(P)&&(P=A(P)),typeof P=="string"&&a(P)===r&&((W=k(P,!1))===""&&(W=t.loadFile(P)||""),P=W),O=a(P),!f(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(P instanceof Uint8Array||(P=_(P)),!(T=this["process"+O.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return T.fileType=O,T}})(Br.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};Br.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,a,s,i=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var h=0;h<u.length;h++){n=u[h];var A=this.internal.pdfEscape,m=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),g=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(p.objId),y=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+i(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+A(x(n.contents))+")",s+=" /Popup "+g.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+A(x(y))+") >>",p.content=s;var b=p.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+i(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+b,n.open&&(s+=" /Open true"),s+=" >>",g.content=s,this.internal.write(p.objId,"0 R",g.objId,"0 R");break;case"freetext":a="/Rect ["+i(n.bounds.x)+" "+l(n.bounds.y)+" "+i(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var w=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+A(m(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+w+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var j=this.annotations._nameMap[n.options.name];n.options.pageNumber=j.page,n.options.top=j.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+A(m(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var I=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+I+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,a,s,i){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+s)},options:i,type:"link"})},t.textWithLink=function(r,n,a,s){var i,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var d=this.splitTextToSize(r,l).length;i=Math.ceil(u*d)}else l=c,i=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,a-u,l,i,s),c},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Br.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(p){return e[p.charCodeAt(0)]!==void 0},i=t.__arabicParser__.isArabicLetter=function(p){return typeof p=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(p)},l=t.__arabicParser__.isArabicEndLetter=function(p){return i(p)&&s(p)&&e[p.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(p){return i(p)&&a.indexOf(p.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(p){return i(p)&&s(p)&&e[p.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(p){return i(p)&&s(p)&&e[p.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(p){return i(p)&&s(p)&&e[p.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(p){return i(p)&&s(p)&&e[p.charCodeAt(0)].length==4},f=t.__arabicParser__.resolveLigatures=function(p){var g=0,x=r,y="",b=0;for(g=0;g<p.length;g+=1)x[p.charCodeAt(g)]!==void 0?(b++,typeof(x=x[p.charCodeAt(g)])=="number"&&(y+=String.fromCharCode(x),x=r,b=0),g===p.length-1&&(x=r,y+=p.charAt(g-(b-1)),g-=b-1,b=0)):(x=r,y+=p.charAt(g-b),g-=b,b=0);return y};t.__arabicParser__.isArabicDiacritic=function(p){return p!==void 0&&n[p.charCodeAt(0)]!==void 0};var h=t.__arabicParser__.getCorrectForm=function(p,g,x){return i(p)?s(p)===!1?-1:!u(p)||!i(g)&&!i(x)||!i(x)&&l(g)||l(p)&&!i(g)||l(p)&&c(g)||l(p)&&l(g)?0:d(p)&&i(g)&&!l(g)&&i(x)&&u(x)?3:l(p)||!i(x)?1:2:-1},A=function(p){var g=0,x=0,y=0,b="",w="",j="",I=(p=p||"").split("\\s+"),_=[];for(g=0;g<I.length;g+=1){for(_.push(""),x=0;x<I[g].length;x+=1)b=I[g][x],w=I[g][x-1],j=I[g][x+1],i(b)?(y=h(b,w,j),_[g]+=y!==-1?String.fromCharCode(e[b.charCodeAt(0)][y]):b):_[g]+=b;_[g]=f(_[g])}return _.join(" ")},m=t.__arabicParser__.processArabic=t.processArabic=function(){var p,g=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(g)){var y=0;for(x=[],y=0;y<g.length;y+=1)Array.isArray(g[y])?x.push([A(g[y][0]),g[y][1],g[y][2]]):x.push([A(g[y])]);p=x}else p=A(g);return typeof arguments[0]=="string"?p:(arguments[0].text=p,arguments[0])};t.events.push(["preProcessText",m])}(Br.API),Br.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(l){i=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Br.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(p){c=p}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(p){u=p}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(p){d=p}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(p){f=p}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(p){h=p}});var A=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return A},set:function(p){A=p}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(p){m=p}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),h=u.scaleFactor||this.internal.scaleFactor,A=0,m=0,p=0,g=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var x=u.maxWidth;x>0?typeof c=="string"?c=this.splitTextToSize(c,x):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(b,w){return b.concat(g.splitTextToSize(w,x))},[])):c=Array.isArray(c)?c:[c];for(var y=0;y<c.length;y++)A<(p=this.getStringUnitWidth(c[y],{font:f})*d)&&(A=p);return A!==0&&(m=c.length),{w:A/=h,h:Math.max((m*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/h,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=t.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,h=this.internal.__cell__.tableHeaderRow,A=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,A&&h&&(this.printHeaderRow(c.lineNumber,!0),c.y+=h[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};t.table=function(c,u,d,f,h){if(n.call(this),!d)throw new Error("No data for PDF table.");var A,m,p,g,x=[],y=[],b=[],w={},j={},I=[],_=[],S=(h=h||{}).autoSize||!1,E=h.printHeaders!==!1,k=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,P=h.margins||Object.assign({width:this.getPageWidth()},e),T=typeof h.padding=="number"?h.padding:3,O=h.headerBackgroundColor||"#c8c8c8",W=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=E,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=k,this.internal.__cell__.padding=T,this.internal.__cell__.headerBackgroundColor=O,this.internal.__cell__.headerTextColor=W,this.setFontSize(k),f==null)y=x=Object.keys(d[0]),b=x.map(function(){return"left"});else if(Array.isArray(f)&&Na(f[0])==="object")for(x=f.map(function(Fe){return Fe.name}),y=f.map(function(Fe){return Fe.prompt||Fe.name||""}),b=f.map(function(Fe){return Fe.align||"left"}),A=0;A<f.length;A+=1)j[f[A].name]=.7499990551181103*f[A].width;else Array.isArray(f)&&typeof f[0]=="string"&&(y=x=f,b=x.map(function(){return"left"}));if(S||Array.isArray(f)&&typeof f[0]=="string")for(A=0;A<x.length;A+=1){for(w[g=x[A]]=d.map(function(Fe){return Fe[g]}),this.setFont(void 0,"bold"),I.push(this.getTextDimensions(y[A],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=w[g],this.setFont(void 0,"normal"),p=0;p<m.length;p+=1)I.push(this.getTextDimensions(m[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);j[g]=Math.max.apply(null,I)+T+T,I=[]}if(E){var Ae={};for(A=0;A<x.length;A+=1)Ae[x[A]]={},Ae[x[A]].text=y[A],Ae[x[A]].align=b[A];var de=l.call(this,Ae,j);_=x.map(function(Fe){return new s(c,u,j[Fe],de,Ae[Fe].text,void 0,Ae[Fe].align)}),this.setTableHeaderRow(_),this.printHeaderRow(1,!1)}var fe=f.reduce(function(Fe,Pe){return Fe[Pe.name]=Pe.align,Fe},{});for(A=0;A<d.length;A+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:A,data:d[A]},this);var ge=l.call(this,d[A],j);for(p=0;p<x.length;p+=1){var ee=d[A][x[p]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:A,col:p,data:ee},this),i.call(this,new s(c,u,j[x[p]],ge,ee,A+2,fe[x[p]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(c).map(function(A){var m=c[A];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,u[A]-d-d)},this).map(function(A){return this.getLineHeightFactor()*A.length*f/h+d+d},this).reduce(function(A,m){return Math.max(A,m)},0)};t.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],A=0;A<this.internal.__cell__.tableHeaderRow.length;A+=1){d=this.internal.__cell__.tableHeaderRow[A].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,h.push(d)),d.lineNumber=c;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,d),this.setTextColor(m)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}(Br.API);var Dte={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Rte=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],dk=Ote(Rte),Mte=[100,200,300,400,500,600,700,800,900],OIe=Ote(Mte);function $5(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return Dte[s=s||"normal"]?s:"normal"}(t.style),n=function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400}(t.weight),a=function(s){return typeof dk[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:a,src:t.src||[],ref:t.ref||{name:e,style:[a,r,n].join(" ")}}}function $Q(t,e,r,n){var a;for(a=r;a>=0&&a<e.length;a+=n)if(t[e[a]])return t[e[a]];for(a=r;a>=0&&a<e.length;a-=n)if(t[e[a]])return t[e[a]]}var DIe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},GQ={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function KQ(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function qQ(t){return t.trimLeft()}function RIe(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function MIe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var NC,zQ,WQ,Yg,CC,XQ,YQ,JQ,G5=["times"];function ZQ(t,e,r,n,a){var s=4,i=tV;switch(a){case Br.API.image_compression.FAST:s=1,i=eV;break;case Br.API.image_compression.MEDIUM:s=6,i=rV;break;case Br.API.image_compression.SLOW:s=9,i=nV}t=function(c,u,d,f){for(var h,A=c.length/u,m=new Uint8Array(c.length+A),p=[LIe,eV,tV,rV,nV],g=0;g<A;g+=1){var x=g*u,y=c.subarray(x,x+u);if(f)m.set(f(y,d,h),x+g);else{for(var b=p.length,w=[],j=0;j<b;j+=1)w[j]=p[j](y,d,h);var I=QIe(w.concat());m.set(w[I],x+g)}h=y}return m}(t,e,Math.ceil(r*n/8),i);var l=ak(t,{level:s});return Br.API.__addimage__.arrayBufferToBinaryString(l)}function LIe(t){var e=Array.apply([],t);return e.unshift(0),e}function eV(t,e){var r=t.length,n=[];n[0]=1;for(var a=0;a<r;a+=1){var s=t[a-e]||0;n[a+1]=t[a]-s+256&255}return n}function tV(t,e,r){var n=t.length,a=[];a[0]=2;for(var s=0;s<n;s+=1){var i=r&&r[s]||0;a[s+1]=t[s]-i+256&255}return a}function rV(t,e,r){var n=t.length,a=[];a[0]=3;for(var s=0;s<n;s+=1){var i=t[s-e]||0,l=r&&r[s]||0;a[s+1]=t[s]+256-(i+l>>>1)&255}return a}function nV(t,e,r){var n=t.length,a=[];a[0]=4;for(var s=0;s<n;s+=1){var i=UIe(t[s-e]||0,r&&r[s]||0,r&&r[s-e]||0);a[s+1]=t[s]-i+256&255}return a}function UIe(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),a=Math.abs(t-r),s=Math.abs(t+e-r-r);return n<=a&&n<=s?t:a<=s?e:r}function QIe(t){var e=t.map(function(r){return r.reduce(function(n,a){return n+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function K5(t,e,r){var n=e*r,a=Math.floor(n/8),s=16-(n-8*a+r),i=(1<<r)-1;return Lte(t,a)>>s&i}function aV(t,e,r,n){var a=r*n,s=Math.floor(a/8),i=16-(a-8*s+n),l=(1<<n)-1,c=(e&l)<<i;(function(u,d,f){if(d+1<u.byteLength)u.setUint16(d,f,!1);else{var h=f>>8&255;u.setUint8(d,h)}})(t,s,Lte(t,s)&~(l<<i)&65535|c)}function Lte(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function VIe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,a=t[e++],s=a>>7,i=1<<1+(7&a);t[e++],t[e++];var l=null,c=null;s&&(l=e,c=i,e+=3*i);var u=!0,d=[],f=0,h=null,A=0,m=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,m=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((P=t[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var p=t[e++];f=t[e++]|t[e++]<<8,h=t[e++],1&p||(h=null),A=p>>2&7,e++;break;case 254:for(;;){if(!((P=t[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var g=t[e++]|t[e++]<<8,x=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,w=t[e++],j=w>>6&1,I=1<<1+(7&w),_=l,S=c,E=!1;w>>7&&(E=!0,_=e,S=I,e+=3*I);var k=e;for(e++;;){var P;if(!((P=t[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}d.push({x:g,y:x,width:y,height:b,has_local_palette:E,palette_offset:_,palette_size:S,data_offset:k,data_length:e-k,transparent_index:h,interlaced:!!j,delay:f,disposal:A});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return m},this.frameInfo=function(T){if(T<0||T>=d.length)throw new Error("Frame index out of range.");return d[T]},this.decodeAndBlitFrameBGRA=function(T,O){var W=this.frameInfo(T),Ae=W.width*W.height,de=new Uint8Array(Ae);sV(t,W.data_offset,de,Ae);var fe=W.palette_offset,ge=W.transparent_index;ge===null&&(ge=256);var ee=W.width,Fe=r-ee,Pe=ee,F=4*(W.y*r+W.x),Q=4*((W.y+W.height)*r+W.x),H=F,R=4*Fe;W.interlaced===!0&&(R+=4*r*7);for(var z=8,J=0,D=de.length;J<D;++J){var U=de[J];if(Pe===0&&(Pe=ee,(H+=R)>=Q&&(R=4*Fe+4*r*(z-1),H=F+(ee+Fe)*(z<<1),z>>=1)),U===ge)H+=4;else{var ne=t[fe+3*U],ve=t[fe+3*U+1],L=t[fe+3*U+2];O[H++]=L,O[H++]=ve,O[H++]=ne,O[H++]=255}--Pe}},this.decodeAndBlitFrameRGBA=function(T,O){var W=this.frameInfo(T),Ae=W.width*W.height,de=new Uint8Array(Ae);sV(t,W.data_offset,de,Ae);var fe=W.palette_offset,ge=W.transparent_index;ge===null&&(ge=256);var ee=W.width,Fe=r-ee,Pe=ee,F=4*(W.y*r+W.x),Q=4*((W.y+W.height)*r+W.x),H=F,R=4*Fe;W.interlaced===!0&&(R+=4*r*7);for(var z=8,J=0,D=de.length;J<D;++J){var U=de[J];if(Pe===0&&(Pe=ee,(H+=R)>=Q&&(R=4*Fe+4*r*(z-1),H=F+(ee+Fe)*(z<<1),z>>=1)),U===ge)H+=4;else{var ne=t[fe+3*U],ve=t[fe+3*U+1],L=t[fe+3*U+2];O[H++]=ne,O[H++]=ve,O[H++]=L,O[H++]=255}--Pe}}}function sV(t,e,r,n){for(var a=t[e++],s=1<<a,i=s+1,l=i+1,c=a+1,u=(1<<c)-1,d=0,f=0,h=0,A=t[e++],m=new Int32Array(4096),p=null;;){for(;d<16&&A!==0;)f|=t[e++]<<d,d+=8,A===1?A=t[e++]:--A;if(d<c)break;var g=f&u;if(f>>=c,d-=c,g!==s){if(g===i)break;for(var x=g<l?g:p,y=0,b=x;b>s;)b=m[b]>>8,++y;var w=b;if(h+y+(x!==g?1:0)>n)return void Da.log("Warning, gif stream longer than expected.");r[h++]=w;var j=h+=y;for(x!==g&&(r[h++]=w),b=x;y--;)b=m[b],r[--j]=255&b,b>>=8;p!==null&&l<4096&&(m[l++]=p<<8|w,l>=u+1&&c<12&&(++c,u=u<<1|1)),p=g}else l=i+1,u=(1<<(c=a+1))-1,p=null}return h!==n&&Da.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function q5(t){var e,r,n,a,s,i=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),h=new Array(65535),A=new Array(64),m=new Array(64),p=[],g=0,x=7,y=new Array(64),b=new Array(64),w=new Array(64),j=new Array(256),I=new Array(2048),_=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],k=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],T=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Ae=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function de(F,Q){for(var H=0,R=0,z=new Array,J=1;J<=16;J++){for(var D=1;D<=F[J];D++)z[Q[R]]=[],z[Q[R]][0]=H,z[Q[R]][1]=J,R++,H++;H*=2}return z}function fe(F){for(var Q=F[0],H=F[1]-1;H>=0;)Q&1<<H&&(g|=1<<x),H--,--x<0&&(g==255?(ge(255),ge(0)):ge(g),x=7,g=0)}function ge(F){p.push(F)}function ee(F){ge(F>>8&255),ge(255&F)}function Fe(F,Q,H,R,z){for(var J,D=z[0],U=z[240],ne=function(Be,je){var ot,mt,ut,_e,rt,we,Ce,Ue,Ve,ue,ce=0;for(Ve=0;Ve<8;++Ve){ot=Be[ce],mt=Be[ce+1],ut=Be[ce+2],_e=Be[ce+3],rt=Be[ce+4],we=Be[ce+5],Ce=Be[ce+6];var Te=ot+(Ue=Be[ce+7]),Xe=ot-Ue,ft=mt+Ce,gt=mt-Ce,vt=ut+we,At=ut-we,ye=_e+rt,$e=_e-rt,Ne=Te+ye,ct=Te-ye,xe=ft+vt,Qe=ft-vt;Be[ce]=Ne+xe,Be[ce+4]=Ne-xe;var dt=.707106781*(Qe+ct);Be[ce+2]=ct+dt,Be[ce+6]=ct-dt;var Bt=.382683433*((Ne=$e+At)-(Qe=gt+Xe)),qe=.5411961*Ne+Bt,bt=1.306562965*Qe+Bt,G=.707106781*(xe=At+gt),te=Xe+G,He=Xe-G;Be[ce+5]=He+qe,Be[ce+3]=He-qe,Be[ce+1]=te+bt,Be[ce+7]=te-bt,ce+=8}for(ce=0,Ve=0;Ve<8;++Ve){ot=Be[ce],mt=Be[ce+8],ut=Be[ce+16],_e=Be[ce+24],rt=Be[ce+32],we=Be[ce+40],Ce=Be[ce+48];var re=ot+(Ue=Be[ce+56]),be=ot-Ue,Me=mt+Ce,tt=mt-Ce,lt=ut+we,ae=ut-we,V=_e+rt,X=_e-rt,me=re+V,Ie=re-V,Y=Me+lt,pe=Me-lt;Be[ce]=me+Y,Be[ce+32]=me-Y;var ke=.707106781*(pe+Ie);Be[ce+16]=Ie+ke,Be[ce+48]=Ie-ke;var Re=.382683433*((me=X+ae)-(pe=tt+be)),Ze=.5411961*me+Re,nt=1.306562965*pe+Re,_t=.707106781*(Y=ae+tt),Ct=be+_t,Nt=be-_t;Be[ce+40]=Nt+Ze,Be[ce+24]=Nt-Ze,Be[ce+8]=Ct+nt,Be[ce+56]=Ct-nt,ce++}for(Ve=0;Ve<64;++Ve)ue=Be[Ve]*je[Ve],A[Ve]=ue>0?ue+.5|0:ue-.5|0;return A}(F,Q),ve=0;ve<64;++ve)m[_[ve]]=ne[ve];var L=m[0]-H;H=m[0],L==0?fe(R[0]):(fe(R[h[J=32767+L]]),fe(f[J]));for(var Ye=63;Ye>0&&m[Ye]==0;)Ye--;if(Ye==0)return fe(D),H;for(var ie,Z=1;Z<=Ye;){for(var Oe=Z;m[Z]==0&&Z<=Ye;)++Z;var le=Z-Oe;if(le>=16){ie=le>>4;for(var se=1;se<=ie;++se)fe(U);le&=15}J=32767+m[Z],fe(z[(le<<4)+h[J]]),fe(f[J]),Z++}return Ye!=63&&fe(D),H}function Pe(F){F=Math.min(Math.max(F,1),100),s!=F&&(function(Q){for(var H=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],R=0;R<64;R++){var z=i((H[R]*Q+50)/100);z=Math.min(Math.max(z,1),255),l[_[R]]=z}for(var J=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],D=0;D<64;D++){var U=i((J[D]*Q+50)/100);U=Math.min(Math.max(U,1),255),c[_[D]]=U}for(var ne=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ve=0,L=0;L<8;L++)for(var Ye=0;Ye<8;Ye++)u[ve]=1/(l[_[ve]]*ne[L]*ne[Ye]*8),d[ve]=1/(c[_[ve]]*ne[L]*ne[Ye]*8),ve++}(F<50?Math.floor(5e3/F):Math.floor(200-2*F)),s=F)}this.encode=function(F,Q){Q&&Pe(Q),p=new Array,g=0,x=7,ee(65496),ee(65504),ee(16),ge(74),ge(70),ge(73),ge(70),ge(0),ge(1),ge(1),ge(0),ee(1),ee(1),ge(0),ge(0),function(){ee(65499),ee(132),ge(0);for(var mt=0;mt<64;mt++)ge(l[mt]);ge(1);for(var ut=0;ut<64;ut++)ge(c[ut])}(),function(mt,ut){ee(65472),ee(17),ge(8),ee(ut),ee(mt),ge(3),ge(1),ge(17),ge(0),ge(2),ge(17),ge(1),ge(3),ge(17),ge(1)}(F.width,F.height),function(){ee(65476),ee(418),ge(0);for(var mt=0;mt<16;mt++)ge(S[mt+1]);for(var ut=0;ut<=11;ut++)ge(E[ut]);ge(16);for(var _e=0;_e<16;_e++)ge(k[_e+1]);for(var rt=0;rt<=161;rt++)ge(P[rt]);ge(1);for(var we=0;we<16;we++)ge(T[we+1]);for(var Ce=0;Ce<=11;Ce++)ge(O[Ce]);ge(17);for(var Ue=0;Ue<16;Ue++)ge(W[Ue+1]);for(var Ve=0;Ve<=161;Ve++)ge(Ae[Ve])}(),ee(65498),ee(12),ge(3),ge(1),ge(0),ge(2),ge(17),ge(3),ge(17),ge(0),ge(63),ge(0);var H=0,R=0,z=0;g=0,x=7,this.encode.displayName="_encode_";for(var J,D,U,ne,ve,L,Ye,ie,Z,Oe=F.data,le=F.width,se=F.height,Be=4*le,je=0;je<se;){for(J=0;J<Be;){for(ve=Be*je+J,Ye=-1,ie=0,Z=0;Z<64;Z++)L=ve+(ie=Z>>3)*Be+(Ye=4*(7&Z)),je+ie>=se&&(L-=Be*(je+1+ie-se)),J+Ye>=Be&&(L-=J+Ye-Be+4),D=Oe[L++],U=Oe[L++],ne=Oe[L++],y[Z]=(I[D]+I[U+256|0]+I[ne+512|0]>>16)-128,b[Z]=(I[D+768|0]+I[U+1024|0]+I[ne+1280|0]>>16)-128,w[Z]=(I[D+1280|0]+I[U+1536|0]+I[ne+1792|0]>>16)-128;H=Fe(y,u,H,e,n),R=Fe(b,d,R,r,a),z=Fe(w,d,z,r,a),J+=32}je+=8}if(x>=0){var ot=[];ot[1]=x+1,ot[0]=(1<<x+1)-1,fe(ot)}return ee(65497),new Uint8Array(p)},t=t||50,function(){for(var F=String.fromCharCode,Q=0;Q<256;Q++)j[Q]=F(Q)}(),e=de(S,E),r=de(T,O),n=de(k,P),a=de(W,Ae),function(){for(var F=1,Q=2,H=1;H<=15;H++){for(var R=F;R<Q;R++)h[32767+R]=H,f[32767+R]=[],f[32767+R][1]=H,f[32767+R][0]=R;for(var z=-(Q-1);z<=-F;z++)h[32767+z]=H,f[32767+z]=[],f[32767+z][1]=H,f[32767+z][0]=Q-1+z;F<<=1,Q<<=1}}(),function(){for(var F=0;F<256;F++)I[F]=19595*F,I[F+256|0]=38470*F,I[F+512|0]=7471*F+32768,I[F+768|0]=-11059*F,I[F+1024|0]=-21709*F,I[F+1280|0]=32768*F+8421375,I[F+1536|0]=-27439*F,I[F+1792|0]=-5329*F}(),Pe(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function bd(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function iV(t){function e(E){if(!E)throw Error("assert :P")}function r(E,k,P){for(var T=0;4>T;T++)if(E[k+T]!=P.charCodeAt(T))return!0;return!1}function n(E,k,P,T,O){for(var W=0;W<O;W++)E[k+W]=P[T+W]}function a(E,k,P,T){for(var O=0;O<T;O++)E[k+O]=P}function s(E){return new Int32Array(E)}function i(E,k){for(var P=[],T=0;T<E;T++)P.push(new k);return P}function l(E,k){var P=[];return function T(O,W,Ae){for(var de=Ae[W],fe=0;fe<de&&(O.push(Ae.length>W+1?[]:new k),!(Ae.length<W+1));fe++)T(O[fe],W+1,Ae)}(P,0,E),P}var c=function(){var E=this;function k(N,B){for(var K=1<<B-1>>>0;N&K;)K>>>=1;return K?(N&K-1)+K:N}function P(N,B,K,oe,Se){e(!(oe%K));do N[B+(oe-=K)]=Se;while(0<oe)}function T(N,B,K,oe,Se){if(e(2328>=Se),512>=Se)var Le=s(512);else if((Le=s(Se))==null)return 0;return function(Ke,ze,Je,st,xt,Rt){var it,wt,Pt=ze,Wt=1<<Je,Dt=s(16),Jt=s(16);for(e(xt!=0),e(st!=null),e(Ke!=null),e(0<Je),wt=0;wt<xt;++wt){if(15<st[wt])return 0;++Dt[st[wt]]}if(Dt[0]==xt)return 0;for(Jt[1]=0,it=1;15>it;++it){if(Dt[it]>1<<it)return 0;Jt[it+1]=Jt[it]+Dt[it]}for(wt=0;wt<xt;++wt)it=st[wt],0<st[wt]&&(Rt[Jt[it]++]=wt);if(Jt[15]==1)return(st=new O).g=0,st.value=Rt[0],P(Ke,Pt,1,Wt,st),Wt;var er,fr=-1,ir=Wt-1,$r=0,Fr=1,pn=1,Ur=1<<Je;for(wt=0,it=1,xt=2;it<=Je;++it,xt<<=1){if(Fr+=pn<<=1,0>(pn-=Dt[it]))return 0;for(;0<Dt[it];--Dt[it])(st=new O).g=it,st.value=Rt[wt++],P(Ke,Pt+$r,xt,Ur,st),$r=k($r,it)}for(it=Je+1,xt=2;15>=it;++it,xt<<=1){if(Fr+=pn<<=1,0>(pn-=Dt[it]))return 0;for(;0<Dt[it];--Dt[it]){if(st=new O,($r&ir)!=fr){for(Pt+=Ur,er=1<<(fr=it)-Je;15>fr&&!(0>=(er-=Dt[fr]));)++fr,er<<=1;Wt+=Ur=1<<(er=fr-Je),Ke[ze+(fr=$r&ir)].g=er+Je,Ke[ze+fr].value=Pt-ze-fr}st.g=it-Je,st.value=Rt[wt++],P(Ke,Pt+($r>>Je),xt,Ur,st),$r=k($r,it)}}return Fr!=2*Jt[15]-1?0:Wt}(N,B,K,oe,Se,Le)}function O(){this.value=this.g=0}function W(){this.value=this.g=0}function Ae(){this.G=i(5,O),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Sm,W)}function de(N,B,K,oe){e(N!=null),e(B!=null),e(2147483648>oe),N.Ca=254,N.I=0,N.b=-8,N.Ka=0,N.oa=B,N.pa=K,N.Jd=B,N.Yc=K+oe,N.Zc=4<=oe?K+oe-4+1:K,D(N)}function fe(N,B){for(var K=0;0<B--;)K|=ne(N,128)<<B;return K}function ge(N,B){var K=fe(N,B);return U(N)?-K:K}function ee(N,B,K,oe){var Se,Le=0;for(e(N!=null),e(B!=null),e(4294967288>oe),N.Sb=oe,N.Ra=0,N.u=0,N.h=0,4<oe&&(oe=4),Se=0;Se<oe;++Se)Le+=B[K+Se]<<8*Se;N.Ra=Le,N.bb=oe,N.oa=B,N.pa=K}function Fe(N){for(;8<=N.u&&N.bb<N.Sb;)N.Ra>>>=8,N.Ra+=N.oa[N.pa+N.bb]<<Ph-8>>>0,++N.bb,N.u-=8;R(N)&&(N.h=1,N.u=0)}function Pe(N,B){if(e(0<=B),!N.h&&B<=Oc){var K=H(N)&Fc[B];return N.u+=B,Fe(N),K}return N.h=1,N.u=0}function F(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Q(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function H(N){return N.Ra>>>(N.u&Ph-1)>>>0}function R(N){return e(N.bb<=N.Sb),N.h||N.bb==N.Sb&&N.u>Ph}function z(N,B){N.u=B,N.h=R(N)}function J(N){N.u>=eA&&(e(N.u>=eA),Fe(N))}function D(N){e(N!=null&&N.oa!=null),N.pa<N.Zc?(N.I=(N.oa[N.pa++]|N.I<<8)>>>0,N.b+=8):(e(N!=null&&N.oa!=null),N.pa<N.Yc?(N.b+=8,N.I=N.oa[N.pa++]|N.I<<8):N.Ka?N.b=0:(N.I<<=8,N.b+=8,N.Ka=1))}function U(N){return fe(N,1)}function ne(N,B){var K=N.Ca;0>N.b&&D(N);var oe=N.b,Se=K*B>>>8,Le=(N.I>>>oe>Se)+0;for(Le?(K-=Se,N.I-=Se+1<<oe>>>0):K=Se+1,oe=K,Se=0;256<=oe;)Se+=8,oe>>=8;return oe=7^Se+Bh[oe],N.b-=oe,N.Ca=(K<<oe)-1,Le}function ve(N,B,K){N[B+0]=K>>24&255,N[B+1]=K>>16&255,N[B+2]=K>>8&255,N[B+3]=255&K}function L(N,B){return N[B+0]|N[B+1]<<8}function Ye(N,B){return L(N,B)|N[B+2]<<16}function ie(N,B){return L(N,B)|L(N,B+2)<<16}function Z(N,B){var K=1<<B;return e(N!=null),e(0<B),N.X=s(K),N.X==null?0:(N.Mb=32-B,N.Xa=B,1)}function Oe(N,B){e(N!=null),e(B!=null),e(N.Xa==B.Xa),n(B.X,0,N.X,0,1<<B.Xa)}function le(){this.X=[],this.Xa=this.Mb=0}function se(N,B,K,oe){e(K!=null),e(oe!=null);var Se=K[0],Le=oe[0];return Se==0&&(Se=(N*Le+B/2)/B),Le==0&&(Le=(B*Se+N/2)/N),0>=Se||0>=Le?0:(K[0]=Se,oe[0]=Le,1)}function Be(N,B){return N+(1<<B)-1>>>B}function je(N,B){return((4278255360&N)+(4278255360&B)>>>0&4278255360)+((16711935&N)+(16711935&B)>>>0&16711935)>>>0}function ot(N,B){E[B]=function(K,oe,Se,Le,Ke,ze,Je){var st;for(st=0;st<Ke;++st){var xt=E[N](ze[Je+st-1],Se,Le+st);ze[Je+st]=je(K[oe+st],xt)}}}function mt(){this.ud=this.hd=this.jd=0}function ut(N,B){return((4278124286&(N^B))>>>1)+(N&B)>>>0}function _e(N){return 0<=N&&256>N?N:0>N?0:255<N?255:void 0}function rt(N,B){return _e(N+(N-B+.5>>1))}function we(N,B,K){return Math.abs(B-K)-Math.abs(N-K)}function Ce(N,B,K,oe,Se,Le,Ke){for(oe=Le[Ke-1],K=0;K<Se;++K)Le[Ke+K]=oe=je(N[B+K],oe)}function Ue(N,B,K,oe,Se){var Le;for(Le=0;Le<K;++Le){var Ke=N[B+Le],ze=Ke>>8&255,Je=16711935&(Je=(Je=16711935&Ke)+((ze<<16)+ze));oe[Se+Le]=(4278255360&Ke)+Je>>>0}}function Ve(N,B){B.jd=255&N,B.hd=N>>8&255,B.ud=N>>16&255}function ue(N,B,K,oe,Se,Le){var Ke;for(Ke=0;Ke<oe;++Ke){var ze=B[K+Ke],Je=ze>>>8,st=ze,xt=255&(xt=(xt=ze>>>16)+((N.jd<<24>>24)*(Je<<24>>24)>>>5));st=255&(st=(st+=(N.hd<<24>>24)*(Je<<24>>24)>>>5)+((N.ud<<24>>24)*(xt<<24>>24)>>>5)),Se[Le+Ke]=(4278255360&ze)+(xt<<16)+st}}function ce(N,B,K,oe,Se){E[B]=function(Le,Ke,ze,Je,st,xt,Rt,it,wt){for(Je=Rt;Je<it;++Je)for(Rt=0;Rt<wt;++Rt)st[xt++]=Se(ze[oe(Le[Ke++])])},E[N]=function(Le,Ke,ze,Je,st,xt,Rt){var it=8>>Le.b,wt=Le.Ea,Pt=Le.K[0],Wt=Le.w;if(8>it)for(Le=(1<<Le.b)-1,Wt=(1<<it)-1;Ke<ze;++Ke){var Dt,Jt=0;for(Dt=0;Dt<wt;++Dt)Dt&Le||(Jt=oe(Je[st++])),xt[Rt++]=Se(Pt[Jt&Wt]),Jt>>=it}else E["VP8LMapColor"+K](Je,st,Pt,Wt,xt,Rt,Ke,ze,wt)}}function Te(N,B,K,oe,Se){for(K=B+K;B<K;){var Le=N[B++];oe[Se++]=Le>>16&255,oe[Se++]=Le>>8&255,oe[Se++]=255&Le}}function Xe(N,B,K,oe,Se){for(K=B+K;B<K;){var Le=N[B++];oe[Se++]=Le>>16&255,oe[Se++]=Le>>8&255,oe[Se++]=255&Le,oe[Se++]=Le>>24&255}}function ft(N,B,K,oe,Se){for(K=B+K;B<K;){var Le=(Ke=N[B++])>>16&240|Ke>>12&15,Ke=240&Ke|Ke>>28&15;oe[Se++]=Le,oe[Se++]=Ke}}function gt(N,B,K,oe,Se){for(K=B+K;B<K;){var Le=(Ke=N[B++])>>16&248|Ke>>13&7,Ke=Ke>>5&224|Ke>>3&31;oe[Se++]=Le,oe[Se++]=Ke}}function vt(N,B,K,oe,Se){for(K=B+K;B<K;){var Le=N[B++];oe[Se++]=255&Le,oe[Se++]=Le>>8&255,oe[Se++]=Le>>16&255}}function At(N,B,K,oe,Se,Le){if(Le==0)for(K=B+K;B<K;)ve(oe,((Le=N[B++])[0]>>24|Le[1]>>8&65280|Le[2]<<8&16711680|Le[3]<<24)>>>0),Se+=32;else n(oe,Se,N,B,K)}function ye(N,B){E[B][0]=E[N+"0"],E[B][1]=E[N+"1"],E[B][2]=E[N+"2"],E[B][3]=E[N+"3"],E[B][4]=E[N+"4"],E[B][5]=E[N+"5"],E[B][6]=E[N+"6"],E[B][7]=E[N+"7"],E[B][8]=E[N+"8"],E[B][9]=E[N+"9"],E[B][10]=E[N+"10"],E[B][11]=E[N+"11"],E[B][12]=E[N+"12"],E[B][13]=E[N+"13"],E[B][14]=E[N+"0"],E[B][15]=E[N+"0"]}function $e(N){return N==i3||N==o3||N==dN||N==l3}function Ne(){this.eb=[],this.size=this.A=this.fb=0}function ct(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function xe(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ne,this.f.kb=new ct,this.sd=null}function Qe(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function dt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Bt(N){return alert("todo:WebPSamplerProcessPlane"),N.T}function qe(N,B){var K=N.T,oe=B.ba.f.RGBA,Se=oe.eb,Le=oe.fb+N.ka*oe.A,Ke=_u[B.ba.S],ze=N.y,Je=N.O,st=N.f,xt=N.N,Rt=N.ea,it=N.W,wt=B.cc,Pt=B.dc,Wt=B.Mc,Dt=B.Nc,Jt=N.ka,er=N.ka+N.T,fr=N.U,ir=fr+1>>1;for(Jt==0?Ke(ze,Je,null,null,st,xt,Rt,it,st,xt,Rt,it,Se,Le,null,null,fr):(Ke(B.ec,B.fc,ze,Je,wt,Pt,Wt,Dt,st,xt,Rt,it,Se,Le-oe.A,Se,Le,fr),++K);Jt+2<er;Jt+=2)wt=st,Pt=xt,Wt=Rt,Dt=it,xt+=N.Rc,it+=N.Rc,Le+=2*oe.A,Ke(ze,(Je+=2*N.fa)-N.fa,ze,Je,wt,Pt,Wt,Dt,st,xt,Rt,it,Se,Le-oe.A,Se,Le,fr);return Je+=N.fa,N.j+er<N.o?(n(B.ec,B.fc,ze,Je,fr),n(B.cc,B.dc,st,xt,ir),n(B.Mc,B.Nc,Rt,it,ir),K--):1&er||Ke(ze,Je,null,null,st,xt,Rt,it,st,xt,Rt,it,Se,Le+oe.A,null,null,fr),K}function bt(N,B,K){var oe=N.F,Se=[N.J];if(oe!=null){var Le=N.U,Ke=B.ba.S,ze=Ke==uN||Ke==dN;B=B.ba.f.RGBA;var Je=[0],st=N.ka;Je[0]=N.T,N.Kb&&(st==0?--Je[0]:(--st,Se[0]-=N.width),N.j+N.ka+N.T==N.o&&(Je[0]=N.o-N.j-st));var xt=B.eb;st=B.fb+st*B.A,N=AM(oe,Se[0],N.width,Le,Je,xt,st+(ze?0:3),B.A),e(K==Je),N&&$e(Ke)&&B1(xt,st,ze,Le,Je,B.A)}return 0}function G(N){var B=N.ma,K=B.ba.S,oe=11>K,Se=K==lN||K==cN||K==uN||K==s3||K==12||$e(K);if(B.memory=null,B.Ib=null,B.Jb=null,B.Nd=null,!N1(B.Oa,N,Se?11:12))return 0;if(Se&&$e(K)&&wu(),N.da)alert("todo:use_scaling");else{if(oe){if(B.Ib=Bt,N.Kb){if(K=N.U+1>>1,B.memory=s(N.U+2*K),B.memory==null)return 0;B.ec=B.memory,B.fc=0,B.cc=B.ec,B.dc=B.fc+N.U,B.Mc=B.cc,B.Nc=B.dc+K,B.Ib=qe,wu()}}else alert("todo:EmitYUV");Se&&(B.Jb=bt,oe&&ic())}if(oe&&!jM){for(N=0;256>N;++N)fue[N]=89858*(N-128)+AN>>fN,mue[N]=-22014*(N-128)+AN,hue[N]=-45773*(N-128),Aue[N]=113618*(N-128)+AN>>fN;for(N=k1;N<d3;++N)B=76283*(N-16)+AN>>fN,pue[N-k1]=Nn(B,255),gue[N-k1]=Nn(B+8>>4,15);jM=1}return 1}function te(N){var B=N.ma,K=N.U,oe=N.T;return e(!(1&N.ka)),0>=K||0>=oe?0:(K=B.Ib(N,B),B.Jb!=null&&B.Jb(N,B,K),B.Dc+=K,1)}function He(N){N.ma.memory=null}function re(N,B,K,oe){return Pe(N,8)!=47?0:(B[0]=Pe(N,14)+1,K[0]=Pe(N,14)+1,oe[0]=Pe(N,1),Pe(N,3)!=0?0:!N.h)}function be(N,B){if(4>N)return N+1;var K=N-2>>1;return(2+(1&N)<<K)+Pe(B,K)+1}function Me(N,B){return 120<B?B-120:1<=(K=((K=Jce[B-1])>>4)*N+(8-(15&K)))?K:1;var K}function tt(N,B,K){var oe=H(K),Se=N[B+=255&oe].g-8;return 0<Se&&(z(K,K.u+8),oe=H(K),B+=N[B].value,B+=oe&(1<<Se)-1),z(K,K.u+N[B].g),N[B].value}function lt(N,B,K){return K.g+=N.g,K.value+=N.value<<B>>>0,e(8>=K.g),N.g}function ae(N,B,K){var oe=N.xc;return e((B=oe==0?0:N.vc[N.md*(K>>oe)+(B>>oe)])<N.Wb),N.Ya[B]}function V(N,B,K,oe){var Se=N.ab,Le=N.c*B,Ke=N.C;B=Ke+B;var ze=K,Je=oe;for(oe=N.Ta,K=N.Ua;0<Se--;){var st=N.gc[Se],xt=Ke,Rt=B,it=ze,wt=Je,Pt=(Je=oe,ze=K,st.Ea);switch(e(xt<Rt),e(Rt<=st.nc),st.hc){case 2:ri(it,wt,(Rt-xt)*Pt,Je,ze);break;case 0:var Wt=xt,Dt=Rt,Jt=Je,er=ze,fr=(Ur=st).Ea;Wt==0&&(_1(it,wt,null,null,1,Jt,er),Ce(it,wt+1,0,0,fr-1,Jt,er+1),wt+=fr,er+=fr,++Wt);for(var ir=1<<Ur.b,$r=ir-1,Fr=Be(fr,Ur.b),pn=Ur.K,Ur=Ur.w+(Wt>>Ur.b)*Fr;Wt<Dt;){var Un=pn,Ri=Ur,gn=1;for(Fg(it,wt,Jt,er-fr,1,Jt,er);gn<fr;){var Qr=(gn&~$r)+ir;Qr>fr&&(Qr=fr),(0,S1[Un[Ri++]>>8&15])(it,wt+ +gn,Jt,er+gn-fr,Qr-gn,Jt,er+gn),gn=Qr}wt+=fr,er+=fr,++Wt&$r||(Ur+=Fr)}Rt!=st.nc&&n(Je,ze-Pt,Je,ze+(Rt-xt-1)*Pt,Pt);break;case 1:for(Pt=it,Dt=wt,fr=(it=st.Ea)-(er=it&~(Jt=(wt=1<<st.b)-1)),Wt=Be(it,st.b),ir=st.K,st=st.w+(xt>>st.b)*Wt;xt<Rt;){for($r=ir,Fr=st,pn=new mt,Ur=Dt+er,Un=Dt+it;Dt<Ur;)Ve($r[Fr++],pn),I1(pn,Pt,Dt,wt,Je,ze),Dt+=wt,ze+=wt;Dt<Un&&(Ve($r[Fr++],pn),I1(pn,Pt,Dt,fr,Je,ze),Dt+=fr,ze+=fr),++xt&Jt||(st+=Wt)}break;case 3:if(it==Je&&wt==ze&&0<st.b){for(Dt=Je,it=Pt=ze+(Rt-xt)*Pt-(er=(Rt-xt)*Be(st.Ea,st.b)),wt=Je,Jt=ze,Wt=[],er=(fr=er)-1;0<=er;--er)Wt[er]=wt[Jt+er];for(er=fr-1;0<=er;--er)Dt[it+er]=Wt[er];aN(st,xt,Rt,Je,Pt,Je,ze)}else aN(st,xt,Rt,it,wt,Je,ze)}ze=oe,Je=K}Je!=K&&n(oe,K,ze,Je,Le)}function X(N,B){var K=N.V,oe=N.Ba+N.c*N.C,Se=B-N.C;if(e(B<=N.l.o),e(16>=Se),0<Se){var Le=N.l,Ke=N.Ta,ze=N.Ua,Je=Le.width;if(V(N,Se,K,oe),Se=ze=[ze],e((K=N.C)<(oe=B)),e(Le.v<Le.va),oe>Le.o&&(oe=Le.o),K<Le.j){var st=Le.j-K;K=Le.j,Se[0]+=st*Je}if(K>=oe?K=0:(Se[0]+=4*Le.v,Le.ka=K-Le.j,Le.U=Le.va-Le.v,Le.T=oe-K,K=1),K){if(ze=ze[0],11>(K=N.ca).S){var xt=K.f.RGBA,Rt=(oe=K.S,Se=Le.U,Le=Le.T,st=xt.eb,xt.A),it=Le;for(xt=xt.fb+N.Ma*xt.A;0<it--;){var wt=Ke,Pt=ze,Wt=Se,Dt=st,Jt=xt;switch(oe){case oN:j1(wt,Pt,Wt,Dt,Jt);break;case lN:Th(wt,Pt,Wt,Dt,Jt);break;case i3:Th(wt,Pt,Wt,Dt,Jt),B1(Dt,Jt,0,Wt,1,0);break;case yM:Im(wt,Pt,Wt,Dt,Jt);break;case cN:At(wt,Pt,Wt,Dt,Jt,1);break;case o3:At(wt,Pt,Wt,Dt,Jt,1),B1(Dt,Jt,0,Wt,1,0);break;case uN:At(wt,Pt,Wt,Dt,Jt,0);break;case dN:At(wt,Pt,Wt,Dt,Jt,0),B1(Dt,Jt,1,Wt,1,0);break;case s3:kh(wt,Pt,Wt,Dt,Jt);break;case l3:kh(wt,Pt,Wt,Dt,Jt),fM(Dt,Jt,Wt,1,0);break;case bM:Fh(wt,Pt,Wt,Dt,Jt);break;default:e(0)}ze+=Je,xt+=Rt}N.Ma+=Le}else alert("todo:EmitRescaledRowsYUVA");e(N.Ma<=K.height)}}N.C=B,e(N.C<=N.i)}function me(N){var B;if(0<N.ua)return 0;for(B=0;B<N.Wb;++B){var K=N.Ya[B].G,oe=N.Ya[B].H;if(0<K[1][oe[1]+0].g||0<K[2][oe[2]+0].g||0<K[3][oe[3]+0].g)return 0}return 1}function Ie(N,B,K,oe,Se,Le){if(N.Z!=0){var Ke=N.qd,ze=N.rd;for(e(Rh[N.Z]!=null);B<K;++B)Rh[N.Z](Ke,ze,oe,Se,oe,Se,Le),Ke=oe,ze=Se,Se+=Le;N.qd=Ke,N.rd=ze}}function Y(N,B){var K=N.l.ma,oe=K.Z==0||K.Z==1?N.l.j:N.C;if(oe=N.C<oe?oe:N.C,e(B<=N.l.o),B>oe){var Se=N.l.width,Le=K.ca,Ke=K.tb+Se*oe,ze=N.V,Je=N.Ba+N.c*oe,st=N.gc;e(N.ab==1),e(st[0].hc==3),cf(st[0],oe,B,ze,Je,Le,Ke),Ie(K,oe,B,Le,Ke,Se)}N.C=N.Ma=B}function pe(N,B,K,oe,Se,Le,Ke){var ze=N.$/oe,Je=N.$%oe,st=N.m,xt=N.s,Rt=K+N.$,it=Rt;Se=K+oe*Se;var wt=K+oe*Le,Pt=280+xt.ua,Wt=N.Pb?ze:16777216,Dt=0<xt.ua?xt.Wa:null,Jt=xt.wc,er=Rt<wt?ae(xt,Je,ze):null;e(N.C<Le),e(wt<=Se);var fr=!1;e:for(;;){for(;fr||Rt<wt;){var ir=0;if(ze>=Wt){var $r=Rt-K;e((Wt=N).Pb),Wt.wd=Wt.m,Wt.xd=$r,0<Wt.s.ua&&Oe(Wt.s.Wa,Wt.s.vb),Wt=ze+eue}if(Je&Jt||(er=ae(xt,Je,ze)),e(er!=null),er.Qb&&(B[Rt]=er.qb,fr=!0),!fr)if(J(st),er.jc){ir=st,$r=B;var Fr=Rt,pn=er.pd[H(ir)&Sm-1];e(er.jc),256>pn.g?(z(ir,ir.u+pn.g),$r[Fr]=pn.value,ir=0):(z(ir,ir.u+pn.g-256),e(256<=pn.value),ir=pn.value),ir==0&&(fr=!0)}else ir=tt(er.G[0],er.H[0],st);if(st.h)break;if(fr||256>ir){if(!fr)if(er.nd)B[Rt]=(er.qb|ir<<8)>>>0;else{if(J(st),fr=tt(er.G[1],er.H[1],st),J(st),$r=tt(er.G[2],er.H[2],st),Fr=tt(er.G[3],er.H[3],st),st.h)break;B[Rt]=(Fr<<24|fr<<16|ir<<8|$r)>>>0}if(fr=!1,++Rt,++Je>=oe&&(Je=0,++ze,Ke!=null&&ze<=Le&&!(ze%16)&&Ke(N,ze),Dt!=null))for(;it<Rt;)ir=B[it++],Dt.X[(506832829*ir&4294967295)>>>Dt.Mb]=ir}else if(280>ir){if(ir=be(ir-256,st),$r=tt(er.G[4],er.H[4],st),J(st),$r=Me(oe,$r=be($r,st)),st.h)break;if(Rt-K<$r||Se-Rt<ir)break e;for(Fr=0;Fr<ir;++Fr)B[Rt+Fr]=B[Rt+Fr-$r];for(Rt+=ir,Je+=ir;Je>=oe;)Je-=oe,++ze,Ke!=null&&ze<=Le&&!(ze%16)&&Ke(N,ze);if(e(Rt<=Se),Je&Jt&&(er=ae(xt,Je,ze)),Dt!=null)for(;it<Rt;)ir=B[it++],Dt.X[(506832829*ir&4294967295)>>>Dt.Mb]=ir}else{if(!(ir<Pt))break e;for(fr=ir-280,e(Dt!=null);it<Rt;)ir=B[it++],Dt.X[(506832829*ir&4294967295)>>>Dt.Mb]=ir;ir=Rt,e(!(fr>>>($r=Dt).Xa)),B[ir]=$r.X[fr],fr=!0}fr||e(st.h==R(st))}if(N.Pb&&st.h&&Rt<Se)e(N.m.h),N.a=5,N.m=N.wd,N.$=N.xd,0<N.s.ua&&Oe(N.s.vb,N.s.Wa);else{if(st.h)break e;Ke!=null&&Ke(N,ze>Le?Le:ze),N.a=0,N.$=Rt-K}return 1}return N.a=3,0}function ke(N){e(N!=null),N.vc=null,N.yc=null,N.Ya=null;var B=N.Wa;B!=null&&(B.X=null),N.vb=null,e(N!=null)}function Re(){var N=new Zr;return N==null?null:(N.a=0,N.xb=CM,ye("Predictor","VP8LPredictors"),ye("Predictor","VP8LPredictors_C"),ye("PredictorAdd","VP8LPredictorsAdd"),ye("PredictorAdd","VP8LPredictorsAdd_C"),ri=Ue,I1=ue,j1=Te,Th=Xe,kh=ft,Fh=gt,Im=vt,E.VP8LMapColor32b=lf,E.VP8LMapColor8b=E1,N)}function Ze(N,B,K,oe,Se){var Le=1,Ke=[N],ze=[B],Je=oe.m,st=oe.s,xt=null,Rt=0;e:for(;;){if(K)for(;Le&&Pe(Je,1);){var it=Ke,wt=ze,Pt=oe,Wt=1,Dt=Pt.m,Jt=Pt.gc[Pt.ab],er=Pe(Dt,2);if(Pt.Oc&1<<er)Le=0;else{switch(Pt.Oc|=1<<er,Jt.hc=er,Jt.Ea=it[0],Jt.nc=wt[0],Jt.K=[null],++Pt.ab,e(4>=Pt.ab),er){case 0:case 1:Jt.b=Pe(Dt,3)+2,Wt=Ze(Be(Jt.Ea,Jt.b),Be(Jt.nc,Jt.b),0,Pt,Jt.K),Jt.K=Jt.K[0];break;case 3:var fr,ir=Pe(Dt,8)+1,$r=16<ir?0:4<ir?1:2<ir?2:3;if(it[0]=Be(Jt.Ea,$r),Jt.b=$r,fr=Wt=Ze(ir,1,0,Pt,Jt.K)){var Fr,pn=ir,Ur=Jt,Un=1<<(8>>Ur.b),Ri=s(Un);if(Ri==null)fr=0;else{var gn=Ur.K[0],Qr=Ur.w;for(Ri[0]=Ur.K[0][0],Fr=1;Fr<1*pn;++Fr)Ri[Fr]=je(gn[Qr+Fr],Ri[Fr-1]);for(;Fr<4*Un;++Fr)Ri[Fr]=0;Ur.K[0]=null,Ur.K[0]=Ri,fr=1}}Wt=fr;break;case 2:break;default:e(0)}Le=Wt}}if(Ke=Ke[0],ze=ze[0],Le&&Pe(Je,1)&&!(Le=1<=(Rt=Pe(Je,4))&&11>=Rt)){oe.a=3;break e}var wr;if(wr=Le)t:{var ai,fn,Vn,Wa=oe,Oo=Ke,Ml=ze,Hs=Rt,ll=K,Ll=Wa.m,Mi=Wa.s,Gn=[null],ha=1,$s=0,ma=Zce[Hs];r:for(;;){if(ll&&Pe(Ll,1)){var Do=Pe(Ll,3)+2,xd=Be(Oo,Do),si=Be(Ml,Do),oc=xd*si;if(!Ze(xd,si,0,Wa,Gn))break r;for(Gn=Gn[0],Mi.xc=Do,ai=0;ai<oc;++ai){var Fa=Gn[ai]>>8&65535;Gn[ai]=Fa,Fa>=ha&&(ha=Fa+1)}}if(Ll.h)break r;for(fn=0;5>fn;++fn){var Li=wM[fn];!fn&&0<Hs&&(Li+=1<<Hs),$s<Li&&($s=Li)}var Rc=i(ha*ma,O),Ul=ha,Mc=i(Ul,Ae);if(Mc==null)var Lc=null;else e(65536>=Ul),Lc=Mc;var lc=s($s);if(Lc==null||lc==null||Rc==null){Wa.a=1;break r}var Uc=Rc;for(ai=Vn=0;ai<ha;++ai){var Ua=Lc[ai],Qc=Ua.G,vd=Ua.H,Pm=0,nA=1,Ro=0;for(fn=0;5>fn;++fn){Li=wM[fn],Qc[fn]=Uc,vd[fn]=Vn,!fn&&0<Hs&&(Li+=1<<Hs);a:{var mN,f3=Li,pN=Wa,F1=lc,yue=Uc,bue=Vn,A3=0,Mh=pN.m,wue=Pe(Mh,1);if(a(F1,0,0,f3),wue){var Nue=Pe(Mh,1)+1,Cue=Pe(Mh,1),TM=Pe(Mh,Cue==0?1:8);F1[TM]=1,Nue==2&&(F1[TM=Pe(Mh,8)]=1);var gN=1}else{var kM=s(19),FM=Pe(Mh,4)+4;if(19<FM){pN.a=3;var xN=0;break a}for(mN=0;mN<FM;++mN)kM[Yce[mN]]=Pe(Mh,3);var h3=void 0,O1=void 0,OM=pN,_ue=kM,vN=f3,DM=F1,m3=0,Lh=OM.m,RM=8,MM=i(128,O);n:for(;T(MM,0,7,_ue,19);){if(Pe(Lh,1)){var Eue=2+2*Pe(Lh,3);if((h3=2+Pe(Lh,Eue))>vN)break n}else h3=vN;for(O1=0;O1<vN&&h3--;){J(Lh);var LM=MM[0+(127&H(Lh))];z(Lh,Lh.u+LM.g);var Dg=LM.value;if(16>Dg)DM[O1++]=Dg,Dg!=0&&(RM=Dg);else{var Sue=Dg==16,UM=Dg-16,Iue=Wce[UM],QM=Pe(Lh,zce[UM])+Iue;if(O1+QM>vN)break n;for(var jue=Sue?RM:0;0<QM--;)DM[O1++]=jue}}m3=1;break n}m3||(OM.a=3),gN=m3}(gN=gN&&!Mh.h)&&(A3=T(yue,bue,8,F1,f3)),gN&&A3!=0?xN=A3:(pN.a=3,xN=0)}if(xN==0)break r;if(nA&&Xce[fn]==1&&(nA=Uc[Vn].g==0),Pm+=Uc[Vn].g,Vn+=xN,3>=fn){var D1,p3=lc[0];for(D1=1;D1<Li;++D1)lc[D1]>p3&&(p3=lc[D1]);Ro+=p3}}if(Ua.nd=nA,Ua.Qb=0,nA&&(Ua.qb=(Qc[3][vd[3]+0].value<<24|Qc[1][vd[1]+0].value<<16|Qc[2][vd[2]+0].value)>>>0,Pm==0&&256>Qc[0][vd[0]+0].value&&(Ua.Qb=1,Ua.qb+=Qc[0][vd[0]+0].value<<8)),Ua.jc=!Ua.Qb&&6>Ro,Ua.jc){var yN,aA=Ua;for(yN=0;yN<Sm;++yN){var Uh=yN,Qh=aA.pd[Uh],bN=aA.G[0][aA.H[0]+Uh];256<=bN.value?(Qh.g=bN.g+256,Qh.value=bN.value):(Qh.g=0,Qh.value=0,Uh>>=lt(bN,8,Qh),Uh>>=lt(aA.G[1][aA.H[1]+Uh],16,Qh),Uh>>=lt(aA.G[2][aA.H[2]+Uh],0,Qh),lt(aA.G[3][aA.H[3]+Uh],24,Qh))}}}Mi.vc=Gn,Mi.Wb=ha,Mi.Ya=Lc,Mi.yc=Rc,wr=1;break t}wr=0}if(!(Le=wr)){oe.a=3;break e}if(0<Rt){if(st.ua=1<<Rt,!Z(st.Wa,Rt)){oe.a=1,Le=0;break e}}else st.ua=0;var g3=oe,VM=Ke,Pue=ze,x3=g3.s,v3=x3.xc;if(g3.c=VM,g3.i=Pue,x3.md=Be(VM,v3),x3.wc=v3==0?-1:(1<<v3)-1,K){oe.xb=oue;break e}if((xt=s(Ke*ze))==null){oe.a=1,Le=0;break e}Le=(Le=pe(oe,xt,0,Ke,ze,ze,null))&&!Je.h;break e}return Le?(Se!=null?Se[0]=xt:(e(xt==null),e(K)),oe.$=0,K||ke(st)):ke(st),Le}function nt(N,B){var K=N.c*N.i,oe=K+B+16*B;return e(N.c<=B),N.V=s(oe),N.V==null?(N.Ta=null,N.Ua=0,N.a=1,0):(N.Ta=N.V,N.Ua=N.Ba+K+B,1)}function _t(N,B){var K=N.C,oe=B-K,Se=N.V,Le=N.Ba+N.c*K;for(e(B<=N.l.o);0<oe;){var Ke=16<oe?16:oe,ze=N.l.ma,Je=N.l.width,st=Je*Ke,xt=ze.ca,Rt=ze.tb+Je*K,it=N.Ta,wt=N.Ua;V(N,Ke,Se,Le),hM(it,wt,xt,Rt,st),Ie(ze,K,K+Ke,xt,Rt,Je),oe-=Ke,Se+=Ke*N.c,K+=Ke}e(K==B),N.C=N.Ma=B}function Ct(){this.ub=this.yd=this.td=this.Rb=0}function Nt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Tt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function St(){this.Yb=function(){var N=[];return function B(K,oe,Se){for(var Le=Se[oe],Ke=0;Ke<Le&&(K.push(Se.length>oe+1?[]:0),!(Se.length<oe+1));Ke++)B(K[Ke],oe+1,Se)}(N,0,[3,11]),N}()}function yt(){this.jb=s(3),this.Wc=l([4,8],St),this.Xc=l([4,17],St)}function cr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function ur(){this.ld=this.La=this.dd=this.tc=0}function lr(){this.Na=this.la=0}function Cr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Nr(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function mn(){this.uc=this.M=this.Nb=0,this.wa=Array(new ur),this.Y=0,this.ya=Array(new Nr),this.aa=0,this.l=new za}function bn(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Rr(){this.cb=this.a=0,this.sc="",this.m=new F,this.Od=new Ct,this.Kc=new Nt,this.ed=new cr,this.Qa=new Tt,this.Ic=this.$c=this.Aa=0,this.D=new mn,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,F),this.ia=0,this.pb=i(4,Cr),this.Pa=new yt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new bn),this.Hd=0,this.rb=Array(new lr),this.sb=0,this.wa=Array(new ur),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Nr),this.L=this.aa=0,this.gd=l([4,2],ur),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Nn(N,B){return 0>N?0:N>B?B:N}function za(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ti(){var N=new Rr;return N!=null&&(N.a=0,N.sc="OK",N.cb=0,N.Xb=0,T1||(T1=$t)),N}function Mn(N,B,K){return N.a==0&&(N.a=B,N.sc=K,N.cb=0),0}function Us(N,B,K){return 3<=K&&N[B+0]==157&&N[B+1]==1&&N[B+2]==42}function De(N,B){if(N==null)return 0;if(N.a=0,N.sc="OK",B==null)return Mn(N,2,"null VP8Io passed to VP8GetHeaders()");var K=B.data,oe=B.w,Se=B.ha;if(4>Se)return Mn(N,7,"Truncated header.");var Le=K[oe+0]|K[oe+1]<<8|K[oe+2]<<16,Ke=N.Od;if(Ke.Rb=!(1&Le),Ke.td=Le>>1&7,Ke.yd=Le>>4&1,Ke.ub=Le>>5,3<Ke.td)return Mn(N,3,"Incorrect keyframe parameters.");if(!Ke.yd)return Mn(N,4,"Frame not displayable.");oe+=3,Se-=3;var ze=N.Kc;if(Ke.Rb){if(7>Se)return Mn(N,7,"cannot parse picture header");if(!Us(K,oe,Se))return Mn(N,3,"Bad code word");ze.c=16383&(K[oe+4]<<8|K[oe+3]),ze.Td=K[oe+4]>>6,ze.i=16383&(K[oe+6]<<8|K[oe+5]),ze.Ud=K[oe+6]>>6,oe+=7,Se-=7,N.za=ze.c+15>>4,N.Ub=ze.i+15>>4,B.width=ze.c,B.height=ze.i,B.Da=0,B.j=0,B.v=0,B.va=B.width,B.o=B.height,B.da=0,B.ib=B.width,B.hb=B.height,B.U=B.width,B.T=B.height,a((Le=N.Pa).jb,0,255,Le.jb.length),e((Le=N.Qa)!=null),Le.Cb=0,Le.Bb=0,Le.Fb=1,a(Le.Zb,0,0,Le.Zb.length),a(Le.Lb,0,0,Le.Lb)}if(Ke.ub>Se)return Mn(N,7,"bad partition length");de(Le=N.m,K,oe,Ke.ub),oe+=Ke.ub,Se-=Ke.ub,Ke.Rb&&(ze.Ld=U(Le),ze.Kd=U(Le)),ze=N.Qa;var Je,st=N.Pa;if(e(Le!=null),e(ze!=null),ze.Cb=U(Le),ze.Cb){if(ze.Bb=U(Le),U(Le)){for(ze.Fb=U(Le),Je=0;4>Je;++Je)ze.Zb[Je]=U(Le)?ge(Le,7):0;for(Je=0;4>Je;++Je)ze.Lb[Je]=U(Le)?ge(Le,6):0}if(ze.Bb)for(Je=0;3>Je;++Je)st.jb[Je]=U(Le)?fe(Le,8):255}else ze.Bb=0;if(Le.Ka)return Mn(N,3,"cannot parse segment header");if((ze=N.ed).zd=U(Le),ze.Tb=fe(Le,6),ze.wb=fe(Le,3),ze.Pc=U(Le),ze.Pc&&U(Le)){for(st=0;4>st;++st)U(Le)&&(ze.vd[st]=ge(Le,6));for(st=0;4>st;++st)U(Le)&&(ze.od[st]=ge(Le,6))}if(N.L=ze.Tb==0?0:ze.zd?1:2,Le.Ka)return Mn(N,3,"cannot parse filter header");var xt=Se;if(Se=Je=oe,oe=Je+xt,ze=xt,N.Xb=(1<<fe(N.m,2))-1,xt<3*(st=N.Xb))K=7;else{for(Je+=3*st,ze-=3*st,xt=0;xt<st;++xt){var Rt=K[Se+0]|K[Se+1]<<8|K[Se+2]<<16;Rt>ze&&(Rt=ze),de(N.Jc[+xt],K,Je,Rt),Je+=Rt,ze-=Rt,Se+=3}de(N.Jc[+st],K,Je,ze),K=Je<oe?0:5}if(K!=0)return Mn(N,K,"cannot parse partitions");for(K=fe(Je=N.m,7),Se=U(Je)?ge(Je,4):0,oe=U(Je)?ge(Je,4):0,ze=U(Je)?ge(Je,4):0,st=U(Je)?ge(Je,4):0,Je=U(Je)?ge(Je,4):0,xt=N.Qa,Rt=0;4>Rt;++Rt){if(xt.Cb){var it=xt.Zb[Rt];xt.Fb||(it+=K)}else{if(0<Rt){N.pb[Rt]=N.pb[0];continue}it=K}var wt=N.pb[Rt];wt.Sc[0]=c3[Nn(it+Se,127)],wt.Sc[1]=u3[Nn(it+0,127)],wt.Eb[0]=2*c3[Nn(it+oe,127)],wt.Eb[1]=101581*u3[Nn(it+ze,127)]>>16,8>wt.Eb[1]&&(wt.Eb[1]=8),wt.Qc[0]=c3[Nn(it+st,117)],wt.Qc[1]=u3[Nn(it+Je,127)],wt.lc=it+Je}if(!Ke.Rb)return Mn(N,4,"Not a key frame.");for(U(Le),Ke=N.Pa,K=0;4>K;++K){for(Se=0;8>Se;++Se)for(oe=0;3>oe;++oe)for(ze=0;11>ze;++ze)st=ne(Le,sue[K][Se][oe][ze])?fe(Le,8):nue[K][Se][oe][ze],Ke.Wc[K][Se].Yb[oe][ze]=st;for(Se=0;17>Se;++Se)Ke.Xc[K][Se]=Ke.Wc[K][iue[Se]]}return N.kc=U(Le),N.kc&&(N.Bd=fe(Le,8)),N.cb=1}function $t(N,B,K,oe,Se,Le,Ke){var ze=B[Se].Yb[K];for(K=0;16>Se;++Se){if(!ne(N,ze[K+0]))return Se;for(;!ne(N,ze[K+1]);)if(ze=B[++Se].Yb[0],K=0,Se==16)return 16;var Je=B[Se+1].Yb;if(ne(N,ze[K+2])){var st=N,xt=0;if(ne(st,(it=ze)[(Rt=K)+3]))if(ne(st,it[Rt+6])){for(ze=0,Rt=2*(xt=ne(st,it[Rt+8]))+(it=ne(st,it[Rt+9+xt])),xt=0,it=tue[Rt];it[ze];++ze)xt+=xt+ne(st,it[ze]);xt+=3+(8<<Rt)}else ne(st,it[Rt+7])?(xt=7+2*ne(st,165),xt+=ne(st,145)):xt=5+ne(st,159);else xt=ne(st,it[Rt+4])?3+ne(st,it[Rt+5]):2;ze=Je[2]}else xt=1,ze=Je[1];Je=Ke+rue[Se],0>(st=N).b&&D(st);var Rt,it=st.b,wt=(Rt=st.Ca>>1)-(st.I>>it)>>31;--st.b,st.Ca+=wt,st.Ca|=1,st.I-=(Rt+1&wt)<<it,Le[Je]=((xt^wt)-wt)*oe[(0<Se)+0]}return 16}function Gt(N){var B=N.rb[N.sb-1];B.la=0,B.Na=0,a(N.zc,0,0,N.zc.length),N.ja=0}function It(N,B,K,oe,Se){Se=N[B+K+32*oe]+(Se>>3),N[B+K+32*oe]=-256&Se?0>Se?0:255:Se}function kt(N,B,K,oe,Se,Le){It(N,B,0,K,oe+Se),It(N,B,1,K,oe+Le),It(N,B,2,K,oe-Le),It(N,B,3,K,oe-Se)}function Ht(N){return(20091*N>>16)+N}function Ft(N,B,K,oe){var Se,Le=0,Ke=s(16);for(Se=0;4>Se;++Se){var ze=N[B+0]+N[B+8],Je=N[B+0]-N[B+8],st=(35468*N[B+4]>>16)-Ht(N[B+12]),xt=Ht(N[B+4])+(35468*N[B+12]>>16);Ke[Le+0]=ze+xt,Ke[Le+1]=Je+st,Ke[Le+2]=Je-st,Ke[Le+3]=ze-xt,Le+=4,B++}for(Se=Le=0;4>Se;++Se)ze=(N=Ke[Le+0]+4)+Ke[Le+8],Je=N-Ke[Le+8],st=(35468*Ke[Le+4]>>16)-Ht(Ke[Le+12]),It(K,oe,0,0,ze+(xt=Ht(Ke[Le+4])+(35468*Ke[Le+12]>>16))),It(K,oe,1,0,Je+st),It(K,oe,2,0,Je-st),It(K,oe,3,0,ze-xt),Le++,oe+=32}function Vt(N,B,K,oe){var Se=N[B+0]+4,Le=35468*N[B+4]>>16,Ke=Ht(N[B+4]),ze=35468*N[B+1]>>16;kt(K,oe,0,Se+Ke,N=Ht(N[B+1]),ze),kt(K,oe,1,Se+Le,N,ze),kt(K,oe,2,Se-Le,N,ze),kt(K,oe,3,Se-Ke,N,ze)}function nr(N,B,K,oe,Se){Ft(N,B,K,oe),Se&&Ft(N,B+16,K,oe+4)}function Zt(N,B,K,oe){jm(N,B+0,K,oe,1),jm(N,B+32,K,oe+128,1)}function fa(N,B,K,oe){var Se;for(N=N[B+0]+4,Se=0;4>Se;++Se)for(B=0;4>B;++B)It(K,oe,B,Se,N)}function os(N,B,K,oe){N[B+0]&&ca(N,B+0,K,oe),N[B+16]&&ca(N,B+16,K,oe+4),N[B+32]&&ca(N,B+32,K,oe+128),N[B+48]&&ca(N,B+48,K,oe+128+4)}function Xn(N,B,K,oe){var Se,Le=s(16);for(Se=0;4>Se;++Se){var Ke=N[B+0+Se]+N[B+12+Se],ze=N[B+4+Se]+N[B+8+Se],Je=N[B+4+Se]-N[B+8+Se],st=N[B+0+Se]-N[B+12+Se];Le[0+Se]=Ke+ze,Le[8+Se]=Ke-ze,Le[4+Se]=st+Je,Le[12+Se]=st-Je}for(Se=0;4>Se;++Se)Ke=(N=Le[0+4*Se]+3)+Le[3+4*Se],ze=Le[1+4*Se]+Le[2+4*Se],Je=Le[1+4*Se]-Le[2+4*Se],st=N-Le[3+4*Se],K[oe+0]=Ke+ze>>3,K[oe+16]=st+Je>>3,K[oe+32]=Ke-ze>>3,K[oe+48]=st-Je>>3,oe+=64}function bs(N,B,K){var oe,Se=B-32,Le=Dc,Ke=255-N[Se-1];for(oe=0;oe<K;++oe){var ze,Je=Le,st=Ke+N[B-1];for(ze=0;ze<K;++ze)N[B+ze]=Je[st+N[Se+ze]];B+=32}}function il(N,B){bs(N,B,4)}function dd(N,B){bs(N,B,8)}function fd(N,B){bs(N,B,16)}function Ad(N,B){var K;for(K=0;16>K;++K)n(N,B+32*K,N,B-32,16)}function mu(N,B){var K;for(K=16;0<K;--K)a(N,B,N[B-1],16),B+=32}function ko(N,B,K){var oe;for(oe=0;16>oe;++oe)a(B,K+32*oe,N,16)}function pu(N,B){var K,oe=16;for(K=0;16>K;++K)oe+=N[B-1+32*K]+N[B+K-32];ko(oe>>5,N,B)}function af(N,B){var K,oe=8;for(K=0;16>K;++K)oe+=N[B-1+32*K];ko(oe>>4,N,B)}function Ch(N,B){var K,oe=8;for(K=0;16>K;++K)oe+=N[B+K-32];ko(oe>>4,N,B)}function Bg(N,B){ko(128,N,B)}function Jr(N,B,K){return N+2*B+K+2>>2}function v1(N,B){var K,oe=B-32;for(oe=new Uint8Array([Jr(N[oe-1],N[oe+0],N[oe+1]),Jr(N[oe+0],N[oe+1],N[oe+2]),Jr(N[oe+1],N[oe+2],N[oe+3]),Jr(N[oe+2],N[oe+3],N[oe+4])]),K=0;4>K;++K)n(N,B+32*K,oe,0,oe.length)}function y1(N,B){var K=N[B-1],oe=N[B-1+32],Se=N[B-1+64],Le=N[B-1+96];ve(N,B+0,16843009*Jr(N[B-1-32],K,oe)),ve(N,B+32,16843009*Jr(K,oe,Se)),ve(N,B+64,16843009*Jr(oe,Se,Le)),ve(N,B+96,16843009*Jr(Se,Le,Le))}function b1(N,B){var K,oe=4;for(K=0;4>K;++K)oe+=N[B+K-32]+N[B-1+32*K];for(oe>>=3,K=0;4>K;++K)a(N,B+32*K,oe,4)}function co(N,B){var K=N[B-1+0],oe=N[B-1+32],Se=N[B-1+64],Le=N[B-1-32],Ke=N[B+0-32],ze=N[B+1-32],Je=N[B+2-32],st=N[B+3-32];N[B+0+96]=Jr(oe,Se,N[B-1+96]),N[B+1+96]=N[B+0+64]=Jr(K,oe,Se),N[B+2+96]=N[B+1+64]=N[B+0+32]=Jr(Le,K,oe),N[B+3+96]=N[B+2+64]=N[B+1+32]=N[B+0+0]=Jr(Ke,Le,K),N[B+3+64]=N[B+2+32]=N[B+1+0]=Jr(ze,Ke,Le),N[B+3+32]=N[B+2+0]=Jr(Je,ze,Ke),N[B+3+0]=Jr(st,Je,ze)}function hd(N,B){var K=N[B+1-32],oe=N[B+2-32],Se=N[B+3-32],Le=N[B+4-32],Ke=N[B+5-32],ze=N[B+6-32],Je=N[B+7-32];N[B+0+0]=Jr(N[B+0-32],K,oe),N[B+1+0]=N[B+0+32]=Jr(K,oe,Se),N[B+2+0]=N[B+1+32]=N[B+0+64]=Jr(oe,Se,Le),N[B+3+0]=N[B+2+32]=N[B+1+64]=N[B+0+96]=Jr(Se,Le,Ke),N[B+3+32]=N[B+2+64]=N[B+1+96]=Jr(Le,Ke,ze),N[B+3+64]=N[B+2+96]=Jr(Ke,ze,Je),N[B+3+96]=Jr(ze,Je,Je)}function w1(N,B){var K=N[B-1+0],oe=N[B-1+32],Se=N[B-1+64],Le=N[B-1-32],Ke=N[B+0-32],ze=N[B+1-32],Je=N[B+2-32],st=N[B+3-32];N[B+0+0]=N[B+1+64]=Le+Ke+1>>1,N[B+1+0]=N[B+2+64]=Ke+ze+1>>1,N[B+2+0]=N[B+3+64]=ze+Je+1>>1,N[B+3+0]=Je+st+1>>1,N[B+0+96]=Jr(Se,oe,K),N[B+0+64]=Jr(oe,K,Le),N[B+0+32]=N[B+1+96]=Jr(K,Le,Ke),N[B+1+32]=N[B+2+96]=Jr(Le,Ke,ze),N[B+2+32]=N[B+3+96]=Jr(Ke,ze,Je),N[B+3+32]=Jr(ze,Je,st)}function _h(N,B){var K=N[B+0-32],oe=N[B+1-32],Se=N[B+2-32],Le=N[B+3-32],Ke=N[B+4-32],ze=N[B+5-32],Je=N[B+6-32],st=N[B+7-32];N[B+0+0]=K+oe+1>>1,N[B+1+0]=N[B+0+64]=oe+Se+1>>1,N[B+2+0]=N[B+1+64]=Se+Le+1>>1,N[B+3+0]=N[B+2+64]=Le+Ke+1>>1,N[B+0+32]=Jr(K,oe,Se),N[B+1+32]=N[B+0+96]=Jr(oe,Se,Le),N[B+2+32]=N[B+1+96]=Jr(Se,Le,Ke),N[B+3+32]=N[B+2+96]=Jr(Le,Ke,ze),N[B+3+64]=Jr(Ke,ze,Je),N[B+3+96]=Jr(ze,Je,st)}function md(N,B){var K=N[B-1+0],oe=N[B-1+32],Se=N[B-1+64],Le=N[B-1+96];N[B+0+0]=K+oe+1>>1,N[B+2+0]=N[B+0+32]=oe+Se+1>>1,N[B+2+32]=N[B+0+64]=Se+Le+1>>1,N[B+1+0]=Jr(K,oe,Se),N[B+3+0]=N[B+1+32]=Jr(oe,Se,Le),N[B+3+32]=N[B+1+64]=Jr(Se,Le,Le),N[B+3+64]=N[B+2+64]=N[B+0+96]=N[B+1+96]=N[B+2+96]=N[B+3+96]=Le}function Eh(N,B){var K=N[B-1+0],oe=N[B-1+32],Se=N[B-1+64],Le=N[B-1+96],Ke=N[B-1-32],ze=N[B+0-32],Je=N[B+1-32],st=N[B+2-32];N[B+0+0]=N[B+2+32]=K+Ke+1>>1,N[B+0+32]=N[B+2+64]=oe+K+1>>1,N[B+0+64]=N[B+2+96]=Se+oe+1>>1,N[B+0+96]=Le+Se+1>>1,N[B+3+0]=Jr(ze,Je,st),N[B+2+0]=Jr(Ke,ze,Je),N[B+1+0]=N[B+3+32]=Jr(K,Ke,ze),N[B+1+32]=N[B+3+64]=Jr(oe,K,Ke),N[B+1+64]=N[B+3+96]=Jr(Se,oe,K),N[B+1+96]=Jr(Le,Se,oe)}function Tc(N,B){var K;for(K=0;8>K;++K)n(N,B+32*K,N,B-32,8)}function Jf(N,B){var K;for(K=0;8>K;++K)a(N,B,N[B-1],8),B+=32}function gu(N,B,K){var oe;for(oe=0;8>oe;++oe)a(B,K+32*oe,N,8)}function Nm(N,B){var K,oe=8;for(K=0;8>K;++K)oe+=N[B+K-32]+N[B-1+32*K];gu(oe>>4,N,B)}function Ia(N,B){var K,oe=4;for(K=0;8>K;++K)oe+=N[B+K-32];gu(oe>>3,N,B)}function Cm(N,B){var K,oe=4;for(K=0;8>K;++K)oe+=N[B-1+32*K];gu(oe>>3,N,B)}function Tg(N,B){gu(128,N,B)}function xu(N,B,K){var oe=N[B-K],Se=N[B+0],Le=3*(Se-oe)+a3[1020+N[B-2*K]-N[B+K]],Ke=iN[112+(Le+4>>3)];N[B-K]=Dc[255+oe+iN[112+(Le+3>>3)]],N[B+0]=Dc[255+Se-Ke]}function Sh(N,B,K,oe){var Se=N[B+0],Le=N[B+K];return Cu[255+N[B-2*K]-N[B-K]]>oe||Cu[255+Le-Se]>oe}function Zf(N,B,K,oe){return 4*Cu[255+N[B-K]-N[B+0]]+Cu[255+N[B-2*K]-N[B+K]]<=oe}function sf(N,B,K,oe,Se){var Le=N[B-3*K],Ke=N[B-2*K],ze=N[B-K],Je=N[B+0],st=N[B+K],xt=N[B+2*K],Rt=N[B+3*K];return 4*Cu[255+ze-Je]+Cu[255+Ke-st]>oe?0:Cu[255+N[B-4*K]-Le]<=Se&&Cu[255+Le-Ke]<=Se&&Cu[255+Ke-ze]<=Se&&Cu[255+Rt-xt]<=Se&&Cu[255+xt-st]<=Se&&Cu[255+st-Je]<=Se}function of(N,B,K,oe){var Se=2*oe+1;for(oe=0;16>oe;++oe)Zf(N,B+oe,K,Se)&&xu(N,B+oe,K)}function Dl(N,B,K,oe){var Se=2*oe+1;for(oe=0;16>oe;++oe)Zf(N,B+oe*K,1,Se)&&xu(N,B+oe*K,1)}function _m(N,B,K,oe){var Se;for(Se=3;0<Se;--Se)of(N,B+=4*K,K,oe)}function kg(N,B,K,oe){var Se;for(Se=3;0<Se;--Se)Dl(N,B+=4,K,oe)}function Rl(N,B,K,oe,Se,Le,Ke,ze){for(Le=2*Le+1;0<Se--;){if(sf(N,B,K,Le,Ke))if(Sh(N,B,K,ze))xu(N,B,K);else{var Je=N,st=B,xt=K,Rt=Je[st-2*xt],it=Je[st-xt],wt=Je[st+0],Pt=Je[st+xt],Wt=Je[st+2*xt],Dt=27*(er=a3[1020+3*(wt-it)+a3[1020+Rt-Pt]])+63>>7,Jt=18*er+63>>7,er=9*er+63>>7;Je[st-3*xt]=Dc[255+Je[st-3*xt]+er],Je[st-2*xt]=Dc[255+Rt+Jt],Je[st-xt]=Dc[255+it+Dt],Je[st+0]=Dc[255+wt-Dt],Je[st+xt]=Dc[255+Pt-Jt],Je[st+2*xt]=Dc[255+Wt-er]}B+=oe}}function vu(N,B,K,oe,Se,Le,Ke,ze){for(Le=2*Le+1;0<Se--;){if(sf(N,B,K,Le,Ke))if(Sh(N,B,K,ze))xu(N,B,K);else{var Je=N,st=B,xt=K,Rt=Je[st-xt],it=Je[st+0],wt=Je[st+xt],Pt=iN[112+(4+(Wt=3*(it-Rt))>>3)],Wt=iN[112+(Wt+3>>3)],Dt=Pt+1>>1;Je[st-2*xt]=Dc[255+Je[st-2*xt]+Dt],Je[st-xt]=Dc[255+Rt+Wt],Je[st+0]=Dc[255+it-Pt],Je[st+xt]=Dc[255+wt-Dt]}B+=oe}}function Ih(N,B,K,oe,Se,Le){Rl(N,B,K,1,16,oe,Se,Le)}function yu(N,B,K,oe,Se,Le){Rl(N,B,1,K,16,oe,Se,Le)}function Em(N,B,K,oe,Se,Le){var Ke;for(Ke=3;0<Ke;--Ke)vu(N,B+=4*K,K,1,16,oe,Se,Le)}function M(N,B,K,oe,Se,Le){var Ke;for(Ke=3;0<Ke;--Ke)vu(N,B+=4,1,K,16,oe,Se,Le)}function Ee(N,B,K,oe,Se,Le,Ke,ze){Rl(N,B,Se,1,8,Le,Ke,ze),Rl(K,oe,Se,1,8,Le,Ke,ze)}function at(N,B,K,oe,Se,Le,Ke,ze){Rl(N,B,1,Se,8,Le,Ke,ze),Rl(K,oe,1,Se,8,Le,Ke,ze)}function ht(N,B,K,oe,Se,Le,Ke,ze){vu(N,B+4*Se,Se,1,8,Le,Ke,ze),vu(K,oe+4*Se,Se,1,8,Le,Ke,ze)}function Et(N,B,K,oe,Se,Le,Ke,ze){vu(N,B+4,1,Se,8,Le,Ke,ze),vu(K,oe+4,1,Se,8,Le,Ke,ze)}function Yt(){this.ba=new xe,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new dt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function rr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Pr(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Mr(){this.ua=0,this.Wa=new le,this.vb=new le,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Ae,this.yc=new O}function Zr(){this.xb=this.a=0,this.l=new za,this.ca=new xe,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Q,this.Pb=0,this.wd=new Q,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Mr,this.ab=0,this.gc=i(4,Pr),this.Oc=0}function cn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new za,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function kn(N,B,K,oe,Se,Le,Ke){for(N=N==null?0:N[B+0],B=0;B<Ke;++B)Se[Le+B]=N+K[oe+B]&255,N=Se[Le+B]}function na(N,B,K,oe,Se,Le,Ke){var ze;if(N==null)kn(null,null,K,oe,Se,Le,Ke);else for(ze=0;ze<Ke;++ze)Se[Le+ze]=N[B+ze]+K[oe+ze]&255}function ws(N,B,K,oe,Se,Le,Ke){if(N==null)kn(null,null,K,oe,Se,Le,Ke);else{var ze,Je=N[B+0],st=Je,xt=Je;for(ze=0;ze<Ke;++ze)st=xt+(Je=N[B+ze])-st,xt=K[oe+ze]+(-256&st?0>st?0:255:st)&255,st=Je,Se[Le+ze]=xt}}function Aa(N,B,K,oe){var Se=B.width,Le=B.o;if(e(N!=null&&B!=null),0>K||0>=oe||K+oe>Le)return null;if(!N.Cc){if(N.ga==null){var Ke;if(N.ga=new cn,(Ke=N.ga==null)||(Ke=B.width*B.o,e(N.Gb.length==0),N.Gb=s(Ke),N.Uc=0,N.Gb==null?Ke=0:(N.mb=N.Gb,N.nb=N.Uc,N.rc=null,Ke=1),Ke=!Ke),!Ke){Ke=N.ga;var ze=N.Fa,Je=N.P,st=N.qc,xt=N.mb,Rt=N.nb,it=Je+1,wt=st-1,Pt=Ke.l;if(e(ze!=null&&xt!=null&&B!=null),Rh[0]=null,Rh[1]=kn,Rh[2]=na,Rh[3]=ws,Ke.ca=xt,Ke.tb=Rt,Ke.c=B.width,Ke.i=B.height,e(0<Ke.c&&0<Ke.i),1>=st)B=0;else if(Ke.$a=3&ze[Je+0],Ke.Z=ze[Je+0]>>2&3,Ke.Lc=ze[Je+0]>>4&3,Je=ze[Je+0]>>6&3,0>Ke.$a||1<Ke.$a||4<=Ke.Z||1<Ke.Lc||Je)B=0;else if(Pt.put=te,Pt.ac=G,Pt.bc=He,Pt.ma=Ke,Pt.width=B.width,Pt.height=B.height,Pt.Da=B.Da,Pt.v=B.v,Pt.va=B.va,Pt.j=B.j,Pt.o=B.o,Ke.$a)e:{e(Ke.$a==1),B=Re();t:for(;;){if(B==null){B=0;break e}if(e(Ke!=null),Ke.mc=B,B.c=Ke.c,B.i=Ke.i,B.l=Ke.l,B.l.ma=Ke,B.l.width=Ke.c,B.l.height=Ke.i,B.a=0,ee(B.m,ze,it,wt),!Ze(Ke.c,Ke.i,1,B,null)||(B.ab==1&&B.gc[0].hc==3&&me(B.s)?(Ke.ic=1,ze=B.c*B.i,B.Ta=null,B.Ua=0,B.V=s(ze),B.Ba=0,B.V==null?(B.a=1,B=0):B=1):(Ke.ic=0,B=nt(B,Ke.c)),!B))break t;B=1;break e}Ke.mc=null,B=0}else B=wt>=Ke.c*Ke.i;Ke=!B}if(Ke)return null;N.ga.Lc!=1?N.Ga=0:oe=Le-K}e(N.ga!=null),e(K+oe<=Le);e:{if(B=(ze=N.ga).c,Le=ze.l.o,ze.$a==0){if(it=N.rc,wt=N.Vc,Pt=N.Fa,Je=N.P+1+K*B,st=N.mb,xt=N.nb+K*B,e(Je<=N.P+N.qc),ze.Z!=0)for(e(Rh[ze.Z]!=null),Ke=0;Ke<oe;++Ke)Rh[ze.Z](it,wt,Pt,Je,st,xt,B),it=st,wt=xt,xt+=B,Je+=B;else for(Ke=0;Ke<oe;++Ke)n(st,xt,Pt,Je,B),it=st,wt=xt,xt+=B,Je+=B;N.rc=it,N.Vc=wt}else{if(e(ze.mc!=null),B=K+oe,e((Ke=ze.mc)!=null),e(B<=Ke.i),Ke.C>=B)B=1;else if(ze.ic||ic(),ze.ic){ze=Ke.V,it=Ke.Ba,wt=Ke.c;var Wt=Ke.i,Dt=(Pt=1,Je=Ke.$/wt,st=Ke.$%wt,xt=Ke.m,Rt=Ke.s,Ke.$),Jt=wt*Wt,er=wt*B,fr=Rt.wc,ir=Dt<er?ae(Rt,st,Je):null;e(Dt<=Jt),e(B<=Wt),e(me(Rt));t:for(;;){for(;!xt.h&&Dt<er;){if(st&fr||(ir=ae(Rt,st,Je)),e(ir!=null),J(xt),256>(Wt=tt(ir.G[0],ir.H[0],xt)))ze[it+Dt]=Wt,++Dt,++st>=wt&&(st=0,++Je<=B&&!(Je%16)&&Y(Ke,Je));else{if(!(280>Wt)){Pt=0;break t}Wt=be(Wt-256,xt);var $r,Fr=tt(ir.G[4],ir.H[4],xt);if(J(xt),!(Dt>=(Fr=Me(wt,Fr=be(Fr,xt)))&&Jt-Dt>=Wt)){Pt=0;break t}for($r=0;$r<Wt;++$r)ze[it+Dt+$r]=ze[it+Dt+$r-Fr];for(Dt+=Wt,st+=Wt;st>=wt;)st-=wt,++Je<=B&&!(Je%16)&&Y(Ke,Je);Dt<er&&st&fr&&(ir=ae(Rt,st,Je))}e(xt.h==R(xt))}Y(Ke,Je>B?B:Je);break t}!Pt||xt.h&&Dt<Jt?(Pt=0,Ke.a=xt.h?5:3):Ke.$=Dt,B=Pt}else B=pe(Ke,Ke.V,Ke.Ba,Ke.c,Ke.i,B,_t);if(!B){oe=0;break e}}K+oe>=Le&&(N.Cc=1),oe=1}if(!oe)return null;if(N.Cc&&((oe=N.ga)!=null&&(oe.mc=null),N.ga=null,0<N.Ga))return alert("todo:WebPDequantizeLevels"),null}return N.nb+K*Se}function Qs(N,B,K,oe,Se,Le){for(;0<Se--;){var Ke,ze=N,Je=B+(K?1:0),st=N,xt=B+(K?0:3);for(Ke=0;Ke<oe;++Ke){var Rt=st[xt+4*Ke];Rt!=255&&(Rt*=32897,ze[Je+4*Ke+0]=ze[Je+4*Ke+0]*Rt>>23,ze[Je+4*Ke+1]=ze[Je+4*Ke+1]*Rt>>23,ze[Je+4*Ke+2]=ze[Je+4*Ke+2]*Rt>>23)}B+=Le}}function Ns(N,B,K,oe,Se){for(;0<oe--;){var Le;for(Le=0;Le<K;++Le){var Ke=N[B+2*Le+0],ze=15&(st=N[B+2*Le+1]),Je=4369*ze,st=(240&st|st>>4)*Je>>16;N[B+2*Le+0]=(240&Ke|Ke>>4)*Je>>16&240|(15&Ke|Ke<<4)*Je>>16>>4&15,N[B+2*Le+1]=240&st|ze}B+=Se}}function Vs(N,B,K,oe,Se,Le,Ke,ze){var Je,st,xt=255;for(st=0;st<Se;++st){for(Je=0;Je<oe;++Je){var Rt=N[B+Je];Le[Ke+4*Je]=Rt,xt&=Rt}B+=K,Ke+=ze}return xt!=255}function Cs(N,B,K,oe,Se){var Le;for(Le=0;Le<Se;++Le)K[oe+Le]=N[B+Le]>>8}function ic(){B1=Qs,fM=Ns,AM=Vs,hM=Cs}function bu(N,B,K){E[N]=function(oe,Se,Le,Ke,ze,Je,st,xt,Rt,it,wt,Pt,Wt,Dt,Jt,er,fr){var ir,$r=fr-1>>1,Fr=ze[Je+0]|st[xt+0]<<16,pn=Rt[it+0]|wt[Pt+0]<<16;e(oe!=null);var Ur=3*Fr+pn+131074>>2;for(B(oe[Se+0],255&Ur,Ur>>16,Wt,Dt),Le!=null&&(Ur=3*pn+Fr+131074>>2,B(Le[Ke+0],255&Ur,Ur>>16,Jt,er)),ir=1;ir<=$r;++ir){var Un=ze[Je+ir]|st[xt+ir]<<16,Ri=Rt[it+ir]|wt[Pt+ir]<<16,gn=Fr+Un+pn+Ri+524296,Qr=gn+2*(Un+pn)>>3;Ur=Qr+Fr>>1,Fr=(gn=gn+2*(Fr+Ri)>>3)+Un>>1,B(oe[Se+2*ir-1],255&Ur,Ur>>16,Wt,Dt+(2*ir-1)*K),B(oe[Se+2*ir-0],255&Fr,Fr>>16,Wt,Dt+(2*ir-0)*K),Le!=null&&(Ur=gn+pn>>1,Fr=Qr+Ri>>1,B(Le[Ke+2*ir-1],255&Ur,Ur>>16,Jt,er+(2*ir-1)*K),B(Le[Ke+2*ir+0],255&Fr,Fr>>16,Jt,er+(2*ir+0)*K)),Fr=Un,pn=Ri}1&fr||(Ur=3*Fr+pn+131074>>2,B(oe[Se+fr-1],255&Ur,Ur>>16,Wt,Dt+(fr-1)*K),Le!=null&&(Ur=3*pn+Fr+131074>>2,B(Le[Ke+fr-1],255&Ur,Ur>>16,Jt,er+(fr-1)*K)))}}function wu(){_u[oN]=lue,_u[lN]=_M,_u[yM]=cue,_u[cN]=EM,_u[uN]=SM,_u[s3]=IM,_u[bM]=uue,_u[i3]=_M,_u[o3]=EM,_u[dN]=SM,_u[l3]=IM}function C(N){return N&-16384?0>N?0:255:N>>due}function q(N,B){return C((19077*N>>8)+(26149*B>>8)-14234)}function he(N,B,K){return C((19077*N>>8)-(6419*B>>8)-(13320*K>>8)+8708)}function We(N,B){return C((19077*N>>8)+(33050*B>>8)-17685)}function jt(N,B,K,oe,Se){oe[Se+0]=q(N,K),oe[Se+1]=he(N,B,K),oe[Se+2]=We(N,B)}function Qt(N,B,K,oe,Se){oe[Se+0]=We(N,B),oe[Se+1]=he(N,B,K),oe[Se+2]=q(N,K)}function mr(N,B,K,oe,Se){var Le=he(N,B,K);B=Le<<3&224|We(N,B)>>3,oe[Se+0]=248&q(N,K)|Le>>5,oe[Se+1]=B}function Ln(N,B,K,oe,Se){var Le=240&We(N,B)|15;oe[Se+0]=240&q(N,K)|he(N,B,K)>>4,oe[Se+1]=Le}function _s(N,B,K,oe,Se){oe[Se+0]=255,jt(N,B,K,oe,Se+1)}function In(N,B,K,oe,Se){Qt(N,B,K,oe,Se),oe[Se+3]=255}function Yn(N,B,K,oe,Se){jt(N,B,K,oe,Se),oe[Se+3]=255}function La(N,B,K){E[N]=function(oe,Se,Le,Ke,ze,Je,st,xt,Rt){for(var it=xt+(-2&Rt)*K;xt!=it;)B(oe[Se+0],Le[Ke+0],ze[Je+0],st,xt),B(oe[Se+1],Le[Ke+0],ze[Je+0],st,xt+K),Se+=2,++Ke,++Je,xt+=2*K;1&Rt&&B(oe[Se+0],Le[Ke+0],ze[Je+0],st,xt)}}function kc(N,B,K){return K==0?N==0?B==0?6:5:B==0?4:0:K}function ol(N,B,K,oe,Se){switch(N>>>30){case 3:jm(B,K,oe,Se,0);break;case 2:Nu(B,K,oe,Se);break;case 1:ca(B,K,oe,Se)}}function Fo(N,B){var K,oe,Se=B.M,Le=B.Nb,Ke=N.oc,ze=N.pc+40,Je=N.oc,st=N.pc+584,xt=N.oc,Rt=N.pc+600;for(K=0;16>K;++K)Ke[ze+32*K-1]=129;for(K=0;8>K;++K)Je[st+32*K-1]=129,xt[Rt+32*K-1]=129;for(0<Se?Ke[ze-1-32]=Je[st-1-32]=xt[Rt-1-32]=129:(a(Ke,ze-32-1,127,21),a(Je,st-32-1,127,9),a(xt,Rt-32-1,127,9)),oe=0;oe<N.za;++oe){var it=B.ya[B.aa+oe];if(0<oe){for(K=-1;16>K;++K)n(Ke,ze+32*K-4,Ke,ze+32*K+12,4);for(K=-1;8>K;++K)n(Je,st+32*K-4,Je,st+32*K+4,4),n(xt,Rt+32*K-4,xt,Rt+32*K+4,4)}var wt=N.Gd,Pt=N.Hd+oe,Wt=it.ad,Dt=it.Hc;if(0<Se&&(n(Ke,ze-32,wt[Pt].y,0,16),n(Je,st-32,wt[Pt].f,0,8),n(xt,Rt-32,wt[Pt].ea,0,8)),it.Za){var Jt=Ke,er=ze-32+16;for(0<Se&&(oe>=N.za-1?a(Jt,er,wt[Pt].y[15],4):n(Jt,er,wt[Pt+1].y,0,4)),K=0;4>K;K++)Jt[er+128+K]=Jt[er+256+K]=Jt[er+384+K]=Jt[er+0+K];for(K=0;16>K;++K,Dt<<=2)Jt=Ke,er=ze+PM[K],gd[it.Ob[K]](Jt,er),ol(Dt,Wt,16*+K,Jt,er)}else if(Jt=kc(oe,Se,it.Ob[0]),Dh[Jt](Ke,ze),Dt!=0)for(K=0;16>K;++K,Dt<<=2)ol(Dt,Wt,16*+K,Ke,ze+PM[K]);for(K=it.Gc,Jt=kc(oe,Se,it.Dd),rA[Jt](Je,st),rA[Jt](xt,Rt),Dt=Wt,Jt=Je,er=st,255&(it=0|K)&&(170&it?uf(Dt,256,Jt,er):ka(Dt,256,Jt,er)),it=xt,Dt=Rt,255&(K>>=8)&&(170&K?uf(Wt,320,it,Dt):ka(Wt,320,it,Dt)),Se<N.Ub-1&&(n(wt[Pt].y,0,Ke,ze+480,16),n(wt[Pt].f,0,Je,st+224,8),n(wt[Pt].ea,0,xt,Rt+224,8)),K=8*Le*N.B,wt=N.sa,Pt=N.ta+16*oe+16*Le*N.R,Wt=N.qa,it=N.ra+8*oe+K,Dt=N.Ha,Jt=N.Ia+8*oe+K,K=0;16>K;++K)n(wt,Pt+K*N.R,Ke,ze+32*K,16);for(K=0;8>K;++K)n(Wt,it+K*N.B,Je,st+32*K,8),n(Dt,Jt+K*N.B,xt,Rt+32*K,8)}}function pd(N,B,K,oe,Se,Le,Ke,ze,Je){var st=[0],xt=[0],Rt=0,it=Je!=null?Je.kd:0,wt=Je??new rr;if(N==null||12>K)return 7;wt.data=N,wt.w=B,wt.ha=K,B=[B],K=[K],wt.gb=[wt.gb];e:{var Pt=B,Wt=K,Dt=wt.gb;if(e(N!=null),e(Wt!=null),e(Dt!=null),Dt[0]=0,12<=Wt[0]&&!r(N,Pt[0],"RIFF")){if(r(N,Pt[0]+8,"WEBP")){Dt=3;break e}var Jt=ie(N,Pt[0]+4);if(12>Jt||4294967286<Jt){Dt=3;break e}if(it&&Jt>Wt[0]-8){Dt=7;break e}Dt[0]=Jt,Pt[0]+=12,Wt[0]-=12}Dt=0}if(Dt!=0)return Dt;for(Jt=0<wt.gb[0],K=K[0];;){e:{var er=N;Wt=B,Dt=K;var fr=st,ir=xt,$r=Pt=[0];if((Ur=Rt=[Rt])[0]=0,8>Dt[0])Dt=7;else{if(!r(er,Wt[0],"VP8X")){if(ie(er,Wt[0]+4)!=10){Dt=3;break e}if(18>Dt[0]){Dt=7;break e}var Fr=ie(er,Wt[0]+8),pn=1+Ye(er,Wt[0]+12);if(2147483648<=pn*(er=1+Ye(er,Wt[0]+15))){Dt=3;break e}$r!=null&&($r[0]=Fr),fr!=null&&(fr[0]=pn),ir!=null&&(ir[0]=er),Wt[0]+=18,Dt[0]-=18,Ur[0]=1}Dt=0}}if(Rt=Rt[0],Pt=Pt[0],Dt!=0)return Dt;if(Wt=!!(2&Pt),!Jt&&Rt)return 3;if(Le!=null&&(Le[0]=!!(16&Pt)),Ke!=null&&(Ke[0]=Wt),ze!=null&&(ze[0]=0),Ke=st[0],Pt=xt[0],Rt&&Wt&&Je==null){Dt=0;break}if(4>K){Dt=7;break}if(Jt&&Rt||!Jt&&!Rt&&!r(N,B[0],"ALPH")){K=[K],wt.na=[wt.na],wt.P=[wt.P],wt.Sa=[wt.Sa];e:{Fr=N,Dt=B,Jt=K;var Ur=wt.gb;fr=wt.na,ir=wt.P,$r=wt.Sa,pn=22,e(Fr!=null),e(Jt!=null),er=Dt[0];var Un=Jt[0];for(e(fr!=null),e($r!=null),fr[0]=null,ir[0]=null,$r[0]=0;;){if(Dt[0]=er,Jt[0]=Un,8>Un){Dt=7;break e}var Ri=ie(Fr,er+4);if(4294967286<Ri){Dt=3;break e}var gn=8+Ri+1&-2;if(pn+=gn,0<Ur&&pn>Ur){Dt=3;break e}if(!r(Fr,er,"VP8 ")||!r(Fr,er,"VP8L")){Dt=0;break e}if(Un[0]<gn){Dt=7;break e}r(Fr,er,"ALPH")||(fr[0]=Fr,ir[0]=er+8,$r[0]=Ri),er+=gn,Un-=gn}}if(K=K[0],wt.na=wt.na[0],wt.P=wt.P[0],wt.Sa=wt.Sa[0],Dt!=0)break}K=[K],wt.Ja=[wt.Ja],wt.xa=[wt.xa];e:if(Ur=N,Dt=B,Jt=K,fr=wt.gb[0],ir=wt.Ja,$r=wt.xa,Fr=Dt[0],er=!r(Ur,Fr,"VP8 "),pn=!r(Ur,Fr,"VP8L"),e(Ur!=null),e(Jt!=null),e(ir!=null),e($r!=null),8>Jt[0])Dt=7;else{if(er||pn){if(Ur=ie(Ur,Fr+4),12<=fr&&Ur>fr-12){Dt=3;break e}if(it&&Ur>Jt[0]-8){Dt=7;break e}ir[0]=Ur,Dt[0]+=8,Jt[0]-=8,$r[0]=pn}else $r[0]=5<=Jt[0]&&Ur[Fr+0]==47&&!(Ur[Fr+4]>>5),ir[0]=Jt[0];Dt=0}if(K=K[0],wt.Ja=wt.Ja[0],wt.xa=wt.xa[0],B=B[0],Dt!=0)break;if(4294967286<wt.Ja)return 3;if(ze==null||Wt||(ze[0]=wt.xa?2:1),Ke=[Ke],Pt=[Pt],wt.xa){if(5>K){Dt=7;break}ze=Ke,it=Pt,Wt=Le,N==null||5>K?N=0:5<=K&&N[B+0]==47&&!(N[B+4]>>5)?(Jt=[0],Ur=[0],fr=[0],ee(ir=new Q,N,B,K),re(ir,Jt,Ur,fr)?(ze!=null&&(ze[0]=Jt[0]),it!=null&&(it[0]=Ur[0]),Wt!=null&&(Wt[0]=fr[0]),N=1):N=0):N=0}else{if(10>K){Dt=7;break}ze=Pt,N==null||10>K||!Us(N,B+3,K-3)?N=0:(it=N[B+0]|N[B+1]<<8|N[B+2]<<16,Wt=16383&(N[B+7]<<8|N[B+6]),N=16383&(N[B+9]<<8|N[B+8]),1&it||3<(it>>1&7)||!(it>>4&1)||it>>5>=wt.Ja||!Wt||!N?N=0:(Ke&&(Ke[0]=Wt),ze&&(ze[0]=N),N=1))}if(!N||(Ke=Ke[0],Pt=Pt[0],Rt&&(st[0]!=Ke||xt[0]!=Pt)))return 3;Je!=null&&(Je[0]=wt,Je.offset=B-Je.w,e(4294967286>B-Je.w),e(Je.offset==Je.ha-K));break}return Dt==0||Dt==7&&Rt&&Je==null?(Le!=null&&(Le[0]|=wt.na!=null&&0<wt.na.length),oe!=null&&(oe[0]=Ke),Se!=null&&(Se[0]=Pt),0):Dt}function N1(N,B,K){var oe=B.width,Se=B.height,Le=0,Ke=0,ze=oe,Je=Se;if(B.Da=N!=null&&0<N.Da,B.Da&&(ze=N.cd,Je=N.bd,Le=N.v,Ke=N.j,11>K||(Le&=-2,Ke&=-2),0>Le||0>Ke||0>=ze||0>=Je||Le+ze>oe||Ke+Je>Se))return 0;if(B.v=Le,B.j=Ke,B.va=Le+ze,B.o=Ke+Je,B.U=ze,B.T=Je,B.da=N!=null&&0<N.da,B.da){if(!se(ze,Je,K=[N.ib],Le=[N.hb]))return 0;B.ib=K[0],B.hb=Le[0]}return B.ob=N!=null&&N.ob,B.Kb=N==null||!N.Sd,B.da&&(B.ob=B.ib<3*oe/4&&B.hb<3*Se/4,B.Kb=0),1}function C1(N){if(N==null)return 2;if(11>N.S){var B=N.f.RGBA;B.fb+=(N.height-1)*B.A,B.A=-B.A}else B=N.f.kb,N=N.height,B.O+=(N-1)*B.fa,B.fa=-B.fa,B.N+=(N-1>>1)*B.Ab,B.Ab=-B.Ab,B.W+=(N-1>>1)*B.Db,B.Db=-B.Db,B.F!=null&&(B.J+=(N-1)*B.lb,B.lb=-B.lb);return 0}function jh(N,B,K,oe){if(oe==null||0>=N||0>=B)return 2;if(K!=null){if(K.Da){var Se=K.cd,Le=K.bd,Ke=-2&K.v,ze=-2&K.j;if(0>Ke||0>ze||0>=Se||0>=Le||Ke+Se>N||ze+Le>B)return 2;N=Se,B=Le}if(K.da){if(!se(N,B,Se=[K.ib],Le=[K.hb]))return 2;N=Se[0],B=Le[0]}}oe.width=N,oe.height=B;e:{var Je=oe.width,st=oe.height;if(N=oe.S,0>=Je||0>=st||!(N>=oN&&13>N))N=2;else{if(0>=oe.Rd&&oe.sd==null){Ke=Le=Se=B=0;var xt=(ze=Je*BM[N])*st;if(11>N||(Le=(st+1)/2*(B=(Je+1)/2),N==12&&(Ke=(Se=Je)*st)),(st=s(xt+2*Le+Ke))==null){N=1;break e}oe.sd=st,11>N?((Je=oe.f.RGBA).eb=st,Je.fb=0,Je.A=ze,Je.size=xt):((Je=oe.f.kb).y=st,Je.O=0,Je.fa=ze,Je.Fd=xt,Je.f=st,Je.N=0+xt,Je.Ab=B,Je.Cd=Le,Je.ea=st,Je.W=0+xt+Le,Je.Db=B,Je.Ed=Le,N==12&&(Je.F=st,Je.J=0+xt+2*Le),Je.Tc=Ke,Je.lb=Se)}if(B=1,Se=oe.S,Le=oe.width,Ke=oe.height,Se>=oN&&13>Se)if(11>Se)N=oe.f.RGBA,B&=(ze=Math.abs(N.A))*(Ke-1)+Le<=N.size,B&=ze>=Le*BM[Se],B&=N.eb!=null;else{N=oe.f.kb,ze=(Le+1)/2,xt=(Ke+1)/2,Je=Math.abs(N.fa),st=Math.abs(N.Ab);var Rt=Math.abs(N.Db),it=Math.abs(N.lb),wt=it*(Ke-1)+Le;B&=Je*(Ke-1)+Le<=N.Fd,B&=st*(xt-1)+ze<=N.Cd,B=(B&=Rt*(xt-1)+ze<=N.Ed)&Je>=Le&st>=ze&Rt>=ze,B&=N.y!=null,B&=N.f!=null,B&=N.ea!=null,Se==12&&(B&=it>=Le,B&=wt<=N.Tc,B&=N.F!=null)}else B=0;N=B?0:2}}return N!=0||K!=null&&K.fd&&(N=C1(oe)),N}var Sm=64,Fc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Oc=24,Ph=32,eA=8,Bh=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ot("Predictor0","PredictorAdd0"),E.Predictor0=function(){return 4278190080},E.Predictor1=function(N){return N},E.Predictor2=function(N,B,K){return B[K+0]},E.Predictor3=function(N,B,K){return B[K+1]},E.Predictor4=function(N,B,K){return B[K-1]},E.Predictor5=function(N,B,K){return ut(ut(N,B[K+1]),B[K+0])},E.Predictor6=function(N,B,K){return ut(N,B[K-1])},E.Predictor7=function(N,B,K){return ut(N,B[K+0])},E.Predictor8=function(N,B,K){return ut(B[K-1],B[K+0])},E.Predictor9=function(N,B,K){return ut(B[K+0],B[K+1])},E.Predictor10=function(N,B,K){return ut(ut(N,B[K-1]),ut(B[K+0],B[K+1]))},E.Predictor11=function(N,B,K){var oe=B[K+0];return 0>=we(oe>>24&255,N>>24&255,(B=B[K-1])>>24&255)+we(oe>>16&255,N>>16&255,B>>16&255)+we(oe>>8&255,N>>8&255,B>>8&255)+we(255&oe,255&N,255&B)?oe:N},E.Predictor12=function(N,B,K){var oe=B[K+0];return(_e((N>>24&255)+(oe>>24&255)-((B=B[K-1])>>24&255))<<24|_e((N>>16&255)+(oe>>16&255)-(B>>16&255))<<16|_e((N>>8&255)+(oe>>8&255)-(B>>8&255))<<8|_e((255&N)+(255&oe)-(255&B)))>>>0},E.Predictor13=function(N,B,K){var oe=B[K-1];return(rt((N=ut(N,B[K+0]))>>24&255,oe>>24&255)<<24|rt(N>>16&255,oe>>16&255)<<16|rt(N>>8&255,oe>>8&255)<<8|rt(255&N,255&oe))>>>0};var _1=E.PredictorAdd0;E.PredictorAdd1=Ce,ot("Predictor2","PredictorAdd2"),ot("Predictor3","PredictorAdd3"),ot("Predictor4","PredictorAdd4"),ot("Predictor5","PredictorAdd5"),ot("Predictor6","PredictorAdd6"),ot("Predictor7","PredictorAdd7"),ot("Predictor8","PredictorAdd8"),ot("Predictor9","PredictorAdd9"),ot("Predictor10","PredictorAdd10"),ot("Predictor11","PredictorAdd11"),ot("Predictor12","PredictorAdd12"),ot("Predictor13","PredictorAdd13");var Fg=E.PredictorAdd2;ce("ColorIndexInverseTransform","MapARGB","32b",function(N){return N>>8&255},function(N){return N}),ce("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(N){return N},function(N){return N>>8&255});var ri,aN=E.ColorIndexInverseTransform,lf=E.MapARGB,cf=E.VP8LColorIndexInverseTransformAlpha,E1=E.MapAlpha,S1=E.VP8LPredictorsAdd=[];S1.length=16,(E.VP8LPredictors=[]).length=16,(E.VP8LPredictorsAdd_C=[]).length=16,(E.VP8LPredictors_C=[]).length=16;var I1,j1,Th,kh,Fh,Im,Oh,jm,Nu,uf,ca,ka,ni,Di,tA,P1,Og,sN,iM,oM,lM,cM,uM,dM,B1,fM,AM,hM,mM=s(511),pM=s(2041),gM=s(225),xM=s(767),vM=0,a3=pM,iN=gM,Dc=xM,Cu=mM,oN=0,lN=1,yM=2,cN=3,uN=4,s3=5,bM=6,i3=7,o3=8,dN=9,l3=10,zce=[2,3,7],Wce=[3,3,11],wM=[280,256,256,256,40],Xce=[0,1,1,1,0],Yce=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Jce=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Zce=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],eue=8,c3=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],u3=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],T1=null,tue=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],rue=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],NM=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],nue=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],aue=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],sue=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],iue=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Dh=[],gd=[],rA=[],oue=1,CM=2,Rh=[],_u=[];bu("UpsampleRgbLinePair",jt,3),bu("UpsampleBgrLinePair",Qt,3),bu("UpsampleRgbaLinePair",Yn,4),bu("UpsampleBgraLinePair",In,4),bu("UpsampleArgbLinePair",_s,4),bu("UpsampleRgba4444LinePair",Ln,2),bu("UpsampleRgb565LinePair",mr,2);var lue=E.UpsampleRgbLinePair,cue=E.UpsampleBgrLinePair,_M=E.UpsampleRgbaLinePair,EM=E.UpsampleBgraLinePair,SM=E.UpsampleArgbLinePair,IM=E.UpsampleRgba4444LinePair,uue=E.UpsampleRgb565LinePair,fN=16,AN=1<<fN-1,k1=-227,d3=482,due=6,jM=0,fue=s(256),Aue=s(256),hue=s(256),mue=s(256),pue=s(d3-k1),gue=s(d3-k1);La("YuvToRgbRow",jt,3),La("YuvToBgrRow",Qt,3),La("YuvToRgbaRow",Yn,4),La("YuvToBgraRow",In,4),La("YuvToArgbRow",_s,4),La("YuvToRgba4444Row",Ln,2),La("YuvToRgb565Row",mr,2);var PM=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],hN=[0,2,8],xue=[8,7,6,4,4,2,2,2,1,1,1,1],vue=1;this.WebPDecodeRGBA=function(N,B,K,oe,Se){var Le=lN,Ke=new Yt,ze=new xe;Ke.ba=ze,ze.S=Le,ze.width=[ze.width],ze.height=[ze.height];var Je=ze.width,st=ze.height,xt=new Qe;if(xt==null||N==null)var Rt=2;else e(xt!=null),Rt=pd(N,B,K,xt.width,xt.height,xt.Pd,xt.Qd,xt.format,null);if(Rt!=0?Je=0:(Je!=null&&(Je[0]=xt.width[0]),st!=null&&(st[0]=xt.height[0]),Je=1),Je){ze.width=ze.width[0],ze.height=ze.height[0],oe!=null&&(oe[0]=ze.width),Se!=null&&(Se[0]=ze.height);e:{if(oe=new za,(Se=new rr).data=N,Se.w=B,Se.ha=K,Se.kd=1,B=[0],e(Se!=null),((N=pd(Se.data,Se.w,Se.ha,null,null,null,B,null,Se))==0||N==7)&&B[0]&&(N=4),(B=N)==0){if(e(Ke!=null),oe.data=Se.data,oe.w=Se.w+Se.offset,oe.ha=Se.ha-Se.offset,oe.put=te,oe.ac=G,oe.bc=He,oe.ma=Ke,Se.xa){if((N=Re())==null){Ke=1;break e}if(function(it,wt){var Pt=[0],Wt=[0],Dt=[0];t:for(;;){if(it==null)return 0;if(wt==null)return it.a=2,0;if(it.l=wt,it.a=0,ee(it.m,wt.data,wt.w,wt.ha),!re(it.m,Pt,Wt,Dt)){it.a=3;break t}if(it.xb=CM,wt.width=Pt[0],wt.height=Wt[0],!Ze(Pt[0],Wt[0],1,it,null))break t;return 1}return e(it.a!=0),0}(N,oe)){if(oe=(B=jh(oe.width,oe.height,Ke.Oa,Ke.ba))==0){t:{oe=N;r:for(;;){if(oe==null){oe=0;break t}if(e(oe.s.yc!=null),e(oe.s.Ya!=null),e(0<oe.s.Wb),e((K=oe.l)!=null),e((Se=K.ma)!=null),oe.xb!=0){if(oe.ca=Se.ba,oe.tb=Se.tb,e(oe.ca!=null),!N1(Se.Oa,K,cN)){oe.a=2;break r}if(!nt(oe,K.width)||K.da)break r;if((K.da||$e(oe.ca.S))&&ic(),11>oe.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),oe.ca.f.kb.F!=null&&ic()),oe.Pb&&0<oe.s.ua&&oe.s.vb.X==null&&!Z(oe.s.vb,oe.s.Wa.Xa)){oe.a=1;break r}oe.xb=0}if(!pe(oe,oe.V,oe.Ba,oe.c,oe.i,K.o,X))break r;Se.Dc=oe.Ma,oe=1;break t}e(oe.a!=0),oe=0}oe=!oe}oe&&(B=N.a)}else B=N.a}else{if((N=new ti)==null){Ke=1;break e}if(N.Fa=Se.na,N.P=Se.P,N.qc=Se.Sa,De(N,oe)){if((B=jh(oe.width,oe.height,Ke.Oa,Ke.ba))==0){if(N.Aa=0,K=Ke.Oa,e((Se=N)!=null),K!=null){if(0<(Je=0>(Je=K.Md)?0:100<Je?255:255*Je/100)){for(st=xt=0;4>st;++st)12>(Rt=Se.pb[st]).lc&&(Rt.ia=Je*xue[0>Rt.lc?0:Rt.lc]>>3),xt|=Rt.ia;xt&&(alert("todo:VP8InitRandom"),Se.ia=1)}Se.Ga=K.Id,100<Se.Ga?Se.Ga=100:0>Se.Ga&&(Se.Ga=0)}(function(it,wt){if(it==null)return 0;if(wt==null)return Mn(it,2,"NULL VP8Io parameter in VP8Decode().");if(!it.cb&&!De(it,wt))return 0;if(e(it.cb),wt.ac==null||wt.ac(wt)){wt.ob&&(it.L=0);var Pt=hN[it.L];if(it.L==2?(it.yb=0,it.zb=0):(it.yb=wt.v-Pt>>4,it.zb=wt.j-Pt>>4,0>it.yb&&(it.yb=0),0>it.zb&&(it.zb=0)),it.Va=wt.o+15+Pt>>4,it.Hb=wt.va+15+Pt>>4,it.Hb>it.za&&(it.Hb=it.za),it.Va>it.Ub&&(it.Va=it.Ub),0<it.L){var Wt=it.ed;for(Pt=0;4>Pt;++Pt){var Dt;if(it.Qa.Cb){var Jt=it.Qa.Lb[Pt];it.Qa.Fb||(Jt+=Wt.Tb)}else Jt=Wt.Tb;for(Dt=0;1>=Dt;++Dt){var er=it.gd[Pt][Dt],fr=Jt;if(Wt.Pc&&(fr+=Wt.vd[0],Dt&&(fr+=Wt.od[0])),0<(fr=0>fr?0:63<fr?63:fr)){var ir=fr;0<Wt.wb&&(ir=4<Wt.wb?ir>>2:ir>>1)>9-Wt.wb&&(ir=9-Wt.wb),1>ir&&(ir=1),er.dd=ir,er.tc=2*fr+ir,er.ld=40<=fr?2:15<=fr?1:0}else er.tc=0;er.La=Dt}}}Pt=0}else Mn(it,6,"Frame setup failed"),Pt=it.a;if(Pt=Pt==0){if(Pt){it.$c=0,0<it.Aa||(it.Ic=vue);t:{Pt=it.Ic,Wt=4*(ir=it.za);var $r=32*ir,Fr=ir+1,pn=0<it.L?ir*(0<it.Aa?2:1):0,Ur=(it.Aa==2?2:1)*ir;if((er=Wt+832+(Dt=3*(16*Pt+hN[it.L])/2*$r)+(Jt=it.Fa!=null&&0<it.Fa.length?it.Kc.c*it.Kc.i:0))!=er)Pt=0;else{if(er>it.Vb){if(it.Vb=0,it.Ec=s(er),it.Fc=0,it.Ec==null){Pt=Mn(it,1,"no memory during frame initialization.");break t}it.Vb=er}er=it.Ec,fr=it.Fc,it.Ac=er,it.Bc=fr,fr+=Wt,it.Gd=i($r,bn),it.Hd=0,it.rb=i(Fr+1,lr),it.sb=1,it.wa=pn?i(pn,ur):null,it.Y=0,it.D.Nb=0,it.D.wa=it.wa,it.D.Y=it.Y,0<it.Aa&&(it.D.Y+=ir),e(!0),it.oc=er,it.pc=fr,fr+=832,it.ya=i(Ur,Nr),it.aa=0,it.D.ya=it.ya,it.D.aa=it.aa,it.Aa==2&&(it.D.aa+=ir),it.R=16*ir,it.B=8*ir,ir=($r=hN[it.L])*it.R,$r=$r/2*it.B,it.sa=er,it.ta=fr+ir,it.qa=it.sa,it.ra=it.ta+16*Pt*it.R+$r,it.Ha=it.qa,it.Ia=it.ra+8*Pt*it.B+$r,it.$c=0,fr+=Dt,it.mb=Jt?er:null,it.nb=Jt?fr:null,e(fr+Jt<=it.Fc+it.Vb),Gt(it),a(it.Ac,it.Bc,0,Wt),Pt=1}}if(Pt){if(wt.ka=0,wt.y=it.sa,wt.O=it.ta,wt.f=it.qa,wt.N=it.ra,wt.ea=it.Ha,wt.Vd=it.Ia,wt.fa=it.R,wt.Rc=it.B,wt.F=null,wt.J=0,!vM){for(Pt=-255;255>=Pt;++Pt)mM[255+Pt]=0>Pt?-Pt:Pt;for(Pt=-1020;1020>=Pt;++Pt)pM[1020+Pt]=-128>Pt?-128:127<Pt?127:Pt;for(Pt=-112;112>=Pt;++Pt)gM[112+Pt]=-16>Pt?-16:15<Pt?15:Pt;for(Pt=-255;510>=Pt;++Pt)xM[255+Pt]=0>Pt?0:255<Pt?255:Pt;vM=1}Oh=Xn,jm=nr,uf=Zt,ca=fa,ka=os,Nu=Vt,ni=Ih,Di=yu,tA=Ee,P1=at,Og=Em,sN=M,iM=ht,oM=Et,lM=of,cM=Dl,uM=_m,dM=kg,gd[0]=b1,gd[1]=il,gd[2]=v1,gd[3]=y1,gd[4]=co,gd[5]=w1,gd[6]=hd,gd[7]=_h,gd[8]=Eh,gd[9]=md,Dh[0]=pu,Dh[1]=fd,Dh[2]=Ad,Dh[3]=mu,Dh[4]=af,Dh[5]=Ch,Dh[6]=Bg,rA[0]=Nm,rA[1]=dd,rA[2]=Tc,rA[3]=Jf,rA[4]=Cm,rA[5]=Ia,rA[6]=Tg,Pt=1}else Pt=0}Pt&&(Pt=function(Un,Ri){for(Un.M=0;Un.M<Un.Va;++Un.M){var gn,Qr=Un.Jc[Un.M&Un.Xb],wr=Un.m,ai=Un;for(gn=0;gn<ai.za;++gn){var fn=wr,Vn=ai,Wa=Vn.Ac,Oo=Vn.Bc+4*gn,Ml=Vn.zc,Hs=Vn.ya[Vn.aa+gn];if(Vn.Qa.Bb?Hs.$b=ne(fn,Vn.Pa.jb[0])?2+ne(fn,Vn.Pa.jb[2]):ne(fn,Vn.Pa.jb[1]):Hs.$b=0,Vn.kc&&(Hs.Ad=ne(fn,Vn.Bd)),Hs.Za=!ne(fn,145)+0,Hs.Za){var ll=Hs.Ob,Ll=0;for(Vn=0;4>Vn;++Vn){var Mi,Gn=Ml[0+Vn];for(Mi=0;4>Mi;++Mi){Gn=aue[Wa[Oo+Mi]][Gn];for(var ha=NM[ne(fn,Gn[0])];0<ha;)ha=NM[2*ha+ne(fn,Gn[ha])];Gn=-ha,Wa[Oo+Mi]=Gn}n(ll,Ll,Wa,Oo,4),Ll+=4,Ml[0+Vn]=Gn}}else Gn=ne(fn,156)?ne(fn,128)?1:3:ne(fn,163)?2:0,Hs.Ob[0]=Gn,a(Wa,Oo,Gn,4),a(Ml,0,Gn,4);Hs.Dd=ne(fn,142)?ne(fn,114)?ne(fn,183)?1:3:2:0}if(ai.m.Ka)return Mn(Un,7,"Premature end-of-partition0 encountered.");for(;Un.ja<Un.za;++Un.ja){if(ai=Qr,fn=(wr=Un).rb[wr.sb-1],Wa=wr.rb[wr.sb+wr.ja],gn=wr.ya[wr.aa+wr.ja],Oo=wr.kc?gn.Ad:0)fn.la=Wa.la=0,gn.Za||(fn.Na=Wa.Na=0),gn.Hc=0,gn.Gc=0,gn.ia=0;else{var $s,ma;if(fn=Wa,Wa=ai,Oo=wr.Pa.Xc,Ml=wr.ya[wr.aa+wr.ja],Hs=wr.pb[Ml.$b],Vn=Ml.ad,ll=0,Ll=wr.rb[wr.sb-1],Gn=Mi=0,a(Vn,ll,0,384),Ml.Za)var Do=0,xd=Oo[3];else{ha=s(16);var si=fn.Na+Ll.Na;if(si=T1(Wa,Oo[1],si,Hs.Eb,0,ha,0),fn.Na=Ll.Na=(0<si)+0,1<si)Oh(ha,0,Vn,ll);else{var oc=ha[0]+3>>3;for(ha=0;256>ha;ha+=16)Vn[ll+ha]=oc}Do=1,xd=Oo[0]}var Fa=15&fn.la,Li=15&Ll.la;for(ha=0;4>ha;++ha){var Rc=1&Li;for(oc=ma=0;4>oc;++oc)Fa=Fa>>1|(Rc=(si=T1(Wa,xd,si=Rc+(1&Fa),Hs.Sc,Do,Vn,ll))>Do)<<7,ma=ma<<2|(3<si?3:1<si?2:Vn[ll+0]!=0),ll+=16;Fa>>=4,Li=Li>>1|Rc<<7,Mi=(Mi<<8|ma)>>>0}for(xd=Fa,Do=Li>>4,$s=0;4>$s;$s+=2){for(ma=0,Fa=fn.la>>4+$s,Li=Ll.la>>4+$s,ha=0;2>ha;++ha){for(Rc=1&Li,oc=0;2>oc;++oc)si=Rc+(1&Fa),Fa=Fa>>1|(Rc=0<(si=T1(Wa,Oo[2],si,Hs.Qc,0,Vn,ll)))<<3,ma=ma<<2|(3<si?3:1<si?2:Vn[ll+0]!=0),ll+=16;Fa>>=2,Li=Li>>1|Rc<<5}Gn|=ma<<4*$s,xd|=Fa<<4<<$s,Do|=(240&Li)<<$s}fn.la=xd,Ll.la=Do,Ml.Hc=Mi,Ml.Gc=Gn,Ml.ia=43690&Gn?0:Hs.ia,Oo=!(Mi|Gn)}if(0<wr.L&&(wr.wa[wr.Y+wr.ja]=wr.gd[gn.$b][gn.Za],wr.wa[wr.Y+wr.ja].La|=!Oo),ai.Ka)return Mn(Un,7,"Premature end-of-file encountered.")}if(Gt(Un),wr=Ri,ai=1,gn=(Qr=Un).D,fn=0<Qr.L&&Qr.M>=Qr.zb&&Qr.M<=Qr.Va,Qr.Aa==0)t:{if(gn.M=Qr.M,gn.uc=fn,Fo(Qr,gn),ai=1,gn=(ma=Qr.D).Nb,fn=(Gn=hN[Qr.L])*Qr.R,Wa=Gn/2*Qr.B,ha=16*gn*Qr.R,oc=8*gn*Qr.B,Oo=Qr.sa,Ml=Qr.ta-fn+ha,Hs=Qr.qa,Vn=Qr.ra-Wa+oc,ll=Qr.Ha,Ll=Qr.Ia-Wa+oc,Li=(Fa=ma.M)==0,Mi=Fa>=Qr.Va-1,Qr.Aa==2&&Fo(Qr,ma),ma.uc)for(Rc=(si=Qr).D.M,e(si.D.uc),ma=si.yb;ma<si.Hb;++ma){Do=ma,xd=Rc;var Ul=(Mc=(Ro=si).D).Nb;$s=Ro.R;var Mc=Mc.wa[Mc.Y+Do],Lc=Ro.sa,lc=Ro.ta+16*Ul*$s+16*Do,Uc=Mc.dd,Ua=Mc.tc;if(Ua!=0)if(e(3<=Ua),Ro.L==1)0<Do&&cM(Lc,lc,$s,Ua+4),Mc.La&&dM(Lc,lc,$s,Ua),0<xd&&lM(Lc,lc,$s,Ua+4),Mc.La&&uM(Lc,lc,$s,Ua);else{var Qc=Ro.B,vd=Ro.qa,Pm=Ro.ra+8*Ul*Qc+8*Do,nA=Ro.Ha,Ro=Ro.Ia+8*Ul*Qc+8*Do;Ul=Mc.ld,0<Do&&(Di(Lc,lc,$s,Ua+4,Uc,Ul),P1(vd,Pm,nA,Ro,Qc,Ua+4,Uc,Ul)),Mc.La&&(sN(Lc,lc,$s,Ua,Uc,Ul),oM(vd,Pm,nA,Ro,Qc,Ua,Uc,Ul)),0<xd&&(ni(Lc,lc,$s,Ua+4,Uc,Ul),tA(vd,Pm,nA,Ro,Qc,Ua+4,Uc,Ul)),Mc.La&&(Og(Lc,lc,$s,Ua,Uc,Ul),iM(vd,Pm,nA,Ro,Qc,Ua,Uc,Ul))}}if(Qr.ia&&alert("todo:DitherRow"),wr.put!=null){if(ma=16*Fa,Fa=16*(Fa+1),Li?(wr.y=Qr.sa,wr.O=Qr.ta+ha,wr.f=Qr.qa,wr.N=Qr.ra+oc,wr.ea=Qr.Ha,wr.W=Qr.Ia+oc):(ma-=Gn,wr.y=Oo,wr.O=Ml,wr.f=Hs,wr.N=Vn,wr.ea=ll,wr.W=Ll),Mi||(Fa-=Gn),Fa>wr.o&&(Fa=wr.o),wr.F=null,wr.J=null,Qr.Fa!=null&&0<Qr.Fa.length&&ma<Fa&&(wr.J=Aa(Qr,wr,ma,Fa-ma),wr.F=Qr.mb,wr.F==null&&wr.F.length==0)){ai=Mn(Qr,3,"Could not decode alpha data.");break t}ma<wr.j&&(Gn=wr.j-ma,ma=wr.j,e(!(1&Gn)),wr.O+=Qr.R*Gn,wr.N+=Qr.B*(Gn>>1),wr.W+=Qr.B*(Gn>>1),wr.F!=null&&(wr.J+=wr.width*Gn)),ma<Fa&&(wr.O+=wr.v,wr.N+=wr.v>>1,wr.W+=wr.v>>1,wr.F!=null&&(wr.J+=wr.v),wr.ka=ma-wr.j,wr.U=wr.va-wr.v,wr.T=Fa-ma,ai=wr.put(wr))}gn+1!=Qr.Ic||Mi||(n(Qr.sa,Qr.ta-fn,Oo,Ml+16*Qr.R,fn),n(Qr.qa,Qr.ra-Wa,Hs,Vn+8*Qr.B,Wa),n(Qr.Ha,Qr.Ia-Wa,ll,Ll+8*Qr.B,Wa))}if(!ai)return Mn(Un,6,"Output aborted.")}return 1}(it,wt)),wt.bc!=null&&wt.bc(wt),Pt&=1}return Pt?(it.cb=0,Pt):0})(N,oe)||(B=N.a)}}else B=N.a}B==0&&Ke.Oa!=null&&Ke.Oa.fd&&(B=C1(Ke.ba))}Ke=B}Le=Ke!=0?null:11>Le?ze.f.RGBA.eb:ze.f.kb.y}else Le=null;return Le};var BM=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(E,k){for(var P="",T=0;T<4;T++)P+=String.fromCharCode(E[k++]);return P}function d(E,k){return E[k+0]|E[k+1]<<8}function f(E,k){return(E[k+0]|E[k+1]<<8|E[k+2]<<16)>>>0}function h(E,k){return(E[k+0]|E[k+1]<<8|E[k+2]<<16|E[k+3]<<24)>>>0}new c;var A=[0],m=[0],p=[],g=new c,x=t,y=function(E,k){var P={},T=0,O=!1,W=0,Ae=0;if(P.frames=[],!function(F,Q){for(var H=0;H<4;H++)if(F[Q+H]!="RIFF".charCodeAt(H))return!0;return!1}(E,k)){for(h(E,k+=4),k+=8;k<E.length;){var de=u(E,k),fe=h(E,k+=4);k+=4;var ge=fe+(1&fe);switch(de){case"VP8 ":case"VP8L":P.frames[T]===void 0&&(P.frames[T]={}),(Pe=P.frames[T]).src_off=O?Ae:k-8,Pe.src_size=W+fe+8,T++,O&&(O=!1,W=0,Ae=0);break;case"VP8X":(Pe=P.header={}).feature_flags=E[k];var ee=k+4;Pe.canvas_width=1+f(E,ee),ee+=3,Pe.canvas_height=1+f(E,ee),ee+=3;break;case"ALPH":O=!0,W=ge+8,Ae=k-8;break;case"ANIM":(Pe=P.header).bgcolor=h(E,k),ee=k+4,Pe.loop_count=d(E,ee),ee+=2;break;case"ANMF":var Fe,Pe;(Pe=P.frames[T]={}).offset_x=2*f(E,k),k+=3,Pe.offset_y=2*f(E,k),k+=3,Pe.width=1+f(E,k),k+=3,Pe.height=1+f(E,k),k+=3,Pe.duration=f(E,k),k+=3,Fe=E[k++],Pe.dispose=1&Fe,Pe.blend=Fe>>1&1}de!="ANMF"&&(k+=ge)}return P}}(x,0);y.response=x,y.rgbaoutput=!0,y.dataurl=!1;var b=y.header?y.header:null,w=y.frames?y.frames:null;if(b){b.loop_counter=b.loop_count,A=[b.canvas_height],m=[b.canvas_width];for(var j=0;j<w.length&&w[j].blend!=0;j++);}var I=w[0],_=g.WebPDecodeRGBA(x,I.src_off,I.src_size,m,A);I.rgba=_,I.imgwidth=m[0],I.imgheight=A[0];for(var S=0;S<m[0]*A[0]*4;S++)p[S]=_[S];return this.width=m,this.height=A,this.data=p,this}(function(t){var e,r,n,a,s,i,l,c,u,d=function(F){return F=F||{},this.isStrokeTransparent=F.isStrokeTransparent||!1,this.strokeOpacity=F.strokeOpacity||1,this.strokeStyle=F.strokeStyle||"#000000",this.fillStyle=F.fillStyle||"#000000",this.isFillTransparent=F.isFillTransparent||!1,this.fillOpacity=F.fillOpacity||1,this.font=F.font||"10px sans-serif",this.textBaseline=F.textBaseline||"alphabetic",this.textAlign=F.textAlign||"left",this.lineWidth=F.lineWidth||1,this.lineJoin=F.lineJoin||"miter",this.lineCap=F.lineCap||"butt",this.path=F.path||[],this.transform=F.transform!==void 0?F.transform.clone():new c,this.globalCompositeOperation=F.globalCompositeOperation||"normal",this.globalAlpha=F.globalAlpha||1,this.clip_path=F.clip_path||[],this.currentPoint=F.currentPoint||new i,this.miterLimit=F.miterLimit||10,this.lastPoint=F.lastPoint||new i,this.lineDashOffset=F.lineDashOffset||0,this.lineDash=F.lineDash||[],this.margin=F.margin||[0,0,0,0],this.prevPageLastElemOffset=F.prevPageLastElemOffset||0,this.ignoreClearRect=typeof F.ignoreClearRect!="boolean"||F.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,i=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(F){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Q=F;Object.defineProperty(this,"pdf",{get:function(){return Q}});var H=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return H},set:function(Z){H=!!Z}});var R=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return R},set:function(Z){R=!!Z}});var z=0;Object.defineProperty(this,"posX",{get:function(){return z},set:function(Z){isNaN(Z)||(z=Z)}});var J=0;Object.defineProperty(this,"posY",{get:function(){return J},set:function(Z){isNaN(Z)||(J=Z)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Z){var Oe;typeof Z=="number"?Oe=[Z,Z,Z,Z]:((Oe=new Array(4))[0]=Z[0],Oe[1]=Z.length>=2?Z[1]:Oe[0],Oe[2]=Z.length>=3?Z[2]:Oe[0],Oe[3]=Z.length>=4?Z[3]:Oe[1]),u.margin=Oe}});var D=!1;Object.defineProperty(this,"autoPaging",{get:function(){return D},set:function(Z){D=Z}});var U=0;Object.defineProperty(this,"lastBreak",{get:function(){return U},set:function(Z){U=Z}});var ne=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ne},set:function(Z){ne=Z}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Z){Z instanceof d&&(u=Z)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Z){u.path=Z}});var ve=[];Object.defineProperty(this,"ctxStack",{get:function(){return ve},set:function(Z){ve=Z}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Z){var Oe;Oe=h(Z),this.ctx.fillStyle=Oe.style,this.ctx.isFillTransparent=Oe.a===0,this.ctx.fillOpacity=Oe.a,this.pdf.setFillColor(Oe.r,Oe.g,Oe.b,{a:Oe.a}),this.pdf.setTextColor(Oe.r,Oe.g,Oe.b,{a:Oe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Z){var Oe=h(Z);this.ctx.strokeStyle=Oe.style,this.ctx.isStrokeTransparent=Oe.a===0,this.ctx.strokeOpacity=Oe.a,Oe.a===0?this.pdf.setDrawColor(255,255,255):(Oe.a,this.pdf.setDrawColor(Oe.r,Oe.g,Oe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Z){["butt","round","square"].indexOf(Z)!==-1&&(this.ctx.lineCap=Z,this.pdf.setLineCap(Z))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Z){isNaN(Z)||(this.ctx.lineWidth=Z,this.pdf.setLineWidth(Z))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Z){["bevel","round","miter"].indexOf(Z)!==-1&&(this.ctx.lineJoin=Z,this.pdf.setLineJoin(Z))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Z){isNaN(Z)||(this.ctx.miterLimit=Z,this.pdf.setMiterLimit(Z))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Z){this.ctx.textBaseline=Z}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Z){["right","end","center","left","start"].indexOf(Z)!==-1&&(this.ctx.textAlign=Z)}});var L=null,Ye=null,ie=null;Object.defineProperty(this,"fontFaces",{get:function(){return ie},set:function(Z){L=null,Ye=null,ie=Z}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Z){var Oe;if(this.ctx.font=Z,(Oe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(Z))!==null){var le=Oe[1];Oe[2];var se=Oe[3],Be=Oe[4];Oe[5];var je=Oe[6],ot=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Be)[2];Be=Math.floor(ot==="px"?parseFloat(Be)*this.pdf.internal.scaleFactor:ot==="em"?parseFloat(Be)*this.pdf.getFontSize():parseFloat(Be)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Be);var mt=function(ce){var Te,Xe,ft=[],gt=ce.trim();if(gt==="")return G5;if(gt in GQ)return[GQ[gt]];for(;gt!=="";){switch(Xe=null,Te=(gt=qQ(gt)).charAt(0)){case'"':case"'":Xe=RIe(gt.substring(1),Te);break;default:Xe=MIe(gt)}if(Xe===null||(ft.push(Xe[0]),(gt=qQ(Xe[1]))!==""&&gt.charAt(0)!==","))return G5;gt=gt.replace(/^,/,"")}return ft}(je);if(this.fontFaces){var ut=function(ce,Te){var Xe=ce.getFontList(),ft=JSON.stringify(Xe);if(L===null||Ye!==ft){var gt=function(vt){var At=[];return Object.keys(vt).forEach(function(ye){vt[ye].forEach(function($e){var Ne=null;switch($e){case"bold":Ne={family:ye,weight:"bold"};break;case"italic":Ne={family:ye,style:"italic"};break;case"bolditalic":Ne={family:ye,weight:"bold",style:"italic"};break;case"":case"normal":Ne={family:ye}}Ne!==null&&(Ne.ref={name:ye,style:$e},At.push(Ne))})}),At}(Xe);L=function(vt){for(var At={},ye=0;ye<vt.length;++ye){var $e=$5(vt[ye]),Ne=$e.family,ct=$e.stretch,xe=$e.style,Qe=$e.weight;At[Ne]=At[Ne]||{},At[Ne][ct]=At[Ne][ct]||{},At[Ne][ct][xe]=At[Ne][ct][xe]||{},At[Ne][ct][xe][Qe]=$e}return At}(gt.concat(Te)),Ye=ft}return L}(this.pdf,this.fontFaces),_e=mt.map(function(ce){return{family:ce,stretch:"normal",weight:se,style:le}}),rt=function(ce,Te,Xe){for(var ft=(Xe=Xe||{}).defaultFontFamily||"times",gt=Object.assign({},DIe,Xe.genericFontFamilies||{}),vt=null,At=null,ye=0;ye<Te.length;++ye)if(gt[(vt=$5(Te[ye])).family]&&(vt.family=gt[vt.family]),ce.hasOwnProperty(vt.family)){At=ce[vt.family];break}if(!(At=At||ce[ft]))throw new Error("Could not find a font-family for the rule '"+KQ(vt)+"' and default family '"+ft+"'.");if(At=function($e,Ne){if(Ne[$e])return Ne[$e];var ct=dk[$e],xe=ct<=dk.normal?-1:1,Qe=$Q(Ne,Rte,ct,xe);if(!Qe)throw new Error("Could not find a matching font-stretch value for "+$e);return Qe}(vt.stretch,At),At=function($e,Ne){if(Ne[$e])return Ne[$e];for(var ct=Dte[$e],xe=0;xe<ct.length;++xe)if(Ne[ct[xe]])return Ne[ct[xe]];throw new Error("Could not find a matching font-style for "+$e)}(vt.style,At),!(At=function($e,Ne){if(Ne[$e])return Ne[$e];if($e===400&&Ne[500])return Ne[500];if($e===500&&Ne[400])return Ne[400];var ct=OIe[$e],xe=$Q(Ne,Mte,ct,$e<400?-1:1);if(!xe)throw new Error("Could not find a matching font-weight for value "+$e);return xe}(vt.weight,At)))throw new Error("Failed to resolve a font for the rule '"+KQ(vt)+"'.");return At}(ut,_e);this.pdf.setFont(rt.ref.name,rt.ref.style)}else{var we="";(se==="bold"||parseInt(se,10)>=700||le==="bold")&&(we="bold"),le==="italic"&&(we+="italic"),we.length===0&&(we="normal");for(var Ce="",Ue={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ve=0;Ve<mt.length;Ve++){if(this.pdf.internal.getFont(mt[Ve],we,{noFallback:!0,disableWarning:!0})!==void 0){Ce=mt[Ve];break}if(we==="bolditalic"&&this.pdf.internal.getFont(mt[Ve],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ce=mt[Ve],we="bold";else if(this.pdf.internal.getFont(mt[Ve],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ce=mt[Ve],we="normal";break}}if(Ce===""){for(var ue=0;ue<mt.length;ue++)if(Ue[mt[ue]]){Ce=Ue[mt[ue]];break}}Ce=Ce===""?"Times":Ce,this.pdf.setFont(Ce,we)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Z){this.ctx.globalCompositeOperation=Z}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Z){this.ctx.globalAlpha=Z}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Z){this.ctx.lineDashOffset=Z,Pe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Z){this.ctx.lineDash=Z,Pe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Z){this.ctx.ignoreClearRect=!!Z}})};f.prototype.setLineDash=function(F){this.lineDash=F},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){w.call(this,"fill",!1)},f.prototype.stroke=function(){w.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(F,Q){if(isNaN(F)||isNaN(Q))throw Da.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var H=this.ctx.transform.applyToPoint(new i(F,Q));this.path.push({type:"mt",x:H.x,y:H.y}),this.ctx.lastPoint=new i(F,Q)},f.prototype.closePath=function(){var F=new i(0,0),Q=0;for(Q=this.path.length-1;Q!==-1;Q--)if(this.path[Q].type==="begin"&&Na(this.path[Q+1])==="object"&&typeof this.path[Q+1].x=="number"){F=new i(this.path[Q+1].x,this.path[Q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(F.x,F.y)},f.prototype.lineTo=function(F,Q){if(isNaN(F)||isNaN(Q))throw Da.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var H=this.ctx.transform.applyToPoint(new i(F,Q));this.path.push({type:"lt",x:H.x,y:H.y}),this.ctx.lastPoint=new i(H.x,H.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),w.call(this,null,!0)},f.prototype.quadraticCurveTo=function(F,Q,H,R){if(isNaN(H)||isNaN(R)||isNaN(F)||isNaN(Q))throw Da.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var z=this.ctx.transform.applyToPoint(new i(H,R)),J=this.ctx.transform.applyToPoint(new i(F,Q));this.path.push({type:"qct",x1:J.x,y1:J.y,x:z.x,y:z.y}),this.ctx.lastPoint=new i(z.x,z.y)},f.prototype.bezierCurveTo=function(F,Q,H,R,z,J){if(isNaN(z)||isNaN(J)||isNaN(F)||isNaN(Q)||isNaN(H)||isNaN(R))throw Da.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var D=this.ctx.transform.applyToPoint(new i(z,J)),U=this.ctx.transform.applyToPoint(new i(F,Q)),ne=this.ctx.transform.applyToPoint(new i(H,R));this.path.push({type:"bct",x1:U.x,y1:U.y,x2:ne.x,y2:ne.y,x:D.x,y:D.y}),this.ctx.lastPoint=new i(D.x,D.y)},f.prototype.arc=function(F,Q,H,R,z,J){if(isNaN(F)||isNaN(Q)||isNaN(H)||isNaN(R)||isNaN(z))throw Da.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(J=!!J,!this.ctx.transform.isIdentity){var D=this.ctx.transform.applyToPoint(new i(F,Q));F=D.x,Q=D.y;var U=this.ctx.transform.applyToPoint(new i(0,H)),ne=this.ctx.transform.applyToPoint(new i(0,0));H=Math.sqrt(Math.pow(U.x-ne.x,2)+Math.pow(U.y-ne.y,2))}Math.abs(z-R)>=2*Math.PI&&(R=0,z=2*Math.PI),this.path.push({type:"arc",x:F,y:Q,radius:H,startAngle:R,endAngle:z,counterclockwise:J})},f.prototype.arcTo=function(F,Q,H,R,z){throw new Error("arcTo not implemented.")},f.prototype.rect=function(F,Q,H,R){if(isNaN(F)||isNaN(Q)||isNaN(H)||isNaN(R))throw Da.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(F,Q),this.lineTo(F+H,Q),this.lineTo(F+H,Q+R),this.lineTo(F,Q+R),this.lineTo(F,Q),this.lineTo(F+H,Q),this.lineTo(F,Q)},f.prototype.fillRect=function(F,Q,H,R){if(isNaN(F)||isNaN(Q)||isNaN(H)||isNaN(R))throw Da.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!A.call(this)){var z={};this.lineCap!=="butt"&&(z.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(z.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(F,Q,H,R),this.fill(),z.hasOwnProperty("lineCap")&&(this.lineCap=z.lineCap),z.hasOwnProperty("lineJoin")&&(this.lineJoin=z.lineJoin)}},f.prototype.strokeRect=function(F,Q,H,R){if(isNaN(F)||isNaN(Q)||isNaN(H)||isNaN(R))throw Da.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(F,Q,H,R),this.stroke())},f.prototype.clearRect=function(F,Q,H,R){if(isNaN(F)||isNaN(Q)||isNaN(H)||isNaN(R))throw Da.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(F,Q,H,R))},f.prototype.save=function(F){F=typeof F!="boolean"||F;for(var Q=this.pdf.internal.getCurrentPageInfo().pageNumber,H=0;H<this.pdf.internal.getNumberOfPages();H++)this.pdf.setPage(H+1),this.pdf.internal.out("q");if(this.pdf.setPage(Q),F){this.ctx.fontSize=this.pdf.internal.getFontSize();var R=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=R}},f.prototype.restore=function(F){F=typeof F!="boolean"||F;for(var Q=this.pdf.internal.getCurrentPageInfo().pageNumber,H=0;H<this.pdf.internal.getNumberOfPages();H++)this.pdf.setPage(H+1),this.pdf.internal.out("Q");this.pdf.setPage(Q),F&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(F){var Q,H,R,z;if(F.isCanvasGradient===!0&&(F=F.getColor()),!F)return{r:0,g:0,b:0,a:0,style:F};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(F))Q=0,H=0,R=0,z=0;else{var J=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(F);if(J!==null)Q=parseInt(J[1]),H=parseInt(J[2]),R=parseInt(J[3]),z=1;else if((J=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(F))!==null)Q=parseInt(J[1]),H=parseInt(J[2]),R=parseInt(J[3]),z=parseFloat(J[4]);else{if(z=1,typeof F=="string"&&F.charAt(0)!=="#"){var D=new jte(F);F=D.ok?D.toHex():"#000000"}F.length===4?(Q=F.substring(1,2),Q+=Q,H=F.substring(2,3),H+=H,R=F.substring(3,4),R+=R):(Q=F.substring(1,3),H=F.substring(3,5),R=F.substring(5,7)),Q=parseInt(Q,16),H=parseInt(H,16),R=parseInt(R,16)}}return{r:Q,g:H,b:R,a:z,style:F}},A=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(F,Q,H,R){if(isNaN(Q)||isNaN(H)||typeof F!="string")throw Da.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(R=isNaN(R)?void 0:R,!A.call(this)){var z=ge(this.ctx.transform.rotation),J=this.ctx.transform.scaleX;T.call(this,{text:F,x:Q,y:H,scale:J,angle:z,align:this.textAlign,maxWidth:R})}},f.prototype.strokeText=function(F,Q,H,R){if(isNaN(Q)||isNaN(H)||typeof F!="string")throw Da.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){R=isNaN(R)?void 0:R;var z=ge(this.ctx.transform.rotation),J=this.ctx.transform.scaleX;T.call(this,{text:F,x:Q,y:H,scale:J,renderingMode:"stroke",angle:z,align:this.textAlign,maxWidth:R})}},f.prototype.measureText=function(F){if(typeof F!="string")throw Da.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Q=this.pdf,H=this.pdf.internal.scaleFactor,R=Q.internal.getFontSize(),z=Q.getStringUnitWidth(F)*R/Q.internal.scaleFactor;return new function(J){var D=(J=J||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return D}}),this}({width:z*=Math.round(96*H/72*1e4)/1e4})},f.prototype.scale=function(F,Q){if(isNaN(F)||isNaN(Q))throw Da.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var H=new c(F,0,0,Q,0,0);this.ctx.transform=this.ctx.transform.multiply(H)},f.prototype.rotate=function(F){if(isNaN(F))throw Da.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Q=new c(Math.cos(F),Math.sin(F),-Math.sin(F),Math.cos(F),0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},f.prototype.translate=function(F,Q){if(isNaN(F)||isNaN(Q))throw Da.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var H=new c(1,0,0,1,F,Q);this.ctx.transform=this.ctx.transform.multiply(H)},f.prototype.transform=function(F,Q,H,R,z,J){if(isNaN(F)||isNaN(Q)||isNaN(H)||isNaN(R)||isNaN(z)||isNaN(J))throw Da.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var D=new c(F,Q,H,R,z,J);this.ctx.transform=this.ctx.transform.multiply(D)},f.prototype.setTransform=function(F,Q,H,R,z,J){F=isNaN(F)?1:F,Q=isNaN(Q)?0:Q,H=isNaN(H)?0:H,R=isNaN(R)?1:R,z=isNaN(z)?0:z,J=isNaN(J)?0:J,this.ctx.transform=new c(F,Q,H,R,z,J)};var p=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(F,Q,H,R,z,J,D,U,ne){var ve=this.pdf.getImageProperties(F),L=1,Ye=1,ie=1,Z=1;R!==void 0&&U!==void 0&&(ie=U/R,Z=ne/z,L=ve.width/R*U/R,Ye=ve.height/z*ne/z),J===void 0&&(J=Q,D=H,Q=0,H=0),R!==void 0&&U===void 0&&(U=R,ne=z),R===void 0&&U===void 0&&(U=ve.width,ne=ve.height);var Oe=this.ctx.transform.decompose(),le=ge(Oe.rotate.shx),se=new c,Be=(se=(se=(se=se.multiply(Oe.translate)).multiply(Oe.skew)).multiply(Oe.scale)).applyToRectangle(new l(J-Q*ie,D-H*Z,R*L,z*Ye));if(this.autoPaging){for(var je,ot=g.call(this,Be),mt=[],ut=0;ut<ot.length;ut+=1)mt.indexOf(ot[ut])===-1&&mt.push(ot[ut]);b(mt);for(var _e=mt[0],rt=mt[mt.length-1],we=_e;we<rt+1;we++){this.pdf.setPage(we);var Ce=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ue=we===1?this.posY+this.margin[0]:this.margin[0],Ve=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ue=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ce=we===1?0:Ve+(we-2)*ue;if(this.ctx.clip_path.length!==0){var Te=this.path;je=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(je,this.posX+this.margin[3],-ce+Ue+this.ctx.prevPageLastElemOffset),j.call(this,"fill",!0),this.path=Te}var Xe=JSON.parse(JSON.stringify(Be));Xe=y([Xe],this.posX+this.margin[3],-ce+Ue+this.ctx.prevPageLastElemOffset)[0];var ft=(we>_e||we<rt)&&p.call(this);ft&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ce,ue,null).clip().discardPath()),this.pdf.addImage(F,"JPEG",Xe.x,Xe.y,Xe.w,Xe.h,null,null,le),ft&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(F,"JPEG",Be.x,Be.y,Be.w,Be.h,null,null,le)};var g=function(F,Q,H){var R=[];Q=Q||this.pdf.internal.pageSize.width,H=H||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var z=this.posY+this.ctx.prevPageLastElemOffset;switch(F.type){default:case"mt":case"lt":R.push(Math.floor((F.y+z)/H)+1);break;case"arc":R.push(Math.floor((F.y+z-F.radius)/H)+1),R.push(Math.floor((F.y+z+F.radius)/H)+1);break;case"qct":var J=ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x,F.y);R.push(Math.floor((J.y+z)/H)+1),R.push(Math.floor((J.y+J.h+z)/H)+1);break;case"bct":var D=Fe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x2,F.y2,F.x,F.y);R.push(Math.floor((D.y+z)/H)+1),R.push(Math.floor((D.y+D.h+z)/H)+1);break;case"rect":R.push(Math.floor((F.y+z)/H)+1),R.push(Math.floor((F.y+F.h+z)/H)+1)}for(var U=0;U<R.length;U+=1)for(;this.pdf.internal.getNumberOfPages()<R[U];)x.call(this);return R},x=function(){var F=this.fillStyle,Q=this.strokeStyle,H=this.font,R=this.lineCap,z=this.lineWidth,J=this.lineJoin;this.pdf.addPage(),this.fillStyle=F,this.strokeStyle=Q,this.font=H,this.lineCap=R,this.lineWidth=z,this.lineJoin=J},y=function(F,Q,H){for(var R=0;R<F.length;R++)switch(F[R].type){case"bct":F[R].x2+=Q,F[R].y2+=H;case"qct":F[R].x1+=Q,F[R].y1+=H;default:F[R].x+=Q,F[R].y+=H}return F},b=function(F){return F.sort(function(Q,H){return Q-H})},w=function(F,Q){var H=this.fillStyle,R=this.strokeStyle,z=this.lineCap,J=this.lineWidth,D=Math.abs(J*this.ctx.transform.scaleX),U=this.lineJoin;if(this.autoPaging){for(var ne,ve,L=JSON.parse(JSON.stringify(this.path)),Ye=JSON.parse(JSON.stringify(this.path)),ie=[],Z=0;Z<Ye.length;Z++)if(Ye[Z].x!==void 0)for(var Oe=g.call(this,Ye[Z]),le=0;le<Oe.length;le+=1)ie.indexOf(Oe[le])===-1&&ie.push(Oe[le]);for(var se=0;se<ie.length;se++)for(;this.pdf.internal.getNumberOfPages()<ie[se];)x.call(this);b(ie);for(var Be=ie[0],je=ie[ie.length-1],ot=Be;ot<je+1;ot++){this.pdf.setPage(ot),this.fillStyle=H,this.strokeStyle=R,this.lineCap=z,this.lineWidth=D,this.lineJoin=U;var mt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ut=ot===1?this.posY+this.margin[0]:this.margin[0],_e=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],rt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],we=ot===1?0:_e+(ot-2)*rt;if(this.ctx.clip_path.length!==0){var Ce=this.path;ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(ne,this.posX+this.margin[3],-we+ut+this.ctx.prevPageLastElemOffset),j.call(this,F,!0),this.path=Ce}if(ve=JSON.parse(JSON.stringify(L)),this.path=y(ve,this.posX+this.margin[3],-we+ut+this.ctx.prevPageLastElemOffset),Q===!1||ot===0){var Ue=(ot>Be||ot<je)&&p.call(this);Ue&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],mt,rt,null).clip().discardPath()),j.call(this,F,Q),Ue&&this.pdf.restoreGraphicsState()}this.lineWidth=J}this.path=L}else this.lineWidth=D,j.call(this,F,Q),this.lineWidth=J},j=function(F,Q){if((F!=="stroke"||Q||!m.call(this))&&(F==="stroke"||Q||!A.call(this))){for(var H,R,z=[],J=this.path,D=0;D<J.length;D++){var U=J[D];switch(U.type){case"begin":z.push({begin:!0});break;case"close":z.push({close:!0});break;case"mt":z.push({start:U,deltas:[],abs:[]});break;case"lt":var ne=z.length;if(J[D-1]&&!isNaN(J[D-1].x)&&(H=[U.x-J[D-1].x,U.y-J[D-1].y],ne>0)){for(;ne>=0;ne--)if(z[ne-1].close!==!0&&z[ne-1].begin!==!0){z[ne-1].deltas.push(H),z[ne-1].abs.push(U);break}}break;case"bct":H=[U.x1-J[D-1].x,U.y1-J[D-1].y,U.x2-J[D-1].x,U.y2-J[D-1].y,U.x-J[D-1].x,U.y-J[D-1].y],z[z.length-1].deltas.push(H);break;case"qct":var ve=J[D-1].x+2/3*(U.x1-J[D-1].x),L=J[D-1].y+2/3*(U.y1-J[D-1].y),Ye=U.x+2/3*(U.x1-U.x),ie=U.y+2/3*(U.y1-U.y),Z=U.x,Oe=U.y;H=[ve-J[D-1].x,L-J[D-1].y,Ye-J[D-1].x,ie-J[D-1].y,Z-J[D-1].x,Oe-J[D-1].y],z[z.length-1].deltas.push(H);break;case"arc":z.push({deltas:[],abs:[],arc:!0}),Array.isArray(z[z.length-1].abs)&&z[z.length-1].abs.push(U)}}R=Q?null:F==="stroke"?"stroke":"fill";for(var le=!1,se=0;se<z.length;se++)if(z[se].arc)for(var Be=z[se].abs,je=0;je<Be.length;je++){var ot=Be[je];ot.type==="arc"?S.call(this,ot.x,ot.y,ot.radius,ot.startAngle,ot.endAngle,ot.counterclockwise,void 0,Q,!le):O.call(this,ot.x,ot.y),le=!0}else if(z[se].close===!0)this.pdf.internal.out("h"),le=!1;else if(z[se].begin!==!0){var mt=z[se].start.x,ut=z[se].start.y;W.call(this,z[se].deltas,mt,ut),le=!0}R&&E.call(this,R),Q&&k.call(this)}},I=function(F){var Q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,H=Q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return F-H;case"top":return F+Q-H;case"hanging":return F+Q-2*H;case"middle":return F+Q/2-H;default:return F}},_=function(F){return F+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var F=function(){};return F.colorStops=[],F.addColorStop=function(Q,H){this.colorStops.push([Q,H])},F.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},F.isCanvasGradient=!0,F},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(F,Q,H,R,z,J,D,U,ne){for(var ve=de.call(this,H,R,z,J),L=0;L<ve.length;L++){var Ye=ve[L];L===0&&(ne?P.call(this,Ye.x1+F,Ye.y1+Q):O.call(this,Ye.x1+F,Ye.y1+Q)),Ae.call(this,F,Q,Ye.x2,Ye.y2,Ye.x3,Ye.y3,Ye.x4,Ye.y4)}U?k.call(this):E.call(this,D)},E=function(F){switch(F){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},k=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(F,Q){this.pdf.internal.out(r(F)+" "+n(Q)+" m")},T=function(F){var Q;switch(F.align){case"right":case"end":Q="right";break;case"center":Q="center";break;default:Q="left"}var H,R,z,J=this.pdf.getTextDimensions(F.text),D=I.call(this,F.y),U=_.call(this,D)-J.h,ne=this.ctx.transform.applyToPoint(new i(F.x,D));if(this.autoPaging){var ve=this.ctx.transform.decompose(),L=new c;L=(L=(L=L.multiply(ve.translate)).multiply(ve.skew)).multiply(ve.scale);for(var Ye=this.ctx.transform.applyToRectangle(new l(F.x,D,J.w,J.h)),ie=L.applyToRectangle(new l(F.x,U,J.w,J.h)),Z=g.call(this,ie),Oe=[],le=0;le<Z.length;le+=1)Oe.indexOf(Z[le])===-1&&Oe.push(Z[le]);b(Oe);for(var se=Oe[0],Be=Oe[Oe.length-1],je=se;je<Be+1;je++){this.pdf.setPage(je);var ot=je===1?this.posY+this.margin[0]:this.margin[0],mt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ut=this.pdf.internal.pageSize.height-this.margin[2],_e=ut-this.margin[0],rt=this.pdf.internal.pageSize.width-this.margin[1],we=rt-this.margin[3],Ce=je===1?0:mt+(je-2)*_e;if(this.ctx.clip_path.length!==0){var Ue=this.path;H=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(H,this.posX+this.margin[3],-1*Ce+ot),j.call(this,"fill",!0),this.path=Ue}var Ve=y([JSON.parse(JSON.stringify(ie))],this.posX+this.margin[3],-Ce+ot+this.ctx.prevPageLastElemOffset)[0];F.scale>=.01&&(R=this.pdf.internal.getFontSize(),this.pdf.setFontSize(R*F.scale),z=this.lineWidth,this.lineWidth=z*F.scale);var ue=this.autoPaging!=="text";if(ue||Ve.y+Ve.h<=ut){if(ue||Ve.y>=ot&&Ve.x<=rt){var ce=ue?F.text:this.pdf.splitTextToSize(F.text,F.maxWidth||rt-Ve.x)[0],Te=y([JSON.parse(JSON.stringify(Ye))],this.posX+this.margin[3],-Ce+ot+this.ctx.prevPageLastElemOffset)[0],Xe=ue&&(je>se||je<Be)&&p.call(this);Xe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],we,_e,null).clip().discardPath()),this.pdf.text(ce,Te.x,Te.y,{angle:F.angle,align:Q,renderingMode:F.renderingMode}),Xe&&this.pdf.restoreGraphicsState()}}else Ve.y<ut&&(this.ctx.prevPageLastElemOffset+=ut-Ve.y);F.scale>=.01&&(this.pdf.setFontSize(R),this.lineWidth=z)}}else F.scale>=.01&&(R=this.pdf.internal.getFontSize(),this.pdf.setFontSize(R*F.scale),z=this.lineWidth,this.lineWidth=z*F.scale),this.pdf.text(F.text,ne.x+this.posX,ne.y+this.posY,{angle:F.angle,align:Q,renderingMode:F.renderingMode,maxWidth:F.maxWidth}),F.scale>=.01&&(this.pdf.setFontSize(R),this.lineWidth=z)},O=function(F,Q,H,R){H=H||0,R=R||0,this.pdf.internal.out(r(F+H)+" "+n(Q+R)+" l")},W=function(F,Q,H){return this.pdf.lines(F,Q,H,null,null)},Ae=function(F,Q,H,R,z,J,D,U){this.pdf.internal.out([e(a(H+F)),e(s(R+Q)),e(a(z+F)),e(s(J+Q)),e(a(D+F)),e(s(U+Q)),"c"].join(" "))},de=function(F,Q,H,R){for(var z=2*Math.PI,J=Math.PI/2;Q>H;)Q-=z;var D=Math.abs(H-Q);D<z&&R&&(D=z-D);for(var U=[],ne=R?-1:1,ve=Q;D>1e-5;){var L=ve+ne*Math.min(D,J);U.push(fe.call(this,F,ve,L)),D-=Math.abs(L-ve),ve=L}return U},fe=function(F,Q,H){var R=(H-Q)/2,z=F*Math.cos(R),J=F*Math.sin(R),D=z,U=-J,ne=D*D+U*U,ve=ne+D*z+U*J,L=4/3*(Math.sqrt(2*ne*ve)-ve)/(D*J-U*z),Ye=D-L*U,ie=U+L*D,Z=Ye,Oe=-ie,le=R+Q,se=Math.cos(le),Be=Math.sin(le);return{x1:F*Math.cos(Q),y1:F*Math.sin(Q),x2:Ye*se-ie*Be,y2:Ye*Be+ie*se,x3:Z*se-Oe*Be,y3:Z*Be+Oe*se,x4:F*Math.cos(H),y4:F*Math.sin(H)}},ge=function(F){return 180*F/Math.PI},ee=function(F,Q,H,R,z,J){var D=F+.5*(H-F),U=Q+.5*(R-Q),ne=z+.5*(H-z),ve=J+.5*(R-J),L=Math.min(F,z,D,ne),Ye=Math.max(F,z,D,ne),ie=Math.min(Q,J,U,ve),Z=Math.max(Q,J,U,ve);return new l(L,ie,Ye-L,Z-ie)},Fe=function(F,Q,H,R,z,J,D,U){var ne,ve,L,Ye,ie,Z,Oe,le,se,Be,je,ot,mt,ut,_e=H-F,rt=R-Q,we=z-H,Ce=J-R,Ue=D-z,Ve=U-J;for(ve=0;ve<41;ve++)se=(Oe=(L=F+(ne=ve/40)*_e)+ne*((ie=H+ne*we)-L))+ne*(ie+ne*(z+ne*Ue-ie)-Oe),Be=(le=(Ye=Q+ne*rt)+ne*((Z=R+ne*Ce)-Ye))+ne*(Z+ne*(J+ne*Ve-Z)-le),ve==0?(je=se,ot=Be,mt=se,ut=Be):(je=Math.min(je,se),ot=Math.min(ot,Be),mt=Math.max(mt,se),ut=Math.max(ut,Be));return new l(Math.round(je),Math.round(ot),Math.round(mt-je),Math.round(ut-ot))},Pe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var F,Q,H=(F=this.ctx.lineDash,Q=this.ctx.lineDashOffset,JSON.stringify({lineDash:F,lineDashOffset:Q}));this.prevLineDash!==H&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=H)}}})(Br.API),function(t){var e=function(i){var l,c,u,d,f,h,A,m,p,g;for(c=[],u=0,d=(i+=l="\0\0\0\0".slice(i.length%4||4)).length;d>u;u+=4)(f=(i.charCodeAt(u)<<24)+(i.charCodeAt(u+1)<<16)+(i.charCodeAt(u+2)<<8)+i.charCodeAt(u+3))!==0?(h=(f=((f=((f=((f=(f-(g=f%85))/85)-(p=f%85))/85)-(m=f%85))/85)-(A=f%85))/85)%85,c.push(h+33,A+33,m+33,p+33,g+33)):c.push(122);return function(x,y){for(var b=y;b>0;b--)x.pop()}(c,l.length),String.fromCharCode.apply(String,c)+"~>"},r=function(i){var l,c,u,d,f,h=String,A="length",m=255,p="charCodeAt",g="slice",x="replace";for(i[g](-2),i=i[g](0,-2)[x](/\s/g,"")[x]("z","!!!!!"),u=[],d=0,f=(i+=l="uuuuu"[g](i[A]%5||5))[A];f>d;d+=5)c=52200625*(i[p](d)-33)+614125*(i[p](d+1)-33)+7225*(i[p](d+2)-33)+85*(i[p](d+3)-33)+(i[p](d+4)-33),u.push(m&c>>24,m&c>>16,m&c>>8,m&c);return function(y,b){for(var w=b;w>0;w--)y.pop()}(u,l[A]),h.fromCharCode.apply(h,u)},n=function(i){return i.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(i){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),l.test(i)===!1)return"";for(var c="",u=0;u<i.length;u+=2)c+=String.fromCharCode("0x"+(i[u]+i[u+1]));return c},s=function(i){for(var l=new Uint8Array(i.length),c=i.length;c--;)l[c]=i.charCodeAt(c);return(l=ak(l)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};t.processDataByFilters=function(i,l){var c=0,u=i||"",d=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=a(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=s(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}(Br.API),function(t){t.loadFile=function(e,r,n){return function(a,s,i){s=s!==!1,i=typeof i=="function"?i:function(){};var l=void 0;try{l=function(c,u,d){var f=new XMLHttpRequest,h=0,A=function(m){var p=m.length,g=[],x=String.fromCharCode;for(h=0;h<p;h+=1)g.push(x(255&m.charCodeAt(h)));return g.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(A(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return A(f.responseText)}(a,s,i)}catch{}return l}(e,r,n)},t.loadImageFile=t.loadFile}(Br.API),function(t){function e(){return(sn.html2canvas?Promise.resolve(sn.html2canvas):LA(()=>Promise.resolve().then(()=>aD),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(sn.DOMPurify?Promise.resolve(sn.DOMPurify):LA(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var c=Na(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(l,c){var u=document.createElement(l);for(var d in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[d]=c.style[d];return u},s=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),f=c.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||d.appendChild(l(f,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d},i=function l(c){var u=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),d=l.convert(Promise.resolve(),u);return(d=d.setProgress(1,l,1,[l])).set(c)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(l,c){return l.__proto__=c||i.prototype,l},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(l,c){return this.then(function(){switch(c=c||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l),c){case"string":return this.then(r).then(function(u){return this.set({src:a("div",{innerHTML:l,dompurify:u})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},i.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var A=0;A<d.length;++A){var m=d[A],p=m.src.find(function(g){return g.format==="truetype"});p&&u.addFont(p.url,m.ref.name,m.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,u.context2d.save(!0),c(this.prop.container,h)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(l,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},i.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},i.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},i.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(l){if(n(l)!=="object")return this;var c=Object.keys(l||{}).map(function(u){if(u in i.template.prop)return function(){this.prop[u]=l[u]};switch(u){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[u]=l[u]}}},this);return this.then(function(){return this.thenList(c)})},i.prototype.get=function(l,c){return this.then(function(){var u=l in i.template.prop?this.prop[l]:this.opt[l];return c?c(u):u})},i.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},i.prototype.setPageSize=function(l){function c(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(l=l||Br.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},i.prototype.setProgress=function(l,c,u,d){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(l,c,u,d){return this.setProgress(l?this.progress.val+l:null,c||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},i.prototype.then=function(l,c){var u=this;return this.thenCore(l,c,function(d,f){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(h){return u.updateProgress(null,d),h}).then(d,f).then(function(h){return u.updateProgress(1),h})})},i.prototype.thenCore=function(l,c,u){u=u||Promise.prototype.then;var d=this;l&&(l=l.bind(d)),c&&(c=c.bind(d));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:i.convert(Object.assign({},d),Promise.prototype),h=u.call(f,l,c);return i.convert(h,d.__proto__)},i.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},i.prototype.thenList=function(l){var c=this;return l.forEach(function(u){c=c.thenCore(u)}),c},i.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return i.convert(c,this)},i.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},i.prototype.error=function(l){return this.then(function(){throw new Error(l)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Br.getPageSize=function(l,c,u){if(Na(l)==="object"){var d=l;l=d.orientation,c=d.unit||c,u=d.format||u}c=c||"mm",u=u||"a4",l=(""+(l||"P")).toLowerCase();var f,h=(""+u).toLowerCase(),A={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+c}var m,p=0,g=0;if(A.hasOwnProperty(h))p=A[h][1]/f,g=A[h][0]/f;else try{p=u[1],g=u[0]}catch{throw new Error("Invalid format: "+u)}if(l==="p"||l==="portrait")l="p",g>p&&(m=g,g=p,p=m);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",p>g&&(m=g,g=p,p=m)}return{width:g,height:p,unit:c,k:f,orientation:l}},t.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map($5):null;var u=new i(c);return c.worker?u:u.from(l).doCallback()}}(Br.API),Br.API.addJS=function(t){return WQ=t,this.internal.events.subscribe("postPutResources",function(){NC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(NC+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),zQ=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+WQ+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){NC!==void 0&&zQ!==void 0&&this.internal.out("/Names <</JavaScript "+NC+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var i=a[s],l=n.exec(i);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(i)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var f=r.internal.newObject();d.push(f);var h=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var A=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+A+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var i={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(i),i},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var i=n.children[s];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var l=this.count=this.count_r({count:0},i);if(l>0&&this.line("/Count "+l),i.options&&i.options.pageNumber){var c=r.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(Br.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,a,s,i,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=i||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=function(f){for(var h,A=256*f.charCodeAt(4)+f.charCodeAt(5),m=f.length,p={width:0,height:0,numcomponents:1},g=4;g<m;g+=2){if(g+=A,e.indexOf(f.charCodeAt(g+1))!==-1){h=256*f.charCodeAt(g+5)+f.charCodeAt(g+6),p={width:256*f.charCodeAt(g+7)+f.charCodeAt(g+8),height:h,numcomponents:f.charCodeAt(g+9)};break}A=256*f.charCodeAt(g+2)+f.charCodeAt(g+3)}return p}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(Br.API),Br.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var a,s=yIe(t,{checkCrc:!0}),i=s.width,l=s.height,c=s.channels,u=s.palette,d=s.depth;a=u&&c===1?function(S){for(var E=S.width,k=S.height,P=S.data,T=S.palette,O=S.depth,W=!1,Ae=[],de=[],fe=void 0,ge=!1,ee=0,Fe=0;Fe<T.length;Fe++){var Pe=Z9(T[Fe],4),F=Pe[0],Q=Pe[1],H=Pe[2],R=Pe[3];Ae.push(F,Q,H),R!=null&&(R===0?(ee++,de.length<1&&de.push(Fe)):R<255&&(ge=!0))}if(ge||ee>1){W=!0,de=void 0;var z=E*k;fe=new Uint8Array(z);for(var J=new DataView(P.buffer),D=0;D<z;D++){var U=K5(J,D,O),ne=Z9(T[U],4)[3];fe[D]=ne}}else ee===0&&(de=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:W?8:void 0,colorBytes:P,alphaBytes:fe,needSMask:W,palette:Ae,mask:de}}(s):c===2||c===4?function(S){for(var E=S.data,k=S.width,P=S.height,T=S.channels,O=S.depth,W=T===2?"DeviceGray":"DeviceRGB",Ae=T-1,de=k*P,fe=Ae,ge=de*fe,ee=1*de,Fe=Math.ceil(ge*O/8),Pe=Math.ceil(ee*O/8),F=new Uint8Array(Fe),Q=new Uint8Array(Pe),H=new DataView(E.buffer),R=new DataView(F.buffer),z=new DataView(Q.buffer),J=!1,D=0;D<de;D++){for(var U=D*T,ne=0;ne<fe;ne++)aV(R,K5(H,U+ne,O),D*fe+ne,O);var ve=K5(H,U+fe,O);ve<(1<<O)-1&&(J=!0),aV(z,ve,1*D,O)}return{colorSpace:W,colorsPerPixel:Ae,sMaskBitsPerComponent:J?O:void 0,colorBytes:F,alphaBytes:Q,needSMask:J}}(s):function(S){var E=S.data,k=S.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:k,colorsPerPixel:k==="DeviceGray"?1:3,colorBytes:E instanceof Uint16Array?function(P){for(var T=P.length,O=new Uint8Array(2*T),W=new DataView(O.buffer,O.byteOffset,O.byteLength),Ae=0;Ae<T;Ae++)W.setUint16(2*Ae,P[Ae],!1);return O}(E):E,needSMask:!1}}(s);var f,h,A,m=a,p=m.colorSpace,g=m.colorsPerPixel,x=m.sMaskBitsPerComponent,y=m.colorBytes,b=m.alphaBytes,w=m.needSMask,j=m.palette,I=m.mask,_=null;return n!==Br.API.image_compression.NONE&&typeof ak=="function"?(_=function(S){var E;switch(S){case Br.API.image_compression.FAST:E=11;break;case Br.API.image_compression.MEDIUM:E=13;break;case Br.API.image_compression.SLOW:E=14;break;default:E=12}return E}(n),f=this.decode.FLATE_DECODE,h="/Predictor ".concat(_," /Colors ").concat(g," /BitsPerComponent ").concat(d," /Columns ").concat(i),t=ZQ(y,Math.ceil(i*g*d/8),g,d,n),w&&(A=ZQ(b,Math.ceil(i*x/8),1,x,n))):(f=void 0,h=void 0,t=y,w&&(A=b)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(A&&this.__addimage__.isArrayBuffer(A)||this.__addimage__.isArrayBufferView(A))&&(A=this.__addimage__.arrayBufferToBinaryString(A)),{alias:r,data:t,index:e,filter:f,decodeParameters:h,transparency:I,palette:j,sMask:A,predictor:_,width:i,height:l,bitsPerComponent:d,sMaskBitsPerComponent:x,colorSpace:p}}},function(t){t.processGIF89A=function(e,r,n,a){var s=new VIe(e),i=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:i,height:l},d=new q5(100).encode(u,100);return t.processJPEG.call(this,d,r,n,a)},t.processGIF87A=t.processGIF89A}(Br.API),bd.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},bd.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){Da.log("bit decode error:"+r)}},bd.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<e;a++)for(var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[i+4*l]=c.blue,this.data[i+4*l+1]=c.green,this.data[i+4*l+2]=c.red,this.data[i+4*l+3]=255}r!==0&&(this.pos+=4-r)}},bd.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<t;a++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+2*a*4,l=s>>4,c=15&s,u=this.palette[l];if(this.data[i]=u.blue,this.data[i+1]=u.green,this.data[i+2]=u.red,this.data[i+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[i+4]=u.blue,this.data[i+4+1]=u.green,this.data[i+4+2]=u.red,this.data[i+4+3]=255}e!==0&&(this.pos+=4-e)}},bd.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var i=this.palette[a];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},bd.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&e)/e*255|0,l=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=i,this.data[d+3]=u}this.pos+=t}},bd.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(i&e)/e*255|0,c=(i>>5&r)/r*255|0,u=(i>>11)/e*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=t}},bd.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=e*this.width*4+4*r;this.data[i]=s,this.data[i+1]=a,this.data[i+2]=n,this.data[i+3]=255}this.pos+=this.width%4}},bd.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*r;this.data[l]=s,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=i}},bd.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,a){var s=new bd(e,!1),i=s.width,l=s.height,c={data:s.getData(),width:i,height:l},u=new q5(100).encode(c,100);return t.processJPEG.call(this,u,r,n,a)}}(Br.API),iV.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,a){var s=new iV(e),i=s.width,l=s.height,c={data:s.getData(),width:i,height:l},u=new q5(100).encode(c,100);return t.processJPEG.call(this,u,r,n,a)}}(Br.API),Br.API.processRGBA=function(t,e,r){for(var n=t.data,a=n.length,s=new Uint8Array(a/4*3),i=new Uint8Array(a/4),l=0,c=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],h=n[u+2],A=n[u+3];s[l++]=d,s[l++]=f,s[l++]=h,i[c++]=A}var m=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:m,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Br.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Yg=Br.API,CC=Yg.getCharWidthsArray=function(t,e){var r,n,a=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),i=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,u=e.kerning?e.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=e.doKerning!==!1,h=0,A=t.length,m=0,p=l[0]||c,g=[];for(r=0;r<A;r++)n=t.charCodeAt(r),typeof a.metadata.widthOfString=="function"?g.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+i*(1e3/s)||0)/1e3):(h=f&&Na(u[n])==="object"&&!isNaN(parseInt(u[n][m],10))?u[n][m]/d:0,g.push((l[n]||p)/c+h)),m=n;return g},XQ=Yg.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return Yg.processArabic&&(t=Yg.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,a)/r:CC.apply(this,arguments).reduce(function(s,i){return s+i},0)},YQ=function(t,e,r,n){for(var a=[],s=0,i=t.length,l=0;s!==i&&l+e[s]<r;)l+=e[s],s++;a.push(t.slice(0,s));var c=s;for(l=0;s!==i;)l+e[s]>n&&(a.push(t.slice(c,s)),l=0,c=s),l+=e[s],s++;return c!==s&&a.push(t.slice(c,s)),a},JQ=function(t,e,r){r||(r={});var n,a,s,i,l,c,u,d=[],f=[d],h=r.textIndent||0,A=0,m=0,p=t.split(" "),g=CC.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?p[0].length+2:r.lineIndent||0){var x=Array(c).join(" "),y=[];p.map(function(w){(w=w.split(/\s*\n/)).length>1?y=y.concat(w.map(function(j,I){return(I&&j.length?`
`:"")+j})):y.push(w[0])}),p=y,c=XQ.apply(this,[x,r])}for(s=0,i=p.length;s<i;s++){var b=0;if(n=p[s],c&&n[0]==`
`&&(n=n.substr(1),b=1),h+A+(m=(a=CC.apply(this,[n,r])).reduce(function(w,j){return w+j},0))>e||b){if(m>e){for(l=YQ.apply(this,[n,a,e-(h+A),e]),d.push(l.shift()),d=[l.pop()];l.length;)f.push([l.shift()]);m=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(w,j){return w+j},0)}else d=[n];f.push(d),h=m+c,A=g}else d.push(n),h+=A+m,A=g}return u=c?function(w,j){return(j?x:"")+w.join(" ")}:function(w){return w.join(" ")},f.map(u)},Yg.splitTextToSize=function(t,e,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle),h="Unicode";return f.metadata[h]?{widths:f.metadata[h].widths||{0:1},kerning:f.metadata[h].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var i=1*this.internal.scaleFactor*e/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(JQ.apply(this,[n[l],i,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},a={},s=0;s<16;s++)n[r[s]]=e[s],a[e[s]]=r[s];var i=function(h){return"0x"+parseInt(h,10).toString(16)},l=t.__fontmetrics__.compress=function(h){var A,m,p,g,x=["{"];for(var y in h){if(A=h[y],isNaN(parseInt(y,10))?m="'"+y+"'":(y=parseInt(y,10),m=(m=i(y).slice(2)).slice(0,-1)+a[m.slice(-1)]),typeof A=="number")A<0?(p=i(A).slice(3),g="-"):(p=i(A).slice(2),g=""),p=g+p.slice(0,-1)+a[p.slice(-1)];else{if(Na(A)!=="object")throw new Error("Don't know what to do with value type "+Na(A)+".");p=l(A)}x.push(m+p)}return x.push("}"),x.join("")},c=t.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var A,m,p,g,x={},y=1,b=x,w=[],j="",I="",_=h.length-1,S=1;S<_;S+=1)(g=h[S])=="'"?A?(p=A.join(""),A=void 0):A=[]:A?A.push(g):g=="{"?(w.push([b,p]),b={},p=void 0):g=="}"?((m=w.pop())[0][m[1]]=b,p=void 0,b=m[0]):g=="-"?y=-1:p===void 0?n.hasOwnProperty(g)?(j+=n[g],p=parseInt(j,16)*y,y=1,j=""):j+=g:n.hasOwnProperty(g)?(I+=n[g],b[p]=parseInt(I,16)*y,y=1,p=void 0,I=""):I+=g;return x},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(h){var A=h.font,m=f.Unicode[A.postScriptName];m&&(A.metadata.Unicode={},A.metadata.Unicode.widths=m.widths,A.metadata.Unicode.kerning=m.kerning);var p=d.Unicode[A.postScriptName];p&&(A.metadata.Unicode.encoding=p,A.encoding=p.codePages[0])}])}(Br.API),function(t){var e=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};t.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(i,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(eE(l)),i.metadata=t.API.TTFFont.open(l),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(a,n)}}])}(Br),Br.API.addSvgAsImage=function(t,e,r,n,a,s,i,l){if(isNaN(e)||isNaN(r))throw Da.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw Da.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=a;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(sn.canvg?Promise.resolve(sn.canvg):LA(()=>import("./index.es-C1c7WE15.js"),[])).catch(function(h){return Promise.reject(new Error("Could not load canvg: "+h))}).then(function(h){return h.default?h.default:h}).then(function(h){return h.fromString(u,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(h){return h.render(d)}).then(function(){f.addImage(c.toDataURL("image/jpeg",1),e,r,n,a,i,l)})},Br.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(e,r);return this},Br.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,a,s,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(i),c=[],u=0,d=0,f=0;function h(m,p){var g,x=!1;for(g=0;g<m.length;g+=1)m[g]===p&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var A=l.length;for(f=0;f<A;f+=1)r[l[f]].value=r[l[f]].defaultValue,r[l[f]].explicitSet=!1}if(Na(t)==="object"){for(a in t)if(s=t[a],h(l,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&h(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,p=[];for(m in r)r[m].explicitSet===!0&&(r[m].type==="name"?p.push("/"+m+" /"+r[m].value):p.push("/"+m+" "+r[m].value));p.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+p.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+i.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+i+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(Br.API),function(t){var e=t.API,r=e.pdfEscape16=function(s,i){for(var l,c=i.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,h=s.length;f<h;++f){if(l=i.metadata.characterToGlyph(s.charCodeAt(f)),i.metadata.glyIdsUsed.push(l),i.metadata.toUnicode[l]=s.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(i.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},n=function(s){var i,l,c,u,d,f,h;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,h=(l=Object.keys(s).sort(function(A,m){return A-m})).length;f<h;f++)i=l[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[i]!==void 0&&s[i]!==null&&typeof s[i].toString=="function"&&(u=("0000"+s[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),c.push("<"+i+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(i){var l=i.font,c=i.out,u=i.newObject,d=i.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,h=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),A="",m=0;m<h.length;m++)A+=String.fromCharCode(h[m]);var p=u();d({data:A,addLength1:!0,objectId:p}),c("endobj");var g=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var x=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+vx(l.fontName)),c("/FontFile2 "+p+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var y=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+vx(l.fontName)),c("/FontDescriptor "+x+" 0 R"),c("/W "+t.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+g+" 0 R"),c("/BaseFont /"+vx(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+y+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(i){var l=i.font,c=i.out,u=i.newObject,d=i.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,h="",A=0;A<f.length;A++)h+=String.fromCharCode(f[A]);var m=u();d({data:h,addLength1:!0,objectId:m}),c("endobj");var p=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:p}),c("endobj");var g=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+m+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+vx(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var x=0;x<l.metadata.hmtx.widths.length;x++)l.metadata.hmtx.widths[x]=parseInt(l.metadata.hmtx.widths[x]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+p+" 0 R/BaseFont/"+vx(l.fontName)+"/FontDescriptor "+g+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var a=function(s){var i,l=s.text||"",c=s.x,u=s.y,d=s.options||{},f=s.mutex||{},h=f.pdfEscape,A=f.activeFontKey,m=f.fonts,p=A,g="",x=0,y="",b=m[p].encoding;if(m[p].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:f};for(y=l,p=A,Array.isArray(l)&&(y=l[0]),x=0;x<y.length;x+=1)m[p].metadata.hasOwnProperty("cmap")&&(i=m[p].metadata.cmap.unicode.codeMap[y[x].charCodeAt(0)]),i||y[x].charCodeAt(0)<256&&m[p].metadata.hasOwnProperty("Unicode")?g+=y[x]:g+="";var w="";return parseInt(p.slice(1))<14||b==="WinAnsiEncoding"?w=h(g,p).split("").map(function(j){return j.charCodeAt(0).toString(16)}).join(""):b==="Identity-H"&&(w=r(g,m[p])),f.isHex=!0,{text:w,x:c,y:u,options:d,mutex:f}};e.events.push(["postProcessText",function(s){var i=s.text||"",l=[],c={text:i,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(i)){var u=0;for(u=0;u<i.length;u+=1)Array.isArray(i[u])&&i[u].length===3?l.push([a(Object.assign({},c,{text:i[u][0]})).text,i[u][1],i[u][2]]):l.push(a(Object.assign({},c,{text:i[u]})).text);s.text=l}else s.text=a(Object.assign({},c,{text:i})).text}])}(Br),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Br.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var a,s,i,l,c,u,d,f=e,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],A=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},g=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),y=!1,b=0;this.__bidiEngine__={};var w=function(P){var T=P.charCodeAt(),O=T>>8,W=p[O];return W!==void 0?f[256*W+(255&T)]:O===252||O===253?"AL":x.test(O)?"L":O===8?"R":"N"},j=function(P){for(var T,O=0;O<P.length;O++){if((T=w(P.charAt(O)))==="L")return!1;if(T==="R")return!0}return!1},I=function(P,T,O,W){var Ae,de,fe,ge,ee=T[W];switch(ee){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":y=!1;break;case"N":case"AN":break;case"EN":y&&(ee="AN");break;case"AL":y=!0,ee="R";break;case"WS":case"BN":ee="N";break;case"CS":W<1||W+1>=T.length||(Ae=O[W-1])!=="EN"&&Ae!=="AN"||(de=T[W+1])!=="EN"&&de!=="AN"?ee="N":y&&(de="AN"),ee=de===Ae?de:"N";break;case"ES":ee=(Ae=W>0?O[W-1]:"B")==="EN"&&W+1<T.length&&T[W+1]==="EN"?"EN":"N";break;case"ET":if(W>0&&O[W-1]==="EN"){ee="EN";break}if(y){ee="N";break}for(fe=W+1,ge=T.length;fe<ge&&T[fe]==="ET";)fe++;ee=fe<ge&&T[fe]==="EN"?"EN":"N";break;case"NSM":if(i&&!l){for(ge=T.length,fe=W+1;fe<ge&&T[fe]==="NSM";)fe++;if(fe<ge){var Fe=P[W],Pe=Fe>=1425&&Fe<=2303||Fe===64286;if(Ae=T[fe],Pe&&(Ae==="R"||Ae==="AL")){ee="R";break}}}ee=W<1||(Ae=T[W-1])==="B"?"N":O[W-1];break;case"B":y=!1,a=!0,ee=b;break;case"S":s=!0,ee="N"}return ee},_=function(P,T,O){var W=P.split("");return O&&S(W,O,{hiLevel:b}),W.reverse(),T&&T.reverse(),W.join("")},S=function(P,T,O){var W,Ae,de,fe,ge,ee=-1,Fe=P.length,Pe=0,F=[],Q=b?A:h,H=[];for(y=!1,a=!1,s=!1,Ae=0;Ae<Fe;Ae++)H[Ae]=w(P[Ae]);for(de=0;de<Fe;de++){if(ge=Pe,F[de]=I(P,H,F,de),W=240&(Pe=Q[ge][m[F[de]]]),Pe&=15,T[de]=fe=Q[Pe][5],W>0)if(W===16){for(Ae=ee;Ae<de;Ae++)T[Ae]=1;ee=-1}else ee=-1;if(Q[Pe][6])ee===-1&&(ee=de);else if(ee>-1){for(Ae=ee;Ae<de;Ae++)T[Ae]=fe;ee=-1}H[de]==="B"&&(T[de]=0),O.hiLevel|=fe}s&&function(R,z,J){for(var D=0;D<J;D++)if(R[D]==="S"){z[D]=b;for(var U=D-1;U>=0&&R[U]==="WS";U--)z[U]=b}}(H,T,Fe)},E=function(P,T,O,W,Ae){if(!(Ae.hiLevel<P)){if(P===1&&b===1&&!a)return T.reverse(),void(O&&O.reverse());for(var de,fe,ge,ee,Fe=T.length,Pe=0;Pe<Fe;){if(W[Pe]>=P){for(ge=Pe+1;ge<Fe&&W[ge]>=P;)ge++;for(ee=Pe,fe=ge-1;ee<fe;ee++,fe--)de=T[ee],T[ee]=T[fe],T[fe]=de,O&&(de=O[ee],O[ee]=O[fe],O[fe]=de);Pe=ge}Pe++}}},k=function(P,T,O){var W=P.split(""),Ae={hiLevel:b};return O||(O=[]),S(W,O,Ae),function(de,fe,ge){if(ge.hiLevel!==0&&d)for(var ee,Fe=0;Fe<de.length;Fe++)fe[Fe]===1&&(ee=g.indexOf(de[Fe]))>=0&&(de[Fe]=g[ee+1])}(W,O,Ae),E(2,W,T,O,Ae),E(1,W,T,O,Ae),W.join("")};return this.__bidiEngine__.doBidiReorder=function(P,T,O){if(function(Ae,de){if(de)for(var fe=0;fe<Ae.length;fe++)de[fe]=fe;l===void 0&&(l=j(Ae)),u===void 0&&(u=j(Ae))}(P,T),i||!c||u)if(i&&c&&l^u)b=l?1:0,P=_(P,T,O);else if(!i&&c&&u)b=l?1:0,P=k(P,T,O),P=_(P,T);else if(!i||l||c||u){if(i&&!c&&l^u)P=_(P,T),l?(b=0,P=k(P,T,O)):(b=1,P=k(P,T,O),P=_(P,T));else if(i&&l&&!c&&u)b=1,P=k(P,T,O),P=_(P,T);else if(!i&&!c&&l^u){var W=d;l?(b=1,P=k(P,T,O),b=0,d=!1,P=k(P,T,O),d=W):(b=0,P=k(P,T,O),P=_(P,T),b=1,d=!1,P=k(P,T,O),d=W,P=_(P,T))}}else b=0,P=k(P,T,O);else b=l?1:0,P=k(P,T,O);return P},this.__bidiEngine__.setOptions=function(P){P&&(i=P.isInputVisual,c=P.isOutputVisual,l=P.isInputRtl,u=P.isOutputRtl,d=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var i=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(i=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?i.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):i.push([r.doBidiReorder(a[l])]);n.text=i}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(Br),Br.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new am(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new n4e(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new HIe(this.contents),this.head=new GIe(this),this.name=new XIe(this),this.cmap=new Ute(this),this.toUnicode={},this.hhea=new KIe(this),this.maxp=new YIe(this),this.hmtx=new JIe(this),this.post=new zIe(this),this.os2=new qIe(this),this.loca=new r4e(this),this.glyf=new ZIe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,l,c,u;for(u=[],i=0,l=(c=this.bbox).length;i<l;i++)e=c[i],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var a,s,i,l;for(i=0,s=0,l=(e=""+e).length;0<=l?s<l:s>l;s=0<=l?++s:--s)a=e.charCodeAt(s),i+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return i*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var rf,am=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,a;for(a=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(e.charCodeAt(r)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,a,s,i,l,c;return e=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),l=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^i)+256*(255^l)+(255^c)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*i+256*l+c},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,a,s;for(s=[],n=0,a=e.length;n<a;n++)r=e[n],s.push(this.writeByte(r));return s},t}(),HIe=function(){var t;function e(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,a,s,i,l,c,u,d,f,h,A,m,p;for(p in A=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(A)/c),i=Math.floor(f/c),d=16*A-f,(a=new am).writeInt(this.scalarType),a.writeShort(A),a.writeShort(f),a.writeShort(i),a.writeShort(d),s=16*A,u=a.pos+s,l=null,m=[],r)for(h=r[p],a.writeString(p),a.writeInt(t(h)),a.writeInt(u),a.writeInt(h.length),m=m.concat(h),p==="head"&&(l=u),u+=h.length;u%4;)m.push(0),u++;return a.write(m),n=2981146554-t(a.data),a.pos=l+8,a.writeUInt32(n),a.data},t=function(r){var n,a,s,i;for(r=Qte.call(r);r.length%4;)r.push(0);for(s=new am(r),a=0,n=0,i=r.length;n<i;n=n+=4)a+=s.readUInt32();return 4294967295&a},e}(),$Ie={}.hasOwnProperty,zf=function(t,e){for(var r in e)$Ie.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};rf=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var GIe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return zf(t,rf),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new am).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t}(),oV=function(){function t(e,r){var n,a,s,i,l,c,u,d,f,h,A,m,p,g,x,y,b;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(A=e.readUInt16(),h=A/2,e.pos+=6,s=function(){var w,j;for(j=[],c=w=0;0<=h?w<h:w>h;c=0<=h?++w:--w)j.push(e.readUInt16());return j}(),e.pos+=2,p=function(){var w,j;for(j=[],c=w=0;0<=h?w<h:w>h;c=0<=h?++w:--w)j.push(e.readUInt16());return j}(),u=function(){var w,j;for(j=[],c=w=0;0<=h?w<h:w>h;c=0<=h?++w:--w)j.push(e.readUInt16());return j}(),d=function(){var w,j;for(j=[],c=w=0;0<=h?w<h:w>h;c=0<=h?++w:--w)j.push(e.readUInt16());return j}(),a=(this.length-e.pos+this.offset)/2,l=function(){var w,j;for(j=[],c=w=0;0<=a?w<a:w>a;c=0<=a?++w:--w)j.push(e.readUInt16());return j}(),c=x=0,b=s.length;x<b;c=++x)for(g=s[c],n=y=m=p[c];m<=g?y<=g:y>=g;n=m<=g?++y:--y)d[c]===0?i=n+u[c]:(i=l[d[c]/2+(n-m)-(h-c)]||0)!==0&&(i+=u[c]),this.codeMap[n]=65535&i}e.pos=f}return t.encode=function(e,r){var n,a,s,i,l,c,u,d,f,h,A,m,p,g,x,y,b,w,j,I,_,S,E,k,P,T,O,W,Ae,de,fe,ge,ee,Fe,Pe,F,Q,H,R,z,J,D,U,ne,ve,L;switch(W=new am,i=Object.keys(e).sort(function(Ye,ie){return Ye-ie}),r){case"macroman":for(p=0,g=function(){var Ye=[];for(m=0;m<256;++m)Ye.push(0);return Ye}(),y={0:0},s={},Ae=0,ee=i.length;Ae<ee;Ae++)y[U=e[a=i[Ae]]]==null&&(y[U]=++p),s[a]={old:e[a],new:y[e[a]]},g[a]=y[e[a]];return W.writeUInt16(1),W.writeUInt16(0),W.writeUInt32(12),W.writeUInt16(0),W.writeUInt16(262),W.writeUInt16(0),W.write(g),{charMap:s,subtable:W.data,maxGlyphID:p+1};case"unicode":for(T=[],f=[],b=0,y={},n={},x=u=null,de=0,Fe=i.length;de<Fe;de++)y[j=e[a=i[de]]]==null&&(y[j]=++b),n[a]={old:j,new:y[j]},l=y[j]-a,x!=null&&l===u||(x&&f.push(x),T.push(a),u=l),x=a;for(x&&f.push(x),f.push(65535),T.push(65535),k=2*(E=T.length),S=2*Math.pow(Math.log(E)/Math.LN2,2),h=Math.log(S/2)/Math.LN2,_=2*E-S,c=[],I=[],A=[],m=fe=0,Pe=T.length;fe<Pe;m=++fe){if(P=T[m],d=f[m],P===65535){c.push(0),I.push(0);break}if(P-(O=n[P].new)>=32768)for(c.push(0),I.push(2*(A.length+E-m)),a=ge=P;P<=d?ge<=d:ge>=d;a=P<=d?++ge:--ge)A.push(n[a].new);else c.push(O-P),I.push(0)}for(W.writeUInt16(3),W.writeUInt16(1),W.writeUInt32(12),W.writeUInt16(4),W.writeUInt16(16+8*E+2*A.length),W.writeUInt16(0),W.writeUInt16(k),W.writeUInt16(S),W.writeUInt16(h),W.writeUInt16(_),J=0,F=f.length;J<F;J++)a=f[J],W.writeUInt16(a);for(W.writeUInt16(0),D=0,Q=T.length;D<Q;D++)a=T[D],W.writeUInt16(a);for(ne=0,H=c.length;ne<H;ne++)l=c[ne],W.writeUInt16(l);for(ve=0,R=I.length;ve<R;ve++)w=I[ve],W.writeUInt16(w);for(L=0,z=A.length;L<z;L++)p=A[L],W.writeUInt16(p);return{charMap:n,subtable:W.data,maxGlyphID:b+1}}},t}(),Ute=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return zf(t,rf),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)r=new oV(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,a;return r==null&&(r="macroman"),n=oV.encode(e,r),(a=new am).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},t}(),KIe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return zf(t,rf),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),qIe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return zf(t,rf),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),zIe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return zf(t,rf),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)r=e.readByte(),a.push(this.names.push(e.readString(r)));return a;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var i,l,c;for(c=[],s=i=0,l=this.file.maxp.numGlyphs;0<=l?i<l:i>l;s=0<=l?++i:--i)c.push(e.readUInt32());return c}).call(this)}},t}(),WIe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},XIe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return zf(t,rf),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,a,s,i,l,c,u,d,f,h;for(e.pos=this.offset,e.readShort(),r=e.readShort(),l=e.readShort(),n=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(c={},s=d=0,f=n.length;d<f;s=++d)a=n[s],e.pos=a.offset,u=e.readString(a.length),i=new WIe(u,a),c[h=a.nameID]==null&&(c[h]=[]),c[a.nameID].push(i);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t}(),YIe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return zf(t,rf),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),JIe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return zf(t,rf),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,a,s,i,l,c;for(e.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=a?u<a:u>a;r=0<=a?++u:--u)d.push(e.readInt16());return d}(),this.widths=(function(){var u,d,f,h;for(h=[],u=0,d=(f=this.metrics).length;u<d;u++)s=f[u],h.push(s.advance);return h}).call(this),n=this.widths[this.widths.length-1],c=[],r=i=0;0<=a?i<a:i>a;r=0<=a?++i:--i)c.push(this.widths.push(n));return c},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),Qte=[].slice,ZIe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return zf(t,rf),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,a,s,i,l,c,u,d,f;return e in this.cache?this.cache[e]:(s=this.file.loca,r=this.file.contents,n=s.indexOf(e),(a=s.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,i=(l=new am(r.read(a))).readShort(),u=l.readShort(),f=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[e]=i===-1?new t4e(l,u,f,c,d):new e4e(l,i,u,f,c,d),this.cache[e]))},t.prototype.encode=function(e,r,n){var a,s,i,l,c;for(i=[],s=[],l=0,c=r.length;l<c;l++)a=e[r[l]],s.push(i.length),a&&(i=i.concat(a.encode(n)));return s.push(i.length),{table:i,offsets:s}},t}(),e4e=function(){function t(e,r,n,a,s,i){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),t4e=function(){function t(e,r,n,a,s){var i,l;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;l=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&l;)i.pos+=1&l?4:2,128&l?i.pos+=8:64&l?i.pos+=4:8&l&&(i.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new am(Qte.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),r4e=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return zf(t,rf),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,s;for(s=[],n=0,a=this.length;n<a;n+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var a,s;for(s=[],n=0,a=this.length;n<a;n+=4)s.push(e.readUInt32());return s}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),a=0,s=0,i=0;i<n.length;++i)if(n[i]=a,s<r.length&&r[s]==i){++s,n[i]=a;var l=this.offsets[i],c=this.offsets[i+1]-l;c>0&&(a+=c)}for(var u=new Array(4*n.length),d=0;d<n.length;++d)u[4*d+3]=255&n[d],u[4*d+2]=(65280&n[d])>>8,u[4*d+1]=(16711680&n[d])>>16,u[4*d]=(4278190080&n[d])>>24;return u},t}(),n4e=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[r],e[r]=a[n];return e},t.prototype.glyphsFor=function(e){var r,n,a,s,i,l,c;for(a={},i=0,l=e.length;i<l;i++)a[s=e[i]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],a[s]=n;return a},t.prototype.encode=function(e,r){var n,a,s,i,l,c,u,d,f,h,A,m,p,g,x;for(a in n=Ute.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(e),A={0:0},x=n.charMap)A[(c=x[a]).old]=c.new;for(m in h=n.maxGlyphID,i)m in A||(A[m]=h++);return d=function(y){var b,w;for(b in w={},y)w[y[b]]=b;return w}(A),f=Object.keys(d).sort(function(y,b){return y-b}),p=function(){var y,b,w;for(w=[],y=0,b=f.length;y<b;y++)l=f[y],w.push(d[l]);return w}(),s=this.font.glyf.encode(i,p,A),u=this.font.loca.encode(s.offsets,p),g={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(g["OS/2"]=this.font.os2.raw()),this.font.directory.encode(g)},t}();Br.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,a,s,i;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(e.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)i=r[a],s.push("/"+a+" "+e.convert(i));return s.push(">>"),s.join(`
`)}return""+r},e}();const fk=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:FIe,AcroFormAppearance:Or,AcroFormButton:Ki,AcroFormCheckBox:gb,AcroFormChoiceField:xp,AcroFormComboBox:yp,AcroFormEditBox:mb,AcroFormListBox:vp,AcroFormPasswordField:xb,AcroFormPushButton:pb,AcroFormRadioButton:bp,AcroFormTextField:$0,GState:p2,ShadingPattern:x0,TilingPattern:ip,default:Br,jsPDF:Br},Symbol.toStringTag,{value:"Module"}));async function lV(t){const e={...t,remaining:t.quantity,status:"PENDIENTE",createdAt:or.now()};return wn(pt(Ge,"inventory_batches"),e)}async function Vte(t,e){await rn(Kt(Ge,"inventory_batches",t),{status:"PAGADO",paidAmount:null,paidAt:or.now()})}async function a4e(t,e){const r=tr(pt(Ge,"batch_allocations"),sr("saleDate",">=",t),sr("saleDate","<=",e)),n=await Lt(r),a={};return n.forEach(s=>{const i=s.data(),l=i.batchId;a[l]||(a[l]={batchId:i.batchId,batchDate:i.batchDate,productName:i.productName,quantity:0,amountCharged:0}),a[l].quantity+=Number(i.quantity||0),a[l].amountCharged+=Number(i.amountCharged||0)}),Object.values(a)}async function Hte(t){const e=Kt(Ge,"salesV2",t),r=await xi(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),a=[];if(Array.isArray(n.items)){for(const l of n.items)if(Array.isArray(l==null?void 0:l.allocations))for(const c of l.allocations){const u=String((c==null?void 0:c.batchId)||"").trim(),d=Number((c==null?void 0:c.qty)||0);u&&d&&a.push({batchId:u,qty:d})}}if(Array.isArray(n.allocations))for(const l of n.allocations){const c=String((l==null?void 0:l.batchId)||"").trim(),u=Number((l==null?void 0:l.qty)||0);c&&u&&a.push({batchId:c,qty:u})}if(a.length===0)return await Ti(Ge,async l=>{l.delete(e)}),{restored:0};const s=new Map;for(const l of a)s.set(l.batchId,Number((s.get(l.batchId)||0)+l.qty));let i=0;return await Ti(Ge,async l=>{const c=Array.from(s.entries()),u=c.map(([f])=>Kt(Ge,"inventory_batches",f)),d=await Promise.all(u.map(f=>l.get(f)));c.forEach(([f,h],A)=>{const m=d[A];if(!m.exists())return;const p=m.data(),g=Number((p==null?void 0:p.remaining)??0),x=Number((g+Number(h||0)).toFixed(3));l.update(u[A],{remaining:x}),i+=Number(h||0)}),l.delete(e)}),{restored:i}}var $te={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},cV=No.createContext&&No.createContext($te),s4e=["attr","size","title"];function i4e(t,e){if(t==null)return{};var r=o4e(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function o4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function pS(){return pS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pS.apply(this,arguments)}function uV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function gS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uV(Object(r),!0).forEach(function(n){l4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function l4e(t,e,r){return e=c4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c4e(t){var e=u4e(t,"string");return typeof e=="symbol"?e:e+""}function u4e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gte(t){return t&&t.map((e,r)=>No.createElement(e.tag,gS({key:r},e.attr),Gte(e.child)))}function d4e(t){return e=>No.createElement(f4e,pS({attr:gS({},t.attr)},e),Gte(t.child))}function f4e(t){var e=r=>{var{attr:n,size:a,title:s}=t,i=i4e(t,s4e),l=a||r.size||"1em",c;return r.className&&(c=r.className),t.className&&(c=(c?c+" ":"")+t.className),No.createElement("svg",pS({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,i,{className:c,style:gS(gS({color:t.color||r.color},r.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&No.createElement("title",null,s),t.children)};return cV!==void 0?No.createElement(cV.Consumer,null,r=>e(r)):e($te)}function A4e(t){return d4e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(t)}function Ic({onClick:t,loading:e,className:r=""}){return o.jsxs("button",{onClick:t,disabled:e,className:`flex items-center gap-2 px-3 py-1.5 rounded-2xl  border 
        bg-white hover:bg-gray-100 text-sm font-medium shadow-2xl
        disabled:opacity-50 disabled:cursor-not-allowed ${r}`,title:"Refrescar datos",children:[o.jsx(A4e,{className:`w-4 h-4 ${e?"animate-spin text-blue-500":""}`}),e?"Actualizando...":"Refrescar"]})}function jc(){const[t,e]=v.useState(0),r=v.useCallback(()=>e(n=>n+1),[]);return{refreshKey:t,refresh:r}}const Uo=t=>Math.round((Number(t)||0)*100)/100,cA=t=>Math.round((Number(t)||0)*1e3)/1e3,Eu=t=>Number(t??0).toFixed(2),uA=t=>Number(t??0).toFixed(3),dV=(t,e)=>{var a;const r=t.date??((a=t.timestamp)!=null&&a.toDate?br(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=t.type??"CONTADO";return Array.isArray(t.items)&&t.items.length>0?t.items.map((s,i)=>{const l=Number((s==null?void 0:s.qty)??0),c=Number((s==null?void 0:s.lineFinal)??0)||Math.max(0,Number((s==null?void 0:s.unitPrice)||0)*l-Number((s==null?void 0:s.discount)||0));return{id:`${e}#${i}`,productName:String((s==null?void 0:s.productName)??"(sin nombre)"),quantity:l,amount:Uo(c),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",type:n,measurement:String((s==null?void 0:s.measurement)??t.measurement??""),allocations:Array.isArray(s==null?void 0:s.allocations)?s.allocations:t.allocations,avgUnitCost:Number((s==null?void 0:s.avgUnitCost)??t.avgUnitCost??0),cogsAmount:Number((s==null?void 0:s.cogsAmount)??0)}}):[{id:e,productName:t.productName??"(sin nombre)",quantity:Number(t.quantity??0),amount:Number(t.amount??t.amountCharged??0),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",type:n,measurement:String(t.measurement??""),allocations:t.allocations,avgUnitCost:t.avgUnitCost,cogsAmount:t.cogsAmount}]};function h4e({role:t,roles:e}){const[r,n]=v.useState([]),[a,s]=v.useState([]),[i,l]=v.useState(null),[c,u]=v.useState(!0),[d,f]=v.useState(""),[h,A]=v.useState("ALL"),[m,p]=v.useState("ALL"),[g,x]=v.useState({}),[y,b]=v.useState(null),[w,j]=v.useState(0),[I,_]=v.useState(0),[S,E]=v.useState(""),[k,P]=v.useState(0),[T,O]=v.useState("0"),W=br(new Date,"yyyy-MM-dd"),[Ae,de]=v.useState(W),[fe,ge]=v.useState(W),[ee,Fe]=v.useState(!1),[Pe,F]=v.useState(!1),[Q,H]=v.useState(!1),[R,z]=v.useState(""),J=v.useRef(null),{refreshKey:D,refresh:U}=jc(),ne=e&&e.length?e:t,ve=U1e(ne,"bills","cerrarVentas"),L=zr(ne,"admin"),Ye=({title:xe,open:Qe,onToggle:dt,right:Bt})=>o.jsxs("button",{type:"button",onClick:dt,className:"w-full flex items-center justify-between gap-3 px-4 py-3 rounded-xl border bg-gray-50 hover:bg-gray-100 active:bg-gray-200",children:[o.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[o.jsx("span",{className:"font-semibold truncate",children:xe}),Bt?o.jsx("span",{className:"text-xs text-gray-600",children:Bt}):null]}),o.jsx("div",{className:"shrink-0 text-lg font-bold leading-none",children:Qe?"":"+"})]});v.useEffect(()=>{if(!Ae||!fe)return;u(!0);const xe=tr(pt(Ge,"salesV2"),sr("date",">=",Ae),sr("date","<=",fe)),Qe=qd(xe,dt=>{const Bt=[];dt.forEach(qe=>{const bt=dV(qe.data(),qe.id);Bt.push(...bt)}),n(Bt),u(!1)},dt=>{console.error("Error cargando ventas por periodo:",dt),n([]),u(!1)});return()=>Qe()},[Ae,fe,D]),v.useEffect(()=>{if(!Ae||!fe)return;const xe=tr(pt(Ge,"salesV2"),sr("status","==","FLOTANTE"),sr("date",">=",Ae),sr("date","<=",fe)),Qe=qd(xe,dt=>{const Bt=[];dt.forEach(qe=>{const bt=dV(qe.data(),qe.id);Bt.push(...bt)}),s(Bt)});return()=>Qe()},[Ae,fe,D]),v.useEffect(()=>{(async()=>{try{const xe=await Lt(pt(Ge,"users")),Qe={};xe.forEach(dt=>{const Bt=dt.data(),qe=String(Bt.email||"").trim().toLowerCase(),bt=String(Bt.name||"").trim();qe&&(Qe[qe]=bt||Bt.email||"")}),x(Qe)}catch(xe){console.error("Error cargando usuarios:",xe),x({})}})()},[]);const ie=xe=>{const Qe=String(xe||"").trim().toLowerCase();return g[Qe]||xe||""};v.useEffect(()=>{(async()=>{const Qe=tr(pt(Ge,"daily_closures"),sr("date","==",W)),dt=await Lt(Qe);if(dt.empty)l(null);else{const Bt=dt.docs[0];l({id:Bt.id,...Bt.data()})}})()},[W,D]);const Z=No.useMemo(()=>{let xe=[];if(h==="FLOTANTE"){const dt=[...r,...a],Bt=new Map;for(const qe of dt)qe.status==="FLOTANTE"&&Bt.set(qe.id,qe);xe=Array.from(Bt.values())}else if(h==="ALL"){const dt=[...r,...a],Bt=new Map;for(const qe of dt)Bt.set(qe.id,qe);xe=Array.from(Bt.values())}else xe=r.filter(dt=>dt.status==="PROCESADA");m!=="ALL"&&(xe=xe.filter(dt=>dt.type===m));const Qe=R.trim().toLowerCase();if(Qe){const dt=qe=>String(qe||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),Bt=dt(Qe);xe=xe.filter(qe=>dt(qe.productName).includes(Bt))}return xe},[h,r,a,R,m]),Oe=Uo(Z.reduce((xe,Qe)=>xe+(Qe.amount||0),0)),le=Uo(Z.reduce((xe,Qe)=>xe+Number(Qe.cogsAmount??0),0)),se=xe=>String(xe||"").trim().toLowerCase()!=="lb",Be=Z.filter(xe=>xe.type==="CONTADO"),je=Z.filter(xe=>xe.type==="CREDITO"),ot=cA(Be.filter(xe=>se(xe.measurement)).reduce((xe,Qe)=>xe+(Qe.quantity||0),0)),mt=cA(Be.filter(xe=>!se(xe.measurement)).reduce((xe,Qe)=>xe+(Qe.quantity||0),0)),ut=cA(je.filter(xe=>se(xe.measurement)).reduce((xe,Qe)=>xe+(Qe.quantity||0),0)),_e=cA(je.filter(xe=>!se(xe.measurement)).reduce((xe,Qe)=>xe+(Qe.quantity||0),0)),rt=Uo(Be.reduce((xe,Qe)=>xe+(Qe.amount||0),0)),we=Uo(je.reduce((xe,Qe)=>xe+(Qe.amount||0),0)),Ce=Uo(Be.reduce((xe,Qe)=>xe+Number(Qe.cogsAmount??0),0)),Ue=Uo(je.reduce((xe,Qe)=>xe+Number(Qe.cogsAmount??0),0)),Ve=Uo(rt-Ce),ue=Uo(we-Ue),ce=cA(ot+ut),Te=cA(mt+_e),Xe=Uo(rt+we),ft={};Z.forEach(xe=>{const Qe=xe.productName||"(sin nombre)";ft[Qe]||(ft[Qe]={totalQuantity:0,totalAmount:0}),ft[Qe].totalQuantity=cA(ft[Qe].totalQuantity+(xe.quantity||0)),ft[Qe].totalAmount=Uo(ft[Qe].totalAmount+(xe.amount||0))});const gt=Object.entries(ft).map(([xe,Qe])=>({productName:xe,totalQuantity:Qe.totalQuantity,totalAmount:Qe.totalAmount})),vt=async()=>{try{const xe=Z.filter(te=>te.status==="FLOTANTE"),Qe=xe.length>0?xe:r.filter(te=>te.status!=="PROCESADA");if(Qe.length===0){f("No hay ventas para procesar.");return}const dt={totalCharged:Uo(Qe.reduce((te,He)=>te+(He.amount||0),0)),totalSuggested:Uo(Qe.reduce((te,He)=>te+(He.amountSuggested||0),0)),totalUnits:cA(Qe.reduce((te,He)=>te+(He.quantity||0),0)),totalCOGS:Uo(Qe.reduce((te,He)=>te+Number(He.cogsAmount??0),0))},Bt=Uo(dt.totalCharged-dt.totalSuggested),qe=Uo(dt.totalCharged-dt.totalCOGS),bt=await wn(pt(Ge,"daily_closures"),{date:W,createdAt:or.now(),periodStart:Ae,periodEnd:fe,totalCharged:dt.totalCharged,totalSuggested:dt.totalSuggested,totalDifference:Bt,totalUnits:dt.totalUnits,totalCOGS:dt.totalCOGS,grossProfit:qe,products:Qe.map(te=>({productName:te.productName,quantity:te.quantity,amount:te.amount})),salesV2:Qe.map(te=>({id:te.id,productName:te.productName,quantity:te.quantity,amount:te.amount,amountSuggested:te.amountSuggested,userEmail:te.userEmail,clientName:te.clientName,amountReceived:te.amountReceived,change:te.change,status:te.status,cogsAmount:te.cogsAmount??0,avgUnitCost:te.avgUnitCost??null,allocations:te.allocations??[],date:te.date})),productSummary:Object.entries(Qe.reduce((te,He)=>{const re=He.productName||"(sin nombre)";return te[re]||(te[re]={totalQuantity:0,totalAmount:0}),te[re].totalQuantity=cA(te[re].totalQuantity+(He.quantity||0)),te[re].totalAmount=Uo(te[re].totalAmount+(He.amount||0)),te},{})).map(([te,He])=>({productName:te,totalQuantity:He.totalQuantity,totalAmount:He.totalAmount}))}),G=pg(Ge);Qe.forEach(te=>{G.update(Kt(Ge,"salesV2",te.id.split("#")[0]),{status:"PROCESADA",closureId:bt.id,closureDate:W})}),await G.commit(),f(` Cierre guardado. Ventas procesadas: ${Qe.length}.`)}catch(xe){console.error(xe),f(" Error al guardar el cierre.")}},At=async xe=>{if(!L){f(" No tienes permisos para revertir esta venta.");return}if(window.confirm("Revertir esta venta? Esta accin no se puede deshacer."))try{await rn(Kt(Ge,"salesV2",xe.split("#")[0]),{status:"FLOTANTE",closureId:null,closureDate:null}),f(" Venta revertida a FLOTANTE.")}catch(Qe){console.error(Qe),f(" No se pudo revertir la venta.")}},ye=xe=>{if(!L){f(" No tienes permisos para editar esta venta.");return}b(xe),j(xe.quantity),_(xe.amount),E(xe.clientName),P(xe.amountReceived),O(xe.change)},$e=async()=>{if(!L){f(" No tienes permisos para guardar cambios.");return}if(y)try{await rn(Kt(Ge,"salesV2",y.id.split("#")[0]),{quantity:w,amount:I,amountCharged:I,clientName:S,amountReceived:k,change:T}),b(null),f(" Venta actualizada.")}catch(xe){console.error(xe),f(" No se pudo actualizar la venta.")}},Ne=async xe=>{if(!L){f(" No tienes permisos para eliminar esta venta.");return}if(window.confirm("Eliminar esta venta? Se restaurar el stock en los lotes asignados."))try{const{restored:Qe}=await Hte(xe.split("#")[0]);f(` Venta eliminada. Stock restaurado: ${Number(Qe).toFixed(2)}.`)}catch(Qe){console.error(Qe),f(" No se pudo eliminar la venta.")}},ct=async()=>{if(J.current){J.current.classList.add("force-pdf-colors"),J.current.classList.add("pdf-print-mode");try{const Qe=(await gg(J.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),dt=new Br;dt.addImage(Qe,"PNG",10,10,190,0),dt.save(`cierre_${W}.pdf`)}finally{J.current.classList.remove("pdf-print-mode"),J.current.classList.remove("force-pdf-colors")}}};return o.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[o.jsx("style",{children:`
        .pdf-print-mode .pdf-desktop { display: block !important; }
        .pdf-print-mode .pdf-mobile  { display: none !important; }
      `}),o.jsxs("div",{className:"flex items-start justify-between gap-3 mb-4",children:[o.jsxs("h2",{className:"text-2xl font-bold",children:["Cierre de Ventas - ",Ae,"  ",fe]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx(Ic,{onClick:U})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx(Ye,{title:"Filtros",open:ee,onToggle:()=>Fe(xe=>!xe),right:o.jsxs("span",{className:"ml-1",children:[Ae,"  ",fe,h!=="ALL"?`  ${h}`:"",m!=="ALL"?`  ${m==="CREDITO"?"Crdito":"Cash"}`:"",R.trim()?`  "${R.trim()}"`:""]})}),ee&&o.jsx("div",{className:"mt-3 border rounded-xl p-3 bg-white",children:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3",children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Periodo desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-2 w-full",value:Ae,onChange:xe=>de(xe.target.value)})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-2 w-full",value:fe,onChange:xe=>ge(xe.target.value)})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Estado"}),o.jsxs("select",{className:"border rounded px-2 py-2 w-full",value:h,onChange:xe=>A(xe.target.value),children:[o.jsx("option",{value:"ALL",children:"Todas"}),o.jsx("option",{value:"FLOTANTE",children:"Venta Flotante"}),o.jsx("option",{value:"PROCESADA",children:"Venta Procesada"})]})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Tipo Operacin"}),o.jsxs("select",{className:"border rounded px-2 py-2 w-full",value:m,onChange:xe=>p(xe.target.value),children:[o.jsx("option",{value:"ALL",children:"Todos"}),o.jsx("option",{value:"CREDITO",children:"Crdito"}),o.jsx("option",{value:"CONTADO",children:"Cash"})]})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Producto"}),o.jsx("input",{type:"text",className:"border rounded px-2 py-2 w-full",placeholder:"Buscar por producto...",value:R,onChange:xe=>z(xe.target.value)})]})]})})]}),c?o.jsx("p",{children:"Cargando ventas..."}):o.jsxs("div",{ref:J,children:[o.jsx("div",{className:"pdf-desktop hidden md:block",children:o.jsxs("table",{className:"min-w-full border text-sm mb-4 shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Estado"}),o.jsx("th",{className:"border p-2",children:"Tipo"}),o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Libras - Unidad"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Fecha venta"}),o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Acciones"})]})}),o.jsxs("tbody",{children:[Z.map(xe=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${xe.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:xe.status})}),o.jsx("td",{className:"border p-1",children:xe.type==="CREDITO"?"Crdito":"Cash"}),o.jsx("td",{className:"border p-1",children:xe.productName}),o.jsx("td",{className:"border p-1",children:uA(xe.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",Eu(xe.amount)]}),o.jsx("td",{className:"border p-1",children:xe.date}),o.jsx("td",{className:"border p-1",children:ie(xe.userEmail)}),o.jsx("td",{className:"border p-1",children:xe.status==="FLOTANTE"?o.jsx("div",{className:"flex gap-2 justify-center",children:L?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>ye(xe),className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",children:"Editar"}),o.jsx("button",{onClick:()=>Ne(xe.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]}):o.jsx("span",{className:"text-gray-400 text-xs",children:""})}):xe.status==="PROCESADA"?o.jsx("div",{className:"flex gap-2 justify-center",children:L?o.jsx("button",{onClick:()=>At(xe.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Revertir"}):o.jsx("span",{className:"text-gray-400 text-xs",children:""})}):o.jsx("span",{className:"text-gray-400 text-xs",children:"No options"})})]},xe.id)),Z.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-3 text-center text-gray-500",children:"Sin ventas para mostrar."})})]})]})}),o.jsxs("div",{className:"pdf-mobile md:hidden mb-4",children:[o.jsx(Ye,{title:"Ventas",open:Pe,onToggle:()=>F(xe=>!xe),right:o.jsxs("span",{className:"ml-1",children:[Z.length,"  C$",Eu(Oe)]})}),Pe&&o.jsxs("div",{className:"mt-3 space-y-3",children:[Z.map(xe=>o.jsxs("details",{className:"border rounded-xl bg-white shadow-sm",children:[o.jsxs("summary",{className:"px-4 py-3 flex justify-between items-center cursor-pointer",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-semibold truncate",children:xe.productName}),o.jsx("div",{className:"text-xs text-gray-500",children:xe.date})]}),o.jsxs("div",{className:"text-right shrink-0 ml-3",children:[o.jsxs("div",{className:"font-bold",children:["C$",Eu(xe.amount)]}),o.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${xe.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:xe.status})]})]}),o.jsxs("div",{className:"px-4 pb-4 pt-2 text-sm space-y-2",children:[o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Cantidad"}),o.jsx("strong",{children:uA(xe.quantity)})]}),o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Tipo"}),o.jsx("strong",{children:xe.type==="CREDITO"?"Crdito":"Cash"})]}),o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Vendedor"}),o.jsx("strong",{className:"text-right break-all",children:ie(xe.userEmail)})]}),o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Cliente"}),o.jsx("strong",{className:"text-right break-all",children:xe.clientName||""})]}),o.jsx("div",{className:"pt-2",children:xe.status==="FLOTANTE"?o.jsx("div",{className:"flex gap-2",children:L?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>ye(xe),className:"flex-1 text-xs bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700",children:"Editar"}),o.jsx("button",{onClick:()=>Ne(xe.id),className:"flex-1 text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Eliminar"})]}):o.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):xe.status==="PROCESADA"?o.jsx("div",{className:"flex gap-2",children:L?o.jsx("button",{onClick:()=>At(xe.id),className:"w-full text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Revertir"}):o.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):o.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:"No options"})})]})]},xe.id)),Z.length===0&&o.jsx("div",{className:"text-center text-gray-500 text-sm py-6",children:"Sin ventas para mostrar."})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-6",children:[o.jsxs("div",{children:["Total libras Cash: ",o.jsx("strong",{children:uA(mt)})]}),o.jsxs("div",{children:["Total Unidades cash: ",o.jsx("strong",{children:uA(ot)})]}),o.jsxs("div",{children:["Total libras credito: ",o.jsx("strong",{children:uA(_e)})]}),o.jsxs("div",{children:["Total Unidades credito: ",o.jsx("strong",{children:uA(ut)})]}),o.jsxs("div",{children:["Total facturado Cash: ",o.jsxs("strong",{children:["C$",Eu(Ce)]})]}),o.jsxs("div",{children:["Total facturado credito:"," ",o.jsxs("strong",{children:["C$",Eu(Ue)]})]}),o.jsxs("div",{children:["Total venta Cash: ",o.jsxs("strong",{children:["C$",Eu(rt)]})]}),o.jsxs("div",{children:["Total venta Credito: ",o.jsxs("strong",{children:["C$",Eu(we)]})]}),o.jsxs("div",{children:["Utilidad bruta Cash: ",o.jsxs("strong",{children:["C$",Eu(Ve)]})]}),o.jsxs("div",{children:["Utilidad bruta credito:"," ",o.jsxs("strong",{children:["C$",Eu(ue)]})]}),o.jsxs("div",{children:["Total libras cash y credito: ",o.jsx("strong",{children:uA(Te)})]}),o.jsxs("div",{children:["Total unidades cash y credito:"," ",o.jsx("strong",{children:uA(ce)})]}),o.jsxs("div",{children:["Total ventas Cash y credito:"," ",o.jsxs("strong",{children:["C$",Eu(Xe)]})]}),o.jsxs("div",{children:["Total facturado a precio compra:"," ",o.jsxs("strong",{children:["C$",Eu(le)]})]})]}),o.jsxs("div",{className:"mt-4",children:[o.jsx(Ye,{title:"Consolidado por producto",open:Q,onToggle:()=>H(xe=>!xe),right:o.jsx("span",{className:"ml-1",children:gt.length})}),Q&&o.jsx("div",{className:"mt-3",children:o.jsxs("table",{className:"min-w-full border text-sm mb-2 shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),o.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),o.jsxs("tbody",{children:[gt.map(xe=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:xe.productName}),o.jsx("td",{className:"border p-1",children:uA(xe.totalQuantity)}),o.jsxs("td",{className:"border p-1",children:["C$",Eu(xe.totalAmount)]})]},xe.productName)),gt.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500",children:"Sin datos para consolidar."})})]})]})})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[o.jsx("button",{disabled:!ve,onClick:vt,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Cerrar ventas del da"}),o.jsx("button",{onClick:ct,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Descargar PDF"})]}),d&&o.jsx("p",{className:"mt-2 text-sm",children:d}),y&&o.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-4 space-y-3",children:[o.jsx("h4",{className:"font-semibold text-lg",children:"Editar venta"}),o.jsxs("div",{className:"text-sm text-gray-500",children:[y.productName,"  ",ie(y.userEmail)]}),o.jsx("label",{className:"text-sm",children:"Cantidad"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:w,onChange:xe=>j(parseFloat(xe.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Monto cobrado"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:I,onChange:xe=>_(parseFloat(xe.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Cliente"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:S,onChange:xe=>E(xe.target.value)}),o.jsx("label",{className:"text-sm",children:"Paga con"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:k,onChange:xe=>P(parseFloat(xe.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Vuelto"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:T,onChange:xe=>O(xe.target.value)}),o.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[o.jsx("button",{onClick:()=>b(null),className:"px-3 py-1 border rounded",children:"Cancelar"}),o.jsx("button",{onClick:$e,className:"px-3 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",children:"Guardar cambios"})]})]})})]})}const Su=t=>Number(t??0).toFixed(2),Jg=t=>Number(t??0).toFixed(3);function m4e(){var y,b,w,j;const t=async I=>{if(!window.confirm(`Eliminar el cierre del ${I.date}?`))return;const _=window.confirm("Tambin quieres reabrir (revertir a FLOTANTE) las ventas vinculadas a este cierre?");try{if(_){const S=await Lt(tr(pt(Ge,"salesV2"),sr("closureId","==",I.id)));if(!S.empty){const E=pg(Ge);S.forEach(k=>{E.update(Kt(Ge,"salesV2",k.id),{status:"FLOTANTE",closureId:null,closureDate:null})}),await E.commit()}}await yn(Kt(Ge,"daily_closures",I.id)),(u==null?void 0:u.id)===I.id&&d(null),await m(),h(` Cierre eliminado${_?" y ventas reabiertas.":"."}`)}catch(S){console.error(S),h(" No se pudo eliminar el cierre.")}},[e,r]=v.useState(br(qZ(new Date),"yyyy-MM-dd")),[n,a]=v.useState(br(new Date,"yyyy-MM-dd")),[s,i]=v.useState(!0),[l,c]=v.useState([]),[u,d]=v.useState(null),[f,h]=v.useState(""),A=v.useRef(null),m=async()=>{try{i(!0);const I=tr(pt(Ge,"daily_closures"),sr("date",">=",e),sr("date","<=",n)),_=await Lt(I),S=[];_.forEach(E=>S.push({id:E.id,...E.data()})),S.sort((E,k)=>E.date<k.date?1:E.date>k.date?-1:0),c(S)}catch(I){console.error(I),h(" Error cargando el historial.")}finally{i(!1)}};v.useEffect(()=>{m()},[]);const p=async I=>{I.preventDefault(),m()},g=v.useMemo(()=>{if(!u)return{units:0,sug:0,chg:0,diff:0,cogs:0,profit:0};const I=Number(u.totalUnits??0),_=Number(u.totalSuggested??0),S=Number(u.totalCharged??0),E=Number(u.totalDifference??(isFinite(S-_)?S-_:0)),k=Number(u.totalCOGS??0),P=Number(u.grossProfit??(isFinite(S-k)?S-k:0));return{units:I,sug:_,chg:S,diff:E,cogs:k,profit:P}},[u]),x=async()=>{if(!A.current||!u)return;const I=A.current;I.classList.add("force-pdf-colors");try{const[{default:_},{jsPDF:S}]=await Promise.all([LA(()=>Promise.resolve().then(()=>aD),void 0),LA(()=>Promise.resolve().then(()=>fk),void 0)]),k=(await _(I,{backgroundColor:"#ffffff",onclone:O=>{const W=O.defaultView;O.body.querySelectorAll("*").forEach(de=>{const fe=W.getComputedStyle(de);fe.color&&(de.style.color=fe.color),fe.backgroundColor&&fe.backgroundColor!=="rgba(0, 0, 0, 0)"&&(de.style.backgroundColor=fe.backgroundColor),fe.borderColor&&(de.style.borderColor=fe.borderColor)})}})).toDataURL("image/png"),{jsPDF:P}=await LA(async()=>{const{jsPDF:O}=await Promise.resolve().then(()=>fk);return{jsPDF:O}},void 0),T=new P;T.addImage(k,"PNG",10,10,190,0),T.save(`cierre_${u.date}.pdf`)}finally{I.classList.remove("force-pdf-colors")}};return o.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Histrico de cierres"}),o.jsxs("form",{onSubmit:p,className:"flex flex-wrap items-end gap-3 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:e,onChange:I=>r(I.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:n,onChange:I=>a(I.target.value)})]}),o.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Aplicar"})]}),s?o.jsx("p",{children:"Cargando..."}):l.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"Sin cierres en el rango seleccionado."}):o.jsxs("table",{className:"min-w-full text-sm mb-6  shadow-lg p-4 bg-white border-gray-100",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Fecha"}),o.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),o.jsx("th",{className:"border p-2",children:"Monto de venta"}),o.jsx("th",{className:"border p-2",children:"Monto al costo"}),o.jsx("th",{className:"border p-2",children:"Ganancia sin gastos"}),o.jsx("th",{className:"border p-2",children:"Acciones"})]})}),o.jsx("tbody",{children:l.map(I=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:I.date}),o.jsx("td",{className:"border p-1",children:Jg(I.totalUnits)}),o.jsxs("td",{className:"border p-1",children:["C$",Su(I.totalCharged)]}),o.jsxs("td",{className:"border p-1",children:["C$",Su(I.totalCOGS)]}),o.jsxs("td",{className:"border p-1",children:["C$",Su(I.grossProfit??Number(I.totalCharged??0)-Number(I.totalCOGS??0))]}),o.jsx("td",{className:"border p-1",children:o.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[o.jsx("button",{className:"text-xs bg-gray-800 text-white px-2 py-1 rounded hover:bg-black",onClick:()=>d(I),children:"Ver detalle"}),o.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>t(I),children:"Eliminar"})]})})]},I.id))})]}),u&&o.jsxs("div",{className:"mt-6 rounded-2xl shadow-lg p-4 bg-white border-solid border-2 border-gray-100",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2 ",children:[o.jsxs("h2",{className:"text-xl font-semibold",children:["Detalle ",u.date]}),o.jsx("button",{onClick:()=>d(null),className:"text-sm px-2 py-1 border rounded",children:"Cerrar"}),o.jsx("button",{onClick:x,className:"ml-auto bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Descargar PDF"})]}),o.jsxs("div",{ref:A,className:"space-y-4",children:[o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:o.jsxs("div",{children:["Total Libras/Unidades: ",o.jsx("strong",{children:Jg(g.units)})]})}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm",children:[o.jsxs("div",{children:["Monto al costo:"," ",o.jsxs("strong",{children:["C$",Su(g.cogs)]})]}),o.jsxs("div",{children:["Ganancia sin gastos:"," ",o.jsxs("strong",{children:["C$",Su(g.profit)]})]})]}),(y=u.salesV2)!=null&&y.length?o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Cantidad"}),o.jsx("th",{className:"border p-2",children:"Monto de ventas"}),o.jsx("th",{className:"border p-2",children:"Monto al costo"}),o.jsx("th",{className:"border p-2",children:"Fecha venta"}),o.jsx("th",{className:"border p-2",children:"Vendedor"})]})}),o.jsx("tbody",{children:u.salesV2.map((I,_)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:I.productName??"(sin nombre)"}),o.jsx("td",{className:"border p-1",children:Jg(I.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",Su(I.amount)]}),o.jsxs("td",{className:"border p-1",children:["C$",Su(I.cogsAmount)]}),o.jsx("td",{className:"border p-1",children:I.date??""}),o.jsx("td",{className:"border p-1",children:I.userEmail??""})]},_))})]})]}):(b=u.sales)!=null&&b.length?o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Cantidad"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Cliente"}),o.jsx("th",{className:"border p-2",children:"Paga con"}),o.jsx("th",{className:"border p-2",children:"Vuelto"})]})}),o.jsx("tbody",{children:u.sales.map((I,_)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:I.productName??"(sin nombre)"}),o.jsx("td",{className:"border p-1",children:Jg(I.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",Su(I.amount)]}),o.jsx("td",{className:"border p-1",children:I.userEmail??""}),o.jsx("td",{className:"border p-1",children:I.clientName??""}),o.jsxs("td",{className:"border p-1",children:["C$",Su(I.amountReceived)]}),o.jsx("td",{className:"border p-1",children:typeof I.change=="number"?Su(I.change):I.change??"0"})]},_))})]})]}):(w=u.products)!=null&&w.length?o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"font-semibold",children:"Productos en el cierre"}),o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Cantidad"}),o.jsx("th",{className:"border p-2",children:"Monto"})]})}),o.jsx("tbody",{children:u.products.map((I,_)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:I.productName}),o.jsx("td",{className:"border p-1",children:Jg(I.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",Su(I.amount)]})]},_))})]})]}):o.jsx("p",{className:"text-sm text-gray-500",children:"Sin detalle de ventas en este cierre."}),(j=u.productSummary)!=null&&j.length?o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"font-semibold",children:"Consolidado por producto"}),o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),o.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),o.jsx("tbody",{children:u.productSummary.map((I,_)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:I.productName}),o.jsx("td",{className:"border p-1",children:Jg(I.totalQuantity)}),o.jsxs("td",{className:"border p-1",children:["C$",Su(I.totalAmount)]})]},_))})]})]}):null]})]}),f&&o.jsx("p",{className:"mt-3 text-sm",children:f})]})}function p4e(){const[t,e]=v.useState(""),[r,n]=v.useState(""),[a,s]=v.useState(""),[i,l]=v.useState(!1),[c,u]=v.useState(["vendedor_pollo"]),[d,f]=v.useState(""),[h,A]=v.useState(""),[m,p]=v.useState([]),[g,x]=v.useState(!0),[y,b]=v.useState(null),[w,j]=v.useState(["vendedor_pollo"]),[I,_]=v.useState(""),[S,E]=v.useState(""),[k,P]=v.useState(!1),[T,O]=v.useState([]),W=R=>!R||R==="vendedor"?"vendedor_pollo":R==="admin"||R==="supervisor_pollo"||R==="contador"||R==="vendedor_pollo"||R==="vendedor_ropa"||R==="vendedor_dulces"?R:"vendedor_pollo",Ae=R=>R?Array.isArray(R)?R.map(z=>W(String(z))):[W(String(R))]:["vendedor_pollo"],de=async()=>{x(!0);const R=await Lt(pt(Ge,"users")),z=[];R.forEach(J=>{const D=J.data();z.push({id:J.id,email:D.email??"",name:D.name??"",roles:Ae(D.roles??D.role),sellerCandyId:D.sellerCandyId??""})}),p(z),x(!1)},fe=async()=>{try{const R=await Lt(pt(Ge,"sellers_candies")),z=[];R.forEach(J=>{const D=J.data();z.push({id:J.id,name:D.name??"(sin nombre)",branchLabel:D.branch??"",commissionPercent:Number(D.commissionPercent??0)})}),O(z)}catch(R){console.error("Error cargando sellers_candies:",R)}};v.useEffect(()=>{de(),fe()},[]);const ge=()=>{e(""),n(""),s(""),u(["vendedor_pollo"]),A("")},ee=async R=>{if(R.preventDefault(),f(""),y){if(a&&a.length>0&&a.length<6){f(" La contrasea debe tener al menos 6 caracteres.");return}}else if(a.length<6){f(" La contrasea debe tener al menos 6 caracteres.");return}if(!t.trim()){f(" El nombre es obligatorio.");return}try{if(y){const L=Kt(Ge,"users",y),Ye=w.length?w:["vendedor_pollo"],ie=Ye.includes("vendedor_dulces")&&(I||h)||"";if(await rn(L,{email:r,name:t.trim(),roles:Ye,role:Ye[0]||"vendedor_pollo",sellerCandyId:ie}),p(Z=>Z.map(Oe=>Oe.id===y?{...Oe,email:r,name:t.trim(),roles:Ye,sellerCandyId:ie}:Oe)),a&&a.length>=6)try{const Z=cT(),Oe=S||r;await npe(Z,Oe),f(` Usuario actualizado. Se envi correo de restablecimiento a ${Oe}`)}catch(Z){console.error("Error sending password reset:",Z),f(" Usuario actualizado. No se pudo enviar correo de restablecimiento.")}else f(" Usuario actualizado correctamente.");Pe();return}const z=$O(),J=HO(z.options,"Secondary"),D=cT(J),U=await ape(D,r,a),ne=c.length?c:["vendedor_pollo"],ve=ne.includes("vendedor_dulces")&&h||"";await SZ(Kt(pt(Ge,"users"),U.user.uid),{email:r,name:t.trim(),roles:ne,role:ne[0]||"vendedor_pollo",sellerCandyId:ve}),await ZO(D),await X0e(J),p(L=>[{id:U.user.uid,email:r,name:t.trim(),roles:ne,sellerCandyId:ve},...L]),f(" Usuario creado correctamente."),ge(),P(!1)}catch(z){console.error(z),f(" Error al crear el usuario: "+z.message)}},Fe=R=>{b(R.id),e(R.name||""),n(R.email||""),E(R.email||""),j(R.roles&&R.roles.length?R.roles:["vendedor_pollo"]),A(R.sellerCandyId||""),_(R.sellerCandyId||""),s(""),P(!0)},Pe=()=>{b(null),j(["vendedor_pollo"]),_(""),E(""),ge(),P(!1)},F=async R=>{confirm("Eliminar este usuario del listado?")&&(await yn(Kt(Ge,"users",R)),p(J=>J.filter(D=>D.id!==R)))},Q=R=>{const z=R==="admin"?"admin":R==="supervisor_pollo"?"supervisor_pollo":R==="vendedor_ropa"?"vendedor_ropa":R==="vendedor_dulces"?"vendedor_dulces":"vendedor_pollo",J=z==="admin"?"bg-blue-100 text-blue-700":z==="supervisor_pollo"?"bg-amber-100 text-amber-700":z==="vendedor_ropa"?"bg-indigo-100 text-indigo-700":z==="vendedor_dulces"?"bg-pink-100 text-pink-700":"bg-green-100 text-green-700";return o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${J}`,children:z})},H=R=>`${R.name}  ${R.branchLabel||"Sin sucursal"}  ${R.commissionPercent.toFixed(2)}%`;return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Usuarios"}),o.jsx("button",{className:"px-3 py-2 rounded bg-purple-600 text-white hover:bg-purple-700",onClick:()=>P(!0),type:"button",children:"Crear usuario"})]}),o.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Email"}),o.jsx("th",{className:"p-2 border",children:"Rol"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:g?o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Cargando"})}):m.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Sin usuarios"})}):m.map(R=>{const z=y===R.id,J=(z?w:R.roles).includes("vendedor_dulces");return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:R.name||""}),o.jsx("td",{className:"p-2 border",children:R.email}),o.jsx("td",{className:"p-2 border",children:z?o.jsxs("div",{className:"space-y-2 text-left",children:[["supervisor_pollo","admin","vendedor_pollo","vendedor_ropa","vendedor_dulces"].map(D=>o.jsxs("label",{className:"inline-flex items-center mr-3",children:[o.jsx("input",{type:"checkbox",className:"mr-2",checked:w.includes(D),onChange:()=>j(U=>U.includes(D)?U.filter(ne=>ne!==D):[...U,D])}),o.jsx("span",{className:"text-sm",children:D})]},D)),w.includes("vendedor_dulces")&&o.jsxs("select",{className:"w-full border p-1 rounded text-xs mt-1",value:I,onChange:D=>_(D.target.value),children:[o.jsx("option",{value:"",children:"Selecciona vendedor de dulces"}),T.map(D=>o.jsx("option",{value:D.id,children:H(D)},D.id))]})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"flex gap-2 justify-center",children:R.roles.map(D=>o.jsx("span",{children:Q(D)},D))}),J&&R.sellerCandyId&&o.jsx("div",{className:"mt-1 text-[11px] text-gray-500",children:"Vendedor asignado"})]})}),o.jsx("td",{className:"p-2 border space-x-2",children:o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Fe(R),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>F(R.id),children:"Eliminar"})]})})]},R.id)})})]})}),d&&o.jsx("p",{className:"text-sm mt-2",children:d}),k&&o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>P(!1)}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-lg max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:y?"Editar usuario":"Registrar nuevo usuario"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Pe,type:"button",children:"Cerrar"})]}),o.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre completo"}),o.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:t,onChange:R=>e(R.target.value),required:!0})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Correo electrnico"}),o.jsx("input",{type:"email",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:r,onChange:R=>n(R.target.value),required:!0})]}),o.jsxs("div",{className:"space-y-1 relative",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Contrasea (mnimo 6 caracteres)"}),o.jsx("input",{type:i?"text":"password",minLength:6,className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400 pr-10",value:a,onChange:R=>s(R.target.value),required:!y}),o.jsx("button",{type:"button",className:"absolute right-2 top-8 text-sm text-gray-600 hover:text-gray-800",onClick:()=>l(R=>!R),children:i?"":""})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Roles"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:["supervisor_pollo","contador","admin","vendedor_pollo","vendedor_ropa","vendedor_dulces"].map(R=>o.jsxs("label",{className:"inline-flex items-center mr-3",children:[o.jsx("input",{type:"checkbox",className:"mr-2",checked:y?w.includes(R):c.includes(R),onChange:()=>{y?j(z=>z.includes(R)?z.filter(J=>J!==R):[...z,R]):u(z=>z.includes(R)?z.filter(J=>J!==R):[...z,R])}}),o.jsx("span",{className:"text-sm",children:R})]},R))})]}),(y?w.includes("vendedor_dulces"):c.includes("vendedor_dulces"))&&o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Vendedor (dulces)"}),o.jsxs("select",{className:"w-full border p-2 rounded text-sm",value:h,onChange:R=>A(R.target.value),children:[o.jsx("option",{value:"",children:"Selecciona vendedor de dulces asignado"}),T.map(R=>o.jsx("option",{value:R.id,children:H(R)},R.id))]})]}),o.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:Pe,children:"Cancelar"}),o.jsx("button",{className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:y?"Guardar cambios":"Crear usuario"})]})]}),d&&o.jsx("p",{className:"text-sm mt-2",children:d})]})]})]})}const fV=t=>`C$${(Number(t)||0).toFixed(2)}`;function g4e(){const[t,e]=v.useState(""),[r,n]=v.useState(0),[a,s]=v.useState(0),[i,l]=v.useState(""),[c,u]=v.useState(""),[d,f]=v.useState(""),[h,A]=v.useState([]),[m,p]=v.useState(!0),[g,x]=v.useState(!1),[y,b]=v.useState(null),[w,j]=v.useState(""),[I,_]=v.useState(""),[S,E]=v.useState(""),[k,P]=v.useState(0),[T,O]=v.useState(0),[W,Ae]=v.useState(!1),de=async()=>{p(!0);const H=await Lt(pt(Ge,"products")),R=[];H.forEach(z=>{const J=z.data();R.push({id:z.id,name:J.name??"",price:Number(J.price??0),providerPrice:Number(J.providerPrice??0),category:J.category??"",measurement:J.measurement??"",active:J.active!==!1})}),A(R),p(!1)};v.useEffect(()=>{de()},[]);const fe=async H=>{if(H.preventDefault(),l(""),!t||r<=0||!d){l(" Completa nombre, precio vlido y unidad de medida");return}try{const R={name:t,price:parseFloat(r.toFixed(2)),providerPrice:parseFloat((a||0).toFixed(2)),category:c,measurement:d,active:!0},z=await wn(pt(Ge,"products"),R);A(J=>[{id:z.id,...R},...J]),l(" Producto registrado con exito."),e(""),n(0),s(0),f(""),u(""),Ae(!1)}catch(R){l(" Error: "+R.message)}},ge=H=>{b(H.id),j(H.name),_(H.category),E(H.measurement),P(H.price),O(H.providerPrice||0)},ee=()=>{b(null),j(""),_(""),E(""),P(0)},Fe=async()=>{if(!y)return;const H=Kt(Ge,"products",y);await rn(H,{name:w,category:I,measurement:S,price:parseFloat((k||0).toFixed(2)),providerPrice:parseFloat((T||0).toFixed(2))}),A(R=>R.map(z=>z.id===y?{...z,name:w,category:I,measurement:S,price:parseFloat((k||0).toFixed(2)),providerPrice:parseFloat((T||0).toFixed(2))}:z)),ee()},Pe=async H=>{const R=Kt(Ge,"products",H.id),z=H.active===!1;await rn(R,{active:z}),A(J=>J.map(D=>D.id===H.id?{...D,active:z}:D))},F=async H=>{const R=tr(pt(Ge,"inventory_batches"),sr("productId","==",H),_Z(1));if(!(await Lt(R)).empty){alert(`No se puede eliminar: hay lotes asociados a este producto.
Sugerencia: desactvalo para ocultarlo.`);return}confirm("Eliminar este producto definitivamente?")&&(await yn(Kt(Ge,"products",H)),A(D=>D.filter(U=>U.id!==H)))},Q=g?h:h.filter(H=>H.active!==!1);return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Productos"}),o.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{l(""),Ae(!0)},children:[o.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]}),W&&o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>Ae(!1)}),o.jsxs("div",{className:"relative z-10 w-[95%] max-w-lg bg-white rounded-lg shadow-2xl border p-5",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("h3",{className:"text-lg font-bold text-green-700 flex items-center gap-2",children:[o.jsx("span",{className:"inline-block bg-green-100 text-green-700 rounded-full p-2",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Registrar producto"]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ae(!1),children:"Cerrar"})]}),o.jsxs("form",{onSubmit:fe,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Categora"}),o.jsxs("select",{value:c,onChange:H=>u(H.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[o.jsx("option",{value:"",children:"Selecciona"}),o.jsx("option",{value:"pollo",children:"Pollo"}),o.jsx("option",{value:"cerdo",children:"Cerdo"}),o.jsx("option",{value:"huevo",children:"Huevos"}),o.jsx("option",{value:"ropa",children:"Ropa"}),o.jsx("option",{value:"otros",children:"Otros"})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre del producto"}),o.jsx("input",{type:"text",className:"w-full border p-2 rounded",value:t,onChange:H=>e(H.target.value)})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Tipo de unidad de medida"}),o.jsxs("select",{value:d,onChange:H=>f(H.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[o.jsx("option",{value:"",children:"Selecciona"}),o.jsx("option",{value:"lb",children:"Libra"}),o.jsx("option",{value:"kg",children:"Kilogramo"}),o.jsx("option",{value:"unidad",children:"Unidad"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Precio proveedor (ej: 40.00)"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border p-2 rounded",value:Number.isNaN(a)?"":a,onChange:H=>s(parseFloat(H.target.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Precio por unidad (ej: 55.50)"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border p-2 rounded",value:Number.isNaN(r)?"":r,onChange:H=>n(parseFloat(H.target.value)),onFocus:H=>H.target.value==="0"?n(NaN):null})]}),o.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",children:"Agregar producto"}),i&&o.jsx("p",{className:"text-sm mt-2",children:i})]})]})]}),o.jsxs("div",{className:"flex items-center justify-between mt-6 mb-2",children:[o.jsx("h3",{className:"text-lg font-semibold p-2",children:"Productos"}),o.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[o.jsx("input",{type:"checkbox",checked:g,onChange:H=>x(H.target.checked)}),"Mostrar inactivos"]})]}),o.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Unidad"}),o.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border",children:"Precio"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:m?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):Q.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin productos"})}):Q.map(H=>{const R=y===H.id,z=H.active!==!1;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:R?o.jsx("input",{className:"w-full border p-1 rounded",value:w,onChange:J=>j(J.target.value)}):H.name}),o.jsx("td",{className:"p-2 border",children:R?o.jsxs("select",{className:"w-full border p-1 rounded",value:I,onChange:J=>_(J.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),o.jsx("option",{value:"pollo",children:"Pollo"}),o.jsx("option",{value:"cerdo",children:"Cerdo"}),o.jsx("option",{value:"huevo",children:"Huevos"}),o.jsx("option",{value:"ropa",children:"Ropa"}),o.jsx("option",{value:"otros",children:"Otros"})]}):H.category}),o.jsx("td",{className:"p-2 border",children:R?o.jsxs("select",{className:"w-full border p-1 rounded",value:S,onChange:J=>E(J.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),o.jsx("option",{value:"lb",children:"Libra"}),o.jsx("option",{value:"kg",children:"Kilogramo"}),o.jsx("option",{value:"unidad",children:"Unidad"})]}):H.measurement}),o.jsx("td",{className:"p-2 border",children:R?o.jsx("input",{type:"number",step:"0.01",className:"w-full border p-1 rounded text-right",value:Number.isNaN(T)?"":T,onChange:J=>O(parseFloat(J.target.value))}):fV(H.providerPrice||0)}),o.jsx("td",{className:"p-2 border",children:R?o.jsx("input",{type:"number",step:"0.01",className:"w-full border p-1 rounded text-right",value:Number.isNaN(k)?"":k,onChange:J=>P(parseFloat(J.target.value))}):fV(H.price)}),o.jsx("td",{className:"p-2 border",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${z?"bg-green-100 text-green-700":"bg-gray-200 text-gray-700"}`,children:z?"Activo":"Inactivo"})}),o.jsx("td",{className:"p-2 border space-x-2",children:R?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Fe,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:ee,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>ge(H),children:"Editar"}),o.jsx("button",{className:`px-2 py-1 rounded ${z?"bg-gray-600 hover:bg-gray-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,onClick:()=>Pe(H),children:z?"Desactivar":"Activar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>F(H.id),children:"Eliminar"})]})})]},H.id)})})]})})]})}const Qo=[];for(let t=0;t<256;++t)Qo.push((t+256).toString(16).slice(1));function x4e(t,e=0){return(Qo[t[e+0]]+Qo[t[e+1]]+Qo[t[e+2]]+Qo[t[e+3]]+"-"+Qo[t[e+4]]+Qo[t[e+5]]+"-"+Qo[t[e+6]]+Qo[t[e+7]]+"-"+Qo[t[e+8]]+Qo[t[e+9]]+"-"+Qo[t[e+10]]+Qo[t[e+11]]+Qo[t[e+12]]+Qo[t[e+13]]+Qo[t[e+14]]+Qo[t[e+15]]).toLowerCase()}let z5;const v4e=new Uint8Array(16);function y4e(){if(!z5){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");z5=crypto.getRandomValues.bind(crypto)}return z5(v4e)}const b4e=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),AV={randomUUID:b4e};function w4e(t,e,r){var a;if(AV.randomUUID&&!t)return AV.randomUUID();t=t||{};const n=t.random??((a=t.rng)==null?void 0:a.call(t))??y4e();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,x4e(n)}async function N4e(t,e,r,n=!1){if(r<=0)return{allocations:[],avgUnitCost:0,cogsAmount:0};const a=pt(t,"inventory_batches"),s=tr(a,sr("productName","==",e)),c=(await Lt(s)).docs.map(u=>({id:u.id,data:u.data()})).sort((u,d)=>{var p,g;const f=u.data.date??"",h=d.data.date??"";if(f!==h)return f<h?-1:1;const A=((p=u.data.createdAt)==null?void 0:p.seconds)??0,m=((g=d.data.createdAt)==null?void 0:g.seconds)??0;return A-m}).map(u=>Kt(t,"inventory_batches",u.id));return Ti(t,async u=>{let d=Number(r);const f=[],h=await Promise.all(c.map(g=>u.get(g)));for(let g=0;g<c.length&&d>0;g++){const x=c[g],y=h[g];if(!y.exists())continue;const b=y.data(),w=Number(b.quantity??0),j=Number(b.remaining??w??0),I=Number(b.purchasePrice??0);if(j<=0)continue;const _=Math.min(j,d),S=Number((j-_).toFixed(3));u.update(x,{remaining:S}),f.push({batchId:x.id,qty:_,unitCost:I,lineCost:Number((_*I).toFixed(2))}),d=Number((d-_).toFixed(3))}if(d>0&&!n)throw new Error(`Stock insuficiente para "${e}". Faltan ${d} unidades.`);const A=Number(f.reduce((g,x)=>g+x.lineCost,0).toFixed(2)),m=f.reduce((g,x)=>g+x.qty,0),p=m>0?Number((A/m).toFixed(4)):0;return{allocations:f,avgUnitCost:p,cogsAmount:A}})}const Kte=3,C4e=.5*10**-Kte;function Ja(t){const e=Number(t??0);return Number(e.toFixed(Kte))}function W5(t,e){return Ja((t??0)+(e??0))}function _C(t,e){return Ja(t)+C4e>=Ja(e)}async function _4e(t,e){const r=await Lt(pt(Ge,"inventory_batches")),n=t.trim().toLowerCase();let a=0;for(const s of r.docs){const i=s.data();(i.productName||"").trim().toLowerCase()===n&&i.productId!==e&&(await rn(Kt(Ge,"inventory_batches",s.id),{productId:e}),a++)}return a}const Wh=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function hV({user:t,role:e,roles:r}){r&&r.length;const[n,a]=v.useState([]),[s,i]=v.useState([]),[l,c]=v.useState(""),[u,d]=v.useState(br(new Date,"yyyy-MM-dd")),[f,h]=v.useState(""),[A,m]=v.useState(""),[p,g]=v.useState([]),[x,y]=v.useState(0),[b,w]=v.useState(0),[j,I]=v.useState("0"),[_,S]=v.useState(""),[E,k]=v.useState(!1),[P,T]=v.useState({}),O=we=>Math.round(we*100)/100,W=we=>Ja(we).toFixed(3),[Ae,de]=v.useState("CONTADO"),[fe,ge]=v.useState([]),[ee,Fe]=v.useState(""),[Pe,F]=v.useState(0),Q=we=>{de(we),we==="CREDITO"?(h(""),w(0),I("0.00")):(Fe(""),F(0))},H=we=>{const Ce=Number(we.specialPrice||0);return Ce>0?Ce:Number(we.price||0)},R=async we=>{if(!we)return 0;const Ce=tr(pt(Ge,"inventory_batches"),sr("productId","==",we)),Ue=await Lt(Ce);let Ve=0;return Ue.forEach(ue=>{const ce=ue.data();Ve=W5(Ve,Number(ce.remaining||0))}),Ja(Ve)},z=async we=>{if(!we)return 0;const Ce=await Lt(pt(Ge,"inventory_batches"));let Ue=0;return Ce.forEach(Ve=>{const ue=Ve.data();(ue.productName||"").trim().toLowerCase()===we.trim().toLowerCase()&&(Ue=W5(Ue,Number(ue.remaining||0)))}),Ja(Ue)};v.useEffect(()=>{(async()=>{const we=await Lt(pt(Ge,"products")),Ce=[];we.forEach(Ue=>{const Ve=Ue.data();(Ve==null?void 0:Ve.active)!==!1&&Ce.push({id:Ue.id,productName:Ve.name??Ve.productName??"(sin nombre)",price:Number(Ve.price??0),measurement:Ve.measurement??"(sin unidad)",category:Ve.category??"(sin categora)"})}),a(Ce)})()},[]),v.useEffect(()=>{(async()=>{const we=await Lt(pt(Ge,"inventory_batches")),Ce={};we.forEach(Ue=>{const Ve=Ue.data(),ue=Ve.productId,ce=Number(Ve.remaining||0);ue&&(Ce[ue]=W5(Ce[ue]||0,ce))}),Object.keys(Ce).forEach(Ue=>Ce[Ue]=Ja(Ce[Ue])),T(Ce)})()},[]),v.useEffect(()=>{(async()=>{const we=await Lt(pt(Ge,"users")),Ce=[];we.forEach(Ue=>{const Ve=Ue.data();Ce.push({id:Ue.id,email:Ve.email??"(sin email)",role:Ve.role??"USER"})}),i(Ce)})()},[]);const J=async()=>{if(!l)return;const we=n.find(Ue=>Ue.id===l);if(!we)return;if(p.some(Ue=>Ue.productId===we.id)){c("");return}const Ce=await R(we.id);g(Ue=>[...Ue,{productId:we.id,productName:we.productName,measurement:we.measurement,price:Number(we.price||0),specialPrice:0,stock:Ce,qty:0,discount:0}]),c("")},D=async we=>{if(!we)return;const Ce=n.find(Ve=>Ve.id===we);if(!Ce||p.some(Ve=>Ve.productId===Ce.id))return;const Ue=await R(Ce.id);g(Ve=>[...Ve,{productId:Ce.id,productName:Ce.productName,measurement:Ce.measurement,price:Number(Ce.price||0),specialPrice:0,stock:Ue,qty:0,discount:0}]),c("")},U=we=>{g(Ce=>Ce.filter(Ue=>Ue.productId!==we))},ne=async(we,Ce)=>{g(Ue=>Ue.map(Ve=>{if(Ve.productId!==we)return Ve;const ue=(Ve.measurement||"").toLowerCase()!=="lb",ce=Ce===""?0:Number(Ce);let Te=ue?Math.max(0,Math.round(ce)):Ja(ce);const Xe=ue?Math.max(0,Math.floor(Number(Ve.stock||0))):Ja(Number(Ve.stock||0));return Te>Xe&&(Te=Xe,S(` Cantidad limitada a existencias (${Xe})`)),{...Ve,qty:Te}}))},ve=(we,Ce)=>{g(Ue=>Ue.map(Ve=>{if(Ve.productId!==we)return Ve;const ue=(Ce||"").replace(",","."),ce=ue.trim()===""?0:Number(ue),Te=Number.isFinite(ce)?Math.max(0,O(ce)):0;return{...Ve,specialPrice:Te}}))},L=(we,Ce)=>{g(Ue=>Ue.map(Ve=>{if(Ve.productId!==we)return Ve;const ue=Math.max(0,Math.floor(Number(Ce||0)));return{...Ve,discount:ue}}))},Ye=v.useMemo(()=>{let we=0;for(const Ce of p){const Ue=H(Ce),Ve=Number(Ue||0)*Number(Ce.qty||0),ue=Math.max(0,Ve-Math.max(0,Number(Ce.discount||0)));we+=ue}return O(we)},[p]);v.useEffect(()=>{y(Ye)},[Ye]),v.useEffect(()=>{const we=Number(b)||0,Ce=Number(x)||0;I((we-Ce).toFixed(2))},[b,x]);const ie=we=>{we.key===","&&(we.preventDefault(),we.target.value+=".")},[Z,Oe]=v.useState(!1);v.useEffect(()=>{var Ue;const we=window.matchMedia("(max-width: 900px)"),Ce=()=>Oe(we.matches);return Ce(),(Ue=we.addEventListener)==null||Ue.call(we,"change",Ce),()=>{var Ve;return(Ve=we.removeEventListener)==null?void 0:Ve.call(we,"change",Ce)}},[]),v.useEffect(()=>{(async()=>{try{const we=await Lt(pt(Ge,"customers_pollo")),Ce=[];we.forEach(Ue=>{const Ve=Ue.data();Ce.push({id:Ue.id,name:Ve.name??"",phone:Ve.phone??"",status:Ve.status??"ACTIVO",creditLimit:Number(Ve.creditLimit??0),vendorId:Ve.vendorId??"",vendorName:Ve.vendorName??"",balance:0})});for(const Ue of Ce)try{const Ve=tr(pt(Ge,"ar_movements_pollo"),sr("customerId","==",Ue.id)),ue=await Lt(Ve);let ce=0;ue.forEach(Xe=>{ce+=Number(Xe.data().amount||0)});const Te=Number(Ue.initialDebt||0);Ue.balance=ce+Te}catch{Ue.balance=0}Ce.sort((Ue,Ve)=>(Ue.name||"").localeCompare(Ve.name||"")),ge(Ce)}catch(we){console.error("Error cargando customers_pollo:",we),ge([])}})()},[]);const le=v.useMemo(()=>fe.find(we=>we.id===ee)||null,[fe,ee]),se=Number((le==null?void 0:le.balance)||0),Be=Ae==="CREDITO"?Math.max(0,Number(se||0)+Math.max(0,Number(x||0))):0;v.useEffect(()=>{Ae==="CREDITO"&&F(we=>Math.min(Math.max(0,Number(we||0)),Be))},[Ae,Be]),v.useEffect(()=>{Ae==="CREDITO"&&(w(Number(Pe||0)),I("0.00"))},[Ae,Pe]);const je=Ae==="CREDITO"?se+Math.max(0,Number(x||0))-Math.max(0,Number(Pe||0)):0,ot=async()=>{if(p.length===0)return"Agrega al menos un producto.";for(const we of p){if(!we.qty||we.qty<=0)return`Cantidad invlida para "${we.productName}".`;const Ce=await R(we.productId);if(!_C(Ce,we.qty)){const Ue=await z(we.productName);if(_C(Ue,0)&&!_C(Ce,0)){const Ve=await _4e(we.productName,we.productId),ue=await R(we.productId);if(!_C(ue,we.qty))return`Stock insuficiente tras corregir ${Ve} lote(s) para "${we.productName}".`}else return`Stock insuficiente para "${we.productName}". Disponible: ${Ce}`}}return null},mt=async we=>{var Ue,Ve;we.preventDefault(),S("");const Ce=await ot();if(Ce){S(" "+Ce);return}try{k(!0);const ue=[];if(Ae==="CONTADO"){if(!f.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!ee)return"Selecciona un cliente (crdito).";if(Pe<0)return"El pago inicial no puede ser negativo.";if(Pe>x)return"El pago inicial no puede superar el total.";if((le==null?void 0:le.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede fiar."}for(const At of p){const ye=At.qty,{allocations:$e,avgUnitCost:Ne,cogsAmount:ct}=await N4e(Ge,At.productName,ye,!1),xe=H(At),Qe=Number(xe||0)*Number(ye||0),dt=Math.max(0,Number(At.discount||0)),Bt=Math.max(0,Qe-dt);ue.push({productId:At.productId,productName:At.productName,measurement:At.measurement,unitPrice:Number(xe||0),regularPrice:Number(At.price||0),specialPrice:Number(At.specialPrice||0)>0?Number(At.specialPrice):null,qty:ye,discount:dt,lineTotal:O(Qe),lineFinal:O(Bt),allocations:$e,avgUnitCost:Ne,cogsAmount:ct})}const ce=ue.reduce((At,ye)=>At+ye.lineFinal,0),Te=ue.reduce((At,ye)=>At+Number(ye.qty||0),0),Xe=Number(Ae==="CREDITO"?Pe||0:b||0),ft=Ae==="CREDITO"?"0.00":j,gt={id:w4e(),quantity:Te,amount:ce,amountCharged:ce,timestamp:or.now(),date:u,userEmail:(t==null?void 0:t.email)??((Ue=s[0])==null?void 0:Ue.email)??"sin usuario",vendor:e??((Ve=s[0])==null?void 0:Ve.role)??"sin usuario",status:"FLOTANTE",items:ue,itemsTotal:ce,type:Ae,amountReceived:Xe,change:ft};if(Ae==="CONTADO"){if(!f.trim()){S(" Ingresa el nombre del cliente (contado).");return}}else{if(!ee){S(" Selecciona un cliente (crdito).");return}if(Pe<0){S(" El pago inicial no puede ser negativo.");return}if(Pe>x){S(" El pago inicial no puede superar el total.");return}if((le==null?void 0:le.status)==="BLOQUEADO"){S(" El cliente est BLOQUEADO. No se puede fiar.");return}const At=Number((le==null?void 0:le.creditLimit)||0);if(At>0&&je>At){S(` Supera el lmite de crdito (C$ ${At.toFixed(2)}).`);return}}const vt=await wn(pt(Ge,"salesV2"),gt);if(Ae==="CREDITO"&&ee){const At={customerId:ee,date:u,createdAt:or.now(),ref:{saleId:vt.id}};await wn(pt(Ge,"ar_movements_pollo"),{...At,type:"CARGO",amount:Number(ce)||0}),Number(Pe)>0&&await wn(pt(Ge,"ar_movements_pollo"),{...At,type:"ABONO",amount:-Number(Pe)}),ge(ye=>ye.map($e=>$e.id===ee?{...$e,balance:Number($e.balance||0)+Number(ce||0)-Number(Pe||0)}:$e))}S(" Venta registrada y asignada a inventario (FIFO)."),g([]),c(""),y(0),w(0),I("0"),h(""),d(br(new Date,"yyyy-MM-dd")),Fe(""),F(0),de("CONTADO")}catch(ue){console.error(ue),S(` ${(ue==null?void 0:ue.message)||"Error al registrar la venta."}`)}finally{k(!1)}},ut=v.useMemo(()=>new Set(p.map(we=>we.productId)),[p]),_e=v.useMemo(()=>n.filter(we=>(P[we.id]||0)>0),[n,P]),rt=v.useMemo(()=>{const we=String(A||"").trim().toLowerCase();return we?_e.filter(Ce=>`${Ce.productName||""}`.toLowerCase().includes(we)):_e},[_e,A]);return Z?o.jsx("div",{className:"w-full max-w-lg mx-auto p-3",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow p-3 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"font-bold text-lg text-blue-700",children:"Registrar venta (Pollo)"}),o.jsx("input",{type:"date",className:"text-sm text-gray-700 border rounded px-2 py-1",value:u,onChange:we=>d(we.target.value),"aria-label":"Fecha de la venta"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-semibold",children:"Tipo de cliente"}),o.jsxs("select",{className:"w-full border rounded px-2 py-2",value:Ae,onChange:we=>Q(we.target.value),children:[o.jsx("option",{value:"CONTADO",children:"Contado"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),Ae==="CONTADO"?o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-semibold",children:"Cliente (Contado)"}),o.jsx("input",{className:"w-full border rounded px-2 py-2",value:f,onChange:we=>h(we.target.value),placeholder:"Ej: Cliente Mostrador"})]}):o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-semibold",children:"Cliente (Crdito)"}),o.jsxs("select",{className:"w-full border rounded px-2 py-2",value:ee,onChange:we=>Fe(we.target.value),children:[o.jsx("option",{value:"",children:"Selecciona un cliente"}),fe.map(we=>o.jsxs("option",{value:we.status==="ACTIVO"?we.id:"",disabled:we.status==="BLOQUEADO",children:[we.name,"  Saldo: ",Wh(we.balance||0)]},we.id))]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-base font-semibold",children:Wh(se)})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),o.jsx("div",{className:"text-base font-semibold",children:Wh(je)})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-semibold",children:"Pago inicial"}),o.jsx("input",{className:"w-full border rounded px-2 py-2",type:"number",step:"0.01",inputMode:"decimal",max:Be,value:Pe===0?"":Pe,onChange:we=>{const Ce=Math.max(0,Number(we.target.value||0)),Ue=Math.min(Ce,Be);F(Ue)},placeholder:"0.00"}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Mximo: ",Wh(Be)]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-semibold",children:"Producto"}),o.jsx("input",{className:"w-full border rounded px-2 py-2 mb-2",placeholder:"Buscar producto por nombre...",value:A,onChange:we=>m(we.target.value)}),o.jsx("div",{className:"flex gap-2",children:o.jsxs("select",{className:"flex-1 border rounded px-2 py-2",value:l,onChange:async we=>{const Ce=we.target.value;c(Ce),await D(Ce)},children:[o.jsx("option",{value:"",disabled:!0,children:"Selecciona un producto"}),rt.map(we=>o.jsxs("option",{value:we.id,disabled:ut.has(we.id),children:[we.productName,"  ",we.measurement,"  C$ ",we.price]},we.id))]})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"text-sm font-semibold",children:"Items"}),p.length===0?o.jsx("div",{className:"text-gray-500",children:"Agrega productos al carrito."}):o.jsx("div",{className:"space-y-2",children:p.map(we=>{const Ce=H(we),Ue=Number(Ce||0)*Number(we.qty||0),Ve=Math.max(0,Ue-Math.max(0,Number(we.discount||0))),ue=(we.measurement||"").toLowerCase()!=="lb";return o.jsxs("div",{className:"border rounded p-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("div",{className:"font-semibold",children:we.productName}),o.jsxs("div",{className:"text-sm",children:["C$ ",O(Ce).toFixed(2)]})]}),o.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-2 items-center",children:[o.jsx("input",{className:"border rounded px-2 py-1 text-right",inputMode:ue?"numeric":"decimal",step:ue?1:.01,value:we.qty===0?"":we.qty,onChange:ce=>ne(we.productId,ce.target.value),placeholder:ue?"Unid":"Libras",title:ue?"Unidades":"Libras"}),o.jsx("input",{className:"border rounded px-1 py-1 text-right",inputMode:"numeric",value:we.discount===0?"":we.discount,onChange:ce=>L(we.productId,ce.target.value),placeholder:"Descuento",title:"Descuento (C$)"}),o.jsx("input",{className:"border rounded px-2 py-1 text-right",inputMode:"decimal",value:we.specialPrice===0?"":we.specialPrice,onChange:ce=>ve(we.productId,ce.target.value),placeholder:"Sugerido",title:"Precio sugerido (opcional)"})]}),o.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm text-gray-600",children:["Exist:"," ",Ja(Number(we.stock)-Number(we.qty||0)).toFixed(3)]}),o.jsxs("div",{className:"font-semibold",children:["C$ ",O(Ve).toFixed(2)]})]}),o.jsx("div",{className:"mt-2 text-right",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 text-red-600",onClick:()=>U(we.productId),children:"Quitar"})})]},we.productId)})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"text-sm font-semibold",children:"Monto total"}),o.jsxs("div",{className:"text-xl font-bold",children:["C$ ",x.toFixed(2)]})]}),Ae==="CONTADO"&&o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx("input",{className:"border rounded px-2 py-2",inputMode:"decimal",value:b===0?"":b,onChange:we=>w(Number(we.target.value||0)),placeholder:"Monto recibido"}),o.jsxs("div",{className:"border rounded px-2 py-2 bg-gray-100",children:["Cambio: C$ ",j]})]}),o.jsx("button",{onClick:mt,disabled:p.length===0||E,className:"w-full bg-blue-600 text-white px-4 py-2 rounded",children:E?"Guardando...":"Guardar venta"}),_&&o.jsx("div",{className:`text-sm ${_.startsWith("")?"text-green-600":_.startsWith("")?"text-yellow-600":"text-red-600"}`,children:_})]})}):o.jsxs("div",{className:"relative",children:[o.jsxs("form",{onSubmit:mt,className:`w-full mx-auto bg-white rounded-2xl shadow-2xl\r
                 p-4 sm:p-6 md:p-8\r
                 max-w-5xl space-y-4`,children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-blue-700 whitespace-nowrap",children:"Registrar venta (Pollo)"})}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Producto | Precio por Libra/Unidad"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("select",{className:"flex-1 border border-gray-300 p-2 rounded-2xl shadow-2xl focus:ring-2 focus:ring-blue-400",value:l,onChange:we=>c(we.target.value),children:[o.jsx("option",{value:"",disabled:!0,children:"Selecciona un producto"}),_e.map(we=>o.jsxs("option",{value:we.id,disabled:ut.has(we.id),title:ut.has(we.id)?"Ya est en la lista":`Disponible: ${W(P[we.id]||0)}`,children:[we.productName,"  ",we.measurement,"  C$ ",we.price," (disp:"," ",W(P[we.id]||0),")"]},we.id))]}),o.jsx("button",{type:"button",onClick:J,disabled:!l||ut.has(l),className:"px-3 py-2 rounded-2xl shadow-2xl bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:"Agregar"})]})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Fecha de la venta"}),o.jsx("input",{type:"date",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl focus:ring-2 focus:ring-blue-400",value:u,onChange:we=>d(we.target.value)})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Tipo de cliente"}),o.jsxs("select",{className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:Ae,onChange:we=>Q(we.target.value),children:[o.jsx("option",{value:"CONTADO",children:"Contado"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),Ae==="CONTADO"?o.jsxs("div",{className:"md:col-span-2 space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cliente (Contado)"}),o.jsx("input",{className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:f,onChange:we=>h(we.target.value),placeholder:"Ej: Cliente Mostrador"})]}):o.jsxs("div",{className:"md:col-span-2 space-y-2",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cliente (Crdito)"}),o.jsxs("select",{className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:ee,onChange:we=>Fe(we.target.value),children:[o.jsx("option",{value:"",children:"Selecciona un cliente"}),fe.map(we=>o.jsxs("option",{value:we.status==="ACTIVO"?we.id:"",disabled:we.status==="BLOQUEADO",children:[we.name,"  Saldo: ",Wh(we.balance||0)]},we.id))]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-lg font-semibold",children:Wh(se)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Pago inicial"}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Mximo: ",Wh(Be)]}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",max:Be,className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:Pe===0?"":Pe,onChange:we=>{const Ce=Math.max(0,Number(we.target.value||0)),Ue=Math.min(Ce,Be);F(Ue)},placeholder:"0.00"})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),o.jsx("div",{className:"text-lg font-semibold",children:Wh(je)})]})]})]})]}),o.jsx("div",{className:"rounded border overflow-x-auto shadow-2xl",children:o.jsxs("table",{className:"min-w-full text-sm r",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"text-center",children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Producto"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio especial"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Existencias"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cantidad"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descuento"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:""})]})}),o.jsx("tbody",{children:p.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Agrega productos al carrito."})}):p.map(we=>{const Ce=H(we),Ue=Number(Ce||0)*Number(we.qty||0),Ve=Math.max(0,Ue-Math.max(0,Number(we.discount||0))),ue=(we.measurement||"").toLowerCase()!=="lb",ce=Ja(Number(we.stock)-Number(we.qty||0));return o.jsxs("tr",{className:"text-center",children:[o.jsxs("td",{className:"p-2 border whitespace-nowrap",children:[we.productName,"  ",we.measurement]}),o.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",O(we.price).toFixed(2)]}),o.jsxs("td",{className:"p-2 border",children:[o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:we.specialPrice===0?"":we.specialPrice,onKeyDown:ie,onChange:Te=>ve(we.productId,Te.target.value),placeholder:"",title:"Precio especial (si se deja vaco, se usa el precio normal)"}),o.jsxs("div",{className:"text-[11px] text-gray-500 mt-1",children:["Aplicado: C$ ",O(Ce).toFixed(2)]})]}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ce.toFixed(3)}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",step:ue?1:.01,inputMode:ue?"numeric":"decimal",className:"w-28 border p-1 rounded text-right",value:we.qty===0?"":we.qty,onKeyDown:ie,onChange:Te=>ne(we.productId,Te.target.value),placeholder:"0",title:"Cantidad"})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",step:1,min:0,className:"w-24 border p-1 rounded text-right",value:we.discount===0?"":we.discount,onChange:Te=>L(we.productId,Te.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento (entero C$)"})}),o.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",O(Ve).toFixed(2)]}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 text-red-600 hover:bg-red-200",onClick:()=>U(we.productId),title:"Quitar",children:""})})]},we.productId)})})]})}),o.jsxs("div",{className:"space-y-1 ",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 ",children:" Monto total"}),o.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl bg-gray-100",value:`C$ ${x.toFixed(2)}`,readOnly:!0,title:"Suma de (precio aplicado  cantidad  descuento) de cada producto."})]}),Ae==="CONTADO"&&o.jsx(o.Fragment,{children:o.jsxs("div",{className:"grid grid-cols-2 gap-x-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Monto recibido"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:b===0?"":b,onChange:we=>w(Number(we.target.value||0))})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cambio"}),o.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl bg-gray-100",value:`C$ ${j}`,readOnly:!0})]})]})}),o.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white px-4 py-3 sm:py-2 rounded-2xl shadow-2xl font-semibold shadow hover:bg-blue-700 transition disabled:opacity-50",disabled:p.length===0||E,children:E?"Guardando...":"Guardar venta"}),_&&o.jsx("p",{className:`text-sm mt-2 ${_.startsWith("")?"text-green-600":_.startsWith("")?"text-yellow-600":"text-red-600"}`,children:_})]}),E&&o.jsx("div",{className:"fixed inset-0 bg-black/40 z-[60] flex items-center justify-center",children:o.jsx("div",{className:"bg-white rounded-lg shadow-xl border px-6 py-5",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",fill:"none",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),o.jsx("span",{className:"font-semibold",children:"Guardando venta"})]})})})]})}const uo=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function X5(t="LOT"){return`${t}-${Date.now()}-${Math.random().toString(16).slice(2)}`}function E4e({role:t="",roles:e,sellerCandyId:r="",currentUserEmail:n}){const[a,s]=v.useState([]),[i,l]=v.useState([]),[c,u]=v.useState(!0),[d,f]=v.useState(""),{refreshKey:h,refresh:A}=jc(),m=e&&e.length?e:t,p=zr(m,"admin"),g=p||zr(m,"contador"),[x,y]=v.useState(br(Zd(new Date),"yyyy-MM-dd")),[b,w]=v.useState(br(Jd(new Date),"yyyy-MM-dd")),[j,I]=v.useState(""),[_,S]=v.useState(!1),[E,k]=v.useState(""),[P,T]=v.useState(br(new Date,"yyyy-MM-dd")),[O,W]=v.useState("lb"),[Ae,de]=v.useState(""),[fe,ge]=v.useState(0),[ee,Fe]=v.useState(NaN),[Pe,F]=v.useState(0),[Q,H]=v.useState([]),[R,z]=v.useState(null),[J,D]=v.useState([]),[U,ne]=v.useState(!1),[ve,L]=v.useState(null),[Ye,ie]=v.useState(!1),[Z,Oe]=v.useState(null),[le,se]=v.useState(null),Be=Ne=>se(ct=>ct===Ne?null:Ne),[je,ot]=v.useState(!1),mt=()=>ot(Ne=>!Ne),ut=Ne=>{const ct=(Ne||"").toLowerCase();return/(^|\s)(lb|lbs|libra|libras)(\s|$)/.test(ct)||ct==="lb"};v.useEffect(()=>{(async()=>{u(!0),f("");const Ne=await Lt(pt(Ge,"products")),ct=[];Ne.forEach(Bt=>{const qe=Bt.data();qe.active===!0&&ct.push({id:Bt.id,name:qe.name??qe.productName??"(sin nombre)",category:qe.category??"(sin categora)",measurement:qe.measurement??"lb",price:Number(qe.price??0),providerPrice:Object.prototype.hasOwnProperty.call(qe,"providerPrice")?Number(qe.providerPrice):void 0})}),s(ct);const xe=tr(pt(Ge,"inventory_batches"),ln("date","desc")),Qe=await Lt(xe),dt=[];Qe.forEach(Bt=>{const qe=Bt.data(),bt=Ja(Number(qe.quantity||0)),G=Number(qe.purchasePrice||0),te=Number(qe.salePrice||0),He=Number((bt*G).toFixed(2)),re=Number((bt*te).toFixed(2));dt.push({id:Bt.id,productId:qe.productId,productName:qe.productName,category:qe.category,unit:qe.unit,quantity:bt,remaining:Ja(Number(qe.remaining||0)),purchasePrice:G,salePrice:te,invoiceTotal:qe.invoiceTotal!=null?Number(qe.invoiceTotal):He,expectedTotal:qe.expectedTotal!=null?Number(qe.expectedTotal):re,date:qe.date,createdAt:qe.createdAt,status:qe.status,notes:qe.notes,paidAmount:Number(qe.paidAmount||0),paidAt:qe.paidAt,batchGroupId:qe.batchGroupId,orderName:qe.orderName})}),l(dt),u(!1)})()},[h]);const _e=v.useMemo(()=>i.filter(Ne=>!(x&&Ne.date<x||b&&Ne.date>b||j&&Ne.productId!==j)),[i,x,b,j]),rt=v.useMemo(()=>{const Ne=_e.reduce((G,te)=>G+Number(te.invoiceTotal||0),0),ct=_e.reduce((G,te)=>G+Number(te.expectedTotal||0),0);let xe=0,Qe=0,dt=0,Bt=0;for(const G of _e)ut(G.unit)?(xe+=G.quantity,Qe+=G.remaining):(dt+=G.quantity,Bt+=G.remaining);const qe=_e.reduce((G,te)=>G+te.quantity,0),bt=_e.reduce((G,te)=>G+te.remaining,0);return{lbsIng:xe,lbsRem:Qe,udsIng:dt,udsRem:Bt,qty:qe,rem:bt,totalFacturado:Ne,totalEsperado:ct}},[_e]),we=v.useMemo(()=>{var xe,Qe;const Ne=new Map;for(const dt of _e){const Bt=dt.batchGroupId&&String(dt.batchGroupId).trim()||dt.id;Ne.has(Bt)||Ne.set(Bt,[]),Ne.get(Bt).push(dt)}const ct=[];for(const[dt,Bt]of Ne.entries()){const qe=[...Bt].sort((V,X)=>{var Y,pe;const me=((Y=V.createdAt)==null?void 0:Y.seconds)??0;return(((pe=X.createdAt)==null?void 0:pe.seconds)??0)-me}),bt=((xe=qe[0])==null?void 0:xe.date)||"",G=String(((Qe=qe[0])==null?void 0:Qe.orderName)||"").trim()||`Pedido ${bt||""}`.trim()||"Pedido",te=new Set(qe.map(V=>String(V.category||"").trim()).filter(Boolean)),He=te.size===1?Array.from(te)[0].toUpperCase():"MIXTO",re=qe.some(V=>V.status==="PENDIENTE")?"PENDIENTE":"PAGADO",be=Ja(qe.reduce((V,X)=>V+(ut(X.unit)?Number(X.quantity||0):0),0)),Me=Ja(qe.reduce((V,X)=>V+(ut(X.unit)?Number(X.remaining||0):0),0)),tt=Number(qe.reduce((V,X)=>V+Number(X.invoiceTotal||0),0).toFixed(2)),lt=Number(qe.reduce((V,X)=>V+Number(X.expectedTotal||0),0).toFixed(2)),ae=Number((lt-tt).toFixed(2));ct.push({groupId:dt,orderName:G,date:bt,typeLabel:He,status:re,lbsIn:be,lbsRem:Me,totalFacturado:tt,totalEsperado:lt,utilidadBruta:ae,items:qe})}return ct.sort((dt,Bt)=>dt.date===Bt.date?dt.groupId<Bt.groupId?1:-1:dt.date<Bt.date?1:-1),ct},[_e]),Ce=v.useMemo(()=>{const Ne=String(O||"").toLowerCase().trim();return a.filter(xe=>String(xe.measurement||"").toLowerCase().trim()===Ne).sort((xe,Qe)=>xe.name.localeCompare(Qe.name,"es"))},[a,O]);v.useEffect(()=>{const Ne=a.find(ct=>ct.id===Ae);Ne?(F(Number(Ne.price||0)),Ne.providerPrice!=null&&Number.isFinite(Number(Ne.providerPrice))?Fe(Number(Ne.providerPrice)):Fe(NaN)):(F(0),Fe(NaN))},[Ae,a,h]);const Ue=()=>{f("");const Ne=a.find(bt=>bt.id===Ae);if(!Ne)return f("Selecciona un producto.");if(fe<=0||!Number.isFinite(ee)||ee<=0)return f("Completa libras a ingresar y precio proveedor.");const ct=Ja(fe),xe=Ne.measurement,Qe=Number((ct*Number(ee||0)).toFixed(2)),dt=Number((ct*Number(Pe||0)).toFixed(2)),Bt=Number((dt-Qe).toFixed(2)),qe=Q.findIndex(bt=>bt.productId===Ne.id);qe>=0?H(bt=>bt.map((G,te)=>te!==qe?G:{...G,quantity:ct,remaining:ct,purchasePrice:Number(ee||0),salePrice:Number(Pe||0),invoiceTotal:Qe,expectedTotal:dt,utilidadBruta:Bt})):H(bt=>[...bt,{tempId:X5("IT"),productId:Ne.id,productName:Ne.name,category:Ne.category,unit:xe,quantity:ct,remaining:ct,purchasePrice:Number(ee||0),salePrice:Number(Pe||0),invoiceTotal:Qe,expectedTotal:dt,utilidadBruta:Bt}]),de(""),ge(0),Fe(NaN),F(0)},Ve=Ne=>{H(ct=>ct.filter(xe=>xe.tempId!==Ne))},ue=(Ne,ct,xe)=>{H(Qe=>Qe.map(dt=>{if(dt.tempId!==Ne)return dt;const Bt={...dt};return ct==="quantity"&&(Bt.quantity=Ja(Math.max(0,xe)),R||(Bt.remaining=Bt.quantity)),ct==="purchasePrice"&&(Bt.purchasePrice=Math.max(0,Number(xe||0))),ct==="salePrice"&&(Bt.salePrice=Math.max(0,Number(xe||0))),Bt.invoiceTotal=Number((Bt.quantity*Bt.purchasePrice).toFixed(2)),Bt.expectedTotal=Number((Bt.quantity*Bt.salePrice).toFixed(2)),Bt.utilidadBruta=Number((Bt.expectedTotal-Bt.invoiceTotal).toFixed(2)),Bt}))},ce=v.useMemo(()=>{const Ne=Ja(Q.reduce((Bt,qe)=>Bt+(ut(qe.unit)?Number(qe.quantity||0):0),0)),ct=Ja(Q.reduce((Bt,qe)=>Bt+(ut(qe.unit)?Number(qe.remaining||0):0),0)),xe=Number(Q.reduce((Bt,qe)=>Bt+Number(qe.invoiceTotal||0),0).toFixed(2)),Qe=Number(Q.reduce((Bt,qe)=>Bt+Number(qe.expectedTotal||0),0).toFixed(2)),dt=Number((Qe-xe).toFixed(2));return{lbsIn:Ne,lbsRem:ct,totalFacturado:xe,totalEsperado:Qe,utilidadBruta:dt}},[Q]),Te=()=>{z(null),D([]),k(""),T(br(new Date,"yyyy-MM-dd")),W("lb"),de(""),ge(0),Fe(NaN),F(0),H([])},Xe=async()=>{if(f(""),!Q.length)return f("Agrega al menos un producto al pedido.");const Ne=P||br(new Date,"yyyy-MM-dd"),ct=String(E||"").trim()||`Pedido ${Ne}`,xe=R||X5("BATCH");try{if(!R){for(const qe of Q)await lV({productId:qe.productId,productName:qe.productName,category:qe.category,unit:qe.unit,quantity:Ja(qe.quantity),purchasePrice:Number(qe.purchasePrice||0),salePrice:Number(qe.salePrice||0),invoiceTotal:Number(qe.invoiceTotal||0),expectedTotal:Number(qe.expectedTotal||0),date:Ne,notes:"",batchGroupId:xe,orderName:ct});f(" Pedido creado"),S(!1),Te(),A();return}const Qe=J,dt=new Map;for(const qe of Qe)dt.set(qe.productId,qe);const Bt=new Set(Q.map(qe=>qe.productId));for(const qe of Q){const bt=dt.get(qe.productId),G=Ja(qe.quantity);if(bt){const te=Ja(bt.quantity-bt.remaining),He=Math.max(0,Ja(G-te));await rn(Kt(Ge,"inventory_batches",bt.id),{date:Ne,orderName:ct,batchGroupId:xe,quantity:G,purchasePrice:Number(qe.purchasePrice||0),salePrice:Number(qe.salePrice||0),invoiceTotal:Number(qe.invoiceTotal||0),expectedTotal:Number(qe.expectedTotal||0),remaining:He})}else await lV({productId:qe.productId,productName:qe.productName,category:qe.category,unit:qe.unit,quantity:G,purchasePrice:Number(qe.purchasePrice||0),salePrice:Number(qe.salePrice||0),invoiceTotal:Number(qe.invoiceTotal||0),expectedTotal:Number(qe.expectedTotal||0),date:Ne,notes:"",batchGroupId:xe,orderName:ct})}for(const qe of Qe)Bt.has(qe.productId)||await yn(Kt(Ge,"inventory_batches",qe.id));f(" Pedido actualizado"),S(!1),Te(),A()}catch(Qe){console.error(Qe),f(" Error al guardar pedido")}},ft=Ne=>{L(Ne),ne(!0)},gt=Ne=>{z(Ne.groupId),D(Ne.items),k(Ne.orderName),T(Ne.date||br(new Date,"yyyy-MM-dd"));const ct=Ne.items.map(xe=>{const Qe=Number(xe.invoiceTotal||0),dt=Number(xe.expectedTotal||0);return{tempId:X5("IT"),productId:xe.productId,productName:xe.productName,category:xe.category,unit:xe.unit,quantity:Ja(xe.quantity),remaining:Ja(xe.remaining),purchasePrice:Number(xe.purchasePrice||0),salePrice:Number(xe.salePrice||0),invoiceTotal:Qe,expectedTotal:dt,utilidadBruta:Number((dt-Qe).toFixed(2))}});H(ct),S(!0)},vt=async Ne=>{if(confirm(`Eliminar el pedido "${Ne.orderName}" del ${Ne.date}?`))try{for(const xe of Ne.items)await yn(Kt(Ge,"inventory_batches",xe.id));f(" Pedido eliminado"),A()}catch(xe){console.error(xe),f(" Error al eliminar pedido")}},At=Ne=>{Oe(Ne),ie(!0)},ye=async()=>{if(Z)try{for(const Ne of Z.items){if(Ne.status!=="PENDIENTE")continue;await Vte(Ne.id),await rn(Kt(Ge,"inventory_batches",Ne.id),{remaining:0});const ct={date:Ne.date,productName:Ne.productName,quantity:Ne.quantity,amount:Number((Ne.expectedTotal??Ne.salePrice*Ne.quantity).toFixed(2)),allocations:[{batchId:Ne.id,qty:Ne.quantity,unitCost:Ne.purchasePrice,lineCost:Number((Ne.purchasePrice*Ne.quantity).toFixed(2))}],avgUnitCost:Ne.purchasePrice,measurement:Ne.unit,createdAt:or.now(),autoGeneratedFromInventory:!0};await wn(pt(Ge,"salesV2"),ct)}f(" Pedido pagado y reflejado como venta"),A()}catch(Ne){console.error(Ne),f(" Error al pagar pedido")}finally{ie(!1),Oe(null)}},$e=()=>{ie(!1),Oe(null)};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Inventario"}),g&&o.jsx("button",{className:"px-3 py-2 rounded-2xl bg-blue-600 text-white hover:bg-blue-700",type:"button",onClick:()=>{Te(),S(!0)},children:"Crear Lote"})]}),o.jsxs("div",{className:"bg-white p-3 rounded shadow-2xl border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:x,onChange:Ne=>y(Ne.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:b,onChange:Ne=>w(Ne.target.value)})]}),o.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[o.jsx("label",{className:"font-semibold",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:j,onChange:Ne=>I(Ne.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),a.map(Ne=>o.jsxs("option",{value:Ne.id,children:[Ne.name,"  ",Ne.category]},Ne.id))]})]}),o.jsx("button",{className:"px-3 rounded-2xl shadow-2xl py-1 bg-gray-200 hover:bg-gray-300",onClick:()=>{y(""),w(""),I("")},children:"Quitar filtro"}),o.jsx("div",{className:"ml-auto",children:o.jsx(Ic,{onClick:()=>A(),loading:c})})]}),o.jsxs("div",{className:"bg-gray-50 p-3 rounded-2xl shadow-2xl border mb-3 text-base",children:[o.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:mt,role:"button","aria-expanded":je,children:[o.jsxs("div",{className:"flex gap-6 items-center",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",rt.lbsIng.toFixed(3)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",rt.lbsRem.toFixed(3)]})]}),o.jsx("div",{className:"text-sm text-gray-500",children:je?"Cerrar":"Ver ms"})]}),je&&o.jsx("div",{className:"mt-3",children:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-y-2 gap-x-8",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",rt.lbsIng.toFixed(3)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",rt.lbsRem.toFixed(3)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",rt.udsIng.toFixed(3)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",rt.udsRem.toFixed(3)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ","C$ ",rt.totalEsperado.toFixed(2)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total facturado:"})," C$"," ",rt.totalFacturado.toFixed(2)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," C$"," ",(rt.totalEsperado-rt.totalFacturado).toFixed(2)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes (por filtro):"})," ",_e.length.toLocaleString()]})]})})]}),o.jsx("div",{className:"md:hidden space-y-3",children:c?o.jsx("div",{className:"bg-white border rounded-2xl p-4 shadow",children:"Cargando"}):we.length===0?o.jsx("div",{className:"bg-white border rounded-2xl p-4 shadow text-center",children:"Sin lotes"}):we.map(Ne=>{const ct=le===Ne.groupId;return o.jsxs("div",{className:"bg-white border rounded-2xl",children:[o.jsxs("div",{className:"p-4 flex items-start justify-between gap-3 cursor-pointer",onClick:()=>Be(Ne.groupId),children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-semibold text-lg",children:Ne.date}),o.jsx("div",{className:"text-xs text-gray-500 truncate",children:Ne.orderName})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:`px-2 py-1 rounded text-xs shrink-0 ${Ne.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:Ne.status}),o.jsx("div",{className:"text-sm text-gray-500",children:Ne.typeLabel})]})]}),ct&&o.jsxs("div",{className:"p-4 pt-0",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Tipo"}),o.jsx("div",{className:"font-semibold",children:Ne.typeLabel})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Utilidad bruta"}),o.jsx("div",{className:"font-semibold",children:uo(Ne.utilidadBruta)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Lbs ingresadas"}),o.jsx("div",{className:"font-semibold",children:Ne.lbsIn.toFixed(3)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Lbs restantes"}),o.jsx("div",{className:"font-semibold",children:Ne.lbsRem.toFixed(3)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 col-span-2",children:[o.jsxs("div",{className:"flex justify-between text-[11px] text-gray-500",children:[o.jsx("span",{children:"Total facturado"}),o.jsx("span",{children:"Total esperado"})]}),o.jsxs("div",{className:"flex justify-between font-semibold",children:[o.jsx("span",{children:uo(Ne.totalFacturado)}),o.jsx("span",{children:uo(Ne.totalEsperado)})]})]})]}),o.jsxs("div",{className:"mt-3 flex gap-2",children:[o.jsx("button",{className:"flex-1 px-3 py-2 rounded-xl bg-gray-100 hover:bg-gray-200 text-sm",onClick:()=>ft(Ne),children:"Ver detalle"}),p?o.jsxs(o.Fragment,{children:[Ne.status==="PENDIENTE"&&o.jsx("button",{className:"px-3 py-2 rounded-xl bg-green-600 hover:bg-green-700 text-white text-sm",onClick:()=>At(Ne),children:"Pagar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl bg-yellow-600 hover:bg-yellow-700 text-white text-sm",onClick:()=>gt(Ne),children:"Editar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl bg-red-600 hover:bg-red-700 text-white text-sm",onClick:()=>vt(Ne),children:"Borrar"})]}):null]})]})]},Ne.groupId)})}),o.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1100px] w-full text-sm shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Libras ingresadas"}),o.jsx("th",{className:"p-2 border",children:"Libras restantes"}),o.jsx("th",{className:"p-2 border",children:"Total Facturado"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"Utilidad bruta"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:c?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando"})}):we.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin lotes"})}):we.map(Ne=>o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsxs("td",{className:"p-2 border",children:[o.jsx("button",{className:"underline text-blue-700 hover:text-blue-900",onClick:()=>ft(Ne),title:Ne.orderName,children:Ne.date}),o.jsx("div",{className:"text-[11px] text-gray-500",children:Ne.orderName})]}),o.jsx("td",{className:"p-2 border",children:Ne.typeLabel}),o.jsx("td",{className:"p-2 border",children:Ne.lbsIn.toFixed(3)}),o.jsx("td",{className:"p-2 border",children:Ne.lbsRem.toFixed(3)}),o.jsx("td",{className:"p-2 border",children:uo(Ne.totalFacturado)}),o.jsx("td",{className:"p-2 border",children:uo(Ne.totalEsperado)}),o.jsx("td",{className:"p-2 border",children:uo(Ne.utilidadBruta)}),o.jsx("td",{className:"p-2 border",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Ne.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:Ne.status})}),o.jsx("td",{className:"p-2 border",children:p?o.jsxs("div",{className:"flex gap-2 justify-center",children:[Ne.status==="PENDIENTE"&&o.jsx("button",{onClick:()=>At(Ne),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Pagar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>gt(Ne),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>vt(Ne),children:"Borrar"})]}):o.jsx("span",{className:"text-xs text-gray-500",children:"Solo vista"})})]},Ne.groupId))})]})}),d&&o.jsx("p",{className:"mt-2 text-sm",children:d}),_&&su.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>S(!1)}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-6xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:R?"Editar pedido":"Crear pedido"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>S(!1),type:"button",children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre de pedido"}),o.jsx("input",{className:"w-full border p-2 rounded",value:E,onChange:Ne=>k(Ne.target.value),placeholder:"Ej: Pedido Pollo - Semana 1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de lote"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:P,onChange:Ne=>T(Ne.target.value)})]})]}),o.jsxs("div",{className:"border rounded p-3 bg-gray-50 mb-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3 items-end",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Unidad"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:O,onChange:Ne=>{W(Ne.target.value),de(""),ge(0),Fe(NaN),F(0)},children:[o.jsx("option",{value:"lb",children:"lb"}),o.jsx("option",{value:"unidad",children:"unidad"}),o.jsx("option",{value:"kg",children:"kg"})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto (solo activos)"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:Ae,onChange:Ne=>de(Ne.target.value),children:[o.jsx("option",{value:"",children:"Selecciona un producto"}),Ce.map(Ne=>o.jsxs("option",{value:Ne.id,children:[Ne.name,"  ",Ne.category,"  ",Ne.measurement]},Ne.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Libras a ingresar"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:fe===0?"":fe,onChange:Ne=>{const ct=Ne.target.value.replace(",","."),xe=parseFloat(ct),Qe=Number.isFinite(xe)?parseFloat(xe.toFixed(3)):0;ge(Math.max(0,Qe))},disabled:!Ae})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio proveedor"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Number.isNaN(ee)?"":ee,onChange:Ne=>{const ct=Ne.target.value.replace(",",".");if(ct==="")return Fe(NaN);const xe=parseFloat(ct),Qe=Number.isFinite(xe)?parseFloat(xe.toFixed(2)):NaN;Fe(Number.isFinite(Qe)?Math.max(0,Qe):NaN)},disabled:!Ae})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio venta (editable)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Pe===0?"":Pe,onChange:Ne=>{const ct=Ne.target.value.replace(",","."),xe=parseFloat(ct),Qe=Number.isFinite(xe)?parseFloat(xe.toFixed(2)):0;F(Math.max(0,Qe))},disabled:!Ae})]})]}),o.jsx("div",{className:"flex justify-end mt-3",children:o.jsx("button",{type:"button",onClick:Ue,className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Agregar producto al pedido"})})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1200px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Libras ingresadas"}),o.jsx("th",{className:"p-2 border",children:"Libras restantes"}),o.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border",children:"Precio venta"}),o.jsx("th",{className:"p-2 border",children:"Total facturado"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"Utilidad bruta"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:Q.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center text-gray-500",children:"No hay productos agregados."})}):Q.map(Ne=>o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsxs("td",{className:"p-2 border text-left",children:[Ne.productName,o.jsxs("div",{className:"text-[11px] text-gray-500",children:[Ne.category,"  ",Ne.unit]})]}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:Ne.quantity,onChange:ct=>{const xe=ct.target.value.replace(",","."),Qe=parseFloat(xe),dt=Number.isFinite(Qe)?parseFloat(Qe.toFixed(3)):0;ue(Ne.tempId,"quantity",dt)}})}),o.jsx("td",{className:"p-2 border",children:Number(Ne.remaining||0).toFixed(3)}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:Ne.purchasePrice,onChange:ct=>{const xe=ct.target.value.replace(",","."),Qe=parseFloat(xe),dt=Number.isFinite(Qe)?parseFloat(Qe.toFixed(2)):0;ue(Ne.tempId,"purchasePrice",dt)}})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:Ne.salePrice,onChange:ct=>{const xe=ct.target.value.replace(",","."),Qe=parseFloat(xe),dt=Number.isFinite(Qe)?parseFloat(Qe.toFixed(2)):0;ue(Ne.tempId,"salePrice",dt)}})}),o.jsx("td",{className:"p-2 border",children:uo(Ne.invoiceTotal)}),o.jsx("td",{className:"p-2 border",children:uo(Ne.expectedTotal)}),o.jsx("td",{className:"p-2 border",children:uo(Ne.utilidadBruta)}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Ve(Ne.tempId),children:"Quitar"})})]},Ne.tempId))})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Libras ingresadas"}),o.jsx("div",{className:"text-lg font-semibold",children:ce.lbsIn.toFixed(3)}),o.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Libras restantes"}),o.jsx("div",{className:"text-lg font-semibold",children:ce.lbsRem.toFixed(3)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado"}),o.jsx("div",{className:"text-lg font-semibold",children:uo(ce.totalFacturado)}),o.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Total esperado"}),o.jsx("div",{className:"text-lg font-semibold",children:uo(ce.totalEsperado)}),o.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Utilidad bruta"}),o.jsx("div",{className:"text-lg font-semibold",children:uo(ce.utilidadBruta)})]})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>S(!1),children:"Cancelar"}),o.jsx("button",{type:"button",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:Xe,disabled:Q.length===0,children:R?"Editar pedido":"Crear pedido"})]})]})]}),document.body),U&&ve&&su.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[75] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>{ne(!1),L(null)}}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-6xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold",children:"Detalle del pedido"}),o.jsxs("div",{className:"text-sm text-gray-600",children:[o.jsx("strong",{children:ve.orderName})," "," ",ve.date]})]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{ne(!1),L(null)},type:"button",children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1100px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Unidad"}),o.jsx("th",{className:"p-2 border",children:"Ingresado"}),o.jsx("th",{className:"p-2 border",children:"Restantes"}),o.jsx("th",{className:"p-2 border",children:"Precio Compra"}),o.jsx("th",{className:"p-2 border",children:"Precio Venta"}),o.jsx("th",{className:"p-2 border",children:"Total factura"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"Utilidad"}),o.jsx("th",{className:"p-2 border",children:"Estado"})]})}),o.jsx("tbody",{children:ve.items.map(Ne=>{const ct=Number(Ne.invoiceTotal||0),xe=Number(Ne.expectedTotal||0);return o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border text-left",children:Ne.productName}),o.jsx("td",{className:"p-2 border",children:(Ne.unit||"").toUpperCase()}),o.jsx("td",{className:"p-2 border",children:Ne.quantity.toFixed(3)}),o.jsx("td",{className:"p-2 border",children:Ne.remaining.toFixed(3)}),o.jsx("td",{className:"p-2 border",children:uo(Ne.purchasePrice)}),o.jsx("td",{className:"p-2 border",children:uo(Ne.salePrice)}),o.jsx("td",{className:"p-2 border",children:uo(ct)}),o.jsx("td",{className:"p-2 border",children:uo(xe)}),o.jsx("td",{className:"p-2 border",children:uo(xe-ct)}),o.jsx("td",{className:"p-2 border",children:Ne.status})]},Ne.id)})})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mt-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Libras ingresadas"}),o.jsx("div",{className:"text-lg font-semibold",children:ve.lbsIn.toFixed(3)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Libras restantes"}),o.jsx("div",{className:"text-lg font-semibold",children:ve.lbsRem.toFixed(3)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad bruta"}),o.jsx("div",{className:"text-lg font-semibold",children:uo(ve.utilidadBruta)})]})]})]})]}),document.body),Ye&&Z&&su.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[80] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:$e}),o.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl border w-[90%] max-w-md p-6",children:[o.jsx("h3",{className:"text-lg font-bold mb-3 text-center",children:"Confirmar pago de inventario"}),o.jsxs("p",{className:"text-sm text-gray-700 mb-5 text-center",children:["Seguro que quieres pagar este pedido?",o.jsx("br",{}),o.jsx("strong",{children:Z.orderName})," "," ",Z.date,o.jsx("br",{}),"Ya no habrn libras disponibles al pagar este inventario."]}),o.jsxs("div",{className:"flex justify-center gap-4",children:[o.jsx("button",{onClick:ye,className:"px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700",children:"Confirmar"}),o.jsx("button",{onClick:$e,className:"px-4 py-2 rounded-lg bg-gray-300 hover:bg-gray-400",children:"Cancelar"})]})]})]}),document.body)]})}const dA=t=>`C$${(Number(t)||0).toFixed(2)}`;function S4e(){const t=Vbe(new Date),[e,r]=v.useState(br(t,"yyyy-MM")),[n,a]=v.useState([]),[s,i]=v.useState(!1),[l,c]=v.useState(""),u=v.useRef(null),d=v.useMemo(()=>{const[g,x]=e.split("-").map(w=>parseInt(w,10)),y=br(Zd(new Date(g,x-1,1)),"yyyy-MM-dd"),b=br(Jd(new Date(g,x-1,1)),"yyyy-MM-dd");return{from:y,to:b}},[e]),f=async()=>{i(!0);try{const g=await a4e(d.from,d.to),x=[];for(const y of g){const b=Kt(Ge,"inventory_batches",y.batchId),w=await xi(b);if(!w.exists())continue;const j=w.data();x.push({batchId:y.batchId,batchDate:y.batchDate,productName:y.productName,soldQty:Number(y.quantity||0),soldAmount:Number(y.amountCharged||0),status:j.status??"PENDIENTE",purchasePrice:Number(j.purchasePrice||0),salePrice:Number(j.salePrice||0),supplier:j.supplier})}a(x)}catch(g){console.error(g),c(" Error al cargar liquidaciones")}finally{i(!1)}};v.useEffect(()=>{f()},[e]);const h=async g=>{confirm("Marcar este lote como PAGADO?")&&(await Vte(g),a(y=>y.map(b=>b.batchId===g?{...b,status:"PAGADO"}:b)))},A=v.useMemo(()=>{const g=n.reduce((w,j)=>w+j.soldQty,0),x=n.reduce((w,j)=>w+j.soldAmount,0),y=n.reduce((w,j)=>w+j.soldQty*j.purchasePrice,0),b=x-y;return{q:g,amt:x,cogs:y,profit:b}},[n]),m=v.useMemo(()=>{const g=new Map;for(const x of n){const y=x.productName||"(sin nombre)";g.has(y)||g.set(y,{productName:y,qty:0,revenue:0,cogs:0,profit:0});const b=g.get(y);b.qty+=x.soldQty,b.revenue+=x.soldAmount;const w=x.soldQty*x.purchasePrice;b.cogs+=w,b.profit=b.revenue-b.cogs}return Array.from(g.values()).sort((x,y)=>x.productName.localeCompare(y.productName))},[n]),p=async()=>{if(!u.current)return;const g=u.current;g.classList.add("force-pdf-colors");try{const[{default:x},{jsPDF:y}]=await Promise.all([LA(()=>Promise.resolve().then(()=>aD),void 0),LA(()=>Promise.resolve().then(()=>fk),void 0)]),w=(await x(g,{backgroundColor:"#ffffff",scale:2})).toDataURL("image/png"),j=new y("p","mm","a4"),I=190,_=j.getImageProperties(w),S=I,E=_.height*S/_.width;j.addImage(w,"PNG",10,10,S,E),j.save(`liquidaciones_${e}.pdf`)}catch(x){console.error(x),alert("No se pudo generar el PDF")}finally{g.classList.remove("force-pdf-colors")}};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Liquidaciones por lote"}),o.jsx("button",{onClick:p,className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:"Descargar PDF"})]}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-center gap-3",children:[o.jsx("label",{className:"text-sm font-semibold",children:"Mes:"}),o.jsx("input",{type:"month",className:"border rounded px-2 py-1",value:e,onChange:g=>r(g.target.value)}),o.jsx("button",{onClick:f,className:"bg-gray-800 text-white px-3 py-1 rounded",children:"Aplicar"})]}),o.jsxs("div",{ref:u,children:[o.jsx("div",{className:"bg-white p-3 rounded shadow border mb-3 text-sm",children:o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total vendido (cantidad):"})," ",A.q]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Monto vendido:"})," ",dA(A.amt)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Costo (COGS):"})," ",dA(A.cogs)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Utilidad:"})," ",dA(A.profit)]})]})}),o.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto mb-6",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Lote (fecha)"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Proveedor"}),o.jsx("th",{className:"p-2 border",children:"Vendido"}),o.jsx("th",{className:"p-2 border",children:"Monto vendido"}),o.jsx("th",{className:"p-2 border",children:"COGS"}),o.jsx("th",{className:"p-2 border",children:"Utilidad"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:s?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando"})}):n.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin datos"})}):n.map(g=>{const x=g.soldQty*g.purchasePrice,y=g.soldAmount-x;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:g.batchDate}),o.jsx("td",{className:"p-2 border",children:g.productName}),o.jsx("td",{className:"p-2 border",children:g.supplier||"-"}),o.jsx("td",{className:"p-2 border",children:g.soldQty}),o.jsx("td",{className:"p-2 border",children:dA(g.soldAmount)}),o.jsx("td",{className:"p-2 border",children:dA(x)}),o.jsx("td",{className:`p-2 border ${y>=0?"text-green-700":"text-red-700"}`,children:dA(y)}),o.jsx("td",{className:"p-2 border",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${g.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:g.status})}),o.jsx("td",{className:"p-2 border",children:g.status==="PENDIENTE"&&o.jsx("button",{onClick:()=>h(g.batchId),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Marcar pagado"})})]},g.batchId)})})]})}),o.jsx("h3",{className:"font-semibold mb-2",children:"Utilidad por producto"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Cantidad vendida"}),o.jsx("th",{className:"p-2 border",children:"Ingreso"}),o.jsx("th",{className:"p-2 border",children:"COGS"}),o.jsx("th",{className:"p-2 border",children:"Utilidad"})]})}),o.jsx("tbody",{children:m.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin datos"})}):m.map(g=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:g.productName}),o.jsx("td",{className:"p-2 border",children:g.qty}),o.jsx("td",{className:"p-2 border",children:dA(g.revenue)}),o.jsx("td",{className:"p-2 border",children:dA(g.cogs)}),o.jsx("td",{className:`p-2 border ${g.profit>=0?"text-green-700":"text-red-700"}`,children:dA(g.profit)})]},g.productName))})]})})]}),l&&o.jsx("p",{className:"mt-2 text-sm",children:l})]})}const Cn=t=>`C$${Number(t??0).toFixed(2)}`,I4e=()=>br(new Date,"yyyy-MM-dd"),wi=t=>Number(t||0).toFixed(3);function j4e(){const[t,e]=v.useState(()=>{const _e=new Date,rt=new Date(_e.getFullYear(),_e.getMonth(),1);return br(rt,"yyyy-MM-dd")}),[r,n]=v.useState(I4e()),[a,s]=v.useState(!0),[i,l]=v.useState([]),[c,u]=v.useState([]),[d,f]=v.useState([]),[h,A]=v.useState(!1),[m,p]=v.useState(null),[g,x]=v.useState(0),{refreshKey:y,refresh:b}=jc(),[w,j]=v.useState({}),[I,_]=v.useState({}),[S,E]=v.useState(!1),k=()=>E(_e=>!_e),[P,T]=v.useState(!1),O=()=>T(_e=>!_e),[W,Ae]=v.useState(!1),de=()=>Ae(_e=>!_e),[fe,ge]=v.useState("");v.useEffect(()=>{(async()=>{s(!0);const rt=tr(pt(Ge,"salesV2"),sr("date",">=",t),sr("date","<=",r)),we=await Lt(rt),Ce=[];we.forEach(ce=>{const Te=ce.data(),Xe=Te.date??"";if(Array.isArray(Te.items)&&Te.items.length>0){Te.items.forEach((ft,gt)=>{const vt=String(ft.productName??"(sin nombre)"),At=Number(ft.qty??0),ye=Number(ft.lineFinal??0)||Math.max(0,Number(ft.unitPrice||0)*At-Number(ft.discount||0));Ce.push({id:`${ce.id}#${gt}`,date:Xe,productName:vt,quantity:At,amount:ye,allocations:Array.isArray(ft.allocations)?ft.allocations:Te.allocations,avgUnitCost:Number(ft.avgUnitCost??Te.avgUnitCost??0),measurement:ft.measurement??Te.measurement??"",type:Te.type??"CONTADO"})});return}Ce.push({id:ce.id,date:Xe,productName:Te.productName??"(sin nombre)",quantity:Number(Te.quantity??0),amount:Number(Te.amount??Te.amountCharged??0),allocations:Array.isArray(Te.allocations)?Te.allocations:[],avgUnitCost:Number(Te.avgUnitCost??0),measurement:Te.measurement??"",type:Te.type??"CONTADO"})}),l(Ce);const Ue=tr(pt(Ge,"expenses"),sr("date",">=",t),sr("date","<=",r)),Ve=await Lt(Ue),ue=[];Ve.forEach(ce=>{const Te=ce.data();ue.push({id:ce.id,date:Te.date??"",category:Te.category??"(sin categora)",description:Te.description??"",amount:Number(Te.amount??0),status:Te.status??"PAGADO",createdAt:Te.createdAt})}),u(ue),s(!1)})()},[t,r,y]),v.useMemo(()=>{const _e=i.reduce((Ve,ue)=>Ve+(ue.amount||0),0);let rt=0;i.forEach(Ve=>{var ue;(ue=Ve.allocations)!=null&&ue.length?rt+=Ve.allocations.reduce((ce,Te)=>ce+Number(Te.lineCost||0),0):Ve.avgUnitCost&&Ve.quantity&&(rt+=Number(Ve.avgUnitCost)*Number(Ve.quantity))});const we=_e-rt,Ce=c.reduce((Ve,ue)=>Ve+(ue.amount||0),0),Ue=we-Ce;return{revenue:_e,cogsReal:rt,grossProfit:we,expensesSum:Ce,netProfit:Ue}},[i,c]);const ee=v.useMemo(()=>fe?i.filter(_e=>(_e.productName||"")===fe):i,[i,fe]),Fe=v.useMemo(()=>{const _e=ee.reduce((Ve,ue)=>Ve+(ue.amount||0),0);let rt=0;ee.forEach(Ve=>{var ue;(ue=Ve.allocations)!=null&&ue.length?rt+=Ve.allocations.reduce((ce,Te)=>ce+Number(Te.lineCost||0),0):Ve.avgUnitCost&&Ve.quantity&&(rt+=Number(Ve.avgUnitCost)*Number(Ve.quantity))});const we=_e-rt,Ce=c.reduce((Ve,ue)=>Ve+(ue.amount||0),0),Ue=we-Ce;return{revenue:_e,cogsReal:rt,grossProfit:we,expensesSum:Ce,netProfit:Ue}},[ee,c]),Pe=v.useMemo(()=>{const _e=ee.filter(ue=>ue.type==="CONTADO"),rt=_e.reduce((ue,ce)=>ue+(ce.amount||0),0);let we=0;_e.forEach(ue=>{var ce;(ce=ue.allocations)!=null&&ce.length?we+=ue.allocations.reduce((Te,Xe)=>Te+Number(Xe.lineCost||0),0):ue.avgUnitCost&&ue.quantity&&(we+=Number(ue.avgUnitCost)*Number(ue.quantity))});const Ce=rt-we,Ue=c.reduce((ue,ce)=>ue+(ce.amount||0),0),Ve=Ce-Ue;return{revenue:rt,cogsReal:we,grossProfit:Ce,expensesSum:Ue,netProfit:Ve}},[ee,c]),F=v.useMemo(()=>{const _e=ee.filter(Ue=>Ue.type==="CREDITO"),rt=_e.reduce((Ue,Ve)=>Ue+(Ve.amount||0),0);let we=0;_e.forEach(Ue=>{var Ve;(Ve=Ue.allocations)!=null&&Ve.length?we+=Ue.allocations.reduce((ue,ce)=>ue+Number(ce.lineCost||0),0):Ue.avgUnitCost&&Ue.quantity&&(we+=Number(Ue.avgUnitCost)*Number(Ue.quantity))});const Ce=rt-we;return{revenue:rt,cogsReal:we,grossProfit:Ce}},[ee]),Q=_e=>String(_e??"").toLowerCase().trim(),H=_e=>Number(_e.qty??_e.quantity??0),R=_e=>["lb","lbs","libra","libras"].includes(Q(_e)),z=_e=>["unidad","unidades","ud","uds","pieza","piezas"].includes(Q(_e)),J=_e=>_e?typeof _e=="string"?_e:_e!=null&&_e.toDate?br(_e.toDate(),"yyyy-MM-dd"):"":"";v.useEffect(()=>{(async()=>{A(!0);try{const rt=await Lt(pt(Ge,"customers_pollo")),we={};rt.forEach(vt=>{const At=vt.data();we[vt.id]=String(At.name??"(sin nombre)")});const Ce=await Lt(pt(Ge,"ar_movements_pollo")),Ue={},Ve={},ue={},ce=new Set;let Te=0;Ce.forEach(vt=>{var xe,Qe;const At=vt.data(),ye=String(At.customerId??"").trim();if(!ye)return;const $e=Number(At.amount??0);Ue[ye]=(Ue[ye]||0)+$e;const Ne=String(At.type??"").toUpperCase(),ct=At.createdAt??null;if(Ne==="ABONO"){Te+=Math.abs($e);const dt=Ve[ye],Bt=!(dt!=null&&dt.ts)||(ct!=null&&ct.toDate&&((xe=dt.ts)!=null&&xe.toDate)?ct.toDate()>dt.ts.toDate():!1);(!dt||Bt)&&(Ve[ye]={amount:Math.abs($e),date:At.date??"",ts:ct})}if(Ne==="CARGO"){const dt=(Qe=At==null?void 0:At.ref)!=null&&Qe.saleId?String(At.ref.saleId):"";dt&&(ue[ye]||(ue[ye]=new Set),ue[ye].add(dt),ce.add(dt))}});const Xe=new Map;await Promise.all(Array.from(ce).map(async vt=>{const At=await xi(Kt(Ge,"salesV2",vt));At.exists()&&Xe.set(vt,At.data())}));const ft=[];Object.keys(Ue).forEach(vt=>{const At=Number(Ue[vt]||0);if(At<=0)return;const ye=new Map;let $e=0,Ne=0;(ue[vt]||new Set).forEach(Qe=>{const dt=Xe.get(Qe);if(!dt)return;(Array.isArray(dt.items)&&dt.items.length>0?dt.items:[{productName:dt.productName,qty:dt.quantity,unitPrice:dt.unitPrice,discount:dt.discount,lineFinal:dt.amount??dt.amountCharged,measurement:dt.measurement}]).forEach(qe=>{const bt=String(qe.productName??"(sin nombre)"),G=Number(qe.qty??qe.quantity??0),te=String(qe.measurement??""),He=Number(qe.lineFinal??0)||Math.max(0,Number(qe.unitPrice||0)*G-Number(qe.discount||0));R(te)?$e+=G:Ne+=G;const re=`${bt}||${te}`,be=ye.get(re)||{productName:bt,qty:0,amount:0,measurement:te};be.qty+=G,be.amount+=He,ye.set(re,be)})});const xe=Ve[vt];ft.push({customerId:vt,name:we[vt]||"(sin nombre)",balance:At,lbs:$e,units:Ne,lastPaymentAmount:Number((xe==null?void 0:xe.amount)||0),lastPaymentDate:J((xe==null?void 0:xe.ts)||(xe==null?void 0:xe.date)),products:Array.from(ye.values()).sort((Qe,dt)=>Qe.productName.localeCompare(dt.productName))})});const gt=ft.filter(vt=>vt.products.length);gt.sort((vt,At)=>At.balance-vt.balance),f(gt),x(Te)}catch(rt){console.error("Error cargando saldos pendientes:",rt),f([]),x(0)}finally{A(!1)}})()},[y]),v.useMemo(()=>i.reduce((_e,rt)=>R(rt.measurement)?_e+H(rt):_e,0),[i]),v.useMemo(()=>ee.reduce((_e,rt)=>R(rt.measurement)?_e+H(rt):_e,0),[ee]);const D=v.useMemo(()=>ee.filter(_e=>_e.type==="CONTADO"),[ee]),U=v.useMemo(()=>ee.filter(_e=>_e.type==="CREDITO"),[ee]),ne=v.useMemo(()=>D.reduce((_e,rt)=>_e+(rt.amount||0),0),[D]),ve=v.useMemo(()=>U.reduce((_e,rt)=>_e+(rt.amount||0),0),[U]),L=v.useMemo(()=>d.reduce((_e,rt)=>_e+Number(rt.balance||0),0),[d]),Ye=v.useMemo(()=>Pe.revenue+g,[Pe.revenue,g]),ie=v.useMemo(()=>ne+g,[ne,g]),Z=v.useMemo(()=>D.reduce((_e,rt)=>R(rt.measurement)?_e+H(rt):_e,0),[D]),Oe=v.useMemo(()=>U.reduce((_e,rt)=>R(rt.measurement)?_e+H(rt):_e,0),[U]);v.useMemo(()=>i.reduce((_e,rt)=>z(rt.measurement)?_e+H(rt):_e,0),[i]),v.useMemo(()=>ee.reduce((_e,rt)=>z(rt.measurement)?_e+H(rt):_e,0),[ee]);const le=v.useMemo(()=>D.reduce((_e,rt)=>z(rt.measurement)?_e+H(rt):_e,0),[D]),se=v.useMemo(()=>U.reduce((_e,rt)=>z(rt.measurement)?_e+H(rt):_e,0),[U]),Be=v.useMemo(()=>Array.from(new Set(i.map(_e=>_e.productName||"(sin nombre)"))).sort(),[i]),je=v.useMemo(()=>{var rt;const _e=new Map;for(const we of ee){const Ce=we.productName||"(sin nombre)";_e.has(Ce)||_e.set(Ce,{productName:Ce,units:0,revenue:0,cogs:0,profit:0,firstDate:we.date||"",lastDate:we.date||""});const Ue=_e.get(Ce);Ue.units+=Number(we.quantity||0),Ue.revenue+=Number(we.amount||0),(!Ue.firstDate||we.date<(Ue.firstDate||we.date))&&(Ue.firstDate=we.date),(!Ue.lastDate||we.date>(Ue.lastDate||we.date))&&(Ue.lastDate=we.date);let Ve=0;(rt=we.allocations)!=null&&rt.length?Ve=we.allocations.reduce((ue,ce)=>ue+Number(ce.lineCost||0),0):we.avgUnitCost&&(Ve=Number(we.avgUnitCost)*Number(we.quantity||0)),Ue.cogs+=Ve,Ue.profit=Ue.revenue-Ue.cogs}return Array.from(_e.values()).sort((we,Ce)=>we.productName.localeCompare(Ce.productName))},[ee]),ot=v.useMemo(()=>[...je].sort((_e,rt)=>rt.units-_e.units).slice(0,3).map((_e,rt)=>({idx:rt+1,name:_e.productName,units:_e.units})),[je]),mt=_e=>j(rt=>({...rt,[_e]:!rt[_e]})),ut=_e=>_(rt=>({...rt,[_e]:!rt[_e]}));return o.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-4 sm:p-6 rounded-2xl shadow-2xl",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3 gap-2",children:[o.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Dashboard Financiero"}),o.jsx(Ic,{onClick:b,loading:a})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-3 py-2 w-full",value:t,onChange:_e=>e(_e.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-3 py-2 w-full",value:r,onChange:_e=>n(_e.target.value)})]})]}),a?o.jsx("p",{children:"Cargando"}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("div",{className:"flex gap-2 mb-2 items-center",children:o.jsxs("select",{className:"w-full border rounded px-2 py-2 text-sm",value:fe,onChange:_e=>ge(_e.target.value),children:[o.jsx("option",{value:"",children:"Todos los productos"}),Be.map(_e=>o.jsx("option",{value:_e,children:_e},_e))]})}),o.jsxs("div",{className:"md:hidden",children:[o.jsxs("button",{type:"button",onClick:de,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"KPIs"}),o.jsxs("div",{className:"text-xs text-gray-600",children:["Ventas: ",o.jsx("b",{children:Cn(Fe.revenue)}),"  Utilidad Neta:"," ",o.jsx("b",{children:Cn(Fe.netProfit)})]})]}),o.jsx("div",{className:"text-gray-500",children:W?"":""})]}),W&&o.jsxs("div",{className:"mt-3 space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[o.jsx(Ni,{title:"Ventas",subtitle:"Ventas cash",value:Cn(Ye)}),o.jsx(Ni,{title:"Costo",value:Cn(Pe.cogsReal)}),o.jsx(Ni,{title:"Ganancia Bruta",value:Cn(Pe.grossProfit),positive:!0}),o.jsx(Ni,{title:"Gastos",value:Cn(Pe.expensesSum)}),o.jsx(Ni,{title:"Ganancia Neta",value:Cn(Pe.netProfit),positive:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[o.jsx(Ni,{title:"Ventas Crdito",value:Cn(F.revenue)}),o.jsx(Ni,{title:"Costo",value:Cn(F.cogsReal)}),o.jsx(Ni,{title:"Ganancia Bruta (Aproximado)",value:Cn(F.grossProfit),positive:!0}),o.jsx(Ni,{title:"CxC",value:Cn(L)}),o.jsx(Ni,{title:"Recaudacin (Abonos)",value:Cn(g)})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[o.jsx(pl,{title:"Ventas Cash",value:Cn(ie)}),o.jsx(pl,{title:"Ventas Crdito",value:Cn(ve)}),o.jsx(pl,{title:"Libras Cash",value:wi(Z)}),o.jsx(pl,{title:"Libras Crdito",value:wi(Oe)}),o.jsx(pl,{title:"Unidades Cash",value:wi(le)}),o.jsx(pl,{title:"Unidades Crdito",value:wi(se)})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 rounded-lg shadow-2xl p-3 sm:p-4 bg-gray-50",children:[o.jsx(pl,{title:"Libras Cash + Credito",value:wi(Z+Oe)}),o.jsx(pl,{title:"Unidades Cash + Credito",value:wi(le+se)}),o.jsx(mV,{title:"Productos ms vendidos",items:ot.map(_e=>({key:`${_e.idx}`,label:`${_e.idx}. ${_e.name}`,value:`(${wi(_e.units)})`}))})]})]})]})]}),o.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[o.jsx(Ni,{title:"Ventas Cash",value:Cn(Ye)}),o.jsx(Ni,{title:"Costo",value:Cn(Pe.cogsReal)}),o.jsx(Ni,{title:"Ganancia Bruta",value:Cn(Pe.grossProfit),positive:!0}),o.jsx(Ni,{title:"Gastos",value:Cn(Pe.expensesSum)}),o.jsx(Ni,{title:"Ganancia Neta",value:Cn(Pe.netProfit),positive:!0})]}),o.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[o.jsx(Ni,{title:"Ventas Crdito",value:Cn(F.revenue)}),o.jsx(Ni,{title:"Costo",value:Cn(F.cogsReal)}),o.jsx(Ni,{title:"Ganancia Bruta (Aproximado)",value:Cn(F.grossProfit),positive:!0}),o.jsx(Ni,{title:"CxC",value:Cn(L)}),o.jsx(Ni,{title:"Recaudacin (Abonos)",value:Cn(g)})]}),o.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[o.jsx(pl,{title:"Ventas Cash",value:Cn(ie)}),o.jsx(pl,{title:"Ventas Crdito",value:Cn(ve)}),o.jsx(pl,{title:"Libras Cash",value:wi(Z)}),o.jsx(pl,{title:"Libras Crdito",value:wi(Oe)}),o.jsx(pl,{title:"Unidades Cash",value:wi(le)}),o.jsx(pl,{title:"Unidades Crdito",value:wi(se)})]}),o.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-3 gap-3 mb-6 rounded-lg shadow-2xl p-3 sm:p-4 bg-gray-50",children:[o.jsx(pl,{title:"Libras Cash + Credito",value:wi(Z+Oe)}),o.jsx(pl,{title:"Unidades Cash + Credito",value:wi(le+se)}),o.jsx(mV,{title:"Productos ms vendidos",items:ot.map(_e=>({key:`${_e.idx}`,label:`${_e.idx}. ${_e.name}`,value:`(${wi(_e.units)})`}))})]}),o.jsx("h3",{className:"font-semibold mb-2",children:"Saldos pendientes"}),o.jsx("div",{className:"border rounded-2xl p-3 sm:p-4 bg-gray-50 mb-6",children:h?o.jsx("div",{className:"text-sm text-gray-600",children:"Cargando saldos"}):d.length===0?o.jsx("div",{className:"text-sm text-gray-600",children:"Sin saldos pendientes."}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-white",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Cliente"}),o.jsx("th",{className:"border p-2",children:"Libras asociadas"}),o.jsx("th",{className:"border p-2",children:"Unidades asociadas"}),o.jsx("th",{className:"border p-2",children:"Saldo pendiente"}),o.jsx("th",{className:"border p-2",children:"ltimo abono"}),o.jsx("th",{className:"border p-2",children:"Fecha ult. abono"}),o.jsx("th",{className:"border p-2",children:"Ver"})]})}),o.jsx("tbody",{children:d.map(_e=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1 text-left",children:_e.name}),o.jsx("td",{className:"border p-1",children:wi(_e.lbs)}),o.jsx("td",{className:"border p-1",children:wi(_e.units)}),o.jsx("td",{className:"border p-1",children:Cn(_e.balance)}),o.jsx("td",{className:"border p-1",children:Cn(_e.lastPaymentAmount)}),o.jsx("td",{className:"border p-1",children:_e.lastPaymentDate||""}),o.jsx("td",{className:"border p-1",children:o.jsx("button",{type:"button",onClick:()=>p(_e),className:"px-3 py-1 rounded bg-indigo-600 text-white text-xs hover:bg-indigo-700",children:"Ver"})})]},_e.customerId))})]})})}),o.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),o.jsx("div",{className:"hidden md:block",children:o.jsxs("table",{className:"min-w-full border text-sm mb-6",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Fechas"}),o.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),o.jsx("th",{className:"border p-2",children:"Ingreso"}),o.jsx("th",{className:"border p-2",children:"Costo"}),o.jsx("th",{className:"border p-2",children:"Utilidad"})]})}),o.jsxs("tbody",{children:[je.map(_e=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:_e.productName}),o.jsx("td",{className:"border p-1",children:_e.firstDate&&_e.lastDate?_e.firstDate===_e.lastDate?_e.firstDate:`${_e.firstDate}  ${_e.lastDate}`:""}),o.jsx("td",{className:"border p-1",children:wi(_e.units)}),o.jsx("td",{className:"border p-1",children:Cn(_e.revenue)}),o.jsx("td",{className:"border p-1",children:Cn(_e.cogs)}),o.jsx("td",{className:`border p-1 ${_e.profit>=0?"text-green-700":"text-red-700"}`,children:Cn(_e.profit)})]},_e.productName)),je.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Sin datos en el rango seleccionado."})})]})]})}),o.jsxs("div",{className:"md:hidden mb-6",children:[o.jsxs("button",{type:"button",onClick:k,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"Consolidado por producto"}),o.jsxs("div",{className:"text-xs text-gray-600",children:[je.length," productos"]})]}),o.jsx("div",{className:"text-gray-500",children:S?"":""})]}),S&&o.jsx("div",{className:"space-y-2 mt-3",children:je.length===0?o.jsx("div",{className:"border rounded-xl p-3 text-sm text-gray-500 bg-gray-50",children:"Sin datos en el rango seleccionado."}):je.map(_e=>{const rt=!!w[_e.productName],we=_e.firstDate&&_e.lastDate?_e.firstDate===_e.lastDate?_e.firstDate:`${_e.firstDate}  ${_e.lastDate}`:"";return o.jsxs("div",{className:"border rounded-2xl bg-white shadow-sm overflow-hidden",children:[o.jsxs("button",{type:"button",onClick:()=>mt(_e.productName),className:"w-full text-left px-3 py-3 flex items-start gap-3",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-semibold truncate",children:_e.productName}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Total: ",o.jsx("b",{children:wi(_e.units)}),"  Utilidad:"," ",o.jsx("b",{className:_e.profit>=0?"text-green-700":"text-red-700",children:Cn(_e.profit)})]})]}),o.jsx("div",{className:"text-gray-500 text-sm pt-0.5",children:rt?"":""})]}),rt&&o.jsx("div",{className:"px-3 pb-3 text-sm",children:o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx(hf,{label:"Fechas",value:we}),o.jsx(hf,{label:"Total",value:wi(_e.units)}),o.jsx(hf,{label:"Ingreso",value:Cn(_e.revenue)}),o.jsx(hf,{label:"Costo",value:Cn(_e.cogs)}),o.jsx(hf,{label:"Utilidad",value:Cn(_e.profit),valueClass:_e.profit>=0?"text-green-700 font-semibold":"text-red-700 font-semibold"})]})})]},_e.productName)})})]}),o.jsx("h3",{className:"font-semibold mb-2",children:"Gastos del periodo"}),o.jsx("div",{className:"hidden md:block",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Fecha"}),o.jsx("th",{className:"border p-2",children:"Categora"}),o.jsx("th",{className:"border p-2",children:"Descripcin"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Estado"})]})}),o.jsxs("tbody",{children:[c.map(_e=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:_e.date}),o.jsx("td",{className:"border p-1",children:_e.category}),o.jsx("td",{className:"border p-1",children:_e.description}),o.jsx("td",{className:"border p-1",children:Cn(_e.amount)}),o.jsx("td",{className:"border p-1",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${_e.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:_e.status})})]},_e.id)),c.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-3 text-center text-gray-500",children:"Sin gastos en el rango seleccionado."})})]})]})}),o.jsxs("div",{className:"md:hidden mb-6",children:[o.jsxs("button",{type:"button",onClick:O,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"Gastos del periodo"}),o.jsxs("div",{className:"text-xs text-gray-600",children:[c.length," registros"]})]}),o.jsx("div",{className:"text-gray-500",children:P?"":""})]}),P&&o.jsx("div",{className:"space-y-2 mt-3",children:c.length===0?o.jsx("div",{className:"border rounded-xl p-3 text-sm text-gray-500 bg-gray-50",children:"Sin gastos en el rango seleccionado."}):c.map(_e=>{const rt=!!I[_e.id],we=_e.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700";return o.jsxs("div",{className:"border rounded-2xl bg-white shadow-sm overflow-hidden",children:[o.jsxs("button",{type:"button",onClick:()=>ut(_e.id),className:"w-full text-left px-3 py-3 flex items-start gap-3",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"font-semibold truncate",children:_e.category}),o.jsx("span",{className:`px-2 py-0.5 rounded text-[11px] ${we}`,children:_e.status})]}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[_e.date,"  ",o.jsx("b",{children:Cn(_e.amount)})]})]}),o.jsx("div",{className:"text-gray-500 text-sm pt-0.5",children:rt?"":""})]}),rt&&o.jsx("div",{className:"px-3 pb-3 text-sm",children:o.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[o.jsx(hf,{label:"Fecha",value:_e.date}),o.jsx(hf,{label:"Categora",value:_e.category}),o.jsx(hf,{label:"Descripcin",value:_e.description||""}),o.jsx(hf,{label:"Monto",value:Cn(_e.amount)}),o.jsx(hf,{label:"Estado",value:_e.status||""})]})})]},_e.id)})})]})]}),m&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h4",{className:"font-semibold text-lg",children:m.name}),o.jsx("button",{type:"button",onClick:()=>p(null),className:"text-sm text-gray-500 hover:text-gray-700",children:""})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Libras/Unidades"}),o.jsx("th",{className:"border p-2",children:"Monto"})]})}),o.jsx("tbody",{children:m.products.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:3,className:"border p-2 text-center text-gray-500",children:"Sin productos asociados."})}):m.products.map(_e=>o.jsxs("tr",{children:[o.jsx("td",{className:"border p-1",children:_e.productName}),o.jsx("td",{className:"border p-1 text-center",children:wi(_e.qty)}),o.jsx("td",{className:"border p-1 text-center",children:Cn(_e.amount)})]},`${_e.productName}-${_e.measurement}`))})]})})]})})]})}function Ni({title:t,value:e,positive:r,subtitle:n}){return o.jsxs("div",{className:"border rounded-2xl p-3 bg-white",children:[o.jsx("div",{className:"text-[13px] sm:text-[17px] text-gray-500",children:t}),n?o.jsx("div",{className:"text-[11px] sm:text-[12px] text-gray-400",children:n}):null,o.jsx("div",{className:`text-[26px] sm:text-[30px] font-bold ${r?"text-green-700":""}`,children:e})]})}function pl({title:t,value:e}){return o.jsxs("div",{className:"border rounded-lg p-3 bg-white",children:[o.jsx("div",{className:"text-[13px] sm:text-[17px] text-gray-500",children:t}),o.jsx("div",{className:"text-[18px] sm:text-[20px] font-semibold",children:e})]})}function mV({title:t,items:e}){return o.jsxs("div",{className:"border rounded-lg p-3 bg-white",children:[o.jsx("div",{className:"text-[11px] text-gray-500 mb-1",children:t}),o.jsx("ul",{className:"text-sm leading-snug list-none pl-0 m-0 space-y-0.5",children:e.length===0?o.jsx("li",{className:"text-gray-500",children:""}):e.map(r=>o.jsxs("li",{children:[r.label," ",r.value??""]},r.key))})]})}function hf({label:t,value:e,valueClass:r}){return o.jsxs("div",{className:"border rounded-xl p-2 bg-gray-50",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:t}),o.jsx("div",{className:`text-sm mt-0.5 ${r||""}`,children:e})]})}const EC=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal","Varios"],Zg=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function P4e(){const{refreshKey:t,refresh:e}=jc(),[r,n]=v.useState(br(Zd(new Date),"yyyy-MM-dd")),[a,s]=v.useState(br(Jd(new Date),"yyyy-MM-dd")),[i,l]=v.useState(br(new Date,"yyyy-MM-dd")),[c,u]=v.useState(""),[d,f]=v.useState(""),[h,A]=v.useState(0),[m,p]=v.useState("PENDIENTE"),[g,x]=v.useState(""),[y,b]=v.useState([]),[w,j]=v.useState(!0),[I,_]=v.useState(""),[S,E]=v.useState(null),[k,P]=v.useState(""),[T,O]=v.useState(""),[W,Ae]=v.useState(""),[de,fe]=v.useState(0),[ge,ee]=v.useState("PENDIENTE"),[Fe,Pe]=v.useState(""),[F,Q]=v.useState(!1),H=()=>Q(le=>!le),[R,z]=v.useState(null),J=le=>z(se=>se===le?null:le);v.useEffect(()=>{(async()=>{j(!0),_("");try{const le=tr(pt(Ge,"expenses"),ln("date","desc")),se=await Lt(le),Be=[];se.forEach(je=>{const ot=je.data();Be.push({id:je.id,date:ot.date||br(new Date,"yyyy-MM-dd"),category:ot.category||"",description:ot.description||"",amount:Number(ot.amount||0),status:ot.status||"PENDIENTE",notes:ot.notes||"",createdAt:ot.createdAt??or.now()})}),b(Be)}catch(le){console.error(le),_(" Error al cargar gastos")}finally{j(!1)}})()},[t]);const D=v.useMemo(()=>y.filter(le=>!(r&&le.date<r||a&&le.date>a)),[y,r,a]),U=v.useMemo(()=>{const le=D.reduce((je,ot)=>je+(ot.amount||0),0),se=D.filter(je=>je.status==="PAGADO").reduce((je,ot)=>je+(ot.amount||0),0),Be=le-se;return{total:le,pagado:se,pendiente:Be}},[D]),ne=()=>{l(br(new Date,"yyyy-MM-dd")),u(""),f(""),A(0),p("PENDIENTE"),x("")},ve=async le=>{if(le.preventDefault(),_(""),!c)return _("Selecciona una categora.");if(!d.trim())return _("Ingresa una descripcin.");if(!h||h<=0)return _("Ingresa un monto vlido.");try{const se={date:i,category:c,description:d.trim(),amount:Number(Number(h||0).toFixed(2)),status:m,notes:g||"",createdAt:or.now()},Be=await wn(pt(Ge,"expenses"),se);b(je=>[{id:Be.id,...se},...je]),ne(),_(" Gasto registrado")}catch(se){console.error(se),_(" Error al guardar gasto")}},L=le=>{_(""),E(le.id),P(le.date),O(le.category||""),Ae(le.description||""),fe(Number(le.amount||0)),ee(le.status||"PENDIENTE"),Pe(le.notes||"")},Ye=()=>{E(null),P(""),O(""),Ae(""),fe(0),ee("PENDIENTE"),Pe("")},ie=async()=>{if(S){if(!T)return _("Selecciona una categora.");if(!W.trim())return _("Ingresa una descripcin.");if(!de||de<=0)return _("Ingresa un monto vlido.");try{const le={date:k,category:T,description:W.trim(),amount:Number(Number(de||0).toFixed(2)),status:ge,notes:Fe||""};await rn(Kt(Ge,"expenses",S),le),b(se=>se.map(Be=>Be.id===S?{...Be,...le}:Be)),Ye(),_(" Gasto actualizado")}catch(le){console.error(le),_(" Error al actualizar gasto")}}},Z=async le=>{if(confirm(`Eliminar el gasto "${le.description}"?`))try{await yn(Kt(Ge,"expenses",le.id)),b(Be=>Be.filter(je=>je.id!==le.id)),_(" Gasto borrado")}catch(Be){console.error(Be),_(" Error al borrar gasto")}},Oe=le=>le==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700";return o.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Gastos (Pollo)"}),o.jsx(Ic,{onClick:e,loading:w})]}),o.jsxs("div",{className:"bg-white p-3 rounded-2xl shadow-2xl border mb-4 flex flex-col sm:flex-row sm:items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:le=>n(le.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:le=>s(le.target.value)})]})]}),o.jsxs("div",{className:"sm:ml-auto text-sm bg-gray-50 border rounded-xl p-3",children:[o.jsx("div",{className:"font-semibold",children:"Totales del rango"}),o.jsxs("div",{children:["Total: ",Zg(U.total)]}),o.jsxs("div",{children:["Pagado: ",Zg(U.pagado)]}),o.jsxs("div",{children:["Pendiente: ",Zg(U.pendiente)]})]})]}),o.jsxs("div",{className:"md:hidden mb-4",children:[o.jsxs("button",{type:"button",onClick:H,className:"w-full text-left px-3 py-3 flex items-center justify-between bg-white border rounded-2xl",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"Crear gasto"}),o.jsxs("div",{className:"text-xs text-gray-600",children:["Fecha: ",i,"  Monto: ",h===0?"":Zg(h)]})]}),o.jsx("div",{className:"text-gray-500",children:F?"":""})]}),F&&o.jsxs("form",{onSubmit:ve,className:"mt-3 bg-white p-4 rounded-2xl shadow-2xl border grid grid-cols-1 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:i,onChange:le=>l(le.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:c,onChange:le=>u(le.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),EC.map(le=>o.jsx("option",{value:le,children:le},le))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:d,onChange:le=>f(le.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:h===0?"":h,onChange:le=>{const se=String(le.target.value||"").replace(",","."),Be=parseFloat(se);A(Number.isFinite(Be)?Math.max(0,Be):0)},placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:le=>p(le.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:g,onChange:le=>x(le.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[g.length,"/500"]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"}),o.jsx("button",{type:"button",className:"bg-gray-200 px-4 py-2 rounded hover:bg-gray-300",onClick:ne,children:"Limpiar"})]})]})]}),o.jsx("div",{className:"hidden md:block",children:o.jsxs("form",{onSubmit:ve,className:"bg-white p-4 rounded-2xl shadow-2xl border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:i,onChange:le=>l(le.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:c,onChange:le=>u(le.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),EC.map(le=>o.jsx("option",{value:le,children:le},le))]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:d,onChange:le=>f(le.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:h===0?"":h,onChange:le=>{const se=String(le.target.value||"").replace(",","."),Be=parseFloat(se);A(Number.isFinite(Be)?Math.max(0,Be):0)},placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:le=>p(le.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:g,onChange:le=>x(le.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[g.length,"/500"]})]}),o.jsxs("div",{className:"md:col-span-2 flex gap-2",children:[o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"}),o.jsx("button",{type:"button",className:"bg-gray-200 px-4 py-2 rounded hover:bg-gray-300",onClick:ne,children:"Limpiar"})]})]})}),o.jsx("div",{className:"block md:hidden space-y-3",children:w?o.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Cargando"}):D.length===0?o.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Sin gastos en el rango seleccionado."}):D.map(le=>{const se=R===le.id,Be=S===le.id;return o.jsxs("div",{className:"bg-white border rounded-2xl overflow-hidden",children:[o.jsxs("button",{type:"button",className:"w-full text-left px-3 py-3 flex items-start justify-between bg-white",onClick:()=>J(le.id),children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-semibold truncate",children:le.description}),o.jsxs("div",{className:"text-xs text-gray-500",children:[le.category||"","  ",le.date]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"font-bold",children:Zg(le.amount)}),o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Oe(le.status)}`,children:le.status})]})]}),se&&o.jsxs("div",{className:"p-3",children:[o.jsx("div",{className:"mt-2 text-xs text-gray-600",children:le.notes?le.notes:""}),Be?o.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 text-sm",children:[o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:k,onChange:je=>P(je.target.value)}),o.jsxs("select",{className:"w-full border p-2 rounded",value:T,onChange:je=>O(je.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),EC.map(je=>o.jsx("option",{value:je,children:je},je))]}),o.jsx("input",{className:"w-full border p-2 rounded",value:W,onChange:je=>Ae(je.target.value)}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:Number.isNaN(de)?"":de,onChange:je=>{const ot=String(je.target.value||"").replace(",","."),mt=parseFloat(ot);fe(Number.isFinite(mt)?Math.max(0,mt):0)}}),o.jsxs("select",{className:"w-full border p-2 rounded",value:ge,onChange:je=>ee(je.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Fe,onChange:je=>Pe(je.target.value),maxLength:500}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:ie,children:"Guardar"}),o.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:Ye,children:"Cancelar"})]})]}):o.jsxs("div",{className:"mt-3 flex gap-2",children:[o.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>L(le),children:"Editar"}),o.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Z(le),children:"Borrar"})]})]})]},le.id)})}),o.jsx("div",{className:"hidden md:block bg-white p-2 rounded-2xl shadow-2xl border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:w?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):D.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):D.map(le=>{const se=S===le.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:se?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:k,onChange:Be=>P(Be.target.value)}):le.date}),o.jsx("td",{className:"p-2 border",children:se?o.jsxs("select",{className:"w-full border p-1 rounded",value:T,onChange:Be=>O(Be.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),EC.map(Be=>o.jsx("option",{value:Be,children:Be},Be))]}):le.category||""}),o.jsx("td",{className:"p-2 border",children:se?o.jsx("input",{className:"w-full border p-1 rounded",value:W,onChange:Be=>Ae(Be.target.value)}):o.jsx("span",{title:le.description,children:le.description.length>45?le.description.slice(0,45)+"":le.description})}),o.jsx("td",{className:"p-2 border",children:se?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(de)?"":de,onChange:Be=>{const je=String(Be.target.value||"").replace(",","."),ot=parseFloat(je);fe(Number.isFinite(ot)?Math.max(0,ot):0)}}):Zg(le.amount)}),o.jsx("td",{className:"p-2 border",children:se?o.jsxs("select",{className:"w-full border p-1 rounded",value:ge,onChange:Be=>ee(Be.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Oe(le.status)}`,children:le.status})}),o.jsx("td",{className:"p-2 border",children:se?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:Fe,onChange:Be=>Pe(Be.target.value),maxLength:500}):o.jsx("span",{title:le.notes||"",children:(le.notes||"").length>45?(le.notes||"").slice(0,45)+"":le.notes||""})}),o.jsx("td",{className:"p-2 border",children:o.jsx("div",{className:"flex gap-2 justify-center",children:se?o.jsxs(o.Fragment,{children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:ie,children:"Guardar"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Ye,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>L(le),children:"Editar"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Z(le),children:"Borrar"})]})})})]},le.id)})})]})}),I&&o.jsx("p",{className:"mt-2 text-sm",children:I})]})}function xS(t){return(t||"").trim().toLowerCase()}async function qte(){const t=await Lt(pt(Ge,"products")),e=new Map;return t.forEach(r=>{const n=r.data(),a=xS(n.name??n.productName);a&&e.set(a,r.id)}),e}async function B4e(t=!1){const e=await qte(),r=await Lt(pt(Ge,"inventory_batches")),n={checked:0,fixed:0,alreadyOk:0,missingName:0,withoutMatch:0,details:[]};for(const a of r.docs){n.checked++;const s=a.data(),i=xS(s.productName);if(!i){n.missingName++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,status:"missingName"});continue}const l=e.get(i);if(!l){n.withoutMatch++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,status:"withoutMatch"});continue}if(s.productId===l){n.alreadyOk++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,newProductId:l,status:"alreadyOk"});continue}t||await rn(Kt(Ge,"inventory_batches",a.id),{productId:l}),n.fixed++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,newProductId:l,status:"fixed"})}return console.group("[fixAllBatchProductIds] Resultado"),console.log("checked:",n.checked),console.log("fixed:",n.fixed),console.log("alreadyOk:",n.alreadyOk),console.log("missingName:",n.missingName),console.log("withoutMatch:",n.withoutMatch),console.groupEnd(),n}async function T4e(t,e=!1){const r=xS(t),a=(await qte()).get(r);if(!a)throw new Error(`No existe un producto activo con nombre "${t}".`);const s=await Lt(pt(Ge,"inventory_batches"));let i=0;for(const l of s.docs){const c=l.data();xS(c.productName)===r&&c.productId!==a&&(e||await rn(Kt(Ge,"inventory_batches",l.id),{productId:a}),i++)}return console.log(`[fixBatchesByProductName] "${t}" fixed: ${i} lote(s)`),i}function k4e(){const[t,e]=v.useState(!1),[r,n]=v.useState(""),a=async()=>{try{e(!0),n("");const c=await B4e(!1);n(` Hecho. Revisados: ${c.checked}, Corregidos: ${c.fixed}, Ok: ${c.alreadyOk}, Sin nombre: ${c.missingName}, Sin match: ${c.withoutMatch}. (Mira consola para detalles)`)}catch(c){n(" Error: "+((c==null?void 0:c.message)||c))}finally{e(!1)}},[s,i]=v.useState(""),l=async()=>{if(!s.trim()){n(" Escribe el nombre del producto.");return}try{e(!0),n("");const c=await T4e(s.trim(),!1);n(` Hecho. Corregidos ${c} lote(s) para "${s}".`)}catch(c){n(" Error: "+((c==null?void 0:c.message)||c))}finally{e(!1)}};return o.jsxs("div",{className:"max-w-xl mx-auto bg-white p-6 rounded shadow border space-y-4",children:[o.jsx("h1",{className:"text-xl font-bold",children:"Herramienta de Migracin de Lotes"}),o.jsxs("p",{className:"text-sm text-gray-600",children:["Corrige los ",o.jsx("code",{children:"inventory_batches.productId"})," basndose en el nombre del producto. salo una sola vez para limpiar datos viejos. Revisa la consola para un log detallado."]}),o.jsx("div",{className:"space-y-2",children:o.jsx("button",{onClick:a,disabled:t,className:"bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo":"Corregir TODOS los lotes"})}),o.jsx("hr",{}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Corregir por nombre:"}),o.jsx("input",{className:"border p-2 rounded w-full",placeholder:'Ej: "Pierna Entera"',value:s,onChange:c=>i(c.target.value)}),o.jsx("button",{onClick:l,disabled:t,className:"bg-indigo-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo":"Corregir lotes de ese producto"})]}),r&&o.jsx("p",{className:"text-sm",children:r})]})}const Hc=t=>`C$${Number(t||0).toFixed(2)}`,ex=t=>Number(t||0).toFixed(3),F4e=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase()),Y5=()=>{const t=new Date;return br(new Date(t.getFullYear(),t.getMonth(),1),"yyyy-MM-dd")},SC=()=>br(new Date,"yyyy-MM-dd");function O4e({paidBatches:t=[],onClose:e,onCreated:r}){const n=Array.isArray(t)?t:[],[a,s]=v.useState(Y5()),[i,l]=v.useState(SC()),[c,u]=v.useState(""),d=v.useMemo(()=>{const ue=new Map;return n.forEach(ce=>ue.set(ce.productId,{id:ce.productId,name:ce.productName})),Array.from(ue.values()).sort((ce,Te)=>ce.name.localeCompare(Te.name))},[n]),f=v.useMemo(()=>n.filter(ue=>!(a&&ue.date<a||i&&ue.date>i||c&&ue.productId!==c)),[n,a,i,c]),[h,A]=v.useState(SC()),[m,p]=v.useState(()=>`FAC-${Date.now().toString().slice(-6)}`),[g,x]=v.useState(""),[y,b]=v.useState([]);v.useEffect(()=>{b(ue=>{const ce=ue.filter(Te=>f.some(Xe=>Xe.id===Te));return ce.length===0&&f.length>0?f.map(Te=>Te.id):ce})},[f]);const[w,j]=v.useState([]),[I,_]=v.useState([]),[S,E]=v.useState(!1),[k,P]=v.useState(Y5()),[T,O]=v.useState(SC());v.useEffect(()=>{(async()=>{try{E(!0);const ue=tr(pt(Ge,"expenses"),ln("date","desc")),ce=await Lt(ue),Te=[];ce.forEach(Xe=>{const ft=Xe.data();Te.push({id:Xe.id,date:ft.date,description:ft.description,amount:Number(ft.amount||0)})}),j(Te)}catch(ue){console.error(ue)}finally{E(!1)}})()},[]);const W=v.useMemo(()=>w.filter(ue=>!(!ue.date||k&&ue.date<k||T&&ue.date>T)),[w,k,T]),[Ae,de]=v.useState([]),[fe,ge]=v.useState(!1),[ee,Fe]=v.useState(""),[Pe,F]=v.useState("DEBITO"),[Q,H]=v.useState(""),R=()=>{const ue=Number(Q);!ee.trim()||!isFinite(ue)||ue<=0||(de(ce=>[...ce,{id:`${Date.now()}_${ce.length+1}`,description:ee.trim(),type:Pe,amount:Number(ue.toFixed(2))}]),Fe(""),H(""))},[z,J]=v.useState(null),[D,U]=v.useState(""),[ne,ve]=v.useState("DEBITO"),[L,Ye]=v.useState(""),ie=ue=>{J(ue.id),U(ue.description),ve(ue.type),Ye(ue.amount.toFixed(2))},Z=()=>{J(null),U(""),ve("DEBITO"),Ye("")},Oe=()=>{if(!z)return;const ue=Number(L);!isFinite(ue)||ue<=0||(de(ce=>ce.map(Te=>Te.id===z?{...Te,description:D.trim(),type:ne,amount:Number(ue.toFixed(2))}:Te)),Z())},le=ue=>{de(ce=>ce.filter(Te=>Te.id!==ue)),z===ue&&Z()},se=(ue,ce)=>{b(Te=>ce?[...new Set([...Te,ue])]:Te.filter(Xe=>Xe!==ue))},Be=ue=>{b(ue?f.map(ce=>ce.id):[])},je=(ue,ce)=>{_(Te=>ce?[...new Set([...Te,ue])]:Te.filter(Xe=>Xe!==ue))},ot=v.useMemo(()=>f.filter(ue=>y.includes(ue.id)),[f,y]),mt=v.useMemo(()=>Ae.filter(ue=>ue.type==="DEBITO").reduce((ue,ce)=>ue+ce.amount,0),[Ae]),ut=v.useMemo(()=>Ae.filter(ue=>ue.type==="CREDITO").reduce((ue,ce)=>ue+ce.amount,0),[Ae]),_e=v.useMemo(()=>{let ue=0,ce=0,Te=0,Xe=0;for(const vt of ot){F4e(vt.unit)?ue+=Number(vt.quantity||0):ce+=Number(vt.quantity||0);const At=vt.expectedTotal??Number((Number(vt.quantity||0)*Number(vt.salePrice||0)).toFixed(2)),ye=vt.invoiceTotal!==void 0&&vt.invoiceTotal!==null?Number(vt.invoiceTotal):Number((Number(vt.quantity||0)*Number(vt.purchasePrice||0)).toFixed(2));Te+=Number(At||0),Xe+=Number(ye||0)}const ft=W.filter(vt=>I.includes(vt.id)).reduce((vt,At)=>vt+Number(At.amount||0),0),gt=Te-ft-mt+ut;return{totalLbs:ue,totalUnits:ce,totalExpected:Number(Te.toFixed(2)),totalInvoiced:Number(Xe.toFixed(2)),totalGastos:Number(ft.toFixed(2)),debits:Number(mt.toFixed(2)),credits:Number(ut.toFixed(2)),finalAmount:Number(gt.toFixed(2)),grossProfit:Number((Te-Xe).toFixed(2))}},[ot,W,I,mt,ut]),[rt,we]=v.useState(!1),[Ce,Ue]=v.useState(""),Ve=async()=>{if(Ue(""),ot.length===0){Ue("Selecciona al menos 1 lote pagado.");return}try{we(!0);const ue={number:m.trim(),date:h,description:g.trim(),status:"PENDIENTE",createdAt:or.now(),totalLbs:Number(ex(_e.totalLbs)),totalUnits:Number(ex(_e.totalUnits)),totalAmount:_e.totalExpected,invoiceTotal:_e.totalInvoiced,totalExpenses:_e.totalGastos,totalDebits:_e.debits,totalCredits:_e.credits,finalAmount:_e.finalAmount,batches:ot.map(ce=>{var Te;return{id:ce.id,productId:ce.productId,productName:ce.productName,unit:ce.unit,quantity:Number(ex(ce.quantity)),salePrice:Number(Number(ce.salePrice||0).toFixed(2)),purchasePrice:Number(Number(ce.purchasePrice||0).toFixed(2)),expectedTotal:Number((Number(ce.quantity||0)*Number(ce.salePrice||0)).toFixed(2)),invoiceTotal:ce.invoiceTotal!==void 0&&ce.invoiceTotal!==null?Number(ce.invoiceTotal):Number((Number(ce.quantity||0)*Number(ce.purchasePrice||0)).toFixed(2)),batchDate:ce.date,paidAt:(Te=ce.paidAt)!=null&&Te.toDate?br(ce.paidAt.toDate(),"yyyy-MM-dd"):null}}),expenses:W.filter(ce=>I.includes(ce.id)).map(ce=>({id:ce.id,date:ce.date||null,description:ce.description||"",amount:Number(Number(ce.amount||0).toFixed(2))})),adjustments:Ae.map(ce=>({id:ce.id,description:ce.description,type:ce.type,amount:Number(ce.amount.toFixed(2))}))};await wn(pt(Ge,"invoices"),ue),Ue(" Factura creada."),r()}catch(ue){console.error(ue),Ue(` Error al crear factura: ${(ue==null?void 0:ue.message)||"desconocido"}`)}finally{we(!1)}};return o.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/40 flex items-center justify-center p-3",children:[o.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-xl shadow-xl p-4 md:p-6 max-h-[90vh] overflow-auto relative",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Crear factura"}),o.jsx("button",{type:"button",onClick:e,className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:h,onChange:ue=>A(ue.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Nmero"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:m,onChange:ue=>p(ue.target.value),placeholder:"FAC-001"})]}),o.jsxs("div",{className:"md:col-span-1",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Descripcin"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:g,onChange:ue=>x(ue.target.value),placeholder:"Comentarios de la factura"})]})]}),o.jsx("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:o.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Desde (lote)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:ue=>s(ue.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Hasta (lote)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:i,onChange:ue=>l(ue.target.value)})]}),o.jsxs("div",{className:"min-w-[220px]",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:c,onChange:ue=>u(ue.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),d.map(ue=>o.jsx("option",{value:ue.id,children:ue.name},ue.id))]})]}),o.jsx("button",{type:"button",className:"ml-auto px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{s(Y5()),l(SC()),u("")},children:"Quitar filtro"})]})}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Lotes pagados"}),o.jsxs("label",{className:"text-sm flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:f.length>0&&y.length===f.length,onChange:ue=>Be(ue.target.checked)}),"Seleccionar todos (sobre el filtro)"]})]}),f.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No hay lotes pagados disponibles en el filtro actual."}):o.jsx("div",{className:"border rounded max-h-80 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Sel"}),o.jsx("th",{className:"p-2 border",children:"Fecha lote"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Unidad"}),o.jsx("th",{className:"p-2 border",children:"Cantidad"}),o.jsx("th",{className:"p-2 border",children:"Precio venta"}),o.jsx("th",{className:"p-2 border",children:"Total facturado"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"Ganancia bruta"}),o.jsx("th",{className:"p-2 border",children:"Fecha pago"})]})}),o.jsx("tbody",{children:f.map(ue=>{var gt;const ce=y.includes(ue.id),Te=ue.expectedTotal??Number((Number(ue.quantity||0)*Number(ue.salePrice||0)).toFixed(2)),Xe=ue.invoiceTotal!==void 0&&ue.invoiceTotal!==null?Number(ue.invoiceTotal):Number((Number(ue.quantity||0)*Number(ue.purchasePrice||0)).toFixed(2)),ft=Te-Xe;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"checkbox",checked:ce,onChange:vt=>se(ue.id,vt.target.checked)})}),o.jsx("td",{className:"p-2 border",children:ue.date}),o.jsx("td",{className:"p-2 border",children:ue.productName}),o.jsx("td",{className:"p-2 border",children:(ue.unit||"").toUpperCase()}),o.jsx("td",{className:"p-2 border",children:ex(ue.quantity)}),o.jsx("td",{className:"p-2 border",children:Hc(ue.salePrice)}),o.jsx("td",{className:"p-2 border",children:Hc(Xe)}),o.jsx("td",{className:"p-2 border",children:Hc(Te)}),o.jsx("td",{className:"p-2 border",children:Hc(ft)}),o.jsx("td",{className:"p-2 border",children:(gt=ue.paidAt)!=null&&gt.toDate?br(ue.paidAt.toDate(),"yyyy-MM-dd"):""})]},ue.id)})})]})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Gastos a incluir (opcional)"}),S&&o.jsx("span",{className:"text-xs text-gray-500",children:"Cargando"}),o.jsxs("div",{className:"ml-auto flex items-end gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Desde (gasto)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:k,onChange:ue=>P(ue.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta (gasto)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:T,onChange:ue=>O(ue.target.value)})]})]})]}),W.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No hay gastos en el rango seleccionado."}):o.jsx("div",{className:"border rounded max-h-48 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Sel"}),o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"})]})}),o.jsx("tbody",{children:W.map(ue=>{const ce=I.includes(ue.id);return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"checkbox",checked:ce,onChange:Te=>je(ue.id,Te.target.checked)})}),o.jsx("td",{className:"p-2 border",children:ue.date||""}),o.jsx("td",{className:"p-2 border",children:ue.description||""}),o.jsx("td",{className:"p-2 border",children:Hc(Number(ue.amount||0))})]},ue.id)})})]})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Notas Crdito/Dbito (Cargos extras)"}),o.jsx("button",{type:"button",className:"ml-auto px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>ge(!0),children:"Crear Cargo"})]}),Ae.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"Sin cargos agregados."}):o.jsx("div",{className:"border rounded max-h-40 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:Ae.map(ue=>{const ce=z===ue.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:ce?o.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[70px]",value:D,onChange:Te=>U(Te.target.value)}):o.jsx("span",{title:ue.description,children:ue.description.length>60?`${ue.description.slice(0,60)}`:ue.description})}),o.jsx("td",{className:"p-2 border",children:ce?o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:ne,onChange:Te=>ve(Te.target.value),children:[o.jsx("option",{value:"DEBITO",children:"Dbito"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ue.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:ue.type})}),o.jsx("td",{className:"p-2 border",children:ce?o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1 text-right",value:L,onChange:Te=>Ye(Te.target.value)}):Hc(ue.amount)}),o.jsx("td",{className:"p-2 border",children:ce?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:Oe,children:"Guardar"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:Z,children:"Cancelar"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>le(ue.id),children:"Eliminar"})]}):o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-indigo-600 text-white hover:bg-indigo-700 text-xs",onClick:()=>ie(ue),children:"Editar"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>le(ue.id),children:"Eliminar"})]})})]},ue.id)})})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-4 justify-between",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:["Total libras: ",o.jsx("strong",{children:ex(_e.totalLbs)})]}),o.jsxs("div",{children:["Total unidades: ",o.jsx("strong",{children:ex(_e.totalUnits)})]})]}),o.jsxs("div",{className:"space-y-1 text-center",children:[o.jsxs("div",{children:["Total facturado (costo):"," ",o.jsx("strong",{children:Hc(_e.totalInvoiced)})]}),o.jsxs("div",{children:["Total esperado (ventas):"," ",o.jsx("strong",{children:Hc(_e.totalExpected)})]}),o.jsxs("div",{children:["Ganancia bruta (esperado  facturado):"," ",o.jsx("strong",{children:Hc(_e.grossProfit)})]})]}),o.jsxs("div",{className:"space-y-1 text-right",children:[o.jsxs("div",{children:["Gastos: ",o.jsx("strong",{children:Hc(_e.totalGastos)})]}),o.jsxs("div",{children:["Dbitos: ",o.jsx("strong",{children:Hc(_e.debits)})]}),o.jsxs("div",{children:["Crditos: ",o.jsx("strong",{children:Hc(_e.credits)})]})]}),o.jsx("div",{className:"md:col-span-3 mt-3",children:o.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-center font-semibold text-lg",children:["Monto final (esperado  gastos  dbitos + crditos):"," ",o.jsx("span",{className:"text-blue-700",children:Hc(_e.finalAmount)})]})})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",disabled:rt,onClick:Ve,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",children:rt?"Creando":"Crear factura"}),o.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border rounded",children:"Cancelar"}),Ce&&o.jsx("span",{className:"text-sm ml-2",children:Ce})]}),rt&&o.jsxs("div",{className:"absolute inset-0 z-[11000] bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center gap-3",children:[o.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),o.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Creando factura"})]})]}),fe&&o.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/50 flex items-center justify-center p-3",children:o.jsxs("div",{className:"bg-white w-full max-w-lg rounded-xl shadow-xl p-4",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx("h4",{className:"font-semibold",children:"Nuevo cargo"}),o.jsx("button",{type:"button",className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",onClick:()=>ge(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripcin"}),o.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[90px]",value:ee,onChange:ue=>Fe(ue.target.value),placeholder:"Detalle del cargo"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Tipo de cargo"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:Pe,onChange:ue=>F(ue.target.value),children:[o.jsx("option",{value:"DEBITO",children:"Dbito"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:Q,onChange:ue=>H(ue.target.value),placeholder:"0.00"})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:R,children:"Agregar"})})]})]})})]})}const Iu=t=>`C$ ${Number(t||0).toFixed(2)}`,cc=t=>Number(t||0).toFixed(3),D4e=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase());function R4e(){const[t,e]=v.useState([]),[r,n]=v.useState(!0),[a,s]=v.useState(!1),[i,l]=v.useState(null),[c,u]=v.useState(br(new Date(new Date().getFullYear(),new Date().getMonth(),1),"yyyy-MM-dd")),[d,f]=v.useState(br(new Date,"yyyy-MM-dd")),[h,A]=v.useState(""),[m,p]=v.useState(!1),{refreshKey:g,refresh:x}=jc(),[y,b]=v.useState(!1),w=()=>b(O=>!O),[j,I]=v.useState(null),_=O=>I(W=>W===O?null:O);v.useEffect(()=>{(async()=>{n(!0);const O=tr(pt(Ge,"inventory_batches"),sr("status","==","PAGADO"),ln("date","desc")),W=await Lt(O),Ae=[];W.forEach(de=>{const fe=de.data(),ge=Number(fe.quantity||0),ee=Number(fe.remaining||0),Fe=Number(fe.purchasePrice||0),Pe=Number(fe.salePrice||0),F=Number((ge*Fe).toFixed(2)),Q=Number((ge*Pe).toFixed(2));Ae.push({id:de.id,productId:fe.productId,productName:fe.productName,category:fe.category,unit:fe.unit,quantity:ge,remaining:ee,purchasePrice:Fe,salePrice:Pe,invoiceTotal:fe.invoiceTotal!=null?Number(fe.invoiceTotal):F,expectedTotal:fe.expectedTotal!=null?Number(fe.expectedTotal):Q,date:fe.date,status:fe.status,paidAt:fe.paidAt})}),e(Ae),n(!1)})()},[g]);const S=v.useMemo(()=>t.filter(O=>!(c&&O.date<c||d&&O.date>d||h&&O.productId!==h)),[t,c,d,h]),E=v.useMemo(()=>{let O=0,W=0,Ae=0,de=0,fe=0,ge=0;for(const ee of S)D4e(ee.unit)?(O+=ee.quantity,W+=ee.remaining):(Ae+=ee.quantity,de+=ee.remaining),fe+=Number(ee.expectedTotal||0),ge+=Number(ee.invoiceTotal||0);return{lbsIng:O,lbsRem:W,udsIng:Ae,udsRem:de,totalEsperado:fe,totalFact:ge,gross:fe-ge}},[S]),k=O=>{l(O),s(!0)},P=async()=>{if(i)try{const O=Kt(Ge,"inventory_batches",i.id);await rn(O,{status:"PENDIENTE",remaining:i.quantity});const W=pt(Ge,"salesV2"),Ae=await Lt(tr(W,sr("batchId","==",i.id))),de=await Lt(tr(W,sr("productName","==",i.productName),sr("date","==",i.date))),fe=[...Ae.docs,...de.docs];for(const ge of fe)await yn(Kt(Ge,"salesV2",ge.id));s(!1),l(null),x()}catch(O){console.error("Error al marcar pendiente:",O)}},T=v.useMemo(()=>{const O=new Map;return t.forEach(W=>O.set(W.productId,{id:W.productId,name:W.productName})),Array.from(O.values()).sort((W,Ae)=>W.name.localeCompare(Ae.name))},[t]);return o.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Pagados"}),o.jsx(Ic,{onClick:x,loading:r})]}),o.jsxs("div",{className:"bg-white p-3 rounded-2xl shadow-2xl border mb-4 flex flex-col sm:flex-row sm:items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-wrap gap-3",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:O=>u(O.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:O=>f(O.target.value)})]}),o.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[o.jsx("label",{className:"font-semibold",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:h,onChange:O=>A(O.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),T.map(O=>o.jsx("option",{value:O.id,children:O.name},O.id))]})]}),o.jsx("button",{type:"button",className:"px-3 py-1 rounded-2xl bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f(""),A("")},children:"Quitar filtro"})]}),o.jsx("button",{type:"button",className:"sm:ml-auto px-3 py-2 rounded-2xl bg-blue-600 text-white hover:bg-blue-700",onClick:()=>p(!0),children:"Crear factura"})]}),o.jsxs("div",{className:"mb-3",children:[o.jsxs("div",{className:"md:hidden",children:[o.jsxs("button",{type:"button",onClick:w,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"Totales"}),o.jsxs("div",{className:"text-xs text-gray-600",children:["Libras: ",o.jsx("b",{children:cc(E.lbsIng)}),"  Restantes:"," ",o.jsx("b",{children:cc(E.lbsRem)})]})]}),o.jsx("div",{className:"text-gray-500",children:y?"":""})]}),y&&o.jsx("div",{className:"mt-3 bg-gray-50 p-3 rounded-2xl shadow-2xl border text-base",children:o.jsxs("div",{className:"grid grid-cols-2 gap-y-2 gap-x-8",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",cc(E.lbsIng)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",cc(E.udsIng)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",Iu(E.totalEsperado)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",cc(E.lbsRem)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",cc(E.udsRem)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",Iu(E.totalFact)]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",Iu(E.gross)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes:"})," ",S.length.toLocaleString()]})]})})]}),o.jsx("div",{className:"hidden md:block bg-gray-50 p-3 rounded-2xl shadow-2xl border mb-3 text-base",children:o.jsxs("div",{className:"grid grid-cols-2 gap-y-2 gap-x-8",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",cc(E.lbsIng)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",cc(E.udsIng)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",Iu(E.totalEsperado)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",cc(E.lbsRem)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",cc(E.udsRem)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",Iu(E.totalFact)]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",Iu(E.gross)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes:"})," ",S.length.toLocaleString()]})]})})]}),o.jsx("div",{className:"block md:hidden space-y-3",children:r?o.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Cargando"}):S.length===0?o.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Sin lotes pagados"}):S.map(O=>{var Ae;const W=j===O.id;return o.jsxs("div",{className:"bg-white border rounded-2xl overflow-hidden",children:[o.jsxs("button",{type:"button",onClick:()=>_(O.id),className:"w-full text-left px-3 py-3 flex items-center justify-between bg-white",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-semibold truncate",children:O.productName}),o.jsxs("div",{className:"text-xs text-gray-500 truncate",children:[(O.category||"").toUpperCase(),"  ",O.date," "," ",(O.unit||"").toUpperCase()]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-sm font-bold",children:Iu(O.expectedTotal||0)}),o.jsx("div",{className:"text-[11px] text-gray-500",children:W?"Detalles":"Esperado"})]})]}),W&&o.jsxs("div",{className:"p-3",children:[o.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Ingresado"}),o.jsx("div",{className:"font-semibold",children:cc(O.quantity)})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Restantes"}),o.jsx("div",{className:"font-semibold",children:cc(O.remaining)})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Costo"}),o.jsx("div",{className:"font-semibold",children:Iu(O.invoiceTotal||0)})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Fecha pago"}),o.jsx("div",{className:"font-semibold",children:(Ae=O.paidAt)!=null&&Ae.toDate?br(O.paidAt.toDate(),"yyyy-MM-dd"):""})]})]}),o.jsx("div",{className:"mt-3",children:o.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>k(O),children:"Marcar PENDIENTE"})})]})]},O.id)})}),o.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow-2xl border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Unidad"}),o.jsx("th",{className:"p-2 border",children:"Ingresado"}),o.jsx("th",{className:"p-2 border",children:"Restantes"}),o.jsx("th",{className:"p-2 border",children:"Precio Compra"}),o.jsx("th",{className:"p-2 border",children:"Precio Venta"}),o.jsx("th",{className:"p-2 border",children:"Total factura"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"Fecha pago"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):S.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin lotes pagados"})}):S.map(O=>{var W;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:O.date}),o.jsx("td",{className:"p-2 border",children:(O.category||"").toUpperCase()}),o.jsx("td",{className:"p-2 border",children:O.productName}),o.jsx("td",{className:"p-2 border",children:(O.unit||"").toUpperCase()}),o.jsx("td",{className:"p-2 border",children:cc(O.quantity)}),o.jsx("td",{className:"p-2 border",children:cc(O.remaining)}),o.jsx("td",{className:"p-2 border",children:Iu(O.purchasePrice)}),o.jsx("td",{className:"p-2 border",children:Iu(O.salePrice)}),o.jsx("td",{className:"p-2 border",children:Iu(O.invoiceTotal||0)}),o.jsx("td",{className:"p-2 border",children:Iu(O.expectedTotal||0)}),o.jsx("td",{className:"p-2 border",children:(W=O.paidAt)!=null&&W.toDate?br(O.paidAt.toDate(),"yyyy-MM-dd"):""}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>k(O),children:"Marcar PENDIENTE"})})]},O.id)})})]})}),m&&o.jsx(O4e,{paidBatches:t,onClose:()=>p(!1),onCreated:()=>p(!1)}),a&&i&&o.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50 p-3",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-md",children:[o.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Confirmar accin"}),o.jsxs("p",{className:"text-gray-700 mb-4",children:["Seguro que quieres marcar pendiente este inventario?",o.jsx("br",{}),"Al hacerlo, las libras se restaurarn y se eliminarn las ventas generadas."]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:()=>s(!1),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-xl",children:"Cancelar"}),o.jsx("button",{type:"button",onClick:P,className:"px-4 py-2 bg-yellow-600 text-white hover:bg-yellow-700 rounded-xl",children:"Confirmar"})]})]})})]})}const fo=t=>`C$ ${(Number(t)||0).toFixed(2)}`,M4e=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function IC(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function L4e(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function U4e(t){const e="ROP",r=IC(t.subcat).slice(0,3)||"GEN",n=L4e(t.gender),a=IC(t.color).slice(0,3)||"COL",s=IC(t.size)||"TLL",i=IC(t.brand).slice(0,4)||"BRD",l=Date.now().toString(36).toUpperCase().slice(-4);return`${e}-${r}-${n}-${a}-${s}-${i}-${l}`}const iy=/^[A-Za-z0-9._-]{0,32}$/;function Q4e(){const[t,e]=v.useState([]),[r,n]=v.useState([]),[a,s]=v.useState(!0),[i,l]=v.useState(""),[c,u]=v.useState(br(Zd(new Date),"yyyy-MM-dd")),[d,f]=v.useState(br(Jd(new Date),"yyyy-MM-dd")),[h,A]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(br(new Date,"yyyy-MM-dd")),[y,b]=v.useState(0),[w,j]=v.useState(0),[I,_]=v.useState(0),[S,E]=v.useState(0),[k,P]=v.useState(0),[T,O]=v.useState(""),[W,Ae]=v.useState(""),[de,fe]=v.useState(""),[ge,ee]=v.useState(""),[Fe,Pe]=v.useState(""),[F,Q]=v.useState(""),[H,R]=v.useState(""),[z,J]=v.useState(!1),[D,U]=v.useState(""),[ne,ve]=v.useState("Camisa"),[L,Ye]=v.useState(null),[ie,Z]=v.useState(""),[Oe,le]=v.useState(0),[se,Be]=v.useState(0),[je,ot]=v.useState(0),[mt,ut]=v.useState(0),[_e,rt]=v.useState(0),[we,Ce]=v.useState(""),[Ue,Ve]=v.useState(""),[ue,ce]=v.useState(""),[Te,Xe]=v.useState(""),[ft,gt]=v.useState(""),[vt,At]=v.useState(""),[ye,$e]=v.useState(""),[Ne,ct]=v.useState(null),[xe,Qe]=v.useState({x:0,y:0}),[dt,Bt]=v.useState(!1);v.useEffect(()=>{const V=()=>ct(null),X=me=>me.key==="Escape"&&ct(null);return document.addEventListener("click",V),document.addEventListener("keydown",X),()=>{document.removeEventListener("click",V),document.removeEventListener("keydown",X)}},[]);const qe=(V,X,me=192,Ie=160)=>{let pe=V;V+me+8>window.innerWidth&&(pe=V-me),pe=Math.max(8,Math.min(pe,window.innerWidth-me-8));let ke=X;return X+Ie+8>window.innerHeight&&(ke=window.innerHeight-Ie-8),ke=Math.max(8,Math.min(ke,window.innerHeight-Ie-8)),{x:pe,y:ke}},bt=(V,X)=>{V.stopPropagation();const me=V.currentTarget.getBoundingClientRect(),Ie=me.right,Y=me.bottom,pe=qe(Ie,Y);Qe(pe),ct(ke=>ke===X?null:X)};v.useEffect(()=>{const V=()=>ct(null),X=me=>{me.key==="Escape"&&ct(null)};return document.addEventListener("click",V),document.addEventListener("keydown",X),()=>{document.removeEventListener("click",V),document.removeEventListener("keydown",X)}},[]),v.useEffect(()=>{if(!Ne)return;const V=()=>ct(null);return window.addEventListener("scroll",V,!0),window.addEventListener("resize",V),()=>{window.removeEventListener("scroll",V,!0),window.removeEventListener("resize",V)}},[Ne]),v.useEffect(()=>{(async()=>{const V=await Lt(pt(Ge,"products_clothes")),X=[];V.forEach(pe=>{const ke=pe.data();X.push({id:pe.id,name:ke.name??"(sin nombre)",category:ke.category??"(sin categora)",measurement:ke.measurement??"unidad",price:Number(ke.price??0),sku:ke.sku||"",size:ke.size||"",color:ke.color||"",gender:ke.gender||"",brand:ke.brand||""})}),e(X);const me=tr(pt(Ge,"inventory_clothes_batches"),ln("date","desc")),Ie=await Lt(me),Y=[];Ie.forEach(pe=>{const ke=pe.data();Y.push({id:pe.id,productId:ke.productId,productName:ke.productName,category:ke.category,unit:ke.unit,quantity:Number(ke.quantity||0),remaining:Number(ke.remaining??ke.quantity??0),purchasePrice:Number(ke.purchasePrice||0),salePrice:Number(ke.salePrice||0),invoiceTotal:Number(ke.invoiceTotal??Number(ke.quantity||0)*Number(ke.purchasePrice||0)),expectedTotal:Number(ke.expectedTotal??Number(ke.quantity||0)*Number(ke.salePrice||0)),date:ke.date,createdAt:ke.createdAt,status:ke.status,notes:ke.notes||"",sku:ke.sku||"",size:ke.size||"",color:ke.color||"",gender:ke.gender||"",brand:ke.brand||"",clientCode:ke.clientCode||""})}),n(Y),s(!1)})()},[]),v.useEffect(()=>{const V=t.find(X=>X.id===m);V&&(_(Number(V.price||0)),V.sku&&Ae(V.sku),V.size&&fe(X=>X||V.size),V.color&&ee(X=>X||V.color),V.gender&&Pe(X=>X||V.gender),V.brand&&Q(X=>X||V.brand))},[m,t]),v.useEffect(()=>{E(Math.floor(y*w*100)/100)},[y,w]),v.useEffect(()=>{P(Math.floor(y*I*100)/100)},[y,I]),v.useEffect(()=>{const V=t.find(Ie=>Ie.id===m);if(V!=null&&V.sku){Ae(V.sku);return}const X=z&&ne?ne:(V==null?void 0:V.category)||"";if(!X&&!Fe&&!ge&&!de&&!F){Ae("");return}const me=U4e({subcat:X,gender:Fe||"",color:ge||"",size:de||"",brand:F||""});Ae(me)},[z,ne,m,Fe,ge,de,F,t]);const G=v.useMemo(()=>r.filter(V=>!(c&&V.date<c||d&&V.date>d||h&&V.productId!==h)),[r,c,d,h]),te=v.useMemo(()=>{const V=G.reduce((Y,pe)=>Y+(pe.invoiceTotal||0),0),X=G.reduce((Y,pe)=>Y+(pe.expectedTotal||0),0),me=G.reduce((Y,pe)=>Y+pe.quantity,0),Ie=G.reduce((Y,pe)=>Y+pe.remaining,0);return{udsIng:me,udsRem:Ie,totalFacturado:V,totalEsperado:X}},[G]),He=async V=>{V.preventDefault(),l("");const X=!!m&&!z,me=t.find(ke=>ke.id===m),Ie=X?(me==null?void 0:me.name)||"":D||"",Y=X?(me==null?void 0:me.category)||"":ne||"General",pe=X&&(me==null?void 0:me.measurement)||"unidad";if(!Ie||y<=0||w<=0){l("Completa nombre/cantidad/costo.");return}if(H&&!iy.test(H)){l("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}try{const ke=await wn(pt(Ge,"inventory_clothes_batches"),{productId:X?me.id:"",productName:Ie,category:Y,unit:pe,quantity:y,remaining:y,purchasePrice:w,salePrice:I,invoiceTotal:S,expectedTotal:k,date:g,createdAt:or.now(),status:"PENDIENTE",notes:T||"",sku:W||"",size:de||"",color:ge||"",gender:Fe||"",brand:F||"",clientCode:H||""});n(Re=>[{id:ke.id,productId:X?me.id:"",productName:Ie,category:Y,unit:pe,quantity:y,remaining:y,purchasePrice:w,salePrice:I,invoiceTotal:S,expectedTotal:k,date:g,createdAt:or.now(),status:"PENDIENTE",notes:T||"",sku:W||"",size:de||"",color:ge||"",gender:Fe||"",brand:F||"",clientCode:H||""},...Re]),l(" Lote de ropa creado"),p(""),x(br(new Date,"yyyy-MM-dd")),b(0),j(0),_(0),E(0),P(0),O(""),Ae(""),fe(""),ee(""),Pe(""),Q(""),R(""),J(!1),U(""),ve("Camisa")}catch(ke){console.error(ke),l(" Error al crear lote")}},re=async V=>{confirm(`Marcar PAGADO el lote del ${V.date} (${V.productName})?`)&&(await rn(Kt(Ge,"inventory_clothes_batches",V.id),{status:"PAGADO"}),n(me=>me.map(Ie=>Ie.id===V.id?{...Ie,status:"PAGADO"}:Ie)))},be=V=>{Ye(V.id),Z(V.date),le(V.quantity),Be(V.purchasePrice),ot(V.salePrice),ut(Number((V.quantity*V.purchasePrice).toFixed(2))),rt(Number((V.quantity*V.salePrice).toFixed(2))),Ce(V.notes||""),Ve(V.sku||""),ce(V.size||""),Xe(V.color||""),gt(V.gender||""),At(V.brand||""),$e(V.clientCode||"")},Me=()=>{Ye(null),Z(""),le(0),Be(0),ot(0),ut(0),rt(0),Ce(""),Ve(""),ce(""),Xe(""),gt(""),At(""),$e("")};v.useEffect(()=>{L&&ut(Math.floor(Oe*se*100)/100)},[L,Oe,se]),v.useEffect(()=>{L&&rt(Math.floor(Oe*je*100)/100)},[L,Oe,je]);const tt=async()=>{if(!L)return;const V=r.find(Y=>Y.id===L);if(!V)return;const X=Math.max(0,V.quantity-V.remaining),me=Math.max(0,Oe-X);if(ye&&!iy.test(ye)){l("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}const Ie=Kt(Ge,"inventory_clothes_batches",L);await rn(Ie,{date:ie,quantity:Oe,purchasePrice:se,salePrice:je,invoiceTotal:mt,expectedTotal:_e,notes:we,remaining:me,sku:Ue,size:ue,color:Te,gender:ft||"",brand:vt||"",clientCode:ye||""}),n(Y=>Y.map(pe=>pe.id===L?{...pe,date:ie,quantity:Oe,purchasePrice:se,salePrice:je,invoiceTotal:mt,expectedTotal:_e,notes:we,remaining:me,sku:Ue,size:ue,color:Te,gender:ft||"",brand:vt||"",clientCode:ye||""}:pe)),Me(),l(" Lote actualizado")},lt=async V=>{confirm(`Eliminar el lote del ${V.date} (${V.productName})?`)&&(await yn(Kt(Ge,"inventory_clothes_batches",V.id)),n(me=>me.filter(Ie=>Ie.id!==V.id)),l(" Lote eliminado"))},ae=()=>{const V=(c?`Desde ${c}`:"Desde inicio")+"  "+(d?`Hasta ${d}`:"Hasta hoy"),X=pe=>(pe||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),me=G.map(pe=>`
      <tr>
        <td>${pe.date}</td>
        <td>${(pe.category||"").toUpperCase()}</td>
        <td>${X(pe.productName)}</td>
        <td>${X(pe.sku||"")}</td>
        <td>${X(pe.size||"")}</td>
        <td>${X(pe.color||"")}</td>
        <td>${X(pe.clientCode||"")}</td>
        <td>${X(pe.gender||"")}</td>
        <td>${(pe.unit||"").toUpperCase()}</td>
        <td style="text-align:right">${pe.quantity.toFixed(0)}</td>
        <td style="text-align:right">${pe.remaining.toFixed(0)}</td>
        <td style="text-align:right">${fo(pe.purchasePrice)}</td>
        <td style="text-align:right">${fo(pe.salePrice)}</td>
        <td style="text-align:right">${fo(pe.invoiceTotal||0)}</td>
        <td style="text-align:right">${fo(pe.expectedTotal||0)}</td>
        <td>${X((pe.notes||"").slice(0,120))}</td>
        <td>${pe.status}</td>
      </tr>`).join(""),Ie=`
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Inventario de Ropa por Lotes</title>
  <style>
    * { font-family: Arial, sans-serif; }
    h1 { margin: 0 0 4px; }
    .muted { color: #555; font-size: 12px; margin-bottom: 12px; }
    table { width: 100%; border-collapse: collapse; font-size: 11px; }
    th, td { border: 1px solid #ddd; padding: 6px; }
    th { background: #f5f5f5; text-align: left; }
    .totals { margin: 10px 0 16px; font-size: 12px; display: grid; grid-template-columns: repeat(2, max-content); column-gap: 32px; row-gap: 6px; align-items: center; }
    @media print { @page { size: A4 landscape; margin: 12mm; } button { display: none; } }
  </style>
</head>
<body>
  <button onclick="window.print()">Imprimir</button>
  <h1>Inventario de Ropa por Lotes</h1>
  <div class="muted">${V}</div>
  <div class="totals">
    <span><strong>Unidades ingresadas:</strong> ${te.udsIng.toFixed(0)}</span>
    <span><strong>Unidades restantes:</strong> ${te.udsRem.toFixed(0)}</span>
    <span><strong>Total esperado a ganar:</strong> ${fo(te.totalEsperado)}</span>
    <span><strong>Total facturado:</strong> ${fo(te.totalFacturado)}</span>
    <span><strong>Ganancia sin gastos:</strong> ${fo(Number((te.totalEsperado-te.totalFacturado).toFixed(2)))}</span>
  </div>
  <table>
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Subcat.</th>
        <th>Producto</th>
        <th>SKU</th>
        <th>Talla</th>
        <th>Color</th>
        <th>Cdigo Cliente</th>
        <th>Gnero</th>
        <th>Unidad</th>
        <th>Ingresado</th>
        <th>Restantes</th>
        <th>Precio Compra</th>
        <th>Precio Venta</th>
        <th>Total factura</th>
        <th>Total esperado</th>
        <th>Comentario</th>
        <th>Estado</th>
      </tr>
    </thead>
    <tbody>${me||'<tr><td colspan="17" style="text-align:center">Sin lotes</td></tr>'}</tbody>
  </table>
</body>
</html>`,Y=window.open("","_blank");Y&&(Y.document.open(),Y.document.write(Ie),Y.document.close())};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Inventario de Ropa"}),o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>Bt(!0),type:"button",children:"Crear Inventario"})]}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:V=>u(V.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:V=>f(V.target.value)})]}),o.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[o.jsx("label",{className:"font-semibold",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:h,onChange:V=>A(V.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),t.map(V=>o.jsxs("option",{value:V.id,children:[V.name,"  ",V.category]},V.id))]})]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f(""),A("")},children:"Quitar filtro"}),o.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:ae,children:"Imprimir PDF"})]}),o.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-base",children:o.jsxs("div",{className:"grid grid-cols-3 gap-y-2 gap-x-8",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",te.udsIng.toFixed(0)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",te.udsRem.toFixed(0)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",fo(te.totalEsperado)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",fo(te.totalFacturado)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",fo(Number((te.totalEsperado-te.totalFacturado).toFixed(2)))]})]})}),o.jsx("div",{className:"bg-white rounded shadow border",children:o.jsx("div",{className:"w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Fecha"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden sm:table-cell",children:"Subcat."}),o.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"SKU"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Talla"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Color"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Cdigo Cliente"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Gnero"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Unidad"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Ingresado"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Restantes"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Compra"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Venta"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total factura"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total esperado"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Comentario"}),o.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Estado"}),o.jsx("th",{className:"p-2 md:p-3 border text-center",children:"Acciones"})]})}),o.jsx("tbody",{className:"whitespace-nowrap",children:a?o.jsx("tr",{children:o.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Cargando"})}):G.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Sin lotes"})}):G.map(V=>{const X=L===V.id;return o.jsxs("tr",{className:"text-left",children:[o.jsx("td",{className:"p-2 md:p-3 border align-top",children:X?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:ie,onChange:me=>Z(me.target.value)}):V.date}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden sm:table-cell",children:(V.category||"").toUpperCase()}),o.jsx("td",{className:"p-2 md:p-3 border align-top max-w-[220px] md:max-w-[320px]",children:o.jsx("span",{className:"block truncate",title:V.productName,children:V.productName})}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell max-w-[220px]",children:X?o.jsx("input",{className:"w-full border p-1 rounded",value:Ue,onChange:me=>Ve(me.target.value)}):o.jsx("span",{className:"block truncate",title:V.sku||"",children:V.sku||""})}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:X?o.jsx("input",{className:"w-full border p-1 rounded",value:ue,onChange:me=>ce(me.target.value)}):V.size||""}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:X?o.jsx("input",{className:"w-full border p-1 rounded",value:Te,onChange:me=>Xe(me.target.value)}):V.color||""}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[200px]",children:X?o.jsx("input",{className:"w-full border p-1 rounded",value:ye,onChange:me=>{const Ie=me.target.value;iy.test(Ie)&&$e(Ie)},placeholder:"Ej: LOTE-SHEIN-SEP-01",title:"AZ 09 . _ - (mx 32)"}):o.jsx("span",{className:"block truncate",title:V.clientCode||"",children:V.clientCode||""})}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:X?o.jsx("select",{className:"w-full border p-1 rounded",value:ft,onChange:me=>gt(me.target.value),children:M4e.map(me=>o.jsx("option",{value:me,children:me||""},me))}):V.gender||""}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:(V.unit||"").toUpperCase()}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:X?o.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-20 border p-1 rounded text-right",value:Number.isNaN(Oe)?"":Oe,onChange:me=>le(Math.max(0,parseInt(me.target.value||"0",10)))}):V.quantity.toFixed(0)}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:X?V.remaining:V.remaining.toFixed(0)}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:X?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(se)?"":se,onChange:me=>Be(Math.max(0,parseFloat(me.target.value||"0")))}):fo(V.purchasePrice)}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:X?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(je)?"":je,onChange:me=>ot(Math.max(0,parseFloat(me.target.value||"0")))}):fo(V.salePrice)}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:fo(X?mt:V.invoiceTotal||0)}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:fo(X?_e:V.expectedTotal||0)}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[280px]",children:X?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:we,onChange:me=>Ce(me.target.value),maxLength:500}):o.jsx("span",{className:"block truncate",title:V.notes||"",children:V.notes||""})}),o.jsx("td",{className:"p-2 md:p-3 border align-top",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] md:text-xs ${V.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:V.status})}),o.jsx("td",{className:"p-2 md:p-3 border align-top",children:X?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:tt,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Me,children:"Cancelar"})]}):o.jsx("button",{type:"button",className:"inline-flex items-center justify-center w-8 h-8 rounded border border-gray-200 hover:bg-gray-100",title:"Acciones",onClick:me=>bt(me,V.id),children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor",children:[o.jsx("circle",{cx:"12",cy:"5",r:"1.6"}),o.jsx("circle",{cx:"12",cy:"12",r:"1.6"}),o.jsx("circle",{cx:"12",cy:"19",r:"1.6"})]})})})]},V.id)})})]})})}),Ne&&su.createPortal(o.jsxs(o.Fragment,{children:[o.jsx("div",{onClick:()=>ct(null),className:"fixed inset-0 z-[60]"}),o.jsx("div",{className:"fixed z-[61] w-44 rounded-md border border-gray-200 bg-white shadow-xl",style:{left:xe.x,top:xe.y},onClick:V=>V.stopPropagation(),role:"menu","aria-orientation":"vertical",children:o.jsxs("div",{className:"py-1 text-sm",children:[(()=>{const V=G.find(X=>X.id===Ne);return(V==null?void 0:V.status)==="PENDIENTE"?o.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-green-50",onClick:()=>{ct(null),re(V)},children:" Pagar"}):null})(),o.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-yellow-50",onClick:()=>{const V=G.find(X=>X.id===Ne);V&&(ct(null),be(V))},children:" Editar"}),o.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-red-50 text-red-600",onClick:()=>{const V=G.find(X=>X.id===Ne);V&&(ct(null),lt(V))},children:" Borrar"})]})})]}),document.body),dt&&su.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>Bt(!1)}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-4xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:"Crear Inventario (Lote)"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Bt(!1),type:"button",children:"Cerrar"})]}),o.jsxs("form",{onSubmit:He,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto de ropa"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:V=>p(V.target.value),children:[o.jsx("option",{value:"",children:"(Opcional) Selecciona un producto"}),t.map(V=>o.jsxs("option",{value:V.id,children:[V.name,"  ",V.category,"  ",V.sku?`SKU: ${V.sku}`:""]},V.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del lote"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:g,onChange:V=>x(V.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (pzas)"}),o.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-full border p-2 rounded",value:y===0?"":y,onChange:V=>b(Math.max(0,parseInt(V.target.value||"0",10))),placeholder:""})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio de compra (pza)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:w===0?"":w,onChange:V=>j(Math.max(0,parseFloat(V.target.value||"0")))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (pza)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:I===0?"":I,onChange:V=>_(Math.max(0,parseFloat(V.target.value||"0")))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:W,readOnly:!0,placeholder:"Se genera automticamente o se carga del producto",title:"Si el producto tiene SKU, se usa tal cual; si no, se genera por subcat/gnero/talla/color/marca."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:de,readOnly:!0,onChange:V=>fe(V.target.value),placeholder:"XS/S/M/L/XL/10/12"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:ge,readOnly:!0,onChange:V=>ee(V.target.value),placeholder:"Negro, Azul, Rojo"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:Fe,readOnly:!0,onChange:V=>Pe(V.target.value),placeholder:"Masculino, Femenino, Otro"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Marca / Origen (opcional)"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:F,onChange:V=>Q(V.target.value),placeholder:"Shein, Usado, Otro"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo del cliente (opcional)"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: LOTE-SHEIN-SEP-01",value:H,onChange:V=>{const X=V.target.value;iy.test(X)&&R(X)},title:"Solo letras, nmeros, punto, guion y guion_bajo (mx 32)"}),!iy.test(H)&&H.length>0&&o.jsx("div",{className:"text-xs text-red-600 mt-1",children:"Formato invlido"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:T,onChange:V=>O(V.target.value),maxLength:500,placeholder:"Ej: Camisita veranera, tela delgada, tirantes"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[T.length,"/500"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Total factura (auto)"}),o.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:fo(S),readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Total esperado (auto)"}),o.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:fo(k),readOnly:!0})]}),o.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Bt(!1),children:"Cancelar"}),o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar lote"})]})]})]})]}),document.body),i&&o.jsx("p",{className:"mt-2 text-sm",children:i})]})}const V4e=["Camisa","Blusa","Vestido","Jean","Pantaln","Short","Falda","Conjunto","Abrigo","Suter","Accesorio"],H4e=["Negro","Blanco","Azul","Rojo","Verde","Gris","Beige","Rosa","Amarillo","Marrn","Morado","Naranja"],$4e=["XS","S","M","L","XL","2XL"],G4e=["2","4","6","8","10","12","14"],K4e=["26","28","30","32","34","36","38"],q4e=["Shein","Usado","Otro"],z4e=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function jC(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function W4e(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function X4e(t){const e="ROP",r=jC(t.subcat).slice(0,3)||"GEN",n=W4e(t.gender),a=jC(t.color).slice(0,3)||"COL",s=jC(t.size)||"TLL",i=jC(t.brand).slice(0,4)||"BRD";return`${e}-${r}-${n}-${a}-${s}-${i}`}const Y4e=/^[A-Za-z0-9._-]{0,32}$/;function J4e(){const[t,e]=v.useState(""),[r,n]=v.useState("Camisa"),[a,s]=v.useState(""),[i,l]=v.useState(""),[c,u]=v.useState("Shein"),[d,f]=v.useState(""),[h,A]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(""),[y,b]=v.useState(""),[w,j]=v.useState("0"),[I,_]=v.useState(""),[S,E]=v.useState(""),k=v.useMemo(()=>{const R=Number(w||0),z=Number(y||0);return Math.floor(R*z*100)/100},[w,y]),[P,T]=v.useState([]),[O,W]=v.useState(!0),[Ae,de]=v.useState(""),{refreshKey:fe,refresh:ge}=jc(),[ee,Fe]=v.useState(!1),Pe=v.useMemo(()=>r.toLowerCase()==="jean"?K4e:d==="NINO"||d==="NINA"?G4e:$4e,[r,d]);v.useEffect(()=>{p(X4e({subcat:r,gender:d,color:i,size:a,brand:c}))},[r,d,i,a,c]),v.useEffect(()=>{(async()=>{W(!0);const R=tr(pt(Ge,"products_clothes"),ln("createdAt","desc")),z=await Lt(R),J=[];z.forEach(D=>{const U=D.data();J.push({id:D.id,name:U.name??"(sin nombre)",category:U.category??"",measurement:U.measurement??"unidad",sku:U.sku??"",size:U.size||"",color:U.color||"",brand:U.brand||"",gender:U.gender||"",clientCode:U.clientCode||"",notes:U.notes||"",createdAt:U.createdAt??or.now()})}),T(J),W(!1)})()},[fe]);const F=()=>{e(""),n("Camisa"),s(""),l(""),u("Shein"),f(""),A(""),x(""),b(""),j("0"),_(""),E("")},Q=async R=>{if(R.preventDefault(),de(""),!t.trim()){de("Ingresa el nombre del producto.");return}if(h&&!Y4e.test(h)){de("Cdigo del cliente invlido");return}const z=Number(w||0),J=Number(y||0);if(z<0){de("La cantidad de piezas debe ser 0 o mayor.");return}if(J<0){de("El precio de venta no puede ser negativo.");return}try{const D=await wn(pt(Ge,"products_clothes"),{name:t.trim(),category:r,measurement:"unidad",sku:m,size:a||"",color:i||"",brand:c||"",gender:d||"",clientCode:h||"",notes:g||"",createdAt:or.now(),price:J||0});if(T(U=>[{id:D.id,name:t.trim(),category:r,measurement:"unidad",sku:m,size:a||"",color:i||"",brand:c||"",gender:d||"",clientCode:h||"",notes:g||"",createdAt:or.now()},...U]),z>0){const U=new Date().toISOString().slice(0,10),ne=I||U;await wn(pt(Ge,"inventory_clothes_batches"),{productId:D.id,productName:t.trim(),category:r,unit:"unidad",quantity:z,remaining:z,purchasePrice:0,salePrice:J||0,invoiceTotal:0,expectedTotal:k||0,date:ne,createdAt:or.now(),status:"PENDIENTE",notes:S||"",sku:m||"",size:a||"",color:i||"",gender:d||"",brand:c||"",clientCode:h||""})}de(z>0?" Producto creado y lote de inventario registrado":" Producto de ropa creado"),F()}catch(D){console.error(D),de(" Error al crear producto")}},H=async R=>{confirm(`Eliminar el producto "${R.name}"?`)&&(await yn(Kt(Ge,"products_clothes",R.id)),T(J=>J.filter(D=>D.id!==R.id)))};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Productos de Ropa"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Ic,{onClick:ge,loading:O}),o.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{Fe(!0)},children:[o.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]})]}),ee&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[o.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo producto de ropa"}),o.jsxs("form",{onSubmit:Q,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded",value:t,onChange:R=>e(R.target.value),placeholder:"Ej: Blusa floral"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Subcategora"}),o.jsx("select",{className:"w-full border p-2 rounded",value:r,onChange:R=>n(R.target.value),children:V4e.map(R=>o.jsx("option",{value:R,children:R},R))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Gnero"}),o.jsx("select",{className:"w-full border p-2 rounded",value:d,onChange:R=>f(R.target.value),children:z4e.map(R=>o.jsx("option",{value:R,children:R||""},R))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:R=>s(R.target.value),children:[o.jsx("option",{value:"",children:""}),Pe.map(R=>o.jsx("option",{value:R,children:R},R))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:i,onChange:R=>l(R.target.value),children:[o.jsx("option",{value:"",children:""}),H4e.map(R=>o.jsx("option",{value:R,children:R},R))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Marca"}),o.jsx("select",{className:"w-full border p-2 rounded",value:c,onChange:R=>u(R.target.value),children:q4e.map(R=>o.jsx("option",{value:R,children:R},R))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:m,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo cliente"}),o.jsx("input",{className:"w-full border p-2 rounded",value:h,onChange:R=>A(R.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (pza)"}),o.jsx("input",{className:"w-full border p-2 rounded",type:"number",step:"0.01",min:0,value:y,onChange:R=>b(R.target.value),placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad de piezas (crea lote si > 0)"}),o.jsx("input",{className:"w-full border p-2 rounded",type:"number",min:0,value:w,onChange:R=>j(R.target.value),placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de lote"}),o.jsx("input",{className:"w-full border p-2 rounded",type:"date",value:I,onChange:R=>_(R.target.value)})]}),o.jsxs("div",{className:"md:col-span-2 flex items-center justify-between border-t pt-3 mt-2 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Medicin:"})," unidad"]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total esperado (auto): "}),isNaN(k)?"":k.toFixed(2)]})]}),o.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2 mt-2",children:[o.jsx("button",{type:"button",onClick:F,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Limpiar"}),o.jsx("button",{type:"button",onClick:()=>Fe(!1),className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Guardar"})]})]})]})}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Subcat."}),o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"SKU"}),o.jsx("th",{className:"p-2 border",children:"Talla"}),o.jsx("th",{className:"p-2 border",children:"Color"}),o.jsx("th",{className:"p-2 border",children:"Marca"}),o.jsx("th",{className:"p-2 border",children:"Gnero"}),o.jsx("th",{className:"p-2 border",children:"Cdigo Cliente"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:O?o.jsx("tr",{children:o.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Cargando"})}):P.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Sin productos"})}):P.map(R=>{var z;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:(z=R.createdAt)!=null&&z.toDate?R.createdAt.toDate().toISOString().slice(0,10):""}),o.jsx("td",{className:"p-2 border",children:R.category}),o.jsx("td",{className:"p-2 border",children:R.name}),o.jsx("td",{className:"p-2 border",children:R.sku}),o.jsx("td",{className:"p-2 border",children:R.size||""}),o.jsx("td",{className:"p-2 border",children:R.color||""}),o.jsx("td",{className:"p-2 border",children:R.brand||""}),o.jsx("td",{className:"p-2 border",children:R.gender||""}),o.jsx("td",{className:"p-2 border",children:R.clientCode||""}),o.jsx("td",{className:"p-2 border",children:R.notes||""}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>H(R),children:"Borrar"})})]},R.id)})})]})}),Ae&&o.jsx("p",{className:"mt-2 text-sm",children:Ae})]})}async function Z4e(t){const{productId:e,quantity:r,saleDate:n,saleId:a}=t,s=Math.max(0,Math.floor(Number(r||0)));if(!e||s<=0)throw new Error("Parmetros invlidos para allocateSaleFIFOClothes");const i=tr(pt(Ge,"inventory_clothes_batches"),sr("productId","==",e)),u=(await Lt(i)).docs.map(f=>({id:f.id,data:f.data()})).sort((f,h)=>{var x,y;const A=String(f.data.date||""),m=String(h.data.date||"");if(A!==m)return A<m?-1:1;const p=((x=f.data.createdAt)==null?void 0:x.seconds)??0,g=((y=h.data.createdAt)==null?void 0:y.seconds)??0;return p-g}).map(f=>Kt(Ge,"inventory_clothes_batches",f.id)),d=[];return await Ti(Ge,async f=>{const h=await Promise.all(u.map(m=>f.get(m)));let A=s;for(let m=0;m<u.length&&A>0;m++){const p=u[m],g=h[m];if(!g.exists())continue;const x=g.data(),y=Math.max(0,Math.floor(Number(x.quantity||0))),b=Number.isFinite(Number(x.remaining))?Math.max(0,Math.floor(Number(x.remaining||0))):y;if(b<=0)continue;const w=Math.min(b,A),j=Math.max(0,b-w);f.update(p,{remaining:j}),d.push({batchId:p.id,qty:w,batchDate:String(x.date||""),productName:String(x.productName||"")}),A-=w}if(A>0)throw new Error(`Inventario insuficiente. Faltan ${A} unidades.`);if(a)for(const m of d)await wn(pt(Ge,"batch_clothes_allocations"),{saleId:a,saleDate:n,productId:e,productName:m.productName??"",batchId:m.batchId,batchDate:m.batchDate??"",quantity:m.qty,createdAt:or.now()})}),{allocations:d}}async function Ak(t){const e=Kt(Ge,"sales_clothes",t),r=await xi(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),a=[];if(Array.isArray(n.items)&&n.items.length>0){const l={};if(n.allocationsByItem&&typeof n.allocationsByItem=="object")for(const c of Object.keys(n.allocationsByItem)){const u=n.allocationsByItem[c],d=String((u==null?void 0:u.productId)||c||"");if(!d)continue;const f=Array.isArray(u==null?void 0:u.allocations)?u.allocations:[];l[d]=f.map(h=>({batchId:String(h.batchId),qty:Math.max(0,Math.floor(Number(h.qty||h.quantity||0)))}))}if(Array.isArray(n.allocationsByItem))for(const c of n.allocationsByItem){const u=String((c==null?void 0:c.productId)||"");if(!u)continue;const d=Array.isArray(c==null?void 0:c.allocations)?c.allocations:[];l[u]=d.map(f=>({batchId:String(f.batchId),qty:Math.max(0,Math.floor(Number(f.qty||f.quantity||0)))}))}for(const c of n.items){const u=String((c==null?void 0:c.productId)||"");if(!u)continue;const d=Math.max(0,Math.floor(Number((c==null?void 0:c.qty)||(c==null?void 0:c.quantity)||0))),f=Array.isArray(c==null?void 0:c.allocations)?c.allocations.map(h=>({batchId:String(h.batchId),qty:Math.max(0,Math.floor(Number(h.qty||h.quantity||0)))})):l[u]||[];a.push({productId:u,productName:String((c==null?void 0:c.productName)||""),qty:d,allocations:f.length?f:void 0})}}else{const l=n.item||{},c=String(l.productId||n.productId||""),u=Math.max(0,Math.floor(Number(l.qty??n.quantity??0))),d=Array.isArray(n.allocations)?n.allocations.map(f=>({batchId:String(f.batchId),qty:Math.max(0,Math.floor(Number(f.qty||f.quantity||0)))})):[];c&&u>0&&a.push({productId:c,productName:String(l.productName||n.productName||""),qty:u,allocations:d.length?d:void 0})}return a.length===0?(await Ti(Ge,async l=>{l.delete(e)}),{restored:0}):a.every(l=>Array.isArray(l.allocations)&&l.allocations.length>0)?(await Ti(Ge,async c=>{const u=[];for(const f of a)for(const h of f.allocations||[])u.push({ref:Kt(Ge,"inventory_clothes_batches",h.batchId),addBack:Math.max(0,Math.floor(Number(h.qty||0)))});const d=await Promise.all(u.map(f=>c.get(f.ref)));for(let f=0;f<u.length;f++){const h=d[f];if(!h.exists())continue;const A=h.data(),m=Math.max(0,Math.floor(Number(A.remaining||0)));c.update(u[f].ref,{remaining:m+u[f].addBack})}c.delete(e)}),{restored:a.reduce((c,u)=>c+(u.allocations||[]).reduce((d,f)=>d+f.qty,0),0)}):(await Ti(Ge,async l=>{const c={};for(const A of a){if(!A.productId||A.qty<=0)continue;const m=tr(pt(Ge,"inventory_clothes_batches"),sr("productId","==",A.productId)),g=(await Lt(m)).docs.map(x=>{const y=x.data(),b=Math.max(0,Math.floor(Number(y.quantity||0))),w=Number.isFinite(Number(y.remaining))?Math.max(0,Math.floor(Number(y.remaining||0))):b;return{id:x.id,date:String(y.date||""),quantity:b,remaining:w}}).sort((x,y)=>x.date.localeCompare(y.date));c[A.productId]=g}const u=[];for(const A of a){if(!A.productId||A.qty<=0)continue;if(Array.isArray(A.allocations)&&A.allocations.length>0){for(const g of A.allocations)u.push({id:g.batchId,addBack:Math.max(0,Math.floor(Number(g.qty||0)))});continue}const m=c[A.productId]||[];let p=A.qty;for(const g of m){if(p<=0)break;const x=Math.max(0,g.quantity-g.remaining);if(x<=0)continue;const y=Math.min(x,p);u.push({id:g.id,addBack:y}),p-=y}for(const g of m){if(p<=0)break;const x=Math.min(p,A.qty);u.push({id:g.id,addBack:x}),p-=x}}const d={};for(const A of u)d[A.id]=(d[A.id]||0)+Math.max(0,Math.floor(Number(A.addBack||0)));const f=Object.keys(d).map(A=>Kt(Ge,"inventory_clothes_batches",A)),h=await Promise.all(f.map(A=>l.get(A)));for(let A=0;A<f.length;A++){const m=h[A];if(!m.exists())continue;const p=m.data(),g=Math.max(0,Math.floor(Number(p.remaining||0))),x=Math.max(0,Math.floor(Number(d[f[A].id]||0)));l.update(f[A],{remaining:g+x})}l.delete(e)}),{restored:a.reduce((l,c)=>l+c.qty,0)})}const pV=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],fA=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function PC(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function gV(t){const e=tr(pt(Ge,"ar_movements"),sr("ref.saleId","==",t)),r=await Lt(e);await Promise.all(r.docs.map(n=>yn(Kt(Ge,"ar_movements",n.id))))}function eje(){const[t,e]=v.useState(!1),[r,n]=v.useState(!1),[a,s]=v.useState(null),[i,l]=v.useState([]),c=async te=>{e(!0),n(!0),s(te),l([]);try{const re=(await Lt(tr(pt(Ge,"sales_clothes"),sr("__name__","==",te)))).docs[0],be=re==null?void 0:re.data(),tt=(Array.isArray(be==null?void 0:be.items)?be.items:be!=null&&be.item?[be.item]:[]).map(lt=>({productName:String(lt.productName||""),qty:Number(lt.qty||0),unitPrice:Number(lt.unitPrice||0),discount:Number(lt.discount||0),total:Number(lt.total||0)}));l(tt)}catch(He){console.error(He)}finally{n(!1)}},[u,d]=v.useState(""),[f,h]=v.useState("+505 "),[A,m]=v.useState(""),[p,g]=v.useState(""),[x,y]=v.useState("ACTIVO"),[b,w]=v.useState(0),[j,I]=v.useState([]),[_,S]=v.useState(!0),[E,k]=v.useState(""),[P,T]=v.useState(null),[O,W]=v.useState(""),[Ae,de]=v.useState("+505 "),[fe,ge]=v.useState(""),[ee,Fe]=v.useState(""),[Pe,F]=v.useState("ACTIVO"),[Q,H]=v.useState(0),[R,z]=v.useState(!1),[J,D]=v.useState(null),[U,ne]=v.useState(!1),[ve,L]=v.useState([]),[Ye,ie]=v.useState({saldoActual:0,totalAbonado:0,totalCargos:0}),[Z,Oe]=v.useState(!1),[le,se]=v.useState(0),[Be,je]=v.useState(new Date().toISOString().slice(0,10)),[ot,mt]=v.useState(""),[ut,_e]=v.useState(!1),[rt,we]=v.useState(null),[Ce,Ue]=v.useState(""),[Ve,ue]=v.useState(0),[ce,Te]=v.useState(""),[Xe,ft]=v.useState(!1);v.useEffect(()=>{(async()=>{const te=tr(pt(Ge,"customers_clothes"),ln("createdAt","desc")),He=await Lt(te),re=[];He.forEach(be=>{const Me=be.data();re.push({id:be.id,name:Me.name??"",phone:Me.phone??"+505 ",place:Me.place??"",notes:Me.notes??"",status:Me.status??"ACTIVO",creditLimit:Number(Me.creditLimit??0),createdAt:Me.createdAt??or.now(),balance:0})});for(const be of re)try{const Me=tr(pt(Ge,"ar_movements"),sr("customerId","==",be.id)),tt=await Lt(Me);let lt=0;tt.forEach(ae=>lt+=Number(ae.data().amount||0)),be.balance=lt}catch{be.balance=0}I(re),S(!1)})()},[]);const gt=()=>{d(""),h("+505 "),m(""),g(""),y("ACTIVO"),w(0)},vt=async te=>{if(te.preventDefault(),k(""),!u.trim()){k("Ingresa el nombre.");return}const He=PC(f);if(He.length<6){k("Telfono incompleto.");return}try{const re=await wn(pt(Ge,"customers_clothes"),{name:u.trim(),phone:He,place:A||"",notes:p||"",status:x,creditLimit:Number(b||0),createdAt:or.now()});I(be=>[{id:re.id,name:u.trim(),phone:He,place:A||"",notes:p||"",status:x,creditLimit:Number(b||0),createdAt:or.now(),balance:0},...be]),gt(),ft(!1),k(" Cliente creado")}catch(re){console.error(re),k(" Error al crear cliente")}},At=te=>{T(te.id),W(te.name),de(te.phone||"+505 "),ge(te.place||""),Fe(te.notes||""),F(te.status||"ACTIVO"),H(Number(te.creditLimit||0))},ye=()=>{T(null),W(""),de("+505 "),ge(""),Fe(""),F("ACTIVO"),H(0)},$e=async()=>{if(!P)return;const te=PC(Ae);if(!O.trim()){k("Ingresa el nombre.");return}try{await rn(Kt(Ge,"customers_clothes",P),{name:O.trim(),phone:te,place:fe||"",notes:ee||"",status:Pe,creditLimit:Number(Q||0)}),I(He=>He.map(re=>re.id===P?{...re,name:O.trim(),phone:te,place:fe||"",notes:ee||"",status:Pe,creditLimit:Number(Q||0)}:re)),ye(),k(" Cliente actualizado")}catch(He){console.error(He),k(" Error al actualizar")}},Ne=async te=>{if(confirm(`Eliminar al cliente "${te.name}"?
Se devolvern al inventario todas las prendas de sus compras y se borrarn sus movimientos.`))try{S(!0);const re=tr(pt(Ge,"sales_clothes"),sr("customerId","==",te.id)),be=await Lt(re);for(const lt of be.docs){const ae=lt.id;try{await Ak(ae)}catch(V){console.warn("restoreSaleAndDeleteClothes error",V);try{await yn(Kt(Ge,"sales_clothes",ae))}catch{}}await gV(ae)}const Me=tr(pt(Ge,"ar_movements"),sr("customerId","==",te.id)),tt=await Lt(Me);await Promise.all(tt.docs.map(lt=>yn(Kt(Ge,"ar_movements",lt.id)))),await yn(Kt(Ge,"customers_clothes",te.id)),I(lt=>lt.filter(ae=>ae.id!==te.id)),k(" Cliente eliminado y prendas devueltas al inventario")}catch(re){console.error(re),k(" No se pudo eliminar el cliente.")}finally{S(!1)}},ct=async te=>{D(te),L([]),ie({saldoActual:0,totalAbonado:0,totalCargos:0}),z(!0),Oe(!1),se(0),je(new Date().toISOString().slice(0,10)),mt(""),we(null),ne(!0);try{const He=tr(pt(Ge,"ar_movements"),sr("customerId","==",te.id)),re=await Lt(He),be=[];re.forEach(Me=>{var lt,ae;const tt=Me.data();be.push({id:Me.id,date:tt.date??((ae=(lt=tt.createdAt)==null?void 0:lt.toDate)!=null&&ae.call(lt)?tt.createdAt.toDate().toISOString().slice(0,10):""),type:tt.type??"CARGO",amount:Number(tt.amount||0),ref:tt.ref||{},comment:tt.comment||"",createdAt:tt.createdAt})}),be.sort((Me,tt)=>{var V,X;if(Me.date!==tt.date)return Me.date.localeCompare(tt.date);const lt=((V=Me.createdAt)==null?void 0:V.seconds)||0,ae=((X=tt.createdAt)==null?void 0:X.seconds)||0;return lt-ae}),L(be),xe(be)}catch(He){console.error(He),k(" No se pudo cargar el estado de cuenta")}finally{ne(!1)}},xe=te=>{const He=te.reduce((Me,tt)=>Me+(Number(tt.amount)||0),0),re=te.filter(Me=>Number(Me.amount)<0).reduce((Me,tt)=>Me+Math.abs(Number(tt.amount)||0),0),be=te.filter(Me=>Number(Me.amount)>0).reduce((Me,tt)=>Me+Number(tt.amount)||0,0);ie({saldoActual:He,totalAbonado:re,totalCargos:be})},Qe=async()=>{if(!J)return;k("");const te=Number(le||0);if(!(te>0)){k("Ingresa un monto de abono mayor a 0.");return}const He=parseFloat(te.toFixed(2));if(!Be){k("Selecciona la fecha del abono.");return}try{_e(!0);const re={customerId:J.id,type:"ABONO",amount:-He,date:Be,comment:ot||"",createdAt:or.now()},Me={id:(await wn(pt(Ge,"ar_movements"),re)).id,date:Be,type:"ABONO",amount:-He,comment:ot||"",createdAt:or.now()},tt=[...ve,Me].sort((lt,ae)=>{var me,Ie;if(lt.date!==ae.date)return lt.date.localeCompare(ae.date);const V=((me=lt.createdAt)==null?void 0:me.seconds)||0,X=((Ie=ae.createdAt)==null?void 0:Ie.seconds)||0;return V-X});L(tt),xe(tt),I(lt=>lt.map(ae=>ae.id===J.id?{...ae,balance:(ae.balance||0)-He}:ae)),D(lt=>lt&&{...lt,balance:(lt.balance||0)-He}),se(0),mt(""),je(new Date().toISOString().slice(0,10)),Oe(!1),k(" Abono registrado")}catch(re){console.error(re),k(" Error al registrar el abono")}finally{_e(!1)}},dt=te=>{we(te.id),Ue(te.date||new Date().toISOString().slice(0,10)),ue(Math.abs(Number(te.amount||0))),Te(te.comment||"")},Bt=()=>{we(null),Ue(""),ue(0),Te("")},qe=async()=>{if(!rt)return;const te=ve.findIndex(Me=>Me.id===rt);if(te===-1)return;const He=ve[te],re=Number(Ve||0);if(!(re>0)){k("El monto debe ser mayor a 0.");return}const be=He.type==="ABONO"?-parseFloat(re.toFixed(2)):+parseFloat(re.toFixed(2));try{await rn(Kt(Ge,"ar_movements",rt),{date:Ce,amount:be,comment:ce||""});const Me=[...ve];Me[te]={...He,date:Ce,amount:be,comment:ce||""},Me.sort((lt,ae)=>{var me,Ie;if(lt.date!==ae.date)return lt.date.localeCompare(ae.date);const V=((me=lt.createdAt)==null?void 0:me.seconds)||0,X=((Ie=ae.createdAt)==null?void 0:Ie.seconds)||0;return V-X}),L(Me),xe(Me);const tt=Me.reduce((lt,ae)=>lt+(Number(ae.amount)||0),0);I(lt=>lt.map(ae=>ae.id===(J==null?void 0:J.id)?{...ae,balance:tt}:ae)),D(lt=>lt&&{...lt,balance:tt}),Bt(),k(" Movimiento actualizado")}catch(Me){console.error(Me),k(" Error al actualizar movimiento")}},bt=async te=>{var re,be;if(confirm(`Eliminar este movimiento (${te.type==="ABONO"?"Abono":"Compra"}) del ${te.date}?${te.type==="CARGO"&&((re=te.ref)!=null&&re.saleId)?`
Se devolvern al inventario las prendas de esa venta.`:""}`))try{if(S(!0),te.type==="CARGO"&&((be=te.ref)!=null&&be.saleId)){try{await Ak(te.ref.saleId)}catch(lt){console.warn("restoreSaleAndDeleteClothes error",lt),S(!1),k(" No se pudo devolver inventario de la venta.");return}await gV(te.ref.saleId)}else await yn(Kt(Ge,"ar_movements",te.id));const Me=ve.filter(lt=>{var ae,V;return te.type==="CARGO"&&((ae=te.ref)!=null&&ae.saleId)?((V=lt.ref)==null?void 0:V.saleId)!==te.ref.saleId:lt.id!==te.id});L(Me),xe(Me);const tt=Me.reduce((lt,ae)=>lt+(Number(ae.amount)||0),0);I(lt=>lt.map(ae=>ae.id===(J==null?void 0:J.id)?{...ae,balance:tt}:ae)),D(lt=>lt&&{...lt,balance:tt}),k(" Movimiento eliminado")}catch(Me){console.error(Me),k(" Error al eliminar movimiento")}finally{S(!1)}},G=v.useMemo(()=>[...j].sort((te,He)=>{var re,be;return te.status!==He.status?te.status==="BLOQUEADO"?1:-1:(((re=He.createdAt)==null?void 0:re.seconds)||0)-(((be=te.createdAt)==null?void 0:be.seconds)||0)}),[j]);return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Ropa)"}),o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>ft(!0),type:"button",children:"Crear Cliente"})]}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Telfono"}),o.jsx("th",{className:"p-2 border",children:"Lugar"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Lmite"}),o.jsx("th",{className:"p-2 border",children:"Saldo"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:_?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):G.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin clientes"})}):G.map(te=>{var re;const He=P===te.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:(re=te.createdAt)!=null&&re.toDate?te.createdAt.toDate().toISOString().slice(0,10):""}),o.jsx("td",{className:"p-2 border",children:He?o.jsx("input",{className:"w-full border p-1 rounded",value:O,onChange:be=>W(be.target.value)}):te.name}),o.jsx("td",{className:"p-2 border",children:He?o.jsx("input",{className:"w-full border p-1 rounded",value:Ae,onChange:be=>de(PC(be.target.value))}):te.phone}),o.jsx("td",{className:"p-2 border",children:He?o.jsxs("select",{className:"w-full border p-1 rounded",value:fe,onChange:be=>ge(be.target.value),children:[o.jsx("option",{value:"",children:""}),pV.map(be=>o.jsx("option",{value:be,children:be},be))]}):te.place||""}),o.jsx("td",{className:"p-2 border",children:He?o.jsxs("select",{className:"w-full border p-1 rounded",value:Pe,onChange:be=>F(be.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${te.status==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:te.status})}),o.jsx("td",{className:"p-2 border",children:He?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Q)?"":Q,onChange:be=>H(Math.max(0,Number(be.target.value||0)))}):fA(te.creditLimit||0)}),o.jsx("td",{className:"p-2 border font-semibold",children:fA(te.balance||0)}),o.jsx("td",{className:"p-2 border",children:He?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:ee,onChange:be=>Fe(be.target.value),maxLength:500}):o.jsx("span",{title:te.notes||"",children:(te.notes||"").length>40?(te.notes||"").slice(0,40)+"":te.notes||""})}),o.jsx("td",{className:"p-2 border",children:o.jsx("div",{className:"flex gap-2 justify-center",children:He?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:$e,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:ye,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>At(te),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Ne(te),children:"Borrar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>ct(te),title:"Ver compras y abonos",children:"Estado de cuenta"})]})})})]},te.id)})})]})}),E&&o.jsx("p",{className:"mt-2 text-sm",children:E}),Xe&&su.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>ft(!1)}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ft(!1),type:"button",children:"Cerrar"})]}),o.jsxs("form",{onSubmit:vt,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:u,onChange:te=>d(te.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),o.jsx("input",{className:"w-full border p-2 rounded",value:f,onChange:te=>h(PC(te.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:A,onChange:te=>m(te.target.value),children:[o.jsx("option",{value:"",children:""}),pV.map(te=>o.jsx("option",{value:te,children:te},te))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:x,onChange:te=>y(te.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:b===0?"":b,onChange:te=>w(Math.max(0,Number(te.target.value||0))),placeholder:"Ej: 2000"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:p,onChange:te=>g(te.target.value),maxLength:500,placeholder:"Notas del cliente"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[p.length,"/500"]})]}),o.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ft(!1),children:"Cancelar"}),o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),R&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(J==null?void 0:J.name)||""]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{se(0),je(new Date().toISOString().slice(0,10)),mt(""),Oe(!0)},children:"Abonar"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>z(!1),children:"Cerrar"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-xl font-semibold",children:fA(Ye.saldoActual)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),o.jsx("div",{className:"text-xl font-semibold",children:fA(Ye.totalAbonado)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),o.jsx("div",{className:"text-xl font-semibold",children:fA(Ye.saldoActual)})]})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Referencia"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:U?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):ve.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):ve.map(te=>{var re,be;const He=rt===te.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:He?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:Ce,onChange:Me=>Ue(Me.target.value)}):te.date||""}),o.jsx("td",{className:"p-2 border",children:te.amount>=0?(re=te.ref)!=null&&re.saleId?o.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",title:"Ver piezas de esta compra",onClick:()=>c(te.ref.saleId),children:"COMPRA (CARGO)"}):o.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (CARGO)"}):o.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),o.jsx("td",{className:"p-2 border",children:(be=te.ref)!=null&&be.saleId?`Venta #${te.ref.saleId}`:""}),o.jsx("td",{className:"p-2 border",children:He?o.jsx("input",{className:"w-full border p-1 rounded",value:ce,onChange:Me=>Te(Me.target.value),placeholder:"Comentario"}):o.jsx("span",{title:te.comment||"",children:(te.comment||"").length>40?(te.comment||"").slice(0,40)+"":te.comment||""})}),o.jsx("td",{className:"p-2 border font-semibold",children:He?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Ve)?"":Ve,onChange:Me=>{const tt=Number(Me.target.value||0),lt=Number.isFinite(tt)?Math.max(0,parseFloat(tt.toFixed(2))):0;ue(lt)},placeholder:"0.00",title:te.type==="ABONO"?"Se guardar como negativo":"Se guardar como positivo"}):fA(te.amount)}),o.jsx("td",{className:"p-2 border",children:He?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:qe,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Bt,children:"Cancelar"})]}):o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>dt(te),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>bt(te),children:"Borrar"})]})})]},te.id)})})]})})]})}),Z&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(J==null?void 0:J.name)||""]}),o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:Be,onChange:te=>je(te.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Monto del abono"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:le===0?"":le,onChange:te=>{const He=Number(te.target.value||0),re=Number.isFinite(He)?Math.max(0,parseFloat(He.toFixed(2))):0;se(re)},placeholder:"0.00"}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se guarda con 2 decimales (se registrar como ABONO negativo)."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:ot,onChange:te=>mt(te.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[ot.length,"/250"]})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Oe(!1),disabled:ut,children:"Cancelar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:Qe,disabled:ut,children:ut?"Guardando...":"Guardar abono"})]})]})}),t&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[65]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Piezas vendidas"," ",a?` #${a}`:""]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>e(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio"}),o.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),o.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):i.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):i.map((te,He)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border text-left",children:te.productName}),o.jsx("td",{className:"p-2 border text-right",children:te.qty}),o.jsx("td",{className:"p-2 border text-right",children:fA(te.unitPrice)}),o.jsx("td",{className:"p-2 border text-right",children:fA(te.discount||0)}),o.jsx("td",{className:"p-2 border text-right",children:fA(te.total)})]},He))})]})})]})})]})}const tx=t=>`C$ ${(Number(t)||0).toFixed(2)}`,tje=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"];async function rje(t){if(!t)return 0;const e=tr(pt(Ge,"inventory_clothes_batches"),sr("productId","==",t)),r=await Lt(e);let n="0000-00-00",a=-1,s=0;return r.forEach(i=>{const l=i.data(),c=String(l.date||"0000-00-00"),u=Number(l.salePrice||0),d=l.createdAt,f=((d==null?void 0:d.seconds)??0)*1e3+((d==null?void 0:d.nanoseconds)??0)/1e6;c>n?(n=c,a=f,s=u):c===n&&f>a&&(a=f,s=u)}),Number(s||0)}async function xV(t){if(!t)return 0;const e=tr(pt(Ge,"inventory_clothes_batches"),sr("productId","==",t)),r=await Lt(e);let n=0;return r.forEach(a=>n+=Number(a.data().remaining||0)),n}function vV(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}function nje({role:t="",roles:e}={role:""}){const r=e&&e.length?e:t;zr(r,"admin"),zr(r,"vendedor_ropa");const[n,a]=v.useState([]),[s,i]=v.useState([]),[l,c]=v.useState({}),[u,d]=v.useState("CONTADO"),[f,h]=v.useState(""),[A,m]=v.useState(""),[p,g]=v.useState(new Date().toISOString().slice(0,10)),[x,y]=v.useState(""),[b,w]=v.useState([]),j=v.useMemo(()=>b.reduce((le,se)=>le+(se.qty||0),0),[b]),I=v.useMemo(()=>{const le=b.reduce((se,Be)=>{const je=Math.max(0,(Number(Be.unitPrice)||0)*(Be.qty||0)-(Number(Be.discount)||0));return se+je},0);return Math.floor(le*100)/100},[b]),[_,S]=v.useState(0),[E,k]=v.useState(""),[P,T]=v.useState(!1),[O,W]=v.useState(!1),[Ae,de]=v.useState(""),[fe,ge]=v.useState("+505 "),[ee,Fe]=v.useState(""),[Pe,F]=v.useState(""),[Q,H]=v.useState("ACTIVO"),[R,z]=v.useState(0),J=()=>{de(""),ge("+505 "),Fe(""),F(""),H("ACTIVO"),z(0)};v.useEffect(()=>{(async()=>{const le=tr(pt(Ge,"customers_clothes"),ln("createdAt","desc")),se=await Lt(le),Be=[];se.forEach(we=>{const Ce=we.data();Be.push({id:we.id,name:Ce.name??"",phone:Ce.phone??"+505 ",place:Ce.place??"",status:Ce.status??"ACTIVO",creditLimit:Number(Ce.creditLimit??0),balance:0})});for(const we of Be)try{const Ce=tr(pt(Ge,"ar_movements"),sr("customerId","==",we.id)),Ue=await Lt(Ce);let Ve=0;Ue.forEach(ue=>Ve+=Number(ue.data().amount||0)),we.balance=Ve}catch{we.balance=0}a(Be);const je=tr(pt(Ge,"products_clothes"),ln("createdAt","desc")),ot=await Lt(je),mt=[];ot.forEach(we=>{const Ce=we.data();mt.push({id:we.id,name:Ce.name??"(sin nombre)",sku:Ce.sku??""})}),i(mt);const ut=tr(pt(Ge,"inventory_clothes_batches"),sr("remaining",">",0)),_e=await Lt(ut),rt={};_e.forEach(we=>{const Ce=we.data(),Ue=Ce.productId||"",Ve=Number(Ce.remaining||0);Ue&&(rt[Ue]=(rt[Ue]||0)+Ve)}),c(rt)})()},[]);const D=v.useMemo(()=>n.find(le=>le.id===f),[n,f]),U=(D==null?void 0:D.balance)||0,ne=u==="CREDITO"?U+Math.max(0,Number(I||0))-Math.max(0,Number(_||0)):0,ve=async le=>{if(!le)return;if(b.some(mt=>mt.productId===le)){y("");return}const se=s.find(mt=>mt.id===le);if(!se){y("");return}let Be=await rje(le);Be||(Be=Number((se==null?void 0:se.price)||0));const je=await xV(le),ot={productId:le,productName:se.name||"",sku:se.sku||"",unitPrice:Number(Be)||0,available:Number(je)||0,qty:0,discount:0};w(mt=>[...mt,ot]),y("")},L=(le,se)=>{w(Be=>Be.map(je=>{if(je.productId!==le)return je;if(se==="")return{...je,qty:0};const ot=Math.max(0,Math.floor(Number(se)));return{...je,qty:ot}}))},Ye=(le,se)=>{w(Be=>Be.map(je=>{if(je.productId!==le)return je;if(se==="")return{...je,discount:0};const ot=Math.max(0,Math.floor(Number(se)));return{...je,discount:ot}}))},ie=le=>w(se=>se.filter(Be=>Be.productId!==le)),Z=async()=>{if(!p)return"Selecciona la fecha.";if(b.length===0)return"Agrega al menos un producto.";const le=b.filter(se=>(se.qty||0)>0);if(le.length===0)return"Debes ingresar cantidades (> 0) en al menos un producto.";if(!(I>0))return"El total debe ser mayor a cero.";if(u==="CONTADO"){if(!A.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!f)return"Selecciona un cliente (crdito).";if(_<0)return"El pago inicial no puede ser negativo.";if(_>I)return"El pago inicial no puede superar el total.";if((D==null?void 0:D.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede facturar a crdito."}for(const se of le){const Be=await xV(se.productId);if(se.qty>Be)return`Inventario insuficiente para "${se.productName}". Disponible: ${Be} unidades.`;const je=(Number(se.unitPrice)||0)*(se.qty||0),ot=Number(se.discount)||0;if(!Number.isInteger(ot)||ot<0)return`El descuento en "${se.productName}" debe ser entero y  0.`;if(ot>je)return`El descuento en "${se.productName}" no puede exceder C$ ${je.toFixed(2)}.`}return null},Oe=async le=>{le.preventDefault(),k("");const se=await Z();if(se){k(" "+se);return}try{T(!0);const Be=b.filter(ut=>(ut.qty||0)>0).map(ut=>{const _e=(Number(ut.unitPrice)||0)*(ut.qty||0),rt=Math.max(0,Math.floor(Number(ut.discount)||0)),we=Math.max(0,_e-rt);return{productId:ut.productId,productName:ut.productName,sku:ut.sku||"",qty:ut.qty,unitPrice:Number(ut.unitPrice)||0,discount:rt,total:Math.floor(we*100)/100}}),je={type:u,date:p,createdAt:or.now(),itemsTotal:Number(I)||0,total:Number(I)||0,quantity:Number(j)||0,items:Be};u==="CONTADO"?je.customerName=A.trim():(je.customerId=f,je.downPayment=Number(_)||0);const ot=await wn(pt(Ge,"sales_clothes"),je);if(u==="CREDITO"&&f){const ut={customerId:f,date:p,createdAt:or.now(),ref:{saleId:ot.id}};await wn(pt(Ge,"ar_movements"),{...ut,type:"CARGO",amount:Number(I)||0}),Number(_)>0&&await wn(pt(Ge,"ar_movements"),{...ut,type:"ABONO",amount:-Number(_)})}const mt={};for(const ut of Be)if(ut.qty>0){const{allocations:_e}=await Z4e({productId:ut.productId,quantity:ut.qty,saleDate:p,saleId:ot.id});mt[ut.productId]={productId:ut.productId,allocations:_e}}await rn(Kt(Ge,"sales_clothes",ot.id),{allocationsByItem:mt}),d("CONTADO"),h(""),m(""),g(new Date().toISOString().slice(0,10)),w([]),S(0),u==="CREDITO"&&f&&a(ut=>ut.map(_e=>_e.id===f?{..._e,balance:(_e.balance||0)+(Number(I)||0)-(Number(_)||0)}:_e)),k(" Venta registrada"),(async()=>{const ut=tr(pt(Ge,"inventory_clothes_batches"),sr("remaining",">",0)),_e=await Lt(ut),rt={};_e.forEach(we=>{const Ce=we.data(),Ue=Ce.productId||"",Ve=Number(Ce.remaining||0);Ue&&(rt[Ue]=(rt[Ue]||0)+Ve)}),c(rt)})()}catch(Be){console.error(Be),k(" Error al guardar la venta")}finally{T(!1)}};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas (Ropa)"}),o.jsxs("form",{onSubmit:Oe,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:u,onChange:le=>d(le.target.value),children:[o.jsx("option",{value:"CONTADO",children:"Contado"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),u==="CONTADO"?o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del cliente (contado)"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Cliente Mostrador",value:A,onChange:le=>m(le.target.value)})]}):o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("select",{className:"flex-1 border p-2 rounded",value:f,onChange:le=>h(le.target.value),children:[o.jsx("option",{value:"",children:"Selecciona un cliente"}),n.map(le=>o.jsxs("option",{value:le.status==="ACTIVO"?le.id:"",disabled:le.status==="BLOQUEADO",children:[le.name," | ",le.phone," | Saldo: ",tx(le.balance||0)]},le.id))]}),o.jsx("button",{type:"button",className:"px-20 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>W(!0),children:"Crear Cliente"})]}),o.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-lg font-semibold",children:tx(U)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:_===0?"":_,onChange:le=>S(Math.max(0,Number(le.target.value||0))),placeholder:"0.00"})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),o.jsx("div",{className:"text-lg font-semibold",children:tx(ne)})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:p,onChange:le=>g(le.target.value)})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:x,onChange:async le=>{const se=le.target.value;y(se),await ve(se)},children:[o.jsx("option",{value:"",children:"Selecciona un producto"}),s.map(le=>{const se=b.some(ot=>ot.productId===le.id),Be=l[le.id]||0,je=se||Be<=0;return o.jsxs("option",{value:je?"":le.id,disabled:je,children:[le.name," ",le.sku?` ${le.sku}`:""," ",Be>0?`(disp: ${Be})`:"(sin stock)",se?" (seleccionado)":""]},le.id)})]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Productos sin existencias se muestran en gris y no se pueden seleccionar."})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsxs("div",{className:"border rounded overflow-hidden",children:[o.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 px-3 py-2 text-xs font-semibold border-b",children:[o.jsx("div",{className:"col-span-4",children:"Producto"}),o.jsx("div",{className:"col-span-2 text-right",children:"Precio"}),o.jsx("div",{className:"col-span-2 text-right",children:"Existencias"}),o.jsx("div",{className:"col-span-1 text-right",children:"Cantidad"}),o.jsx("div",{className:"col-span-1 text-right",children:"Descuento"}),o.jsx("div",{className:"col-span-1 text-right",children:"Monto"}),o.jsx("div",{className:"col-span-1 text-center",children:"Quitar"})]}),b.length===0?o.jsx("div",{className:"px-3 py-4 text-sm text-gray-500",children:"No hay productos agregados."}):b.map(le=>{const se=Math.max(0,(le.available||0)-(le.qty||0)),Be=(Number(le.unitPrice)||0)*(le.qty||0),je=Math.max(0,Be-(Number(le.discount)||0));return o.jsxs("div",{className:"grid grid-cols-12 items-center px-3 py-2 border-b text-sm gap-x-2",children:[o.jsx("div",{className:"col-span-4",children:o.jsxs("div",{className:"font-medium",children:[le.productName,le.sku?`  ${le.sku}`:""]})}),o.jsx("div",{className:"col-span-2 text-right",children:tx(le.unitPrice)}),o.jsx("div",{className:"col-span-2 text-right",children:se}),o.jsx("div",{className:"col-span-1",children:o.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(le.qty)||le.qty===0?"":le.qty,onChange:ot=>L(le.productId,ot.target.value),inputMode:"numeric",placeholder:"0",title:"Cantidad de piezas"})}),o.jsx("div",{className:"col-span-1",children:o.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(le.discount)||le.discount===0?"":le.discount,onChange:ot=>Ye(le.productId,ot.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento entero (C$)"})}),o.jsx("div",{className:"col-span-1 text-right",children:tx(je)}),o.jsx("div",{className:"col-span-1 text-center",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 hover:bg-red-200",onClick:()=>ie(le.productId),title:"Quitar producto",children:""})})]},le.productId)})]}),b.length>0&&o.jsxs("div",{className:"flex justify-end gap-6 mt-3 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Piezas totales: "}),o.jsx("span",{className:"font-semibold",children:j})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Total: "}),o.jsx("span",{className:"font-semibold",children:tx(I)})]})]})]}),o.jsx("div",{className:"md:col-span-2",children:o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",disabled:P,children:P?"Guardando...":"Registrar venta"})})]}),E&&o.jsx("p",{className:"mt-2 text-sm",children:E}),O&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-xl p-4",children:[o.jsx("h3",{className:"text-lg font-bold mb-3",children:"Nuevo cliente"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded",value:Ae,onChange:le=>de(le.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),o.jsx("input",{className:"w-full border p-2 rounded",value:fe,onChange:le=>ge(vV(le.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:ee,onChange:le=>Fe(le.target.value),children:[o.jsx("option",{value:"",children:""}),tje.map(le=>o.jsx("option",{value:le,children:le},le))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:Q,onChange:le=>H(le.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:R===0?"":R,onChange:le=>z(Math.max(0,Number(le.target.value||0))),placeholder:"Ej: 2000"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Pe,onChange:le=>F(le.target.value),maxLength:500})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{J(),W(!1)},children:"Cancelar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:async()=>{if(k(""),!Ae.trim()){k("Ingresa el nombre del nuevo cliente.");return}const le=vV(fe);try{const se=await wn(pt(Ge,"customers_clothes"),{name:Ae.trim(),phone:le,place:ee||"",notes:Pe||"",status:Q,creditLimit:Number(R||0),createdAt:or.now()}),Be={id:se.id,name:Ae.trim(),phone:le,place:ee||"",status:Q,creditLimit:Number(R||0),balance:0};a(je=>[Be,...je]),h(se.id),J(),W(!1),k(" Cliente creado")}catch(se){console.error(se),k(" Error al crear cliente")}},children:"Guardar cliente"})]})]})}),P&&o.jsx("div",{className:"fixed inset-0 z-[70] bg-black/40 flex items-center justify-center",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border px-4 py-3 flex items-center gap-3",children:[o.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),o.jsx("span",{className:"font-medium",children:"Guardando venta"})]})})]})}const Ui=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function tE(t){var r;const e=t==null?void 0:t.date;return e||((r=t==null?void 0:t.createdAt)!=null&&r.toDate?br(t.createdAt.toDate(),"yyyy-MM-dd"):"")}function aje(t,e){const r=tE(t);if(!r)return null;if(Array.isArray(t.items))return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??0),items:t.items.map(i=>({productId:String(i.productId||""),productName:String(i.productName||""),sku:i.sku||"",qty:Number(i.qty||0),unitPrice:Number(i.unitPrice??(Number(i.total||0)/Math.max(1,Number(i.qty||0))||0)),discount:Number(i.discount||0)})),customerId:t.customerId||void 0,customerName:t.customerName||void 0};const n=t.item||{},a=Number(t.quantity??n.qty??0),s=Number(t.total??t.itemsTotal??n.total??0);return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??s??0),items:[{productId:String(n.productId||t.productId||""),productName:String(n.productName||t.productName||""),sku:n.sku||t.sku||"",qty:a,unitPrice:Number(n.unitPrice??(s&&a?s/a:0)),discount:Number(n.discount||0)}],customerId:t.customerId||void 0,customerName:t.customerName||void 0}}function sje(t,e,r,n){const a={};for(const l of t)a[l.productId]||(a[l.productId]={productName:l.productName,lots:[]}),a[l.productId].lots.push({date:l.date,qtyLeft:Number(l.quantity||0),cost:Number(l.purchasePrice||0)});for(const l of Object.keys(a))a[l].lots.sort((c,u)=>c.date.localeCompare(u.date));const s=[...e].sort((l,c)=>l.date.localeCompare(c.date));let i=0;for(const l of s)for(const c of l.items||[]){const u=a[c.productId];if(!u)continue;let d=Number(c.qty||0);if(!(d<=0))for(const f of u.lots){if(d<=0)break;if(f.qtyLeft<=0)continue;const h=Math.min(f.qtyLeft,d);l.date>=r&&l.date<=n&&(i+=h*f.cost),f.qtyLeft-=h,d-=h}}return i}function ije(){const{refreshKey:t,refresh:e}=jc(),[r,n]=v.useState(br(Zd(new Date),"yyyy-MM-dd")),[a,s]=v.useState(br(Jd(new Date),"yyyy-MM-dd")),[i,l]=v.useState([]),[c,u]=v.useState([]),[d,f]=v.useState([]),[h,A]=v.useState([]),[m,p]=v.useState([]),[g,x]=v.useState([]),[y,b]=v.useState(!0),[w,j]=v.useState(""),[I,_]=v.useState(!1),[S,E]=v.useState(null),[k,P]=v.useState([]),[T,O]=v.useState(!1),[W,Ae]=v.useState({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});v.useEffect(()=>{(async()=>{b(!0),j("");try{const F=await Lt(pt(Ge,"sales_clothes")),Q=[],H=[];F.forEach(ie=>{const Z=ie.data(),Oe=aje(Z,ie.id);Oe&&(Oe.date<=a&&Q.push(Oe),Oe.date>=r&&Oe.date<=a&&H.push(Oe))}),u(Q),l(H);const R=await Lt(pt(Ge,"inventory_clothes_batches")),z=[];R.forEach(ie=>{const Z=ie.data(),Oe=tE(Z);!Oe||Oe>a||z.push({id:ie.id,productId:Z.productId,productName:Z.productName||"",date:Oe,quantity:Number(Z.quantity||0),remaining:Number(Z.remaining||0),purchasePrice:Number(Z.purchasePrice||0)})}),f(z);const J=await Lt(pt(Ge,"expenses_clothes")),D=[];J.forEach(ie=>{const Z=ie.data(),Oe=tE(Z);Oe&&Oe>=r&&Oe<=a&&D.push({id:ie.id,date:Oe,category:Z.category||"",description:Z.description||"",amount:Number(Z.amount||0),status:Z.status||""})}),A(D);const U=await Lt(pt(Ge,"ar_movements")),ne=[],ve={};U.forEach(ie=>{const Z=ie.data(),Oe=tE(Z);if(!Oe)return;const le=Z.customerId,se=Number(Z.amount||0);le&&(ve[le]=(ve[le]||0)+se),Z.type==="ABONO"&&Oe>=r&&Oe<=a&&ne.push({id:ie.id,customerId:le,type:"ABONO",amount:se,date:Oe})}),p(ne);const L=await Lt(pt(Ge,"customers_clothes")),Ye=[];L.forEach(ie=>{const Z=ie.data();Ye.push({id:ie.id,name:Z.name||"",balance:ve[ie.id]||0})}),x(Ye)}catch(F){console.error(F),j(" Error cargando datos del dashboard.")}finally{b(!1)}})()},[r,a,t]);const de=v.useMemo(()=>{try{return sje(d,c,r,a)}catch(F){return console.error(F),0}},[d,c,r,a]),fe=v.useMemo(()=>{const F=i.reduce((ve,L)=>ve+(L.total||0),0),Q=h.reduce((ve,L)=>ve+(L.amount||0),0),H=F-de,R=H-Q,z=m.reduce((ve,L)=>ve+Math.abs(L.amount||0),0),J=g.filter(ve=>(ve.balance||0)>0),D=J.reduce((ve,L)=>ve+(L.balance||0),0);let U=0,ne=0;for(const ve of i){const L=(ve.items||[]).reduce((Ye,ie)=>Ye+(Number(ie.qty)||0),0);ve.type==="CONTADO"?U+=L:ne+=L}return{ventasTotales:F,costoMercaderia:de,gastosPeriodo:Q,gananciaAntes:H,gananciaDespues:R,abonosRecibidos:z,saldosPendientes:D,clientesConSaldo:J.length,prendasCash:U,prendasCredito:ne}},[i,h,m,g,de]),ge=v.useMemo(()=>{const F={};for(const Q of i){if(Q.type!=="CREDITO"||!Q.customerId)continue;const H=(Q.items||[]).reduce((R,z)=>R+(Number(z.qty)||0),0);F[Q.customerId]=(F[Q.customerId]||0)+H}return g.filter(Q=>(Q.balance||0)>0).map(Q=>({customerId:Q.id,name:Q.name,prendasCredito:F[Q.id]||0,saldo:Q.balance||0})).sort((Q,H)=>H.saldo-Q.saldo)},[g,i]),ee=v.useMemo(()=>{const F={};return g.forEach(Q=>F[Q.id]=Q.name),F},[g]),Fe=v.useMemo(()=>[...i].sort((F,Q)=>Q.date.localeCompare(F.date)).map(F=>{var R;const Q=(F.items||[]).reduce((z,J)=>z+(Number(J.qty)||0),0);let H="Cash";return F.type==="CREDITO"&&F.customerId?H=ee[F.customerId]||"":F.type==="CONTADO"&&(H=((R=F.customerName)==null?void 0:R.trim())||"Cash"),{id:F.id,date:F.date,type:F.type==="CREDITO"?"Crdito":"Cash",customer:H,piezas:Q,total:Number(F.total||0)}}),[i,ee]),Pe=async F=>{_(!0),E({id:F.customerId,name:F.name}),P([]),O(!0),Ae({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});try{const Q=[];let H=0,R=0,z=0;for(const ne of i)if(!(ne.type!=="CREDITO"||ne.customerId!==F.customerId))for(const ve of ne.items||[]){const L=Number(ve.qty||0),Ye=Number(ve.unitPrice||0),ie=L*Ye,Z=Math.max(0,Number(ve.discount||0)),Oe=Math.max(0,ie-Z);Q.push({saleId:ne.id,date:ne.date,productName:ve.productName,sku:ve.sku||"",qty:L,unitPrice:Ye,lineTotal:ie,discount:Z,lineFinal:Oe}),H+=ie,R+=Z,z+=Oe}let J=0;for(const ne of m)ne.customerId===F.customerId&&(J+=Math.abs(ne.amount||0));const D=g.find(ne=>ne.id===F.customerId),U=(D==null?void 0:D.balance)||0;P(Q),Ae({totalBruto:H,totalDescuento:R,totalFiado:z,saldoActual:U,abonadoPeriodo:J})}catch(Q){console.error(Q),j(" No se pudo cargar el detalle del cliente.")}finally{O(!1)}};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas (Ropa)"}),o.jsx(Ic,{onClick:e,loading:y})]}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:F=>n(F.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:F=>s(F.target.value)})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),o.jsx("div",{className:"text-xl font-semibold",children:Ui(fe.ventasTotales)}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Cash + Crdito del periodo."})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),o.jsx("div",{className:"text-xl font-semibold",children:Ui(fe.costoMercaderia)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia antes de Gastos"}),o.jsx("div",{className:"text-xl font-semibold text-green-600",children:Ui(fe.gananciaAntes)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Gastos del Negocio"}),o.jsx("div",{className:"text-xl font-semibold",children:Ui(fe.gastosPeriodo)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia despus de Gastos"}),o.jsx("div",{className:"text-xl font-semibold text-green-600",children:Ui(fe.gananciaDespues)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),o.jsx("div",{className:"text-xl font-semibold",children:Ui(fe.abonosRecibidos)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),o.jsx("div",{className:"text-xl font-semibold",children:Ui(fe.saldosPendientes)}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),o.jsx("div",{className:"text-xl font-semibold",children:fe.clientesConSaldo})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:fe.prendasCash})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Crdito (vendidas)"}),o.jsx("div",{className:"text-xl font-semibold",children:fe.prendasCredito})]})]}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado por cliente"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Cliente"}),o.jsx("th",{className:"p-2 border",children:"Prendas Crdito (periodo)"}),o.jsx("th",{className:"p-2 border",children:"Saldo actual"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Cargando"})}):ge.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Sin clientes con saldo"})}):ge.map(F=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:F.name}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Pe({customerId:F.customerId,name:F.name}),title:"Ver piezas fiadas del periodo",children:F.prendasCredito})}),o.jsx("td",{className:"p-2 border font-semibold",children:Ui(F.saldo)})]},F.customerId))})]})}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Transacciones del periodo"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Cliente"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Piezas"}),o.jsx("th",{className:"p-2 border",children:"Monto"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):Fe.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin transacciones en el rango seleccionado."})}):Fe.map(F=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:F.date}),o.jsx("td",{className:"p-2 border",children:F.customer}),o.jsx("td",{className:"p-2 border",children:F.type}),o.jsx("td",{className:"p-2 border",children:F.piezas}),o.jsx("td",{className:"p-2 border",children:Ui(F.total)})]},F.id))})]})}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Gastos del periodo"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Estado"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):h.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):h.sort((F,Q)=>F.date.localeCompare(Q.date)).map(F=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:F.date}),o.jsx("td",{className:"p-2 border",children:F.category||""}),o.jsx("td",{className:"p-2 border",children:F.description?o.jsx("span",{title:F.description,children:F.description.length>40?F.description.slice(0,40)+"":F.description}):""}),o.jsx("td",{className:"p-2 border",children:Ui(F.amount)}),o.jsx("td",{className:"p-2 border",children:F.status||""})]},F.id))})]})}),w&&o.jsx("p",{className:"mt-2 text-sm",children:w}),I&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Detalle del cliente  ",(S==null?void 0:S.name)||""]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>_(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total Bruto (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:Ui(W.totalBruto)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Descuento (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:Ui(W.totalDescuento)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto Total Fiado (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:Ui(W.totalFiado)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-xl font-semibold",children:Ui(W.saldoActual)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Abonado (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:Ui(W.abonadoPeriodo)})]})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha compra"}),o.jsx("th",{className:"p-2 border",children:"Pieza"}),o.jsx("th",{className:"p-2 border",children:"SKU"}),o.jsx("th",{className:"p-2 border",children:"Cant."}),o.jsx("th",{className:"p-2 border",children:"P. Unit"}),o.jsx("th",{className:"p-2 border",children:"Monto"})," ",o.jsx("th",{className:"p-2 border",children:"Descuento"})," ",o.jsx("th",{className:"p-2 border",children:"Monto final"})," "]})}),o.jsx("tbody",{children:T?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Cargando"})}):k.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Sin piezas fiadas en el periodo."})}):k.sort((F,Q)=>F.date.localeCompare(Q.date)).map((F,Q)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:F.date}),o.jsx("td",{className:"p-2 border",children:F.productName}),o.jsx("td",{className:"p-2 border",children:F.sku||""}),o.jsx("td",{className:"p-2 border",children:F.qty}),o.jsx("td",{className:"p-2 border",children:Ui(F.unitPrice)}),o.jsx("td",{className:"p-2 border",children:Ui(F.lineTotal)}),o.jsx("td",{className:"p-2 border",children:Ui(F.discount)}),o.jsx("td",{className:"p-2 border",children:Ui(F.lineFinal)})]},`${F.saleId}-${Q}`))})]})})]})})]})}const yV=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal"],BC=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function oje(){const[t,e]=v.useState(br(Zd(new Date),"yyyy-MM-dd")),[r,n]=v.useState(br(Jd(new Date),"yyyy-MM-dd")),[a,s]=v.useState(br(new Date,"yyyy-MM-dd")),[i,l]=v.useState(""),[c,u]=v.useState(""),[d,f]=v.useState(0),[h,A]=v.useState("PENDIENTE"),[m,p]=v.useState(""),[g,x]=v.useState([]),[y,b]=v.useState(!0),[w,j]=v.useState(""),[I,_]=v.useState(null),[S,E]=v.useState(""),[k,P]=v.useState(""),[T,O]=v.useState(""),[W,Ae]=v.useState(0),[de,fe]=v.useState("PENDIENTE"),[ge,ee]=v.useState("");v.useEffect(()=>{(async()=>{b(!0);try{const D=tr(pt(Ge,"expenses_clothes"),ln("date","desc")),U=await Lt(D),ne=[];U.forEach(ve=>{const L=ve.data();ne.push({id:ve.id,date:L.date||br(new Date,"yyyy-MM-dd"),category:L.category||"",description:L.description||"",amount:Number(L.amount||0),status:L.status||"PENDIENTE",notes:L.notes||"",createdAt:L.createdAt??or.now()})}),x(ne)}catch(D){console.error(D),j(" Error al cargar gastos")}finally{b(!1)}})()},[]);const Fe=v.useMemo(()=>g.filter(D=>!(t&&D.date<t||r&&D.date>r)),[g,t,r]),Pe=v.useMemo(()=>{const D=Fe.reduce((ve,L)=>ve+(L.amount||0),0),U=Fe.filter(ve=>ve.status==="PAGADO").reduce((ve,L)=>ve+(L.amount||0),0),ne=D-U;return{total:D,pagado:U,pendiente:ne}},[Fe]),F=()=>{s(br(new Date,"yyyy-MM-dd")),l(""),u(""),f(0),A("PENDIENTE"),p("")},Q=async D=>{if(D.preventDefault(),j(""),!i){j("Selecciona una categora.");return}if(!c.trim()){j("Ingresa una descripcin.");return}if(!d||d<=0){j("Ingresa un monto vlido.");return}try{const U=await wn(pt(Ge,"expenses_clothes"),{date:a,category:i,description:c.trim(),amount:Number(d.toFixed(2)),status:h,notes:m||"",createdAt:or.now()});x(ne=>[{id:U.id,date:a,category:i,description:c.trim(),amount:Number(d.toFixed(2)),status:h,notes:m||"",createdAt:or.now()},...ne]),F(),j(" Gasto registrado")}catch(U){console.error(U),j(" Error al guardar gasto")}},H=D=>{_(D.id),E(D.date),P(D.category||""),O(D.description||""),Ae(Number(D.amount||0)),fe(D.status||"PENDIENTE"),ee(D.notes||"")},R=()=>{_(null),E(""),P(""),O(""),Ae(0),fe("PENDIENTE"),ee("")},z=async()=>{if(I){if(!k){j("Selecciona una categora.");return}if(!T.trim()){j("Ingresa una descripcin.");return}if(!W||W<=0){j("Ingresa un monto vlido.");return}try{await rn(Kt(Ge,"expenses_clothes",I),{date:S,category:k,description:T.trim(),amount:Number(W.toFixed(2)),status:de,notes:ge||""}),x(D=>D.map(U=>U.id===I?{...U,date:S,category:k,description:T.trim(),amount:Number(W.toFixed(2)),status:de,notes:ge||""}:U)),R(),j(" Gasto actualizado")}catch(D){console.error(D),j(" Error al actualizar gasto")}}},J=async D=>{confirm(`Eliminar el gasto "${D.description}"?`)&&(await yn(Kt(Ge,"expenses_clothes",D.id)),x(ne=>ne.filter(ve=>ve.id!==D.id)),j(" Gasto borrado"))};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Ropa)"}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:D=>e(D.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:D=>n(D.target.value)})]}),o.jsxs("div",{className:"ml-auto text-sm",children:[o.jsx("div",{className:"font-semibold",children:"Totales del rango"}),o.jsxs("div",{children:["Total: ",BC(Pe.total)]}),o.jsxs("div",{children:["Pagado: ",BC(Pe.pagado)]}),o.jsxs("div",{children:["Pendiente: ",BC(Pe.pendiente)]})]})]}),o.jsxs("form",{onSubmit:Q,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:a,onChange:D=>s(D.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:i,onChange:D=>l(D.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),yV.map(D=>o.jsx("option",{value:D,children:D},D))]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:c,onChange:D=>u(D.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:d===0?"":d,onChange:D=>f(Math.max(0,Number(D.target.value||0))),placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:h,onChange:D=>A(D.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:m,onChange:D=>p(D.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[m.length,"/500"]})]}),o.jsx("div",{className:"md:col-span-2",children:o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):Fe.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):Fe.slice().sort((D,U)=>D.date.localeCompare(U.date)).map(D=>{const U=I===D.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:U?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:S,onChange:ne=>E(ne.target.value)}):D.date}),o.jsx("td",{className:"p-2 border",children:U?o.jsxs("select",{className:"w-full border p-1 rounded",value:k,onChange:ne=>P(ne.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),yV.map(ne=>o.jsx("option",{value:ne,children:ne},ne))]}):D.category||""}),o.jsx("td",{className:"p-2 border",children:U?o.jsx("input",{className:"w-full border p-1 rounded",value:T,onChange:ne=>O(ne.target.value)}):o.jsx("span",{title:D.description,children:D.description.length>40?D.description.slice(0,40)+"":D.description})}),o.jsx("td",{className:"p-2 border",children:U?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(W)?"":W,onChange:ne=>Ae(Math.max(0,Number(ne.target.value||0)))}):BC(D.amount)}),o.jsx("td",{className:"p-2 border",children:U?o.jsxs("select",{className:"w-full border p-1 rounded",value:de,onChange:ne=>fe(ne.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${D.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:D.status})}),o.jsx("td",{className:"p-2 border",children:U?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:ge,onChange:ne=>ee(ne.target.value),maxLength:500}):o.jsx("span",{title:D.notes||"",children:(D.notes||"").length>40?(D.notes||"").slice(0,40)+"":D.notes||""})}),o.jsx("td",{className:"p-2 border",children:o.jsx("div",{className:"flex gap-2 justify-center",children:U?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:z,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:R,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>H(D),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>J(D),children:"Borrar"})]})})})]},D.id)})})]})}),w&&o.jsx("p",{className:"mt-2 text-sm",children:w})]})}const wd=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function lje(t){var e;return t!=null&&t.date?t.date:(e=t==null?void 0:t.createdAt)!=null&&e.toDate?br(t.createdAt.toDate(),"yyyy-MM-dd"):""}function cje(t,e){const r=lje(t);if(!r)return null;const n=t.item||{},a=Number((n==null?void 0:n.qty)??t.quantity??0)||0,s=Number((n==null?void 0:n.total)??t.total??0)||0,i=Number((n==null?void 0:n.unitPrice)??(a>0?s/a:0))||0;return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total||0),quantity:Number(t.quantity||a||0),customerId:t.customerId||void 0,customerName:t.customerName||void 0,downPayment:Number(t.downPayment||0),item:{productId:String((n==null?void 0:n.productId)||t.productId||""),productName:String((n==null?void 0:n.productName)||t.productName||""),sku:(n==null?void 0:n.sku)||t.sku||"",qty:a,unitPrice:i,total:a*i}}}async function uje(t,e){if(e<=0)return;const r=tr(pt(Ge,"inventory_clothes_batches"),sr("productId","==",t)),n=await Lt(r),a=[];n.forEach(i=>{const l=i.data();a.push({id:i.id,productId:l.productId,date:l.date||"",quantity:Number(l.quantity||0),remaining:Number(l.remaining||0)})}),a.sort((i,l)=>i.date.localeCompare(l.date));let s=e;for(const i of a){if(s<=0)break;if(i.remaining<=0)continue;const l=Math.min(i.remaining,s);s-=l,await rn(Kt(Ge,"inventory_clothes_batches",i.id),{remaining:Math.max(0,Number((i.remaining-l).toFixed(0)))})}s>0&&console.warn("consumeFIFO: falt inventario",s)}async function dje(t,e){if(e<=0)return;const r=tr(pt(Ge,"inventory_clothes_batches"),sr("productId","==",t)),n=await Lt(r),a=[];n.forEach(i=>{const l=i.data();a.push({id:i.id,productId:l.productId,date:l.date||"",quantity:Number(l.quantity||0),remaining:Number(l.remaining||0)})}),a.sort((i,l)=>i.date.localeCompare(l.date));let s=e;for(const i of a){if(s<=0)break;const l=Math.max(0,i.quantity-i.remaining);if(l<=0)continue;const c=Math.min(l,s);s-=c,await rn(Kt(Ge,"inventory_clothes_batches",i.id),{remaining:Number((i.remaining+c).toFixed(0))})}s>0&&console.warn("restoreFIFO: no se devolvi todo",s)}async function zte(t){const e=tr(pt(Ge,"ar_movements"),sr("ref.saleId","==",t)),r=await Lt(e);await Promise.all(r.docs.map(n=>yn(Kt(Ge,"ar_movements",n.id))))}async function fje(t,e,r){if(await zte(t.id),t.type!=="CREDITO"||!t.customerId)return;const n={customerId:t.customerId,date:t.date,createdAt:or.now(),ref:{saleId:t.id}},{addDoc:a}=await LA(async()=>{const{addDoc:i}=await Promise.resolve().then(()=>F1e);return{addDoc:i}},void 0);await a(pt(Ge,"ar_movements"),{...n,type:"CARGO",amount:Number(e)||0});const s=Math.max(0,Number(r??t.downPayment??0));s>0&&await a(pt(Ge,"ar_movements"),{...n,type:"ABONO",amount:-s})}function Aje(){const[t,e]=v.useState(!1),[r,n]=v.useState(!1),[a,s]=v.useState(null),[i,l]=v.useState([]),c=async ie=>{e(!0),n(!0),s(ie),l([]);try{const Oe=(await Lt(tr(pt(Ge,"sales_clothes"),sr("__name__","==",ie)))).docs[0],le=Oe==null?void 0:Oe.data(),Be=(Array.isArray(le==null?void 0:le.items)?le.items:le!=null&&le.item?[le.item]:[]).map(je=>({productName:String(je.productName||""),qty:Number(je.qty||0),unitPrice:Number(je.unitPrice||0),discount:Number(je.discount||0),total:Number(je.total||0)}));l(Be)}catch(Z){console.error(Z)}finally{n(!1)}},[u,d]=v.useState(br(new Date,"yyyy-MM-01")),[f,h]=v.useState(br(new Date,"yyyy-MM-dd")),[A,m]=v.useState([]),[p,g]=v.useState([]),[x,y]=v.useState(!0),[b,w]=v.useState(""),[j,I]=v.useState(""),[_,S]=v.useState(""),[E,k]=v.useState(null),[P,T]=v.useState(!1),[O,W]=v.useState(null),[Ae,de]=v.useState(0),fe=15,[ge,ee]=v.useState(1),Fe=v.useMemo(()=>{const ie={};return A.forEach(Z=>ie[Z.id]=Z.name),ie},[A]);v.useEffect(()=>{(async()=>{y(!0),w("");try{const ie=await Lt(pt(Ge,"customers_clothes")),Z=[];ie.forEach(se=>Z.push({id:se.id,name:se.data().name||""})),m(Z);const Oe=await Lt(tr(pt(Ge,"sales_clothes"),ln("createdAt","desc"))),le=[];Oe.forEach(se=>{const Be=cje(se.data(),se.id);Be&&Be.date>=u&&Be.date<=f&&le.push(Be)}),g(le.sort((se,Be)=>Be.date.localeCompare(se.date))),ee(1)}catch(ie){console.error(ie),w(" Error cargando transacciones.")}finally{y(!1)}})()},[u,f]);const Pe=v.useMemo(()=>p.filter(ie=>!(j&&ie.customerId!==j||_&&ie.type!==_)),[p,j,_]),F=v.useMemo(()=>{let ie=0,Z=0,Oe=0,le=0;for(const se of Pe)se.type==="CONTADO"?(ie+=se.item.qty,Oe+=se.total):(Z+=se.item.qty,le+=se.total);return{piezasCash:ie,piezasCredito:Z,montoCash:Oe,montoCredito:le}},[Pe]),Q=Math.max(1,Math.ceil(Pe.length/fe)),H=v.useMemo(()=>{const ie=(ge-1)*fe;return Pe.slice(ie,ie+fe)},[Pe,ge]),R=ie=>{k(null),W(ie),de(ie.item.qty||0),T(!0)},z=async ie=>{if(k(null),!!window.confirm("Eliminar esta venta? Esta accin no se puede deshacer."))try{y(!0),await Ak(ie.id),await zte(ie.id),g(Z=>Z.filter(Oe=>Oe.id!==ie.id)),w(" Venta eliminada")}catch(Z){console.error(Z),w(" No se pudo eliminar la venta.")}finally{y(!1)}},J=async()=>{if(!O)return;const ie=Number(O.item.qty||0),Z=Math.max(1,Math.floor(Number(Ae)||0));if(Z===ie){T(!1);return}const Oe=Number(O.item.unitPrice||0),le=Number((Oe*Z).toFixed(2));try{y(!0);const se=Z-ie;se>0?await uje(O.item.productId,se):se<0&&await dje(O.item.productId,-se);const Be=Kt(Ge,"sales_clothes",O.id);await rn(Be,{quantity:Z,total:le,itemsTotal:le,"item.qty":Z,"item.total":le,updatedAt:or.now()});const je=Math.min(Number(O.downPayment||0),le);await fje(O,le,je),g(ot=>ot.map(mt=>mt.id===O.id?{...mt,quantity:Z,total:le,item:{...mt.item,qty:Z,total:le},downPayment:je}:mt)),w(" Venta actualizada"),T(!1)}catch(se){console.error(se),w(" No se pudo actualizar la venta.")}finally{y(!1)}},D=()=>{const ie=`Reporte de transacciones (Ropa)  ${u} a ${f}`,Z=Be=>(Be||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Oe=Pe.map(Be=>{const je=Be.customerName||(Be.customerId?Fe[Be.customerId]:"")||"Nombre cliente";return`<tr>
          <td>${Be.date}</td>
          <td>${Z(je)}</td>
          <td>${Be.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${Be.item.qty}</td>
          <td style="text-align:right">${wd(Be.total)}</td>
        </tr>`}).join(""),le=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${Z(ie)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${Z(ie)}</h1>
      <div class="kpis">
        <div><b>Piezas Cash:</b> ${F.piezasCash}</div>
        <div><b>Piezas Crdito:</b> ${F.piezasCredito}</div>
        <div><b>Monto Cash:</b> ${wd(F.montoCash)}</div>
        <div><b>Monto Crdito:</b> ${wd(F.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Piezas</th><th>Monto</th>
      </tr></thead><tbody>
      ${Oe||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,se=window.open("","_blank");se&&(se.document.open(),se.document.write(le),se.document.close())},U=()=>ee(1),ne=()=>ee(ie=>Math.max(1,ie-1)),ve=()=>ee(ie=>Math.min(Q,ie+1)),L=()=>ee(Q),Ye=()=>{const ie=[];if(Q<=7)for(let Oe=1;Oe<=Q;Oe++)ie.push(Oe);else{const Oe=Math.max(1,ge-2),le=Math.min(Q,ge+2);ie.push(1),Oe>2&&ie.push(-1);for(let se=Oe;se<=le;se++)se!==1&&se!==Q&&ie.push(se);le<Q-1&&ie.push(-2),ie.push(Q)}return o.jsxs("div",{className:"flex items-center gap-1 justify-between mt-3",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:U,disabled:ge===1,children:" Primero"}),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ne,disabled:ge===1,children:" Anterior"}),ie.map((Oe,le)=>typeof Oe=="number"?o.jsx("button",{className:`px-3 py-1 border rounded ${Oe===ge?"bg-blue-600 text-white":""}`,onClick:()=>ee(Oe),children:Oe},le):o.jsx("span",{className:"px-2",children:""},le)),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ve,disabled:ge===Q,children:"Siguiente "}),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:L,disabled:ge===Q,children:"ltimo "})]}),o.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",ge," de ",Q,"  ",Pe.length," transaccin(es)"]})]})};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Reporte de transacciones (Ropa)"}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap gap-3 items-end text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:ie=>{d(ie.target.value),ee(1)}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:f,onChange:ie=>{h(ie.target.value),ee(1)}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),o.jsxs("select",{className:"border rounded px-2 py-1 min-w-[220px]",value:j,onChange:ie=>{I(ie.target.value),ee(1)},children:[o.jsx("option",{value:"",children:"Todos"}),A.map(ie=>o.jsx("option",{value:ie.id,children:ie.name},ie.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Tipo"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:_,onChange:ie=>{S(ie.target.value),ee(1)},children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"CONTADO",children:"Cash"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),o.jsx("button",{className:"ml-auto px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:D,children:"Exportar PDF"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:F.piezasCash})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:F.piezasCredito})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:wd(F.montoCash)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:wd(F.montoCredito)})]})]}),o.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Cliente"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Piezas"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:x?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Cargando"})}):H.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Sin transacciones en el rango."})}):H.map(ie=>{const Z=ie.customerName||(ie.customerId?Fe[ie.customerId]:"")||"Nombre cliente";return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:ie.date}),o.jsx("td",{className:"p-2 border",children:Z}),o.jsx("td",{className:"p-2 border",children:ie.type==="CREDITO"?"Crdito":"Cash"}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver piezas de esta transaccin",onClick:()=>c(ie.id),children:ie.item.qty})}),o.jsx("td",{className:"p-2 border",children:wd(ie.total)}),o.jsxs("td",{className:"p-2 border relative",children:[o.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>k(Oe=>Oe===ie.id?null:ie.id),title:"Acciones",children:""}),E===ie.id&&o.jsxs("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:[o.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100",onClick:()=>R(ie),children:"Editar"}),o.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>z(ie),children:"Eliminar"})]})]})]},ie.id)})})]}),Ye()]}),b&&o.jsx("p",{className:"mt-2 text-sm",children:b}),P&&O&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-md p-4",children:[o.jsx("h3",{className:"text-lg font-bold mb-2",children:"Editar venta"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Producto"}),o.jsxs("div",{className:"font-semibold",children:[O.item.productName," ",O.item.sku?` ${O.item.sku}`:""]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (piezas)"}),o.jsx("input",{type:"number",step:"1",min:1,className:"w-full border p-2 rounded",value:Ae,onChange:ie=>de(Math.max(1,Math.floor(Number(ie.target.value||0))))})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"P. Unit"}),o.jsx("div",{className:"text-lg font-semibold",children:wd(O.item.unitPrice)})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Nuevo total"}),o.jsx("div",{className:"text-lg font-semibold",children:wd(Number(O.item.unitPrice)*Number(Ae||0))})]})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{T(!1),W(null)},children:"Cancelar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:J,children:"Guardar cambios"})]})]})}),t&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Piezas vendidas"," ",a?` #${a}`:""]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>e(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio"}),o.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),o.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):i.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):i.map((ie,Z)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border text-left",children:ie.productName}),o.jsx("td",{className:"p-2 border text-right",children:ie.qty}),o.jsx("td",{className:"p-2 border text-right",children:wd(ie.unitPrice)}),o.jsx("td",{className:"p-2 border text-right",children:wd(ie.discount||0)}),o.jsx("td",{className:"p-2 border text-right",children:wd(ie.total)})]},Z))})]})})]})})]})}const bV=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],$c=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function TC(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function wV(t){const e=tr(pt(Ge,"ar_movements_pollo"),sr("ref.saleId","==",t)),r=await Lt(e);await Promise.all(r.docs.map(n=>yn(Kt(Ge,"ar_movements_pollo",n.id))))}function hje({role:t="",roles:e,sellerPolloId:r="",currentUserEmail:n}){const a=e&&e.length?e:t,s=String(r||"").trim(),i=zr(a,"vendedor_pollo"),l=zr(a,"admin"),[c,u]=v.useState([]),[d,f]=v.useState(!1),[h,A]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(""),[y,b]=v.useState(""),[w,j]=v.useState(!1),[I,_]=v.useState(!1),[S,E]=v.useState(null),[k,P]=v.useState([]),T=async De=>{var $t;j(!0),_(!0),E(De),P([]);try{const Gt=await xi(Kt(Ge,"salesV2",De));let It=null;Gt.exists()?It=Gt.data():It=($t=(await Lt(tr(pt(Ge,"salesV2"),sr("name","==",De)))).docs[0])==null?void 0:$t.data();const Ht=(Array.isArray(It==null?void 0:It.items)?It.items:It!=null&&It.item?[It.item]:[]).map(Ft=>({productName:String(Ft.productName||""),qty:Number(Ft.qty||0),unitPrice:Number(Ft.unitPrice||0),discount:Number(Ft.discount||0),total:Number(Ft.total||0)}));P(Ht)}catch(Gt){console.error(Gt)}finally{_(!1)}},[O,W]=v.useState(""),[Ae,de]=v.useState("+505 "),[fe,ge]=v.useState(""),[ee,Fe]=v.useState(""),[Pe,F]=v.useState("ACTIVO"),[Q,H]=v.useState(0),[R,z]=v.useState(""),[J,D]=v.useState(0),[U,ne]=v.useState([]),[ve,L]=v.useState(!0),[Ye,ie]=v.useState(""),[Z,Oe]=v.useState(null),[le,se]=v.useState(""),[Be,je]=v.useState("+505 "),[ot,mt]=v.useState(""),[ut,_e]=v.useState(""),[rt,we]=v.useState("ACTIVO"),[Ce,Ue]=v.useState(0),[Ve,ue]=v.useState(""),[ce,Te]=v.useState(!1),[Xe,ft]=v.useState(null),[gt,vt]=v.useState(!1),[At,ye]=v.useState([]),[$e,Ne]=v.useState({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),[ct,xe]=v.useState(!1),[Qe,dt]=v.useState(0),[Bt,qe]=v.useState(new Date().toISOString().slice(0,10)),[bt,G]=v.useState(""),[te,He]=v.useState(!1),[re,be]=v.useState(null),[Me,tt]=v.useState(""),[lt,ae]=v.useState(0),[V,X]=v.useState(""),[me,Ie]=v.useState(!1),[Y,pe]=v.useState(null),[ke,Re]=v.useState(!1),[Ze,nt]=v.useState(!1),[_t,Ct]=v.useState(null);v.useEffect(()=>{(async()=>{try{if(L(!0),i&&!s){ne([]),ie(" Este usuario no tiene vendedor asociado (sellerPolloId vaco).");return}const De=await Lt(pt(Ge,"sellers_candies")),$t=[];De.forEach(Ht=>{const Ft=Ht.data();$t.push({id:Ht.id,name:String(Ft.name||"")})}),u($t);const Gt=i?tr(pt(Ge,"customers_pollo"),sr("vendorId","==",s),ln("createdAt","desc")):tr(pt(Ge,"customers_pollo"),ln("createdAt","desc")),It=await Lt(Gt),kt=[];It.forEach(Ht=>{const Ft=Ht.data();kt.push({id:Ht.id,name:Ft.name??"",phone:Ft.phone??"+505 ",place:Ft.place??"",notes:Ft.notes??"",status:Ft.status??"ACTIVO",creditLimit:Number(Ft.creditLimit??0),createdAt:Ft.createdAt??or.now(),balance:0,vendorId:Ft.vendorId||"",vendorName:Ft.vendorName||"",initialDebt:Number(Ft.initialDebt||0),lastAbonoDate:"",lastAbonoAmount:0})});for(const Ht of kt)try{const Ft=tr(pt(Ge,"ar_movements_pollo"),sr("customerId","==",Ht.id)),Vt=await Lt(Ft);let nr=0,Zt=null;Vt.forEach(os=>{var il,dd,fd;const Xn=os.data(),bs=Number(Xn.amount||0);if(nr+=bs,bs<0){const Ad=Xn.date??((dd=(il=Xn.createdAt)==null?void 0:il.toDate)!=null&&dd.call(il)?Xn.createdAt.toDate().toISOString().slice(0,10):""),mu=(fd=Xn.createdAt)!=null&&fd.seconds?Number(Xn.createdAt.seconds):0;(!Zt||mu>=Zt.ts)&&(Zt={date:Ad,amount:Math.abs(bs),ts:mu})}});const fa=Number(Ht.initialDebt||0);Ht.balance=fa+nr,Zt?(Ht.lastAbonoDate=Zt==null?void 0:Zt.date,Ht.lastAbonoAmount=Zt==null?void 0:Zt.amount):(Ht.lastAbonoDate="",Ht.lastAbonoAmount=0)}catch{Ht.balance=Number(Ht.initialDebt||0),Ht.lastAbonoDate="",Ht.lastAbonoAmount=0}ne(kt)}catch(De){console.error(De),ie(" Error cargando clientes.")}finally{L(!1)}})()},[i,s]);const Nt=()=>{W(""),de("+505 "),ge(""),Fe(""),F("ACTIVO"),H(0),z(""),D(0)},Tt=async De=>{var kt;if(De.preventDefault(),ie(""),!O.trim()){ie("Ingresa el nombre.");return}const $t=TC(Ae);if($t.length<6){ie("Telfono incompleto.");return}const Gt=i?s:String(R||""),It=Gt&&((kt=c.find(Ht=>Ht.id===Gt))==null?void 0:kt.name)||"";try{const Ht=Number(J||0),Ft=await wn(pt(Ge,"customers_pollo"),{name:O.trim(),phone:$t,place:fe||"",notes:ee||"",status:Pe,creditLimit:Number(Q||0),vendorId:Gt,vendorName:It,initialDebt:Ht,createdAt:or.now()});ne(Vt=>[{id:Ft.id,name:O.trim(),phone:$t,place:fe||"",notes:ee||"",status:Pe,creditLimit:Number(Q||0),vendorId:Gt,vendorName:It,initialDebt:Ht,createdAt:or.now(),balance:Ht,lastAbonoDate:"",lastAbonoAmount:0},...Vt]),Nt(),Ie(!1),ie(" Cliente creado")}catch(Ht){console.error(Ht),ie(" Error al crear cliente")}},St=De=>{if(i){ie(" No permitido: vendedores no editan clientes desde el listado.");return}Oe(De.id),se(De.name),je(De.phone||"+505 "),mt(De.place||""),_e(De.notes||""),we(De.status||"ACTIVO"),Ue(Number(De.creditLimit||0)),ue(String(De.vendorId||""))},yt=()=>{Oe(null),se(""),je("+505 "),mt(""),_e(""),we("ACTIVO"),Ue(0),ue("")},cr=async()=>{var Ft;if(i){ie(" No permitido.");return}if(!Z)return;const De=TC(Be);if(!le.trim()){ie("Ingresa el nombre.");return}const $t=U.find(Vt=>Vt.id===Z),Gt=String(($t==null?void 0:$t.vendorId)||""),It=i?s:String(Ve||"");if(i&&Gt&&Gt!==s){ie(" Este cliente pertenece a otro vendedor.");return}if(l&&Gt&&It&&Gt!==It){ie(" Este cliente ya est asociado a otro vendedor. Primero desasocia (deja vendedor en ) y guarda; luego lo puedes asignar.");return}const kt=i?s:String(Ve||""),Ht=kt&&((Ft=c.find(Vt=>Vt.id===kt))==null?void 0:Ft.name)||"";try{await rn(Kt(Ge,"customers_pollo",Z),{name:le.trim(),phone:De,place:ot||"",notes:ut||"",status:rt,creditLimit:Number(Ce||0),vendorId:kt,vendorName:Ht}),ne(Vt=>Vt.map(nr=>nr.id===Z?{...nr,name:le.trim(),phone:De,place:ot||"",notes:ut||"",status:rt,creditLimit:Number(Ce||0),vendorId:kt,vendorName:Ht}:nr)),yt(),ie(" Cliente actualizado")}catch(Vt){console.error(Vt),ie(" Error al actualizar")}},ur=async De=>{if(confirm(`Eliminar al cliente "${De.name}"?
Se borrarn todas sus ventas y movimientos.`))try{L(!0);const Gt=tr(pt(Ge,"salesV2"),sr("customerId","==",De.id)),It=await Lt(Gt);for(const Ft of It.docs){const Vt=Ft.id;try{await yn(Kt(Ge,"salesV2",Vt))}catch(nr){console.warn("delete sale error",nr)}await wV(Vt)}const kt=tr(pt(Ge,"ar_movements_pollo"),sr("customerId","==",De.id)),Ht=await Lt(kt);await Promise.all(Ht.docs.map(Ft=>yn(Kt(Ge,"ar_movements_pollo",Ft.id)))),await yn(Kt(Ge,"customers_pollo",De.id)),ne(Ft=>Ft.filter(Vt=>Vt.id!==De.id)),ie(" Cliente eliminado y registros borrados")}catch(Gt){console.error(Gt),ie(" No se pudo eliminar el cliente.")}finally{L(!1)}},lr=(De,$t)=>{const Gt=De.reduce((Ft,Vt)=>Ft+(Number(Vt.amount)||0),0),It=De.filter(Ft=>Number(Ft.amount)<0).reduce((Ft,Vt)=>Ft+Math.abs(Number(Vt.amount)||0),0),kt=De.filter(Ft=>Number(Ft.amount)>0).reduce((Ft,Vt)=>Ft+(Number(Vt.amount)||0),0),Ht=Number($t||0)+Gt;Ne({saldoActual:Ht,totalAbonado:It,totalCargos:Number($t||0)+kt,saldoRestante:Ht})},Cr=async De=>{ft(De),ye([]),Ne({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),Te(!0),Re(!1),nt(!1),Ct(null),xe(!1),dt(0),qe(new Date().toISOString().slice(0,10)),G(""),be(null),vt(!0);try{const $t=tr(pt(Ge,"ar_movements_pollo"),sr("customerId","==",De.id)),Gt=await Lt($t),It=[];Gt.forEach(kt=>{var nr,Zt;const Ht=kt.data(),Ft=Ht.date??((Zt=(nr=Ht.createdAt)==null?void 0:nr.toDate)!=null&&Zt.call(nr)?Ht.createdAt.toDate().toISOString().slice(0,10):""),Vt=Number(Ht.amount||0);It.push({id:kt.id,date:Ft,type:Ht.type??(Vt<0?"ABONO":"CARGO"),amount:Vt,ref:Ht.ref||{},comment:Ht.comment||"",createdAt:Ht.createdAt})}),It.sort((kt,Ht)=>{var nr,Zt;if(kt.date!==Ht.date)return kt.date.localeCompare(Ht.date);const Ft=((nr=kt.createdAt)==null?void 0:nr.seconds)||0,Vt=((Zt=Ht.createdAt)==null?void 0:Zt.seconds)||0;return Ft-Vt}),ye(It),lr(It,Number(De.initialDebt||0))}catch($t){console.error($t),ie(" No se pudo cargar el estado de cuenta")}finally{vt(!1)}},Nr=De=>{const $t=De.filter(Gt=>Number(Gt.amount)<0).map(Gt=>{var It;return{date:Gt.date,amount:Math.abs(Number(Gt.amount||0)),ts:((It=Gt.createdAt)==null?void 0:It.seconds)||0}}).sort((Gt,It)=>(Gt.ts||0)-(It.ts||0));return $t.length?$t[$t.length-1]:null},mn=async()=>{if(!Xe)return;ie("");const De=Number(Qe||0);if(!(De>0)){ie("Ingresa un monto de abono mayor a 0.");return}const $t=parseFloat(De.toFixed(2));if(!Bt){ie("Selecciona la fecha del abono.");return}try{He(!0);const Gt={customerId:Xe.id,type:"ABONO",amount:-$t,date:Bt,comment:bt||"",createdAt:or.now()},kt={id:(await wn(pt(Ge,"ar_movements_pollo"),Gt)).id,date:Bt,type:"ABONO",amount:-$t,comment:bt||"",createdAt:or.now()},Ht=[...At,kt].sort((Ft,Vt)=>{var fa,os;if(Ft.date!==Vt.date)return Ft.date.localeCompare(Vt.date);const nr=((fa=Ft.createdAt)==null?void 0:fa.seconds)||0,Zt=((os=Vt.createdAt)==null?void 0:os.seconds)||0;return nr-Zt});ye(Ht),lr(Ht,Number(Xe.initialDebt||0)),ne(Ft=>Ft.map(Vt=>{if(Vt.id!==Xe.id)return Vt;const nr=(Vt.balance||0)-$t;return{...Vt,balance:nr,lastAbonoDate:Bt,lastAbonoAmount:$t}})),ft(Ft=>Ft&&{...Ft,balance:(Ft.balance||0)-$t,lastAbonoDate:Bt,lastAbonoAmount:$t}),dt(0),G(""),qe(new Date().toISOString().slice(0,10)),xe(!1),ie(" Abono registrado")}catch(Gt){console.error(Gt),ie(" Error al registrar el abono")}finally{He(!1)}},bn=De=>{be(De.id),tt(De.date||new Date().toISOString().slice(0,10)),ae(Math.abs(Number(De.amount||0))),X(De.comment||"")},Rr=()=>{be(null),tt(""),ae(0),X("")},Nn=async()=>{if(!re||!Xe)return;const De=At.findIndex(kt=>kt.id===re);if(De===-1)return;const $t=At[De],Gt=Number(lt||0);if(!(Gt>0)){ie("El monto debe ser mayor a 0.");return}const It=$t.type==="ABONO"?-parseFloat(Gt.toFixed(2)):+parseFloat(Gt.toFixed(2));try{await rn(Kt(Ge,"ar_movements_pollo",re),{date:Me,amount:It,comment:V||""});const kt=[...At];kt[De]={...$t,date:Me,amount:It,comment:V||""},kt.sort((nr,Zt)=>{var Xn,bs;if(nr.date!==Zt.date)return nr.date.localeCompare(Zt.date);const fa=((Xn=nr.createdAt)==null?void 0:Xn.seconds)||0,os=((bs=Zt.createdAt)==null?void 0:bs.seconds)||0;return fa-os}),ye(kt),lr(kt,Number(Xe.initialDebt||0));const Ht=kt.reduce((nr,Zt)=>nr+(Number(Zt.amount)||0),0),Ft=Number(Xe.initialDebt||0)+Ht,Vt=Nr(kt);ne(nr=>nr.map(Zt=>Zt.id===Xe.id?{...Zt,balance:Ft,lastAbonoDate:(Vt==null?void 0:Vt.date)||"",lastAbonoAmount:(Vt==null?void 0:Vt.amount)||0}:Zt)),ft(nr=>nr&&{...nr,balance:Ft,lastAbonoDate:(Vt==null?void 0:Vt.date)||"",lastAbonoAmount:(Vt==null?void 0:Vt.amount)||0}),Rr(),ie(" Movimiento actualizado")}catch(kt){console.error(kt),ie(" Error al actualizar movimiento")}},za=async De=>{var Gt,It;if(confirm(`Eliminar este movimiento (${De.type==="ABONO"?"Abono":"Compra"}) del ${De.date}?${De.type==="CARGO"&&((Gt=De.ref)!=null&&Gt.saleId)?`
Se borrarn los registros de esa venta.`:""}`)&&Xe)try{if(L(!0),De.type==="CARGO"&&((It=De.ref)!=null&&It.saleId)){try{await yn(Kt(Ge,"salesV2",De.ref.saleId))}catch(nr){console.warn("delete sale error",nr),L(!1),ie(" No se pudo borrar la venta asociada.");return}await wV(De.ref.saleId)}else await yn(Kt(Ge,"ar_movements_pollo",De.id));const kt=At.filter(nr=>{var Zt,fa;return De.type==="CARGO"&&((Zt=De.ref)!=null&&Zt.saleId)?((fa=nr.ref)==null?void 0:fa.saleId)!==De.ref.saleId:nr.id!==De.id});ye(kt),lr(kt,Number(Xe.initialDebt||0));const Ht=kt.reduce((nr,Zt)=>nr+(Number(Zt.amount)||0),0),Ft=Number(Xe.initialDebt||0)+Ht,Vt=Nr(kt);ne(nr=>nr.map(Zt=>Zt.id===Xe.id?{...Zt,balance:Ft,lastAbonoDate:(Vt==null?void 0:Vt.date)||"",lastAbonoAmount:(Vt==null?void 0:Vt.amount)||0}:Zt)),ft(nr=>nr&&{...nr,balance:Ft,lastAbonoDate:(Vt==null?void 0:Vt.date)||"",lastAbonoAmount:(Vt==null?void 0:Vt.amount)||0}),Ct(null),ie(" Movimiento eliminado")}catch(kt){console.error(kt),ie(" Error al eliminar movimiento")}finally{L(!1)}},ti=v.useMemo(()=>[...U].sort((De,$t)=>{var Gt,It;return De.status!==$t.status?De.status==="BLOQUEADO"?1:-1:(((Gt=$t.createdAt)==null?void 0:Gt.seconds)||0)-(((It=De.createdAt)==null?void 0:It.seconds)||0)}),[U]),Mn=De=>De==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700",Us=v.useMemo(()=>{const De=h.trim().toLowerCase(),$t=g.trim()===""?null:Number(g),Gt=y.trim()===""?null:Number(y);return ti.filter(It=>{const kt=!De||String(It.name||"").toLowerCase().includes(De),Ht=!m||It.status===m,Ft=Number(It.balance||0),Vt=$t===null||!Number.isNaN($t)&&Ft>=$t,nr=Gt===null||!Number.isNaN(Gt)&&Ft<=Gt;return kt&&Ht&&Vt&&nr})},[ti,h,m,g,y]);return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Pollo)"}),o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>{Ie(!0),i&&z(s)},type:"button",children:"Crear Cliente"})]}),o.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[o.jsx("div",{className:"hidden md:block",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Telfono"}),o.jsx("th",{className:"p-2 border",children:"Vendedor"}),o.jsx("th",{className:"p-2 border",children:"Lugar"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Lmite"}),o.jsx("th",{className:"p-2 border",children:"Saldo"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:ve?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Cargando"})}):Us.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Sin clientes"})}):Us.map(De=>{var Gt;const $t=Z===De.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:(Gt=De.createdAt)!=null&&Gt.toDate?De.createdAt.toDate().toISOString().slice(0,10):""}),o.jsx("td",{className:"p-2 border text-left",children:$t?o.jsx("input",{className:"w-full border p-1 rounded",value:le,onChange:It=>se(It.target.value)}):o.jsx("div",{className:"font-medium",children:De.name})}),o.jsx("td",{className:"p-2 border",children:$t?o.jsx("input",{className:"w-full border p-1 rounded",value:Be,onChange:It=>je(TC(It.target.value))}):De.phone}),o.jsx("td",{className:"p-2 border",children:$t?o.jsxs("select",{className:"w-full border p-1 rounded text-xs",value:i?s:Ve,onChange:It=>ue(It.target.value),disabled:i,title:"Vendedor asociado",children:[o.jsx("option",{value:"",children:" Sin vendedor "}),c.map(It=>o.jsx("option",{value:It.id,children:It.name},It.id))]}):De.vendorName||""}),o.jsx("td",{className:"p-2 border",children:$t?o.jsxs("select",{className:"w-full border p-1 rounded",value:ot,onChange:It=>mt(It.target.value),children:[o.jsx("option",{value:"",children:""}),bV.map(It=>o.jsx("option",{value:It,children:It},It))]}):De.place||""}),o.jsx("td",{className:"p-2 border",children:$t?o.jsxs("select",{className:"w-full border p-1 rounded",value:rt,onChange:It=>we(It.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Mn(De.status)}`,children:De.status})}),o.jsx("td",{className:"p-2 border",children:$t?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Ce)?"":Ce,onChange:It=>Ue(Math.max(0,Number(It.target.value||0)))}):$c(De.creditLimit||0)}),o.jsx("td",{className:"p-2 border font-semibold",children:$c(De.balance||0)}),o.jsx("td",{className:"p-2 border",children:$t?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:ut,onChange:It=>_e(It.target.value),maxLength:500}):o.jsx("span",{title:De.notes||"",children:(De.notes||"").length>40?(De.notes||"").slice(0,40)+"":De.notes||""})}),o.jsx("td",{className:"p-2 border",children:o.jsx("div",{className:"flex gap-2 justify-center",children:$t?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:cr,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:yt,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>St(De),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",onClick:()=>ur(De),disabled:!l,title:l?"Borrar":"Solo admin",children:"Borrar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>Cr(De),children:"Estado de cuenta"})]})})})]},De.id)})})]})}),o.jsx("div",{className:"md:hidden space-y-2",children:ve?o.jsx("div",{className:"p-4 text-center text-sm text-gray-600",children:"Cargando"}):Us.length===0?o.jsx("div",{className:"p-4 text-center text-sm text-gray-600",children:"Sin clientes"}):Us.map(De=>o.jsxs("div",{className:"border rounded-lg bg-white p-3 shadow-sm",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold text-base",children:De.name}),o.jsx("div",{className:"text-xs text-gray-600",children:De.phone||""}),o.jsxs("div",{className:"text-xs text-gray-600",children:["Vendedor:"," ",o.jsx("span",{className:"font-medium",children:De.vendorName||""})]})]}),o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Mn(De.status)}`,children:De.status})]}),o.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{className:"border rounded p-2 bg-gray-50",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Saldo"}),o.jsx("div",{className:"font-semibold",children:$c(De.balance||0)})]}),o.jsxs("div",{className:"border rounded p-2 bg-gray-50",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Lmite"}),o.jsx("div",{className:"font-semibold",children:$c(De.creditLimit||0)})]})]}),o.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["ltimo abono:"," ",o.jsx("span",{className:"font-medium",children:De.lastAbonoDate?`${De.lastAbonoDate} (${$c(De.lastAbonoAmount||0)})`:""})]}),De.notes?o.jsxs("div",{className:"mt-2 text-xs text-gray-700",children:[o.jsx("span",{className:"font-semibold",children:"Nota:"})," ",(De.notes||"").length>80?(De.notes||"").slice(0,80)+"":De.notes]}):null,o.jsxs("div",{className:"mt-3 flex gap-2 flex-wrap",children:[o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-indigo-600 text-white text-sm",onClick:()=>Cr(De),children:"Estado de cuenta"}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-yellow-600 text-white text-sm",onClick:()=>St(De),disabled:i,title:i?"Vendedor no edita":"Editar",children:"Editar"}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-red-600 text-white text-sm disabled:opacity-50",onClick:()=>ur(De),disabled:!l,title:l?"Borrar":"Solo admin",children:"Borrar"})]})]},De.id))})]}),Ye&&o.jsx("p",{className:"mt-2 text-sm",children:Ye}),me&&su.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>Ie(!1)}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ie(!1),type:"button",children:"Cerrar"})]}),o.jsxs("form",{onSubmit:Tt,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:O,onChange:De=>W(De.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),o.jsx("input",{className:"w-full border p-2 rounded",value:Ae,onChange:De=>de(TC(De.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:fe,onChange:De=>ge(De.target.value),children:[o.jsx("option",{value:"",children:""}),bV.map(De=>o.jsx("option",{value:De,children:De},De))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:Pe,onChange:De=>F(De.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor asociado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:i?s:R,onChange:De=>z(De.target.value),disabled:i,children:[o.jsx("option",{value:"",children:" Sin vendedor "}),c.map(De=>o.jsx("option",{value:De.id,children:De.name},De.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Deuda inicial"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:J===0?"":J,onChange:De=>D(Math.max(0,Number(De.target.value||0))),placeholder:"Ej: 1500"}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Este valor cuenta como saldo desde el inicio."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Q===0?"":Q,onChange:De=>H(Math.max(0,Number(De.target.value||0))),placeholder:"Ej: 2000"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:ee,onChange:De=>Fe(De.target.value),maxLength:500,placeholder:"Notas del cliente"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[ee.length,"/500"]})]}),o.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ie(!1),children:"Cancelar"}),o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),ce&&su.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[80]",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>Te(!1)}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-full max-w-5xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3 gap-3",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(Xe==null?void 0:Xe.name)||""]}),o.jsxs("div",{className:"flex gap-2 shrink-0",children:[o.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{dt(0),qe(new Date().toISOString().slice(0,10)),G(""),xe(!0)},children:"Abonar"}),o.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Te(!1),children:"Cerrar"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Deuda inicial"}),o.jsx("div",{className:"text-xl font-semibold",children:$c(Number((Xe==null?void 0:Xe.initialDebt)||0))})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-xl font-semibold",children:$c($e.saldoActual)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),o.jsx("div",{className:"text-xl font-semibold",children:$c($e.totalAbonado)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),o.jsx("div",{className:"text-xl font-semibold",children:$c($e.saldoRestante)})]})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Referencia"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:gt?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):At.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):At.map(De=>{var Gt,It;const $t=re===De.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:$t?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:Me,onChange:kt=>tt(kt.target.value)}):De.date||""}),o.jsx("td",{className:"p-2 border",children:De.amount>=0?(Gt=De.ref)!=null&&Gt.saleId?o.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",onClick:()=>T(De.ref.saleId),children:"COMPRA (CARGO)"}):o.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (CARGO)"}):o.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),o.jsx("td",{className:"p-2 border",children:(It=De.ref)!=null&&It.saleId?`Venta #${De.ref.saleId}`:""}),o.jsx("td",{className:"p-2 border",children:$t?o.jsx("input",{className:"w-full border p-1 rounded",value:V,onChange:kt=>X(kt.target.value)}):o.jsx("span",{title:De.comment||"",children:(De.comment||"").length>40?(De.comment||"").slice(0,40)+"":De.comment||""})}),o.jsx("td",{className:"p-2 border font-semibold",children:$t?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(lt)?"":lt,onChange:kt=>ae(Number(kt.target.value||0))}):$c(De.amount)}),o.jsx("td",{className:"p-2 border",children:$t?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Nn,children:"Guardar"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Rr,children:"Cancelar"})]}):o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>bn(De),children:"Editar"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>za(De),children:"Borrar"})]})})]},De.id)})})]})})]})})]}),document.body),ct&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[90]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(Xe==null?void 0:Xe.name)||""]}),o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:Bt,onChange:De=>qe(De.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Qe===0?"":Qe,onChange:De=>{const $t=Number(De.target.value||0),Gt=Number.isFinite($t)?Math.max(0,parseFloat($t.toFixed(2))):0;dt(Gt)},placeholder:"0.00"}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se registrar como ABONO (negativo) con 2 decimales."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:bt,onChange:De=>G(De.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[bt.length,"/250"]})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>xe(!1),disabled:te,children:"Cancelar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:mn,disabled:te,children:te?"Guardando...":"Guardar abono"})]})]})}),w&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[65]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Productos vendidos"," ",S?` #${S}`:""]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>j(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio"}),o.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),o.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),o.jsx("tbody",{children:I?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):k.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):k.map((De,$t)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border text-left",children:De.productName}),o.jsx("td",{className:"p-2 border text-right",children:De.qty}),o.jsx("td",{className:"p-2 border text-right",children:$c(De.unitPrice)}),o.jsx("td",{className:"p-2 border text-right",children:$c(De.discount||0)}),o.jsx("td",{className:"p-2 border text-right",children:$c(De.total)})]},$t))})]})})]})})]})}function mje(t,e){var r=Object.setPrototypeOf;r?r(t,e):t.__proto__=e}function pje(t,e){e===void 0&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}var gje=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(a[i]=s[i])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xje=function(t){gje(e,t);function e(r,n){var a=this.constructor,s=t.call(this,r,n)||this;return Object.defineProperty(s,"name",{value:a.name,enumerable:!1,configurable:!0}),mje(s,a.prototype),pje(s),s}return e}(Error),vje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pc=function(t){vje(e,t);function e(r){r===void 0&&(r=void 0);var n=t.call(this,r)||this;return n.message=r,n}return e.prototype.getKind=function(){var r=this.constructor;return r.kind},e.kind="Exception",e}(xje),yje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),di=function(t){yje(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e}(Pc),bje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yr=function(t){bje(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(Pc),Wte=function(){function t(e){if(this.binarizer=e,e===null)throw new Yr("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,r){return this.binarizer.getBlackRow(e,r)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,r,n,a){var s=this.binarizer.getLuminanceSource().crop(e,r,n,a);return new t(this.binarizer.createBinarizer(s))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t}(),wje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Bi=function(t){wje(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Pc),Nje=function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),Ga=function(){function t(){}return t.arraycopy=function(e,r,n,a,s){for(;s--;)n[a++]=e[r++]},t.currentTimeMillis=function(){return Date.now()},t}(),Cje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),uD=function(t){Cje(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(Pc),_je=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),NV=function(t){_je(e,t);function e(r,n){r===void 0&&(r=void 0),n===void 0&&(n=void 0);var a=t.call(this,n)||this;return a.index=r,a.message=n,a}return e.kind="ArrayIndexOutOfBoundsException",e}(uD),Eje=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ji=function(){function t(){}return t.fill=function(e,r){for(var n=0,a=e.length;n<a;n++)e[n]=r},t.fillWithin=function(e,r,n,a){t.rangeCheck(e.length,r,n);for(var s=r;s<n;s++)e[s]=a},t.rangeCheck=function(e,r,n){if(r>n)throw new Yr("fromIndex("+r+") > toIndex("+n+")");if(r<0)throw new NV(r);if(n>e)throw new NV(n)},t.asList=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e},t.create=function(e,r,n){var a=Array.from({length:e});return a.map(function(s){return Array.from({length:r}).fill(n)})},t.createInt32Array=function(e,r,n){var a=Array.from({length:e});return a.map(function(s){return Int32Array.from({length:r}).fill(n)})},t.equals=function(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(var n=0,a=e.length;n<a;n++)if(e[n]!==r[n])return!1;return!0},t.hashCode=function(e){var r,n;if(e===null)return 0;var a=1;try{for(var s=Eje(e),i=s.next();!i.done;i=s.next()){var l=i.value;a=31*a+l}}catch(c){r={error:c}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a},t.fillUint8Array=function(e,r){for(var n=0;n!==e.length;n++)e[n]=r},t.copyOf=function(e,r){return e.slice(0,r)},t.copyOfUint8Array=function(e,r){if(e.length<=r){var n=new Uint8Array(r);return n.set(e),n}return e.slice(0,r)},t.copyOfRange=function(e,r,n){var a=n-r,s=new Int32Array(a);return Ga.arraycopy(e,r,s,0,a),s},t.binarySearch=function(e,r,n){n===void 0&&(n=t.numberComparator);for(var a=0,s=e.length-1;a<=s;){var i=s+a>>1,l=n(r,e[i]);if(l>0)a=i+1;else if(l<0)s=i-1;else return i}return-a-1},t.numberComparator=function(e,r){return e-r},t}(),Pn=function(){function t(){}return t.numberOfTrailingZeros=function(e){var r;if(e===0)return 32;var n=31;return r=e<<16,r!==0&&(n-=16,e=r),r=e<<8,r!==0&&(n-=8,e=r),r=e<<4,r!==0&&(n-=4,e=r),r=e<<2,r!==0&&(n-=2,e=r),n-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,r){return Math.trunc(e/r)},t.parseInt=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),_o=function(){function t(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=t.makeArray(e):this.bits=r)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var r=t.makeArray(e);Ga.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,a=Math.floor(e/32),s=n[a];s&=~((1<<(e&31))-1);for(var i=n.length;s===0;){if(++a===i)return r;s=n[a]}var l=a*32+Pn.numberOfTrailingZeros(s);return l>r?r:l},t.prototype.getNextUnset=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,a=Math.floor(e/32),s=~n[a];s&=~((1<<(e&31))-1);for(var i=n.length;s===0;){if(++a===i)return r;s=~n[a]}var l=a*32+Pn.numberOfTrailingZeros(s);return l>r?r:l},t.prototype.setBulk=function(e,r){this.bits[Math.floor(e/32)]=r},t.prototype.setRange=function(e,r){if(r<e||e<0||r>this.size)throw new Yr;if(r!==e){r--;for(var n=Math.floor(e/32),a=Math.floor(r/32),s=this.bits,i=n;i<=a;i++){var l=i>n?0:e&31,c=i<a?31:r&31,u=(2<<c)-(1<<l);s[i]|=u}}},t.prototype.clear=function(){for(var e=this.bits.length,r=this.bits,n=0;n<e;n++)r[n]=0},t.prototype.isRange=function(e,r,n){if(r<e||e<0||r>this.size)throw new Yr;if(r===e)return!0;r--;for(var a=Math.floor(e/32),s=Math.floor(r/32),i=this.bits,l=a;l<=s;l++){var c=l>a?0:e&31,u=l<s?31:r&31,d=(2<<u)-(1<<c)&4294967295;if((i[l]&d)!==(n?d:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,r){if(r<0||r>32)throw new Yr("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(var n=r;n>0;n--)this.appendBit((e>>n-1&1)===1)},t.prototype.appendBitArray=function(e){var r=e.size;this.ensureCapacity(this.size+r);for(var n=0;n<r;n++)this.appendBit(e.get(n))},t.prototype.xor=function(e){if(this.size!==e.size)throw new Yr("Sizes don't match");for(var r=this.bits,n=0,a=r.length;n<a;n++)r[n]^=e.bits[n]},t.prototype.toBytes=function(e,r,n,a){for(var s=0;s<a;s++){for(var i=0,l=0;l<8;l++)this.get(e)&&(i|=1<<7-l),e++;r[n+s]=i}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),n=r+1,a=this.bits,s=0;s<n;s++){var i=a[s];i=i>>1&1431655765|(i&1431655765)<<1,i=i>>2&858993459|(i&858993459)<<2,i=i>>4&252645135|(i&252645135)<<4,i=i>>8&16711935|(i&16711935)<<8,i=i>>16&65535|(i&65535)<<16,e[r-s]=i}if(this.size!==n*32){for(var l=n*32-this.size,c=e[0]>>>l,s=1;s<n;s++){var u=e[s];c|=u<<32-l,e[s-1]=c,c=u>>>l}e[n-1]=c}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.size===r.size&&Ji.equals(this.bits,r.bits)},t.prototype.hashCode=function(){return 31*this.size+Ji.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",r=0,n=this.size;r<n;r++)r&7||(e+=" "),e+=this.get(r)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],r=0,n=this.size;r<n;r++)e.push(this.get(r));return e},t}(),hk;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(hk||(hk={}));const Ka=hk;var Sje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yr=function(t){Sje(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Pc),Ije=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ga;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(ga||(ga={}));var Yi=function(){function t(e,r,n){for(var a,s,i=[],l=3;l<arguments.length;l++)i[l-3]=arguments[l];this.valueIdentifier=e,this.name=n,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=i,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var c=this.values,u=0,d=c.length;u!==d;u++){var f=c[u];t.VALUES_TO_ECI.set(f,this)}try{for(var h=Ije(i),A=h.next();!A.done;A=h.next()){var m=A.value;t.NAME_TO_ECI.set(m,this)}}catch(p){a={error:p}}finally{try{A&&!A.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new yr("incorect value");var r=t.VALUES_TO_ECI.get(e);if(r===void 0)throw new yr("incorect value");return r},t.getCharacterSetECIByName=function(e){var r=t.NAME_TO_ECI.get(e);if(r===void 0)throw new yr("incorect value");return r},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.getName()===r.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(ga.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(ga.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(ga.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(ga.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(ga.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(ga.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(ga.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(ga.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(ga.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(ga.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(ga.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(ga.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(ga.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(ga.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(ga.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(ga.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(ga.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(ga.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(ga.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(ga.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(ga.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(ga.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(ga.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(ga.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(ga.Big5,28,"Big5"),t.GB18030=new t(ga.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(ga.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),jje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rE=function(t){jje(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(Pc),Zu=function(){function t(){}return t.decode=function(e,r){var n=this.encodingName(r);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,r){var n=this.encodingName(r);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof Yi?e:Yi.getCharacterSetECIByName(e)},t.decodeFallback=function(e,r){var n=this.encodingCharacterSet(r);if(t.isDecodeFallbackSupported(n)){for(var a="",s=0,i=e.length;s<i;s++){var l=e[s].toString(16);l.length<2&&(l="0"+l),a+="%"+l}return decodeURIComponent(a)}if(n.equals(Yi.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new rE("Encoding "+this.encodingName(r)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(Yi.UTF8)||e.equals(Yi.ISO8859_1)||e.equals(Yi.ASCII)},t.encodeFallback=function(e){for(var r=btoa(unescape(encodeURIComponent(e))),n=r.split(""),a=[],s=0;s<n.length;s++)a.push(n[s].charCodeAt(0));return new Uint8Array(a)},t}(),$n=function(){function t(){}return t.castAsNonUtf8Char=function(e,r){r===void 0&&(r=null);var n=r?r.getName():this.ISO88591;return Zu.decode(new Uint8Array([e]),n)},t.guessEncoding=function(e,r){if(r!=null&&r.get(Ka.CHARACTER_SET)!==void 0)return r.get(Ka.CHARACTER_SET).toString();for(var n=e.length,a=!0,s=!0,i=!0,l=0,c=0,u=0,d=0,f=0,h=0,A=0,m=0,p=0,g=0,x=0,y=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,b=0;b<n&&(a||s||i);b++){var w=e[b]&255;i&&(l>0?w&128?l--:i=!1:w&128&&(w&64?(l++,w&32?(l++,w&16?(l++,w&8?i=!1:d++):u++):c++):i=!1)),a&&(w>127&&w<160?a=!1:w>159&&(w<192||w===215||w===247)&&x++),s&&(f>0?w<64||w===127||w>252?s=!1:f--:w===128||w===160||w>239?s=!1:w>160&&w<224?(h++,m=0,A++,A>p&&(p=A)):w>127?(f++,A=0,m++,m>g&&(g=m)):(A=0,m=0))}return i&&l>0&&(i=!1),s&&f>0&&(s=!1),i&&(y||c+u+d>0)?t.UTF8:s&&(t.ASSUME_SHIFT_JIS||p>=3||g>=3)?t.SHIFT_JIS:a&&s?p===2&&h===2||x*10>=n?t.SHIFT_JIS:t.ISO88591:a?t.ISO88591:s?t.SHIFT_JIS:i?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=-1;function s(l,c,u,d,f,h){if(l==="%%")return"%";if(r[++a]!==void 0){l=d?parseInt(d.substr(1)):void 0;var A=f?parseInt(f.substr(1)):void 0,m;switch(h){case"s":m=r[a];break;case"c":m=r[a][0];break;case"f":m=parseFloat(r[a]).toFixed(l);break;case"p":m=parseFloat(r[a]).toPrecision(l);break;case"e":m=parseFloat(r[a]).toExponential(l);break;case"x":m=parseInt(r[a]).toString(A||16);break;case"d":m=parseFloat(parseInt(r[a],A||10).toPrecision(l)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(A);for(var p=parseInt(u),g=u&&u[0]+""=="0"?"0":" ";m.length<p;)m=c!==void 0?m+g:g+m;return m}}var i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,s)},t.getBytes=function(e,r){return Zu.encode(e,r)},t.getCharCode=function(e,r){return r===void 0&&(r=0),e.charCodeAt(r)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=Yi.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=Yi.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=Yi.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),_n=function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=$n.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,r,n){for(var a=r;r<r+n;a++)this.append(e[a]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)},t.prototype.substring=function(e,r){return this.value.substring(e,r)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,r){this.value=this.value.substring(0,e)+r+this.value.substring(e)},t}(),Uf=function(){function t(e,r,n,a){if(this.width=e,this.height=r,this.rowSize=n,this.bits=a,r==null&&(r=e),this.height=r,e<1||r<1)throw new Yr("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var r=e.length,n=e[0].length,a=new t(n,r),s=0;s<r;s++)for(var i=e[s],l=0;l<n;l++)i[l]&&a.set(l,s);return a},t.parseFromString=function(e,r,n){if(e===null)throw new Yr("stringRepresentation cannot be null");for(var a=new Array(e.length),s=0,i=0,l=-1,c=0,u=0;u<e.length;)if(e.charAt(u)===`
`||e.charAt(u)==="\r"){if(s>i){if(l===-1)l=s-i;else if(s-i!==l)throw new Yr("row lengths do not match");i=s,c++}u++}else if(e.substring(u,u+r.length)===r)u+=r.length,a[s]=!0,s++;else if(e.substring(u,u+n.length)===n)u+=n.length,a[s]=!1,s++;else throw new Yr("illegal character encountered: "+e.substring(u));if(s>i){if(l===-1)l=s-i;else if(s-i!==l)throw new Yr("row lengths do not match");c++}for(var d=new t(l,c),f=0;f<s;f++)a[f]&&d.set(Math.floor(f%l),Math.floor(f/l));return d},t.prototype.get=function(e,r){var n=r*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},t.prototype.set=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Yr("input matrix dimensions do not match");for(var r=new _o(Math.floor(this.width/32)+1),n=this.rowSize,a=this.bits,s=0,i=this.height;s<i;s++)for(var l=s*n,c=e.getRow(s,r).getBitArray(),u=0;u<n;u++)a[l+u]^=c[u]},t.prototype.clear=function(){for(var e=this.bits,r=e.length,n=0;n<r;n++)e[n]=0},t.prototype.setRegion=function(e,r,n,a){if(r<0||e<0)throw new Yr("Left and top must be nonnegative");if(a<1||n<1)throw new Yr("Height and width must be at least 1");var s=e+n,i=r+a;if(i>this.height||s>this.width)throw new Yr("The region must fit inside the matrix");for(var l=this.rowSize,c=this.bits,u=r;u<i;u++)for(var d=u*l,f=e;f<s;f++)c[d+Math.floor(f/32)]|=1<<(f&31)&4294967295},t.prototype.getRow=function(e,r){r==null||r.getSize()<this.width?r=new _o(this.width):r.clear();for(var n=this.rowSize,a=this.bits,s=e*n,i=0;i<n;i++)r.setBulk(i*32,a[s+i]);return r},t.prototype.setRow=function(e,r){Ga.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),r=this.getHeight(),n=new _o(e),a=new _o(e),s=0,i=Math.floor((r+1)/2);s<i;s++)n=this.getRow(s,n),a=this.getRow(r-1-s,a),n.reverse(),a.reverse(),this.setRow(s,a),this.setRow(r-1-s,n)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,r=this.height,n=this.rowSize,a=this.bits,s=e,i=r,l=-1,c=-1,u=0;u<r;u++)for(var d=0;d<n;d++){var f=a[u*n+d];if(f!==0){if(u<i&&(i=u),u>c&&(c=u),d*32<s){for(var h=0;!(f<<31-h&4294967295);)h++;d*32+h<s&&(s=d*32+h)}if(d*32+31>l){for(var h=31;!(f>>>h);)h--;d*32+h>l&&(l=d*32+h)}}}return l<s||c<i?null:Int32Array.from([s,i,l-s+1,c-i+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,r=this.bits,n=0;n<r.length&&r[n]===0;)n++;if(n===r.length)return null;for(var a=n/e,s=n%e*32,i=r[n],l=0;!(i<<31-l&4294967295);)l++;return s+=l,Int32Array.from([s,a])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,r=this.bits,n=r.length-1;n>=0&&r[n]===0;)n--;if(n<0)return null;for(var a=Math.floor(n/e),s=Math.floor(n%e)*32,i=r[n],l=31;!(i>>>l);)l--;return s+=l,Int32Array.from([s,a])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&Ji.equals(this.bits,r.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Ji.hashCode(this.bits),e},t.prototype.toString=function(e,r,n){return e===void 0&&(e="X "),r===void 0&&(r="  "),n===void 0&&(n=`
`),this.buildToString(e,r,n)},t.prototype.buildToString=function(e,r,n){for(var a=new _n,s=0,i=this.height;s<i;s++){for(var l=0,c=this.width;l<c;l++)a.append(this.get(l,s)?e:r);a.append(n)}return a.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),Pje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qt=function(t){Pje(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Pc),Bje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tje=function(t){Bje(e,t);function e(r){var n=t.call(this,r)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(r,n){var a=this.getLuminanceSource(),s=a.getWidth();n==null||n.getSize()<s?n=new _o(s):n.clear(),this.initArrays(s);for(var i=a.getRow(r,this.luminances),l=this.buckets,c=0;c<s;c++)l[(i[c]&255)>>e.LUMINANCE_SHIFT]++;var u=e.estimateBlackPoint(l);if(s<3)for(var c=0;c<s;c++)(i[c]&255)<u&&n.set(c);else for(var d=i[0]&255,f=i[1]&255,c=1;c<s-1;c++){var h=i[c+1]&255;(f*4-d-h)/2<u&&n.set(c),d=f,f=h}return n},e.prototype.getBlackMatrix=function(){var r=this.getLuminanceSource(),n=r.getWidth(),a=r.getHeight(),s=new Uf(n,a);this.initArrays(n);for(var i=this.buckets,l=1;l<5;l++)for(var c=Math.floor(a*l/5),u=r.getRow(c,this.luminances),d=Math.floor(n*4/5),f=Math.floor(n/5);f<d;f++){var h=u[f]&255;i[h>>e.LUMINANCE_SHIFT]++}for(var A=e.estimateBlackPoint(i),m=r.getMatrix(),l=0;l<a;l++)for(var p=l*n,f=0;f<n;f++){var h=m[p+f]&255;h<A&&s.set(f,l)}return s},e.prototype.createBinarizer=function(r){return new e(r)},e.prototype.initArrays=function(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));for(var n=this.buckets,a=0;a<e.LUMINANCE_BUCKETS;a++)n[a]=0},e.estimateBlackPoint=function(r){for(var n=r.length,a=0,s=0,i=0,l=0;l<n;l++)r[l]>i&&(s=l,i=r[l]),r[l]>a&&(a=r[l]);for(var c=0,u=0,l=0;l<n;l++){var d=l-s,f=r[l]*d*d;f>u&&(c=l,u=f)}if(s>c){var h=s;s=c,c=h}if(c-s<=n/16)throw new qt;for(var A=c-1,m=-1,l=c-1;l>s;l--){var p=l-s,f=p*p*(c-l)*(a-r[l]);f>m&&(A=l,m=f)}return A<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(Nje),kje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xte=function(t){kje(e,t);function e(r){var n=t.call(this,r)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),a=r.getHeight();if(n>=e.MINIMUM_DIMENSION&&a>=e.MINIMUM_DIMENSION){var s=r.getMatrix(),i=n>>e.BLOCK_SIZE_POWER;n&e.BLOCK_SIZE_MASK&&i++;var l=a>>e.BLOCK_SIZE_POWER;a&e.BLOCK_SIZE_MASK&&l++;var c=e.calculateBlackPoints(s,i,l,n,a),u=new Uf(n,a);e.calculateThresholdForBlock(s,i,l,n,a,c,u),this.matrix=u}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(r){return new e(r)},e.calculateThresholdForBlock=function(r,n,a,s,i,l,c){for(var u=i-e.BLOCK_SIZE,d=s-e.BLOCK_SIZE,f=0;f<a;f++){var h=f<<e.BLOCK_SIZE_POWER;h>u&&(h=u);for(var A=e.cap(f,2,a-3),m=0;m<n;m++){var p=m<<e.BLOCK_SIZE_POWER;p>d&&(p=d);for(var g=e.cap(m,2,n-3),x=0,y=-2;y<=2;y++){var b=l[A+y];x+=b[g-2]+b[g-1]+b[g]+b[g+1]+b[g+2]}var w=x/25;e.thresholdBlock(r,p,h,w,s,c)}}},e.cap=function(r,n,a){return r<n?n:r>a?a:r},e.thresholdBlock=function(r,n,a,s,i,l){for(var c=0,u=a*i+n;c<e.BLOCK_SIZE;c++,u+=i)for(var d=0;d<e.BLOCK_SIZE;d++)(r[u+d]&255)<=s&&l.set(n+d,a+c)},e.calculateBlackPoints=function(r,n,a,s,i){for(var l=i-e.BLOCK_SIZE,c=s-e.BLOCK_SIZE,u=new Array(a),d=0;d<a;d++){u[d]=new Int32Array(n);var f=d<<e.BLOCK_SIZE_POWER;f>l&&(f=l);for(var h=0;h<n;h++){var A=h<<e.BLOCK_SIZE_POWER;A>c&&(A=c);for(var m=0,p=255,g=0,x=0,y=f*s+A;x<e.BLOCK_SIZE;x++,y+=s){for(var b=0;b<e.BLOCK_SIZE;b++){var w=r[y+b]&255;m+=w,w<p&&(p=w),w>g&&(g=w)}if(g-p>e.MIN_DYNAMIC_RANGE)for(x++,y+=s;x<e.BLOCK_SIZE;x++,y+=s)for(var b=0;b<e.BLOCK_SIZE;b++)m+=r[y+b]&255}var j=m>>e.BLOCK_SIZE_POWER*2;if(g-p<=e.MIN_DYNAMIC_RANGE&&(j=p/2,d>0&&h>0)){var I=(u[d-1][h]+2*u[d][h-1]+u[d-1][h-1])/4;p<I&&(j=I)}u[d][h]=j}}return u},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(Tje),Cw=function(){function t(e,r){this.width=e,this.height=r}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,r,n,a){throw new rE("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new rE("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new rE("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),r=new _n,n=0;n<this.height;n++){for(var a=this.getRow(n,e),s=0;s<this.width;s++){var i=a[s]&255,l=void 0;i<64?l="#":i<128?l="+":i<192?l=".":l=" ",r.append(l)}r.append(`
`)}return r.toString()},t}(),Fje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),R4=function(t){Fje(e,t);function e(r){var n=t.call(this,r.getWidth(),r.getHeight())||this;return n.delegate=r,n}return e.prototype.getRow=function(r,n){for(var a=this.delegate.getRow(r,n),s=this.getWidth(),i=0;i<s;i++)a[i]=255-(a[i]&255);return a},e.prototype.getMatrix=function(){for(var r=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(n),s=0;s<n;s++)a[s]=255-(r[s]&255);return a},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(r,n,a,s){return new e(this.delegate.crop(r,n,a,s))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(Cw),Oje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Dje=function(t){Oje(e,t);function e(r,n){n===void 0&&(n=!1);var a=t.call(this,r.width,r.height)||this;return a.canvas=r,a.tempCanvasElement=null,a.buffer=e.makeBufferFromCanvasImageData(r,n),a}return e.makeBufferFromCanvasImageData=function(r,n){n===void 0&&(n=!1);var a=r.getContext("2d").getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(a.data,r.width,r.height,n)},e.toGrayscaleBuffer=function(r,n,a,s){s===void 0&&(s=!1);var i=new Uint8ClampedArray(n*a);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!s)for(var l=0,c=0,u=r.length;l<u;l+=4,c++){var d=void 0,f=r[l+3];if(f===0)d=255;else{var h=r[l],A=r[l+1],m=r[l+2];d=306*h+601*A+117*m+512>>10}i[c]=d}else for(var l=0,c=0,p=r.length;l<p;l+=4,c++){var d=void 0,f=r[l+3];if(f===0)d=255;else{var h=r[l],A=r[l+1],m=r[l+2];d=306*h+601*A+117*m+512>>10}i[c]=255-d}return i},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Yr("Requested row is outside the image: "+r);var a=this.getWidth(),s=r*a;return n===null?n=this.buffer.slice(s,s+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(s,s+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return t.prototype.crop.call(this,r,n,a,s),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement(),a=n.getContext("2d"),s=r*e.DEGREE_TO_RADIANS,i=this.canvas.width,l=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(s))*i+Math.abs(Math.sin(s))*l),u=Math.ceil(Math.abs(Math.sin(s))*i+Math.abs(Math.cos(s))*l);return n.width=c,n.height=u,a.translate(c/2,u/2),a.rotate(s),a.drawImage(this.canvas,i/-2,l/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new R4(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(Cw),Rje=function(){function t(e,r,n){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=n||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),Ql=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},Vl=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Mje=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a1=function(){function t(e,r,n){r===void 0&&(r=500),this.reader=e,this.timeBetweenScansMillis=r,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return Ql(this,void 0,void 0,function(){var e,r,n,a,s,i,l,c,u,d,f,h;return Vl(this,function(A){switch(A.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=A.sent(),r=[];try{for(n=Mje(e),a=n.next();!a.done;a=n.next())s=a.value,i=s.kind==="video"?"videoinput":s.kind,i==="videoinput"&&(l=s.deviceId||s.id,c=s.label||"Video device "+(r.length+1),u=s.groupId,d={deviceId:l,label:c,kind:i,groupId:u},r.push(d))}catch(m){f={error:m}}finally{try{a&&!a.done&&(h=n.return)&&h.call(n)}finally{if(f)throw f.error}}return[2,r]}})})},t.prototype.getVideoInputDevices=function(){return Ql(this,void 0,void 0,function(){var e;return Vl(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),[2,e.map(function(n){return new Rje(n.deviceId,n.label)})]}})})},t.prototype.findDeviceById=function(e){return Ql(this,void 0,void 0,function(){var r;return Vl(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(a){return a.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,r){return Ql(this,void 0,void 0,function(){return Vl(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return Ql(this,void 0,void 0,function(){var n,a;return Vl(this,function(s){switch(s.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return Ql(this,void 0,void 0,function(){var n;return Vl(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return Ql(this,void 0,void 0,function(){var n,a;return Vl(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return n=s.sent(),[4,this.decodeOnce(n)];case 2:return a=s.sent(),[2,a]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,r,n){return Ql(this,void 0,void 0,function(){return Vl(this,function(a){switch(a.label){case 0:return[4,this.decodeFromVideoDevice(e,r,n)];case 1:return[2,a.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return Ql(this,void 0,void 0,function(){var a,s;return Vl(this,function(i){switch(i.label){case 0:return e?a={deviceId:{exact:e}}:a={facingMode:"environment"},s={video:a},[4,this.decodeFromConstraints(s,r,n)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return Ql(this,void 0,void 0,function(){var a;return Vl(this,function(s){switch(s.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return a=s.sent(),[4,this.decodeFromStream(a,r,n)];case 2:return[2,s.sent()]}})})},t.prototype.decodeFromStream=function(e,r,n){return Ql(this,void 0,void 0,function(){var a;return Vl(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return a=s.sent(),[4,this.decodeContinuously(a,n)];case 2:return[2,s.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,r){return Ql(this,void 0,void 0,function(){var n;return Vl(this,function(a){switch(a.label){case 0:return n=this.prepareVideoElement(r),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return a.sent(),[2,n]}})})},t.prototype.playVideoOnLoadAsync=function(e){var r=this;return new Promise(function(n,a){return r.playVideoOnLoad(e,function(){return n()})})},t.prototype.playVideoOnLoad=function(e,r){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return Ql(this,void 0,void 0,function(){return Vl(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[3,4];case 3:return r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new di("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new di("element with id '"+e+"' must be an "+r+" element");return n},t.prototype.decodeFromImage=function(e,r){if(!e&&!r)throw new di("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,r){if(!e&&!r)throw new di("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,r,n){if(e===void 0&&r===void 0)throw new di("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,n):this.decodeFromVideoElementContinuously(e,n)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new di("An image element must be provided.");this.reset();var r=this.prepareImageElement(e);this.imageElement=r;var n;return this.isImageLoaded(r)?n=this.decodeOnce(r,!1,!0):n=this._decodeOnLoadImage(r),n},t.prototype.decodeFromVideoElement=function(e){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)},t.prototype.decodeFromVideoElementContinuously=function(e,r){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,r)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new di("A video element must be provided.");this.reset();var r=this.prepareVideoElement(e);return this.videoElement=r,r},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new di("An URL must be provided.");this.reset();var r=this.prepareImageElement();this.imageElement=r;var n=this._decodeOnLoadImage(r);return r.src=e,n},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new di("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElement(r);return r.src=e,n},t.prototype.decodeFromVideoUrlContinuously=function(e,r){if(!e)throw new di("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(n,r);return n.src=e,a},t.prototype._decodeOnLoadImage=function(e){var r=this;return new Promise(function(n,a){r.imageLoadedListener=function(){return r.decodeOnce(e,!1,!0).then(n,a)},e.addEventListener("load",r.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return Ql(this,void 0,void 0,function(){return Vl(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),[4,this.decodeOnce(e)];case 2:return[2,r.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,r){return Ql(this,void 0,void 0,function(){return Vl(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,r),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r},t.prototype.prepareVideoElement=function(e){var r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.prototype.decodeOnce=function(e,r,n){var a=this;r===void 0&&(r=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var s=function(i,l){if(a._stopAsyncDecode){l(new qt("Video stream has ended before any code could be detected.")),a._stopAsyncDecode=void 0;return}try{var c=a.decode(e);i(c)}catch(h){var u=r&&h instanceof qt,d=h instanceof Bi||h instanceof yr,f=d&&n;if(u||f)return setTimeout(s,a._timeBetweenDecodingAttempts,i,l);l(h)}};return new Promise(function(i,l){return s(i,l)})},t.prototype.decodeContinuously=function(e,r){var n=this;this._stopContinuousDecode=!1;var a=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var s=n.decode(e);r(s,null),setTimeout(a,n.timeBetweenScansMillis)}catch(c){r(null,c);var i=c instanceof Bi||c instanceof yr,l=c instanceof qt;(i||l)&&setTimeout(a,n._timeBetweenDecodingAttempts)}};a()},t.prototype.decode=function(e){var r=this.createBinaryBitmap(e);return this.decodeBitmap(r)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var r=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),r=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),a=new Dje(n,r),s=new Xte(a);return new Wte(s)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var r=this.getCaptureCanvas(e),n=void 0;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.drawImageOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var r=document.createElement("canvas"),n,a;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,a=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,a=e.naturalHeight||e.height)),r.style.width=n+"px",r.style.height=a+"px",r.width=n,r.height=a,r},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t}(),Fl=function(){function t(e,r,n,a,s,i){n===void 0&&(n=r==null?0:8*r.length),i===void 0&&(i=Ga.currentTimeMillis()),this.text=e,this.rawBytes=r,this.numBits=n,this.resultPoints=a,this.format=s,this.timestamp=i,this.text=e,this.rawBytes=r,n==null?this.numBits=r==null?0:8*r.length:this.numBits=n,this.resultPoints=a,this.format=s,this.resultMetadata=null,i==null?this.timestamp=Ga.currentTimeMillis():this.timestamp=i}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(r.length+e.length);Ga.arraycopy(r,0,n,0,r.length),Ga.arraycopy(e,0,n,r.length,e.length),this.resultPoints=n}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}(),mk;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(mk||(mk={}));const Xr=mk;var pk;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(pk||(pk={}));const tl=pk;var M4=function(){function t(e,r,n,a,s,i){s===void 0&&(s=-1),i===void 0&&(i=-1),this.rawBytes=e,this.text=r,this.byteSegments=n,this.ecLevel=a,this.structuredAppendSequenceNumber=s,this.structuredAppendParity=i,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),Ry=function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new Yr;return this.logTable[e]},t.addOrSubtract=function(e,r){return e^r},t}(),G0=function(){function t(e,r){if(r.length===0)throw new Yr;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var a=1;a<n&&r[a]===0;)a++;a===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-a),Ga.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var r=this.coefficients,n;if(e===1){n=0;for(var a=0,s=r.length;a!==s;a++){var i=r[a];n=Ry.addOrSubtract(n,i)}return n}n=r[0];for(var l=r.length,c=this.field,a=1;a<l;a++)n=Ry.addOrSubtract(c.multiply(e,n),r[a]);return n},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Yr("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var a=r;r=n,n=a}var s=new Int32Array(n.length),i=n.length-r.length;Ga.arraycopy(n,0,s,0,i);for(var l=i;l<n.length;l++)s[l]=Ry.addOrSubtract(r[l-i],n[l]);return new t(this.field,s)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Yr("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,a=e.coefficients,s=a.length,i=new Int32Array(n+s-1),l=this.field,c=0;c<n;c++)for(var u=r[c],d=0;d<s;d++)i[c+d]=Ry.addOrSubtract(i[c+d],l.multiply(u,a[d]));return new t(l,i)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var r=this.coefficients.length,n=this.field,a=new Int32Array(r),s=this.coefficients,i=0;i<r;i++)a[i]=n.multiply(s[i],e);return new t(n,a)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new Yr;if(r===0)return this.field.getZero();for(var n=this.coefficients,a=n.length,s=new Int32Array(a+e),i=this.field,l=0;l<a;l++)s[l]=i.multiply(n[l],r);return new t(i,s)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Yr("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Yr("Divide by 0");for(var r=this.field,n=r.getZero(),a=this,s=e.getCoefficient(e.getDegree()),i=r.inverse(s);a.getDegree()>=e.getDegree()&&!a.isZero();){var l=a.getDegree()-e.getDegree(),c=r.multiply(a.getCoefficient(a.getDegree()),i),u=e.multiplyByMonomial(l,c),d=r.buildMonomial(l,c);n=n.addOrSubtract(d),a=a.addOrSubtract(u)}return[n,a]},t.prototype.toString=function(){for(var e="",r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),r===0||n!==1){var a=this.field.log(n);a===0?e+="1":a===1?e+="a":(e+="a^",e+=a)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e},t}(),Lje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yte=function(t){Lje(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(Pc),Uje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xc=function(t){Uje(e,t);function e(r,n,a){var s=t.call(this)||this;s.primitive=r,s.size=n,s.generatorBase=a;for(var i=new Int32Array(n),l=1,c=0;c<n;c++)i[c]=l,l*=2,l>=n&&(l^=r,l&=n-1);s.expTable=i;for(var u=new Int32Array(n),c=0;c<n-1;c++)u[i[c]]=c;return s.logTable=u,s.zero=new G0(s,Int32Array.from([0])),s.one=new G0(s,Int32Array.from([1])),s}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new Yr;if(n===0)return this.zero;var a=new Int32Array(r+1);return a[0]=n,new G0(this,a)},e.prototype.inverse=function(r){if(r===0)throw new Yte;return this.expTable[this.size-this.logTable[r]-1]},e.prototype.multiply=function(r,n){return r===0||n===0?0:this.expTable[(this.logTable[r]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Pn.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(r){return r===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(Ry),Qje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kC=function(t){Qje(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(Pc),Vje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_w=function(t){Vje(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(Pc),L4=function(){function t(e){this.field=e}return t.prototype.decode=function(e,r){for(var n=this.field,a=new G0(n,e),s=new Int32Array(r),i=!0,l=0;l<r;l++){var c=a.evaluateAt(n.exp(l+n.getGeneratorBase()));s[s.length-1-l]=c,c!==0&&(i=!1)}if(!i)for(var u=new G0(n,s),d=this.runEuclideanAlgorithm(n.buildMonomial(r,1),u,r),f=d[0],h=d[1],A=this.findErrorLocations(f),m=this.findErrorMagnitudes(h,A),l=0;l<A.length;l++){var p=e.length-1-n.log(A[l]);if(p<0)throw new kC("Bad error location");e[p]=xc.addOrSubtract(e[p],m[l])}},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var a=e;e=r,r=a}for(var s=this.field,i=e,l=r,c=s.getZero(),u=s.getOne();l.getDegree()>=(n/2|0);){var d=i,f=c;if(i=l,c=u,i.isZero())throw new kC("r_{i-1} was zero");l=d;for(var h=s.getZero(),A=i.getCoefficient(i.getDegree()),m=s.inverse(A);l.getDegree()>=i.getDegree()&&!l.isZero();){var p=l.getDegree()-i.getDegree(),g=s.multiply(l.getCoefficient(l.getDegree()),m);h=h.addOrSubtract(s.buildMonomial(p,g)),l=l.addOrSubtract(i.multiplyByMonomial(p,g))}if(u=h.multiply(c).addOrSubtract(f),l.getDegree()>=i.getDegree())throw new _w("Division algorithm failed to reduce polynomial?")}var x=u.getCoefficient(0);if(x===0)throw new kC("sigmaTilde(0) was zero");var y=s.inverse(x),b=u.multiplyScalar(y),w=l.multiplyScalar(y);return[b,w]},t.prototype.findErrorLocations=function(e){var r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(r),a=0,s=this.field,i=1;i<s.getSize()&&a<r;i++)e.evaluateAt(i)===0&&(n[a]=s.inverse(i),a++);if(a!==r)throw new kC("Error locator degree does not match number of roots");return n},t.prototype.findErrorMagnitudes=function(e,r){for(var n=r.length,a=new Int32Array(n),s=this.field,i=0;i<n;i++){for(var l=s.inverse(r[i]),c=1,u=0;u<n;u++)if(i!==u){var d=s.multiply(r[u],l),f=d&1?d&-2:d|1;c=s.multiply(c,f)}a[i]=s.multiply(e.evaluateAt(l),s.inverse(c)),s.getGeneratorBase()!==0&&(a[i]=s.multiply(a[i],l))}return a},t}(),Vo;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(Vo||(Vo={}));var CV=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var r=e.getBits(),n=this.extractBits(r),a=this.correctBits(n),s=t.convertBoolArrayToByteArray(a),i=t.getEncodedData(a),l=new M4(s,i,null,null);return l.setNumBits(a.length),l},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var r=e.length,n=Vo.UPPER,a=Vo.UPPER,s="",i=0;i<r;)if(a===Vo.BINARY){if(r-i<5)break;var l=t.readCode(e,i,5);if(i+=5,l===0){if(r-i<11)break;l=t.readCode(e,i,11)+31,i+=11}for(var c=0;c<l;c++){if(r-i<8){i=r;break}var u=t.readCode(e,i,8);s+=$n.castAsNonUtf8Char(u),i+=8}a=n}else{var d=a===Vo.DIGIT?4:5;if(r-i<d)break;var u=t.readCode(e,i,d);i+=d;var f=t.getCharacter(a,u);f.startsWith("CTRL_")?(n=a,a=t.getTable(f.charAt(5)),f.charAt(6)==="L"&&(n=a)):(s+=f,a=n)}return s},t.getTable=function(e){switch(e){case"L":return Vo.LOWER;case"P":return Vo.PUNCT;case"M":return Vo.MIXED;case"D":return Vo.DIGIT;case"B":return Vo.BINARY;case"U":default:return Vo.UPPER}},t.getCharacter=function(e,r){switch(e){case Vo.UPPER:return t.UPPER_TABLE[r];case Vo.LOWER:return t.LOWER_TABLE[r];case Vo.MIXED:return t.MIXED_TABLE[r];case Vo.PUNCT:return t.PUNCT_TABLE[r];case Vo.DIGIT:return t.DIGIT_TABLE[r];default:throw new _w("Bad table")}},t.prototype.correctBits=function(e){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=xc.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=xc.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=xc.AZTEC_DATA_10):(n=12,r=xc.AZTEC_DATA_12);var a=this.ddata.getNbDatablocks(),s=e.length/n;if(s<a)throw new yr;for(var i=e.length%n,l=new Int32Array(s),c=0;c<s;c++,i+=n)l[c]=t.readCode(e,i,n);try{var u=new L4(r);u.decode(l,s-a)}catch(g){throw new yr(g)}for(var d=(1<<n)-1,f=0,c=0;c<a;c++){var h=l[c];if(h===0||h===d)throw new yr;(h===1||h===d-1)&&f++}for(var A=new Array(a*n-f),m=0,c=0;c<a;c++){var h=l[c];if(h===1||h===d-1)A.fill(h>1,m,m+n-1),m+=n-1;else for(var p=n-1;p>=0;--p)A[m++]=(h&1<<p)!==0}return A},t.prototype.extractBits=function(e){var r=this.ddata.isCompact(),n=this.ddata.getNbLayers(),a=(r?11:14)+n*4,s=new Int32Array(a),i=new Array(this.totalBitsInLayer(n,r));if(r)for(var l=0;l<s.length;l++)s[l]=l;else for(var c=a+1+2*Pn.truncDivision(Pn.truncDivision(a,2)-1,15),u=a/2,d=Pn.truncDivision(c,2),l=0;l<u;l++){var f=l+Pn.truncDivision(l,15);s[u-l-1]=d-f-1,s[u+l]=d+f+1}for(var l=0,h=0;l<n;l++){for(var A=(n-l)*4+(r?9:12),m=l*2,p=a-1-m,g=0;g<A;g++)for(var x=g*2,y=0;y<2;y++)i[h+x+y]=e.get(s[m+y],s[m+g]),i[h+2*A+x+y]=e.get(s[m+g],s[p-y]),i[h+4*A+x+y]=e.get(s[p-y],s[p-g]),i[h+6*A+x+y]=e.get(s[p-g],s[m+y]);h+=A*8}return i},t.readCode=function(e,r,n){for(var a=0,s=r;s<r+n;s++)a<<=1,e[s]&&(a|=1);return a},t.readByte=function(e,r){var n=e.length-r;return n>=8?t.readCode(e,r,8):t.readCode(e,r,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var r=new Uint8Array((e.length+7)/8),n=0;n<r.length;n++)r[n]=t.readByte(e,8*n);return r},t.prototype.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),Zn=function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,r,n,a){var s=e-n,i=r-a;return Math.sqrt(s*s+i*i)},t.sum=function(e){for(var r=0,n=0,a=e.length;n!==a;n++){var s=e[n];r+=s}return r},t}(),gk=function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),Lr=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var r=e;return this.x===r.x&&this.y===r.y}return!1},t.prototype.hashCode=function(){return 31*gk.floatToIntBits(this.x)+gk.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var r=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),a=this.distance(e[0],e[2]),s,i,l;if(n>=r&&n>=a?(i=e[0],s=e[1],l=e[2]):a>=n&&a>=r?(i=e[1],s=e[0],l=e[2]):(i=e[2],s=e[0],l=e[1]),this.crossProductZ(s,i,l)<0){var c=s;s=l,l=c}e[0]=s,e[1]=i,e[2]=l},t.distance=function(e,r){return Zn.distance(e.x,e.y,r.x,r.y)},t.crossProductZ=function(e,r,n){var a=r.x,s=r.y;return(n.x-a)*(e.y-s)-(n.y-s)*(e.x-a)},t}(),dD=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),Hje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$je=function(t){Hje(e,t);function e(r,n,a,s,i){var l=t.call(this,r,n)||this;return l.compact=a,l.nbDatablocks=s,l.nbLayers=i,l}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(dD),xk=function(){function t(e,r,n,a){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=t.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),a==null&&(a=e.getHeight()/2|0);var s=r/2|0;if(this.leftInit=n-s,this.rightInit=n+s,this.upInit=a-s,this.downInit=a+s,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new qt}return t.prototype.detect=function(){for(var e=this.leftInit,r=this.rightInit,n=this.upInit,a=this.downInit,s=!1,i=!0,l=!1,c=!1,u=!1,d=!1,f=!1,h=this.width,A=this.height;i;){i=!1;for(var m=!0;(m||!c)&&r<h;)m=this.containsBlackPoint(n,a,r,!1),m?(r++,i=!0,c=!0):c||r++;if(r>=h){s=!0;break}for(var p=!0;(p||!u)&&a<A;)p=this.containsBlackPoint(e,r,a,!0),p?(a++,i=!0,u=!0):u||a++;if(a>=A){s=!0;break}for(var g=!0;(g||!d)&&e>=0;)g=this.containsBlackPoint(n,a,e,!1),g?(e--,i=!0,d=!0):d||e--;if(e<0){s=!0;break}for(var x=!0;(x||!f)&&n>=0;)x=this.containsBlackPoint(e,r,n,!0),x?(n--,i=!0,f=!0):f||n--;if(n<0){s=!0;break}i&&(l=!0)}if(!s&&l){for(var y=r-e,b=null,w=1;b===null&&w<y;w++)b=this.getBlackPointOnSegment(e,a-w,e+w,a);if(b==null)throw new qt;for(var j=null,w=1;j===null&&w<y;w++)j=this.getBlackPointOnSegment(e,n+w,e+w,n);if(j==null)throw new qt;for(var I=null,w=1;I===null&&w<y;w++)I=this.getBlackPointOnSegment(r,n+w,r-w,n);if(I==null)throw new qt;for(var _=null,w=1;_===null&&w<y;w++)_=this.getBlackPointOnSegment(r,a-w,r-w,a);if(_==null)throw new qt;return this.centerEdges(_,b,I,j)}else throw new qt},t.prototype.getBlackPointOnSegment=function(e,r,n,a){for(var s=Zn.round(Zn.distance(e,r,n,a)),i=(n-e)/s,l=(a-r)/s,c=this.image,u=0;u<s;u++){var d=Zn.round(e+u*i),f=Zn.round(r+u*l);if(c.get(d,f))return new Lr(d,f)}return null},t.prototype.centerEdges=function(e,r,n,a){var s=e.getX(),i=e.getY(),l=r.getX(),c=r.getY(),u=n.getX(),d=n.getY(),f=a.getX(),h=a.getY(),A=t.CORR;return s<this.width/2?[new Lr(f-A,h+A),new Lr(l+A,c+A),new Lr(u-A,d-A),new Lr(s+A,i-A)]:[new Lr(f+A,h+A),new Lr(l+A,c-A),new Lr(u-A,d+A),new Lr(s-A,i-A)]},t.prototype.containsBlackPoint=function(e,r,n,a){var s=this.image;if(a){for(var i=e;i<=r;i++)if(s.get(i,n))return!0}else for(var l=e;l<=r;l++)if(s.get(n,l))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),_V=function(){function t(){}return t.checkAndNudgePoints=function(e,r){for(var n=e.getWidth(),a=e.getHeight(),s=!0,i=0;i<r.length&&s;i+=2){var l=Math.floor(r[i]),c=Math.floor(r[i+1]);if(l<-1||l>n||c<-1||c>a)throw new qt;s=!1,l===-1?(r[i]=0,s=!0):l===n&&(r[i]=n-1,s=!0),c===-1?(r[i+1]=0,s=!0):c===a&&(r[i+1]=a-1,s=!0)}s=!0;for(var i=r.length-2;i>=0&&s;i-=2){var l=Math.floor(r[i]),c=Math.floor(r[i+1]);if(l<-1||l>n||c<-1||c>a)throw new qt;s=!1,l===-1?(r[i]=0,s=!0):l===n&&(r[i]=n-1,s=!0),c===-1?(r[i+1]=0,s=!0):c===a&&(r[i+1]=a-1,s=!0)}},t}(),Jte=function(){function t(e,r,n,a,s,i,l,c,u){this.a11=e,this.a21=r,this.a31=n,this.a12=a,this.a22=s,this.a32=i,this.a13=l,this.a23=c,this.a33=u}return t.quadrilateralToQuadrilateral=function(e,r,n,a,s,i,l,c,u,d,f,h,A,m,p,g){var x=t.quadrilateralToSquare(e,r,n,a,s,i,l,c),y=t.squareToQuadrilateral(u,d,f,h,A,m,p,g);return y.times(x)},t.prototype.transformPoints=function(e){for(var r=e.length,n=this.a11,a=this.a12,s=this.a13,i=this.a21,l=this.a22,c=this.a23,u=this.a31,d=this.a32,f=this.a33,h=0;h<r;h+=2){var A=e[h],m=e[h+1],p=s*A+c*m+f;e[h]=(n*A+i*m+u)/p,e[h+1]=(a*A+l*m+d)/p}},t.prototype.transformPointsWithValues=function(e,r){for(var n=this.a11,a=this.a12,s=this.a13,i=this.a21,l=this.a22,c=this.a23,u=this.a31,d=this.a32,f=this.a33,h=e.length,A=0;A<h;A++){var m=e[A],p=r[A],g=s*m+c*p+f;e[A]=(n*m+i*p+u)/g,r[A]=(a*m+l*p+d)/g}},t.squareToQuadrilateral=function(e,r,n,a,s,i,l,c){var u=e-n+s-l,d=r-a+i-c;if(u===0&&d===0)return new t(n-e,s-n,e,a-r,i-a,r,0,0,1);var f=n-s,h=l-s,A=a-i,m=c-i,p=f*m-h*A,g=(u*m-h*d)/p,x=(f*d-u*A)/p;return new t(n-e+g*n,l-e+x*l,e,a-r+g*a,c-r+x*c,r,g,x,1)},t.quadrilateralToSquare=function(e,r,n,a,s,i,l,c){return t.squareToQuadrilateral(e,r,n,a,s,i,l,c).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),Gje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kje=function(t){Gje(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(r,n,a,s,i,l,c,u,d,f,h,A,m,p,g,x,y,b,w){var j=Jte.quadrilateralToQuadrilateral(s,i,l,c,u,d,f,h,A,m,p,g,x,y,b,w);return this.sampleGridWithTransform(r,n,a,j)},e.prototype.sampleGridWithTransform=function(r,n,a,s){if(n<=0||a<=0)throw new qt;for(var i=new Uf(n,a),l=new Float32Array(2*n),c=0;c<a;c++){for(var u=l.length,d=c+.5,f=0;f<u;f+=2)l[f]=f/2+.5,l[f+1]=d;s.transformPoints(l),_V.checkAndNudgePoints(r,l);try{for(var f=0;f<u;f+=2)r.get(Math.floor(l[f]),Math.floor(l[f+1]))&&i.set(f/2,c)}catch{throw new qt}}return i},e}(_V),fD=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new Kje,t}(),uc=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.toResultPoint=function(){return new Lr(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),qje=function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var r=this.getMatrixCenter(),n=this.getBullsEyeCorners(r);if(e){var a=n[0];n[0]=n[2],n[2]=a}this.extractParameters(n);var s=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),i=this.getMatrixCornerPoints(n);return new $je(s,i,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new qt;var r=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(n,r);for(var a=0,s=0;s<4;s++){var i=n[(this.shift+s)%4];this.compact?(a<<=7,a+=i>>1&127):(a<<=10,a+=(i>>2&992)+(i>>1&31))}var l=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)},t.prototype.getRotation=function(e,r){var n=0;e.forEach(function(s,i,l){var c=(s>>r-2<<1)+(s&1);n=(n<<3)+c}),n=((n&1)<<11)+(n>>1);for(var a=0;a<4;a++)if(Pn.bitCount(n^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new qt},t.prototype.getCorrectedParameterData=function(e,r){var n,a;r?(n=7,a=2):(n=10,a=4);for(var s=n-a,i=new Int32Array(n),l=n-1;l>=0;--l)i[l]=e&15,e>>=4;try{var c=new L4(xc.AZTEC_PARAM);c.decode(i,s)}catch{throw new qt}for(var u=0,l=0;l<a;l++)u=(u<<4)+i[l];return u},t.prototype.getBullsEyeCorners=function(e){var r=e,n=e,a=e,s=e,i=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var l=this.getFirstDifferent(r,i,1,-1),c=this.getFirstDifferent(n,i,1,1),u=this.getFirstDifferent(a,i,-1,1),d=this.getFirstDifferent(s,i,-1,-1);if(this.nbCenterLayers>2){var f=this.distancePoint(d,l)*this.nbCenterLayers/(this.distancePoint(s,r)*(this.nbCenterLayers+2));if(f<.75||f>1.25||!this.isWhiteOrBlackRectangle(l,c,u,d))break}r=l,n=c,a=u,s=d,i=!i}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new qt;this.compact=this.nbCenterLayers===5;var h=new Lr(r.getX()+.5,r.getY()-.5),A=new Lr(n.getX()+.5,n.getY()+.5),m=new Lr(a.getX()-.5,a.getY()+.5),p=new Lr(s.getX()-.5,s.getY()-.5);return this.expandSquare([h,A,m,p],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,r,n,a;try{var s=new xk(this.image).detect();e=s[0],r=s[1],n=s[2],a=s[3]}catch{var i=this.image.getWidth()/2,l=this.image.getHeight()/2;e=this.getFirstDifferent(new uc(i+7,l-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new uc(i+7,l+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new uc(i-7,l+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new uc(i-7,l-7),!1,-1,-1).toResultPoint()}var c=Zn.round((e.getX()+a.getX()+r.getX()+n.getX())/4),u=Zn.round((e.getY()+a.getY()+r.getY()+n.getY())/4);try{var s=new xk(this.image,15,c,u).detect();e=s[0],r=s[1],n=s[2],a=s[3]}catch{e=this.getFirstDifferent(new uc(c+7,u-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new uc(c+7,u+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new uc(c-7,u+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new uc(c-7,u-7),!1,-1,-1).toResultPoint()}return c=Zn.round((e.getX()+a.getX()+r.getX()+n.getX())/4),u=Zn.round((e.getY()+a.getY()+r.getY()+n.getY())/4),new uc(c,u)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,r,n,a,s){var i=fD.getInstance(),l=this.getDimension(),c=l/2-this.nbCenterLayers,u=l/2+this.nbCenterLayers;return i.sampleGrid(e,l,l,c,c,u,c,u,u,c,u,r.getX(),r.getY(),n.getX(),n.getY(),a.getX(),a.getY(),s.getX(),s.getY())},t.prototype.sampleLine=function(e,r,n){for(var a=0,s=this.distanceResultPoint(e,r),i=s/n,l=e.getX(),c=e.getY(),u=i*(r.getX()-e.getX())/s,d=i*(r.getY()-e.getY())/s,f=0;f<n;f++)this.image.get(Zn.round(l+f*u),Zn.round(c+f*d))&&(a|=1<<n-f-1);return a},t.prototype.isWhiteOrBlackRectangle=function(e,r,n,a){var s=3;e=new uc(e.getX()-s,e.getY()+s),r=new uc(r.getX()-s,r.getY()-s),n=new uc(n.getX()+s,n.getY()-s),a=new uc(a.getX()+s,a.getY()+s);var i=this.getColor(a,e);if(i===0)return!1;var l=this.getColor(e,r);return l!==i||(l=this.getColor(r,n),l!==i)?!1:(l=this.getColor(n,a),l===i)},t.prototype.getColor=function(e,r){for(var n=this.distancePoint(e,r),a=(r.getX()-e.getX())/n,s=(r.getY()-e.getY())/n,i=0,l=e.getX(),c=e.getY(),u=this.image.get(e.getX(),e.getY()),d=Math.ceil(n),f=0;f<d;f++)l+=a,c+=s,this.image.get(Zn.round(l),Zn.round(c))!==u&&i++;var h=i/n;return h>.1&&h<.9?0:h<=.1===u?1:-1},t.prototype.getFirstDifferent=function(e,r,n,a){for(var s=e.getX()+n,i=e.getY()+a;this.isValid(s,i)&&this.image.get(s,i)===r;)s+=n,i+=a;for(s-=n,i-=a;this.isValid(s,i)&&this.image.get(s,i)===r;)s+=n;for(s-=n;this.isValid(s,i)&&this.image.get(s,i)===r;)i+=a;return i-=a,new uc(s,i)},t.prototype.expandSquare=function(e,r,n){var a=n/(2*r),s=e[0].getX()-e[2].getX(),i=e[0].getY()-e[2].getY(),l=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,u=new Lr(l+a*s,c+a*i),d=new Lr(l-a*s,c-a*i);s=e[1].getX()-e[3].getX(),i=e[1].getY()-e[3].getY(),l=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var f=new Lr(l+a*s,c+a*i),h=new Lr(l-a*s,c-a*i),A=[u,f,d,h];return A},t.prototype.isValid=function(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()},t.prototype.isValidPoint=function(e){var r=Zn.round(e.getX()),n=Zn.round(e.getY());return this.isValid(r,n)},t.prototype.distancePoint=function(e,r){return Zn.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.distanceResultPoint=function(e,r){return Zn.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Pn.truncDivision(this.nbLayers-4,8)+1)+15},t}(),vS=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=null,a=new qje(e.getBlackMatrix()),s=null,i=null;try{var l=a.detectMirror(!1);s=l.getPoints(),this.reportFoundResultPoints(r,s),i=new CV().decode(l)}catch(f){n=f}if(i==null)try{var l=a.detectMirror(!0);s=l.getPoints(),this.reportFoundResultPoints(r,s),i=new CV().decode(l)}catch(f){throw n??f}var c=new Fl(i.getText(),i.getRawBytes(),i.getNumBits(),s,Xr.AZTEC,Ga.currentTimeMillis()),u=i.getByteSegments();u!=null&&c.putMetadata(tl.BYTE_SEGMENTS,u);var d=i.getECLevel();return d!=null&&c.putMetadata(tl.ERROR_CORRECTION_LEVEL,d),c},t.prototype.reportFoundResultPoints=function(e,r){if(e!=null){var n=e.get(Ka.NEED_RESULT_POINT_CALLBACK);n!=null&&r.forEach(function(a,s,i){n.foundPossibleResultPoint(a)})}},t.prototype.reset=function(){},t}(),zje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){zje(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new vS,r)||this}return e})(a1);var to=function(){function t(){}return t.prototype.decode=function(e,r){try{return this.doDecode(e,r)}catch{var n=r&&r.get(Ka.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var a=e.rotateCounterClockwise(),s=this.doDecode(a,r),i=s.getResultMetadata(),l=270;i!==null&&i.get(tl.ORIENTATION)===!0&&(l=l+i.get(tl.ORIENTATION)%360),s.putMetadata(tl.ORIENTATION,l);var c=s.getResultPoints();if(c!==null)for(var u=a.getHeight(),d=0;d<c.length;d++)c[d]=new Lr(u-c[d].getY()-1,c[d].getX());return s}else throw new qt}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,r){var n=e.getWidth(),a=e.getHeight(),s=new _o(n),i=r&&r.get(Ka.TRY_HARDER)===!0,l=Math.max(1,a>>(i?8:5)),c;i?c=a:c=15;for(var u=Math.trunc(a/2),d=0;d<c;d++){var f=Math.trunc((d+1)/2),h=(d&1)===0,A=u+l*(h?f:-f);if(A<0||A>=a)break;try{s=e.getBlackRow(A,s)}catch{continue}for(var m=function(y){if(y===1&&(s.reverse(),r&&r.get(Ka.NEED_RESULT_POINT_CALLBACK)===!0)){var b=new Map;r.forEach(function(I,_){return b.set(_,I)}),b.delete(Ka.NEED_RESULT_POINT_CALLBACK),r=b}try{var w=p.decodeRow(A,s,r);if(y===1){w.putMetadata(tl.ORIENTATION,180);var j=w.getResultPoints();j!==null&&(j[0]=new Lr(n-j[0].getX()-1,j[0].getY()),j[1]=new Lr(n-j[1].getX()-1,j[1].getY()))}return{value:w}}catch{}},p=this,g=0;g<2;g++){var x=m(g);if(typeof x=="object")return x.value}}throw new qt},t.recordPattern=function(e,r,n){for(var a=n.length,s=0;s<a;s++)n[s]=0;var i=e.getSize();if(r>=i)throw new qt;for(var l=!e.get(r),c=0,u=r;u<i;){if(e.get(u)!==l)n[c]++;else{if(++c===a)break;n[c]=1,l=!l}u++}if(!(c===a||c===a-1&&u===i))throw new qt},t.recordPatternInReverse=function(e,r,n){for(var a=n.length,s=e.get(r);r>0&&a>=0;)e.get(--r)!==s&&(a--,s=!s);if(a>=0)throw new qt;t.recordPattern(e,r+1,n)},t.patternMatchVariance=function(e,r,n){for(var a=e.length,s=0,i=0,l=0;l<a;l++)s+=e[l],i+=r[l];if(s<i)return Number.POSITIVE_INFINITY;var c=s/i;n*=c;for(var u=0,d=0;d<a;d++){var f=e[d],h=r[d]*c,A=f>h?f-h:h-f;if(A>n)return Number.POSITIVE_INFINITY;u+=A}return u/s},t}(),Wje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),EV=function(t){Wje(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(r){for(var n=r.getSize(),a=r.getNextSet(0),s=0,i=Int32Array.from([0,0,0,0,0,0]),l=a,c=!1,u=6,d=a;d<n;d++)if(r.get(d)!==c)i[s]++;else{if(s===u-1){for(var f=e.MAX_AVG_VARIANCE,h=-1,A=e.CODE_START_A;A<=e.CODE_START_C;A++){var m=to.patternMatchVariance(i,e.CODE_PATTERNS[A],e.MAX_INDIVIDUAL_VARIANCE);m<f&&(f=m,h=A)}if(h>=0&&r.isRange(Math.max(0,l-(d-l)/2),l,!1))return Int32Array.from([l,d,h]);l+=i[0]+i[1],i=i.slice(2,i.length),i[s-1]=0,i[s]=0,s--}else s++;i[s]=1,c=!c}throw new qt},e.decodeCode=function(r,n,a){to.recordPattern(r,a,n);for(var s=e.MAX_AVG_VARIANCE,i=-1,l=0;l<e.CODE_PATTERNS.length;l++){var c=e.CODE_PATTERNS[l],u=this.patternMatchVariance(n,c,e.MAX_INDIVIDUAL_VARIANCE);u<s&&(s=u,i=l)}if(i>=0)return i;throw new qt},e.prototype.decodeRow=function(r,n,a){var s=a&&a.get(Ka.ASSUME_GS1)===!0,i=e.findStartPattern(n),l=i[2],c=0,u=new Uint8Array(20);u[c++]=l;var d;switch(l){case e.CODE_START_A:d=e.CODE_CODE_A;break;case e.CODE_START_B:d=e.CODE_CODE_B;break;case e.CODE_START_C:d=e.CODE_CODE_C;break;default:throw new yr}for(var f=!1,h=!1,A="",m=i[0],p=i[1],g=Int32Array.from([0,0,0,0,0,0]),x=0,y=0,b=l,w=0,j=!0,I=!1,_=!1;!f;){var S=h;switch(h=!1,x=y,y=e.decodeCode(n,g,p),u[c++]=y,y!==e.CODE_STOP&&(j=!0),y!==e.CODE_STOP&&(w++,b+=w*y),m=p,p+=g.reduce(function(fe,ge){return fe+ge},0),y){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new yr}switch(d){case e.CODE_CODE_A:if(y<64)_===I?A+=String.fromCharCode(32+y):A+=String.fromCharCode(32+y+128),_=!1;else if(y<96)_===I?A+=String.fromCharCode(y-64):A+=String.fromCharCode(y+64),_=!1;else switch(y!==e.CODE_STOP&&(j=!1),y){case e.CODE_FNC_1:s&&(A.length===0?A+="]C1":A+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!I&&_?(I=!0,_=!1):I&&_?(I=!1,_=!1):_=!0;break;case e.CODE_SHIFT:h=!0,d=e.CODE_CODE_B;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_B:if(y<96)_===I?A+=String.fromCharCode(32+y):A+=String.fromCharCode(32+y+128),_=!1;else switch(y!==e.CODE_STOP&&(j=!1),y){case e.CODE_FNC_1:s&&(A.length===0?A+="]C1":A+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!I&&_?(I=!0,_=!1):I&&_?(I=!1,_=!1):_=!0;break;case e.CODE_SHIFT:h=!0,d=e.CODE_CODE_A;break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_C:if(y<100)y<10&&(A+="0"),A+=y;else switch(y!==e.CODE_STOP&&(j=!1),y){case e.CODE_FNC_1:s&&(A.length===0?A+="]C1":A+="");break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_STOP:f=!0;break}break}S&&(d=d===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var E=p-m;if(p=n.getNextUnset(p),!n.isRange(p,Math.min(n.getSize(),p+(p-m)/2),!1))throw new qt;if(b-=w*x,b%103!==x)throw new Bi;var k=A.length;if(k===0)throw new qt;k>0&&j&&(d===e.CODE_CODE_C?A=A.substring(0,k-2):A=A.substring(0,k-1));for(var P=(i[1]+i[0])/2,T=m+E/2,O=u.length,W=new Uint8Array(O),Ae=0;Ae<O;Ae++)W[Ae]=u[Ae];var de=[new Lr(P,r),new Lr(T,r)];return new Fl(A,W,0,de,Xr.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(to),Xje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),J5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},SV=function(t){Xje(e,t);function e(r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var a=t.call(this)||this;return a.usingCheckDigit=r,a.extendedMode=n,a.decodeRowResult="",a.counters=new Int32Array(9),a}return e.prototype.decodeRow=function(r,n,a){var s,i,l,c,u=this.counters;u.fill(0),this.decodeRowResult="";var d=e.findAsteriskPattern(n,u),f=n.getNextSet(d[1]),h=n.getSize(),A,m;do{e.recordPattern(n,f,u);var p=e.toNarrowWidePattern(u);if(p<0)throw new qt;A=e.patternToChar(p),this.decodeRowResult+=A,m=f;try{for(var g=(s=void 0,J5(u)),x=g.next();!x.done;x=g.next()){var y=x.value;f+=y}}catch(O){s={error:O}}finally{try{x&&!x.done&&(i=g.return)&&i.call(g)}finally{if(s)throw s.error}}f=n.getNextSet(f)}while(A!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var b=0;try{for(var w=J5(u),j=w.next();!j.done;j=w.next()){var y=j.value;b+=y}}catch(O){l={error:O}}finally{try{j&&!j.done&&(c=w.return)&&c.call(w)}finally{if(l)throw l.error}}var I=f-m-b;if(f!==h&&I*2<b)throw new qt;if(this.usingCheckDigit){for(var _=this.decodeRowResult.length-1,S=0,E=0;E<_;E++)S+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(E));if(this.decodeRowResult.charAt(_)!==e.ALPHABET_STRING.charAt(S%43))throw new Bi;this.decodeRowResult=this.decodeRowResult.substring(0,_)}if(this.decodeRowResult.length===0)throw new qt;var k;this.extendedMode?k=e.decodeExtended(this.decodeRowResult):k=this.decodeRowResult;var P=(d[1]+d[0])/2,T=m+b/2;return new Fl(k,null,0,[new Lr(P,r),new Lr(T,r)],Xr.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(r,n){for(var a=r.getSize(),s=r.getNextSet(0),i=0,l=s,c=!1,u=n.length,d=s;d<a;d++)if(r.get(d)!==c)n[i]++;else{if(i===u-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&r.isRange(Math.max(0,l-Math.floor((d-l)/2)),l,!1))return[l,d];l+=n[0]+n[1],n.copyWithin(0,2,2+i-1),n[i-1]=0,n[i]=0,i--}else i++;n[i]=1,c=!c}throw new qt},e.toNarrowWidePattern=function(r){var n,a,s=r.length,i=0,l;do{var c=2147483647;try{for(var u=(n=void 0,J5(r)),d=u.next();!d.done;d=u.next()){var f=d.value;f<c&&f>i&&(c=f)}}catch(p){n={error:p}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}i=c,l=0;for(var h=0,A=0,m=0;m<s;m++){var f=r[m];f>i&&(A|=1<<s-1-m,l++,h+=f)}if(l===3){for(var m=0;m<s&&l>0;m++){var f=r[m];if(f>i&&(l--,f*2>=h))return-1}return A}}while(l>3);return-1},e.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);if(r===e.ASTERISK_ENCODING)return"*";throw new qt},e.decodeExtended=function(r){for(var n=r.length,a="",s=0;s<n;s++){var i=r.charAt(s);if(i==="+"||i==="$"||i==="%"||i==="/"){var l=r.charAt(s+1),c="\0";switch(i){case"+":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new yr;break;case"$":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new yr;break;case"%":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l==="X"||l==="Y"||l==="Z")c="";else throw new yr;break;case"/":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new yr;break}a+=c,s++}else a+=i}return a},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(to),Yje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Z5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},IV=function(t){Yje(e,t);function e(){var r=t.call(this)||this;return r.decodeRowResult="",r.counters=new Int32Array(6),r}return e.prototype.decodeRow=function(r,n,a){var s,i,l,c,u=this.findAsteriskPattern(n),d=n.getNextSet(u[1]),f=n.getSize(),h=this.counters;h.fill(0),this.decodeRowResult="";var A,m;do{e.recordPattern(n,d,h);var p=this.toPattern(h);if(p<0)throw new qt;A=this.patternToChar(p),this.decodeRowResult+=A,m=d;try{for(var g=(s=void 0,Z5(h)),x=g.next();!x.done;x=g.next()){var y=x.value;d+=y}}catch(E){s={error:E}}finally{try{x&&!x.done&&(i=g.return)&&i.call(g)}finally{if(s)throw s.error}}d=n.getNextSet(d)}while(A!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var b=0;try{for(var w=Z5(h),j=w.next();!j.done;j=w.next()){var y=j.value;b+=y}}catch(E){l={error:E}}finally{try{j&&!j.done&&(c=w.return)&&c.call(w)}finally{if(l)throw l.error}}if(d===f||!n.get(d))throw new qt;if(this.decodeRowResult.length<2)throw new qt;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var I=this.decodeExtended(this.decodeRowResult),_=(u[1]+u[0])/2,S=m+b/2;return new Fl(I,null,0,[new Lr(_,r),new Lr(S,r)],Xr.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(r){var n=r.getSize(),a=r.getNextSet(0);this.counters.fill(0);for(var s=this.counters,i=a,l=!1,c=s.length,u=0,d=a;d<n;d++)if(r.get(d)!==l)s[u]++;else{if(u===c-1){if(this.toPattern(s)===e.ASTERISK_ENCODING)return new Int32Array([i,d]);i+=s[0]+s[1],s.copyWithin(0,2,2+u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,l=!l}throw new qt},e.prototype.toPattern=function(r){var n,a,s=0;try{for(var i=Z5(r),l=i.next();!l.done;l=i.next()){var c=l.value;s+=c}}catch(m){n={error:m}}finally{try{l&&!l.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}for(var u=0,d=r.length,f=0;f<d;f++){var h=Math.round(r[f]*9/s);if(h<1||h>4)return-1;if(f&1)u<<=h;else for(var A=0;A<h;A++)u=u<<1|1}return u},e.prototype.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);throw new qt},e.prototype.decodeExtended=function(r){for(var n=r.length,a="",s=0;s<n;s++){var i=r.charAt(s);if(i>="a"&&i<="d"){if(s>=n-1)throw new yr;var l=r.charAt(s+1),c="\0";switch(i){case"d":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new yr;break;case"a":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new yr;break;case"b":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l>="X"&&l<="Z")c="";else throw new yr;break;case"c":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new yr;break}a+=c,s++}else a+=i}return a},e.prototype.checkChecksums=function(r){var n=r.length;this.checkOneChecksum(r,n-2,20),this.checkOneChecksum(r,n-1,15)},e.prototype.checkOneChecksum=function(r,n,a){for(var s=1,i=0,l=n-1;l>=0;l--)i+=s*e.ALPHABET_STRING.indexOf(r.charAt(l)),++s>a&&(s=1);if(r.charAt(n)!==e.ALPHABET_STRING[i%47])throw new Bi},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(to),Jje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zje=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jV=function(t){Jje(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.narrowLineWidth=-1,r}return e.prototype.decodeRow=function(r,n,a){var s,i,l=this.decodeStart(n),c=this.decodeEnd(n),u=new _n;e.decodeMiddle(n,l[1],c[0],u);var d=u.toString(),f=null;a!=null&&(f=a.get(Ka.ALLOWED_LENGTHS)),f==null&&(f=e.DEFAULT_ALLOWED_LENGTHS);var h=d.length,A=!1,m=0;try{for(var p=Zje(f),g=p.next();!g.done;g=p.next()){var x=g.value;if(h===x){A=!0;break}x>m&&(m=x)}}catch(w){s={error:w}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(s)throw s.error}}if(!A&&h>m&&(A=!0),!A)throw new yr;var y=[new Lr(l[1],r),new Lr(c[0],r)],b=new Fl(d,null,0,y,Xr.ITF,new Date().getTime());return b},e.decodeMiddle=function(r,n,a,s){var i=new Int32Array(10),l=new Int32Array(5),c=new Int32Array(5);for(i.fill(0),l.fill(0),c.fill(0);n<a;){to.recordPattern(r,n,i);for(var u=0;u<5;u++){var d=2*u;l[u]=i[d],c[u]=i[d+1]}var f=e.decodeDigit(l);s.append(f.toString()),f=this.decodeDigit(c),s.append(f.toString()),i.forEach(function(h){n+=h})}},e.prototype.decodeStart=function(r){var n=e.skipWhiteSpace(r),a=e.findGuardPattern(r,n,e.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(r,a[0]),a},e.prototype.validateQuietZone=function(r,n){var a=this.narrowLineWidth*10;a=a<n?a:n;for(var s=n-1;a>0&&s>=0&&!r.get(s);s--)a--;if(a!==0)throw new qt},e.skipWhiteSpace=function(r){var n=r.getSize(),a=r.getNextSet(0);if(a===n)throw new qt;return a},e.prototype.decodeEnd=function(r){r.reverse();try{var n=e.skipWhiteSpace(r),a=void 0;try{a=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[0])}catch(i){i instanceof qt&&(a=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,a[0]);var s=a[0];return a[0]=r.getSize()-a[1],a[1]=r.getSize()-s,a}finally{r.reverse()}},e.findGuardPattern=function(r,n,a){var s=a.length,i=new Int32Array(s),l=r.getSize(),c=!1,u=0,d=n;i.fill(0);for(var f=n;f<l;f++)if(r.get(f)!==c)i[u]++;else{if(u===s-1){if(to.patternMatchVariance(i,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[d,f];d+=i[0]+i[1],Ga.arraycopy(i,2,i,0,u-1),i[u-1]=0,i[u]=0,u--}else u++;i[u]=1,c=!c}throw new qt},e.decodeDigit=function(r){for(var n=e.MAX_AVG_VARIANCE,a=-1,s=e.PATTERNS.length,i=0;i<s;i++){var l=e.PATTERNS[i],c=to.patternMatchVariance(r,l,e.MAX_INDIVIDUAL_VARIANCE);c<n?(n=c,a=i):c===n&&(a=-1)}if(a>=0)return a%10;throw new qt},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(to),e3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ev=function(t){e3e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.decodeRowStringBuffer="",r}return e.findStartGuardPattern=function(r){for(var n=!1,a,s=0,i=Int32Array.from([0,0,0]);!n;){i=Int32Array.from([0,0,0]),a=e.findGuardPattern(r,s,!1,this.START_END_PATTERN,i);var l=a[0];s=a[1];var c=l-(s-l);c>=0&&(n=r.isRange(c,l,!1))}return a},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var a=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,a=0,s=n-1;s>=0;s-=2){var i=r.charAt(s).charCodeAt(0)-48;if(i<0||i>9)throw new yr;a+=i}a*=3;for(var s=n-2;s>=0;s-=2){var i=r.charAt(s).charCodeAt(0)-48;if(i<0||i>9)throw new yr;a+=i}return(1e3-a)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(r,n,a,s){return this.findGuardPattern(r,n,a,s,new Int32Array(s.length))},e.findGuardPattern=function(r,n,a,s,i){var l=r.getSize();n=a?r.getNextUnset(n):r.getNextSet(n);for(var c=0,u=n,d=s.length,f=a,h=n;h<l;h++)if(r.get(h)!==f)i[c]++;else{if(c===d-1){if(to.patternMatchVariance(i,s,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([u,h]);u+=i[0]+i[1];for(var A=i.slice(2,i.length),m=0;m<c-1;m++)i[m]=A[m];i[c-1]=0,i[c]=0,c--}else c++;i[c]=1,f=!f}throw new qt},e.decodeDigit=function(r,n,a,s){this.recordPattern(r,a,n);for(var i=this.MAX_AVG_VARIANCE,l=-1,c=s.length,u=0;u<c;u++){var d=s[u],f=to.patternMatchVariance(n,d,e.MAX_INDIVIDUAL_VARIANCE);f<i&&(i=f,l=u)}if(l>=0)return l;throw new qt},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(to),t3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},r3e=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var a=this.decodeRowStringBuffer,s=this.decodeMiddle(r,n,a),i=a.toString(),l=t.parseExtensionString(i),c=[new Lr((n[0]+n[1])/2,e),new Lr(s,e)],u=new Fl(i,null,0,c,Xr.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&u.putAllMetadata(l),u},t.prototype.decodeMiddle=function(e,r,n){var a,s,i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var l=e.getSize(),c=r[1],u=0,d=0;d<5&&c<l;d++){var f=Ev.decodeDigit(e,i,c,Ev.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var h=(a=void 0,t3e(i)),A=h.next();!A.done;A=h.next()){var m=A.value;c+=m}}catch(g){a={error:g}}finally{try{A&&!A.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}f>=10&&(u|=1<<4-d),d!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==5)throw new qt;var p=this.determineCheckDigit(u);if(t.extensionChecksum(n.toString())!==p)throw new qt;return c},t.extensionChecksum=function(e){for(var r=e.length,n=0,a=r-2;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;n*=3;for(var a=r-1;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;return n*=3,n%10},t.prototype.determineCheckDigit=function(e){for(var r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new qt},t.parseExtensionString=function(e){if(e.length!==5)return null;var r=t.parseExtension5String(e);return r==null?null:new Map([[tl.SUGGESTED_PRICE,r]])},t.parseExtension5String=function(e){var r;switch(e.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}var n=parseInt(e.substring(1)),a=(n/100).toString(),s=n%100,i=s<10?"0"+s:s.toString();return r+a+"."+i},t}(),n3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a3e=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var a=this.decodeRowStringBuffer,s=this.decodeMiddle(r,n,a),i=a.toString(),l=t.parseExtensionString(i),c=[new Lr((n[0]+n[1])/2,e),new Lr(s,e)],u=new Fl(i,null,0,c,Xr.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&u.putAllMetadata(l),u},t.prototype.decodeMiddle=function(e,r,n){var a,s,i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var l=e.getSize(),c=r[1],u=0,d=0;d<2&&c<l;d++){var f=Ev.decodeDigit(e,i,c,Ev.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var h=(a=void 0,n3e(i)),A=h.next();!A.done;A=h.next()){var m=A.value;c+=m}}catch(p){a={error:p}}finally{try{A&&!A.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}f>=10&&(u|=1<<1-d),d!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==2)throw new qt;if(parseInt(n.toString())%4!==u)throw new qt;return c},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[tl.ISSUE_NUMBER,parseInt(e)]])},t}(),s3e=function(){function t(){}return t.decodeRow=function(e,r,n){var a=Ev.findGuardPattern(r,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var s=new r3e;return s.decodeRow(e,r,a)}catch{var i=new a3e;return i.decodeRow(e,r,a)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),i3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qi=function(t){i3e(e,t);function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(l){return Int32Array.from(l)});for(var n=10;n<20;n++){for(var a=e.L_PATTERNS[n-10],s=new Int32Array(a.length),i=0;i<a.length;i++)s[i]=a[a.length-i-1];e.L_AND_G_PATTERNS[n]=s}return r}return e.prototype.decodeRow=function(r,n,a){var s=e.findStartGuardPattern(n),i=a==null?null:a.get(Ka.NEED_RESULT_POINT_CALLBACK);if(i!=null){var l=new Lr((s[0]+s[1])/2,r);i.foundPossibleResultPoint(l)}var c=this.decodeMiddle(n,s,this.decodeRowStringBuffer),u=c.rowOffset,d=c.resultString;if(i!=null){var f=new Lr(u,r);i.foundPossibleResultPoint(f)}var h=e.decodeEnd(n,u);if(i!=null){var A=new Lr((h[0]+h[1])/2,r);i.foundPossibleResultPoint(A)}var m=h[1],p=m+(m-h[0]);if(p>=n.getSize()||!n.isRange(m,p,!1))throw new qt;var g=d.toString();if(g.length<8)throw new yr;if(!e.checkChecksum(g))throw new Bi;var x=(s[1]+s[0])/2,y=(h[1]+h[0])/2,b=this.getBarcodeFormat(),w=[new Lr(x,r),new Lr(y,r)],j=new Fl(g,null,0,w,b,new Date().getTime()),I=0;try{var _=s3e.decodeRow(r,n,h[1]);j.putMetadata(tl.UPC_EAN_EXTENSION,_.getText()),j.putAllMetadata(_.getResultMetadata()),j.addResultPoints(_.getResultPoints()),I=_.getText().length}catch{}var S=a==null?null:a.get(Ka.ALLOWED_EAN_EXTENSIONS);if(S!=null){var E=!1;for(var k in S)if(I.toString()===k){E=!0;break}if(!E)throw new qt}return b===Xr.EAN_13||Xr.UPC_A,j},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var a=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,a=0,s=n-1;s>=0;s-=2){var i=r.charAt(s).charCodeAt(0)-48;if(i<0||i>9)throw new yr;a+=i}a*=3;for(var s=n-2;s>=0;s-=2){var i=r.charAt(s).charCodeAt(0)-48;if(i<0||i>9)throw new yr;a+=i}return(1e3-a)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(Ev),o3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),PV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vk=function(t){o3e(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,a){var s,i,l,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var d=r.getSize(),f=n[1],h=0,A=0;A<6&&f<d;A++){var m=qi.decodeDigit(r,u,f,qi.L_AND_G_PATTERNS);a+=String.fromCharCode(48+m%10);try{for(var p=(s=void 0,PV(u)),g=p.next();!g.done;g=p.next()){var x=g.value;f+=x}}catch(j){s={error:j}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(s)throw s.error}}m>=10&&(h|=1<<5-A)}a=e.determineFirstDigit(a,h);var y=qi.findGuardPattern(r,f,!0,qi.MIDDLE_PATTERN,new Int32Array(qi.MIDDLE_PATTERN.length).fill(0));f=y[1];for(var A=0;A<6&&f<d;A++){var m=qi.decodeDigit(r,u,f,qi.L_PATTERNS);a+=String.fromCharCode(48+m);try{for(var b=(l=void 0,PV(u)),w=b.next();!w.done;w=b.next()){var x=w.value;f+=x}}catch(_){l={error:_}}finally{try{w&&!w.done&&(c=b.return)&&c.call(b)}finally{if(l)throw l.error}}}return{rowOffset:f,resultString:a}},e.prototype.getBarcodeFormat=function(){return Xr.EAN_13},e.determineFirstDigit=function(r,n){for(var a=0;a<10;a++)if(n===this.FIRST_DIGIT_ENCODINGS[a])return r=String.fromCharCode(48+a)+r,r;throw new qt},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(qi),l3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),BV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TV=function(t){l3e(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,a){var s,i,l,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var d=r.getSize(),f=n[1],h=0;h<4&&f<d;h++){var A=qi.decodeDigit(r,u,f,qi.L_PATTERNS);a+=String.fromCharCode(48+A);try{for(var m=(s=void 0,BV(u)),p=m.next();!p.done;p=m.next()){var g=p.value;f+=g}}catch(w){s={error:w}}finally{try{p&&!p.done&&(i=m.return)&&i.call(m)}finally{if(s)throw s.error}}}var x=qi.findGuardPattern(r,f,!0,qi.MIDDLE_PATTERN,new Int32Array(qi.MIDDLE_PATTERN.length).fill(0));f=x[1];for(var h=0;h<4&&f<d;h++){var A=qi.decodeDigit(r,u,f,qi.L_PATTERNS);a+=String.fromCharCode(48+A);try{for(var y=(l=void 0,BV(u)),b=y.next();!b.done;b=y.next()){var g=b.value;f+=g}}catch(I){l={error:I}}finally{try{b&&!b.done&&(c=y.return)&&c.call(y)}finally{if(l)throw l.error}}}return{rowOffset:f,resultString:a}},e.prototype.getBarcodeFormat=function(){return Xr.EAN_8},e}(qi),c3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kV=function(t){c3e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.ean13Reader=new vk,r}return e.prototype.getBarcodeFormat=function(){return Xr.UPC_A},e.prototype.decode=function(r,n){return this.maybeReturnResult(this.ean13Reader.decode(r))},e.prototype.decodeRow=function(r,n,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,n,a))},e.prototype.decodeMiddle=function(r,n,a){return this.ean13Reader.decodeMiddle(r,n,a)},e.prototype.maybeReturnResult=function(r){var n=r.getText();if(n.charAt(0)==="0"){var a=new Fl(n.substring(1),null,null,r.getResultPoints(),Xr.UPC_A);return r.getResultMetadata()!=null&&a.putAllMetadata(r.getResultMetadata()),a}else throw new qt},e.prototype.reset=function(){this.ean13Reader.reset()},e}(qi),u3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),d3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FV=function(t){u3e(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=new Int32Array(4),r}return e.prototype.decodeMiddle=function(r,n,a){var s,i,l=this.decodeMiddleCounters.map(function(g){return g});l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var c=r.getSize(),u=n[1],d=0,f=0;f<6&&u<c;f++){var h=e.decodeDigit(r,l,u,e.L_AND_G_PATTERNS);a+=String.fromCharCode(48+h%10);try{for(var A=(s=void 0,d3e(l)),m=A.next();!m.done;m=A.next()){var p=m.value;u+=p}}catch(g){s={error:g}}finally{try{m&&!m.done&&(i=A.return)&&i.call(A)}finally{if(s)throw s.error}}h>=10&&(d|=1<<5-f)}return e.determineNumSysAndCheckDigit(new _n(a),d),u},e.prototype.decodeEnd=function(r,n){return e.findGuardPatternWithoutCounters(r,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(r){return qi.checkChecksum(e.convertUPCEtoUPCA(r))},e.determineNumSysAndCheckDigit=function(r,n){for(var a=0;a<=1;a++)for(var s=0;s<10;s++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][s]){r.insert(0,"0"+a),r.append("0"+s);return}throw qt.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Xr.UPC_E},e.convertUPCEtoUPCA=function(r){var n=r.slice(1,7).split("").map(function(i){return i.charCodeAt(0)}),a=new _n;a.append(r.charAt(0));var s=n[5];switch(s){case 0:case 1:case 2:a.appendChars(n,0,2),a.append(s),a.append("0000"),a.appendChars(n,2,3);break;case 3:a.appendChars(n,0,3),a.append("00000"),a.appendChars(n,3,2);break;case 4:a.appendChars(n,0,4),a.append("00000"),a.append(n[4]);break;default:a.appendChars(n,0,5),a.append("0000"),a.append(s);break}return r.length>=8&&a.append(r.charAt(7)),a.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(qi),f3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),OV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eP=function(t){f3e(e,t);function e(r){var n=t.call(this)||this,a=r==null?null:r.get(Ka.POSSIBLE_FORMATS),s=[];return a!=null&&(a.indexOf(Xr.EAN_13)>-1&&s.push(new vk),a.indexOf(Xr.UPC_A)>-1&&s.push(new kV),a.indexOf(Xr.EAN_8)>-1&&s.push(new TV),a.indexOf(Xr.UPC_E)>-1&&s.push(new FV)),s.length===0&&(s.push(new vk),s.push(new kV),s.push(new TV),s.push(new FV)),n.readers=s,n}return e.prototype.decodeRow=function(r,n,a){var s,i;try{for(var l=OV(this.readers),c=l.next();!c.done;c=l.next()){var u=c.value;try{var d=u.decodeRow(r,n,a),f=d.getBarcodeFormat()===Xr.EAN_13&&d.getText().charAt(0)==="0",h=a==null?null:a.get(Ka.POSSIBLE_FORMATS),A=h==null||h.includes(Xr.UPC_A);if(f&&A){var m=d.getRawBytes(),p=new Fl(d.getText().substring(1),m,m?m.length:null,d.getResultPoints(),Xr.UPC_A);return p.putAllMetadata(d.getResultMetadata()),p}return d}catch{}}}catch(g){s={error:g}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(s)throw s.error}}throw new qt},e.prototype.reset=function(){var r,n;try{for(var a=OV(this.readers),s=a.next();!s.done;s=a.next()){var i=s.value;i.reset()}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e}(to),A3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),h3e=function(t){A3e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},r}return e.prototype.decodeRow=function(r,n,a){var s=this.getValidRowData(n);if(!s)throw new qt;var i=this.codaBarDecodeRow(s.row);if(!i)throw new qt;return new Fl(i,null,0,[new Lr(s.left,r),new Lr(s.right,r)],Xr.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(r){var n=r.toArray(),a=n.indexOf(!0);if(a===-1)return null;var s=n.lastIndexOf(!0);if(s<=a)return null;n=n.slice(a,s+1);for(var i=[],l=n[0],c=1,u=1;u<n.length;u++)n[u]===l?c++:(l=n[u],i.push(c),c=1);return i.push(c),i.length<23&&(i.length+1)%8!==0?null:{row:i,left:a,right:s}},e.prototype.codaBarDecodeRow=function(r){for(var n=[],a=Math.ceil(r.reduce(function(c,u){return(c+u)/2},0));r.length>0;){var s=r.splice(0,8).splice(0,7),i=s.map(function(c){return c<a?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[i]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[i])}var l=n.join("");return this.validCodaBarString(l)?l:null},e.prototype.validCodaBarString=function(r){var n=/^[A-D].{1,}[A-D]$/;return n.test(r)},e}(to),m3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),p3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gm=function(t){m3e(e,t);function e(){var r=t.call(this)||this;return r.decodeFinderCounters=new Int32Array(4),r.dataCharacterCounters=new Int32Array(8),r.oddRoundingErrors=new Array(4),r.evenRoundingErrors=new Array(4),r.oddCounts=new Array(r.dataCharacterCounters.length/2),r.evenCounts=new Array(r.dataCharacterCounters.length/2),r}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(r,n){for(var a=0;a<n.length;a++)if(to.patternMatchVariance(r,n[a],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return a;throw new qt},e.count=function(r){return Zn.sum(new Int32Array(r))},e.increment=function(r,n){for(var a=0,s=n[0],i=1;i<r.length;i++)n[i]>s&&(s=n[i],a=i);r[a]++},e.decrement=function(r,n){for(var a=0,s=n[0],i=1;i<r.length;i++)n[i]<s&&(s=n[i],a=i);r[a]--},e.isFinderPattern=function(r){var n,a,s=r[0]+r[1],i=s+r[2]+r[3],l=s/i;if(l>=e.MIN_FINDER_PATTERN_RATIO&&l<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var d=p3e(r),f=d.next();!f.done;f=d.next()){var h=f.value;h>u&&(u=h),h<c&&(c=h)}}catch(A){n={error:A}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}return u<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(to),yS=function(){function t(e,r){this.value=e,this.checksumPortion=r}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),Zte=function(){function t(e,r,n,a,s){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new Lr(n,s)),this.resultPoints.push(new Lr(a,s))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.hashCode=function(){return this.value},t}(),g3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Mx=function(){function t(){}return t.getRSSvalue=function(e,r,n){var a,s,i=0;try{for(var l=g3e(e),c=l.next();!c.done;c=l.next()){var u=c.value;i+=u}}catch(y){a={error:y}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}for(var d=0,f=0,h=e.length,A=0;A<h-1;A++){var m=void 0;for(m=1,f|=1<<A;m<e[A];m++,f&=~(1<<A)){var p=t.combins(i-m-1,h-A-2);if(n&&f===0&&i-m-(h-A-1)>=h-A-1&&(p-=t.combins(i-m-(h-A),h-A-2)),h-A-1>1){for(var g=0,x=i-m-(h-A-2);x>r;x--)g+=t.combins(i-m-x-1,h-A-3);p-=g*(h-1-A)}else i-m>r&&p--;d+=p}i-=m}return d},t.combins=function(e,r){var n,a;e-r>r?(a=r,n=e-r):(a=e-r,n=r);for(var s=1,i=1,l=e;l>n;l--)s*=l,i<=a&&(s/=i,i++);for(;i<=a;)s/=i,i++;return s},t}(),x3e=function(){function t(){}return t.buildBitArray=function(e){var r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);for(var n=12*r,a=new _o(n),s=0,i=e[0],l=i.getRightChar().getValue(),c=11;c>=0;--c)l&1<<c&&a.set(s),s++;for(var c=1;c<e.length;++c){for(var u=e[c],d=u.getLeftChar().getValue(),f=11;f>=0;--f)d&1<<f&&a.set(s),s++;if(u.getRightChar()!==null)for(var h=u.getRightChar().getValue(),f=11;f>=0;--f)h&1<<f&&a.set(s),s++}return a},t}(),km=function(){function t(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),AD=function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),v3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Nd=function(t){v3e(e,t);function e(r,n){var a=t.call(this,r)||this;return a.value=n,a}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(AD),y3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fm=function(t){y3e(e,t);function e(r,n,a){var s=t.call(this,r)||this;return a?(s.remaining=!0,s.remainingValue=s.remainingValue):(s.remaining=!1,s.remainingValue=0),s.newString=n,s}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(AD),b3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rx=function(t){b3e(e,t);function e(r,n,a){var s=t.call(this,r)||this;if(n<0||n>10||a<0||a>10)throw new yr;return s.firstDigit=n,s.secondDigit=a,s}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(AD),FC=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},w3e=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var r,n,a,s,i,l,c,u;if(!e)return null;if(e.length<2)throw new qt;var d=e.substring(0,2);try{for(var f=FC(t.TWO_DIGIT_DATA_LENGTH),h=f.next();!h.done;h=f.next()){var A=h.value;if(A[0]===d)return A[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,A[2],e):t.processFixedAI(2,A[1],e)}}catch(I){r={error:I}}finally{try{h&&!h.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}if(e.length<3)throw new qt;var m=e.substring(0,3);try{for(var p=FC(t.THREE_DIGIT_DATA_LENGTH),g=p.next();!g.done;g=p.next()){var A=g.value;if(A[0]===m)return A[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,A[2],e):t.processFixedAI(3,A[1],e)}}catch(I){a={error:I}}finally{try{g&&!g.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}try{for(var x=FC(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),y=x.next();!y.done;y=x.next()){var A=y.value;if(A[0]===m)return A[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,A[2],e):t.processFixedAI(4,A[1],e)}}catch(I){i={error:I}}finally{try{y&&!y.done&&(l=x.return)&&l.call(x)}finally{if(i)throw i.error}}if(e.length<4)throw new qt;var b=e.substring(0,4);try{for(var w=FC(t.FOUR_DIGIT_DATA_LENGTH),j=w.next();!j.done;j=w.next()){var A=j.value;if(A[0]===b)return A[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,A[2],e):t.processFixedAI(4,A[1],e)}}catch(I){c={error:I}}finally{try{j&&!j.done&&(u=w.return)&&u.call(w)}finally{if(c)throw c.error}}throw new qt},t.processFixedAI=function(e,r,n){if(n.length<e)throw new qt;var a=n.substring(0,e);if(n.length<e+r)throw new qt;var s=n.substring(e,e+r),i=n.substring(e+r),l="("+a+")"+s,c=t.parseFieldsInGeneralPurpose(i);return c==null?l:l+c},t.processVariableAI=function(e,r,n){var a=n.substring(0,e),s;n.length<e+r?s=n.length:s=e+r;var i=n.substring(e,s),l=n.substring(s),c="("+a+")"+i,u=t.parseFieldsInGeneralPurpose(l);return u==null?c:c+u},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),nE=function(){function t(e){this.buffer=new _n,this.information=e}return t.prototype.decodeAllCodes=function(e,r){var n=r,a=null;do{var s=this.decodeGeneralPurposeField(n,a),i=w3e.parseFieldsInGeneralPurpose(s.getNewString());if(i!=null&&e.append(i),s.isRemaining()?a=""+s.getRemainingValue():a=null,n===s.getNewPosition())break;n=s.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var r=this.extractNumericValueFromBitArray(e,4);return r===0?new rx(this.information.getSize(),rx.FNC1,rx.FNC1):new rx(this.information.getSize(),r-1,rx.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),a=(n-8)/11,s=(n-8)%11;return new rx(e+7,a,s)},t.prototype.extractNumericValueFromBitArray=function(e,r){return t.extractNumericValueFromBitArray(this.information,e,r)},t.extractNumericValueFromBitArray=function(e,r,n){for(var a=0,s=0;s<n;++s)e.get(r+s)&&(a|=1<<n-s-1);return a},t.prototype.decodeGeneralPurposeField=function(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new Fm(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new Fm(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,r;do{var n=this.current.getPosition();this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished());var a=n!==this.current.getPosition();if(!a&&!e)break}while(!e);return r.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var r=void 0;return e.isSecondDigitFNC1()?r=new Fm(this.current.getPosition(),this.buffer.toString()):r=new Fm(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new km(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var r=new Fm(this.current.getPosition(),this.buffer.toString());return new km(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new km(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new Fm(this.current.getPosition(),this.buffer.toString());return new km(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new km(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new Fm(this.current.getPosition(),this.buffer.toString());return new km(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new km(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var a=this.extractNumericValueFromBitArray(e,8);return a>=232&&a<253},t.prototype.decodeIsoIec646=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new Nd(e+5,Nd.FNC1);if(r>=5&&r<15)return new Nd(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new Nd(e+7,""+(n+1));if(n>=90&&n<116)return new Nd(e+7,""+(n+7));var a=this.extractNumericValueFromBitArray(e,8),s;switch(a){case 232:s="!";break;case 233:s='"';break;case 234:s="%";break;case 235:s="&";break;case 236:s="'";break;case 237:s="(";break;case 238:s=")";break;case 239:s="*";break;case 240:s="+";break;case 241:s=",";break;case 242:s="-";break;case 243:s=".";break;case 244:s="/";break;case 245:s=":";break;case 246:s=";";break;case 247:s="<";break;case 248:s="=";break;case 249:s=">";break;case 250:s="?";break;case 251:s="_";break;case 252:s=" ";break;default:throw new yr}return new Nd(e+8,s)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},t.prototype.decodeAlphanumeric=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new Nd(e+5,Nd.FNC1);if(r>=5&&r<15)return new Nd(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new Nd(e+6,""+(n+33));var a;switch(n){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new _w("Decoding invalid alphanumeric value: "+n)}return new Nd(e+6,a)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0},t}(),ere=function(){function t(e){this.information=e,this.generalDecoder=new nE(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),N3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Bd=function(t){N3e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedGtin=function(r,n){r.append("(01)");var a=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,n,a)},e.prototype.encodeCompressedGtinWithoutAI=function(r,n,a){for(var s=0;s<4;++s){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*s,10);i/100===0&&r.append("0"),i/10===0&&r.append("0"),r.append(i)}e.appendCheckDigit(r,a)},e.appendCheckDigit=function(r,n){for(var a=0,s=0;s<13;s++){var i=r.charAt(s+n).charCodeAt(0)-48;a+=s&1?i:3*i}a=10-a%10,a===10&&(a=0),r.append(a)},e.GTIN_SIZE=40,e}(ere),C3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_3e=function(t){C3e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new _n;r.append("(01)");var n=r.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return r.append(a),this.encodeCompressedGtinWithoutAI(r,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(Bd),E3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),S3e=function(t){E3e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new _n;return this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(ere),I3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),aE=function(t){I3e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedWeight=function(r,n,a){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(n,a);this.addWeightCode(r,s);for(var i=this.checkWeight(s),l=1e5,c=0;c<5;++c)i/l===0&&r.append("0"),l/=10;r.append(i)},e}(Bd),j3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tre=function(t){j3e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+aE.GTIN_SIZE+e.WEIGHT_SIZE)throw new qt;var r=new _n;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+aE.GTIN_SIZE,e.WEIGHT_SIZE),r.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(aE),P3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),B3e=function(t){P3e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){r.append("(3103)")},e.prototype.checkWeight=function(r){return r},e}(tre),T3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),k3e=function(t){T3e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){n<1e4?r.append("(3202)"):r.append("(3203)")},e.prototype.checkWeight=function(r){return r<1e4?r:r-1e4},e}(tre),F3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),O3e=function(t){F3e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Bd.GTIN_SIZE)throw new qt;var r=new _n;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Bd.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(392"),r.append(n),r.append(")");var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Bd.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return r.append(a.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(Bd),D3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),R3e=function(t){D3e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Bd.GTIN_SIZE)throw new qt;var r=new _n;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Bd.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(393"),r.append(n),r.append(")");var a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Bd.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);a/100===0&&r.append("0"),a/10===0&&r.append("0"),r.append(a);var s=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Bd.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return r.append(s.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(Bd),M3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xh=function(t){M3e(e,t);function e(r,n,a){var s=t.call(this,r)||this;return s.dateCode=a,s.firstAIdigits=n,s}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new qt;var r=new _n;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(r,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),r.toString()},e.prototype.encodeCompressedDate=function(r,n){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(a!==38400){r.append("("),r.append(this.dateCode),r.append(")");var s=a%32;a/=32;var i=a%12+1;a/=12;var l=a;l/10===0&&r.append("0"),r.append(l),i/10===0&&r.append("0"),r.append(i),s/10===0&&r.append("0"),r.append(s)}},e.prototype.addWeightCode=function(r,n){r.append("("),r.append(this.firstAIdigits),r.append(n/1e5),r.append(")")},e.prototype.checkWeight=function(r){return r%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(aE);function L3e(t){try{if(t.get(1))return new _3e(t);if(!t.get(2))return new S3e(t);var e=nE.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new B3e(t);case 5:return new k3e(t)}var r=nE.extractNumericValueFromBitArray(t,1,5);switch(r){case 12:return new O3e(t);case 13:return new R3e(t)}var n=nE.extractNumericValueFromBitArray(t,1,7);switch(n){case 56:return new Xh(t,"310","11");case 57:return new Xh(t,"320","11");case 58:return new Xh(t,"310","13");case 59:return new Xh(t,"320","13");case 60:return new Xh(t,"310","15");case 61:return new Xh(t,"320","15");case 62:return new Xh(t,"310","17");case 63:return new Xh(t,"320","17")}}catch(a){throw console.log(a),new _w("unknown decoder: "+t)}}var DV=function(){function t(e,r,n,a){this.leftchar=e,this.rightchar=r,this.finderpattern=n,this.maybeLast=a}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,r){return e instanceof t?t.equalsOrNull(e.leftchar,r.leftchar)&&t.equalsOrNull(e.rightchar,r.rightchar)&&t.equalsOrNull(e.finderpattern,r.finderpattern):!1},t.equalsOrNull=function(e,r){return e===null?r===null:t.equals(e,r)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t}(),U3e=function(){function t(e,r,n){this.pairs=e,this.rowNumber=r,this.wasReversed=n}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,r){return e instanceof t?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1},t.prototype.checkEqualitity=function(e,r){if(!(!e||!r)){var n;return e.forEach(function(a,s){r.forEach(function(i){a.getLeftChar().getValue()===i.getLeftChar().getValue()&&a.getRightChar().getValue()===i.getRightChar().getValue()&&a.getFinderPatter().getValue()===i.getFinderPatter().getValue()&&(n=!0)})}),n}},t}(),Q3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yh=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},V3e=function(t){Q3e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.pairs=new Array(e.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}return e.prototype.decodeRow=function(r,n,a){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(r,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(r,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(r,n){for(var a=!1;!a;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,r))}catch(l){if(l instanceof qt){if(!this.pairs.length)throw new qt;a=!0}}if(this.checkChecksum())return this.pairs;var s;if(this.rows.length?s=!0:s=!1,this.storeRow(r,!1),s){var i=this.checkRowsBoolean(!1);if(i!=null||(i=this.checkRowsBoolean(!0),i!=null))return i}throw new qt},e.prototype.checkRowsBoolean=function(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(a){console.log(a)}return r&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(r,n){for(var a,s,i=n;i<this.rows.length;i++){var l=this.rows[i];this.pairs.length=0;try{for(var c=(a=void 0,Yh(r)),u=c.next();!u.done;u=c.next()){var d=u.value;this.pairs.push(d.getPairs())}}catch(h){a={error:h}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}if(this.pairs.push(l.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var f=new Array(r);f.push(l);try{return this.checkRows(f,i+1)}catch(h){console.log(h)}}}throw new qt},e.isValidSequence=function(r){var n,a;try{for(var s=Yh(e.FINDER_PATTERN_SEQUENCES),i=s.next();!i.done;i=s.next()){var l=i.value;if(!(r.length>l.length)){for(var c=!0,u=0;u<r.length;u++)if(r[u].getFinderPattern().getValue()!==l[u]){c=!1;break}if(c)return!0}}}catch(d){n={error:d}}finally{try{i&&!i.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(r,n){for(var a=0,s=!1,i=!1;a<this.rows.length;){var l=this.rows[a];if(l.getRowNumber()>r){i=l.isEquivalent(this.pairs);break}s=l.isEquivalent(this.pairs),a++}i||s||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new U3e(this.pairs,r,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(r,n){var a,s,i,l,c,u;try{for(var d=Yh(n),f=d.next();!f.done;f=d.next()){var h=f.value;if(h.getPairs().length!==r.length){var A=!0;try{for(var m=(i=void 0,Yh(h.getPairs())),p=m.next();!p.done;p=m.next()){var g=p.value,x=!1;try{for(var y=(c=void 0,Yh(r)),b=y.next();!b.done;b=y.next()){var w=b.value;if(DV.equals(g,w)){x=!0;break}}}catch(j){c={error:j}}finally{try{b&&!b.done&&(u=y.return)&&u.call(y)}finally{if(c)throw c.error}}x||(A=!1)}}catch(j){i={error:j}}finally{try{p&&!p.done&&(l=m.return)&&l.call(m)}finally{if(i)throw i.error}}}}}catch(j){a={error:j}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}},e.isPartialRow=function(r,n){var a,s,i,l,c,u;try{for(var d=Yh(n),f=d.next();!f.done;f=d.next()){var h=f.value,A=!0;try{for(var m=(i=void 0,Yh(r)),p=m.next();!p.done;p=m.next()){var g=p.value,x=!1;try{for(var y=(c=void 0,Yh(h.getPairs())),b=y.next();!b.done;b=y.next()){var w=b.value;if(g.equals(w)){x=!0;break}}}catch(j){c={error:j}}finally{try{b&&!b.done&&(u=y.return)&&u.call(y)}finally{if(c)throw c.error}}if(!x){A=!1;break}}}catch(j){i={error:j}}finally{try{p&&!p.done&&(l=m.return)&&l.call(m)}finally{if(i)throw i.error}}if(A)return!0}}catch(j){a={error:j}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(r){var n=x3e.buildBitArray(r),a=L3e(n),s=a.parseInformation(),i=r[0].getFinderPattern().getResultPoints(),l=r[r.length-1].getFinderPattern().getResultPoints(),c=[i[0],i[1],l[0],l[1]];return new Fl(s,null,null,c,Xr.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var r=this.pairs.get(0),n=r.getLeftChar(),a=r.getRightChar();if(a===null)return!1;for(var s=a.getChecksumPortion(),i=2,l=1;l<this.pairs.size();++l){var c=this.pairs.get(l);s+=c.getLeftChar().getChecksumPortion(),i++;var u=c.getRightChar();u!=null&&(s+=u.getChecksumPortion(),i++)}s%=211;var d=211*(i-4)+s;return d===n.getValue()},e.getNextSecondBar=function(r,n){var a;return r.get(n)?(a=r.getNextUnset(n),a=r.getNextSet(a)):(a=r.getNextSet(n),a=r.getNextUnset(a)),a},e.prototype.retrieveNextPair=function(r,n,a){var s=n.length%2===0;this.startFromEven&&(s=!s);var i,l=!0,c=-1;do this.findNextPair(r,n,c),i=this.parseFoundFinderPattern(r,a,s),i===null?c=e.getNextSecondBar(r,this.startEnd[0]):l=!1;while(l);var u=this.decodeDataCharacter(r,i,s,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new qt;var d;try{d=this.decodeDataCharacter(r,i,s,!1)}catch(f){d=null,console.log(f)}return new DV(u,d,i,!0)},e.prototype.isEmptyPair=function(r){return r.length===0},e.prototype.findNextPair=function(r,n,a){var s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;var i=r.getSize(),l;if(a>=0)l=a;else if(this.isEmptyPair(n))l=0;else{var c=n[n.length-1];l=c.getFinderPattern().getStartEnd()[1]}var u=n.length%2!==0;this.startFromEven&&(u=!u);for(var d=!1;l<i&&(d=!r.get(l),!!d);)l++;for(var f=0,h=l,A=l;A<i;A++)if(r.get(A)!==d)s[f]++;else{if(f===3){if(u&&e.reverseCounters(s),e.isFinderPattern(s)){this.startEnd[0]=h,this.startEnd[1]=A;return}u&&e.reverseCounters(s),h+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,f--}else f++;s[f]=1,d=!d}throw new qt},e.reverseCounters=function(r){for(var n=r.length,a=0;a<n/2;++a){var s=r[a];r[a]=r[n-a-1],r[n-a-1]=s}},e.prototype.parseFoundFinderPattern=function(r,n,a){var s,i,l;if(a){for(var c=this.startEnd[0]-1;c>=0&&!r.get(c);)c--;c++,s=this.startEnd[0]-c,i=c,l=this.startEnd[1]}else i=this.startEnd[0],l=r.getNextUnset(this.startEnd[1]+1),s=l-this.startEnd[1];var u=this.getDecodeFinderCounters();Ga.arraycopy(u,0,u,1,u.length-1),u[0]=s;var d;try{d=this.parseFinderValue(u,e.FINDER_PATTERNS)}catch{return null}return new Zte(d,[i,l],i,l,n)},e.prototype.decodeDataCharacter=function(r,n,a,s){for(var i=this.getDataCharacterCounters(),l=0;l<i.length;l++)i[l]=0;if(s)e.recordPatternInReverse(r,n.getStartEnd()[0],i);else{e.recordPattern(r,n.getStartEnd()[1],i);for(var c=0,u=i.length-1;c<u;c++,u--){var d=i[c];i[c]=i[u],i[u]=d}}var f=17,h=Zn.sum(new Int32Array(i))/f,A=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(h-A)/A>.3)throw new qt;for(var m=this.getOddCounts(),p=this.getEvenCounts(),g=this.getOddRoundingErrors(),x=this.getEvenRoundingErrors(),c=0;c<i.length;c++){var y=1*i[c]/h,b=y+.5;if(b<1){if(y<.3)throw new qt;b=1}else if(b>8){if(y>8.7)throw new qt;b=8}var w=c/2;c&1?(p[w]=b,x[w]=y-b):(m[w]=b,g[w]=y-b)}this.adjustOddEvenCounts(f);for(var j=4*n.getValue()+(a?0:2)+(s?0:1)-1,I=0,_=0,c=m.length-1;c>=0;c--){if(e.isNotA1left(n,a,s)){var S=e.WEIGHTS[j][2*c];_+=m[c]*S}I+=m[c]}for(var E=0,c=p.length-1;c>=0;c--)if(e.isNotA1left(n,a,s)){var S=e.WEIGHTS[j][2*c+1];E+=p[c]*S}var k=_+E;if(I&1||I>13||I<4)throw new qt;var P=(13-I)/2,T=e.SYMBOL_WIDEST[P],O=9-T,W=Mx.getRSSvalue(m,T,!0),Ae=Mx.getRSSvalue(p,O,!1),de=e.EVEN_TOTAL_SUBSET[P],fe=e.GSUM[P],ge=W*de+Ae+fe;return new yS(ge,k)},e.isNotA1left=function(r,n,a){return!(r.getValue()===0&&n&&a)},e.prototype.adjustOddEvenCounts=function(r){var n=Zn.sum(new Int32Array(this.getOddCounts())),a=Zn.sum(new Int32Array(this.getEvenCounts())),s=!1,i=!1;n>13?i=!0:n<4&&(s=!0);var l=!1,c=!1;a>13?c=!0:a<4&&(l=!0);var u=n+a-r,d=(n&1)===1,f=(a&1)===0;if(u===1)if(d){if(f)throw new qt;i=!0}else{if(!f)throw new qt;c=!0}else if(u===-1)if(d){if(f)throw new qt;s=!0}else{if(!f)throw new qt;l=!0}else if(u===0){if(d){if(!f)throw new qt;n<a?(s=!0,c=!0):(i=!0,l=!0)}else if(f)throw new qt}else throw new qt;if(s){if(i)throw new qt;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(c)throw new qt;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Gm),H3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$3e=function(t){H3e(e,t);function e(r,n,a){var s=t.call(this,r,n)||this;return s.count=0,s.finderPattern=a,s}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(yS),G3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tP=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RV=function(t){G3e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.possibleLeftPairs=[],r.possibleRightPairs=[],r}return e.prototype.decodeRow=function(r,n,a){var s,i,l,c,u=this.decodePair(n,!1,r,a);e.addOrTally(this.possibleLeftPairs,u),n.reverse();var d=this.decodePair(n,!0,r,a);e.addOrTally(this.possibleRightPairs,d),n.reverse();try{for(var f=tP(this.possibleLeftPairs),h=f.next();!h.done;h=f.next()){var A=h.value;if(A.getCount()>1)try{for(var m=(l=void 0,tP(this.possibleRightPairs)),p=m.next();!p.done;p=m.next()){var g=p.value;if(g.getCount()>1&&e.checkChecksum(A,g))return e.constructResult(A,g)}}catch(x){l={error:x}}finally{try{p&&!p.done&&(c=m.return)&&c.call(m)}finally{if(l)throw l.error}}}}catch(x){s={error:x}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(s)throw s.error}}throw new qt},e.addOrTally=function(r,n){var a,s;if(n!=null){var i=!1;try{for(var l=tP(r),c=l.next();!c.done;c=l.next()){var u=c.value;if(u.getValue()===n.getValue()){u.incrementCount(),i=!0;break}}}catch(d){a={error:d}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}i||r.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(r,n){for(var a=4537077*r.getValue()+n.getValue(),s=new String(a).toString(),i=new _n,l=13-s.length;l>0;l--)i.append("0");i.append(s);for(var c=0,l=0;l<13;l++){var u=i.charAt(l).charCodeAt(0)-48;c+=l&1?u:3*u}c=10-c%10,c===10&&(c=0),i.append(c.toString());var d=r.getFinderPattern().getResultPoints(),f=n.getFinderPattern().getResultPoints();return new Fl(i.toString(),null,0,[d[0],d[1],f[0],f[1]],Xr.RSS_14,new Date().getTime())},e.checkChecksum=function(r,n){var a=(r.getChecksumPortion()+16*n.getChecksumPortion())%79,s=9*r.getFinderPattern().getValue()+n.getFinderPattern().getValue();return s>72&&s--,s>8&&s--,a===s},e.prototype.decodePair=function(r,n,a,s){try{var i=this.findFinderPattern(r,n),l=this.parseFoundFinderPattern(r,a,n,i),c=s==null?null:s.get(Ka.NEED_RESULT_POINT_CALLBACK);if(c!=null){var u=(i[0]+i[1])/2;n&&(u=r.getSize()-1-u),c.foundPossibleResultPoint(new Lr(u,a))}var d=this.decodeDataCharacter(r,l,!0),f=this.decodeDataCharacter(r,l,!1);return new $3e(1597*d.getValue()+f.getValue(),d.getChecksumPortion()+4*f.getChecksumPortion(),l)}catch{return null}},e.prototype.decodeDataCharacter=function(r,n,a){for(var s=this.getDataCharacterCounters(),i=0;i<s.length;i++)s[i]=0;if(a)to.recordPatternInReverse(r,n.getStartEnd()[0],s);else{to.recordPattern(r,n.getStartEnd()[1]+1,s);for(var l=0,c=s.length-1;l<c;l++,c--){var u=s[l];s[l]=s[c],s[c]=u}}for(var d=a?16:15,f=Zn.sum(new Int32Array(s))/d,h=this.getOddCounts(),A=this.getEvenCounts(),m=this.getOddRoundingErrors(),p=this.getEvenRoundingErrors(),l=0;l<s.length;l++){var g=s[l]/f,x=Math.floor(g+.5);x<1?x=1:x>8&&(x=8);var y=Math.floor(l/2);l&1?(A[y]=x,p[y]=g-x):(h[y]=x,m[y]=g-x)}this.adjustOddEvenCounts(a,d);for(var b=0,w=0,l=h.length-1;l>=0;l--)w*=9,w+=h[l],b+=h[l];for(var j=0,I=0,l=A.length-1;l>=0;l--)j*=9,j+=A[l],I+=A[l];var _=w+3*j;if(a){if(b&1||b>12||b<4)throw new qt;var S=(12-b)/2,E=e.OUTSIDE_ODD_WIDEST[S],k=9-E,P=Mx.getRSSvalue(h,E,!1),T=Mx.getRSSvalue(A,k,!0),O=e.OUTSIDE_EVEN_TOTAL_SUBSET[S],W=e.OUTSIDE_GSUM[S];return new yS(P*O+T+W,_)}else{if(I&1||I>10||I<4)throw new qt;var S=(10-I)/2,E=e.INSIDE_ODD_WIDEST[S],k=9-E,P=Mx.getRSSvalue(h,E,!0),T=Mx.getRSSvalue(A,k,!1),Ae=e.INSIDE_ODD_TOTAL_SUBSET[S],W=e.INSIDE_GSUM[S];return new yS(T*Ae+P+W,_)}},e.prototype.findFinderPattern=function(r,n){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=r.getSize(),i=!1,l=0;l<s&&(i=!r.get(l),n!==i);)l++;for(var c=0,u=l,d=l;d<s;d++)if(r.get(d)!==i)a[c]++;else{if(c===3){if(Gm.isFinderPattern(a))return[u,d];u+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,c--}else c++;a[c]=1,i=!i}throw new qt},e.prototype.parseFoundFinderPattern=function(r,n,a,s){for(var i=r.get(s[0]),l=s[0]-1;l>=0&&i!==r.get(l);)l--;l++;var c=s[0]-l,u=this.getDecodeFinderCounters(),d=new Int32Array(u.length);Ga.arraycopy(u,0,d,1,u.length-1),d[0]=c;var f=this.parseFinderValue(d,e.FINDER_PATTERNS),h=l,A=s[1];return a&&(h=r.getSize()-1-h,A=r.getSize()-1-A),new Zte(f,[l,s[1]],h,A,n)},e.prototype.adjustOddEvenCounts=function(r,n){var a=Zn.sum(new Int32Array(this.getOddCounts())),s=Zn.sum(new Int32Array(this.getEvenCounts())),i=!1,l=!1,c=!1,u=!1;r?(a>12?l=!0:a<4&&(i=!0),s>12?u=!0:s<4&&(c=!0)):(a>11?l=!0:a<5&&(i=!0),s>10?u=!0:s<4&&(c=!0));var d=a+s-n,f=(a&1)===(r?1:0),h=(s&1)===1;if(d===1)if(f){if(h)throw new qt;l=!0}else{if(!h)throw new qt;u=!0}else if(d===-1)if(f){if(h)throw new qt;i=!0}else{if(!h)throw new qt;c=!0}else if(d===0){if(f){if(!h)throw new qt;a<s?(i=!0,u=!0):(l=!0,c=!0)}else if(h)throw new qt}else throw new qt;if(i){if(l)throw new qt;Gm.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&Gm.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(u)throw new qt;Gm.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&Gm.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Gm),K3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Lx=function(t){K3e(e,t);function e(r){var n=t.call(this)||this;n.readers=[];var a=r?r.get(Ka.POSSIBLE_FORMATS):null,s=r&&r.get(Ka.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,i=r&&r.get(Ka.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return a&&((a.includes(Xr.EAN_13)||a.includes(Xr.UPC_A)||a.includes(Xr.EAN_8)||a.includes(Xr.UPC_E))&&n.readers.push(new eP(r)),a.includes(Xr.CODE_39)&&n.readers.push(new SV(s,i)),a.includes(Xr.CODE_93)&&n.readers.push(new IV),a.includes(Xr.CODE_128)&&n.readers.push(new EV),a.includes(Xr.ITF)&&n.readers.push(new jV),a.includes(Xr.CODABAR)&&n.readers.push(new h3e),a.includes(Xr.RSS_14)&&n.readers.push(new RV),a.includes(Xr.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new V3e))),n.readers.length===0&&(n.readers.push(new eP(r)),n.readers.push(new SV),n.readers.push(new IV),n.readers.push(new eP(r)),n.readers.push(new EV),n.readers.push(new jV),n.readers.push(new RV)),n}return e.prototype.decodeRow=function(r,n,a){for(var s=0;s<this.readers.length;s++)try{return this.readers[s].decodeRow(r,n,a)}catch{}throw new qt},e.prototype.reset=function(){this.readers.forEach(function(r){return r.reset()})},e}(to),q3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){q3e(e,t);function e(r,n){return r===void 0&&(r=500),t.call(this,new Lx(n),r,n)||this}return e})(a1);var MV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ua=function(){function t(e,r,n){this.ecCodewords=e,this.ecBlocks=[r],n&&this.ecBlocks.push(n)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),aa=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),z3e=function(){function t(e,r,n,a,s,i){var l,c;this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=n,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=s,this.ecBlocks=i;var u=0,d=i.getECCodewords(),f=i.getECBlocks();try{for(var h=MV(f),A=h.next();!A.done;A=h.next()){var m=A.value;u+=m.getCount()*(m.getDataCodewords()+d)}}catch(p){l={error:p}}finally{try{A&&!A.done&&(c=h.return)&&c.call(h)}finally{if(l)throw l.error}}this.totalCodewords=u}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,r){var n,a;if(e&1||r&1)throw new yr;try{for(var s=MV(t.VERSIONS),i=s.next();!i.done;i=s.next()){var l=i.value;if(l.symbolSizeRows===e&&l.symbolSizeColumns===r)return l}}catch(c){n={error:c}}finally{try{i&&!i.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}throw new yr},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new ua(5,new aa(1,3))),new t(2,12,12,10,10,new ua(7,new aa(1,5))),new t(3,14,14,12,12,new ua(10,new aa(1,8))),new t(4,16,16,14,14,new ua(12,new aa(1,12))),new t(5,18,18,16,16,new ua(14,new aa(1,18))),new t(6,20,20,18,18,new ua(18,new aa(1,22))),new t(7,22,22,20,20,new ua(20,new aa(1,30))),new t(8,24,24,22,22,new ua(24,new aa(1,36))),new t(9,26,26,24,24,new ua(28,new aa(1,44))),new t(10,32,32,14,14,new ua(36,new aa(1,62))),new t(11,36,36,16,16,new ua(42,new aa(1,86))),new t(12,40,40,18,18,new ua(48,new aa(1,114))),new t(13,44,44,20,20,new ua(56,new aa(1,144))),new t(14,48,48,22,22,new ua(68,new aa(1,174))),new t(15,52,52,24,24,new ua(42,new aa(2,102))),new t(16,64,64,14,14,new ua(56,new aa(2,140))),new t(17,72,72,16,16,new ua(36,new aa(4,92))),new t(18,80,80,18,18,new ua(48,new aa(4,114))),new t(19,88,88,20,20,new ua(56,new aa(4,144))),new t(20,96,96,22,22,new ua(68,new aa(4,174))),new t(21,104,104,24,24,new ua(56,new aa(6,136))),new t(22,120,120,18,18,new ua(68,new aa(6,175))),new t(23,132,132,20,20,new ua(62,new aa(8,163))),new t(24,144,144,22,22,new ua(62,new aa(8,156),new aa(2,155))),new t(25,8,18,6,16,new ua(7,new aa(1,5))),new t(26,8,32,6,14,new ua(11,new aa(1,10))),new t(27,12,26,10,24,new ua(14,new aa(1,16))),new t(28,12,36,10,16,new ua(18,new aa(1,22))),new t(29,16,36,14,16,new ua(24,new aa(1,32))),new t(30,16,48,14,22,new ua(28,new aa(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),W3e=function(){function t(e){var r=e.getHeight();if(r<8||r>144||r&1)throw new yr;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Uf(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var r=e.getHeight(),n=e.getWidth();return z3e.getVersionForDimensions(r,n)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),r=0,n=4,a=0,s=this.mappingBitMatrix.getHeight(),i=this.mappingBitMatrix.getWidth(),l=!1,c=!1,u=!1,d=!1;do if(n===s&&a===0&&!l)e[r++]=this.readCorner1(s,i)&255,n-=2,a+=2,l=!0;else if(n===s-2&&a===0&&i&3&&!c)e[r++]=this.readCorner2(s,i)&255,n-=2,a+=2,c=!0;else if(n===s+4&&a===2&&!(i&7)&&!u)e[r++]=this.readCorner3(s,i)&255,n-=2,a+=2,u=!0;else if(n===s-2&&a===0&&(i&7)===4&&!d)e[r++]=this.readCorner4(s,i)&255,n-=2,a+=2,d=!0;else{do n<s&&a>=0&&!this.readMappingMatrix.get(a,n)&&(e[r++]=this.readUtah(n,a,s,i)&255),n-=2,a+=2;while(n>=0&&a<i);n+=1,a+=3;do n>=0&&a<i&&!this.readMappingMatrix.get(a,n)&&(e[r++]=this.readUtah(n,a,s,i)&255),n+=2,a-=2;while(n<s&&a>=0);n+=3,a+=1}while(n<s||a<i);if(r!==this.version.getTotalCodewords())throw new yr;return e},t.prototype.readModule=function(e,r,n,a){return e<0&&(e+=n,r+=4-(n+4&7)),r<0&&(r+=a,e+=4-(a+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)},t.prototype.readUtah=function(e,r,n,a){var s=0;return this.readModule(e-2,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e-2,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r,n,a)&&(s|=1),s<<=1,this.readModule(e,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e,r,n,a)&&(s|=1),s},t.prototype.readCorner1=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,1,e,r)&&(n|=1),n<<=1,this.readModule(e-1,2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.readCorner2=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-4,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner3=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-3,e,r)&&(n|=1),n<<=1,this.readModule(1,r-2,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner4=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.extractDataRegion=function(e){var r=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new Yr("Dimension of bitMatrix must match the version size");for(var a=this.version.getDataRegionSizeRows(),s=this.version.getDataRegionSizeColumns(),i=r/a|0,l=n/s|0,c=i*a,u=l*s,d=new Uf(u,c),f=0;f<i;++f)for(var h=f*a,A=0;A<l;++A)for(var m=A*s,p=0;p<a;++p)for(var g=f*(a+2)+1+p,x=h+p,y=0;y<s;++y){var b=A*(s+2)+1+y;if(e.get(b,g)){var w=m+y;d.set(w,x)}}return d},t}(),LV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},X3e=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r){var n,a,s,i,l=r.getECBlocks(),c=0,u=l.getECBlocks();try{for(var d=LV(u),f=d.next();!f.done;f=d.next()){var h=f.value;c+=h.getCount()}}catch(W){n={error:W}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}var A=new Array(c),m=0;try{for(var p=LV(u),g=p.next();!g.done;g=p.next())for(var h=g.value,x=0;x<h.getCount();x++){var y=h.getDataCodewords(),b=l.getECCodewords()+y;A[m++]=new t(y,new Uint8Array(b))}}catch(W){s={error:W}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(s)throw s.error}}for(var w=A[0].codewords.length,j=w-l.getECCodewords(),I=j-1,_=0,x=0;x<I;x++)for(var S=0;S<m;S++)A[S].codewords[x]=e[_++];for(var E=r.getVersionNumber()===24,k=E?8:m,S=0;S<k;S++)A[S].codewords[j-1]=e[_++];for(var P=A[0].codewords.length,x=j;x<P;x++)for(var S=0;S<m;S++){var T=E?(S+8)%m:S,O=E&&T>7?x-1:x;A[T].codewords[O]=e[_++]}if(_!==e.length)throw new Yr;return A},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),rre=function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Yr(""+e);var r=0,n=this.bitOffset,a=this.byteOffset,s=this.bytes;if(n>0){var i=8-n,l=e<i?e:i,c=i-l,u=255>>8-l<<c;r=(s[a]&u)>>c,e-=l,n+=l,n===8&&(n=0,a++)}if(e>0){for(;e>=8;)r=r<<8|s[a]&255,a++,e-=8;if(e>0){var c=8-e,u=255>>c<<c;r=r<<e|(s[a]&u)>>c,n+=e}}return this.bitOffset=n,this.byteOffset=a,r},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}(),Vi;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(Vi||(Vi={}));var Y3e=function(){function t(){}return t.decode=function(e){var r=new rre(e),n=new _n,a=new _n,s=new Array,i=Vi.ASCII_ENCODE;do if(i===Vi.ASCII_ENCODE)i=this.decodeAsciiSegment(r,n,a);else{switch(i){case Vi.C40_ENCODE:this.decodeC40Segment(r,n);break;case Vi.TEXT_ENCODE:this.decodeTextSegment(r,n);break;case Vi.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,n);break;case Vi.EDIFACT_ENCODE:this.decodeEdifactSegment(r,n);break;case Vi.BASE256_ENCODE:this.decodeBase256Segment(r,n,s);break;default:throw new yr}i=Vi.ASCII_ENCODE}while(i!==Vi.PAD_ENCODE&&r.available()>0);return a.length()>0&&n.append(a.toString()),new M4(e,n.toString(),s.length===0?null:s,null)},t.decodeAsciiSegment=function(e,r,n){var a=!1;do{var s=e.readBits(8);if(s===0)throw new yr;if(s<=128)return a&&(s+=128),r.append(String.fromCharCode(s-1)),Vi.ASCII_ENCODE;if(s===129)return Vi.PAD_ENCODE;if(s<=229){var i=s-130;i<10&&r.append("0"),r.append(""+i)}else switch(s){case 230:return Vi.C40_ENCODE;case 231:return Vi.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:r.append("[)>05"),n.insert(0,"");break;case 237:r.append("[)>06"),n.insert(0,"");break;case 238:return Vi.ANSIX12_ENCODE;case 239:return Vi.TEXT_ENCODE;case 240:return Vi.EDIFACT_ENCODE;case 241:break;default:if(s!==254||e.available()!==0)throw new yr;break}}while(e.available()>0);return Vi.ASCII_ENCODE},t.decodeC40Segment=function(e,r){var n=!1,a=[],s=0;do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),a);for(var l=0;l<3;l++){var c=a[l];switch(s){case 0:if(c<3)s=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var u=this.C40_BASIC_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new yr;break;case 1:n?(r.append(String.fromCharCode(c+128)),n=!1):r.append(String.fromCharCode(c)),s=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var u=this.C40_SHIFT2_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(c){case 27:r.append("");break;case 30:n=!0;break;default:throw new yr}s=0;break;case 3:n?(r.append(String.fromCharCode(c+224)),n=!1):r.append(String.fromCharCode(c+96)),s=0;break;default:throw new yr}}}while(e.available()>0)},t.decodeTextSegment=function(e,r){var n=!1,a=[],s=0;do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),a);for(var l=0;l<3;l++){var c=a[l];switch(s){case 0:if(c<3)s=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var u=this.TEXT_BASIC_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new yr;break;case 1:n?(r.append(String.fromCharCode(c+128)),n=!1):r.append(String.fromCharCode(c)),s=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var u=this.TEXT_SHIFT2_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(c){case 27:r.append("");break;case 30:n=!0;break;default:throw new yr}s=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var u=this.TEXT_SHIFT3_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u),s=0}else throw new yr;break;default:throw new yr}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,r){var n=[];do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),n);for(var s=0;s<3;s++){var i=n[s];switch(i){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(i<14)r.append(String.fromCharCode(i+44));else if(i<40)r.append(String.fromCharCode(i+51));else throw new yr;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,r,n){var a=(e<<8)+r-1,s=Math.floor(a/1600);n[0]=s,a-=s*1600,s=Math.floor(a/40),n[1]=s,n[2]=a-s*40},t.decodeEdifactSegment=function(e,r){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var a=e.readBits(6);if(a===31){var s=8-e.getBitOffset();s!==8&&e.readBits(s);return}a&32||(a|=64),r.append(String.fromCharCode(a))}}while(e.available()>0)},t.decodeBase256Segment=function(e,r,n){var a=1+e.getByteOffset(),s=this.unrandomize255State(e.readBits(8),a++),i;if(s===0?i=e.available()/8|0:s<250?i=s:i=250*(s-249)+this.unrandomize255State(e.readBits(8),a++),i<0)throw new yr;for(var l=new Uint8Array(i),c=0;c<i;c++){if(e.available()<8)throw new yr;l[c]=this.unrandomize255State(e.readBits(8),a++)}n.push(l);try{r.append(Zu.decode(l,$n.ISO88591))}catch(u){throw new _w("Platform does not support required encoding: "+u.message)}},t.unrandomize255State=function(e,r){var n=149*r%255+1,a=e-n;return a>=0?a:a+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t}(),J3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Z3e=function(){function t(){this.rsDecoder=new L4(xc.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var r,n,a=new W3e(e),s=a.getVersion(),i=a.readCodewords(),l=X3e.getDataBlocks(i,s),c=0;try{for(var u=J3e(l),d=u.next();!d.done;d=u.next()){var f=d.value;c+=f.getNumDataCodewords()}}catch(b){r={error:b}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}for(var h=new Uint8Array(c),A=l.length,m=0;m<A;m++){var p=l[m],g=p.getCodewords(),x=p.getNumDataCodewords();this.correctErrors(g,x);for(var y=0;y<x;y++)h[y*A+m]=g[y]}return Y3e.decode(h)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new Bi}for(var a=0;a<r;a++)e[a]=n[a]},t}(),e5e=function(){function t(e){this.image=e,this.rectangleDetector=new xk(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new qt;r=this.shiftToModuleCenter(r);var n=r[0],a=r[1],s=r[2],i=r[3],l=this.transitionsBetween(n,i)+1,c=this.transitionsBetween(s,i)+1;(l&1)===1&&(l+=1),(c&1)===1&&(c+=1),4*l<7*c&&4*c<7*l&&(l=c=Math.max(l,c));var u=t.sampleGrid(this.image,n,a,s,i,l,c);return new dD(u,[n,a,s,i])},t.shiftPoint=function(e,r,n){var a=(r.getX()-e.getX())/(n+1),s=(r.getY()-e.getY())/(n+1);return new Lr(e.getX()+a,e.getY()+s)},t.moveAway=function(e,r,n){var a=e.getX(),s=e.getY();return a<r?a-=1:a+=1,s<n?s-=1:s+=1,new Lr(a,s)},t.prototype.detectSolid1=function(e){var r=e[0],n=e[1],a=e[3],s=e[2],i=this.transitionsBetween(r,n),l=this.transitionsBetween(n,a),c=this.transitionsBetween(a,s),u=this.transitionsBetween(s,r),d=i,f=[s,r,n,a];return d>l&&(d=l,f[0]=r,f[1]=n,f[2]=a,f[3]=s),d>c&&(d=c,f[0]=n,f[1]=a,f[2]=s,f[3]=r),d>u&&(f[0]=a,f[1]=s,f[2]=r,f[3]=n),f},t.prototype.detectSolid2=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],i=this.transitionsBetween(r,s),l=t.shiftPoint(n,a,(i+1)*4),c=t.shiftPoint(a,n,(i+1)*4),u=this.transitionsBetween(l,r),d=this.transitionsBetween(c,s);return u<d?(e[0]=r,e[1]=n,e[2]=a,e[3]=s):(e[0]=n,e[1]=a,e[2]=s,e[3]=r),e},t.prototype.correctTopRight=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],i=this.transitionsBetween(r,s),l=this.transitionsBetween(n,s),c=t.shiftPoint(r,n,(l+1)*4),u=t.shiftPoint(a,n,(i+1)*4);i=this.transitionsBetween(c,s),l=this.transitionsBetween(u,s);var d=new Lr(s.getX()+(a.getX()-n.getX())/(i+1),s.getY()+(a.getY()-n.getY())/(i+1)),f=new Lr(s.getX()+(r.getX()-n.getX())/(l+1),s.getY()+(r.getY()-n.getY())/(l+1));if(!this.isValid(d))return this.isValid(f)?f:null;if(!this.isValid(f))return d;var h=this.transitionsBetween(c,d)+this.transitionsBetween(u,d),A=this.transitionsBetween(c,f)+this.transitionsBetween(u,f);return h>A?d:f},t.prototype.shiftToModuleCenter=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],i=this.transitionsBetween(r,s)+1,l=this.transitionsBetween(a,s)+1,c=t.shiftPoint(r,n,l*4),u=t.shiftPoint(a,n,i*4);i=this.transitionsBetween(c,s)+1,l=this.transitionsBetween(u,s)+1,(i&1)===1&&(i+=1),(l&1)===1&&(l+=1);var d=(r.getX()+n.getX()+a.getX()+s.getX())/4,f=(r.getY()+n.getY()+a.getY()+s.getY())/4;r=t.moveAway(r,d,f),n=t.moveAway(n,d,f),a=t.moveAway(a,d,f),s=t.moveAway(s,d,f);var h,A;return c=t.shiftPoint(r,n,l*4),c=t.shiftPoint(c,s,i*4),h=t.shiftPoint(n,r,l*4),h=t.shiftPoint(h,a,i*4),u=t.shiftPoint(a,s,l*4),u=t.shiftPoint(u,n,i*4),A=t.shiftPoint(s,a,l*4),A=t.shiftPoint(A,r,i*4),[c,h,u,A]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,r,n,a,s,i,l){var c=fD.getInstance();return c.sampleGrid(e,i,l,.5,.5,i-.5,.5,i-.5,l-.5,.5,l-.5,r.getX(),r.getY(),s.getX(),s.getY(),a.getX(),a.getY(),n.getX(),n.getY())},t.prototype.transitionsBetween=function(e,r){var n=Math.trunc(e.getX()),a=Math.trunc(e.getY()),s=Math.trunc(r.getX()),i=Math.trunc(r.getY()),l=Math.abs(i-a)>Math.abs(s-n);if(l){var c=n;n=a,a=c,c=s,s=i,i=c}for(var u=Math.abs(s-n),d=Math.abs(i-a),f=-u/2,h=a<i?1:-1,A=n<s?1:-1,m=0,p=this.image.get(l?a:n,l?n:a),g=n,x=a;g!==s;g+=A){var y=this.image.get(l?x:g,l?g:x);if(y!==p&&(m++,p=y),f+=d,f>0){if(x===i)break;x+=h,f-=u}}return m},t}(),bS=function(){function t(){this.decoder=new Z3e}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n,a;if(r!=null&&r.has(Ka.PURE_BARCODE)){var s=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(s),a=t.NO_POINTS}else{var i=new e5e(e.getBlackMatrix()).detect();n=this.decoder.decode(i.getBits()),a=i.getPoints()}var l=n.getRawBytes(),c=new Fl(n.getText(),l,8*l.length,a,Xr.DATA_MATRIX,Ga.currentTimeMillis()),u=n.getByteSegments();u!=null&&c.putMetadata(tl.BYTE_SEGMENTS,u);var d=n.getECLevel();return d!=null&&c.putMetadata(tl.ERROR_CORRECTION_LEVEL,d),c},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r==null||n==null)throw new qt;var a=this.moduleSize(r,e),s=r[1],i=n[1],l=r[0],c=n[0],u=(c-l+1)/a,d=(i-s+1)/a;if(u<=0||d<=0)throw new qt;var f=a/2;s+=f,l+=f;for(var h=new Uf(u,d),A=0;A<d;A++)for(var m=s+A*a,p=0;p<u;p++)e.get(l+p*a,m)&&h.set(p,A);return h},t.moduleSize=function(e,r){for(var n=r.getWidth(),a=e[0],s=e[1];a<n&&r.get(a,s);)a++;if(a===n)throw new qt;var i=a-e[0];if(i===0)throw new qt;return i},t.NO_POINTS=[],t}(),t5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){t5e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new bS,r)||this}return e})(a1);var Ux;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(Ux||(Ux={}));var r5e=function(){function t(e,r,n){this.value=e,this.stringValue=r,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new di(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new Yr;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(Ux.L,"L",1),t.M=new t(Ux.M,"M",0),t.Q=new t(Ux.Q,"Q",3),t.H=new t(Ux.H,"H",2),t}(),n5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nre=function(){function t(e){this.errorCorrectionLevel=r5e.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,r){return Pn.bitCount(e^r)},t.decodeFormatInformation=function(e,r){var n=t.doDecodeFormatInformation(e,r);return n!==null?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,r^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,r){var n,a,s=Number.MAX_SAFE_INTEGER,i=0;try{for(var l=n5e(t.FORMAT_INFO_DECODE_LOOKUP),c=l.next();!c.done;c=l.next()){var u=c.value,d=u[0];if(d===e||d===r)return new t(u[1]);var f=t.numBitsDiffering(e,d);f<s&&(i=u[1],s=f),e!==r&&(f=t.numBitsDiffering(r,d),f<s&&(i=u[1],s=f))}}catch(h){n={error:h}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(n)throw n.error}}return s<=3?new t(i):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),a5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ot=function(){function t(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=r}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,r,n=0,a=this.ecBlocks;try{for(var s=a5e(a),i=s.next();!i.done;i=s.next()){var l=i.value;n+=l.getCount()}}catch(c){e={error:c}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),et=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),s5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wp=function(){function t(e,r){for(var n,a,s=[],i=2;i<arguments.length;i++)s[i-2]=arguments[i];this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=s;var l=0,c=s[0].getECCodewordsPerBlock(),u=s[0].getECBlocks();try{for(var d=s5e(u),f=d.next();!f.done;f=d.next()){var h=f.value;l+=h.getCount()*(h.getDataCodewords()+c)}}catch(A){n={error:A}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}this.totalCodewords=l}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new yr;try{return this.getVersionForNumber((e-17)/4)}catch{throw new yr}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new Yr;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var r=Number.MAX_SAFE_INTEGER,n=0,a=0;a<t.VERSION_DECODE_INFO.length;a++){var s=t.VERSION_DECODE_INFO[a];if(s===e)return t.getVersionForNumber(a+7);var i=nre.numBitsDiffering(e,s);i<r&&(n=a+7,r=i)}return r<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),r=new Uf(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,a=0;a<n;a++)for(var s=this.alignmentPatternCenters[a]-2,i=0;i<n;i++)a===0&&(i===0||i===n-1)||a===n-1&&i===0||r.setRegion(this.alignmentPatternCenters[i]-2,s,5,5);return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new Ot(7,new et(1,19)),new Ot(10,new et(1,16)),new Ot(13,new et(1,13)),new Ot(17,new et(1,9))),new t(2,Int32Array.from([6,18]),new Ot(10,new et(1,34)),new Ot(16,new et(1,28)),new Ot(22,new et(1,22)),new Ot(28,new et(1,16))),new t(3,Int32Array.from([6,22]),new Ot(15,new et(1,55)),new Ot(26,new et(1,44)),new Ot(18,new et(2,17)),new Ot(22,new et(2,13))),new t(4,Int32Array.from([6,26]),new Ot(20,new et(1,80)),new Ot(18,new et(2,32)),new Ot(26,new et(2,24)),new Ot(16,new et(4,9))),new t(5,Int32Array.from([6,30]),new Ot(26,new et(1,108)),new Ot(24,new et(2,43)),new Ot(18,new et(2,15),new et(2,16)),new Ot(22,new et(2,11),new et(2,12))),new t(6,Int32Array.from([6,34]),new Ot(18,new et(2,68)),new Ot(16,new et(4,27)),new Ot(24,new et(4,19)),new Ot(28,new et(4,15))),new t(7,Int32Array.from([6,22,38]),new Ot(20,new et(2,78)),new Ot(18,new et(4,31)),new Ot(18,new et(2,14),new et(4,15)),new Ot(26,new et(4,13),new et(1,14))),new t(8,Int32Array.from([6,24,42]),new Ot(24,new et(2,97)),new Ot(22,new et(2,38),new et(2,39)),new Ot(22,new et(4,18),new et(2,19)),new Ot(26,new et(4,14),new et(2,15))),new t(9,Int32Array.from([6,26,46]),new Ot(30,new et(2,116)),new Ot(22,new et(3,36),new et(2,37)),new Ot(20,new et(4,16),new et(4,17)),new Ot(24,new et(4,12),new et(4,13))),new t(10,Int32Array.from([6,28,50]),new Ot(18,new et(2,68),new et(2,69)),new Ot(26,new et(4,43),new et(1,44)),new Ot(24,new et(6,19),new et(2,20)),new Ot(28,new et(6,15),new et(2,16))),new t(11,Int32Array.from([6,30,54]),new Ot(20,new et(4,81)),new Ot(30,new et(1,50),new et(4,51)),new Ot(28,new et(4,22),new et(4,23)),new Ot(24,new et(3,12),new et(8,13))),new t(12,Int32Array.from([6,32,58]),new Ot(24,new et(2,92),new et(2,93)),new Ot(22,new et(6,36),new et(2,37)),new Ot(26,new et(4,20),new et(6,21)),new Ot(28,new et(7,14),new et(4,15))),new t(13,Int32Array.from([6,34,62]),new Ot(26,new et(4,107)),new Ot(22,new et(8,37),new et(1,38)),new Ot(24,new et(8,20),new et(4,21)),new Ot(22,new et(12,11),new et(4,12))),new t(14,Int32Array.from([6,26,46,66]),new Ot(30,new et(3,115),new et(1,116)),new Ot(24,new et(4,40),new et(5,41)),new Ot(20,new et(11,16),new et(5,17)),new Ot(24,new et(11,12),new et(5,13))),new t(15,Int32Array.from([6,26,48,70]),new Ot(22,new et(5,87),new et(1,88)),new Ot(24,new et(5,41),new et(5,42)),new Ot(30,new et(5,24),new et(7,25)),new Ot(24,new et(11,12),new et(7,13))),new t(16,Int32Array.from([6,26,50,74]),new Ot(24,new et(5,98),new et(1,99)),new Ot(28,new et(7,45),new et(3,46)),new Ot(24,new et(15,19),new et(2,20)),new Ot(30,new et(3,15),new et(13,16))),new t(17,Int32Array.from([6,30,54,78]),new Ot(28,new et(1,107),new et(5,108)),new Ot(28,new et(10,46),new et(1,47)),new Ot(28,new et(1,22),new et(15,23)),new Ot(28,new et(2,14),new et(17,15))),new t(18,Int32Array.from([6,30,56,82]),new Ot(30,new et(5,120),new et(1,121)),new Ot(26,new et(9,43),new et(4,44)),new Ot(28,new et(17,22),new et(1,23)),new Ot(28,new et(2,14),new et(19,15))),new t(19,Int32Array.from([6,30,58,86]),new Ot(28,new et(3,113),new et(4,114)),new Ot(26,new et(3,44),new et(11,45)),new Ot(26,new et(17,21),new et(4,22)),new Ot(26,new et(9,13),new et(16,14))),new t(20,Int32Array.from([6,34,62,90]),new Ot(28,new et(3,107),new et(5,108)),new Ot(26,new et(3,41),new et(13,42)),new Ot(30,new et(15,24),new et(5,25)),new Ot(28,new et(15,15),new et(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new Ot(28,new et(4,116),new et(4,117)),new Ot(26,new et(17,42)),new Ot(28,new et(17,22),new et(6,23)),new Ot(30,new et(19,16),new et(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new Ot(28,new et(2,111),new et(7,112)),new Ot(28,new et(17,46)),new Ot(30,new et(7,24),new et(16,25)),new Ot(24,new et(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new Ot(30,new et(4,121),new et(5,122)),new Ot(28,new et(4,47),new et(14,48)),new Ot(30,new et(11,24),new et(14,25)),new Ot(30,new et(16,15),new et(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new Ot(30,new et(6,117),new et(4,118)),new Ot(28,new et(6,45),new et(14,46)),new Ot(30,new et(11,24),new et(16,25)),new Ot(30,new et(30,16),new et(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new Ot(26,new et(8,106),new et(4,107)),new Ot(28,new et(8,47),new et(13,48)),new Ot(30,new et(7,24),new et(22,25)),new Ot(30,new et(22,15),new et(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new Ot(28,new et(10,114),new et(2,115)),new Ot(28,new et(19,46),new et(4,47)),new Ot(28,new et(28,22),new et(6,23)),new Ot(30,new et(33,16),new et(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new Ot(30,new et(8,122),new et(4,123)),new Ot(28,new et(22,45),new et(3,46)),new Ot(30,new et(8,23),new et(26,24)),new Ot(30,new et(12,15),new et(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new Ot(30,new et(3,117),new et(10,118)),new Ot(28,new et(3,45),new et(23,46)),new Ot(30,new et(4,24),new et(31,25)),new Ot(30,new et(11,15),new et(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new Ot(30,new et(7,116),new et(7,117)),new Ot(28,new et(21,45),new et(7,46)),new Ot(30,new et(1,23),new et(37,24)),new Ot(30,new et(19,15),new et(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new Ot(30,new et(5,115),new et(10,116)),new Ot(28,new et(19,47),new et(10,48)),new Ot(30,new et(15,24),new et(25,25)),new Ot(30,new et(23,15),new et(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new Ot(30,new et(13,115),new et(3,116)),new Ot(28,new et(2,46),new et(29,47)),new Ot(30,new et(42,24),new et(1,25)),new Ot(30,new et(23,15),new et(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new Ot(30,new et(17,115)),new Ot(28,new et(10,46),new et(23,47)),new Ot(30,new et(10,24),new et(35,25)),new Ot(30,new et(19,15),new et(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new Ot(30,new et(17,115),new et(1,116)),new Ot(28,new et(14,46),new et(21,47)),new Ot(30,new et(29,24),new et(19,25)),new Ot(30,new et(11,15),new et(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new Ot(30,new et(13,115),new et(6,116)),new Ot(28,new et(14,46),new et(23,47)),new Ot(30,new et(44,24),new et(7,25)),new Ot(30,new et(59,16),new et(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new Ot(30,new et(12,121),new et(7,122)),new Ot(28,new et(12,47),new et(26,48)),new Ot(30,new et(39,24),new et(14,25)),new Ot(30,new et(22,15),new et(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new Ot(30,new et(6,121),new et(14,122)),new Ot(28,new et(6,47),new et(34,48)),new Ot(30,new et(46,24),new et(10,25)),new Ot(30,new et(2,15),new et(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new Ot(30,new et(17,122),new et(4,123)),new Ot(28,new et(29,46),new et(14,47)),new Ot(30,new et(49,24),new et(10,25)),new Ot(30,new et(24,15),new et(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new Ot(30,new et(4,122),new et(18,123)),new Ot(28,new et(13,46),new et(32,47)),new Ot(30,new et(48,24),new et(14,25)),new Ot(30,new et(42,15),new et(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new Ot(30,new et(20,117),new et(4,118)),new Ot(28,new et(40,47),new et(7,48)),new Ot(30,new et(43,24),new et(22,25)),new Ot(30,new et(10,15),new et(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new Ot(30,new et(19,118),new et(6,119)),new Ot(28,new et(18,47),new et(31,48)),new Ot(30,new et(34,24),new et(34,25)),new Ot(30,new et(20,15),new et(61,16)))],t}(),mo;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(mo||(mo={}));var UV=function(){function t(e,r){this.value=e,this.isMasked=r}return t.prototype.unmaskBitMatrix=function(e,r){for(var n=0;n<r;n++)for(var a=0;a<r;a++)this.isMasked(n,a)&&e.flip(a,n)},t.values=new Map([[mo.DATA_MASK_000,new t(mo.DATA_MASK_000,function(e,r){return(e+r&1)===0})],[mo.DATA_MASK_001,new t(mo.DATA_MASK_001,function(e,r){return(e&1)===0})],[mo.DATA_MASK_010,new t(mo.DATA_MASK_010,function(e,r){return r%3===0})],[mo.DATA_MASK_011,new t(mo.DATA_MASK_011,function(e,r){return(e+r)%3===0})],[mo.DATA_MASK_100,new t(mo.DATA_MASK_100,function(e,r){return(Math.floor(e/2)+Math.floor(r/3)&1)===0})],[mo.DATA_MASK_101,new t(mo.DATA_MASK_101,function(e,r){return e*r%6===0})],[mo.DATA_MASK_110,new t(mo.DATA_MASK_110,function(e,r){return e*r%6<3})],[mo.DATA_MASK_111,new t(mo.DATA_MASK_111,function(e,r){return(e+r+e*r%3&1)===0})]]),t}(),i5e=function(){function t(e){var r=e.getHeight();if(r<21||(r&3)!==1)throw new yr;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,r=0;r<6;r++)e=this.copyBit(r,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var a=this.bitMatrix.getHeight(),s=0,i=a-7,n=a-1;n>=i;n--)s=this.copyBit(8,n,s);for(var r=a-8;r<a;r++)s=this.copyBit(r,8,s);if(this.parsedFormatInfo=nre.decodeFormatInformation(e,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new yr},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return wp.getVersionForNumber(r);for(var n=0,a=e-11,s=5;s>=0;s--)for(var i=e-9;i>=a;i--)n=this.copyBit(i,s,n);var l=wp.decodeVersionInformation(n);if(l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;n=0;for(var i=5;i>=0;i--)for(var s=e-9;s>=a;s--)n=this.copyBit(i,s,n);if(l=wp.decodeVersionInformation(n),l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;throw new yr},t.prototype.copyBit=function(e,r,n){var a=this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r);return a?n<<1|1:n<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),r=this.readVersion(),n=UV.values.get(e.getDataMask()),a=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,a);for(var s=r.buildFunctionPattern(),i=!0,l=new Uint8Array(r.getTotalCodewords()),c=0,u=0,d=0,f=a-1;f>0;f-=2){f===6&&f--;for(var h=0;h<a;h++)for(var A=i?a-1-h:h,m=0;m<2;m++)s.get(f-m,A)||(d++,u<<=1,this.bitMatrix.get(f-m,A)&&(u|=1),d===8&&(l[c++]=u,d=0,u=0));i=!i}if(c!==r.getTotalCodewords())throw new yr;return l},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=UV.values.get(this.parsedFormatInfo.getDataMask()),r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,r=0,n=e.getWidth();r<n;r++)for(var a=r+1,s=e.getHeight();a<s;a++)e.get(r,a)!==e.get(a,r)&&(e.flip(a,r),e.flip(r,a))},t}(),QV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o5e=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r,n){var a,s,i,l;if(e.length!==r.getTotalCodewords())throw new Yr;var c=r.getECBlocksForLevel(n),u=0,d=c.getECBlocks();try{for(var f=QV(d),h=f.next();!h.done;h=f.next()){var A=h.value;u+=A.getCount()}}catch(O){a={error:O}}finally{try{h&&!h.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}var m=new Array(u),p=0;try{for(var g=QV(d),x=g.next();!x.done;x=g.next())for(var A=x.value,y=0;y<A.getCount();y++){var b=A.getDataCodewords(),w=c.getECCodewordsPerBlock()+b;m[p++]=new t(b,new Uint8Array(w))}}catch(O){i={error:O}}finally{try{x&&!x.done&&(l=g.return)&&l.call(g)}finally{if(i)throw i.error}}for(var j=m[0].codewords.length,I=m.length-1;I>=0;){var _=m[I].codewords.length;if(_===j)break;I--}I++;for(var S=j-c.getECCodewordsPerBlock(),E=0,y=0;y<S;y++)for(var k=0;k<p;k++)m[k].codewords[y]=e[E++];for(var k=I;k<p;k++)m[k].codewords[S]=e[E++];for(var P=m[0].codewords.length,y=S;y<P;y++)for(var k=0;k<p;k++){var T=k<I?y:y+1;m[k].codewords[T]=e[E++]}return m},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),Ru;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(Ru||(Ru={}));var Za=function(){function t(e,r,n,a){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=a,t.FOR_BITS.set(a,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var r=t.FOR_BITS.get(e);if(r===void 0)throw new Yr;return r},t.prototype.getCharacterCountBits=function(e){var r=e.getVersionNumber(),n;return r<=9?n=0:r<=26?n=1:n=2,this.characterCountBitsForVersions[n]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(Ru.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(Ru.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(Ru.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(Ru.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(Ru.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(Ru.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(Ru.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(Ru.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(Ru.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(Ru.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),l5e=function(){function t(){}return t.decode=function(e,r,n,a){var s=new rre(e),i=new _n,l=new Array,c=-1,u=-1;try{var d=null,f=!1,h=void 0;do{if(s.available()<4)h=Za.TERMINATOR;else{var A=s.readBits(4);h=Za.forBits(A)}switch(h){case Za.TERMINATOR:break;case Za.FNC1_FIRST_POSITION:case Za.FNC1_SECOND_POSITION:f=!0;break;case Za.STRUCTURED_APPEND:if(s.available()<16)throw new yr;c=s.readBits(8),u=s.readBits(8);break;case Za.ECI:var m=t.parseECIValue(s);if(d=Yi.getCharacterSetECIByValue(m),d===null)throw new yr;break;case Za.HANZI:var p=s.readBits(4),g=s.readBits(h.getCharacterCountBits(r));p===t.GB2312_SUBSET&&t.decodeHanziSegment(s,i,g);break;default:var x=s.readBits(h.getCharacterCountBits(r));switch(h){case Za.NUMERIC:t.decodeNumericSegment(s,i,x);break;case Za.ALPHANUMERIC:t.decodeAlphanumericSegment(s,i,x,f);break;case Za.BYTE:t.decodeByteSegment(s,i,x,d,l,a);break;case Za.KANJI:t.decodeKanjiSegment(s,i,x);break;default:throw new yr}break}}while(h!==Za.TERMINATOR)}catch{throw new yr}return new M4(e,i.toString(),l.length===0?null:l,n===null?null:n.toString(),c,u)},t.decodeHanziSegment=function(e,r,n){if(n*13>e.available())throw new yr;for(var a=new Uint8Array(2*n),s=0;n>0;){var i=e.readBits(13),l=i/96<<8&4294967295|i%96;l<959?l+=41377:l+=42657,a[s]=l>>8&255,a[s+1]=l&255,s+=2,n--}try{r.append(Zu.decode(a,$n.GB2312))}catch(c){throw new yr(c)}},t.decodeKanjiSegment=function(e,r,n){if(n*13>e.available())throw new yr;for(var a=new Uint8Array(2*n),s=0;n>0;){var i=e.readBits(13),l=i/192<<8&4294967295|i%192;l<7936?l+=33088:l+=49472,a[s]=l>>8,a[s+1]=l,s+=2,n--}try{r.append(Zu.decode(a,$n.SHIFT_JIS))}catch(c){throw new yr(c)}},t.decodeByteSegment=function(e,r,n,a,s,i){if(8*n>e.available())throw new yr;for(var l=new Uint8Array(n),c=0;c<n;c++)l[c]=e.readBits(8);var u;a===null?u=$n.guessEncoding(l,i):u=a.getName();try{r.append(Zu.decode(l,u))}catch(d){throw new yr(d)}s.push(l)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new yr;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,r,n,a){for(var s=r.length();n>1;){if(e.available()<11)throw new yr;var i=e.readBits(11);r.append(t.toAlphaNumericChar(Math.floor(i/45))),r.append(t.toAlphaNumericChar(i%45)),n-=2}if(n===1){if(e.available()<6)throw new yr;r.append(t.toAlphaNumericChar(e.readBits(6)))}if(a)for(var l=s;l<r.length();l++)r.charAt(l)==="%"&&(l<r.length()-1&&r.charAt(l+1)==="%"?r.deleteCharAt(l+1):r.setCharAt(l,""))},t.decodeNumericSegment=function(e,r,n){for(;n>=3;){if(e.available()<10)throw new yr;var a=e.readBits(10);if(a>=1e3)throw new yr;r.append(t.toAlphaNumericChar(Math.floor(a/100))),r.append(t.toAlphaNumericChar(Math.floor(a/10)%10)),r.append(t.toAlphaNumericChar(a%10)),n-=3}if(n===2){if(e.available()<7)throw new yr;var s=e.readBits(7);if(s>=100)throw new yr;r.append(t.toAlphaNumericChar(Math.floor(s/10))),r.append(t.toAlphaNumericChar(s%10))}else if(n===1){if(e.available()<4)throw new yr;var i=e.readBits(4);if(i>=10)throw new yr;r.append(t.toAlphaNumericChar(i))}},t.parseECIValue=function(e){var r=e.readBits(8);if(!(r&128))return r&127;if((r&192)===128){var n=e.readBits(8);return(r&63)<<8&4294967295|n}if((r&224)===192){var a=e.readBits(16);return(r&31)<<16&4294967295|a}throw new yr},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),are=function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var r=e[0];e[0]=e[2],e[2]=r}},t}(),VV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},c5e=function(){function t(){this.rsDecoder=new L4(xc.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,r){return this.decodeBitMatrix(Uf.parseFromBooleanArray(e),r)},t.prototype.decodeBitMatrix=function(e,r){var n=new i5e(e),a=null;try{return this.decodeBitMatrixParser(n,r)}catch(i){a=i}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var s=this.decodeBitMatrixParser(n,r);return s.setOther(new are(!0)),s}catch(i){throw a!==null?a:i}},t.prototype.decodeBitMatrixParser=function(e,r){var n,a,s,i,l=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),d=o5e.getDataBlocks(u,l,c),f=0;try{for(var h=VV(d),A=h.next();!A.done;A=h.next()){var m=A.value;f+=m.getNumDataCodewords()}}catch(I){n={error:I}}finally{try{A&&!A.done&&(a=h.return)&&a.call(h)}finally{if(n)throw n.error}}var p=new Uint8Array(f),g=0;try{for(var x=VV(d),y=x.next();!y.done;y=x.next()){var m=y.value,b=m.getCodewords(),w=m.getNumDataCodewords();this.correctErrors(b,w);for(var j=0;j<w;j++)p[g++]=b[j]}}catch(I){s={error:I}}finally{try{y&&!y.done&&(i=x.return)&&i.call(x)}finally{if(s)throw s.error}}return l5e.decode(p,l,c,r)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new Bi}for(var a=0;a<r;a++)e[a]=n[a]},t}(),u5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),d5e=function(t){u5e(e,t);function e(r,n,a){var s=t.call(this,r,n)||this;return s.estimatedModuleSize=a,s}return e.prototype.aboutEquals=function(r,n,a){if(Math.abs(n-this.getY())<=r&&Math.abs(a-this.getX())<=r){var s=Math.abs(r-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,a){var s=(this.getX()+n)/2,i=(this.getY()+r)/2,l=(this.estimatedModuleSize+a)/2;return new e(s,i,l)},e}(Lr),f5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},A5e=function(){function t(e,r,n,a,s,i,l){this.image=e,this.startX=r,this.startY=n,this.width=a,this.height=s,this.moduleSize=i,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,r=this.height,n=this.width,a=e+n,s=this.startY+r/2,i=new Int32Array(3),l=this.image,c=0;c<r;c++){var u=s+(c&1?-Math.floor((c+1)/2):Math.floor((c+1)/2));i[0]=0,i[1]=0,i[2]=0;for(var d=e;d<a&&!l.get(d,u);)d++;for(var f=0;d<a;){if(l.get(d,u))if(f===1)i[1]++;else if(f===2){if(this.foundPatternCross(i)){var h=this.handlePossibleCenter(i,u,d);if(h!==null)return h}i[0]=i[2],i[1]=1,i[2]=0,f=1}else i[++f]++;else f===1&&f++,i[f]++;d++}if(this.foundPatternCross(i)){var h=this.handlePossibleCenter(i,u,a);if(h!==null)return h}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new qt},t.centerFromEnd=function(e,r){return r-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var r=this.moduleSize,n=r/2,a=0;a<3;a++)if(Math.abs(r-e[a])>=n)return!1;return!0},t.prototype.crossCheckVertical=function(e,r,n,a){var s=this.image,i=s.getHeight(),l=this.crossCheckStateCount;l[0]=0,l[1]=0,l[2]=0;for(var c=e;c>=0&&s.get(r,c)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&!s.get(r,c)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<i&&s.get(r,c)&&l[1]<=n;)l[1]++,c++;if(c===i||l[1]>n)return NaN;for(;c<i&&!s.get(r,c)&&l[2]<=n;)l[2]++,c++;if(l[2]>n)return NaN;var u=l[0]+l[1]+l[2];return 5*Math.abs(u-a)>=2*a?NaN:this.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.handlePossibleCenter=function(e,r,n){var a,s,i=e[0]+e[1]+e[2],l=t.centerFromEnd(e,n),c=this.crossCheckVertical(r,l,2*e[1],i);if(!isNaN(c)){var u=(e[0]+e[1]+e[2])/3;try{for(var d=f5e(this.possibleCenters),f=d.next();!f.done;f=d.next()){var h=f.value;if(h.aboutEquals(u,c,l))return h.combineEstimate(c,l,u)}}catch(m){a={error:m}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}var A=new d5e(l,c,u);this.possibleCenters.push(A),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(A)}return null},t}(),h5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),m5e=function(t){h5e(e,t);function e(r,n,a,s){var i=t.call(this,r,n)||this;return i.estimatedModuleSize=a,i.count=s,s===void 0&&(i.count=1),i}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(r,n,a){if(Math.abs(n-this.getY())<=r&&Math.abs(a-this.getX())<=r){var s=Math.abs(r-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,a){var s=this.count+1,i=(this.count*this.getX()+n)/s,l=(this.count*this.getY()+r)/s,c=(this.count*this.estimatedModuleSize+a)/s;return new e(i,l,c,s)},e}(Lr),p5e=function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),oy=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},g5e=function(){function t(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var r=e!=null&&e.get(Ka.TRY_HARDER)!==void 0,n=e!=null&&e.get(Ka.PURE_BARCODE)!==void 0,a=this.image,s=a.getHeight(),i=a.getWidth(),l=Math.floor(3*s/(4*t.MAX_MODULES));(l<t.MIN_SKIP||r)&&(l=t.MIN_SKIP);for(var c=!1,u=new Int32Array(5),d=l-1;d<s&&!c;d+=l){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;for(var f=0,h=0;h<i;h++)if(a.get(h,d))(f&1)===1&&f++,u[f]++;else if(f&1)u[f]++;else if(f===4)if(t.foundPatternCross(u)){var A=this.handlePossibleCenter(u,d,h,n);if(A===!0)if(l=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var m=this.findRowSkip();m>u[2]&&(d+=m-u[2]-l,h=i-1)}else{u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;continue}f=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;else u[++f]++;if(t.foundPatternCross(u)){var A=this.handlePossibleCenter(u,d,i,n);A===!0&&(l=u[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var p=this.selectBestPatterns();return Lr.orderBestPatterns(p),new p5e(p)},t.centerFromEnd=function(e,r){return r-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var r=0,n=0;n<5;n++){var a=e[n];if(a===0)return!1;r+=a}if(r<7)return!1;var s=r/7,i=s/2;return Math.abs(s-e[0])<i&&Math.abs(s-e[1])<i&&Math.abs(3*s-e[2])<3*i&&Math.abs(s-e[3])<i&&Math.abs(s-e[4])<i},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,r,n,a){for(var s=this.getCrossCheckStateCount(),i=0,l=this.image;e>=i&&r>=i&&l.get(r-i,e-i);)s[2]++,i++;if(e<i||r<i)return!1;for(;e>=i&&r>=i&&!l.get(r-i,e-i)&&s[1]<=n;)s[1]++,i++;if(e<i||r<i||s[1]>n)return!1;for(;e>=i&&r>=i&&l.get(r-i,e-i)&&s[0]<=n;)s[0]++,i++;if(s[0]>n)return!1;var c=l.getHeight(),u=l.getWidth();for(i=1;e+i<c&&r+i<u&&l.get(r+i,e+i);)s[2]++,i++;if(e+i>=c||r+i>=u)return!1;for(;e+i<c&&r+i<u&&!l.get(r+i,e+i)&&s[3]<n;)s[3]++,i++;if(e+i>=c||r+i>=u||s[3]>=n)return!1;for(;e+i<c&&r+i<u&&l.get(r+i,e+i)&&s[4]<n;)s[4]++,i++;if(s[4]>=n)return!1;var d=s[0]+s[1]+s[2]+s[3]+s[4];return Math.abs(d-a)<2*a&&t.foundPatternCross(s)},t.prototype.crossCheckVertical=function(e,r,n,a){for(var s=this.image,i=s.getHeight(),l=this.getCrossCheckStateCount(),c=e;c>=0&&s.get(r,c);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!s.get(r,c)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&s.get(r,c)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<i&&s.get(r,c);)l[2]++,c++;if(c===i)return NaN;for(;c<i&&!s.get(r,c)&&l[3]<n;)l[3]++,c++;if(c===i||l[3]>=n)return NaN;for(;c<i&&s.get(r,c)&&l[4]<n;)l[4]++,c++;if(l[4]>=n)return NaN;var u=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(u-a)>=2*a?NaN:t.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.crossCheckHorizontal=function(e,r,n,a){for(var s=this.image,i=s.getWidth(),l=this.getCrossCheckStateCount(),c=e;c>=0&&s.get(c,r);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!s.get(c,r)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&s.get(c,r)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<i&&s.get(c,r);)l[2]++,c++;if(c===i)return NaN;for(;c<i&&!s.get(c,r)&&l[3]<n;)l[3]++,c++;if(c===i||l[3]>=n)return NaN;for(;c<i&&s.get(c,r)&&l[4]<n;)l[4]++,c++;if(l[4]>=n)return NaN;var u=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(u-a)>=a?NaN:t.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.handlePossibleCenter=function(e,r,n,a){var s=e[0]+e[1]+e[2]+e[3]+e[4],i=t.centerFromEnd(e,n),l=this.crossCheckVertical(r,Math.floor(i),e[2],s);if(!isNaN(l)&&(i=this.crossCheckHorizontal(Math.floor(i),Math.floor(l),e[2],s),!isNaN(i)&&(!a||this.crossCheckDiagonal(Math.floor(l),Math.floor(i),e[2],s)))){for(var c=s/7,u=!1,d=this.possibleCenters,f=0,h=d.length;f<h;f++){var A=d[f];if(A.aboutEquals(c,l,i)){d[f]=A.combineEstimate(l,i,c),u=!0;break}}if(!u){var m=new m5e(i,l,c);d.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return!0}return!1},t.prototype.findRowSkip=function(){var e,r,n=this.possibleCenters.length;if(n<=1)return 0;var a=null;try{for(var s=oy(this.possibleCenters),i=s.next();!i.done;i=s.next()){var l=i.value;if(l.getCount()>=t.CENTER_QUORUM)if(a==null)a=l;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-l.getX())-Math.abs(a.getY()-l.getY()))/2)}}catch(c){e={error:c}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,r,n,a,s=0,i=0,l=this.possibleCenters.length;try{for(var c=oy(this.possibleCenters),u=c.next();!u.done;u=c.next()){var d=u.value;d.getCount()>=t.CENTER_QUORUM&&(s++,i+=d.getEstimatedModuleSize())}}catch(p){e={error:p}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}if(s<3)return!1;var f=i/l,h=0;try{for(var A=oy(this.possibleCenters),m=A.next();!m.done;m=A.next()){var d=m.value;h+=Math.abs(d.getEstimatedModuleSize()-f)}}catch(p){n={error:p}}finally{try{m&&!m.done&&(a=A.return)&&a.call(A)}finally{if(n)throw n.error}}return h<=.05*i},t.prototype.selectBestPatterns=function(){var e,r,n,a,s=this.possibleCenters.length;if(s<3)throw new qt;var i=this.possibleCenters,l;if(s>3){var c=0,u=0;try{for(var d=oy(this.possibleCenters),f=d.next();!f.done;f=d.next()){var h=f.value,A=h.getEstimatedModuleSize();c+=A,u+=A*A}}catch(j){e={error:j}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}l=c/s;var m=Math.sqrt(u/s-l*l);i.sort(function(j,I){var _=Math.abs(I.getEstimatedModuleSize()-l),S=Math.abs(j.getEstimatedModuleSize()-l);return _<S?-1:_>S?1:0});for(var p=Math.max(.2*l,m),g=0;g<i.length&&i.length>3;g++){var x=i[g];Math.abs(x.getEstimatedModuleSize()-l)>p&&(i.splice(g,1),g--)}}if(i.length>3){var c=0;try{for(var y=oy(i),b=y.next();!b.done;b=y.next()){var w=b.value;c+=w.getEstimatedModuleSize()}}catch(I){n={error:I}}finally{try{b&&!b.done&&(a=y.return)&&a.call(y)}finally{if(n)throw n.error}}l=c/i.length,i.sort(function(I,_){if(_.getCount()===I.getCount()){var S=Math.abs(_.getEstimatedModuleSize()-l),E=Math.abs(I.getEstimatedModuleSize()-l);return S<E?1:S>E?-1:0}else return _.getCount()-I.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),x5e=function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Ka.NEED_RESULT_POINT_CALLBACK);var r=new g5e(this.image,this.resultPointCallback),n=r.find(e);return this.processFinderPatternInfo(n)},t.prototype.processFinderPatternInfo=function(e){var r=e.getTopLeft(),n=e.getTopRight(),a=e.getBottomLeft(),s=this.calculateModuleSize(r,n,a);if(s<1)throw new qt("No pattern found in proccess finder.");var i=t.computeDimension(r,n,a,s),l=wp.getProvisionalVersionForDimension(i),c=l.getDimensionForVersion()-7,u=null;if(l.getAlignmentPatternCenters().length>0)for(var d=n.getX()-r.getX()+a.getX(),f=n.getY()-r.getY()+a.getY(),h=1-3/c,A=Math.floor(r.getX()+h*(d-r.getX())),m=Math.floor(r.getY()+h*(f-r.getY())),p=4;p<=16;p<<=1)try{u=this.findAlignmentInRegion(s,A,m,p);break}catch(b){if(!(b instanceof qt))throw b}var g=t.createTransform(r,n,a,u,i),x=t.sampleGrid(this.image,g,i),y;return u===null?y=[a,r,n]:y=[a,r,n,u],new dD(x,y)},t.createTransform=function(e,r,n,a,s){var i=s-3.5,l,c,u,d;return a!==null?(l=a.getX(),c=a.getY(),u=i-3,d=u):(l=r.getX()-e.getX()+n.getX(),c=r.getY()-e.getY()+n.getY(),u=i,d=i),Jte.quadrilateralToQuadrilateral(3.5,3.5,i,3.5,u,d,3.5,i,e.getX(),e.getY(),r.getX(),r.getY(),l,c,n.getX(),n.getY())},t.sampleGrid=function(e,r,n){var a=fD.getInstance();return a.sampleGridWithTransform(e,n,n,r)},t.computeDimension=function(e,r,n,a){var s=Zn.round(Lr.distance(e,r)/a),i=Zn.round(Lr.distance(e,n)/a),l=Math.floor((s+i)/2)+7;switch(l&3){case 0:l++;break;case 2:l--;break;case 3:throw new qt("Dimensions could be not found.")}return l},t.prototype.calculateModuleSize=function(e,r,n){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,n))/2},t.prototype.calculateModuleSizeOneWay=function(e,r){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?a/7:isNaN(a)?n/7:(n+a)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,r,n,a){var s=this.sizeOfBlackWhiteBlackRun(e,r,n,a),i=1,l=e-(n-e);l<0?(i=e/(e-l),l=0):l>=this.image.getWidth()&&(i=(this.image.getWidth()-1-e)/(l-e),l=this.image.getWidth()-1);var c=Math.floor(r-(a-r)*i);return i=1,c<0?(i=r/(r-c),c=0):c>=this.image.getHeight()&&(i=(this.image.getHeight()-1-r)/(c-r),c=this.image.getHeight()-1),l=Math.floor(e+(l-e)*i),s+=this.sizeOfBlackWhiteBlackRun(e,r,l,c),s-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,r,n,a){var s=Math.abs(a-r)>Math.abs(n-e);if(s){var i=e;e=r,r=i,i=n,n=a,a=i}for(var l=Math.abs(n-e),c=Math.abs(a-r),u=-l/2,d=e<n?1:-1,f=r<a?1:-1,h=0,A=n+d,m=e,p=r;m!==A;m+=d){var g=s?p:m,x=s?m:p;if(h===1===this.image.get(g,x)){if(h===2)return Zn.distance(m,p,e,r);h++}if(u+=c,u>0){if(p===a)break;p+=f,u-=l}}return h===2?Zn.distance(n+d,a,e,r):NaN},t.prototype.findAlignmentInRegion=function(e,r,n,a){var s=Math.floor(a*e),i=Math.max(0,r-s),l=Math.min(this.image.getWidth()-1,r+s);if(l-i<e*3)throw new qt("Alignment top exceeds estimated module size.");var c=Math.max(0,n-s),u=Math.min(this.image.getHeight()-1,n+s);if(u-c<e*3)throw new qt("Alignment bottom exceeds estimated module size.");var d=new A5e(this.image,i,c,l-i,u-c,e,this.resultPointCallback);return d.find()},t}(),wS=function(){function t(){this.decoder=new c5e}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,r){var n,a;if(r!=null&&r.get(Ka.PURE_BARCODE)!==void 0){var s=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(s,r),a=t.NO_POINTS}else{var i=new x5e(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(i.getBits(),r),a=i.getPoints()}n.getOther()instanceof are&&n.getOther().applyMirroredCorrection(a);var l=new Fl(n.getText(),n.getRawBytes(),void 0,a,Xr.QR_CODE,void 0),c=n.getByteSegments();c!==null&&l.putMetadata(tl.BYTE_SEGMENTS,c);var u=n.getECLevel();return u!==null&&l.putMetadata(tl.ERROR_CORRECTION_LEVEL,u),n.hasStructuredAppend()&&(l.putMetadata(tl.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),l.putMetadata(tl.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),l},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r===null||n===null)throw new qt;var a=this.moduleSize(r,e),s=r[1],i=n[1],l=r[0],c=n[0];if(l>=c||s>=i)throw new qt;if(i-s!==c-l&&(c=l+(i-s),c>=e.getWidth()))throw new qt;var u=Math.round((c-l+1)/a),d=Math.round((i-s+1)/a);if(u<=0||d<=0)throw new qt;if(d!==u)throw new qt;var f=Math.floor(a/2);s+=f,l+=f;var h=l+Math.floor((u-1)*a)-c;if(h>0){if(h>f)throw new qt;l-=h}var A=s+Math.floor((d-1)*a)-i;if(A>0){if(A>f)throw new qt;s-=A}for(var m=new Uf(u,d),p=0;p<d;p++)for(var g=s+Math.floor(p*a),x=0;x<u;x++)e.get(l+Math.floor(x*a),g)&&m.set(x,p);return m},t.moduleSize=function(e,r){for(var n=r.getHeight(),a=r.getWidth(),s=e[0],i=e[1],l=!0,c=0;s<a&&i<n;){if(l!==r.get(s,i)){if(++c===5)break;l=!l}s++,i++}if(s===a||i===n)throw new qt;return(s-e[0])/7},t.NO_POINTS=new Array,t}(),v5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Kn=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return Zn.sum(e)},t.toIntArray=function(e){var r,n;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var a=new Int32Array(e.length),s=0;try{for(var i=v5e(e),l=i.next();!l.done;l=i.next()){var c=l.value;a[s++]=c}}catch(u){r={error:u}}finally{try{l&&!l.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a},t.getCodeword=function(e){var r=Ji.binarySearch(t.SYMBOL_TABLE,e&262143);return r<0?-1:(t.CODEWORD_TABLE[r]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),y5e=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),b5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},w5e=function(){function t(){}return t.detectMultiple=function(e,r,n){var a=e.getBlackMatrix(),s=t.detect(n,a);return s.length||(a=a.clone(),a.rotate180(),s=t.detect(n,a)),new y5e(a,s)},t.detect=function(e,r){for(var n,a,s=new Array,i=0,l=0,c=!1;i<r.getHeight();){var u=t.findVertices(r,i,l);if(u[0]==null&&u[3]==null){if(!c)break;c=!1,l=0;try{for(var d=(n=void 0,b5e(s)),f=d.next();!f.done;f=d.next()){var h=f.value;h[1]!=null&&(i=Math.trunc(Math.max(i,h[1].getY()))),h[3]!=null&&(i=Math.max(i,Math.trunc(h[3].getY())))}}catch(A){n={error:A}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}i+=t.ROW_STEP;continue}if(c=!0,s.push(u),!e)break;u[2]!=null?(l=Math.trunc(u[2].getX()),i=Math.trunc(u[2].getY())):(l=Math.trunc(u[4].getX()),i=Math.trunc(u[4].getY()))}return s},t.findVertices=function(e,r,n){var a=e.getHeight(),s=e.getWidth(),i=new Array(8);return t.copyToResult(i,t.findRowsWithPattern(e,a,s,r,n,t.START_PATTERN),t.INDEXES_START_PATTERN),i[4]!=null&&(n=Math.trunc(i[4].getX()),r=Math.trunc(i[4].getY())),t.copyToResult(i,t.findRowsWithPattern(e,a,s,r,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),i},t.copyToResult=function(e,r,n){for(var a=0;a<n.length;a++)e[n[a]]=r[a]},t.findRowsWithPattern=function(e,r,n,a,s,i){for(var l=new Array(4),c=!1,u=new Int32Array(i.length);a<r;a+=t.ROW_STEP){var d=t.findGuardPattern(e,s,a,n,!1,i,u);if(d!=null){for(;a>0;){var f=t.findGuardPattern(e,s,--a,n,!1,i,u);if(f!=null)d=f;else{a++;break}}l[0]=new Lr(d[0],a),l[1]=new Lr(d[1],a),c=!0;break}}var h=a+1;if(c){for(var A=0,f=Int32Array.from([Math.trunc(l[0].getX()),Math.trunc(l[1].getX())]);h<r;h++){var d=t.findGuardPattern(e,f[0],h,n,!1,i,u);if(d!=null&&Math.abs(f[0]-d[0])<t.MAX_PATTERN_DRIFT&&Math.abs(f[1]-d[1])<t.MAX_PATTERN_DRIFT)f=d,A=0;else{if(A>t.SKIPPED_ROW_COUNT_MAX)break;A++}}h-=A+1,l[2]=new Lr(f[0],h),l[3]=new Lr(f[1],h)}return h-a<t.BARCODE_MIN_HEIGHT&&Ji.fill(l,null),l},t.findGuardPattern=function(e,r,n,a,s,i,l){Ji.fillWithin(l,0,l.length,0);for(var c=r,u=0;e.get(c,n)&&c>0&&u++<t.MAX_PIXEL_DRIFT;)c--;for(var d=c,f=0,h=i.length,A=s;d<a;d++){var m=e.get(d,n);if(m!==A)l[f]++;else{if(f===h-1){if(t.patternMatchVariance(l,i,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([c,d]);c+=l[0]+l[1],Ga.arraycopy(l,2,l,0,f-1),l[f-1]=0,l[f]=0,f--}else f++;l[f]=1,A=!A}}return f===h-1&&t.patternMatchVariance(l,i,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([c,d-1]):null},t.patternMatchVariance=function(e,r,n){for(var a=e.length,s=0,i=0,l=0;l<a;l++)s+=e[l],i+=r[l];if(s<i)return 1/0;var c=s/i;n*=c;for(var u=0,d=0;d<a;d++){var f=e[d],h=r[d]*c,A=f>h?f-h:h-f;if(A>n)return 1/0;u+=A}return u/s},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),N5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},op=function(){function t(e,r){if(r.length===0)throw new Yr;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var a=1;a<n&&r[a]===0;)a++;a===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-a),Ga.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var r,n;if(e===0)return this.getCoefficient(0);if(e===1){var a=0;try{for(var s=N5e(this.coefficients),i=s.next();!i.done;i=s.next()){var l=i.value;a=this.field.add(a,l)}}catch(f){r={error:f}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a}for(var c=this.coefficients[0],u=this.coefficients.length,d=1;d<u;d++)c=this.field.add(this.field.multiply(e,c),this.coefficients[d]);return c},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new Yr("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var a=r;r=n,n=a}var s=new Int32Array(n.length),i=n.length-r.length;Ga.arraycopy(n,0,s,0,i);for(var l=i;l<n.length;l++)s[l]=this.field.add(r[l-i],n[l]);return new t(this.field,s)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Yr("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Yr("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,a=e.coefficients,s=a.length,i=new Int32Array(n+s-1),l=0;l<n;l++)for(var c=r[l],u=0;u<s;u++)i[l+u]=this.field.add(i[l+u],this.field.multiply(c,a[u]));return new t(this.field,i)},t.prototype.negative=function(){for(var e=this.coefficients.length,r=new Int32Array(e),n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,r)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var r=this.coefficients.length,n=new Int32Array(r),a=0;a<r;a++)n[a]=this.field.multiply(this.coefficients[a],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new Yr;if(r===0)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,a=new Int32Array(n+e),s=0;s<n;s++)a[s]=this.field.multiply(this.coefficients[s],r);return new t(this.field,a)},t.prototype.toString=function(){for(var e=new _n,r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(r===0||n!==1)&&e.append(n),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()},t}(),C5e=function(){function t(){}return t.prototype.add=function(e,r){return(e+r)%this.modulus},t.prototype.subtract=function(e,r){return(this.modulus+e-r)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new Yr;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new Yte;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t}(),_5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),E5e=function(t){_5e(e,t);function e(r,n){var a=t.call(this)||this;a.modulus=r,a.expTable=new Int32Array(r),a.logTable=new Int32Array(r);for(var s=1,i=0;i<r;i++)a.expTable[i]=s,s=s*n%r;for(var i=0;i<r-1;i++)a.logTable[a.expTable[i]]=i;return a.zero=new op(a,new Int32Array([0])),a.one=new op(a,new Int32Array([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new Yr;if(n===0)return this.zero;var a=new Int32Array(r+1);return a[0]=n,new op(this,a)},e.PDF417_GF=new e(Kn.NUMBER_OF_CODEWORDS,3),e}(C5e),S5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},I5e=function(){function t(){this.field=E5e.PDF417_GF}return t.prototype.decode=function(e,r,n){for(var a,s,i=new op(this.field,e),l=new Int32Array(r),c=!1,u=r;u>0;u--){var d=i.evaluateAt(this.field.exp(u));l[r-u]=d,d!==0&&(c=!0)}if(!c)return 0;var f=this.field.getOne();if(n!=null)try{for(var h=S5e(n),A=h.next();!A.done;A=h.next()){var m=A.value,p=this.field.exp(e.length-1-m),g=new op(this.field,new Int32Array([this.field.subtract(0,p),1]));f=f.multiply(g)}}catch(S){a={error:S}}finally{try{A&&!A.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}for(var x=new op(this.field,l),y=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),x,r),b=y[0],w=y[1],j=this.findErrorLocations(b),I=this.findErrorMagnitudes(w,b,j),u=0;u<j.length;u++){var _=e.length-1-this.field.log(j[u]);if(_<0)throw Bi.getChecksumInstance();e[_]=this.field.subtract(e[_],I[u])}return j.length},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var a=e;e=r,r=a}for(var s=e,i=r,l=this.field.getZero(),c=this.field.getOne();i.getDegree()>=Math.round(n/2);){var u=s,d=l;if(s=i,l=c,s.isZero())throw Bi.getChecksumInstance();i=u;for(var f=this.field.getZero(),h=s.getCoefficient(s.getDegree()),A=this.field.inverse(h);i.getDegree()>=s.getDegree()&&!i.isZero();){var m=i.getDegree()-s.getDegree(),p=this.field.multiply(i.getCoefficient(i.getDegree()),A);f=f.add(this.field.buildMonomial(m,p)),i=i.subtract(s.multiplyByMonomial(m,p))}c=f.multiply(l).subtract(d).negative()}var g=c.getCoefficient(0);if(g===0)throw Bi.getChecksumInstance();var x=this.field.inverse(g),y=c.multiply(x),b=i.multiply(x);return[y,b]},t.prototype.findErrorLocations=function(e){for(var r=e.getDegree(),n=new Int32Array(r),a=0,s=1;s<this.field.getSize()&&a<r;s++)e.evaluateAt(s)===0&&(n[a]=this.field.inverse(s),a++);if(a!==r)throw Bi.getChecksumInstance();return n},t.prototype.findErrorMagnitudes=function(e,r,n){for(var a=r.getDegree(),s=new Int32Array(a),i=1;i<=a;i++)s[a-i]=this.field.multiply(i,r.getCoefficient(i));for(var l=new op(this.field,s),c=n.length,u=new Int32Array(c),i=0;i<c;i++){var d=this.field.inverse(n[i]),f=this.field.subtract(0,e.evaluateAt(d)),h=this.field.inverse(l.evaluateAt(d));u[i]=this.field.multiply(f,h)}return u},t}(),yk=function(){function t(e,r,n,a,s){e instanceof t?this.constructor_2(e):this.constructor_1(e,r,n,a,s)}return t.prototype.constructor_1=function(e,r,n,a,s){var i=r==null||n==null,l=a==null||s==null;if(i&&l)throw new qt;i?(r=new Lr(0,a.getY()),n=new Lr(0,s.getY())):l&&(a=new Lr(e.getWidth()-1,r.getY()),s=new Lr(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=r,this.bottomLeft=n,this.topRight=a,this.bottomRight=s,this.minX=Math.trunc(Math.min(r.getX(),n.getX())),this.maxX=Math.trunc(Math.max(a.getX(),s.getX())),this.minY=Math.trunc(Math.min(r.getY(),a.getY())),this.maxY=Math.trunc(Math.max(n.getY(),s.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,r){return e==null?r:r==null?e:new t(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)},t.prototype.addMissingRows=function(e,r,n){var a=this.topLeft,s=this.bottomLeft,i=this.topRight,l=this.bottomRight;if(e>0){var c=n?this.topLeft:this.topRight,u=Math.trunc(c.getY()-e);u<0&&(u=0);var d=new Lr(c.getX(),u);n?a=d:i=d}if(r>0){var f=n?this.bottomLeft:this.bottomRight,h=Math.trunc(f.getY()+r);h>=this.image.getHeight()&&(h=this.image.getHeight()-1);var A=new Lr(f.getX(),h);n?s=A:l=A}return new t(this.image,a,s,i,l)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),j5e=function(){function t(e,r,n,a){this.columnCount=e,this.errorCorrectionLevel=a,this.rowCountUpperPart=r,this.rowCountLowerPart=n,this.rowCount=r+n}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),hD=function(){function t(){this.buffer=""}return t.form=function(e,r){var n=-1;function a(i,l,c,u,d,f){if(i==="%%")return"%";if(r[++n]!==void 0){i=u?parseInt(u.substr(1)):void 0;var h=d?parseInt(d.substr(1)):void 0,A;switch(f){case"s":A=r[n];break;case"c":A=r[n][0];break;case"f":A=parseFloat(r[n]).toFixed(i);break;case"p":A=parseFloat(r[n]).toPrecision(i);break;case"e":A=parseFloat(r[n]).toExponential(i);break;case"x":A=parseInt(r[n]).toString(h||16);break;case"d":A=parseFloat(parseInt(r[n],h||10).toPrecision(i)).toFixed(0);break}A=typeof A=="object"?JSON.stringify(A):(+A).toString(h);for(var m=parseInt(c),p=c&&c[0]+""=="0"?"0":" ";A.length<m;)A=l!==void 0?A+p:p+A;return A}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,a)},t.prototype.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=t.form(e,r)},t.prototype.toString=function(){return this.buffer},t}(),P5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sre=function(){function t(e){this.boundingBox=new yk(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var r=this.getCodeword(e);if(r!=null)return r;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var a=this.imageRowToCodewordIndex(e)-n;if(a>=0&&(r=this.codewords[a],r!=null)||(a=this.imageRowToCodewordIndex(e)+n,a<this.codewords.length&&(r=this.codewords[a],r!=null)))return r}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,r,n=new hD,a=0;try{for(var s=P5e(this.codewords),i=s.next();!i.done;i=s.next()){var l=i.value;if(l==null){n.format("%3d:    |   %n",a++);continue}n.format("%3d: %3d|%3d%n",a++,l.getRowNumber(),l.getValue())}}catch(c){e={error:c}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),B5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},T5e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,s=[],i;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)s.push(a.value)}catch(l){i={error:l}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return s},My=function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)},t.prototype.getValue=function(){var e,r,n=-1,a=new Array,s=function(f,h){var A={getKey:function(){return f},getValue:function(){return h}};A.getValue()>n?(n=A.getValue(),a=[],a.push(A.getKey())):A.getValue()===n&&a.push(A.getKey())};try{for(var i=B5e(this.values.entries()),l=i.next();!l.done;l=i.next()){var c=T5e(l.value,2),u=c[0],d=c[1];s(u,d)}}catch(f){e={error:f}}finally{try{l&&!l.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return Kn.toIntArray(a)},t.prototype.getConfidence=function(e){return this.values.get(e)},t}(),k5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rP=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},HV=function(t){k5e(e,t);function e(r,n){var a=t.call(this,r)||this;return a._isLeft=n,a}return e.prototype.setRowNumbers=function(){var r,n;try{for(var a=rP(this.getCodewords()),s=a.next();!s.done;s=a.next()){var i=s.value;i!=null&&i.setRowNumberAsRowIndicatorColumn()}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(r){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,r);for(var a=this.getBoundingBox(),s=this._isLeft?a.getTopLeft():a.getTopRight(),i=this._isLeft?a.getBottomLeft():a.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(s.getY())),c=this.imageRowToCodewordIndex(Math.trunc(i.getY())),u=-1,d=1,f=0,h=l;h<c;h++)if(n[h]!=null){var A=n[h],m=A.getRowNumber()-u;if(m===0)f++;else if(m===1)d=Math.max(d,f),f=1,u=A.getRowNumber();else if(m<0||A.getRowNumber()>=r.getRowCount()||m>h)n[h]=null;else{var p=void 0;d>2?p=(d-2)*m:p=m;for(var g=p>=h,x=1;x<=p&&!g;x++)g=n[h-x]!=null;g?n[h]=null:(u=A.getRowNumber(),f=1)}}},e.prototype.getRowHeights=function(){var r,n,a=this.getBarcodeMetadata();if(a==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);var s=new Int32Array(a.getRowCount());try{for(var i=rP(this.getCodewords()),l=i.next();!l.done;l=i.next()){var c=l.value;if(c!=null){var u=c.getRowNumber();if(u>=s.length)continue;s[u]++}}}catch(d){r={error:d}}finally{try{l&&!l.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(r){for(var n=this.getBoundingBox(),a=this._isLeft?n.getTopLeft():n.getTopRight(),s=this._isLeft?n.getBottomLeft():n.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(a.getY())),l=this.imageRowToCodewordIndex(Math.trunc(s.getY())),c=this.getCodewords(),u=-1,d=i;d<l;d++)if(c[d]!=null){var f=c[d];f.setRowNumberAsRowIndicatorColumn();var h=f.getRowNumber()-u;h===0||(h===1?u=f.getRowNumber():f.getRowNumber()>=r.getRowCount()?c[d]=null:u=f.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var r,n,a=this.getCodewords(),s=new My,i=new My,l=new My,c=new My;try{for(var u=rP(a),d=u.next();!d.done;d=u.next()){var f=d.value;if(f!=null){f.setRowNumberAsRowIndicatorColumn();var h=f.getValue()%30,A=f.getRowNumber();switch(this._isLeft||(A+=2),A%3){case 0:i.setValue(h*3+1);break;case 1:c.setValue(h/3),l.setValue(h%3);break;case 2:s.setValue(h+1);break}}}}catch(p){r={error:p}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}if(s.getValue().length===0||i.getValue().length===0||l.getValue().length===0||c.getValue().length===0||s.getValue()[0]<1||i.getValue()[0]+l.getValue()[0]<Kn.MIN_ROWS_IN_BARCODE||i.getValue()[0]+l.getValue()[0]>Kn.MAX_ROWS_IN_BARCODE)return null;var m=new j5e(s.getValue()[0],i.getValue()[0],l.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(a,m),m},e.prototype.removeIncorrectCodewords=function(r,n){for(var a=0;a<r.length;a++){var s=r[a];if(r[a]!=null){var i=s.getValue()%30,l=s.getRowNumber();if(l>n.getRowCount()){r[a]=null;continue}switch(this._isLeft||(l+=2),l%3){case 0:i*3+1!==n.getRowCountUpperPart()&&(r[a]=null);break;case 1:(Math.trunc(i/3)!==n.getErrorCorrectionLevel()||i%3!==n.getRowCountLowerPart())&&(r[a]=null);break;case 2:i+1!==n.getColumnCount()&&(r[a]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e}(sre),F5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},O5e=function(){function t(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Kn.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var r=1;r<this.barcodeColumnCount+1;r++)for(var n=this.detectionResultColumns[r].getCodewords(),a=0;a<n.length;a++)n[a]!=null&&(n[a].hasValidRowNumber()||this.adjustRowNumbers(r,a,n));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&r[n]!=null&&e[n].getRowNumber()===r[n].getRowNumber())for(var a=1;a<=this.barcodeColumnCount;a++){var s=this.detectionResultColumns[a].getCodewords()[n];s!=null&&(s.setRowNumber(e[n].getRowNumber()),s.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[n]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var a=r[n].getRowNumber(),s=0,i=this.barcodeColumnCount+1;i>0&&s<this.ADJUST_ROW_NUMBER_SKIP;i--){var l=this.detectionResultColumns[i].getCodewords()[n];l!=null&&(s=t.adjustRowNumberIfValid(a,s,l),l.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var a=r[n].getRowNumber(),s=0,i=1;i<this.barcodeColumnCount+1&&s<this.ADJUST_ROW_NUMBER_SKIP;i++){var l=this.detectionResultColumns[i].getCodewords()[n];l!=null&&(s=t.adjustRowNumberIfValid(a,s,l),l.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,r,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),r=0):++r),r},t.prototype.adjustRowNumbers=function(e,r,n){var a,s;if(this.detectionResultColumns[e-1]!=null){var i=n[r],l=this.detectionResultColumns[e-1].getCodewords(),c=l;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var u=new Array(14);u[2]=l[r],u[3]=c[r],r>0&&(u[0]=n[r-1],u[4]=l[r-1],u[5]=c[r-1]),r>1&&(u[8]=n[r-2],u[10]=l[r-2],u[11]=c[r-2]),r<n.length-1&&(u[1]=n[r+1],u[6]=l[r+1],u[7]=c[r+1]),r<n.length-2&&(u[9]=n[r+2],u[12]=l[r+2],u[13]=c[r+2]);try{for(var d=F5e(u),f=d.next();!f.done;f=d.next()){var h=f.value;if(t.adjustRowNumber(i,h))return}}catch(A){a={error:A}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}}},t.adjustRowNumber=function(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,r){this.detectionResultColumns[e]=r},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var r=new hD,n=0;n<e.getCodewords().length;n++){r.format("CW %3d:",n);for(var a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){r.format("    |   ");continue}var s=this.detectionResultColumns[a].getCodewords()[n];if(s==null){r.format("    |   ");continue}r.format(" %3d|%3d",s.getRowNumber(),s.getValue())}r.format("%n")}return r.toString()},t}(),D5e=function(){function t(e,r,n,a){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(a)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),R5e=function(){function t(){}return t.initialize=function(){for(var e=0;e<Kn.SYMBOL_TABLE.length;e++)for(var r=Kn.SYMBOL_TABLE[e],n=r&1,a=0;a<Kn.BARS_IN_MODULE;a++){for(var s=0;(r&1)===n;)s+=1,r>>=1;n=r&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(Kn.BARS_IN_MODULE)),t.RATIOS_TABLE[e][Kn.BARS_IN_MODULE-a-1]=Math.fround(s/Kn.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var r=t.getDecodedCodewordValue(t.sampleBitCounts(e));return r!==-1?r:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var r=Zn.sum(e),n=new Int32Array(Kn.BARS_IN_MODULE),a=0,s=0,i=0;i<Kn.MODULES_IN_CODEWORD;i++){var l=r/(2*Kn.MODULES_IN_CODEWORD)+i*r/Kn.MODULES_IN_CODEWORD;s+e[a]<=l&&(s+=e[a],a++),n[a]++}return n},t.getDecodedCodewordValue=function(e){var r=t.getBitValue(e);return Kn.getCodeword(r)===-1?-1:r},t.getBitValue=function(e){for(var r=0,n=0;n<e.length;n++)for(var a=0;a<e[n];a++)r=r<<1|(n%2===0?1:0);return Math.trunc(r)},t.getClosestDecodedValue=function(e){var r=Zn.sum(e),n=new Array(Kn.BARS_IN_MODULE);if(r>1)for(var a=0;a<n.length;a++)n[a]=Math.fround(e[a]/r);var s=gk.MAX_VALUE,i=-1;this.bSymbolTableReady||t.initialize();for(var l=0;l<t.RATIOS_TABLE.length;l++){for(var c=0,u=t.RATIOS_TABLE[l],d=0;d<Kn.BARS_IN_MODULE;d++){var f=Math.fround(u[d]-n[d]);if(c+=Math.fround(f*f),c>=s)break}c<s&&(s=c,i=Kn.SYMBOL_TABLE[l])}return i},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(Kn.SYMBOL_TABLE.length).map(function(e){return new Array(Kn.BARS_IN_MODULE)}),t}(),M5e=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t}(),$V=function(){function t(){}return t.parseLong=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t}(),L5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),U5e=function(t){L5e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e}(Pc),Q5e=function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,r,n){if(e==null)throw new U5e;if(r<0||r>e.length||n<0||r+n>e.length||r+n<0)throw new uD;if(n===0)return;for(var a=0;a<n;a++)this.write(e[r+a])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),V5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),H5e=function(t){V5e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Pc),$5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),G5e=function(t){$5e(e,t);function e(r){r===void 0&&(r=32);var n=t.call(this)||this;if(n.count=0,r<0)throw new Yr("Negative initial size: "+r);return n.buf=new Uint8Array(r),n}return e.prototype.ensureCapacity=function(r){r-this.buf.length>0&&this.grow(r)},e.prototype.grow=function(r){var n=this.buf.length,a=n<<1;if(a-r<0&&(a=r),a<0){if(r<0)throw new H5e;a=Pn.MAX_VALUE}this.buf=Ji.copyOfUint8Array(this.buf,a)},e.prototype.write=function(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1},e.prototype.writeBytesOffset=function(r,n,a){if(n<0||n>r.length||a<0||n+a-r.length>0)throw new uD;this.ensureCapacity(this.count+a),Ga.arraycopy(r,n,this.buf,this.count,a),this.count+=a},e.prototype.writeTo=function(r){r.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Ji.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(r){return new String(this.buf).toString()},e.prototype.toString_number=function(r){return new String(this.buf).toString()},e.prototype.close=function(){},e}(Q5e),ja;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(ja||(ja={}));function ire(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var OC;function o0(t){if(typeof OC>"u"&&(OC=ire()),OC===null)throw new Error("BigInt is not supported!");return OC(t)}function K5e(){var t=[];t[0]=o0(1);var e=o0(900);t[1]=e;for(var r=2;r<16;r++)t[r]=t[r-1]*e;return t}var q5e=function(){function t(){}return t.decode=function(e,r){var n=new _n(""),a=Yi.ISO8859_1;n.enableDecoding(a);for(var s=1,i=e[s++],l=new M5e;s<e[0];){switch(i){case t.TEXT_COMPACTION_MODE_LATCH:s=t.textCompaction(e,s,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:s=t.byteCompaction(i,e,a,s,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[s++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:s=t.numericCompaction(e,s,n);break;case t.ECI_CHARSET:Yi.getCharacterSetECIByValue(e[s++]);break;case t.ECI_GENERAL_PURPOSE:s+=2;break;case t.ECI_USER_DEFINED:s++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:s=t.decodeMacroBlock(e,s,l);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new yr;default:s--,s=t.textCompaction(e,s,n);break}if(s<e.length)i=e[s++];else throw yr.getFormatInstance()}if(n.length()===0)throw yr.getFormatInstance();var c=new M4(null,n.toString(),null,r);return c.setOther(l),c},t.decodeMacroBlock=function(e,r,n){if(r+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw yr.getFormatInstance();for(var a=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),s=0;s<t.NUMBER_OF_SEQUENCE_CODEWORDS;s++,r++)a[s]=e[r];n.setSegmentIndex(Pn.parseInt(t.decodeBase900toBase10(a,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var i=new _n;r=t.textCompaction(e,r,i),n.setFileId(i.toString());var l=-1;for(e[r]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(l=r+1);r<e[0];)switch(e[r]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new _n;r=t.textCompaction(e,r+1,c),n.setFileName(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var u=new _n;r=t.textCompaction(e,r+1,u),n.setSender(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new _n;r=t.textCompaction(e,r+1,d),n.setAddressee(d.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var f=new _n;r=t.numericCompaction(e,r+1,f),n.setSegmentCount(Pn.parseInt(f.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var h=new _n;r=t.numericCompaction(e,r+1,h),n.setTimestamp($V.parseLong(h.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var A=new _n;r=t.numericCompaction(e,r+1,A),n.setChecksum(Pn.parseInt(A.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var m=new _n;r=t.numericCompaction(e,r+1,m),n.setFileSize($V.parseLong(m.toString()));break;default:throw yr.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw yr.getFormatInstance()}if(l!==-1){var p=r-l;n.isLastSegment()&&p--,n.setOptionalData(Ji.copyOfRange(e,l,l+p))}return r},t.textCompaction=function(e,r,n){for(var a=new Int32Array((e[0]-r)*2),s=new Int32Array((e[0]-r)*2),i=0,l=!1;r<e[0]&&!l;){var c=e[r++];if(c<t.TEXT_COMPACTION_MODE_LATCH)a[i]=c/30,a[i+1]=c%30,i+=2;else switch(c){case t.TEXT_COMPACTION_MODE_LATCH:a[i++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,l=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[i]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[r++],s[i]=c,i++;break}}return t.decodeTextCompaction(a,s,i,n),r},t.decodeTextCompaction=function(e,r,n,a){for(var s=ja.ALPHA,i=ja.ALPHA,l=0;l<n;){var c=e[l],u="";switch(s){case ja.ALPHA:if(c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case t.LL:s=ja.LOWER;break;case t.ML:s=ja.MIXED;break;case t.PS:i=s,s=ja.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=ja.ALPHA;break}break;case ja.LOWER:if(c<26)u=String.fromCharCode(97+c);else switch(c){case 26:u=" ";break;case t.AS:i=s,s=ja.ALPHA_SHIFT;break;case t.ML:s=ja.MIXED;break;case t.PS:i=s,s=ja.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=ja.ALPHA;break}break;case ja.MIXED:if(c<t.PL)u=t.MIXED_CHARS[c];else switch(c){case t.PL:s=ja.PUNCT;break;case 26:u=" ";break;case t.LL:s=ja.LOWER;break;case t.AL:s=ja.ALPHA;break;case t.PS:i=s,s=ja.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=ja.ALPHA;break}break;case ja.PUNCT:if(c<t.PAL)u=t.PUNCT_CHARS[c];else switch(c){case t.PAL:s=ja.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=ja.ALPHA;break}break;case ja.ALPHA_SHIFT:if(s=i,c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:s=ja.ALPHA;break}break;case ja.PUNCT_SHIFT:if(s=i,c<t.PAL)u=t.PUNCT_CHARS[c];else switch(c){case t.PAL:s=ja.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=ja.ALPHA;break}break}u!==""&&a.append(u),l++}},t.byteCompaction=function(e,r,n,a,s){var i=new G5e,l=0,c=0,u=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),f=r[a++];a<r[0]&&!u;)switch(d[l++]=f,c=900*c+f,f=r[a++],f){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:a--,u=!0;break;default:if(l%5===0&&l>0){for(var h=0;h<6;++h)i.write(Number(o0(c)>>o0(8*(5-h))));c=0,l=0}break}a===r[0]&&f<t.TEXT_COMPACTION_MODE_LATCH&&(d[l++]=f);for(var A=0;A<l;A++)i.write(d[A]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;a<r[0]&&!u;){var m=r[a++];if(m<t.TEXT_COMPACTION_MODE_LATCH)l++,c=900*c+m;else switch(m){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:a--,u=!0;break}if(l%5===0&&l>0){for(var h=0;h<6;++h)i.write(Number(o0(c)>>o0(8*(5-h))));c=0,l=0}}break}return s.append(Zu.decode(i.toByteArray(),n)),a},t.numericCompaction=function(e,r,n){for(var a=0,s=!1,i=new Int32Array(t.MAX_NUMERIC_CODEWORDS);r<e[0]&&!s;){var l=e[r++];if(r===e[0]&&(s=!0),l<t.TEXT_COMPACTION_MODE_LATCH)i[a]=l,a++;else switch(l){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,s=!0;break}(a%t.MAX_NUMERIC_CODEWORDS===0||l===t.NUMERIC_COMPACTION_MODE_LATCH||s)&&a>0&&(n.append(t.decodeBase900toBase10(i,a)),a=0)}return r},t.decodeBase900toBase10=function(e,r){for(var n=o0(0),a=0;a<r;a++)n+=t.EXP900[r-a-1]*o0(e[a]);var s=n.toString();if(s.charAt(0)!=="1")throw new yr;return s.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=ire()?K5e():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),ly=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},z5e=function(){function t(){}return t.decode=function(e,r,n,a,s,i,l){for(var c=new yk(e,r,n,a,s),u=null,d=null,f,h=!0;;h=!1){if(r!=null&&(u=t.getRowIndicatorColumn(e,c,r,!0,i,l)),a!=null&&(d=t.getRowIndicatorColumn(e,c,a,!1,i,l)),f=t.merge(u,d),f==null)throw qt.getNotFoundInstance();var A=f.getBoundingBox();if(h&&A!=null&&(A.getMinY()<c.getMinY()||A.getMaxY()>c.getMaxY()))c=A;else break}f.setBoundingBox(c);var m=f.getBarcodeColumnCount()+1;f.setDetectionResultColumn(0,u),f.setDetectionResultColumn(m,d);for(var p=u!=null,g=1;g<=m;g++){var x=p?g:m-g;if(f.getDetectionResultColumn(x)===void 0){var y=void 0;x===0||x===m?y=new HV(c,x===0):y=new sre(c),f.setDetectionResultColumn(x,y);for(var b=-1,w=b,j=c.getMinY();j<=c.getMaxY();j++){if(b=t.getStartColumn(f,x,j,p),b<0||b>c.getMaxX()){if(w===-1)continue;b=w}var I=t.detectCodeword(e,c.getMinX(),c.getMaxX(),p,b,j,i,l);I!=null&&(y.setCodeword(j,I),w=b,i=Math.min(i,I.getWidth()),l=Math.max(l,I.getWidth()))}}}return t.createDecoderResult(f)},t.merge=function(e,r){if(e==null&&r==null)return null;var n=t.getBarcodeMetadata(e,r);if(n==null)return null;var a=yk.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(r));return new O5e(n,a)},t.adjustBoundingBox=function(e){var r,n;if(e==null)return null;var a=e.getRowHeights();if(a==null)return null;var s=t.getMax(a),i=0;try{for(var l=ly(a),c=l.next();!c.done;c=l.next()){var u=c.value;if(i+=s-u,u>0)break}}catch(A){r={error:A}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}for(var d=e.getCodewords(),f=0;i>0&&d[f]==null;f++)i--;for(var h=0,f=a.length-1;f>=0&&(h+=s-a[f],!(a[f]>0));f--);for(var f=d.length-1;h>0&&d[f]==null;f--)h--;return e.getBoundingBox().addMissingRows(i,h,e.isLeft())},t.getMax=function(e){var r,n,a=-1;try{for(var s=ly(e),i=s.next();!i.done;i=s.next()){var l=i.value;a=Math.max(a,l)}}catch(c){r={error:c}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a},t.getBarcodeMetadata=function(e,r){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();var a;return r==null||(a=r.getBarcodeMetadata())==null?n:n.getColumnCount()!==a.getColumnCount()&&n.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&n.getRowCount()!==a.getRowCount()?null:n},t.getRowIndicatorColumn=function(e,r,n,a,s,i){for(var l=new HV(r,a),c=0;c<2;c++)for(var u=c===0?1:-1,d=Math.trunc(Math.trunc(n.getX())),f=Math.trunc(Math.trunc(n.getY()));f<=r.getMaxY()&&f>=r.getMinY();f+=u){var h=t.detectCodeword(e,0,e.getWidth(),a,d,f,s,i);h!=null&&(l.setCodeword(f,h),a?d=h.getStartX():d=h.getEndX())}return l},t.adjustCodewordCount=function(e,r){var n=r[0][1],a=n.getValue(),s=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(a.length===0){if(s<1||s>Kn.MAX_CODEWORDS_IN_BARCODE)throw qt.getNotFoundInstance();n.setValue(s)}else a[0]!==s&&n.setValue(s)},t.createDecoderResult=function(e){var r=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,r);for(var n=new Array,a=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),s=[],i=new Array,l=0;l<e.getBarcodeRowCount();l++)for(var c=0;c<e.getBarcodeColumnCount();c++){var u=r[l][c+1].getValue(),d=l*e.getBarcodeColumnCount()+c;u.length===0?n.push(d):u.length===1?a[d]=u[0]:(i.push(d),s.push(u))}for(var f=new Array(s.length),h=0;h<f.length;h++)f[h]=s[h];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),a,Kn.toIntArray(n),Kn.toIntArray(i),f)},t.createDecoderResultFromAmbiguousValues=function(e,r,n,a,s){for(var i=new Int32Array(a.length),l=100;l-- >0;){for(var c=0;c<i.length;c++)r[a[c]]=s[c][i[c]];try{return t.decodeCodewords(r,e,n)}catch(d){var u=d instanceof Bi;if(!u)throw d}if(i.length===0)throw Bi.getChecksumInstance();for(var c=0;c<i.length;c++)if(i[c]<s[c].length-1){i[c]++;break}else if(i[c]=0,c===i.length-1)throw Bi.getChecksumInstance()}throw Bi.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var r,n,a,s,i=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),l=0;l<i.length;l++)for(var c=0;c<i[l].length;c++)i[l][c]=new My;var u=0;try{for(var d=ly(e.getDetectionResultColumns()),f=d.next();!f.done;f=d.next()){var h=f.value;if(h!=null)try{for(var A=(a=void 0,ly(h.getCodewords())),m=A.next();!m.done;m=A.next()){var p=m.value;if(p!=null){var g=p.getRowNumber();if(g>=0){if(g>=i.length)continue;i[g][u].setValue(p.getValue())}}}}catch(x){a={error:x}}finally{try{m&&!m.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}u++}}catch(x){r={error:x}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}return i},t.isValidBarcodeColumn=function(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,r,n,a){var s,i,l=a?1:-1,c=null;if(t.isValidBarcodeColumn(e,r-l)&&(c=e.getDetectionResultColumn(r-l).getCodeword(n)),c!=null)return a?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(r).getCodewordNearby(n),c!=null)return a?c.getStartX():c.getEndX();if(t.isValidBarcodeColumn(e,r-l)&&(c=e.getDetectionResultColumn(r-l).getCodewordNearby(n)),c!=null)return a?c.getEndX():c.getStartX();for(var u=0;t.isValidBarcodeColumn(e,r-l);){r-=l;try{for(var d=(s=void 0,ly(e.getDetectionResultColumn(r).getCodewords())),f=d.next();!f.done;f=d.next()){var h=f.value;if(h!=null)return(a?h.getEndX():h.getStartX())+l*u*(h.getEndX()-h.getStartX())}}catch(A){s={error:A}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(s)throw s.error}}u++}return a?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,r,n,a,s,i,l,c){s=t.adjustCodewordStartColumn(e,r,n,a,s,i);var u=t.getModuleBitCount(e,r,n,a,s,i);if(u==null)return null;var d,f=Zn.sum(u);if(a)d=s+f;else{for(var h=0;h<u.length/2;h++){var A=u[h];u[h]=u[u.length-1-h],u[u.length-1-h]=A}d=s,s=d-f}if(!t.checkCodewordSkew(f,l,c))return null;var m=R5e.getDecodedValue(u),p=Kn.getCodeword(m);return p===-1?null:new D5e(s,d,t.getCodewordBucketNumber(m),p)},t.getModuleBitCount=function(e,r,n,a,s,i){for(var l=s,c=new Int32Array(8),u=0,d=a?1:-1,f=a;(a?l<n:l>=r)&&u<c.length;)e.get(l,i)===f?(c[u]++,l+=d):(u++,f=!f);return u===c.length||l===(a?n:r)&&u===c.length-1?c:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,r,n,a,s,i){for(var l=s,c=a?-1:1,u=0;u<2;u++){for(;(a?l>=r:l<n)&&a===e.get(l,i);){if(Math.abs(s-l)>t.CODEWORD_SKEW_SIZE)return s;l+=c}c=-c,a=!a}return l},t.checkCodewordSkew=function(e,r,n){return r-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,r,n){if(e.length===0)throw yr.getFormatInstance();var a=1<<r+1,s=t.correctErrors(e,n,a);t.verifyCodewordCount(e,a);var i=q5e.decode(e,""+r);return i.setErrorsCorrected(s),i.setErasures(n.length),i},t.correctErrors=function(e,r,n){if(r!=null&&r.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw Bi.getChecksumInstance();return t.errorCorrection.decode(e,n,r)},t.verifyCodewordCount=function(e,r){if(e.length<4)throw yr.getFormatInstance();var n=e[0];if(n>e.length)throw yr.getFormatInstance();if(n===0)if(r<e.length)e[0]=e.length-r;else throw yr.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var r=new Int32Array(8),n=0,a=r.length-1;!((e&1)!==n&&(n=e&1,a--,a<0));)r[a]++,e>>=1;return r},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var r=new hD,n=0;n<e.length;n++){r.format("Row %2d: ",n);for(var a=0;a<e[n].length;a++){var s=e[n][a];s.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",s.getValue()[0],s.getConfidence(s.getValue()[0]))}r.format("%n")}return r.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new I5e,t}(),W5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},NS=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=t.decode(e,r,!1);if(n==null||n.length===0||n[0]==null)throw qt.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,r){r===void 0&&(r=null);try{return t.decode(e,r,!0)}catch(n){throw n instanceof yr||n instanceof Bi?qt.getNotFoundInstance():n}},t.decode=function(e,r,n){var a,s,i=new Array,l=w5e.detectMultiple(e,r,n);try{for(var c=W5e(l.getPoints()),u=c.next();!u.done;u=c.next()){var d=u.value,f=z5e.decode(l.getBits(),d[4],d[5],d[6],d[7],t.getMinCodewordWidth(d),t.getMaxCodewordWidth(d)),h=new Fl(f.getText(),f.getRawBytes(),void 0,d,Xr.PDF_417);h.putMetadata(tl.ERROR_CORRECTION_LEVEL,f.getECLevel());var A=f.getOther();A!=null&&h.putMetadata(tl.PDF417_EXTRA_METADATA,A),i.push(h)}}catch(m){a={error:m}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}return i.map(function(m){return m})},t.getMaxWidth=function(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMinWidth=function(e,r){return e==null||r==null?Pn.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*Kn.MODULES_IN_CODEWORD/Kn.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*Kn.MODULES_IN_CODEWORD/Kn.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*Kn.MODULES_IN_CODEWORD/Kn.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*Kn.MODULES_IN_CODEWORD/Kn.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),X5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),GV=function(t){X5e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e}(Pc),KV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ore=function(){function t(){}return t.prototype.decode=function(e,r){return this.setHints(r),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var r=e!=null&&e.get(Ka.TRY_HARDER)!==void 0,n=e==null?null:e.get(Ka.POSSIBLE_FORMATS),a=new Array;if(n!=null){var s=n.some(function(i){return i===Xr.UPC_A||i===Xr.UPC_E||i===Xr.EAN_13||i===Xr.EAN_8||i===Xr.CODABAR||i===Xr.CODE_39||i===Xr.CODE_93||i===Xr.CODE_128||i===Xr.ITF||i===Xr.RSS_14||i===Xr.RSS_EXPANDED});s&&!r&&a.push(new Lx(e)),n.includes(Xr.QR_CODE)&&a.push(new wS),n.includes(Xr.DATA_MATRIX)&&a.push(new bS),n.includes(Xr.AZTEC)&&a.push(new vS),n.includes(Xr.PDF_417)&&a.push(new NS),s&&r&&a.push(new Lx(e))}a.length===0&&(r||a.push(new Lx(e)),a.push(new wS),a.push(new bS),a.push(new vS),a.push(new NS),r&&a.push(new Lx(e))),this.readers=a},t.prototype.reset=function(){var e,r;if(this.readers!==null)try{for(var n=KV(this.readers),a=n.next();!a.done;a=n.next()){var s=a.value;s.reset()}}catch(i){e={error:i}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var r,n;if(this.readers===null)throw new GV("No readers where selected, nothing can be read.");try{for(var a=KV(this.readers),s=a.next();!s.done;s=a.next()){var i=s.value;try{return i.decode(e,this.hints)}catch(l){if(l instanceof GV)continue}}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}throw new qt("No MultiFormat Readers were able to detect the code.")},t}(),Y5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){Y5e(e,t);function e(r,n){r===void 0&&(r=null),n===void 0&&(n=500);var a=this,s=new ore;return s.setHints(r),a=t.call(this,s,n)||this,a}return e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e})(a1);var J5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){J5e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new NS,r)||this}return e})(a1);var Z5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){Z5e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new wS,r)||this}return e})(a1);var bk;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(bk||(bk={}));const DC=bk;var lre=function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new G0(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var r=this.cachedGenerators;if(e>=r.length)for(var n=r[r.length-1],a=this.field,s=r.length;s<=e;s++){var i=n.multiply(new G0(a,Int32Array.from([1,a.exp(s-1+a.getGeneratorBase())])));r.push(i),n=i}return r[e]},t.prototype.encode=function(e,r){if(r===0)throw new Yr("No error correction bytes");var n=e.length-r;if(n<=0)throw new Yr("No data bytes provided");var a=this.buildGenerator(r),s=new Int32Array(n);Ga.arraycopy(e,0,s,0,n);var i=new G0(this.field,s);i=i.multiplyByMonomial(r,1);for(var l=i.divide(a)[1],c=l.getCoefficients(),u=r-c.length,d=0;d<u;d++)e[n+d]=0;Ga.arraycopy(c,0,e,n+u,c.length)},t}(),Ly=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),i=0;i<s-1;i++)for(var l=n[i],c=0;c<a-1;c++){var u=l[c];u===l[c+1]&&u===n[i+1][c]&&u===n[i+1][c+1]&&r++}return t.N2*r},t.applyMaskPenaltyRule3=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),i=0;i<s;i++)for(var l=0;l<a;l++){var c=n[i];l+6<a&&c[l]===1&&c[l+1]===0&&c[l+2]===1&&c[l+3]===1&&c[l+4]===1&&c[l+5]===0&&c[l+6]===1&&(t.isWhiteHorizontal(c,l-4,l)||t.isWhiteHorizontal(c,l+7,l+11))&&r++,i+6<s&&n[i][l]===1&&n[i+1][l]===0&&n[i+2][l]===1&&n[i+3][l]===1&&n[i+4][l]===1&&n[i+5][l]===0&&n[i+6][l]===1&&(t.isWhiteVertical(n,l,i-4,i)||t.isWhiteVertical(n,l,i+7,i+11))&&r++}return r*t.N3},t.isWhiteHorizontal=function(e,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(var a=r;a<n;a++)if(e[a]===1)return!1;return!0},t.isWhiteVertical=function(e,r,n,a){n=Math.max(n,0),a=Math.min(a,e.length);for(var s=n;s<a;s++)if(e[s][r]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),i=0;i<s;i++)for(var l=n[i],c=0;c<a;c++)l[c]===1&&r++;var u=e.getHeight()*e.getWidth(),d=Math.floor(Math.abs(r*2-u)*10/u);return d*t.N4},t.getDataMaskBit=function(e,r,n){var a,s;switch(e){case 0:a=n+r&1;break;case 1:a=n&1;break;case 2:a=r%3;break;case 3:a=(n+r)%3;break;case 4:a=Math.floor(n/2)+Math.floor(r/3)&1;break;case 5:s=n*r,a=(s&1)+s%3;break;case 6:s=n*r,a=(s&1)+s%3&1;break;case 7:s=n*r,a=s%3+(n+r&1)&1;break;default:throw new Yr("Invalid mask pattern: "+e)}return a===0},t.applyMaskPenaltyRule1Internal=function(e,r){for(var n=0,a=r?e.getHeight():e.getWidth(),s=r?e.getWidth():e.getHeight(),i=e.getArray(),l=0;l<a;l++){for(var c=0,u=-1,d=0;d<s;d++){var f=r?i[l][d]:i[d][l];f===u?c++:(c>=5&&(n+=t.N1+(c-5)),c=1,u=f)}c>=5&&(n+=t.N1+(c-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),ePe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tPe=function(){function t(e,r){this.width=e,this.height=r;for(var n=new Array(r),a=0;a!==r;a++)n[a]=new Uint8Array(e);this.bytes=n}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,r){return this.bytes[r][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,r,n){this.bytes[r][e]=n},t.prototype.setBoolean=function(e,r,n){this.bytes[r][e]=n?1:0},t.prototype.clear=function(e){var r,n;try{for(var a=ePe(this.bytes),s=a.next();!s.done;s=a.next()){var i=s.value;Ji.fill(i,e)}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(var n=0,a=this.height;n<a;++n)for(var s=this.bytes[n],i=r.bytes[n],l=0,c=this.width;l<c;++l)if(s[l]!==i[l])return!1;return!0},t.prototype.toString=function(){for(var e=new _n,r=0,n=this.height;r<n;++r){for(var a=this.bytes[r],s=0,i=this.width;s<i;++s)switch(a[s]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t}(),wk=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new _n;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),rPe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ya=function(t){rPe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e}(Pc),qV=function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,r,n,a,s){t.clearMatrix(s),t.embedBasicPatterns(n,s),t.embedTypeInfo(r,a,s),t.maybeEmbedVersionInfo(n,s),t.embedDataBits(e,a,s)},t.embedBasicPatterns=function(e,r){t.embedPositionDetectionPatternsAndSeparators(r),t.embedDarkDotAtLeftBottomCorner(r),t.maybeEmbedPositionAdjustmentPatterns(e,r),t.embedTimingPatterns(r)},t.embedTypeInfo=function(e,r,n){var a=new _o;t.makeTypeInfoBits(e,r,a);for(var s=0,i=a.getSize();s<i;++s){var l=a.get(a.getSize()-1-s),c=t.TYPE_INFO_COORDINATES[s],u=c[0],d=c[1];if(n.setBoolean(u,d,l),s<8){var f=n.getWidth()-s-1,h=8;n.setBoolean(f,h,l)}else{var f=8,h=n.getHeight()-7+(s-8);n.setBoolean(f,h,l)}}},t.maybeEmbedVersionInfo=function(e,r){if(!(e.getVersionNumber()<7)){var n=new _o;t.makeVersionInfoBits(e,n);for(var a=6*3-1,s=0;s<6;++s)for(var i=0;i<3;++i){var l=n.get(a);a--,r.setBoolean(s,r.getHeight()-11+i,l),r.setBoolean(r.getHeight()-11+i,s,l)}}},t.embedDataBits=function(e,r,n){for(var a=0,s=-1,i=n.getWidth()-1,l=n.getHeight()-1;i>0;){for(i===6&&(i-=1);l>=0&&l<n.getHeight();){for(var c=0;c<2;++c){var u=i-c;if(t.isEmpty(n.get(u,l))){var d=void 0;a<e.getSize()?(d=e.get(a),++a):d=!1,r!==255&&Ly.getDataMaskBit(r,u,l)&&(d=!d),n.setBoolean(u,l,d)}}l+=s}s=-s,l+=s,i-=2}if(a!==e.getSize())throw new Ya("Not all bits consumed: "+a+"/"+e.getSize())},t.findMSBSet=function(e){return 32-Pn.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,r){if(r===0)throw new Yr("0 polynomial");var n=t.findMSBSet(r);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=r<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,r,n){if(!wk.isValidMaskPattern(r))throw new Ya("Invalid mask pattern");var a=e.getBits()<<3|r;n.appendBits(a,5);var s=t.calculateBCHCode(a,t.TYPE_INFO_POLY);n.appendBits(s,10);var i=new _o;if(i.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(i),n.getSize()!==15)throw new Ya("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,r){r.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(r.appendBits(n,12),r.getSize()!==18)throw new Ya("should not happen but we got: "+r.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var r=8;r<e.getWidth()-8;++r){var n=(r+1)%2;t.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),t.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Ya;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,r,n){for(var a=0;a<8;++a){if(!t.isEmpty(n.get(e+a,r)))throw new Ya;n.setNumber(e+a,r,0)}},t.embedVerticalSeparationPattern=function(e,r,n){for(var a=0;a<7;++a){if(!t.isEmpty(n.get(e,r+a)))throw new Ya;n.setNumber(e,r+a,0)}},t.embedPositionAdjustmentPattern=function(e,r,n){for(var a=0;a<5;++a)for(var s=t.POSITION_ADJUSTMENT_PATTERN[a],i=0;i<5;++i)n.setNumber(e+i,r+a,s[i])},t.embedPositionDetectionPattern=function(e,r,n){for(var a=0;a<7;++a)for(var s=t.POSITION_DETECTION_PATTERN[a],i=0;i<7;++i)n.setNumber(e+i,r+a,s[i])},t.embedPositionDetectionPatternsAndSeparators=function(e){var r=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-r,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-r,e);var n=8;t.embedHorizontalSeparationPattern(0,n-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var a=7;t.embedVerticalSeparationPattern(a,0,e),t.embedVerticalSeparationPattern(e.getHeight()-a-1,0,e),t.embedVerticalSeparationPattern(a,e.getHeight()-a,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,r){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,a=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],s=0,i=a.length;s!==i;s++){var l=a[s];if(l>=0)for(var c=0;c!==i;c++){var u=a[c];u>=0&&t.isEmpty(r.get(u,l))&&t.embedPositionAdjustmentPattern(u-2,l-2,r)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),nPe=function(){function t(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),zV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return Ly.applyMaskPenaltyRule1(e)+Ly.applyMaskPenaltyRule2(e)+Ly.applyMaskPenaltyRule3(e)+Ly.applyMaskPenaltyRule4(e)},t.encode=function(e,r,n){n===void 0&&(n=null);var a=t.DEFAULT_BYTE_MODE_ENCODING,s=n!==null&&n.get(DC.CHARACTER_SET)!==void 0;s&&(a=n.get(DC.CHARACTER_SET).toString());var i=this.chooseMode(e,a),l=new _o;if(i===Za.BYTE&&(s||t.DEFAULT_BYTE_MODE_ENCODING!==a)){var c=Yi.getCharacterSetECIByName(a);c!==void 0&&this.appendECI(c,l)}this.appendModeInfo(i,l);var u=new _o;this.appendBytes(e,i,u,a);var d;if(n!==null&&n.get(DC.QR_VERSION)!==void 0){var f=Number.parseInt(n.get(DC.QR_VERSION).toString(),10);d=wp.getVersionForNumber(f);var h=this.calculateBitsNeeded(i,l,u,d);if(!this.willFit(h,d,r))throw new Ya("Data too big for requested version")}else d=this.recommendVersion(r,i,l,u);var A=new _o;A.appendBitArray(l);var m=i===Za.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(m,d,i,A),A.appendBitArray(u);var p=d.getECBlocksForLevel(r),g=d.getTotalCodewords()-p.getTotalECCodewords();this.terminateBits(g,A);var x=this.interleaveWithECBytes(A,d.getTotalCodewords(),g,p.getNumBlocks()),y=new wk;y.setECLevel(r),y.setMode(i),y.setVersion(d);var b=d.getDimensionForVersion(),w=new tPe(b,b),j=this.chooseMaskPattern(x,r,d,w);return y.setMaskPattern(j),qV.buildMatrix(x,r,d,j,w),y.setMatrix(w),y},t.recommendVersion=function(e,r,n,a){var s=this.calculateBitsNeeded(r,n,a,wp.getVersionForNumber(1)),i=this.chooseVersion(s,e),l=this.calculateBitsNeeded(r,n,a,i);return this.chooseVersion(l,e)},t.calculateBitsNeeded=function(e,r,n,a){return r.getSize()+e.getCharacterCountBits(a)+n.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,r){if(r===void 0&&(r=null),Yi.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return Za.KANJI;for(var n=!1,a=!1,s=0,i=e.length;s<i;++s){var l=e.charAt(s);if(t.isDigit(l))n=!0;else if(this.getAlphanumericCode(l.charCodeAt(0))!==-1)a=!0;else return Za.BYTE}return a?Za.ALPHANUMERIC:n?Za.NUMERIC:Za.BYTE},t.isOnlyDoubleByteKanji=function(e){var r;try{r=Zu.encode(e,Yi.SJIS)}catch{return!1}var n=r.length;if(n%2!==0)return!1;for(var a=0;a<n;a+=2){var s=r[a]&255;if((s<129||s>159)&&(s<224||s>235))return!1}return!0},t.chooseMaskPattern=function(e,r,n,a){for(var s=Number.MAX_SAFE_INTEGER,i=-1,l=0;l<wk.NUM_MASK_PATTERNS;l++){qV.buildMatrix(e,r,n,l,a);var c=this.calculateMaskPenalty(a);c<s&&(s=c,i=l)}return i},t.chooseVersion=function(e,r){for(var n=1;n<=40;n++){var a=wp.getVersionForNumber(n);if(t.willFit(e,a,r))return a}throw new Ya("Data too big")},t.willFit=function(e,r,n){var a=r.getTotalCodewords(),s=r.getECBlocksForLevel(n),i=s.getTotalECCodewords(),l=a-i,c=(e+7)/8;return l>=c},t.terminateBits=function(e,r){var n=e*8;if(r.getSize()>n)throw new Ya("data bits cannot fit in the QR Code"+r.getSize()+" > "+n);for(var a=0;a<4&&r.getSize()<n;++a)r.appendBit(!1);var s=r.getSize()&7;if(s>0)for(var a=s;a<8;a++)r.appendBit(!1);for(var i=e-r.getSizeInBytes(),a=0;a<i;++a)r.appendBits(a&1?17:236,8);if(r.getSize()!==n)throw new Ya("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,r,n,a,s,i){if(a>=n)throw new Ya("Block ID too large");var l=e%n,c=n-l,u=Math.floor(e/n),d=u+1,f=Math.floor(r/n),h=f+1,A=u-f,m=d-h;if(A!==m)throw new Ya("EC bytes mismatch");if(n!==c+l)throw new Ya("RS blocks mismatch");if(e!==(f+A)*c+(h+m)*l)throw new Ya("Total bytes mismatch");a<c?(s[0]=f,i[0]=A):(s[0]=h,i[0]=m)},t.interleaveWithECBytes=function(e,r,n,a){var s,i,l,c;if(e.getSizeInBytes()!==n)throw new Ya("Number of bits and data bytes does not match");for(var u=0,d=0,f=0,h=new Array,A=0;A<a;++A){var m=new Int32Array(1),p=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(r,n,a,A,m,p);var g=m[0],x=new Uint8Array(g);e.toBytes(8*u,x,0,g);var y=t.generateECBytes(x,p[0]);h.push(new nPe(x,y)),d=Math.max(d,g),f=Math.max(f,y.length),u+=m[0]}if(n!==u)throw new Ya("Data bytes does not match offset");for(var b=new _o,A=0;A<d;++A)try{for(var w=(s=void 0,zV(h)),j=w.next();!j.done;j=w.next()){var I=j.value,x=I.getDataBytes();A<x.length&&b.appendBits(x[A],8)}}catch(k){s={error:k}}finally{try{j&&!j.done&&(i=w.return)&&i.call(w)}finally{if(s)throw s.error}}for(var A=0;A<f;++A)try{for(var _=(l=void 0,zV(h)),S=_.next();!S.done;S=_.next()){var I=S.value,y=I.getErrorCorrectionBytes();A<y.length&&b.appendBits(y[A],8)}}catch(k){l={error:k}}finally{try{S&&!S.done&&(c=_.return)&&c.call(_)}finally{if(l)throw l.error}}if(r!==b.getSizeInBytes())throw new Ya("Interleaving error: "+r+" and "+b.getSizeInBytes()+" differ.");return b},t.generateECBytes=function(e,r){for(var n=e.length,a=new Int32Array(n+r),s=0;s<n;s++)a[s]=e[s]&255;new lre(xc.QR_CODE_FIELD_256).encode(a,r);for(var i=new Uint8Array(r),s=0;s<r;s++)i[s]=a[n+s];return i},t.appendModeInfo=function(e,r){r.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,r,n,a){var s=n.getCharacterCountBits(r);if(e>=1<<s)throw new Ya(e+" is bigger than "+((1<<s)-1));a.appendBits(e,s)},t.appendBytes=function(e,r,n,a){switch(r){case Za.NUMERIC:t.appendNumericBytes(e,n);break;case Za.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case Za.BYTE:t.append8BitBytes(e,n,a);break;case Za.KANJI:t.appendKanjiBytes(e,n);break;default:throw new Ya("Invalid mode: "+r)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var r=t.getDigit(e);return r>=0&&r<=9},t.appendNumericBytes=function(e,r){for(var n=e.length,a=0;a<n;){var s=t.getDigit(e.charAt(a));if(a+2<n){var i=t.getDigit(e.charAt(a+1)),l=t.getDigit(e.charAt(a+2));r.appendBits(s*100+i*10+l,10),a+=3}else if(a+1<n){var i=t.getDigit(e.charAt(a+1));r.appendBits(s*10+i,7),a+=2}else r.appendBits(s,4),a++}},t.appendAlphanumericBytes=function(e,r){for(var n=e.length,a=0;a<n;){var s=t.getAlphanumericCode(e.charCodeAt(a));if(s===-1)throw new Ya;if(a+1<n){var i=t.getAlphanumericCode(e.charCodeAt(a+1));if(i===-1)throw new Ya;r.appendBits(s*45+i,11),a+=2}else r.appendBits(s,6),a++}},t.append8BitBytes=function(e,r,n){var a;try{a=Zu.encode(e,n)}catch(c){throw new Ya(c)}for(var s=0,i=a.length;s!==i;s++){var l=a[s];r.appendBits(l,8)}},t.appendKanjiBytes=function(e,r){var n;try{n=Zu.encode(e,Yi.SJIS)}catch(f){throw new Ya(f)}for(var a=n.length,s=0;s<a;s+=2){var i=n[s]&255,l=n[s+1]&255,c=i<<8&4294967295|l,u=-1;if(c>=33088&&c<=40956?u=c-33088:c>=57408&&c<=60351&&(u=c-49472),u===-1)throw new Ya("Invalid byte sequence");var d=(u>>8)*192+(u&255);r.appendBits(d,13)}},t.appendECI=function(e,r){r.appendBits(Za.ECI.getBits(),4),r.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=Yi.UTF8.getName(),t})();var aPe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){aPe(e,t);function e(r,n,a,s,i,l,c,u){var d=t.call(this,l,c)||this;if(d.yuvData=r,d.dataWidth=n,d.dataHeight=a,d.left=s,d.top=i,s+l>n||i+c>a)throw new Yr("Crop rectangle does not fit within image data.");return u&&d.reverseHorizontal(l,c),d}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Yr("Requested row is outside the image: "+r);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var s=(r+this.top)*this.dataWidth+this.left;return Ga.arraycopy(this.yuvData,s,n,0,a),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.yuvData;var a=r*n,s=new Uint8ClampedArray(a),i=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Ga.arraycopy(this.yuvData,i,s,0,a),s;for(var l=0;l<n;l++){var c=l*r;Ga.arraycopy(this.yuvData,i,s,c,r),i+=this.dataWidth}return s},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+n,a,s,!1)},e.prototype.renderThumbnail=function(){for(var r=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(r*n),s=this.yuvData,i=this.top*this.dataWidth+this.left,l=0;l<n;l++){for(var c=l*r,u=0;u<r;u++){var d=s[i+u*e.THUMBNAIL_SCALE_FACTOR]&255;a[c+u]=4278190080|d*65793}i+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return a},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(r,n){for(var a=this.yuvData,s=0,i=this.top*this.dataWidth+this.left;s<n;s++,i+=this.dataWidth)for(var l=i+r/2,c=i,u=i+r-1;c<l;c++,u--){var d=a[c];a[c]=a[u],a[u]=d}},e.prototype.invert=function(){return new R4(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Cw);var sPe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){sPe(e,t);function e(r,n,a,s,i,l,c){var u=t.call(this,n,a)||this;if(u.dataWidth=s,u.dataHeight=i,u.left=l,u.top=c,r.BYTES_PER_ELEMENT===4){for(var d=n*a,f=new Uint8ClampedArray(d),h=0;h<d;h++){var A=r[h],m=A>>16&255,p=A>>7&510,g=A&255;f[h]=(m+p+g)/4&255}u.luminances=f}else u.luminances=r;if(s===void 0&&(u.dataWidth=n),i===void 0&&(u.dataHeight=a),l===void 0&&(u.left=0),c===void 0&&(u.top=0),u.left+n>u.dataWidth||u.top+a>u.dataHeight)throw new Yr("Crop rectangle does not fit within image data.");return u}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Yr("Requested row is outside the image: "+r);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var s=(r+this.top)*this.dataWidth+this.left;return Ga.arraycopy(this.luminances,s,n,0,a),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.luminances;var a=r*n,s=new Uint8ClampedArray(a),i=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Ga.arraycopy(this.luminances,i,s,0,a),s;for(var l=0;l<n;l++){var c=l*r;Ga.arraycopy(this.luminances,i,s,c,r),i+=this.dataWidth}return s},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return new e(this.luminances,a,s,this.dataWidth,this.dataHeight,this.left+r,this.top+n)},e.prototype.invert=function(){return new R4(this)},e})(Cw);var iPe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),oPe=function(t){iPe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(r){return this.getCharacterSetECIByName(r)},e}(Yi),lPe=function(){function t(){}return t.ISO_8859_1=Yi.ISO8859_1,t}(),Nk,cPe=301,uPe=function(t,e){for(var r=1,n=0;n<255;n++)e[n]=r,t[r]=n,r*=2,r>=256&&(r^=cPe);return{LOG:t,ALOG:e}};Nk=uPe([],[]),Nk.LOG;Nk.ALOG;var WV;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(WV||(WV={}));var XV=129,cre=230,dPe=231,fPe=235,APe=236,hPe=237,mPe=238,pPe=239,gPe=240,nP=254,xPe=254,YV="[)>05",JV="[)>06",ZV="",xa=0,$o=1,$l=2,Hi=3,xo=4,yl=5,vPe=function(){function t(){}return t.prototype.getEncodingMode=function(){return xa},t.prototype.encode=function(e){var r=Td.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(r>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),a=Td.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode())switch(a){case yl:e.writeCodeword(dPe),e.signalEncoderChange(yl);return;case $o:e.writeCodeword(cre),e.signalEncoderChange($o);return;case Hi:e.writeCodeword(mPe),e.signalEncoderChange(Hi);break;case $l:e.writeCodeword(pPe),e.signalEncoderChange($l);break;case xo:e.writeCodeword(gPe),e.signalEncoderChange(xo);break;default:throw new Error("Illegal mode: "+a)}else Td.isExtendedASCII(n)?(e.writeCodeword(fPe),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,r){if(Td.isDigit(e)&&Td.isDigit(r)){var n=(e-48)*10+(r-48);return n+130}throw new Error("not digits: "+e+r)},t}(),yPe=function(){function t(){}return t.prototype.getEncodingMode=function(){return yl},t.prototype.encode=function(e){var r=new _n;for(r.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();r.append(n),e.pos++;var a=Td.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){e.signalEncoderChange(xa);break}}var s=r.length()-1,i=1,l=e.getCodewordCount()+s+i;e.updateSymbolInfo(l);var c=e.getSymbolInfo().getDataCapacity()-l>0;if(e.hasMoreCharacters()||c)if(s<=249)r.setCharAt(0,$n.getCharAt(s));else if(s<=1555)r.setCharAt(0,$n.getCharAt(Math.floor(s/250)+249)),r.insert(1,$n.getCharAt(s%250));else throw new Error("Message length not in valid ranges: "+s);for(var u=0,n=r.length();u<n;u++)e.writeCodeword(this.randomize255State(r.charAt(u).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,r){var n=149*r%255+1,a=e+n;return a<=255?a:a-256},t}(),mD=function(){function t(){}return t.prototype.getEncodingMode=function(){return $o},t.prototype.encodeMaximal=function(e){for(var r=new _n,n=0,a=e.pos,s=0;e.hasMoreCharacters();){var i=e.getCurrentChar();e.pos++,n=this.encodeChar(i,r),r.length()%3===0&&(a=e.pos,s=r.length())}if(s!==r.length()){var l=Math.floor(r.length()/3*2),c=Math.floor(e.getCodewordCount()+l+1);e.updateSymbolInfo(c);var u=e.getSymbolInfo().getDataCapacity()-c,d=Math.floor(r.length()%3);(d===2&&u!==2||d===1&&(n>3||u!==1))&&(e.pos=a)}r.length()>0&&e.writeCodeword(cre),this.handleEOD(e,r)},t.prototype.encode=function(e){for(var r=new _n;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var a=this.encodeChar(n,r),s=Math.floor(r.length()/3)*2,i=e.getCodewordCount()+s;e.updateSymbolInfo(i);var l=e.getSymbolInfo().getDataCapacity()-i;if(!e.hasMoreCharacters()){var c=new _n;for(r.length()%3===2&&l!==2&&(a=this.backtrackOneCharacter(e,r,c,a));r.length()%3===1&&(a>3||l!==1);)a=this.backtrackOneCharacter(e,r,c,a);break}var u=r.length();if(u%3===0){var d=Td.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){e.signalEncoderChange(xa);break}}}this.handleEOD(e,r)},t.prototype.backtrackOneCharacter=function(e,r,n,a){var s=r.length(),i=r.toString().substring(0,s-a);r.setLengthToZero(),r.append(i),e.pos--;var l=e.getCurrentChar();return a=this.encodeChar(l,n),e.resetSymbolInfo(),a},t.prototype.writeNextTriplet=function(e,r){e.writeCodewords(this.encodeToCodewords(r.toString()));var n=r.toString().substring(3);r.setLengthToZero(),r.append(n)},t.prototype.handleEOD=function(e,r){var n=Math.floor(r.length()/3*2),a=r.length()%3,s=e.getCodewordCount()+n;e.updateSymbolInfo(s);var i=e.getSymbolInfo().getDataCapacity()-s;if(a===2){for(r.append("\0");r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(nP)}else if(i===1&&a===1){for(;r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(nP),e.pos--}else if(a===0){for(;r.length()>=3;)this.writeNextTriplet(e,r);(i>0||e.hasMoreCharacters())&&e.writeCodeword(nP)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(xa)},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=65&&e<=90)return r.append(e-65+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e<=95)return r.append(1),r.append(e-91+22),2;if(e<=127)return r.append(2),r.append(e-96),2;r.append("1");var n=2;return n+=this.encodeChar(e-128,r),n},t.prototype.encodeToCodewords=function(e){var r=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=r/256,a=r%256,s=new _n;return s.append(n),s.append(a),s.toString()},t}(),bPe=function(){function t(){}return t.prototype.getEncodingMode=function(){return xo},t.prototype.encode=function(e){for(var r=new _n;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,r),e.pos++;var a=r.length();if(a>=4){e.writeCodewords(this.encodeToCodewords(r.toString()));var s=r.toString().substring(4);r.setLengthToZero(),r.append(s);var i=Td.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(xa);break}}}r.append($n.getCharAt(31)),this.handleEOD(e,r)},t.prototype.handleEOD=function(e,r){try{var n=r.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),s=e.getRemainingCharacters();if(s>a&&(e.updateSymbolInfo(e.getCodewordCount()+1),a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),s<=a&&a<=2)return}if(n>4)throw new Error("Count must not exceed 4");var i=n-1,l=this.encodeToCodewords(r.toString()),c=!e.hasMoreCharacters(),u=c&&i<=2;if(i<=2){e.updateSymbolInfo(e.getCodewordCount()+i);var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();a>=3&&(u=!1,e.updateSymbolInfo(e.getCodewordCount()+l.length))}u?(e.resetSymbolInfo(),e.pos-=i):e.writeCodewords(l)}finally{e.signalEncoderChange(xa)}},t.prototype.encodeChar=function(e,r){e>=32&&e<=63?r.append(e):e>=64&&e<=94?r.append($n.getCharAt(e-64)):Td.illegalCharacter($n.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var r=e.length;if(r===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),a=r>=2?e.charAt(1).charCodeAt(0):0,s=r>=3?e.charAt(2).charCodeAt(0):0,i=r>=4?e.charAt(3).charCodeAt(0):0,l=(n<<18)+(a<<12)+(s<<6)+i,c=l>>16&255,u=l>>8&255,d=l&255,f=new _n;return f.append(c),r>=2&&f.append(u),r>=3&&f.append(d),f.toString()},t}(),wPe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),NPe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ia=function(){function t(e,r,n,a,s,i,l,c){l===void 0&&(l=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=r,this.errorCodewords=n,this.matrixWidth=a,this.matrixHeight=s,this.dataRegions=i,this.rsBlockData=l,this.rsBlockError=c}return t.lookup=function(e,r,n,a,s){var i,l;r===void 0&&(r=0),n===void 0&&(n=null),a===void 0&&(a=null),s===void 0&&(s=!0);try{for(var c=NPe(_Pe),u=c.next();!u.done;u=c.next()){var d=u.value;if(!(r===1&&d.rectangular)&&!(r===2&&!d.rectangular)&&!(n!=null&&(d.getSymbolWidth()<n.getWidth()||d.getSymbolHeight()<n.getHeight()))&&!(a!=null&&(d.getSymbolWidth()>a.getWidth()||d.getSymbolHeight()>a.getHeight()))&&e<=d.dataCapacity)return d}}catch(f){i={error:f}}finally{try{u&&!u.done&&(l=c.return)&&l.call(c)}finally{if(i)throw i.error}}if(s)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t}(),CPe=function(t){wPe(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(r){return r<=8?156:155},e}(ia),_Pe=[new ia(!1,3,5,8,8,1),new ia(!1,5,7,10,10,1),new ia(!0,5,7,16,6,1),new ia(!1,8,10,12,12,1),new ia(!0,10,11,14,6,2),new ia(!1,12,12,14,14,1),new ia(!0,16,14,24,10,1),new ia(!1,18,14,16,16,1),new ia(!1,22,18,18,18,1),new ia(!0,22,18,16,10,2),new ia(!1,30,20,20,20,1),new ia(!0,32,24,16,14,2),new ia(!1,36,24,22,22,1),new ia(!1,44,28,24,24,1),new ia(!0,49,28,22,14,2),new ia(!1,62,36,14,14,4),new ia(!1,86,42,16,16,4),new ia(!1,114,48,18,18,4),new ia(!1,144,56,20,20,4),new ia(!1,174,68,22,22,4),new ia(!1,204,84,24,24,4,102,42),new ia(!1,280,112,14,14,16,140,56),new ia(!1,368,144,16,16,16,92,36),new ia(!1,456,192,18,18,16,114,48),new ia(!1,576,224,20,20,16,144,56),new ia(!1,696,272,22,22,16,174,68),new ia(!1,816,336,24,24,16,136,56),new ia(!1,1050,408,18,18,36,175,68),new ia(!1,1304,496,20,20,36,163,62),new CPe],EPe=function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var r=e.split("").map(function(l){return l.charCodeAt(0)}),n=new _n,a=0,s=r.length;a<s;a++){var i=String.fromCharCode(r[a]&255);if(i==="?"&&e.charAt(a)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(i)}this.msg=n.toString(),this.shape=0,this.codewords=new _n,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,r){this.minSize=e,this.maxSize=r},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=ia.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t}(),SPe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),IPe=function(t){SPe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Hi},e.prototype.encode=function(r){for(var n=new _n;r.hasMoreCharacters();){var a=r.getCurrentChar();r.pos++,this.encodeChar(a,n);var s=n.length();if(s%3===0){this.writeNextTriplet(r,n);var i=Td.lookAheadTest(r.getMessage(),r.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){r.signalEncoderChange(xa);break}}}this.handleEOD(r,n)},e.prototype.encodeChar=function(r,n){switch(r){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:r>=48&&r<=57?n.append(r-48+4):r>=65&&r<=90?n.append(r-65+14):Td.illegalCharacter($n.getCharAt(r));break}return 1},e.prototype.handleEOD=function(r,n){r.updateSymbolInfo();var a=r.getSymbolInfo().getDataCapacity()-r.getCodewordCount(),s=n.length();r.pos-=s,(r.getRemainingCharacters()>1||a>1||r.getRemainingCharacters()!==a)&&r.writeCodeword(xPe),r.getNewEncoding()<0&&r.signalEncoderChange(xa)},e}(mD),jPe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),PPe=function(t){jPe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return $l},e.prototype.encodeChar=function(r,n){if(r===32)return n.append(3),1;if(r>=48&&r<=57)return n.append(r-48+4),1;if(r>=97&&r<=122)return n.append(r-97+14),1;if(r<32)return n.append(0),n.append(r),2;if(r<=47)return n.append(1),n.append(r-33),2;if(r<=64)return n.append(1),n.append(r-58+15),2;if(r>=91&&r<=95)return n.append(1),n.append(r-91+22),2;if(r===96)return n.append(2),n.append(0),2;if(r<=90)return n.append(2),n.append(r-65+1),2;if(r<=127)return n.append(2),n.append(r-123+27),2;n.append("1");var a=2;return a+=this.encodeChar(r-128,n),a},e}(mD),Td=function(){function t(){}return t.randomize253State=function(e){var r=149*e%253+1,n=XV+r;return n<=254?n:n-254},t.encodeHighLevel=function(e,r,n,a,s){r===void 0&&(r=0),n===void 0&&(n=null),a===void 0&&(a=null),s===void 0&&(s=!1);var i=new mD,l=[new vPe,i,new PPe,new IPe,new bPe,new yPe],c=new EPe(e);c.setSymbolShape(r),c.setSizeConstraints(n,a),e.startsWith(YV)&&e.endsWith(ZV)?(c.writeCodeword(APe),c.setSkipAtEnd(2),c.pos+=YV.length):e.startsWith(JV)&&e.endsWith(ZV)&&(c.writeCodeword(hPe),c.setSkipAtEnd(2),c.pos+=JV.length);var u=xa;for(s&&(i.encodeMaximal(c),u=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)l[u].encode(c),c.getNewEncoding()>=0&&(u=c.getNewEncoding(),c.resetEncoderSignal());var d=c.getCodewordCount();c.updateSymbolInfo();var f=c.getSymbolInfo().getDataCapacity();d<f&&u!==xa&&u!==yl&&u!==xo&&c.writeCodeword("");var h=c.getCodewords();for(h.length()<f&&h.append(XV);h.length()<f;)h.append(this.randomize253State(h.length()+1));return c.getCodewords().toString()},t.lookAheadTest=function(e,r,n){var a=this.lookAheadTestIntern(e,r,n);if(n===Hi&&a===Hi){for(var s=Math.min(r+3,e.length),i=r;i<s;i++)if(!this.isNativeX12(e.charCodeAt(i)))return xa}else if(n===xo&&a===xo){for(var s=Math.min(r+4,e.length),i=r;i<s;i++)if(!this.isNativeEDIFACT(e.charCodeAt(i)))return xa}return a},t.lookAheadTestIntern=function(e,r,n){if(r>=e.length)return n;var a;n===xa?a=[0,1,1,1,1,1.25]:(a=[1,2,2,2,2,2.25],a[n]=0);for(var s=0,i=new Uint8Array(6),l=[];;){if(r+s===e.length){Ji.fill(i,0),Ji.fill(l,0);var c=this.findMinimums(a,l,Pn.MAX_VALUE,i),u=this.getMinimumCount(i);if(l[xa]===c)return xa;if(u===1){if(i[yl]>0)return yl;if(i[xo]>0)return xo;if(i[$l]>0)return $l;if(i[Hi]>0)return Hi}return $o}var d=e.charCodeAt(r+s);if(s++,this.isDigit(d)?a[xa]+=.5:this.isExtendedASCII(d)?(a[xa]=Math.ceil(a[xa]),a[xa]+=2):(a[xa]=Math.ceil(a[xa]),a[xa]++),this.isNativeC40(d)?a[$o]+=2/3:this.isExtendedASCII(d)?a[$o]+=8/3:a[$o]+=4/3,this.isNativeText(d)?a[$l]+=2/3:this.isExtendedASCII(d)?a[$l]+=8/3:a[$l]+=4/3,this.isNativeX12(d)?a[Hi]+=2/3:this.isExtendedASCII(d)?a[Hi]+=13/3:a[Hi]+=10/3,this.isNativeEDIFACT(d)?a[xo]+=3/4:this.isExtendedASCII(d)?a[xo]+=17/4:a[xo]+=13/4,this.isSpecialB256(d)?a[yl]+=4:a[yl]++,s>=4){if(Ji.fill(i,0),Ji.fill(l,0),this.findMinimums(a,l,Pn.MAX_VALUE,i),l[xa]<this.min(l[yl],l[$o],l[$l],l[Hi],l[xo]))return xa;if(l[yl]<l[xa]||l[yl]+1<this.min(l[$o],l[$l],l[Hi],l[xo]))return yl;if(l[xo]+1<this.min(l[yl],l[$o],l[$l],l[Hi],l[xa]))return xo;if(l[$l]+1<this.min(l[yl],l[$o],l[xo],l[Hi],l[xa]))return $l;if(l[Hi]+1<this.min(l[yl],l[$o],l[xo],l[$l],l[xa]))return Hi;if(l[$o]+1<this.min(l[xa],l[yl],l[xo],l[$l])){if(l[$o]<l[Hi])return $o;if(l[$o]===l[Hi]){for(var f=r+s+1;f<e.length;){var h=e.charCodeAt(f);if(this.isX12TermSep(h))return Hi;if(!this.isNativeX12(h))break;f++}return $o}}}}},t.min=function(e,r,n,a,s){var i=Math.min(e,Math.min(r,Math.min(n,a)));return s===void 0?i:Math.min(i,s)},t.findMinimums=function(e,r,n,a){for(var s=0;s<6;s++){var i=r[s]=Math.ceil(e[s]);n>i&&(n=i,Ji.fill(a,0)),n===i&&(a[s]=a[s]+1)}return n},t.getMinimumCount=function(e){for(var r=0,n=0;n<6;n++)r+=e[n];return r||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,r){r===void 0&&(r=0);for(var n=e.length,a=r;a<n&&this.isDigit(e.charCodeAt(a));)a++;return a-r},t.illegalCharacter=function(e){var r=Pn.toHexString(e.charCodeAt(0));throw r="0000".substring(0,4-r.length)+r,new Error("Illegal character: "+e+" (0x"+r+")")},t}(),aP=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eH=function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return Zu.encode(e,this.charset)!=null}catch{return!1}},t}(),BPe=function(){function t(e,r,n){var a,s,i,l,c,u;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(E){return new eH(oPe.forName(E))}),this.encoders=[];var d=[];d.push(new eH(lPe.ISO_8859_1));for(var f=r!=null&&r.name.startsWith("UTF"),h=0;h<e.length;h++){var A=!1;try{for(var m=(a=void 0,aP(d)),p=m.next();!p.done;p=m.next()){var g=p.value,x=e.charAt(h),y=x.charCodeAt(0);if(y===n||g.canEncode(x)){A=!0;break}}}catch(E){a={error:E}}finally{try{p&&!p.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}if(!A)try{for(var b=(i=void 0,aP(this.ENCODERS)),w=b.next();!w.done;w=b.next()){var g=w.value;if(g.canEncode(e.charAt(h))){d.push(g),A=!0;break}}}catch(E){i={error:E}}finally{try{w&&!w.done&&(l=b.return)&&l.call(b)}finally{if(i)throw i.error}}A||(f=!0)}if(d.length===1&&!f)this.encoders=[d[0]];else{this.encoders=[];var j=0;try{for(var I=aP(d),_=I.next();!_.done;_=I.next()){var g=_.value;this.encoders[j++]=g}}catch(E){c={error:E}}finally{try{_&&!_.done&&(u=I.return)&&u.call(I)}finally{if(c)throw c.error}}}var S=-1;if(r!=null){for(var h=0;h<this.encoders.length;h++)if(this.encoders[h]!=null&&r.name===this.encoders[h].name){S=h;break}}this.priorityEncoderIndex=S}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return Zu.encode($n.getCharAt(e),this.encoders[r].name)},t}(),TPe=3,kPe=function(){function t(e,r,n){this.fnc1=n;var a=new BPe(e,r,n);if(a.length()===1)for(var s=0;s<this.bytes.length;s++){var i=e.charAt(s).charCodeAt(0);this.bytes[s]=i===n?1e3:i}else this.bytes=this.encodeMinimally(e,a,n)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,r){if(e+r-1>=this.bytes.length)return!1;for(var n=0;n<r;n++)if(this.isECI(e+n))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,r){if(e<0||e>r||r>this.length())throw new Error(""+e);for(var n=new _n,a=e;a<r;a++){if(this.isECI(a))throw new Error("value at "+a+" is not a character but an ECI");n.append(this.charAt(a))}return n.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,r,n){(e[r][n.encoderIndex]==null||e[r][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[r][n.encoderIndex]=n)},t.prototype.addEdges=function(e,r,n,a,s,i){var l=e.charAt(a).charCodeAt(0),c=0,u=r.length();r.getPriorityEncoderIndex()>=0&&(l===i||r.canEncode(l,r.getPriorityEncoderIndex()))&&(c=r.getPriorityEncoderIndex(),u=c+1);for(var d=c;d<u;d++)(l===i||r.canEncode(l,d))&&this.addEdge(n,a+1,new tH(l,r,d,s,i))},t.prototype.encodeMinimally=function(e,r,n){var a=e.length,s=new tH[a+1][r.length()];this.addEdges(e,r,s,0,null,n);for(var i=1;i<=a;i++){for(var l=0;l<r.length();l++)s[i][l]!=null&&i<a&&this.addEdges(e,r,s,i,s[i][l],n);for(var l=0;l<r.length();l++)s[i-1][l]=null}for(var c=-1,u=Pn.MAX_VALUE,l=0;l<r.length();l++)if(s[a][l]!=null){var d=s[a][l];d.cachedTotalSize<u&&(u=d.cachedTotalSize,c=l)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var f=[],h=s[a][c];h!=null;){if(h.isFNC1())f.unshift(1e3);else for(var A=r.encode(h.c,h.encoderIndex),i=A.length-1;i>=0;i--)f.unshift(A[i]&255);var m=h.previous===null?0:h.previous.encoderIndex;m!==h.encoderIndex&&f.unshift(256+r.getECIValue(h.encoderIndex)),h=h.previous}for(var p=[],i=0;i<p.length;i++)p[i]=f[i];return p},t}(),tH=function(){function t(e,r,n,a,s){this.c=e,this.encoderSet=r,this.encoderIndex=n,this.previous=a,this.fnc1=s,this.c=e===s?1e3:e;var i=this.isFNC1()?1:r.encode(e,n).length,l=a===null?0:a.encoderIndex;l!==n&&(i+=TPe),a!=null&&(i+=a.cachedTotalSize),this.cachedTotalSize=i}return t.prototype.isFNC1=function(){return this.c===1e3},t}(),FPe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var rH;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(rH||(rH={}));(function(t){FPe(e,t);function e(r,n,a,s,i){var l=t.call(this,r,n,a)||this;return l.shape=s,l.macroId=i,l}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(kPe);var OPe=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t}(),nH=function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,r){return e.sort(r)[0]},t}(),DPe=function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t}(),RPe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pD=function(t){RPe(e,t);function e(r,n,a){var s=t.call(this,r)||this;return s.value=n,s.bitCount=a,s}return e.prototype.appendTo=function(r,n){r.appendBits(this.value,this.bitCount)},e.prototype.add=function(r,n){return new e(this,r,n)},e.prototype.addBinaryShift=function(r,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,r,n)},e.prototype.toString=function(){var r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+Pn.toBinaryString(r|1<<this.bitCount).substring(1)+">"},e}(DPe),MPe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),LPe=function(t){MPe(e,t);function e(r,n,a){var s=t.call(this,r,0,0)||this;return s.binaryShiftStart=n,s.binaryShiftByteCount=a,s}return e.prototype.appendTo=function(r,n){for(var a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):a===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(n[this.binaryShiftStart+a],8)},e.prototype.addBinaryShift=function(r,n){return new e(this,r,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(pD);function UPe(t,e,r){return new LPe(t,e,r)}function cy(t,e,r){return new pD(t,e,r)}var QPe=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],K0=0,CS=1,Wu=2,ure=3,Pf=4,VPe=new pD(null,0,0),sP=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],HPe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function $Pe(t){var e,r;try{for(var n=HPe(t),a=n.next();!a.done;a=n.next()){var s=a.value;Ji.fill(s,-1)}}catch(i){e={error:i}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t[K0][Pf]=0,t[CS][Pf]=0,t[CS][K0]=28,t[ure][Pf]=0,t[Wu][Pf]=0,t[Wu][K0]=15,t}var dre=$Pe(Ji.createInt32Array(6,6)),GPe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},KPe=function(){function t(e,r,n,a){this.token=e,this.mode=r,this.binaryShiftByteCount=n,this.bitCount=a}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,r){var n=this.bitCount,a=this.token;if(e!==this.mode){var s=sP[this.mode][e];a=cy(a,s&65535,s>>16),n+=s>>16}var i=e===Wu?4:5;return a=cy(a,r,i),new t(a,e,0,n+i)},t.prototype.shiftAndAppend=function(e,r){var n=this.token,a=this.mode===Wu?4:5;return n=cy(n,dre[this.mode][e],a),n=cy(n,r,5),new t(n,this.mode,0,this.bitCount+a+5)},t.prototype.addBinaryShiftChar=function(e){var r=this.token,n=this.mode,a=this.bitCount;if(this.mode===Pf||this.mode===Wu){var s=sP[n][K0];r=cy(r,s&65535,s>>16),a+=s>>16,n=K0}var i=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,l=new t(r,n,this.binaryShiftByteCount+1,a+i);return l.binaryShiftByteCount===2078&&(l=l.endBinaryShift(e+1)),l},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var r=this.token;return r=UPe(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(r,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var r=this.bitCount+(sP[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount},t.prototype.toBitArray=function(e){for(var r,n,a=[],s=this.endBinaryShift(e.length).token;s!==null;s=s.getPrevious())a.unshift(s);var i=new _o;try{for(var l=GPe(a),c=l.next();!c.done;c=l.next()){var u=c.value;u.appendTo(i,e)}}catch(d){r={error:d}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return i},t.prototype.toString=function(){return $n.format("%s bits=%d bytes=%d",QPe[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(VPe,K0,0,0),t}();function qPe(t){var e=$n.getCharCode(" "),r=$n.getCharCode("."),n=$n.getCharCode(",");t[K0][e]=1;for(var a=$n.getCharCode("Z"),s=$n.getCharCode("A"),i=s;i<=a;i++)t[K0][i]=i-s+2;t[CS][e]=1;for(var l=$n.getCharCode("z"),c=$n.getCharCode("a"),i=c;i<=l;i++)t[CS][i]=i-c+2;t[Wu][e]=1;for(var u=$n.getCharCode("9"),d=$n.getCharCode("0"),i=d;i<=u;i++)t[Wu][i]=i-d+2;t[Wu][n]=12,t[Wu][r]=13;for(var f=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],h=0;h<f.length;h++)t[ure][$n.getCharCode(f[h])]=h;for(var A=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],h=0;h<A.length;h++)$n.getCharCode(A[h])>0&&(t[Pf][$n.getCharCode(A[h])]=h);return t}var iP=qPe(Ji.createInt32Array(5,256)),RC=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zPe=function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=$n.getCharCode(" "),r=$n.getCharCode(`
`),n=nH.singletonList(KPe.INITIAL_STATE),a=0;a<this.text.length;a++){var s=void 0,i=a+1<this.text.length?this.text[a+1]:0;switch(this.text[a]){case $n.getCharCode("\r"):s=i===r?2:0;break;case $n.getCharCode("."):s=i===e?3:0;break;case $n.getCharCode(","):s=i===e?4:0;break;case $n.getCharCode(":"):s=i===e?5:0;break;default:s=0}s>0?(n=t.updateStateListForPair(n,a,s),a++):n=this.updateStateListForChar(n,a)}var l=nH.min(n,function(c,u){return c.getBitCount()-u.getBitCount()});return l.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,r){var n,a,s=[];try{for(var i=RC(e),l=i.next();!l.done;l=i.next()){var c=l.value;this.updateStateForChar(c,r,s)}}catch(u){n={error:u}}finally{try{l&&!l.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}return t.simplifyStates(s)},t.prototype.updateStateForChar=function(e,r,n){for(var a=this.text[r]&255,s=iP[e.getMode()][a]>0,i=null,l=0;l<=Pf;l++){var c=iP[l][a];if(c>0){if(i==null&&(i=e.endBinaryShift(r)),!s||l===e.getMode()||l===Wu){var u=i.latchAndAppend(l,c);n.push(u)}if(!s&&dre[e.getMode()][l]>=0){var d=i.shiftAndAppend(l,c);n.push(d)}}}if(e.getBinaryShiftByteCount()>0||iP[e.getMode()][a]===0){var f=e.addBinaryShiftChar(r);n.push(f)}},t.updateStateListForPair=function(e,r,n){var a,s,i=[];try{for(var l=RC(e),c=l.next();!c.done;c=l.next()){var u=c.value;this.updateStateForPair(u,r,n,i)}}catch(d){a={error:d}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}return this.simplifyStates(i)},t.updateStateForPair=function(e,r,n,a){var s=e.endBinaryShift(r);if(a.push(s.latchAndAppend(Pf,n)),e.getMode()!==Pf&&a.push(s.shiftAndAppend(Pf,n)),n===3||n===4){var i=s.latchAndAppend(Wu,16-n).latchAndAppend(Wu,1);a.push(i)}if(e.getBinaryShiftByteCount()>0){var l=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);a.push(l)}},t.simplifyStates=function(e){var r,n,a,s,i=[];try{for(var l=RC(e),c=l.next();!c.done;c=l.next()){var u=c.value,d=!0,f=function(g){if(g.isBetterThanOrEqualTo(u))return d=!1,"break";u.isBetterThanOrEqualTo(g)&&(i=i.filter(function(x){return x!==g}))};try{for(var h=(a=void 0,RC(i)),A=h.next();!A.done;A=h.next()){var m=A.value,p=f(m);if(p==="break")break}}catch(g){a={error:g}}finally{try{A&&!A.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}d&&i.push(u)}}catch(g){r={error:g}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return i},t}(),WPe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,r,n){var a=new zPe(e).encode(),s=Pn.truncDivision(a.getSize()*r,100)+11,i=a.getSize()+s,l,c,u,d,f;if(n!==t.DEFAULT_AZTEC_LAYERS){if(l=n<0,c=Math.abs(n),c>(l?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new Yr($n.format("Illegal value %s for layers",n));u=t.totalBitsInLayer(c,l),d=t.WORD_SIZE[c];var h=u-u%d;if(f=t.stuffBits(a,d),f.getSize()+s>h)throw new Yr("Data to large for user specified layer");if(l&&f.getSize()>d*64)throw new Yr("Data to large for user specified layer")}else{d=0,f=null;for(var A=0;;A++){if(A>t.MAX_NB_BITS)throw new Yr("Data too large for an Aztec code");if(l=A<=3,c=l?A+1:A,u=t.totalBitsInLayer(c,l),!(i>u)){(f==null||d!==t.WORD_SIZE[c])&&(d=t.WORD_SIZE[c],f=t.stuffBits(a,d));var h=u-u%d;if(!(l&&f.getSize()>d*64)&&f.getSize()+s<=h)break}}}var m=t.generateCheckWords(f,u,d),p=f.getSize()/d,g=t.generateModeMessage(l,c,p),x=(l?11:14)+c*4,y=new Int32Array(x),b;if(l){b=x;for(var A=0;A<y.length;A++)y[A]=A}else{b=x+1+2*Pn.truncDivision(Pn.truncDivision(x,2)-1,15);for(var w=Pn.truncDivision(x,2),j=Pn.truncDivision(b,2),A=0;A<w;A++){var I=A+Pn.truncDivision(A,15);y[w-A-1]=j-I-1,y[w+A]=j+I+1}}for(var _=new Uf(b),A=0,S=0;A<c;A++){for(var E=(c-A)*4+(l?9:12),k=0;k<E;k++)for(var P=k*2,T=0;T<2;T++)m.get(S+P+T)&&_.set(y[A*2+T],y[A*2+k]),m.get(S+E*2+P+T)&&_.set(y[A*2+k],y[x-1-A*2-T]),m.get(S+E*4+P+T)&&_.set(y[x-1-A*2-T],y[x-1-A*2-k]),m.get(S+E*6+P+T)&&_.set(y[x-1-A*2-k],y[A*2+T]);S+=E*8}if(t.drawModeMessage(_,l,b,g),l)t.drawBullsEye(_,Pn.truncDivision(b,2),5);else{t.drawBullsEye(_,Pn.truncDivision(b,2),7);for(var A=0,k=0;A<Pn.truncDivision(x,2)-1;A+=15,k+=16)for(var T=Pn.truncDivision(b,2)&1;T<b;T+=2)_.set(Pn.truncDivision(b,2)-k,T),_.set(Pn.truncDivision(b,2)+k,T),_.set(T,Pn.truncDivision(b,2)-k),_.set(T,Pn.truncDivision(b,2)+k)}var O=new OPe;return O.setCompact(l),O.setSize(b),O.setLayers(c),O.setCodeWords(p),O.setMatrix(_),O},t.drawBullsEye=function(e,r,n){for(var a=0;a<n;a+=2)for(var s=r-a;s<=r+a;s++)e.set(s,r-a),e.set(s,r+a),e.set(r-a,s),e.set(r+a,s);e.set(r-n,r-n),e.set(r-n+1,r-n),e.set(r-n,r-n+1),e.set(r+n,r-n),e.set(r+n,r-n+1),e.set(r+n,r+n-1)},t.generateModeMessage=function(e,r,n){var a=new _o;return e?(a.appendBits(r-1,2),a.appendBits(n-1,6),a=t.generateCheckWords(a,28,4)):(a.appendBits(r-1,5),a.appendBits(n-1,11),a=t.generateCheckWords(a,40,4)),a},t.drawModeMessage=function(e,r,n,a){var s=Pn.truncDivision(n,2);if(r)for(var i=0;i<7;i++){var l=s-3+i;a.get(i)&&e.set(l,s-5),a.get(i+7)&&e.set(s+5,l),a.get(20-i)&&e.set(l,s+5),a.get(27-i)&&e.set(s-5,l)}else for(var i=0;i<10;i++){var l=s-5+i+Pn.truncDivision(i,5);a.get(i)&&e.set(l,s-7),a.get(i+10)&&e.set(s+7,l),a.get(29-i)&&e.set(l,s+7),a.get(39-i)&&e.set(s-7,l)}},t.generateCheckWords=function(e,r,n){var a,s,i=e.getSize()/n,l=new lre(t.getGF(n)),c=Pn.truncDivision(r,n),u=t.bitsToWords(e,n,c);l.encode(u,c-i);var d=r%n,f=new _o;f.appendBits(0,d);try{for(var h=WPe(Array.from(u)),A=h.next();!A.done;A=h.next()){var m=A.value;f.appendBits(m,n)}}catch(p){a={error:p}}finally{try{A&&!A.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}return f},t.bitsToWords=function(e,r,n){var a=new Int32Array(n),s,i;for(s=0,i=e.getSize()/r;s<i;s++){for(var l=0,c=0;c<r;c++)l|=e.get(s*r+c)?1<<r-c-1:0;a[s]=l}return a},t.getGF=function(e){switch(e){case 4:return xc.AZTEC_PARAM;case 6:return xc.AZTEC_DATA_6;case 8:return xc.AZTEC_DATA_8;case 10:return xc.AZTEC_DATA_10;case 12:return xc.AZTEC_DATA_12;default:throw new Yr("Unsupported word size "+e)}},t.stuffBits=function(e,r){for(var n=new _o,a=e.getSize(),s=(1<<r)-2,i=0;i<a;i+=r){for(var l=0,c=0;c<r;c++)(i+c>=a||e.get(i+c))&&(l|=1<<r-1-c);(l&s)===s?(n.appendBits(l&s,r),i--):l&s?n.appendBits(l,r):(n.appendBits(l|1,r),i--)}return n},t.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();var XPe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),YPe=function(t){XPe(e,t);function e(r){var n=t.call(this,r.width,r.height)||this;return n.canvas=r,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(r),n}return e.makeBufferFromCanvasImageData=function(r){var n;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}if(!n)throw new Error("Couldn't get canvas context.");var a=n.getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(a.data,r.width,r.height)},e.toGrayscaleBuffer=function(r,n,a){for(var s=new Uint8ClampedArray(n*a),i=0,l=0,c=r.length;i<c;i+=4,l++){var u=void 0,d=r[i+3];if(d===0)u=255;else{var f=r[i],h=r[i+1],A=r[i+2];u=306*f+601*h+117*A+512>>10}s[l]=u}return s},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Yr("Requested row is outside the image: "+r);var a=this.getWidth(),s=r*a;return n===null?n=this.buffer.slice(s,s+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(s,s+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return t.prototype.crop.call(this,r,n,a,s),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new R4(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement();if(!n)throw new Error("Could not create a Canvas element.");var a=r*e.DEGREE_TO_RADIANS,s=this.canvas.width,i=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(a))*s+Math.abs(Math.sin(a))*i),c=Math.ceil(Math.abs(Math.sin(a))*s+Math.abs(Math.cos(a))*i);n.width=l,n.height=c;var u=n.getContext("2d");if(!u)throw new Error("Could not create a Canvas Context element.");return u.translate(l/2,c/2),u.rotate(a),u.drawImage(this.canvas,s/-2,i/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(Cw);function fre(){return typeof navigator<"u"}function JPe(){return fre()&&!!navigator.mediaDevices}function ZPe(){return!!(JPe()&&navigator.mediaDevices.enumerateDevices)}var Qx=function(){return Qx=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Qx.apply(this,arguments)},Es=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},Ss=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},oP=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eBe={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},s1=function(){function t(e,r,n){r===void 0&&(r=new Map),n===void 0&&(n={}),this.reader=e,this.hints=r,this.options=Qx(Qx({},eBe),n)}return Object.defineProperty(t.prototype,"possibleFormats",{set:function(e){this.hints.set(Ka.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),t.addVideoSource=function(e,r){try{e.srcObject=r}catch{console.error("got interrupted by new loading request")}},t.mediaStreamSetTorch=function(e,r){return Es(this,void 0,void 0,function(){return Ss(this,function(n){switch(n.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:r?"flash":"off",torch:!!r}]})];case 1:return n.sent(),[2]}})})},t.mediaStreamIsTorchCompatible=function(e){var r,n,a=e.getVideoTracks();try{for(var s=oP(a),i=s.next();!i.done;i=s.next()){var l=i.value;if(t.mediaStreamIsTorchCompatibleTrack(l))return!0}}catch(c){r={error:c}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return!1},t.mediaStreamIsTorchCompatibleTrack=function(e){try{var r=e.getCapabilities();return"torch"in r}catch(n){return console.error(n),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},t.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},t.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new di("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new di("element with id '".concat(e,"' must be an ").concat(r," element"));return n},t.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return t.getMediaElement(e,"video");if(!e&&typeof document<"u"){var r=document.createElement("video");return r.width=200,r.height=200,r}throw new Error("Couldn't get videoElement from videoSource!")},t.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return t.getMediaElement(e,"img");if(typeof e>"u"){var r=document.createElement("img");return r.width=200,r.height=200,r}throw new Error("Couldn't get imageElement from imageSource!")},t.prepareVideoElement=function(e){var r=t.createVideoElement(e);return r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.createBinaryBitmapFromCanvas=function(e){var r=new YPe(e),n=new Xte(r);return new Wte(n)},t.drawImageOnCanvas=function(e,r){e.drawImage(r,0,0)},t.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},t.createCaptureCanvas=function(e){if(!e)throw new di("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var r=document.createElement("canvas"),n=t.getMediaElementDimensions(e),a=n.width,s=n.height;return r.style.width=a+"px",r.style.height=s+"px",r.width=a,r.height=s,r},t.tryPlayVideo=function(e){return Es(this,void 0,void 0,function(){var r;return Ss(this,function(n){switch(n.label){case 0:if(e!=null&&e.ended)return console.error("Trying to play video that has ended."),[2,!1];if(t.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[2,!0];case 3:return r=n.sent(),console.warn("It was not possible to play the video.",r),[2,!1];case 4:return[2]}})})},t.createCanvasFromMediaElement=function(e){var r=t.createCaptureCanvas(e),n=r.getContext("2d");if(!n)throw new Error("Couldn't find Canvas 2D Context.");return t.drawImageOnCanvas(n,e),r},t.createBinaryBitmapFromMediaElem=function(e){var r=t.createCanvasFromMediaElement(e);return t.createBinaryBitmapFromCanvas(r)},t.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},t.listVideoInputDevices=function(){return Es(this,void 0,void 0,function(){var e,r,n,a,s,i,l,c,u,d,f,h;return Ss(this,function(A){switch(A.label){case 0:if(!fre())throw new Error("Can't enumerate devices, navigator is not present.");if(!ZPe())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=A.sent(),r=[];try{for(n=oP(e),a=n.next();!a.done;a=n.next())s=a.value,i=s.kind==="video"?"videoinput":s.kind,i==="videoinput"&&(l=s.deviceId||s.id,c=s.label||"Video device ".concat(r.length+1),u=s.groupId,d={deviceId:l,label:c,kind:i,groupId:u},r.push(d))}catch(m){f={error:m}}finally{try{a&&!a.done&&(h=n.return)&&h.call(n)}finally{if(f)throw f.error}}return[2,r]}})})},t.findDeviceById=function(e){return Es(this,void 0,void 0,function(){var r;return Ss(this,function(n){switch(n.label){case 0:return[4,t.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(a){return a.deviceId===e})]:[2]}})})},t.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},t.releaseAllStreams=function(){t.streamTracker.length!==0&&t.streamTracker.forEach(function(e){e.getTracks().forEach(function(r){return r.stop()})}),t.streamTracker=[]},t.playVideoOnLoadAsync=function(e,r){return Es(this,void 0,void 0,function(){var n;return Ss(this,function(a){switch(a.label){case 0:return[4,t.tryPlayVideo(e)];case 1:return n=a.sent(),n?[2,!0]:[2,new Promise(function(s,i){var l=setTimeout(function(){t.isVideoPlaying(e)||(i(!1),e.removeEventListener("canplay",c))},r),c=function(){t.tryPlayVideo(e).then(function(u){clearTimeout(l),e.removeEventListener("canplay",c),s(u)})};e.addEventListener("canplay",c)})]}})})},t.attachStreamToVideo=function(e,r,n){return n===void 0&&(n=5e3),Es(this,void 0,void 0,function(){var a;return Ss(this,function(s){switch(s.label){case 0:return a=t.prepareVideoElement(r),t.addVideoSource(a,e),[4,t.playVideoOnLoadAsync(a,n)];case 1:return s.sent(),[2,a]}})})},t._waitImageLoad=function(e){return new Promise(function(r,n){var a=1e4,s=setTimeout(function(){t.isImageLoaded(e)||(e.removeEventListener("load",i),n())},a),i=function(){clearTimeout(s),e.removeEventListener("load",i),r()};e.addEventListener("load",i)})},t.checkCallbackFnOrThrow=function(e){if(!e)throw new di("`callbackFn` is a required parameter, you cannot capture results without it.")},t.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(r){return r.stop()}),e=void 0},t.prototype.decode=function(e){var r=t.createCanvasFromMediaElement(e);return this.decodeFromCanvas(r)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},t.prototype.decodeFromCanvas=function(e){var r=t.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(r)},t.prototype.decodeFromImageElement=function(e){return Es(this,void 0,void 0,function(){var r;return Ss(this,function(n){switch(n.label){case 0:if(!e)throw new di("An image element must be provided.");return r=t.prepareImageElement(e),[4,this._decodeOnLoadImage(r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeFromImageUrl=function(e){return Es(this,void 0,void 0,function(){var r;return Ss(this,function(n){switch(n.label){case 0:if(!e)throw new di("An URL must be provided.");r=t.prepareImageElement(),r.src=e,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.decodeFromImageElement(r)];case 2:return[2,n.sent()];case 3:return t.destroyImageElement(r),[7];case 4:return[2]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return Es(this,void 0,void 0,function(){var a,s;return Ss(this,function(i){switch(i.label){case 0:return t.checkCallbackFnOrThrow(n),[4,this.getUserMedia(e)];case 1:a=i.sent(),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this.decodeFromStream(a,r,n)];case 3:return[2,i.sent()];case 4:throw s=i.sent(),t.disposeMediaStream(a),s;case 5:return[2]}})})},t.prototype.decodeFromStream=function(e,r,n){return Es(this,void 0,void 0,function(){var a,s,i,l,c,u,d,f,h,A=this;return Ss(this,function(m){switch(m.label){case 0:return t.checkCallbackFnOrThrow(n),a=this.options.tryPlayVideoTimeout,[4,t.attachStreamToVideo(e,r,a)];case 1:return s=m.sent(),i=function(){t.disposeMediaStream(e),t.cleanVideoSource(s)},l=this.scan(s,n,i),c=e.getVideoTracks(),u=Qx(Qx({},l),{stop:function(){l.stop()},streamVideoConstraintsApply:function(p,g){return Es(this,void 0,void 0,function(){var x,y,b,w,j,I,_;return Ss(this,function(S){switch(S.label){case 0:x=g?c.filter(g):c,S.label=1;case 1:S.trys.push([1,6,7,8]),y=oP(x),b=y.next(),S.label=2;case 2:return b.done?[3,5]:(w=b.value,[4,w.applyConstraints(p)]);case 3:S.sent(),S.label=4;case 4:return b=y.next(),[3,2];case 5:return[3,8];case 6:return j=S.sent(),I={error:j},[3,8];case 7:try{b&&!b.done&&(_=y.return)&&_.call(y)}finally{if(I)throw I.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(p){return c.find(p).getConstraints()},streamVideoSettingsGet:function(p){return c.find(p).getSettings()},streamVideoCapabilitiesGet:function(p){return c.find(p).getCapabilities()}}),d=t.mediaStreamIsTorchCompatible(e),d&&(f=c==null?void 0:c.find(function(p){return t.mediaStreamIsTorchCompatibleTrack(p)}),h=function(p){return Es(A,void 0,void 0,function(){return Ss(this,function(g){switch(g.label){case 0:return[4,t.mediaStreamSetTorch(f,p)];case 1:return g.sent(),[2]}})})},u.switchTorch=h,u.stop=function(){return Es(A,void 0,void 0,function(){return Ss(this,function(p){switch(p.label){case 0:return l.stop(),[4,h(!1)];case 1:return p.sent(),[2]}})})}),[2,u]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return Es(this,void 0,void 0,function(){var a,s;return Ss(this,function(i){switch(i.label){case 0:return t.checkCallbackFnOrThrow(n),e?a={deviceId:{exact:e}}:a={facingMode:"environment"},s={video:a},[4,this.decodeFromConstraints(s,r,n)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromVideoElement=function(e,r){return Es(this,void 0,void 0,function(){var n,a;return Ss(this,function(s){switch(s.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new di("A video element must be provided.");return n=t.prepareVideoElement(e),a=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,a)];case 1:return s.sent(),[2,this.scan(n,r)]}})})},t.prototype.decodeFromVideoUrl=function(e,r){return Es(this,void 0,void 0,function(){var n,a,s,i;return Ss(this,function(l){switch(l.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new di("An URL must be provided.");return n=t.prepareVideoElement(),n.src=e,a=function(){t.cleanVideoSource(n)},s=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,s)];case 1:return l.sent(),i=this.scan(n,r,a),[2,i]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return Es(this,void 0,void 0,function(){var n;return Ss(this,function(a){switch(a.label){case 0:return[4,this.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return Es(this,void 0,void 0,function(){var n,a,s;return Ss(this,function(i){switch(i.label){case 0:return n=!!r,[4,t.attachStreamToVideo(e,r)];case 1:a=i.sent(),i.label=2;case 2:return i.trys.push([2,,4,5]),[4,this.scanOneResult(a)];case 3:return s=i.sent(),[2,s];case 4:return n||t.cleanVideoSource(a),[7];case 5:return[2]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return Es(this,void 0,void 0,function(){var n,a;return Ss(this,function(s){switch(s.label){case 0:return e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeOnceFromVideoElement=function(e){return Es(this,void 0,void 0,function(){var r,n;return Ss(this,function(a){switch(a.label){case 0:if(!e)throw new di("A video element must be provided.");return r=t.prepareVideoElement(e),n=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(r,n)];case 1:return a.sent(),[4,this.scanOneResult(r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromVideoUrl=function(e){return Es(this,void 0,void 0,function(){var r,n;return Ss(this,function(a){switch(a.label){case 0:if(!e)throw new di("An URL must be provided.");r=t.prepareVideoElement(),r.src=e,n=this.decodeOnceFromVideoElement(r),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,n];case 2:return[2,a.sent()];case 3:return t.cleanVideoSource(r),[7];case 4:return[2]}})})},t.prototype.scanOneResult=function(e,r,n,a){var s=this;return r===void 0&&(r=!0),n===void 0&&(n=!0),a===void 0&&(a=!0),new Promise(function(i,l){s.scan(e,function(c,u,d){if(c){i(c),d.stop();return}if(u){if(u instanceof qt&&r||u instanceof Bi&&n||u instanceof yr&&a)return;d.stop(),l(u)}})})},t.prototype.scan=function(e,r,n){var a=this;t.checkCallbackFnOrThrow(r);var s=t.createCaptureCanvas(e),i;try{i=s.getContext("2d",{willReadFrequently:!0})}catch{i=s.getContext("2d")}if(!i)throw new Error("Couldn't create canvas for visual element scan.");var l=function(){i=void 0,s=void 0},c=!1,u,d=function(){c=!0,clearTimeout(u),l(),n&&n()},f={stop:d},h=function(){if(!c)try{t.drawImageOnCanvas(i,e);var A=a.decodeFromCanvas(s);r(A,void 0,f),u=setTimeout(h,a.options.delayBetweenScanSuccess)}catch(x){r(void 0,x,f);var m=x instanceof Bi,p=x instanceof yr,g=x instanceof qt;if(m||p||g){u=setTimeout(h,a.options.delayBetweenScanAttempts);return}l(),n&&n(x)}};return h(),f},t.prototype._decodeOnLoadImage=function(e){return Es(this,void 0,void 0,function(){var r;return Ss(this,function(n){switch(n.label){case 0:return r=t.isImageLoaded(e),r?[3,2]:[4,t._waitImageLoad(e)];case 1:n.sent(),n.label=2;case 2:return[2,this.decode(e)]}})})},t.prototype.getUserMedia=function(e){return Es(this,void 0,void 0,function(){var r;return Ss(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=n.sent(),t.streamTracker.push(r),[2,r]}})})},t.streamTracker=[],t}(),tBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){tBe(e,t);function e(r,n){return t.call(this,new vS,r,n)||this}return e})(s1);var rBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){rBe(e,t);function e(r,n){return t.call(this,new Lx(r),r,n)||this}return e})(s1);var nBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){nBe(e,t);function e(r,n){return t.call(this,new bS,r,n)||this}return e})(s1);var aBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),g2=function(t){aBe(e,t);function e(r,n){var a=this,s=new ore;return s.setHints(r),a=t.call(this,s,r,n)||this,a.reader=s,a}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(r){this.hints.set(Ka.POSSIBLE_FORMATS,r),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e.prototype.setHints=function(r){this.hints=r,this.reader.setHints(this.hints)},e}(s1),sBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){sBe(e,t);function e(r,n){return t.call(this,new NS,r,n)||this}return e})(s1);var iBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){iBe(e,t);function e(r,n){return t.call(this,new wS,r,n)||this}return e})(s1);/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var _S={};_S.version="0.18.5";var Are=1252,oBe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],gD={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},xD=function(t){oBe.indexOf(t)!=-1&&(Are=gD[0]=t)};function lBe(){xD(1252)}var Dd=function(t){xD(t)};function vD(){Dd(1200),lBe()}function aH(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function cBe(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function hre(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var Uy=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?cBe(t.slice(2)):e==254&&r==255?hre(t.slice(2)):e==65279?t.slice(1):t},MC=function(e){return String.fromCharCode(e)},sH=function(e){return String.fromCharCode(e)},x2,S0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function v2(t){for(var e="",r=0,n=0,a=0,s=0,i=0,l=0,c=0,u=0;u<t.length;)r=t.charCodeAt(u++),s=r>>2,n=t.charCodeAt(u++),i=(r&3)<<4|n>>4,a=t.charCodeAt(u++),l=(n&15)<<2|a>>6,c=a&63,isNaN(n)?l=c=64:isNaN(a)&&(c=64),e+=S0.charAt(s)+S0.charAt(i)+S0.charAt(l)+S0.charAt(c);return e}function uu(t){var e="",r=0,n=0,a=0,s=0,i=0,l=0,c=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<t.length;)s=S0.indexOf(t.charAt(u++)),i=S0.indexOf(t.charAt(u++)),r=s<<2|i>>4,e+=String.fromCharCode(r),l=S0.indexOf(t.charAt(u++)),n=(i&15)<<4|l>>2,l!==64&&(e+=String.fromCharCode(n)),c=S0.indexOf(t.charAt(u++)),a=(l&3)<<6|c,c!==64&&(e+=String.fromCharCode(a));return e}var En=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),hh=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function sm(t){return En?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function iH(t){return En?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Yc=function(e){return En?hh(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function U4(t){if(typeof ArrayBuffer>"u")return Yc(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function xm(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function uBe(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function yD(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return yD(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var Co=En?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:hh(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),a=0;for(e=0,r=0;e<t.length;r+=a,++e)if(a=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function dBe(t){for(var e=[],r=0,n=t.length+250,a=sm(t.length+255),s=0;s<t.length;++s){var i=t.charCodeAt(s);if(i<128)a[r++]=i;else if(i<2048)a[r++]=192|i>>6&31,a[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var l=t.charCodeAt(++s)&1023;a[r++]=240|i>>8&7,a[r++]=128|i>>2&63,a[r++]=128|l>>6&15|(i&3)<<4,a[r++]=128|l&63}else a[r++]=224|i>>12&15,a[r++]=128|i>>6&63,a[r++]=128|i&63;r>n&&(e.push(a.slice(0,r)),r=0,a=sm(65535),n=65530)}return e.push(a.slice(0,r)),Co(e)}var tc=/\u0000/g,Qy=/[\u0001-\u0006]/g;function rv(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function Rd(t,e){var r=""+t;return r.length>=e?r:Xs("0",e-r.length)+r}function bD(t,e){var r=""+t;return r.length>=e?r:Xs(" ",e-r.length)+r}function ES(t,e){var r=""+t;return r.length>=e?r:r+Xs(" ",e-r.length)}function fBe(t,e){var r=""+Math.round(t);return r.length>=e?r:Xs("0",e-r.length)+r}function ABe(t,e){var r=""+t;return r.length>=e?r:Xs("0",e-r.length)+r}var oH=Math.pow(2,32);function nx(t,e){if(t>oH||t<-oH)return fBe(t,e);var r=Math.round(t);return ABe(r,e)}function SS(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var lH=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],lP=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function hBe(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var en={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},cH={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},mBe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function IS(t,e,r){for(var n=t<0?-1:1,a=t*n,s=0,i=1,l=0,c=1,u=0,d=0,f=Math.floor(a);u<e&&(f=Math.floor(a),l=f*i+s,d=f*u+c,!(a-f<5e-8));)a=1/(a-f),s=i,i=l,c=u,u=d;if(d>e&&(u>e?(d=c,l=s):(d=u,l=i)),!r)return[0,n*l,d];var h=Math.floor(n*l/d);return[h,n*l-h*d,d]}function lp(t,e,r){if(t>2958465||t<0)return null;var n=t|0,a=Math.floor(86400*(t-n)),s=0,i=[],l={D:n,T:a,u:86400*(t-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),e&&e.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++a==86400&&(l.T=a=0,++n,++l.D)),n===60)i=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),i=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=bBe(c,i))}return l.y=i[0],l.m=i[1],l.d=i[2],l.S=a%60,a=Math.floor(a/60),l.M=a%60,a=Math.floor(a/60),l.H=a,l.q=s,l}var mre=new Date(1899,11,31,0,0,0),pBe=mre.getTime(),gBe=new Date(1900,2,1,0,0,0);function pre(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=gBe&&(r+=24*60*60*1e3),(r-(pBe+(t.getTimezoneOffset()-mre.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function wD(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function xBe(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function vBe(t){var e=t<0?12:11,r=wD(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function yBe(t){var e=wD(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function y2(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=vBe(t):e===10?r=t.toFixed(10).substr(0,12):r=yBe(t),wD(xBe(r.toUpperCase()))}function zp(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):y2(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return ad(14,pre(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function bBe(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function wBe(t,e,r,n){var a="",s=0,i=0,l=r.y,c,u=0;switch(t){case 98:l=r.y+543;case 121:switch(e.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:c=r.m,u=e.length;break;case 3:return lP[r.m-1][1];case 5:return lP[r.m-1][0];default:return lP[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:c=r.d,u=e.length;break;case 3:return lH[r.q][0];default:return lH[r.q][1]}break;case 104:switch(e.length){case 1:case 2:c=1+(r.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:c=r.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:c=r.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?Rd(r.S,e.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,s=Math.round(i*(r.S+r.u)),s>=60*i&&(s=0),e==="s"?s===0?"0":""+s/i:(a=Rd(s,2+n),e==="ss"?a.substr(0,2):"."+a.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:c=l,u=1;break}var d=u>0?Rd(c,u):"";return d}function I0(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var gre=/%/g;function NBe(t,e,r){var n=e.replace(gre,""),a=e.length-n.length;return UA(t,n,r*Math.pow(10,2*a))+Xs("%",a)}function CBe(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return UA(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function xre(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+xre(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var i=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var vre=/# (\?+)( ?)\/( ?)(\d+)/;function _Be(t,e,r){var n=parseInt(t[4],10),a=Math.round(e*n),s=Math.floor(a/n),i=a-s*n,l=n;return r+(s===0?"":""+s)+" "+(i===0?Xs(" ",t[1].length+1+t[4].length):bD(i,t[1].length)+t[2]+"/"+t[3]+Rd(l,t[4].length))}function EBe(t,e,r){return r+(e===0?"":""+e)+Xs(" ",t[1].length+2+t[4].length)}var yre=/^#*0*\.([0#]+)/,bre=/\).*[0#]/,wre=/\(###\) ###\\?-####/;function zl(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function uH(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function dH(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function SBe(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function IBe(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function ku(t,e,r){if(t.charCodeAt(0)===40&&!e.match(bre)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?ku("n",n,r):"("+ku("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return CBe(t,e,r);if(e.indexOf("%")!==-1)return NBe(t,e,r);if(e.indexOf("E")!==-1)return xre(e,r);if(e.charCodeAt(0)===36)return"$"+ku(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,i,l,c=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+nx(c,e.length);if(e.match(/^[#?]+$/))return a=nx(r,0),a==="0"&&(a=""),a.length>e.length?a:zl(e.substr(0,e.length-a.length))+a;if(s=e.match(vre))return _Be(s,c,u);if(e.match(/^#+0+$/))return u+nx(c,e.length-e.indexOf("0"));if(s=e.match(yre))return a=uH(r,s[1].length).replace(/^([^\.]+)$/,"$1."+zl(s[1])).replace(/\.$/,"."+zl(s[1])).replace(/\.(\d*)$/,function(m,p){return"."+p+Xs("0",zl(s[1]).length-p.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+uH(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+I0(nx(c,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+ku(t,e,-r):I0(""+(Math.floor(r)+SBe(r,s[1].length)))+"."+Rd(dH(r,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return ku(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=rv(ku(t,e.replace(/[\\-]/g,""),r)),i=0,rv(rv(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return i<a.length?a.charAt(i++):m==="0"?"0":""}));if(e.match(wre))return a=ku(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),l=IS(c,Math.pow(10,i)-1,!1),a=""+u,d=UA("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=ES(l[2],i),d.length<s[4].length&&(d=zl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),l=IS(c,Math.pow(10,i)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?bD(l[1],i)+s[2]+"/"+s[3]+ES(l[2],i):Xs(" ",2*i+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=nx(r,0),e.length<=a.length?a:zl(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var f=e.indexOf(".")-i,h=e.length-a.length-f;return zl(e.substr(0,f)+a+e.substr(e.length-h))}if(s=e.match(/^00,000\.([#0]*0)$/))return i=dH(r,s[1].length),r<0?"-"+ku(t,e,-r):I0(IBe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?Rd(0,3-m.length):"")+m})+"."+Rd(i,s[1].length);switch(e){case"###,##0.00":return ku(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var A=I0(nx(c,0));return A!=="0"?u+A:"";case"###,###.00":return ku(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return ku(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function jBe(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return UA(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function PBe(t,e,r){var n=e.replace(gre,""),a=e.length-n.length;return UA(t,n,r*Math.pow(10,2*a))+Xs("%",a)}function Nre(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+Nre(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var i=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function yf(t,e,r){if(t.charCodeAt(0)===40&&!e.match(bre)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?yf("n",n,r):"("+yf("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return jBe(t,e,r);if(e.indexOf("%")!==-1)return PBe(t,e,r);if(e.indexOf("E")!==-1)return Nre(e,r);if(e.charCodeAt(0)===36)return"$"+yf(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,i,l,c=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+Rd(c,e.length);if(e.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>e.length?a:zl(e.substr(0,e.length-a.length))+a;if(s=e.match(vre))return EBe(s,c,u);if(e.match(/^#+0+$/))return u+Rd(c,e.length-e.indexOf("0"));if(s=e.match(yre))return a=(""+r).replace(/^([^\.]+)$/,"$1."+zl(s[1])).replace(/\.$/,"."+zl(s[1])),a=a.replace(/\.(\d*)$/,function(m,p){return"."+p+Xs("0",zl(s[1]).length-p.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+I0(""+c);if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+yf(t,e,-r):I0(""+r)+"."+Xs("0",s[1].length);if(s=e.match(/^#,#*,#0/))return yf(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=rv(yf(t,e.replace(/[\\-]/g,""),r)),i=0,rv(rv(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return i<a.length?a.charAt(i++):m==="0"?"0":""}));if(e.match(wre))return a=yf(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),l=IS(c,Math.pow(10,i)-1,!1),a=""+u,d=UA("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=ES(l[2],i),d.length<s[4].length&&(d=zl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),l=IS(c,Math.pow(10,i)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?bD(l[1],i)+s[2]+"/"+s[3]+ES(l[2],i):Xs(" ",2*i+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=""+r,e.length<=a.length?a:zl(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var f=e.indexOf(".")-i,h=e.length-a.length-f;return zl(e.substr(0,f)+a+e.substr(e.length-h))}if(s=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+yf(t,e,-r):I0(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?Rd(0,3-m.length):"")+m})+"."+Rd(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var A=I0(""+c);return A!=="0"?u+A:"";default:if(e.match(/\.[0#?]*$/))return yf(t,e.slice(0,e.lastIndexOf(".")),r)+zl(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function UA(t,e,r){return(r|0)===r?yf(t,e,r):ku(t,e,r)}function BBe(t){for(var e=[],r=!1,n=0,a=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(a,n-a),a=n+1}if(e[e.length]=t.substr(a),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var Cre=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function i1(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":SS(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(Cre))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function TBe(t,e,r,n){for(var a=[],s="",i=0,l="",c="t",u,d,f,h="H";i<t.length;)switch(l=t.charAt(i)){case"G":if(!SS(t,i))throw new Error("unrecognized character "+l+" in "+t);a[a.length]={t:"G",v:"General"},i+=7;break;case'"':for(s="";(f=t.charCodeAt(++i))!==34&&i<t.length;)s+=String.fromCharCode(f);a[a.length]={t:"t",v:s},++i;break;case"\\":var A=t.charAt(++i),m=A==="("||A===")"?A:"t";a[a.length]={t:m,v:A},++i;break;case"_":a[a.length]={t:"t",v:" "},i+=2;break;case"@":a[a.length]={t:"T",v:e},++i;break;case"B":case"b":if(t.charAt(i+1)==="1"||t.charAt(i+1)==="2"){if(u==null&&(u=lp(e,r,t.charAt(i+1)==="2"),u==null))return"";a[a.length]={t:"X",v:t.substr(i,2)},c=l,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=lp(e,r),u==null))return"";for(s=l;++i<t.length&&t.charAt(i).toLowerCase()===l;)s+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=h),a[a.length]={t:l,v:s},c=l;break;case"A":case"a":case"":var p={t:l,v:l};if(u==null&&(u=lp(e,r)),t.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(p.v=u.H>=12?"P":"A"),p.t="T",h="h",i+=3):t.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(p.v=u.H>=12?"PM":"AM"),p.t="T",i+=5,h="h"):t.substr(i,5).toUpperCase()==="/"?(u!=null&&(p.v=u.H>=12?"":""),p.t="T",i+=5,h="h"):(p.t="t",++i),u==null&&p.t==="T")return"";a[a.length]=p,c=l;break;case"[":for(s=l;t.charAt(i++)!=="]"&&i<t.length;)s+=t.charAt(i);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(Cre)){if(u==null&&(u=lp(e,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",i1(t)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=l;++i<t.length&&(l=t.charAt(i))==="0";)s+=l;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=l;++i<t.length&&"0#?.,E+-%".indexOf(l=t.charAt(i))>-1;)s+=l;a[a.length]={t:"n",v:s};break;case"?":for(s=l;t.charAt(++i)===l;)s+=l;a[a.length]={t:l,v:s},c=l;break;case"*":++i,(t.charAt(i)==" "||t.charAt(i)=="*")&&++i;break;case"(":case")":a[a.length]={t:n===1?"t":l,v:l},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=l;i<t.length&&"0123456789".indexOf(t.charAt(++i))>-1;)s+=t.charAt(i);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:l,v:l},++i;break;case"$":a[a.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+t);a[a.length]={t:"t",v:l},++i;break}var g=0,x=0,y;for(i=a.length-1,c="t";i>=0;--i)switch(a[i].t){case"h":case"H":a[i].t=h,c="h",g<1&&(g=1);break;case"s":(y=a[i].v.match(/\.0+$/))&&(x=Math.max(x,y[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":c=a[i].t;break;case"m":c==="s"&&(a[i].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&a[i].v.match(/[Hh]/)&&(g=1),g<2&&a[i].v.match(/[Mm]/)&&(g=2),g<3&&a[i].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var b="",w;for(i=0;i<a.length;++i)switch(a[i].t){case"t":case"T":case" ":case"D":break;case"X":a[i].v="",a[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[i].v=wBe(a[i].t.charCodeAt(0),a[i].v,u,x),a[i].t="t";break;case"n":case"?":for(w=i+1;a[w]!=null&&((l=a[w].t)==="?"||l==="D"||(l===" "||l==="t")&&a[w+1]!=null&&(a[w+1].t==="?"||a[w+1].t==="t"&&a[w+1].v==="/")||a[i].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(a[w].v==="/"||a[w].v===" "&&a[w+1]!=null&&a[w+1].t=="?"));)a[i].v+=a[w].v,a[w]={v:"",t:";"},++w;b+=a[i].v,i=w-1;break;case"G":a[i].t="t",a[i].v=zp(e,r);break}var j="",I,_;if(b.length>0){b.charCodeAt(0)==40?(I=e<0&&b.charCodeAt(0)===45?-e:e,_=UA("n",b,I)):(I=e<0&&n>1?-e:e,_=UA("n",b,I),I<0&&a[0]&&a[0].t=="t"&&(_=_.substr(1),a[0].v="-"+a[0].v)),w=_.length-1;var S=a.length;for(i=0;i<a.length;++i)if(a[i]!=null&&a[i].t!="t"&&a[i].v.indexOf(".")>-1){S=i;break}var E=a.length;if(S===a.length&&_.indexOf("E")===-1){for(i=a.length-1;i>=0;--i)a[i]==null||"n?".indexOf(a[i].t)===-1||(w>=a[i].v.length-1?(w-=a[i].v.length,a[i].v=_.substr(w+1,a[i].v.length)):w<0?a[i].v="":(a[i].v=_.substr(0,w+1),w=-1),a[i].t="t",E=i);w>=0&&E<a.length&&(a[E].v=_.substr(0,w+1)+a[E].v)}else if(S!==a.length&&_.indexOf("E")===-1){for(w=_.indexOf(".")-1,i=S;i>=0;--i)if(!(a[i]==null||"n?".indexOf(a[i].t)===-1)){for(d=a[i].v.indexOf(".")>-1&&i===S?a[i].v.indexOf(".")-1:a[i].v.length-1,j=a[i].v.substr(d+1);d>=0;--d)w>=0&&(a[i].v.charAt(d)==="0"||a[i].v.charAt(d)==="#")&&(j=_.charAt(w--)+j);a[i].v=j,a[i].t="t",E=i}for(w>=0&&E<a.length&&(a[E].v=_.substr(0,w+1)+a[E].v),w=_.indexOf(".")+1,i=S;i<a.length;++i)if(!(a[i]==null||"n?(".indexOf(a[i].t)===-1&&i!==S)){for(d=a[i].v.indexOf(".")>-1&&i===S?a[i].v.indexOf(".")+1:0,j=a[i].v.substr(0,d);d<a[i].v.length;++d)w<_.length&&(j+=_.charAt(w++));a[i].v=j,a[i].t="t",E=i}}}for(i=0;i<a.length;++i)a[i]!=null&&"n?".indexOf(a[i].t)>-1&&(I=n>1&&e<0&&i>0&&a[i-1].v==="-"?-e:e,a[i].v=UA(a[i].t,a[i].v,I),a[i].t="t");var k="";for(i=0;i!==a.length;++i)a[i]!=null&&(k+=a[i].v);return k}var fH=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function AH(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function kBe(t,e){var r=BBe(t),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(fH),l=r[1].match(fH);return AH(e,i)?[n,r[0]]:AH(e,l)?[n,r[1]]:[n,r[i!=null&&l!=null?2:1]]}return[n,s]}function ad(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:en)[t],n==null&&(n=r.table&&r.table[cH[t]]||en[cH[t]]),n==null&&(n=mBe[t]||"General");break}if(SS(n,0))return zp(e,r);e instanceof Date&&(e=pre(e,r.date1904));var a=kBe(n,e);if(SS(a[1]))return zp(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return TBe(a[1],e,r,a[0])}function QA(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(en[r]==null){e<0&&(e=r);continue}if(en[r]==t){e=r;break}}e<0&&(e=391)}return en[e]=t,e}function Q4(t){for(var e=0;e!=392;++e)t[e]!==void 0&&QA(t[e],e)}function o1(){en=hBe()}var FBe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},_re=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function OBe(t){var e=typeof t=="number"?en[t]:t;return e=e.replace(_re,"(\\d+)"),new RegExp("^"+e+"$")}function DBe(t,e,r){var n=-1,a=-1,s=-1,i=-1,l=-1,c=-1;(e.match(_re)||[]).forEach(function(f,h){var A=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=A;break;case"d":s=A;break;case"h":i=A;break;case"s":c=A;break;case"m":i>=0?l=A:a=A;break}}),c>=0&&l==-1&&a>=0&&(l=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return i==-1&&l==-1&&c==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var RBe=function(){var t={};t.version="1.2.0";function e(){for(var _=0,S=new Array(256),E=0;E!=256;++E)_=E,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,S[E]=_;return typeof Int32Array<"u"?new Int32Array(S):S}var r=e();function n(_){var S=0,E=0,k=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(k=0;k!=256;++k)P[k]=_[k];for(k=0;k!=256;++k)for(E=_[k],S=256+k;S<4096;S+=256)E=P[S]=E>>>8^_[E&255];var T=[];for(k=1;k!=16;++k)T[k-1]=typeof Int32Array<"u"?P.subarray(k*256,k*256+256):P.slice(k*256,k*256+256);return T}var a=n(r),s=a[0],i=a[1],l=a[2],c=a[3],u=a[4],d=a[5],f=a[6],h=a[7],A=a[8],m=a[9],p=a[10],g=a[11],x=a[12],y=a[13],b=a[14];function w(_,S){for(var E=S^-1,k=0,P=_.length;k<P;)E=E>>>8^r[(E^_.charCodeAt(k++))&255];return~E}function j(_,S){for(var E=S^-1,k=_.length-15,P=0;P<k;)E=b[_[P++]^E&255]^y[_[P++]^E>>8&255]^x[_[P++]^E>>16&255]^g[_[P++]^E>>>24]^p[_[P++]]^m[_[P++]]^A[_[P++]]^h[_[P++]]^f[_[P++]]^d[_[P++]]^u[_[P++]]^c[_[P++]]^l[_[P++]]^i[_[P++]]^s[_[P++]]^r[_[P++]];for(k+=15;P<k;)E=E>>>8^r[(E^_[P++])&255];return~E}function I(_,S){for(var E=S^-1,k=0,P=_.length,T=0,O=0;k<P;)T=_.charCodeAt(k++),T<128?E=E>>>8^r[(E^T)&255]:T<2048?(E=E>>>8^r[(E^(192|T>>6&31))&255],E=E>>>8^r[(E^(128|T&63))&255]):T>=55296&&T<57344?(T=(T&1023)+64,O=_.charCodeAt(k++)&1023,E=E>>>8^r[(E^(240|T>>8&7))&255],E=E>>>8^r[(E^(128|T>>2&63))&255],E=E>>>8^r[(E^(128|O>>6&15|(T&3)<<4))&255],E=E>>>8^r[(E^(128|O&63))&255]):(E=E>>>8^r[(E^(224|T>>12&15))&255],E=E>>>8^r[(E^(128|T>>6&63))&255],E=E>>>8^r[(E^(128|T&63))&255]);return~E}return t.table=r,t.bstr=w,t.buf=j,t.str=I,t}(),qr=function(){var e={};e.version="1.2.1";function r(ae,V){for(var X=ae.split("/"),me=V.split("/"),Ie=0,Y=0,pe=Math.min(X.length,me.length);Ie<pe;++Ie){if(Y=X[Ie].length-me[Ie].length)return Y;if(X[Ie]!=me[Ie])return X[Ie]<me[Ie]?-1:1}return X.length-me.length}function n(ae){if(ae.charAt(ae.length-1)=="/")return ae.slice(0,-1).indexOf("/")===-1?ae:n(ae.slice(0,-1));var V=ae.lastIndexOf("/");return V===-1?ae:ae.slice(0,V+1)}function a(ae){if(ae.charAt(ae.length-1)=="/")return a(ae.slice(0,-1));var V=ae.lastIndexOf("/");return V===-1?ae:ae.slice(V+1)}function s(ae,V){typeof V=="string"&&(V=new Date(V));var X=V.getHours();X=X<<6|V.getMinutes(),X=X<<5|V.getSeconds()>>>1,ae.write_shift(2,X);var me=V.getFullYear()-1980;me=me<<4|V.getMonth()+1,me=me<<5|V.getDate(),ae.write_shift(2,me)}function i(ae){var V=ae.read_shift(2)&65535,X=ae.read_shift(2)&65535,me=new Date,Ie=X&31;X>>>=5;var Y=X&15;X>>>=4,me.setMilliseconds(0),me.setFullYear(X+1980),me.setMonth(Y-1),me.setDate(Ie);var pe=V&31;V>>>=5;var ke=V&63;return V>>>=6,me.setHours(V),me.setMinutes(ke),me.setSeconds(pe<<1),me}function l(ae){Yo(ae,0);for(var V={},X=0;ae.l<=ae.length-4;){var me=ae.read_shift(2),Ie=ae.read_shift(2),Y=ae.l+Ie,pe={};switch(me){case 21589:X=ae.read_shift(1),X&1&&(pe.mtime=ae.read_shift(4)),Ie>5&&(X&2&&(pe.atime=ae.read_shift(4)),X&4&&(pe.ctime=ae.read_shift(4))),pe.mtime&&(pe.mt=new Date(pe.mtime*1e3));break}ae.l=Y,V[me]=pe}return V}var c;function u(){return c||(c={})}function d(ae,V){if(ae[0]==80&&ae[1]==75)return Ne(ae,V);if((ae[0]|32)==109&&(ae[1]|32)==105)return te(ae,V);if(ae.length<512)throw new Error("CFB file size "+ae.length+" < 512");var X=3,me=512,Ie=0,Y=0,pe=0,ke=0,Re=0,Ze=[],nt=ae.slice(0,512);Yo(nt,0);var _t=f(nt);switch(X=_t[0],X){case 3:me=512;break;case 4:me=4096;break;case 0:if(_t[1]==0)return Ne(ae,V);default:throw new Error("Major Version: Expected 3 or 4 saw "+X)}me!==512&&(nt=ae.slice(0,me),Yo(nt,28));var Ct=ae.slice(0,me);h(nt,X);var Nt=nt.read_shift(4,"i");if(X===3&&Nt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Nt);nt.l+=4,pe=nt.read_shift(4,"i"),nt.l+=4,nt.chk("00100000","Mini Stream Cutoff Size: "),ke=nt.read_shift(4,"i"),Ie=nt.read_shift(4,"i"),Re=nt.read_shift(4,"i"),Y=nt.read_shift(4,"i");for(var Tt=-1,St=0;St<109&&(Tt=nt.read_shift(4,"i"),!(Tt<0));++St)Ze[St]=Tt;var yt=A(ae,me);g(Re,Y,yt,me,Ze);var cr=y(yt,pe,Ze,me);cr[pe].name="!Directory",Ie>0&&ke!==O&&(cr[ke].name="!MiniFAT"),cr[Ze[0]].name="!FAT",cr.fat_addrs=Ze,cr.ssz=me;var ur={},lr=[],Cr=[],Nr=[];b(pe,cr,yt,lr,Ie,ur,Cr,ke),m(Cr,Nr,lr),lr.shift();var mn={FileIndex:Cr,FullPaths:Nr};return V&&V.raw&&(mn.raw={header:Ct,sectors:yt}),mn}function f(ae){if(ae[ae.l]==80&&ae[ae.l+1]==75)return[0,0];ae.chk(W,"Header Signature: "),ae.l+=16;var V=ae.read_shift(2,"u");return[ae.read_shift(2,"u"),V]}function h(ae,V){var X=9;switch(ae.l+=2,X=ae.read_shift(2)){case 9:if(V!=3)throw new Error("Sector Shift: Expected 9 saw "+X);break;case 12:if(V!=4)throw new Error("Sector Shift: Expected 12 saw "+X);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+X)}ae.chk("0600","Mini Sector Shift: "),ae.chk("000000000000","Reserved: ")}function A(ae,V){for(var X=Math.ceil(ae.length/V)-1,me=[],Ie=1;Ie<X;++Ie)me[Ie-1]=ae.slice(Ie*V,(Ie+1)*V);return me[X-1]=ae.slice(X*V),me}function m(ae,V,X){for(var me=0,Ie=0,Y=0,pe=0,ke=0,Re=X.length,Ze=[],nt=[];me<Re;++me)Ze[me]=nt[me]=me,V[me]=X[me];for(;ke<nt.length;++ke)me=nt[ke],Ie=ae[me].L,Y=ae[me].R,pe=ae[me].C,Ze[me]===me&&(Ie!==-1&&Ze[Ie]!==Ie&&(Ze[me]=Ze[Ie]),Y!==-1&&Ze[Y]!==Y&&(Ze[me]=Ze[Y])),pe!==-1&&(Ze[pe]=me),Ie!==-1&&me!=Ze[me]&&(Ze[Ie]=Ze[me],nt.lastIndexOf(Ie)<ke&&nt.push(Ie)),Y!==-1&&me!=Ze[me]&&(Ze[Y]=Ze[me],nt.lastIndexOf(Y)<ke&&nt.push(Y));for(me=1;me<Re;++me)Ze[me]===me&&(Y!==-1&&Ze[Y]!==Y?Ze[me]=Ze[Y]:Ie!==-1&&Ze[Ie]!==Ie&&(Ze[me]=Ze[Ie]));for(me=1;me<Re;++me)if(ae[me].type!==0){if(ke=me,ke!=Ze[ke])do ke=Ze[ke],V[me]=V[ke]+"/"+V[me];while(ke!==0&&Ze[ke]!==-1&&ke!=Ze[ke]);Ze[me]=-1}for(V[0]+="/",me=1;me<Re;++me)ae[me].type!==2&&(V[me]+="/")}function p(ae,V,X){for(var me=ae.start,Ie=ae.size,Y=[],pe=me;X&&Ie>0&&pe>=0;)Y.push(V.slice(pe*T,pe*T+T)),Ie-=T,pe=ep(X,pe*4);return Y.length===0?zt(0):Co(Y).slice(0,ae.size)}function g(ae,V,X,me,Ie){var Y=O;if(ae===O){if(V!==0)throw new Error("DIFAT chain shorter than expected")}else if(ae!==-1){var pe=X[ae],ke=(me>>>2)-1;if(!pe)return;for(var Re=0;Re<ke&&(Y=ep(pe,Re*4))!==O;++Re)Ie.push(Y);g(ep(pe,me-4),V-1,X,me,Ie)}}function x(ae,V,X,me,Ie){var Y=[],pe=[];Ie||(Ie=[]);var ke=me-1,Re=0,Ze=0;for(Re=V;Re>=0;){Ie[Re]=!0,Y[Y.length]=Re,pe.push(ae[Re]);var nt=X[Math.floor(Re*4/me)];if(Ze=Re*4&ke,me<4+Ze)throw new Error("FAT boundary crossed: "+Re+" 4 "+me);if(!ae[nt])break;Re=ep(ae[nt],Ze)}return{nodes:Y,data:_H([pe])}}function y(ae,V,X,me){var Ie=ae.length,Y=[],pe=[],ke=[],Re=[],Ze=me-1,nt=0,_t=0,Ct=0,Nt=0;for(nt=0;nt<Ie;++nt)if(ke=[],Ct=nt+V,Ct>=Ie&&(Ct-=Ie),!pe[Ct]){Re=[];var Tt=[];for(_t=Ct;_t>=0;){Tt[_t]=!0,pe[_t]=!0,ke[ke.length]=_t,Re.push(ae[_t]);var St=X[Math.floor(_t*4/me)];if(Nt=_t*4&Ze,me<4+Nt)throw new Error("FAT boundary crossed: "+_t+" 4 "+me);if(!ae[St]||(_t=ep(ae[St],Nt),Tt[_t]))break}Y[Ct]={nodes:ke,data:_H([Re])}}return Y}function b(ae,V,X,me,Ie,Y,pe,ke){for(var Re=0,Ze=me.length?2:0,nt=V[ae].data,_t=0,Ct=0,Nt;_t<nt.length;_t+=128){var Tt=nt.slice(_t,_t+128);Yo(Tt,64),Ct=Tt.read_shift(2),Nt=jD(Tt,0,Ct-Ze),me.push(Nt);var St={name:Nt,type:Tt.read_shift(1),color:Tt.read_shift(1),L:Tt.read_shift(4,"i"),R:Tt.read_shift(4,"i"),C:Tt.read_shift(4,"i"),clsid:Tt.read_shift(16),state:Tt.read_shift(4,"i"),start:0,size:0},yt=Tt.read_shift(2)+Tt.read_shift(2)+Tt.read_shift(2)+Tt.read_shift(2);yt!==0&&(St.ct=w(Tt,Tt.l-8));var cr=Tt.read_shift(2)+Tt.read_shift(2)+Tt.read_shift(2)+Tt.read_shift(2);cr!==0&&(St.mt=w(Tt,Tt.l-8)),St.start=Tt.read_shift(4,"i"),St.size=Tt.read_shift(4,"i"),St.size<0&&St.start<0&&(St.size=St.type=0,St.start=O,St.name=""),St.type===5?(Re=St.start,Ie>0&&Re!==O&&(V[Re].name="!StreamData")):St.size>=4096?(St.storage="fat",V[St.start]===void 0&&(V[St.start]=x(X,St.start,V.fat_addrs,V.ssz)),V[St.start].name=St.name,St.content=V[St.start].data.slice(0,St.size)):(St.storage="minifat",St.size<0?St.size=0:Re!==O&&St.start!==O&&V[Re]&&(St.content=p(St,V[Re].data,(V[ke]||{}).data))),St.content&&Yo(St.content,0),Y[Nt]=St,pe.push(St)}}function w(ae,V){return new Date((Xc(ae,V+4)/1e7*Math.pow(2,32)+Xc(ae,V)/1e7-11644473600)*1e3)}function j(ae,V){return u(),d(c.readFileSync(ae),V)}function I(ae,V){var X=V&&V.type;switch(X||En&&Buffer.isBuffer(ae)&&(X="buffer"),X||"base64"){case"file":return j(ae,V);case"base64":return d(Yc(uu(ae)),V);case"binary":return d(Yc(ae),V)}return d(ae,V)}function _(ae,V){var X=V||{},me=X.root||"Root Entry";if(ae.FullPaths||(ae.FullPaths=[]),ae.FileIndex||(ae.FileIndex=[]),ae.FullPaths.length!==ae.FileIndex.length)throw new Error("inconsistent CFB structure");ae.FullPaths.length===0&&(ae.FullPaths[0]=me+"/",ae.FileIndex[0]={name:me,type:5}),X.CLSID&&(ae.FileIndex[0].clsid=X.CLSID),S(ae)}function S(ae){var V="Sh33tJ5";if(!qr.find(ae,"/"+V)){var X=zt(4);X[0]=55,X[1]=X[3]=50,X[2]=54,ae.FileIndex.push({name:V,type:2,content:X,size:4,L:69,R:69,C:69}),ae.FullPaths.push(ae.FullPaths[0]+V),E(ae)}}function E(ae,V){_(ae);for(var X=!1,me=!1,Ie=ae.FullPaths.length-1;Ie>=0;--Ie){var Y=ae.FileIndex[Ie];switch(Y.type){case 0:me?X=!0:(ae.FileIndex.pop(),ae.FullPaths.pop());break;case 1:case 2:case 5:me=!0,isNaN(Y.R*Y.L*Y.C)&&(X=!0),Y.R>-1&&Y.L>-1&&Y.R==Y.L&&(X=!0);break;default:X=!0;break}}if(!(!X&&!V)){var pe=new Date(1987,1,19),ke=0,Re=Object.create?Object.create(null):{},Ze=[];for(Ie=0;Ie<ae.FullPaths.length;++Ie)Re[ae.FullPaths[Ie]]=!0,ae.FileIndex[Ie].type!==0&&Ze.push([ae.FullPaths[Ie],ae.FileIndex[Ie]]);for(Ie=0;Ie<Ze.length;++Ie){var nt=n(Ze[Ie][0]);me=Re[nt],me||(Ze.push([nt,{name:a(nt).replace("/",""),type:1,clsid:de,ct:pe,mt:pe,content:null}]),Re[nt]=!0)}for(Ze.sort(function(Nt,Tt){return r(Nt[0],Tt[0])}),ae.FullPaths=[],ae.FileIndex=[],Ie=0;Ie<Ze.length;++Ie)ae.FullPaths[Ie]=Ze[Ie][0],ae.FileIndex[Ie]=Ze[Ie][1];for(Ie=0;Ie<Ze.length;++Ie){var _t=ae.FileIndex[Ie],Ct=ae.FullPaths[Ie];if(_t.name=a(Ct).replace("/",""),_t.L=_t.R=_t.C=-(_t.color=1),_t.size=_t.content?_t.content.length:0,_t.start=0,_t.clsid=_t.clsid||de,Ie===0)_t.C=Ze.length>1?1:-1,_t.size=0,_t.type=5;else if(Ct.slice(-1)=="/"){for(ke=Ie+1;ke<Ze.length&&n(ae.FullPaths[ke])!=Ct;++ke);for(_t.C=ke>=Ze.length?-1:ke,ke=Ie+1;ke<Ze.length&&n(ae.FullPaths[ke])!=n(Ct);++ke);_t.R=ke>=Ze.length?-1:ke,_t.type=1}else n(ae.FullPaths[Ie+1]||"")==n(Ct)&&(_t.R=Ie+1),_t.type=2}}}function k(ae,V){var X=V||{};if(X.fileType=="mad")return He(ae,X);switch(E(ae),X.fileType){case"zip":return xe(ae,X)}var me=function(Nt){for(var Tt=0,St=0,yt=0;yt<Nt.FileIndex.length;++yt){var cr=Nt.FileIndex[yt];if(cr.content){var ur=cr.content.length;ur>0&&(ur<4096?Tt+=ur+63>>6:St+=ur+511>>9)}}for(var lr=Nt.FullPaths.length+3>>2,Cr=Tt+7>>3,Nr=Tt+127>>7,mn=Cr+St+lr+Nr,bn=mn+127>>7,Rr=bn<=109?0:Math.ceil((bn-109)/127);mn+bn+Rr+127>>7>bn;)Rr=++bn<=109?0:Math.ceil((bn-109)/127);var Nn=[1,Rr,bn,Nr,lr,St,Tt,0];return Nt.FileIndex[0].size=Tt<<6,Nn[7]=(Nt.FileIndex[0].start=Nn[0]+Nn[1]+Nn[2]+Nn[3]+Nn[4]+Nn[5])+(Nn[6]+7>>3),Nn}(ae),Ie=zt(me[7]<<9),Y=0,pe=0;{for(Y=0;Y<8;++Y)Ie.write_shift(1,Ae[Y]);for(Y=0;Y<8;++Y)Ie.write_shift(2,0);for(Ie.write_shift(2,62),Ie.write_shift(2,3),Ie.write_shift(2,65534),Ie.write_shift(2,9),Ie.write_shift(2,6),Y=0;Y<3;++Y)Ie.write_shift(2,0);for(Ie.write_shift(4,0),Ie.write_shift(4,me[2]),Ie.write_shift(4,me[0]+me[1]+me[2]+me[3]-1),Ie.write_shift(4,0),Ie.write_shift(4,4096),Ie.write_shift(4,me[3]?me[0]+me[1]+me[2]-1:O),Ie.write_shift(4,me[3]),Ie.write_shift(-4,me[1]?me[0]-1:O),Ie.write_shift(4,me[1]),Y=0;Y<109;++Y)Ie.write_shift(-4,Y<me[2]?me[1]+Y:-1)}if(me[1])for(pe=0;pe<me[1];++pe){for(;Y<236+pe*127;++Y)Ie.write_shift(-4,Y<me[2]?me[1]+Y:-1);Ie.write_shift(-4,pe===me[1]-1?O:pe+1)}var ke=function(Nt){for(pe+=Nt;Y<pe-1;++Y)Ie.write_shift(-4,Y+1);Nt&&(++Y,Ie.write_shift(-4,O))};for(pe=Y=0,pe+=me[1];Y<pe;++Y)Ie.write_shift(-4,fe.DIFSECT);for(pe+=me[2];Y<pe;++Y)Ie.write_shift(-4,fe.FATSECT);ke(me[3]),ke(me[4]);for(var Re=0,Ze=0,nt=ae.FileIndex[0];Re<ae.FileIndex.length;++Re)nt=ae.FileIndex[Re],nt.content&&(Ze=nt.content.length,!(Ze<4096)&&(nt.start=pe,ke(Ze+511>>9)));for(ke(me[6]+7>>3);Ie.l&511;)Ie.write_shift(-4,fe.ENDOFCHAIN);for(pe=Y=0,Re=0;Re<ae.FileIndex.length;++Re)nt=ae.FileIndex[Re],nt.content&&(Ze=nt.content.length,!(!Ze||Ze>=4096)&&(nt.start=pe,ke(Ze+63>>6)));for(;Ie.l&511;)Ie.write_shift(-4,fe.ENDOFCHAIN);for(Y=0;Y<me[4]<<2;++Y){var _t=ae.FullPaths[Y];if(!_t||_t.length===0){for(Re=0;Re<17;++Re)Ie.write_shift(4,0);for(Re=0;Re<3;++Re)Ie.write_shift(4,-1);for(Re=0;Re<12;++Re)Ie.write_shift(4,0);continue}nt=ae.FileIndex[Y],Y===0&&(nt.start=nt.size?nt.start-1:O);var Ct=Y===0&&X.root||nt.name;if(Ze=2*(Ct.length+1),Ie.write_shift(64,Ct,"utf16le"),Ie.write_shift(2,Ze),Ie.write_shift(1,nt.type),Ie.write_shift(1,nt.color),Ie.write_shift(-4,nt.L),Ie.write_shift(-4,nt.R),Ie.write_shift(-4,nt.C),nt.clsid)Ie.write_shift(16,nt.clsid,"hex");else for(Re=0;Re<4;++Re)Ie.write_shift(4,0);Ie.write_shift(4,nt.state||0),Ie.write_shift(4,0),Ie.write_shift(4,0),Ie.write_shift(4,0),Ie.write_shift(4,0),Ie.write_shift(4,nt.start),Ie.write_shift(4,nt.size),Ie.write_shift(4,0)}for(Y=1;Y<ae.FileIndex.length;++Y)if(nt=ae.FileIndex[Y],nt.size>=4096)if(Ie.l=nt.start+1<<9,En&&Buffer.isBuffer(nt.content))nt.content.copy(Ie,Ie.l,0,nt.size),Ie.l+=nt.size+511&-512;else{for(Re=0;Re<nt.size;++Re)Ie.write_shift(1,nt.content[Re]);for(;Re&511;++Re)Ie.write_shift(1,0)}for(Y=1;Y<ae.FileIndex.length;++Y)if(nt=ae.FileIndex[Y],nt.size>0&&nt.size<4096)if(En&&Buffer.isBuffer(nt.content))nt.content.copy(Ie,Ie.l,0,nt.size),Ie.l+=nt.size+63&-64;else{for(Re=0;Re<nt.size;++Re)Ie.write_shift(1,nt.content[Re]);for(;Re&63;++Re)Ie.write_shift(1,0)}if(En)Ie.l=Ie.length;else for(;Ie.l<Ie.length;)Ie.write_shift(1,0);return Ie}function P(ae,V){var X=ae.FullPaths.map(function(Re){return Re.toUpperCase()}),me=X.map(function(Re){var Ze=Re.split("/");return Ze[Ze.length-(Re.slice(-1)=="/"?2:1)]}),Ie=!1;V.charCodeAt(0)===47?(Ie=!0,V=X[0].slice(0,-1)+V):Ie=V.indexOf("/")!==-1;var Y=V.toUpperCase(),pe=Ie===!0?X.indexOf(Y):me.indexOf(Y);if(pe!==-1)return ae.FileIndex[pe];var ke=!Y.match(Qy);for(Y=Y.replace(tc,""),ke&&(Y=Y.replace(Qy,"!")),pe=0;pe<X.length;++pe)if((ke?X[pe].replace(Qy,"!"):X[pe]).replace(tc,"")==Y||(ke?me[pe].replace(Qy,"!"):me[pe]).replace(tc,"")==Y)return ae.FileIndex[pe];return null}var T=64,O=-2,W="d0cf11e0a1b11ae1",Ae=[208,207,17,224,161,177,26,225],de="00000000000000000000000000000000",fe={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:O,FREESECT:-1,HEADER_SIGNATURE:W,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:de,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ge(ae,V,X){u();var me=k(ae,X);c.writeFileSync(V,me)}function ee(ae){for(var V=new Array(ae.length),X=0;X<ae.length;++X)V[X]=String.fromCharCode(ae[X]);return V.join("")}function Fe(ae,V){var X=k(ae,V);switch(V&&V.type||"buffer"){case"file":return u(),c.writeFileSync(V.filename,X),X;case"binary":return typeof X=="string"?X:ee(X);case"base64":return v2(typeof X=="string"?X:ee(X));case"buffer":if(En)return Buffer.isBuffer(X)?X:hh(X);case"array":return typeof X=="string"?Yc(X):X}return X}var Pe;function F(ae){try{var V=ae.InflateRaw,X=new V;if(X._processChunk(new Uint8Array([3,0]),X._finishFlushFlag),X.bytesRead)Pe=ae;else throw new Error("zlib does not expose bytesRead")}catch(me){console.error("cannot use native zlib: "+(me.message||me))}}function Q(ae,V){if(!Pe)return ye(ae,V);var X=Pe.InflateRaw,me=new X,Ie=me._processChunk(ae.slice(ae.l),me._finishFlushFlag);return ae.l+=me.bytesRead,Ie}function H(ae){return Pe?Pe.deflateRawSync(ae):ue(ae)}var R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],z=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],J=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function D(ae){var V=(ae<<1|ae<<11)&139536|(ae<<5|ae<<15)&558144;return(V>>16|V>>8|V)&255}for(var U=typeof Uint8Array<"u",ne=U?new Uint8Array(256):[],ve=0;ve<256;++ve)ne[ve]=D(ve);function L(ae,V){var X=ne[ae&255];return V<=8?X>>>8-V:(X=X<<8|ne[ae>>8&255],V<=16?X>>>16-V:(X=X<<8|ne[ae>>16&255],X>>>24-V))}function Ye(ae,V){var X=V&7,me=V>>>3;return(ae[me]|(X<=6?0:ae[me+1]<<8))>>>X&3}function ie(ae,V){var X=V&7,me=V>>>3;return(ae[me]|(X<=5?0:ae[me+1]<<8))>>>X&7}function Z(ae,V){var X=V&7,me=V>>>3;return(ae[me]|(X<=4?0:ae[me+1]<<8))>>>X&15}function Oe(ae,V){var X=V&7,me=V>>>3;return(ae[me]|(X<=3?0:ae[me+1]<<8))>>>X&31}function le(ae,V){var X=V&7,me=V>>>3;return(ae[me]|(X<=1?0:ae[me+1]<<8))>>>X&127}function se(ae,V,X){var me=V&7,Ie=V>>>3,Y=(1<<X)-1,pe=ae[Ie]>>>me;return X<8-me||(pe|=ae[Ie+1]<<8-me,X<16-me)||(pe|=ae[Ie+2]<<16-me,X<24-me)||(pe|=ae[Ie+3]<<24-me),pe&Y}function Be(ae,V,X){var me=V&7,Ie=V>>>3;return me<=5?ae[Ie]|=(X&7)<<me:(ae[Ie]|=X<<me&255,ae[Ie+1]=(X&7)>>8-me),V+3}function je(ae,V,X){var me=V&7,Ie=V>>>3;return X=(X&1)<<me,ae[Ie]|=X,V+1}function ot(ae,V,X){var me=V&7,Ie=V>>>3;return X<<=me,ae[Ie]|=X&255,X>>>=8,ae[Ie+1]=X,V+8}function mt(ae,V,X){var me=V&7,Ie=V>>>3;return X<<=me,ae[Ie]|=X&255,X>>>=8,ae[Ie+1]=X&255,ae[Ie+2]=X>>>8,V+16}function ut(ae,V){var X=ae.length,me=2*X>V?2*X:V+5,Ie=0;if(X>=V)return ae;if(En){var Y=iH(me);if(ae.copy)ae.copy(Y);else for(;Ie<ae.length;++Ie)Y[Ie]=ae[Ie];return Y}else if(U){var pe=new Uint8Array(me);if(pe.set)pe.set(ae);else for(;Ie<X;++Ie)pe[Ie]=ae[Ie];return pe}return ae.length=me,ae}function _e(ae){for(var V=new Array(ae),X=0;X<ae;++X)V[X]=0;return V}function rt(ae,V,X){var me=1,Ie=0,Y=0,pe=0,ke=0,Re=ae.length,Ze=U?new Uint16Array(32):_e(32);for(Y=0;Y<32;++Y)Ze[Y]=0;for(Y=Re;Y<X;++Y)ae[Y]=0;Re=ae.length;var nt=U?new Uint16Array(Re):_e(Re);for(Y=0;Y<Re;++Y)Ze[Ie=ae[Y]]++,me<Ie&&(me=Ie),nt[Y]=0;for(Ze[0]=0,Y=1;Y<=me;++Y)Ze[Y+16]=ke=ke+Ze[Y-1]<<1;for(Y=0;Y<Re;++Y)ke=ae[Y],ke!=0&&(nt[Y]=Ze[ke+16]++);var _t=0;for(Y=0;Y<Re;++Y)if(_t=ae[Y],_t!=0)for(ke=L(nt[Y],me)>>me-_t,pe=(1<<me+4-_t)-1;pe>=0;--pe)V[ke|pe<<_t]=_t&15|Y<<4;return me}var we=U?new Uint16Array(512):_e(512),Ce=U?new Uint16Array(32):_e(32);if(!U){for(var Ue=0;Ue<512;++Ue)we[Ue]=0;for(Ue=0;Ue<32;++Ue)Ce[Ue]=0}(function(){for(var ae=[],V=0;V<32;V++)ae.push(5);rt(ae,Ce,32);var X=[];for(V=0;V<=143;V++)X.push(8);for(;V<=255;V++)X.push(9);for(;V<=279;V++)X.push(7);for(;V<=287;V++)X.push(8);rt(X,we,288)})();var Ve=function(){for(var V=U?new Uint8Array(32768):[],X=0,me=0;X<J.length-1;++X)for(;me<J[X+1];++me)V[me]=X;for(;me<32768;++me)V[me]=29;var Ie=U?new Uint8Array(259):[];for(X=0,me=0;X<z.length-1;++X)for(;me<z[X+1];++me)Ie[me]=X;function Y(ke,Re){for(var Ze=0;Ze<ke.length;){var nt=Math.min(65535,ke.length-Ze),_t=Ze+nt==ke.length;for(Re.write_shift(1,+_t),Re.write_shift(2,nt),Re.write_shift(2,~nt&65535);nt-- >0;)Re[Re.l++]=ke[Ze++]}return Re.l}function pe(ke,Re){for(var Ze=0,nt=0,_t=U?new Uint16Array(32768):[];nt<ke.length;){var Ct=Math.min(65535,ke.length-nt);if(Ct<10){for(Ze=Be(Re,Ze,+(nt+Ct==ke.length)),Ze&7&&(Ze+=8-(Ze&7)),Re.l=Ze/8|0,Re.write_shift(2,Ct),Re.write_shift(2,~Ct&65535);Ct-- >0;)Re[Re.l++]=ke[nt++];Ze=Re.l*8;continue}Ze=Be(Re,Ze,+(nt+Ct==ke.length)+2);for(var Nt=0;Ct-- >0;){var Tt=ke[nt];Nt=(Nt<<5^Tt)&32767;var St=-1,yt=0;if((St=_t[Nt])&&(St|=nt&-32768,St>nt&&(St-=32768),St<nt))for(;ke[St+yt]==ke[nt+yt]&&yt<250;)++yt;if(yt>2){Tt=Ie[yt],Tt<=22?Ze=ot(Re,Ze,ne[Tt+1]>>1)-1:(ot(Re,Ze,3),Ze+=5,ot(Re,Ze,ne[Tt-23]>>5),Ze+=3);var cr=Tt<8?0:Tt-4>>2;cr>0&&(mt(Re,Ze,yt-z[Tt]),Ze+=cr),Tt=V[nt-St],Ze=ot(Re,Ze,ne[Tt]>>3),Ze-=3;var ur=Tt<4?0:Tt-2>>1;ur>0&&(mt(Re,Ze,nt-St-J[Tt]),Ze+=ur);for(var lr=0;lr<yt;++lr)_t[Nt]=nt&32767,Nt=(Nt<<5^ke[nt])&32767,++nt;Ct-=yt-1}else Tt<=143?Tt=Tt+48:Ze=je(Re,Ze,1),Ze=ot(Re,Ze,ne[Tt]),_t[Nt]=nt&32767,++nt}Ze=ot(Re,Ze,0)-1}return Re.l=(Ze+7)/8|0,Re.l}return function(Re,Ze){return Re.length<8?Y(Re,Ze):pe(Re,Ze)}}();function ue(ae){var V=zt(50+Math.floor(ae.length*1.1)),X=Ve(ae,V);return V.slice(0,X)}var ce=U?new Uint16Array(32768):_e(32768),Te=U?new Uint16Array(32768):_e(32768),Xe=U?new Uint16Array(128):_e(128),ft=1,gt=1;function vt(ae,V){var X=Oe(ae,V)+257;V+=5;var me=Oe(ae,V)+1;V+=5;var Ie=Z(ae,V)+4;V+=4;for(var Y=0,pe=U?new Uint8Array(19):_e(19),ke=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Re=1,Ze=U?new Uint8Array(8):_e(8),nt=U?new Uint8Array(8):_e(8),_t=pe.length,Ct=0;Ct<Ie;++Ct)pe[R[Ct]]=Y=ie(ae,V),Re<Y&&(Re=Y),Ze[Y]++,V+=3;var Nt=0;for(Ze[0]=0,Ct=1;Ct<=Re;++Ct)nt[Ct]=Nt=Nt+Ze[Ct-1]<<1;for(Ct=0;Ct<_t;++Ct)(Nt=pe[Ct])!=0&&(ke[Ct]=nt[Nt]++);var Tt=0;for(Ct=0;Ct<_t;++Ct)if(Tt=pe[Ct],Tt!=0){Nt=ne[ke[Ct]]>>8-Tt;for(var St=(1<<7-Tt)-1;St>=0;--St)Xe[Nt|St<<Tt]=Tt&7|Ct<<3}var yt=[];for(Re=1;yt.length<X+me;)switch(Nt=Xe[le(ae,V)],V+=Nt&7,Nt>>>=3){case 16:for(Y=3+Ye(ae,V),V+=2,Nt=yt[yt.length-1];Y-- >0;)yt.push(Nt);break;case 17:for(Y=3+ie(ae,V),V+=3;Y-- >0;)yt.push(0);break;case 18:for(Y=11+le(ae,V),V+=7;Y-- >0;)yt.push(0);break;default:yt.push(Nt),Re<Nt&&(Re=Nt);break}var cr=yt.slice(0,X),ur=yt.slice(X);for(Ct=X;Ct<286;++Ct)cr[Ct]=0;for(Ct=me;Ct<30;++Ct)ur[Ct]=0;return ft=rt(cr,ce,286),gt=rt(ur,Te,30),V}function At(ae,V){if(ae[0]==3&&!(ae[1]&3))return[sm(V),2];for(var X=0,me=0,Ie=iH(V||1<<18),Y=0,pe=Ie.length>>>0,ke=0,Re=0;!(me&1);){if(me=ie(ae,X),X+=3,me>>>1)me>>1==1?(ke=9,Re=5):(X=vt(ae,X),ke=ft,Re=gt);else{X&7&&(X+=8-(X&7));var Ze=ae[X>>>3]|ae[(X>>>3)+1]<<8;if(X+=32,Ze>0)for(!V&&pe<Y+Ze&&(Ie=ut(Ie,Y+Ze),pe=Ie.length);Ze-- >0;)Ie[Y++]=ae[X>>>3],X+=8;continue}for(;;){!V&&pe<Y+32767&&(Ie=ut(Ie,Y+32767),pe=Ie.length);var nt=se(ae,X,ke),_t=me>>>1==1?we[nt]:ce[nt];if(X+=_t&15,_t>>>=4,!(_t>>>8&255))Ie[Y++]=_t;else{if(_t==256)break;_t-=257;var Ct=_t<8?0:_t-4>>2;Ct>5&&(Ct=0);var Nt=Y+z[_t];Ct>0&&(Nt+=se(ae,X,Ct),X+=Ct),nt=se(ae,X,Re),_t=me>>>1==1?Ce[nt]:Te[nt],X+=_t&15,_t>>>=4;var Tt=_t<4?0:_t-2>>1,St=J[_t];for(Tt>0&&(St+=se(ae,X,Tt),X+=Tt),!V&&pe<Nt&&(Ie=ut(Ie,Nt+100),pe=Ie.length);Y<Nt;)Ie[Y]=Ie[Y-St],++Y}}}return V?[Ie,X+7>>>3]:[Ie.slice(0,Y),X+7>>>3]}function ye(ae,V){var X=ae.slice(ae.l||0),me=At(X,V);return ae.l+=me[1],me[0]}function $e(ae,V){if(ae)typeof console<"u"&&console.error(V);else throw new Error(V)}function Ne(ae,V){var X=ae;Yo(X,0);var me=[],Ie=[],Y={FileIndex:me,FullPaths:Ie};_(Y,{root:V.root});for(var pe=X.length-4;(X[pe]!=80||X[pe+1]!=75||X[pe+2]!=5||X[pe+3]!=6)&&pe>=0;)--pe;X.l=pe+4,X.l+=4;var ke=X.read_shift(2);X.l+=6;var Re=X.read_shift(4);for(X.l=Re,pe=0;pe<ke;++pe){X.l+=20;var Ze=X.read_shift(4),nt=X.read_shift(4),_t=X.read_shift(2),Ct=X.read_shift(2),Nt=X.read_shift(2);X.l+=8;var Tt=X.read_shift(4),St=l(X.slice(X.l+_t,X.l+_t+Ct));X.l+=_t+Ct+Nt;var yt=X.l;X.l=Tt+4,ct(X,Ze,nt,Y,St),X.l=yt}return Y}function ct(ae,V,X,me,Ie){ae.l+=2;var Y=ae.read_shift(2),pe=ae.read_shift(2),ke=i(ae);if(Y&8257)throw new Error("Unsupported ZIP encryption");for(var Re=ae.read_shift(4),Ze=ae.read_shift(4),nt=ae.read_shift(4),_t=ae.read_shift(2),Ct=ae.read_shift(2),Nt="",Tt=0;Tt<_t;++Tt)Nt+=String.fromCharCode(ae[ae.l++]);if(Ct){var St=l(ae.slice(ae.l,ae.l+Ct));(St[21589]||{}).mt&&(ke=St[21589].mt),((Ie||{})[21589]||{}).mt&&(ke=Ie[21589].mt)}ae.l+=Ct;var yt=ae.slice(ae.l,ae.l+Ze);switch(pe){case 8:yt=Q(ae,nt);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+pe)}var cr=!1;Y&8&&(Re=ae.read_shift(4),Re==134695760&&(Re=ae.read_shift(4),cr=!0),Ze=ae.read_shift(4),nt=ae.read_shift(4)),Ze!=V&&$e(cr,"Bad compressed size: "+V+" != "+Ze),nt!=X&&$e(cr,"Bad uncompressed size: "+X+" != "+nt),be(me,Nt,yt,{unsafe:!0,mt:ke})}function xe(ae,V){var X=V||{},me=[],Ie=[],Y=zt(1),pe=X.compression?8:0,ke=0,Re=0,Ze=0,nt=0,_t=0,Ct=ae.FullPaths[0],Nt=Ct,Tt=ae.FileIndex[0],St=[],yt=0;for(Re=1;Re<ae.FullPaths.length;++Re)if(Nt=ae.FullPaths[Re].slice(Ct.length),Tt=ae.FileIndex[Re],!(!Tt.size||!Tt.content||Nt=="Sh33tJ5")){var cr=nt,ur=zt(Nt.length);for(Ze=0;Ze<Nt.length;++Ze)ur.write_shift(1,Nt.charCodeAt(Ze)&127);ur=ur.slice(0,ur.l),St[_t]=RBe.buf(Tt.content,0);var lr=Tt.content;pe==8&&(lr=H(lr)),Y=zt(30),Y.write_shift(4,67324752),Y.write_shift(2,20),Y.write_shift(2,ke),Y.write_shift(2,pe),Tt.mt?s(Y,Tt.mt):Y.write_shift(4,0),Y.write_shift(-4,St[_t]),Y.write_shift(4,lr.length),Y.write_shift(4,Tt.content.length),Y.write_shift(2,ur.length),Y.write_shift(2,0),nt+=Y.length,me.push(Y),nt+=ur.length,me.push(ur),nt+=lr.length,me.push(lr),Y=zt(46),Y.write_shift(4,33639248),Y.write_shift(2,0),Y.write_shift(2,20),Y.write_shift(2,ke),Y.write_shift(2,pe),Y.write_shift(4,0),Y.write_shift(-4,St[_t]),Y.write_shift(4,lr.length),Y.write_shift(4,Tt.content.length),Y.write_shift(2,ur.length),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(4,0),Y.write_shift(4,cr),yt+=Y.l,Ie.push(Y),yt+=ur.length,Ie.push(ur),++_t}return Y=zt(22),Y.write_shift(4,101010256),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(2,_t),Y.write_shift(2,_t),Y.write_shift(4,yt),Y.write_shift(4,nt),Y.write_shift(2,0),Co([Co(me),Co(Ie),Y])}var Qe={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function dt(ae,V){if(ae.ctype)return ae.ctype;var X=ae.name||"",me=X.match(/\.([^\.]+)$/);return me&&Qe[me[1]]||V&&(me=(X=V).match(/[\.\\]([^\.\\])+$/),me&&Qe[me[1]])?Qe[me[1]]:"application/octet-stream"}function Bt(ae){for(var V=v2(ae),X=[],me=0;me<V.length;me+=76)X.push(V.slice(me,me+76));return X.join(`\r
`)+`\r
`}function qe(ae){var V=ae.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Ze){var nt=Ze.charCodeAt(0).toString(16).toUpperCase();return"="+(nt.length==1?"0"+nt:nt)});V=V.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),V.charAt(0)==`
`&&(V="=0D"+V.slice(1)),V=V.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var X=[],me=V.split(`\r
`),Ie=0;Ie<me.length;++Ie){var Y=me[Ie];if(Y.length==0){X.push("");continue}for(var pe=0;pe<Y.length;){var ke=76,Re=Y.slice(pe,pe+ke);Re.charAt(ke-1)=="="?ke--:Re.charAt(ke-2)=="="?ke-=2:Re.charAt(ke-3)=="="&&(ke-=3),Re=Y.slice(pe,pe+ke),pe+=ke,pe<Y.length&&(Re+="="),X.push(Re)}}return X.join(`\r
`)}function bt(ae){for(var V=[],X=0;X<ae.length;++X){for(var me=ae[X];X<=ae.length&&me.charAt(me.length-1)=="=";)me=me.slice(0,me.length-1)+ae[++X];V.push(me)}for(var Ie=0;Ie<V.length;++Ie)V[Ie]=V[Ie].replace(/[=][0-9A-Fa-f]{2}/g,function(Y){return String.fromCharCode(parseInt(Y.slice(1),16))});return Yc(V.join(`\r
`))}function G(ae,V,X){for(var me="",Ie="",Y="",pe,ke=0;ke<10;++ke){var Re=V[ke];if(!Re||Re.match(/^\s*$/))break;var Ze=Re.match(/^(.*?):\s*([^\s].*)$/);if(Ze)switch(Ze[1].toLowerCase()){case"content-location":me=Ze[2].trim();break;case"content-type":Y=Ze[2].trim();break;case"content-transfer-encoding":Ie=Ze[2].trim();break}}switch(++ke,Ie.toLowerCase()){case"base64":pe=Yc(uu(V.slice(ke).join("")));break;case"quoted-printable":pe=bt(V.slice(ke));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ie)}var nt=be(ae,me.slice(X.length),pe,{unsafe:!0});Y&&(nt.ctype=Y)}function te(ae,V){if(ee(ae.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var X=V&&V.root||"",me=(En&&Buffer.isBuffer(ae)?ae.toString("binary"):ee(ae)).split(`\r
`),Ie=0,Y="";for(Ie=0;Ie<me.length;++Ie)if(Y=me[Ie],!!/^Content-Location:/i.test(Y)&&(Y=Y.slice(Y.indexOf("file")),X||(X=Y.slice(0,Y.lastIndexOf("/")+1)),Y.slice(0,X.length)!=X))for(;X.length>0&&(X=X.slice(0,X.length-1),X=X.slice(0,X.lastIndexOf("/")+1),Y.slice(0,X.length)!=X););var pe=(me[1]||"").match(/boundary="(.*?)"/);if(!pe)throw new Error("MAD cannot find boundary");var ke="--"+(pe[1]||""),Re=[],Ze=[],nt={FileIndex:Re,FullPaths:Ze};_(nt);var _t,Ct=0;for(Ie=0;Ie<me.length;++Ie){var Nt=me[Ie];Nt!==ke&&Nt!==ke+"--"||(Ct++&&G(nt,me.slice(_t,Ie),X),_t=Ie)}return nt}function He(ae,V){var X=V||{},me=X.boundary||"SheetJS";me="------="+me;for(var Ie=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+me.slice(2)+'"',"","",""],Y=ae.FullPaths[0],pe=Y,ke=ae.FileIndex[0],Re=1;Re<ae.FullPaths.length;++Re)if(pe=ae.FullPaths[Re].slice(Y.length),ke=ae.FileIndex[Re],!(!ke.size||!ke.content||pe=="Sh33tJ5")){pe=pe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(yt){return"_x"+yt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(yt){return"_u"+yt.charCodeAt(0).toString(16)+"_"});for(var Ze=ke.content,nt=En&&Buffer.isBuffer(Ze)?Ze.toString("binary"):ee(Ze),_t=0,Ct=Math.min(1024,nt.length),Nt=0,Tt=0;Tt<=Ct;++Tt)(Nt=nt.charCodeAt(Tt))>=32&&Nt<128&&++_t;var St=_t>=Ct*4/5;Ie.push(me),Ie.push("Content-Location: "+(X.root||"file:///C:/SheetJS/")+pe),Ie.push("Content-Transfer-Encoding: "+(St?"quoted-printable":"base64")),Ie.push("Content-Type: "+dt(ke,pe)),Ie.push(""),Ie.push(St?qe(nt):Bt(nt))}return Ie.push(me+`--\r
`),Ie.join(`\r
`)}function re(ae){var V={};return _(V,ae),V}function be(ae,V,X,me){var Ie=me&&me.unsafe;Ie||_(ae);var Y=!Ie&&qr.find(ae,V);if(!Y){var pe=ae.FullPaths[0];V.slice(0,pe.length)==pe?pe=V:(pe.slice(-1)!="/"&&(pe+="/"),pe=(pe+V).replace("//","/")),Y={name:a(V),type:2},ae.FileIndex.push(Y),ae.FullPaths.push(pe),Ie||qr.utils.cfb_gc(ae)}return Y.content=X,Y.size=X?X.length:0,me&&(me.CLSID&&(Y.clsid=me.CLSID),me.mt&&(Y.mt=me.mt),me.ct&&(Y.ct=me.ct)),Y}function Me(ae,V){_(ae);var X=qr.find(ae,V);if(X){for(var me=0;me<ae.FileIndex.length;++me)if(ae.FileIndex[me]==X)return ae.FileIndex.splice(me,1),ae.FullPaths.splice(me,1),!0}return!1}function tt(ae,V,X){_(ae);var me=qr.find(ae,V);if(me){for(var Ie=0;Ie<ae.FileIndex.length;++Ie)if(ae.FileIndex[Ie]==me)return ae.FileIndex[Ie].name=a(X),ae.FullPaths[Ie]=X,!0}return!1}function lt(ae){E(ae,!0)}return e.find=P,e.read=I,e.parse=d,e.write=Fe,e.writeFile=ge,e.utils={cfb_new:re,cfb_add:be,cfb_del:Me,cfb_mov:tt,cfb_gc:lt,ReadShift:vb,CheckField:qre,prep_blob:Yo,bconcat:Co,use_zlib:F,_deflateRaw:ue,_inflateRaw:ye,consts:fe},e}();function MBe(t){return typeof t=="string"?U4(t):Array.isArray(t)?uBe(t):t}function Ew(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=U4(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?Bf(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var a=new Blob([MBe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,t);if(typeof saveAs<"u")return saveAs(a,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=t,i.href=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(t);return l.open("w"),l.encoding="binary",Array.isArray(e)&&(e=xm(e)),l.write(e),l.close(),e}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+t)}function LBe(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function ei(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function hH(t,e){for(var r=[],n=ei(t),a=0;a!==n.length;++a)r[t[n[a]][e]]==null&&(r[t[n[a]][e]]=n[a]);return r}function V4(t){for(var e=[],r=ei(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function H4(t){for(var e=[],r=ei(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function UBe(t){for(var e=[],r=ei(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var jS=new Date(1899,11,30,0,0,0);function no(t,e){var r=t.getTime(),n=jS.getTime()+(t.getTimezoneOffset()-jS.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var Ere=new Date,QBe=jS.getTime()+(Ere.getTimezoneOffset()-jS.getTimezoneOffset())*6e4,mH=Ere.getTimezoneOffset();function $4(t){var e=new Date;return e.setTime(t*24*60*60*1e3+QBe),e.getTimezoneOffset()!==mH&&e.setTime(e.getTime()+(e.getTimezoneOffset()-mH)*6e4),e}function VBe(t){var e=0,r=0,n=!1,a=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(a[s],10)}return e}var pH=new Date("2017-02-19T19:06:09.000Z"),Sre=isNaN(pH.getFullYear())?new Date("2/19/17"):pH,HBe=Sre.getFullYear()==2017;function ss(t,e){var r=new Date(t);if(HBe)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(Sre.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function Wp(t,e){if(En&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return Bf(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return Bf(hre(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return Bf(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return Bf(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=t.length;++a)n.push(String.fromCharCode(t[a]));return n.join("")}function is(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=is(t[r]));return e}function Xs(t,e){for(var r="";r.length<e;)r+=t;return r}function Qd(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(e=Number(n)))?e/r:e}var $Be=["january","february","march","april","may","june","july","august","september","october","november","december"];function Sv(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),a=e.getMonth(),s=e.getDate();if(isNaN(s))return r;var i=t.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&$Be.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var GBe=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(t||typeof n=="string")return r.split(n);for(var s=r.split(n),i=[s[0]],l=1;l<s.length;++l)i.push(a),i.push(s[l]);return i}}();function Ire(t){return t?t.content&&t.type?Wp(t.content,!0):t.data?Uy(t.data):t.asNodeBuffer&&En?Uy(t.asNodeBuffer().toString("binary")):t.asBinary?Uy(t.asBinary()):t._data&&t._data.getContent?Uy(Wp(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function jre(t){if(!t)return null;if(t.data)return aH(t.data);if(t.asNodeBuffer&&En)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?aH(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function KBe(t){return t&&t.name.slice(-4)===".bin"?jre(t):Ire(t)}function Uu(t,e){for(var r=t.FullPaths||ei(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var i=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||a==i)return t.files?t.files[r[s]]:t.FileIndex[s]}return null}function ND(t,e){var r=Uu(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function Ei(t,e,r){if(!r)return KBe(ND(t,e));if(!e)return null;try{return Ei(t,e)}catch{return null}}function Jc(t,e,r){if(!r)return Ire(ND(t,e));if(!e)return null;try{return Jc(t,e)}catch{return null}}function qBe(t,e,r){return jre(ND(t,e))}function gH(t){for(var e=t.FullPaths||ei(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function vn(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return En?n=hh(r):n=dBe(r),qr.utils.cfb_add(t,e,n)}qr.utils.cfb_add(t,e,r)}else t.file(e,r)}function CD(){return qr.utils.cfb_new()}function Pre(t,e){switch(e.type){case"base64":return qr.read(t,{type:"base64"});case"binary":return qr.read(t,{type:"binary"});case"buffer":case"array":return qr.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function Vy(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var bi=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,zBe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,xH=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,WBe=/<[^>]*>/g,Ol=bi.match(xH)?xH:WBe,XBe=/<\w*:/,YBe=/<(\/?)\w+:/;function nn(t,e,r){for(var n={},a=0,s=0;a!==t.length&&!((s=t.charCodeAt(a))===32||s===10||s===13);++a);if(e||(n[0]=t.slice(0,a)),a===t.length)return n;var i=t.match(zBe),l=0,c="",u=0,d="",f="",h=1;if(i)for(u=0;u!=i.length;++u){for(f=i[u],s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(d=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(h=(a=f.charCodeAt(s+1))==34||a==39?1:0,c=f.slice(s+1+h,f.length-h),l=0;l!=d.length&&d.charCodeAt(l)!==58;++l);if(l===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=c,n[d.toLowerCase()]=c;else{var A=(l===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(l+1);if(n[A]&&d.slice(l-3,l)=="ext")continue;n[A]=c,n[A.toLowerCase()]=c}}return n}function Wf(t){return t.replace(YBe,"<$1")}var Bre={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},_D=V4(Bre),zn=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(t,function(l,c){return Bre[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(e,function(l,c){return String.fromCharCode(parseInt(c,16))});var i=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,i)+r(a.slice(i+3))}}(),ED=/[&<>'"]/g,JBe=/[\u0000-\u0008\u000b-\u001f]/g;function _a(t){var e=t+"";return e.replace(ED,function(r){return _D[r]}).replace(JBe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function vH(t){return _a(t).replace(/ /g,"_x0020_")}var Tre=/[\u0000-\u001f]/g;function SD(t){var e=t+"";return e.replace(ED,function(r){return _D[r]}).replace(/\n/g,"<br/>").replace(Tre,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function ZBe(t){var e=t+"";return e.replace(ED,function(r){return _D[r]}).replace(Tre,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var yH=function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}}();function eTe(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function ts(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function cP(t){for(var e="",r=0,n=0,a=0,s=0,i=0,l=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(a=t.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=a&63,e+=String.fromCharCode(i);continue}if(s=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}i=t.charCodeAt(r++),l=((n&7)<<18|(a&63)<<12|(s&63)<<6|i&63)-65536,e+=String.fromCharCode(55296+(l>>>10&1023)),e+=String.fromCharCode(56320+(l&1023))}return e}function bH(t){var e=sm(2*t.length),r,n,a=1,s=0,i=0,l;for(n=0;n<t.length;n+=a)a=1,(l=t.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(t.charCodeAt(n+1)&63),a=2):l<240?(r=(l&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),a=3):(a=4,r=(l&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(e[s++]=i&255,e[s++]=i>>>8,i=0),e[s++]=r%256,e[s++]=r>>>8;return e.slice(0,s).toString("ucs2")}function wH(t){return hh(t,"binary").toString("utf8")}var LC="foo bar baz",Ba=En&&(wH(LC)==cP(LC)&&wH||bH(LC)==cP(LC)&&bH)||cP,Bf=En?function(t){return hh(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,a=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(a>>18&7))),e.push(String.fromCharCode(144+(a>>12&63))),e.push(String.fromCharCode(128+(a>>6&63))),e.push(String.fromCharCode(128+(a&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},b2=function(){var t={};return function(r,n){var a=r+"|"+(n||"");return t[a]?t[a]:t[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),kre=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<t.length;++a)n=n.replace(t[a][0],t[a][1]);return n}}(),tTe=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),rTe=/<\/?(?:vt:)?variant>/g,nTe=/<(?:vt:)([^>]*)>([\s\S]*)</;function NH(t,e){var r=nn(t),n=t.match(tTe(r.baseType))||[],a=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var i=s.replace(rTe,"").match(nTe);i&&a.push({v:Ba(i[2]),t:i[1]})}),a}var Fre=/(^\s|\s$|\n)/;function Zo(t,e){return"<"+t+(e.match(Fre)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function w2(t){return ei(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function xr(t,e,r){return"<"+t+(r!=null?w2(r):"")+(e!=null?(e.match(Fre)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function Ck(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function aTe(t,e){switch(typeof t){case"string":var r=xr("vt:lpwstr",_a(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return xr((t|0)==t?"vt:i4":"vt:r8",_a(String(t)));case"boolean":return xr("vt:bool",t?"true":"false")}if(t instanceof Date)return xr("vt:filetime",Ck(t));throw new Error("Unable to serialize "+t)}function ID(t){if(En&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return Ba(xm(yD(t)));throw new Error("Bad input format: expected Buffer or string")}var N2=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Zi={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},yg=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Wc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function sTe(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),a=t[e+6]&15,s=5;s>=0;--s)a=a*256+t[e+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function iTe(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,a=0,s=0,i=n?-e:e;isFinite(i)?i==0?a=s=0:(a=Math.floor(Math.log(i)/Math.LN2),s=i*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(e)?26985:0);for(var l=0;l<=5;++l,s/=256)t[r+l]=s&255;t[r+6]=(a&15)<<4|s&15,t[r+7]=a>>4|n}var CH=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var a=0,s=t[0][n].length;a<s;a+=r)e.push.apply(e,t[0][n].slice(a,a+r));return e},_H=En?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:hh(e)})):CH(t)}:CH,EH=function(t,e,r){for(var n=[],a=e;a<r;a+=2)n.push(String.fromCharCode(PA(t,a)));return n.join("").replace(tc,"")},jD=En?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(tc,""):EH(t,e,r)}:EH,SH=function(t,e,r){for(var n=[],a=e;a<e+r;++a)n.push(("0"+t[a].toString(16)).slice(-2));return n.join("")},Ore=En?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):SH(t,e,r)}:SH,IH=function(t,e,r){for(var n=[],a=e;a<r;a++)n.push(String.fromCharCode(yx(t,a)));return n.join("")},Sw=En?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):IH(e,r,n)}:IH,Dre=function(t,e){var r=Xc(t,e);return r>0?Sw(t,e+4,e+4+r-1):""},Rre=Dre,Mre=function(t,e){var r=Xc(t,e);return r>0?Sw(t,e+4,e+4+r-1):""},Lre=Mre,Ure=function(t,e){var r=2*Xc(t,e);return r>0?Sw(t,e+4,e+4+r-1):""},Qre=Ure,Vre=function(e,r){var n=Xc(e,r);return n>0?jD(e,r+4,r+4+n):""},Hre=Vre,$re=function(t,e){var r=Xc(t,e);return r>0?Sw(t,e+4,e+4+r):""},Gre=$re,Kre=function(t,e){return sTe(t,e)},PS=Kre,PD=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};En&&(Rre=function(e,r){if(!Buffer.isBuffer(e))return Dre(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},Lre=function(e,r){if(!Buffer.isBuffer(e))return Mre(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},Qre=function(e,r){if(!Buffer.isBuffer(e))return Ure(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},Hre=function(e,r){if(!Buffer.isBuffer(e))return Vre(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},Gre=function(e,r){if(!Buffer.isBuffer(e))return $re(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},PS=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):Kre(e,r)},PD=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var yx=function(t,e){return t[e]},PA=function(t,e){return t[e+1]*256+t[e]},oTe=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},Xc=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},ep=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},lTe=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function vb(t,e){var r="",n,a,s=[],i,l,c,u;switch(e){case"dbcs":if(u=this.l,En&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(c=0;c<t;++c)r+=String.fromCharCode(PA(this,u)),u+=2;t*=2;break;case"utf8":r=Sw(this,this.l,this.l+t);break;case"utf16le":t*=2,r=jD(this,this.l,this.l+t);break;case"wstr":return vb.call(this,t,"dbcs");case"lpstr-ansi":r=Rre(this,this.l),t=4+Xc(this,this.l);break;case"lpstr-cp":r=Lre(this,this.l),t=4+Xc(this,this.l);break;case"lpwstr":r=Qre(this,this.l),t=4+2*Xc(this,this.l);break;case"lpp4":t=4+Xc(this,this.l),r=Hre(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Xc(this,this.l),r=Gre(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(i=yx(this,this.l+t++))!==0;)s.push(MC(i));r=s.join("");break;case"_wstr":for(t=0,r="";(i=PA(this,this.l+t))!==0;)s.push(MC(i)),t+=2;t+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=yx(this,u),this.l=u+1,l=vb.call(this,t-c,i?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(MC(PA(this,u))),u+=2}r=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=yx(this,u),this.l=u+1,l=vb.call(this,t-c,i?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(MC(yx(this,u))),u+=1}r=s.join("");break;default:switch(t){case 1:return n=yx(this,this.l),this.l++,n;case 2:return n=(e==="i"?oTe:PA)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(t>0?ep:lTe)(this,this.l),this.l+=4,n):(a=Xc(this,this.l),this.l+=4,a);case 8:case-8:if(e==="f")return t==8?a=PS(this,this.l):a=PS([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;t=8;case 16:r=Ore(this,this.l,t);break}}return this.l+=t,r}var cTe=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},uTe=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},dTe=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function fTe(t,e,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=e.length;++a)dTe(this,e.charCodeAt(a),this.l+2*a);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=e.length;++a)this[this.l+a]=e.charCodeAt(a)&255;n=e.length}else if(r==="hex"){for(;a<t;++a)this[this.l++]=parseInt(e.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+t,this.length);for(a=0;a<Math.min(e.length,t);++a){var i=e.charCodeAt(a);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,cTe(this,e,this.l);break;case 8:if(n=8,r==="f"){iTe(this,e,this.l);break}case 16:break;case-4:n=4,uTe(this,e,this.l);break}return this.l+=n,this}function qre(t,e){var r=Ore(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function Yo(t,e){t.l=e,t.read_shift=vb,t.chk=qre,t.write_shift=fTe}function kl(t,e){t.l+=e}function zt(t){var e=sm(t);return Yo(e,0),e}function mh(t,e,r){if(t){var n,a,s;Yo(t,t.l||0);for(var i=t.length,l=0,c=0;t.l<i;){l=t.read_shift(1),l&128&&(l=(l&127)+((t.read_shift(1)&127)<<7));var u=j2[l]||j2[65535];for(n=t.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=t.read_shift(1))&127)<<7*a;c=t.l+s;var d=u.f&&u.f(t,s,r);if(t.l=c,e(d,u,l))return}}}function _c(){var t=[],e=En?256:2048,r=function(u){var d=zt(u);return Yo(d,0),d},n=r(e),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,e)))},i=function(){return a(),Co(t)},l=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(e)};return{next:s,push:l,end:i,_bufs:t}}function ar(t,e,r,n){var a=+e,s;if(!isNaN(a)){n||(n=j2[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var i=t.next(s);a<=127?i.write_shift(1,a):(i.write_shift(1,(a&127)+128),i.write_shift(1,a>>7));for(var l=0;l!=4;++l)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&PD(r)&&t.push(r)}}function yb(t,e,r){var n=is(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function jH(t,e,r){var n=is(t);return n.s=yb(n.s,e.s,r),n.e=yb(n.e,e.s,r),n}function bb(t,e){if(t.cRel&&t.c<0)for(t=is(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=is(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=tn(t);return!t.cRel&&t.cRel!=null&&(r=mTe(r)),!t.rRel&&t.rRel!=null&&(r=ATe(r)),r}function uP(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Ts(t.s.c)+":"+(t.e.cRel?"":"$")+Ts(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+vi(t.s.r)+":"+(t.e.rRel?"":"$")+vi(t.e.r):bb(t.s,e.biff)+":"+bb(t.e,e.biff)}function BD(t){return parseInt(hTe(t),10)-1}function vi(t){return""+(t+1)}function ATe(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function hTe(t){return t.replace(/\$(\d+)$/,"$1")}function TD(t){for(var e=pTe(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function Ts(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function mTe(t){return t.replace(/^([A-Z])/,"$$$1")}function pTe(t){return t.replace(/^\$([A-Z])/,"$1")}function gTe(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ks(t){for(var e=0,r=0,n=0;n<t.length;++n){var a=t.charCodeAt(n);a>=48&&a<=57?e=10*e+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:e-1}}function tn(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Ec(t){var e=t.indexOf(":");return e==-1?{s:ks(t),e:ks(t)}:{s:ks(t.slice(0,e)),e:ks(t.slice(e+1))}}function hn(t,e){return typeof e>"u"||typeof e=="number"?hn(t.s,t.e):(typeof t!="string"&&(t=tn(t)),typeof e!="string"&&(e=tn(e)),t==e?t:t+":"+e)}function Wn(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=t.length;for(r=0;n<s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.s.c=--r,r=0;n<s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(e.s.r=--r,n===s||a!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.e.c=--r,r=0;n!=s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return e.e.r=--r,e}function PH(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=ad(t.z,r?no(e):e)}catch{}try{return t.w=ad((t.XF||{}).numFmtId||(r?14:0),r?no(e):e)}catch{return""+e}}function ZA(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?ph[t.v]||t.v:e==null?PH(t,t.v):PH(t,e))}function vm(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function zre(t,e,r){var n=r||{},a=t?Array.isArray(t):n.dense,s=t||(a?[]:{}),i=0,l=0;if(s&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?ks(n.origin):n.origin;i=c.r,l=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=Wn(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var f=0;f!=e.length;++f)if(e[f]){if(!Array.isArray(e[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=e[f].length;++h)if(!(typeof e[f][h]>"u")){var A={v:e[f][h]},m=i+f,p=l+h;if(u.s.r>m&&(u.s.r=m),u.s.c>p&&(u.s.c=p),u.e.r<m&&(u.e.r=m),u.e.c<p&&(u.e.c=p),e[f][h]&&typeof e[f][h]=="object"&&!Array.isArray(e[f][h])&&!(e[f][h]instanceof Date))A=e[f][h];else if(Array.isArray(A.v)&&(A.f=e[f][h][1],A.v=A.v[0]),A.v===null)if(A.f)A.t="n";else if(n.nullError)A.t="e",A.v=0;else if(n.sheetStubs)A.t="z";else continue;else typeof A.v=="number"?A.t="n":typeof A.v=="boolean"?A.t="b":A.v instanceof Date?(A.z=n.dateNF||en[14],n.cellDates?(A.t="d",A.w=ad(A.z,no(A.v))):(A.t="n",A.v=no(A.v),A.w=ad(A.z,A.v))):A.t="s";if(a)s[m]||(s[m]=[]),s[m][p]&&s[m][p].z&&(A.z=s[m][p].z),s[m][p]=A;else{var g=tn({c:p,r:m});s[g]&&s[g].z&&(A.z=s[g].z),s[g]=A}}}return u.s.c<1e7&&(s["!ref"]=hn(u)),s}function l1(t,e){return zre(null,t,e)}function xTe(t){return t.read_shift(4,"i")}function Vd(t,e){return e||(e=zt(4)),e.write_shift(4,t),e}function Pl(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function Eo(t,e){var r=!1;return e==null&&(r=!0,e=zt(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function vTe(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function yTe(t,e){return e||(e=zt(4)),e.write_shift(2,0),e.write_shift(2,0),e}function kD(t,e){var r=t.l,n=t.read_shift(1),a=Pl(t),s=[],i={t:a,h:a};if(n&1){for(var l=t.read_shift(4),c=0;c!=l;++c)s.push(vTe(t));i.r=s}else i.r=[{ich:0,ifnt:0}];return t.l=r+e,i}function bTe(t,e){var r=!1;return e==null&&(r=!0,e=zt(15+4*t.t.length)),e.write_shift(1,0),Eo(t.t,e),r?e.slice(0,e.l):e}var wTe=kD;function NTe(t,e){var r=!1;return e==null&&(r=!0,e=zt(23+4*t.t.length)),e.write_shift(1,1),Eo(t.t,e),e.write_shift(4,1),yTe({},e),r?e.slice(0,e.l):e}function ld(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function bg(t,e){return e==null&&(e=zt(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function wg(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function Ng(t,e){return e==null&&(e=zt(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var CTe=Pl,Wre=Eo;function FD(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function BS(t,e){var r=!1;return e==null&&(r=!0,e=zt(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var _Te=Pl,_k=FD,OD=BS;function DD(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var a=n===0?PS([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):ep(e,0)>>2;return r?a/100:a}function Xre(t,e){e==null&&(e=zt(4));var r=0,n=0,a=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?a:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function Yre(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function ETe(t,e){return e||(e=zt(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var Cg=Yre,c1=ETe;function Il(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function Xp(t,e){return(e||zt(8)).write_shift(8,t,"f")}function STe(t){var e={},r=t.read_shift(1),n=r>>>1,a=t.read_shift(1),s=t.read_shift(2,"i"),i=t.read_shift(1),l=t.read_shift(1),c=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=a;var u=Np[a];u&&(e.rgb=_2(u));break;case 2:e.rgb=_2([i,l,c]);break;case 3:e.theme=a;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function TS(t,e){if(e||(e=zt(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function ITe(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function jTe(t,e){e||(e=zt(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}function Jre(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function PTe(t){return Jre(t,1)}function BTe(t){return Jre(t,2)}var RD=2,hc=3,UC=11,BH=12,kS=19,QC=64,TTe=65,kTe=71,FTe=4108,OTe=4126,yo=80,Zre=81,DTe=[yo,Zre],Ek={1:{n:"CodePage",t:RD},2:{n:"Category",t:yo},3:{n:"PresentationFormat",t:yo},4:{n:"ByteCount",t:hc},5:{n:"LineCount",t:hc},6:{n:"ParagraphCount",t:hc},7:{n:"SlideCount",t:hc},8:{n:"NoteCount",t:hc},9:{n:"HiddenCount",t:hc},10:{n:"MultimediaClipCount",t:hc},11:{n:"ScaleCrop",t:UC},12:{n:"HeadingPairs",t:FTe},13:{n:"TitlesOfParts",t:OTe},14:{n:"Manager",t:yo},15:{n:"Company",t:yo},16:{n:"LinksUpToDate",t:UC},17:{n:"CharacterCount",t:hc},19:{n:"SharedDoc",t:UC},22:{n:"HyperlinksChanged",t:UC},23:{n:"AppVersion",t:hc,p:"version"},24:{n:"DigSig",t:TTe},26:{n:"ContentType",t:yo},27:{n:"ContentStatus",t:yo},28:{n:"Language",t:yo},29:{n:"Version",t:yo},255:{},2147483648:{n:"Locale",t:kS},2147483651:{n:"Behavior",t:kS},1919054434:{}},Sk={1:{n:"CodePage",t:RD},2:{n:"Title",t:yo},3:{n:"Subject",t:yo},4:{n:"Author",t:yo},5:{n:"Keywords",t:yo},6:{n:"Comments",t:yo},7:{n:"Template",t:yo},8:{n:"LastAuthor",t:yo},9:{n:"RevNumber",t:yo},10:{n:"EditTime",t:QC},11:{n:"LastPrinted",t:QC},12:{n:"CreatedDate",t:QC},13:{n:"ModifiedDate",t:QC},14:{n:"PageCount",t:hc},15:{n:"WordCount",t:hc},16:{n:"CharCount",t:hc},17:{n:"Thumbnail",t:kTe},18:{n:"Application",t:yo},19:{n:"DocSecurity",t:hc},255:{},2147483648:{n:"Locale",t:kS},2147483651:{n:"Behavior",t:kS},1919054434:{}},TH={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},RTe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function MTe(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var LTe=MTe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Np=is(LTe),ph={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},ene={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},Ik={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},VC={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function MD(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function UTe(t){var e=MD();if(!t||!t.match)return e;var r={};if((t.match(Ol)||[]).forEach(function(n){var a=nn(n);switch(a[0].replace(XBe,"<")){case"<?xml":break;case"<Types":e.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":e[Ik[a.ContentType]]!==void 0&&e[Ik[a.ContentType]].push(a.PartName);break}}),e.xmlns!==Zi.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}function tne(t,e){var r=UBe(Ik),n=[],a;n[n.length]=bi,n[n.length]=xr("Types",null,{xmlns:Zi.CT,"xmlns:xsd":Zi.xsd,"xmlns:xsi":Zi.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return xr("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){t[c]&&t[c].length>0&&(a=t[c][0],n[n.length]=xr("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:VC[c][e.bookType]||VC[c].xlsx}))},i=function(c){(t[c]||[]).forEach(function(u){n[n.length]=xr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:VC[c][e.bookType]||VC[c].xlsx})})},l=function(c){(t[c]||[]).forEach(function(u){n[n.length]=xr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return s("workbooks"),i("sheets"),i("charts"),l("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),i("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Bn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function C2(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function wb(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(Ol)||[]).forEach(function(a){var s=nn(a);if(s[0]==="<Relationship"){var i={};i.Type=s.Type,i.Target=s.Target,i.Id=s.Id,s.TargetMode&&(i.TargetMode=s.TargetMode);var l=s.TargetMode==="External"?s.Target:Vy(s.Target,e);r[l]=i,n[s.Id]=i}}),r["!id"]=n,r}function nv(t){var e=[bi,xr("Relationships",null,{xmlns:Zi.RELS})];return ei(t["!id"]).forEach(function(r){e[e.length]=xr("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function ba(t,e,r,n,a,s){if(a||(a={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,a.Id="rId"+e,a.Type=n,a.Target=r,[Bn.HLINK,Bn.XPATH,Bn.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),t["!id"][a.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][a.Id]=a,t[("/"+a.Target).replace("//","/")]=a,e}var QTe="application/vnd.oasis.opendocument.spreadsheet";function VTe(t,e){for(var r=ID(t),n,a;n=N2.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=nn(n[0],!1),a.path=="/"&&a.type!==QTe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}function HTe(t){var e=[bi];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function kH(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function $Te(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function GTe(t){var e=[bi];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(kH(t[r][0],t[r][1])),e.push($Te("",t[r][0]));return e.push(kH("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function rne(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+_S.version+"</meta:generator></office:meta></office:document-meta>"}var ed=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],KTe=function(){for(var t=new Array(ed.length),e=0;e<ed.length;++e){var r=ed[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function nne(t){var e={};t=Ba(t);for(var r=0;r<ed.length;++r){var n=ed[r],a=t.match(KTe[r]);a!=null&&a.length>0&&(e[n[1]]=zn(a[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=ss(e[n[1]]))}return e}function dP(t,e,r,n,a){a[t]!=null||e==null||e===""||(a[t]=e,e=_a(e),n[n.length]=r?xr(t,e,r):Zo(t,e))}function ane(t,e){var r=e||{},n=[bi,xr("cp:coreProperties",null,{"xmlns:cp":Zi.CORE_PROPS,"xmlns:dc":Zi.dc,"xmlns:dcterms":Zi.dcterms,"xmlns:dcmitype":Zi.dcmitype,"xmlns:xsi":Zi.xsi})],a={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&dP("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:Ck(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),t.ModifiedDate!=null&&dP("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:Ck(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=ed.length;++s){var i=ed[s],l=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:t?t[i[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&dP(i[0],l,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Cp=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],sne=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function ine(t,e,r,n){var a=[];if(typeof t=="string")a=NH(t,n);else for(var s=0;s<t.length;++s)a=a.concat(t[s].map(function(d){return{v:d}}));var i=typeof e=="string"?NH(e,n).map(function(d){return d.v}):e,l=0,c=0;if(i.length>0)for(var u=0;u!==a.length;u+=2){switch(c=+a[u+1].v,a[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=i.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=i.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=i.slice(l,l+c);break}l+=c}}function qTe(t,e,r){var n={};return e||(e={}),t=Ba(t),Cp.forEach(function(a){var s=(t.match(b2(a[0]))||[])[1];switch(a[2]){case"string":s&&(e[a[1]]=zn(s));break;case"bool":e[a[1]]=s==="true";break;case"raw":var i=t.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));i&&i.length>0&&(n[a[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&ine(n.HeadingPairs,n.TitlesOfParts,e,r),e}function one(t){var e=[],r=xr;return t||(t={}),t.Application="SheetJS",e[e.length]=bi,e[e.length]=xr("Properties",null,{xmlns:Zi.EXT_PROPS,"xmlns:vt":Zi.vt}),Cp.forEach(function(n){if(t[n[1]]!==void 0){var a;switch(n[2]){case"string":a=_a(String(t[n[1]]));break;case"bool":a=t[n[1]]?"true":"false";break}a!==void 0&&(e[e.length]=r(n[0],a))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+_a(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var zTe=/<[^>]+>[^<]*/g;function WTe(t,e){var r={},n="",a=t.match(zTe);if(a)for(var s=0;s!=a.length;++s){var i=a[s],l=nn(i);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=zn(l.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var c=i.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=zn(d);break;case"bool":r[n]=ts(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=ss(d);break;case"cy":case"error":r[n]=zn(d);break;default:if(u.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,c)}}else if(i.slice(0,2)!=="</"){if(e.WTF)throw new Error(i)}}}return r}function lne(t){var e=[bi,xr("Properties",null,{xmlns:Zi.CUST_PROPS,"xmlns:vt":Zi.vt})];if(!t)return e.join("");var r=1;return ei(t).forEach(function(a){++r,e[e.length]=xr("property",aTe(t[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:_a(a)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var jk={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},fP;function XTe(t,e,r){fP||(fP=V4(jk)),e=fP[e]||e,t[e]=r}function YTe(t,e){var r=[];return ei(jk).map(function(n){for(var a=0;a<ed.length;++a)if(ed[a][1]==n)return ed[a];for(a=0;a<Cp.length;++a)if(Cp[a][1]==n)return Cp[a];throw n}).forEach(function(n){if(t[n[1]]!=null){var a=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(Zo(jk[n[1]]||n[1],a))}}),xr("DocumentProperties",r.join(""),{xmlns:Wc.o})}function JTe(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return t&&ei(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var i=0;i<ed.length;++i)if(s==ed[i][1])return;for(i=0;i<Cp.length;++i)if(s==Cp[i][1])return;for(i=0;i<r.length;++i)if(s==r[i])return;var l=t[s],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),a.push(xr(vH(s),l,{"dt:dt":c}))}}),e&&ei(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var i=e[s],l="string";typeof i=="number"?(l="float",i=String(i)):i===!0||i===!1?(l="boolean",i=i?"1":"0"):i instanceof Date?(l="dateTime.tz",i=i.toISOString()):i=String(i),a.push(xr(vH(s),i,{"dt:dt":l}))}}),"<"+n+' xmlns="'+Wc.o+'">'+a.join("")+"</"+n+">"}function LD(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function ZTe(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var i=zt(8);return i.write_shift(4,n),i.write_shift(4,a),i}function cne(t,e,r){var n=t.l,a=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return a}function une(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function dne(t,e,r){return e===31?une(t):cne(t,e,r)}function Pk(t,e,r){return dne(t,e,r===!1?0:4)}function eke(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return dne(t,e,0)}function tke(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var a=t.l;r[n]=t.read_shift(0,"lpwstr").replace(tc,""),t.l-a&2&&(t.l+=2)}return r}function rke(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(tc,"");return r}function nke(t){var e=t.l,r=FS(t,Zre);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=FS(t,hc);return[r,n]}function ake(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(nke(t));return r}function FH(t,e){for(var r=t.read_shift(4),n={},a=0;a!=r;++a){var s=t.read_shift(4),i=t.read_shift(4);n[s]=t.read_shift(i,e===1200?"utf16le":"utf8").replace(tc,"").replace(Qy,"!"),e===1200&&i%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function fne(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function ske(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function FS(t,e,r){var n=t.read_shift(2),a,s=r||{};if(t.l+=2,e!==BH&&n!==e&&DTe.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===BH?n:e){case 2:return a=t.read_shift(2,"i"),s.raw||(t.l+=2),a;case 3:return a=t.read_shift(4,"i"),a;case 11:return t.read_shift(4)!==0;case 19:return a=t.read_shift(4),a;case 30:return cne(t,n,4).replace(tc,"");case 31:return une(t);case 64:return LD(t);case 65:return fne(t);case 71:return ske(t);case 80:return Pk(t,n,!s.raw).replace(tc,"");case 81:return eke(t,n).replace(tc,"");case 4108:return ake(t);case 4126:case 4127:return n==4127?tke(t):rke(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function OH(t,e){var r=zt(4),n=zt(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=zt(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=ZTe(e);break;case 31:case 80:for(n=zt(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return Co([r,n])}function DH(t,e){var r=t.l,n=t.read_shift(4),a=t.read_shift(4),s=[],i=0,l=0,c=-1,u={};for(i=0;i!=a;++i){var d=t.read_shift(4),f=t.read_shift(4);s[i]=[d,f+r]}s.sort(function(y,b){return y[1]-b[1]});var h={};for(i=0;i!=a;++i){if(t.l!==s[i][1]){var A=!0;if(i>0&&e)switch(e[s[i-1][0]].t){case 2:t.l+2===s[i][1]&&(t.l+=2,A=!1);break;case 80:t.l<=s[i][1]&&(t.l=s[i][1],A=!1);break;case 4108:t.l<=s[i][1]&&(t.l=s[i][1],A=!1);break}if((!e||i==0)&&t.l<=s[i][1]&&(A=!1,t.l=s[i][1]),A)throw new Error("Read Error: Expected address "+s[i][1]+" at "+t.l+" :"+i)}if(e){var m=e[s[i][0]];if(h[m.n]=FS(t,m.t,{raw:!0}),m.p==="version"&&(h[m.n]=String(h[m.n]>>16)+"."+("0000"+String(h[m.n]&65535)).slice(-4)),m.n=="CodePage")switch(h[m.n]){case 0:h[m.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Dd(l=h[m.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[m.n])}}else if(s[i][0]===1){if(l=h.CodePage=FS(t,RD),Dd(l),c!==-1){var p=t.l;t.l=s[c][1],u=FH(t,l),t.l=p}}else if(s[i][0]===0){if(l===0){c=i,t.l=s[i+1][1];continue}u=FH(t,l)}else{var g=u[s[i][0]],x;switch(t[t.l]){case 65:t.l+=4,x=fne(t);break;case 30:t.l+=4,x=Pk(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,x=Pk(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,x=t.read_shift(4,"i");break;case 19:t.l+=4,x=t.read_shift(4);break;case 5:t.l+=4,x=t.read_shift(8,"f");break;case 11:t.l+=4,x=li(t,4);break;case 64:t.l+=4,x=ss(LD(t));break;default:throw new Error("unparsed value: "+t[t.l])}h[g]=x}}return t.l=r+n,h}var Ane=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function ike(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function RH(t,e,r){var n=zt(8),a=[],s=[],i=8,l=0,c=zt(8),u=zt(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),a.push(u),i+=8+c.length,!e){u=zt(8),u.write_shift(4,0),a.unshift(u);var d=[zt(4)];for(d[0].write_shift(4,t.length),l=0;l<t.length;++l){var f=t[l][0];for(c=zt(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=Co(d),s.unshift(c),i+=8+c.length}for(l=0;l<t.length;++l)if(!(e&&!e[t[l][0]])&&!(Ane.indexOf(t[l][0])>-1||sne.indexOf(t[l][0])>-1)&&t[l][1]!=null){var h=t[l][1],A=0;if(e){A=+e[t[l][0]];var m=r[A];if(m.p=="version"&&typeof h=="string"){var p=h.split(".");h=(+p[0]<<16)+(+p[1]||0)}c=OH(m.t,h)}else{var g=ike(h);g==-1&&(g=31,h=String(h)),c=OH(g,h)}s.push(c),u=zt(8),u.write_shift(4,e?A:2+l),a.push(u),i+=8+c.length}var x=8*(s.length+1);for(l=0;l<s.length;++l)a[l].write_shift(4,x),x+=s[l].length;return n.write_shift(4,i),n.write_shift(4,s.length),Co([n].concat(a).concat(s))}function MH(t,e,r){var n=t.content;if(!n)return{};Yo(n,0);var a,s,i,l,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==qr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),l=n.read_shift(4),a===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);a===2&&(i=n.read_shift(16),c=n.read_shift(4));var f=DH(n,e),h={SystemIdentifier:u};for(var A in f)h[A]=f[A];if(h.FMTID=s,a===1)return h;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var m;try{m=DH(n,null)}catch{}for(A in m)h[A]=m[A];return h.FMTID=[s,i],h}function LH(t,e,r,n,a,s){var i=zt(a?68:48),l=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,qr.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,a?2:1),i.write_shift(16,e,"hex"),i.write_shift(4,a?68:48);var c=RH(t,r,n);if(l.push(c),a){var u=RH(a,null,null);i.write_shift(16,s,"hex"),i.write_shift(4,68+c.length),l.push(u)}return Co(l)}function Jh(t,e){return t.read_shift(e),null}function oke(t,e){e||(e=zt(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function lke(t,e,r){for(var n=[],a=t.l+e;t.l<a;)n.push(r(t,a-t.l));if(a!==t.l)throw new Error("Slurp error");return n}function li(t,e){return t.read_shift(e)===1}function Wl(t,e){return e||(e=zt(2)),e.write_shift(2,+!!t),e}function Si(t){return t.read_shift(2,"u")}function Qu(t,e){return e||(e=zt(2)),e.write_shift(2,t),e}function hne(t,e){return lke(t,e,Si)}function cke(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function mne(t,e,r){return r||(r=zt(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function Iw(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=t.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var i=n?t.read_shift(n,a):"";return i}function uke(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,a=r&8,s=1+(r&1),i=0,l,c={};a&&(i=t.read_shift(2)),n&&(l=t.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=e===0?"":t.read_shift(e,u);return a&&(t.l+=4*i),n&&(t.l+=l),c.t=d,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function dke(t){var e=t.t||"",r=zt(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=zt(2*e.length);n.write_shift(2*e.length,e,"utf16le");var a=[r,n];return Co(a)}function Yp(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var a=t.read_shift(1);return a===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function jw(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):Yp(t,n,r)}function _g(t,e,r){if(r.biff>5)return jw(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function pne(t,e,r){return r||(r=zt(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function fke(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function Ake(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var a=t.read_shift((n?e-24:e)>>1,"utf16le").replace(tc,"");return n&&(t.l+=24),a}function hke(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=t.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=t.read_shift(s>>1,"utf16le").replace(tc,"");return r+i}function mke(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return Ake(t);case"0303000000000000c000000000000046":return hke(t);default:throw new Error("Unsupported Moniker "+r)}}function HC(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(tc,""):"";return r}function UH(t,e){e||(e=zt(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function pke(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=t.read_shift(2);t.l+=2;var s,i,l,c,u="",d,f;a&16&&(s=HC(t,r-t.l)),a&128&&(i=HC(t,r-t.l)),(a&257)===257&&(l=HC(t,r-t.l)),(a&257)===1&&(c=mke(t,r-t.l)),a&8&&(u=HC(t,r-t.l)),a&32&&(d=t.read_shift(16)),a&64&&(f=LD(t)),t.l=r;var h=i||l||c||"";h&&u&&(h+="#"+u),h||(h="#"+u),a&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var A={Target:h};return d&&(A.guid=d),f&&(A.time=f),s&&(A.Tooltip=s),A}function gke(t){var e=zt(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)e.write_shift(4,i[r]);if(s==28)n=n.slice(1),UH(n,e);else if(s&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)e.write_shift(1,parseInt(i[r],16));var l=a>-1?n.slice(0,a):n;for(e.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)e.write_shift(2,l.charCodeAt(r));e.write_shift(2,0),s&8&&UH(a>-1?n.slice(a+1):"",e)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)e.write_shift(1,parseInt(i[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(e.write_shift(2,c),e.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)e.write_shift(1,n.charCodeAt(r+3*c)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function gne(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),a=t.read_shift(1);return[e,r,n,a]}function xne(t,e){var r=gne(t);return r[3]=0,r}function Xf(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function Jp(t,e,r,n){return n||(n=zt(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function xke(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function vke(t,e,r){return e===0?"":_g(t,e,r)}function yke(t,e,r){var n=r.biff>8?4:2,a=t.read_shift(n),s=t.read_shift(n,"i"),i=t.read_shift(n,"i");return[a,s,i]}function vne(t){var e=t.read_shift(2),r=DD(t);return[e,r]}function bke(t,e,r){t.l+=4,e-=4;var n=t.l+e,a=Iw(t,e,r),s=t.read_shift(2);if(n-=t.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return t.l+=s,a}function G4(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2);return{s:{c:n,r:e},e:{c:a,r}}}function yne(t,e){return e||(e=zt(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function bne(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),a=t.read_shift(1);return{s:{c:n,r:e},e:{c:a,r}}}var wke=bne;function wne(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function Nke(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function Cke(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function gl(t){t.l+=2,t.l+=t.read_shift(2)}var _ke={0:gl,4:gl,5:gl,6:gl,7:Cke,8:gl,9:gl,10:gl,11:gl,12:gl,13:Nke,14:gl,15:gl,16:gl,17:gl,18:gl,19:gl,20:gl,21:wne};function Eke(t,e){for(var r=t.l+e,n=[];t.l<r;){var a=t.read_shift(2);t.l-=2;try{n.push(_ke[a](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function $C(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function UD(t,e,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=zt(a);return s.write_shift(2,n),s.write_shift(2,e),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function Ske(t,e){return e===0||t.read_shift(2),1200}function Ike(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,a=_g(t,0,r);return t.read_shift(e+n-t.l),a}function jke(t,e){var r=!e||e.biff==8,n=zt(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function Pke(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function Bke(t,e,r){var n=t.read_shift(4),a=t.read_shift(1)&3,s=t.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var i=Iw(t,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:a,dt:s,name:i}}function Tke(t,e){var r=!e||e.biff>=8?2:1,n=zt(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function kke(t,e){for(var r=t.l+e,n=t.read_shift(4),a=t.read_shift(4),s=[],i=0;i!=a&&t.l<r;++i)s.push(uke(t));return s.Count=n,s.Unique=a,s}function Fke(t,e){var r=zt(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],a=0;a<t.length;++a)n[a]=dke(t[a]);var s=Co([r].concat(n));return s.parts=[r.length].concat(n.map(function(i){return i.length})),s}function Oke(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function Dke(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function Rke(t){var e=xke(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function Mke(t){return t.read_shift(2),t.read_shift(4)}function QH(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var a=t.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function Lke(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),l=t.read_shift(2),c=t.read_shift(2),u=t.read_shift(2);return{Pos:[e,r],Dim:[n,a],Flags:s,CurTab:i,FirstTab:l,Selected:c,TabRatio:u}}function Uke(){var t=zt(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function Qke(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function Vke(t){var e=zt(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function Hke(){}function $ke(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=Iw(t,0,r),n}function Gke(t,e){var r=t.name||"Arial",n=e&&e.biff==5,a=n?15+r.length:16+2*r.length,s=zt(a);return s.write_shift(2,t.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function Kke(t){var e=Xf(t);return e.isst=t.read_shift(4),e}function qke(t,e,r,n){var a=zt(10);return Jp(t,e,n,a),a.write_shift(4,r),a}function zke(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,a=Xf(t);r.biff==2&&t.l++;var s=jw(t,n-t.l,r);return a.val=s,a}function Wke(t,e,r,n,a){var s=!a||a.biff==8,i=zt(8+ +s+(1+s)*r.length);return Jp(t,e,n,i),i.write_shift(2,r.length),s&&i.write_shift(1,1),i.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),i}function Xke(t,e,r){var n=t.read_shift(2),a=_g(t,0,r);return[n,a]}function Yke(t,e,r,n){var a=r&&r.biff==5;n||(n=zt(a?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(a?1:2,e.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*e.length,e,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var Jke=_g;function VH(t,e,r){var n=t.l+e,a=r.biff==8||!r.biff?4:2,s=t.read_shift(a),i=t.read_shift(a),l=t.read_shift(2),c=t.read_shift(2);return t.l=n,{s:{r:s,c:l},e:{r:i,c}}}function Zke(t,e){var r=e.biff==8||!e.biff?4:2,n=zt(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function eFe(t){var e=t.read_shift(2),r=t.read_shift(2),n=vne(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function tFe(t,e){for(var r=t.l+e-2,n=t.read_shift(2),a=t.read_shift(2),s=[];t.l<r;)s.push(vne(t));if(t.l!==r)throw new Error("MulRK read error");var i=t.read_shift(2);if(s.length!=i-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:i,rkrec:s}}function rFe(t,e){for(var r=t.l+e-2,n=t.read_shift(2),a=t.read_shift(2),s=[];t.l<r;)s.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var i=t.read_shift(2);if(s.length!=i-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:i,ixfe:s}}function nFe(t,e,r,n){var a={},s=t.read_shift(4),i=t.read_shift(4),l=t.read_shift(4),c=t.read_shift(2);return a.patternType=RTe[l>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=i&15,a.dgRight=i>>4&15,a.dgTop=i>>8&15,a.dgBottom=i>>12&15,a.icvLeft=i>>16&127,a.icvRight=i>>23&127,a.grbitDiag=i>>30&3,a.icvTop=l&127,a.icvBottom=l>>7&127,a.icvDiag=l>>14&127,a.dgDiag=l>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function aFe(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=nFe(t,e,n.fStyle,r),n}function HH(t,e,r,n){var a=r&&r.biff==5;n||(n=zt(a?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function sFe(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function iFe(t){var e=zt(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function $H(t,e,r){var n=Xf(t);(r.biff==2||e==9)&&++t.l;var a=cke(t);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function oFe(t,e,r,n,a,s){var i=zt(8);return Jp(t,e,n,i),mne(r,s,i),i}function lFe(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Xf(t),a=Il(t);return n.val=a,n}function cFe(t,e,r,n){var a=zt(14);return Jp(t,e,n,a),Xp(r,a),a}var GH=vke;function uFe(t,e,r){var n=t.l+e,a=t.read_shift(2),s=t.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var i=Yp(t,s),l=[];n>t.l;)l.push(jw(t));return[s,a,i,l]}function KH(t,e,r){var n=t.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=bke(t,e-2,r)),s.body=a||t.read_shift(e-2),typeof a=="string"&&(s.Name=a),s}var dFe=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function qH(t,e,r){var n=t.l+e,a=t.read_shift(2),s=t.read_shift(1),i=t.read_shift(1),l=t.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),c=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var u=Yp(t,i,r);a&32&&(u=dFe[u.charCodeAt(0)]);var d=n-t.l;r&&r.biff==2&&--d;var f=n==t.l||l===0||!(d>0)?[]:ERe(t,d,r,l);return{chKey:s,Name:u,itab:c,rgce:f}}function Nne(t,e,r){if(r.biff<8)return fFe(t,e,r);for(var n=[],a=t.l+e,s=t.read_shift(r.biff>8?4:2);s--!==0;)n.push(yke(t,r.biff>8?12:6,r));if(t.l!=a)throw new Error("Bad ExternSheet: "+t.l+" != "+a);return n}function fFe(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=Iw(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function AFe(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),a=t.read_shift(2),s=Yp(t,n,r),i=Yp(t,a,r);return[s,i]}function hFe(t,e,r){var n=bne(t);t.l++;var a=t.read_shift(1);return e-=8,[SRe(t,e,r),a,n]}function zH(t,e,r){var n=wke(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,CRe(t,e,r)]}function mFe(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function pFe(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),l=_g(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:a},l,i,s]}}function gFe(t,e,r){return pFe(t,e,r)}function xFe(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(G4(t));return r}function vFe(t){var e=zt(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)yne(t[r],e);return e}function yFe(t,e,r){if(r&&r.biff<8)return wFe(t,e,r);var n=wne(t),a=Eke(t,e-22,n[1]);return{cmo:n,ft:a}}var bFe={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var a=t.read_shift(1);return t.l+=a,t.l=r,{fmt:n}}};function wFe(t,e,r){t.l+=4;var n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var i=[];return i.push((bFe[n]||kl)(t,e,r)),{cmo:[a,n,s],ft:i}}function NFe(t,e,r){var n=t.l,a="";try{t.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(s)==-1?t.l+=6:i=fke(t,6,r);var l=t.read_shift(2);t.read_shift(2),Si(t,2);var c=t.read_shift(2);t.l+=c;for(var u=1;u<t.lens.length-1;++u){if(t.l-n!=t.lens[u])throw new Error("TxO: bad continue record");var d=t[t.l],f=Yp(t,t.lens[u+1]-t.lens[u]-1);if(a+=f,a.length>=(d?l:2*l))break}if(a.length!==l&&a.length!==l*2)throw new Error("cchText: "+l+" != "+a.length);return t.l=n+e,{t:a}}catch{return t.l=n+e,{t:a}}}function CFe(t,e){var r=G4(t);t.l+=16;var n=pke(t,e-24);return[r,n]}function _Fe(t){var e=zt(24),r=ks(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)e.write_shift(1,parseInt(n[a],16));return Co([e,gke(t[1])])}function EFe(t,e){t.read_shift(2);var r=G4(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(tc,""),[r,n]}function SFe(t){var e=t[1].Tooltip,r=zt(10+2*(e.length+1));r.write_shift(2,2048);var n=ks(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<e.length;++a)r.write_shift(2,e.charCodeAt(a));return r.write_shift(2,0),r}function IFe(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=TH[r]||r,r=t.read_shift(2),e[1]=TH[r]||r,e}function jFe(t){return t||(t=zt(4)),t.write_shift(2,1),t.write_shift(2,1),t}function PFe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(xne(t));return r}function BFe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(xne(t));return r}function TFe(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function Cne(t,e,r){if(!r.cellStyles)return kl(t,e);var n=r&&r.biff>=12?4:2,a=t.read_shift(n),s=t.read_shift(n),i=t.read_shift(n),l=t.read_shift(n),c=t.read_shift(2);n==2&&(t.l+=2);var u={s:a,e:s,w:i,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function kFe(t,e){var r=zt(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function FFe(t,e){var r={};return e<32||(t.l+=16,r.header=Il(t),r.footer=Il(t),t.l+=2),r}function OFe(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var a=t.read_shift(1);return t.l+=3,a&16&&(n.area=!0),n}function DFe(t){for(var e=zt(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}var RFe=Xf,MFe=hne,LFe=jw;function UFe(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,a}function QFe(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Xf(t);++t.l;var a=_g(t,e-7,r);return n.t="str",n.val=a,n}function VFe(t){var e=Xf(t);++t.l;var r=Il(t);return e.t="n",e.val=r,e}function HFe(t,e,r){var n=zt(15);return kw(n,t,e),n.write_shift(8,r,"f"),n}function $Fe(t){var e=Xf(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function GFe(t,e,r){var n=zt(9);return kw(n,t,e),n.write_shift(2,r),n}function KFe(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function qFe(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function zFe(t,e,r){var n=t.l+e,a=Xf(t),s=t.read_shift(2),i=Yp(t,s,r);return t.l=n,a.t="str",a.val=i,a}var WFe=[2,3,48,49,131,139,140,245],Bk=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=V4({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],d=sm(1);switch(c.type){case"base64":d=Yc(uu(l));break;case"binary":d=Yc(l);break;case"buffer":case"array":d=l;break}Yo(d,0);var f=d.read_shift(1),h=!!(f&136),A=!1,m=!1;switch(f){case 2:break;case 3:break;case 48:A=!0,h=!0;break;case 49:A=!0,h=!0;break;case 131:break;case 139:break;case 140:m=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var p=0,g=521;f==2&&(p=d.read_shift(2)),d.l+=3,f!=2&&(p=d.read_shift(4)),p>1048576&&(p=1e6),f!=2&&(g=d.read_shift(2));var x=d.read_shift(2),y=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(y=t[d[d.l]]),d.l+=1,d.l+=2),m&&(d.l+=36);for(var b=[],w={},j=Math.min(d.length,f==2?521:g-10-(A?264:0)),I=m?32:11;d.l<j&&d[d.l]!=13;)switch(w={},w.name=x2.utils.decode(y,d.slice(d.l,d.l+I)).replace(/[\u0000\r\n].*$/g,""),d.l+=I,w.type=String.fromCharCode(d.read_shift(1)),f!=2&&!m&&(w.offset=d.read_shift(4)),w.len=d.read_shift(1),f==2&&(w.offset=d.read_shift(2)),w.dec=d.read_shift(1),w.name.length&&b.push(w),f!=2&&(d.l+=m?13:14),w.type){case"B":(!A||w.len!=8)&&c.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+w.type)}if(d[d.l]!==13&&(d.l=g-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=g;var _=0,S=0;for(u[0]=[],S=0;S!=b.length;++S)u[0][S]=b[S].name;for(;p-- >0;){if(d[d.l]===42){d.l+=x;continue}for(++d.l,u[++_]=[],S=0,S=0;S!=b.length;++S){var E=d.slice(d.l,d.l+b[S].len);d.l+=b[S].len,Yo(E,0);var k=x2.utils.decode(y,E);switch(b[S].type){case"C":k.trim().length&&(u[_][S]=k.replace(/\s+$/,""));break;case"D":k.length===8?u[_][S]=new Date(+k.slice(0,4),+k.slice(4,6)-1,+k.slice(6,8)):u[_][S]=k;break;case"F":u[_][S]=parseFloat(k.trim());break;case"+":case"I":u[_][S]=m?E.read_shift(-4,"i")^2147483648:E.read_shift(4,"i");break;case"L":switch(k.trim().toUpperCase()){case"Y":case"T":u[_][S]=!0;break;case"N":case"F":u[_][S]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+k+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[_][S]="##MEMO##"+(m?parseInt(k.trim(),10):E.read_shift(4));break;case"N":k=k.replace(/\u0000/g,"").trim(),k&&k!="."&&(u[_][S]=+k||0);break;case"@":u[_][S]=new Date(E.read_shift(-8,"f")-621356832e5);break;case"T":u[_][S]=new Date((E.read_shift(4)-2440588)*864e5+E.read_shift(4));break;case"Y":u[_][S]=E.read_shift(4,"i")/1e4+E.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[_][S]=-E.read_shift(-8,"f");break;case"B":if(A&&b[S].len==8){u[_][S]=E.read_shift(8,"f");break}case"G":case"P":E.l+=b[S].len;break;case"0":if(b[S].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+b[S].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=b,u}function n(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=l1(r(l,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(l,c){try{return vm(n(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function i(l,c){var u=c||{};if(+u.codepage>=0&&Dd(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=_c(),f=RS(l,{header:1,raw:!0,cellDates:!0}),h=f[0],A=f.slice(1),m=l["!cols"]||[],p=0,g=0,x=0,y=1;for(p=0;p<h.length;++p){if(((m[p]||{}).DBF||{}).name){h[p]=m[p].DBF.name,++x;continue}if(h[p]!=null){if(++x,typeof h[p]=="number"&&(h[p]=h[p].toString(10)),typeof h[p]!="string")throw new Error("DBF Invalid column name "+h[p]+" |"+typeof h[p]+"|");if(h.indexOf(h[p])!==p){for(g=0;g<1024;++g)if(h.indexOf(h[p]+"_"+g)==-1){h[p]+="_"+g;break}}}}var b=Wn(l["!ref"]),w=[],j=[],I=[];for(p=0;p<=b.e.c-b.s.c;++p){var _="",S="",E=0,k=[];for(g=0;g<A.length;++g)A[g][p]!=null&&k.push(A[g][p]);if(k.length==0||h[p]==null){w[p]="?";continue}for(g=0;g<k.length;++g){switch(typeof k[g]){case"number":S="B";break;case"string":S="C";break;case"boolean":S="L";break;case"object":S=k[g]instanceof Date?"D":"C";break;default:S="C"}E=Math.max(E,String(k[g]).length),_=_&&_!=S?"C":S}E>250&&(E=250),S=((m[p]||{}).DBF||{}).type,S=="C"&&m[p].DBF.len>E&&(E=m[p].DBF.len),_=="B"&&S=="N"&&(_="N",I[p]=m[p].DBF.dec,E=m[p].DBF.len),j[p]=_=="C"||S=="N"?E:s[_]||0,y+=j[p],w[p]=_}var P=d.next(32);for(P.write_shift(4,318902576),P.write_shift(4,A.length),P.write_shift(2,296+32*x),P.write_shift(2,y),p=0;p<4;++p)P.write_shift(4,0);for(P.write_shift(4,0|(+e[Are]||3)<<8),p=0,g=0;p<h.length;++p)if(h[p]!=null){var T=d.next(32),O=(h[p].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);T.write_shift(1,O,"sbcs"),T.write_shift(1,w[p]=="?"?"C":w[p],"sbcs"),T.write_shift(4,g),T.write_shift(1,j[p]||s[w[p]]||0),T.write_shift(1,I[p]||0),T.write_shift(1,2),T.write_shift(4,0),T.write_shift(1,0),T.write_shift(4,0),T.write_shift(4,0),g+=j[p]||s[w[p]]||0}var W=d.next(264);for(W.write_shift(4,13),p=0;p<65;++p)W.write_shift(4,0);for(p=0;p<A.length;++p){var Ae=d.next(y);for(Ae.write_shift(1,0),g=0;g<h.length;++g)if(h[g]!=null)switch(w[g]){case"L":Ae.write_shift(1,A[p][g]==null?63:A[p][g]?84:70);break;case"B":Ae.write_shift(8,A[p][g]||0,"f");break;case"N":var de="0";for(typeof A[p][g]=="number"&&(de=A[p][g].toFixed(I[g]||0)),x=0;x<j[g]-de.length;++x)Ae.write_shift(1,32);Ae.write_shift(1,de,"sbcs");break;case"D":A[p][g]?(Ae.write_shift(4,("0000"+A[p][g].getFullYear()).slice(-4),"sbcs"),Ae.write_shift(2,("00"+(A[p][g].getMonth()+1)).slice(-2),"sbcs"),Ae.write_shift(2,("00"+A[p][g].getDate()).slice(-2),"sbcs")):Ae.write_shift(8,"00000000","sbcs");break;case"C":var fe=String(A[p][g]!=null?A[p][g]:"").slice(0,j[g]);for(Ae.write_shift(1,fe,"sbcs"),x=0;x<j[g]-fe.length;++x)Ae.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:i}}(),_ne=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+ei(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,A){var m=t[A];return typeof m=="number"?sH(m):m},n=function(h,A,m){var p=A.charCodeAt(0)-32<<4|m.charCodeAt(0)-48;return p==59?h:sH(p)};t["|"]=254;function a(h,A){switch(A.type){case"base64":return s(uu(h),A);case"binary":return s(h,A);case"buffer":return s(En&&Buffer.isBuffer(h)?h.toString("binary"):xm(h),A);case"array":return s(Wp(h),A)}throw new Error("Unrecognized type "+A.type)}function s(h,A){var m=h.split(/[\n\r]+/),p=-1,g=-1,x=0,y=0,b=[],w=[],j=null,I={},_=[],S=[],E=[],k=0,P;for(+A.codepage>=0&&Dd(+A.codepage);x!==m.length;++x){k=0;var T=m[x].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),O=T.replace(/;;/g,"\0").split(";").map(function(R){return R.replace(/\u0000/g,";")}),W=O[0],Ae;if(T.length>0)switch(W){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":O[1].charAt(0)=="P"&&w.push(T.slice(3).replace(/;;/g,";"));break;case"C":var de=!1,fe=!1,ge=!1,ee=!1,Fe=-1,Pe=-1;for(y=1;y<O.length;++y)switch(O[y].charAt(0)){case"A":break;case"X":g=parseInt(O[y].slice(1))-1,fe=!0;break;case"Y":for(p=parseInt(O[y].slice(1))-1,fe||(g=0),P=b.length;P<=p;++P)b[P]=[];break;case"K":Ae=O[y].slice(1),Ae.charAt(0)==='"'?Ae=Ae.slice(1,Ae.length-1):Ae==="TRUE"?Ae=!0:Ae==="FALSE"?Ae=!1:isNaN(Qd(Ae))?isNaN(Sv(Ae).getDate())||(Ae=ss(Ae)):(Ae=Qd(Ae),j!==null&&i1(j)&&(Ae=$4(Ae))),de=!0;break;case"E":ee=!0;var F=av(O[y].slice(1),{r:p,c:g});b[p][g]=[b[p][g],F];break;case"S":ge=!0,b[p][g]=[b[p][g],"S5S"];break;case"G":break;case"R":Fe=parseInt(O[y].slice(1))-1;break;case"C":Pe=parseInt(O[y].slice(1))-1;break;default:if(A&&A.WTF)throw new Error("SYLK bad record "+T)}if(de&&(b[p][g]&&b[p][g].length==2?b[p][g][0]=Ae:b[p][g]=Ae,j=null),ge){if(ee)throw new Error("SYLK shared formula cannot have own formula");var Q=Fe>-1&&b[Fe][Pe];if(!Q||!Q[1])throw new Error("SYLK shared formula cannot find base");b[p][g][1]=Hne(Q[1],{r:p-Fe,c:g-Pe})}break;case"F":var H=0;for(y=1;y<O.length;++y)switch(O[y].charAt(0)){case"X":g=parseInt(O[y].slice(1))-1,++H;break;case"Y":for(p=parseInt(O[y].slice(1))-1,P=b.length;P<=p;++P)b[P]=[];break;case"M":k=parseInt(O[y].slice(1))/20;break;case"F":break;case"G":break;case"P":j=w[parseInt(O[y].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(E=O[y].slice(1).split(" "),P=parseInt(E[0],10);P<=parseInt(E[1],10);++P)k=parseInt(E[2],10),S[P-1]=k===0?{hidden:!0}:{wch:k},im(S[P-1]);break;case"C":g=parseInt(O[y].slice(1))-1,S[g]||(S[g]={});break;case"R":p=parseInt(O[y].slice(1))-1,_[p]||(_[p]={}),k>0?(_[p].hpt=k,_[p].hpx=jv(k)):k===0&&(_[p].hidden=!0);break;default:if(A&&A.WTF)throw new Error("SYLK bad record "+T)}H<1&&(j=null);break;default:if(A&&A.WTF)throw new Error("SYLK bad record "+T)}}return _.length>0&&(I["!rows"]=_),S.length>0&&(I["!cols"]=S),A&&A.sheetRows&&(b=b.slice(0,A.sheetRows)),[b,I]}function i(h,A){var m=a(h,A),p=m[0],g=m[1],x=l1(p,A);return ei(g).forEach(function(y){x[y]=g[y]}),x}function l(h,A){return vm(i(h,A),A)}function c(h,A,m,p){var g="C;Y"+(m+1)+";X"+(p+1)+";K";switch(h.t){case"n":g+=h.v||0,h.f&&!h.F&&(g+=";E"+KD(h.f,{r:m,c:p}));break;case"b":g+=h.v?"TRUE":"FALSE";break;case"e":g+=h.w||h.v;break;case"d":g+='"'+(h.w||h.v)+'"';break;case"s":g+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return g}function u(h,A){A.forEach(function(m,p){var g="F;W"+(p+1)+" "+(p+1)+" ";m.hidden?g+="0":(typeof m.width=="number"&&!m.wpx&&(m.wpx=E2(m.width)),typeof m.wpx=="number"&&!m.wch&&(m.wch=S2(m.wpx)),typeof m.wch=="number"&&(g+=Math.round(m.wch))),g.charAt(g.length-1)!=" "&&h.push(g)})}function d(h,A){A.forEach(function(m,p){var g="F;";m.hidden?g+="M0;":m.hpt?g+="M"+20*m.hpt+";":m.hpx&&(g+="M"+20*I2(m.hpx)+";"),g.length>2&&h.push(g+"R"+(p+1))})}function f(h,A){var m=["ID;PWXL;N;E"],p=[],g=Wn(h["!ref"]),x,y=Array.isArray(h),b=`\r
`;m.push("P;PGeneral"),m.push("F;P0;DG0G8;M255"),h["!cols"]&&u(m,h["!cols"]),h["!rows"]&&d(m,h["!rows"]),m.push("B;Y"+(g.e.r-g.s.r+1)+";X"+(g.e.c-g.s.c+1)+";D"+[g.s.c,g.s.r,g.e.c,g.e.r].join(" "));for(var w=g.s.r;w<=g.e.r;++w)for(var j=g.s.c;j<=g.e.c;++j){var I=tn({r:w,c:j});x=y?(h[w]||[])[j]:h[I],!(!x||x.v==null&&(!x.f||x.F))&&p.push(c(x,h,w,j))}return m.join(b)+b+p.join(b)+b+"E"+b}return{to_workbook:l,to_sheet:i,from_sheet:f}}(),Ene=function(){function t(s,i){switch(i.type){case"base64":return e(uu(s),i);case"binary":return e(s,i);case"buffer":return e(En&&Buffer.isBuffer(s)?s.toString("binary"):xm(s),i);case"array":return e(Wp(s),i)}throw new Error("Unrecognized type "+i.type)}function e(s,i){for(var l=s.split(`
`),c=-1,u=-1,d=0,f=[];d!==l.length;++d){if(l[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var h=l[d].trim().split(","),A=h[0],m=h[1];++d;for(var p=l[d]||"";(p.match(/["]/g)||[]).length&1&&d<l.length-1;)p+=`
`+l[++d];switch(p=p.trim(),+A){case-1:if(p==="BOT"){f[++c]=[],u=0;continue}else if(p!=="EOD")throw new Error("Unrecognized DIF special command "+p);break;case 0:p==="TRUE"?f[c][u]=!0:p==="FALSE"?f[c][u]=!1:isNaN(Qd(m))?isNaN(Sv(m).getDate())?f[c][u]=m:f[c][u]=ss(m):f[c][u]=Qd(m),++u;break;case 1:p=p.slice(1,p.length-1),p=p.replace(/""/g,'"'),p&&p.match(/^=".*"$/)&&(p=p.slice(2,-1)),f[c][u++]=p!==""?p:null;break}if(p==="EOD")break}}return i&&i.sheetRows&&(f=f.slice(0,i.sheetRows)),f}function r(s,i){return l1(t(s,i),i)}function n(s,i){return vm(r(s,i),i)}var a=function(){var s=function(c,u,d,f,h){c.push(u),c.push(d+","+f),c.push('"'+h.replace(/"/g,'""')+'"')},i=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=Wn(c["!ref"]),f,h=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var A=d.s.r;A<=d.e.r;++A){i(u,-1,0,"BOT");for(var m=d.s.c;m<=d.e.c;++m){var p=tn({r:A,c:m});if(f=h?(c[A]||[])[m]:c[p],!f){i(u,1,0,"");continue}switch(f.t){case"n":var g=f.w;!g&&f.v!=null&&(g=f.v),g==null?f.f&&!f.F?i(u,1,0,"="+f.f):i(u,1,0,""):i(u,0,g,"V");break;case"b":i(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=ad(f.z||en[14],no(ss(f.v)))),i(u,0,f.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var x=`\r
`,y=u.join(x);return y}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),Sne=function(){function t(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var A=f.split(`
`),m=-1,p=-1,g=0,x=[];g!==A.length;++g){var y=A[g].trim().split(":");if(y[0]==="cell"){var b=ks(y[1]);if(x.length<=b.r)for(m=x.length;m<=b.r;++m)x[m]||(x[m]=[]);switch(m=b.r,p=b.c,y[2]){case"t":x[m][p]=t(y[3]);break;case"v":x[m][p]=+y[3];break;case"vtf":var w=y[y.length-1];case"vtc":switch(y[3]){case"nl":x[m][p]=!!+y[4];break;default:x[m][p]=+y[4];break}y[2]=="vtf"&&(x[m][p]=[x[m][p],w])}}}return h&&h.sheetRows&&(x=x.slice(0,h.sheetRows)),x}function n(f,h){return l1(r(f,h),h)}function a(f,h){return vm(n(f,h),h)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],A=[],m,p="",g=Ec(f["!ref"]),x=Array.isArray(f),y=g.s.r;y<=g.e.r;++y)for(var b=g.s.c;b<=g.e.c;++b)if(p=tn({r:y,c:b}),m=x?(f[y]||[])[b]:f[p],!(!m||m.v==null||m.t==="z")){switch(A=["cell",p,"t"],m.t){case"s":case"str":A.push(e(m.v));break;case"n":m.f?(A[2]="vtf",A[3]="n",A[4]=m.v,A[5]=e(m.f)):(A[2]="v",A[3]=m.v);break;case"b":A[2]="vt"+(m.f?"f":"c"),A[3]="nl",A[4]=m.v?"1":"0",A[5]=e(m.f||(m.v?"TRUE":"FALSE"));break;case"d":var w=no(ss(m.v));A[2]="vtc",A[3]="nd",A[4]=""+w,A[5]=m.w||ad(m.z||en[14],w);break;case"e":continue}h.push(A.join(":"))}return h.push("sheet:c:"+(g.e.c-g.s.c+1)+":r:"+(g.e.r-g.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[s,i,l,i,u(f),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),Iv=function(){function t(d,f,h,A,m){m.raw?f[h][A]=d:d===""||(d==="TRUE"?f[h][A]=!0:d==="FALSE"?f[h][A]=!1:isNaN(Qd(d))?isNaN(Sv(d).getDate())?f[h][A]=d:f[h][A]=ss(d):f[h][A]=Qd(d))}function e(d,f){var h=f||{},A=[];if(!d||d.length===0)return A;for(var m=d.split(/[\r\n]/),p=m.length-1;p>=0&&m[p].length===0;)--p;for(var g=10,x=0,y=0;y<=p;++y)x=m[y].indexOf(" "),x==-1?x=m[y].length:x++,g=Math.max(g,x);for(y=0;y<=p;++y){A[y]=[];var b=0;for(t(m[y].slice(0,g).trim(),A,y,b,h),b=1;b<=(m[y].length-g)/10+1;++b)t(m[y].slice(g+(b-1)*10,g+b*10).trim(),A,y,b,h)}return h.sheetRows&&(A=A.slice(0,h.sheetRows)),A}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},h=!1,A=0,m=0;A<d.length;++A)(m=d.charCodeAt(A))==34?h=!h:!h&&m in r&&(f[m]=(f[m]||0)+1);m=[];for(A in f)Object.prototype.hasOwnProperty.call(f,A)&&m.push([f[A],A]);if(!m.length){f=n;for(A in f)Object.prototype.hasOwnProperty.call(f,A)&&m.push([f[A],A])}return m.sort(function(p,g){return p[0]-g[0]||n[p[1]]-n[g[1]]}),r[m.pop()[1]]||44}function s(d,f){var h=f||{},A="",m=h.dense?[]:{},p={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(A=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(A=d.charAt(4),d=d.slice(6)):A=a(d.slice(0,1024)):h&&h.FS?A=h.FS:A=a(d.slice(0,1024));var g=0,x=0,y=0,b=0,w=0,j=A.charCodeAt(0),I=!1,_=0,S=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var E=h.dateNF!=null?OBe(h.dateNF):null;function k(){var P=d.slice(b,w),T={};if(P.charAt(0)=='"'&&P.charAt(P.length-1)=='"'&&(P=P.slice(1,-1).replace(/""/g,'"')),P.length===0)T.t="z";else if(h.raw)T.t="s",T.v=P;else if(P.trim().length===0)T.t="s",T.v=P;else if(P.charCodeAt(0)==61)P.charCodeAt(1)==34&&P.charCodeAt(P.length-1)==34?(T.t="s",T.v=P.slice(2,-1).replace(/""/g,'"')):uDe(P)?(T.t="n",T.f=P.slice(1)):(T.t="s",T.v=P);else if(P=="TRUE")T.t="b",T.v=!0;else if(P=="FALSE")T.t="b",T.v=!1;else if(!isNaN(y=Qd(P)))T.t="n",h.cellText!==!1&&(T.w=P),T.v=y;else if(!isNaN(Sv(P).getDate())||E&&P.match(E)){T.z=h.dateNF||en[14];var O=0;E&&P.match(E)&&(P=DBe(P,h.dateNF,P.match(E)||[]),O=1),h.cellDates?(T.t="d",T.v=ss(P,O)):(T.t="n",T.v=no(ss(P,O))),h.cellText!==!1&&(T.w=ad(T.z,T.v instanceof Date?no(T.v):T.v)),h.cellNF||delete T.z}else T.t="s",T.v=P;if(T.t=="z"||(h.dense?(m[g]||(m[g]=[]),m[g][x]=T):m[tn({c:x,r:g})]=T),b=w+1,S=d.charCodeAt(b),p.e.c<x&&(p.e.c=x),p.e.r<g&&(p.e.r=g),_==j)++x;else if(x=0,++g,h.sheetRows&&h.sheetRows<=g)return!0}e:for(;w<d.length;++w)switch(_=d.charCodeAt(w)){case 34:S===34&&(I=!I);break;case j:case 10:case 13:if(!I&&k())break e;break}return w-b>0&&k(),m["!ref"]=hn(p),m}function i(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,f):l1(e(d,f),f)}function l(d,f){var h="",A=f.type=="string"?[0,0,0,0]:eR(d,f);switch(f.type){case"base64":h=uu(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):f.codepage&&typeof x2<"u"||(h=En&&Buffer.isBuffer(d)?d.toString("binary"):xm(d));break;case"array":h=Wp(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return A[0]==239&&A[1]==187&&A[2]==191?h=Ba(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=Ba(h):f.type=="binary"&&typeof x2<"u",h.slice(0,19)=="socialcalc:version:"?Sne.to_sheet(f.type=="string"?h:Ba(h),f):i(h,f)}function c(d,f){return vm(l(d,f),f)}function u(d){for(var f=[],h=Wn(d["!ref"]),A,m=Array.isArray(d),p=h.s.r;p<=h.e.r;++p){for(var g=[],x=h.s.c;x<=h.e.c;++x){var y=tn({r:p,c:x});if(A=m?(d[p]||[])[x]:d[y],!A||A.v==null){g.push("          ");continue}for(var b=(A.w||(ZA(A),A.w)||"").slice(0,10);b.length<10;)b+=" ";g.push(b+(x===0?" ":""))}f.push(g.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}}();function XFe(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var a=_ne.to_workbook(t,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return Iv.to_workbook(t,e)}}var _p=function(){function t(F,Q,H){if(F){Yo(F,F.l||0);for(var R=H.Enum||Fe;F.l<F.length;){var z=F.read_shift(2),J=R[z]||R[65535],D=F.read_shift(2),U=F.l+D,ne=J.f&&J.f(F,D,H);if(F.l=U,Q(ne,J,z))return}}}function e(F,Q){switch(Q.type){case"base64":return r(Yc(uu(F)),Q);case"binary":return r(Yc(F),Q);case"buffer":case"array":return r(F,Q)}throw"Unsupported type "+Q.type}function r(F,Q){if(!F)return F;var H=Q||{},R=H.dense?[]:{},z="Sheet1",J="",D=0,U={},ne=[],ve=[],L={s:{r:0,c:0},e:{r:0,c:0}},Ye=H.sheetRows||0;if(F[2]==0&&(F[3]==8||F[3]==9)&&F.length>=16&&F[14]==5&&F[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(F[2]==2)H.Enum=Fe,t(F,function(le,se,Be){switch(Be){case 0:H.vers=le,le>=4096&&(H.qpro=!0);break;case 6:L=le;break;case 204:le&&(J=le);break;case 222:J=le;break;case 15:case 51:H.qpro||(le[1].v=le[1].v.slice(1));case 13:case 14:case 16:Be==14&&(le[2]&112)==112&&(le[2]&15)>1&&(le[2]&15)<15&&(le[1].z=H.dateNF||en[14],H.cellDates&&(le[1].t="d",le[1].v=$4(le[1].v))),H.qpro&&le[3]>D&&(R["!ref"]=hn(L),U[z]=R,ne.push(z),R=H.dense?[]:{},L={s:{r:0,c:0},e:{r:0,c:0}},D=le[3],z=J||"Sheet"+(D+1),J="");var je=H.dense?(R[le[0].r]||[])[le[0].c]:R[tn(le[0])];if(je){je.t=le[1].t,je.v=le[1].v,le[1].z!=null&&(je.z=le[1].z),le[1].f!=null&&(je.f=le[1].f);break}H.dense?(R[le[0].r]||(R[le[0].r]=[]),R[le[0].r][le[0].c]=le[1]):R[tn(le[0])]=le[1];break}},H);else if(F[2]==26||F[2]==14)H.Enum=Pe,F[2]==14&&(H.qpro=!0,F.l=0),t(F,function(le,se,Be){switch(Be){case 204:z=le;break;case 22:le[1].v=le[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(le[3]>D&&(R["!ref"]=hn(L),U[z]=R,ne.push(z),R=H.dense?[]:{},L={s:{r:0,c:0},e:{r:0,c:0}},D=le[3],z="Sheet"+(D+1)),Ye>0&&le[0].r>=Ye)break;H.dense?(R[le[0].r]||(R[le[0].r]=[]),R[le[0].r][le[0].c]=le[1]):R[tn(le[0])]=le[1],L.e.c<le[0].c&&(L.e.c=le[0].c),L.e.r<le[0].r&&(L.e.r=le[0].r);break;case 27:le[14e3]&&(ve[le[14e3][0]]=le[14e3][1]);break;case 1537:ve[le[0]]=le[1],le[0]==D&&(z=le[1]);break}},H);else throw new Error("Unrecognized LOTUS BOF "+F[2]);if(R["!ref"]=hn(L),U[J||z]=R,ne.push(J||z),!ve.length)return{SheetNames:ne,Sheets:U};for(var ie={},Z=[],Oe=0;Oe<ve.length;++Oe)U[ne[Oe]]?(Z.push(ve[Oe]||ne[Oe]),ie[ve[Oe]]=U[ve[Oe]]||U[ne[Oe]]):(Z.push(ve[Oe]),ie[ve[Oe]]={"!ref":"A1"});return{SheetNames:Z,Sheets:ie}}function n(F,Q){var H=Q||{};if(+H.codepage>=0&&Dd(+H.codepage),H.type=="string")throw new Error("Cannot write WK1 to JS string");var R=_c(),z=Wn(F["!ref"]),J=Array.isArray(F),D=[];vr(R,0,s(1030)),vr(R,6,c(z));for(var U=Math.min(z.e.r,8191),ne=z.s.r;ne<=U;++ne)for(var ve=vi(ne),L=z.s.c;L<=z.e.c;++L){ne===z.s.r&&(D[L]=Ts(L));var Ye=D[L]+ve,ie=J?(F[ne]||[])[L]:F[Ye];if(!(!ie||ie.t=="z"))if(ie.t=="n")(ie.v|0)==ie.v&&ie.v>=-32768&&ie.v<=32767?vr(R,13,A(ne,L,ie.v)):vr(R,14,p(ne,L,ie.v));else{var Z=ZA(ie);vr(R,15,f(ne,L,Z.slice(0,239)))}}return vr(R,1),R.end()}function a(F,Q){var H=Q||{};if(+H.codepage>=0&&Dd(+H.codepage),H.type=="string")throw new Error("Cannot write WK3 to JS string");var R=_c();vr(R,0,i(F));for(var z=0,J=0;z<F.SheetNames.length;++z)(F.Sheets[F.SheetNames[z]]||{})["!ref"]&&vr(R,27,ee(F.SheetNames[z],J++));var D=0;for(z=0;z<F.SheetNames.length;++z){var U=F.Sheets[F.SheetNames[z]];if(!(!U||!U["!ref"])){for(var ne=Wn(U["!ref"]),ve=Array.isArray(U),L=[],Ye=Math.min(ne.e.r,8191),ie=ne.s.r;ie<=Ye;++ie)for(var Z=vi(ie),Oe=ne.s.c;Oe<=ne.e.c;++Oe){ie===ne.s.r&&(L[Oe]=Ts(Oe));var le=L[Oe]+Z,se=ve?(U[ie]||[])[Oe]:U[le];if(!(!se||se.t=="z"))if(se.t=="n")vr(R,23,k(ie,Oe,D,se.v));else{var Be=ZA(se);vr(R,22,_(ie,Oe,D,Be.slice(0,239)))}}++D}}return vr(R,1),R.end()}function s(F){var Q=zt(2);return Q.write_shift(2,F),Q}function i(F){var Q=zt(26);Q.write_shift(2,4096),Q.write_shift(2,4),Q.write_shift(4,0);for(var H=0,R=0,z=0,J=0;J<F.SheetNames.length;++J){var D=F.SheetNames[J],U=F.Sheets[D];if(!(!U||!U["!ref"])){++z;var ne=Ec(U["!ref"]);H<ne.e.r&&(H=ne.e.r),R<ne.e.c&&(R=ne.e.c)}}return H>8191&&(H=8191),Q.write_shift(2,H),Q.write_shift(1,z),Q.write_shift(1,R),Q.write_shift(2,0),Q.write_shift(2,0),Q.write_shift(1,1),Q.write_shift(1,2),Q.write_shift(4,0),Q.write_shift(4,0),Q}function l(F,Q,H){var R={s:{c:0,r:0},e:{c:0,r:0}};return Q==8&&H.qpro?(R.s.c=F.read_shift(1),F.l++,R.s.r=F.read_shift(2),R.e.c=F.read_shift(1),F.l++,R.e.r=F.read_shift(2),R):(R.s.c=F.read_shift(2),R.s.r=F.read_shift(2),Q==12&&H.qpro&&(F.l+=2),R.e.c=F.read_shift(2),R.e.r=F.read_shift(2),Q==12&&H.qpro&&(F.l+=2),R.s.c==65535&&(R.s.c=R.e.c=R.s.r=R.e.r=0),R)}function c(F){var Q=zt(8);return Q.write_shift(2,F.s.c),Q.write_shift(2,F.s.r),Q.write_shift(2,F.e.c),Q.write_shift(2,F.e.r),Q}function u(F,Q,H){var R=[{c:0,r:0},{t:"n",v:0},0,0];return H.qpro&&H.vers!=20768?(R[0].c=F.read_shift(1),R[3]=F.read_shift(1),R[0].r=F.read_shift(2),F.l+=2):(R[2]=F.read_shift(1),R[0].c=F.read_shift(2),R[0].r=F.read_shift(2)),R}function d(F,Q,H){var R=F.l+Q,z=u(F,Q,H);if(z[1].t="s",H.vers==20768){F.l++;var J=F.read_shift(1);return z[1].v=F.read_shift(J,"utf8"),z}return H.qpro&&F.l++,z[1].v=F.read_shift(R-F.l,"cstr"),z}function f(F,Q,H){var R=zt(7+H.length);R.write_shift(1,255),R.write_shift(2,Q),R.write_shift(2,F),R.write_shift(1,39);for(var z=0;z<R.length;++z){var J=H.charCodeAt(z);R.write_shift(1,J>=128?95:J)}return R.write_shift(1,0),R}function h(F,Q,H){var R=u(F,Q,H);return R[1].v=F.read_shift(2,"i"),R}function A(F,Q,H){var R=zt(7);return R.write_shift(1,255),R.write_shift(2,Q),R.write_shift(2,F),R.write_shift(2,H,"i"),R}function m(F,Q,H){var R=u(F,Q,H);return R[1].v=F.read_shift(8,"f"),R}function p(F,Q,H){var R=zt(13);return R.write_shift(1,255),R.write_shift(2,Q),R.write_shift(2,F),R.write_shift(8,H,"f"),R}function g(F,Q,H){var R=F.l+Q,z=u(F,Q,H);if(z[1].v=F.read_shift(8,"f"),H.qpro)F.l=R;else{var J=F.read_shift(2);w(F.slice(F.l,F.l+J),z),F.l+=J}return z}function x(F,Q,H){var R=Q&32768;return Q&=-32769,Q=(R?F:0)+(Q>=8192?Q-16384:Q),(R?"":"$")+(H?Ts(Q):vi(Q))}var y={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},b=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function w(F,Q){Yo(F,0);for(var H=[],R=0,z="",J="",D="",U="";F.l<F.length;){var ne=F[F.l++];switch(ne){case 0:H.push(F.read_shift(8,"f"));break;case 1:J=x(Q[0].c,F.read_shift(2),!0),z=x(Q[0].r,F.read_shift(2),!1),H.push(J+z);break;case 2:{var ve=x(Q[0].c,F.read_shift(2),!0),L=x(Q[0].r,F.read_shift(2),!1);J=x(Q[0].c,F.read_shift(2),!0),z=x(Q[0].r,F.read_shift(2),!1),H.push(ve+L+":"+J+z)}break;case 3:if(F.l<F.length){console.error("WK1 premature formula end");return}break;case 4:H.push("("+H.pop()+")");break;case 5:H.push(F.read_shift(2));break;case 6:{for(var Ye="";ne=F[F.l++];)Ye+=String.fromCharCode(ne);H.push('"'+Ye.replace(/"/g,'""')+'"')}break;case 8:H.push("-"+H.pop());break;case 23:H.push("+"+H.pop());break;case 22:H.push("NOT("+H.pop()+")");break;case 20:case 21:U=H.pop(),D=H.pop(),H.push(["AND","OR"][ne-20]+"("+D+","+U+")");break;default:if(ne<32&&b[ne])U=H.pop(),D=H.pop(),H.push(D+b[ne]+U);else if(y[ne]){if(R=y[ne][1],R==69&&(R=F[F.l++]),R>H.length){console.error("WK1 bad formula parse 0x"+ne.toString(16)+":|"+H.join("|")+"|");return}var ie=H.slice(-R);H.length-=R,H.push(y[ne][0]+"("+ie.join(",")+")")}else return ne<=7?console.error("WK1 invalid opcode "+ne.toString(16)):ne<=24?console.error("WK1 unsupported op "+ne.toString(16)):ne<=30?console.error("WK1 invalid opcode "+ne.toString(16)):ne<=115?console.error("WK1 unsupported function opcode "+ne.toString(16)):console.error("WK1 unrecognized opcode "+ne.toString(16))}}H.length==1?Q[1].f=""+H[0]:console.error("WK1 bad formula parse |"+H.join("|")+"|")}function j(F){var Q=[{c:0,r:0},{t:"n",v:0},0];return Q[0].r=F.read_shift(2),Q[3]=F[F.l++],Q[0].c=F[F.l++],Q}function I(F,Q){var H=j(F);return H[1].t="s",H[1].v=F.read_shift(Q-4,"cstr"),H}function _(F,Q,H,R){var z=zt(6+R.length);z.write_shift(2,F),z.write_shift(1,H),z.write_shift(1,Q),z.write_shift(1,39);for(var J=0;J<R.length;++J){var D=R.charCodeAt(J);z.write_shift(1,D>=128?95:D)}return z.write_shift(1,0),z}function S(F,Q){var H=j(F);H[1].v=F.read_shift(2);var R=H[1].v>>1;if(H[1].v&1)switch(R&7){case 0:R=(R>>3)*5e3;break;case 1:R=(R>>3)*500;break;case 2:R=(R>>3)/20;break;case 3:R=(R>>3)/200;break;case 4:R=(R>>3)/2e3;break;case 5:R=(R>>3)/2e4;break;case 6:R=(R>>3)/16;break;case 7:R=(R>>3)/64;break}return H[1].v=R,H}function E(F,Q){var H=j(F),R=F.read_shift(4),z=F.read_shift(4),J=F.read_shift(2);if(J==65535)return R===0&&z===3221225472?(H[1].t="e",H[1].v=15):R===0&&z===3489660928?(H[1].t="e",H[1].v=42):H[1].v=0,H;var D=J&32768;return J=(J&32767)-16446,H[1].v=(1-D*2)*(z*Math.pow(2,J+32)+R*Math.pow(2,J)),H}function k(F,Q,H,R){var z=zt(14);if(z.write_shift(2,F),z.write_shift(1,H),z.write_shift(1,Q),R==0)return z.write_shift(4,0),z.write_shift(4,0),z.write_shift(2,65535),z;var J=0,D=0,U=0,ne=0;return R<0&&(J=1,R=-R),D=Math.log2(R)|0,R/=Math.pow(2,D-31),ne=R>>>0,ne&2147483648||(R/=2,++D,ne=R>>>0),R-=ne,ne|=2147483648,ne>>>=0,R*=Math.pow(2,32),U=R>>>0,z.write_shift(4,U),z.write_shift(4,ne),D+=16383+(J?32768:0),z.write_shift(2,D),z}function P(F,Q){var H=E(F);return F.l+=Q-14,H}function T(F,Q){var H=j(F),R=F.read_shift(4);return H[1].v=R>>6,H}function O(F,Q){var H=j(F),R=F.read_shift(8,"f");return H[1].v=R,H}function W(F,Q){var H=O(F);return F.l+=Q-10,H}function Ae(F,Q){return F[F.l+Q-1]==0?F.read_shift(Q,"cstr"):""}function de(F,Q){var H=F[F.l++];H>Q-1&&(H=Q-1);for(var R="";R.length<H;)R+=String.fromCharCode(F[F.l++]);return R}function fe(F,Q,H){if(!(!H.qpro||Q<21)){var R=F.read_shift(1);F.l+=17,F.l+=1,F.l+=2;var z=F.read_shift(Q-21,"cstr");return[R,z]}}function ge(F,Q){for(var H={},R=F.l+Q;F.l<R;){var z=F.read_shift(2);if(z==14e3){for(H[z]=[0,""],H[z][0]=F.read_shift(2);F[F.l];)H[z][1]+=String.fromCharCode(F[F.l]),F.l++;F.l++}}return H}function ee(F,Q){var H=zt(5+F.length);H.write_shift(2,14e3),H.write_shift(2,Q);for(var R=0;R<F.length;++R){var z=F.charCodeAt(R);H[H.l++]=z>127?95:z}return H[H.l++]=0,H}var Fe={0:{n:"BOF",f:Si},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:m},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:g},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Ae},222:{n:"SHEETNAMELP",f:de},65535:{n:""}},Pe={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:I},23:{n:"NUMBER17",f:E},24:{n:"NUMBER18",f:S},25:{n:"FORMULA19",f:P},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ge},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:T},38:{n:"??"},39:{n:"NUMBER27",f:O},40:{n:"FORMULA28",f:W},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Ae},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:fe},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:e}}();function YFe(t){var e={},r=t.match(Ol),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=nn(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;e.cp=gD[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=s.val;break;case"<sz":e.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":s.rgb&&(e.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return e}var JFe=function(){var t=b2("t"),e=b2("rPr");function r(s){var i=s.match(t);if(!i)return{t:"s",v:""};var l={t:"s",v:zn(i[1])},c=s.match(e);return c&&(l.s=YFe(c[1])),l}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(a).map(r).filter(function(l){return l.v})}}(),ZFe=function(){var e=/(\r\n|\n)/g;function r(a,s,i){var l=[];a.u&&l.push("text-decoration: underline;"),a.uval&&l.push("text-underline-style:"+a.uval+";"),a.sz&&l.push("font-size:"+a.sz+"pt;"),a.outline&&l.push("text-effect: outline;"),a.shadow&&l.push("text-shadow: auto;"),s.push('<span style="'+l.join("")+'">'),a.b&&(s.push("<b>"),i.push("</b>")),a.i&&(s.push("<i>"),i.push("</i>")),a.strike&&(s.push("<s>"),i.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),i.push("</"+c+">")),i.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(e,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),eOe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,tOe=/<(?:\w+:)?r>/,rOe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function QD(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=zn(Ba(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Ba(t),r&&(n.h=SD(n.t))):t.match(tOe)&&(n.r=Ba(t),n.t=zn(Ba((t.replace(rOe,"").match(eOe)||[]).join("").replace(Ol,""))),r&&(n.h=ZFe(JFe(n.r)))),n):{t:""}}var nOe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,aOe=/<(?:\w+:)?(?:si|sstItem)>/g,sOe=/<\/(?:\w+:)?(?:si|sstItem)>/;function iOe(t,e){var r=[],n="";if(!t)return r;var a=t.match(nOe);if(a){n=a[2].replace(aOe,"").split(sOe);for(var s=0;s!=n.length;++s){var i=QD(n[s].trim(),e);i!=null&&(r[r.length]=i)}a=nn(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var oOe=/^\s|\s$|[\t\n\r]/;function Ine(t,e){if(!e.bookSST)return"";var r=[bi];r[r.length]=xr("sst",null,{xmlns:yg[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var a=t[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(oOe)&&(s+=' xml:space="preserve"'),s+=">"+_a(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function lOe(t){return[t.read_shift(4),t.read_shift(4)]}function cOe(t,e){var r=[],n=!1;return mh(t,function(s,i,l){switch(l){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||e.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function uOe(t,e){return e||(e=zt(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var dOe=bTe;function fOe(t){var e=_c();ar(e,159,uOe(t));for(var r=0;r<t.length;++r)ar(e,19,dOe(t[r]));return ar(e,160),e.end()}function jne(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function VA(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function AOe(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=VA(t,4),e.U=VA(t,4),e.W=VA(t,4),e}function hOe(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},a=t.read_shift(4),s=[];a-- >0;)s.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=s,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function mOe(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(hOe(t));return e}function pOe(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function gOe(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=VA(t,4),e.U=VA(t,4),e.W=VA(t,4),e}function xOe(t){var e=gOe(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function Pne(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function Bne(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function vOe(t){var e=VA(t);switch(e.Minor){case 2:return[e.Minor,yOe(t)];case 3:return[e.Minor,bOe()];case 4:return[e.Minor,wOe(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function yOe(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=Pne(t,r),a=Bne(t,t.length-t.l);return{t:"Std",h:n,v:a}}function bOe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function wOe(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(Ol,function(s){var i=nn(s);switch(Wf(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(l){n[l]=i[l]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function NOe(t,e){var r={},n=r.EncryptionVersionInfo=VA(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var a=t.read_shift(4);return e-=4,r.EncryptionHeader=Pne(t,a),e-=a,r.EncryptionVerifier=Bne(t,e),r}function COe(t){var e={},r=e.EncryptionVersionInfo=VA(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function VD(t){var e=0,r,n=jne(t),a=n.length+1,s,i,l,c,u;for(r=sm(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)i=r[s],l=e&16384?1:0,c=e<<1&32767,u=l|c,e=u^i;return e^52811}var Tne=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},a=function(i,l){return n(i^l)},s=function(i){for(var l=e[i.length-1],c=104,u=i.length-1;u>=0;--u)for(var d=i[u],f=0;f!=7;++f)d&64&&(l^=r[c]),d*=2,--c;return l};return function(i){for(var l=jne(i),c=s(l),u=l.length,d=sm(16),f=0;f!=16;++f)d[f]=0;var h,A,m;for((u&1)===1&&(h=c>>8,d[u]=a(t[0],h),--u,h=c&255,A=l[l.length-1],d[u]=a(A,h));u>0;)--u,h=c>>8,d[u]=a(l[u],h),--u,h=c&255,d[u]=a(l[u],h);for(u=15,m=15-l.length;m>0;)h=c>>8,d[u]=a(t[m],h),--u,--m,h=c&255,d[u]=a(l[u],h),--u,--m;return d}}(),_Oe=function(t,e,r,n,a){a||(a=e),n||(n=Tne(t));var s,i;for(s=0;s!=e.length;++s)i=e[s],i^=n[r],i=(i>>5|i<<3)&255,a[s]=i,++r;return[a,r,n]},EOe=function(t){var e=0,r=Tne(t);return function(n){var a=_Oe("",n,e,r);return e=a[1],a[0]}};function SOe(t,e,r,n){var a={key:Si(t),verificationBytes:Si(t)};return r.password&&(a.verifier=VD(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=EOe(r.password)),a}function IOe(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=COe(t):n.Data=NOe(t,e),n}function jOe(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?IOe(t,e-2,n):SOe(t,r.biff>=8?e:e-2,r,n),n}var kne=function(){function t(a,s){switch(s.type){case"base64":return e(uu(a),s);case"binary":return e(a,s);case"buffer":return e(En&&Buffer.isBuffer(a)?a.toString("binary"):xm(a),s);case"array":return e(Wp(a),s)}throw new Error("Unrecognized type "+s.type)}function e(a,s){var i=s||{},l=i.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(l)&&(l[f]=[]);for(var h=/\\\w+\b/g,A=0,m,p=-1;m=h.exec(d);){switch(m[0]){case"\\cell":var g=d.slice(A,h.lastIndex-m[0].length);if(g[0]==" "&&(g=g.slice(1)),++p,g.length){var x={v:g,t:"s"};Array.isArray(l)?l[f][p]=x:l[tn({r:f,c:p})]=x}break}A=h.lastIndex}p>u.e.c&&(u.e.c=p)}),l["!ref"]=hn(u),l}function r(a,s){return vm(t(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],i=Wn(a["!ref"]),l,c=Array.isArray(a),u=i.s.r;u<=i.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var f=tn({r:u,c:d});l=c?(a[u]||[])[d]:a[f],!(!l||l.v==null&&(!l.f||l.F))&&(s.push(" "+(l.w||(ZA(l),l.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function POe(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function _2(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function BOe(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,a=Math.max(e,r,n),s=Math.min(e,r,n),i=a-s;if(i===0)return[0,0,e];var l=0,c=0,u=a+s;switch(c=i/(u>1?2-u:u),a){case e:l=((r-n)/i+6)%6;break;case r:l=(n-e)/i+2;break;case n:l=(e-r)/i+4;break}return[l/6,c,u/2]}function TOe(t){var e=t[0],r=t[1],n=t[2],a=r*2*(n<.5?n:1-n),s=n-a/2,i=[s,s,s],l=6*e,c;if(r!==0)switch(l|0){case 0:case 6:c=a*l,i[0]+=a,i[1]+=c;break;case 1:c=a*(2-l),i[0]+=c,i[1]+=a;break;case 2:c=a*(l-2),i[1]+=a,i[2]+=c;break;case 3:c=a*(4-l),i[1]+=c,i[2]+=a;break;case 4:c=a*(l-4),i[2]+=a,i[0]+=c;break;case 5:c=a*(6-l),i[2]+=c,i[0]+=a;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function OS(t,e){if(e===0)return t;var r=BOe(POe(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),_2(TOe(r))}var Fne=6,kOe=15,FOe=1,Sl=Fne;function E2(t){return Math.floor((t+Math.round(128/Sl)/256)*Sl)}function S2(t){return Math.floor((t-5)/Sl*100+.5)/100}function DS(t){return Math.round((t*Sl+5)/Sl*256)/256}function AP(t){return DS(S2(E2(t)))}function HD(t){var e=Math.abs(t-AP(t)),r=Sl;if(e>.005)for(Sl=FOe;Sl<kOe;++Sl)Math.abs(t-AP(t))<=e&&(e=Math.abs(t-AP(t)),r=Sl);Sl=r}function im(t){t.width?(t.wpx=E2(t.width),t.wch=S2(t.wpx),t.MDW=Sl):t.wpx?(t.wch=S2(t.wpx),t.width=DS(t.wch),t.MDW=Sl):typeof t.wch=="number"&&(t.width=DS(t.wch),t.wpx=E2(t.width),t.MDW=Sl),t.customWidth&&delete t.customWidth}var OOe=96,One=OOe;function I2(t){return t*96/One}function jv(t){return t*One/96}var DOe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function ROe(t,e,r,n){e.Borders=[];var a={},s=!1;(t[0].match(Ol)||[]).forEach(function(i){var l=nn(i);switch(Wf(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},l.diagonalUp&&(a.diagonalUp=ts(l.diagonalUp)),l.diagonalDown&&(a.diagonalDown=ts(l.diagonalDown)),e.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in borders")}})}function MOe(t,e,r,n){e.Fills=[];var a={},s=!1;(t[0].match(Ol)||[]).forEach(function(i){var l=nn(i);switch(Wf(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},e.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":l.patternType&&(a.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),l.indexed&&(a.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(a.bgColor.theme=parseInt(l.theme,10)),l.tint&&(a.bgColor.tint=parseFloat(l.tint)),l.rgb&&(a.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),l.theme&&(a.fgColor.theme=parseInt(l.theme,10)),l.tint&&(a.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(a.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fills")}})}function LOe(t,e,r,n){e.Fonts=[];var a={},s=!1;(t[0].match(Ol)||[]).forEach(function(i){var l=nn(i);switch(Wf(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(a),a={};break;case"<name":l.val&&(a.name=Ba(l.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=l.val?ts(l.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=l.val?ts(l.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(l.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=l.val?ts(l.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=l.val?ts(l.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=l.val?ts(l.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=l.val?ts(l.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=l.val?ts(l.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":l.val&&(a.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(a.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(a.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(a.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=gD[parseInt(l.val,10)];break;case"<color":if(a.color||(a.color={}),l.auto&&(a.color.auto=ts(l.auto)),l.rgb)a.color.rgb=l.rgb.slice(-6);else if(l.indexed){a.color.index=parseInt(l.indexed,10);var c=Np[a.color.index];a.color.index==81&&(c=Np[1]),c||(c=Np[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(a.color.theme=parseInt(l.theme,10),l.tint&&(a.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=OS(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fonts")}})}function UOe(t,e,r){e.NumberFmt=[];for(var n=ei(en),a=0;a<n.length;++a)e.NumberFmt[n[a]]=en[n[a]];var s=t[0].match(Ol);if(s)for(a=0;a<s.length;++a){var i=nn(s[a]);switch(Wf(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=zn(Ba(i.formatCode)),c=parseInt(i.numFmtId,10);if(e.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&e.NumberFmt[c]!=null;--c);e.NumberFmt[c]=l}QA(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function QOe(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=xr("numFmt",null,{numFmtId:n,formatCode:_a(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=xr("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var GC=["numFmtId","fillId","fontId","borderId","xfId"],KC=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function VOe(t,e,r){e.CellXf=[];var n,a=!1;(t[0].match(Ol)||[]).forEach(function(s){var i=nn(s),l=0;switch(Wf(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],l=0;l<GC.length;++l)n[GC[l]]&&(n[GC[l]]=parseInt(n[GC[l]],10));for(l=0;l<KC.length;++l)n[KC[l]]&&(n[KC[l]]=ts(n[KC[l]]));if(e.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[l]){n.numFmtId=l;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};i.vertical&&(c.vertical=i.vertical),i.horizontal&&(c.horizontal=i.horizontal),i.textRotation!=null&&(c.textRotation=i.textRotation),i.indent&&(c.indent=i.indent),i.wrapText&&(c.wrapText=ts(i.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function HOe(t){var e=[];return e[e.length]=xr("cellXfs",null),t.forEach(function(r){e[e.length]=xr("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=xr("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var $Oe=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,u){var d={};if(!l)return d;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=l.match(e))&&UOe(f,d,u),(f=l.match(a))&&LOe(f,d,c,u),(f=l.match(n))&&MOe(f,d,c,u),(f=l.match(s))&&ROe(f,d,c,u),(f=l.match(r))&&VOe(f,d,u),d}}();function Dne(t,e){var r=[bi,xr("styleSheet",null,{xmlns:yg[0],"xmlns:vt":Zi.vt})],n;return t.SSF&&(n=QOe(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=HOe(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function GOe(t,e){var r=t.read_shift(2),n=Pl(t);return[r,n]}function KOe(t,e,r){r||(r=zt(6+4*e.length)),r.write_shift(2,t),Eo(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function qOe(t,e,r){var n={};n.sz=t.read_shift(2)/20;var a=ITe(t);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=t.read_shift(2);switch(s===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=t.read_shift(1);i!=0&&(n.underline=i);var l=t.read_shift(1);l>0&&(n.family=l);var c=t.read_shift(1);switch(c>0&&(n.charset=c),t.l++,n.color=STe(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Pl(t),n}function zOe(t,e){e||(e=zt(25+4*32)),e.write_shift(2,t.sz*20),jTe(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),TS(t.color,e);var n=0;return n=2,e.write_shift(1,n),Eo(t.name,e),e.length>e.l?e.slice(0,e.l):e}var WOe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],hP,XOe=kl;function WH(t,e){e||(e=zt(4*3+8*7+16*1)),hP||(hP=V4(WOe));var r=hP[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(TS({auto:1},e),TS({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function YOe(t,e){var r=t.l+e,n=t.read_shift(2),a=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:a}}function Rne(t,e,r){r||(r=zt(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function uy(t,e){return e||(e=zt(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var JOe=kl;function ZOe(t,e){return e||(e=zt(51)),e.write_shift(1,0),uy(null,e),uy(null,e),uy(null,e),uy(null,e),uy(null,e),e.length>e.l?e.slice(0,e.l):e}function e6e(t,e){return e||(e=zt(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),BS(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function t6e(t,e,r){var n=zt(2052);return n.write_shift(4,t),BS(e,n),BS(r,n),n.length>n.l?n.slice(0,n.l):n}function r6e(t,e,r){var n={};n.NumberFmt=[];for(var a in en)n.NumberFmt[a]=en[a];n.CellXf=[],n.Fonts=[];var s=[],i=!1;return mh(t,function(c,u,d){switch(d){case 44:n.NumberFmt[c[0]]=c[1],QA(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(c.color.rgb=OS(e.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:s.push(d),i=!0;break;case 38:s.pop(),i=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!i||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function n6e(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&++r}),r!=0&&(ar(t,615,Vd(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&ar(t,44,KOe(a,e[a]))}),ar(t,616))}}function a6e(t){var e=1;ar(t,611,Vd(e)),ar(t,43,zOe({sz:12,color:{theme:1},name:"Calibri",family:2})),ar(t,612)}function s6e(t){var e=2;ar(t,603,Vd(e)),ar(t,45,WH({patternType:"none"})),ar(t,45,WH({patternType:"gray125"})),ar(t,604)}function i6e(t){var e=1;ar(t,613,Vd(e)),ar(t,46,ZOe()),ar(t,614)}function o6e(t){var e=1;ar(t,626,Vd(e)),ar(t,47,Rne({numFmtId:0},65535)),ar(t,627)}function l6e(t,e){ar(t,617,Vd(e.length)),e.forEach(function(r){ar(t,47,Rne(r,0))}),ar(t,618)}function c6e(t){var e=1;ar(t,619,Vd(e)),ar(t,48,e6e({xfId:0,name:"Normal"})),ar(t,620)}function u6e(t){var e=0;ar(t,505,Vd(e)),ar(t,506)}function d6e(t){var e=0;ar(t,508,t6e(e,"TableStyleMedium9","PivotStyleMedium4")),ar(t,509)}function f6e(t,e){var r=_c();return ar(r,278),n6e(r,t.SSF),a6e(r),s6e(r),i6e(r),o6e(r),l6e(r,e.cellXfs),c6e(r),u6e(r),d6e(r),ar(r,279),r.end()}var A6e=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function h6e(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(Ol)||[]).forEach(function(a){var s=nn(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(e.themeElements.clrScheme[A6e.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function m6e(){}function p6e(){}var g6e=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,x6e=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,v6e=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function y6e(t,e,r){e.themeElements={};var n;[["clrScheme",g6e,h6e],["fontScheme",x6e,m6e],["fmtScheme",v6e,p6e]].forEach(function(a){if(!(n=t.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,e,r)})}var b6e=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function Mne(t,e){(!t||t.length===0)&&(t=$D());var r,n={};if(!(r=t.match(b6e)))throw new Error("themeElements not found in theme");return y6e(r[0],n,e),n.raw=t,n}function $D(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[bi];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function w6e(t,e,r){var n=t.l+e,a=t.read_shift(4);if(a!==124226){if(!r.cellStyles){t.l=n;return}var s=t.slice(t.l);t.l=n;var i;try{i=Pre(s,{type:"array"})}catch{return}var l=Jc(i,"theme/theme/theme1.xml",!0);if(l)return Mne(l,r)}}function N6e(t){return t.read_shift(4)}function C6e(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=_6e(t,4);break;case 2:e.xclrValue=gne(t);break;case 3:e.xclrValue=N6e(t);break;case 4:t.l+=4;break}return t.l+=8,e}function _6e(t,e){return kl(t,e)}function E6e(t,e){return kl(t,e)}function S6e(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=C6e(t);break;case 6:n[1]=E6e(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function I6e(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var a=t.read_shift(2),s=[];a-- >0;)s.push(S6e(t,r-t.l));return{ixfe:n,ext:s}}function j6e(t,e){e.forEach(function(r){switch(r[0]){}})}function P6e(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Pl(t)}}function B6e(t){var e=zt(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),Eo(t.name,e),e.slice(0,e.l)}function T6e(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function k6e(t){var e=zt(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function F6e(t,e){var r=zt(8+2*e.length);return r.write_shift(4,t),Eo(e,r),r.slice(0,r.l)}function O6e(t){return t.l+=4,t.read_shift(4)!=0}function D6e(t,e){var r=zt(8);return r.write_shift(4,t),r.write_shift(4,1),r}function R6e(t,e,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],i=!1,l=2;return mh(t,function(c,u,d){switch(d){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(f){l==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):l==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:s.push(d),i=!0;break;case 36:s.pop(),i=!1;break;default:if(!u.T){if(!i||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function M6e(){var t=_c();return ar(t,332),ar(t,334,Vd(1)),ar(t,335,B6e({name:"XLDAPR",version:12e4,flags:3496657072})),ar(t,336),ar(t,339,F6e(1,"XLDAPR")),ar(t,52),ar(t,35,Vd(514)),ar(t,4096,Vd(0)),ar(t,4097,Qu(1)),ar(t,36),ar(t,53),ar(t,340),ar(t,337,D6e(1)),ar(t,51,k6e([[1,0]])),ar(t,338),ar(t,333),t.end()}function L6e(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var a=!1,s=2,i;return t.replace(Ol,function(l){var c=nn(l);switch(Wf(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(i=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):s==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),n}function Lne(){var t=[bi];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function U6e(t){var e=[];if(!t)return e;var r=1;return(t.match(Ol)||[]).forEach(function(n){var a=nn(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,e.push(a);break}}),e}function Q6e(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=tn(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function V6e(t,e,r){var n=[];return mh(t,function(s,i,l){switch(l){case 63:n.push(s);break;default:if(!i.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function H6e(t,e,r,n){if(!t)return t;var a=n||{},s=!1;mh(t,function(l,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function $6e(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}var Vx=1024;function Une(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[xr("xml",null,{"xmlns:v":Wc.v,"xmlns:o":Wc.o,"xmlns:x":Wc.x,"xmlns:mv":Wc.mv}).replace(/\/>/,">"),xr("o:shapelayout",xr("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),xr("v:shapetype",[xr("v:stroke",null,{joinstyle:"miter"}),xr("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Vx<t*1e3;)Vx+=1e3;return e.forEach(function(s){var i=ks(s[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?xr("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=xr("v:fill",c,l),d={on:"t",obscured:"t"};++Vx,a=a.concat(["<v:shape"+w2({id:"_x0000_s"+Vx,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,xr("v:shadow",null,d),xr("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Zo("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),Zo("x:AutoFill","False"),Zo("x:Row",String(i.r)),Zo("x:Column",String(i.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function XH(t,e,r,n){var a=Array.isArray(t),s;e.forEach(function(i){var l=ks(i.ref);if(a?(t[l.r]||(t[l.r]=[]),s=t[l.r][l.c]):s=t[i.ref],!s){s={t:"z"},a?t[l.r][l.c]=s:t[i.ref]=s;var c=Wn(t["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var u=hn(c);u!==t["!ref"]&&(t["!ref"]=u)}s.c||(s.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var f=s.c.length-1;f>=0;--f){if(!r&&s.c[f].T)return;r&&!s.c[f].T&&s.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}s.c.push(d)})}function G6e(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var l=i.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var s=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var l=i.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=nn(l[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=ks(c.ref);if(!(e.sheetRows&&e.sheetRows<=d.r)){var f=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!f&&!!f[1]&&QD(f[1])||{r:"",t:"",h:""};u.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),u.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(u.h=h.h),n.push(u)}}}}),n}function Qne(t){var e=[bi,xr("comments",null,{xmlns:yg[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(a){var s=_a(a.a);r.indexOf(s)==-1&&(r.push(s),e.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),e.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(_a(c.a))),s.push(c.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)e.push(Zo("t",_a(s[0]||"")));else{for(var i=`Comment:
    `+s[0]+`
`,l=1;l<s.length;++l)i+=`Reply:
    `+s[l]+`
`;e.push(Zo("t",_a(i)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function K6e(t,e){var r=[],n=!1,a={},s=0;return t.replace(Ol,function(l,c){var u=nn(l);switch(Wf(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=c+l.length;break;case"</text>":a.t=t.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return l}),r}function q6e(t,e,r){var n=[bi,xr("ThreadedComments",null,{xmlns:Zi.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(a){var s="";(a[1]||[]).forEach(function(i,l){if(!i.T){delete i.ID;return}i.a&&e.indexOf(i.a)==-1&&e.push(i.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?s=c.id:c.parentId=s,i.ID=c.id,i.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(i.a)).slice(-12)+"}"),n.push(xr("threadedComment",Zo("text",i.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function z6e(t,e){var r=[],n=!1;return t.replace(Ol,function(s){var i=nn(s);switch(Wf(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return s}),r}function W6e(t){var e=[bi,xr("personList",null,{xmlns:Zi.TCMNT,"xmlns:x":yg[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(xr("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function X6e(t){var e={};e.iauthor=t.read_shift(4);var r=Cg(t);return e.rfx=r.s,e.ref=tn(r.s),t.l+=16,e}function Y6e(t,e){return e==null&&(e=zt(36)),e.write_shift(4,t[1].iauthor),c1(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var J6e=Pl;function Z6e(t){return Eo(t.slice(0,54))}function eDe(t,e){var r=[],n=[],a={},s=!1;return mh(t,function(l,c,u){switch(u){case 632:n.push(l);break;case 635:a=l;break;case 637:a.t=l.t,a.h=l.h,a.r=l.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,e.sheetRows&&a.rfx&&e.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function tDe(t){var e=_c(),r=[];return ar(e,628),ar(e,630),t.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),ar(e,632,Z6e(a.a)))})}),ar(e,631),ar(e,633),t.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:ks(n[0]),e:ks(n[0])};ar(e,635,Y6e([s,a])),a.t&&a.t.length>0&&ar(e,637,NTe(a)),ar(e,636),delete a.iauthor})}),ar(e,634),ar(e,629),e.end()}var rDe="application/vnd.ms-office.vbaProject";function nDe(t){var e=qr.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");qr.utils.cfb_add(e,a,t.FileIndex[n].content)}}),qr.write(e)}function aDe(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&qr.utils.cfb_add(t,a,e.FileIndex[n].content)}})}var Vne=["xlsb","xlsm","xlam","biff8","xla"];function sDe(){return{"!type":"dialog"}}function iDe(){return{"!type":"dialog"}}function oDe(){return{"!type":"macro"}}function lDe(){return{"!type":"macro"}}var av=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,a,s,i){var l=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),i.length==0?l=!0:i.charAt(0)=="["&&(l=!0,i=i.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return l?d+=e.c:--d,c?u+=e.r:--u,a+(l?"":"$")+Ts(d)+(c?"":"$")+vi(u)}return function(a,s){return e=s,a.replace(t,r)}}(),GD=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,KD=function(){return function(e,r){return e.replace(GD,function(n,a,s,i,l,c){var u=TD(i)-(s?0:r.c),d=BD(c)-(l?0:r.r),f=d==0?"":l?d+1:"["+d+"]",h=u==0?"":s?u+1:"["+u+"]";return a+"R"+f+"C"+h})}}();function Hne(t,e){return t.replace(GD,function(r,n,a,s,i,l){return n+(a=="$"?a+s:Ts(TD(s)+e.c))+(i=="$"?i+l:vi(BD(l)+e.r))})}function cDe(t,e,r){var n=Ec(e),a=n.s,s=ks(r),i={r:s.r-a.r,c:s.c-a.c};return Hne(t,i)}function uDe(t){return t.length!=1}function YH(t){return t.replace(/_xlfn\./g,"")}function Ci(t){t.l+=1}function om(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function $ne(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return Gne(t);r.biff==12&&(n=4)}var a=t.read_shift(n),s=t.read_shift(n),i=om(t),l=om(t);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:l[0],cRel:l[1],rRel:l[2]}}}function Gne(t){var e=om(t),r=om(t),n=t.read_shift(1),a=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function dDe(t,e,r){if(r.biff<8)return Gne(t);var n=t.read_shift(r.biff==12?4:2),a=t.read_shift(r.biff==12?4:2),s=om(t),i=om(t);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:i[0],cRel:i[1],rRel:i[2]}}}function Kne(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return fDe(t);var n=t.read_shift(r&&r.biff==12?4:2),a=om(t);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function fDe(t){var e=om(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function ADe(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function hDe(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return mDe(t);var a=t.read_shift(n>=12?4:2),s=t.read_shift(2),i=(s&16384)>>14,l=(s&32768)>>15;if(s&=16383,l==1)for(;a>524287;)a-=1048576;if(i==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:i,rRel:l}}function mDe(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,a=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),a==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:a,rRel:n}}function pDe(t,e,r){var n=(t[t.l++]&96)>>5,a=$ne(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function gDe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var i=$ne(t,s,r);return[n,a,i]}function xDe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function vDe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[n,a]}function yDe(t,e,r){var n=(t[t.l++]&96)>>5,a=dDe(t,e-1,r);return[n,a]}function bDe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function JH(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function wDe(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(t.read_shift(r&&r.biff==2?1:2));return a}function NDe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function CDe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function _De(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function EDe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function qne(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function SDe(t){return t.read_shift(2),qne(t)}function IDe(t){return t.read_shift(2),qne(t)}function jDe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=Kne(t,0,r);return[n,a]}function PDe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=hDe(t,0,r);return[n,a]}function BDe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var s=Kne(t,0,r);return[n,a,s]}function TDe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(r&&r.biff<=3?1:2);return[ORe[a],Xne[a],n]}function kDe(t,e,r){var n=t[t.l++],a=t.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:FDe(t);return[a,(s[0]===0?Xne:FRe)[s[1]]]}function FDe(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function ODe(t,e,r){t.l+=r&&r.biff==2?3:4}function DDe(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function RDe(t){return t.l++,ph[t.read_shift(1)]}function MDe(t){return t.l++,t.read_shift(2)}function LDe(t){return t.l++,t.read_shift(1)!==0}function UDe(t){return t.l++,Il(t)}function QDe(t,e,r){return t.l++,Iw(t,e-1,r)}function VDe(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=li(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=ph[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=Il(t);break;case 2:r[1]=_g(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function HDe(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?Cg:G4)(t));return a}function $De(t,e,r){var n=0,a=0;r.biff==12?(n=t.read_shift(4),a=t.read_shift(4)):(a=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,i=[];s!=n&&(i[s]=[]);++s)for(var l=0;l!=a;++l)i[s][l]=VDe(t,r.biff);return i}function GDe(t,e,r){var n=t.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=t.read_shift(a);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,s]}function KDe(t,e,r){if(r.biff==5)return qDe(t);var n=t.read_shift(1)>>>5&3,a=t.read_shift(2),s=t.read_shift(4);return[n,a,s]}function qDe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function zDe(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function WDe(t,e,r){var n=t.read_shift(1)>>>5&3,a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function XDe(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function YDe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[n,a]}var JDe=kl,ZDe=kl,eRe=kl;function Pw(t,e,r){return t.l+=2,[ADe(t)]}function qD(t){return t.l+=6,[]}var tRe=Pw,rRe=qD,nRe=qD,aRe=Pw;function zne(t){return t.l+=2,[Si(t),t.read_shift(2)&1]}var sRe=Pw,iRe=zne,oRe=qD,lRe=Pw,cRe=Pw,uRe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function dRe(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a=t.read_shift(2),s=t.read_shift(2),i=uRe[r>>2&31];return{ixti:e,coltype:r&3,rt:i,idx:n,c:a,C:s}}function fRe(t){return t.l+=2,[t.read_shift(4)]}function ARe(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function hRe(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function mRe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function pRe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function gRe(t){return t.l+=4,[0,0]}var ZH={1:{n:"PtgExp",f:DDe},2:{n:"PtgTbl",f:eRe},3:{n:"PtgAdd",f:Ci},4:{n:"PtgSub",f:Ci},5:{n:"PtgMul",f:Ci},6:{n:"PtgDiv",f:Ci},7:{n:"PtgPower",f:Ci},8:{n:"PtgConcat",f:Ci},9:{n:"PtgLt",f:Ci},10:{n:"PtgLe",f:Ci},11:{n:"PtgEq",f:Ci},12:{n:"PtgGe",f:Ci},13:{n:"PtgGt",f:Ci},14:{n:"PtgNe",f:Ci},15:{n:"PtgIsect",f:Ci},16:{n:"PtgUnion",f:Ci},17:{n:"PtgRange",f:Ci},18:{n:"PtgUplus",f:Ci},19:{n:"PtgUminus",f:Ci},20:{n:"PtgPercent",f:Ci},21:{n:"PtgParen",f:Ci},22:{n:"PtgMissArg",f:Ci},23:{n:"PtgStr",f:QDe},26:{n:"PtgSheet",f:ARe},27:{n:"PtgEndSheet",f:hRe},28:{n:"PtgErr",f:RDe},29:{n:"PtgBool",f:LDe},30:{n:"PtgInt",f:MDe},31:{n:"PtgNum",f:UDe},32:{n:"PtgArray",f:bDe},33:{n:"PtgFunc",f:TDe},34:{n:"PtgFuncVar",f:kDe},35:{n:"PtgName",f:GDe},36:{n:"PtgRef",f:jDe},37:{n:"PtgArea",f:pDe},38:{n:"PtgMemArea",f:zDe},39:{n:"PtgMemErr",f:JDe},40:{n:"PtgMemNoMem",f:ZDe},41:{n:"PtgMemFunc",f:WDe},42:{n:"PtgRefErr",f:XDe},43:{n:"PtgAreaErr",f:xDe},44:{n:"PtgRefN",f:PDe},45:{n:"PtgAreaN",f:yDe},46:{n:"PtgMemAreaN",f:mRe},47:{n:"PtgMemNoMemN",f:pRe},57:{n:"PtgNameX",f:KDe},58:{n:"PtgRef3d",f:BDe},59:{n:"PtgArea3d",f:gDe},60:{n:"PtgRefErr3d",f:YDe},61:{n:"PtgAreaErr3d",f:vDe},255:{}},xRe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},vRe={1:{n:"PtgElfLel",f:zne},2:{n:"PtgElfRw",f:lRe},3:{n:"PtgElfCol",f:tRe},6:{n:"PtgElfRwV",f:cRe},7:{n:"PtgElfColV",f:aRe},10:{n:"PtgElfRadical",f:sRe},11:{n:"PtgElfRadicalS",f:oRe},13:{n:"PtgElfColS",f:rRe},15:{n:"PtgElfColSV",f:nRe},16:{n:"PtgElfRadicalLel",f:iRe},25:{n:"PtgList",f:dRe},29:{n:"PtgSxName",f:fRe},255:{}},yRe={0:{n:"PtgAttrNoop",f:gRe},1:{n:"PtgAttrSemi",f:EDe},2:{n:"PtgAttrIf",f:CDe},4:{n:"PtgAttrChoose",f:wDe},8:{n:"PtgAttrGoto",f:NDe},16:{n:"PtgAttrSum",f:ODe},32:{n:"PtgAttrBaxcel",f:JH},33:{n:"PtgAttrBaxcel",f:JH},64:{n:"PtgAttrSpace",f:SDe},65:{n:"PtgAttrSpaceSemi",f:IDe},128:{n:"PtgAttrIfError",f:_De},255:{}};function Bw(t,e,r,n){if(n.biff<8)return kl(t,e);for(var a=t.l+e,s=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=$De(t,0,n),s.push(r[i][1]);break;case"PtgMemArea":r[i][2]=HDe(t,r[i][1],n),s.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=t.read_shift(4),s.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return e=a-t.l,e!==0&&s.push(kl(t,e)),s}function Tw(t,e,r){for(var n=t.l+e,a,s,i=[];n!=t.l;)e=n-t.l,s=t[t.l],a=ZH[s]||ZH[xRe[s]],(s===24||s===25)&&(a=(s===24?vRe:yRe)[t[t.l+1]]),!a||!a.f?kl(t,e):i.push([a.n,a.f(t,e,r)]);return i}function bRe(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],a=[],s=0;s<n.length;++s){var i=n[s];if(i)switch(i[0]){case 2:a.push('"'+i[1].replace(/"/g,'""')+'"');break;default:a.push(i[1])}else a.push("")}e.push(a.join(","))}return e.join(";")}var wRe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function NRe(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function Wne(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(t[n[0]][0]){case 357:return a=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[n[0]][0][3]?(a=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function e$(t,e,r){var n=Wne(t,e,r);return n=="#REF"?n:NRe(n,r)}function _l(t,e,r,n,a){var s=a&&a.biff||8,i={s:{c:0,r:0}},l=[],c,u,d,f=0,h=0,A,m="";if(!t[0]||!t[0][0])return"";for(var p=-1,g="",x=0,y=t[0].length;x<y;++x){var b=t[0][x];switch(b[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),p>=0){switch(t[0][p][1][0]){case 0:g=Xs(" ",t[0][p][1][1]);break;case 1:g=Xs("\r",t[0][p][1][1]);break;default:if(g="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}u=u+g,p=-1}l.push(u+wRe[b[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=yb(b[1][1],i,a),l.push(bb(d,s));break;case"PtgRefN":d=r?yb(b[1][1],r,a):b[1][1],l.push(bb(d,s));break;case"PtgRef3d":f=b[1][1],d=yb(b[1][2],i,a),m=e$(n,f,a),l.push(m+"!"+bb(d,s));break;case"PtgFunc":case"PtgFuncVar":var w=b[1][0],j=b[1][1];w||(w=0),w&=127;var I=w==0?[]:l.slice(-w);l.length-=w,j==="User"&&(j=I.shift()),l.push(j+"("+I.join(",")+")");break;case"PtgBool":l.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(b[1]);break;case"PtgNum":l.push(String(b[1]));break;case"PtgStr":l.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(b[1]);break;case"PtgAreaN":A=jH(b[1][1],r?{s:r}:i,a),l.push(uP(A,a));break;case"PtgArea":A=jH(b[1][1],i,a),l.push(uP(A,a));break;case"PtgArea3d":f=b[1][1],A=b[1][2],m=e$(n,f,a),l.push(m+"!"+uP(A,a));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=b[1][2];var _=(n.names||[])[h-1]||(n[0]||[])[h],S=_?_.Name:"SH33TJSNAME"+String(h);S&&S.slice(0,6)=="_xlfn."&&!a.xlfn&&(S=S.slice(6)),l.push(S);break;case"PtgNameX":var E=b[1][1];h=b[1][2];var k;if(a.biff<=5)E<0&&(E=-E),n[E]&&(k=n[E][h]);else{var P="";if(((n[E]||[])[0]||[])[0]==14849||(((n[E]||[])[0]||[])[0]==1025?n[E][h]&&n[E][h].itab>0&&(P=n.SheetNames[n[E][h].itab-1]+"!"):P=n.SheetNames[h-1]+"!"),n[E]&&n[E][h])P+=n[E][h].Name;else if(n[0]&&n[0][h])P+=n[0][h].Name;else{var T=(Wne(n,E,a)||"").split(";;");T[h-1]?P=T[h-1]:P+="SH33TJSERRX"}l.push(P);break}k||(k={Name:"SH33TJSERRY"}),l.push(k.Name);break;case"PtgParen":var O="(",W=")";if(p>=0){switch(g="",t[0][p][1][0]){case 2:O=Xs(" ",t[0][p][1][1])+O;break;case 3:O=Xs("\r",t[0][p][1][1])+O;break;case 4:W=Xs(" ",t[0][p][1][1])+W;break;case 5:W=Xs("\r",t[0][p][1][1])+W;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}p=-1}l.push(O+l.pop()+W);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:b[1][1],r:b[1][0]};var Ae={c:r.c,r:r.r};if(n.sharedf[tn(d)]){var de=n.sharedf[tn(d)];l.push(_l(de,i,Ae,n,a))}else{var fe=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){l.push(_l(u[1],i,Ae,n,a)),fe=!0;break}fe||l.push(b[1])}break;case"PtgArray":l.push("{"+bRe(b[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":p=x;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(b));default:throw new Error("Unrecognized Formula Token: "+String(b))}var ge=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&p>=0&&ge.indexOf(t[0][x][0])==-1){b=t[0][p];var ee=!0;switch(b[1][0]){case 4:ee=!1;case 0:g=Xs(" ",b[1][1]);break;case 5:ee=!1;case 1:g=Xs("\r",b[1][1]);break;default:if(g="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}l.push((ee?g:"")+l.pop()+(ee?"":g)),p=-1}}if(l.length>1&&a.WTF)throw new Error("bad formula stack");return l[0]}function CRe(t,e,r){var n=t.l+e,a=r.biff==2?1:2,s,i=t.read_shift(a);if(i==65535)return[[],kl(t,e-2)];var l=Tw(t,i,r);return e!==i+a&&(s=Bw(t,e-i-a,l,r)),t.l=n,[l,s]}function _Re(t,e,r){var n=t.l+e,a=r.biff==2?1:2,s,i=t.read_shift(a);if(i==65535)return[[],kl(t,e-2)];var l=Tw(t,i,r);return e!==i+a&&(s=Bw(t,e-i-a,l,r)),t.l=n,[l,s]}function ERe(t,e,r,n){var a=t.l+e,s=Tw(t,n,r),i;return a!==t.l&&(i=Bw(t,a-t.l,s,r)),[s,i]}function SRe(t,e,r){var n=t.l+e,a,s=t.read_shift(2),i=Tw(t,s,r);return s==65535?[[],kl(t,e-2)]:(e!==s+2&&(a=Bw(t,n-s-2,i,r)),[i,a])}function IRe(t){var e;if(PA(t,t.l+6)!==65535)return[Il(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function jRe(t){if(t==null){var e=zt(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return Xp(t);return Xp(0)}function mP(t,e,r){var n=t.l+e,a=Xf(t);r.biff==2&&++t.l;var s=IRe(t),i=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var l=_Re(t,n-t.l,r);return{cell:a,val:s[0],formula:l,shared:i>>3&1,tt:s[1]}}function PRe(t,e,r,n,a){var s=Jp(e,r,a),i=jRe(t.v),l=zt(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=zt(t.bf.length),d=0;d<t.bf.length;++d)u[d]=t.bf[d];var f=Co([s,i,l,u]);return f}function K4(t,e,r){var n=t.read_shift(4),a=Tw(t,n,r),s=t.read_shift(4),i=s>0?Bw(t,s,a,r):null;return[a,i]}var BRe=K4,q4=K4,TRe=K4,kRe=K4,FRe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Xne={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},ORe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function t$(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function DRe(t){var e="of:="+t.replace(GD,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function pP(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function RRe(t){return t.replace(/\./,"!")}var Nb={},sv={},Cb=typeof Map<"u";function zD(t,e,r){var n=0,a=t.length;if(r){if(Cb?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var s=Cb?r.get(e):r[e];n<s.length;++n)if(t[s[n]].t===e)return t.Count++,s[n]}}else for(;n<a;++n)if(t[n].t===e)return t.Count++,n;return t[a]={t:e},t.Count++,t.Unique++,r&&(Cb?(r.has(e)||r.set(e,[]),r.get(e).push(a)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(a))),a}function z4(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(Sl=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=S2(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=DS(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function Ep(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function ym(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],a=60,s=t.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){QA(e.z,a),r.ssf[a]=e.z,r.revssf[e.z]=n=a;break}}for(a=0;a!=s;++a)if(t[a].numFmtId===n)return a;return t[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function Yne(t,e,r,n,a,s){try{n.cellNF&&(t.z=en[e])}catch(l){if(n.WTF)throw l}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=ss(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(en[e]==null&&QA(FBe[e]||"General",e),t.t==="e")t.w=t.w||ph[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=y2(t.v);else if(t.t==="d"){var i=no(t.v);(i|0)===i?t.w=i.toString(10):t.w=y2(i)}else{if(t.v===void 0)return"";t.w=zp(t.v,sv)}else t.t==="d"?t.w=ad(e,no(t.v),sv):t.w=ad(e,t.v,sv)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{t.s=s.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=OS(a.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=a.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=OS(a.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=a.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&s.Fills)throw l}}}function MRe(t,e,r){if(t&&t["!ref"]){var n=Wn(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function LRe(t,e){var r=Wn(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=hn(r))}var URe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,QRe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,VRe=/<(?:\w:)?hyperlink [^>]*>/mg,HRe=/"(\w*:\w*)"/,$Re=/<(?:\w:)?col\b[^>]*[\/]?>/g,GRe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,KRe=/<(?:\w:)?pageMargins[^>]*\/>/g,Jne=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,qRe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,zRe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function WRe(t,e,r,n,a,s,i){if(!t)return t;n||(n={"!id":{}});var l=e.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=t.match(QRe);f?(u=t.slice(0,f.index),d=t.slice(f.index+f[0].length)):u=d=t;var h=u.match(Jne);h?WD(h[0],l,a,r):(h=u.match(qRe))&&YRe(h[0],h[1]||"",l,a,r);var A=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(A>0){var m=u.slice(A,A+50).match(HRe);m&&LRe(l,m[1])}var p=u.match(zRe);p&&p[1]&&u8e(p[1],a);var g=[];if(e.cellStyles){var x=u.match($Re);x&&s8e(g,x)}f&&A8e(f[1],l,e,c,s,i);var y=d.match(GRe);y&&(l["!autofilter"]=o8e(y[0]));var b=[],w=d.match(URe);if(w)for(A=0;A!=w.length;++A)b[A]=Wn(w[A].slice(w[A].indexOf('"')+1));var j=d.match(VRe);j&&r8e(l,j,n);var I=d.match(KRe);if(I&&(l["!margins"]=n8e(nn(I[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=hn(c)),e.sheetRows>0&&l["!ref"]){var _=Wn(l["!ref"]);e.sheetRows<=+_.e.r&&(_.e.r=e.sheetRows-1,_.e.r>c.e.r&&(_.e.r=c.e.r),_.e.r<_.s.r&&(_.s.r=_.e.r),_.e.c>c.e.c&&(_.e.c=c.e.c),_.e.c<_.s.c&&(_.s.c=_.e.c),l["!fullref"]=l["!ref"],l["!ref"]=hn(_))}return g.length>0&&(l["!cols"]=g),b.length>0&&(l["!merges"]=b),l}function XRe(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+hn(t[r])+'"/>';return e+"</mergeCells>"}function WD(t,e,r,n){var a=nn(t);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=zn(Ba(a.codeName)))}function YRe(t,e,r,n,a){WD(t.slice(0,t.indexOf(">")),r,n,a)}function JRe(t,e,r,n,a){var s=!1,i={},l=null;if(n.bookType!=="xlsx"&&e.vbaraw){var c=e.SheetNames[r];try{e.Workbook&&(c=e.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,i.codeName=Bf(_a(c))}if(t&&t["!outline"]){var u={summaryBelow:1,summaryRight:1};t["!outline"].above&&(u.summaryBelow=0),t["!outline"].left&&(u.summaryRight=0),l=(l||"")+xr("outlinePr",null,u)}!s&&!l||(a[a.length]=xr("sheetPr",l,i))}var ZRe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],e8e=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function t8e(t){var e={sheet:1};return ZRe.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),e8e.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=VD(t.password).toString(16).toUpperCase()),xr("sheetProtection",null,e)}function r8e(t,e,r){for(var n=Array.isArray(t),a=0;a!=e.length;++a){var s=nn(Ba(e[a]),!0);if(!s.ref)return;var i=((r||{})["!id"]||[])[s.id];i?(s.Target=i.Target,s.location&&(s.Target+="#"+zn(s.location))):(s.Target="#"+zn(s.location),i={Target:s.Target,TargetMode:"Internal"}),s.Rel=i,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var l=Wn(s.ref),c=l.s.r;c<=l.e.r;++c)for(var u=l.s.c;u<=l.e.c;++u){var d=tn({c:u,r:c});n?(t[c]||(t[c]=[]),t[c][u]||(t[c][u]={t:"z",v:void 0}),t[c][u].l=s):(t[d]||(t[d]={t:"z",v:void 0}),t[d].l=s)}}}function n8e(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function a8e(t){return Ep(t),xr("pageMargins",null,t)}function s8e(t,e){for(var r=!1,n=0;n!=e.length;++n){var a=nn(e[n],!0);a.hidden&&(a.hidden=ts(a.hidden));var s=parseInt(a.min,10)-1,i=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,HD(a.width)),im(a);s<=i;)t[s++]=is(a)}}function i8e(t,e){for(var r=["<cols>"],n,a=0;a!=e.length;++a)(n=e[a])&&(r[r.length]=xr("col",null,z4(a,n)));return r[r.length]="</cols>",r.join("")}function o8e(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function l8e(t,e,r,n){var a=typeof t.ref=="string"?t.ref:hn(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,i=Ec(a);i.s.r==i.e.r&&(i.e.r=Ec(e["!ref"]).e.r,a=hn(i));for(var l=0;l<s.length;++l){var c=s[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return l==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),xr("autoFilter",null,{ref:a})}var c8e=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function u8e(t,e){e.Views||(e.Views=[{}]),(t.match(c8e)||[]).forEach(function(r,n){var a=nn(r);e.Views[n]||(e.Views[n]={}),+a.zoomScale&&(e.Views[n].zoom=+a.zoomScale),ts(a.rightToLeft)&&(e.Views[n].RTL=!0)})}function d8e(t,e,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),xr("sheetViews",xr("sheetView",null,a),{})}function f8e(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var a="",s=t.t,i=t.v;if(t.t!=="z")switch(t.t){case"b":a=t.v?"1":"0";break;case"n":a=""+t.v;break;case"e":a=ph[t.v];break;case"d":n&&n.cellDates?a=ss(t.v,-1).toISOString():(t=is(t),t.t="n",a=""+(t.v=no(ss(t.v)))),typeof t.z>"u"&&(t.z=en[14]);break;default:a=t.v;break}var l=Zo("v",_a(a)),c={r:e},u=ym(n.cellXfs,t,n);switch(u!==0&&(c.s=u),t.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=Zo("v",""+zD(n.Strings,t.v,n.revStrings)),c.t="s";break}c.t="str";break}if(t.t!=s&&(t.t=s,t.v=i),typeof t.f=="string"&&t.f){var d=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;l=xr("f",_a(t.f),d)+(t.v!=null?l:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(c.cm=1),xr("c",l,c)}var A8e=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=b2("v"),i=b2("f");return function(c,u,d,f,h,A){for(var m=0,p="",g=[],x=[],y=0,b=0,w=0,j="",I,_,S=0,E=0,k,P,T=0,O=0,W=Array.isArray(A.CellXf),Ae,de=[],fe=[],ge=Array.isArray(u),ee=[],Fe={},Pe=!1,F=!!d.sheetStubs,Q=c.split(e),H=0,R=Q.length;H!=R;++H){p=Q[H].trim();var z=p.length;if(z!==0){var J=0;e:for(m=0;m<z;++m)switch(p[m]){case">":if(p[m-1]!="/"){++m;break e}if(d&&d.cellStyles){if(_=nn(p.slice(J,m),!0),S=_.r!=null?parseInt(_.r,10):S+1,E=-1,d.sheetRows&&d.sheetRows<S)continue;Fe={},Pe=!1,_.ht&&(Pe=!0,Fe.hpt=parseFloat(_.ht),Fe.hpx=jv(Fe.hpt)),_.hidden=="1"&&(Pe=!0,Fe.hidden=!0),_.outlineLevel!=null&&(Pe=!0,Fe.level=+_.outlineLevel),Pe&&(ee[S-1]=Fe)}break;case"<":J=m;break}if(J>=m)break;if(_=nn(p.slice(J,m),!0),S=_.r!=null?parseInt(_.r,10):S+1,E=-1,!(d.sheetRows&&d.sheetRows<S)){f.s.r>S-1&&(f.s.r=S-1),f.e.r<S-1&&(f.e.r=S-1),d&&d.cellStyles&&(Fe={},Pe=!1,_.ht&&(Pe=!0,Fe.hpt=parseFloat(_.ht),Fe.hpx=jv(Fe.hpt)),_.hidden=="1"&&(Pe=!0,Fe.hidden=!0),_.outlineLevel!=null&&(Pe=!0,Fe.level=+_.outlineLevel),Pe&&(ee[S-1]=Fe)),g=p.slice(m).split(t);for(var D=0;D!=g.length&&g[D].trim().charAt(0)=="<";++D);for(g=g.slice(D),m=0;m!=g.length;++m)if(p=g[m].trim(),p.length!==0){if(x=p.match(r),y=m,b=0,w=0,p="<c "+(p.slice(0,1)=="<"?">":"")+p,x!=null&&x.length===2){for(y=0,j=x[1],b=0;b!=j.length&&!((w=j.charCodeAt(b)-64)<1||w>26);++b)y=26*y+w;--y,E=y}else++E;for(b=0;b!=p.length&&p.charCodeAt(b)!==62;++b);if(++b,_=nn(p.slice(0,b),!0),_.r||(_.r=tn({r:S-1,c:E})),j=p.slice(b),I={t:""},(x=j.match(s))!=null&&x[1]!==""&&(I.v=zn(x[1])),d.cellFormula){if((x=j.match(i))!=null&&x[1]!==""){if(I.f=zn(Ba(x[1])).replace(/\r\n/g,`
`),d.xlfn||(I.f=YH(I.f)),x[0].indexOf('t="array"')>-1)I.F=(j.match(a)||[])[1],I.F.indexOf(":")>-1&&de.push([Wn(I.F),I.F]);else if(x[0].indexOf('t="shared"')>-1){P=nn(x[0]);var U=zn(Ba(x[1]));d.xlfn||(U=YH(U)),fe[parseInt(P.si,10)]=[P,U,_.r]}}else(x=j.match(/<f[^>]*\/>/))&&(P=nn(x[0]),fe[P.si]&&(I.f=cDe(fe[P.si][1],fe[P.si][2],_.r)));var ne=ks(_.r);for(b=0;b<de.length;++b)ne.r>=de[b][0].s.r&&ne.r<=de[b][0].e.r&&ne.c>=de[b][0].s.c&&ne.c<=de[b][0].e.c&&(I.F=de[b][1])}if(_.t==null&&I.v===void 0)if(I.f||I.F)I.v=0,I.t="n";else if(F)I.t="z";else continue;else I.t=_.t||"n";switch(f.s.c>E&&(f.s.c=E),f.e.c<E&&(f.e.c=E),I.t){case"n":if(I.v==""||I.v==null){if(!F)continue;I.t="z"}else I.v=parseFloat(I.v);break;case"s":if(typeof I.v>"u"){if(!F)continue;I.t="z"}else k=Nb[parseInt(I.v,10)],I.v=k.t,I.r=k.r,d.cellHTML&&(I.h=k.h);break;case"str":I.t="s",I.v=I.v!=null?Ba(I.v):"",d.cellHTML&&(I.h=SD(I.v));break;case"inlineStr":x=j.match(n),I.t="s",x!=null&&(k=QD(x[1]))?(I.v=k.t,d.cellHTML&&(I.h=k.h)):I.v="";break;case"b":I.v=ts(I.v);break;case"d":d.cellDates?I.v=ss(I.v,1):(I.v=no(ss(I.v,1)),I.t="n");break;case"e":(!d||d.cellText!==!1)&&(I.w=I.v),I.v=ene[I.v];break}if(T=O=0,Ae=null,W&&_.s!==void 0&&(Ae=A.CellXf[_.s],Ae!=null&&(Ae.numFmtId!=null&&(T=Ae.numFmtId),d.cellStyles&&Ae.fillId!=null&&(O=Ae.fillId))),Yne(I,T,O,d,h,A),d.cellDates&&W&&I.t=="n"&&i1(en[T])&&(I.t="d",I.v=$4(I.v)),_.cm&&d.xlmeta){var ve=(d.xlmeta.Cell||[])[+_.cm-1];ve&&ve.type=="XLDAPR"&&(I.D=!0)}if(ge){var L=ks(_.r);u[L.r]||(u[L.r]=[]),u[L.r][L.c]=I}else u[_.r]=I}}}}ee.length>0&&(u["!rows"]=ee)}}();function h8e(t,e,r,n){var a=[],s=[],i=Wn(t["!ref"]),l="",c,u="",d=[],f=0,h=0,A=t["!rows"],m=Array.isArray(t),p={r:u},g,x=-1;for(h=i.s.c;h<=i.e.c;++h)d[h]=Ts(h);for(f=i.s.r;f<=i.e.r;++f){for(s=[],u=vi(f),h=i.s.c;h<=i.e.c;++h){c=d[h]+u;var y=m?(t[f]||[])[h]:t[c];y!==void 0&&(l=f8e(y,c,t,e))!=null&&s.push(l)}(s.length>0||A&&A[f])&&(p={r:u},A&&A[f]&&(g=A[f],g.hidden&&(p.hidden=1),x=-1,g.hpx?x=I2(g.hpx):g.hpt&&(x=g.hpt),x>-1&&(p.ht=x,p.customHeight=1),g.level&&(p.outlineLevel=g.level)),a[a.length]=xr("row",s.join(""),p))}if(A)for(;f<A.length;++f)A&&A[f]&&(p={r:f+1},g=A[f],g.hidden&&(p.hidden=1),x=-1,g.hpx?x=I2(g.hpx):g.hpt&&(x=g.hpt),x>-1&&(p.ht=x,p.customHeight=1),g.level&&(p.outlineLevel=g.level),a[a.length]=xr("row","",p));return a.join("")}function Zne(t,e,r,n){var a=[bi,xr("worksheet",null,{xmlns:yg[0],"xmlns:r":Zi.r})],s=r.SheetNames[t],i=0,l="",c=r.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",d=Wn(u);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=hn(d)}n||(n={}),c["!comments"]=[];var f=[];JRe(c,r,t,e,a),a[a.length]=xr("dimension",null,{ref:u}),a[a.length]=d8e(c,e,t,r),e.sheetFormat&&(a[a.length]=xr("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=i8e(c,c["!cols"])),a[i=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=h8e(c,e),l.length>0&&(a[a.length]=l)),a.length>i+1&&(a[a.length]="</sheetData>",a[i]=a[i].replace("/>",">")),c["!protect"]&&(a[a.length]=t8e(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=l8e(c["!autofilter"],c,r,t)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=XRe(c["!merges"]));var h=-1,A,m=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(p){p[1].Target&&(A={ref:p[0]},p[1].Target.charAt(0)!="#"&&(m=ba(n,-1,_a(p[1].Target).replace(/#.*$/,""),Bn.HLINK),A["r:id"]="rId"+m),(h=p[1].Target.indexOf("#"))>-1&&(A.location=_a(p[1].Target.slice(h+1))),p[1].Tooltip&&(A.tooltip=_a(p[1].Tooltip)),a[a.length]=xr("hyperlink",null,A))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=a8e(c["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(a[a.length]=Zo("ignoredErrors",xr("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(m=ba(n,-1,"../drawings/drawing"+(t+1)+".xml",Bn.DRAW),a[a.length]=xr("drawing",null,{"r:id":"rId"+m}),c["!drawing"]=f),c["!comments"].length>0&&(m=ba(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Bn.VML),a[a.length]=xr("legacyDrawing",null,{"r:id":"rId"+m}),c["!legacy"]=m),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function m8e(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var a=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function p8e(t,e,r){var n=zt(145),a=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var s=320;a.hpx?s=I2(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var i=0;a.level&&(i|=a.level),a.hidden&&(i|=16),(a.hpx||a.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var u={r:t,c:0},d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var f=-1,h=-1,A=d<<10;A<d+1<<10;++A){u.c=A;var m=Array.isArray(r)?(r[u.r]||[])[u.c]:r[tn(u)];m&&(f<0&&(f=A),h=A)}f<0||(++l,n.write_shift(4,f),n.write_shift(4,h))}var p=n.l;return n.l=c,n.write_shift(4,l),n.l=p,n.length>n.l?n.slice(0,n.l):n}function g8e(t,e,r,n){var a=p8e(n,r,e);(a.length>17||(e["!rows"]||[])[n])&&ar(t,0,a)}var x8e=Cg,v8e=c1;function y8e(){}function b8e(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=CTe(t),r}function w8e(t,e,r){r==null&&(r=zt(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return TS({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Wre(t,r),r.slice(0,r.l)}function N8e(t){var e=ld(t);return[e]}function C8e(t,e,r){return r==null&&(r=zt(8)),bg(e,r)}function _8e(t){var e=wg(t);return[e]}function E8e(t,e,r){return r==null&&(r=zt(4)),Ng(e,r)}function S8e(t){var e=ld(t),r=t.read_shift(1);return[e,r,"b"]}function I8e(t,e,r){return r==null&&(r=zt(9)),bg(e,r),r.write_shift(1,t.v?1:0),r}function j8e(t){var e=wg(t),r=t.read_shift(1);return[e,r,"b"]}function P8e(t,e,r){return r==null&&(r=zt(5)),Ng(e,r),r.write_shift(1,t.v?1:0),r}function B8e(t){var e=ld(t),r=t.read_shift(1);return[e,r,"e"]}function T8e(t,e,r){return r==null&&(r=zt(9)),bg(e,r),r.write_shift(1,t.v),r}function k8e(t){var e=wg(t),r=t.read_shift(1);return[e,r,"e"]}function F8e(t,e,r){return r==null&&(r=zt(8)),Ng(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function O8e(t){var e=ld(t),r=t.read_shift(4);return[e,r,"s"]}function D8e(t,e,r){return r==null&&(r=zt(12)),bg(e,r),r.write_shift(4,e.v),r}function R8e(t){var e=wg(t),r=t.read_shift(4);return[e,r,"s"]}function M8e(t,e,r){return r==null&&(r=zt(8)),Ng(e,r),r.write_shift(4,e.v),r}function L8e(t){var e=ld(t),r=Il(t);return[e,r,"n"]}function U8e(t,e,r){return r==null&&(r=zt(16)),bg(e,r),Xp(t.v,r),r}function eae(t){var e=wg(t),r=Il(t);return[e,r,"n"]}function Q8e(t,e,r){return r==null&&(r=zt(12)),Ng(e,r),Xp(t.v,r),r}function V8e(t){var e=ld(t),r=DD(t);return[e,r,"n"]}function H8e(t,e,r){return r==null&&(r=zt(12)),bg(e,r),Xre(t.v,r),r}function $8e(t){var e=wg(t),r=DD(t);return[e,r,"n"]}function G8e(t,e,r){return r==null&&(r=zt(8)),Ng(e,r),Xre(t.v,r),r}function K8e(t){var e=ld(t),r=kD(t);return[e,r,"is"]}function q8e(t){var e=ld(t),r=Pl(t);return[e,r,"str"]}function z8e(t,e,r){return r==null&&(r=zt(12+4*t.v.length)),bg(e,r),Eo(t.v,r),r.length>r.l?r.slice(0,r.l):r}function W8e(t){var e=wg(t),r=Pl(t);return[e,r,"str"]}function X8e(t,e,r){return r==null&&(r=zt(8+4*t.v.length)),Ng(e,r),Eo(t.v,r),r.length>r.l?r.slice(0,r.l):r}function Y8e(t,e,r){var n=t.l+e,a=ld(t);a.r=r["!row"];var s=t.read_shift(1),i=[a,s,"b"];if(r.cellFormula){t.l+=2;var l=q4(t,n-t.l,r);i[3]=_l(l,null,a,r.supbooks,r)}else t.l=n;return i}function J8e(t,e,r){var n=t.l+e,a=ld(t);a.r=r["!row"];var s=t.read_shift(1),i=[a,s,"e"];if(r.cellFormula){t.l+=2;var l=q4(t,n-t.l,r);i[3]=_l(l,null,a,r.supbooks,r)}else t.l=n;return i}function Z8e(t,e,r){var n=t.l+e,a=ld(t);a.r=r["!row"];var s=Il(t),i=[a,s,"n"];if(r.cellFormula){t.l+=2;var l=q4(t,n-t.l,r);i[3]=_l(l,null,a,r.supbooks,r)}else t.l=n;return i}function eMe(t,e,r){var n=t.l+e,a=ld(t);a.r=r["!row"];var s=Pl(t),i=[a,s,"str"];if(r.cellFormula){t.l+=2;var l=q4(t,n-t.l,r);i[3]=_l(l,null,a,r.supbooks,r)}else t.l=n;return i}var tMe=Cg,rMe=c1;function nMe(t,e){return e==null&&(e=zt(4)),e.write_shift(4,t),e}function aMe(t,e){var r=t.l+e,n=Cg(t),a=FD(t),s=Pl(t),i=Pl(t),l=Pl(t);t.l=r;var c={rfx:n,relId:a,loc:s,display:l};return i&&(c.Tooltip=i),c}function sMe(t,e){var r=zt(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));c1({s:ks(t[0]),e:ks(t[0])},r),OD("rId"+e,r);var n=t[1].Target.indexOf("#"),a=n==-1?"":t[1].Target.slice(n+1);return Eo(a||"",r),Eo(t[1].Tooltip||"",r),Eo("",r),r.slice(0,r.l)}function iMe(){}function oMe(t,e,r){var n=t.l+e,a=Yre(t),s=t.read_shift(1),i=[a];if(i[2]=s,r.cellFormula){var l=BRe(t,n-t.l,r);i[1]=l}else t.l=n;return i}function lMe(t,e,r){var n=t.l+e,a=Cg(t),s=[a];if(r.cellFormula){var i=kRe(t,n-t.l,r);s[1]=i,t.l=n}else t.l=n;return s}function cMe(t,e,r){r==null&&(r=zt(18));var n=z4(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return e.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),e.level&&(a|=e.level<<8),r.write_shift(2,a),r}var tae=["left","right","top","bottom","header","footer"];function uMe(t){var e={};return tae.forEach(function(r){e[r]=Il(t)}),e}function dMe(t,e){return e==null&&(e=zt(6*8)),Ep(t),tae.forEach(function(r){Xp(t[r],e)}),e}function fMe(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function AMe(t,e,r){r==null&&(r=zt(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function hMe(t){var e=zt(24);return e.write_shift(4,4),e.write_shift(4,1),c1(t,e),e}function mMe(t,e){return e==null&&(e=zt(16*4+2)),e.write_shift(2,t.password?VD(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function pMe(){}function gMe(){}function xMe(t,e,r,n,a,s,i){if(!t)return t;var l=e||{};n||(n={"!id":{}});var c=l.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,A,m,p,g,x,y,b,w,j,I=[];l.biff=12,l["!row"]=0;var _=0,S=!1,E=[],k={},P=l.supbooks||a.supbooks||[[]];if(P.sharedf=k,P.arrayf=E,P.SheetNames=a.SheetNames||a.Sheets.map(function(ge){return ge.name}),!l.supbooks&&(l.supbooks=P,a.Names))for(var T=0;T<a.Names.length;++T)P[0][T+1]=a.Names[T];var O=[],W=[],Ae=!1;j2[16]={n:"BrtShortReal",f:eae};var de;if(mh(t,function(ee,Fe,Pe){if(!h)switch(Pe){case 148:u=ee;break;case 0:A=ee,l.sheetRows&&l.sheetRows<=A.r&&(h=!0),w=vi(g=A.r),l["!row"]=A.r,(ee.hidden||ee.hpt||ee.level!=null)&&(ee.hpt&&(ee.hpx=jv(ee.hpt)),W[ee.r]=ee);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(m={t:ee[2]},ee[2]){case"n":m.v=ee[1];break;case"s":b=Nb[ee[1]],m.v=b.t,m.r=b.r;break;case"b":m.v=!!ee[1];break;case"e":m.v=ee[1],l.cellText!==!1&&(m.w=ph[m.v]);break;case"str":m.t="s",m.v=ee[1];break;case"is":m.t="s",m.v=ee[1].t;break}if((p=i.CellXf[ee[0].iStyleRef])&&Yne(m,p.numFmtId,null,l,s,i),x=ee[0].c==-1?x+1:ee[0].c,l.dense?(c[g]||(c[g]=[]),c[g][x]=m):c[Ts(x)+w]=m,l.cellFormula){for(S=!1,_=0;_<E.length;++_){var F=E[_];A.r>=F[0].s.r&&A.r<=F[0].e.r&&x>=F[0].s.c&&x<=F[0].e.c&&(m.F=hn(F[0]),S=!0)}!S&&ee.length>3&&(m.f=ee[3])}if(d.s.r>A.r&&(d.s.r=A.r),d.s.c>x&&(d.s.c=x),d.e.r<A.r&&(d.e.r=A.r),d.e.c<x&&(d.e.c=x),l.cellDates&&p&&m.t=="n"&&i1(en[p.numFmtId])){var Q=lp(m.v);Q&&(m.t="d",m.v=new Date(Q.y,Q.m-1,Q.d,Q.H,Q.M,Q.S,Q.u))}de&&(de.type=="XLDAPR"&&(m.D=!0),de=void 0);break;case 1:case 12:if(!l.sheetStubs||f)break;m={t:"z",v:void 0},x=ee[0].c==-1?x+1:ee[0].c,l.dense?(c[g]||(c[g]=[]),c[g][x]=m):c[Ts(x)+w]=m,d.s.r>A.r&&(d.s.r=A.r),d.s.c>x&&(d.s.c=x),d.e.r<A.r&&(d.e.r=A.r),d.e.c<x&&(d.e.c=x),de&&(de.type=="XLDAPR"&&(m.D=!0),de=void 0);break;case 176:I.push(ee);break;case 49:de=((l.xlmeta||{}).Cell||[])[ee-1];break;case 494:var H=n["!id"][ee.relId];for(H?(ee.Target=H.Target,ee.loc&&(ee.Target+="#"+ee.loc),ee.Rel=H):ee.relId==""&&(ee.Target="#"+ee.loc),g=ee.rfx.s.r;g<=ee.rfx.e.r;++g)for(x=ee.rfx.s.c;x<=ee.rfx.e.c;++x)l.dense?(c[g]||(c[g]=[]),c[g][x]||(c[g][x]={t:"z",v:void 0}),c[g][x].l=ee):(y=tn({c:x,r:g}),c[y]||(c[y]={t:"z",v:void 0}),c[y].l=ee);break;case 426:if(!l.cellFormula)break;E.push(ee),j=l.dense?c[g][x]:c[Ts(x)+w],j.f=_l(ee[1],d,{r:A.r,c:x},P,l),j.F=hn(ee[0]);break;case 427:if(!l.cellFormula)break;k[tn(ee[0].s)]=ee[1],j=l.dense?c[g][x]:c[Ts(x)+w],j.f=_l(ee[1],d,{r:A.r,c:x},P,l);break;case 60:if(!l.cellStyles)break;for(;ee.e>=ee.s;)O[ee.e--]={width:ee.w/256,hidden:!!(ee.flags&1),level:ee.level},Ae||(Ae=!0,HD(ee.w/256)),im(O[ee.e+1]);break;case 161:c["!autofilter"]={ref:hn(ee)};break;case 476:c["!margins"]=ee;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),ee.name&&(a.Sheets[r].CodeName=ee.name),(ee.above||ee.left)&&(c["!outline"]={above:ee.above,left:ee.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),ee.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!Fe.T){if(!f||l.WTF)throw new Error("Unexpected record 0x"+Pe.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=hn(u||d)),l.sheetRows&&c["!ref"]){var fe=Wn(c["!ref"]);l.sheetRows<=+fe.e.r&&(fe.e.r=l.sheetRows-1,fe.e.r>d.e.r&&(fe.e.r=d.e.r),fe.e.r<fe.s.r&&(fe.s.r=fe.e.r),fe.e.c>d.e.c&&(fe.e.c=d.e.c),fe.e.c<fe.s.c&&(fe.s.c=fe.e.c),c["!fullref"]=c["!ref"],c["!ref"]=hn(fe))}return I.length>0&&(c["!merges"]=I),O.length>0&&(c["!cols"]=O),W.length>0&&(c["!rows"]=W),c}function vMe(t,e,r,n,a,s,i){if(e.v===void 0)return!1;var l="";switch(e.t){case"b":l=e.v?"1":"0";break;case"d":e=is(e),e.z=e.z||en[14],e.v=no(ss(e.v)),e.t="n";break;case"n":case"e":l=""+e.v;break;default:l=e.v;break}var c={r,c:n};switch(c.s=ym(a.cellXfs,e,a),e.l&&s["!links"].push([tn(c),e.l]),e.c&&s["!comments"].push([tn(c),e.c]),e.t){case"s":case"str":return a.bookSST?(l=zD(a.Strings,e.v,a.revStrings),c.t="s",c.v=l,i?ar(t,18,M8e(e,c)):ar(t,7,D8e(e,c))):(c.t="str",i?ar(t,17,X8e(e,c)):ar(t,6,z8e(e,c))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?i?ar(t,13,G8e(e,c)):ar(t,2,H8e(e,c)):i?ar(t,16,Q8e(e,c)):ar(t,5,U8e(e,c)),!0;case"b":return c.t="b",i?ar(t,15,P8e(e,c)):ar(t,4,I8e(e,c)),!0;case"e":return c.t="e",i?ar(t,14,F8e(e,c)):ar(t,3,T8e(e,c)),!0}return i?ar(t,12,E8e(e,c)):ar(t,1,C8e(e,c)),!0}function yMe(t,e,r,n){var a=Wn(e["!ref"]||"A1"),s,i="",l=[];ar(t,145);var c=Array.isArray(e),u=a.e.r;e["!rows"]&&(u=Math.max(a.e.r,e["!rows"].length-1));for(var d=a.s.r;d<=u;++d){i=vi(d),g8e(t,e,a,d);var f=!1;if(d<=a.e.r)for(var h=a.s.c;h<=a.e.c;++h){d===a.s.r&&(l[h]=Ts(h)),s=l[h]+i;var A=c?(e[d]||[])[h]:e[s];if(!A){f=!1;continue}f=vMe(t,A,d,h,n,e,f)}}ar(t,146)}function bMe(t,e){!e||!e["!merges"]||(ar(t,177,nMe(e["!merges"].length)),e["!merges"].forEach(function(r){ar(t,176,rMe(r))}),ar(t,178))}function wMe(t,e){!e||!e["!cols"]||(ar(t,390),e["!cols"].forEach(function(r,n){r&&ar(t,60,cMe(n,r))}),ar(t,391))}function NMe(t,e){!e||!e["!ref"]||(ar(t,648),ar(t,649,hMe(Wn(e["!ref"]))),ar(t,650))}function CMe(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var a=ba(r,-1,n[1].Target.replace(/#.*$/,""),Bn.HLINK);ar(t,494,sMe(n,a))}}),delete e["!links"]}function _Me(t,e,r,n){if(e["!comments"].length>0){var a=ba(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Bn.VML);ar(t,551,OD("rId"+a)),e["!legacy"]=a}}function EMe(t,e,r,n){if(e["!autofilter"]){var a=e["!autofilter"],s=typeof a.ref=="string"?a.ref:hn(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,l=Ec(s);l.s.r==l.e.r&&(l.e.r=Ec(e["!ref"]).e.r,s=hn(l));for(var c=0;c<i.length;++c){var u=i[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}c==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),ar(t,161,c1(Wn(s))),ar(t,162)}}function SMe(t,e,r){ar(t,133),ar(t,137,AMe(e,r)),ar(t,138),ar(t,134)}function IMe(t,e){e["!protect"]&&ar(t,535,mMe(e["!protect"]))}function jMe(t,e,r,n){var a=_c(),s=r.SheetNames[t],i=r.Sheets[s]||{},l=s;try{r&&r.Workbook&&(l=r.Workbook.Sheets[t].CodeName||l)}catch{}var c=Wn(i["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(e.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],ar(a,129),(r.vbaraw||i["!outline"])&&ar(a,147,w8e(l,i["!outline"])),ar(a,148,v8e(c)),SMe(a,i,r.Workbook),wMe(a,i),yMe(a,i,t,e),IMe(a,i),EMe(a,i,r,t),bMe(a,i),CMe(a,i,n),i["!margins"]&&ar(a,476,dMe(i["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&NMe(a,i),_Me(a,i,t,n),ar(a,130),a.end()}function PMe(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var i=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(e[+i[1]]=r?+i[2]:i[2])});var a=zn((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[e,a,n]}function BMe(t,e,r,n,a,s){var i=s||{"!type":"chart"};if(!t)return s;var l=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var h=PMe(f);d.s.r=d.s.c=0,d.e.c=l,u=Ts(l),h[0].forEach(function(A,m){i[u+vi(m)]={t:"n",v:A,z:h[1]},c=m}),d.e.r<c&&(d.e.r=c),++l}),l>0&&(i["!ref"]=hn(d)),i}function TMe(t,e,r,n,a){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i,l=t.match(Jne);return l&&WD(l[0],s,a,r),(i=t.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=i[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function kMe(t,e){t.l+=10;var r=Pl(t);return{name:r}}function FMe(t,e,r,n,a){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i=!1;return mh(t,function(c,u,d){switch(d){case 550:s["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||e.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},e),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var XD=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],OMe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],DMe=[],RMe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function r$(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],a=0;a!=e.length;++a){var s=e[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=ts(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function n$(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=ts(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function rae(t){n$(t.WBProps,XD),n$(t.CalcPr,RMe),r$(t.WBView,OMe),r$(t.Sheets,DMe),sv.date1904=ts(t.WBProps.date1904)}function MMe(t){return!t.Workbook||!t.Workbook.WBProps?"false":ts(t.Workbook.WBProps.date1904)?"true":"false"}var LMe="][*?/\\".split("");function nae(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return LMe.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function UMe(t,e,r){t.forEach(function(n,a){nae(n);for(var s=0;s<a;++s)if(n==t[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=e&&e[a]&&e[a].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function QMe(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];UMe(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)MRe(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}var VMe=/<\w+:workbook/;function HMe(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},i=0;if(t.replace(Ol,function(c,u){var d=nn(c);switch(Wf(d[0])){case"<?xml":break;case"<workbook":c.match(VMe)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":XD.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=ts(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=Ba(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=zn(Ba(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=Ba(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),ts(d.hidden||"0")&&(s.Hidden=!0),i=u+c.length;break;case"</definedName>":s.Ref=zn(Ba(t.slice(i,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),yg.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return rae(r),r}function aae(t){var e=[bi];e[e.length]=xr("workbook",null,{xmlns:yg[0],"xmlns:r":Zi.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(XD.forEach(function(l){t.Workbook.WBProps[l[0]]!=null&&t.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=t.Workbook.WBProps[l[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=xr("workbookPr",null,n);var a=t.Workbook&&t.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var i={name:_a(t.SheetNames[s].slice(0,31))};if(i.sheetId=""+(s+1),i["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}e[e.length]=xr("sheet",null,i)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(e[e.length]=xr("definedName",_a(l.Ref),c))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function $Me(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=_k(t),r.name=Pl(t),r}function GMe(t,e){return e||(e=zt(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),OD(t.strRelID,e),Eo(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function KMe(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var a=e>8?Pl(t):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function qMe(t,e){e||(e=zt(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),Wre(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function zMe(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function WMe(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var a=t.read_shift(4),s=_Te(t),i=TRe(t,0,r),l=FD(t);t.l=n;var c={Name:s,Ptg:i};return a<268435455&&(c.Sheet=a),l&&(c.Comment=l),c}function XMe(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;e||(e={}),e.biff=12;var s=[],i=[[]];return i.SheetNames=[],i.XTI=[],j2[16]={n:"BrtFRTArchID$",f:zMe},mh(t,function(c,u,d){switch(d){case 156:i.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(e.SID=c.Sheet),c.Ref=_l(c.Ptg,null,null,i,e),delete e.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,c]):i[0]=[d,c],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(c),i.XTI=i.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},e),rae(r),r.Names=s,r.supbooks=i,r}function YMe(t,e){ar(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};ar(t,156,GMe(a))}ar(t,144)}function JMe(t,e){e||(e=zt(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return Eo("SheetJS",e),Eo(_S.version,e),Eo(_S.version,e),Eo("7262",e),e.length>e.l?e.slice(0,e.l):e}function ZMe(t,e){e||(e=zt(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function eLe(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(ar(t,135),ar(t,158,ZMe(a)),ar(t,136))}}function tLe(t,e){var r=_c();return ar(r,131),ar(r,128,JMe()),ar(r,153,qMe(t.Workbook&&t.Workbook.WBProps||null)),eLe(r,t),YMe(r,t),ar(r,132),r.end()}function rLe(t,e,r){return e.slice(-4)===".bin"?XMe(t,r):HMe(t,r)}function nLe(t,e,r,n,a,s,i,l){return e.slice(-4)===".bin"?xMe(t,n,r,a,s,i,l):WRe(t,n,r,a,s,i,l)}function aLe(t,e,r,n,a,s,i,l){return e.slice(-4)===".bin"?FMe(t,n,r,a,s):TMe(t,n,r,a,s)}function sLe(t,e,r,n,a,s,i,l){return e.slice(-4)===".bin"?oDe():lDe()}function iLe(t,e,r,n,a,s,i,l){return e.slice(-4)===".bin"?sDe():iDe()}function oLe(t,e,r,n){return e.slice(-4)===".bin"?r6e(t,r,n):$Oe(t,r,n)}function lLe(t,e,r){return Mne(t,r)}function cLe(t,e,r){return e.slice(-4)===".bin"?cOe(t,r):iOe(t,r)}function uLe(t,e,r){return e.slice(-4)===".bin"?eDe(t,r):G6e(t,r)}function dLe(t,e,r){return e.slice(-4)===".bin"?V6e(t):U6e(t)}function fLe(t,e,r,n){return r.slice(-4)===".bin"?H6e(t,e,r,n):void 0}function ALe(t,e,r){return e.slice(-4)===".bin"?R6e(t,e,r):L6e(t,e,r)}function hLe(t,e,r){return(e.slice(-4)===".bin"?tLe:aae)(t)}function mLe(t,e,r,n,a){return(e.slice(-4)===".bin"?jMe:Zne)(t,r,n,a)}function pLe(t,e,r){return(e.slice(-4)===".bin"?f6e:Dne)(t,r)}function gLe(t,e,r){return(e.slice(-4)===".bin"?fOe:Ine)(t,r)}function xLe(t,e,r){return(e.slice(-4)===".bin"?tDe:Qne)(t)}function vLe(t){return(t.slice(-4)===".bin"?M6e:Lne)()}var sae=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,iae=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Cd(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=t.match(sae),s,i,l,c;if(a)for(c=0;c!=a.length;++c)s=a[c].match(iae),(i=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?l="xmlns"+s[1].slice(6):l=s[1].slice(i+1),n[l]=s[2].slice(1,s[2].length-1));return n}function yLe(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(sae),a,s,i,l;if(n)for(l=0;l!=n.length;++l)a=n[l].match(iae),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?i="xmlns"+a[1].slice(6):i=a[1].slice(s+1),r[i]=a[2].slice(1,a[2].length-1));return r}var _b;function bLe(t,e){var r=_b[t]||zn(t);return r==="General"?zp(e):ad(r,e)}function wLe(t,e,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=ts(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=ss(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[zn(e)]=a}function NLe(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||ph[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=y2(t.v):t.w=zp(t.v):t.w=bLe(e||"General",t.v)}catch(s){if(r.WTF)throw s}try{var n=_b[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&i1(n)){var a=lp(t.v);a&&(t.t="d",t.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function CLe(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=DOe[n.Pattern]||n.Pattern)}t[e.ID]=e}function _Le(t,e,r,n,a,s,i,l,c,u){var d="General",f=n.StyleID,h={};u=u||{};var A=[],m=0;for(f===void 0&&l&&(f=l.StyleID),f===void 0&&i&&(f=i.StyleID);s[f]!==void 0&&(s[f].nf&&(d=s[f].nf),s[f].Interior&&A.push(s[f].Interior),!!s[f].Parent);)f=s[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=ts(t);break;case"String":n.t="s",n.r=yH(zn(t)),n.v=t.indexOf("<")>-1?zn(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(ss(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=zn(t):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=ene[t],u.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=yH(e||t));break}if(NLe(n,d,u),u.cellFormula!==!1)if(n.Formula){var p=zn(n.Formula);p.charCodeAt(0)==61&&(p=p.slice(1)),n.f=av(p,a),delete n.Formula,n.ArrayRange=="RC"?n.F=av("RC:RC",a):n.ArrayRange&&(n.F=av(n.ArrayRange,a),c.push([Wn(n.F),n.F]))}else for(m=0;m<c.length;++m)a.r>=c[m][0].s.r&&a.r<=c[m][0].e.r&&a.c>=c[m][0].s.c&&a.c<=c[m][0].e.c&&(n.F=c[m][1]);u.cellStyles&&(A.forEach(function(g){!h.patternType&&g.patternType&&(h.patternType=g.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function ELe(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function gP(t,e){var r=e||{};o1();var n=Uy(ID(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Ba(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var i=is(r);return i.type="string",Iv.to_workbook(n,i)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(se){a.indexOf("<"+se)>=0&&(s=!0)}),s)return dUe(n,r);_b={"General Number":"General","General Date":en[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":en[15],"Short Date":en[14],"Long Time":en[19],"Medium Time":en[18],"Short Time":en[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:en[2],Standard:en[4],Percent:en[10],Scientific:en[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],u,d={},f=[],h=r.dense?[]:{},A="",m={},p={},g=Cd('<Data ss:Type="String">'),x=0,y=0,b=0,w={s:{r:2e6,c:2e6},e:{r:0,c:0}},j={},I={},_="",S=0,E=[],k={},P={},T=0,O=[],W=[],Ae={},de=[],fe,ge=!1,ee=[],Fe=[],Pe={},F=0,Q=0,H={Sheets:[],WBProps:{date1904:!1}},R={};N2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var z="";l=N2.exec(n);)switch(l[3]=(z=l[3]).toLowerCase()){case"data":if(z=="data"){if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?_Le(n.slice(x,l.index),_,g,c[c.length-1][0]=="comment"?Ae:m,{c:y,r:b},j,de[y],p,ee,r):(_="",g=Cd(l[0]),x=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(W.length>0&&(m.c=W),(!r.sheetRows||r.sheetRows>b)&&m.v!==void 0&&(r.dense?(h[b]||(h[b]=[]),h[b][y]=m):h[Ts(y)+vi(b)]=m),m.HRef&&(m.l={Target:zn(m.HRef)},m.HRefScreenTip&&(m.l.Tooltip=m.HRefScreenTip),delete m.HRef,delete m.HRefScreenTip),(m.MergeAcross||m.MergeDown)&&(F=y+(parseInt(m.MergeAcross,10)|0),Q=b+(parseInt(m.MergeDown,10)|0),E.push({s:{c:y,r:b},e:{c:F,r:Q}})),!r.sheetStubs)m.MergeAcross?y=F+1:++y;else if(m.MergeAcross||m.MergeDown){for(var J=y;J<=F;++J)for(var D=b;D<=Q;++D)(J>y||D>b)&&(r.dense?(h[D]||(h[D]=[]),h[D][J]={t:"z"}):h[Ts(J)+vi(D)]={t:"z"});y=F+1}else++y;else m=yLe(l[0]),m.Index&&(y=+m.Index-1),y<w.s.c&&(w.s.c=y),y>w.e.c&&(w.e.c=y),l[0].slice(-2)==="/>"&&++y,W=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(b<w.s.r&&(w.s.r=b),b>w.e.r&&(w.e.r=b),l[0].slice(-2)==="/>"&&(p=Cd(l[0]),p.Index&&(b=+p.Index-1)),y=0,++b):(p=Cd(l[0]),p.Index&&(b=+p.Index-1),Pe={},(p.AutoFitHeight=="0"||p.Height)&&(Pe.hpx=parseInt(p.Height,10),Pe.hpt=I2(Pe.hpx),Fe[b]=Pe),p.Hidden=="1"&&(Pe.hidden=!0,Fe[b]=Pe));break;case"worksheet":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));f.push(A),w.s.r<=w.e.r&&w.s.c<=w.e.c&&(h["!ref"]=hn(w),r.sheetRows&&r.sheetRows<=w.e.r&&(h["!fullref"]=h["!ref"],w.e.r=r.sheetRows-1,h["!ref"]=hn(w))),E.length&&(h["!merges"]=E),de.length>0&&(h["!cols"]=de),Fe.length>0&&(h["!rows"]=Fe),d[A]=h}else w={s:{r:2e6,c:2e6},e:{r:0,c:0}},b=y=0,c.push([l[3],!1]),u=Cd(l[0]),A=zn(u.Name),h=r.dense?[]:{},E=[],ee=[],Fe=[],R={name:A,Hidden:0},H.Sheets.push(R);break;case"table":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),de=[],ge=!1}break;case"style":l[1]==="/"?CLe(j,I,r):I=Cd(l[0]);break;case"numberformat":I.nf=zn(Cd(l[0]).Format||"General"),_b[I.nf]&&(I.nf=_b[I.nf]);for(var U=0;U!=392&&en[U]!=I.nf;++U);if(U==392){for(U=57;U!=392;++U)if(en[U]==null){QA(I.nf,U);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(fe=Cd(l[0]),fe.Hidden&&(fe.hidden=!0,delete fe.Hidden),fe.Width&&(fe.wpx=parseInt(fe.Width,10)),!ge&&fe.wpx>10){ge=!0,Sl=Fne;for(var ne=0;ne<de.length;++ne)de[ne]&&im(de[ne])}ge&&im(fe),de[fe.Index-1||de.length]=fe;for(var ve=0;ve<+fe.Span;++ve)de[de.length]=is(fe);break;case"namedrange":if(l[1]==="/")break;H.Names||(H.Names=[]);var L=nn(l[0]),Ye={Name:L.Name,Ref:av(L.RefersTo.slice(1),{r:0,c:0})};H.Sheets.length>0&&(Ye.Sheet=H.Sheets.length-1),H.Names.push(Ye);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?_+=n.slice(S,l.index):S=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;I.Interior=Cd(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?XTe(k,z,n.slice(T,l.index)):T=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));ELe(Ae),W.push(Ae)}else c.push([l[3],!1]),u=Cd(l[0]),Ae={a:u.Author};break;case"autofilter":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var ie=Cd(l[0]);h["!autofilter"]={ref:av(ie.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return l$(n,r);var Z=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Z=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Z=!1}break;case"excelworkbook":switch(l[3]){case"date1904":H.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Z=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:Z=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(T,l.index)){case"SheetHidden":R.Hidden=1;break;case"SheetVeryHidden":R.Hidden=2;break}else T=l.index+l[0].length;break;case"header":h["!margins"]||Ep(h["!margins"]={},"xlml"),isNaN(+nn(l[0]).Margin)||(h["!margins"].header=+nn(l[0]).Margin);break;case"footer":h["!margins"]||Ep(h["!margins"]={},"xlml"),isNaN(+nn(l[0]).Margin)||(h["!margins"].footer=+nn(l[0]).Margin);break;case"pagemargins":var Oe=nn(l[0]);h["!margins"]||Ep(h["!margins"]={},"xlml"),isNaN(+Oe.Top)||(h["!margins"].top=+Oe.Top),isNaN(+Oe.Left)||(h["!margins"].left=+Oe.Left),isNaN(+Oe.Right)||(h["!margins"].right=+Oe.Right),isNaN(+Oe.Bottom)||(h["!margins"].bottom=+Oe.Bottom);break;case"displayrighttoleft":H.Views||(H.Views=[]),H.Views[0]||(H.Views[0]={}),H.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Z=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Z=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Z=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Z=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Z=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Z=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Z=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Z=!1}break;case"smarttags":break;default:Z=!1;break}if(Z||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?wLe(P,z,O,n.slice(T,l.index)):(O=l,T=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var le={};return!r.bookSheets&&!r.bookProps&&(le.Sheets=d),le.SheetNames=f,le.Workbook=H,le.SSF=is(en),le.Props=k,le.Custprops=P,le}function Tk(t,e){switch(JD(e=e||{}),e.type||"base64"){case"base64":return gP(uu(t),e);case"binary":case"buffer":case"file":return gP(t,e);case"array":return gP(xm(t),e)}}function SLe(t,e){var r=[];return t.Props&&r.push(YTe(t.Props,e)),t.Custprops&&r.push(JTe(t.Props,t.Custprops)),r.join("")}function ILe(){return""}function jLe(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,a){var s=[];s.push(xr("NumberFormat",null,{"ss:Format":_a(en[n.numFmtId])}));var i={"ss:ID":"s"+(21+a)};r.push(xr("Style",s.join(""),i))}),xr("Styles",r.join(""))}function oae(t){return xr("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+KD(t.Ref,{r:0,c:0})})}function PLe(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var a=e[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(oae(a)))}return xr("Names",r.join(""))}function BLe(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],i=0;i<a.length;++i){var l=a[i];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||s.push(oae(l)))}return s.join("")}function TLe(t,e,r,n){if(!t)return"";var a=[];if(t["!margins"]&&(a.push("<PageSetup>"),t["!margins"].header&&a.push(xr("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&a.push(xr("Footer",null,{"x:Margin":t["!margins"].footer})),a.push(xr("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(xr("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),t["!protect"]&&(a.push(Zo("ProtectContents","True")),t["!protect"].objects&&a.push(Zo("ProtectObjects","True")),t["!protect"].scenarios&&a.push(Zo("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?a.push(Zo("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&a.push(Zo("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){t["!protect"][i[0]]&&a.push("<"+i[1]+"/>")})),a.length==0?"":xr("WorksheetOptions",a.join(""),{xmlns:Wc.x})}function kLe(t){return t.map(function(e){var r=eTe(e.t||""),n=xr("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return xr("Comment",n,{"ss:Author":e.a})}).join("")}function FLe(t,e,r,n,a,s,i){if(!t||t.v==null&&t.f==null)return"";var l={};if(t.f&&(l["ss:Formula"]="="+_a(KD(t.f,i))),t.F&&t.F.slice(0,e.length)==e){var c=ks(t.F.slice(e.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==i.r?"":"["+(c.r-i.r)+"]")+"C"+(c.c==i.c?"":"["+(c.c-i.c)+"]")}if(t.l&&t.l.Target&&(l["ss:HRef"]=_a(t.l.Target),t.l.Tooltip&&(l["x:HRefScreenTip"]=_a(t.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(l["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(l["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",h="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",h=String(t.v);break;case"b":f="Boolean",h=t.v?"1":"0";break;case"e":f="Error",h=ph[t.v];break;case"d":f="DateTime",h=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||en[14]);break;case"s":f="String",h=ZBe(t.v||"");break}var A=ym(n.cellXfs,t,n);l["ss:StyleID"]="s"+(21+A),l["ss:Index"]=i.c+1;var m=t.v!=null?h:"",p=t.t=="z"?"":'<Data ss:Type="'+f+'">'+m+"</Data>";return(t.c||[]).length>0&&(p+=kLe(t.c)),xr("Cell",p,l)}function OLe(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=jv(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function DLe(t,e,r,n){if(!t["!ref"])return"";var a=Wn(t["!ref"]),s=t["!merges"]||[],i=0,l=[];t["!cols"]&&t["!cols"].forEach(function(g,x){im(g);var y=!!g.width,b=z4(x,g),w={"ss:Index":x+1};y&&(w["ss:Width"]=E2(b.width)),g.hidden&&(w["ss:Hidden"]="1"),l.push(xr("Column",null,w))});for(var c=Array.isArray(t),u=a.s.r;u<=a.e.r;++u){for(var d=[OLe(u,(t["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var h=!1;for(i=0;i!=s.length;++i)if(!(s[i].s.c>f)&&!(s[i].s.r>u)&&!(s[i].e.c<f)&&!(s[i].e.r<u)){(s[i].s.c!=f||s[i].s.r!=u)&&(h=!0);break}if(!h){var A={r:u,c:f},m=tn(A),p=c?(t[u]||[])[f]:t[m];d.push(FLe(p,m,t,e,r,n,A))}}d.push("</Row>"),d.length>2&&l.push(d.join(""))}return l.join("")}function RLe(t,e,r){var n=[],a=r.SheetNames[t],s=r.Sheets[a],i=s?BLe(s,e,t,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=s?DLe(s,e,t,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(TLe(s,e,t,r)),n.join("")}function MLe(t,e){e||(e={}),t.SSF||(t.SSF=is(en)),t.SSF&&(o1(),Q4(t.SSF),e.revssf=H4(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],ym(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(SLe(t,e)),r.push(ILe()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(xr("Worksheet",RLe(n,e,t),{"ss:Name":_a(t.SheetNames[n])}));return r[2]=jLe(t,e),r[3]=PLe(t),bi+xr("Workbook",r.join(""),{xmlns:Wc.ss,"xmlns:o":Wc.o,"xmlns:x":Wc.x,"xmlns:ss":Wc.ss,"xmlns:dt":Wc.dt,"xmlns:html":Wc.html})}function LLe(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=PTe(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=BTe(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var ULe=[60,1084,2066,2165,2175];function QLe(t,e,r,n,a){var s=n,i=[],l=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&l.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(l)}i.push(l),r.l+=s;for(var c=PA(r,r.l),u=kk[c],d=0;u!=null&&ULe.indexOf(c)>-1;)s=PA(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),l=r.slice(d,r.l+4+s),i.push(l),r.l+=4+s,u=kk[c=PA(r,r.l)];var f=Co(i);Yo(f,0);var h=0;f.lens=[];for(var A=0;A<i.length;++A)f.lens.push(h),h+=i[A].length;if(f.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+f.length+" < "+n;return e.f(f,f.length,a)}function mf(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=en[n])}catch(s){if(e.WTF)throw s}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||ph[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=y2(t.v):t.w=zp(t.v):t.w=ad(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(s){if(e.WTF)throw s}if(e.cellDates&&n&&t.t=="n"&&i1(en[n]||String(n))){var a=lp(t.v);a&&(t.t="d",t.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function qC(t,e,r){return{v:t,ixfe:e,t:r}}function VLe(t,e){var r={opts:{}},n={},a=e.dense?[]:{},s={},i={},l=null,c=[],u="",d={},f,h="",A,m,p,g,x={},y=[],b,w,j=[],I=[],_={Sheets:[],WBProps:{date1904:!1},Views:[{}]},S={},E=function(ue){return ue<8?Np[ue]:ue<64&&I[ue-8]||Np[ue]},k=function(ue,ce,Te){var Xe=ce.XF.data;if(!(!Xe||!Xe.patternType||!Te||!Te.cellStyles)){ce.s={},ce.s.patternType=Xe.patternType;var ft;(ft=_2(E(Xe.icvFore)))&&(ce.s.fgColor={rgb:ft}),(ft=_2(E(Xe.icvBack)))&&(ce.s.bgColor={rgb:ft})}},P=function(ue,ce,Te){if(!(Pe>1)&&!(Te.sheetRows&&ue.r>=Te.sheetRows)){if(Te.cellStyles&&ce.XF&&ce.XF.data&&k(ue,ce,Te),delete ce.ixfe,delete ce.XF,f=ue,h=tn(ue),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),ue.r<i.s.r&&(i.s.r=ue.r),ue.c<i.s.c&&(i.s.c=ue.c),ue.r+1>i.e.r&&(i.e.r=ue.r+1),ue.c+1>i.e.c&&(i.e.c=ue.c+1),Te.cellFormula&&ce.f){for(var Xe=0;Xe<y.length;++Xe)if(!(y[Xe][0].s.c>ue.c||y[Xe][0].s.r>ue.r)&&!(y[Xe][0].e.c<ue.c||y[Xe][0].e.r<ue.r)){ce.F=hn(y[Xe][0]),(y[Xe][0].s.c!=ue.c||y[Xe][0].s.r!=ue.r)&&delete ce.f,ce.f&&(ce.f=""+_l(y[Xe][1],i,ue,ee,T));break}}Te.dense?(a[ue.r]||(a[ue.r]=[]),a[ue.r][ue.c]=ce):a[h]=ce}},T={enc:!1,sbcch:0,snames:[],sharedf:x,arrayf:y,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(T.password=e.password);var O,W=[],Ae=[],de=[],fe=[],ge=!1,ee=[];ee.SheetNames=T.snames,ee.sharedf=T.sharedf,ee.arrayf=T.arrayf,ee.names=[],ee.XTI=[];var Fe=0,Pe=0,F=0,Q=[],H=[],R;T.codepage=1200,Dd(1200);for(var z=!1;t.l<t.length-1;){var J=t.l,D=t.read_shift(2);if(D===0&&Fe===10)break;var U=t.l===t.length?0:t.read_shift(2),ne=kk[D];if(ne&&ne.f){if(e.bookSheets&&Fe===133&&D!==133)break;if(Fe=D,ne.r===2||ne.r==12){var ve=t.read_shift(2);if(U-=2,!T.enc&&ve!==D&&((ve&255)<<8|ve>>8)!==D)throw new Error("rt mismatch: "+ve+"!="+D);ne.r==12&&(t.l+=10,U-=10)}var L={};if(D===10?L=ne.f(t,U,T):L=QLe(D,ne,t,U,T),Pe==0&&[9,521,1033,2057].indexOf(Fe)===-1)continue;switch(D){case 34:r.opts.Date1904=_.WBProps.date1904=L;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(T.enc||(t.l=0),T.enc=L,!e.password)throw new Error("File is password-protected");if(L.valid==null)throw new Error("Encryption scheme unsupported");if(!L.valid)throw new Error("Password is incorrect");break;case 92:T.lastuser=L;break;case 66:var Ye=Number(L);switch(Ye){case 21010:Ye=1200;break;case 32768:Ye=1e4;break;case 32769:Ye=1252;break}Dd(T.codepage=Ye),z=!0;break;case 317:T.rrtabid=L;break;case 25:T.winlocked=L;break;case 439:r.opts.RefreshAll=L;break;case 12:r.opts.CalcCount=L;break;case 16:r.opts.CalcDelta=L;break;case 17:r.opts.CalcIter=L;break;case 13:r.opts.CalcMode=L;break;case 14:r.opts.CalcPrecision=L;break;case 95:r.opts.CalcSaveRecalc=L;break;case 15:T.CalcRefMode=L;break;case 2211:r.opts.FullCalc=L;break;case 129:L.fDialog&&(a["!type"]="dialog"),L.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),L.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:j.push(L);break;case 430:ee.push([L]),ee[ee.length-1].XTI=[];break;case 35:case 547:ee[ee.length-1].push(L);break;case 24:case 536:R={Name:L.Name,Ref:_l(L.rgce,i,null,ee,T)},L.itab>0&&(R.Sheet=L.itab-1),ee.names.push(R),ee[0]||(ee[0]=[],ee[0].XTI=[]),ee[ee.length-1].push(L),L.Name=="_xlnm._FilterDatabase"&&L.itab>0&&L.rgce&&L.rgce[0]&&L.rgce[0][0]&&L.rgce[0][0][0]=="PtgArea3d"&&(H[L.itab-1]={ref:hn(L.rgce[0][0][1][2])});break;case 22:T.ExternCount=L;break;case 23:ee.length==0&&(ee[0]=[],ee[0].XTI=[]),ee[ee.length-1].XTI=ee[ee.length-1].XTI.concat(L),ee.XTI=ee.XTI.concat(L);break;case 2196:if(T.biff<8)break;R!=null&&(R.Comment=L[1]);break;case 18:a["!protect"]=L;break;case 19:L!==0&&T.WTF&&console.error("Password verifier: "+L);break;case 133:s[L.pos]=L,T.snames.push(L.name);break;case 10:{if(--Pe)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,a["!ref"]=hn(i),e.sheetRows&&e.sheetRows<=i.e.r){var ie=i.e.r;i.e.r=e.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=hn(i),i.e.r=ie}i.e.r++,i.e.c++}W.length>0&&(a["!merges"]=W),Ae.length>0&&(a["!objects"]=Ae),de.length>0&&(a["!cols"]=de),fe.length>0&&(a["!rows"]=fe),_.Sheets.push(S)}u===""?d=a:n[u]=a,a=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(T.biff===8&&(T.biff={9:2,521:3,1033:4}[D]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[L.BIFFVer]||8),T.biffguess=L.BIFFVer==0,L.BIFFVer==0&&L.dt==4096&&(T.biff=5,z=!0,Dd(T.codepage=28591)),T.biff==8&&L.BIFFVer==0&&L.dt==16&&(T.biff=2),Pe++)break;if(a=e.dense?[]:{},T.biff<8&&!z&&(z=!0,Dd(T.codepage=e.codepage||1252)),T.biff<5||L.BIFFVer==0&&L.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var Z={pos:t.l-U,name:u};s[Z.pos]=Z,T.snames.push(u)}else u=(s[J]||{name:""}).name;L.dt==32&&(a["!type"]="chart"),L.dt==64&&(a["!type"]="macro"),W=[],Ae=[],T.arrayf=y=[],de=[],fe=[],ge=!1,S={Hidden:(s[J]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(e.dense?(a[L.r]||[])[L.c]:a[tn({c:L.c,r:L.r})])&&++L.c,b={ixfe:L.ixfe,XF:j[L.ixfe]||{},v:L.val,t:"n"},F>0&&(b.z=Q[b.ixfe>>8&63]),mf(b,e,r.opts.Date1904),P({c:L.c,r:L.r},b,e);break;case 5:case 517:b={ixfe:L.ixfe,XF:j[L.ixfe],v:L.val,t:L.t},F>0&&(b.z=Q[b.ixfe>>8&63]),mf(b,e,r.opts.Date1904),P({c:L.c,r:L.r},b,e);break;case 638:b={ixfe:L.ixfe,XF:j[L.ixfe],v:L.rknum,t:"n"},F>0&&(b.z=Q[b.ixfe>>8&63]),mf(b,e,r.opts.Date1904),P({c:L.c,r:L.r},b,e);break;case 189:for(var Oe=L.c;Oe<=L.C;++Oe){var le=L.rkrec[Oe-L.c][0];b={ixfe:le,XF:j[le],v:L.rkrec[Oe-L.c][1],t:"n"},F>0&&(b.z=Q[b.ixfe>>8&63]),mf(b,e,r.opts.Date1904),P({c:Oe,r:L.r},b,e)}break;case 6:case 518:case 1030:{if(L.val=="String"){l=L;break}if(b=qC(L.val,L.cell.ixfe,L.tt),b.XF=j[b.ixfe],e.cellFormula){var se=L.formula;if(se&&se[0]&&se[0][0]&&se[0][0][0]=="PtgExp"){var Be=se[0][0][1][0],je=se[0][0][1][1],ot=tn({r:Be,c:je});x[ot]?b.f=""+_l(L.formula,i,L.cell,ee,T):b.F=((e.dense?(a[Be]||[])[je]:a[ot])||{}).F}else b.f=""+_l(L.formula,i,L.cell,ee,T)}F>0&&(b.z=Q[b.ixfe>>8&63]),mf(b,e,r.opts.Date1904),P(L.cell,b,e),l=L}break;case 7:case 519:if(l)l.val=L,b=qC(L,l.cell.ixfe,"s"),b.XF=j[b.ixfe],e.cellFormula&&(b.f=""+_l(l.formula,i,l.cell,ee,T)),F>0&&(b.z=Q[b.ixfe>>8&63]),mf(b,e,r.opts.Date1904),P(l.cell,b,e),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{y.push(L);var mt=tn(L[0].s);if(A=e.dense?(a[L[0].s.r]||[])[L[0].s.c]:a[mt],e.cellFormula&&A){if(!l||!mt||!A)break;A.f=""+_l(L[1],i,L[0],ee,T),A.F=hn(L[0])}}break;case 1212:{if(!e.cellFormula)break;if(h){if(!l)break;x[tn(l.cell)]=L[0],A=e.dense?(a[l.cell.r]||[])[l.cell.c]:a[tn(l.cell)],(A||{}).f=""+_l(L[0],i,f,ee,T)}}break;case 253:b=qC(c[L.isst].t,L.ixfe,"s"),c[L.isst].h&&(b.h=c[L.isst].h),b.XF=j[b.ixfe],F>0&&(b.z=Q[b.ixfe>>8&63]),mf(b,e,r.opts.Date1904),P({c:L.c,r:L.r},b,e);break;case 513:e.sheetStubs&&(b={ixfe:L.ixfe,XF:j[L.ixfe],t:"z"},F>0&&(b.z=Q[b.ixfe>>8&63]),mf(b,e,r.opts.Date1904),P({c:L.c,r:L.r},b,e));break;case 190:if(e.sheetStubs)for(var ut=L.c;ut<=L.C;++ut){var _e=L.ixfe[ut-L.c];b={ixfe:_e,XF:j[_e],t:"z"},F>0&&(b.z=Q[b.ixfe>>8&63]),mf(b,e,r.opts.Date1904),P({c:ut,r:L.r},b,e)}break;case 214:case 516:case 4:b=qC(L.val,L.ixfe,"s"),b.XF=j[b.ixfe],F>0&&(b.z=Q[b.ixfe>>8&63]),mf(b,e,r.opts.Date1904),P({c:L.c,r:L.r},b,e);break;case 0:case 512:Pe===1&&(i=L);break;case 252:c=L;break;case 1054:if(T.biff==4){Q[F++]=L[1];for(var rt=0;rt<F+163&&en[rt]!=L[1];++rt);rt>=163&&QA(L[1],F+163)}else QA(L[1],L[0]);break;case 30:{Q[F++]=L;for(var we=0;we<F+163&&en[we]!=L;++we);we>=163&&QA(L,F+163)}break;case 229:W=W.concat(L);break;case 93:Ae[L.cmo[0]]=T.lastobj=L;break;case 438:T.lastobj.TxO=L;break;case 127:T.lastobj.ImData=L;break;case 440:for(g=L[0].s.r;g<=L[0].e.r;++g)for(p=L[0].s.c;p<=L[0].e.c;++p)A=e.dense?(a[g]||[])[p]:a[tn({c:p,r:g})],A&&(A.l=L[1]);break;case 2048:for(g=L[0].s.r;g<=L[0].e.r;++g)for(p=L[0].s.c;p<=L[0].e.c;++p)A=e.dense?(a[g]||[])[p]:a[tn({c:p,r:g})],A&&A.l&&(A.l.Tooltip=L[1]);break;case 28:{if(T.biff<=5&&T.biff>=2)break;A=e.dense?(a[L[0].r]||[])[L[0].c]:a[tn(L[0])];var Ce=Ae[L[2]];A||(e.dense?(a[L[0].r]||(a[L[0].r]=[]),A=a[L[0].r][L[0].c]={t:"z"}):A=a[tn(L[0])]={t:"z"},i.e.r=Math.max(i.e.r,L[0].r),i.s.r=Math.min(i.s.r,L[0].r),i.e.c=Math.max(i.e.c,L[0].c),i.s.c=Math.min(i.s.c,L[0].c)),A.c||(A.c=[]),m={a:L[1],t:Ce.TxO.t},A.c.push(m)}break;case 2173:j6e(j[L.ixfe],L.ext);break;case 125:{if(!T.cellStyles)break;for(;L.e>=L.s;)de[L.e--]={width:L.w/256,level:L.level||0,hidden:!!(L.flags&1)},ge||(ge=!0,HD(L.w/256)),im(de[L.e+1])}break;case 520:{var Ue={};L.level!=null&&(fe[L.r]=Ue,Ue.level=L.level),L.hidden&&(fe[L.r]=Ue,Ue.hidden=!0),L.hpt&&(fe[L.r]=Ue,Ue.hpt=L.hpt,Ue.hpx=jv(L.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||Ep(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[D]]=L;break;case 161:a["!margins"]||Ep(a["!margins"]={}),a["!margins"].header=L.header,a["!margins"].footer=L.footer;break;case 574:L.RTL&&(_.Views[0].RTL=!0);break;case 146:I=L;break;case 2198:O=L;break;case 140:w=L;break;case 442:u?S.CodeName=L||S.name:_.WBProps.CodeName=L||"ThisWorkbook";break}}else ne||console.error("Missing Info for XLS Record 0x"+D.toString(16)),t.l+=U}return r.SheetNames=ei(s).sort(function(Ve,ue){return Number(Ve)-Number(ue)}).map(function(Ve){return s[Ve].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&H.forEach(function(Ve,ue){r.Sheets[r.SheetNames[ue]]["!autofilter"]=Ve}),r.Strings=c,r.SSF=is(en),T.enc&&(r.Encryption=T.enc),O&&(r.Themes=O),r.Metadata={},w!==void 0&&(r.Metadata.Country=w),ee.names.length>0&&(_.Names=ee.names),r.Workbook=_,r}var Eb={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function HLe(t,e,r){var n=qr.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=MH(n,Ek,Eb.DSI);for(var s in a)e[s]=a[s]}catch(u){if(r.WTF)throw u}var i=qr.find(t,"/!SummaryInformation");if(i&&i.size>0)try{var l=MH(i,Sk,Eb.SI);for(var c in l)e[c]==null&&(e[c]=l[c])}catch(u){if(r.WTF)throw u}e.HeadingPairs&&e.TitlesOfParts&&(ine(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function $Le(t,e){var r=[],n=[],a=[],s=0,i,l=hH(Ek,"n"),c=hH(Sk,"n");if(t.Props)for(i=ei(t.Props),s=0;s<i.length;++s)(Object.prototype.hasOwnProperty.call(l,i[s])?r:Object.prototype.hasOwnProperty.call(c,i[s])?n:a).push([i[s],t.Props[i[s]]]);if(t.Custprops)for(i=ei(t.Custprops),s=0;s<i.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},i[s])||(Object.prototype.hasOwnProperty.call(l,i[s])?r:Object.prototype.hasOwnProperty.call(c,i[s])?n:a).push([i[s],t.Custprops[i[s]]]);var u=[];for(s=0;s<a.length;++s)Ane.indexOf(a[s][0])>-1||sne.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&qr.utils.cfb_add(e,"/SummaryInformation",LH(n,Eb.SI,c,Sk)),(r.length||u.length)&&qr.utils.cfb_add(e,"/DocumentSummaryInformation",LH(r,Eb.DSI,l,Ek,u.length?u:null,Eb.UDI))}function lae(t,e){e||(e={}),JD(e),vD(),e.codepage&&xD(e.codepage);var r,n;if(t.FullPaths){if(qr.find(t,"/encryption"))throw new Error("File is password-protected");r=qr.find(t,"!CompObj"),n=qr.find(t,"/Workbook")||qr.find(t,"/Book")}else{switch(e.type){case"base64":t=Yc(uu(t));break;case"binary":t=Yc(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}Yo(t,0),n={content:t}}var a,s;if(r&&LLe(r),e.bookProps&&!e.bookSheets)a={};else{var i=En?"buffer":"array";if(n&&n.content)a=VLe(n.content,e);else if((s=qr.find(t,"PerfectOffice_MAIN"))&&s.content)a=_p.to_workbook(s.content,(e.type=i,e));else if((s=qr.find(t,"NativeContent_MAIN"))&&s.content)a=_p.to_workbook(s.content,(e.type=i,e));else throw(s=qr.find(t,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&qr.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=nDe(t))}var l={};return t.FullPaths&&HLe(t,l,e),a.Props=a.Custprops=l,e.bookFiles&&(a.cfb=t),a}function GLe(t,e){var r=e||{},n=qr.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return qr.utils.cfb_add(n,a,cae(t,r)),r.biff==8&&(t.Props||t.Custprops)&&$Le(t,n),r.biff==8&&t.vbaraw&&aDe(n,qr.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var j2={0:{f:m8e},1:{f:N8e},2:{f:V8e},3:{f:B8e},4:{f:S8e},5:{f:L8e},6:{f:q8e},7:{f:O8e},8:{f:eMe},9:{f:Z8e},10:{f:Y8e},11:{f:J8e},12:{f:_8e},13:{f:$8e},14:{f:k8e},15:{f:j8e},16:{f:eae},17:{f:W8e},18:{f:R8e},19:{f:kD},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:WMe},40:{},42:{},43:{f:qOe},44:{f:GOe},45:{f:XOe},46:{f:JOe},47:{f:YOe},48:{},49:{f:xTe},50:{},51:{f:T6e},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Cne},62:{f:K8e},63:{f:Q6e},64:{f:pMe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:kl,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:fMe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:b8e},148:{f:x8e,p:16},151:{f:iMe},152:{},153:{f:KMe},154:{},155:{},156:{f:$Me},157:{},158:{},159:{T:1,f:lOe},160:{T:-1},161:{T:1,f:Cg},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:tMe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:P6e},336:{T:-1},337:{f:O6e,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:_k},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Nne},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:oMe},427:{f:lMe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:uMe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:y8e},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:aMe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:_k},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:J6e},633:{T:1},634:{T:-1},635:{T:1,f:X6e},636:{T:-1},637:{f:wTe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:kMe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:gMe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},kk={6:{f:mP},10:{f:Jh},12:{f:Si},13:{f:Si},14:{f:li},15:{f:li},16:{f:Il},17:{f:li},18:{f:li},19:{f:Si},20:{f:GH},21:{f:GH},23:{f:Nne},24:{f:qH},25:{f:li},26:{},27:{},28:{f:gFe},29:{},34:{f:li},35:{f:KH},38:{f:Il},39:{f:Il},40:{f:Il},41:{f:Il},42:{f:li},43:{f:li},47:{f:jOe},49:{f:$ke},51:{f:Si},60:{},61:{f:Lke},64:{f:li},65:{f:Hke},66:{f:Si},77:{},80:{},81:{},82:{},85:{f:Si},89:{},90:{},91:{},92:{f:Ike},93:{f:yFe},94:{},95:{f:li},96:{},97:{},99:{f:li},125:{f:Cne},128:{f:sFe},129:{f:Pke},130:{f:Si},131:{f:li},132:{f:li},133:{f:Bke},134:{},140:{f:IFe},141:{f:Si},144:{},146:{f:BFe},151:{},152:{},153:{},154:{},155:{},156:{f:Si},157:{},158:{},160:{f:MFe},161:{f:FFe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:tFe},190:{f:rFe},193:{f:Jh},197:{},198:{},199:{},200:{},201:{},202:{f:li},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Si},220:{},221:{f:li},222:{},224:{f:aFe},225:{f:Ske},226:{f:Jh},227:{},229:{f:xFe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:kke},253:{f:Kke},255:{f:Oke},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:hne},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:li},353:{f:Jh},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:uFe},431:{f:li},432:{},433:{},434:{},437:{},438:{f:NFe},439:{f:li},440:{f:CFe},441:{},442:{f:jw},443:{},444:{f:Si},445:{},446:{},448:{f:Jh},449:{f:Mke,r:2},450:{f:Jh},512:{f:VH},513:{f:RFe},515:{f:lFe},516:{f:zke},517:{f:$H},519:{f:LFe},520:{f:Dke},523:{},545:{f:zH},549:{f:QH},566:{},574:{f:Qke},638:{f:eFe},659:{},1048:{},1054:{f:Xke},1084:{},1212:{f:hFe},2048:{f:EFe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:$C},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Jh},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:TFe,r:12},2173:{f:I6e,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:li,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:AFe,r:12},2197:{},2198:{f:w6e,r:12},2199:{},2200:{},2201:{},2202:{f:mFe,r:12},2203:{f:Jh},2204:{},2205:{},2206:{},2207:{},2211:{f:Rke},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Si},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:OFe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:PFe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:VH},1:{},2:{f:$Fe},3:{f:VFe},4:{f:QFe},5:{f:$H},7:{f:KFe},8:{},9:{f:$C},11:{},22:{f:Si},30:{f:Jke},31:{},32:{},33:{f:zH},36:{},37:{f:QH},50:{f:qFe},62:{},52:{},67:{},68:{f:Si},69:{},86:{},126:{},127:{f:UFe},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:zFe},223:{},234:{},354:{},421:{},518:{f:mP},521:{f:$C},536:{f:qH},547:{f:KH},561:{},579:{},1030:{f:mP},1033:{f:$C},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function vr(t,e,r,n){var a=e;if(!isNaN(a)){var s=n||(r||[]).length||0,i=t.next(4);i.write_shift(2,a),i.write_shift(2,s),s>0&&PD(r)&&t.push(r)}}function KLe(t,e,r,n){var a=(r||[]).length||0;if(a<=8224)return vr(t,e,r,a);var s=e;if(!isNaN(s)){for(var i=r.parts||[],l=0,c=0,u=0;u+(i[l]||8224)<=8224;)u+=i[l]||8224,l++;var d=t.next(4);for(d.write_shift(2,s),d.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u;c<a;){for(d=t.next(4),d.write_shift(2,60),u=0;u+(i[l]||8224)<=8224;)u+=i[l]||8224,l++;d.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u}}}function kw(t,e,r){return t||(t=zt(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function qLe(t,e,r,n){var a=zt(9);return kw(a,t,e),mne(r,n||"b",a),a}function zLe(t,e,r){var n=zt(8+2*r.length);return kw(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function WLe(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var a=e.t=="d"?no(ss(e.v)):e.v;a==(a|0)&&a>=0&&a<65536?vr(t,2,GFe(r,n,a)):vr(t,3,HFe(r,n,a));return;case"b":case"e":vr(t,5,qLe(r,n,e.v,e.t));return;case"s":case"str":vr(t,4,zLe(r,n,(e.v||"").slice(0,255)));return}vr(t,1,kw(null,r,n))}function XLe(t,e,r,n){var a=Array.isArray(e),s=Wn(e["!ref"]||"A1"),i,l="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),i=hn(s)}for(var u=s.s.r;u<=s.e.r;++u){l=vi(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(c[d]=Ts(d)),i=c[d]+l;var f=a?(e[u]||[])[d]:e[i];f&&WLe(t,f,u,d)}}}function YLe(t,e){for(var r=e||{},n=_c(),a=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return vr(n,r.biff==4?1033:r.biff==3?521:9,UD(t,16,r)),XLe(n,t.Sheets[t.SheetNames[a]],a,r),vr(n,10),n.end()}function JLe(t,e,r){vr(t,49,Gke({sz:12,name:"Arial"},r))}function ZLe(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&vr(t,1054,Yke(a,e[a],r))})}function eUe(t,e){var r=zt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),vr(t,2151,r),r=zt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),yne(Wn(e["!ref"]||"A1"),r),r.write_shift(4,4),vr(t,2152,r)}function tUe(t,e){for(var r=0;r<16;++r)vr(t,224,HH({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){vr(t,224,HH(n,0,e))})}function rUe(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];vr(t,440,_Fe(n)),n[1].Tooltip&&vr(t,2048,SFe(n))}delete e["!links"]}function nUe(t,e){if(e){var r=0;e.forEach(function(n,a){++r<=256&&n&&vr(t,125,kFe(z4(a,n),a))})}}function aUe(t,e,r,n,a){var s=16+ym(a.cellXfs,e,a);if(e.v==null&&!e.bf){vr(t,513,Jp(r,n,s));return}if(e.bf)vr(t,6,PRe(e,r,n,a,s));else switch(e.t){case"d":case"n":var i=e.t=="d"?no(ss(e.v)):e.v;vr(t,515,cFe(r,n,i,s));break;case"b":case"e":vr(t,517,oFe(r,n,e.v,s,a,e.t));break;case"s":case"str":if(a.bookSST){var l=zD(a.Strings,e.v,a.revStrings);vr(t,253,qke(r,n,l,s))}else vr(t,516,Wke(r,n,(e.v||"").slice(0,255),s,a));break;default:vr(t,513,Jp(r,n,s))}}function sUe(t,e,r){var n=_c(),a=r.SheetNames[t],s=r.Sheets[a]||{},i=(r||{}).Workbook||{},l=(i.Sheets||[])[t]||{},c=Array.isArray(s),u=e.biff==8,d,f="",h=[],A=Wn(s["!ref"]||"A1"),m=u?65536:16384;if(A.e.c>255||A.e.r>=m){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");A.e.c=Math.min(A.e.c,255),A.e.r=Math.min(A.e.c,m-1)}vr(n,2057,UD(r,16,e)),vr(n,13,Qu(1)),vr(n,12,Qu(100)),vr(n,15,Wl(!0)),vr(n,17,Wl(!1)),vr(n,16,Xp(.001)),vr(n,95,Wl(!0)),vr(n,42,Wl(!1)),vr(n,43,Wl(!1)),vr(n,130,Qu(1)),vr(n,128,iFe()),vr(n,131,Wl(!1)),vr(n,132,Wl(!1)),u&&nUe(n,s["!cols"]),vr(n,512,Zke(A,e)),u&&(s["!links"]=[]);for(var p=A.s.r;p<=A.e.r;++p){f=vi(p);for(var g=A.s.c;g<=A.e.c;++g){p===A.s.r&&(h[g]=Ts(g)),d=h[g]+f;var x=c?(s[p]||[])[g]:s[d];x&&(aUe(n,x,p,g,e),u&&x.l&&s["!links"].push([d,x.l]))}}var y=l.CodeName||l.name||a;return u&&vr(n,574,Vke((i.Views||[])[0])),u&&(s["!merges"]||[]).length&&vr(n,229,vFe(s["!merges"])),u&&rUe(n,s),vr(n,442,pne(y)),u&&eUe(n,s),vr(n,10),n.end()}function iUe(t,e,r){var n=_c(),a=(t||{}).Workbook||{},s=a.Sheets||[],i=a.WBProps||{},l=r.biff==8,c=r.biff==5;if(vr(n,2057,UD(t,5,r)),r.bookType=="xla"&&vr(n,135),vr(n,225,l?Qu(1200):null),vr(n,193,oke(2)),c&&vr(n,191),c&&vr(n,192),vr(n,226),vr(n,92,jke("SheetJS",r)),vr(n,66,Qu(l?1200:1252)),l&&vr(n,353,Qu(0)),l&&vr(n,448),vr(n,317,DFe(t.SheetNames.length)),l&&t.vbaraw&&vr(n,211),l&&t.vbaraw){var u=i.CodeName||"ThisWorkbook";vr(n,442,pne(u))}vr(n,156,Qu(17)),vr(n,25,Wl(!1)),vr(n,18,Wl(!1)),vr(n,19,Qu(0)),l&&vr(n,431,Wl(!1)),l&&vr(n,444,Qu(0)),vr(n,61,Uke()),vr(n,64,Wl(!1)),vr(n,141,Qu(0)),vr(n,34,Wl(MMe(t)=="true")),vr(n,14,Wl(!0)),l&&vr(n,439,Wl(!1)),vr(n,218,Qu(0)),JLe(n,t,r),ZLe(n,t.SSF,r),tUe(n,r),l&&vr(n,352,Wl(!1));var d=n.end(),f=_c();l&&vr(f,140,jFe()),l&&r.Strings&&KLe(f,252,Fke(r.Strings)),vr(f,10);var h=f.end(),A=_c(),m=0,p=0;for(p=0;p<t.SheetNames.length;++p)m+=(l?12:11)+(l?2:1)*t.SheetNames[p].length;var g=d.length+m+h.length;for(p=0;p<t.SheetNames.length;++p){var x=s[p]||{};vr(A,133,Tke({pos:g,hs:x.Hidden||0,dt:0,name:t.SheetNames[p]},r)),g+=e[p].length}var y=A.end();if(m!=y.length)throw new Error("BS8 "+m+" != "+y.length);var b=[];return d.length&&b.push(d),y.length&&b.push(y),h.length&&b.push(h),Co(b)}function oUe(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=is(en)),t&&t.SSF&&(o1(),Q4(t.SSF),r.revssf=H4(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,ZD(r),r.cellXfs=[],ym(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var a=0;a<t.SheetNames.length;++a)n[n.length]=sUe(a,r,t);return n.unshift(iUe(t,n,r)),Co(n)}function cae(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var a=Ec(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return oUe(t,e);case 4:case 3:case 2:return YLe(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function a$(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var a=t.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=t.match(/<\/table/i),i=a.index,l=s&&s.index||t.length,c=GBe(t.slice(i,l),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,h=0,A={s:{r:1e7,c:1e7},e:{r:0,c:0}},m=[];for(i=0;i<c.length;++i){var p=c[i].trim(),g=p.slice(0,3).toLowerCase();if(g=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(g!="<td"&&g!="<th")){var x=p.split(/<\/t[dh]>/i);for(l=0;l<x.length;++l){var y=x[l].trim();if(y.match(/<t[dh]/i)){for(var b=y,w=0;b.charAt(0)=="<"&&(w=b.indexOf(">"))>-1;)b=b.slice(w+1);for(var j=0;j<m.length;++j){var I=m[j];I.s.c==d&&I.s.r<u&&u<=I.e.r&&(d=I.e.c+1,j=-1)}var _=nn(y.slice(0,y.indexOf(">")));h=_.colspan?+_.colspan:1,((f=+_.rowspan)>1||h>1)&&m.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+h-1}});var S=_.t||_["data-t"]||"";if(!b.length){d+=h;continue}if(b=kre(b),A.s.r>u&&(A.s.r=u),A.e.r<u&&(A.e.r=u),A.s.c>d&&(A.s.c=d),A.e.c<d&&(A.e.c=d),!b.length){d+=h;continue}var E={t:"s",v:b};r.raw||!b.trim().length||S=="s"||(b==="TRUE"?E={t:"b",v:!0}:b==="FALSE"?E={t:"b",v:!1}:isNaN(Qd(b))?isNaN(Sv(b).getDate())||(E={t:"d",v:ss(b)},r.cellDates||(E={t:"n",v:no(E.v)}),E.z=r.dateNF||en[14]):E={t:"n",v:Qd(b)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=E):n[tn({r:u,c:d})]=E,d+=h}}}}return n["!ref"]=hn(A),m.length&&(n["!merges"]=m),n}function lUe(t,e,r,n){for(var a=t["!merges"]||[],s=[],i=e.s.c;i<=e.e.c;++i){for(var l=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>i)&&!(a[u].e.r<r||a[u].e.c<i)){if(a[u].s.r<r||a[u].s.c<i){l=-1;break}l=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(l<0)){var d=tn({r,c:i}),f=n.dense?(t[r]||[])[i]:t[d],h=f&&f.v!=null&&(f.h||SD(f.w||(ZA(f),f.w)||""))||"",A={};l>1&&(A.rowspan=l),c>1&&(A.colspan=c),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(A["data-t"]=f&&f.t||"z",f.v!=null&&(A["data-v"]=f.v),f.z!=null&&(A["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),A.id=(n.id||"sjs")+"-"+d,s.push(xr("td",h,A))}}var m="<tr>";return m+s.join("")+"</tr>"}var cUe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',uUe="</body></html>";function dUe(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return vm(a$(r[0],e),e);var n=rR();return r.forEach(function(a,s){nR(n,a$(a,e),"Sheet"+(s+1))}),n}function fUe(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function uae(t,e){var r=e||{},n=r.header!=null?r.header:cUe,a=r.footer!=null?r.footer:uUe,s=[n],i=Ec(t["!ref"]);r.dense=Array.isArray(t),s.push(fUe(t,i,r));for(var l=i.s.r;l<=i.e.r;++l)s.push(lUe(t,i,l,r));return s.push("</table>"+a),s.join("")}function dae(t,e,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var i=typeof n.origin=="string"?ks(n.origin):n.origin;a=i.r,s=i.c}var l=e.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(t["!ref"]){var d=Ec(t["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],h=0,A=t["!rows"]||(t["!rows"]=[]),m=0,p=0,g=0,x=0,y=0,b=0;for(t["!cols"]||(t["!cols"]=[]);m<l.length&&p<c;++m){var w=l[m];if(s$(w)){if(n.display)continue;A[p]={hidden:!0}}var j=w.children;for(g=x=0;g<j.length;++g){var I=j[g];if(!(n.display&&s$(I))){var _=I.hasAttribute("data-v")?I.getAttribute("data-v"):I.hasAttribute("v")?I.getAttribute("v"):kre(I.innerHTML),S=I.getAttribute("data-z")||I.getAttribute("z");for(h=0;h<f.length;++h){var E=f[h];E.s.c==x+s&&E.s.r<p+a&&p+a<=E.e.r&&(x=E.e.c+1-s,h=-1)}b=+I.getAttribute("colspan")||1,((y=+I.getAttribute("rowspan")||1)>1||b>1)&&f.push({s:{r:p+a,c:x+s},e:{r:p+a+(y||1)-1,c:x+s+(b||1)-1}});var k={t:"s",v:_},P=I.getAttribute("data-t")||I.getAttribute("t")||"";_!=null&&(_.length==0?k.t=P||"z":n.raw||_.trim().length==0||P=="s"||(_==="TRUE"?k={t:"b",v:!0}:_==="FALSE"?k={t:"b",v:!1}:isNaN(Qd(_))?isNaN(Sv(_).getDate())||(k={t:"d",v:ss(_)},n.cellDates||(k={t:"n",v:no(k.v)}),k.z=n.dateNF||en[14]):k={t:"n",v:Qd(_)})),k.z===void 0&&S!=null&&(k.z=S);var T="",O=I.getElementsByTagName("A");if(O&&O.length)for(var W=0;W<O.length&&!(O[W].hasAttribute("href")&&(T=O[W].getAttribute("href"),T.charAt(0)!="#"));++W);T&&T.charAt(0)!="#"&&(k.l={Target:T}),n.dense?(t[p+a]||(t[p+a]=[]),t[p+a][x+s]=k):t[tn({c:x+s,r:p+a})]=k,u.e.c<x+s&&(u.e.c=x+s),x+=b}}++p}return f.length&&(t["!merges"]=(t["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,p-1+a),t["!ref"]=hn(u),p>=c&&(t["!fullref"]=hn((u.e.r=l.length-m+p-1+a,u))),t}function fae(t,e){var r=e||{},n=r.dense?[]:{};return dae(n,t,e)}function AUe(t,e){return vm(fae(t,e),e)}function s$(t){var e="",r=hUe(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function hUe(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function mUe(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=zn(e.replace(/<[^>]*>/g,""));return[r]}var i$={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function Aae(t,e){var r=e||{},n=ID(t),a=[],s,i,l={name:""},c="",u=0,d,f,h={},A=[],m=r.dense?[]:{},p,g,x={value:""},y="",b=0,w=[],j=-1,I=-1,_={s:{r:1e6,c:1e7},e:{r:0,c:0}},S=0,E={},k=[],P={},T=0,O=0,W=[],Ae=1,de=1,fe=[],ge={Names:[]},ee={},Fe=["",""],Pe=[],F={},Q="",H=0,R=!1,z=!1,J=0;for(N2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");p=N2.exec(n);)switch(p[3]=p[3].replace(/_.*$/,"")){case"table":case"":p[1]==="/"?(_.e.c>=_.s.c&&_.e.r>=_.s.r?m["!ref"]=hn(_):m["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=_.e.r&&(m["!fullref"]=m["!ref"],_.e.r=r.sheetRows-1,m["!ref"]=hn(_)),k.length&&(m["!merges"]=k),W.length&&(m["!rows"]=W),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),A.push(d.name),h[d.name]=m,z=!1):p[0].charAt(p[0].length-2)!=="/"&&(d=nn(p[0],!1),j=I=-1,_.s.r=_.s.c=1e7,_.e.r=_.e.c=0,m=r.dense?[]:{},k=[],W=[],z=!0);break;case"table-row-group":p[1]==="/"?--S:++S;break;case"table-row":case"":if(p[1]==="/"){j+=Ae,Ae=1;break}if(f=nn(p[0],!1),f.?j=f.-1:j==-1&&(j=0),Ae=+f["number-rows-repeated"]||1,Ae<10)for(J=0;J<Ae;++J)S>0&&(W[j+J]={level:S});I=-1;break;case"covered-table-cell":p[1]!=="/"&&++I,r.sheetStubs&&(r.dense?(m[j]||(m[j]=[]),m[j][I]={t:"z"}):m[tn({r:j,c:I})]={t:"z"}),y="",w=[];break;case"table-cell":case"":if(p[0].charAt(p[0].length-2)==="/")++I,x=nn(p[0],!1),de=parseInt(x["number-columns-repeated"]||"1",10),g={t:"z",v:null},x.formula&&r.cellFormula!=!1&&(g.f=t$(zn(x.formula))),(x.||x["value-type"])=="string"&&(g.t="s",g.v=zn(x["string-value"]||""),r.dense?(m[j]||(m[j]=[]),m[j][I]=g):m[tn({r:j,c:I})]=g),I+=de-1;else if(p[1]!=="/"){++I,y="",b=0,w=[],de=1;var D=Ae?j+Ae-1:j;if(I>_.e.c&&(_.e.c=I),I<_.s.c&&(_.s.c=I),j<_.s.r&&(_.s.r=j),D>_.e.r&&(_.e.r=D),x=nn(p[0],!1),Pe=[],F={},g={t:x.||x["value-type"],v:null},r.cellFormula)if(x.formula&&(x.formula=zn(x.formula)),x["number-matrix-columns-spanned"]&&x["number-matrix-rows-spanned"]&&(T=parseInt(x["number-matrix-rows-spanned"],10)||0,O=parseInt(x["number-matrix-columns-spanned"],10)||0,P={s:{r:j,c:I},e:{r:j+T-1,c:I+O-1}},g.F=hn(P),fe.push([P,g.F])),x.formula)g.f=t$(x.formula);else for(J=0;J<fe.length;++J)j>=fe[J][0].s.r&&j<=fe[J][0].e.r&&I>=fe[J][0].s.c&&I<=fe[J][0].e.c&&(g.F=fe[J][1]);switch((x["number-columns-spanned"]||x["number-rows-spanned"])&&(T=parseInt(x["number-rows-spanned"],10)||0,O=parseInt(x["number-columns-spanned"],10)||0,P={s:{r:j,c:I},e:{r:j+T-1,c:I+O-1}},k.push(P)),x["number-columns-repeated"]&&(de=parseInt(x["number-columns-repeated"],10)),g.t){case"boolean":g.t="b",g.v=ts(x["boolean-value"]);break;case"float":g.t="n",g.v=parseFloat(x.value);break;case"percentage":g.t="n",g.v=parseFloat(x.value);break;case"currency":g.t="n",g.v=parseFloat(x.value);break;case"date":g.t="d",g.v=ss(x["date-value"]),r.cellDates||(g.t="n",g.v=no(g.v)),g.z="m/d/yy";break;case"time":g.t="n",g.v=VBe(x["time-value"])/86400,r.cellDates&&(g.t="d",g.v=$4(g.v)),g.z="HH:MM:SS";break;case"number":g.t="n",g.v=parseFloat(x.);break;default:if(g.t==="string"||g.t==="text"||!g.t)g.t="s",x["string-value"]!=null&&(y=zn(x["string-value"]),w=[]);else throw new Error("Unsupported value type "+g.t)}}else{if(R=!1,g.t==="s"&&(g.v=y||"",w.length&&(g.R=w),R=b==0),ee.Target&&(g.l=ee),Pe.length>0&&(g.c=Pe,Pe=[]),y&&r.cellText!==!1&&(g.w=y),R&&(g.t="z",delete g.v),(!R||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=j))for(var U=0;U<Ae;++U){if(de=parseInt(x["number-columns-repeated"]||"1",10),r.dense)for(m[j+U]||(m[j+U]=[]),m[j+U][I]=U==0?g:is(g);--de>0;)m[j+U][I+de]=is(g);else for(m[tn({r:j+U,c:I})]=g;--de>0;)m[tn({r:j+U,c:I+de})]=is(g);_.e.c<=I&&(_.e.c=I)}de=parseInt(x["number-columns-repeated"]||"1",10),I+=de-1,de=0,g={},y="",w=[]}ee={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!0]);break;case"annotation":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s;F.t=y,w.length&&(F.R=w),F.a=Q,Pe.push(F)}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!1]);Q="",H=0,y="",b=0,w=[];break;case"creator":p[1]==="/"?Q=n.slice(H,p.index):H=p.index+p[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!1]);y="",b=0,w=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(p[1]==="/"){if(E[l.name]=c,(s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&(c="",l=nn(p[0],!1),a.push([p[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":i=nn(p[0],!1),c+=i$[p[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":i=nn(p[0],!1),c+=i$[p[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(p[0].slice(-2)==="/>")break;if(p[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,p.index);break}else u=p.index+p[0].length;break;case"named-range":i=nn(p[0],!1),Fe=pP(i["cell-range-address"]);var ne={Name:i.name,Ref:Fe[0]+"!"+Fe[1]};z&&(ne.Sheet=A.length),ge.Names.push(ne);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(p[1]==="/"&&(!x||!x["string-value"])){var ve=mUe(n.slice(b,p.index));y=(y.length>0?y+`
`:"")+ve[0]}else nn(p[0],!1),b=p.index+p[0].length;break;case"s":break;case"database-range":if(p[1]==="/")break;try{Fe=pP(nn(p[0])["target-range-address"]),h[Fe[0]]["!autofilter"]={ref:Fe[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(p[1]!=="/"){if(ee=nn(p[0],!1),!ee.href)break;ee.Target=zn(ee.href),delete ee.href,ee.Target.charAt(0)=="#"&&ee.Target.indexOf(".")>-1?(Fe=pP(ee.Target.slice(1)),ee.Target="#"+Fe[0]+"!"+Fe[1]):ee.Target.match(/^\.\.[\\\/]/)&&(ee.Target=ee.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(p[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(p)}}var L={Sheets:h,SheetNames:A,Workbook:ge};return r.bookSheets&&delete L.Sheets,L}function o$(t,e){e=e||{},Uu(t,"META-INF/manifest.xml")&&VTe(Ei(t,"META-INF/manifest.xml"),e);var r=Jc(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=Aae(Ba(r),e);return Uu(t,"meta.xml")&&(n.Props=nne(Ei(t,"meta.xml"))),n}function l$(t,e){return Aae(t,e)}var pUe=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+w2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return bi+e}}(),c$=function(){var t=function(s){return _a(s).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,i,l){var c=[];c.push('      <table:table table:name="'+_a(i.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,d=0,f=Ec(s["!ref"]||"A1"),h=s["!merges"]||[],A=0,m=Array.isArray(s);if(s["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var p="",g=s["!rows"]||[];for(u=0;u<f.s.r;++u)p=g[u]?' table:style-name="ro'+g[u].ods+'"':"",c.push("        <table:table-row"+p+`></table:table-row>
`);for(;u<=f.e.r;++u){for(p=g[u]?' table:style-name="ro'+g[u].ods+'"':"",c.push("        <table:table-row"+p+`>
`),d=0;d<f.s.c;++d)c.push(e);for(;d<=f.e.c;++d){var x=!1,y={},b="";for(A=0;A!=h.length;++A)if(!(h[A].s.c>d)&&!(h[A].s.r>u)&&!(h[A].e.c<d)&&!(h[A].e.r<u)){(h[A].s.c!=d||h[A].s.r!=u)&&(x=!0),y["table:number-columns-spanned"]=h[A].e.c-h[A].s.c+1,y["table:number-rows-spanned"]=h[A].e.r-h[A].s.r+1;break}if(x){c.push(r);continue}var w=tn({r:u,c:d}),j=m?(s[u]||[])[d]:s[w];if(j&&j.f&&(y["table:formula"]=_a(DRe(j.f)),j.F&&j.F.slice(0,w.length)==w)){var I=Ec(j.F);y["table:number-matrix-columns-spanned"]=I.e.c-I.s.c+1,y["table:number-matrix-rows-spanned"]=I.e.r-I.s.r+1}if(!j){c.push(e);continue}switch(j.t){case"b":b=j.v?"TRUE":"FALSE",y["office:value-type"]="boolean",y["office:boolean-value"]=j.v?"true":"false";break;case"n":b=j.w||String(j.v||0),y["office:value-type"]="float",y["office:value"]=j.v||0;break;case"s":case"str":b=j.v==null?"":j.v,y["office:value-type"]="string";break;case"d":b=j.w||ss(j.v).toISOString(),y["office:value-type"]="date",y["office:date-value"]=ss(j.v).toISOString(),y["table:style-name"]="ce1";break;default:c.push(e);continue}var _=t(b);if(j.l&&j.l.Target){var S=j.l.Target;S=S.charAt(0)=="#"?"#"+RRe(S.slice(1)):S,S.charAt(0)!="#"&&!S.match(/^\w+:/)&&(S="../"+S),_=xr("text:a",_,{"xlink:href":S.replace(/&/g,"&amp;")})}c.push("          "+xr("table:table-cell",xr("text:p",_,{}),y)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(s,i){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var l=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;im(f),f.ods=l;var h=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),s.push(`  </style:style>
`),++l}}});var c=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(i,l){var c=[bi],u=w2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=w2({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(rne().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,i),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=i.SheetNames.length;++f)c.push(n(i.Sheets[i.SheetNames[f]],i,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function hae(t,e){if(e.bookType=="fods")return c$(t,e);var r=CD(),n="",a=[],s=[];return n="mimetype",vn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",vn(r,n,c$(t,e)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",vn(r,n,pUe(t,e)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",vn(r,n,bi+rne()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",vn(r,n,GTe(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",vn(r,n,HTe(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Zp(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Fk(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Ba(xm(t))}function gUe(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):Yc(Bf(t))}function xUe(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function lm(t){var e=t.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(a){r.set(a,n),n+=a.length}),r}function u$(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function vUe(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,a=e+13;a>=e;--a)n=n*256+t[a];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function yUe(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)t[e+s]=a&255;t[e+15]|=r>=0?0:128}function P2(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function va(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function Js(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function Jn(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],a=P2(t,r),s=a&7;a=Math.floor(a/8);var i=0,l;if(a==0)break;switch(s){case 0:{for(var c=r[0];t[r[0]++]>=128;);l=t.slice(c,r[0])}break;case 5:i=4,l=t.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,l=t.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=P2(t,r),l=t.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:l,type:s};e[a]==null?e[a]=[u]:e[a].push(u)}return e}function Ho(t){var e=[];return t.forEach(function(r,n){r.forEach(function(a){a.data&&(e.push(va(n*8+a.type)),a.type==2&&e.push(va(a.data.length)),e.push(a.data))})}),lm(e)}function YD(t,e){return(t==null?void 0:t.map(function(r){return e(r.data)}))||[]}function Fu(t){for(var e,r=[],n=[0];n[0]<t.length;){var a=P2(t,n),s=Jn(t.slice(n[0],n[0]+a));n[0]+=a;var i={id:Js(s[1][0].data),messages:[]};s[2].forEach(function(l){var c=Jn(l.data),u=Js(c[3][0].data);i.messages.push({meta:c,data:t.slice(n[0],n[0]+u)}),n[0]+=u}),(e=s[3])!=null&&e[0]&&(i.merge=Js(s[3][0].data)>>>0>0),r.push(i)}return r}function ax(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:va(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:va(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(i){a.push(i.data),i.meta[3]=[{type:0,data:va(i.data.length)}],n[2].push({data:Ho(i.meta),type:2})});var s=Ho(n);e.push(va(s.length)),e.push(s),a.forEach(function(i){return e.push(i)})}),lm(e)}function bUe(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=P2(e,r),a=[];r[0]<e.length;){var s=e[r[0]]&3;if(s==0){var i=e[r[0]++]>>2;if(i<60)++i;else{var l=i-59;i=e[r[0]],l>1&&(i|=e[r[0]+1]<<8),l>2&&(i|=e[r[0]+2]<<16),l>3&&(i|=e[r[0]+3]<<24),i>>>=0,i++,r[0]+=l}a.push(e.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var c=0,u=0;if(s==1?(u=(e[r[0]]>>2&7)+4,c=(e[r[0]++]&224)<<3,c|=e[r[0]++]):(u=(e[r[0]++]>>2)+1,s==2?(c=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(c=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),a=[lm(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=lm(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Ou(t){for(var e=[],r=0;r<t.length;){var n=t[r++],a=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(bUe(n,t.slice(r,r+a))),r+=a}if(r!==t.length)throw new Error("data is not a valid framed stream!");return lm(e)}function sx(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),a=new Uint8Array(4);e.push(a);var s=va(n),i=s.length;e.push(s),n<=60?(i++,e.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),i+=n,a[0]=0,a[1]=i&255,a[2]=i>>8&255,a[3]=i>>16&255,r+=n}return lm(e)}function wUe(t,e,r,n){var a=Zp(t),s=a.getUint32(4,!0),i=(n>1?12:8)+u$(s&(n>1?3470:398))*4,l=-1,c=-1,u=NaN,d=new Date(2001,0,1);s&512&&(l=a.getUint32(i,!0),i+=4),i+=u$(s&(n>1?12288:4096))*4,s&16&&(c=a.getUint32(i,!0),i+=4),s&32&&(u=a.getFloat64(i,!0),i+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(i,!0)*1e3),i+=8);var f;switch(t[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:e[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(l>-1)f={t:"s",v:r[l]};else if(c>-1)f={t:"s",v:e[c]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return f}function NUe(t,e,r){var n=Zp(t),a=n.getUint32(8,!0),s=12,i=-1,l=-1,c=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(c=vUe(t,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(l=n.getUint32(s,!0),s+=4),a&16&&(i=n.getUint32(s,!0),s+=4);var f;switch(t[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:e[l]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(i>-1)f={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t.slice(0,4)))}return f}function xP(t,e){var r=new Uint8Array(32),n=Zp(r),a=12,s=0;switch(r[0]=5,t.t){case"n":r[1]=2,yUe(r,a,t.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,t.v?1:0,!0),s|=2,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,s,!0),r.slice(0,a)}function vP(t,e){var r=new Uint8Array(32),n=Zp(r),a=12,s=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(a,t.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,t.v?1:0,!0),s|=32,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,s,!0),r.slice(0,a)}function CUe(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return wUe(t,e,r,t[0]);case 5:return NUe(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function Nl(t){var e=Jn(t);return P2(e[1][0].data)}function d$(t,e){var r=Jn(e.data),n=Js(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(i){var l=Jn(i.data),c=Js(l[1][0].data)>>>0;switch(n){case 1:s[c]=Fk(l[3][0].data);break;case 8:{var u=t[Nl(l[9][0].data)][0],d=Jn(u.data),f=t[Nl(d[1][0].data)][0],h=Js(f.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var A=Jn(f.data);s[c]=A[3].map(function(m){return Fk(m.data)}).join("")}break}}),s}function _Ue(t,e){var r,n,a,s,i,l,c,u,d,f,h,A,m,p,g=Jn(t),x=Js(g[1][0].data)>>>0,y=Js(g[2][0].data)>>>0,b=((n=(r=g[8])==null?void 0:r[0])==null?void 0:n.data)&&Js(g[8][0].data)>0||!1,w,j;if((s=(a=g[7])==null?void 0:a[0])!=null&&s.data&&e!=0)w=(l=(i=g[7])==null?void 0:i[0])==null?void 0:l.data,j=(u=(c=g[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(d=g[4])==null?void 0:d[0])!=null&&f.data&&e!=1)w=(A=(h=g[4])==null?void 0:h[0])==null?void 0:A.data,j=(p=(m=g[3])==null?void 0:m[0])==null?void 0:p.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var I=b?4:1,_=Zp(w),S=[],E=0;E<w.length/2;++E){var k=_.getUint16(E*2,!0);k<65535&&S.push([E,k])}if(S.length!=y)throw"Expected ".concat(y," cells, found ").concat(S.length);var P=[];for(E=0;E<S.length-1;++E)P[S[E][0]]=j.subarray(S[E][1]*I,S[E+1][1]*I);return S.length>=1&&(P[S[S.length-1][0]]=j.subarray(S[S.length-1][1]*I)),{R:x,cells:P}}function EUe(t,e){var r,n=Jn(e.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?Js(n[7][0].data)>>>0>0?1:0:-1,s=YD(n[5],function(i){return _Ue(i,a)});return{nrows:Js(n[4][0].data)>>>0,data:s.reduce(function(i,l){return i[l.R]||(i[l.R]=[]),l.cells.forEach(function(c,u){if(i[l.R][u])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(u));i[l.R][u]=c}),i},[])}}function SUe(t,e,r){var n,a=Jn(e.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Js(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(Js(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=hn(s);var i=Jn(a[4][0].data),l=d$(t,t[Nl(i[4][0].data)][0]),c=(n=i[17])!=null&&n[0]?d$(t,t[Nl(i[17][0].data)][0]):[],u=Jn(i[3][0].data),d=0;u[1].forEach(function(f){var h=Jn(f.data),A=t[Nl(h[2][0].data)][0],m=Js(A.meta[1][0].data);if(m!=6002)throw new Error("6001 unexpected reference to ".concat(m));var p=EUe(t,A);p.data.forEach(function(g,x){g.forEach(function(y,b){var w=tn({r:d+x,c:b}),j=CUe(y,l,c);j&&(r[w]=j)})}),d+=p.nrows})}function IUe(t,e){var r=Jn(e.data),n={"!ref":"A1"},a=t[Nl(r[2][0].data)],s=Js(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return SUe(t,a[0],n),n}function jUe(t,e){var r,n=Jn(e.data),a={name:(r=n[1])!=null&&r[0]?Fk(n[1][0].data):"",sheets:[]},s=YD(n[2],Nl);return s.forEach(function(i){t[i].forEach(function(l){var c=Js(l.meta[1][0].data);c==6e3&&a.sheets.push(IUe(t,l))})}),a}function PUe(t,e){var r=rR(),n=Jn(e.data),a=YD(n[1],Nl);if(a.forEach(function(s){t[s].forEach(function(i){var l=Js(i.meta[1][0].data);if(l==2){var c=jUe(t,i);c.sheets.forEach(function(u,d){nR(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function yP(t){var e,r,n,a,s={},i=[];if(t.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=Ou(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=Fu(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){s[f.id]=f.messages,i.push(f.id)})}}),!i.length)throw new Error("File has no messages");var l=((a=(n=(r=(e=s==null?void 0:s[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&Js(s[1][0].meta[1][0].data)==1&&s[1][0];if(l||i.forEach(function(c){s[c].forEach(function(u){var d=Js(u.meta[1][0].data)>>>0;if(d==1)if(!l)l=u;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return PUe(s,l)}function BUe(t,e,r){var n,a,s,i;if(!((n=t[6])!=null&&n[0])||!((a=t[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var l=((i=(s=t[8])==null?void 0:s[0])==null?void 0:i.data)&&Js(t[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=Zp(t[7][0].data),d=0,f=[],h=Zp(t[4][0].data),A=0,m=[],p=0;p<e.length;++p){if(e[p]==null){u.setUint16(p*2,65535,!0),h.setUint16(p*2,65535);continue}u.setUint16(p*2,d,!0),h.setUint16(p*2,A,!0);var g,x;switch(typeof e[p]){case"string":g=xP({t:"s",v:e[p]},r),x=vP({t:"s",v:e[p]},r);break;case"number":g=xP({t:"n",v:e[p]},r),x=vP({t:"n",v:e[p]},r);break;case"boolean":g=xP({t:"b",v:e[p]},r),x=vP({t:"b",v:e[p]},r);break;default:throw new Error("Unsupported value "+e[p])}f.push(g),d+=g.length,m.push(x),A+=x.length,++c}for(t[2][0].data=va(c);p<t[7][0].data.length/2;++p)u.setUint16(p*2,65535,!0),h.setUint16(p*2,65535,!0);return t[6][0].data=lm(f),t[3][0].data=lm(m),c}function TUe(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Ec(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(hn(n)));var s=RS(r,{range:n,header:1}),i=["~Sh33tJ5~"];s.forEach(function(Q){return Q.forEach(function(H){typeof H=="string"&&i.push(H)})});var l={},c=[],u=qr.read(e.numbers,{type:"base64"});u.FileIndex.map(function(Q,H){return[Q,u.FullPaths[H]]}).forEach(function(Q){var H=Q[0],R=Q[1];if(H.type==2&&H.name.match(/\.iwa/)){var z=H.content,J=Ou(z),D=Fu(J);D.forEach(function(U){c.push(U.id),l[U.id]={deps:[],location:R,type:Js(U.messages[0].meta[1][0].data)}})}}),c.sort(function(Q,H){return Q-H});var d=c.filter(function(Q){return Q>1}).map(function(Q){return[Q,va(Q)]});u.FileIndex.map(function(Q,H){return[Q,u.FullPaths[H]]}).forEach(function(Q){var H=Q[0];if(Q[1],!!H.name.match(/\.iwa/)){var R=Fu(Ou(H.content));R.forEach(function(z){z.messages.forEach(function(J){d.forEach(function(D){z.messages.some(function(U){return Js(U.meta[1][0].data)!=11006&&xUe(U.data,D[1])})&&l[D[0]].deps.push(z.id)})})})}});for(var f=qr.find(u,l[1].location),h=Fu(Ou(f.content)),A,m=0;m<h.length;++m){var p=h[m];p.id==1&&(A=p)}var g=Nl(Jn(A.messages[0].data)[1][0].data);for(f=qr.find(u,l[g].location),h=Fu(Ou(f.content)),m=0;m<h.length;++m)p=h[m],p.id==g&&(A=p);for(g=Nl(Jn(A.messages[0].data)[2][0].data),f=qr.find(u,l[g].location),h=Fu(Ou(f.content)),m=0;m<h.length;++m)p=h[m],p.id==g&&(A=p);for(g=Nl(Jn(A.messages[0].data)[2][0].data),f=qr.find(u,l[g].location),h=Fu(Ou(f.content)),m=0;m<h.length;++m)p=h[m],p.id==g&&(A=p);var x=Jn(A.messages[0].data);{x[6][0].data=va(n.e.r+1),x[7][0].data=va(n.e.c+1);var y=Nl(x[46][0].data),b=qr.find(u,l[y].location),w=Fu(Ou(b.content));{for(var j=0;j<w.length&&w[j].id!=y;++j);if(w[j].id!=y)throw"Bad ColumnRowUIDMapArchive";var I=Jn(w[j].messages[0].data);I[1]=[],I[2]=[],I[3]=[];for(var _=0;_<=n.e.c;++_){var S=[];S[1]=S[2]=[{type:0,data:va(_+420690)}],I[1].push({type:2,data:Ho(S)}),I[2].push({type:0,data:va(_)}),I[3].push({type:0,data:va(_)})}I[4]=[],I[5]=[],I[6]=[];for(var E=0;E<=n.e.r;++E)S=[],S[1]=S[2]=[{type:0,data:va(E+726270)}],I[4].push({type:2,data:Ho(S)}),I[5].push({type:0,data:va(E)}),I[6].push({type:0,data:va(E)});w[j].messages[0].data=Ho(I)}b.content=sx(ax(w)),b.size=b.content.length,delete x[46];var k=Jn(x[4][0].data);{k[7][0].data=va(n.e.r+1);var P=Jn(k[1][0].data),T=Nl(P[2][0].data);b=qr.find(u,l[T].location),w=Fu(Ou(b.content));{if(w[0].id!=T)throw"Bad HeaderStorageBucket";var O=Jn(w[0].messages[0].data);for(E=0;E<s.length;++E){var W=Jn(O[2][0].data);W[1][0].data=va(E),W[4][0].data=va(s[E].length),O[2][E]={type:O[2][0].type,data:Ho(W)}}w[0].messages[0].data=Ho(O)}b.content=sx(ax(w)),b.size=b.content.length;var Ae=Nl(k[2][0].data);b=qr.find(u,l[Ae].location),w=Fu(Ou(b.content));{if(w[0].id!=Ae)throw"Bad HeaderStorageBucket";for(O=Jn(w[0].messages[0].data),_=0;_<=n.e.c;++_)W=Jn(O[2][0].data),W[1][0].data=va(_),W[4][0].data=va(n.e.r+1),O[2][_]={type:O[2][0].type,data:Ho(W)};w[0].messages[0].data=Ho(O)}b.content=sx(ax(w)),b.size=b.content.length;var de=Nl(k[4][0].data);(function(){for(var Q=qr.find(u,l[de].location),H=Fu(Ou(Q.content)),R,z=0;z<H.length;++z){var J=H[z];J.id==de&&(R=J)}var D=Jn(R.messages[0].data);{D[3]=[];var U=[];i.forEach(function(L,Ye){U[1]=[{type:0,data:va(Ye)}],U[2]=[{type:0,data:va(1)}],U[3]=[{type:2,data:gUe(L)}],D[3].push({type:2,data:Ho(U)})})}R.messages[0].data=Ho(D);var ne=ax(H),ve=sx(ne);Q.content=ve,Q.size=Q.content.length})();var fe=Jn(k[3][0].data);{var ge=fe[1][0];delete fe[2];var ee=Jn(ge.data);{var Fe=Nl(ee[2][0].data);(function(){for(var Q=qr.find(u,l[Fe].location),H=Fu(Ou(Q.content)),R,z=0;z<H.length;++z){var J=H[z];J.id==Fe&&(R=J)}var D=Jn(R.messages[0].data);{delete D[6],delete fe[7];var U=new Uint8Array(D[5][0].data);D[5]=[];for(var ne=0,ve=0;ve<=n.e.r;++ve){var L=Jn(U);ne+=BUe(L,s[ve],i),L[1][0].data=va(ve),D[5].push({data:Ho(L),type:2})}D[1]=[{type:0,data:va(n.e.c+1)}],D[2]=[{type:0,data:va(n.e.r+1)}],D[3]=[{type:0,data:va(ne)}],D[4]=[{type:0,data:va(n.e.r+1)}]}R.messages[0].data=Ho(D);var Ye=ax(H),ie=sx(Ye);Q.content=ie,Q.size=Q.content.length})()}ge.data=Ho(ee)}k[3][0].data=Ho(fe)}x[4][0].data=Ho(k)}A.messages[0].data=Ho(x);var Pe=ax(h),F=sx(Pe);return f.content=F,f.size=f.content.length,u}function mae(t){return function(r){for(var n=0;n!=t.length;++n){var a=t[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function JD(t){mae([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function ZD(t){mae([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function kUe(t){return Bn.WS.indexOf(t)>-1?"sheet":t==Bn.CS?"chart":t==Bn.DS?"dialog":t==Bn.MS?"macro":t&&t.length?t:"sheet"}function FUe(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,kUe(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function OUe(t,e,r,n,a,s,i,l,c,u,d,f){try{s[n]=wb(Jc(t,r,!0),e);var h=Ei(t,e),A;switch(l){case"sheet":A=nLe(h,e,a,c,s[n],u,d,f);break;case"chart":if(A=aLe(h,e,a,c,s[n],u,d,f),!A||!A["!drawel"])break;var m=Vy(A["!drawel"].Target,e),p=C2(m),g=$6e(Jc(t,m,!0),wb(Jc(t,p,!0),m)),x=Vy(g,m),y=C2(x);A=BMe(Jc(t,x,!0),x,c,wb(Jc(t,y,!0),x),u,A);break;case"macro":A=sLe(h,e,a,c,s[n],u,d,f);break;case"dialog":A=iLe(h,e,a,c,s[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+l)}i[n]=A;var b=[];s&&s[n]&&ei(s[n]).forEach(function(w){var j="";if(s[n][w].Type==Bn.CMNT){j=Vy(s[n][w].Target,e);var I=uLe(Ei(t,j,!0),j,c);if(!I||!I.length)return;XH(A,I,!1)}s[n][w].Type==Bn.TCMNT&&(j=Vy(s[n][w].Target,e),b=b.concat(K6e(Ei(t,j,!0),c)))}),b&&b.length&&XH(A,b,!0,c.people||[])}catch(w){if(c.WTF)throw w}}function ju(t){return t.charAt(0)=="/"?t.slice(1):t}function DUe(t,e){if(o1(),e=e||{},JD(e),Uu(t,"META-INF/manifest.xml")||Uu(t,"objectdata.xml"))return o$(t,e);if(Uu(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof yP<"u"){if(t.FileIndex)return yP(t);var r=qr.utils.cfb_new();return gH(t).forEach(function(W){vn(r,W,qBe(t,W))}),yP(r)}throw new Error("Unsupported NUMBERS file")}if(!Uu(t,"[Content_Types].xml"))throw Uu(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Uu(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=gH(t),a=UTe(Jc(t,"[Content_Types].xml")),s=!1,i,l;if(a.workbooks.length===0&&(l="xl/workbook.xml",Ei(t,l,!0)&&a.workbooks.push(l)),a.workbooks.length===0){if(l="xl/workbook.bin",!Ei(t,l,!0))throw new Error("Could not find workbook");a.workbooks.push(l),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},u={};if(!e.bookSheets&&!e.bookProps){if(Nb=[],a.sst)try{Nb=cLe(Ei(t,ju(a.sst)),a.sst,e)}catch(W){if(e.WTF)throw W}e.cellStyles&&a.themes.length&&(c=lLe(Jc(t,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],e)),a.style&&(u=oLe(Ei(t,ju(a.style)),a.style,c,e))}a.links.map(function(W){try{var Ae=wb(Jc(t,C2(ju(W))),W);return fLe(Ei(t,ju(W)),Ae,W,e)}catch{}});var d=rLe(Ei(t,ju(a.workbooks[0])),a.workbooks[0],e),f={},h="";a.coreprops.length&&(h=Ei(t,ju(a.coreprops[0]),!0),h&&(f=nne(h)),a.extprops.length!==0&&(h=Ei(t,ju(a.extprops[0]),!0),h&&qTe(h,f,e)));var A={};(!e.bookSheets||e.bookProps)&&a.custprops.length!==0&&(h=Jc(t,ju(a.custprops[0]),!0),h&&(A=WTe(h,e)));var m={};if((e.bookSheets||e.bookProps)&&(d.Sheets?i=d.Sheets.map(function(Ae){return Ae.name}):f.Worksheets&&f.SheetNames.length>0&&(i=f.SheetNames),e.bookProps&&(m.Props=f,m.Custprops=A),e.bookSheets&&typeof i<"u"&&(m.SheetNames=i),e.bookSheets?m.SheetNames:e.bookProps))return m;i={};var p={};e.bookDeps&&a.calcchain&&(p=dLe(Ei(t,ju(a.calcchain)),a.calcchain));var g=0,x={},y,b;{var w=d.Sheets;f.Worksheets=w.length,f.SheetNames=[];for(var j=0;j!=w.length;++j)f.SheetNames[j]=w[j].name}var I=s?"bin":"xml",_=a.workbooks[0].lastIndexOf("/"),S=(a.workbooks[0].slice(0,_+1)+"_rels/"+a.workbooks[0].slice(_+1)+".rels").replace(/^\//,"");Uu(t,S)||(S="xl/_rels/workbook."+I+".rels");var E=wb(Jc(t,S,!0),S.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(e.xlmeta=ALe(Ei(t,ju(a.metadata[0])),a.metadata[0],e)),(a.people||[]).length>=1&&(e.people=z6e(Ei(t,ju(a.people[0])),e)),E&&(E=FUe(E,d.Sheets));var k=Ei(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(g=0;g!=f.Worksheets;++g){var P="sheet";if(E&&E[g]?(y="xl/"+E[g][1].replace(/[\/]?xl\//,""),Uu(t,y)||(y=E[g][1]),Uu(t,y)||(y=S.replace(/_rels\/.*$/,"")+E[g][1]),P=E[g][2]):(y="xl/worksheets/sheet"+(g+1-k)+"."+I,y=y.replace(/sheet0\./,"sheet.")),b=y.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(g!=e.sheets)continue e;break;case"string":if(f.SheetNames[g].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var T=!1,O=0;O!=e.sheets.length;++O)typeof e.sheets[O]=="number"&&e.sheets[O]==g&&(T=1),typeof e.sheets[O]=="string"&&e.sheets[O].toLowerCase()==f.SheetNames[g].toLowerCase()&&(T=1);if(!T)continue e}}OUe(t,y,b,f.SheetNames[g],g,x,i,P,e,d,c,u)}return m={Directory:a,Workbook:d,Props:f,Custprops:A,Deps:p,Sheets:i,SheetNames:f.SheetNames,Strings:Nb,Styles:u,Themes:c,SSF:is(en)},e&&e.bookFiles&&(t.files?(m.keys=n,m.files=t.files):(m.keys=[],m.files={},t.FullPaths.forEach(function(W,Ae){W=W.replace(/^Root Entry[\/]/,""),m.keys.push(W),m.files[W]=t.FileIndex[Ae]}))),e&&e.bookVBA&&(a.vba.length>0?m.vbaraw=Ei(t,ju(a.vba[0]),!0):a.defaults&&a.defaults.bin===rDe&&(m.vbaraw=Ei(t,"xl/vbaProject.bin",!0))),m}function RUe(t,e){var r=e||{},n="Workbook",a=qr.find(t,n);try{if(n="/!DataSpaces/Version",a=qr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(AOe(a.content),n="/!DataSpaces/DataSpaceMap",a=qr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=mOe(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=qr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=pOe(a.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=qr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);xOe(a.content)}catch{}if(n="/EncryptionInfo",a=qr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=vOe(a.content);if(n="/EncryptedPackage",a=qr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],a.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function MUe(t,e){return e.bookType=="ods"?hae(t,e):e.bookType=="numbers"?TUe(t,e):e.bookType=="xlsb"?LUe(t,e):UUe(t,e)}function LUe(t,e){Vx=1024,t&&!t.SSF&&(t.SSF=is(en)),t&&t.SSF&&(o1(),Q4(t.SSF),e.revssf=H4(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Cb?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=Vne.indexOf(e.bookType)>-1,a=MD();ZD(e=e||{});var s=CD(),i="",l=0;if(e.cellXfs=[],ym(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",vn(s,i,ane(t.Props,e)),a.coreprops.push(i),ba(e.rels,2,i,Bn.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}for(t.Props.Worksheets=t.Props.SheetNames.length,vn(s,i,one(t.Props)),a.extprops.push(i),ba(e.rels,3,i,Bn.EXT_PROPS),t.Custprops!==t.Props&&ei(t.Custprops||{}).length>0&&(i="docProps/custom.xml",vn(s,i,lne(t.Custprops)),a.custprops.push(i),ba(e.rels,4,i,Bn.CUST_PROPS)),l=1;l<=t.SheetNames.length;++l){var d={"!id":{}},f=t.Sheets[t.SheetNames[l-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:i="xl/worksheets/sheet"+l+"."+r,vn(s,i,mLe(l-1,i,e,t,d)),a.sheets.push(i),ba(e.wbrels,-1,"worksheets/sheet"+l+"."+r,Bn.WS[0])}if(f){var A=f["!comments"],m=!1,p="";A&&A.length>0&&(p="xl/comments"+l+"."+r,vn(s,p,xLe(A,p)),a.comments.push(p),ba(d,-1,"../comments"+l+"."+r,Bn.CMNT),m=!0),f["!legacy"]&&m&&vn(s,"xl/drawings/vmlDrawing"+l+".vml",Une(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&vn(s,C2(i),nv(d))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+r,vn(s,i,gLe(e.Strings,i,e)),a.strs.push(i),ba(e.wbrels,-1,"sharedStrings."+r,Bn.SST)),i="xl/workbook."+r,vn(s,i,hLe(t,i)),a.workbooks.push(i),ba(e.rels,1,i,Bn.WB),i="xl/theme/theme1.xml",vn(s,i,$D(t.Themes,e)),a.themes.push(i),ba(e.wbrels,-1,"theme/theme1.xml",Bn.THEME),i="xl/styles."+r,vn(s,i,pLe(t,i,e)),a.styles.push(i),ba(e.wbrels,-1,"styles."+r,Bn.STY),t.vbaraw&&n&&(i="xl/vbaProject.bin",vn(s,i,t.vbaraw),a.vba.push(i),ba(e.wbrels,-1,"vbaProject.bin",Bn.VBA)),i="xl/metadata."+r,vn(s,i,vLe(i)),a.metadata.push(i),ba(e.wbrels,-1,"metadata."+r,Bn.XLMETA),vn(s,"[Content_Types].xml",tne(a,e)),vn(s,"_rels/.rels",nv(e.rels)),vn(s,"xl/_rels/workbook."+r+".rels",nv(e.wbrels)),delete e.revssf,delete e.ssf,s}function UUe(t,e){Vx=1024,t&&!t.SSF&&(t.SSF=is(en)),t&&t.SSF&&(o1(),Q4(t.SSF),e.revssf=H4(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Cb?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=Vne.indexOf(e.bookType)>-1,a=MD();ZD(e=e||{});var s=CD(),i="",l=0;if(e.cellXfs=[],ym(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",vn(s,i,ane(t.Props,e)),a.coreprops.push(i),ba(e.rels,2,i,Bn.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}t.Props.Worksheets=t.Props.SheetNames.length,vn(s,i,one(t.Props)),a.extprops.push(i),ba(e.rels,3,i,Bn.EXT_PROPS),t.Custprops!==t.Props&&ei(t.Custprops||{}).length>0&&(i="docProps/custom.xml",vn(s,i,lne(t.Custprops)),a.custprops.push(i),ba(e.rels,4,i,Bn.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,l=1;l<=t.SheetNames.length;++l){var f={"!id":{}},h=t.Sheets[t.SheetNames[l-1]],A=(h||{})["!type"]||"sheet";switch(A){case"chart":default:i="xl/worksheets/sheet"+l+"."+r,vn(s,i,Zne(l-1,e,t,f)),a.sheets.push(i),ba(e.wbrels,-1,"worksheets/sheet"+l+"."+r,Bn.WS[0])}if(h){var m=h["!comments"],p=!1,g="";if(m&&m.length>0){var x=!1;m.forEach(function(y){y[1].forEach(function(b){b.T==!0&&(x=!0)})}),x&&(g="xl/threadedComments/threadedComment"+l+"."+r,vn(s,g,q6e(m,d,e)),a.threadedcomments.push(g),ba(f,-1,"../threadedComments/threadedComment"+l+"."+r,Bn.TCMNT)),g="xl/comments"+l+"."+r,vn(s,g,Qne(m)),a.comments.push(g),ba(f,-1,"../comments"+l+"."+r,Bn.CMNT),p=!0}h["!legacy"]&&p&&vn(s,"xl/drawings/vmlDrawing"+l+".vml",Une(l,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&vn(s,C2(i),nv(f))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+r,vn(s,i,Ine(e.Strings,e)),a.strs.push(i),ba(e.wbrels,-1,"sharedStrings."+r,Bn.SST)),i="xl/workbook."+r,vn(s,i,aae(t)),a.workbooks.push(i),ba(e.rels,1,i,Bn.WB),i="xl/theme/theme1.xml",vn(s,i,$D(t.Themes,e)),a.themes.push(i),ba(e.wbrels,-1,"theme/theme1.xml",Bn.THEME),i="xl/styles."+r,vn(s,i,Dne(t,e)),a.styles.push(i),ba(e.wbrels,-1,"styles."+r,Bn.STY),t.vbaraw&&n&&(i="xl/vbaProject.bin",vn(s,i,t.vbaraw),a.vba.push(i),ba(e.wbrels,-1,"vbaProject.bin",Bn.VBA)),i="xl/metadata."+r,vn(s,i,Lne()),a.metadata.push(i),ba(e.wbrels,-1,"metadata."+r,Bn.XLMETA),d.length>1&&(i="xl/persons/person.xml",vn(s,i,W6e(d)),a.people.push(i),ba(e.wbrels,-1,"persons/person.xml",Bn.PEOPLE)),vn(s,"[Content_Types].xml",tne(a,e)),vn(s,"_rels/.rels",nv(e.rels)),vn(s,"xl/_rels/workbook."+r+".rels",nv(e.wbrels)),delete e.revssf,delete e.ssf,s}function eR(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=uu(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function QUe(t,e){return qr.find(t,"EncryptedPackage")?RUe(t,e):lae(t,e)}function VUe(t,e){var r,n=t,a=e||{};return a.type||(a.type=En&&Buffer.isBuffer(t)?"buffer":"base64"),r=Pre(n,a),DUe(r,a)}function pae(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return Tk(t.slice(r),e);default:break e}return Iv.to_workbook(t,e)}function HUe(t,e){var r="",n=eR(t,e);switch(e.type){case"base64":r=uu(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=Wp(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Ba(r)),e.type="binary",pae(r,e)}function $Ue(t,e){var r=t;return e.type=="base64"&&(r=uu(r)),r=x2.utils.decode(1200,r.slice(2),"str"),e.type="binary",pae(r,e)}function GUe(t){return t.match(/[^\x00-\x7F]/)?Bf(t):t}function bP(t,e,r,n){return n?(r.type="string",Iv.to_workbook(t,r)):Iv.to_workbook(e,r)}function B2(t,e){vD();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return B2(new Uint8Array(t),(r=is(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),sv={},r.dateNF&&(sv.dateNF=r.dateNF),r.type||(r.type=En&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=En?"buffer":"binary",n=LBe(t),typeof Uint8Array<"u"&&!En&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=GUe(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),l=new Uint8Array(i);if(l.foo="bar",!l.foo)return r=is(r),r.type="array",B2(yD(n),r)}switch((a=eR(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return QUe(qr.read(n,r),r);break;case 9:if(a[1]<=8)return lae(n,r);break;case 60:return Tk(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return XFe(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return Ene.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?VUe(n,r):bP(t,n,r,s);case 239:return a[3]===60?Tk(n,r):bP(t,n,r,s);case 255:if(a[1]===254)return $Ue(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return _p.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return _p.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return Bk.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return kne.to_workbook(n,r);break;case 10:case 13:case 32:return HUe(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return WFe.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?Bk.to_workbook(n,r):bP(t,n,r,s)}function gae(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return Ew(e.file,qr.write(t,{type:En?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return qr.write(t,e)}function KUe(t,e){var r=is(e||{}),n=MUe(t,r);return qUe(n,r)}function qUe(t,e){var r={},n=En?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var a=t.FullPaths?qr.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(e.type=="binary"||e.type=="base64")return a;a=new Uint8Array(U4(a))}return e.password&&typeof encrypt_agile<"u"?gae(encrypt_agile(a,e.password),e):e.type==="file"?Ew(e.file,a):e.type=="string"?Ba(a):a}function zUe(t,e){var r=e||{},n=GLe(t,r);return gae(n,r)}function bf(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return v2(Bf(n));case"binary":return Bf(n);case"string":return t;case"file":return Ew(e.file,n,"utf8");case"buffer":return En?hh(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):bf(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function WUe(t,e){switch(e.type){case"base64":return v2(t);case"binary":return t;case"string":return t;case"file":return Ew(e.file,t,"binary");case"buffer":return En?hh(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function zC(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?v2(r):e.type=="string"?Ba(r):r;case"file":return Ew(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function W4(t,e){vD(),QMe(t);var r=is(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=W4(t,r);return r.type="array",U4(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=t.SheetNames.indexOf(r.sheet),!t.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return bf(MLe(t,r),r);case"slk":case"sylk":return bf(_ne.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"htm":case"html":return bf(uae(t.Sheets[t.SheetNames[a]],r),r);case"txt":return WUe(xae(t.Sheets[t.SheetNames[a]],r),r);case"csv":return bf(tR(t.Sheets[t.SheetNames[a]],r),r,"\uFEFF");case"dif":return bf(Ene.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"dbf":return zC(Bk.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"prn":return bf(Iv.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"rtf":return bf(kne.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"eth":return bf(Sne.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"fods":return bf(hae(t,r),r);case"wk1":return zC(_p.sheet_to_wk1(t.Sheets[t.SheetNames[a]],r),r);case"wk3":return zC(_p.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),zC(cae(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),zUe(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return KUe(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function XUe(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function Ok(t,e,r){var n={};return n.type="file",n.file=e,XUe(n),W4(t,n)}function YUe(t,e,r,n,a,s,i,l){var c=vi(r),u=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),f=!0,h=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!i||t[r])for(var A=e.s.c;A<=e.e.c;++A){var m=i?t[r][A]:t[n[A]+c];if(m===void 0||m.t===void 0){if(u===void 0)continue;s[A]!=null&&(h[s[A]]=u);continue}var p=m.v;switch(m.t){case"z":if(p==null)break;continue;case"e":p=p==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+m.t)}if(s[A]!=null){if(p==null)if(m.t=="e"&&p===null)h[s[A]]=null;else if(u!==void 0)h[s[A]]=u;else if(d&&p===null)h[s[A]]=null;else continue;else h[s[A]]=d&&(m.t!=="n"||m.t==="n"&&l.rawNumbers!==!1)?p:ZA(m,p,l);p!=null&&(f=!1)}}return{row:h,isempty:f}}function RS(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],i=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},d=u.range!=null?u.range:t["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=Wn(d);break;case"number":c=Wn(t["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var f=vi(c.s.r),h=[],A=[],m=0,p=0,g=Array.isArray(t),x=c.s.r,y=0,b={};g&&!t[x]&&(t[x]=[]);var w=u.skipHidden&&t["!cols"]||[],j=u.skipHidden&&t["!rows"]||[];for(y=c.s.c;y<=c.e.c;++y)if(!(w[y]||{}).hidden)switch(h[y]=Ts(y),r=g?t[x][y]:t[h[y]+f],n){case 1:s[y]=y-c.s.c;break;case 2:s[y]=h[y];break;case 3:s[y]=u.header[y-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=i=ZA(r,null,u),p=b[i]||0,!p)b[i]=1;else{do l=i+"_"+p++;while(b[l]);b[i]=p,b[l]=1}s[y]=l}for(x=c.s.r+a;x<=c.e.r;++x)if(!(j[x]||{}).hidden){var I=YUe(t,c,x,h,n,s,g,u);(I.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(A[m++]=I.row)}return A.length=m,A}var f$=/"/g;function JUe(t,e,r,n,a,s,i,l){for(var c=!0,u=[],d="",f=vi(r),h=e.s.c;h<=e.e.c;++h)if(n[h]){var A=l.dense?(t[r]||[])[h]:t[n[h]+f];if(A==null)d="";else if(A.v!=null){c=!1,d=""+(l.rawNumbers&&A.t=="n"?A.v:ZA(A,null,l));for(var m=0,p=0;m!==d.length;++m)if((p=d.charCodeAt(m))===a||p===s||p===34||l.forceQuotes){d='"'+d.replace(f$,'""')+'"';break}d=="ID"&&(d='"ID"')}else A.f!=null&&!A.F?(c=!1,d="="+A.f,d.indexOf(",")>=0&&(d='"'+d.replace(f$,'""')+'"')):d="";u.push(d)}return l.blankrows===!1&&c?null:u.join(i)}function tR(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var a=Wn(t["!ref"]),s=n.FS!==void 0?n.FS:",",i=s.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",f=[];n.dense=Array.isArray(t);for(var h=n.skipHidden&&t["!cols"]||[],A=n.skipHidden&&t["!rows"]||[],m=a.s.c;m<=a.e.c;++m)(h[m]||{}).hidden||(f[m]=Ts(m));for(var p=0,g=a.s.r;g<=a.e.r;++g)(A[g]||{}).hidden||(d=JUe(t,a,g,f,i,c,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((p++?l:"")+d)));return delete n.dense,r.join("")}function xae(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=tR(t,e);return r}function ZUe(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var a=Wn(t["!ref"]),s="",i=[],l,c=[],u=Array.isArray(t);for(l=a.s.c;l<=a.e.c;++l)i[l]=Ts(l);for(var d=a.s.r;d<=a.e.r;++d)for(s=vi(d),l=a.s.c;l<=a.e.c;++l)if(e=i[l]+s,r=u?(t[d]||[])[l]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=e+"="+n}return c}function vae(t,e,r){var n=r||{},a=+!n.skipHeader,s=t||{},i=0,l=0;if(s&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?ks(n.origin):n.origin;i=c.r,l=c.c}var u,d={s:{c:0,r:0},e:{c:l,r:i+e.length-1+a}};if(s["!ref"]){var f=Wn(s["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),i==-1&&(i=f.e.r+1,d.e.r=i+e.length-1+a)}else i==-1&&(i=0,d.e.r=e.length-1+a);var h=n.header||[],A=0;e.forEach(function(p,g){ei(p).forEach(function(x){(A=h.indexOf(x))==-1&&(h[A=h.length]=x);var y=p[x],b="z",w="",j=tn({c:l+A,r:i+g+a});u=T2(s,j),y&&typeof y=="object"&&!(y instanceof Date)?s[j]=y:(typeof y=="number"?b="n":typeof y=="boolean"?b="b":typeof y=="string"?b="s":y instanceof Date?(b="d",n.cellDates||(b="n",y=no(y)),w=n.dateNF||en[14]):y===null&&n.nullError&&(b="e",y=0),u?(u.t=b,u.v=y,delete u.w,delete u.R,w&&(u.z=w)):s[j]=u={t:b,v:y},w&&(u.z=w))})}),d.e.c=Math.max(d.e.c,l+h.length-1);var m=vi(i);if(a)for(A=0;A<h.length;++A)s[Ts(A+l)+m]={t:"s",v:h[A]};return s["!ref"]=hn(d),s}function e7e(t,e){return vae(null,t,e)}function T2(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=ks(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?T2(t,tn(e)):T2(t,tn({r:e,c:r||0}))}function t7e(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function rR(){return{SheetNames:[],Sheets:{}}}function nR(t,e,r,n){var a=1;if(!r)for(;a<=65535&&t.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var i=s&&s[1]||r;for(++a;a<=65535&&t.SheetNames.indexOf(r=i+a)!=-1;++a);}if(nae(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function r7e(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=t7e(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function n7e(t,e){return t.z=e,t}function yae(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function a7e(t,e,r){return yae(t,"#"+e,r)}function s7e(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function i7e(t,e,r,n){for(var a=typeof e!="string"?e:Wn(e),s=typeof e=="string"?e:hn(e),i=a.s.r;i<=a.e.r;++i)for(var l=a.s.c;l<=a.e.c;++l){var c=T2(t,i,l);c.t="n",c.F=s,delete c.v,i==a.s.r&&l==a.s.c&&(c.f=r,n&&(c.D=!0))}return t}var js={encode_col:Ts,encode_row:vi,encode_cell:tn,encode_range:hn,decode_col:TD,decode_row:BD,split_cell:gTe,decode_cell:ks,decode_range:Ec,format_cell:ZA,sheet_add_aoa:zre,sheet_add_json:vae,sheet_add_dom:dae,aoa_to_sheet:l1,json_to_sheet:e7e,table_to_sheet:fae,table_to_book:AUe,sheet_to_csv:tR,sheet_to_txt:xae,sheet_to_json:RS,sheet_to_html:uae,sheet_to_formulae:ZUe,sheet_to_row_object_array:RS,sheet_get_cell:T2,book_new:rR,book_append_sheet:nR,book_set_sheet_visibility:r7e,cell_set_number_format:n7e,cell_set_hyperlink:yae,cell_set_internal_link:a7e,cell_add_comment:s7e,sheet_set_array_formula:i7e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const wP=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Qa(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function gA(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function Zh(t,e=1){const r=Math.floor(gA(t,e));return r>0?r:e}function o7e(t){return Object.values(t||{}).every(r=>Qa(r)==="")}function Om(t,e){const r=Object.keys(t||{}),n=new Map;r.forEach(a=>n.set(Qa(a),a));for(const a of e){const s=n.get(Qa(a));if(s!=null)return t[s]}}function l7e({open:t,code:e,onClose:r}){return t?o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-3",children:o.jsxs("div",{className:"bg-white w-full max-w-sm rounded-2xl shadow-lg border p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("div",{className:"font-bold text-lg",children:"Cdigo de barras"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:r,type:"button",children:"Cerrar"})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-3",children:[o.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Valor"}),o.jsx("div",{className:"text-xl font-mono font-semibold break-all",children:e})]}),o.jsx("div",{className:"mt-3 flex gap-2 justify-end",children:o.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:()=>{var n;try{(n=navigator.clipboard)==null||n.writeText(e)}catch{}},children:"Copiar"})})]})}):null}function c7e({open:t,onClose:e,onDetected:r}){const n=v.useRef(null),a=v.useRef(null),[s,i]=v.useState(""),l=v.useRef("");return v.useEffect(()=>{if(!t)return;let c=!1;const u=new g2,d=()=>{var h,A,m;try{(h=a.current)==null||h.stop()}catch{}a.current=null;try{const p=(A=n.current)==null?void 0:A.srcObject;(m=p==null?void 0:p.getTracks)==null||m.call(p).forEach(g=>g.stop())}catch{}try{n.current&&(n.current.srcObject=null)}catch{}};return(async()=>{i("");try{if(!n.current)return;try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(m=>m.stop())}catch{}const h=await u.decodeFromConstraints({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}},audio:!1},n.current,A=>{if(!c&&A){const m=String(A.getText()||"").trim().replace(/\s+/g,"");if(!m||m===l.current)return;l.current=m,d(),r(m),e()}});a.current=h}catch(h){const A=String((h==null?void 0:h.message)||""),m=String((h==null?void 0:h.name)||"");A.toLowerCase().includes("permission")||m==="NotAllowedError"?i("Permiso de cmara denegado."):m==="NotFoundError"||A.toLowerCase().includes("notfound")?i("No se encontr cmara en este dispositivo."):A.toLowerCase().includes("secure")||A.toLowerCase().includes("https")?i("La cmara requiere HTTPS (sitio seguro)."):i(A||"No se pudo iniciar el escner.")}})(),()=>{c=!0,d()}},[t,e,r]),t?o.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 p-3 flex items-center justify-center",children:o.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-lg border overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[o.jsx("div",{className:"font-bold",children:"Escanear cdigo"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:e,type:"button",children:"Cerrar"})]}),o.jsxs("div",{className:"p-3",children:[o.jsxs("div",{className:"relative w-full aspect-[3/4] bg-black rounded-xl overflow-hidden",children:[o.jsx("video",{ref:n,className:"w-full h-full object-cover",muted:!0,playsInline:!0,autoPlay:!0}),o.jsx("div",{className:"absolute inset-0 pointer-events-none",children:o.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[85%] h-40 border-2 border-white/70 rounded-xl"})})]}),s&&o.jsx("div",{className:"mt-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2",children:s}),o.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Apunt al cdigo de barras y mantenelo estable."})]})]})}):null}function u7e(){const{refreshKey:t,refresh:e}=jc(),[r,n]=v.useState(!0),[a,s]=v.useState(""),[i,l]=v.useState([]),[c,u]=v.useState(""),[d,f]=v.useState(""),[h,A]=v.useState(0),[m,p]=v.useState(1),[g,x]=v.useState(""),[y,b]=v.useState(""),[w,j]=v.useState(null),[I,_]=v.useState(""),[S,E]=v.useState(""),[k,P]=v.useState(0),[T,O]=v.useState(1),[W,Ae]=v.useState(""),[de,fe]=v.useState(""),[ge,ee]=v.useState(""),[Fe,Pe]=v.useState(""),[F,Q]=v.useState(""),[H,R]=v.useState(!1),[z,J]=v.useState(""),[D,U]=v.useState(!1),[ne,ve]=v.useState("create"),[L,Ye]=v.useState(!1),[ie,Z]=v.useState(""),[Oe,le]=v.useState([]),[se,Be]=v.useState([]),[je,ot]=v.useState(!1),[mt,ut]=v.useState(!1);v.useEffect(()=>{var G;const qe=window.matchMedia("(max-width: 900px)"),bt=()=>ut(qe.matches);return bt(),(G=qe.addEventListener)==null||G.call(qe,"change",bt),()=>{var te;return(te=qe.removeEventListener)==null?void 0:te.call(qe,"change",bt)}},[]);const[_e,rt]=v.useState(!0),[we,Ce]=v.useState(!0);v.useEffect(()=>{mt?(rt(!1),Ce(!1)):(rt(!0),Ce(!0))},[mt]);const[Ue,Ve]=v.useState(null);v.useEffect(()=>{n(!0),s("");const qe=pt(Ge,"products_candies"),bt=tr(qe,ln("name","asc")),G=qd(bt,te=>{const He=[],re={};te.forEach(tt=>{const lt=tt.data(),ae=String(lt.barcode||"").trim()||void 0;ae&&(re[tt.id]=ae),He.push({id:tt.id,name:lt.name||"",category:lt.category||"",providerPrice:Number(lt.providerPrice||0),unitsPerPackage:Number(lt.unitsPerPackage||1),barcode:ae,packaging:String(lt.packaging||lt.empaque||"").trim()||void 0,createdAt:lt.createdAt})});const be=ue.current||{};let Me=!1;for(const tt of Object.keys(re))if((re[tt]||"")!==(be[tt]||"")){Me=!0;break}l(He),ue.current=re,n(!1),!ce.current&&Me&&(s(" Catlogo actualizado."),setTimeout(()=>s(""),3e3)),ce.current=!1},te=>{console.error(te),s(" Error sincronizando catlogo de dulces."),n(!1)});return()=>G()},[t]);const ue=v.useRef({}),ce=v.useRef(!0),Te=v.useMemo(()=>{const qe=Qa(ge),bt=String(Fe||"").trim(),G=String(F||"").trim().toLowerCase();return G?i.filter(te=>String(te.packaging||"").trim().toLowerCase()===G):!qe&&!bt?i:i.filter(te=>{const He=`${te.category} ${te.name}`.toLowerCase(),re=qe?He.includes(qe):!0,be=String(te.barcode||""),Me=bt?be.includes(bt):!0;return re&&Me})},[i,ge,Fe,F]),Xe=v.useMemo(()=>{const qe=new Set;return i.forEach(bt=>{const G=String(bt.category||"").trim();G&&qe.add(G)}),Array.from(qe).sort((bt,G)=>bt.localeCompare(G,"es"))},[i]),ft=()=>{u(""),f(""),A(0),p(1),x(""),b("")},gt=async qe=>{qe.preventDefault(),s("");const bt=String(c||"").trim(),G=String(d||"").trim(),te=Math.max(0,gA(h,0)),He=Zh(m,1),re=String(g||"").trim();if(!bt)return s(" La categora es requerida.");if(!G)return s(" El nombre del producto es requerido.");if(te<=0)return s(" El precio proveedor debe ser > 0.");if(He<=0)return s(" Und x paquete debe ser > 0.");if(i.some(Me=>Qa(Me.category)===Qa(bt)&&Qa(Me.name)===Qa(G)))return s(" Ya existe un producto con esa categora y nombre.");if(re&&i.some(tt=>String(tt.barcode||"")===re))return s(" Ya existe un producto con ese cdigo de barras.");try{n(!0);const Me={category:bt,name:G,providerPrice:te,unitsPerPackage:He,createdAt:or.now()};re&&(Me.barcode=re);const tt=String(y||"").trim();tt&&(Me.packaging=tt);const lt=await wn(pt(Ge,"products_candies"),Me);l(ae=>[...ae,{id:lt.id,...Me}].sort((V,X)=>V.name.localeCompare(X.name,"es"))),s(" Producto creado."),ft()}catch(Me){console.error(Me),s(" Error creando producto.")}finally{n(!1)}},vt=qe=>{j(qe.id),_(qe.category),E(qe.name),P(qe.providerPrice),O(qe.unitsPerPackage||1),Ae(String(qe.barcode||"")),fe(String(qe.packaging||"")),s("")},At=()=>{j(null),_(""),E(""),P(0),O(1),Ae(""),fe("")},ye=async()=>{if(!w)return;s("");const qe=String(I||"").trim(),bt=String(S||"").trim(),G=Math.max(0,gA(k,0)),te=Zh(T,1),He=String(W||"").trim(),re=String(de||"").trim();if(!qe)return s(" La categora es requerida.");if(!bt)return s(" El nombre del producto es requerido.");if(G<=0)return s(" El precio proveedor debe ser > 0.");if(te<=0)return s(" Und x paquete debe ser > 0.");if(i.some(Me=>Me.id!==w&&Qa(Me.category)===Qa(qe)&&Qa(Me.name)===Qa(bt)))return s(" Ya existe otro producto con esa categora y nombre.");if(He&&i.some(tt=>tt.id!==w&&String(tt.barcode||"")===He))return s(" Ya existe otro producto con ese cdigo de barras.");try{n(!0);const Me={category:qe,name:bt,providerPrice:G,unitsPerPackage:te,updatedAt:or.now()};Me.barcode=He||"",Me.packaging=re||"",await rn(Kt(Ge,"products_candies",w),Me),l(tt=>tt.map(lt=>lt.id===w?{...lt,category:qe,name:bt,providerPrice:G,unitsPerPackage:te,barcode:He||void 0,packaging:re||void 0}:lt).sort((lt,ae)=>lt.name.localeCompare(ae.name,"es"))),mt&&s(" Producto guardado."),At()}catch(Me){console.error(Me),s(" Error actualizando producto.")}finally{n(!1)}},$e=async qe=>{if(confirm(`Eliminar "${qe.name}" (${qe.category}) del catlogo?`))try{n(!0),await yn(Kt(Ge,"products_candies",qe.id)),l(G=>G.filter(te=>te.id!==qe.id)),s(" Producto eliminado.")}catch(G){console.error(G),s(" Error eliminando producto.")}finally{n(!1)}},Ne=()=>{const qe=[{Id:"",Categoria:"Gomitas",Producto:"Gomita Fresa",PrecioProveedor:120,UnidadesPorPaquete:24,Empaque:"Tarro",Codigo:"7445074183182"}],bt=js.json_to_sheet(qe),G=js.book_new();js.book_append_sheet(G,bt,"Productos");const te=W4(G,{type:"array",bookType:"xlsx"}),He=new Blob([te],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),re=URL.createObjectURL(He),be=document.createElement("a");be.href=re,be.download="template_productos_dulces.xlsx",document.body.appendChild(be),be.click(),be.remove(),URL.revokeObjectURL(re)},ct=qe=>{const bt=[],G=[];qe.forEach((He,re)=>{if(!He||typeof He!="object"||o7e(He))return;const be=String(Om(He,["Id","ID","productId","docId"])??"").trim(),Me=String(Om(He,["Categoria","Categora","Category","cat","category"])??"").trim(),tt=String(Om(He,["Producto","Product","Nombre","Name","producto","name"])??"").trim(),lt=Om(He,["PrecioProveedor","Precio Prov","Precio Prov.","ProviderPrice","Precio","Costo","providerPrice"]),ae=Om(He,["UnidadesPorPaquete","Und x Paquete","UnitsPerPackage","UPP","unitsPerPackage"]),V=Om(He,["Codigo","Cdigo","Barcode","barcode","EAN","UPC","Code"]),X=String(V??"").trim(),me=Om(He,["Empaque","Packaging","PackagingType","Pack","Formato"]),Ie=String(me??"").trim(),Y=Math.max(0,gA(lt,0)),pe=Zh(ae,1),ke=re+2;Me||G.push(`Fila ${ke}: falta Categoria.`),tt||G.push(`Fila ${ke}: falta Producto/Nombre.`),Y<=0&&G.push(`Fila ${ke}: PrecioProveedor debe ser > 0.`),pe<=0&&G.push(`Fila ${ke}: UnidadesPorPaquete debe ser > 0.`),Me&&tt&&Y>0&&pe>0&&bt.push({id:be||void 0,category:Me,name:tt,providerPrice:Y,unitsPerPackage:pe,barcode:X||void 0,packaging:Ie||void 0,_raw:He})});const te=new Map;for(const He of bt){const re=He.id?`id::${He.id}`:`${Qa(He.category)}::${Qa(He.name)}`;te.set(re,He)}return{rows:Array.from(te.values()),errors:G}},xe=async qe=>{if(s(""),Be([]),le([]),Z((qe==null?void 0:qe.name)||""),!qe)return;const bt=qe.name.toLowerCase(),G=bt.endsWith(".xlsx")||bt.endsWith(".xls"),te=bt.endsWith(".csv");if(!G&&!te){Be(["Solo se permiten archivos .xlsx, .xls o .csv"]);return}try{ot(!0);const He=new FileReader,re=await new Promise((X,me)=>{He.onerror=()=>me(new Error("No se pudo leer el archivo.")),He.onload=()=>X(He.result),He.readAsArrayBuffer(qe)}),be=B2(new Uint8Array(re),{type:"array"}),Me=be.SheetNames[0],tt=be.Sheets[Me],lt=js.sheet_to_json(tt,{defval:""}),{rows:ae,errors:V}=ct(lt);le(ae),Be(V),ae.length===0&&V.length===0&&Be(["No se encontraron filas vlidas para importar."])}catch(He){console.error(He),Be(["Error leyendo el archivo. Revis que no est corrupto."])}finally{ot(!1)}},Qe=(qe,bt)=>{le(G=>{const te=[...G],He=te[qe];return He?(te[qe]={...He,...bt},te):G})},dt=async()=>{if(s(""),se.length>0){s(" Correg los errores antes de importar.");return}if(Oe.length===0){s(" No hay filas para importar.");return}try{ot(!0);const qe={},bt={},G={};i.forEach(be=>{qe[be.id]=be,bt[`${Qa(be.category)}::${Qa(be.name)}`]=be;const Me=String(be.barcode||"").trim();Me&&(G[Me]=be)});const te=pg(Ge);let He=0,re=0;for(const be of Oe){const Me=String(be.category||"").trim(),tt=String(be.name||"").trim(),lt=Math.max(0,gA(be.providerPrice,0)),ae=Zh(be.unitsPerPackage,1),V=String(be.barcode||"").trim();if(!Me||!tt||lt<=0||ae<=0)continue;let X;if(be.id&&qe[be.id])X=qe[be.id];else{const me=`${Qa(Me)}::${Qa(tt)}`;X=bt[me]}if(!X&&V&&G[V]&&(X=G[V]),X){const me={category:Me,name:tt,providerPrice:lt,unitsPerPackage:ae,updatedAt:or.now()};be.barcode!=null&&(me.barcode=V||""),be.packaging!=null&&(me.packaging=String(be.packaging||"")||""),te.update(Kt(Ge,"products_candies",X.id),me),re+=1}else{const me=Kt(pt(Ge,"products_candies")),Ie={category:Me,name:tt,providerPrice:lt,unitsPerPackage:ae,createdAt:or.now()};V&&(Ie.barcode=V),be.packaging&&(Ie.packaging=be.packaging),te.set(me,Ie),He+=1}}await te.commit(),s(` Importacin lista. Creados: ${He}, Actualizados: ${re}`),Ye(!1),le([]),Be([]),Z(""),e()}catch(qe){console.error(qe),s(" Error importando productos a Firestore.")}finally{ot(!1)}},Bt=v.useMemo(()=>{const qe=new Set(i.map(re=>re.id)),bt=new Set(i.map(re=>`${Qa(re.category)}::${Qa(re.name)}`)),G=new Set(i.map(re=>String(re.barcode||"").trim()).filter(Boolean));let te=0,He=0;for(const re of Oe){if(re.id&&qe.has(re.id)){te+=1;continue}const be=`${Qa(re.category)}::${Qa(re.name)}`;if(bt.has(be)){te+=1;continue}const Me=String(re.barcode||"").trim();if(Me&&G.has(Me)){te+=1;continue}He+=1}return{willCreate:He,willUpdate:te,total:Oe.length}},[Oe,i]);return o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Catalogo"}),o.jsx("div",{className:"flex gap-2",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Ic,{onClick:e,loading:r||je}),!mt&&o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-white border shadow-sm",onClick:()=>{Ye(!0),le([]),Be([]),Z("")},children:"Importar"})]})})]}),mt&&o.jsxs("div",{className:"flex flex-col gap-2 mb-3",children:[o.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-gray-900 text-white",onClick:()=>rt(qe=>!qe),children:_e?"Ocultar creacin":"Crear producto"}),o.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-white border shadow-sm",onClick:()=>{Ye(!0),le([]),Be([]),Z("")},children:"Importar"}),o.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-gray-200",onClick:()=>Ce(qe=>!qe),children:we?"Ocultar filtros":"Mostrar filtros"}),we&&o.jsxs("div",{className:"bg-white p-3 rounded shadow-sm border",children:[o.jsx("label",{className:"block font-semibold",children:"Empaque"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:F,onChange:qe=>Q(qe.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]})]})]}),_e&&o.jsxs("form",{onSubmit:gt,className:"bg-white p-3 rounded shadow border mb-4 grid grid-cols-1 md:grid-cols-6 gap-3 items-end text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Categora"}),o.jsx("input",{className:"w-full border rounded px-2 py-1",value:c,onChange:qe=>u(qe.target.value),placeholder:"Ej: Gomitas"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block font-semibold",children:"Producto"}),o.jsx("input",{className:"w-full border rounded px-2 py-1",value:d,onChange:qe=>f(qe.target.value),placeholder:"Ej: Gomita Fresa"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Empaque"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:y,onChange:qe=>b(qe.target.value),children:[o.jsx("option",{value:"",children:"Seleccionar"}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Empaque"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:y,onChange:qe=>b(qe.target.value),children:[o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio proveedor (paq)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-1 text-right",value:Number.isNaN(h)?"":h,onChange:qe=>A(Math.max(0,gA(qe.target.value,0)))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Und x paquete"}),o.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-1 text-right",value:m,onChange:qe=>p(Zh(qe.target.value,1))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Cdigo (opcional)"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{className:"w-full border rounded px-2 py-1",value:g,onChange:qe=>x(qe.target.value),placeholder:"EAN/UPC"}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white hover:bg-black whitespace-nowrap",onClick:()=>{ve("create"),U(!0)},children:"Escanear"})]})]}),o.jsxs("div",{className:"md:col-span-6 flex justify-end gap-2",children:[o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:ft,children:"Limpiar"}),o.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",disabled:r,children:"Crear producto"})]})]}),we&&o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-3 flex flex-col md:flex-row gap-3 items-center text-sm",children:[o.jsxs("div",{className:"w-full md:w-1/2",children:[o.jsx("label",{className:"block font-semibold",children:"Buscar"}),o.jsx("input",{className:"w-full border rounded px-2 py-1",value:ge,onChange:qe=>ee(qe.target.value),placeholder:"Buscar por categora o producto"}),o.jsxs("div",{className:"mt-2",children:[o.jsx("label",{className:"block font-semibold",children:"Empaque"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:F,onChange:qe=>Q(qe.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]})]})]}),o.jsxs("div",{className:"w-full md:w-1/2",children:[o.jsx("label",{className:"block font-semibold",children:"Buscar por cdigo"}),o.jsx("input",{className:"w-full border rounded px-2 py-1",value:Fe,onChange:qe=>Pe(qe.target.value),placeholder:"Ej: 7445074183182"}),o.jsx("div",{className:"mt-2 md:mt-0",children:o.jsx("button",{type:"button",className:"w-full md:w-auto px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{ve("search"),U(!0),Ce(!0)},children:"Escanear producto"})}),o.jsx("div",{className:"mt-2 md:mt-0",children:o.jsx("button",{type:"button",className:"w-full md:w-auto px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{ee(""),Pe("")},children:"Limpiar filtros"})})]}),o.jsxs("div",{className:"w-full md:w-auto text-right",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Productos en catlogo"}),o.jsx("div",{className:"text-lg font-semibold",children:Te.length})]})]}),mt?o.jsx("div",{className:"space-y-2",children:r?o.jsx("div",{className:"bg-white border rounded p-4 text-center",children:"Cargando"}):Te.length===0?o.jsx("div",{className:"bg-white border rounded p-4 text-center",children:"Sin productos."}):Te.map(qe=>{const bt=w===qe.id,G=Ue===qe.id,te=!!String(qe.barcode||"").trim();return o.jsxs("div",{className:"bg-white border rounded-2xl shadow-sm overflow-hidden",children:[o.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>Ve(He=>He===qe.id?null:qe.id),children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-bold truncate",children:qe.name}),o.jsx("div",{className:"text-xs text-gray-600 truncate",children:qe.category})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Precio proveedor"}),o.jsx("div",{className:"font-bold tabular-nums",children:wP(qe.providerPrice)})]})]}),G&&o.jsx("div",{className:"px-3 pb-3 border-t",children:o.jsxs("div",{className:"pt-3 space-y-2 text-sm",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Categora"}),bt?o.jsx("input",{className:"w-full border rounded px-2 py-1",value:I,onChange:He=>_(He.target.value)}):o.jsx("div",{className:"font-semibold",children:qe.category})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Und x paquete"}),bt?o.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-1 text-right",value:T,onChange:He=>O(Zh(He.target.value,1))}):o.jsx("div",{className:"font-semibold text-right tabular-nums",children:qe.unitsPerPackage})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Empaque"}),bt?o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:de,onChange:He=>fe(He.target.value),children:[o.jsx("option",{value:"",children:"Seleccionar"}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]}):o.jsx("div",{className:"font-semibold",children:qe.packaging||""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Precio proveedor"}),bt?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-1 text-right",value:Number.isNaN(k)?"":k,onChange:He=>P(Math.max(0,gA(He.target.value,0)))}):o.jsx("div",{className:"font-semibold tabular-nums",children:wP(qe.providerPrice)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Cdigo"}),bt?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{className:"flex-1 border rounded px-2 py-1",value:W,onChange:He=>Ae(He.target.value),placeholder:"EAN/UPC"}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{ve("edit"),U(!0)},children:"Escanear"})]}):te?o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-100 text-green-700 hover:bg-green-200",onClick:()=>{J(String(qe.barcode||"").trim()),R(!0)},children:"Ver cdigo"}):o.jsx("div",{className:"text-gray-600",children:"No"})]})]}),o.jsx("div",{className:"pt-2 flex gap-2",children:bt?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-blue-600 text-white",onClick:ye,type:"button",children:"Guardar"}),o.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{ve("edit"),U(!0)},type:"button",children:"Escanear"}),o.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-gray-200",onClick:At,type:"button",children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-yellow-400",onClick:()=>vt(qe),type:"button",children:"Editar"}),o.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-red-600 text-white",onClick:()=>$e(qe),type:"button",children:"Borrar"})]})})]})})]},qe.id)})}):o.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1050px] w-full text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border text-left",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border text-left",children:"Empaque"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border text-right",children:"Und x paquete"}),o.jsx("th",{className:"p-2 border text-center",children:"Cdigo"}),o.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):Te.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin productos."})}):Te.map(qe=>{const bt=w===qe.id,G=!!String(qe.barcode||"").trim();return o.jsxs("tr",{className:"align-top",children:[o.jsx("td",{className:"p-2 border",children:bt?o.jsx("input",{className:"w-full border rounded px-2 py-1",value:I,onChange:te=>_(te.target.value)}):qe.category}),o.jsx("td",{className:"p-2 border",children:bt?o.jsx("input",{className:"w-full border rounded px-2 py-1",value:S,onChange:te=>E(te.target.value)}):qe.name}),o.jsx("td",{className:"p-2 border",children:bt?o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:de,onChange:te=>fe(te.target.value),children:[o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]}):qe.packaging||""}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:bt?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border rounded px-2 py-1 text-right",value:Number.isNaN(k)?"":k,onChange:te=>P(Math.max(0,gA(te.target.value,0)))}):wP(qe.providerPrice)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:bt?o.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:T,onChange:te=>O(Zh(te.target.value,1))}):qe.unitsPerPackage}),o.jsx("td",{className:"p-2 border text-center",children:bt?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("input",{className:"w-44 border rounded px-2 py-1",value:W,onChange:te=>Ae(te.target.value),placeholder:"EAN/UPC"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-800 text-white hover:bg-black",onClick:()=>{ve("edit"),U(!0)},children:"Escanear"})]}):G?o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-100 text-green-700 hover:bg-green-200",onClick:()=>{J(String(qe.barcode||"").trim()),R(!0)},children:"S"}):o.jsx("span",{className:"px-2 py-1 rounded bg-gray-100 text-gray-600",children:"No"})}),o.jsx("td",{className:"p-2 border",children:bt?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:ye,type:"button",children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:At,type:"button",children:"Cancelar"})]}):o.jsxs("div",{className:"flex gap-2 justify-center flex-wrap",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 hover:bg-yellow-500",onClick:()=>vt(qe),type:"button",children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>$e(qe),type:"button",children:"Borrar"})]})})]},qe.id)})})]})}),a?mt&&a===" Producto guardado."?o.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[o.jsx("div",{className:"flex-1 text-sm",children:a}),o.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white",onClick:()=>{s(""),At(),U(!1)},children:"Aceptar"})]}):o.jsx("p",{className:"mt-2 text-sm",children:a}):null,o.jsx(l7e,{open:H,code:z,onClose:()=>R(!1)}),o.jsx(c7e,{open:D,onClose:()=>U(!1),onDetected:async qe=>{const bt=String(qe||"").trim();if(bt){if(ne==="edit"&&w){if(i.some(te=>te.id!==w&&String(te.barcode||"")===bt)){s(" Ya existe otro producto con ese cdigo de barras."),Ae(bt),U(!1);return}try{await rn(Kt(Ge,"products_candies",w),{barcode:bt}),l(te=>te.map(He=>He.id===w?{...He,barcode:bt}:He)),Ae(bt),mt&&s(" Producto guardado.")}catch(te){console.error(te),s(" Error guardando cdigo de barras.")}finally{U(!1)}return}if(ne==="search"){Pe(bt),U(!1);return}ne==="create"?x(qe):Ae(qe)}}}),L&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white w-full max-w-6xl max-h-[90vh] overflow-y-auto rounded shadow-lg p-5 text-sm",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-xl font-bold",children:"Importar productos (.xlsx / .csv)"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ye(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:[o.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-end md:justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"1) Sub tu archivo"}),o.jsx("div",{className:"text-xs text-gray-600",children:"Columnas esperadas (flexible): Id (opcional), Categoria, Producto/Nombre, PrecioProveedor, UnidadesPorPaquete, Empaque (opcional), Codigo (opcional)."})]}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:Ne,type:"button",children:"Descargar template .xlsx"})]}),o.jsxs("div",{className:"mt-3 flex flex-col md:flex-row gap-3 md:items-center",children:[o.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:qe=>{var bt;return xe(((bt=qe.target.files)==null?void 0:bt[0])||null)}}),ie&&o.jsxs("span",{className:"text-xs text-gray-600",children:["Archivo: ",o.jsx("b",{children:ie})]}),je&&o.jsx("span",{className:"text-xs",children:"Procesando"})]})]}),se.length>0&&o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-3 mb-3",children:[o.jsx("div",{className:"font-semibold text-red-700 mb-2",children:"Errores encontrados"}),o.jsx("ul",{className:"list-disc pl-5 text-red-700 text-xs space-y-1",children:se.slice(0,50).map((qe,bt)=>o.jsx("li",{children:qe},bt))})]}),o.jsxs("div",{className:"bg-white border rounded p-3",children:[o.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between mb-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"2) Previsualizacin (editable)"}),o.jsxs("div",{className:"text-xs text-gray-600",children:["Se importarn ",Bt.total," filas (Crear:"," ",Bt.willCreate," / Actualizar:"," ",Bt.willUpdate,")"]})]}),o.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50",onClick:dt,disabled:je||Oe.length===0||se.length>0,type:"button",children:"Importar a Firestore"})]}),o.jsxs("div",{className:"overflow-x-auto border rounded",children:[o.jsxs("table",{className:"min-w-[1250px] w-full text-xs",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border text-left",children:"Id (opcional)"}),o.jsx("th",{className:"p-2 border text-left",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border text-right",children:"Und x paquete"}),o.jsx("th",{className:"p-2 border text-left",children:"Empaque (opcional)"}),o.jsx("th",{className:"p-2 border text-left",children:"Codigo (opcional)"}),o.jsx("th",{className:"p-2 border text-center",children:"Accin"})]})}),o.jsx("tbody",{children:Oe.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sub un archivo para ver la previsualizacin."})}):Oe.slice(0,300).map((qe,bt)=>{const G=qe.id?i.some(be=>be.id===qe.id):!1,te=i.some(be=>`${Qa(be.category)}::${Qa(be.name)}`==`${Qa(qe.category)}::${Qa(qe.name)}`),He=qe.barcode?i.some(be=>String(be.barcode||"")===qe.barcode):!1,re=G||te||He;return o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:qe.id||"",onChange:be=>Qe(bt,{id:be.target.value.trim()||void 0}),placeholder:"docId (si quers update exacto)"})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:qe.category,onChange:be=>Qe(bt,{category:be.target.value}),list:"categories-list"})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-72 border rounded px-2 py-1",value:qe.name,onChange:be=>Qe(bt,{name:be.target.value})})}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border rounded px-2 py-1 text-right",value:Number.isNaN(qe.providerPrice)?"":qe.providerPrice,onChange:be=>Qe(bt,{providerPrice:Math.max(0,gA(be.target.value,0))})})}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:o.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:qe.unitsPerPackage,onChange:be=>Qe(bt,{unitsPerPackage:Zh(be.target.value,1)})})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:qe.packaging||"",onChange:be=>Qe(bt,{packaging:be.target.value.trim()||void 0}),placeholder:"Tarro, Bolsa..."})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:qe.barcode||"",onChange:be=>Qe(bt,{barcode:be.target.value.trim()||void 0}),placeholder:"EAN/UPC (opcional)"})}),o.jsx("td",{className:"p-2 border text-center",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] ${re?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:re?"ACTUALIZA":"CREA"})})]},`${qe.id||""}-${bt}`)})})]}),o.jsx("datalist",{id:"categories-list",children:Xe.map(qe=>o.jsx("option",{value:qe},qe))})]}),Oe.length>300&&o.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:["Mostrando 300 de ",Oe.length," filas (el import importa todas)."]})]})]})})]})}function bae(t){const e=Math.max(1,Math.floor(Number(t.unitsPerPackage||1))),r=Number(t.totalUnits||0),n=Number(t.quantity||0),a=Number(t.packages||0);return r>0?Math.floor(r):n>0?Math.floor(n):a>0?Math.floor(a*e):0}function NP(t){const e=Number(t.remaining);return Number.isFinite(e)&&e>0?Math.floor(e):bae(t)}const wae=t=>Math.max(0,Math.floor(Number(t??0)));function d7e(t){return wae(t.packages??t.totalPackages??t.packs??t.packagesInitial??t.initialPackages??0)}function f7e(t){return wae(t.remainingPackages??t.remainingPacks??t.packsRemaining??t.packagesRemaining??t.remaining_packages??0)}async function A7e(t){const e=Kt(Ge,"candy_main_orders",t);if((await xi(e)).exists())return e;const n=tr(pt(Ge,"candy_main_orders"),sr("orderId","==",t)),a=await Lt(n);return a.empty?null:Kt(Ge,"candy_main_orders",a.docs[0].id)}async function CP(t){if(!t)return;const e=await A7e(t);if(!e)return;const r=tr(pt(Ge,"inventory_candies"),sr("orderId","==",t)),n=await Lt(r),a=new Map;n.forEach(l=>{const c=l.data(),u=String(c.productId||"");if(!u)return;const d=d7e(c),f=f7e(c),h=Math.max(1,Math.floor(Number(c.unitsPerPackage||1))),A=Number(c.providerPrice||0),m=Number(c.unitPriceRivas||0),p=Number(c.unitPriceSanJorge||0),g=Number(c.unitPriceIsla||0),x=A*d,y=m*d,b=p*d,w=g*d,j=y-x,I=b-x,_=w-x;a.has(u)||a.set(u,{productId:u,name:String(c.productName||""),category:String(c.category||""),unitsPerPackage:h,providerPrice:A,marginRivas:typeof c.marginRivas=="number"?Number(c.marginRivas):void 0,marginSanJorge:typeof c.marginSanJorge=="number"?Number(c.marginSanJorge):void 0,marginIsla:typeof c.marginIsla=="number"?Number(c.marginIsla):void 0,packages:0,remainingPackages:0,subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0,unitPriceRivas:m||0,unitPriceSanJorge:p||0,unitPriceIsla:g||0,gainRivas:0,gainSanJorge:0,gainIsla:0});const S=a.get(u);S.packages+=d,S.remainingPackages+=f,S.subtotal+=x,S.totalRivas+=y,S.totalSanJorge+=b,S.totalIsla+=w,S.gainRivas+=j,S.gainSanJorge+=I,S.gainIsla+=_,S.providerPrice=A,S.unitPriceRivas=m||S.unitPriceRivas,S.unitPriceSanJorge=p||S.unitPriceSanJorge,S.unitPriceIsla=g||S.unitPriceIsla,S.unitsPerPackage=h||S.unitsPerPackage,S.name=String(c.productName||S.name),S.category=String(c.category||S.category)});const s=Array.from(a.values()).map(l=>({id:l.productId,name:l.name,category:l.category,providerPrice:l.providerPrice,unitsPerPackage:l.unitsPerPackage,packages:l.packages,remainingPackages:l.remainingPackages,marginRivas:l.marginRivas??void 0,marginSanJorge:l.marginSanJorge??void 0,marginIsla:l.marginIsla??void 0,subtotal:l.subtotal,totalRivas:l.totalRivas,totalSanJorge:l.totalSanJorge,totalIsla:l.totalIsla,unitPriceRivas:l.unitPriceRivas,unitPriceSanJorge:l.unitPriceSanJorge,unitPriceIsla:l.unitPriceIsla,gainRivas:l.gainRivas,gainSanJorge:l.gainSanJorge,gainIsla:l.gainIsla})),i=s.reduce((l,c)=>l+Number(c.packages||0),0);await rn(e,{totalPackages:i,items:s})}function h7e(t){const e=t==null?void 0:t.allocationsByItem;if(!e)return null;const r=[];if(Array.isArray(e))for(const n of e){const a=Array.isArray(n==null?void 0:n.allocations)?n.allocations:[];for(const s of a){const i=String(s.inventorySellerId||""),l=Math.max(0,Math.floor(Number(s.units??s.qty??s.quantity??0)));!i||l<=0||r.push({inventorySellerId:i,units:l})}}else if(typeof e=="object")for(const n of Object.keys(e)){const a=e[n],s=Array.isArray(a==null?void 0:a.allocations)?a.allocations:[];for(const i of s){const l=String(i.inventorySellerId||""),c=Math.max(0,Math.floor(Number(i.units??i.qty??i.quantity??0)));!l||c<=0||r.push({inventorySellerId:l,units:c})}}return r.length?{allocations:r}:null}async function k2(t){const e=t.split("#")[0],r=Kt(Ge,"sales_candies",e),n=await xi(r);if(!n.exists())throw new Error("La venta no existe.");const a=n.data(),s=h7e(a);if(s&&s.allocations.length>0){let u=0;return await Ti(Ge,async d=>{const f={};for(const p of s.allocations){const g=p.inventorySellerId,x=Math.max(0,Math.floor(Number(p.units||0)));!g||x<=0||(f[g]=(f[g]||0)+x,u+=x)}const A=Object.keys(f).map(p=>Kt(Ge,"inventory_candies_sellers",p)),m=await Promise.all(A.map(p=>d.get(p)));for(let p=0;p<A.length;p++){const g=m[p];if(!g.exists())continue;const x=g.data(),y=Number(x.remainingUnits??x.remaining??0),b=Math.max(0,Math.floor(Number(f[A[p].id]||0))),w=y+b,j=Math.max(1,Math.floor(Number(x.unitsPerPackage||1))),I=Math.floor(w/j);d.update(A[p],{remainingUnits:w,remainingPackages:I})}d.delete(r)}),{restored:u}}const i=[];if(Array.isArray(a.items)&&a.items.length>0){const u={};if(a.allocationsByItem&&typeof a.allocationsByItem=="object")for(const d of Object.keys(a.allocationsByItem)){const f=a.allocationsByItem[d],h=String((f==null?void 0:f.productId)||d||"");if(!h)continue;const A=Array.isArray(f==null?void 0:f.allocations)?f.allocations:[];u[h]=A.map(m=>({batchId:String(m.batchId),qty:Math.max(0,Math.floor(Number(m.qty||m.quantity||0)))}))}if(Array.isArray(a.allocationsByItem))for(const d of a.allocationsByItem){const f=String((d==null?void 0:d.productId)||"");if(!f)continue;const h=Array.isArray(d==null?void 0:d.allocations)?d.allocations:[];u[f]=h.map(A=>({batchId:String(A.batchId),qty:Math.max(0,Math.floor(Number(A.qty||A.quantity||0)))}))}for(const d of a.items){const f=String((d==null?void 0:d.productId)||"");if(!f)continue;const h=Math.max(0,Math.floor(Number((d==null?void 0:d.qty)||(d==null?void 0:d.quantity)||0))),A=Array.isArray(d==null?void 0:d.allocations)?d.allocations.map(m=>({batchId:String(m.batchId),qty:Math.max(0,Math.floor(Number(m.qty||m.quantity||0)))})):u[f]||[];i.push({productId:f,productName:String((d==null?void 0:d.productName)||""),qty:h,allocations:A.length?A:void 0})}}else{const u=a.item||{},d=String(u.productId||a.productId||""),f=Math.max(0,Math.floor(Number(u.qty??a.quantity??0))),h=Array.isArray(a.allocations)?a.allocations.map(A=>({batchId:String(A.batchId),qty:Math.max(0,Math.floor(Number(A.qty||A.quantity||0)))})):[];d&&f>0&&i.push({productId:d,productName:String(u.productName||a.productName||""),qty:f,allocations:h.length?h:void 0})}if(i.length===0)return await Ti(Ge,async u=>{u.delete(r)}),{restored:0};if(i.every(u=>Array.isArray(u.allocations)&&u.allocations.length>0)){let u=0;return await Ti(Ge,async d=>{const f=[];for(const A of i)for(const m of A.allocations||[]){const p=Math.max(0,Math.floor(Number(m.qty||0)));u+=p,f.push({ref:Kt(Ge,"inventory_candies",m.batchId),addBack:p})}const h=await Promise.all(f.map(A=>d.get(A.ref)));for(let A=0;A<f.length;A++){const m=h[A];if(!m.exists())continue;const p=m.data(),g=NP(p),x=Math.max(0,Math.floor(Number(f[A].addBack||0))),y=g+x,b=Math.max(1,Math.floor(Number(p.unitsPerPackage||1))),w=Math.floor(y/b);d.update(f[A].ref,{remaining:y,remainingPackages:w,packages:w})}d.delete(r)}),{restored:u}}let c=0;return await Ti(Ge,async u=>{const d={};for(const p of i){if(!p.productId||p.qty<=0)continue;const g=tr(pt(Ge,"inventory_candies"),sr("productId","==",p.productId)),y=(await Lt(g)).docs.map(b=>{const w=b.data(),j=bae(w),I=NP(w);return{id:b.id,date:String(w.date||""),baseUnits:j,remaining:I}}).sort((b,w)=>b.date.localeCompare(w.date));d[p.productId]=y}const f=[];for(const p of i){if(!p.productId||p.qty<=0)continue;if(Array.isArray(p.allocations)&&p.allocations.length>0){for(const y of p.allocations){const b=Math.max(0,Math.floor(Number(y.qty||0)));c+=b,f.push({id:y.batchId,addBack:b})}continue}const g=d[p.productId]||[];let x=p.qty;for(const y of g){if(x<=0)break;const b=Math.max(0,y.baseUnits-y.remaining);if(b<=0)continue;const w=Math.min(b,x);f.push({id:y.id,addBack:w}),c+=w,x-=w}for(const y of g){if(x<=0)break;const b=Math.min(x,p.qty);f.push({id:y.id,addBack:b}),c+=b,x-=b}}const h={};for(const p of f)h[p.id]=(h[p.id]||0)+Math.max(0,Math.floor(Number(p.addBack||0)));const A=Object.keys(h).map(p=>Kt(Ge,"inventory_candies",p)),m=await Promise.all(A.map(p=>u.get(p)));for(let p=0;p<A.length;p++){const g=m[p];if(!g.exists())continue;const x=g.data(),y=NP(x),b=Math.max(0,Math.floor(Number(h[A[p].id]||0))),w=y+b,j=Math.max(1,Math.floor(Number(x.unitsPerPackage||1))),I=Math.floor(w/j);u.update(A[p],{remaining:w,remainingPackages:I,packages:I})}u.delete(r)}),{restored:c}}async function m7e(t){return k2(t)}const Hl=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function _P(t){return isFinite(t)?Math.round(t):0}function _d(t){return t.unitsPerPackage>0&&t.totalUnits>0?Math.floor(t.totalUnits/t.unitsPerPackage):Math.max(0,Math.floor(Number(t.packages||0)))}function EP(t){return typeof t.remainingPackages=="number"&&isFinite(t.remainingPackages)?Math.max(0,Math.floor(t.remainingPackages)):t.unitsPerPackage>0?Math.max(0,Math.floor(Number(t.remaining||0)/t.unitsPerPackage)):0}function p7e(t,e){var i,l;const r=String(t.date||""),n=String(e.date||"");if(r!==n)return n.localeCompare(r);const a=((i=t.createdAt)==null?void 0:i.seconds)??0;return(((l=e.createdAt)==null?void 0:l.seconds)??0)-a}function g7e(){const[t,e]=v.useState([]),[r,n]=v.useState([]),[a,s]=v.useState(!0),[i,l]=v.useState(""),[c,u]=v.useState(br(Zd(new Date),"yyyy-MM-dd")),[d,f]=v.useState(br(Jd(new Date),"yyyy-MM-dd")),[h,A]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(null),[y,b]=v.useState(""),[w,j]=v.useState(0),[I,_]=v.useState(!1),[S,E]=v.useState(""),[k,P]=v.useState(""),[T,O]=v.useState([]);v.useEffect(()=>{(async()=>{try{s(!0);const z=await Lt(pt(Ge,"products_candies")),J=[];z.forEach(ve=>{const L=ve.data();J.push({id:ve.id,name:L.name??"(sin nombre)",category:L.category??"(sin categora)"})}),e(J);const D=tr(pt(Ge,"inventory_candies"),ln("date","desc")),U=await Lt(D),ne=[];U.forEach(ve=>{const L=ve.data(),Ye=Number(L.unitsPerPackage||0),ie=Number(L.totalUnits??L.quantity??(L.packages||0)*(L.unitsPerPackage||0)),Z=Number(L.remaining??L.totalUnits??ie??0);ne.push({id:ve.id,productId:L.productId,productName:L.productName,category:L.category,measurement:L.measurement??"unidad",packages:Number(L.packages||0),unitsPerPackage:Ye,totalUnits:ie,remaining:Z,remainingPackages:typeof L.remainingPackages=="number"?Number(L.remainingPackages):void 0,providerPrice:Number(L.providerPrice||0),subtotal:Number(L.subtotal||0),totalRivas:Number(L.totalRivas||0),totalSanJorge:Number(L.totalSanJorge||0),totalIsla:Number(L.totalIsla||0),gainRivas:Number(L.gainRivas||0),gainSanJorge:Number(L.gainSanJorge||0),gainIsla:Number(L.gainIsla||0),unitPriceRivas:Number(L.unitPriceRivas||0),unitPriceSanJorge:Number(L.unitPriceSanJorge||0),unitPriceIsla:Number(L.unitPriceIsla||0),date:L.date,createdAt:L.createdAt,status:L.status??"PENDIENTE",orderId:L.orderId??null})}),n(ne)}catch(z){console.error(z),l(" Error cargando inventario.")}finally{s(!1)}})()},[]);const W=v.useMemo(()=>r.filter(z=>!(c&&z.date<c||d&&z.date>d||h&&z.productId!==h||m&&String(z.category||"")!==m)),[r,c,d,h,m]),Ae=v.useMemo(()=>{const z=new Set;for(const J of t)J.category&&z.add(J.category);return Array.from(z).sort((J,D)=>J.localeCompare(D))},[t]),de=v.useMemo(()=>{const z=W.reduce((L,Ye)=>L+_d(Ye),0),J=W.reduce((L,Ye)=>L+EP(Ye),0),D=W.reduce((L,Ye)=>{const ie=_d(Ye);return L+Number(Ye.providerPrice||0)*ie},0),U=W.reduce((L,Ye)=>{const ie=_d(Ye);return L+Number(Ye.unitPriceRivas||0)*ie},0),ne=W.reduce((L,Ye)=>{const ie=_d(Ye);return L+Number(Ye.unitPriceSanJorge||0)*ie},0),ve=W.reduce((L,Ye)=>{const ie=_d(Ye);return L+Number(Ye.unitPriceIsla||0)*ie},0);return{totalPaquetes:z,totalPaquetesRestantes:J,totalSubtotal:D,totalRivas:U,totalSJ:ne,totalIsla:ve}},[W]),fe=v.useMemo(()=>{let z=0,J=0;for(const D of W)D.status==="PENDIENTE"&&(z+=1),D.status==="PAGADO"&&(J+=1);return{totalLotes:W.length,pendientes:z,pagados:J}},[W]),ge=v.useMemo(()=>{const z=new Map;for(const D of W){const U=String(D.productId||"");U&&(z.has(U)||z.set(U,{batches:[]}),z.get(U).batches.push(D))}const J=[];for(const[D,U]of z.entries()){const ne=[...U.batches].sort(p7e),ve=ne[0],L=ne.reduce((_e,rt)=>_e+_d(rt),0),Ye=ne.reduce((_e,rt)=>_e+EP(rt),0),ie=Number((ve==null?void 0:ve.providerPrice)||0),Z=Number((ve==null?void 0:ve.unitPriceRivas)||0),Oe=Number((ve==null?void 0:ve.unitPriceIsla)||0),le=ne.reduce((_e,rt)=>{const we=_d(rt);return _e+Number(rt.providerPrice||0)*we},0),se=ne.reduce((_e,rt)=>{const we=_d(rt);return _e+Number(rt.unitPriceRivas||0)*we},0),Be=ne.reduce((_e,rt)=>{const we=_d(rt);return _e+Number(rt.unitPriceIsla||0)*we},0),je=se-le,ot=Be-le;let mt="",ut;for(const _e of ne)(!mt||String(_e.date||"")>mt)&&(mt=String(_e.date||""),ut=_e.createdAt);J.push({productId:D,productName:(ve==null?void 0:ve.productName)||"",category:(ve==null?void 0:ve.category)||"",totalPackages:L,remainingPackages:Ye,providerPrice:ie,unitPriceRivas:Z,unitPriceIsla:Oe,subtotal:le,totalRivas:se,totalIsla:Be,gainRivas:je,gainIsla:ot,lastDate:mt,lastCreatedAt:ut,batchCount:ne.length})}return J.sort((D,U)=>String(U.lastDate).localeCompare(String(D.lastDate))),J},[W]),ee=z=>{x(z.id),b(z.date),j(z.providerPrice),l("")},Fe=()=>{x(null),b(""),j(0)},Pe=async()=>{if(!g)return;const z=r.find(Be=>Be.id===g);if(!z)return;if(w<0){l("El precio proveedor no puede ser negativo.");return}const J=_d(z),D=w*J,U=J>0?D/.8:0,ne=J>0?D/.85:0,ve=J>0?D/.7:0,L=U-D,Ye=ne-D,ie=ve-D,Z=J>0?_P(U/J):0,Oe=J>0?_P(ne/J):0,le=J>0?_P(ve/J):0,se=Kt(Ge,"inventory_candies",g);await rn(se,{date:y,providerPrice:w,subtotal:D,totalRivas:U,totalSanJorge:ne,totalIsla:ve,gainRivas:L,gainSanJorge:Ye,gainIsla:ie,unitPriceRivas:Z,unitPriceSanJorge:Oe,unitPriceIsla:le}),n(Be=>Be.map(je=>je.id===g?{...je,date:y,providerPrice:w,subtotal:D,totalRivas:U,totalSanJorge:ne,totalIsla:ve,gainRivas:L,gainSanJorge:Ye,gainIsla:ie,unitPriceRivas:Z,unitPriceSanJorge:Oe,unitPriceIsla:le}:je)),z.orderId&&await CP(String(z.orderId)),l(" Lote de dulces actualizado"),Fe()},F=async z=>{confirm(`Marcar PAGADO el lote del ${z.date} (${z.productName})?`)&&(await rn(Kt(Ge,"inventory_candies",z.id),{status:"PAGADO"}),n(D=>D.map(U=>U.id===z.id?{...U,status:"PAGADO"}:U)),l(" Lote marcado como pagado"))},Q=async z=>{confirm(`Eliminar el lote del ${z.date} (${z.productName})?`)&&(await yn(Kt(Ge,"inventory_candies",z.id)),n(D=>D.filter(U=>U.id!==z.id)),z.orderId&&await CP(String(z.orderId)),l(" Lote eliminado"))},H=async(z,J)=>{try{s(!0),l("");const D=tr(pt(Ge,"inventory_candies"),sr("productId","==",z),ln("date","desc")),U=await Lt(D),ne=[];U.forEach(ve=>{const L=ve.data(),Ye=Number(L.unitsPerPackage||0),ie=Number(L.totalUnits??L.quantity??(L.packages||0)*(L.unitsPerPackage||0)),Z=Number(L.remaining??L.totalUnits??ie??0);ne.push({id:ve.id,productId:L.productId,productName:L.productName,category:L.category,measurement:L.measurement??"unidad",packages:Number(L.packages||0),unitsPerPackage:Ye,totalUnits:ie,remaining:Z,remainingPackages:typeof L.remainingPackages=="number"?Number(L.remainingPackages):void 0,providerPrice:Number(L.providerPrice||0),subtotal:Number(L.subtotal||0),totalRivas:Number(L.totalRivas||0),totalSanJorge:Number(L.totalSanJorge||0),totalIsla:Number(L.totalIsla||0),gainRivas:Number(L.gainRivas||0),gainSanJorge:Number(L.gainSanJorge||0),gainIsla:Number(L.gainIsla||0),unitPriceRivas:Number(L.unitPriceRivas||0),unitPriceSanJorge:Number(L.unitPriceSanJorge||0),unitPriceIsla:Number(L.unitPriceIsla||0),date:L.date,createdAt:L.createdAt,status:L.status??"PENDIENTE",orderId:L.orderId??null})}),E(z),P(J),O(ne),_(!0)}catch(D){console.error(D),l(" Error abriendo detalle del producto.")}finally{s(!1)}},R=async(z,J)=>{const D=r.filter(ne=>ne.productId===z);if(confirm(`Eliminar COMPLETAMENTE "${J}"?
Esto eliminar ${D.length} lote(s) de este producto.`))try{s(!0),l("");const ne=Array.from(new Set(D.map(ve=>ve.orderId?String(ve.orderId):"").filter(Boolean)));for(const ve of D)await yn(Kt(Ge,"inventory_candies",ve.id));n(ve=>ve.filter(L=>L.productId!==z)),l(" Producto eliminado (todos sus lotes).");for(const ve of ne)await CP(ve);I&&S===z&&(_(!1),O([]),E(""),P(""))}catch(ne){console.error(ne),l(" Error eliminando lotes del producto.")}finally{s(!1)}};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsx("h2",{className:"text-2xl font-bold",children:"Inventario Productos"})}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:z=>u(z.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:z=>f(z.target.value)})]}),o.jsxs("div",{className:"flex flex-col min-w-[220px]",children:[o.jsx("label",{className:"font-semibold",children:"Categora"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:m,onChange:z=>p(z.target.value),children:[o.jsx("option",{value:"",children:"Todas"}),Ae.map(z=>o.jsx("option",{value:z,children:z},z))]})]}),o.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[o.jsx("label",{className:"font-semibold",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:h,onChange:z=>A(z.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),t.map(z=>o.jsxs("option",{value:z.id,children:[z.name,"  ",z.category]},z.id))]})]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f(""),A(""),p("")},children:"Quitar filtro"})]}),o.jsx("div",{className:"bg-gray-50 p-2 rounded shadow border mb-2 text-xs md:text-sm",children:o.jsxs("div",{className:"flex flex-wrap gap-x-6 gap-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Lotes totales:"})," ",fe.totalLotes]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Lotes pendientes:"})," ",fe.pendientes]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Lotes pagados:"})," ",fe.pagados]})]})}),o.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-sm md:text-base",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-y-1 gap-x-8",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Paquetes ingresados:"})," ",de.totalPaquetes]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Paquetes restantes:"})," ",de.totalPaquetesRestantes]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Sub total:"})," ",Hl(de.totalSubtotal)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total Rivas:"})," ",Hl(de.totalRivas)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total San Jorge:"})," ",Hl(de.totalSJ)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total Isla:"})," ",Hl(de.totalIsla)]})]})}),o.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:o.jsx("div",{className:"w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1200px] table-auto text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border text-left",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Paquetes totales"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio venta Rivas"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio venta Isla"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Subtotal"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Total Rivas"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Total Isla"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Ganancia bruta Rivas"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Ganancia bruta Isla"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"ltima fecha"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-center",children:"Opciones"})]})}),o.jsx("tbody",{className:"whitespace-nowrap",children:a?o.jsx("tr",{children:o.jsx("td",{colSpan:14,className:"p-4 text-center",children:"Cargando"})}):ge.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:14,className:"p-4 text-center",children:"Sin productos"})}):ge.map(z=>o.jsxs("tr",{className:"text-left",children:[o.jsx("td",{className:"p-2 border",children:z.category||""}),o.jsxs("td",{className:"p-2 border max-w-[260px]",children:[o.jsx("span",{className:"block truncate",title:z.productName,children:z.productName}),o.jsxs("span",{className:"text-[10px] text-gray-500",children:["Lotes: ",z.batchCount]})]}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:z.totalPackages}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:z.remainingPackages}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Hl(z.providerPrice)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Hl(z.unitPriceRivas)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Hl(z.unitPriceIsla)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Hl(z.subtotal)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Hl(z.totalRivas)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Hl(z.totalIsla)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Hl(z.gainRivas)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Hl(z.gainIsla)}),o.jsx("td",{className:"p-2 border",children:z.lastDate||""}),o.jsx("td",{className:"p-2 border",children:o.jsxs("div",{className:"flex gap-1 justify-center flex-wrap",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>H(z.productId,z.productName),children:"Detalle"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>R(z.productId,z.productName),children:"Borrar"})]})})]},z.productId))})]})})}),i&&o.jsx("p",{className:"mt-2 text-sm",children:i}),I&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-4 rounded shadow-lg w-full max-w-6xl max-h-[90vh] overflow-y-auto text-sm",children:[o.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold",children:"Detalle del producto"}),o.jsxs("div",{className:"text-xs text-gray-600",children:[o.jsx("span",{className:"font-semibold",children:"Producto:"})," ",k||""," ",o.jsxs("span",{className:"ml-2",children:[o.jsx("span",{className:"font-semibold",children:"ID:"})," ",S]})]})]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{_(!1),O([]),E(""),P(""),Fe()},children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1200px] table-auto text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border text-left",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Paquetes ingresados"}),o.jsx("th",{className:"p-2 border text-right",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border text-right",children:"Unidades"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio venta Rivas"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio venta Isla"}),o.jsx("th",{className:"p-2 border",children:"Nmero orden"}),o.jsx("th",{className:"p-2 border",children:"Status"}),o.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),o.jsx("tbody",{className:"whitespace-nowrap",children:T.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center text-gray-500",children:"Sin lotes"})}):T.map(z=>{const J=g===z.id,D=_d(z),U=EP(z);return o.jsxs("tr",{className:"text-left",children:[o.jsx("td",{className:"p-2 border align-top",children:J?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:y,onChange:ne=>b(ne.target.value)}):z.date}),o.jsx("td",{className:"p-2 border align-top",children:z.category||""}),o.jsxs("td",{className:"p-2 border align-top max-w-[260px]",children:[o.jsx("span",{className:"block truncate",title:z.productName,children:z.productName}),o.jsxs("span",{className:"text-[10px] text-gray-500",children:["Lote ID: ",z.id]})]}),o.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:D}),o.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:U}),o.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:z.totalUnits}),o.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:J?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(w)?"":w,onChange:ne=>j(Math.max(0,parseFloat(ne.target.value||"0")))}):Hl(z.providerPrice)}),o.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:Hl(z.unitPriceRivas)}),o.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:Hl(z.unitPriceIsla)}),o.jsx("td",{className:"p-2 border align-top",children:z.orderId?String(z.orderId):""}),o.jsx("td",{className:"p-2 border align-top",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] md:text-xs ${z.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:z.status})}),o.jsx("td",{className:"p-2 border align-top",children:J?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Pe,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Fe,children:"Cancelar"})]}):o.jsxs("div",{className:"flex gap-1 justify-center flex-wrap",children:[z.status==="PENDIENTE"&&o.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:()=>F(z),children:"Pagar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 text-black hover:bg-yellow-500 text-xs",onClick:()=>ee(z),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Q(z),children:"Borrar"})]})})]},z.id)})})]})}),o.jsx("div",{className:"mt-3 flex justify-end",children:o.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>R(S,k),children:"Borrar producto (todos los lotes)"})})]})})]})}const SP=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],Ao=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function dy(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function A$(t){const e=tr(pt(Ge,"ar_movements"),sr("ref.saleId","==",t)),r=await Lt(e);await Promise.all(r.docs.map(n=>yn(Kt(Ge,"ar_movements",n.id))))}function x7e({role:t="",roles:e,sellerCandyId:r="",currentUserEmail:n}){const a=e&&e.length?e:t,s=String(r||"").trim(),i=zr(a,"vendedor_dulces"),l=zr(a,"admin"),[c,u]=v.useState([]),[d,f]=v.useState(!1),[h,A]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(""),[y,b]=v.useState(""),[w,j]=v.useState(!1),[I,_]=v.useState(!1),[S,E]=v.useState(null),[k,P]=v.useState([]),T=async De=>{var $t;j(!0),_(!0),E(De),P([]);try{const Gt=await xi(Kt(Ge,"sales_candies",De));let It=null;Gt.exists()?It=Gt.data():It=($t=(await Lt(tr(pt(Ge,"sales_candies"),sr("name","==",De)))).docs[0])==null?void 0:$t.data();const Ht=(Array.isArray(It==null?void 0:It.items)?It.items:It!=null&&It.item?[It.item]:[]).map(Ft=>({productName:String(Ft.productName||""),qty:Number(Ft.qty||0),unitPrice:Number(Ft.unitPrice||0),discount:Number(Ft.discount||0),total:Number(Ft.total||0)}));P(Ht)}catch(Gt){console.error(Gt)}finally{_(!1)}},[O,W]=v.useState(""),[Ae,de]=v.useState("+505 "),[fe,ge]=v.useState(""),[ee,Fe]=v.useState(""),[Pe,F]=v.useState("ACTIVO"),[Q,H]=v.useState(0),[R,z]=v.useState(""),[J,D]=v.useState(0),[U,ne]=v.useState([]),[ve,L]=v.useState(!0),[Ye,ie]=v.useState(""),[Z,Oe]=v.useState(null),[le,se]=v.useState(""),[Be,je]=v.useState("+505 "),[ot,mt]=v.useState(""),[ut,_e]=v.useState(""),[rt,we]=v.useState("ACTIVO"),[Ce,Ue]=v.useState(0),[Ve,ue]=v.useState(""),[ce,Te]=v.useState(!1),[Xe,ft]=v.useState(null),[gt,vt]=v.useState(!1),[At,ye]=v.useState([]),[$e,Ne]=v.useState({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),[ct,xe]=v.useState(!1),[Qe,dt]=v.useState(0),[Bt,qe]=v.useState(new Date().toISOString().slice(0,10)),[bt,G]=v.useState(""),[te,He]=v.useState(!1),[re,be]=v.useState(null),[Me,tt]=v.useState(""),[lt,ae]=v.useState(0),[V,X]=v.useState(""),[me,Ie]=v.useState(!1),[Y,pe]=v.useState(null),[ke,Re]=v.useState(!1),[Ze,nt]=v.useState(!1),[_t,Ct]=v.useState(null);v.useEffect(()=>{(async()=>{try{if(L(!0),i&&!s){ne([]),ie(" Este usuario no tiene vendedor asociado (sellerCandyId vaco).");return}const De=await Lt(pt(Ge,"sellers_candies")),$t=[];De.forEach(Ht=>{const Ft=Ht.data(),Vt=String(Ft.status||"ACTIVO");Vt==="ACTIVO"&&$t.push({id:Ht.id,name:String(Ft.name||""),status:Vt})}),u($t);const Gt=i?tr(pt(Ge,"customers_candies"),sr("vendorId","==",s),ln("createdAt","desc")):tr(pt(Ge,"customers_candies"),ln("createdAt","desc")),It=await Lt(Gt),kt=[];It.forEach(Ht=>{const Ft=Ht.data();kt.push({id:Ht.id,name:Ft.name??"",phone:Ft.phone??"+505 ",place:Ft.place??"",notes:Ft.notes??"",status:Ft.status??"ACTIVO",creditLimit:Number(Ft.creditLimit??0),createdAt:Ft.createdAt??or.now(),balance:0,sellerId:Ft.sellerId||"",vendorId:Ft.vendorId||"",vendorName:Ft.vendorName||"",initialDebt:Number(Ft.initialDebt||0),lastAbonoDate:"",lastAbonoAmount:0})});for(const Ht of kt)try{const Ft=tr(pt(Ge,"ar_movements"),sr("customerId","==",Ht.id)),Vt=await Lt(Ft);let nr=0,Zt=null;Vt.forEach(os=>{var il,dd,fd;const Xn=os.data(),bs=Number(Xn.amount||0);if(nr+=bs,bs<0){const Ad=Xn.date??((dd=(il=Xn.createdAt)==null?void 0:il.toDate)!=null&&dd.call(il)?Xn.createdAt.toDate().toISOString().slice(0,10):""),mu=(fd=Xn.createdAt)!=null&&fd.seconds?Number(Xn.createdAt.seconds):0;(!Zt||mu>=Zt.ts)&&(Zt={date:Ad,amount:Math.abs(bs),ts:mu})}});const fa=Number(Ht.initialDebt||0);Ht.balance=fa+nr,Zt?(Ht.lastAbonoDate=Zt==null?void 0:Zt.date,Ht.lastAbonoAmount=Zt==null?void 0:Zt.amount):(Ht.lastAbonoDate="",Ht.lastAbonoAmount=0)}catch{Ht.balance=Number(Ht.initialDebt||0),Ht.lastAbonoDate="",Ht.lastAbonoAmount=0}ne(kt)}catch(De){console.error(De),ie(" Error cargando clientes.")}finally{L(!1)}})()},[i,s]);const Nt=()=>{W(""),de("+505 "),ge(""),Fe(""),F("ACTIVO"),H(0),z(""),D(0)},Tt=async De=>{var kt;if(De.preventDefault(),ie(""),!O.trim()){ie("Ingresa el nombre.");return}const $t=dy(Ae);if($t.length<6){ie("Telfono incompleto.");return}const Gt=i?s:String(R||"").trim(),It=Gt&&((kt=c.find(Ht=>Ht.id===Gt))==null?void 0:kt.name)||"";try{const Ht=Number(J||0),Ft=await wn(pt(Ge,"customers_candies"),{name:O.trim(),phone:$t,place:fe||"",notes:ee||"",status:Pe,creditLimit:Number(Q||0),vendorId:Gt,vendorName:It,initialDebt:Ht,createdAt:or.now()});ne(Vt=>[{id:Ft.id,name:O.trim(),phone:$t,place:fe||"",notes:ee||"",status:Pe,creditLimit:Number(Q||0),vendorId:Gt,vendorName:It,initialDebt:Ht,createdAt:or.now(),balance:Ht,lastAbonoDate:"",lastAbonoAmount:0},...Vt]),Nt(),Ie(!1),ie(" Cliente creado")}catch(Ht){console.error(Ht),ie(" Error al crear cliente")}},St=De=>{if(i){ie(" No permitido: vendedores no editan clientes desde el listado.");return}Oe(De.id),se(De.name),je(De.phone||"+505 "),mt(De.place||""),_e(De.notes||""),we(De.status||"ACTIVO"),Ue(Number(De.creditLimit||0)),ue(String(De.vendorId||""))},yt=()=>{Oe(null),se(""),je("+505 "),mt(""),_e(""),we("ACTIVO"),Ue(0),ue("")},cr=async()=>{var Ft;if(i){ie(" No permitido.");return}if(!Z)return;const De=dy(Be);if(!le.trim()){ie("Ingresa el nombre.");return}const $t=U.find(Vt=>Vt.id===Z),Gt=String(($t==null?void 0:$t.vendorId)||""),It=i?s:String(Ve||"");if(i&&Gt&&Gt!==s){ie(" Este cliente pertenece a otro vendedor.");return}if(l&&Gt&&It&&Gt!==It){ie(" Este cliente ya est asociado a otro vendedor. Primero desasocia (deja vendedor en ) y guarda; luego lo puedes asignar.");return}const kt=i?s:String(Ve||""),Ht=kt&&((Ft=c.find(Vt=>Vt.id===kt))==null?void 0:Ft.name)||"";try{await rn(Kt(Ge,"customers_candies",Z),{name:le.trim(),phone:De,place:ot||"",notes:ut||"",status:rt,creditLimit:Number(Ce||0),vendorId:kt,vendorName:Ht}),ne(Vt=>Vt.map(nr=>nr.id===Z?{...nr,name:le.trim(),phone:De,place:ot||"",notes:ut||"",status:rt,creditLimit:Number(Ce||0),vendorId:kt,vendorName:Ht}:nr)),yt(),ie(" Cliente actualizado")}catch(Vt){console.error(Vt),ie(" Error al actualizar")}},ur=async De=>{if(confirm(`Eliminar al cliente "${De.name}"?
Se devolvern al inventario todos los dulces de sus compras y se borrarn sus movimientos.`))try{L(!0);const Gt=tr(pt(Ge,"sales_candies"),sr("customerId","==",De.id)),It=await Lt(Gt);for(const Ft of It.docs){const Vt=Ft.id;try{await k2(Vt)}catch(nr){console.warn("restoreSaleAndDeleteCandy error",nr);try{await yn(Kt(Ge,"sales_candies",Vt))}catch{}}await A$(Vt)}const kt=tr(pt(Ge,"ar_movements"),sr("customerId","==",De.id)),Ht=await Lt(kt);await Promise.all(Ht.docs.map(Ft=>yn(Kt(Ge,"ar_movements",Ft.id)))),await yn(Kt(Ge,"customers_candies",De.id)),ne(Ft=>Ft.filter(Vt=>Vt.id!==De.id)),ie(" Cliente eliminado y dulces devueltos al inventario")}catch(Gt){console.error(Gt),ie(" No se pudo eliminar el cliente.")}finally{L(!1)}},lr=(De,$t)=>{const Gt=De.reduce((Ft,Vt)=>Ft+(Number(Vt.amount)||0),0),It=De.filter(Ft=>Number(Ft.amount)<0).reduce((Ft,Vt)=>Ft+Math.abs(Number(Vt.amount)||0),0),kt=De.filter(Ft=>Number(Ft.amount)>0).reduce((Ft,Vt)=>Ft+(Number(Vt.amount)||0),0),Ht=Number($t||0)+Gt;Ne({saldoActual:Ht,totalAbonado:It,totalCargos:Number($t||0)+kt,saldoRestante:Ht})},Cr=async De=>{ft(De),ye([]),Ne({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),Te(!0),Re(!1),nt(!1),Ct(null),xe(!1),dt(0),qe(new Date().toISOString().slice(0,10)),G(""),be(null),vt(!0);try{const $t=tr(pt(Ge,"ar_movements"),sr("customerId","==",De.id)),Gt=await Lt($t),It=[];Gt.forEach(kt=>{var nr,Zt;const Ht=kt.data(),Ft=Ht.date??((Zt=(nr=Ht.createdAt)==null?void 0:nr.toDate)!=null&&Zt.call(nr)?Ht.createdAt.toDate().toISOString().slice(0,10):""),Vt=Number(Ht.amount||0);It.push({id:kt.id,date:Ft,type:Ht.type??(Vt<0?"ABONO":"CARGO"),amount:Vt,ref:Ht.ref||{},comment:Ht.comment||"",createdAt:Ht.createdAt})}),It.sort((kt,Ht)=>{var nr,Zt;if(kt.date!==Ht.date)return kt.date.localeCompare(Ht.date);const Ft=((nr=kt.createdAt)==null?void 0:nr.seconds)||0,Vt=((Zt=Ht.createdAt)==null?void 0:Zt.seconds)||0;return Ft-Vt}),ye(It),lr(It,Number(De.initialDebt||0))}catch($t){console.error($t),ie(" No se pudo cargar el estado de cuenta")}finally{vt(!1)}},Nr=De=>{const $t=De.filter(Gt=>Number(Gt.amount)<0).map(Gt=>{var It;return{date:Gt.date,amount:Math.abs(Number(Gt.amount||0)),ts:((It=Gt.createdAt)==null?void 0:It.seconds)||0}}).sort((Gt,It)=>(Gt.ts||0)-(It.ts||0));return $t.length?$t[$t.length-1]:null},mn=async()=>{if(!Xe)return;ie("");const De=Number(Qe||0);if(!(De>0)){ie("Ingresa un monto de abono mayor a 0.");return}const $t=parseFloat(De.toFixed(2));if(!Bt){ie("Selecciona la fecha del abono.");return}try{He(!0);const Gt={customerId:Xe.id,type:"ABONO",amount:-$t,date:Bt,comment:bt||"",createdAt:or.now()},kt={id:(await wn(pt(Ge,"ar_movements"),Gt)).id,date:Bt,type:"ABONO",amount:-$t,comment:bt||"",createdAt:or.now()},Ht=[...At,kt].sort((Ft,Vt)=>{var fa,os;if(Ft.date!==Vt.date)return Ft.date.localeCompare(Vt.date);const nr=((fa=Ft.createdAt)==null?void 0:fa.seconds)||0,Zt=((os=Vt.createdAt)==null?void 0:os.seconds)||0;return nr-Zt});ye(Ht),lr(Ht,Number(Xe.initialDebt||0)),ne(Ft=>Ft.map(Vt=>{if(Vt.id!==Xe.id)return Vt;const nr=(Vt.balance||0)-$t;return{...Vt,balance:nr,lastAbonoDate:Bt,lastAbonoAmount:$t}})),ft(Ft=>Ft&&{...Ft,balance:(Ft.balance||0)-$t,lastAbonoDate:Bt,lastAbonoAmount:$t}),dt(0),G(""),qe(new Date().toISOString().slice(0,10)),xe(!1),ie(" Abono registrado")}catch(Gt){console.error(Gt),ie(" Error al registrar el abono")}finally{He(!1)}},bn=De=>{be(De.id),tt(De.date||new Date().toISOString().slice(0,10)),ae(Math.abs(Number(De.amount||0))),X(De.comment||"")},Rr=()=>{be(null),tt(""),ae(0),X("")},Nn=async()=>{if(!re||!Xe)return;const De=At.findIndex(kt=>kt.id===re);if(De===-1)return;const $t=At[De],Gt=Number(lt||0);if(!(Gt>0)){ie("El monto debe ser mayor a 0.");return}const It=$t.type==="ABONO"?-parseFloat(Gt.toFixed(2)):+parseFloat(Gt.toFixed(2));try{await rn(Kt(Ge,"ar_movements",re),{date:Me,amount:It,comment:V||""});const kt=[...At];kt[De]={...$t,date:Me,amount:It,comment:V||""},kt.sort((nr,Zt)=>{var Xn,bs;if(nr.date!==Zt.date)return nr.date.localeCompare(Zt.date);const fa=((Xn=nr.createdAt)==null?void 0:Xn.seconds)||0,os=((bs=Zt.createdAt)==null?void 0:bs.seconds)||0;return fa-os}),ye(kt),lr(kt,Number(Xe.initialDebt||0));const Ht=kt.reduce((nr,Zt)=>nr+(Number(Zt.amount)||0),0),Ft=Number(Xe.initialDebt||0)+Ht,Vt=Nr(kt);ne(nr=>nr.map(Zt=>Zt.id===Xe.id?{...Zt,balance:Ft,lastAbonoDate:(Vt==null?void 0:Vt.date)||"",lastAbonoAmount:(Vt==null?void 0:Vt.amount)||0}:Zt)),ft(nr=>nr&&{...nr,balance:Ft,lastAbonoDate:(Vt==null?void 0:Vt.date)||"",lastAbonoAmount:(Vt==null?void 0:Vt.amount)||0}),Rr(),ie(" Movimiento actualizado")}catch(kt){console.error(kt),ie(" Error al actualizar movimiento")}},za=async De=>{var Gt,It;if(confirm(`Eliminar este movimiento (${De.type==="ABONO"?"Abono":"Compra"}) del ${De.date}?${De.type==="CARGO"&&((Gt=De.ref)!=null&&Gt.saleId)?`
Se devolvern al inventario los dulces de esa venta.`:""}`)&&Xe)try{if(L(!0),De.type==="CARGO"&&((It=De.ref)!=null&&It.saleId)){try{await k2(De.ref.saleId)}catch(nr){console.warn("restoreSaleAndDeleteCandy error",nr),L(!1),ie(" No se pudo devolver inventario de la venta.");return}await A$(De.ref.saleId)}else await yn(Kt(Ge,"ar_movements",De.id));const kt=At.filter(nr=>{var Zt,fa;return De.type==="CARGO"&&((Zt=De.ref)!=null&&Zt.saleId)?((fa=nr.ref)==null?void 0:fa.saleId)!==De.ref.saleId:nr.id!==De.id});ye(kt),lr(kt,Number(Xe.initialDebt||0));const Ht=kt.reduce((nr,Zt)=>nr+(Number(Zt.amount)||0),0),Ft=Number(Xe.initialDebt||0)+Ht,Vt=Nr(kt);ne(nr=>nr.map(Zt=>Zt.id===Xe.id?{...Zt,balance:Ft,lastAbonoDate:(Vt==null?void 0:Vt.date)||"",lastAbonoAmount:(Vt==null?void 0:Vt.amount)||0}:Zt)),ft(nr=>nr&&{...nr,balance:Ft,lastAbonoDate:(Vt==null?void 0:Vt.date)||"",lastAbonoAmount:(Vt==null?void 0:Vt.amount)||0}),Ct(null),ie(" Movimiento eliminado")}catch(kt){console.error(kt),ie(" Error al eliminar movimiento")}finally{L(!1)}},ti=v.useMemo(()=>[...U].sort((De,$t)=>{var Gt,It;return De.status!==$t.status?De.status==="BLOQUEADO"?1:-1:(((Gt=$t.createdAt)==null?void 0:Gt.seconds)||0)-(((It=De.createdAt)==null?void 0:It.seconds)||0)}),[U]),Mn=De=>De==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700",Us=v.useMemo(()=>{const De=h.trim().toLowerCase(),$t=g.trim()===""?null:Number(g),Gt=y.trim()===""?null:Number(y);return ti.filter(It=>{const kt=!De||String(It.name||"").toLowerCase().includes(De),Ht=!m||It.status===m,Ft=Number(It.balance||0),Vt=$t===null||!Number.isNaN($t)&&Ft>=$t,nr=Gt===null||!Number.isNaN(Gt)&&Ft<=Gt;return kt&&Ht&&Vt&&nr})},[ti,h,m,g,y]);return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Dulces)"}),o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>{Ie(!0),i&&z(s)},type:"button",children:"Crear Cliente"})]}),o.jsxs("div",{className:"mb-3",children:[o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 border w-full md:w-auto",onClick:()=>f(De=>!De),children:d?"Ocultar filtros":"Mostrar filtros"}),d&&o.jsxs("div",{className:"mt-2 bg-white border rounded-xl p-3 grid grid-cols-1 md:grid-cols-4 gap-3",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Cliente"}),o.jsx("input",{className:"w-full border p-2 rounded",value:h,onChange:De=>A(De.target.value),placeholder:"Buscar por nombre"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:De=>p(De.target.value||""),children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Monto mn."}),o.jsx("input",{className:"w-full border p-2 rounded text-right",inputMode:"decimal",value:g,onChange:De=>x(De.target.value),placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Monto mx."}),o.jsx("input",{className:"w-full border p-2 rounded text-right",inputMode:"decimal",value:y,onChange:De=>b(De.target.value),placeholder:""})]})]}),o.jsx("div",{className:"md:col-span-4 flex flex-wrap gap-2 justify-end",children:o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 border",onClick:()=>{A(""),p(""),x(""),b("")},children:"Limpiar"})})]})]}),o.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[o.jsx("div",{className:"hidden md:block",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Telfono"}),o.jsx("th",{className:"p-2 border",children:"Vendedor"}),o.jsx("th",{className:"p-2 border",children:"Lugar"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Lmite"}),o.jsx("th",{className:"p-2 border",children:"Saldo"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:ve?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Cargando"})}):Us.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Sin clientes"})}):Us.map(De=>{var Gt;const $t=Z===De.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:(Gt=De.createdAt)!=null&&Gt.toDate?De.createdAt.toDate().toISOString().slice(0,10):""}),o.jsx("td",{className:"p-2 border text-left",children:$t?o.jsx("input",{className:"w-full border p-1 rounded",value:le,onChange:It=>se(It.target.value)}):o.jsx("div",{className:"font-medium",children:De.name})}),o.jsx("td",{className:"p-2 border",children:$t?o.jsx("input",{className:"w-full border p-1 rounded",value:Be,onChange:It=>je(dy(It.target.value))}):De.phone}),o.jsx("td",{className:"p-2 border",children:$t?o.jsxs("select",{className:"w-full border p-1 rounded text-xs",value:i?s:Ve,onChange:It=>ue(It.target.value),disabled:i,title:"Vendedor asociado",children:[o.jsx("option",{value:"",children:" Sin vendedor "}),c.map(It=>o.jsx("option",{value:It.id,children:It.name},It.id))]}):De.vendorName||""}),o.jsx("td",{className:"p-2 border",children:$t?o.jsxs("select",{className:"w-full border p-1 rounded",value:ot,onChange:It=>mt(It.target.value),children:[o.jsx("option",{value:"",children:""}),SP.map(It=>o.jsx("option",{value:It,children:It},It))]}):De.place||""}),o.jsx("td",{className:"p-2 border",children:$t?o.jsxs("select",{className:"w-full border p-1 rounded",value:rt,onChange:It=>we(It.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Mn(De.status)}`,children:De.status})}),o.jsx("td",{className:"p-2 border",children:$t?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Ce)?"":Ce,onChange:It=>Ue(Math.max(0,Number(It.target.value||0)))}):Ao(De.creditLimit||0)}),o.jsx("td",{className:"p-2 border font-semibold",children:Ao(De.balance||0)}),o.jsx("td",{className:"p-2 border",children:$t?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:ut,onChange:It=>_e(It.target.value),maxLength:500}):o.jsx("span",{title:De.notes||"",children:(De.notes||"").length>40?(De.notes||"").slice(0,40)+"":De.notes||""})}),o.jsx("td",{className:"p-2 border",children:o.jsx("div",{className:"flex gap-2 justify-center",children:$t?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:cr,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:yt,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>St(De),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",onClick:()=>ur(De),disabled:!l,title:l?"Borrar":"Solo admin",children:"Borrar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>Cr(De),children:"Estado de cuenta"})]})})})]},De.id)})})]})}),o.jsx("div",{className:"md:hidden",children:ve?o.jsx("div",{className:"p-4 text-center text-sm",children:"Cargando"}):Us.length===0?o.jsx("div",{className:"p-4 text-center text-sm",children:"Sin clientes"}):o.jsx("div",{className:"space-y-2",children:Us.map(De=>{const $t=Y===De.id,Gt=Z===De.id,It=o.jsx("span",{className:`px-2 py-0.5 rounded-full text-[11px] ${Mn(De.status)}`,children:De.status});return o.jsxs("div",{className:"border rounded-2xl shadow-sm bg-white overflow-hidden",children:[o.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between gap-2 text-left",onClick:()=>{ie(""),!Gt&&pe(kt=>kt===De.id?null:De.id)},children:[o.jsx("div",{className:"min-w-0 flex-1",children:o.jsx("div",{className:"truncate font-semibold",children:De.name})}),o.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-[11px] text-gray-500 leading-3",children:"Pendiente"}),o.jsx("div",{className:"font-semibold leading-4",children:Ao(De.balance||0)})]}),It]})]}),$t&&o.jsxs("div",{className:"px-3 pb-3",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"ltimo abono"}),o.jsx("div",{className:"font-medium",children:De.lastAbonoDate?De.lastAbonoDate:""}),o.jsx("div",{className:"text-[12px] text-gray-700",children:De.lastAbonoAmount?Ao(De.lastAbonoAmount):""})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Saldo pendiente"}),o.jsx("div",{className:"text-lg font-bold",children:Ao(De.balance||0)})]})]}),Gt?o.jsxs("div",{className:"mt-3 space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded-xl",value:le,onChange:kt=>se(kt.target.value)})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Telfono"}),o.jsx("input",{className:"w-full border p-2 rounded-xl",value:Be,onChange:kt=>je(dy(kt.target.value))})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded-xl",value:rt,onChange:kt=>we(kt.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Lugar"}),o.jsxs("select",{className:"w-full border p-2 rounded-xl",value:ot,onChange:kt=>mt(kt.target.value),children:[o.jsx("option",{value:"",children:""}),SP.map(kt=>o.jsx("option",{value:kt,children:kt},kt))]})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Vendedor"}),o.jsxs("select",{className:"w-full border p-2 rounded-xl",value:i?s:Ve,onChange:kt=>ue(kt.target.value),disabled:i,children:[o.jsx("option",{value:"",children:" Sin vendedor "}),c.map(kt=>o.jsx("option",{value:kt.id,children:kt.name},kt.id))]})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Lmite"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded-xl text-right",value:Number.isNaN(Ce)?"":Ce,onChange:kt=>Ue(Math.max(0,Number(kt.target.value||0)))})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded-xl min-h-24 resize-y",value:ut,onChange:kt=>_e(kt.target.value),maxLength:500})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-blue-600 hover:bg-blue-700",onClick:cr,type:"button",children:"Guardar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl bg-gray-200 hover:bg-gray-300",onClick:()=>{yt(),pe(null)},type:"button",children:"Cancelar"})]})]}):o.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>St(De),type:"button",children:"Editar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",onClick:()=>ur(De),disabled:!l,title:l?"Borrar":"Solo admin",type:"button",children:"Borrar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>Cr(De),type:"button",children:"Estado"})]})]})]},De.id)})})})]}),Ye&&o.jsx("p",{className:"mt-2 text-sm",children:Ye}),me&&su.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>Ie(!1)}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ie(!1),type:"button",children:"Cerrar"})]}),o.jsxs("form",{onSubmit:Tt,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:O,onChange:De=>W(De.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),o.jsx("input",{className:"w-full border p-2 rounded",value:Ae,onChange:De=>de(dy(De.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:fe,onChange:De=>ge(De.target.value),children:[o.jsx("option",{value:"",children:""}),SP.map(De=>o.jsx("option",{value:De,children:De},De))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:Pe,onChange:De=>F(De.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor asociado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:i?s:R,onChange:De=>z(De.target.value),disabled:i,children:[o.jsx("option",{value:"",children:" Sin vendedor "}),c.map(De=>o.jsx("option",{value:De.id,children:De.name},De.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Deuda inicial"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:J===0?"":J,onChange:De=>D(Math.max(0,Number(De.target.value||0))),placeholder:"Ej: 1500"}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Este valor cuenta como saldo desde el inicio."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Q===0?"":Q,onChange:De=>H(Math.max(0,Number(De.target.value||0))),placeholder:"Ej: 2000"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:ee,onChange:De=>Fe(De.target.value),maxLength:500,placeholder:"Notas del cliente"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[ee.length,"/500"]})]}),o.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ie(!1),children:"Cancelar"}),o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),ce&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4 max-h-[92vh] overflow-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(Xe==null?void 0:Xe.name)||""]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{dt(0),qe(new Date().toISOString().slice(0,10)),G(""),xe(!0)},children:"Abonar"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Te(!1),children:"Cerrar"})]})]}),o.jsxs("div",{className:"hidden md:block",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Deuda inicial"}),o.jsx("div",{className:"text-xl font-semibold",children:Ao(Number((Xe==null?void 0:Xe.initialDebt)||0))})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-xl font-semibold",children:Ao($e.saldoActual)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),o.jsx("div",{className:"text-xl font-semibold",children:Ao($e.totalAbonado)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),o.jsx("div",{className:"text-xl font-semibold",children:Ao($e.saldoRestante)})]})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Referencia"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:gt?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):At.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):At.map(De=>{var Gt,It;const $t=re===De.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:$t?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:Me,onChange:kt=>tt(kt.target.value)}):De.date||""}),o.jsx("td",{className:"p-2 border",children:De.amount>=0?(Gt=De.ref)!=null&&Gt.saleId?o.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",title:"Ver dulces de esta compra",onClick:()=>T(De.ref.saleId),children:"COMPRA (CARGO)"}):o.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (CARGO)"}):o.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),o.jsx("td",{className:"p-2 border",children:(It=De.ref)!=null&&It.saleId?`Venta #${De.ref.saleId}`:""}),o.jsx("td",{className:"p-2 border",children:$t?o.jsx("input",{className:"w-full border p-1 rounded",value:V,onChange:kt=>X(kt.target.value),placeholder:"Comentario"}):o.jsx("span",{title:De.comment||"",children:(De.comment||"").length>40?(De.comment||"").slice(0,40)+"":De.comment||""})}),o.jsx("td",{className:"p-2 border font-semibold",children:$t?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(lt)?"":lt,onChange:kt=>{const Ht=Number(kt.target.value||0),Ft=Number.isFinite(Ht)?Math.max(0,parseFloat(Ht.toFixed(2))):0;ae(Ft)},placeholder:"0.00"}):Ao(De.amount)}),o.jsx("td",{className:"p-2 border",children:$t?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Nn,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Rr,children:"Cancelar"})]}):o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>bn(De),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>za(De),children:"Borrar"})]})})]},De.id)})})]})})]}),o.jsxs("div",{className:"md:hidden space-y-3",children:[o.jsxs("div",{className:"border rounded-2xl overflow-hidden",children:[o.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>Re(De=>!De),children:[o.jsx("div",{className:"font-semibold",children:"Estado de cuenta"}),o.jsx("div",{className:"text-sm text-gray-500",children:ke?"Ocultar":"Ver"})]}),ke&&o.jsxs("div",{className:"px-3 pb-3 grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Deuda inicial"}),o.jsx("div",{className:"font-bold",children:Ao(Number((Xe==null?void 0:Xe.initialDebt)||0))})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Saldo actual"}),o.jsx("div",{className:"font-bold",children:Ao($e.saldoActual)})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Total abonado"}),o.jsx("div",{className:"font-bold",children:Ao($e.totalAbonado)})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Saldo restante"}),o.jsx("div",{className:"font-bold",children:Ao($e.saldoRestante)})]})]})]}),o.jsxs("div",{className:"border rounded-2xl overflow-hidden",children:[o.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>nt(De=>!De),children:[o.jsx("div",{className:"font-semibold",children:"Movimientos"}),o.jsx("div",{className:"text-sm text-gray-500",children:Ze?"Ocultar":"Ver"})]}),Ze&&o.jsx("div",{className:"px-3 pb-3 space-y-2",children:gt?o.jsx("div",{className:"text-center text-sm p-3",children:"Cargando"}):At.length===0?o.jsx("div",{className:"text-center text-sm p-3",children:"Sin movimientos"}):At.map(De=>{var Ht;const $t=_t===De.id,Gt=re===De.id,It=De.amount>=0?"CARGO":"ABONO",kt=De.amount>=0?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700";return o.jsxs("div",{className:"border rounded-2xl overflow-hidden bg-white",children:[o.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between gap-2 text-left",onClick:()=>{Gt||Ct(Ft=>Ft===De.id?null:De.id)},children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"text-[11px] text-gray-500 leading-3",children:"Fecha"}),o.jsx("div",{className:"font-semibold",children:De.date||""})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`px-2 py-0.5 rounded-full text-[11px] ${kt}`,children:It}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-[11px] text-gray-500 leading-3",children:"Monto"}),o.jsx("div",{className:"font-semibold",children:Ao(De.amount)})]})]})]}),$t&&o.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Referencia"}),o.jsx("div",{className:"font-medium",children:(Ht=De.ref)!=null&&Ht.saleId?`Venta #${De.ref.saleId}`:""})]}),o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Comentario"}),Gt?o.jsx("input",{className:"w-full border p-2 rounded-xl",value:V,onChange:Ft=>X(Ft.target.value),placeholder:"Comentario"}):o.jsx("div",{className:"font-medium",children:(De.comment||"").trim()||""})]}),Gt&&o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded-xl",value:Me,onChange:Ft=>tt(Ft.target.value)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded-xl text-right",value:Number.isNaN(lt)?"":lt,onChange:Ft=>{const Vt=Number(Ft.target.value||0),nr=Number.isFinite(Vt)?Math.max(0,parseFloat(Vt.toFixed(2))):0;ae(nr)}})]})]}),Gt?o.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-1",children:[o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-blue-600 hover:bg-blue-700",onClick:Nn,type:"button",children:"Guardar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl bg-gray-200 hover:bg-gray-300",onClick:Rr,type:"button",children:"Cancelar"})]}):o.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-1",children:[o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>bn(De),type:"button",children:"Editar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-red-600 hover:bg-red-700",onClick:()=>za(De),type:"button",children:"Borrar"})]})]})]},De.id)})})]})]}),ct&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(Xe==null?void 0:Xe.name)||""]}),o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:Bt,onChange:De=>qe(De.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Qe===0?"":Qe,onChange:De=>{const $t=Number(De.target.value||0),Gt=Number.isFinite($t)?Math.max(0,parseFloat($t.toFixed(2))):0;dt(Gt)},placeholder:"0.00"}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se registrar como ABONO (negativo) con 2 decimales."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:bt,onChange:De=>G(De.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[bt.length,"/250"]})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>xe(!1),disabled:te,children:"Cancelar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:mn,disabled:te,children:te?"Guardando...":"Guardar abono"})]})]})})]})}),w&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[65]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Dulces vendidos"," ",S?` #${S}`:""]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>j(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio"}),o.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),o.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),o.jsx("tbody",{children:I?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):k.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):k.map((De,$t)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border text-left",children:De.productName}),o.jsx("td",{className:"p-2 border text-right",children:De.qty}),o.jsx("td",{className:"p-2 border text-right",children:Ao(De.unitPrice)}),o.jsx("td",{className:"p-2 border text-right",children:Ao(De.discount||0)}),o.jsx("td",{className:"p-2 border text-right",children:Ao(De.total)})]},$t))})]})})]})})]})}const dc=t=>`C$ ${(Number(t)||0).toFixed(2)}`,v7e=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas","Pull","Tilgue","Balge","Santa Cruz","Moyogalpa","Santo Domingo","San Jos del Sur","San Fernando","Merida","La Paloma","San Lorenzo","San Carlos","San Miguel"];function y7e(t){switch(t){case"RIVAS":return"Rivas";case"SAN_JORGE":return"San Jorge";case"ISLA":return"Isla de Ometepe";default:return""}}function b7e(t){switch(t){case"Rivas":return"RIVAS";case"San Jorge":return"SAN_JORGE";case"Isla Ometepe":return"ISLA";default:return"RIVAS"}}function w7e(t){const{saleId:e,date:r,customerName:n,branch:a,items:s,total:i,vendorName:l,vendorCommissionPercent:c,vendorCommissionAmount:u}=t,d=new Br;let f=12;if(d.setFontSize(16),d.text("Multiservicios Ortiz",10,f),f+=6,d.setFontSize(12),d.text("Recibo de venta certificada",10,f),f+=8,d.setFontSize(12),d.text(`Fecha: ${r}`,10,f),f+=5,d.text(`Cliente: ${n||"Cliente Mostrador"}`,10,f),f+=5,d.text(`Sucursal: ${y7e(a)}`,10,f),f+=5,d.text(`Autorizado: ${e}`,10,f),f+=5,l&&(d.text(`Vendedor: ${l}`,10,f),f+=5),typeof c=="number"){const h=Number(u||0).toFixed(2),A=c.toFixed(2);d.text(`Comisin vendedor: ${A}%  C$ ${h}`,10,f),f+=8}else f+=3;d.setFontSize(12),d.text("Producto",10,f),d.text("Paquetes",110,f,{align:"right"}),d.text("Precio.",150,f,{align:"right"}),d.text("Subtotal",190,f,{align:"right"}),f+=4,d.line(10,f,190,f),f+=4,s.forEach(h=>{f>270&&(d.addPage(),f=12);const A=(h.productName||"").length>50?h.productName.slice(0,47)+"...":h.productName;d.text(A,10,f),d.text(String(h.qty),110,f,{align:"right"}),d.text(`C$ ${Number(h.unitPrice||0).toFixed(2)}`,150,f,{align:"right"}),d.text(`C$ ${Number(h.total||0).toFixed(2)}`,190,f,{align:"right"}),f+=5}),f+=4,d.line(10,f,190,f),f+=6,d.setFontSize(13),d.text(`Total: C$ ${Number(i||0).toFixed(2)}`,190,f,{align:"right"}),f+=6,d.setFontSize(9),d.text("Gracias por su compra.",10,f),d.save(`venta_dulces_${e}.pdf`)}async function h$(t,e){if(!t||!e)return 0;const r=tr(pt(Ge,"inventory_candies_sellers"),sr("sellerId","==",e),sr("productId","==",t)),n=await Lt(r);let a=0;return n.forEach(s=>{const i=s.data(),l=Number(i.remainingUnits??i.remaining??i.totalUnits??0);l>0&&(a+=l)}),a}const m$=()=>{const t=new Date;return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),t.toISOString().slice(0,10)};async function N7e(t){const{productId:e,vendorId:r,quantityUnits:n,saleDate:a,saleId:s}=t;let i=Math.max(0,Math.floor(Number(n||0)));const l=[];if(!e||!r||i<=0)return{allocations:[]};const c=tr(pt(Ge,"inventory_candies_sellers"),sr("sellerId","==",r),sr("productId","==",e),sr("remainingUnits",">",0),ln("date","asc"),ln("createdAt","asc")),u=await Lt(c);for(const d of u.docs){if(i<=0)break;const f=d.data(),h=Number(f.remainingUnits||0);if(h<=0)continue;const A=Math.min(h,i),m=h-A,p=Math.max(1,Math.floor(Number(f.unitsPerPackage||1))),g=Math.floor(m/p);await rn(d.ref,{remainingUnits:m,remainingPackages:g}),l.push({inventorySellerId:d.id,productId:e,units:A,saleDate:a,saleId:s}),i-=A}return i>0&&console.warn("[allocateSaleFIFOCandyFromVendor] No alcanz el inventario del vendedor, faltaron unidades.",{productId:e,vendorId:r,remaining:i}),{allocations:l}}function p$(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}function C7e({role:t="",roles:e,sellerCandyId:r="",currentUserEmail:n}){const a=e&&e.length?e:t;zr(a,"admin"),zr(a,"vendedor_dulces");const[s,i]=v.useState([]),[l,c]=v.useState([]),[u,d]=v.useState([]),[f,h]=v.useState({}),[A,m]=v.useState("CONTADO"),[p,g]=v.useState("RIVAS"),[x,y]=v.useState(""),[b,w]=v.useState(""),[j,I]=v.useState(m$()),[_,S]=v.useState(""),[E,k]=v.useState(!1),[P,T]=v.useState(""),[O,W]=v.useState([]),[Ae,de]=v.useState(!0),[fe,ge]=v.useState(!1),ee=v.useMemo(()=>O.reduce((re,be)=>re+(be.qtyPackages||0),0),[O]),Fe=v.useMemo(()=>O.reduce((re,be)=>re+(be.qtyPackages||0)*(be.unitsPerPackage||1),0),[O]),Pe=v.useMemo(()=>{const re=O.reduce((be,Me)=>{const tt=(Number(Me.pricePerPackage)||0)*(Me.qtyPackages||0),lt=Number(Me.discount)||0,ae=Math.max(0,tt-lt);return be+ae},0);return Math.floor(re*100)/100},[O]),[F,Q]=v.useState(0),[H,R]=v.useState(""),[z,J]=v.useState(!1),[D,U]=v.useState(!1),[ne,ve]=v.useState(""),[L,Ye]=v.useState("+505 "),[ie,Z]=v.useState(""),[Oe,le]=v.useState(""),[se,Be]=v.useState("ACTIVO"),[je,ot]=v.useState(0),[mt,ut]=v.useState(""),_e=()=>{ve(""),Ye("+505 "),Z(""),le(""),Be("ACTIVO"),ot(0)},[rt,we]=v.useState(!1),Ce=async re=>{const be=String(re||"").trim();if(!be)return;const Me=bt.find(V=>String(V.barcode||"")===be),tt=bt.find(V=>String(V.sku||"")===be),lt=bt.find(V=>String(V.id||"")===be),ae=Me||tt||lt||null;ae?(await ct(ae.id),R(" Producto agregado desde escner."),setTimeout(()=>R(""),2500)):(R(" Cdigo no corresponde a ningn producto disponible."),setTimeout(()=>R(""),2500))};function Ue({open:re,onClose:be,onDetected:Me}){const tt=v.useRef(null),lt=v.useRef(null),[ae,V]=v.useState(""),X=v.useRef("");return v.useEffect(()=>{if(!re)return;let me=!1;const Ie=new g2,Y=()=>{var ke,Re,Ze;try{(ke=lt.current)==null||ke.stop()}catch{}lt.current=null;try{const nt=(Re=tt.current)==null?void 0:Re.srcObject;try{(Ze=nt==null?void 0:nt.getTracks)==null||Ze.call(nt).forEach(_t=>_t.stop())}catch{}}catch{}try{tt.current&&(tt.current.srcObject=null)}catch{}};return(async()=>{V("");try{if(!tt.current)return;try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(Ze=>Ze.stop())}catch{}const ke=await Ie.decodeFromConstraints({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}},audio:!1},tt.current,Re=>{if(!me&&Re){const Ze=String(Re.getText()||"").trim().replace(/\s+/g,"");if(!Ze||Ze===X.current)return;X.current=Ze,Y(),Me(Ze),be()}});lt.current=ke}catch(ke){const Re=String((ke==null?void 0:ke.message)||""),Ze=String((ke==null?void 0:ke.name)||"");Re.toLowerCase().includes("permission")||Ze==="NotAllowedError"?V("Permiso de cmara denegado."):Ze==="NotFoundError"||Re.toLowerCase().includes("notfound")?V("No se encontr cmara en este dispositivo."):Re.toLowerCase().includes("secure")||Re.toLowerCase().includes("https")?V("La cmara requiere HTTPS (sitio seguro)."):V(Re||"No se pudo iniciar el escner.")}})(),()=>{var ke;me=!0;try{(ke=lt.current)==null||ke.stop()}catch{}lt.current=null}},[re,be,Me]),re?o.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 p-3 flex items-center justify-center",children:o.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-lg border overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[o.jsx("div",{className:"font-bold",children:"Escanear cdigo"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:be,type:"button",children:"Cerrar"})]}),o.jsxs("div",{className:"p-3",children:[o.jsxs("div",{className:"relative w-full aspect-[3/4] bg-black rounded-xl overflow-hidden",children:[o.jsx("video",{ref:tt,className:"w-full h-full object-cover",muted:!0,playsInline:!0,autoPlay:!0}),o.jsx("div",{className:"absolute inset-0 pointer-events-none",children:o.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[85%] h-40 border-2 border-white/70 rounded-xl"})})]}),ae&&o.jsx("div",{className:"mt-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2",children:ae}),o.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Apunt al cdigo de barras y mantenelo estable."})]})]})}):null}const Ve=v.useMemo(()=>s.find(re=>re.id===x),[s,x]),ue=v.useMemo(()=>E&&_?s.filter(re=>(re.vendorId??re.sellerId??"")===_):s,[s,E,_]),ce=(Ve==null?void 0:Ve.balance)||0,Te=A==="CREDITO"?ce+Math.max(0,Number(Pe||0))-Math.max(0,Number(F||0)):0,Xe=v.useMemo(()=>{if(A!=="CREDITO")return 0;const re=Math.max(0,Number(ce||0))+Math.max(0,Number(Pe||0));return Math.floor(re*100)/100},[A,ce,Pe]),ft=re=>{const be=Math.max(0,Number(re||0));return Math.min(be,Xe)},gt=v.useMemo(()=>u.find(re=>re.id===_)||null,[u,_]),vt=(gt==null?void 0:gt.commissionPercent)||0,At=v.useMemo(()=>{const re=O.reduce((be,Me)=>be+Number(Me.margenVendedor||0),0);return Number(re.toFixed(2))},[O]);v.useEffect(()=>{(async()=>{const re=tr(pt(Ge,"customers_candies"),ln("createdAt","desc")),be=await Lt(re),Me=[];be.forEach(V=>{const X=V.data();Me.push({id:V.id,name:X.name??"",phone:X.phone??"+505 ",place:X.place??"",status:X.status??"ACTIVO",creditLimit:Number(X.creditLimit??0),balance:0,sellerId:X.sellerId??X.vendorId??"",vendorId:X.vendorId??X.sellerId??""})});for(const V of Me)try{const X=tr(pt(Ge,"ar_movements"),sr("customerId","==",V.id)),me=await Lt(X);let Ie=0;me.forEach(pe=>Ie+=Number(pe.data().amount||0));const Y=Number(V.initialDebt||0);V.balance=Ie+Y}catch{V.balance=0}i(Me);const tt=tr(pt(Ge,"products_candies"),ln("createdAt","desc")),lt=await Lt(tt),ae=[];lt.forEach(V=>{const X=V.data();ae.push({id:V.id,name:X.name??"(sin nombre)",sku:X.sku??"",unitsPerPackage:Number(X.unitsPerPackage??1),barcode:String(X.barcode||""),priceRivas:Number(X.unitPriceRivas??0),priceSanJorge:Number(X.unitPriceSanJorge??0),priceIsla:Number(X.unitPriceIsla??0),providerPrice:Number(X.providerPrice??0),providerPricePerUnit:Number(X.providerPricePerUnit??0)})}),c(ae);try{const V=await Lt(pt(Ge,"sellers_candies")),X=[];V.forEach(me=>{const Ie=me.data(),Y=Ie.branch||"Rivas",pe=b7e(Y);X.push({id:me.id,name:Ie.name??"(sin nombre)",branch:pe,branchLabel:Y,commissionPercent:Number(Ie.commissionPercent??0)})}),d(X)}catch(V){console.error("Error cargando vendedores:",V)}h({})})()},[]),v.useEffect(()=>{var be,Me;const re=e&&e.length?e:t;if(re&&((be=re.includes)!=null&&be.call(re,"vendedor_dulces"))&&r){S(r),k(!0);try{localStorage.setItem("pos_vendorId",r),localStorage.setItem("pos_role","VENDEDOR")}catch{}return}if(re&&((Me=re.includes)!=null&&Me.call(re,"admin"))){k(!1);return}try{const tt=localStorage.getItem("pos_vendorId")||"",lt=localStorage.getItem("pos_role")||"";tt&&S(tt),lt.toUpperCase()==="VENDEDOR"&&k(!0)}catch{}},[t,r]);const ye=async re=>{if(!re){h({});return}const be=tr(pt(Ge,"inventory_candies_sellers"),sr("sellerId","==",re)),Me=await Lt(be),tt={};Me.forEach(lt=>{const ae=lt.data(),V=ae.productId||"";if(!V)return;const X=Number(ae.remainingUnits??ae.remaining??ae.totalUnits??0);X<=0||(tt[V]=(tt[V]||0)+X)}),h(tt),W(lt=>{const ae=[];for(const V of lt){const X=tt[V.productId]??0;X>0&&ae.push({...V,availableUnits:X})}return ae})};v.useEffect(()=>{if(!_){h({});return}const re=u.find(be=>be.id===_);re&&g(re.branch),ye(_)},[_,u]),v.useEffect(()=>{W(re=>re.map(be=>{const Me=l.find(lt=>lt.id===be.productId);if(!Me)return be;const tt=p==="RIVAS"?Me.priceRivas:p==="SAN_JORGE"?Me.priceSanJorge:Me.priceIsla;return{...be,pricePerPackage:Number(tt)||0}}))},[p,l]);async function $e(re){const{productId:be,vendorId:Me,branch:tt}=re;if(!be||!Me)return 0;const lt=tr(pt(Ge,"inventory_candies_sellers"),sr("sellerId","==",Me),sr("productId","==",be)),ae=await Lt(lt);if(ae.empty)return 0;const V=ae.docs[0].data(),X=Number(V.unitPriceVendor??0);if(X>0)return X;const me=Number(tt==="RIVAS"?V.unitPriceRivas??0:tt==="SAN_JORGE"?V.unitPriceSanJorge??0:V.unitPriceIsla??0);return Number(me||0)}const Ne=re=>{const be=Number(vt||0),Me=Number(re||0)*be/100;return Math.max(0,Number(Me.toFixed(2)))},ct=async re=>{var Y;if(!re)return;if(!_){R("Selecciona primero el vendedor para usar su inventario."),T("");return}if(O.some(pe=>pe.productId===re)){T("");return}const be=l.find(pe=>pe.id===re);if(!be){T("");return}const Me=await h$(re,_),tt=((Y=u.find(pe=>pe.id===_))==null?void 0:Y.branch)??p,lt=await $e({productId:re,vendorId:_,branch:tt}),V=await(async pe=>{const{productId:ke,vendorId:Re}=pe;if(!ke||!Re)return 0;try{const Ze=tr(pt(Ge,"inventory_candies_sellers"),sr("sellerId","==",Re),sr("productId","==",ke)),nt=await Lt(Ze);if(nt.empty)return 0;const _t=nt.docs[0].data();return Number(_t.providerPrice??0)}catch{return 0}})({productId:re,vendorId:_}),X=(()=>{const pe=Number(be.providerPrice||0);if(pe>0)return pe;const ke=Number(be.providerPricePerUnit||0);return ke>0?ke*Number(be.unitsPerPackage||1):0})(),me=Number(V||0)>0?Number(V||0):Number(X||0),Ie={productId:re,productName:be.name||"",sku:be.sku||"",unitsPerPackage:be.unitsPerPackage||1,pricePerPackage:Number(lt)||0,availableUnits:Number(Me)||0,qtyPackages:0,discount:0,providerPricePerPackage:Number(me)||0,margenVendedor:0,uBruta:0};W(pe=>[...pe,Ie]),T("")},xe=(re,be)=>{W(Me=>Me.map(tt=>{if(tt.productId!==re)return tt;if(be==="")return{...tt,qtyPackages:0};const lt=Math.max(0,Math.floor(Number(be))),ae=f[re]??tt.availableUnits??0,V=Math.max(1,Number(tt.unitsPerPackage||1)),X=Math.floor(ae/V);let me=lt;lt>X&&(me=X,R(` Solo hay ${X} paquetes disponibles.`),setTimeout(()=>R(""),2500));const Ie=Number(tt.pricePerPackage||0)*me,Y=Number(tt.providerPricePerPackage||0)*me,pe=Ie-Y,ke=Ne(pe);return{...tt,qtyPackages:me,margenVendedor:ke,uBruta:pe}}))},Qe=(re,be)=>{W(Me=>Me.map(tt=>{if(tt.productId!==re)return tt;if(be==="")return{...tt,discount:0};const lt=Math.max(0,Math.floor(Number(be))),ae=tt.qtyPackages||0,V=Number(tt.pricePerPackage||0)*ae,X=Number(tt.providerPricePerPackage||0)*ae,me=V-X,Ie=Ne(me);return{...tt,discount:lt,margenVendedor:Ie,uBruta:me}}))},dt=re=>W(be=>be.filter(Me=>Me.productId!==re)),Bt=async()=>{if(!j)return"Selecciona la fecha.";if(!_)return"Selecciona el vendedor para esta venta.";if(O.length===0)return"Agrega al menos un producto.";const re=O.filter(be=>(be.qtyPackages||0)>0);if(re.length===0)return"Debes ingresar cantidades (> 0) en al menos un producto.";if(!(Pe>0))return"El total debe ser mayor a cero.";if(A==="CONTADO"){if(!b.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!x)return"Selecciona un cliente (crdito).";if(F<0)return"El pago inicial no puede ser negativo.";if(F>Xe)return"El pago inicial no puede superar el saldo a deber (saldo actual + venta).";if((Ve==null?void 0:Ve.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede facturar a crdito."}for(const be of re){const Me=be.unitsPerPackage||1,tt=(be.qtyPackages||0)*Me,lt=await h$(be.productId,_),ae=Math.floor(lt/Me);if(tt>lt)return`Inventario insuficiente en el pedido del vendedor para "${be.productName}". Disponible: ${ae} paquetes.`;const V=(Number(be.pricePerPackage)||0)*(be.qtyPackages||0),X=Number(be.discount)||0;if(!Number.isInteger(X)||X<0)return`El descuento en "${be.productName}" debe ser entero y  0.`;if(X>V)return`El descuento en "${be.productName}" no puede exceder C$ ${V.toFixed(2)}.`}return null},qe=async re=>{re.preventDefault(),R("");const be=await Bt();if(be){R(" "+be);return}try{J(!0);const Me=O.filter(X=>(X.qtyPackages||0)>0).map(X=>{const me=X.unitsPerPackage||1,Ie=X.qtyPackages||0,Y=Ie*me,pe=(Number(X.pricePerPackage)||0)*(Ie||0),ke=Math.max(0,Math.floor(Number(X.discount)||0)),Re=Math.max(0,pe-ke),Ze=Number(X.providerPricePerPackage||0),nt=Ze*Ie,_t=pe-nt,Ct=Ne(_t);return{productId:X.productId,productName:X.productName,sku:X.sku||"",qty:Y,packages:Ie,unitsPerPackage:me,branch:p,unitPricePackage:Number(X.pricePerPackage)||0,discount:ke,total:Math.floor(Re*100)/100,providerPricePerPackage:Ze,margenVendedor:Ct,uBruta:_t}}),tt={type:A,branch:p,date:j,createdAt:or.now(),itemsTotal:Number(Pe)||0,total:Number(Pe)||0,quantity:Number(Fe)||0,packagesTotal:Number(ee)||0,items:Me,vendorId:_},lt=u.find(X=>X.id===_);lt&&(tt.vendorName=lt.name,tt.vendorBranch=lt.branch,tt.vendorBranchLabel=lt.branchLabel,tt.vendorCommissionPercent=lt.commissionPercent||0,tt.vendorCommissionAmount=At||0),A==="CONTADO"?tt.customerName=b.trim():(tt.customerId=x,tt.downPayment=Number(F)||0);const ae=await wn(pt(Ge,"sales_candies"),tt);if(A==="CONTADO"){const X=(b||"").trim();if(X)try{await wn(pt(Ge,"cash_customers"),{name:X,date:j,branch:p,vendorId:_,createdAt:or.now()})}catch(me){console.warn("No se pudo guardar cash_customer:",me)}}if(A==="CREDITO"&&x){const X={customerId:x,date:j,createdAt:or.now(),ref:{saleId:ae.id}},me=Number((Ve==null?void 0:Ve.balance)||0);if(await wn(pt(Ge,"ar_movements"),{...X,type:"CARGO",amount:Number(Pe)||0}),Number(F)>0&&await wn(pt(Ge,"ar_movements"),{...X,type:"ABONO",amount:-Number(F)}),me===0)try{await rn(Kt(Ge,"customers_candies",x),{initialDebt:Number(Pe)||0,initialDebtDate:j})}catch(Ie){console.warn("No se pudo setear initialDebt:",Ie)}}const V={};for(const X of Me)if(X.qty>0){const{allocations:me}=await N7e({productId:X.productId,vendorId:_,quantityUnits:X.qty,saleDate:j,saleId:ae.id});V[X.productId]={productId:X.productId,vendorId:_,allocations:me}}await rn(Kt(Ge,"sales_candies",ae.id),{allocationsByItem:V});try{const X=A==="CONTADO"?b.trim()||"Cliente Mostrador":(Ve==null?void 0:Ve.name)||"Cliente crdito";w7e({saleId:ae.id,date:j,customerName:X,branch:p,items:Me.map(me=>({productName:me.productName,qty:me.packages,unitPrice:me.unitPricePackage,total:me.total})),total:Number(Pe)||0,vendorName:lt==null?void 0:lt.name,vendorCommissionPercent:(lt==null?void 0:lt.commissionPercent)||0,vendorCommissionAmount:At})}catch(X){console.error("Error generando voucher PDF:",X)}m("CONTADO"),y(""),w(""),I(m$()),W([]),Q(0),A==="CREDITO"&&x&&i(X=>X.map(me=>me.id===x?{...me,balance:(me.balance||0)+(Number(Pe)||0)-(Number(F)||0)}:me)),R(" Venta de dulces registrada"),_?await ye(_):h({})}catch(Me){console.error(Me),R(" Error al guardar la venta de dulces")}finally{J(!1)}},bt=v.useMemo(()=>l.filter(re=>{const be=f[re.id]||0,Me=Math.max(1,Number(re.unitsPerPackage||1));return Math.floor(be/Me)>0}).sort((re,be)=>(re.name||"").localeCompare(be.name||"")),[l,f]),[G,te]=v.useState(""),He=v.useMemo(()=>{const re=String(G||"").trim().toLowerCase();return re?bt.filter(be=>`${be.name||""} ${be.sku||""}`.toLowerCase().includes(re)||String(be.id||"").includes(re)):bt},[G,bt]);return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-3",children:o.jsx("h2",{className:"text-2xl font-bold",children:"Ventas (Dulces)"})}),o.jsxs("form",{onSubmit:qe,className:"bg-white p-3 sm:p-4 rounded shadow border mb-6",children:[o.jsxs("div",{className:"hidden md:grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:A,onChange:re=>m(re.target.value),children:[o.jsx("option",{value:"CONTADO",children:"Contado"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),A==="CONTADO"?o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del cliente (contado)"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Cliente Mostrador",value:b,onChange:re=>w(re.target.value)})]}):o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[o.jsxs("select",{className:"w-full sm:flex-1 border p-2 rounded",value:x,onChange:re=>y(re.target.value),children:[o.jsx("option",{value:"",children:"Selecciona un cliente"}),ue.map(re=>o.jsxs("option",{value:re.status==="ACTIVO"?re.id:"",disabled:re.status==="BLOQUEADO",children:[re.name," | ",re.phone," | Saldo: ",dc(re.balance||0)]},re.id))]}),o.jsx("button",{type:"button",className:"w-full sm:w-auto px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>U(!0),children:"Crear Cliente"})]}),o.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-lg font-semibold",children:dc(ce)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",max:Xe,className:"w-full border p-2 rounded",value:F===0?"":F,onChange:re=>{const be=ft(re.target.value);Q(be)},placeholder:"0.00"})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),o.jsx("div",{className:"text-lg font-semibold",children:dc(Te)})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:j,onChange:re=>I(re.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:_,onChange:re=>{S(re.target.value),W([])},disabled:E,children:[o.jsx("option",{value:"",children:"Selecciona un vendedor"}),u.map(re=>o.jsxs("option",{value:re.id,children:[re.name,"  ",re.branchLabel,"  ",re.commissionPercent.toFixed(2),"%"," comisin"]},re.id))]}),E&&o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Vendedor fijado por el usuario logueado."})]}),o.jsxs("div",{className:"md:col-span-1",children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Lista de precios / Sucursal"}),o.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[o.jsxs("label",{className:"inline-flex items-center gap-1",children:[o.jsx("input",{type:"radio",className:"accent-blue-600",value:"RIVAS",checked:p==="RIVAS",readOnly:!0,disabled:!0}),o.jsx("span",{children:"Rivas"})]}),o.jsxs("label",{className:"inline-flex items-center gap-1",children:[o.jsx("input",{type:"radio",className:"accent-blue-600",value:"SAN_JORGE",checked:p==="SAN_JORGE",readOnly:!0,disabled:!0}),o.jsx("span",{children:"San Jorge"})]}),o.jsxs("label",{className:"inline-flex items-center gap-1",children:[o.jsx("input",{type:"radio",className:"accent-blue-600",value:"ISLA",checked:p==="ISLA",readOnly:!0,disabled:!0}),o.jsx("span",{children:"Isla de Ometepe"})]})]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"La sucursal se toma automticamente del vendedor seleccionado."})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),o.jsxs("div",{className:"mt-1 mb-2 flex gap-2",children:[o.jsx("input",{className:"flex-1 border rounded px-2 py-2",placeholder:_?"Buscar producto por nombre o SKU":"Selecciona un vendedor primero",value:G,onChange:re=>te(re.target.value),disabled:!_}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>we(!0),disabled:!_,children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("rect",{x:"3",y:"3",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"15",y:"3",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"})]})})]}),o.jsxs("select",{className:"w-full border p-2 rounded",value:P,onChange:async re=>{const be=re.target.value;T(be),await ct(be)},disabled:!_,children:[o.jsx("option",{value:"",children:_?"Selecciona un producto":"Selecciona un vendedor primero"}),He.map(re=>{const be=O.some(ae=>ae.productId===re.id),Me=f[re.id]||0,tt=Math.max(1,Number(re.unitsPerPackage||1)),lt=Math.floor(Me/tt);return lt<=0?null:o.jsxs("option",{value:be?"":re.id,disabled:be,children:[re.name," ",re.sku?` ${re.sku}`:""," (disp: ",lt," ","paq.)",be?" ":""]},re.id)})]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"El selector solo muestra productos disponibles del pedido del vendedor seleccionado (sin ceros)."})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("div",{className:"w-full overflow-x-auto",children:o.jsxs("div",{className:"border rounded overflow-hidden min-w-[860px]",children:[o.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 px-3 py-2 text-xs font-semibold border-b",children:[o.jsx("div",{className:"col-span-4",children:"Producto"}),o.jsx("div",{className:"col-span-2 text-right",children:"Precio (paq.)"}),o.jsx("div",{className:"col-span-2 text-right",children:"Existencias (paq.)"}),o.jsx("div",{className:"col-span-1 text-right",children:"Cantidad (paq.)"}),o.jsx("div",{className:"col-span-1 text-right",children:"Descuento"}),o.jsx("div",{className:"col-span-1 text-right",children:"Monto"}),o.jsx("div",{className:"col-span-1 text-center",children:"Quitar"})]}),O.length===0?o.jsx("div",{className:"px-3 py-4 text-sm text-gray-500",children:"No hay productos agregados."}):O.map(re=>{const be=f[re.productId]??re.availableUnits??0,Me=re.unitsPerPackage?Math.floor(be/re.unitsPerPackage):0,tt=Math.max(0,Me-(re.qtyPackages||0)),lt=(Number(re.pricePerPackage)||0)*(re.qtyPackages||0),ae=Math.max(0,lt-(Number(re.discount)||0));return o.jsxs("div",{className:"grid grid-cols-12 items-center px-3 py-2 border-b text-sm gap-x-2",children:[o.jsx("div",{className:"col-span-4",children:o.jsxs("div",{className:"font-medium",children:[re.productName,re.sku?`  ${re.sku}`:""]})}),o.jsx("div",{className:"col-span-2 text-right",children:dc(re.pricePerPackage)}),o.jsxs("div",{className:"col-span-2 text-right",children:[tt," paq."]}),o.jsx("div",{className:"col-span-1",children:o.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(re.qtyPackages)||re.qtyPackages===0?"":re.qtyPackages,onChange:V=>xe(re.productId,V.target.value),inputMode:"numeric",placeholder:"0"})}),o.jsx("div",{className:"col-span-1",children:o.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(re.discount)||re.discount===0?"":re.discount,onChange:V=>Qe(re.productId,V.target.value),inputMode:"numeric",placeholder:"0"})}),o.jsx("div",{className:"col-span-1 text-right",children:dc(ae)}),o.jsx("div",{className:"col-span-1 text-center",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 hover:bg-red-200",onClick:()=>dt(re.productId),title:"Quitar producto",children:""})})]},re.productId)})]})}),O.length>0&&o.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-end gap-2 sm:gap-6 mt-3 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Paquetes totales: "}),o.jsx("span",{className:"font-semibold",children:ee})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Total: "}),o.jsx("span",{className:"font-semibold",children:dc(Pe)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Comisin vendedor: "}),o.jsxs("span",{className:"font-semibold",children:[dc(At)," ",vt?`(${vt.toFixed(2)}%)`:""]})]})]})]}),o.jsx("div",{className:"md:col-span-2",children:o.jsx("button",{type:"submit",className:"w-full sm:w-auto bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",disabled:z,children:z?"Guardando...":"Registrar venta"})})]}),o.jsxs("div",{className:"md:hidden space-y-3",children:[o.jsxs("div",{className:"bg-white rounded-xl border shadow",children:[o.jsxs("button",{type:"button",onClick:()=>de(re=>!re),className:"w-full flex justify-between items-center p-3 font-semibold",children:["Datos de venta",o.jsx("span",{className:"text-lg",children:Ae?"":"+"})]}),Ae&&o.jsxs("div",{className:"p-3 space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:j,onChange:re=>I(re.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:A,onChange:re=>m(re.target.value),children:[o.jsx("option",{value:"CONTADO",children:"Contado"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),A==="CONTADO"?o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (Cash)"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mario Bergoglio",value:b,onChange:re=>w(re.target.value)})]}):o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsxs("select",{className:"w-full border p-2 rounded",value:x,onChange:re=>y(re.target.value),children:[o.jsx("option",{value:"",children:"Selecciona un cliente"}),ue.map(re=>o.jsxs("option",{value:re.status==="ACTIVO"?re.id:"",disabled:re.status==="BLOQUEADO",children:[re.name," | Saldo: ",dc(re.balance||0)]},re.id))]}),o.jsx("button",{type:"button",className:"w-full px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>U(!0),children:"Crear Cliente"})]}),o.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-base font-semibold",children:dc(ce)})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),o.jsx("div",{className:"text-base font-semibold",children:dc(Te)})]})]}),o.jsxs("div",{className:"mt-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",max:Xe,className:"w-full border p-2 rounded",value:F===0?"":F,onChange:re=>{const be=ft(re.target.value);Q(be)},placeholder:"0.00"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:_,onChange:re=>{S(re.target.value),W([])},disabled:E,children:[o.jsx("option",{value:"",children:"Selecciona un vendedor"}),u.map(re=>o.jsxs("option",{value:re.id,children:[re.name,"  "," ",re.commissionPercent.toFixed(2),"%"]},re.id))]}),E&&o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Vendedor Logueado en esta app."})]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl border shadow",children:[o.jsxs("button",{type:"button",onClick:()=>ge(re=>!re),className:"w-full flex justify-between items-center p-3 font-semibold",children:["Agrega Productos",o.jsx("span",{className:"text-lg",children:fe?"":"+"})]}),fe&&o.jsxs("div",{className:"p-3 space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Productos"}),o.jsxs("div",{className:"mt-1 mb-2 flex gap-2",children:[o.jsx("input",{className:"flex-1 border rounded px-2 py-2",placeholder:_?"Buscar producto por nombre o SKU":"Selecciona un vendedor primero",value:G,onChange:re=>te(re.target.value),disabled:!_}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>we(!0),disabled:!_,children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("rect",{x:"3",y:"3",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"15",y:"3",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"})]})})]}),o.jsxs("select",{className:"w-full border p-2 rounded",value:P,onChange:async re=>{const be=re.target.value;T(be),await ct(be)},disabled:!_,children:[o.jsx("option",{value:"",children:_?"Selecciona un producto":"Selecciona un vendedor primero"}),He.map(re=>{const be=O.some(ae=>ae.productId===re.id),Me=f[re.id]||0,tt=Math.max(1,Number(re.unitsPerPackage||1)),lt=Math.floor(Me/tt);return lt<=0?null:o.jsxs("option",{value:be?"":re.id,disabled:be,children:[re.name," ",re.sku?` ${re.sku}`:""," (disp:"," ",lt," paq.)",be?" ":""]},re.id)})]})]}),O.length===0?o.jsx("div",{className:"text-sm text-gray-500",children:"No hay productos agregados."}):o.jsx("div",{className:"space-y-2",children:O.map(re=>{const be=f[re.productId]??re.availableUnits??0,Me=re.unitsPerPackage?Math.floor(be/re.unitsPerPackage):0,tt=Math.max(0,Me-(re.qtyPackages||0)),lt=(Number(re.pricePerPackage)||0)*(re.qtyPackages||0),ae=Math.max(0,lt-(Number(re.discount)||0));return o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50 space-y-2",children:[o.jsxs("div",{className:"font-semibold leading-tight",children:[re.productName,re.sku?`  ${re.sku}`:""]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{className:"p-2 rounded border bg-white",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Precio x Paquete"}),o.jsx("div",{className:"font-bold",children:dc(re.pricePerPackage)})]}),o.jsxs("div",{className:"p-2 rounded border bg-white",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Existencias"}),o.jsxs("div",{className:"font-bold",children:[tt," paq."]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Cantidad Paquetes"}),o.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-2 rounded text-right",value:Number.isNaN(re.qtyPackages)||re.qtyPackages===0?"":re.qtyPackages,onChange:V=>xe(re.productId,V.target.value),inputMode:"numeric",placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Descuento"}),o.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-2 rounded text-right",value:Number.isNaN(re.discount)||re.discount===0?"":re.discount,onChange:V=>Qe(re.productId,V.target.value),inputMode:"numeric",placeholder:"0"})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"font-regular text-gray-600",children:["Total ",dc(ae)]}),o.jsxs("div",{className:"font-regular text-gray-600",children:["Comision ",dc(re.margenVendedor||0)]}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded-lg bg-red-100 hover:bg-red-200",onClick:()=>dt(re.productId),children:"Quitar"})]})]},re.productId)})}),O.length>0&&o.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),o.jsx("div",{className:"font-semibold",children:ee})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total"}),o.jsx("div",{className:"font-semibold",children:dc(Pe)})]})]})]})]}),o.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white px-4 py-3 rounded-xl hover:bg-blue-700 disabled:opacity-60",disabled:z,children:z?"Guardando...":"Registrar venta"})]})]}),H&&o.jsx("p",{className:"mt-2 text-sm",children:H}),D&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-2 sm:p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[98%] sm:w-[95%] max-w-xl p-3 sm:p-4 max-h-[92vh] overflow-auto",children:[o.jsx("h3",{className:"text-lg font-bold mb-3",children:"Nuevo cliente"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded",value:ne,onChange:re=>ve(re.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),o.jsx("input",{className:"w-full border p-2 rounded",value:L,onChange:re=>Ye(p$(re.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:ie,onChange:re=>Z(re.target.value),children:[o.jsx("option",{value:"",children:""}),v7e.map(re=>o.jsx("option",{value:re,children:re},re))]})]}),!E&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:mt,onChange:re=>ut(re.target.value),children:[o.jsx("option",{value:"",children:"Selecciona un vendedor"}),u.filter(re=>(re.status??"ACTIVO")==="ACTIVO").map(re=>o.jsxs("option",{value:re.id,children:[re.name,"  ",re.branchLabel]},re.id))]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Oe,onChange:re=>le(re.target.value),maxLength:500})]})]}),o.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row justify-end gap-2",children:[o.jsx("button",{className:"w-full sm:w-auto px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{_e(),U(!1)},children:"Cancelar"}),o.jsx("button",{className:"w-full sm:w-auto px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:async()=>{var Me;const re=E?_||r:mt;if(!re){R("Selecciona el vendedor para asociar este cliente.");return}if(R(""),!ne.trim()){R("Ingresa el nombre del nuevo cliente.");return}const be=p$(L);try{const tt=await wn(pt(Ge,"customers_candies"),{name:ne.trim(),phone:be,place:ie||"",notes:Oe||"",status:se,creditLimit:Number(je||0),createdAt:or.now(),sellerId:re,vendorId:re,vendorName:((Me=u.find(ae=>ae.id===re))==null?void 0:Me.name)||""}),lt={id:tt.id,name:ne.trim(),phone:be,place:ie||"",status:se,creditLimit:Number(je||0),balance:0,sellerId:re};i(ae=>[lt,...ae]),y(tt.id),_e(),U(!1),R(" Cliente creado")}catch(tt){console.error(tt),R(" Error al crear cliente")}},children:"Guardar cliente"})]})]})}),o.jsx(Ue,{open:rt,onClose:()=>we(!1),onDetected:Ce}),z&&o.jsx("div",{className:"fixed inset-0 z-[70] bg-black/40 flex items-center justify-center p-2",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border px-4 py-3 flex items-center gap-3",children:[o.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),o.jsx("span",{className:"font-medium",children:"Guardando venta"})]})})]})}const g$=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal"],WC=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function _7e(){const[t,e]=v.useState(br(Zd(new Date),"yyyy-MM-dd")),[r,n]=v.useState(br(Jd(new Date),"yyyy-MM-dd")),[a,s]=v.useState(br(new Date,"yyyy-MM-dd")),[i,l]=v.useState(""),[c,u]=v.useState(""),[d,f]=v.useState(0),[h,A]=v.useState("PENDIENTE"),[m,p]=v.useState(""),[g,x]=v.useState([]),[y,b]=v.useState(!0),[w,j]=v.useState(""),[I,_]=v.useState(null),[S,E]=v.useState(""),[k,P]=v.useState(""),[T,O]=v.useState(""),[W,Ae]=v.useState(0),[de,fe]=v.useState("PENDIENTE"),[ge,ee]=v.useState("");v.useEffect(()=>{(async()=>{b(!0);try{const D=tr(pt(Ge,"expenses_candies"),ln("date","desc")),U=await Lt(D),ne=[];U.forEach(ve=>{const L=ve.data();ne.push({id:ve.id,date:L.date||br(new Date,"yyyy-MM-dd"),category:L.category||"",description:L.description||"",amount:Number(L.amount||0),status:L.status||"PENDIENTE",notes:L.notes||"",createdAt:L.createdAt??or.now()})}),x(ne)}catch(D){console.error(D),j(" Error al cargar gastos")}finally{b(!1)}})()},[]);const Fe=v.useMemo(()=>g.filter(D=>!(t&&D.date<t||r&&D.date>r)),[g,t,r]),Pe=v.useMemo(()=>{const D=Fe.reduce((ve,L)=>ve+(L.amount||0),0),U=Fe.filter(ve=>ve.status==="PAGADO").reduce((ve,L)=>ve+(L.amount||0),0),ne=D-U;return{total:D,pagado:U,pendiente:ne}},[Fe]),F=()=>{s(br(new Date,"yyyy-MM-dd")),l(""),u(""),f(0),A("PENDIENTE"),p("")},Q=async D=>{if(D.preventDefault(),j(""),!i){j("Selecciona una categora.");return}if(!c.trim()){j("Ingresa una descripcin.");return}if(!d||d<=0){j("Ingresa un monto vlido.");return}try{const U=await wn(pt(Ge,"expenses_candies"),{date:a,category:i,description:c.trim(),amount:Number(d.toFixed(2)),status:h,notes:m||"",createdAt:or.now()});x(ne=>[{id:U.id,date:a,category:i,description:c.trim(),amount:Number(d.toFixed(2)),status:h,notes:m||"",createdAt:or.now()},...ne]),F(),j(" Gasto registrado")}catch(U){console.error(U),j(" Error al guardar gasto")}},H=D=>{_(D.id),E(D.date),P(D.category||""),O(D.description||""),Ae(Number(D.amount||0)),fe(D.status||"PENDIENTE"),ee(D.notes||"")},R=()=>{_(null),E(""),P(""),O(""),Ae(0),fe("PENDIENTE"),ee("")},z=async()=>{if(I){if(!k){j("Selecciona una categora.");return}if(!T.trim()){j("Ingresa una descripcin.");return}if(!W||W<=0){j("Ingresa un monto vlido.");return}try{await rn(Kt(Ge,"expenses_candies",I),{date:S,category:k,description:T.trim(),amount:Number(W.toFixed(2)),status:de,notes:ge||""}),x(D=>D.map(U=>U.id===I?{...U,date:S,category:k,description:T.trim(),amount:Number(W.toFixed(2)),status:de,notes:ge||""}:U)),R(),j(" Gasto actualizado")}catch(D){console.error(D),j(" Error al actualizar gasto")}}},J=async D=>{confirm(`Eliminar el gasto "${D.description}"?`)&&(await yn(Kt(Ge,"expenses_candies",D.id)),x(ne=>ne.filter(ve=>ve.id!==D.id)),j(" Gasto borrado"))};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Dulces)"}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:D=>e(D.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:D=>n(D.target.value)})]}),o.jsxs("div",{className:"ml-auto text-sm",children:[o.jsx("div",{className:"font-semibold",children:"Totales del rango"}),o.jsxs("div",{children:["Total: ",WC(Pe.total)]}),o.jsxs("div",{children:["Pagado: ",WC(Pe.pagado)]}),o.jsxs("div",{children:["Pendiente: ",WC(Pe.pendiente)]})]})]}),o.jsxs("form",{onSubmit:Q,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:a,onChange:D=>s(D.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:i,onChange:D=>l(D.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),g$.map(D=>o.jsx("option",{value:D,children:D},D))]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:c,onChange:D=>u(D.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:d===0?"":d,onChange:D=>f(Math.max(0,Number(D.target.value||0))),placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:h,onChange:D=>A(D.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:m,onChange:D=>p(D.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[m.length,"/500"]})]}),o.jsx("div",{className:"md:col-span-2",children:o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):Fe.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):Fe.slice().sort((D,U)=>D.date.localeCompare(U.date)).map(D=>{const U=I===D.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:U?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:S,onChange:ne=>E(ne.target.value)}):D.date}),o.jsx("td",{className:"p-2 border",children:U?o.jsxs("select",{className:"w-full border p-1 rounded",value:k,onChange:ne=>P(ne.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),g$.map(ne=>o.jsx("option",{value:ne,children:ne},ne))]}):D.category||""}),o.jsx("td",{className:"p-2 border",children:U?o.jsx("input",{className:"w-full border p-1 rounded",value:T,onChange:ne=>O(ne.target.value)}):o.jsx("span",{title:D.description,children:D.description.length>40?D.description.slice(0,40)+"":D.description})}),o.jsx("td",{className:"p-2 border",children:U?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(W)?"":W,onChange:ne=>Ae(Math.max(0,Number(ne.target.value||0)))}):WC(D.amount)}),o.jsx("td",{className:"p-2 border",children:U?o.jsxs("select",{className:"w-full border p-1 rounded",value:de,onChange:ne=>fe(ne.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${D.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:D.status})}),o.jsx("td",{className:"p-2 border",children:U?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:ge,onChange:ne=>ee(ne.target.value),maxLength:500}):o.jsx("span",{title:D.notes||"",children:(D.notes||"").length>40?(D.notes||"").slice(0,40)+"":D.notes||""})}),o.jsx("td",{className:"p-2 border",children:o.jsx("div",{className:"flex gap-2 justify-center",children:U?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:z,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:R,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>H(D),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>J(D),children:"Borrar"})]})})})]},D.id)})})]})}),w&&o.jsx("p",{className:"mt-2 text-sm",children:w})]})}const fc=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function E7e(t){var e;return t!=null&&t.date?t.date:(e=t==null?void 0:t.createdAt)!=null&&e.toDate?br(t.createdAt.toDate(),"yyyy-MM-dd"):""}function S7e(t,e){var s,i,l;const r=E7e(t);if(!r)return null;let n=0,a=0;return Array.isArray(t.items)&&t.items.length>0?(n=t.items.reduce((c,u)=>c+(Number(u.packages??u.qty??u.quantity??0)||0),0),a=Number(t.total??t.itemsTotal??0)||0):(n=Number(t.packagesTotal??t.quantity??((s=t.item)==null?void 0:s.packages)??((i=t.item)==null?void 0:i.qty)??0)||0,a=Number(t.total??((l=t.item)==null?void 0:l.total)??0)||0),{id:e,date:r,type:t.type||"CONTADO",total:a,quantity:n,customerId:t.customerId||void 0,customerName:t.customerName||void 0,downPayment:Number(t.downPayment||0),vendorId:t.vendorId||void 0,vendorName:t.vendorName||t.vendor||void 0,vendorCommissionPercent:Number(t.vendorCommissionPercent||0)||0,vendorCommissionAmount:Number(t.vendorCommissionAmount||0)||0}}async function I7e(t){const e=tr(pt(Ge,"ar_movements"),sr("ref.saleId","==",t)),r=await Lt(e);await Promise.all(r.docs.map(n=>yn(Kt(Ge,"ar_movements",n.id))))}function j7e({role:t="",sellerCandyId:e="",roles:r}){const n=r&&r.length?r:t,a=zr(n,"vendedor_dulces"),s=zr(n,"admin"),i=s?8:7,[l,c]=v.useState(!1),[u,d]=v.useState(!1),[f,h]=v.useState(null),[A,m]=v.useState([]),p=async se=>{c(!0),d(!0),h(se),m([]);try{const Be=await xi(Kt(Ge,"sales_candies",se)),je=Be.exists()?Be.data():null;if(!je){m([]);return}const mt=(Array.isArray(je==null?void 0:je.items)?je.items:je!=null&&je.item?[je.item]:[]).map(ut=>({productName:String(ut.productName||""),qty:Number(ut.packages??ut.qty??ut.quantity??0),unitPrice:Number(ut.unitPricePackage??ut.unitPrice??0),discount:Number(ut.discount||0),total:Number(ut.total??ut.lineFinal??0)}));m(mt)}catch(Be){console.error(Be)}finally{d(!1)}},[g,x]=v.useState(br(new Date,"yyyy-MM-01")),[y,b]=v.useState(br(new Date,"yyyy-MM-dd")),[w,j]=v.useState([]),[I,_]=v.useState([]),[S,E]=v.useState([]),[k,P]=v.useState(!0),[T,O]=v.useState(""),[W,Ae]=v.useState(""),[de,fe]=v.useState(""),[ge,ee]=v.useState(null),Fe=15,[Pe,F]=v.useState(1),Q=v.useMemo(()=>{const se={};return w.forEach(Be=>se[Be.id]=Be.name),se},[w]),H=v.useMemo(()=>{const se={};return S.forEach(Be=>{se[Be.id]=Be}),se},[S]),R=se=>{const Be=Number(se.vendorCommissionAmount||0);if(Be>0)return Be;if(!se.vendorId)return 0;const je=H[se.vendorId];if(!je||!je.commissionPercent)return 0;const ot=(Number(se.total)||0)*(Number(je.commissionPercent)||0)/100;return Number(ot.toFixed(2))};v.useEffect(()=>{(async()=>{P(!0),O("");try{const se=await Lt(pt(Ge,"customers_candies")),Be=[];se.forEach(_e=>Be.push({id:_e.id,name:_e.data().name||""})),j(Be);const je=await Lt(pt(Ge,"sellers_candies")),ot=[];je.forEach(_e=>{const rt=_e.data();ot.push({id:_e.id,name:rt.name||"",commissionPercent:Number(rt.commissionPercent||0)})}),E(ot);const mt=await Lt(tr(pt(Ge,"sales_candies"),ln("createdAt","desc"))),ut=[];mt.forEach(_e=>{const rt=S7e(_e.data(),_e.id);rt&&rt.date>=g&&rt.date<=y&&ut.push(rt)}),_(ut.sort((_e,rt)=>rt.date.localeCompare(_e.date))),F(1)}catch(se){console.error(se),O(" Error cargando transacciones.")}finally{P(!1)}})()},[g,y]);const z=v.useMemo(()=>I.filter(se=>!(a&&(!e||!se.vendorId||se.vendorId!==e)||W&&se.customerId!==W||de&&se.type!==de)),[I,W,de,a,e]),J=v.useMemo(()=>{let se=0,Be=0,je=0,ot=0;for(const mt of z)mt.type==="CONTADO"?(se+=mt.quantity,je+=mt.total):(Be+=mt.quantity,ot+=mt.total);return{packsCash:se,packsCredito:Be,montoCash:je,montoCredito:ot}},[z]),D=Math.max(1,Math.ceil(z.length/Fe)),U=v.useMemo(()=>{const se=(Pe-1)*Fe;return z.slice(se,se+Fe)},[z,Pe]),ne=v.useMemo(()=>f&&I.find(se=>se.id===f)||null,[f,I]),ve=async se=>{if(s&&(ee(null),!!window.confirm("Eliminar esta venta de dulces? Se restaurar el inventario asociado.")))try{P(!0),await k2(se.id),await I7e(se.id),_(Be=>Be.filter(je=>je.id!==se.id)),O(" Venta eliminada")}catch(Be){console.error(Be),O(" No se pudo eliminar la venta.")}finally{P(!1)}},L=()=>{const se=`Ventas del dia  ${g} a ${y}`,Be=ut=>(ut||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),je=z.map(ut=>{const _e=ut.customerName||(ut.customerId?Q[ut.customerId]:"")||"Nombre cliente";return`<tr>
          <td>${ut.date}</td>
          <td>${Be(_e)}</td>
          <td>${ut.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${ut.quantity}</td>
          <td style="text-align:right">${fc(ut.total)}</td>
        </tr>`}).join(""),ot=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${Be(se)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${Be(se)}</h1>
      <div class="kpis">
        <div><b>Paquetes Cash:</b> ${J.packsCash}</div>
        <div><b>Paquetes Crdito:</b> ${J.packsCredito}</div>
        <div><b>Monto Cash:</b> ${fc(J.montoCash)}</div>
        <div><b>Monto Crdito:</b> ${fc(J.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Paquetes</th><th>Monto</th>
      </tr></thead><tbody>
      ${je||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,mt=window.open("","_blank");mt&&(mt.document.open(),mt.document.write(ot),mt.document.close())},Ye=()=>F(1),ie=()=>F(se=>Math.max(1,se-1)),Z=()=>F(se=>Math.min(D,se+1)),Oe=()=>F(D),le=()=>{const se=[];if(D<=7)for(let je=1;je<=D;je++)se.push(je);else{const je=Math.max(1,Pe-2),ot=Math.min(D,Pe+2);se.push(1),je>2&&se.push(-1);for(let mt=je;mt<=ot;mt++)mt!==1&&mt!==D&&se.push(mt);ot<D-1&&se.push(-2),se.push(D)}return o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 justify-between mt-3",children:[o.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Ye,disabled:Pe===1,children:" Primero"}),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ie,disabled:Pe===1,children:" Anterior"}),se.map((je,ot)=>typeof je=="number"?o.jsx("button",{className:`px-3 py-1 border rounded ${je===Pe?"bg-blue-600 text-white":""}`,onClick:()=>F(je),children:je},ot):o.jsx("span",{className:"px-2",children:""},ot)),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Z,disabled:Pe===D,children:"Siguiente "}),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Oe,disabled:Pe===D,children:"ltimo "})]}),o.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",Pe," de ",D,"  ",z.length," transaccin(es)"]})]})};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas del dia"}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 items-end text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:g,onChange:se=>{x(se.target.value),F(1)}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:y,onChange:se=>{b(se.target.value),F(1)}})]}),o.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[o.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:W,onChange:se=>{Ae(se.target.value),F(1)},children:[o.jsx("option",{value:"",children:"Todos"}),w.map(se=>o.jsx("option",{value:se.id,children:se.name},se.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Tipo"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:de,onChange:se=>{fe(se.target.value),F(1)},children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"CONTADO",children:"Cash"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),o.jsx("button",{className:"sm:col-span-2 lg:col-span-1 px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 w-full",onClick:L,children:"Exportar PDF"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:J.packsCash})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:J.packsCredito})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:fc(J.montoCash)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:fc(J.montoCredito)})]})]}),o.jsxs("div",{className:"block md:hidden space-y-3",children:[k?o.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Cargando"}):U.length===0?o.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Sin transacciones en el rango."}):U.map(se=>{const Be=se.customerName||(se.customerId?Q[se.customerId]:"")||"Nombre cliente",je=R(se);return o.jsx("div",{className:"bg-white border rounded-xl shadow",children:o.jsxs("details",{className:"group",children:[o.jsxs("summary",{className:"list-none cursor-pointer p-3 flex items-start gap-3",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("div",{className:"font-semibold truncate",children:Be}),o.jsx("div",{className:"text-xs text-gray-600 shrink-0",children:se.date})]}),o.jsxs("div",{className:"mt-1 flex items-center gap-2 flex-wrap text-xs",children:[o.jsx("span",{className:`px-2 py-1 rounded-full border ${se.type==="CREDITO"?"bg-yellow-50 border-yellow-200 text-yellow-700":"bg-green-50 border-green-200 text-green-700"}`,children:se.type==="CREDITO"?"Crdito":"Cash"}),o.jsxs("span",{className:"text-gray-700",children:[o.jsx("b",{children:"Paquetes:"})," ",o.jsx("button",{type:"button",className:"underline text-blue-600",onClick:ot=>{ot.preventDefault(),p(se.id)},title:"Ver detalle",children:se.quantity})]}),o.jsxs("span",{className:"text-gray-700",children:[o.jsx("b",{children:"Monto:"})," ",fc(se.total)]})]})]}),o.jsx("div",{className:"text-gray-500 mt-1",children:o.jsx("span",{className:"inline-block transition-transform group-open:rotate-180",children:""})})]}),o.jsx("div",{className:"px-3 pb-3 pt-0 text-sm",children:o.jsxs("div",{className:"grid grid-cols-1 gap-2 border-t pt-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Cliente"}),o.jsx("span",{className:"font-medium text-right",children:Be})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Fecha"}),o.jsx("span",{className:"font-medium",children:se.date})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Tipo"}),o.jsx("span",{className:"font-medium",children:se.type==="CREDITO"?"Crdito":"Cash"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Paquetes"}),o.jsx("span",{className:"font-medium",children:o.jsx("button",{type:"button",className:"underline text-blue-600",onClick:()=>p(se.id),title:"Ver detalle",children:se.quantity})})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Monto"}),o.jsx("span",{className:"font-semibold",children:fc(se.total)})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Comisin"}),o.jsx("span",{className:"font-medium",children:je>0?fc(je):""})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Vendedor"}),o.jsx("span",{className:"font-medium",children:se.vendorName||""})]}),s&&o.jsxs("div",{className:"pt-2 flex items-center justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded border hover:bg-gray-50",onClick:()=>ee(ot=>ot===se.id?null:se.id),children:" Acciones"}),ge===se.id&&o.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>ve(se),children:"Eliminar"})]})]})})]})},se.id)}),o.jsx("div",{className:"bg-white p-3 rounded shadow border",children:le()})]}),o.jsxs("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full",children:[o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Cliente"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Comisin"}),o.jsx("th",{className:"p-2 border",children:"Vendedor"}),s&&o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:k?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:i,children:"Cargando"})}):U.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:i,children:"Sin transacciones en el rango."})}):U.map(se=>{const Be=se.customerName||(se.customerId?Q[se.customerId]:"")||"Nombre cliente",je=R(se);return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:se.date}),o.jsx("td",{className:"p-2 border",children:Be}),o.jsx("td",{className:"p-2 border",children:se.type==="CREDITO"?"Crdito":"Cash"}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver detalle de productos de esta venta",onClick:()=>p(se.id),children:se.quantity})}),o.jsx("td",{className:"p-2 border",children:fc(se.total)}),o.jsx("td",{className:"p-2 border",children:je>0?fc(je):""}),o.jsx("td",{className:"p-2 border",children:se.vendorName||""}),s&&o.jsxs("td",{className:"p-2 border relative",children:[o.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>ee(ot=>ot===se.id?null:se.id),title:"Acciones",children:""}),ge===se.id&&o.jsx("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:o.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>ve(se),children:"Eliminar"})})]})]},se.id)})})]}),le()]}),T&&o.jsx("p",{className:"mt-2 text-sm",children:T}),l&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Productos/paquetes vendidos"," ",f?` #${f}`:""]}),ne&&o.jsxs("div",{className:"text-sm text-gray-700 mt-1",children:["Comisin de vendedor:"," ",o.jsx("span",{className:"font-semibold",children:R(ne)>0?fc(R(ne)):""})]})]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>c(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Paquetes"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio"}),o.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),o.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),o.jsx("tbody",{children:u?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):A.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):A.map((se,Be)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border text-left",children:se.productName}),o.jsx("td",{className:"p-2 border text-right",children:se.qty}),o.jsx("td",{className:"p-2 border text-right",children:fc(se.unitPrice)}),o.jsx("td",{className:"p-2 border text-right",children:fc(se.discount||0)}),o.jsx("td",{className:"p-2 border text-right",children:fc(se.total)})]},Be))})]})})]})})]})}const Fn=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Hy(t){var r;const e=t==null?void 0:t.date;return e||((r=t==null?void 0:t.createdAt)!=null&&r.toDate?br(t.createdAt.toDate(),"yyyy-MM-dd"):"")}function P7e(t){if(Array.isArray(t==null?void 0:t.items))return t.items.map(n=>{const a=Number((n==null?void 0:n.packages)??(n==null?void 0:n.qty)??(n==null?void 0:n.quantity)??0)||0,s=Number((n==null?void 0:n.unitPricePackage)??(n==null?void 0:n.unitPrice)??0)||(a>0?Number((n==null?void 0:n.total)??(n==null?void 0:n.lineFinal)??0)/a:0)||0;return{productId:String((n==null?void 0:n.productId)||""),productName:String((n==null?void 0:n.productName)||""),sku:(n==null?void 0:n.sku)||"",qty:a,unitPrice:Number(s||0),discount:Number((n==null?void 0:n.discount)||0),vendorCommissionAmount:Number((n==null?void 0:n.vendorCommissionAmount)??(n==null?void 0:n.commissionAmount)??0)}});if(t!=null&&t.item){const n=t.item,a=Number((n==null?void 0:n.packages)??(n==null?void 0:n.qty)??(n==null?void 0:n.quantity)??0)||Number((t==null?void 0:t.packagesTotal)??(t==null?void 0:t.quantity)??0)||0,s=Number((n==null?void 0:n.unitPricePackage)??(n==null?void 0:n.unitPrice)??0)||(a>0?Number((n==null?void 0:n.total)??(t==null?void 0:t.total)??0)/a:0)||0;return[{productId:String((n==null?void 0:n.productId)||""),productName:String((n==null?void 0:n.productName)||""),sku:(n==null?void 0:n.sku)||"",qty:a,unitPrice:Number(s||0),discount:Number((n==null?void 0:n.discount)||0),vendorCommissionAmount:Number((n==null?void 0:n.vendorCommissionAmount)??(n==null?void 0:n.commissionAmount)??0)}]}const e=Number((t==null?void 0:t.packagesTotal)??(t==null?void 0:t.quantity)??0)||0,r=e>0?Number((t==null?void 0:t.total)||0)/e:0;return e>0?[{productId:String((t==null?void 0:t.productId)||""),productName:String((t==null?void 0:t.productName)||""),sku:(t==null?void 0:t.sku)||"",qty:e,unitPrice:Number(r||0),discount:Number((t==null?void 0:t.discount)||0),vendorCommissionAmount:Number((t==null?void 0:t.vendorCommissionAmount)??(t==null?void 0:t.commissionAmount)??0)}]:[]}function B7e(t,e){const r=Hy(t);if(!r)return null;const n=t.vendorId||t.sellerId||void 0,a=t.vendorName||t.sellerName||void 0,s=P7e(t);let i=Number(t.total??t.itemsTotal??0)||s.reduce((l,c)=>{const u=(Number(c.qty||0)||0)*(Number(c.unitPrice||0)||0),d=Math.max(0,Number(c.discount||0)),f=Math.max(0,u-d);return l+f},0);return i=Number(i||0),{id:e,date:r,type:t.type||"CONTADO",total:i,items:s,customerId:t.customerId||void 0,customerName:t.customerName||void 0,vendorId:n,vendorName:a}}function T7e(t,e,r,n){const a={};for(const l of t)a[l.productId]||(a[l.productId]={productName:l.productName,lots:[]}),a[l.productId].lots.push({date:l.date,qtyLeft:Number(l.quantity||0),cost:Number(l.purchasePrice||0)});for(const l of Object.keys(a))a[l].lots.sort((c,u)=>c.date.localeCompare(u.date));const s=[...e].sort((l,c)=>l.date.localeCompare(c.date));let i=0;for(const l of s)for(const c of l.items||[]){const u=a[c.productId];if(!u)continue;let d=Number(c.qty||0);if(!(d<=0))for(const f of u.lots){if(d<=0)break;if(f.qtyLeft<=0)continue;const h=Math.min(f.qtyLeft,d);l.date>=r&&l.date<=n&&(i+=h*f.cost),f.qtyLeft-=h,d-=h}}return i}async function k7e(t){const e=tr(pt(Ge,"ar_movements"),sr("ref.saleId","==",t)),r=await Lt(e);await Promise.all(r.docs.map(n=>yn(Kt(Ge,"ar_movements",n.id))))}function F7e(){const{refreshKey:t,refresh:e}=jc(),[r,n]=v.useState(br(Zd(new Date),"yyyy-MM-dd")),[a,s]=v.useState(br(Jd(new Date),"yyyy-MM-dd")),[i,l]=v.useState([]),[c,u]=v.useState([]),[d,f]=v.useState([]),[h,A]=v.useState([]),[m,p]=v.useState([]),[g,x]=v.useState([]),[y,b]=v.useState(!0),[w,j]=v.useState(""),[I,_]=v.useState([]),[S,E]=v.useState({}),[k,P]=v.useState({}),[T,O]=v.useState(!1),[W,Ae]=v.useState(null),[de,fe]=v.useState([]),[ge,ee]=v.useState(!1),[Fe,Pe]=v.useState({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0}),[F,Q]=v.useState(!1),[H,R]=v.useState(""),[z,J]=v.useState([]),[D,U]=v.useState(!1),[ne,ve]=v.useState(!1),[L,Ye]=v.useState(null);v.useEffect(()=>{(async()=>{try{const Ce=await Lt(pt(Ge,"sellers_candies")),Ue=[];Ce.forEach(Ve=>{const ue=Ve.data();Ue.push({id:Ve.id,name:ue.name||"",commissionPercent:Number(ue.commissionPercent||0)})}),_(Ue)}catch(Ce){console.error("Error cargando sellers_candies",Ce)}})()},[]);const ie=v.useMemo(()=>{const Ce={};return I.forEach(Ue=>{Ce[Ue.id]=Ue}),Ce},[I]);v.useEffect(()=>{(async()=>{b(!0),j("");try{const Ce=await Lt(pt(Ge,"sales_candies")),Ue=[],Ve=[];Ce.forEach(xe=>{const Qe=xe.data(),dt=B7e(Qe,xe.id);dt&&(dt.date<=a&&Ue.push(dt),dt.date>=r&&dt.date<=a&&Ve.push(dt))}),u(Ue),l(Ve);const ue=await Lt(pt(Ge,"inventory_candies")),ce=[];ue.forEach(xe=>{const Qe=xe.data(),dt=Hy(Qe);if(!dt||dt>a)return;const Bt=Math.max(1,Math.floor(Number(Qe.unitsPerPackage||1))),qe=Number(Qe.totalUnits??Qe.quantity??0),bt=Number(Qe.packages??0),G=Number(Qe.remaining??0),te=Number(Qe.remainingPackages??0),He=bt>0?bt:qe>0?Math.floor(qe/Bt):0,re=te>0?te:G>0?Math.floor(G/Bt):0;ce.push({id:xe.id,productId:Qe.productId,productName:Qe.productName||"",date:dt,quantity:Number(He||0),remaining:Number(re||0),purchasePrice:Number(Qe.providerPrice||Qe.purchasePrice||0),unitsPerPackage:Bt})}),f(ce);const Te=await Lt(pt(Ge,"expenses_candies")),Xe=[];Te.forEach(xe=>{const Qe=xe.data(),dt=Hy(Qe);dt&&dt>=r&&dt<=a&&Xe.push({id:xe.id,date:dt,category:Qe.category||"",description:Qe.description||"",amount:Number(Qe.amount||0),status:Qe.status||""})}),A(Xe);const ft=await Lt(pt(Ge,"ar_movements")),gt=[],vt={};ft.forEach(xe=>{const Qe=xe.data(),dt=Hy(Qe);if(!dt)return;const Bt=Qe.customerId,qe=Number(Qe.amount||0);Bt&&(vt[Bt]=(vt[Bt]||0)+qe),Qe.type==="ABONO"&&dt>=r&&dt<=a&&gt.push({id:xe.id,customerId:Bt,type:"ABONO",amount:qe,date:dt})}),p(gt);const At=await Lt(pt(Ge,"customers_candies")),ye=[];At.forEach(xe=>{const Qe=xe.data();ye.push({id:xe.id,name:Qe.name||"",balance:vt[xe.id]||0})}),x(ye);const $e=await Lt(pt(Ge,"inventory_candies_sellers")),Ne={},ct={};$e.forEach(xe=>{const Qe=xe.data(),dt=Hy(Qe);if(!dt||dt<r||dt>a)return;const Bt=Qe.sellerId||Qe.vendorId||"NO_VENDOR",qe=Qe.productName||"",bt=Qe.sku||"",G=Math.max(1,Math.floor(Number(Qe.unitsPerPackage||1))),te=Number(Qe.totalUnits??0),He=Number(Qe.packages??0),re=Number(Qe.remainingUnits??Qe.remaining??0),be=Number(Qe.remainingPackages??0),Me=He>0?He:te>0?Math.floor(te/G):0,tt=be>0?be:re>0?Math.floor(re/G):0,lt=Number(Qe.totalVendor??0),ae=Number(Qe.gainVendor??0),V=Me,X=V>0?lt/V:0,me=V>0?ae/V:0;if(Ne[Bt]||(Ne[Bt]={associated:[],remaining:[]}),Me>0){const Ie=Me,Y=Ie*X,pe=Y,ke=Ie*me;Ne[Bt].associated.push({saleId:xe.id,date:dt,productName:qe,sku:bt,qty:Ie,unitPrice:X,lineTotal:Y,discount:0,lineFinal:pe,vendorCommissionAmount:ke,type:"ASSOCIATED"}),ct[Bt]=(ct[Bt]||0)+Ie}if(tt>0){const Ie=tt,Y=Ie*X,pe=Y,ke=Ie*me;Ne[Bt].remaining.push({saleId:xe.id,date:dt,productName:qe,sku:bt,qty:Ie,unitPrice:X,lineTotal:Y,discount:0,lineFinal:pe,vendorCommissionAmount:ke,type:"REMAINING"})}}),E(Ne),P(ct)}catch(Ce){console.error(Ce),j(" Error cargando datos del dashboard.")}finally{b(!1)}})()},[r,a,t]);const Z=v.useCallback(Ce=>{if(Ce.vendorId&&ie[Ce.vendorId])return ie[Ce.vendorId];const Ue=(Ce.vendorName||"").trim().toLowerCase();if(Ue)return I.find(Ve=>(Ve.name||"").trim().toLowerCase()===Ue)},[ie,I]),Oe=v.useCallback((Ce,Ue)=>{const Ve=Number(Ue.vendorCommissionAmount||0);if(Ve)return Ve;const ue=Z(Ce);if(!ue||!ue.commissionPercent)return 0;const ce=Number(Ue.qty||0),Te=Number(Ue.unitPrice||0),Xe=ce*Te,ft=Math.max(0,Number(Ue.discount||0)),gt=Math.max(0,Xe-ft);if(!gt)return 0;const vt=Number(ue.commissionPercent)||0;return gt*vt/100},[Z]),le=v.useMemo(()=>{try{return T7e(d,c,r,a)}catch(Ce){return console.error(Ce),0}},[d,c,r,a]),se=v.useMemo(()=>{const Ce=i.reduce((ye,$e)=>ye+($e.total||0),0),Ue=h.reduce((ye,$e)=>ye+($e.amount||0),0),Ve=Ce-le,ue=Ve-Ue,ce=m.reduce((ye,$e)=>ye+Math.abs($e.amount||0),0),Te=g.filter(ye=>(ye.balance||0)>0),Xe=Te.reduce((ye,$e)=>ye+($e.balance||0),0);let ft=0,gt=0,vt=0,At=0;for(const ye of i){const $e=(ye.items||[]).reduce((ct,xe)=>ct+(Number(xe.qty)||0),0),Ne=(ye.items||[]).reduce((ct,xe)=>ct+Oe(ye,xe),0);ye.type==="CONTADO"?(ft+=$e,vt+=Ne):(gt+=$e,At+=Ne)}return{ventasTotales:Ce,costoMercaderia:le,gastosPeriodo:Ue,gananciaAntes:Ve,gananciaDespues:ue,abonosRecibidos:ce,saldosPendientes:Xe,clientesConSaldo:Te.length,paquetesCash:ft,paquetesCredito:gt,comisionCash:vt,comisionCredito:At}},[i,h,m,g,le,Oe]),Be=v.useMemo(()=>{const Ce={},Ue={};for(const Ve of i)if(!(Ve.type!=="CREDITO"||!Ve.customerId))for(const ue of Ve.items||[]){const ce=Number(ue.qty||0),Te=Number(ue.unitPrice||0),Xe=ce*Te,ft=Math.max(0,Number(ue.discount||0)),gt=Math.max(0,Xe-ft);Ce[Ve.customerId]=(Ce[Ve.customerId]||0)+ce,Ue[Ve.customerId]=(Ue[Ve.customerId]||0)+gt}return g.filter(Ve=>(Ve.balance||0)>0).map(Ve=>({customerId:Ve.id,name:Ve.name,paquetesAsociados:Ce[Ve.id]||0,saldoTotal:Ue[Ve.id]||0,saldoPendiente:Ve.balance||0})).sort((Ve,ue)=>ue.saldoPendiente-Ve.saldoPendiente)},[g,i]),je=v.useMemo(()=>{const Ce={};return g.forEach(Ue=>Ce[Ue.id]=Ue.name),Ce},[g]),ot=v.useMemo(()=>[...i].sort((Ce,Ue)=>Ue.date.localeCompare(Ce.date)).map(Ce=>{var ce;const Ue=(Ce.items||[]).reduce((Te,Xe)=>Te+(Number(Xe.qty)||0),0);let Ve="Cash";Ce.type==="CREDITO"&&Ce.customerId?Ve=je[Ce.customerId]||"":Ce.type==="CONTADO"&&(Ve=((ce=Ce.customerName)==null?void 0:ce.trim())||"Cash");const ue=Ue>0?Ce.total/Ue:0;return{id:Ce.id,date:Ce.date,type:Ce.type==="CREDITO"?"Crdito":"Cash",customer:Ve,paquetes:Ue,total:Number(Ce.total||0),avgPrice:ue}}),[i,je]),mt=v.useMemo(()=>{var Ue,Ve;const Ce=new Map;for(const ue of i){const ce=ue.vendorId||"NO_VENDOR",Te=ue.vendorName||((Ue=ie[ce])==null?void 0:Ue.name)||"Sin vendedor";Ce.has(ce)||Ce.set(ce,{vendorId:ce,vendorName:Te,paquetesAsociados:0,paquetesVendidos:0,paquetesFiados:0,totalVendido:0,totalFiado:0,comisionCash:0,comisionCredito:0,paquetesRestantes:0});const Xe=Ce.get(ce);for(const ft of ue.items||[]){const gt=Number(ft.qty||0),vt=Number(ft.unitPrice||0),At=gt*vt,ye=Math.max(0,Number(ft.discount||0)),$e=Math.max(0,At-ye),Ne=Oe(ue,ft);ue.type==="CONTADO"?(Xe.paquetesVendidos+=gt,Xe.totalVendido+=$e,Xe.comisionCash+=Ne):(Xe.paquetesFiados+=gt,Xe.totalFiado+=$e,Xe.comisionCredito+=Ne)}}for(const[ue,ce]of Object.entries(k)){const Te=Ce.get(ue),Xe=(Te==null?void 0:Te.vendorName)||((Ve=ie[ue])==null?void 0:Ve.name)||"Sin vendedor",ft=Te||{vendorId:ue,vendorName:Xe,paquetesAsociados:0,paquetesVendidos:0,paquetesFiados:0,totalVendido:0,totalFiado:0,comisionCash:0,comisionCredito:0,paquetesRestantes:0};ft.paquetesAsociados=ce,ft.paquetesRestantes=Math.max(ce-ft.paquetesVendidos-ft.paquetesFiados,0),Ce.set(ue,ft)}return Array.from(Ce.values()).sort((ue,ce)=>ce.totalVendido+ce.totalFiado-(ue.totalVendido+ue.totalFiado))},[i,k,ie,Oe]),ut=async Ce=>{O(!0),Ae({id:Ce.customerId,name:Ce.name}),fe([]),ee(!0),Pe({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});try{const Ue=[];let Ve=0,ue=0,ce=0;for(const gt of i)if(!(gt.type!=="CREDITO"||gt.customerId!==Ce.customerId))for(const vt of gt.items||[]){const At=Number(vt.qty||0),ye=Number(vt.unitPrice||0),$e=At*ye,Ne=Math.max(0,Number(vt.discount||0)),ct=Math.max(0,$e-Ne);Ue.push({saleId:gt.id,date:gt.date,productName:vt.productName,sku:vt.sku||"",qty:At,unitPrice:ye,lineTotal:$e,discount:Ne,lineFinal:ct}),Ve+=$e,ue+=Ne,ce+=ct}let Te=0;for(const gt of m)gt.customerId===Ce.customerId&&(Te+=Math.abs(gt.amount||0));const Xe=g.find(gt=>gt.id===Ce.customerId),ft=(Xe==null?void 0:Xe.balance)||0;fe(Ue),Pe({totalBruto:Ve,totalDescuento:ue,totalFiado:ce,saldoActual:ft,abonadoPeriodo:Te})}catch(Ue){console.error(Ue),j(" No se pudo cargar el detalle del cliente.")}finally{ee(!1)}},_e=(Ce,Ue,Ve)=>{Q(!0);let ue="";Ve==="ASSOCIATED"?ue=`Paquetes asociados  ${Ue}`:Ve==="REMAINING"?ue=`Paquetes restantes  ${Ue}`:Ve==="CASH"?ue=`Paquetes vendidos (Cash)  ${Ue}`:ue=`Paquetes fiados (Crdito)  ${Ue}`,R(ue),J([]),U(!0);try{if(Ve==="ASSOCIATED"||Ve==="REMAINING"){const Te=S[Ce],Xe=Ve==="ASSOCIATED"?(Te==null?void 0:Te.associated)||[]:(Te==null?void 0:Te.remaining)||[];J([...Xe].sort((ft,gt)=>ft.date.localeCompare(gt.date))),U(!1);return}const ce=[];for(const Te of i)if(((Te.vendorId||"NO_VENDOR")===Ce||!Te.vendorId&&Ce==="NO_VENDOR")&&!(Ve==="CASH"&&Te.type!=="CONTADO")&&!(Ve==="CREDIT"&&Te.type!=="CREDITO"))for(const ft of Te.items||[]){const gt=Number(ft.qty||0),vt=Number(ft.unitPrice||0),At=gt*vt,ye=Math.max(0,Number(ft.discount||0)),$e=Math.max(0,At-ye),Ne=Oe(Te,ft);ce.push({saleId:Te.id,date:Te.date,productName:ft.productName,sku:ft.sku||"",qty:gt,unitPrice:vt,lineTotal:At,discount:ye,lineFinal:$e,vendorCommissionAmount:Ne,type:Ve})}J(ce.sort((Te,Xe)=>Te.date.localeCompare(Xe.date)))}catch(ce){console.error(ce),j(" No se pudo cargar el detalle del vendedor.")}finally{U(!1)}},rt=Ce=>{const Ue=i.find(Ve=>Ve.id===Ce)||null;Ye(Ue),ve(!0)},we=async Ce=>{if(window.confirm("Eliminar esta venta? Esta accin no se puede deshacer."))try{await k2(Ce),await k7e(Ce),l(Ue=>Ue.filter(Ve=>Ve.id!==Ce)),u(Ue=>Ue.filter(Ve=>Ve.id!==Ce)),ve(!1),Ye(null)}catch(Ue){console.error(Ue),alert("No se pudo eliminar la venta. Revisa la consola para ms detalles.")}};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas (Dulces)"}),o.jsx(Ic,{onClick:e,loading:y})]}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:Ce=>n(Ce.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:Ce=>s(Ce.target.value)})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),o.jsx("div",{className:"text-xl font-semibold",children:Fn(se.ventasTotales)}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Contado + Crdito del periodo."})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),o.jsx("div",{className:"text-xl font-semibold",children:Fn(se.costoMercaderia)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta"}),o.jsx("div",{className:"text-xl font-semibold text-green-600",children:Fn(se.gananciaAntes)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Gastos"}),o.jsx("div",{className:"text-xl font-semibold",children:Fn(se.gastosPeriodo)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Neta"}),o.jsx("div",{className:"text-xl font-semibold text-green-600",children:Fn(se.gananciaDespues)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),o.jsx("div",{className:"text-xl font-semibold",children:Fn(se.abonosRecibidos)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),o.jsx("div",{className:"text-xl font-semibold",children:Fn(se.saldosPendientes)}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),o.jsx("div",{className:"text-xl font-semibold",children:se.clientesConSaldo})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:se.paquetesCash})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Crdito (vendidos)"}),o.jsx("div",{className:"text-xl font-semibold",children:se.paquetesCredito})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:Fn(se.comisionCash)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:Fn(se.comisionCredito)})]})]}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado por cliente (Crdito)"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Cliente"}),o.jsx("th",{className:"p-2 border",children:"Paquetes asociados (periodo)"}),o.jsx("th",{className:"p-2 border",children:"Saldo total (periodo)"}),o.jsx("th",{className:"p-2 border",children:"Saldo pendiente"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Cargando"})}):Be.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Sin clientes con saldo"})}):Be.map(Ce=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:Ce.name}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>ut({customerId:Ce.customerId,name:Ce.name}),title:"Ver paquetes fiados del periodo",children:Ce.paquetesAsociados})}),o.jsx("td",{className:"p-2 border",children:Fn(Ce.saldoTotal)}),o.jsx("td",{className:"p-2 border font-semibold",children:Fn(Ce.saldoPendiente)})]},Ce.customerId))})]})}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado vendedores"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6 overflow-x-auto",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes asociados"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes vendidos (Cash)"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total vendido (Cash)"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Cash"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes fiados (Crdito)"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total fiado (Crdito)"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Crdito"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):mt.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin datos de vendedores en el rango seleccionado."})}):mt.map(Ce=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ce.vendorName}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>_e(Ce.vendorId,Ce.vendorName,"ASSOCIATED"),children:Ce.paquetesAsociados})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>_e(Ce.vendorId,Ce.vendorName,"REMAINING"),children:Ce.paquetesRestantes})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>_e(Ce.vendorId,Ce.vendorName,"CASH"),children:Ce.paquetesVendidos})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:Fn(Ce.totalVendido)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:Fn(Ce.comisionCash)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>_e(Ce.vendorId,Ce.vendorName,"CREDIT"),children:Ce.paquetesFiados})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:Fn(Ce.totalFiado)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:Fn(Ce.comisionCredito)})]},Ce.vendorId))})]})}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Transacciones del periodo"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6 overflow-x-auto",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cliente"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Tipo"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio venta (prom.)"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Acciones"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):ot.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin transacciones en el rango seleccionado."})}):ot.map(Ce=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ce.date}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ce.customer}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ce.type}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>rt(Ce.id),children:Ce.paquetes})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:Fn(Ce.avgPrice)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:Fn(Ce.total)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>we(Ce.id),children:"Eliminar"})})]},Ce.id))})]})}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Gastos del periodo"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Estado"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):h.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):h.sort((Ce,Ue)=>Ce.date.localeCompare(Ue.date)).map(Ce=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:Ce.date}),o.jsx("td",{className:"p-2 border",children:Ce.category||""}),o.jsx("td",{className:"p-2 border",children:Ce.description?o.jsx("span",{title:Ce.description,children:Ce.description.length>40?Ce.description.slice(0,40)+"":Ce.description}):""}),o.jsx("td",{className:"p-2 border",children:Fn(Ce.amount)}),o.jsx("td",{className:"p-2 border",children:Ce.status||""})]},Ce.id))})]})}),w&&o.jsx("p",{className:"mt-2 text-sm",children:w}),T&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Detalle cliente  ",(W==null?void 0:W.name)||""]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>O(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total bruto (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:Fn(Fe.totalBruto)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Descuento (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:Fn(Fe.totalDescuento)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto total fiado (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:Fn(Fe.totalFiado)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-xl font-semibold",children:Fn(Fe.saldoActual)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Abonado (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:Fn(Fe.abonadoPeriodo)})]})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha compra"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"SKU"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"P. Unit"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Descuento"}),o.jsx("th",{className:"p-2 border",children:"Monto final"})]})}),o.jsx("tbody",{children:ge?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Cargando"})}):de.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Sin paquetes fiados en el periodo."})}):de.sort((Ce,Ue)=>Ce.date.localeCompare(Ue.date)).map((Ce,Ue)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:Ce.date}),o.jsx("td",{className:"p-2 border",children:Ce.productName}),o.jsx("td",{className:"p-2 border",children:Ce.sku||""}),o.jsx("td",{className:"p-2 border",children:Ce.qty}),o.jsx("td",{className:"p-2 border",children:Fn(Ce.unitPrice)}),o.jsx("td",{className:"p-2 border",children:Fn(Ce.lineTotal)}),o.jsx("td",{className:"p-2 border",children:Fn(Ce.discount)}),o.jsx("td",{className:"p-2 border",children:Fn(Ce.lineFinal)})]},`${Ce.saleId}-${Ue}`))})]})})]})}),F&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:H}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Q(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"SKU"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"P. Unit"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Descuento"}),o.jsx("th",{className:"p-2 border",children:"Monto final"}),o.jsx("th",{className:"p-2 border",children:"Comisin"})]})}),o.jsx("tbody",{children:D?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando"})}):z.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin paquetes para este vendedor en el periodo."})}):z.map((Ce,Ue)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:Ce.date}),o.jsx("td",{className:"p-2 border",children:Ce.productName}),o.jsx("td",{className:"p-2 border",children:Ce.sku||""}),o.jsx("td",{className:"p-2 border",children:Ce.qty}),o.jsx("td",{className:"p-2 border",children:Fn(Ce.unitPrice)}),o.jsx("td",{className:"p-2 border",children:Fn(Ce.lineTotal)}),o.jsx("td",{className:"p-2 border",children:Fn(Ce.discount)}),o.jsx("td",{className:"p-2 border",children:Fn(Ce.lineFinal)}),o.jsx("td",{className:"p-2 border",children:Fn(Ce.vendorCommissionAmount)})]},`${Ce.saleId}-${Ue}`))})]})})]})}),ne&&L&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-4xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Detalle de venta  ",L.date]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ve(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto mb-3",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"SKU"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"P. Unit"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Comisin"})]})}),o.jsx("tbody",{children:(L.items||[]).map((Ce,Ue)=>{const Ve=Number(Ce.qty||0),ue=Number(Ce.unitPrice||0),ce=Ve*ue,Te=Oe(L,Ce);return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:Ce.productName}),o.jsx("td",{className:"p-2 border",children:Ce.sku||""}),o.jsx("td",{className:"p-2 border",children:Ve}),o.jsx("td",{className:"p-2 border",children:Fn(ue)}),o.jsx("td",{className:"p-2 border",children:Fn(ce)}),o.jsx("td",{className:"p-2 border",children:Fn(Te)})]},Ue)})})]})}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"text-sm",children:[o.jsx("span",{className:"font-semibold",children:"Total venta:"}),Fn(L.total)]}),o.jsx("button",{className:"text-xs bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700",onClick:()=>we(L.id),children:"Eliminar venta"})]})]})})]})}const x$=["Rivas","Isla Ometepe","San Jorge"];function O7e(){const{refreshKey:t,refresh:e}=jc(),[r,n]=v.useState([]),[a,s]=v.useState(!0),[i,l]=v.useState(""),[c,u]=v.useState(!1),[d,f]=v.useState(""),[h,A]=v.useState("0"),[m,p]=v.useState("Rivas"),[g,x]=v.useState(null),[y,b]=v.useState(""),[w,j]=v.useState("0"),[I,_]=v.useState("Rivas");v.useEffect(()=>{(async()=>{s(!0),l("");try{const W=tr(pt(Ge,"sellers_candies"),ln("name","asc")),Ae=await Lt(W),de=[];Ae.forEach(fe=>{const ge=fe.data();de.push({id:fe.id,name:ge.name||"",commissionPercent:Number(ge.commissionPercent||0),branch:ge.branch||"Rivas",createdAt:ge.createdAt||or.now()})}),n(de)}catch(W){console.error(W),l(" Error cargando vendedores.")}finally{s(!1)}})()},[t]);const S=()=>{f(""),A("0"),p("Rivas")},E=async W=>{W.preventDefault(),l("");const Ae=d.trim();if(!Ae){l("Ingresa el nombre y apellido del vendedor.");return}const de=Number(h||0);if(de<0){l("El margen no puede ser negativo.");return}try{const fe={name:Ae,commissionPercent:de,branch:m,createdAt:or.now()},ge=await wn(pt(Ge,"sellers_candies"),fe);n(ee=>[{id:ge.id,...fe},...ee]),l(" Vendedor creado correctamente."),S(),u(!1)}catch(fe){console.error(fe),l(" Error al crear el vendedor.")}},k=W=>{x(W.id),b(W.name),j(W.commissionPercent.toString()),_(W.branch)},P=()=>{x(null),b(""),j("0"),_("Rivas")},T=async()=>{if(!g)return;l("");const W=y.trim();if(!W){l("El nombre y apellido no pueden estar vacos.");return}const Ae=Number(w||0);if(Ae<0){l("El margen no puede ser negativo.");return}try{await rn(Kt(Ge,"sellers_candies",g),{name:W,commissionPercent:Ae,branch:I}),n(de=>de.map(fe=>fe.id===g?{...fe,name:W,commissionPercent:Ae,branch:I}:fe)),l(" Vendedor actualizado."),P()}catch(de){console.error(de),l(" Error al actualizar el vendedor.")}},O=async W=>{if(window.confirm(`Eliminar al vendedor "${W.name}"? Esta accin no se puede deshacer.`))try{await yn(Kt(Ge,"sellers_candies",W.id)),n(de=>de.filter(fe=>fe.id!==W.id)),l(" Vendedor eliminado.")}catch(de){console.error(de),l(" Error al eliminar el vendedor.")}};return o.jsxs("div",{className:"max-w-5xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Vendedores de Dulces"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Ic,{onClick:e,loading:a}),o.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>u(!0),children:[o.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo vendedor"]})]})]}),c&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[o.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo vendedor de dulces"}),o.jsxs("form",{onSubmit:E,className:"space-y-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre y apellido"}),o.jsx("input",{className:"w-full border p-2 rounded",value:d,onChange:W=>f(W.target.value),placeholder:"Ej: Juan Prez"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Margen del vendedor (% sobre U Aproximada)"}),o.jsx("input",{type:"number",step:"0.01",min:0,className:"w-full border p-2 rounded",value:h,onChange:W=>A(W.target.value),placeholder:"Ej: 30"}),o.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Este porcentaje YA NO es comisin sobre venta. Se aplica as: U. Vendedor = U. Aproximada  (margen/100). U. Inversionista = U. Aproximada  U. Vendedor."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Sucursal"}),o.jsx("select",{className:"w-full border p-2 rounded",value:m,onChange:W=>p(W.target.value),children:x$.map(W=>o.jsx("option",{value:W,children:W},W))})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[o.jsx("button",{type:"button",onClick:()=>{S(),u(!1)},className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Guardar vendedor"})]})]})]})}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full overflow-x-auto mt-3",children:o.jsxs("table",{className:"min-w-[700px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Nombre y apellido"}),o.jsx("th",{className:"p-2 border",children:"Margen (% U Aproximada)"}),o.jsx("th",{className:"p-2 border",children:"Sucursal"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:a?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Cargando"})}):r.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Sin vendedores registrados."})}):r.map(W=>{const Ae=g===W.id;return o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:Ae?o.jsx("input",{className:"border p-1 rounded text-xs w-full",value:y,onChange:de=>b(de.target.value)}):W.name}),o.jsx("td",{className:"p-2 border",children:Ae?o.jsx("input",{type:"number",step:"0.01",min:0,className:"border p-1 rounded text-xs w-24 text-right",value:w,onChange:de=>j(de.target.value)}):`${W.commissionPercent.toFixed(2)} %`}),o.jsx("td",{className:"p-2 border",children:Ae?o.jsx("select",{className:"border p-1 rounded text-xs",value:I,onChange:de=>_(de.target.value),children:x$.map(de=>o.jsx("option",{value:de,children:de},de))}):W.branch}),o.jsx("td",{className:"p-2 border",children:Ae?o.jsxs("div",{className:"flex gap-1 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:T,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:P,children:"Cancelar"})]}):o.jsxs("div",{className:"flex gap-1 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-yellow-500 text-white hover:bg-yellow-600 text-xs",onClick:()=>k(W),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>O(W),children:"Borrar"})]})})]},W.id)})})]})}),i&&o.jsx("p",{className:"mt-2 text-sm",children:i})]})}const oa=t=>Math.max(0,Math.floor(Number(t||0)));function aR(t){return Math.max(1,oa(t.unitsPerPackage||1))}function D7e(t){const e=Number(t.remaining);if(Number.isFinite(e)&&e>0)return Math.floor(e);const r=aR(t),n=Number(t.totalUnits||0),a=Number(t.quantity||0),s=Number(t.packages||0);return n>0?Math.floor(n):a>0?Math.floor(a):s>0?Math.floor(s*r):0}async function Nae(t){const{orderId:e,productId:r}=t;let n=oa(t.packagesToReturn);if(!e||!r||n<=0)return;const a=tr(pt(Ge,"inventory_candies"),sr("orderId","==",e),sr("productId","==",r),ln("createdAt","asc")),s=await Lt(a);if(s.empty)return;const i=s.docs.map(l=>l.ref);await Ti(Ge,async l=>{const c=await Promise.all(i.map(u=>l.get(u)));for(let u=0;u<i.length&&n>0;u++){const d=c[u];if(!d.exists())continue;const f=d.data(),h=aR(f),A=n*h,p=oa(f.remaining??0)+A,g=Math.floor(p/h);l.update(i[u],{remaining:p,remainingPackages:g,packages:g,updatedAt:or.now()}),n=0}})}async function Cae(t){const{orderId:e,productId:r}=t,n=oa(t.packagesToReturn);if(!e||!r||n<=0)return;const a=Kt(Ge,"candy_main_orders",e);await Ti(Ge,async s=>{const i=await s.get(a);if(!i.exists())return;const l=i.data(),c=Array.isArray(l.items)?l.items:[];let u=!1;const d=c.map(f=>String((f==null?void 0:f.id)||"")!==String(r)?f:(u=!0,{...f,remainingPackages:oa(f.remainingPackages)+n}));u&&s.update(a,{items:d,updatedAt:or.now()})})}function Dk(t){if(!Array.isArray(t))return[];const e=[];for(const r of t){const n=String((r==null?void 0:r.batchId)||""),a=String((r==null?void 0:r.masterOrderId)||(r==null?void 0:r.orderId)||""),s=oa((r==null?void 0:r.units)??(r==null?void 0:r.qty)??(r==null?void 0:r.quantity)??0),i=Math.max(1,oa((r==null?void 0:r.unitsPerPackage)||1));!n||!a||s<=0||e.push({batchId:n,masterOrderId:a,units:s,unitsPerPackage:i})}return e}function F2(t,e){const r=oa(t),n=Math.max(1,oa(e));return Math.floor(r/n)}async function R7e(t){const e=String(t.productId||"");let r=oa(t.packagesToAllocate);if(!e||r<=0)return{allocations:[]};const n=tr(pt(Ge,"inventory_candies"),sr("productId","==",e)),a=await Lt(n);if(a.empty)throw new Error("No hay inventario para este producto.");const i=a.docs.map(c=>({id:c.id,data:c.data()})).sort((c,u)=>{var m,p;const d=String(c.data.date||""),f=String(u.data.date||"");if(d!==f)return d<f?-1:1;const h=((m=c.data.createdAt)==null?void 0:m.seconds)??0,A=((p=u.data.createdAt)==null?void 0:p.seconds)??0;return h-A}).map(c=>Kt(Ge,"inventory_candies",c.id)),l=[];return await Ti(Ge,async c=>{const u=await Promise.all(i.map(g=>c.get(g))),d=[];let f=r;for(let g=0;g<i.length&&f>0;g++){const x=i[g],y=u[g];if(!y.exists())continue;const b=y.data(),w=aR(b),j=D7e(b);if(j<=0)continue;const I=Math.floor(j/w);if(I<=0)continue;const _=Math.min(I,f),S=_*w,E=Math.max(0,j-S),k=Math.floor(E/w),P=String(b.orderId||"");if(!P)throw new Error("Lote sin orderId (orden maestra).");l.push({batchId:x.id,masterOrderId:P,units:S,unitsPerPackage:w}),d.push({ref:x,newRemUnits:E,newRemPacks:k}),f-=_}if(f>0)throw new Error(`Inventario insuficiente. Faltan ${f} paquetes.`);const h={};for(const g of l){const x=F2(g.units,g.unitsPerPackage);h[g.masterOrderId]=(h[g.masterOrderId]||0)+x}const A=Object.keys(h),m=A.map(g=>Kt(Ge,"candy_main_orders",g)),p=await Promise.all(m.map(g=>c.get(g)));for(let g=0;g<d.length;g++){const x=d[g];c.update(x.ref,{remaining:x.newRemUnits,remainingPackages:x.newRemPacks,packages:x.newRemPacks,updatedAt:or.now()})}for(let g=0;g<m.length;g++){const x=p[g];if(!x.exists())throw new Error("Orden maestra no existe.");const y=x.data(),b=Array.isArray(y.items)?y.items:[],w=oa(h[A[g]]||0);if(w<=0)continue;let j=!1;const I=b.map(_=>{if(String((_==null?void 0:_.id)||"")!==e)return _;const S=oa(_.remainingPackages);if(S<w)throw new Error("Orden maestra sin paquetes suficientes.");return j=!0,{..._,remainingPackages:S-w}});j&&c.update(m[g],{items:I,updatedAt:or.now()})}}),{allocations:l}}async function v$(t){const e=String(t.vendorInventoryId||"");let r=oa(t.packagesToReturn);if(!e)throw new Error("vendorInventoryId requerido");if(r<=0)return{restoredPackages:0,mode:"noop"};const n=Kt(Ge,"inventory_candies_sellers",e),a=await xi(n);if(!a.exists())throw new Error("No existe la orden del vendedor");const s=a.data(),i=String(s.productId||"");if(!i)throw new Error("La orden del vendedor no tiene productId");if(!Dk(s.masterAllocations||s.allocations||s.allocationsByBatch).length){const u=String(s.orderId||"");if(!u)throw new Error("La orden del vendedor no tiene orderId");return await Nae({orderId:u,productId:i,packagesToReturn:r}),await Cae({orderId:u,productId:i,packagesToReturn:r}),{restoredPackages:r,mode:"legacy"}}let c=0;return await Ti(Ge,async u=>{const d=await u.get(n);if(!d.exists())throw new Error("No existe la orden del vendedor");const f=d.data(),h=String(f.productId||"");if(!h)throw new Error("Doc vendedor sin productId");let A=Dk(f.masterAllocations||f.allocations||f.allocationsByBatch);if(!A.length)throw new Error("No hay masterAllocations guardadas en este doc (no se puede restaurar blindado).");const m=[];let p=r;for(let E=A.length-1;E>=0&&p>0;E--){const k=A[E],P=Math.max(1,oa(k.unitsPerPackage||1)),T=F2(k.units,P);if(T<=0)continue;const O=Math.min(T,p),W=O*P;m.push({batchId:k.batchId,masterOrderId:k.masterOrderId,units:W,unitsPerPackage:P}),p-=O}const g=r-p;if(g<=0)return;c=g;const x=m.map(E=>Kt(Ge,"inventory_candies",E.batchId)),y={};for(const E of m){const k=F2(E.units,E.unitsPerPackage);k>0&&(y[E.masterOrderId]=(y[E.masterOrderId]||0)+k)}const w=Object.keys(y).map(E=>Kt(Ge,"candy_main_orders",E)),[j,I]=await Promise.all([Promise.all(x.map(E=>u.get(E))),Promise.all(w.map(E=>u.get(E)))]);for(let E=0;E<m.length;E++){const k=m[E],P=j[E];if(!P.exists())continue;const T=P.data(),O=Math.max(1,oa(k.unitsPerPackage||T.unitsPerPackage||1)),W=oa(k.units),de=oa(T.remaining??0)+W,fe=Math.floor(de/O);u.update(x[E],{remaining:de,remainingPackages:fe,packages:fe,updatedAt:or.now()})}for(let E=0;E<w.length;E++){const k=I[E];if(!k.exists())continue;const P=w[E].id,T=oa(y[P]||0);if(T<=0)continue;const O=k.data(),W=Array.isArray(O.items)?O.items:[];let Ae=!1;const de=W.map(fe=>String((fe==null?void 0:fe.id)||"")!==String(h)?fe:(Ae=!0,{...fe,remainingPackages:oa(fe.remainingPackages)+T}));Ae&&u.update(w[E],{items:de,updatedAt:or.now()})}const _=new Map;for(const E of m){const k=`${E.batchId}__${E.masterOrderId}__${E.unitsPerPackage}`;_.set(k,(_.get(k)||0)+oa(E.units))}const S=[];for(const E of A){const k=Math.max(1,oa(E.unitsPerPackage||1)),P=`${E.batchId}__${E.masterOrderId}__${k}`,T=oa(_.get(P)||0);if(T<=0){S.push(E);continue}const W=oa(E.units)-T;W>0&&S.push({...E,units:W,unitsPerPackage:k}),_.delete(P)}u.update(n,{masterAllocations:S,updatedAt:or.now()})}),{restoredPackages:c,mode:"blind"}}async function M7e(t){if(!t)throw new Error("vendorInventoryId requerido");const e=Kt(Ge,"inventory_candies_sellers",t),r=await xi(e);if(!r.exists())throw new Error("No existe la orden del vendedor");const n=r.data(),a=String(n.productId||""),s=oa(n.packages||n.remainingPackages||0),i=Dk(n.masterAllocations||n.allocations||n.allocationsByBatch);if(!i.length){const c=String(n.orderId||"");if(!c)throw new Error("La orden del vendedor no tiene orderId");if(!a)throw new Error("La orden del vendedor no tiene productId");return s<=0?(await Ti(Ge,async u=>{u.delete(e)}),{restoredPackages:0,mode:"legacy"}):(await Nae({orderId:c,productId:a,packagesToReturn:s}),await Cae({orderId:c,productId:a,packagesToReturn:s}),await Ti(Ge,async u=>{u.delete(e)}),{restoredPackages:s,mode:"legacy"})}let l=0;return await Ti(Ge,async c=>{const u={};for(const g of i){const x=Math.max(1,oa(g.unitsPerPackage||1)),y=oa(g.units),b=F2(y,x);b>0&&(u[g.masterOrderId]=(u[g.masterOrderId]||0)+b)}const d=i.map(g=>Kt(Ge,"inventory_candies",g.batchId)),h=Object.keys(u).map(g=>Kt(Ge,"candy_main_orders",g)),[A,m]=await Promise.all([Promise.all(d.map(g=>c.get(g))),Promise.all(h.map(g=>c.get(g)))]);let p=0;for(let g=0;g<i.length;g++){const x=i[g],y=A[g];if(!y.exists())continue;const b=y.data(),w=Math.max(1,oa(x.unitsPerPackage||b.unitsPerPackage||1)),j=oa(x.units),_=oa(b.remaining??0)+j,S=Math.floor(_/w);c.update(d[g],{remaining:_,remainingPackages:S,packages:S,updatedAt:or.now()});const E=F2(j,w);E>0&&(p+=E)}for(let g=0;g<h.length;g++){const x=m[g];if(!x.exists())continue;const y=h[g].id,b=oa(u[y]||0);if(b<=0)continue;const w=x.data(),j=Array.isArray(w.items)?w.items:[];let I=!1;const _=j.map(S=>String((S==null?void 0:S.id)||"")!==String(a)?S:(I=!0,{...S,remainingPackages:oa(S.remainingPackages)+b}));I&&c.update(h[g],{items:_,updatedAt:or.now()})}c.delete(e),l=p}),{restoredPackages:l,mode:"blind"}}const Gs=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function y$(t){const e=String(t||"").trim().toUpperCase();if(e.includes("ISLA"))return"ISLA";if(e.includes("JORGE"))return"SAN_JORGE";if(e.includes("RIVAS"))return"RIVAS"}const Ks=t=>Math.max(0,Math.floor(Number(t||0))),b$=t=>{const e=String(t??"");return/[,"\n]/.test(e)?`"${e.replace(/"/g,'""')}"`:e},L7e=t=>{const e=[];let r=[],n="",a=!1;for(let s=0;s<t.length;s++){const i=t[s];if(a){i==='"'?t[s+1]==='"'?(n+='"',s++):a=!1:n+=i;continue}if(i==='"'){a=!0;continue}if(i===","){r.push(n),n="";continue}if(i===`
`){r.push(n),n="",r.some(l=>String(l??"").trim()!=="")&&e.push(r),r=[];continue}i!=="\r"&&(n+=i)}return r.push(n),r.some(s=>String(s??"").trim()!=="")&&e.push(r),e},bx=t=>{const e=Number(t||0);return!isFinite(e)||e<0?0:e},pf=(t,e)=>{const r=bx(e),n=Number(t||0)*(r/100),a=Number(t||0)-n;return{vendorMarginPercent:r,uVendor:n,uInvestor:a}};function U7e({role:t="",sellerCandyId:e="",currentUserEmail:r,roles:n}){const{refreshKey:a,refresh:s}=jc(),i=n&&n.length?n:t,l=!i||zr(i,"admin"),c=zr(i,"vendedor_dulces"),u=(r||"").trim().toLowerCase(),d=!l&&c,[f,h]=v.useState(!0),[A,m]=v.useState(""),[p,g]=v.useState([]),[x,y]=v.useState([]),[b,w]=v.useState({}),[j,I]=v.useState([]),[_,S]=v.useState(!1),[E,k]=v.useState(null),[P,T]=v.useState(""),[O,W]=v.useState(""),[Ae,de]=v.useState(""),[fe,ge]=v.useState("0"),[ee,Fe]=v.useState([]),[Pe,F]=v.useState(""),[Q,H]=v.useState(!1),[R,z]=v.useState(!1),J=20,[D,U]=v.useState(1),ne=20,[ve,L]=v.useState(1),[Ye,ie]=v.useState({}),[Z,Oe]=v.useState(!1),[le,se]=v.useState({}),Be=v.useMemo(()=>p.find(Y=>Y.id===P)||null,[P,p]);Be==null||Be.branch,v.useEffect(()=>{!_||!P||!ee.length||Fe(Y=>Y.map(pe=>{const ke=x.find(Cr=>Cr.id===pe.productId)||null,Re=p.find(Cr=>Cr.id===P)||null,Ze=Re==null?void 0:Re.branch,nt=Ks(pe.packages),_t=ke?Ce(ke,Ze):Number(pe.pricePerPackage||0),Nt=(ke?Ue(ke,Ze):0)*nt,Tt=ke?ke.logisticAllocatedPerPack*nt:Number(pe.logisticAllocated||0),yt=(ke?Ve(ke,Ze):0)*nt,ur=ue(P),lr=pf(Nt,ur);return{...pe,pricePerPackage:_t,totalExpected:_t*nt,grossProfit:Nt,logisticAllocated:Tt,vendorMarginPercent:lr.vendorMarginPercent,uAproximada:yt,uVendor:lr.uVendor,uInvestor:lr.uInvestor,totalRivas:((ke==null?void 0:ke.unitPriceRivas)||pe.unitPriceRivas||0)*nt,totalSanJorge:((ke==null?void 0:ke.unitPriceSanJorge)||pe.unitPriceSanJorge||0)*nt,totalIsla:((ke==null?void 0:ke.unitPriceIsla)||pe.unitPriceIsla||0)*nt,unitPriceRivas:(ke==null?void 0:ke.unitPriceRivas)||pe.unitPriceRivas||0,unitPriceSanJorge:(ke==null?void 0:ke.unitPriceSanJorge)||pe.unitPriceSanJorge||0,unitPriceIsla:(ke==null?void 0:ke.unitPriceIsla)||pe.unitPriceIsla||0}}))},[_,P,ee.length,x,p]);const je=v.useMemo(()=>!c||!u?null:p.find(Y=>(Y.email||"").trim().toLowerCase()===u)||null,[c,u,p]);v.useMemo(()=>new Set(ee.map(Y=>Y.productId)),[ee]);const ot=v.useMemo(()=>x.filter(Y=>(b[Y.id]??0)>1).sort((Y,pe)=>`${Y.category} ${Y.name}`.localeCompare(`${pe.category} ${pe.name}`)),[x,b]),mt=v.useMemo(()=>{const Y=Pe.trim().toLowerCase();return Y?ot.filter(pe=>`${pe.category??""} ${pe.name??""}`.toLowerCase().includes(Y)):ot},[ot,Pe]),ut=v.useMemo(()=>x.find(Y=>Y.id===Ae)||null,[Ae,x]),_e=v.useMemo(()=>c&&je?j.filter(Y=>Y.sellerId===je.id):j,[j,c,je]),rt=async()=>{try{const Y=pt(Ge,"inventory_transfers_candies");if(!c){const Ct=await Lt(Y),Nt={};Ct.forEach(Tt=>{const St=Tt.data(),yt=Number(St.packagesMoved||0),cr=String(St.fromOrderKey||""),ur=String(St.toOrderKey||"");cr&&(Nt[cr]=Nt[cr]||{out:0,in:0},Nt[cr].out+=yt),ur&&(Nt[ur]=Nt[ur]||{out:0,in:0},Nt[ur].in+=yt)}),se(Nt);return}const pe=tr(Y,sr("fromSellerId","==",e)),ke=tr(Y,sr("toSellerId","==",e)),[Re,Ze]=await Promise.all([Lt(pe),Lt(ke)]),nt={},_t=(Ct,Nt)=>{Ct.forEach(Tt=>{const St=Tt.data(),yt=Number(St.packagesMoved||0),cr=String(Nt==="out"?St.fromOrderKey||"":St.toOrderKey||"");cr&&(nt[cr]=nt[cr]||{out:0,in:0},nt[cr][Nt]+=yt)})};_t(Re.docs,"out"),_t(Ze.docs,"in"),se(nt)}catch(Y){console.error(Y),se({})}};v.useEffect(()=>{(async()=>{h(!0),m("");try{const Y=await Lt(tr(pt(Ge,"sellers_candies"),ln("name","asc"))),pe=[];Y.forEach(St=>{const yt=St.data(),cr=yt.branch||yt.branchLabel||yt.route||yt.sucursal||yt.location||"";pe.push({id:St.id,name:yt.name||"",email:yt.email||"",commissionPercent:Number(yt.commissionPercent||0),branch:y$(cr),branchLabel:cr})}),g(pe);const ke=await Lt(tr(pt(Ge,"candy_main_orders"),ln("createdAt","desc"))),Re={},Ze={},nt=(St,yt)=>`${St}#${String(yt).padStart(10,"0")}`;ke.forEach(St=>{var Cr;const yt=St.data(),cr=Number(((Cr=yt.createdAt)==null?void 0:Cr.seconds)??0),ur=String(yt.date||""),lr=Array.isArray(yt.items)?yt.items:[];for(const Nr of lr){const mn=String(Nr.id||Nr.productId||"");if(!mn)continue;const bn=Ks(Nr.remainingPackages??Nr.remainingPacks??0);bn>0&&(Re[mn]=(Re[mn]||0)+bn);const Rr=Math.max(1,Ks(Nr.packages??0)),Nn=Number(Nr.unitPriceRivas||0),za=Number(Nr.unitPriceSanJorge||0),ti=Number(Nr.unitPriceIsla||0),Mn=Number(Nr.gainRivas??Nr.grossProfitRivas??Nr.grossProfit??0),Us=Number(Nr.gainSanJorge??Nr.grossProfitSanJorge??Nr.grossProfit??0),De=Number(Nr.gainIsla??Nr.grossProfitIsla??Nr.grossProfit??0),$t=Number(Nr.logisticAllocated??Nr.prorrateo??Nr.prorrateoLogistico??Nr.gastos??0),It=Number(Nr.uAproximada??Nr.uApprox??Nr.netProfit??Nr.vendorProfit??Nr.gainVendor??0)/Rr,kt=$t/Rr,Ht={id:mn,name:String(Nr.name||Nr.productName||""),category:String(Nr.category||""),unitsPerPackage:Ks(Nr.unitsPerPackage??0),unitPriceRivas:Nn,unitPriceSanJorge:za,unitPriceIsla:ti,grossProfitPerPackRivas:Mn/Rr,grossProfitPerPackSanJorge:Us/Rr,grossProfitPerPackIsla:De/Rr,uApproxPerPackRivas:It,uApproxPerPackSanJorge:It,uApproxPerPackIsla:It,logisticAllocatedPerPack:kt,key:nt(ur,cr)},Ft=Ze[mn];(!Ft||Ht.key>Ft.key)&&(Ze[mn]=Ht)}});const _t=await Lt(c?tr(pt(Ge,"inventory_candies_sellers"),sr("sellerId","==",e),ln("createdAt","desc")):tr(pt(Ge,"inventory_candies_sellers"),ln("createdAt","desc"))),Ct={};Object.keys(Re).forEach(St=>{const yt=Ks(Re[St]);Ct[St]=Math.max(0,yt)}),w(Ct);const Nt=Object.keys(Ze).map(St=>{const yt=Ze[St];return{id:yt.id,name:yt.name,category:yt.category,unitsPerPackage:yt.unitsPerPackage,unitPriceRivas:yt.unitPriceRivas,unitPriceSanJorge:yt.unitPriceSanJorge,unitPriceIsla:yt.unitPriceIsla,grossProfitPerPackRivas:yt.grossProfitPerPackRivas,grossProfitPerPackSanJorge:yt.grossProfitPerPackSanJorge,grossProfitPerPackIsla:yt.grossProfitPerPackIsla,uApproxPerPackRivas:yt.uApproxPerPackRivas,uApproxPerPackSanJorge:yt.uApproxPerPackSanJorge,uApproxPerPackIsla:yt.uApproxPerPackIsla,logisticAllocatedPerPack:yt.logisticAllocatedPerPack,existingPacks:Ct[yt.id]??0}}).sort((St,yt)=>`${St.category} ${St.name}`.localeCompare(`${yt.category} ${yt.name}`));y(Nt);const Tt=[];_t.forEach(St=>{const yt=St.data(),cr=pe.find(Rr=>Rr.id===yt.sellerId)||null,ur=bx(yt.vendorMarginPercent??yt.vendorMargin??yt.commissionPercent??(cr==null?void 0:cr.commissionPercent)??0),lr=Number(yt.uAproximada??yt.uApprox??yt.netProfit??yt.uAprox??yt.uApproxTotal??0),Cr=yt.uVendor??yt.vendorProfit??yt.gainVendor??0,Nr=yt.uVendor!=null,mn=pf(Number(yt.grossProfit??yt.gainVendor??0),ur),bn=Nr?{uAproximada:Number(lr||0),vendorMarginPercent:ur,uVendor:Number(Cr||0),uInvestor:Number(lr||0)-Number(Cr||0)}:{uAproximada:Number(lr||0),vendorMarginPercent:mn.vendorMarginPercent,uVendor:mn.uVendor,uInvestor:mn.uInvestor};Tt.push({id:St.id,sellerId:yt.sellerId,sellerName:yt.sellerName||"",productId:yt.productId,productName:yt.productName||"",category:yt.category||"",orderId:yt.orderId||null,packages:Number(yt.packages||0),unitsPerPackage:Number(yt.unitsPerPackage||0),totalUnits:Number(yt.totalUnits||0),remainingPackages:Number(yt.remainingPackages||0),remainingUnits:Number(yt.remainingUnits||0),totalRivas:Number(yt.totalRivas||0),totalSanJorge:Number(yt.totalSanJorge||0),totalIsla:Number(yt.totalIsla||0),unitPriceRivas:Number(yt.unitPriceRivas||0),unitPriceSanJorge:Number(yt.unitPriceSanJorge||0),unitPriceIsla:Number(yt.unitPriceIsla||0),grossProfit:Number(yt.grossProfit??yt.gainVendor??0),logisticAllocated:Number(yt.logisticAllocated??yt.gastos??yt.gasto??0),vendorMarginPercent:bn.vendorMarginPercent,uAproximada:bn.uAproximada,uVendor:bn.uVendor,uInvestor:bn.uInvestor,vendorProfit:Number(yt.vendorProfit??bn.uVendor??0),subtotal:Number(yt.subtotal||0),providerPrice:Number(yt.providerPrice||0),date:yt.date||"",createdAt:yt.createdAt||or.now()})}),I(Tt),await rt()}catch(Y){console.error(Y),m(" Error cargando datos de vendedores / pedidos.")}finally{h(!1)}})()},[a,t,e]);const we=(Y,pe)=>`${Y}__${pe}`,Ce=(Y,pe)=>pe?pe==="RIVAS"?Y.unitPriceRivas||0:pe==="SAN_JORGE"?Y.unitPriceSanJorge||0:Y.unitPriceIsla||0:Y.unitPriceIsla||Y.unitPriceRivas||Y.unitPriceSanJorge||0,Ue=(Y,pe)=>pe?pe==="RIVAS"?Y.grossProfitPerPackRivas||0:pe==="SAN_JORGE"?Y.grossProfitPerPackSanJorge||0:Y.grossProfitPerPackIsla||0:Y.grossProfitPerPackIsla||Y.grossProfitPerPackRivas||Y.grossProfitPerPackSanJorge||0,Ve=(Y,pe)=>pe?pe==="RIVAS"?Y.uApproxPerPackRivas||0:pe==="SAN_JORGE"?Y.uApproxPerPackSanJorge||0:Y.uApproxPerPackIsla||0:Y.uApproxPerPackIsla||Y.uApproxPerPackRivas||Y.uApproxPerPackSanJorge||0,ue=Y=>{const pe=p.find(ke=>ke.id===Y)||null;return bx((pe==null?void 0:pe.commissionPercent)??0)},ce=v.useMemo(()=>{const Y=new Map;for(const ke of _e){const Re=we(ke.sellerId,ke.date),Ze=Y.get(Re)||{orderKey:Re,sellerId:ke.sellerId,sellerName:ke.sellerName,date:ke.date,totalPackages:0,totalRemainingPackages:0,totalExpected:0,grossProfit:0,vendorProfit:0,gastos:0,transferredOut:0,transferredIn:0};Ze.totalPackages+=Number(ke.packages||0),Ze.totalRemainingPackages+=Number(ke.remainingPackages||0);const nt=p.find(Nr=>Nr.id===ke.sellerId)||null,_t=nt==null?void 0:nt.branch,Ct=x.find(Nr=>Nr.id===String(ke.productId))||null,Nt=Ks(ke.packages),St=(Ct?Ce(Ct,_t):Number(_t==="RIVAS"?ke.unitPriceRivas||0:_t==="SAN_JORGE"?ke.unitPriceSanJorge||0:ke.unitPriceIsla||0))*Nt;Ze.totalExpected+=Number(St||0);const cr=(Ct?Ue(Ct,_t):Nt>0?Number(ke.grossProfit||0)/Nt:0)*Nt;Ze.grossProfit+=Number(cr||0);const ur=Ct?Ct.logisticAllocatedPerPack*Nt:Number(ke.logisticAllocated??ke.gastos??ke.gasto??0);Ze.gastos=(Ze.gastos||0)+Number(ur||0);const lr=ue(ke.sellerId),Cr=pf(cr,lr);Ze.vendorProfit+=Number(Cr.uVendor||0),Y.set(Re,Ze)}const pe=[];for(const ke of Y.values()){const Re=le[ke.orderKey]||{out:0,in:0};ke.transferredOut=Re.out||0,ke.transferredIn=Re.in||0,pe.push(ke)}return pe.sort((ke,Re)=>(Re.date||"").localeCompare(ke.date||"")),pe},[_e,p,le,x]),Te=v.useMemo(()=>Math.max(1,Math.ceil(ce.length/J)),[ce.length]);v.useEffect(()=>{D>Te&&U(Te)},[Te]);const Xe=v.useMemo(()=>{const Y=(D-1)*J;return ce.slice(Y,Y+J)},[ce,D]),ft=()=>U(Y=>Math.max(1,Y-1)),gt=()=>U(Y=>Math.min(Te,Y+1)),vt=v.useMemo(()=>Math.max(1,Math.ceil(ee.length/ne)),[ee.length]);v.useEffect(()=>{ve>vt&&L(vt)},[vt]);const At=v.useMemo(()=>{const Y=(ve-1)*ne;return ee.slice(Y,Y+ne)},[ee,ve]),ye=v.useMemo(()=>{const Y=new Map;for(const pe of At){const ke=(pe.category||"Sin categora").trim()||"Sin categora",Re=Y.get(ke)||[];Re.push(pe),Y.set(ke,Re)}return Array.from(Y.entries())},[At]),$e=Y=>{ie(pe=>({...pe,[Y]:!pe[Y]}))},Ne=()=>L(Y=>Math.max(1,Y-1)),ct=()=>L(Y=>Math.min(vt,Y+1)),xe=v.useMemo(()=>{const Y=ee.reduce((Ct,Nt)=>Ct+Number(Nt.packages||0),0),pe=ee.reduce((Ct,Nt)=>Ct+Number(Nt.totalExpected||0),0),ke=ee.reduce((Ct,Nt)=>Ct+Number(Nt.grossProfit||0),0),Re=ee.reduce((Ct,Nt)=>Ct+Number(Nt.logisticAllocated??Nt.gastos??Nt.gasto??0),0),Ze=ee.reduce((Ct,Nt)=>Ct+Number(Nt.uVendor||0),0),nt=ke-Re-Ze;return{totalPackages:Y,totalExpected:pe,grossProfit:ke,gastosTotal:Re,uVendor:Ze,uNeta:nt,vendorProfit:Ze}},[ee]),Qe=()=>{k(null),T(""),W(""),de(""),ge("0"),Fe([]),F(""),L(1)},dt=()=>{m(""),Qe(),c&&je&&T(je.id);const Y=new Date,pe=Y.getFullYear(),ke=String(Y.getMonth()+1).padStart(2,"0"),Re=String(Y.getDate()).padStart(2,"0");W(`${pe}-${ke}-${Re}`),S(!0)},Bt=()=>{S(!1)},qe=Y=>{m(""),Qe(),k(Y);const[pe,ke]=Y.split("__");T(pe||""),W(ke||"");const Re=_e.filter(Ct=>we(Ct.sellerId,Ct.date)===Y),Ze=p.find(Ct=>Ct.id===pe)||null,nt=Ze==null?void 0:Ze.branch,_t=Re.map(Ct=>{const Nt=x.find(za=>za.id===String(Ct.productId))||null,Tt=Number(Ct.unitPriceRivas||(Nt==null?void 0:Nt.unitPriceRivas)||0),St=Number(Ct.unitPriceSanJorge||(Nt==null?void 0:Nt.unitPriceSanJorge)||0),yt=Number(Ct.unitPriceIsla||(Nt==null?void 0:Nt.unitPriceIsla)||0),cr=Number(Ct.packages||0),ur=nt==="RIVAS"?Tt:nt==="SAN_JORGE"?St:yt,lr=Number(Ct.totalRivas||0),Cr=Number(Ct.totalSanJorge||0),Nr=Number(Ct.totalIsla||0),mn=nt==="RIVAS"?lr:nt==="SAN_JORGE"?Cr:Nr,bn=bx(Ct.vendorMarginPercent??ue(pe)),Rr=pf(Number(Ct.grossProfit||0),bn),Nn=Number(Ct.logisticAllocated??Ct.gastos??0)||(Nt?Nt.logisticAllocatedPerPack*cr:0);return{id:Ct.id,productId:String(Ct.productId||""),productName:Ct.productName||(Nt==null?void 0:Nt.name)||"",category:Ct.category||(Nt==null?void 0:Nt.category)||"",unitsPerPackage:Number(Ct.unitsPerPackage||(Nt==null?void 0:Nt.unitsPerPackage)||0),packages:cr,totalExpected:mn,pricePerPackage:ur,grossProfit:Number(Ct.grossProfit||0),logisticAllocated:Nn,vendorMarginPercent:Rr.vendorMarginPercent,uAproximada:Number(Ct.uAproximada||0),uVendor:Number(Ct.uVendor??Rr.uVendor??0),uInvestor:Number(Ct.uInvestor??Rr.uInvestor??0),totalRivas:lr,totalSanJorge:Cr,totalIsla:Nr,unitPriceRivas:Tt,unitPriceSanJorge:St,unitPriceIsla:yt,remainingPackages:Number(Ct.remainingPackages||0)}});Fe(_t),S(!0)},bt=()=>{if(m(""),!P)return m(" Seleccion un vendedor.");if(!O)return m(" Seleccion una fecha.");if(!Ae)return m(" Seleccion un producto.");const Y=Ks(fe);if(Y<=0)return m(" Paquetes debe ser > 0.");const pe=x.find(lr=>lr.id===Ae);if(!pe)return m(" Producto no encontrado.");if(ee.some(lr=>lr.productId===pe.id))return m(" Ese producto ya est agregado al pedido.");const ke=p.find(lr=>lr.id===P)||null,Re=ke==null?void 0:ke.branch,Ze=Ce(pe,Re),nt=Ue(pe,Re),Ct=Ve(pe,Re)*Y,Nt=Ze*Y,Tt=nt*Y,St=pe.logisticAllocatedPerPack*Y,yt=ue(P),cr=pf(Tt,yt),ur={id:`tmp_${Date.now()}_${Math.random().toString(16).slice(2)}`,productId:pe.id,productName:pe.name,category:pe.category,unitsPerPackage:pe.unitsPerPackage,packages:Y,totalExpected:Nt,pricePerPackage:Ze,grossProfit:Tt,logisticAllocated:St,vendorMarginPercent:cr.vendorMarginPercent,uAproximada:Ct,uVendor:cr.uVendor,uInvestor:cr.uInvestor,totalRivas:(pe.unitPriceRivas||0)*Y,totalSanJorge:(pe.unitPriceSanJorge||0)*Y,totalIsla:(pe.unitPriceIsla||0)*Y,unitPriceRivas:pe.unitPriceRivas||0,unitPriceSanJorge:pe.unitPriceSanJorge||0,unitPriceIsla:pe.unitPriceIsla||0,remainingPackages:0};Fe(lr=>[ur,...lr]),de(""),ge("0"),L(1)},G=Y=>{Fe(pe=>pe.filter(ke=>ke.id!==Y))},te=(Y,pe)=>{const ke=Ks(pe);Fe(Re=>Re.map(Ze=>{if(Ze.id!==Y)return Ze;const nt=x.find(Nr=>Nr.id===Ze.productId),_t=p.find(Nr=>Nr.id===P)||null,Ct=_t==null?void 0:_t.branch,Nt=nt?Ce(nt,Ct):Ze.pricePerPackage||0,St=(nt?Ue(nt,Ct):0)*ke,yt=nt?nt.logisticAllocatedPerPack*ke:Ze.logisticAllocated||0,ur=(nt?Ve(nt,Ct):0)*ke,lr=Ze.vendorMarginPercent!=null?Ze.vendorMarginPercent:ue(P),Cr=pf(St,lr);return{...Ze,packages:ke,pricePerPackage:Nt,totalExpected:Nt*ke,grossProfit:St,logisticAllocated:yt,vendorMarginPercent:Cr.vendorMarginPercent,uAproximada:ur,uVendor:Cr.uVendor,uInvestor:Cr.uInvestor,totalRivas:((nt==null?void 0:nt.unitPriceRivas)||Ze.unitPriceRivas||0)*ke,totalSanJorge:((nt==null?void 0:nt.unitPriceSanJorge)||Ze.unitPriceSanJorge||0)*ke,totalIsla:((nt==null?void 0:nt.unitPriceIsla)||Ze.unitPriceIsla||0)*ke}}))},He=(Y,pe)=>{const ke=bx(pe);Fe(Re=>Re.map(Ze=>{if(Ze.id!==Y)return Ze;const nt=x.find(ur=>ur.id===Ze.productId),_t=p.find(ur=>ur.id===P)||null,Ct=_t==null?void 0:_t.branch,Nt=Ks(Ze.packages),St=(nt?Ve(nt,Ct):0)*Nt,yt=Number(Ze.grossProfit||0),cr=pf(yt,ke);return{...Ze,vendorMarginPercent:cr.vendorMarginPercent,uAproximada:St,uVendor:cr.uVendor,uInvestor:cr.uInvestor}}))},re=(Y,pe,ke="text/plain;charset=utf-8")=>{const Re=new Blob([pe],{type:ke}),Ze=URL.createObjectURL(Re),nt=document.createElement("a");nt.href=Ze,nt.download=Y,document.body.appendChild(nt),nt.click(),nt.remove(),URL.revokeObjectURL(Ze)},be=()=>{const Y=["Vendedor","Sucursal","Fecha","Producto ID","Producto","Categora","Paquetes","Paquetes restantes","Precio paquete","Total esperado","U. Bruta","U. Vendedor","U. Neta","P. Rivas","P. San Jorge","P. Isla","Total Rivas","Total San Jorge","Total Isla","Unidades x paquete","vendorMarginPercent","uVendor"],pe=p.find(nt=>nt.id===P)||null,ke=(pe==null?void 0:pe.branch)||y$(pe==null?void 0:pe.branchLabel)||"",Re=[Y.join(","),...ee.map(nt=>{const _t=Number(nt.grossProfit||0)-Number(nt.logisticAllocated??nt.gastos??0)-Number(nt.uVendor||0);return[(pe==null?void 0:pe.name)||"",String(ke),O||"",nt.productId,nt.productName,nt.category,String(Number(nt.packages||0)),String(Number(nt.remainingPackages||0)),String(Number(nt.pricePerPackage||0).toFixed(2)),String(Number(nt.totalExpected||0).toFixed(2)),String(Number(nt.grossProfit||0).toFixed(2)),String(Number(nt.uVendor||0).toFixed(2)),String(Number(_t||0).toFixed(2)),String(Number(nt.unitPriceRivas||0).toFixed(2)),String(Number(nt.unitPriceSanJorge||0).toFixed(2)),String(Number(nt.unitPriceIsla||0).toFixed(2)),String(Number(nt.totalRivas||0).toFixed(2)),String(Number(nt.totalSanJorge||0).toFixed(2)),String(Number(nt.totalIsla||0).toFixed(2)),String(Number(nt.unitsPerPackage||0)),String(Number(nt.vendorMarginPercent||0).toFixed(2)),String(Number(nt.uVendor||0).toFixed(2))].map(b$).join(",")})].join(`
`),Ze=`vendor_order_items_${((pe==null?void 0:pe.name)||"vendedor").replace(/\s+/g,"_")}_${O||"sin_fecha"}.csv`;re(Ze,Re,"text/csv;charset=utf-8")},Me=()=>{const Y=["productId","productName","category","Existentes","Paquetes","vendorMarginPercent","uNeta"],pe=x.map(Re=>({id:Re.id,name:Re.name,category:Re.category,existentes:Number(Re.existingPacks||0)})).filter(Re=>Re.existentes>0).sort((Re,Ze)=>`${Re.category} ${Re.name}`.localeCompare(`${Ze.category} ${Ze.name}`)),ke=[Y.join(","),...pe.map(Re=>[Re.id,Re.name,Re.category,String(Re.existentes),"","",""].map(b$).join(","))].join(`
`);re("plantilla_productos_orden_maestra.csv",ke,"text/csv;charset=utf-8")},tt=async Y=>{try{m("");const pe=await Y.text(),ke=L7e(pe);if(!ke.length)return m(" Archivo vaco.");const Re=ke[0].map(yt=>String(yt||"").trim().toLowerCase()),Ze=Re.findIndex(yt=>yt==="productid"||yt==="producto id"||yt==="id"),nt=Re.findIndex(yt=>yt==="paquetes"||yt==="packages"),_t=Re.findIndex(yt=>yt==="vendormarginpercent"||yt==="vendor_margin_percent"||yt==="marginvendorpercent"||yt==="margen"||yt==="margen vendedor"||yt==="margen_del_vendedor");if(Ze<0||nt<0)return m(" Plantilla invlida: debe tener columnas productId y Paquetes.");if(!P)return m(" Seleccion un vendedor antes de importar.");if(!O)return m(" Seleccion una fecha antes de importar.");const Ct=p.find(yt=>yt.id===P)||null,Nt=Ct==null?void 0:Ct.branch,Tt=ue(P),St=[];for(let yt=1;yt<ke.length;yt++){const cr=ke[yt]||[],ur=String(cr[Ze]||"").trim();if(!ur)continue;const lr=Ks(cr[nt]);if(lr<=0)continue;const Cr=x.find(It=>It.id===ur);if(!Cr)continue;const Nr=_t>=0?bx(cr[_t]):0,mn=_t>=0&&String(cr[_t]??"").trim()!==""?Nr:Tt,bn=Ce(Cr,Nt),Rr=Ue(Cr,Nt),Nn=bn*lr,za=Rr*lr,ti=Cr.logisticAllocatedPerPack*lr,Us=Ve(Cr,Nt)*lr,De=pf(za,mn),$t=ee.find(It=>It.productId===ur);if($t){const It=_t>=0&&String(cr[_t]??"").trim()!==""?mn:$t.vendorMarginPercent,kt=pf(za,It);Fe(Ht=>Ht.map(Ft=>Ft.id===$t.id?{...Ft,packages:lr,pricePerPackage:bn,totalExpected:Nn,grossProfit:za,logisticAllocated:ti,vendorMarginPercent:kt.vendorMarginPercent,uAproximada:Us,uVendor:kt.uVendor,uInvestor:kt.uInvestor,totalRivas:(Cr.unitPriceRivas||0)*lr,totalSanJorge:(Cr.unitPriceSanJorge||0)*lr,totalIsla:(Cr.unitPriceIsla||0)*lr}:Ft));continue}const Gt={id:`tmp_${Date.now()}_${Math.random().toString(16).slice(2)}`,productId:Cr.id,productName:Cr.name,category:Cr.category,unitsPerPackage:Cr.unitsPerPackage,packages:lr,pricePerPackage:bn,totalExpected:Nn,grossProfit:za,logisticAllocated:ti,vendorMarginPercent:De.vendorMarginPercent,uAproximada:Us,uVendor:De.uVendor,uInvestor:De.uInvestor,totalRivas:(Cr.unitPriceRivas||0)*lr,totalSanJorge:(Cr.unitPriceSanJorge||0)*lr,totalIsla:(Cr.unitPriceIsla||0)*lr,unitPriceRivas:Cr.unitPriceRivas||0,unitPriceSanJorge:Cr.unitPriceSanJorge||0,unitPriceIsla:Cr.unitPriceIsla||0,remainingPackages:0};St.push(Gt)}if(!St.length)return m(" No se encontraron filas con Paquetes > 0.");Fe(yt=>[...St,...yt]),L(1),m(` Importados ${St.length} productos desde plantilla.`)}catch(pe){console.error(pe),m(" Error importando archivo.")}},lt=async()=>{try{if(m(""),d)return m(" Solo lectura.");if(!P)return m(" Seleccion un vendedor.");if(!O)return m(" Seleccion una fecha.");if(!ee.length)return m(" Agreg al menos 1 producto.");const Y=p.find(Nt=>Nt.id===P)||null;if(!Y)return m(" Vendedor invlido.");const pe=Y.branch,ke=E?_e.filter(Nt=>we(Nt.sellerId,Nt.date)===E):[],Re=new Map;ke.forEach(Nt=>Re.set(String(Nt.productId),Nt));for(const Nt of ee){const Tt=Ks(Nt.packages),St=E?Re.get(Nt.productId):null,yt=St?Ks(St.packages):0,cr=Tt-yt;if(cr>0){const ur=b[Nt.productId]??0;if(cr>ur)return m(` "${Nt.productName}" excede existencias de orden maestra. Existentes: ${ur} (faltan ${cr})`)}}H(!0);const Ze=or.now(),nt=we(P,O),_t=ue(P);if(E){const Nt=ke.filter(Tt=>!ee.some(St=>St.productId===String(Tt.productId)));for(const Tt of Nt){const St=Ks(Tt.remainingPackages);St>0&&await v$({vendorInventoryId:Tt.id,packagesToReturn:St})}for(const Tt of ee){const St=Re.get(Tt.productId);if(!St)continue;const yt=Ks(Tt.packages),cr=Ks(St.packages),ur=yt-cr;if(ur<0){const lr=Math.abs(ur),Cr=Ks(St.remainingPackages);if(lr>Cr)return m(` No pods bajar "${Tt.productName}" en ${lr} porque solo quedan ${Cr} paquetes restantes.`);await v$({vendorInventoryId:St.id,packagesToReturn:lr})}}}const Ct=new Map;for(const Nt of ee){const Tt=Ks(Nt.packages),St=E?Re.get(Nt.productId):null,yt=St?Ks(St.packages):0,cr=Tt-yt;if(cr>0){const{allocations:ur}=await R7e({productId:Nt.productId,packagesToAllocate:cr});Ct.set(Nt.productId,ur||[])}}await Ti(Ge,async Nt=>{for(const Tt of ee){const St=Ks(Tt.packages),yt=Ks(Tt.unitsPerPackage),cr=St*yt,ur=E?Re.get(Tt.productId):null,lr=ur?Ks(ur.packages):0,Cr=ur?Ks(ur.remainingPackages):0,Nr=St-lr,mn=ur?Math.max(0,Cr+Nr):St,bn=mn*yt,Rr=x.find(Zt=>Zt.id===Tt.productId),Nn=Rr?Ce(Rr,pe):Number(Tt.pricePerPackage||0),ti=(Rr?Ue(Rr,pe):0)*St,Mn=Rr?Rr.logisticAllocatedPerPack*St:Tt.logisticAllocated||0,De=(Rr?Ve(Rr,pe):0)*St,$t=Tt.vendorMarginPercent!=null?Tt.vendorMarginPercent:_t,Gt=pf(ti,$t),It=Number(ti||0)-Number(Mn||0)-Number(Gt.uVendor||0),kt=((Rr==null?void 0:Rr.unitPriceRivas)||Tt.unitPriceRivas||0)*St,Ht=((Rr==null?void 0:Rr.unitPriceSanJorge)||Tt.unitPriceSanJorge||0)*St,Ft=((Rr==null?void 0:Rr.unitPriceIsla)||Tt.unitPriceIsla||0)*St,Vt={sellerId:Y.id,sellerName:Y.name,sellerEmail:Y.email||"",branch:Y.branch||"",branchLabel:Y.branchLabel||"",productId:Tt.productId,productName:Tt.productName,category:Tt.category,orderId:nt,date:O,createdAt:Ze,packages:St,unitsPerPackage:yt,totalUnits:cr,remainingPackages:mn,remainingUnits:bn,totalRivas:kt,totalSanJorge:Ht,totalIsla:Ft,unitPriceRivas:(Rr==null?void 0:Rr.unitPriceRivas)||Tt.unitPriceRivas||0,unitPriceSanJorge:(Rr==null?void 0:Rr.unitPriceSanJorge)||Tt.unitPriceSanJorge||0,unitPriceIsla:(Rr==null?void 0:Rr.unitPriceIsla)||Tt.unitPriceIsla||0,grossProfit:ti,logisticAllocated:Mn,vendorMarginPercent:Gt.vendorMarginPercent,uVendor:Gt.uVendor,uNeta:It,vendorProfit:Gt.uVendor},nr=Ct.get(Tt.productId)||[];if(E)if(String(Tt.id||"").startsWith("tmp_")){const Zt=Kt(pt(Ge,"inventory_candies_sellers"));Vt.masterAllocations=nr,Nt.set(Zt,Vt)}else{const Zt=Kt(Ge,"inventory_candies_sellers",Tt.id);nr.length>0&&(Vt.masterAllocations=BZ(...nr)),Nt.set(Zt,Vt,{merge:!0})}else{const Zt=Kt(pt(Ge,"inventory_candies_sellers"));Vt.masterAllocations=nr,Nt.set(Zt,Vt)}}}),m(" Pedido guardado."),S(!1),Qe(),s()}catch(Y){console.error(Y),m(" Error guardando el pedido.")}finally{H(!1)}},ae=async Y=>{try{if(m(""),!l)return m(" Solo admin.");H(!0);const pe=_e.filter(ke=>we(ke.sellerId,ke.date)===Y);for(const ke of pe)await M7e(ke.id);m(" Pedido eliminado."),s()}catch(pe){console.error(pe),m(" Error eliminando pedido.")}finally{H(!1)}},V=No.useRef(null),X=()=>{var Y;if(d)return m(" Solo lectura.");if(!P)return m(" Seleccion un vendedor.");if(!O)return m(" Seleccion una fecha.");(Y=V.current)==null||Y.click()},me=async Y=>{var ke;const pe=(ke=Y.target.files)==null?void 0:ke[0];Y.target.value="",pe&&await tt(pe)},Ie=c&&!!je;return o.jsxs("div",{className:"p-3 md:p-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2 md:gap-3 mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h2",{className:"text-lg md:text-2xl font-semibold",children:"rdenes de Vendedor (Dulces)"}),o.jsx("p",{className:"text-xs md:text-sm text-gray-600",children:"Pedidos agrupados por vendedor + fecha. U. Bruta viene de la orden maestra. U. Neta = U. Bruta - Gastos - U. Vendedor."})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx(Ic,{onClick:s}),!d&&o.jsx("button",{onClick:dt,className:"px-3 py-2 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",children:"+ Nuevo pedido"})]})]}),A&&!_&&o.jsx("div",{className:"mb-3 p-2 rounded border text-sm bg-white",children:A}),f?o.jsx("div",{className:"p-4 text-sm text-gray-600",children:"Cargando"}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"hidden md:block bg-white border rounded",children:[o.jsxs("div",{className:"p-3 border-b flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm text-gray-700",children:["Total pedidos: ",o.jsx("b",{children:ce.length})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("button",{className:"px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:()=>{if(!_){m(" Abr un pedido para exportar productos asociados.");return}be()},children:"Exportar asociados"})})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1100px] w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left p-2 border-b",children:"Fecha"}),o.jsx("th",{className:"text-left p-2 border-b",children:"Vendedor"}),o.jsx("th",{className:"text-right p-2 border-b",children:"Paquetes"}),o.jsx("th",{className:"text-right p-2 border-b",children:"Restantes"}),o.jsx("th",{className:"text-right p-2 border-b",children:"Total esperado"}),o.jsx("th",{className:"text-right p-2 border-b",children:"U. Bruta"}),o.jsx("th",{className:"text-right p-2 border-b",children:"Gastos"}),o.jsx("th",{className:"text-right p-2 border-b",children:"U. Vendedor"}),o.jsx("th",{className:"text-right p-2 border-b",children:"Trasl. Salida"}),o.jsx("th",{className:"text-right p-2 border-b",children:"Trasl. Entrada"}),o.jsx("th",{className:"text-left p-2 border-b",children:"Acciones"})]})}),o.jsxs("tbody",{children:[Xe.map(Y=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"p-2 border-b",children:Y.date}),o.jsx("td",{className:"p-2 border-b",children:Y.sellerName}),o.jsx("td",{className:"p-2 border-b text-right",children:Y.totalPackages}),o.jsx("td",{className:"p-2 border-b text-right",children:Y.totalRemainingPackages}),o.jsx("td",{className:"p-2 border-b text-right",children:Gs(Y.totalExpected)}),o.jsx("td",{className:"p-2 border-b text-right",children:Gs(Y.grossProfit)}),o.jsx("td",{className:"p-2 border-b text-right",children:Gs(Y.gastos||0)}),o.jsx("td",{className:"p-2 border-b text-right",children:Gs(Y.vendorProfit)}),o.jsx("td",{className:"p-2 border-b text-right",children:Y.transferredOut}),o.jsx("td",{className:"p-2 border-b text-right",children:Y.transferredIn}),o.jsx("td",{className:"p-2 border-b",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"px-3 py-1.5 rounded bg-gray-900 text-white text-xs hover:bg-black",onClick:()=>qe(Y.orderKey),children:"Ver / Editar"}),l&&o.jsx("button",{className:"px-3 py-1.5 rounded bg-red-600 text-white text-xs hover:bg-red-700",onClick:()=>{confirm("Eliminar este pedido completo?")&&ae(Y.orderKey)},children:"Eliminar"})]})})]},Y.orderKey)),!Xe.length&&o.jsx("tr",{children:o.jsx("td",{className:"p-3 text-sm text-gray-600",colSpan:11,children:"No hay pedidos."})})]})]})}),o.jsxs("div",{className:"p-3 flex items-center justify-between",children:[o.jsxs("div",{className:"text-xs text-gray-600",children:["Pgina ",D," / ",Te]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"px-3 py-1.5 rounded border text-sm hover:bg-gray-50",onClick:ft,disabled:D<=1,children:""}),o.jsx("button",{className:"px-3 py-1.5 rounded border text-sm hover:bg-gray-50",onClick:gt,disabled:D>=Te,children:""})]})]})]}),o.jsxs("div",{className:"md:hidden space-y-2",children:[o.jsxs("div",{className:"bg-white border rounded p-2 flex items-center justify-between",children:[o.jsxs("div",{className:"text-xs text-gray-700",children:["Total pedidos: ",o.jsx("b",{children:ce.length})]}),o.jsxs("div",{className:"text-xs text-gray-600",children:[D,"/",Te]})]}),Xe.map(Y=>o.jsxs("div",{className:"bg-white border rounded",role:"button",tabIndex:0,onClick:()=>qe(Y.orderKey),onKeyDown:pe=>{(pe.key==="Enter"||pe.key===" ")&&(pe.preventDefault(),qe(Y.orderKey))},children:[o.jsxs("div",{className:"p-2 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-semibold",children:Y.sellerName}),o.jsx("div",{className:"text-xs text-gray-600",children:Y.date})]}),l&&o.jsx("button",{className:"px-3 py-2 rounded border text-sm text-red-600",onClick:pe=>{pe.stopPropagation(),confirm("Eliminar este pedido completo?")&&ae(Y.orderKey)},children:"Eliminar"})]}),o.jsx("div",{className:"px-2 pb-2",children:o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[o.jsxs("div",{className:"border rounded p-2",children:[o.jsx("div",{className:"text-gray-600",children:"Paquetes"}),o.jsx("div",{className:"font-semibold",children:Y.totalPackages})]}),o.jsxs("div",{className:"border rounded p-2",children:[o.jsx("div",{className:"text-gray-600",children:"Restantes"}),o.jsx("div",{className:"font-semibold",children:Y.totalRemainingPackages})]}),o.jsxs("div",{className:"border rounded p-2",children:[o.jsx("div",{className:"text-gray-600",children:"Total esperado"}),o.jsx("div",{className:"font-semibold",children:Gs(Y.totalExpected)})]}),o.jsxs("div",{className:"border rounded p-2",children:[o.jsx("div",{className:"text-gray-600",children:"U. Vendedor"}),o.jsx("div",{className:"font-semibold",children:Gs(Y.vendorProfit)})]})]})})]},Y.orderKey)),!Xe.length&&o.jsx("div",{className:"p-3 text-sm text-gray-600 bg-white border rounded",children:"No hay pedidos."}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"flex-1 px-3 py-2 rounded border text-sm",onClick:ft,disabled:D<=1,children:""}),o.jsx("button",{className:"flex-1 px-3 py-2 rounded border text-sm",onClick:gt,disabled:D>=Te,children:""})]})]})]}),_&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-3 md:p-6",children:o.jsxs("div",{className:"bg-white w-full max-w-5xl max-h-[90vh] overflow-y-auto rounded shadow relative",children:[Q&&o.jsx("div",{className:"absolute inset-0 bg-white/70 flex items-center justify-center z-50",children:o.jsx("div",{className:"text-sm font-semibold",children:"Guardando"})}),o.jsxs("div",{className:"p-3 md:p-5 border-b flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-lg font-semibold",children:E?"Editar pedido":"Nuevo pedido"}),o.jsx("div",{className:"text-xs text-gray-600",children:"U. Bruta viene de Orden Maestra. U. Vendedor e Inversionista se calculan aqu. U. Neta = U. Bruta - Gastos - U. Vendedor."})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:Bt,children:"Cerrar"}),!d&&o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",onClick:lt,children:"Guardar"})]})]}),o.jsxs("div",{className:"p-3 md:p-5 space-y-3",children:[o.jsxs("button",{type:"button",className:"md:hidden w-full px-3 py-2 rounded border text-sm flex items-center justify-between",onClick:()=>z(Y=>!Y),children:[o.jsx("span",{children:"Filtros y KPIs"}),o.jsx("span",{children:R?"":"+"})]}),o.jsxs("div",{className:`${R?"block":"hidden"} md:block space-y-3`,children:[o.jsxs("div",{className:"grid md:grid-cols-3 gap-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Vendedor"}),o.jsxs("select",{className:"w-full border rounded p-2 text-sm",value:P,onChange:Y=>T(Y.target.value),disabled:Ie,children:[o.jsx("option",{value:"",children:"-- Seleccionar --"}),p.map(Y=>o.jsxs("option",{value:Y.id,children:[Y.name," ",Y.branch?`(${Y.branch})`:""]},Y.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border rounded p-2 text-sm",value:O,onChange:Y=>W(Y.target.value)})]}),o.jsxs("div",{className:"flex items-end gap-2",children:[o.jsx("button",{className:"flex-1 px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:Me,children:"Plantilla"}),o.jsx("button",{className:"flex-1 px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:X,children:"Importar CSV"}),o.jsx("input",{ref:V,type:"file",accept:".csv,text/csv",className:"hidden",onChange:me})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-2",children:[o.jsxs("div",{className:"border rounded p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes totales"}),o.jsx("div",{className:"text-lg font-semibold",children:xe.totalPackages})]}),o.jsxs("div",{className:"border rounded p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total esperado"}),o.jsx("div",{className:"text-lg font-semibold",children:Gs(xe.totalExpected)})]}),o.jsxs("div",{className:"border rounded p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"U. Bruta"}),o.jsx("div",{className:"text-lg font-semibold",children:Gs(xe.grossProfit)})]}),o.jsxs("div",{className:"border rounded p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"U. Vendedor"}),o.jsx("div",{className:"text-lg font-semibold",children:Gs(xe.uVendor)})]}),o.jsxs("div",{className:"border rounded p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"U. Neta"}),o.jsx("div",{className:"text-lg font-semibold",children:Gs(xe.uNeta)})]})]})]}),o.jsxs("div",{className:"border rounded p-3 space-y-2",children:[o.jsxs("button",{type:"button",className:"md:hidden w-full px-3 py-2 rounded border text-sm flex items-center justify-between",onClick:()=>Oe(Y=>!Y),children:[o.jsx("span",{children:"Agregar producto"}),o.jsx("span",{children:Z?"":"+"})]}),o.jsxs("div",{className:`${Z?"block":"hidden"} md:block space-y-2`,children:[o.jsx("div",{className:"text-sm font-semibold hidden md:block",children:"Agregar producto"}),o.jsxs("div",{className:"grid md:grid-cols-4 gap-2",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Buscar"}),o.jsx("input",{className:"w-full border rounded p-2 text-sm",value:Pe,onChange:Y=>F(Y.target.value),placeholder:"Buscar por categora o nombre"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Producto"}),o.jsxs("select",{className:"w-full border rounded p-2 text-sm",value:Ae,onChange:Y=>de(Y.target.value),children:[o.jsx("option",{value:"",children:"-- Seleccionar --"}),mt.map(Y=>o.jsxs("option",{value:Y.id,children:[Y.category," - ",Y.name," (exist:"," ",b[Y.id]??0,")"]},Y.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Paquetes"}),o.jsx("input",{className:"w-full border rounded p-2 text-sm",value:fe,onChange:Y=>ge(Y.target.value),inputMode:"numeric"})]}),o.jsx("div",{className:"flex items-end",children:o.jsx("button",{className:"w-full px-3 py-2 rounded bg-gray-900 text-white text-sm hover:bg-black",onClick:bt,disabled:!ut,children:"Agregar"})})]})]})]}),o.jsxs("div",{className:"border rounded",children:[o.jsxs("div",{className:"p-3 border-b flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm font-semibold",children:["Productos asociados (",ee.length,")"]}),o.jsx("div",{className:"flex gap-2",children:o.jsx("button",{className:"px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:be,disabled:!ee.length,children:"Exportar CSV"})})]}),o.jsx("div",{className:"hidden md:block overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1300px] w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left p-2 border-b",children:"Categora"}),o.jsx("th",{className:"text-left p-2 border-b",children:"Producto"}),o.jsx("th",{className:"text-right p-2 border-b",children:"Paquetes"}),o.jsx("th",{className:"text-right p-2 border-b",children:"Restantes"}),o.jsx("th",{className:"text-right p-2 border-b",children:"Precio/paq"}),o.jsx("th",{className:"text-right p-2 border-b",children:"Total esperado"}),o.jsx("th",{className:"text-right p-2 border-b",children:"U. Bruta"}),o.jsx("th",{className:"text-right p-2 border-b",children:"Gastos"}),o.jsx("th",{className:"text-right p-2 border-b",children:"U. Vendedor"}),o.jsx("th",{className:"text-right p-2 border-b",children:"U. Neta"}),o.jsx("th",{className:"text-right p-2 border-b",children:"Margen (%)"}),o.jsx("th",{className:"text-left p-2 border-b",children:"Acciones"})]})}),o.jsxs("tbody",{children:[At.map(Y=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"p-2 border-b",children:Y.category}),o.jsx("td",{className:"p-2 border-b",children:Y.productName}),o.jsx("td",{className:"p-2 border-b text-right",children:d?o.jsx("span",{children:Y.packages}):o.jsx("input",{className:"w-20 border rounded p-1 text-right",value:String(Y.packages),onChange:pe=>te(Y.id,pe.target.value),inputMode:"numeric"})}),o.jsx("td",{className:"p-2 border-b text-right",children:Y.remainingPackages}),o.jsx("td",{className:"p-2 border-b text-right",children:Gs(Y.pricePerPackage)}),o.jsx("td",{className:"p-2 border-b text-right",children:Gs(Y.totalExpected)}),o.jsx("td",{className:"p-2 border-b text-right",children:Gs(Y.grossProfit)}),o.jsx("td",{className:"p-2 border-b text-right",children:Gs(Y.logisticAllocated??Y.logisticAllocated??Y.gastos??0)}),o.jsx("td",{className:"p-2 border-b text-right",children:Gs(Y.uVendor)}),o.jsx("td",{className:"p-2 border-b text-right",children:Gs(Number(Y.grossProfit||0)-Number(Y.logisticAllocated??Y.gastos??0)-Number(Y.uVendor||0))}),o.jsx("td",{className:"p-2 border-b text-right",children:d?o.jsxs("span",{children:[Number(Y.vendorMarginPercent??ue(P)).toFixed(2),"%"]}):o.jsx("input",{type:"number",step:"0.01",min:0,className:"w-20 border rounded p-1 text-right",value:String(Y.vendorMarginPercent??ue(P)),onChange:pe=>He(Y.id,pe.target.value),inputMode:"decimal"})}),o.jsx("td",{className:"p-2 border-b",children:!d&&o.jsx("button",{className:"px-3 py-1.5 rounded bg-red-600 text-white text-xs hover:bg-red-700",onClick:()=>G(Y.id),children:"Quitar"})})]},Y.id)),!At.length&&o.jsx("tr",{children:o.jsx("td",{className:"p-3 text-sm text-gray-600",colSpan:12,children:"No hay productos asociados."})})]})]})}),o.jsxs("div",{className:"md:hidden p-3 space-y-2",children:[ye.map(([Y,pe])=>{const ke=!!Ye[Y];return o.jsxs("div",{className:"border rounded",children:[o.jsxs("button",{type:"button",className:"w-full px-3 py-2 flex items-center justify-between text-sm",onClick:()=>$e(Y),children:[o.jsx("span",{className:"font-semibold",children:Y}),o.jsxs("span",{className:"text-xs text-gray-600",children:[pe.length," ",pe.length===1?"producto":"productos"]})]}),ke&&o.jsx("div",{className:"px-3 pb-3 space-y-2",children:pe.map(Re=>o.jsxs("div",{className:"border rounded p-2 text-xs space-y-2",children:[o.jsx("div",{className:"font-semibold text-sm",children:Re.productName}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Paquetes"}),d?o.jsx("div",{className:"font-semibold",children:Re.packages}):o.jsx("input",{className:"w-full border rounded p-1 text-right",value:String(Re.packages),onChange:Ze=>te(Re.id,Ze.target.value),inputMode:"numeric"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Restantes"}),o.jsx("div",{className:"font-semibold",children:Re.remainingPackages})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Precio/paq"}),o.jsx("div",{className:"font-semibold",children:Gs(Re.pricePerPackage)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Total esperado"}),o.jsx("div",{className:"font-semibold",children:Gs(Re.totalExpected)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"U. Bruta"}),o.jsx("div",{className:"font-semibold",children:Gs(Re.grossProfit)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Gastos"}),o.jsx("div",{className:"font-semibold",children:Gs(Re.logisticAllocated??Re.logisticAllocated??Re.gastos??0)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"U. Vendedor"}),o.jsx("div",{className:"font-semibold",children:Gs(Re.uVendor)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"U. Neta"}),o.jsx("div",{className:"font-semibold",children:Gs(Number(Re.grossProfit||0)-Number(Re.logisticAllocated??Re.gastos??0)-Number(Re.uVendor||0))})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-gray-600",children:"Margen (%)"}),d?o.jsxs("div",{className:"font-semibold",children:[Number(Re.vendorMarginPercent??ue(P)).toFixed(2),"%"]}):o.jsx("input",{type:"number",step:"0.01",min:0,className:"w-full border rounded p-1 text-right",value:String(Re.vendorMarginPercent??ue(P)),onChange:Ze=>He(Re.id,Ze.target.value),inputMode:"decimal"})]}),!d&&o.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white text-xs",onClick:()=>G(Re.id),children:"Quitar"})]})]},Re.id))})]},Y)}),!At.length&&o.jsx("div",{className:"p-3 text-sm text-gray-600 text-center",children:"No hay productos asociados."})]}),o.jsxs("div",{className:"p-3 flex items-center justify-between",children:[o.jsxs("div",{className:"text-xs text-gray-600",children:["Pgina items ",ve," / ",vt]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"px-3 py-1.5 rounded border text-sm hover:bg-gray-50",onClick:Ne,disabled:ve<=1,children:""}),o.jsx("button",{className:"px-3 py-1.5 rounded border text-sm hover:bg-gray-50",onClick:ct,disabled:ve>=vt,children:""})]})]})]}),o.jsxs("div",{className:"flex flex-col md:flex-row gap-2 md:items-center md:justify-between",children:[o.jsx("div",{className:"text-xs text-gray-600",children:E?o.jsxs(o.Fragment,{children:["Editando: ",o.jsx("b",{children:E})]}):o.jsx(o.Fragment,{children:"Nuevo pedido (an no guardado)"})}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:Bt,children:"Cancelar"}),!d&&o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",onClick:lt,children:"Guardar pedido"})]})]}),A&&o.jsx("div",{className:"text-sm text-gray-700",children:A})]})]})})]})}const jn=t=>Math.max(0,Math.floor(Number(t)||0)),Sb=t=>Math.round(t||0);function _ae(t){const e=Math.max(1,jn(t.unitsPerPackage||1)),r=jn(t.totalUnits||0),n=jn(t.quantity||0),a=jn(t.packages||0);return r>0?r:n>0?n:a>0?a*e:0}function Q7e(t){const e=Number(t.remaining);return Number.isFinite(e)&&e>0?Math.floor(e):_ae(t)}function w$(t){const e=Number(t.remainingPackages);if(Number.isFinite(e))return Math.max(0,Math.floor(e));const r=Math.max(1,jn(t.unitsPerPackage||1)),n=Q7e(t);return Math.max(0,Math.floor(n/r))}function V7e(t){const e=Math.max(1,jn(t.unitsPerPackage||1)),r=_ae(t);return Math.max(0,Math.floor(r/e))}function Ib(t){return String(t??"").trim().toLowerCase().replace(/\s+/g," ")}function gf(t){const e=String(t??"").trim();if(!e)return 0;const r=e.replace(/,/g,"."),n=Number(r);return Number.isFinite(n)?n:0}function AA(t,e){const r={};Object.keys(t||{}).forEach(n=>r[Ib(n)]=t[n]);for(const n of e){const a=r[Ib(n)];if(a!=null&&String(a).trim()!=="")return a}}function Dm(t,e,r){const n=t*e,a=Math.min(Math.max(r.marginR,0),99.9)/100,s=Math.min(Math.max(r.marginSJ,0),99.9)/100,i=Math.min(Math.max(r.marginIsla,0),99.9)/100,l=e>0&&a<1?n/(1-a):n,c=e>0&&s<1?n/(1-s):n,u=e>0&&i<1?n/(1-i):n,d=l-n,f=c-n,h=u-n,A=e>0?Sb(l/e):0,m=e>0?Sb(c/e):0,p=e>0?Sb(u/e):0;return{subtotal:n,totalRivas:l,totalSanJorge:c,totalIsla:u,gainRivas:d,gainSanJorge:f,gainIsla:h,unitPriceRivas:A,unitPriceSanJorge:m,unitPriceIsla:p}}function H7e(t){return Number(t.gainRivas||0)}function $7e(t){return Number(t.gainIsla||0)}function N$(t,e,r){const n=H7e(t),a=$7e(t),s=Number(t.subtotal||0),i=e>0&&r>0?e*s/r:0;return{...t,grossProfit:n,grossProfitIsla:a,logisticAllocated:i}}function G7e(){const{refreshKey:t,refresh:e}=jc(),[r,n]=v.useState(""),[a,s]=v.useState(!0),[i,l]=v.useState(!1),[c,u]=v.useState([]),[d,f]=v.useState(!1),[h,A]=v.useState([]),[m,p]=v.useState({}),[g,x]=v.useState(!1),[y,b]=v.useState(null),[w,j]=v.useState(""),[I,_]=v.useState(""),[S,E]=v.useState("20"),[k,P]=v.useState("15"),[T,O]=v.useState("30"),[W,Ae]=v.useState("0"),[de,fe]=v.useState([]),[ge,ee]=v.useState(""),[Fe,Pe]=v.useState(""),[F,Q]=v.useState(""),[H,R]=v.useState("1"),[z,J]=v.useState("0"),[D,U]=v.useState("DATOS"),[ne,ve]=v.useState(""),[L,Ye]=v.useState(1),ie=15,Z=v.useMemo(()=>Math.max(1,Math.ceil(h.length/ie)),[h.length]);v.useEffect(()=>Ye(1),[h.length]);const Oe=v.useMemo(()=>{const G=(L-1)*ie;return h.slice(G,G+ie)},[h,L]),le=v.useMemo(()=>{const G=new Set;for(const te of c){const He=String(te.category||"").trim();He&&G.add(He)}return Array.from(G).sort((te,He)=>te.localeCompare(He,"es"))},[c]);v.useEffect(()=>{!ge&&le.length>0&&ee(le[0])},[le]);const se=async()=>{f(!0);try{const G=await Lt(tr(pt(Ge,"products_candies"),ln("createdAt","desc"))),te=[];G.forEach(He=>{const re=He.data();te.push({id:He.id,name:String(re.name??"").trim(),category:String(re.category??"").trim()||"Caramelo",providerPrice:Number(re.providerPrice??0),unitsPerPackage:Number(re.unitsPerPackage??1)})}),u(te)}catch(G){console.error(G),n(" Error cargando catlogo de dulces.")}finally{f(!1)}};v.useEffect(()=>{se()},[t]);const Be=v.useMemo(()=>(ge.trim().length>0?c.filter(te=>te.category===ge):c).sort((te,He)=>te.name.localeCompare(He.name,"es")),[c,ge]);v.useEffect(()=>{if(!Fe){Q(""),R("1");return}const G=c.find(te=>te.id===Fe);G&&(Q(String(G.providerPrice??0)),R(String(G.unitsPerPackage??1)))},[Fe,c]);const je=()=>{b(null),j(""),_(""),fe([]),ee(le[0]||""),Pe(""),Q(""),J("0"),R("1"),E("20"),P("15"),O("30"),Ae("0"),U("DATOS"),ve("")},ot=()=>{if(n(""),!Fe){n("Selecciona un producto del catlogo.");return}const G=c.find(V=>V.id===Fe);if(!G){n("Producto de catlogo no encontrado (refresca).");return}const te=Number(G.providerPrice||0),He=jn(z||0),re=jn(G.unitsPerPackage||0);if(te<0){n("El precio proveedor no puede ser negativo.");return}if(He<=0){n("Los paquetes deben ser mayor que 0.");return}if(re<=0){n("Las unidades por paquete deben ser mayor que 0.");return}const be=Number(S||0),Me=Number(k||0),tt=Number(T||0),lt=Dm(te,He,{marginR:be,marginSJ:Me,marginIsla:tt});if(de.find(V=>V.id===G.id))fe(V=>V.map(X=>{if(X.id!==G.id)return X;const me=jn(X.packages||0)+He,Ie=Dm(te,me,{marginR:Number(X.marginRivas??be),marginSJ:Number(X.marginSanJorge??Me),marginIsla:Number(X.marginIsla??tt)}),pe=jn(X.remainingPackages??X.packages)+He;return{...X,providerPrice:te,unitsPerPackage:re,packages:me,remainingPackages:pe,...Ie}}));else{const V={id:G.id,name:G.name,category:G.category,providerPrice:te,packages:He,unitsPerPackage:re,marginRivas:be,marginSanJorge:Me,marginIsla:tt,subtotal:lt.subtotal,totalRivas:lt.totalRivas,totalSanJorge:lt.totalSanJorge,totalIsla:lt.totalIsla,gainRivas:lt.gainRivas,gainSanJorge:lt.gainSanJorge,gainIsla:lt.gainIsla,unitPriceRivas:lt.unitPriceRivas,unitPriceSanJorge:lt.unitPriceSanJorge,unitPriceIsla:lt.unitPriceIsla,remainingPackages:He};fe(X=>[...X,V])}Pe(""),J("0"),U("ITEMS")},mt=G=>{fe(te=>te.filter(He=>He.id!==G))},ut=(G,te,He)=>{fe(re=>re.map(be=>{if(be.id!==G)return be;let Me={...be};if(te==="packages"&&(Me.packages=jn(He||0)),te==="unitsPerPackage"&&(Me.unitsPerPackage=jn(He||0)),te==="marginRivas"&&(Me.marginRivas=Number(He||0)),te==="marginIsla"&&(Me.marginIsla=Number(He||0)),te==="marginSanJorge"&&(Me.marginSanJorge=Number(He||0)),te==="packages"||te==="marginRivas"||te==="marginIsla"||te==="marginSanJorge"){const tt=Dm(Me.providerPrice,Me.packages,{marginR:Number(Me.marginRivas||0),marginSJ:Number(Me.marginSanJorge||0),marginIsla:Number(Me.marginIsla||0)});Me={...Me,...tt}}return(Me.remainingPackages===void 0||Me.remainingPackages===null)&&(Me.remainingPackages=Me.packages),Me}))},_e=v.useMemo(()=>{const G=de.reduce((Me,tt)=>Me+jn(tt.packages),0),te=de.reduce((Me,tt)=>Me+Number(tt.subtotal||0),0),He=de.reduce((Me,tt)=>Me+Number(tt.totalRivas||0),0),re=de.reduce((Me,tt)=>Me+Number(tt.totalSanJorge||0),0),be=de.reduce((Me,tt)=>Me+Number(tt.totalIsla||0),0);return{totalPackages:G,subtotal:te,totalRivas:He,totalSanJorge:re,totalIsla:be}},[de]),rt=v.useMemo(()=>{const G=Math.max(0,gf(W||0)),te=Number(_e.subtotal||0),He=de.map(tt=>N$(tt,G,te)),re=He.reduce((tt,lt)=>tt+Number(lt.grossProfit||0),0),be=He.reduce((tt,lt)=>tt+Number(lt.grossProfitIsla||0),0),Me=He.reduce((tt,lt)=>tt+Number(lt.logisticAllocated||0),0);return{items:He,logisticsTotal:G,grossTotal:re,grossIslaTotal:be,logisticAllocatedTotal:Me}},[de,W,_e.subtotal]),we=v.useMemo(()=>{const G=String(ne||"").trim().toLowerCase();return G?rt.items.filter(te=>{const He=String(te.name||"").toLowerCase(),re=String(te.category||"").toLowerCase();return He.includes(G)||re.includes(G)}):rt.items},[rt.items,ne]),[Ce,Ue]=v.useState(1),Ve=15,ue=v.useMemo(()=>Math.max(1,Math.ceil(we.length/Ve)),[we.length]);v.useEffect(()=>Ue(1),[we.length]);const ce=v.useMemo(()=>{const G=(Ce-1)*Ve;return we.slice(G,G+Ve)},[we,Ce]),[Te,Xe]=v.useState({});v.useEffect(()=>Xe({}),[we.length]);const[ft,gt]=v.useState({});v.useEffect(()=>{const G={};for(const te of h)te&&te.id&&(G[te.id]=!1);gt(G)},[h]);const vt=v.useMemo(()=>({totalPackages:_e.totalPackages,subtotalCosto:_e.subtotal,esperadoRivas:_e.totalRivas,esperadoIsla:_e.totalIsla,gastosLogisticos:rt.logisticsTotal,utilidadBrutaRivas:rt.grossTotal,utilidadBrutaIsla:rt.grossIslaTotal}),[_e,rt]),At=()=>{if(n(""),!c.length){n(" No hay catlogo cargado para generar plantilla.");return}const G=Number(S||0),te=Number(T||0),He=c.slice().sort((ae,V)=>ae.name.localeCompare(V.name,"es")).map(ae=>({Producto:ae.name,Paquetes:"","Margen rivas":G,"Margen Isla":te,"P. unidad Rivas":"","P. unidad Isla":""})),re=[{Campo:"Gastos logisticos",Valor:gf(W||0)}],be=js.book_new(),Me=js.json_to_sheet(He),tt=js.json_to_sheet(re);js.book_append_sheet(be,Me,"Productos"),js.book_append_sheet(be,tt,"Config");const lt=I&&String(I).trim()||new Date().toISOString().slice(0,10);Ok(be,`plantilla_orden_maestra_${lt}.xlsx`)},ye=()=>{if(n(""),!rt.items.length){n(" No hay items para exportar.");return}const G=rt.items.slice().sort((Me,tt)=>Me.name.localeCompare(tt.name,"es")).map(Me=>({Categora:Me.category,Producto:Me.name,Paquetes:jn(Me.packages),"Paquetes restantes":jn(Me.remainingPackages??Me.packages),"Und x Paquete":jn(Me.unitsPerPackage),"Precio proveedor":Number(Me.providerPrice||0),Facturado:Number(Me.subtotal||0),"Esperado Rivas":Number(Me.totalRivas||0),"Esperado Isla":Number(Me.totalIsla||0),"MV Rivas":Number(Me.marginRivas||0),"MV Isla":Number(Me.marginIsla||0),"Utilidad Bruta":Number(Me.grossProfit||0),"Utilidad Bruta Isla":Number(Me.grossProfitIsla||0),"Prorrateo logistico":Number(Me.logisticAllocated||0),"Precio Rivas":Number(Me.unitPriceRivas||0),"Precio Isla":Number(Me.unitPriceIsla||0)})),te=[{KPI:"Paquetes totales",Valor:vt.totalPackages},{KPI:"Subtotal costo",Valor:vt.subtotalCosto},{KPI:"Esperado Rivas",Valor:vt.esperadoRivas},{KPI:"Esperado Isla",Valor:vt.esperadoIsla},{KPI:"Gastos logsticos",Valor:vt.gastosLogisticos},{KPI:"Utilidad Bruta Rivas",Valor:vt.utilidadBrutaRivas},{KPI:"Utilidad Bruta Isla",Valor:vt.utilidadBrutaIsla}],He=js.book_new();js.book_append_sheet(He,js.json_to_sheet(G),"Productos"),js.book_append_sheet(He,js.json_to_sheet(te),"Resumen");const re=I&&String(I).trim()||new Date().toISOString().slice(0,10),be=w&&String(w).trim()||`Orden_${re}`;Ok(He,`orden_maestra_${be.replace(/[^\w\-]+/g,"_")}_${re}.xlsx`)},$e=v.useRef(null),[Ne,ct]=v.useState(!1),xe=()=>{var G;if(!c.length){n(" Catlogo no cargado todava. Esper y prob de nuevo.");return}(G=$e.current)==null||G.click()},Qe=async G=>{var He;const te=(He=G.target.files)==null?void 0:He[0];if(te){G.target.value="",ct(!0),n("");try{const re=await te.arrayBuffer(),be=B2(re,{type:"array"}),Me=be.SheetNames||[],tt=be.Sheets.Productos||be.Sheets.Plantilla||be.Sheets[Me[0]];if(!tt){n(" No se encontr hoja de Productos/Plantilla.");return}const lt=js.sheet_to_json(tt,{defval:""});if(!lt.length){n(" El Excel viene vaco.");return}let ae=0;const V=be.Sheets.Config;if(V){const pe=js.sheet_to_json(V,{defval:""}),ke=new Map;for(const Re of pe){const Ze=Ib(AA(Re,["Campo","Key","Nombre"])??""),nt=AA(Re,["Valor","Value"]);Ze&&ke.set(Ze,nt)}ke.has("gastos logisticos")&&(ae=Math.max(0,gf(ke.get("gastos logisticos"))))}else for(const pe of lt){const ke=AA(pe,["Gastos","Gasto","Gastos logisticos","Logistica"]),Re=gf(ke);if(Re>0){ae=Re;break}}Ae(String(ae||0));const X=new Map;for(const pe of c)X.set(Ib(pe.name),pe);const me=[],Ie=new Map;for(let pe=0;pe<lt.length;pe++){const ke=lt[pe],Re=AA(ke,["Producto","Product","Nombre","Name"]),Ze=AA(ke,["Paquetes","Packages"]),nt=AA(ke,["Margen rivas","Margen Rivas","MV Rivas"]),_t=AA(ke,["Margen Isla","Margen isla","MV Isla"]),Ct=AA(ke,["P. unidad Rivas","P unidad Rivas","Precio Rivas"]),Nt=AA(ke,["P. unidad Isla","P unidad Isla","Precio Isla"]),Tt=Ib(Re);if(!Tt)continue;const St=X.get(Tt);if(!St){me.push(`Fila ${pe+2}: Producto no existe en catlogo: "${String(Re).trim()}".`);continue}const yt=Math.floor(gf(Ze));if(yt<=0){me.push(`Fila ${pe+2}: "Paquetes" invlido para "${St.name}".`);continue}const cr=String(nt??"").trim()!==""?gf(nt):Number(S||0),ur=String(_t??"").trim()!==""?gf(_t):Number(T||0),lr=Math.floor(gf(Ct)),Cr=Math.floor(gf(Nt)),Nr=Ie.get(St.id);Nr?Ie.set(St.id,{packages:Nr.packages+yt,mR:cr,mI:ur,puR:lr>0?lr:Nr.puR,puI:Cr>0?Cr:Nr.puI}):Ie.set(St.id,{packages:yt,mR:cr,mI:ur,puR:lr>0?lr:void 0,puI:Cr>0?Cr:void 0})}const Y=[];Ie.forEach((pe,ke)=>{const Re=c.find(Cr=>Cr.id===ke);if(!Re)return;const Ze=Number(Re.providerPrice||0),nt=Math.max(1,jn(Re.unitsPerPackage||1)),_t=Math.max(1,jn(pe.packages)),Ct=Ze*_t,Nt=Number(pe.puR||0),Tt=Number(pe.puI||0),St=Nt>0||Tt>0;let yt=pe.mR,cr=pe.mI;const ur=Number(k||0);let lr;if(St){const Cr=Dm(Ze,_t,{marginR:yt,marginSJ:ur,marginIsla:cr}),Nr=Nt>0?Nt*_t:Cr.totalRivas,mn=Tt>0?Tt*_t:Cr.totalIsla,bn=Rr=>{if(!Number.isFinite(Rr)||Rr<=0)return 0;const Nn=(1-Ct/Rr)*100;return Math.min(Math.max(Nn,0),99.9)};Nt>0&&(yt=bn(Nr)),Tt>0&&(cr=bn(mn)),lr={subtotal:Ct,totalRivas:Nr,totalSanJorge:Cr.totalSanJorge,totalIsla:mn,gainRivas:Nr-Ct,gainSanJorge:Cr.gainSanJorge,gainIsla:mn-Ct,unitPriceRivas:_t>0?Sb(Nr/_t):0,unitPriceSanJorge:Cr.unitPriceSanJorge,unitPriceIsla:_t>0?Sb(mn/_t):0}}else lr=Dm(Ze,_t,{marginR:yt,marginSJ:ur,marginIsla:cr});Y.push({id:Re.id,name:Re.name,category:Re.category,providerPrice:Ze,packages:_t,unitsPerPackage:nt,marginRivas:yt,marginSanJorge:ur,marginIsla:cr,subtotal:lr.subtotal,totalRivas:lr.totalRivas,totalSanJorge:lr.totalSanJorge,totalIsla:lr.totalIsla,gainRivas:lr.gainRivas,gainSanJorge:lr.gainSanJorge,gainIsla:lr.gainIsla,unitPriceRivas:lr.unitPriceRivas,unitPriceSanJorge:lr.unitPriceSanJorge,unitPriceIsla:lr.unitPriceIsla,remainingPackages:_t})}),fe(pe=>{const ke=new Map;pe.forEach(Re=>ke.set(Re.id,Re));for(const Re of Y){const Ze=ke.get(Re.id);if(!Ze)ke.set(Re.id,Re);else{const nt=jn(Ze.packages)+jn(Re.packages),_t=Dm(Ze.providerPrice,nt,{marginR:Re.marginRivas,marginSJ:Number(Ze.marginSanJorge||0),marginIsla:Re.marginIsla});ke.set(Re.id,{...Ze,packages:nt,marginRivas:Re.marginRivas,marginIsla:Re.marginIsla,remainingPackages:jn(Ze.remainingPackages??Ze.packages)+jn(Re.packages),..._t})}}return Array.from(ke.values()).sort((Re,Ze)=>Re.name.localeCompare(Ze.name,"es"))}),U("ITEMS"),me.length?(n(` Importado con detalles. Errores: ${me.length}.`),console.warn("Errores import:",me)):n(` Importacin lista: ${Y.length} productos agregados.`)}catch(re){console.error(re),n(" Error importando Excel. Revis hojas: Productos + Config (o Plantilla).")}finally{ct(!1)}}};v.useEffect(()=>{(async()=>{s(!0);try{const G=tr(pt(Ge,"candy_main_orders"),ln("createdAt","desc")),te=await Lt(G),He=[];te.forEach(Me=>{const tt=Me.data();He.push({id:Me.id,name:tt.name??"",date:tt.date??"",totalPackages:Number(tt.totalPackages??0),subtotal:Number(tt.subtotal??0),totalRivas:Number(tt.totalRivas??0),totalSanJorge:Number(tt.totalSanJorge??0),totalIsla:Number(tt.totalIsla??0),marginRivas:Number(tt.marginRivas??20),marginSanJorge:Number(tt.marginSanJorge??15),marginIsla:Number(tt.marginIsla??30),logisticsCost:Number(tt.logisticsCost??0),createdAt:tt.createdAt??or.now()})}),A(He);const re=await Lt(pt(Ge,"inventory_candies")),be={};re.forEach(Me=>{const tt=Me.data(),lt=tt.orderId;if(!lt)return;const ae=V7e(tt),V=w$(tt);be[lt]||(be[lt]={orderId:lt,totalPackages:0,remainingPackages:0}),be[lt].totalPackages+=ae,be[lt].remainingPackages+=V}),p(be)}catch(G){console.error(G),n(" Error cargando pedidos generales.")}finally{s(!1)}})()},[t]);const dt=G=>{var te;return G.date?G.date:(te=G.createdAt)!=null&&te.toDate?G.createdAt.toDate().toISOString().slice(0,10):""},Bt=async G=>{if(G.preventDefault(),n(""),l(!0),!de.length){n("Agrega al menos un producto a la orden.");return}try{const te=new Date().toISOString().slice(0,10),He=I||te,re=Number(S||0),be=Number(k||0),Me=Number(T||0),tt=Math.max(0,gf(W||0));for(const pe of de){if(!String(pe.name||"").trim()){n("Hay un producto sin nombre en el pedido.");return}if(Number(pe.providerPrice||0)<0){n(`El precio proveedor no puede ser negativo (producto: ${pe.name}).`);return}if(jn(pe.packages)<=0){n(`Los paquetes deben ser mayor que 0 (producto: ${pe.name}).`);return}if(jn(pe.unitsPerPackage)<=0){n(`Las unidades por paquete deben ser mayor que 0 (producto: ${pe.name}).`);return}}const lt=Number(_e.subtotal||0),ae=de.map(pe=>N$(pe,tt,lt)),V={totalPackages:_e.totalPackages,subtotal:_e.subtotal,totalRivas:_e.totalRivas,totalSanJorge:_e.totalSanJorge,totalIsla:_e.totalIsla},X={name:w||`Pedido ${He}`,date:He,totalPackages:V.totalPackages,subtotal:V.subtotal,totalRivas:V.totalRivas,totalSanJorge:V.totalSanJorge,totalIsla:V.totalIsla,marginRivas:re,marginSanJorge:be,marginIsla:Me,logisticsCost:tt,items:ae};if(y){await rn(Kt(Ge,"candy_main_orders",y),{...X});for(const Re of ae){const Ze=await Lt(tr(pt(Ge,"inventory_candies"),sr("orderId","==",y),sr("productId","==",Re.id))),nt=Math.max(1,jn(Re.unitsPerPackage||1)),_t=jn(Re.packages)*nt;if(Ze.empty)await wn(pt(Ge,"inventory_candies"),{productId:Re.id,productName:Re.name,category:Re.category,measurement:"unidad",quantity:_t,remaining:_t,packages:jn(Re.packages),remainingPackages:jn(Re.packages),unitsPerPackage:nt,totalUnits:_t,providerPrice:Re.providerPrice,subtotal:Re.subtotal,totalRivas:Re.totalRivas,totalSanJorge:Re.totalSanJorge,totalIsla:Re.totalIsla,gainRivas:Re.gainRivas,gainSanJorge:Re.gainSanJorge,gainIsla:Re.gainIsla,unitPriceRivas:Re.unitPriceRivas,unitPriceSanJorge:Re.unitPriceSanJorge,unitPriceIsla:Re.unitPriceIsla,date:He,createdAt:or.now(),status:"PENDIENTE",orderId:y});else for(const Ct of Ze.docs){const Nt=Ct.data(),Tt=jn(Nt.totalUnits??0),St=jn(Nt.remaining??Tt),yt=_t-Tt,cr=Math.max(0,St+yt),ur=Math.max(0,Math.floor(cr/nt));await rn(Kt(Ge,"inventory_candies",Ct.id),{productName:Re.name,category:Re.category,unitsPerPackage:nt,totalUnits:_t,quantity:_t,remaining:cr,packages:jn(Re.packages),remainingPackages:ur,providerPrice:Re.providerPrice,subtotal:Re.subtotal,totalRivas:Re.totalRivas,totalSanJorge:Re.totalSanJorge,totalIsla:Re.totalIsla,gainRivas:Re.gainRivas,gainSanJorge:Re.gainSanJorge,gainIsla:Re.gainIsla,unitPriceRivas:Re.unitPriceRivas,unitPriceSanJorge:Re.unitPriceSanJorge,unitPriceIsla:Re.unitPriceIsla,date:He})}}const pe=await Lt(tr(pt(Ge,"inventory_candies"),sr("orderId","==",y))),ke=new Set(ae.map(Re=>Re.id));for(const Re of pe.docs){const Ze=Re.data(),nt=String(Ze.productId||"");nt&&!ke.has(nt)&&await yn(Kt(Ge,"inventory_candies",Re.id))}A(Re=>Re.map(Ze=>Ze.id===y?{...Ze,name:X.name,date:X.date,totalPackages:X.totalPackages,subtotal:X.subtotal,totalRivas:X.totalRivas,totalSanJorge:X.totalSanJorge,totalIsla:X.totalIsla,marginRivas:X.marginRivas,marginSanJorge:X.marginSanJorge,marginIsla:X.marginIsla,logisticsCost:X.logisticsCost}:Ze)),n(" Orden maestra actualizada (pedido + inventario)."),je(),x(!1),e();return}const Ie=(await wn(pt(Ge,"candy_main_orders"),{...X,createdAt:or.now()})).id,Y=pg(Ge);for(const pe of ae){const ke=Math.max(1,jn(pe.unitsPerPackage||1)),Re=jn(pe.packages)*ke,Ze=Kt(pt(Ge,"inventory_candies"));Y.set(Ze,{productId:pe.id,productName:pe.name,category:pe.category,measurement:"unidad",quantity:Re,remaining:Re,packages:jn(pe.packages),remainingPackages:jn(pe.packages),unitsPerPackage:ke,totalUnits:Re,providerPrice:pe.providerPrice,subtotal:pe.subtotal,totalRivas:pe.totalRivas,totalSanJorge:pe.totalSanJorge,totalIsla:pe.totalIsla,gainRivas:pe.gainRivas,gainSanJorge:pe.gainSanJorge,gainIsla:pe.gainIsla,unitPriceRivas:pe.unitPriceRivas,unitPriceSanJorge:pe.unitPriceSanJorge,unitPriceIsla:pe.unitPriceIsla,date:He,createdAt:or.now(),status:"PENDIENTE",orderId:Ie})}await Y.commit(),n(" Orden maestra creada y registrada en inventario."),je(),x(!1),e()}catch(te){console.error(te),n(" Error al guardar orden maestra.")}finally{l(!1)}},qe=async G=>{try{s(!0),n(""),b(G.id),j(G.name),_(G.date),E(String(G.marginRivas??20)),P(String(G.marginSanJorge??15)),O(String(G.marginIsla??30));const te=Number(G.logisticsCost??0);Ae(String(te||0)),U("DATOS");const He=Kt(Ge,"candy_main_orders",G.id),re=await xi(He);if(!re.exists()){n(" No se encontr la orden.");return}const be=re.data(),Me=Array.isArray(be.items)?be.items:[],tt=await Lt(tr(pt(Ge,"inventory_candies"),sr("orderId","==",G.id))),lt={};tt.forEach(V=>{const X=V.data(),me=String(X.productId||"");if(!me)return;const Ie=w$(X);lt[me]=(lt[me]||0)+Ie});const ae=Me.map(V=>{const X=c.find(Ze=>Ze.id===V.id),me=Number((X==null?void 0:X.providerPrice)??V.providerPrice??0),Ie=Math.max(1,jn((X==null?void 0:X.unitsPerPackage)??V.unitsPerPackage??1)),Y=Number(V.marginRivas??0),pe=Number(V.marginSanJorge??Number(k||0)),ke=Number(V.marginIsla??0),Re=Dm(me,jn(V.packages||0),{marginR:Y,marginSJ:pe,marginIsla:ke});return{...V,name:String((X==null?void 0:X.name)??V.name??"").trim(),category:String((X==null?void 0:X.category)??V.category??"Caramelo").trim(),providerPrice:me,unitsPerPackage:Ie,remainingPackages:lt[V.id]??V.remainingPackages??V.packages??0,...Re}});fe(ae),x(!0)}catch(te){console.error(te),n(" Error al abrir orden maestra.")}finally{s(!1)}},bt=async G=>{if(confirm(`Eliminar la orden "${G.name}" y todo su inventario asociado?`)){n("");try{const He=await Lt(tr(pt(Ge,"inventory_candies"),sr("orderId","==",G.id)));for(const re of He.docs)await yn(Kt(Ge,"inventory_candies",re.id));await yn(Kt(Ge,"candy_main_orders",G.id)),A(re=>re.filter(be=>be.id!==G.id)),n(" Orden maestra eliminada."),e()}catch(He){console.error(He),n(" Error al eliminar orden maestra.")}}};return o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsx("h2",{className:"text-2xl font-bold",children:"Ordenes Maestras"})}),o.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[o.jsx("div",{}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ic,{onClick:e,loading:a||d}),o.jsxs("button",{className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-2 md:px-3 py-2 rounded-2xl hover:bg-indigo-700 w-full md:w-auto max-w-[220px] justify-center",onClick:()=>{je(),x(!0)},children:[o.jsx("span",{className:"items-center gap-4 inline-block bg-indigo-700/40 rounded-full p-1",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nueva Orden"]})]})]}),r&&o.jsx("p",{className:"mt-2 text-sm",children:r})]}),g&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 p-3",children:o.jsxs("div",{className:"relative bg-white p-4 md:p-6 rounded shadow-lg w-full max-w-6xl max-h-[90vh] overflow-y-auto text-sm",children:[i&&o.jsx("div",{className:"absolute inset-0 bg-white/70 z-50 flex items-center justify-center",children:o.jsxs("div",{className:"bg-white border rounded-xl px-4 py-3 shadow flex items-center gap-3",children:[o.jsxs("svg",{className:"animate-spin h-5 w-5 text-gray-700",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),o.jsx("div",{className:"text-sm font-semibold",children:"Guardando orden"})]})}),o.jsxs("div",{className:"sticky top-0 bg-white z-20 pb-3 border-b",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("h3",{className:"text-lg md:text-xl font-bold",children:y?"Editar Orden Maestra":"Nueva Orden Maestra"}),o.jsx("div",{className:"ml-auto flex gap-2",children:o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-60",disabled:i,onClick:()=>{je(),x(!1)},children:"Cerrar"})})]}),o.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-1 gap-2",children:o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold",children:"Gastos logsticos (orden)"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:W,onChange:G=>Ae(G.target.value),placeholder:"0",min:0})]})}),o.jsx("div",{className:"md:hidden mt-3",children:o.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[o.jsx("button",{type:"button",onClick:()=>U("DATOS"),className:`px-2 py-2 rounded text-xs font-semibold border ${D==="DATOS"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:"Datos"}),o.jsx("button",{type:"button",onClick:()=>U("AGREGAR"),className:`px-2 py-2 rounded text-xs font-semibold border ${D==="AGREGAR"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:"Agregar"}),o.jsxs("button",{type:"button",onClick:()=>U("ITEMS"),className:`px-2 py-2 rounded text-xs font-semibold border ${D==="ITEMS"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:["Items (",de.length,")"]}),o.jsx("button",{type:"button",onClick:()=>U("TOTALES"),className:`px-2 py-2 rounded text-xs font-semibold border ${D==="TOTALES"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:"Totales"})]})})]}),o.jsxs("form",{onSubmit:Bt,className:"space-y-4 pt-4",children:[o.jsx("input",{ref:$e,type:"file",accept:".xlsx,.xls,.csv",className:"hidden",onChange:Qe}),o.jsx("div",{className:`${D==="DATOS"?"block":"hidden"} md:block`,children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre de Orden"}),o.jsx("input",{className:"w-full border p-2 rounded",value:w,onChange:G=>j(G.target.value),placeholder:"Ej: Pedido enero 19"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del pedido"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:I,onChange:G=>_(G.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"% Ganancia Rivas"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:S,onChange:G=>E(G.target.value)})]}),o.jsx("input",{type:"hidden",value:k,readOnly:!0}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"% Ganancia Isla Ometepe"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:T,onChange:G=>O(G.target.value)})]})]})}),o.jsx("div",{className:`${D==="AGREGAR"?"block":"hidden"} md:block`,children:o.jsxs("div",{className:"border rounded p-3 bg-gray-50",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Categora (dinmica)"}),o.jsx("select",{className:"w-full border p-2 rounded",value:ge,onChange:G=>{ee(G.target.value),Pe("")},disabled:d,children:le.length===0?o.jsx("option",{value:"",children:d?"Cargando...":"No hay categoras en catlogo"}):le.map(G=>o.jsx("option",{value:G,children:G},G))})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto (catlogo)"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:Fe,onChange:G=>Pe(G.target.value),children:[o.jsx("option",{value:"",children:d?"Cargando catlogo...":"Selecciona producto"}),Be.map(G=>o.jsx("option",{value:G.id,children:G.name},G.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio proveedor (paq)"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded bg-gray-100",value:F,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Paquetes"}),o.jsx("input",{type:"number",min:0,className:"w-full border p-2 rounded",value:z,onChange:G=>J(G.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Unidades por paquete"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded bg-gray-100",value:H,readOnly:!0})]})]}),o.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-end gap-2 mt-3",children:o.jsx("button",{type:"button",onClick:ot,className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Agregar producto"})})]})}),o.jsxs("div",{className:"hidden md:flex items-center justify-end gap-2",children:[o.jsx("button",{type:"button",onClick:At,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",title:"Descarga plantilla (Productos + Config)",children:"Descargar plantilla"}),o.jsx("button",{type:"button",onClick:xe,disabled:Ne,className:"px-3 py-2 rounded bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-60",title:"Importa desde Excel (Productos + Config)",children:Ne?"Importando...":"Importar Excel"}),o.jsx("button",{type:"button",onClick:ye,className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",title:"Exporta la orden actual (Productos + Resumen)",children:"Exportar Excel"})]}),o.jsx("div",{className:`${D==="ITEMS"?"block":"hidden"} md:block`,children:o.jsxs("div",{className:"mt-2",children:[o.jsxs("div",{className:"mb-2 flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[o.jsxs("div",{className:"text-xs text-gray-600",children:["Items:"," ",o.jsx("span",{className:"font-semibold",children:de.length}),ne.trim()?o.jsxs(o.Fragment,{children:[" "," Mostrando"," ",o.jsx("span",{className:"font-semibold",children:we.length})]}):null]}),o.jsx("input",{value:ne,onChange:G=>ve(G.target.value),placeholder:"Buscar producto o categora",className:"w-full md:w-80 border rounded px-3 py-2 text-sm"})]}),o.jsxs("div",{className:"hidden md:block",children:[o.jsx("div",{className:"overflow-x-auto border rounded pb-5",children:o.jsxs("table",{className:"min-w-[1400px] w-full text-xs",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left p-2",children:"Categora"}),o.jsx("th",{className:"text-left p-2",children:"Producto"}),o.jsx("th",{className:"text-right p-2",children:"Paquetes"}),o.jsx("th",{className:"text-right p-2",children:"Restantes"}),o.jsx("th",{className:"text-right p-2",children:"Und x Paq"}),o.jsx("th",{className:"text-right p-2",children:"Precio prov"}),o.jsx("th",{className:"text-right p-2",children:"Facturado"}),o.jsx("th",{className:"text-right p-2",children:"Esperado Rivas"}),o.jsx("th",{className:"text-right p-2",children:"Esperado Isla"}),o.jsx("th",{className:"text-right p-2",children:"MV Rivas"}),o.jsx("th",{className:"text-right p-2",children:"MV Isla"}),o.jsx("th",{className:"text-right p-2",children:"U. Bruta Rivas"}),o.jsx("th",{className:"text-right p-2",children:"U. Bruta Isla"}),o.jsx("th",{className:"text-right p-2",children:"Prorrateo"}),o.jsx("th",{className:"text-right p-2",children:"Precio Rivas"}),o.jsx("th",{className:"text-right p-2",children:"Precio Isla"}),o.jsx("th",{className:"text-center p-2",children:"Acciones"})]})}),o.jsxs("tbody",{children:[ce.map(G=>o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"p-2",children:G.category}),o.jsx("td",{className:"p-2 font-semibold",children:G.name}),o.jsx("td",{className:"p-2 text-right",children:o.jsx("input",{type:"number",className:"w-20 border rounded p-1 text-right",value:G.packages,onChange:te=>ut(G.id,"packages",te.target.value)})}),o.jsx("td",{className:"p-2 text-right",children:o.jsx("span",{className:"inline-block min-w-[60px] text-right",children:jn(G.remainingPackages??G.packages)})}),o.jsx("td",{className:"p-2 text-right",children:o.jsx("input",{type:"number",className:"w-20 border rounded p-1 text-right",value:G.unitsPerPackage,onChange:te=>ut(G.id,"unitsPerPackage",te.target.value)})}),o.jsx("td",{className:"p-2 text-right",children:Number(G.providerPrice||0).toFixed(2)}),o.jsx("td",{className:"p-2 text-right",children:Number(G.subtotal||0).toFixed(2)}),o.jsx("td",{className:"p-2 text-right",children:Number(G.totalRivas||0).toFixed(2)}),o.jsx("td",{className:"p-2 text-right",children:Number(G.totalIsla||0).toFixed(2)}),o.jsx("td",{className:"p-2 text-right",children:o.jsx("input",{type:"number",className:"w-16 border rounded p-1 text-right",value:Number(G.marginRivas??0),onChange:te=>ut(G.id,"marginRivas",te.target.value)})}),o.jsx("td",{className:"p-2 text-right",children:o.jsx("input",{type:"number",className:"w-16 border rounded p-1 text-right",value:Number(G.marginIsla??0),onChange:te=>ut(G.id,"marginIsla",te.target.value)})}),o.jsx("td",{className:"p-2 text-right",children:Number(G.grossProfit||0).toFixed(2)}),o.jsx("td",{className:"p-2 text-right",children:Number(G.grossProfitIsla||0).toFixed(2)}),o.jsx("td",{className:"p-2 text-right",children:Number(G.logisticAllocated||0).toFixed(2)}),o.jsx("td",{className:"p-2 text-right",children:Number(G.unitPriceRivas||0)}),o.jsx("td",{className:"p-2 text-right",children:Number(G.unitPriceIsla||0)}),o.jsx("td",{className:"p-2 text-center",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>mt(G.id),children:"Quitar"})})]},G.id)),we.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:17,className:"p-4 text-center text-gray-500",children:"No hay productos en la orden."})})]})]})}),o.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm text-gray-600",children:["Mostrando"," ",Math.min((Ce-1)*Ve+1,we.length),"-",Math.min(Ce*Ve,we.length)," ","de ",we.length]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",disabled:Ce<=1,onClick:()=>Ue(G=>Math.max(1,G-1)),className:"px-2 py-1 rounded border disabled:opacity-50 text-sm",children:"Anterior"}),o.jsxs("div",{className:"px-3 py-1 border rounded text-sm",children:[Ce," / ",ue]}),o.jsx("button",{type:"button",disabled:Ce>=ue,onClick:()=>Ue(G=>Math.min(ue,G+1)),className:"px-2 py-1 rounded border disabled:opacity-50 text-sm",children:"Siguiente"})]})]})]}),o.jsx("div",{className:"md:hidden space-y-3",children:we.length===0?o.jsx("div",{className:"p-4 border rounded bg-gray-50 text-gray-600",children:"No hay productos en esta orden."}):we.map(G=>o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm",children:[o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-semibold text-base leading-tight truncate",children:G.name}),o.jsx("div",{className:"text-xs text-gray-500 truncate",children:G.category})]}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>mt(G.id),children:"Quitar"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Paquetes"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:G.packages,onChange:te=>ut(G.id,"packages",te.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Paquetes restantes"}),o.jsx("input",{className:"w-full border p-2 rounded text-right bg-gray-100",value:G.remainingPackages??G.packages,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Und x Paquete"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:G.unitsPerPackage,onChange:te=>ut(G.id,"unitsPerPackage",te.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Precio proveedor"}),o.jsx("input",{className:"w-full border p-2 rounded text-right bg-gray-100",value:Number(G.providerPrice||0).toFixed(2),readOnly:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"MV Rivas (%)"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:G.marginRivas??0,onChange:te=>ut(G.id,"marginRivas",te.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"MV Isla (%)"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:G.marginIsla??0,onChange:te=>ut(G.id,"marginIsla",te.target.value)})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Facturado"}),o.jsx("div",{className:"font-semibold",children:Number(G.subtotal||0).toFixed(2)})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Esperado Rivas"}),o.jsx("div",{className:"font-semibold",children:Number(G.totalRivas||0).toFixed(2)})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Esperado Isla"}),o.jsx("div",{className:"font-semibold",children:Number(G.totalIsla||0).toFixed(2)})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Prorrateo logstico"}),o.jsx("div",{className:"font-semibold",children:Number(G.logisticAllocated||0).toFixed(2)})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-xs",children:[o.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"U. Bruta Rivas"}),o.jsx("div",{className:"font-semibold",children:Number(G.grossProfit||0).toFixed(2)})]}),o.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"U. Bruta Isla"}),o.jsx("div",{className:"font-semibold",children:Number(G.grossProfitIsla||0).toFixed(2)})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-xs",children:[o.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"Precio Rivas (paq)"}),o.jsx("div",{className:"font-semibold",children:G.unitPriceRivas})]}),o.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"Precio Isla (paq)"}),o.jsx("div",{className:"font-semibold",children:G.unitPriceIsla})]})]})]},G.id))})]})}),o.jsxs("div",{className:`${D==="TOTALES"?"block":"hidden"} md:block`,children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mt-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes totales"}),o.jsx("div",{className:"text-lg font-semibold",children:vt.totalPackages})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal costo (facturado)"}),o.jsx("div",{className:"text-lg font-semibold",children:Number(vt.subtotalCosto||0).toFixed(2)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Esperado (Rivas / Isla)"}),o.jsxs("div",{className:"text-sm font-semibold",children:["Rivas: ",Number(vt.esperadoRivas||0).toFixed(2),o.jsx("br",{}),"Isla: ",Number(vt.esperadoIsla||0).toFixed(2)]})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Gastos logsticos"}),o.jsx("div",{className:"text-lg font-semibold",children:Number(vt.gastosLogisticos||0).toFixed(2)})]})]}),o.jsxs("div",{className:"mt-3",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-emerald-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta Rivas"}),o.jsx("div",{className:"text-lg font-semibold",children:Number(vt.utilidadBrutaRivas||0).toFixed(2)})]}),o.jsxs("div",{className:"p-3 border rounded bg-emerald-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta Isla"}),o.jsx("div",{className:"text-lg font-semibold",children:Number(vt.utilidadBrutaIsla||0).toFixed(2)})]})]}),o.jsx("div",{className:"mt-3 border rounded p-3 bg-white",children:o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:ye,disabled:!rt.items.length,title:"Exporta la orden actual (productos + resumen)",children:"Exportar orden a Excel"})})})]})]}),o.jsxs("div",{className:"sticky bottom-0 bg-white pt-3 mt-4 border-t",children:[o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx("button",{type:"button",onClick:je,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Limpiar orden"}),o.jsx("button",{type:"button",onClick:()=>{je(),x(!1)},className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Cerrar"}),o.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60",disabled:i||de.length===0,children:i?"Guardando...":"Guardar orden"})]}),o.jsx("div",{className:"md:hidden mt-2",children:o.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 text-sm",onClick:()=>{U(D==="DATOS"&&!y?"AGREGAR":D==="DATOS"||D==="AGREGAR"?"ITEMS":D==="ITEMS"?"TOTALES":"DATOS")},children:"Siguiente"})})]})]})]})}),o.jsxs("div",{className:"mt-4",children:[o.jsx("div",{className:"md:hidden space-y-3",children:a?o.jsx("div",{className:"p-4 border rounded bg-white text-center",children:"Cargando"}):h.length===0?o.jsx("div",{className:"p-4 border rounded bg-white text-center",children:"Sin ordenes maestras."}):h.map(G=>{const te=m[G.id],He=dt(G),re=G.totalPackages>0?(G.subtotal/G.totalPackages).toFixed(2):"0.00",be=Number(G.logisticsCost||0),Me=Number(G.totalRivas||0)-Number(G.subtotal||0);return o.jsxs("div",{className:"border rounded-xl p-3 bg-white shadow-sm",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-xs text-gray-500",children:He}),o.jsx("div",{className:"font-semibold text-base leading-tight",children:G.name})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white text-xs",onClick:()=>qe(G),children:"Ver"}),o.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white text-xs",onClick:()=>bt(G),children:"Borrar"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),o.jsx("div",{className:"font-semibold",children:G.totalPackages})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Restantes"}),o.jsx("div",{className:"font-semibold",children:te?te.remainingPackages:0})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"P. Proveedor"}),o.jsx("div",{className:"font-semibold",children:re})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal"}),o.jsx("div",{className:"font-semibold",children:Number(G.subtotal||0).toFixed(2)})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 text-xs",children:[o.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"Esperado Rivas"}),o.jsx("div",{className:"font-semibold",children:Number(G.totalRivas||0).toFixed(2)})]}),o.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"Esperado Isla"}),o.jsx("div",{className:"font-semibold",children:Number(G.totalIsla||0).toFixed(2)})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 text-xs",children:[o.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"Gastos log."}),o.jsx("div",{className:"font-semibold",children:be.toFixed(2)})]}),o.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"U. Bruta (est)"}),o.jsx("div",{className:"font-semibold",children:Me.toFixed(2)})]})]})]},G.id)})}),o.jsxs("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full overflow-x-auto",children:[o.jsxs("table",{className:"min-w-[1100px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Paquetes totales"}),o.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border",children:"Precio Proveedor"}),o.jsx("th",{className:"p-2 border",children:"Subtotal"}),o.jsx("th",{className:"p-2 border",children:"Esperado Rivas"}),o.jsx("th",{className:"p-2 border",children:"Esperado Isla"}),o.jsx("th",{className:"p-2 border",children:"Gastos log."}),o.jsx("th",{className:"p-2 border",children:"U. Bruta (est)"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:a?o.jsx("tr",{children:o.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Cargando"})}):h.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Sin ordenes maestras."})}):Oe.map(G=>{const te=m[G.id],He=dt(G),re=G.totalPackages>0?(G.subtotal/G.totalPackages).toFixed(2):"0.00",be=Number(G.logisticsCost||0),Me=Number(G.totalRivas||0)-Number(G.subtotal||0);return o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:He}),o.jsx("td",{className:"p-2 border text-left",children:G.name}),o.jsx("td",{className:"p-2 border",children:G.totalPackages}),o.jsx("td",{className:"p-2 border",children:te?te.remainingPackages:0}),o.jsx("td",{className:"p-2 border",children:re}),o.jsx("td",{className:"p-2 border",children:Number(G.subtotal||0).toFixed(2)}),o.jsx("td",{className:"p-2 border",children:Number(G.totalRivas||0).toFixed(2)}),o.jsx("td",{className:"p-2 border",children:Number(G.totalIsla||0).toFixed(2)}),o.jsx("td",{className:"p-2 border",children:be.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:Me.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:o.jsxs("div",{className:"flex gap-1 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>qe(G),children:"Ver / Editar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>bt(G),children:"Borrar"})]})})]},G.id)})})]}),o.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm text-gray-600",children:["Mostrando ",Math.min((L-1)*ie+1,h.length),"-",Math.min(L*ie,h.length)," de ",h.length]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",disabled:L<=1,onClick:()=>Ye(G=>Math.max(1,G-1)),className:"px-2 py-1 rounded border disabled:opacity-50 text-sm",children:"Anterior"}),o.jsxs("div",{className:"px-3 py-1 border rounded text-sm",children:[L," / ",Z]}),o.jsx("button",{type:"button",disabled:L>=Z,onClick:()=>Ye(G=>Math.min(Z,G+1)),className:"px-2 py-1 rounded border disabled:opacity-50 text-sm",children:"Siguiente"})]})]})]})]})]})}const e0=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function IP(t){const e=Number(t.packages||0),r=Number(t.providerPrice||0),n=Number(t.unitsPerPackage||0),a=r*e,s=e>0&&n>0?e*n:1,i=Number(t.marginRivas||0),l=Number(t.marginSanJorge||0),c=Number(t.marginIsla||0),u=a*(1+i/100),d=a*(1+l/100),f=a*(1+c/100),h=u-a,A=d-a,m=f-a,p=u/s,g=d/s,x=f/s;return{...t,subtotal:Number(a.toFixed(2)),totalRivas:Number(u.toFixed(2)),totalSanJorge:Number(d.toFixed(2)),totalIsla:Number(f.toFixed(2)),gainRivas:Number(h.toFixed(2)),gainSanJorge:Number(A.toFixed(2)),gainIsla:Number(m.toFixed(2)),unitPriceRivas:Number(p.toFixed(2)),unitPriceSanJorge:Number(g.toFixed(2)),unitPriceIsla:Number(x.toFixed(2))}}function C$(t){return t.reduce((e,r)=>(e.totalPackages+=Number(r.packages||0),e.subtotal+=Number(r.subtotal||0),e.totalRivas+=Number(r.totalRivas||0),e.totalSanJorge+=Number(r.totalSanJorge||0),e.totalIsla+=Number(r.totalIsla||0),e),{totalPackages:0,subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0})}function Ac(t,e=0){const r=Number(t);return Number.isFinite(r)?r:e}function jP(t){const{margin:e,gain:r,subtotal:n,orderMargin:a}=t;if(e!=null&&Number.isFinite(Number(e)))return Number(e);const s=Number(n||0),i=Number(r);return Number.isFinite(i)&&s>0?i/s*100:Number(a||0)}function K7e(){var R,z,J;const[t,e]=v.useState([]),[r,n]=v.useState({}),[a,s]=v.useState(!0),[i,l]=v.useState(""),[c,u]=v.useState(br(Zd(new Date),"yyyy-MM-dd")),[d,f]=v.useState(br(Jd(new Date),"yyyy-MM-dd")),[h,A]=v.useState(!1),[m,p]=v.useState(!1),[g,x]=v.useState(null),[y,b]=v.useState([]),[w,j]=v.useState(0),[I,_]=v.useState(0),[S,E]=v.useState(0),[k,P]=v.useState(""),[T,O]=v.useState(""),[W,Ae]=v.useState(0),[de,fe]=v.useState(0),[ge,ee]=v.useState(1);v.useEffect(()=>{(async()=>{try{s(!0),l("");const D=tr(pt(Ge,"candy_main_orders"),ln("createdAt","desc")),U=await Lt(D),ne=[];U.forEach(Ye=>{const ie=Ye.data();ne.push({id:Ye.id,name:ie.name??"",date:ie.date??"",totalPackages:Number(ie.totalPackages??0),subtotal:Number(ie.subtotal??0),totalRivas:Number(ie.totalRivas??0),totalSanJorge:Number(ie.totalSanJorge??0),totalIsla:Number(ie.totalIsla??0),marginRivas:Number(ie.marginRivas??0),marginSanJorge:Number(ie.marginSanJorge??0),marginIsla:Number(ie.marginIsla??0),createdAt:ie.createdAt??or.now()})}),e(ne);const ve=await Lt(tr(pt(Ge,"inventory_candies"))),L={};ve.forEach(Ye=>{const ie=Ye.data(),Z=ie.orderId;if(!Z)return;const Oe=Number(ie.unitsPerPackage||1)||1,le=Number(ie.totalUnits??(ie.packages||0)*Oe),se=Math.round(le/Oe),Be=Number(ie.remaining??ie.totalUnits??le),je=Number(ie.remainingPackages??NaN),ot=Number.isFinite(je)?Math.round(je):Math.round(Be/Oe);L[Z]||(L[Z]={orderId:Z,totalPackages:0,remainingPackages:0}),L[Z].totalPackages+=se,L[Z].remainingPackages+=ot}),n(L)}catch(D){console.error(D),l(" Error cargando inventario de pedidos.")}finally{s(!1)}})()},[]);const Fe=v.useMemo(()=>t.filter(D=>{var ne;const U=D.date||((ne=D.createdAt)!=null&&ne.toDate?D.createdAt.toDate().toISOString().slice(0,10):"");return!(!U||c&&U<c||d&&U>d)}),[t,c,d]),Pe=v.useMemo(()=>{let D=0,U=0,ne=0,ve=0,L=0,Ye=0;for(const ie of Fe){D+=ie.totalPackages,U+=ie.subtotal,ne+=ie.totalRivas,ve+=ie.totalSanJorge,L+=ie.totalIsla;const Z=r[ie.id];Z&&(Ye+=Z.remainingPackages)}return{totalPaquetes:D,totalSubtotal:U,totalRivas:ne,totalSJ:ve,totalIsla:L,totalPaquetesRestantes:Ye,totalPedidos:Fe.length}},[Fe,r]),F=async(D,U,ne)=>{if(!g)return;const ve=Number(ne||0),L=y.map(Z=>Z.id!==D?Z:IP({...Z,[U]:ve}));b(L);const Ye=L.find(Z=>Z.id===D);if(!Ye)return;const ie=C$(L);try{await rn(Kt(Ge,"products_candies",D),{marginRivas:Ye.marginRivas,marginSanJorge:Ye.marginSanJorge,marginIsla:Ye.marginIsla,subtotal:Ye.subtotal,totalRivas:Ye.totalRivas,totalSanJorge:Ye.totalSanJorge,totalIsla:Ye.totalIsla,unitPriceRivas:Ye.unitPriceRivas,unitPriceSanJorge:Ye.unitPriceSanJorge,unitPriceIsla:Ye.unitPriceIsla,gainRivas:Ye.gainRivas,gainSanJorge:Ye.gainSanJorge,gainIsla:Ye.gainIsla}),await rn(Kt(Ge,"candy_main_orders",g.id),{totalPackages:ie.totalPackages,subtotal:Number(ie.subtotal.toFixed(2)),totalRivas:Number(ie.totalRivas.toFixed(2)),totalSanJorge:Number(ie.totalSanJorge.toFixed(2)),totalIsla:Number(ie.totalIsla.toFixed(2))}),x(Z=>Z&&{...Z,totalPackages:ie.totalPackages,subtotal:Number(ie.subtotal.toFixed(2)),totalRivas:Number(ie.totalRivas.toFixed(2)),totalSanJorge:Number(ie.totalSanJorge.toFixed(2)),totalIsla:Number(ie.totalIsla.toFixed(2))}),l(" Mrgenes del producto actualizados.")}catch(Z){console.error(Z),l(" Error actualizando mrgenes del producto.")}},Q=async()=>{if(g)try{l("");const D=Number.isFinite(w)&&w!==0?w:g.marginRivas||0,U=Number.isFinite(I)&&I!==0?I:g.marginSanJorge||0,ne=Number.isFinite(S)&&S!==0?S:g.marginIsla||0,ve=IP({id:"tmp",name:k.trim(),category:T.trim(),providerPrice:Number(W||0),packages:Number(de||0),unitsPerPackage:Number(ge||1),marginRivas:Number(D||0),marginSanJorge:Number(U||0),marginIsla:Number(ne||0),subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0,gainRivas:0,gainSanJorge:0,gainIsla:0,unitPriceRivas:0,unitPriceSanJorge:0,unitPriceIsla:0,remainingPackages:Number(de||0)}),L=await wn(pt(Ge,"products_candies"),{orderId:g.id,inventoryDate:g.date||"",name:ve.name,category:ve.category,providerPrice:ve.providerPrice,packages:ve.packages,unitsPerPackage:ve.unitsPerPackage,marginRivas:ve.marginRivas,marginSanJorge:ve.marginSanJorge,marginIsla:ve.marginIsla,gainRivas:ve.gainRivas,gainSanJorge:ve.gainSanJorge,gainIsla:ve.gainIsla,subtotal:ve.subtotal,totalRivas:ve.totalRivas,totalSanJorge:ve.totalSanJorge,totalIsla:ve.totalIsla,unitPriceRivas:ve.unitPriceRivas,unitPriceSanJorge:ve.unitPriceSanJorge,unitPriceIsla:ve.unitPriceIsla,createdAt:or.now()}),ie=[{...ve,id:L.id},...y];b(ie);const Z=C$(ie);await rn(Kt(Ge,"candy_main_orders",g.id),{totalPackages:Z.totalPackages,subtotal:Number(Z.subtotal.toFixed(2)),totalRivas:Number(Z.totalRivas.toFixed(2)),totalSanJorge:Number(Z.totalSanJorge.toFixed(2)),totalIsla:Number(Z.totalIsla.toFixed(2))}),x(Oe=>Oe&&{...Oe,totalPackages:Z.totalPackages,subtotal:Number(Z.subtotal.toFixed(2)),totalRivas:Number(Z.totalRivas.toFixed(2)),totalSanJorge:Number(Z.totalSanJorge.toFixed(2)),totalIsla:Number(Z.totalIsla.toFixed(2))}),j(0),_(0),E(0),P(""),O(""),Ae(0),fe(0),ee(1),l(" Producto agregado con mrgenes por sucursal.")}catch(D){console.error(D),l(" Error agregando producto al pedido.")}},H=async D=>{try{x(D),b([]),A(!0),p(!0),l("");const U=await Lt(tr(pt(Ge,"inventory_candies"),sr("orderId","==",D.id))),ne={};U.forEach(Ye=>{const ie=Ye.data(),Z=ie.productId;if(!Z)return;const Oe=Number(ie.unitsPerPackage||1)||1,le=Number(ie.remaining??ie.totalUnits??0),se=Number(ie.remainingPackages??NaN),Be=Number.isFinite(se)?Math.round(se):Math.round(le/Oe);ne[Z]=(ne[Z]||0)+Be});const ve=await Lt(tr(pt(Ge,"products_candies"),sr("orderId","==",D.id))),L=[];ve.forEach(Ye=>{const ie=Ye.data(),Z=Ac(ie.providerPrice,0),Oe=Ac(ie.packages,0),le=ie.subtotal??Z*Oe,se=jP({margin:ie.marginRivas,gain:ie.gainRivas,subtotal:le,orderMargin:D.marginRivas||0}),Be=jP({margin:ie.marginSanJorge,gain:ie.gainSanJorge,subtotal:le,orderMargin:D.marginSanJorge||0}),je=jP({margin:ie.marginIsla,gain:ie.gainIsla,subtotal:le,orderMargin:D.marginIsla||0}),ot=IP({id:Ye.id,name:ie.name??"",category:ie.category??"",providerPrice:Z,packages:Oe,unitsPerPackage:Ac(ie.unitsPerPackage,1),marginRivas:Number(se||0),marginSanJorge:Number(Be||0),marginIsla:Number(je||0),subtotal:Ac(ie.subtotal,0),totalRivas:Ac(ie.totalRivas,0),totalSanJorge:Ac(ie.totalSanJorge,0),totalIsla:Ac(ie.totalIsla,0),gainRivas:Ac(ie.gainRivas,0),gainSanJorge:Ac(ie.gainSanJorge,0),gainIsla:Ac(ie.gainIsla,0),unitPriceRivas:Ac(ie.unitPriceRivas,0),unitPriceSanJorge:Ac(ie.unitPriceSanJorge,0),unitPriceIsla:Ac(ie.unitPriceIsla,0),remainingPackages:ne[Ye.id]??Ac(ie.packages,0)});L.push(ot)}),b(L)}catch(U){console.error(U),l(" Error cargando productos del pedido.")}finally{p(!1)}};return o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsx("h2",{className:"text-2xl font-bold",children:"Inventario Ordenes Maestras"})}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:D=>u(D.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:D=>f(D.target.value)})]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f("")},children:"Quitar filtro"}),o.jsxs("div",{className:"ml-auto text-xs md:text-sm text-gray-600",children:["Cantidad de pedidos:"," ",o.jsx("span",{className:"font-semibold",children:Pe.totalPedidos})]})]}),o.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-sm md:text-base",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-y-2 gap-x-8",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Paquetes totales:"})," ",Pe.totalPaquetes]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Paquetes restantes:"})," ",Pe.totalPaquetesRestantes]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Subtotal total:"})," ",e0(Pe.totalSubtotal)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total Rivas (todo):"})," ",e0(Pe.totalRivas)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total San Jorge (todo):"})," ",e0(Pe.totalSJ)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total Isla (todo):"})," ",e0(Pe.totalIsla)]})]})}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full overflow-x-auto mt-2",children:o.jsxs("table",{className:"min-w-[900px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Paquetes totales"}),o.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border",children:"Subtotal"}),o.jsx("th",{className:"p-2 border",children:"Total Rivas"}),o.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),o.jsx("th",{className:"p-2 border",children:"Total Isla"}),o.jsx("th",{className:"p-2 border",children:"P. prom. Rivas"}),o.jsx("th",{className:"p-2 border",children:"P. prom. San Jorge"}),o.jsx("th",{className:"p-2 border",children:"P. prom. Isla"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:a?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):Fe.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin pedidos generales en este rango."})}):Fe.map(D=>{var ie;const U=D.totalPackages>0?Math.round(D.totalRivas/D.totalPackages):0,ne=D.totalPackages>0?Math.round(D.totalSanJorge/D.totalPackages):0,ve=D.totalPackages>0?Math.round(D.totalIsla/D.totalPackages):0,L=D.date||((ie=D.createdAt)!=null&&ie.toDate?D.createdAt.toDate().toISOString().slice(0,10):""),Ye=r[D.id];return o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:L}),o.jsx("td",{className:"p-2 border",children:D.name}),o.jsx("td",{className:"p-2 border",children:D.totalPackages}),o.jsx("td",{className:"p-2 border",children:Ye?Ye.remainingPackages:0}),o.jsx("td",{className:"p-2 border",children:D.subtotal.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:D.totalRivas.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:D.totalSanJorge.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:D.totalIsla.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:U}),o.jsx("td",{className:"p-2 border",children:ne}),o.jsx("td",{className:"p-2 border",children:ve}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>H(D),children:"Ver pedido"})})]},D.id)})})]})}),h&&g&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-5xl max-h-[90vh] overflow-y-auto text-sm",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsxs("h3",{className:"text-xl font-bold",children:["Detalle: ",g.name]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:()=>{A(!1),x(null),b([]),l("")},children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4 text-xs md:text-sm",children:[o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Fecha del pedido"}),o.jsx("div",{className:"font-semibold",children:g.date||((R=g.createdAt)!=null&&R.toDate?g.createdAt.toDate().toISOString().slice(0,10):"")})]}),o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Paquetes totales"}),o.jsx("div",{className:"font-semibold",children:((z=r[g.id])==null?void 0:z.totalPackages)??g.totalPackages})]}),o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Paquetes restantes"}),o.jsx("div",{className:"font-semibold",children:((J=r[g.id])==null?void 0:J.remainingPackages)??0})]}),o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Subtotal (proveedor)"}),o.jsx("div",{className:"font-semibold",children:e0(g.subtotal)})]}),o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Total Rivas"}),o.jsx("div",{className:"font-semibold",children:e0(g.totalRivas)})]}),o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Total San Jorge"}),o.jsx("div",{className:"font-semibold",children:e0(g.totalSanJorge)})]}),o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Total Isla"}),o.jsx("div",{className:"font-semibold",children:e0(g.totalIsla)})]})]}),o.jsxs("div",{className:"bg-white border rounded p-3 mb-4",children:[o.jsx("div",{className:"font-semibold mb-2",children:"Agregar producto"}),o.jsxs("div",{className:"flex flex-wrap gap-2 items-end text-xs",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Margen Rivas"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:w,onChange:D=>j(Number(D.target.value||0))})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Margen SJ"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:I,onChange:D=>_(Number(D.target.value||0))})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Margen Isla"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:S,onChange:D=>E(Number(D.target.value||0))})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Producto"}),o.jsx("input",{className:"border rounded px-2 py-1 w-56",value:k,onChange:D=>P(D.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Categora"}),o.jsx("input",{className:"border rounded px-2 py-1 w-40",value:T,onChange:D=>O(D.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"P. proveedor (paq)"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-32 text-right",value:W,onChange:D=>Ae(Number(D.target.value||0))})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Paquetes"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-right",value:de,onChange:D=>fe(Number(D.target.value||0))})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Und x Paq"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-right",value:ge,onChange:D=>ee(Number(D.target.value||1))})]}),o.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:Q,children:"Agregar producto"})]})]}),o.jsx("h4",{className:"font-semibold mb-2",children:"Productos del pedido"}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1200px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border",children:"Und x Paq"}),o.jsx("th",{className:"p-2 border",children:"P. proveedor (paq)"}),o.jsx("th",{className:"p-2 border",children:"Margen Rivas (%)"}),o.jsx("th",{className:"p-2 border",children:"Margen San Jorge (%)"}),o.jsx("th",{className:"p-2 border",children:"Margen Isla (%)"}),o.jsx("th",{className:"p-2 border",children:"Subtotal"}),o.jsx("th",{className:"p-2 border",children:"Total Rivas"}),o.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),o.jsx("th",{className:"p-2 border",children:"Total Isla"}),o.jsx("th",{className:"p-2 border",children:"P. unidad Rivas"}),o.jsx("th",{className:"p-2 border",children:"P. unidad San Jorge"}),o.jsx("th",{className:"p-2 border",children:"P. unidad Isla"})]})}),o.jsx("tbody",{children:m?o.jsx("tr",{children:o.jsx("td",{colSpan:16,className:"p-4 text-center",children:"Cargando productos"})}):y.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:16,className:"p-4 text-center",children:"Este pedido no tiene productos registrados."})}):y.map(D=>o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:D.name}),o.jsx("td",{className:"p-2 border",children:D.category}),o.jsx("td",{className:"p-2 border",children:D.packages}),o.jsx("td",{className:"p-2 border",children:D.remainingPackages??D.packages}),o.jsx("td",{className:"p-2 border",children:D.unitsPerPackage}),o.jsx("td",{className:"p-2 border",children:D.providerPrice.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:D.marginRivas??0,onChange:U=>F(D.id,"marginRivas",U.target.value)})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:D.marginSanJorge??0,onChange:U=>F(D.id,"marginSanJorge",U.target.value)})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:D.marginIsla??0,onChange:U=>F(D.id,"marginIsla",U.target.value)})}),o.jsx("td",{className:"p-2 border",children:D.subtotal.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:D.totalRivas.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:D.totalSanJorge.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:D.totalIsla.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:D.unitPriceRivas}),o.jsx("td",{className:"p-2 border",children:D.unitPriceSanJorge}),o.jsx("td",{className:"p-2 border",children:D.unitPriceIsla})]},D.id))})]})}),i&&o.jsx("p",{className:"mt-3 text-sm",children:i})]})}),i&&!h&&o.jsx("p",{className:"mt-2 text-sm",children:i})]})}const Oa=t=>Math.round((Number(t)||0)*100)/100,ix=t=>Math.round((Number(t)||0)*1e3)/1e3,Mo=t=>Number(t??0).toFixed(2),Rm=t=>Number(t??0).toFixed(3),q7e=(t,e)=>{var A;const r=t.date??((A=t.timestamp)!=null&&A.toDate?br(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=t.userEmail??"",a=t.vendorName||t.vendor||n||t.vendorId||"(sin vendedor)",s=t.type||"CONTADO",i=t.vendorId,l=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,c=Number(t.vendorCommissionAmount??0)||0,u=t.processedDate??t.closureDate??"";if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((m,p)=>{const g=Number((m==null?void 0:m.packages)??(m==null?void 0:m.qty)??(m==null?void 0:m.quantity)??0),x=Number((m==null?void 0:m.lineFinal)??0)||Math.max(0,Number((m==null?void 0:m.unitPricePackage)||(m==null?void 0:m.unitPrice)||0)*g-Number((m==null?void 0:m.discount)||0));let y=0;return c>0&&l>0&&Number(x||0)>0&&(y=Oa(c*Number(x||0)/l)),{id:`${e}#${p}`,productName:String((m==null?void 0:m.productName)??"(sin nombre)"),quantity:g,amount:Oa(x),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:a,sellerEmail:n,clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:Array.isArray(m==null?void 0:m.allocations)?m.allocations:t.allocations,avgUnitCost:Number((m==null?void 0:m.avgUnitCost)??t.avgUnitCost??0),cogsAmount:Number((m==null?void 0:m.cogsAmount)??0),type:s,vendorId:i,vendorCommissionAmount:y,processedDate:u||""}});const d=Number(t.packagesTotal??t.quantity??0),f=Number(t.amount??t.amountCharged??t.total??0)||0;let h=0;return h=Oa(Number(t.vendorCommissionAmount??0)||0),[{id:e,productName:t.productName??"(sin nombre)",quantity:d,amount:f,amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:a,sellerEmail:n,clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:t.allocations,avgUnitCost:t.avgUnitCost,cogsAmount:t.cogsAmount,type:s,vendorId:i,vendorCommissionAmount:h,processedDate:u||""}]};function z7e({role:t,currentUserEmail:e,sellerCandyId:r,roles:n}){const[a,s]=v.useState([]),[i,l]=v.useState(null),[c,u]=v.useState(!0),[d,f]=v.useState(""),[h,A]=v.useState("ALL"),m=br(new Date,"yyyy-MM-dd"),[p,g]=v.useState(m),[x,y]=v.useState(m),[b,w]=v.useState("ALL"),[j,I]=v.useState(null),[_,S]=v.useState(0),[E,k]=v.useState(0),[P,T]=v.useState(""),[O,W]=v.useState(0),[Ae,de]=v.useState("0"),fe=v.useRef(null),ge=n&&n.length?n:t,ee=!ge||zr(ge,"admin"),Fe=zr(ge,"vendedor_dulces"),Pe=(e||"").trim().toLowerCase(),[F,Q]=v.useState([]);v.useEffect(()=>{if(!p||!x)return;u(!0);const ce=tr(pt(Ge,"sales_candies"),sr("date",">=",p),sr("date","<=",x),ln("date","asc")),Te=qd(ce,Xe=>{const ft=[];Xe.forEach(gt=>{const vt=q7e(gt.data(),gt.id);ft.push(...vt)}),s(ft),u(!1)},Xe=>{console.error("Error cargando ventas por periodo:",Xe),s([]),u(!1)});return()=>Te()},[p,x]),v.useEffect(()=>{(async()=>{const Te=tr(pt(Ge,"daily_closures_candies"),sr("date","==",m)),Xe=await Lt(Te);if(Xe.empty)l(null);else{const ft=Xe.docs[0];l({id:ft.id,...ft.data()})}})()},[m]),v.useEffect(()=>{(async()=>{try{const Te=await Lt(pt(Ge,"sellers_candies")),Xe=[];Te.forEach(ft=>{const gt=ft.data();Xe.push({id:ft.id,name:gt.name||"",commissionPercent:Number(gt.commissionPercent||0)})}),Q(Xe)}catch(Te){console.error("Error cargando sellers_candies",Te)}})()},[]);const H=ce=>Oa(Number(ce.vendorCommissionAmount??0)||0),R=No.useMemo(()=>{let ce=[...a];return h==="FLOTANTE"&&(ce=ce.filter(Te=>Te.status==="FLOTANTE")),h==="PROCESADA"&&(ce=ce.filter(Te=>Te.status==="PROCESADA")),ee&&b!=="ALL"&&(ce=ce.filter(Te=>(Te.vendorId||"")===b)),Fe&&(r?ce=ce.filter(Te=>(Te.vendorId||"")===r):Pe?ce=ce.filter(Te=>(Te.sellerEmail||"").toLowerCase()===Pe):ce=[]),ce},[h,a,ee,b,Fe,r,Pe]),z=No.useMemo(()=>R.filter(ce=>ce.status==="FLOTANTE").length,[R]),J=No.useMemo(()=>R.filter(ce=>ce.status==="PROCESADA").length,[R]),D=No.useMemo(()=>R.filter(ce=>ce.type==="CREDITO").length,[R]),U=No.useMemo(()=>R.filter(ce=>ce.type!=="CREDITO").length,[R]),ne=ix(R.reduce((ce,Te)=>ce+(Te.quantity||0),0)),ve=Oa(R.reduce((ce,Te)=>ce+Number(Te.cogsAmount??0),0)),L=Oa(R.reduce((ce,Te)=>ce+(Te.amount||0),0)),Ye=Oa(L-ve);let ie=0,Z=0,Oe=0,le=0,se=0,Be=0,je=0;R.forEach(ce=>{const Te=Number(ce.amount||0),Xe=Number(ce.amountReceived||0),ft=H(ce);se+=ft,ce.type==="CREDITO"?(ie+=ce.quantity||0,Oe+=Te-Xe,je+=ft):(Z+=ce.quantity||0,le+=Te,Be+=ft)}),Oe=Oa(Oe),le=Oa(le),se=Oa(se),Be=Oa(Be),je=Oa(je);const ot=No.useMemo(()=>{const ce={};for(const Te of R){const Xe=(Te.vendorId||"").trim();if(!Xe||Te.type==="CREDITO")continue;const ft=H(Te);if(!ce[Xe]){const gt=F.find(vt=>vt.id===Xe);ce[Xe]={vendorId:Xe,name:(gt==null?void 0:gt.name)||Te.userEmail||"(sin vendedor)",total:0}}ce[Xe].total=Oa(ce[Xe].total+ft)}return Object.values(ce).filter(Te=>Te.total>0).sort((Te,Xe)=>Xe.total-Te.total)},[R,F]),mt=No.useMemo(()=>{const ce={};for(const Te of R){const Xe=(Te.vendorId||"").trim();if(!Xe||Te.type!=="CREDITO")continue;const ft=H(Te);if(!ce[Xe]){const gt=F.find(vt=>vt.id===Xe);ce[Xe]={vendorId:Xe,name:(gt==null?void 0:gt.name)||Te.userEmail||"(sin vendedor)",total:0}}ce[Xe].total=Oa(ce[Xe].total+ft)}return Object.values(ce).filter(Te=>Te.total>0).sort((Te,Xe)=>Xe.total-Te.total)},[R,F]),ut={};R.forEach(ce=>{const Te=ce.productName||"(sin nombre)";ut[Te]||(ut[Te]={totalQuantity:0,totalAmount:0,totalCommission:0}),ut[Te].totalQuantity=ix(ut[Te].totalQuantity+(ce.quantity||0)),ut[Te].totalAmount=Oa(ut[Te].totalAmount+(ce.amount||0)),ut[Te].totalCommission=Oa(ut[Te].totalCommission+H(ce))});const _e=Object.entries(ut).map(([ce,Te])=>({productName:ce,totalQuantity:Te.totalQuantity,totalAmount:Te.totalAmount,totalCommission:Te.totalCommission})),rt=async()=>{if(ee)try{const ce=R.filter($e=>$e.status==="FLOTANTE");if(ce.length===0){f("No hay ventas flotantes para procesar en este perodo.");return}const Te={totalCharged:Oa(ce.reduce(($e,Ne)=>$e+(Ne.amount||0),0)),totalSuggested:Oa(ce.reduce(($e,Ne)=>$e+(Ne.amountSuggested||0),0)),totalUnits:ix(ce.reduce(($e,Ne)=>$e+(Ne.quantity||0),0)),totalCOGS:Oa(ce.reduce(($e,Ne)=>$e+Number(Ne.cogsAmount??0),0))},Xe=Oa(Te.totalCharged-Te.totalSuggested),ft=Oa(Te.totalCharged-Te.totalCOGS),gt=ce.reduce(($e,Ne)=>{const ct=Number(Ne.quantity||0),xe=Number(Ne.amount||0),Qe=Number(Ne.vendorCommissionAmount||0);return Ne.type==="CREDITO"?($e.packsCredit+=ct,$e.amountCredit+=xe,$e.comCredit+=Qe):($e.packsCash+=ct,$e.amountCash+=xe,$e.comCash+=Qe),$e},{packsCash:0,packsCredit:0,amountCash:0,amountCredit:0,comCash:0,comCredit:0}),vt={totalPacksCash:ix(gt.packsCash),totalPacksCredit:ix(gt.packsCredit),totalAmountCash:Oa(gt.amountCash),totalAmountCredit:Oa(gt.amountCredit),totalCommissionCash:Oa(gt.comCash),totalCommissionCredit:Oa(gt.comCredit)},At=await wn(pt(Ge,"daily_closures_candies"),{date:m,createdAt:or.now(),periodStart:p,periodEnd:x,totalCharged:Te.totalCharged,totalSuggested:Te.totalSuggested,totalDifference:Xe,totalUnits:Te.totalUnits,totalCOGS:Te.totalCOGS,grossProfit:ft,...vt,products:ce.map($e=>({productName:$e.productName,quantity:$e.quantity,amount:$e.amount})),sales:ce.map($e=>({id:$e.id,productName:$e.productName,quantity:$e.quantity,amount:$e.amount,amountSuggested:$e.amountSuggested,userEmail:$e.userEmail,clientName:$e.clientName,amountReceived:$e.amountReceived,change:$e.change,status:$e.status,cogsAmount:$e.cogsAmount??0,avgUnitCost:$e.avgUnitCost??null,allocations:$e.allocations??[],date:$e.date,type:$e.type??"CONTADO",vendorId:$e.vendorId??"",vendorCommissionAmount:Number($e.vendorCommissionAmount??0)||0,processedDate:m})),productSummary:Object.entries(ce.reduce(($e,Ne)=>{const ct=Ne.productName||"(sin nombre)";return $e[ct]||($e[ct]={totalQuantity:0,totalAmount:0}),$e[ct].totalQuantity=ix($e[ct].totalQuantity+(Ne.quantity||0)),$e[ct].totalAmount=Oa($e[ct].totalAmount+(Ne.amount||0)),$e},{})).map(([$e,Ne])=>({productName:$e,totalQuantity:Ne.totalQuantity,totalAmount:Ne.totalAmount}))}),ye=pg(Ge);ce.forEach($e=>{ye.update(Kt(Ge,"sales_candies",$e.id.split("#")[0]),{status:"PROCESADA",closureId:At.id,closureDate:m,processedDate:m,processedAt:or.now()})}),await ye.commit(),f(` Cierre guardado. Ventas procesadas: ${ce.length}. (Proceso: ${m})`)}catch(ce){console.error(ce),f(" Error al guardar el cierre de dulces.")}},we=async ce=>{if(ee&&window.confirm("Revertir esta venta? Esta accin no se puede deshacer."))try{await rn(Kt(Ge,"sales_candies",ce.split("#")[0]),{status:"FLOTANTE",closureId:null,closureDate:null,processedDate:null,processedAt:null}),f(" Venta revertida a FLOTANTE.")}catch(Te){console.error(Te),f(" No se pudo revertir la venta.")}},Ce=ce=>{ee&&(I(ce),S(ce.quantity),k(ce.amount),T(ce.clientName),W(ce.amountReceived),de(ce.change))},Ue=async()=>{if(!(!j||!ee))try{await rn(Kt(Ge,"sales_candies",j.id.split("#")[0]),{packagesTotal:_,amount:E,amountCharged:E,clientName:P,amountReceived:O,change:Ae}),I(null),f(" Venta de dulces actualizada.")}catch(ce){console.error(ce),f(" No se pudo actualizar la venta de dulces.")}},Ve=async ce=>{if(ee&&window.confirm("Eliminar esta venta? Se restaurar el stock (paquetes) en los lotes asignados."))try{const{restored:Te}=await m7e(ce.split("#")[0]);f(` Venta eliminada. Stock restaurado (unidades internas): ${Number(Te).toFixed(2)}.`)}catch(Te){console.error(Te),f(" No se pudo eliminar la venta de dulces.")}},ue=async()=>{if(fe.current){fe.current.classList.add("force-pdf-colors"),fe.current.classList.add("pdf-print-mode");try{const Te=(await gg(fe.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),Xe=new Br;Xe.addImage(Te,"PNG",10,10,190,0),Xe.save(`cierre_dulces_${p}_a_${x}_proc_${m}.pdf`)}finally{fe.current.classList.remove("pdf-print-mode"),fe.current.classList.remove("force-pdf-colors")}}};return o.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[o.jsx("style",{children:`
        .pdf-print-mode .pdf-desktop { display: block !important; }
        .pdf-print-mode .pdf-mobile  { display: none !important; }
      `}),o.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Cierre de Ventas de Dulces - Proceso: ",m]}),o.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-3 mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-sm",children:"Desde:"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:p,onChange:ce=>g(ce.target.value)})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-sm",children:"Hasta:"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:x,onChange:ce=>y(ce.target.value)})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-sm",children:"Filtrar:"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:h,onChange:ce=>A(ce.target.value),children:[o.jsx("option",{value:"ALL",children:"Todas"}),o.jsx("option",{value:"FLOTANTE",children:"Venta Flotante"}),o.jsx("option",{value:"PROCESADA",children:"Venta Procesada"})]})]}),ee&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-sm",children:"Vendedor:"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:b,onChange:ce=>w(ce.target.value),children:[o.jsx("option",{value:"ALL",children:"Todos"}),F.map(ce=>o.jsx("option",{value:ce.id,children:ce.name||ce.id},ce.id))]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas flotantes"}),o.jsx("div",{className:"text-2xl font-bold",children:z}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",x]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas procesadas"}),o.jsx("div",{className:"text-2xl font-bold",children:J}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",x]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),o.jsx("div",{className:"text-2xl font-bold",children:D}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",x]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),o.jsx("div",{className:"text-2xl font-bold",children:U}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",x]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash (perodo)"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",Mo(Be)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",x]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito (perodo)"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",Mo(je)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",x]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin CASH del perodo)"}),ot.length===0?o.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):o.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:ot.map(ce=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"truncate",children:ce.name}),o.jsxs("strong",{className:"ml-2",children:["C$",Mo(ce.total)]})]},ce.vendorId))})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin CRDITO del perodo)"}),mt.length===0?o.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):o.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:mt.map(ce=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"truncate",children:ce.name}),o.jsxs("strong",{className:"ml-2",children:["C$",Mo(ce.total)]})]},ce.vendorId))})]})]}),c?o.jsx("p",{children:"Cargando ventas..."}):o.jsxs("div",{ref:fe,children:[o.jsx("div",{className:"pdf-desktop hidden md:block",children:o.jsxs("table",{className:"min-w-full border text-sm mb-4 shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Estado"}),o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Tipo"}),o.jsx("th",{className:"border p-2",children:"Paquetes"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Comisin"}),o.jsx("th",{className:"border p-2",children:"Fecha venta"}),o.jsx("th",{className:"border p-2",children:"Fecha proceso"}),o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Acciones"})]})}),o.jsxs("tbody",{children:[R.map(ce=>{const Te=H(ce),Xe=(ce.processedDate||"").trim();return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ce.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:ce.status})}),o.jsx("td",{className:"border p-1",children:ce.productName}),o.jsx("td",{className:"border p-1",children:ce.type==="CREDITO"?"Crdito":"Cash"}),o.jsx("td",{className:"border p-1",children:Rm(ce.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",Mo(ce.amount)]}),o.jsx("td",{className:"border p-1",children:Te>0?`C$${Mo(Te)}`:""}),o.jsx("td",{className:"border p-1",children:ce.date}),o.jsx("td",{className:"border p-1",children:Xe||""}),o.jsx("td",{className:"border p-1",children:ce.userEmail}),o.jsx("td",{className:"border p-1",children:ce.status==="FLOTANTE"?o.jsx("div",{className:"flex gap-2 justify-center",children:ee?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>Ce(ce),className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",children:"Editar"}),o.jsx("button",{onClick:()=>Ve(ce.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]}):o.jsx("span",{className:"text-gray-400 text-xs",children:""})}):ce.status==="PROCESADA"?o.jsx("div",{className:"flex gap-2 justify-center",children:ee?o.jsx("button",{onClick:()=>we(ce.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Revertir"}):o.jsx("span",{className:"text-gray-400 text-xs",children:""})}):o.jsx("span",{className:"text-gray-400 text-xs",children:"No options"})})]},ce.id)}),R.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:10,className:"p-3 text-center text-gray-500",children:"Sin ventas para mostrar."})})]})]})}),o.jsxs("div",{className:"pdf-mobile md:hidden space-y-3 mb-4",children:[R.map(ce=>{const Te=H(ce),Xe=(ce.processedDate||"").trim();return o.jsxs("details",{className:"border rounded-xl bg-white shadow-sm",children:[o.jsxs("summary",{className:"px-4 py-3 flex justify-between items-center cursor-pointer",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-semibold truncate",children:ce.productName}),o.jsxs("div",{className:"text-xs text-gray-500",children:[ce.type==="CREDITO"?"Crdito":"Cash","  ",ce.date]})]}),o.jsxs("div",{className:"text-right shrink-0 ml-3",children:[o.jsxs("div",{className:"font-bold",children:["C$",Mo(ce.amount)]}),o.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${ce.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:ce.status})]})]}),o.jsxs("div",{className:"px-4 pb-4 pt-2 text-sm space-y-2",children:[o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Paquetes"}),o.jsx("strong",{children:Rm(ce.quantity)})]}),o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Comisin"}),o.jsx("strong",{children:Te>0?`C$${Mo(Te)}`:""})]}),o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Fecha proceso"}),o.jsx("strong",{children:Xe||""})]}),o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Vendedor"}),o.jsx("strong",{className:"text-right break-all",children:ce.userEmail})]}),o.jsx("div",{className:"pt-2",children:ce.status==="FLOTANTE"?o.jsx("div",{className:"flex gap-2",children:ee?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>Ce(ce),className:"flex-1 text-xs bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700",children:"Editar"}),o.jsx("button",{onClick:()=>Ve(ce.id),className:"flex-1 text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Eliminar"})]}):o.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):ce.status==="PROCESADA"?o.jsx("div",{className:"flex gap-2",children:ee?o.jsx("button",{onClick:()=>we(ce.id),className:"w-full text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Revertir"}):o.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):o.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:"No options"})})]})]},ce.id)}),R.length===0&&o.jsx("div",{className:"text-center text-gray-500 text-sm py-6",children:"Sin ventas para mostrar."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-2 text-sm mb-4",children:[o.jsxs("div",{children:["Total paquetes crdito: ",o.jsx("strong",{children:Rm(ie)})]}),o.jsxs("div",{children:["Total paquetes cash: ",o.jsx("strong",{children:Rm(Z)})]}),o.jsxs("div",{children:["Total pendiente crdito:"," ",o.jsxs("strong",{children:["C$",Mo(Oe)]})]}),o.jsxs("div",{children:["Total cobrado cash: ",o.jsxs("strong",{children:["C$",Mo(le)]})]}),o.jsxs("div",{children:["Total comisin: ",o.jsxs("strong",{children:["C$",Mo(se)]})]})]}),(ve>0||Ye!==L)&&o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm mb-6",children:[o.jsxs("div",{children:["Costo total (COGS): ",o.jsxs("strong",{children:["C$",Mo(ve)]})]}),o.jsxs("div",{children:["Ganancia antes de gasto:"," ",o.jsxs("strong",{children:["C$",Mo(Ye)]})]}),o.jsxs("div",{children:["Total paquetes (visibles):"," ",o.jsx("strong",{children:Rm(ne)})]})]}),o.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),o.jsx("div",{className:"pdf-desktop hidden md:block",children:o.jsxs("table",{className:"min-w-full border text-sm mb-2 shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Total paquetes"}),o.jsx("th",{className:"border p-2",children:"Total dinero"}),o.jsx("th",{className:"border p-2",children:"Comisin"})]})}),o.jsxs("tbody",{children:[_e.map(ce=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:ce.productName}),o.jsx("td",{className:"border p-1",children:Rm(ce.totalQuantity)}),o.jsxs("td",{className:"border p-1",children:["C$",Mo(ce.totalAmount)]}),o.jsx("td",{className:"border p-1",children:ce.totalCommission>0?`C$${Mo(ce.totalCommission)}`:""})]},ce.productName)),_e.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"Sin datos para consolidar."})})]})]})}),o.jsxs("div",{className:"pdf-mobile md:hidden space-y-2",children:[_e.map(ce=>o.jsxs("div",{className:"border rounded-xl bg-white shadow-sm p-3",children:[o.jsx("div",{className:"font-semibold",children:ce.productName}),o.jsxs("div",{className:"mt-2 text-sm space-y-1",children:[o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Total paquetes"}),o.jsx("strong",{children:Rm(ce.totalQuantity)})]}),o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Total dinero"}),o.jsxs("strong",{children:["C$",Mo(ce.totalAmount)]})]}),o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Comisin"}),o.jsx("strong",{children:ce.totalCommission>0?`C$${Mo(ce.totalCommission)}`:""})]})]})]},ce.productName)),_e.length===0&&o.jsx("div",{className:"text-center text-gray-500 text-sm py-6",children:"Sin datos para consolidar."})]})]}),o.jsxs("div",{className:"flex gap-2 mt-4",children:[ee&&o.jsx("button",{onClick:rt,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Cerrar ventas del perodo"}),o.jsx("button",{onClick:ue,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Descargar PDF"})]}),d&&o.jsx("p",{className:"mt-2 text-sm",children:d}),j&&ee&&o.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-4 space-y-3",children:[o.jsx("h4",{className:"font-semibold text-lg",children:"Editar venta de dulces"}),o.jsxs("div",{className:"text-sm text-gray-500",children:[j.productName,"  ",j.userEmail]}),o.jsx("label",{className:"text-sm",children:"Paquetes"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:_,onChange:ce=>S(parseFloat(ce.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Monto cobrado"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:E,onChange:ce=>k(parseFloat(ce.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Cliente"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:P,onChange:ce=>T(ce.target.value)}),o.jsx("label",{className:"text-sm",children:"Paga con"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:O,onChange:ce=>W(parseFloat(ce.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Vuelto"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:Ae,onChange:ce=>de(ce.target.value)}),o.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[o.jsx("button",{onClick:()=>I(null),className:"px-3 py-1 border rounded",children:"Cancelar"}),o.jsx("button",{onClick:Ue,className:"px-3 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",children:"Guardar cambios"})]})]})})]})}const hA=t=>`C$ ${(Number(t)||0).toFixed(2)}`,Gc=t=>Math.round((Number(t)||0)*100)/100;function W7e(t){if(!t)return"";switch(t){case"RIVAS":return"Rivas";case"SAN_JORGE":return"San Jorge";case"ISLA":return"Isla de Ometepe";default:return""}}function X7e(t){return t.toISOString().slice(0,10)}function Y7e(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-01`}function J7e(){const t=new Date,e=new Date(t.getFullYear(),t.getMonth()+1,1),r=new Date(e.getTime()-24*60*60*1e3);return X7e(r)}function Z7e(){const[t,e]=v.useState(Y7e()),[r,n]=v.useState(J7e()),[a,s]=v.useState(!1),[i,l]=v.useState(""),[c,u]=v.useState({}),[d,f]=v.useState({}),[h,A]=v.useState([]),[m,p]=v.useState([]),[g,x]=v.useState({}),[y,b]=v.useState(!1),[w,j]=v.useState(null),[I,_]=v.useState(null),S=v.useMemo(()=>w&&h.find(de=>de.vendorId===w)||null,[w,h]),E=v.useMemo(()=>{var de;return!w||!I?[]:((de=g[w])==null?void 0:de[I])||[]},[w,I,g]),k=v.useMemo(()=>Gc(h.reduce((de,fe)=>de+(fe.totalSoldMoney||0),0)),[h]),P=v.useMemo(()=>Gc(h.reduce((de,fe)=>de+(fe.totalCreditMoney||0),0)),[h]);v.useEffect(()=>{(async()=>{try{const de=await Lt(pt(Ge,"sellers_candies")),fe={};de.forEach(Fe=>{const Pe=Fe.data(),F=Pe.branch||"Rivas";let Q="RIVAS";F==="San Jorge"?Q="SAN_JORGE":F==="Isla Ometepe"&&(Q="ISLA"),fe[Fe.id]={id:Fe.id,name:Pe.name??"(sin nombre)",branch:Q,branchLabel:F,commissionPercent:Number(Pe.commissionPercent??0)}});const ge=await Lt(pt(Ge,"products_candies")),ee={};ge.forEach(Fe=>{const Pe=Fe.data();ee[Fe.id]={id:Fe.id,name:Pe.name??"(sin nombre)"}}),u(fe),f(ee)}catch(de){console.error(de),l(" Error cargando catlogos de vendedores/productos.")}})()},[]);const T=async()=>{if(!t||!r){l("Selecciona rango de fechas vlido.");return}if(!Object.keys(c).length){l("Cargando vendedores, intenta de nuevo en unos segundos.");return}s(!0),l("");try{const de={},fe={},ge=tr(pt(Ge,"inventory_candies_sellers"),sr("date",">=",t),sr("date","<=",r)),ee=await Lt(ge),Fe={},Pe={},F={},Q={};ee.forEach(le=>{var ct,xe;const se=le.data(),Be=se.sellerId||"";if(!Be)return;const je=se.productId||"",ot=se.productName||((ct=d[je])==null?void 0:ct.name)||"(sin nombre)",mt=Math.max(1,Math.floor(Number(se.unitsPerPackage||1))),ut=Number(se.totalUnits??0),_e=Number(se.packages??0),rt=Number(se.remainingUnits??se.remaining??0),we=Number(se.remainingPackages??0),Ce=_e>0?_e:ut>0?Math.floor(ut/mt):0,Ue=we>0?we:rt>0?Math.floor(rt/mt):0;Fe[Be]=(Fe[Be]||0)+Ce,Pe[Be]=(Pe[Be]||0)+Ue;const Ve=se.orderId||se.vendorOrderId||se.orderNumber||se.order||le.id;F[Be]||(F[Be]=new Set),F[Be].add(Ve);const ue=((xe=c[Be])==null?void 0:xe.name)||se.sellerName||"(sin vendedor)",ce=String(se.date||""),Te=Number(se.totalVendor??0),Xe=Number(se.gainVendor??0),ft=_e>0?_e:ut>0?Math.floor(ut/mt):0,gt=ft>0?Te/ft:0,vt=ft>0?Xe/ft:0,At=Gc(Ce*gt),ye=Gc(Ce*vt),$e=Gc(Ue*gt),Ne=Gc(Ue*vt);Q[Be]||(Q[Be]={ordered:[],remaining:[]}),Ce>0&&Q[Be].ordered.push({date:ce,vendorName:ue,productName:ot,packages:Ce,totalMoney:At,vendorCommission:ye}),Ue>0&&Q[Be].remaining.push({date:ce,vendorName:ue,productName:ot,packages:Ue,totalMoney:$e,vendorCommission:Ne})});const H={};Object.keys(F).forEach(le=>{H[le]=F[le].size});const R=tr(pt(Ge,"sales_candies"),sr("date",">=",t),sr("date","<=",r)),z=await Lt(R),J={},D={},U={},ne={},ve={},L={};z.forEach(le=>{const se=le.data(),Be=se.date||"",je=se.vendorId||se.sellerId||"";if(!je)return;const ot=c[je],mt=se.vendorName||(ot==null?void 0:ot.name)||"(sin vendedor)",ut=Number(se.vendorCommissionPercent??(ot==null?void 0:ot.commissionPercent)??0)||0,_e=Array.isArray(se.items)?se.items:[];if(!_e.length)return;const rt=String(se.type||"").toUpperCase()==="CREDITO";ve[je]||(ve[je]={sold:[],credit:[]}),_e.forEach(we=>{var At;const Ce=we.productName||((At=d[we.productId||""])==null?void 0:At.name)||"(sin nombre)",Ue=we.packages??we.qty??we.quantity??0,Ve=Number(Ue||0);if(Ve<=0)return;const ue=Number(we.unitPricePackage??we.unitPrice??0)||0,ce=Math.max(0,Number(we.discount||0)),Te=Ve*ue,Xe=Gc(Math.max(0,Te-ce));if(Xe<=0)return;console.log("DBG",{isCredit:rt,vendorId:je,commissionPercent:ut,lineFinal:Xe,storedItemCommission:Number(we.vendorCommissionAmount??0)});let ft=0;const gt=Number(we.vendorCommissionAmount??0);gt?ft=Gc(gt):ut>0&&(ft=Gc(Xe*ut/100)),rt?(D[je]=(D[je]||0)+Ve,ne[je]=(ne[je]||0)+Xe):(J[je]=(J[je]||0)+Ve,U[je]=(U[je]||0)+Xe),rt?fe[je]=(fe[je]||0)+ft:de[je]=(de[je]||0)+ft,rt?ve[je].credit.push({date:Be,vendorName:mt,productName:Ce,packages:Ve,totalMoney:Xe,vendorCommission:0}):ve[je].sold.push({date:Be,vendorName:mt,productName:Ce,packages:Ve,totalMoney:Xe,vendorCommission:ft});const vt=Ce;L[vt]||(L[vt]={productName:Ce,packages:0,totalMoney:0}),L[vt].packages+=Ve,L[vt].totalMoney+=Xe})});const Ye=new Set([...Object.keys(Fe),...Object.keys(Pe),...Object.keys(J),...Object.keys(D)]),ie=[],Z={};Ye.forEach(le=>{var Ue,Ve,ue,ce;const se=c[le],Be=(se==null?void 0:se.name)||"(sin vendedor)",je=se?se.branchLabel||W7e(se.branch):"",ot=Fe[le]||0,mt=Pe[le]||0,ut=J[le]||0,_e=D[le]||0,rt=Gc(U[le]||0),we=Gc(ne[le]||0),Ce=H[le]||0;ie.push({vendorId:le,vendorName:Be,branchLabel:je,orderedPackages:ot,remainingPackages:mt,soldPackages:ut,creditPackages:_e,totalSoldMoney:rt,totalCreditMoney:we,ordersCreated:Ce,commissionCash:Gc(de[le]||0),commissionCredit:0}),Z[le]={ordered:(((Ue=Q[le])==null?void 0:Ue.ordered)||[]).sort((Te,Xe)=>Te.date.localeCompare(Xe.date)),remaining:(((Ve=Q[le])==null?void 0:Ve.remaining)||[]).sort((Te,Xe)=>Te.date.localeCompare(Xe.date)),sold:(((ue=ve[le])==null?void 0:ue.sold)||[]).sort((Te,Xe)=>Te.date.localeCompare(Xe.date)),credit:(((ce=ve[le])==null?void 0:ce.credit)||[]).sort((Te,Xe)=>Te.date.localeCompare(Xe.date))}}),ie.sort((le,se)=>le.vendorName.localeCompare(se.vendorName,"es")),A(ie),x(Z);const Oe=Object.values(L).map(le=>({productName:le.productName,packages:le.packages,totalMoney:Gc(le.totalMoney)})).sort((le,se)=>se.packages-le.packages).slice(0,10);p(Oe),ie.length||l("Sin datos para el rango seleccionado.")}catch(de){console.error(de),l(" Error cargando consolidado de vendedores.")}finally{s(!1)}};v.useEffect(()=>{Object.keys(c).length&&T()},[c]);const O=(de,fe)=>{j(de),_(fe),b(!0)},W=()=>{b(!1),j(null),_(null)},Ae=()=>{if(!h.length){l("No hay datos para exportar.");return}const de=["Vendedor","Sucursal","Paquetes ordenados","Paquetes restantes","Paquetes vendidos","Paquetes fiados","Total vendidos (C$)","Comisin Cash (C$)","Total fiado (C$)","Comisin Crdito (C$)","rdenes creadas"],fe=h.map(F=>[F.vendorName,F.branchLabel,F.orderedPackages.toString(),F.remainingPackages.toString(),F.soldPackages.toString(),F.creditPackages.toString(),F.totalSoldMoney.toFixed(2),F.commissionCash.toFixed(2),F.totalCreditMoney.toFixed(2),F.commissionCredit.toFixed(2),F.ordersCreated.toString()]),ge=[de,...fe].map(F=>F.map(Q=>`"${String(Q).replace(/"/g,'""')}"`).join(",")).join(`
`),ee=new Blob([ge],{type:"text/csv;charset=utf-8;"}),Fe=URL.createObjectURL(ee),Pe=document.createElement("a");Pe.href=Fe,Pe.download=`consolidado_vendedores_dulces_${t}_a_${r}.csv`,Pe.click(),URL.revokeObjectURL(Fe)};return o.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Consolidado por Vendedor - Dulces"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold mb-1",children:"Desde"}),o.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:t,onChange:de=>e(de.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold mb-1",children:"Hasta"}),o.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:r,onChange:de=>n(de.target.value)})]}),o.jsx("div",{className:"flex items-end",children:o.jsx("button",{type:"button",onClick:T,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",disabled:a,children:a?"Cargando...":"Aplicar filtros"})}),o.jsx("div",{className:"flex items-end",children:o.jsx("button",{type:"button",onClick:Ae,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 w-full",children:"Exportar CSV"})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 text-sm",children:[o.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Ventas Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:hA(k)})]}),o.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Ventas Credito"}),o.jsx("div",{className:"text-xl font-semibold",children:hA(P)})]}),o.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Vendedores con Inventario"}),o.jsx("div",{className:"text-xl font-semibold",children:h.length})]})]}),o.jsx("div",{className:"overflow-x-auto mb-6",children:o.jsxs("table",{className:"min-w-full border text-sm shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Sucursal"}),o.jsx("th",{className:"border p-2",children:"Paquetes ordenados"}),o.jsx("th",{className:"border p-2",children:"Paquetes restantes"}),o.jsx("th",{className:"border p-2",children:"Paquetes vendidos"}),o.jsx("th",{className:"border p-2",children:"Paquetes fiados"}),o.jsx("th",{className:"border p-2",children:"Total vendidos (C$)"}),o.jsx("th",{className:"border p-2",children:"Comisin Cash (C$)"}),o.jsx("th",{className:"border p-2",children:"Total fiado (C$)"}),o.jsx("th",{className:"border p-2",children:"Comisin Crdito (C$)"}),o.jsx("th",{className:"border p-2",children:"rdenes creadas"})]})}),o.jsxs("tbody",{children:[h.map(de=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:de.vendorName}),o.jsx("td",{className:"border p-1",children:de.branchLabel}),o.jsx("td",{className:"border p-1",children:o.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>O(de.vendorId,"ordered"),children:de.orderedPackages})}),o.jsx("td",{className:"border p-1",children:o.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>O(de.vendorId,"remaining"),children:de.remainingPackages})}),o.jsx("td",{className:"border p-1",children:o.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>O(de.vendorId,"sold"),children:de.soldPackages})}),o.jsx("td",{className:"border p-1",children:o.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>O(de.vendorId,"credit"),children:de.creditPackages})}),o.jsx("td",{className:"border p-1",children:hA(de.totalSoldMoney)}),o.jsx("td",{className:"border p-1",children:hA(de.commissionCash)}),o.jsx("td",{className:"border p-1",children:hA(de.totalCreditMoney)}),o.jsx("td",{className:"border p-1",children:hA(de.commissionCredit)}),o.jsx("td",{className:"border p-1",children:de.ordersCreated})]},de.vendorId)),h.length===0&&!a&&o.jsx("tr",{children:o.jsx("td",{colSpan:11,className:"p-3 text-center text-gray-500",children:"Sin datos para mostrar."})})]})]})}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"font-semibold mb-2 text-sm",children:"Top 10 productos ms vendidos (paquetes)"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border text-xs shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"#"}),o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Paquetes vendidos"}),o.jsx("th",{className:"border p-2",children:"Total dinero (C$)"})]})}),o.jsxs("tbody",{children:[m.map((de,fe)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:fe+1}),o.jsx("td",{className:"border p-1",children:de.productName}),o.jsx("td",{className:"border p-1",children:de.packages}),o.jsx("td",{className:"border p-1",children:hA(de.totalMoney)})]},de.productName)),m.length===0&&!a&&o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"Sin productos para mostrar."})})]})]})})]}),i&&o.jsx("p",{className:"mt-2 text-sm text-gray-700",children:i}),y&&I&&w&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-[95%] max-w-4xl max-h-[90vh] flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[o.jsxs("div",{children:[o.jsxs("h4",{className:"font-semibold text-lg",children:["Detalle"," ",I==="ordered"?"Paquetes ordenados":I==="remaining"?"Paquetes restantes":I==="sold"?"Paquetes vendidos":"Paquetes fiados"]}),o.jsxs("p",{className:"text-xs text-gray-500",children:[S==null?void 0:S.vendorName,"  ",S==null?void 0:S.branchLabel]})]}),o.jsx("button",{onClick:W,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 text-sm",children:"Cerrar"})]}),o.jsx("div",{className:"flex-1 overflow-auto p-4",children:o.jsxs("table",{className:"min-w-full border text-xs",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Fecha"}),o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Paquetes"}),o.jsx("th",{className:"border p-2",children:"Total dinero (C$)"}),o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Comisin vendedor (C$)"})]})}),o.jsxs("tbody",{children:[E.map((de,fe)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:de.date}),o.jsx("td",{className:"border p-1",children:de.productName}),o.jsx("td",{className:"border p-1",children:de.packages}),o.jsx("td",{className:"border p-1",children:hA(de.totalMoney)}),o.jsx("td",{className:"border p-1",children:de.vendorName}),o.jsx("td",{className:"border p-1",children:hA(de.vendorCommission)})]},fe)),E.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Sin registros para mostrar."})})]})]})})]})})]})}const xl=t=>`C$${Number(t||0).toFixed(2)}`,XC=t=>Number(t||0).toFixed(3),PP=()=>{const t=new Date;return br(new Date(t.getFullYear(),t.getMonth(),1),"yyyy-MM-dd")},YC=()=>br(new Date,"yyyy-MM-dd");function e9e({transactions:t=[],onClose:e,onCreated:r}){const n=Array.isArray(t)?t:[],[a,s]=v.useState([]),i=v.useMemo(()=>{const ye={};return a.forEach($e=>{$e.email&&(ye[$e.email.trim().toLowerCase()]=$e)}),ye},[a]);v.useEffect(()=>{(async()=>{try{const ye=tr(pt(Ge,"sellers_candies"),ln("name","asc")),$e=await Lt(ye),Ne=[];$e.forEach(ct=>{const xe=ct.data();Ne.push({id:ct.id,name:xe.name||"",email:xe.email||"",commissionPercent:Number(xe.commissionPercent||0)})}),s(Ne)}catch(ye){console.error(ye)}})()},[]);const[l,c]=v.useState(PP()),[u,d]=v.useState(YC()),[f,h]=v.useState(""),[A,m]=v.useState(""),p=v.useMemo(()=>{const ye=new Map;return n.forEach($e=>{const Ne=$e.productId||$e.productName;ye.set(Ne,{key:Ne,name:$e.productName})}),Array.from(ye.values()).sort(($e,Ne)=>$e.name.localeCompare(Ne.name))},[n]),g=v.useMemo(()=>{const ye=new Map;return n.forEach($e=>{const Ne=($e.sellerEmail||"").trim().toLowerCase();if(!Ne)return;const ct=i[Ne],xe=(ct==null?void 0:ct.name)||$e.vendorName||Ne;ye.set(Ne,{email:Ne,label:xe})}),Array.from(ye.values()).sort(($e,Ne)=>$e.label.localeCompare(Ne.label))},[n,i]),x=v.useMemo(()=>n.filter(ye=>!(l&&ye.date<l||u&&ye.date>u||f&&(ye.productId||ye.productName)!==f||A&&(ye.sellerEmail||"").trim().toLowerCase()!==A)),[n,l,u,f,A]),[y,b]=v.useState(YC()),[w,j]=v.useState(()=>`FAC-CANDY-${Date.now().toString().slice(-6)}`),[I,_]=v.useState(""),[S,E]=v.useState("0"),[k,P]=v.useState(()=>x.map(ye=>ye.id));v.useEffect(()=>{P(ye=>ye.filter($e=>x.some(Ne=>Ne.id===$e)))},[x]);const[T,O]=v.useState([]),[W,Ae]=v.useState([]),[de,fe]=v.useState(!1),[ge,ee]=v.useState(PP()),[Fe,Pe]=v.useState(YC());v.useEffect(()=>{(async()=>{try{fe(!0);const ye=tr(pt(Ge,"expensesCandies"),ln("date","desc")),$e=await Lt(ye),Ne=[];$e.forEach(ct=>{const xe=ct.data();Ne.push({id:ct.id,date:xe.date,description:xe.description,amount:Number(xe.amount||0)})}),O(Ne)}catch(ye){console.error(ye)}finally{fe(!1)}})()},[]);const F=v.useMemo(()=>T.filter(ye=>!(!ye.date||ge&&ye.date<ge||Fe&&ye.date>Fe)),[T,ge,Fe]),[Q,H]=v.useState([]),[R,z]=v.useState(!1),[J,D]=v.useState(""),[U,ne]=v.useState("DEBITO"),[ve,L]=v.useState(""),Ye=()=>{const ye=Number(ve);!J.trim()||!isFinite(ye)||ye<=0||(H($e=>[...$e,{id:`${Date.now()}_${$e.length+1}`,description:J.trim(),type:U,amount:Number(ye.toFixed(2))}]),D(""),L(""))},[ie,Z]=v.useState(null),[Oe,le]=v.useState(""),[se,Be]=v.useState("DEBITO"),[je,ot]=v.useState(""),mt=ye=>{Z(ye.id),le(ye.description),Be(ye.type),ot(ye.amount.toFixed(2))},ut=()=>{Z(null),le(""),Be("DEBITO"),ot("")},_e=()=>{if(!ie)return;const ye=Number(je);!isFinite(ye)||ye<=0||(H($e=>$e.map(Ne=>Ne.id===ie?{...Ne,description:Oe.trim(),type:se,amount:Number(ye.toFixed(2))}:Ne)),ut())},rt=ye=>{H($e=>$e.filter(Ne=>Ne.id!==ye)),ie===ye&&ut()},we=(ye,$e)=>{P(Ne=>$e?[...new Set([...Ne,ye])]:Ne.filter(ct=>ct!==ye))},Ce=ye=>{P(ye?x.map($e=>$e.id):[])},Ue=(ye,$e)=>{Ae(Ne=>$e?[...new Set([...Ne,ye])]:Ne.filter(ct=>ct!==ye))},Ve=v.useMemo(()=>x.filter(ye=>k.includes(ye.id)),[x,k]),ue=v.useMemo(()=>Q.filter(ye=>ye.type==="DEBITO").reduce((ye,$e)=>ye+$e.amount,0),[Q]),ce=v.useMemo(()=>Q.filter(ye=>ye.type==="CREDITO").reduce((ye,$e)=>ye+$e.amount,0),[Q]),Te=v.useMemo(()=>{let ye=0,$e=0,Ne=0,ct=0;for(const bt of Ve){const G=Number(bt.packages||0),te=Number(bt.cogsAmount||0),He=Number(bt.amount||0);ye+=G,$e+=te,Ne+=He;const re=(bt.sellerEmail||"").trim().toLowerCase(),be=i[re],Me=Number((be==null?void 0:be.commissionPercent)||0),tt=He*Me/100;ct+=tt}const xe=F.filter(bt=>W.includes(bt.id)).reduce((bt,G)=>bt+Number(G.amount||0),0),Qe=Ne-$e,dt=Ne-xe-ue+ce-ct,Bt=Number(S||0),qe=Ne*Bt/100;return{totalPackages:Number(XC(ye)),totalProvider:Number($e.toFixed(2)),totalSale:Number(Ne.toFixed(2)),totalGastos:Number(xe.toFixed(2)),debits:Number(ue.toFixed(2)),credits:Number(ce.toFixed(2)),grossProfit:Number(Qe.toFixed(2)),finalAmount:Number(dt.toFixed(2)),totalCommissionVendors:Number(ct.toFixed(2)),branchProfit:Number(qe.toFixed(2)),branchFactor:Bt}},[Ve,F,W,ue,ce,i,S]),[Xe,ft]=v.useState(!1),[gt,vt]=v.useState(""),At=async()=>{if(vt(""),Ve.length===0){vt("Selecciona al menos 1 transaccin procesada.");return}try{ft(!0);const ye={number:w.trim(),date:y,description:I.trim(),status:"PENDIENTE",createdAt:or.now(),totalPackages:Te.totalPackages,totalProvider:Te.totalProvider,totalSale:Te.totalSale,totalExpenses:Te.totalGastos,totalDebits:Te.debits,totalCredits:Te.credits,grossProfit:Te.grossProfit,totalCommissionVendors:Te.totalCommissionVendors,branchFactorPercent:Te.branchFactor,branchProfit:Te.branchProfit,finalAmount:Te.finalAmount,transactions:Ve.map($e=>{const Ne=Number($e.packages||0)||1,ct=Number($e.cogsAmount||0),xe=Number($e.amount||0),Qe=ct/Ne,dt=xe/Ne,Bt=($e.sellerEmail||"").trim().toLowerCase(),qe=i[Bt],bt=Number((qe==null?void 0:qe.commissionPercent)||0),G=xe*bt/100;return{id:$e.id,date:$e.date,productId:$e.productId||null,productName:$e.productName,vendorName:$e.vendorName,sellerEmail:$e.sellerEmail||null,packages:Number(XC($e.packages)),providerPricePack:Number(Qe.toFixed(4)),salePricePack:Number(dt.toFixed(4)),totalProvider:Number(ct.toFixed(2)),totalSale:Number(xe.toFixed(2)),commissionPercent:bt,commissionAmount:Number(G.toFixed(2))}}),expenses:F.filter($e=>W.includes($e.id)).map($e=>({id:$e.id,date:$e.date||null,description:$e.description||"",amount:Number(Number($e.amount||0).toFixed(2))})),adjustments:Q.map($e=>({id:$e.id,description:$e.description,type:$e.type,amount:Number($e.amount.toFixed(2))}))};await wn(pt(Ge,"invoicesCandies"),ye),vt(" Factura de dulces creada."),r()}catch(ye){console.error(ye),vt(` Error al crear factura: ${(ye==null?void 0:ye.message)||"desconocido"}`)}finally{ft(!1)}};return o.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/40 flex items-center justify-center p-3",children:[o.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-xl shadow-xl p-4 md:p-6 max-h-[90vh] overflow-auto relative",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Crear factura CandyShop"}),o.jsx("button",{onClick:e,className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:y,onChange:ye=>b(ye.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Nmero"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:w,onChange:ye=>j(ye.target.value),placeholder:"FAC-CANDY-001"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Factor sucursal (%)"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:S,onChange:ye=>E(ye.target.value),placeholder:"Ej: 30"}),o.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Se aplica sobre el total de ventas para calcular la ganancia de sucursal."})]}),o.jsxs("div",{className:"md:col-span-1",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Descripcin"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:I,onChange:ye=>_(ye.target.value),placeholder:"Comentarios de la factura"})]})]}),o.jsx("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:o.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Desde (transaccin)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:l,onChange:ye=>c(ye.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Hasta (transaccin)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:ye=>d(ye.target.value)})]}),o.jsxs("div",{className:"min-w-[180px]",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:f,onChange:ye=>h(ye.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),p.map(ye=>o.jsx("option",{value:ye.key,children:ye.name},ye.key))]})]}),o.jsxs("div",{className:"min-w-[180px]",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Vendedor"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:A,onChange:ye=>m(ye.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),g.map(ye=>o.jsx("option",{value:ye.email,children:ye.label},ye.email))]})]}),o.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{c(PP()),d(YC()),h(""),m("")},children:"Quitar filtro"})]})}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Transacciones procesadas"}),o.jsxs("label",{className:"text-sm flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:x.length>0&&k.length===x.length,onChange:ye=>Ce(ye.target.checked)}),"Seleccionar todas (sobre el filtro)"]})]}),x.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No hay transacciones procesadas en el filtro actual."}):o.jsx("div",{className:"border rounded max-h-80 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Sel"}),o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Vendedor"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border",children:"Precio venta"}),o.jsx("th",{className:"p-2 border",children:"Total proveedor"}),o.jsx("th",{className:"p-2 border",children:"Total venta"}),o.jsx("th",{className:"p-2 border",children:"Comisin venta"})]})}),o.jsx("tbody",{children:x.map(ye=>{const $e=k.includes(ye.id),Ne=Number(ye.packages||0)||1,ct=Number(ye.cogsAmount||0),xe=Number(ye.amount||0),Qe=ct/Ne,dt=xe/Ne,Bt=(ye.sellerEmail||"").trim().toLowerCase(),qe=i[Bt],bt=Number((qe==null?void 0:qe.commissionPercent)||0),G=xe*bt/100;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"checkbox",checked:$e,onChange:te=>we(ye.id,te.target.checked)})}),o.jsx("td",{className:"p-2 border",children:ye.date}),o.jsx("td",{className:"p-2 border",children:(qe==null?void 0:qe.name)||ye.vendorName}),o.jsx("td",{className:"p-2 border",children:ye.productName}),o.jsx("td",{className:"p-2 border",children:XC(ye.packages)}),o.jsx("td",{className:"p-2 border",children:xl(Qe)}),o.jsx("td",{className:"p-2 border",children:xl(dt)}),o.jsx("td",{className:"p-2 border",children:xl(ct)}),o.jsx("td",{className:"p-2 border",children:xl(xe)}),o.jsx("td",{className:"p-2 border",children:bt>0?`${xl(G)} (${bt.toFixed(2)}%)`:""})]},ye.id)})})]})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Gastos a incluir (opcional)"}),de&&o.jsx("span",{className:"text-xs text-gray-500",children:"Cargando"}),o.jsxs("div",{className:"ml-auto flex items-end gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Desde (gasto)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:ge,onChange:ye=>ee(ye.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta (gasto)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:Fe,onChange:ye=>Pe(ye.target.value)})]})]})]}),F.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No hay gastos en el rango seleccionado."}):o.jsx("div",{className:"border rounded max-h-48 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Sel"}),o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"})]})}),o.jsx("tbody",{children:F.map(ye=>{const $e=W.includes(ye.id);return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"checkbox",checked:$e,onChange:Ne=>Ue(ye.id,Ne.target.checked)})}),o.jsx("td",{className:"p-2 border",children:ye.date||""}),o.jsx("td",{className:"p-2 border",children:ye.description||""}),o.jsx("td",{className:"p-2 border",children:xl(Number(ye.amount||0))})]},ye.id)})})]})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Notas Crdito/Dbito (Cargos extras)"}),o.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>z(!0),children:"Crear Cargo"})]}),Q.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"Sin cargos agregados."}):o.jsx("div",{className:"border rounded max-h-40 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:Q.map(ye=>{const $e=ie===ye.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:$e?o.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[70px]",value:Oe,onChange:Ne=>le(Ne.target.value)}):o.jsx("span",{title:ye.description,children:ye.description.length>60?`${ye.description.slice(0,60)}`:ye.description})}),o.jsx("td",{className:"p-2 border",children:$e?o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:se,onChange:Ne=>Be(Ne.target.value),children:[o.jsx("option",{value:"DEBITO",children:"Dbito"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ye.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:ye.type})}),o.jsx("td",{className:"p-2 border",children:$e?o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1 text-right",value:je,onChange:Ne=>ot(Ne.target.value)}):xl(ye.amount)}),o.jsx("td",{className:"p-2 border",children:$e?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:_e,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:ut,children:"Cancelar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>rt(ye.id),children:"Eliminar"})]}):o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-indigo-600 text-white hover:bg-indigo-700 text-xs",onClick:()=>mt(ye),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>rt(ye.id),children:"Eliminar"})]})})]},ye.id)})})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-4 justify-between",children:[o.jsx("div",{className:"space-y-1",children:o.jsxs("div",{children:["Total paquetes: ",o.jsx("strong",{children:XC(Te.totalPackages)})]})}),o.jsxs("div",{className:"space-y-1 text-center",children:[o.jsxs("div",{children:["Total proveedor (costo):"," ",o.jsx("strong",{children:xl(Te.totalProvider)})]}),o.jsxs("div",{children:["Total venta: ",o.jsx("strong",{children:xl(Te.totalSale)})]}),o.jsxs("div",{children:["Ganancia bruta (venta  costo):"," ",o.jsx("strong",{children:xl(Te.grossProfit)})]})]}),o.jsxs("div",{className:"space-y-1 text-right",children:[o.jsxs("div",{children:["Gastos: ",o.jsx("strong",{children:xl(Te.totalGastos)})]}),o.jsxs("div",{children:["Dbitos: ",o.jsx("strong",{children:xl(Te.debits)})]}),o.jsxs("div",{children:["Crditos: ",o.jsx("strong",{children:xl(Te.credits)})]}),o.jsxs("div",{children:["Comisin total vendedores:"," ",o.jsx("strong",{children:xl(Te.totalCommissionVendors)})]}),o.jsxs("div",{children:["Ganancia sucursal (ventas  factor):"," ",o.jsx("strong",{children:xl(Te.branchProfit)})]})]}),o.jsx("div",{className:"md:col-span-3 mt-3",children:o.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-center font-semibold text-lg",children:["Monto final (ventas  gastos  dbitos + crditos  comisin vendedores):"," ",o.jsx("span",{className:"text-blue-700",children:xl(Te.finalAmount)})]})})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{disabled:Xe,onClick:At,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",children:Xe?"Creando":"Crear factura"}),o.jsx("button",{onClick:e,className:"px-4 py-2 border rounded",children:"Cancelar"}),gt&&o.jsx("span",{className:"text-sm ml-2",children:gt})]}),Xe&&o.jsxs("div",{className:"absolute inset-0 z-[11000] bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center gap-3",children:[o.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),o.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Creando factura"})]})]}),R&&o.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/50 flex items-center justify-center p-3",children:o.jsxs("div",{className:"bg_WHITE w-full max-w-lg rounded-xl shadow-xl p-4",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx("h4",{className:"font-semibold",children:"Nuevo cargo"}),o.jsx("button",{className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",onClick:()=>z(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripcin"}),o.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[90px]",value:J,onChange:ye=>D(ye.target.value),placeholder:"Detalle del cargo"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Tipo de cargo"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:U,onChange:ye=>ne(ye.target.value),children:[o.jsx("option",{value:"DEBITO",children:"Dbito"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:ve,onChange:ye=>L(ye.target.value),placeholder:"0.00"})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:Ye,children:"Agregar"})})]})]})})]})}const pa=t=>`C$ ${Number(t??0).toFixed(2)}`,JC=t=>Number(t??0).toFixed(3);function BP(t){const e=t.transactions||[];let r=Number(t.totalPackages??0),n=Number(t.totalProvider??0),a=Number(t.totalSale??0),s=Number(t.totalCommissionVendors??0);if(e.length>0&&(a===0||r===0)){r=0,n=0,a=0,s=0;for(const x of e){const y=Number(x.packages??0);r+=y,n+=Number(x.totalProvider??y*(x.providerPricePack??0)),a+=Number(x.totalSale??y*(x.salePricePack??0));const b=x.commissionAmount??Number(x.totalSale??0)*Number(x.commissionPercent??0)/100;s+=Number(b||0)}}const i=t.expenses||[],l=t.adjustments||[],c=t.totalExpenses!==void 0?Number(t.totalExpenses):i.reduce((x,y)=>x+Number(y.amount||0),0),u=l.filter(x=>x.type==="DEBITO").reduce((x,y)=>x+Number(y.amount||0),0),d=l.filter(x=>x.type==="CREDITO").reduce((x,y)=>x+Number(y.amount||0),0),f=t.totalDebits!==void 0?Number(t.totalDebits):u,h=t.totalCredits!==void 0?Number(t.totalCredits):d,A=a-n,m=Number(t.branchFactorPercent??0),p=t.branchProfit!==void 0?Number(t.branchProfit):Number((A*m/100).toFixed(2)),g=t.finalAmount!==void 0?Number(t.finalAmount):a-s-c-f+h;return{totalPackages:r,totalProvider:n,totalSale:a,commissionTotal:s,expenses:c,debits:f,credits:h,grossProfit:A,branchProfit:p,finalAmount:g}}function _$(t){const e=t.transactions||[];if(e.length===0)return"";const r=Array.from(new Set(e.map(n=>n.vendorName||"Sin nombre")));return r.length===1?r[0]:"Varios"}function t9e(){const[t,e]=v.useState([]),[r,n]=v.useState(!0),[a,s]=v.useState(null),i=v.useRef(null),[l,c]=v.useState(!1),u=async()=>{n(!0);const A=tr(pt(Ge,"invoicesCandies"),ln("date","desc")),m=await Lt(A),p=[];m.forEach(g=>{const x=g.data();p.push({id:g.id,date:x.date,number:x.number,description:x.description,status:x.status||"PENDIENTE",totalPackages:x.totalPackages||0,totalProvider:x.totalProvider||0,totalSale:x.totalSale||0,totalExpenses:x.totalExpenses||0,totalDebits:x.totalDebits||0,totalCredits:x.totalCredits||0,totalCommissionVendors:x.totalCommissionVendors||0,finalAmount:x.finalAmount||0,branchFactorPercent:x.branchFactorPercent||0,branchProfit:x.branchProfit||0,transactions:(x.transactions||[]).map(y=>({id:y.id,date:y.date,vendorId:y.vendorId||null,vendorName:y.vendorName||"Sin nombre",sellerEmail:y.sellerEmail||null,productId:y.productId,productName:y.productName||"Sin nombre",packages:Number(y.packages||0),providerPricePack:Number(y.providerPricePack||0),salePricePack:Number(y.salePricePack||0),totalProvider:Number(y.totalProvider||0),totalSale:Number(y.totalSale||0),commissionPercent:Number(y.commissionPercent||0),commissionAmount:Number(y.commissionAmount||0)})),expenses:(x.expenses||[]).map(y=>({id:y.id,description:y.description||"",date:y.date||null,amount:Number(y.amount||0)})),adjustments:(x.adjustments||[]).map(y=>({id:y.id,description:y.description||"",type:y.type||"DEBITO",amount:Number(y.amount||0)}))})}),e(p),n(!1)};v.useEffect(()=>{u()},[]);const d=async A=>{const m=A.status==="PAGADA"?"PENDIENTE":"PAGADA";await rn(Kt(Ge,"invoicesCandies",A.id),{status:m}),e(p=>p.map(g=>g.id===A.id?{...g,status:m}:g)),(a==null?void 0:a.id)===A.id&&s({...A,status:m})},f=async A=>{if(window.confirm(`Eliminar factura del ${A.date}?`))try{await yn(Kt(Ge,"invoicesCandies",A.id)),e(m=>m.filter(p=>p.id!==A.id)),(a==null?void 0:a.id)===A.id&&s(null)}catch(m){console.error(m),alert("No se pudo eliminar la factura.")}},h=async()=>{if(!i.current||!a)return;const A=i.current,m=await gg(A,{backgroundColor:"#ffffff",onclone:b=>{const w=b.body;w.style.background="#ffffff",w.querySelectorAll("*").forEach(j=>{const I=b.defaultView.getComputedStyle(j);I.boxShadow&&I.boxShadow!=="none"&&(j.style.boxShadow="none")})},scale:2}),p=m.toDataURL("image/png"),g=new Br("p","mm","a4"),x=g.internal.pageSize.getWidth(),y=m.height*x/m.width;g.addImage(p,"PNG",0,0,x,y),g.save(`factura_candy_${a.number||a.date}.pdf`)};return o.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded shadow",children:[o.jsxs("div",{className:"flex items-center mb-4 gap-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Facturacin CandyShop"}),o.jsx("button",{className:"ml-auto bg-blue-600 text-white px-4 py-2 rounded-2xl hover:bg-blue-700 text-sm",onClick:()=>c(!0),children:"Crear factura Candy"})]}),l&&o.jsx(e9e,{onClose:()=>c(!1),onCreated:()=>{c(!1),u()}}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-4 overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"N factura"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin total"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Sub total (sin gastos/ajustes)"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Gastos"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Dbitos"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Crditos"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Estado"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Acciones"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):t.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin facturas"})}):t.map(A=>{const m=BP(A),p=_$(A);return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border whitespace-nowrap",children:A.date}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:A.number||""}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:p}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:pa(m.commissionTotal)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:JC(m.totalPackages)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:pa(m.totalSale)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:pa(m.expenses)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:pa(m.debits)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:pa(m.credits)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:pa(m.finalAmount)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${A.status==="PAGADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:A.status})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",onClick:()=>s(A),children:"Ver"}),o.jsx("button",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",onClick:()=>d(A),children:A.status==="PAGADA"?"Marcar PENDIENTE":"Marcar PAGADA"}),o.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>f(A),children:"Eliminar"})]})})]},A.id)})})]})}),a&&o.jsxs("div",{ref:i,className:"bg-white p-4 rounded shadow-2xl",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsxs("h3",{className:"text-lg font-semibold",children:["Detalle ",a.date," ",a.number?` ${a.number}`:""]}),o.jsx("button",{className:"ml-auto px-3 py-1 border rounded",onClick:()=>s(null),children:"Cerrar"}),o.jsx("button",{onClick:h,className:"bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Imprimir PDF"})]}),(()=>{const A=BP(a),m=_$(a);return o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm mb-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Estado:"})," ",a.status]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Vendedor:"})," ",m]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Paquetes:"})," ",JC(A.totalPackages)]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total proveedor:"})," ",pa(A.totalProvider)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Sub total ventas:"})," ",pa(A.totalSale)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Ganancia bruta:"})," ",pa(A.grossProfit)]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Comisin vendedores:"})," ",pa(A.commissionTotal)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Gastos:"})," ",pa(A.expenses)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Dbitos:"})," ",pa(A.debits)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Crditos:"})," ",pa(A.credits)]})]})]})})(),o.jsx("h4",{className:"font-semibold mb-1",children:"Transacciones"}),o.jsx("div",{className:"overflow-x-auto mb-4",children:o.jsxs("table",{className:"min-w-full text-sm shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Producto"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio venta"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total proveedor"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total venta"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin venta"})]})}),o.jsx("tbody",{children:(a.transactions||[]).length>0?(a.transactions||[]).map((A,m)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border whitespace-nowrap",children:A.date}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:A.vendorName}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:A.productName}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:JC(A.packages)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:pa(A.providerPricePack)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:pa(A.salePricePack)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:pa(A.totalProvider)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:pa(A.totalSale)}),o.jsxs("td",{className:"p-2 border whitespace-nowrap",children:[pa(A.commissionAmount||0),A.commissionPercent?` (${A.commissionPercent.toFixed(2)}%)`:""]})]},m)):o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin transacciones"})})})]})}),o.jsx("h4",{className:"font-semibold mb-1",children:"Gastos"}),o.jsx("div",{className:"overflow-x-auto mb-4",children:o.jsxs("table",{className:"min-w-full text-sm shadow-xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descripcin"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"})]})}),o.jsx("tbody",{children:(a.expenses||[]).length>0?(a.expenses||[]).map((A,m)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border whitespace-nowrap",children:A.date||""}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:A.description||""}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:pa(A.amount)})]},m)):o.jsx("tr",{children:o.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin gastos"})})})]})}),o.jsx("h4",{className:"font-semibold mb-1",children:"Cargos extras (Notas crdito/dbito)"}),o.jsx("div",{className:"overflow-x-auto mb-4",children:o.jsxs("table",{className:"min-w-full text-sm shadow-xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descripcin"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Tipo de cargo"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"})]})}),o.jsx("tbody",{children:(a.adjustments||[]).length>0?(a.adjustments||[]).map((A,m)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border whitespace-nowrap",children:A.description}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${A.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:A.type})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:pa(A.amount)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:a.date})]},m)):o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin cargos extras"})})})]})}),(()=>{const A=BP(a);return o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-2 justify-between",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:["Total paquetes: ",o.jsx("strong",{children:JC(A.totalPackages)})]}),o.jsxs("div",{children:["Total proveedor: ",o.jsx("strong",{children:pa(A.totalProvider)})]})]}),o.jsxs("div",{className:"space-y-1 text-center",children:[o.jsxs("div",{children:["Sub total ventas: ",o.jsx("strong",{children:pa(A.totalSale)})]}),o.jsxs("div",{children:["Ganancia bruta: ",o.jsx("strong",{children:pa(A.grossProfit)})]}),o.jsxs("div",{children:["Ganancia sucursal: ",o.jsx("strong",{children:pa(A.branchProfit)})]})]}),o.jsxs("div",{className:"space-y-1 text-right",children:[o.jsxs("div",{children:["Comisin vendedores:"," ",o.jsx("strong",{children:pa(A.commissionTotal)})]}),o.jsxs("div",{children:["Gastos: ",o.jsx("strong",{children:pa(A.expenses)})]}),o.jsxs("div",{children:["Dbitos: ",o.jsx("strong",{children:pa(A.debits)})]}),o.jsxs("div",{children:["Crditos: ",o.jsx("strong",{children:pa(A.credits)})]})]}),o.jsx("div",{className:"md:col-span-3 mt-3",children:o.jsxs("div",{className:"bg-blue-50 border border-blue-300 rounded-lg p-4 text-center",children:[o.jsx("span",{className:"block text-lg font-semibold text-gray-800",children:"Total (sub total  comisin  gastos  dbitos + crditos):"}),o.jsx("span",{className:"block text-2xl font-bold text-blue-700 mt-1",children:pa(A.finalAmount)})]})})]})})()]})]})}const us=t=>Math.round((Number(t)||0)*100)/100,t0=t=>Math.round((Number(t)||0)*1e3)/1e3,Qi=t=>Number(t??0).toFixed(2),mA=t=>Number(t??0).toFixed(3),r9e=(t,e)=>{var h;const r=t.date??((h=t.timestamp)!=null&&h.toDate?br(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=t.userEmail??"",a=t.vendorName||t.vendor||n||t.vendorId||"(sin vendedor)",s=t.type||"CONTADO",i=t.vendorId,l=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,c=Number(t.vendorCommissionAmount??0)||0;if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((A,m)=>{const p=Number((A==null?void 0:A.packages)??(A==null?void 0:A.qty)??(A==null?void 0:A.quantity)??0),g=Number((A==null?void 0:A.lineFinal)??0)||Math.max(0,Number((A==null?void 0:A.unitPricePackage)||(A==null?void 0:A.unitPrice)||0)*p-Number((A==null?void 0:A.discount)||0));let x=0;return c>0&&l>0&&Number(g||0)>0&&(x=us(c*Number(g||0)/l)),{id:`${e}#${m}`,productName:String((A==null?void 0:A.productName)??"(sin nombre)"),quantity:p,amount:us(g),date:r,type:s,vendorId:i,userEmail:a,vendorCommissionAmount:x}});const u=Number(t.packagesTotal??t.quantity??0),d=Number(t.amount??t.amountCharged??t.total??0)||0,f=us(Number(t.vendorCommissionAmount??0)||0);return[{id:e,productName:String((t==null?void 0:t.productName)??"(sin nombre)"),quantity:u,amount:us(d),date:r,type:s,vendorId:i,userEmail:a,vendorCommissionAmount:f}]};function n9e({role:t,roles:e,currentUserEmail:r,sellerCandyId:n}){const a=e&&e.length?e:t,s=!a||zr(a,"admin"),i="daily_closures_candies",l="sales_candies",c="sellers_candies",[u,d]=v.useState(br(qZ(new Date),"yyyy-MM-dd")),[f,h]=v.useState(br(new Date,"yyyy-MM-dd")),[A,m]=v.useState(!0),[p,g]=v.useState([]),[x,y]=v.useState(null),[b,w]=v.useState(""),[j,I]=v.useState([]),[_,S]=v.useState("ALL"),[E,k]=v.useState({}),P=v.useRef(null);if(!s)return o.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[o.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Liquidaciones"}),o.jsx("p",{className:"text-sm text-red-600",children:"Acceso denegado: solo admin."})]});const T=async()=>{try{const J=await Lt(pt(Ge,c)),D=[];J.forEach(U=>{const ne=U.data();D.push({id:U.id,name:ne.name||"",commissionPercent:Number(ne.commissionPercent||0)})}),I(D)}catch(J){console.error("Error cargando sellers_candies",J)}},O=async()=>{const J=performance.now();try{m(!0);const D=tr(pt(Ge,i),sr("date",">=",u),sr("date","<=",f)),U=await Lt(D),ne=performance.now();console.log(" getDocs ms:",(ne-J).toFixed(1),"docs:",U.size);const ve=[];U.forEach(Z=>ve.push({id:Z.id,...Z.data()}));const L=performance.now();console.log(" parse+set ms:",(L-ne).toFixed(1),"rows:",ve.length),ve.sort((Z,Oe)=>Z.date<Oe.date?1:Z.date>Oe.date?-1:0),g(ve),y(null);const Ye=new Set;ve.forEach(Z=>{(Z.sales||[]).forEach(Oe=>{const le=String((Oe==null?void 0:Oe.id)??"").split("#")[0].trim();le&&Ye.add(le)})});const ie=Array.from(Ye).filter(Z=>!E[Z]);if(ie.length>0){const Z={};for(const Oe of ie)try{const le=await xi(Kt(Ge,l,Oe));if(le.exists()){const se=le.data();Z[Oe]=r9e(se,Oe)}else Z[Oe]=[]}catch(le){console.error("Error leyendo sale",Oe,le),Z[Oe]=[]}k(Oe=>({...Oe,...Z}))}}catch(D){console.error(D),w(" Error cargando liquidaciones.")}finally{m(!1)}};v.useEffect(()=>{T()},[]),v.useEffect(()=>{O()},[]);const W=async J=>{J.preventDefault(),await O()},Ae=v.useMemo(()=>{const J={};return j.forEach(D=>J[D.id]=D.name||D.id),J},[j]),de=J=>{const D=[];return(J.sales||[]).forEach(U=>{const ne=String((U==null?void 0:U.id)??"").trim();if(!ne)return;const ve=ne.split("#")[0],Ye=(E[ve]||[]).find(ie=>ie.id===ne);Ye?D.push(Ye):D.push({id:ne,productName:String((U==null?void 0:U.productName)??"(sin nombre)"),quantity:Number((U==null?void 0:U.quantity)??0),amount:us(Number((U==null?void 0:U.amount)??0)),date:String((U==null?void 0:U.date)??""),type:"CONTADO",vendorId:"",userEmail:String((U==null?void 0:U.userEmail)??"(sin vendedor)"),vendorCommissionAmount:0})}),D},fe=J=>_==="ALL"?J:J.filter(D=>(D.vendorId||"")===_),ge=v.useMemo(()=>p.map(J=>{const D=fe(de(J));let U=0,ne=0,ve=0,L=0,Ye=0,ie=0;for(const Z of D){const Oe=Number(Z.quantity||0),le=Number(Z.amount||0),se=Number(Z.vendorCommissionAmount||0);Z.type==="CREDITO"?(ne+=Oe,L+=le,ie+=se):(U+=Oe,ve+=le,Ye+=se)}return{...J,_sales:D,_packsCash:t0(U),_packsCredit:t0(ne),_amountCash:us(ve),_amountCredit:us(L),_comCash:us(Ye),_comCredit:us(ie)}}),[p,E,_]),ee=v.useMemo(()=>{let J=0,D=0,U=0,ne=0,ve=0,L=0;for(const Ye of ge)J+=Number(Ye._packsCash||0),D+=Number(Ye._packsCredit||0),U+=Number(Ye._amountCash||0),ne+=Number(Ye._amountCredit||0),ve+=Number(Ye._comCash||0),L+=Number(Ye._comCredit||0);return{packsCash:t0(J),packsCredit:t0(D),totalSales:us(U+ne),amountCash:us(U),amountCredit:us(ne),comCash:us(ve),comCredit:us(L)}},[ge]),Fe=v.useMemo(()=>{const J={},D={};for(const U of ge){const ne=U._sales||[];for(const ve of ne){const L=(ve.vendorId||"").trim();if(!L)continue;const Ye=Ae[L]||ve.userEmail||L,ie=us(Number(ve.vendorCommissionAmount||0));ve.type==="CREDITO"?(D[L]||(D[L]={vendorId:L,name:Ye,total:0}),D[L].total=us(D[L].total+ie)):(J[L]||(J[L]={vendorId:L,name:Ye,total:0}),J[L].total=us(J[L].total+ie))}}return{cashRows:Object.values(J).filter(U=>U.total>0).sort((U,ne)=>ne.total-U.total),creditRows:Object.values(D).filter(U=>U.total>0).sort((U,ne)=>ne.total-U.total)}},[ge,Ae]),Pe=v.useMemo(()=>j.map(J=>({id:J.id,label:J.name||J.id})).sort((J,D)=>J.label.localeCompare(D.label)),[j]),F=v.useMemo(()=>x&&ge.find(J=>J.id===x.id)||null,[x,ge]),Q=v.useMemo(()=>F?F._sales||[]:[],[F]),H=v.useMemo(()=>{let J=0,D=0,U=0,ne=0;for(const ve of Q)ve.type==="CREDITO"?(D+=Number(ve.quantity||0),ne+=Number(ve.amount||0)):(J+=Number(ve.quantity||0),U+=Number(ve.amount||0));return{packsCash:t0(J),packsCredit:t0(D),amountCash:us(U),amountCredit:us(ne)}},[Q]),R=v.useMemo(()=>{const J={};for(const D of Q){const U=D.productName||"(sin nombre)";J[U]||(J[U]={productName:U,packsCash:0,packsCredit:0,amountCash:0,amountCredit:0,comCash:0,comCredit:0});const ne=Number(D.quantity||0),ve=Number(D.amount||0),L=Number(D.vendorCommissionAmount||0);D.type==="CREDITO"?(J[U].packsCredit=t0(J[U].packsCredit+ne),J[U].amountCredit=us(J[U].amountCredit+ve),J[U].comCredit=us(J[U].comCredit+L)):(J[U].packsCash=t0(J[U].packsCash+ne),J[U].amountCash=us(J[U].amountCash+ve),J[U].comCash=us(J[U].comCash+L))}return Object.values(J)},[Q]),z=async()=>{if(!P.current||!F)return;const J=P.current;J.classList.add("force-pdf-colors");try{const U=(await gg(J,{backgroundColor:"#ffffff"})).toDataURL("image/png"),ne=new Br;ne.addImage(U,"PNG",10,10,190,0),ne.save(`liquidacion_${F.date}.pdf`)}finally{J.classList.remove("force-pdf-colors")}};return o.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Liquidaciones"}),o.jsxs("form",{onSubmit:W,className:"flex flex-wrap items-end gap-3 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:J=>d(J.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:f,onChange:J=>h(J.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Vendedor"}),o.jsxs("select",{className:"border rounded px-2 py-1 min-w-[240px]",value:_,onChange:J=>S(J.target.value),children:[o.jsx("option",{value:"ALL",children:"Todos"}),Pe.map(J=>o.jsx("option",{value:J.id,children:J.label},J.id))]})]}),o.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Aplicar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3 mb-6",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),o.jsx("div",{className:"text-2xl font-bold",children:mA(ee.packsCash)})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),o.jsx("div",{className:"text-2xl font-bold",children:mA(ee.packsCredit)})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas totales"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",Qi(ee.totalSales)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",Qi(ee.amountCash)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",Qi(ee.amountCredit)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",Qi(ee.comCash)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",Qi(ee.comCredit)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin cash)"}),Fe.cashRows.length===0?o.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):o.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:Fe.cashRows.map(J=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"truncate",children:J.name}),o.jsxs("strong",{className:"ml-2",children:["C$",Qi(J.total)]})]},J.vendorId))})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin crdito)"}),Fe.creditRows.length===0?o.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):o.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:Fe.creditRows.map(J=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"truncate",children:J.name}),o.jsxs("strong",{className:"ml-2",children:["C$",Qi(J.total)]})]},J.vendorId))})]})]}),A?o.jsx("p",{children:"Cargando..."}):ge.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"Sin cierres en el rango seleccionado."}):o.jsxs("table",{className:"min-w-full text-sm mb-6 shadow-lg p-4 bg-white border-gray-100",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Fecha"}),o.jsx("th",{className:"border p-2",children:"Total paquetes Cash"}),o.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),o.jsx("th",{className:"border p-2",children:"Total Ventas cash"}),o.jsx("th",{className:"border p-2",children:"Total Ventas crdito"}),o.jsx("th",{className:"border p-2",children:"Comisin cash"}),o.jsx("th",{className:"border p-2",children:"Comisin crdito"}),o.jsx("th",{className:"border p-2",children:"Opciones"})]})}),o.jsx("tbody",{children:ge.map(J=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:J.date}),o.jsx("td",{className:"border p-1",children:mA(J._packsCash)}),o.jsx("td",{className:"border p-1",children:mA(J._packsCredit)}),o.jsxs("td",{className:"border p-1",children:["C$",Qi(J._amountCash)]}),o.jsxs("td",{className:"border p-1",children:["C$",Qi(J._amountCredit)]}),o.jsxs("td",{className:"border p-1",children:["C$",Qi(J._comCash)]}),o.jsxs("td",{className:"border p-1",children:["C$",Qi(J._comCredit)]}),o.jsx("td",{className:"border p-1",children:o.jsx("div",{className:"flex items-center gap-2 justify-center",children:o.jsx("button",{className:"text-xs bg-gray-800 text-white px-2 py-1 rounded hover:bg-black",onClick:()=>y(J),children:"Ver detalle"})})})]},J.id))})]}),F&&o.jsxs("div",{className:"mt-6 rounded-2xl shadow-lg p-4 bg-white border-solid border-2 border-gray-100",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2 ",children:[o.jsxs("h2",{className:"text-xl font-semibold",children:["Detalle ",F.date]}),o.jsx("button",{onClick:()=>y(null),className:"text-sm px-2 py-1 border rounded",children:"Cerrar"}),o.jsx("button",{onClick:z,className:"ml-auto bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Descargar PDF"})]}),o.jsxs("div",{ref:P,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[o.jsxs("div",{children:["Total Ventas cash:"," ",o.jsxs("strong",{children:["C$",Qi(H.amountCash)]})]}),o.jsxs("div",{children:["Total Ventas crdito:"," ",o.jsxs("strong",{children:["C$",Qi(H.amountCredit)]})]}),o.jsxs("div",{children:["Total paquetes cash:"," ",o.jsx("strong",{children:mA(H.packsCash)})]}),o.jsxs("div",{children:["Total paquetes crdito:"," ",o.jsx("strong",{children:mA(H.packsCredit)})]})]}),o.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),Q.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"Sin ventas en este cierre."}):o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Tipo"}),o.jsx("th",{className:"border p-2",children:"Paquetes"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Comisin"}),o.jsx("th",{className:"border p-2",children:"Fecha venta"})]})}),o.jsx("tbody",{children:Q.map((J,D)=>{const U=J.vendorId&&Ae[J.vendorId]?Ae[J.vendorId]:J.userEmail,ne=us(Number(J.vendorCommissionAmount||0));return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:U}),o.jsx("td",{className:"border p-1",children:J.productName}),o.jsx("td",{className:"border p-1",children:J.type==="CREDITO"?"Crdito":"Cash"}),o.jsx("td",{className:"border p-1",children:mA(J.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",Qi(J.amount)]}),o.jsx("td",{className:"border p-1",children:ne>0?`C$${Qi(ne)}`:""}),o.jsx("td",{className:"border p-1",children:J.date||""})]},D)})})]}),o.jsx("h3",{className:"font-semibold",children:"Consolidado por producto"}),R.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"Sin datos para consolidar."}):o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Total paquetes cash"}),o.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),o.jsx("th",{className:"border p-2",children:"Ventas cash"}),o.jsx("th",{className:"border p-2",children:"Ventas crdito"}),o.jsx("th",{className:"border p-2",children:"Comisin cash"}),o.jsx("th",{className:"border p-2",children:"Comisin crdito"})]})}),o.jsx("tbody",{children:R.map((J,D)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:J.productName}),o.jsx("td",{className:"border p-1",children:mA(J.packsCash)}),o.jsx("td",{className:"border p-1",children:mA(J.packsCredit)}),o.jsxs("td",{className:"border p-1",children:["C$",Qi(J.amountCash)]}),o.jsxs("td",{className:"border p-1",children:["C$",Qi(J.amountCredit)]}),o.jsxs("td",{className:"border p-1",children:["C$",Qi(J.comCash)]}),o.jsxs("td",{className:"border p-1",children:["C$",Qi(J.comCredit)]})]},D))})]})]})]}),b&&o.jsx("p",{className:"mt-3 text-sm",children:b})]})}const Ir=t=>Math.round((Number(t)||0)*100)/100,Lo=t=>Math.round((Number(t)||0)*1e3)/1e3,gr=t=>Number(t??0).toFixed(2),Is=t=>Number(t??0).toFixed(3),MS=t=>{const e=String(t||"").toUpperCase().trim();return e==="RIVAS"?"RIVAS":e==="SAN_JORGE"||e==="SANJORGE"||e==="SJ"?"SAN_JORGE":e==="ISLA"||e==="OMETEPE"?"ISLA":""},Er=t=>{const e=Number(t);return Number.isFinite(e)?e:0},a9e=t=>Math.max(0,Math.min(1,t));function E$({title:t,series:e,valuePrefix:r="C$"}){const u=e.map(b=>Number(b.value||0)),d=u.length?Math.min(...u):0,f=u.length?Math.max(...u):0,h=f-d||1,A=840,m=204,p=e.map((b,w)=>{const j=44+(e.length<=1?A/2:w/(e.length-1)*A),I=18+(1-(Number(b.value||0)-d)/h)*m;return{x:j,y:I,...b}}),g=p.map((b,w)=>`${w===0?"M":"L"} ${b.x.toFixed(2)} ${b.y.toFixed(2)}`).join(" "),x=p[p.length-1],y=x?x.value:0;return o.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[o.jsx("div",{className:"font-semibold text-sm sm:text-base",children:t}),o.jsxs("div",{className:"text-xs text-gray-600 whitespace-nowrap",children:["ltimo: ",o.jsx("strong",{children:r+gr(y)})]})]}),o.jsx("div",{className:"w-full overflow-x-auto",children:o.jsxs("svg",{viewBox:"0 0 900 260",className:"min-w-[720px] w-full h-auto",role:"img","aria-label":t,children:[[0,1,2,3].map(b=>{const w=18+b/3*m;return o.jsx("line",{x1:44,y1:w,x2:884,y2:w,stroke:"#e5e7eb",strokeWidth:"1"},b)}),o.jsxs("text",{x:8,y:28,fontSize:"12",fill:"#6b7280",children:[r,gr(f)]}),o.jsxs("text",{x:8,y:18+m,fontSize:"12",fill:"#6b7280",children:[r,gr(d)]}),o.jsx("path",{d:g,fill:"none",stroke:"#111827",strokeWidth:"2.5"}),p.map((b,w)=>o.jsx("circle",{cx:b.x,cy:b.y,r:"3.5",fill:"#111827"},w)),e.length>0&&o.jsxs(o.Fragment,{children:[o.jsx("text",{x:44,y:246,fontSize:"12",fill:"#6b7280",textAnchor:"start",children:e[0].label}),o.jsx("text",{x:884,y:246,fontSize:"12",fill:"#6b7280",textAnchor:"end",children:e[e.length-1].label})]})]})})]})}function s9e({title:t,items:e}){const r=e.reduce((f,h)=>f+Number(h.value||0),0),n=240,a=86,s=120,i=120,l=r>0?r:1;let c=0;const u=["#111827","#374151","#6b7280","#9ca3af"],d=e.map((f,h)=>{const A=Math.max(0,Number(f.value||0)),m=c/l,p=A/l;c+=A;const g=m+p,x=m*Math.PI*2-Math.PI/2,y=g*Math.PI*2-Math.PI/2,b=s+a*Math.cos(x),w=i+a*Math.sin(x),j=s+a*Math.cos(y),I=i+a*Math.sin(y),_=p>.5?1:0;return{d:[`M ${s} ${i}`,`L ${b.toFixed(2)} ${w.toFixed(2)}`,`A ${a} ${a} 0 ${_} 1 ${j.toFixed(2)} ${I.toFixed(2)}`,"Z"].join(" "),fill:u[h%u.length],...f,frac:p}});return o.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[o.jsx("div",{className:"font-semibold text-sm sm:text-base mb-2",children:t}),o.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-center",children:[o.jsx("div",{className:"w-full md:w-auto overflow-x-auto",children:o.jsxs("svg",{viewBox:`0 0 ${n} ${n}`,className:"min-w-[240px] w-[260px] h-auto",role:"img","aria-label":t,children:[d.map((f,h)=>o.jsx("path",{d:f.d,fill:f.fill},h)),o.jsx("circle",{cx:s,cy:i,r:"48",fill:"#ffffff"}),o.jsx("text",{x:s,y:i-4,textAnchor:"middle",fontSize:"12",fill:"#6b7280",children:"Total"}),o.jsxs("text",{x:s,y:i+16,textAnchor:"middle",fontSize:"14",fill:"#111827",fontWeight:"700",children:["C$",gr(r)]})]})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:e.map((f,h)=>{const A=Number(f.value||0),m=a9e(A/(r||1))*100;return o.jsxs("div",{className:"border rounded-xl p-2 bg-gray-50",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("div",{className:"text-sm font-semibold truncate",children:f.label}),o.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",gr(A)]})]}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[m.toFixed(1),"%"]}),o.jsx("div",{className:"h-2 bg-white border rounded-full mt-2 overflow-hidden",children:o.jsx("div",{className:"h-full",style:{width:`${m}%`,background:u[h%u.length]}})})]},f.label)})}),o.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"*Distribucin basada en ventas del perodo con los filtros actuales."})]})]})]})}const i9e=(t,e)=>{var g;const r=t.date??((g=t.timestamp)!=null&&g.toDate?br(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=String(t.processedDate??t.closureDate??"").trim(),a=t.status??"FLOTANTE",s=t.type||"CONTADO",i=String(t.vendorId??"").trim(),l=String(t.vendorName??"").trim()||String(t.userEmail??"").trim()||i||"(sin vendedor)",c=String(t.customerId??"").trim(),u=String(t.customerName??"").trim()||String(t.clientName??"").trim()||"",d=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,f=Number(t.vendorCommissionAmount??0)||0,h=MS(t.branch??t.vendorBranch);if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((x,y)=>{const b=Number((x==null?void 0:x.packages)??0)||0,w=Number((x==null?void 0:x.total)??0)||Math.max(0,Number((x==null?void 0:x.unitPricePackage)||0)*b-Number((x==null?void 0:x.discount)||0)),j=MS(x==null?void 0:x.branch)||h;let I=0;return f>0&&d>0&&w>0&&(I=Ir(f*w/d)),{id:`${e}#${y}`,docId:e,productId:String((x==null?void 0:x.productId)??""),productName:String((x==null?void 0:x.productName)??"(sin nombre)"),date:r,processedDate:n,status:a,type:s,vendorId:i,vendorName:l,customerId:c,customerName:u,branch:j||"",packages:b,amount:Ir(w),commission:Ir(I)}});const A=Number(t.packagesTotal??0)||0,m=Number(t.total??t.amount??t.amountCharged??0)||0,p=Ir(Number(t.vendorCommissionAmount??0)||0);return[{id:`${e}#0`,docId:e,productId:"",productName:"(sin nombre)",date:r,processedDate:n,status:a,type:s,vendorId:i,vendorName:l,customerId:c,customerName:u,branch:h||"",packages:A,amount:Ir(m),commission:Ir(p)}]};function o9e({role:t,roles:e}){var bt;const r=e&&e.length?e:t,n=!r||zr(r,"admin"),a=br(new Date,"yyyy-MM-dd"),[s,i]=v.useState(a),[l,c]=v.useState(a),[u,d]=v.useState("TODAS"),[f,h]=v.useState("AMBAS"),[A,m]=v.useState("ALL"),[p,g]=v.useState("ALL"),[x,y]=v.useState(""),[b,w]=v.useState(""),[j,I]=v.useState(""),[_,S]=v.useState(""),[E,k]=v.useState("DIA"),[P,T]=v.useState(!0),[O,W]=v.useState(""),[Ae,de]=v.useState([]),[fe,ge]=v.useState([]),[ee,Fe]=v.useState([]),[Pe,F]=v.useState([]),[Q,H]=v.useState([]),[R,z]=v.useState([]),[J,D]=v.useState([]),[U,ne]=v.useState([]),[ve,L]=v.useState([]),[Ye,ie]=v.useState(""),[Z,Oe]=v.useState(""),le=v.useRef(null),[se,Be]=v.useState([]),[je,ot]=v.useState("DETALLE"),mt=v.useMemo(()=>{const G={};return Q.forEach(te=>G[te.id]=String(te.name||"").trim()),G},[Q]),ut=v.useMemo(()=>{const G={};return fe.forEach(te=>G[te.id]=te),G},[fe]),_e=G=>{const te=G.customerId?mt[G.customerId]:"";return(G.customerName||te||"").trim()||(G.customerId?mt[G.customerId]||G.customerId:"")||""};v.useEffect(()=>{if(!n)return;(async()=>{try{const te=await Lt(pt(Ge,"inventory_candies")),He=[];te.forEach(re=>He.push({id:re.id,...re.data()})),Be(He)}catch(te){console.error("inventory_candies all error:",te),Be([])}})()},[n]),v.useEffect(()=>{(async()=>{try{const te=await Lt(pt(Ge,"sellers_candies")),He=[];te.forEach(be=>{const Me=be.data();He.push({id:be.id,name:String(Me.name||"").trim(),commissionPercent:Number(Me.commissionPercent||0),branch:Me.branch||""})});const re=new Map;He.forEach(be=>re.set(be.id,be)),ge(Array.from(re.values()).sort((be,Me)=>be.name.localeCompare(Me.name)))}catch(te){console.error(te)}})()},[]),v.useEffect(()=>{if(!n||!s||!l)return;T(!0),W("");const G=tr(pt(Ge,"sales_candies"),sr("date",">=",s),sr("date","<=",l),ln("date","asc")),te=qd(G,He=>{const re=[];He.forEach(be=>re.push(...i9e(be.data(),be.id))),de(re),T(!1)},He=>{console.error("sales_candies periodo error:",He),de([]),T(!1),W(" Error cargando ventas del perodo (revis ndices si aplica).")});return()=>te()},[n,s,l]),v.useEffect(()=>{if(!n)return;(async()=>{try{const te=tr(pt(Ge,"candy_main_orders"),sr("date",">=",s),sr("date","<=",l)),He=await Lt(te),re=[];He.forEach(be=>re.push({id:be.id,...be.data()})),Fe(re)}catch(te){console.error("candy_main_orders error:",te),Fe([])}})()},[n,s,l]),v.useEffect(()=>{if(!n)return;(async()=>{try{const te=tr(pt(Ge,"inventory_candies_sellers"),sr("date",">=",s),sr("date","<=",l)),He=await Lt(te),re=[];He.forEach(be=>re.push({id:be.id,...be.data()})),F(re)}catch(te){console.error("inventory_candies_sellers error:",te),F([])}})()},[n,s,l]),v.useEffect(()=>{if(!n)return;(async()=>{try{const te=tr(pt(Ge,"expenses_candies"),sr("date",">=",s),sr("date","<=",l),ln("date","asc")),He=await Lt(te),re=[];He.forEach(be=>re.push({id:be.id,...be.data()})),D(re)}catch(te){console.warn("expenses_candies sin ndice, usando fallback:",te);try{const He=await Lt(pt(Ge,"expenses_candies")),re=[];He.forEach(be=>re.push({id:be.id,...be.data()})),D(re.filter(be=>String(be.date||"")>=s&&String(be.date||"")<=l))}catch(He){console.error(He),D([])}}})()},[n,s,l]),v.useEffect(()=>{if(!n)return;(async()=>{try{const te=await Lt(pt(Ge,"inventory_candies")),He=[];te.forEach(re=>He.push({id:re.id,...re.data()})),ne(He)}catch(te){console.error("inventory_candies global error:",te),ne([])}})()},[n]),v.useEffect(()=>{if(!n)return;(async()=>{try{const te=await Lt(pt(Ge,"inventory_candies_sellers")),He=[];te.forEach(re=>He.push({id:re.id,...re.data()})),L(He)}catch(te){console.error("inventory_candies_sellers global error:",te),L([])}})()},[n]),v.useEffect(()=>{if(!n)return;const G=tr(pt(Ge,"customers_candies")),te=qd(G,He=>{const re=[];He.forEach(be=>{var Me;return re.push({id:be.id,name:String(((Me=be.data())==null?void 0:Me.name)||"").trim()})}),H(re)},He=>{console.error("customers_candies snapshot error:",He),H([])});return()=>te()},[n]),v.useEffect(()=>{if(!n)return;(async()=>{try{const te=tr(pt(Ge,"ar_movements"),sr("date","<=",l),ln("date","asc")),He=await Lt(te),re=[];He.forEach(be=>re.push({id:be.id,...be.data()})),z(re)}catch(te){console.warn("ar_movements sin ndice, usando fallback:",te);try{const He=await Lt(pt(Ge,"ar_movements")),re=[];He.forEach(be=>re.push({id:be.id,...be.data()})),z(re.filter(be=>String(be.date||"")<=l))}catch(He){console.error(He),z([])}}})()},[n,l]);const rt=v.useMemo(()=>{let G=[...Ae];if(u!=="TODAS"&&(G=G.filter(re=>re.status===u)),f==="CASH"&&(G=G.filter(re=>re.type==="CONTADO")),f==="CREDITO"&&(G=G.filter(re=>re.type==="CREDITO")),A!=="ALL"&&(G=G.filter(re=>(re.vendorId||"")===A)),p!=="ALL"&&(G=G.filter(re=>re.branch===p)),x.trim()){const re=x.trim().toLowerCase();G=G.filter(be=>(be.productName||"").toLowerCase().includes(re))}if(b.trim()){const re=b.trim().toLowerCase();G=G.filter(be=>(_e(be)||"").toLowerCase().includes(re))}const te=j.trim()?Number(j):null,He=_.trim()?Number(_):null;return te!==null&&!Number.isNaN(te)&&(G=G.filter(re=>(re.amount||0)>=te)),He!==null&&!Number.isNaN(He)&&(G=G.filter(re=>(re.amount||0)<=He)),G},[Ae,u,f,A,p,x,b,j,_,mt]),we=v.useMemo(()=>{let G=0,te=0,He=0,re=0,be=0,Me=0;for(const lt of rt){const ae=Er(lt.packages),V=Er(lt.amount),X=Er(lt.commission);lt.type==="CREDITO"?(te+=ae,re+=V,Me+=X):(G+=ae,He+=V,be+=X)}const tt=Ir(He+re);return{packsCash:Lo(G),packsCredit:Lo(te),salesCash:Ir(He),salesCredit:Ir(re),salesTotal:tt,commCash:Ir(be),commCredit:Ir(Me),commTotal:Ir(be+Me)}},[rt]),Ce=v.useMemo(()=>{let G=0,te=0,He=0,re=0,be=0,Me=0;for(const tt of ee){const lt=Array.isArray(tt.items)?tt.items:[];for(const ae of lt)G+=Er(ae.totalRivas),te+=Er(ae.totalSanJorge),He+=Er(ae.totalIsla),re+=Er(ae.gainRivas),be+=Er(ae.gainSanJorge),Me+=Er(ae.gainIsla)}return{expectedRivas:Ir(G),expectedSanJorge:Ir(te),expectedIsla:Ir(He),grossRivas:Ir(re),grossSanJorge:Ir(be),grossIsla:Ir(Me),grossTotal:Ir(re+be+Me),expectedTotal:Ir(G+te+He)}},[ee]),Ue=v.useMemo(()=>{const G={RIVAS:{sales:0,packages:0},SAN_JORGE:{sales:0,packages:0},ISLA:{sales:0,packages:0}};for(const te of rt){const He=te.branch;He&&(G[He].sales+=Er(te.amount),G[He].packages+=Er(te.packages))}return{RIVAS:{sales:Ir(G.RIVAS.sales),packages:Lo(G.RIVAS.packages)},SAN_JORGE:{sales:Ir(G.SAN_JORGE.sales),packages:Lo(G.SAN_JORGE.packages)},ISLA:{sales:Ir(G.ISLA.sales),packages:Lo(G.ISLA.packages)}}},[rt]),Ve=v.useMemo(()=>({RIVAS:Ir(Ue.RIVAS.sales-Ce.expectedRivas),SAN_JORGE:Ir(Ue.SAN_JORGE.sales-Ce.expectedSanJorge),ISLA:Ir(Ue.ISLA.sales-Ce.expectedIsla)}),[Ue,Ce]),ue=v.useMemo(()=>{const G={},te={};for(const be of rt){const Me=(be.vendorId||"").trim();if(!Me)continue;const tt=fe.find(V=>V.id===Me),lt=(tt==null?void 0:tt.name)||be.vendorName||"(sin vendedor)",ae=Er(be.commission);be.type==="CREDITO"?(te[Me]||(te[Me]={vendorId:Me,name:lt,total:0}),te[Me].total=Ir(te[Me].total+ae)):(G[Me]||(G[Me]={vendorId:Me,name:lt,total:0}),G[Me].total=Ir(G[Me].total+ae))}const He=Object.values(G).sort((be,Me)=>Me.total-be.total),re=Object.values(te).sort((be,Me)=>Me.total-be.total);return{cashArr:He,creditArr:re}},[rt,fe]),ce=v.useMemo(()=>{const G=(Y,pe)=>Y.reduce((ke,Re)=>ke+Number((Re==null?void 0:Re[pe])??0),0),te=Y=>{const pe=Number(Y);return Number.isFinite(pe)?Math.floor(pe):0},He=Y=>{const pe=Number((Y==null?void 0:Y.totalPackages)??0);if(pe>0)return pe;const ke=Array.isArray(Y==null?void 0:Y.items)?Y.items:[];return G(ke,"packages")};let re=0,be=0;for(const Y of ee){const pe=Array.isArray(Y.items)?Y.items:[];if(pe.length)for(const ke of pe)re+=Number((ke==null?void 0:ke.subtotal)??0);else re+=Number(Y.subtotal??0);be+=He(Y)}let Me=0,tt=0,lt=0;const ae=Y=>{const pe=Number(Y==null?void 0:Y.remainingPackages);if(Number.isFinite(pe)&&pe>0)return Math.floor(pe);const ke=Math.max(1,te((Y==null?void 0:Y.unitsPerPackage)??1)),Re=te((Y==null?void 0:Y.remainingUnits)??(Y==null?void 0:Y.remaining)??0);return Re>0?Math.max(0,Math.floor(Re/ke)):0};for(const Y of Pe)Me+=Number(Y.subtotal??0),tt+=Number(Y.packages??0),lt+=ae(Y);const V=new Set(ee.filter(Y=>String(Y.date||"")>=s&&String(Y.date||"")<=l).map(Y=>Y.id));let X=0;for(const Y of se){const pe=String(Y.orderId||"").trim();pe&&V.has(pe)&&(X+=Number(Y.remainingPackages??0))}const me=U.reduce((Y,pe)=>Y+Er(pe.remainingPackages),0),Ie=ve.reduce((Y,pe)=>Y+Er(pe.remainingPackages),0);return{providerTotalMaster:Ir(re),providerTotalVendor:Ir(Me),orderedPacksMaster:Lo(be),remainingPacksMaster:Lo(X),orderedPacksVendor:Lo(tt),remainingPacksVendor:Lo(lt),globalRemainingMaster:Lo(me),globalRemainingVendor:Lo(Ie)}},[ee,Pe,se,s,l,U,ve]),Te=v.useMemo(()=>{const G={};let te=0;for(const He of J){const re=String(He.date||"").trim();if(!re)continue;const be=Math.max(0,Er(He.amount));te+=be,G[re]=Ir((G[re]||0)+be)}return{total:Ir(te),byDay:G}},[J]),Xe=v.useMemo(()=>{let G=0;for(const te of ee){const He=Array.isArray(te.items)?te.items:[];if(He.length)for(const re of He)G+=Er(re==null?void 0:re.subtotal);else G+=Er(te.subtotal)}return Ir(G)},[ee]),ft=v.useMemo(()=>{let G=0,te=0;for(const re of Pe){const be=String(re.sellerId||"").trim(),Me=be?ut[be]:void 0,tt=MS(Me==null?void 0:Me.branch)||"ISLA",lt=Er(re.totalVendor)||Er(tt==="ISLA"?re.totalIsla:tt==="RIVAS"?re.totalRivas:re.totalSanJorge);G+=lt,tt==="ISLA"&&(te+=lt)}const He=Ir(Er(Ce.expectedIsla)-te);return{dispersedTotal:Ir(G),dispersedIsla:Ir(te),totalExistenteIsla:He}},[Pe,ut,Ce.expectedIsla]),gt=v.useMemo(()=>{var lt,ae;const G=V=>{const X=Math.max(1,Math.floor(Er(V.unitsPerPackage||1))),me=Er(V.totalUnits)>0?Er(V.totalUnits):Er(V.packages)*X;let Ie=0;Er(V.remainingUnits)>0?Ie=Er(V.remainingUnits):Er(V.remainingPackages)>0?Ie=Er(V.remainingPackages)*X:Ie=0;const Y=Math.max(0,me-Ie);return{orderedUnits:me,remainingUnits:Ie,soldUnits:Y,upp:X}},te=V=>{const X=ut[V];return MS(X==null?void 0:X.branch)},He=(V,X)=>{const me=Er(V.totalVendor)||(X==="ISLA"?Er(V.totalIsla):X==="RIVAS"?Er(V.totalRivas):X==="SAN_JORGE"?Er(V.totalSanJorge):0);if(me>0)return me;const Ie=Er(V.unitPriceVendor);if(Ie>0){const{orderedUnits:Y}=G(V);return Ie*Y}return 0},re=(V,X)=>{const me=Er(V.unitPriceVendor);if(me>0)return me;const Ie=He(V,X),{orderedUnits:Y}=G(V);return Ie>0&&Y>0?Ie/Y:0},be=new Map;for(const V of Pe){const X=String(V.orderId||"").trim(),me=X||`DOC:${V.id}`,Ie=String(V.sellerId||"").trim(),Y=String(V.sellerName||"").trim()||Ie&&((lt=ut[Ie])==null?void 0:lt.name)||""||"(sin vendedor)",pe=String(V.date||"").trim(),ke=Ie?te(Ie):"",{orderedUnits:Re,remainingUnits:Ze,soldUnits:nt}=G(V),_t=He(V,ke),Ct=re(V,ke),Nt=Ct>0?Ct*nt:Re>0?_t*nt/Re:0,Tt=Ct>0?Ct*Ze:Re>0?_t*Ze/Re:0;be.has(me)||be.set(me,{orderKey:me,orderId:X||me,date:pe,sellerId:Ie,sellerName:Y,branch:ke,totalOrden:0,vendido:0,restante:0,comision:0,totalEsperado:0,lines:[]});const St=be.get(me);St.lines.push({...V,orderedUnits:Re,soldUnits:nt,remainingUnits:Ze,lineTotal:Ir(_t),lineSoldValue:Ir(Nt),lineRemainingValue:Ir(Tt)}),St.totalOrden+=_t,St.vendido+=Nt,St.restante+=Tt}for(const V of be.values()){const X=V.sellerId?Er((ae=ut[V.sellerId])==null?void 0:ae.commissionPercent):0;V.comision=Ir(V.totalOrden*X/100),V.totalEsperado=Ir(V.totalOrden-V.comision),V.totalOrden=Ir(V.totalOrden),V.vendido=Ir(V.vendido),V.restante=Ir(V.restante)}const Me=Array.from(be.values()).sort((V,X)=>V.date&&X.date?V.date<X.date?1:-1:X.totalOrden-V.totalOrden),tt=Me.reduce((V,X)=>(V.totalOrden+=Er(X.totalOrden),V.vendido+=Er(X.vendido),V.restante+=Er(X.restante),V.comision+=Er(X.comision),V.totalEsperado+=Er(X.totalEsperado),V),{totalOrden:0,vendido:0,restante:0,comision:0,totalEsperado:0});return{global:{totalOrden:Ir(tt.totalOrden),vendido:Ir(tt.vendido),restante:Ir(tt.restante),comision:Ir(tt.comision),totalEsperado:Ir(tt.totalEsperado)},orders:Me}},[Pe,ut]),vt=v.useMemo(()=>{if(!Z)return null;const G=gt.orders.find(re=>re.orderKey===Z);if(!G)return null;const te={};for(const re of G.lines){const be=String(re.productName||"(sin nombre)");te[be]||(te[be]={productName:be,asociados:0,vendidos:0,restantes:0}),te[be].asociados+=Er(re.orderedUnits),te[be].vendidos+=Er(re.soldUnits),te[be].restantes+=Er(re.remainingUnits)}const He=Object.values(te).map(re=>({...re,asociados:Math.floor(re.asociados),vendidos:Math.floor(re.vendidos),restantes:Math.floor(re.restantes)})).sort((re,be)=>be.asociados-re.asociados);return{...G,products:He}},[Z,gt.orders]),At=v.useMemo(()=>{const G=U.reduce((He,re)=>He+Er(re.remainingPackages),0),te=ve.reduce((He,re)=>He+Er(re.remainingPackages),0);return{masterRemainingPackages:Lo(G),vendorRemainingPackages:Lo(te)}},[U,ve]),ye=v.useMemo(()=>{const G=new Map,te=re=>E==="DIA"?{key:re.date,label:re.date}:E==="VENDEDOR"?{key:re.vendorId||"",label:re.vendorName||""}:E==="PRODUCTO"?{key:re.productName||"",label:re.productName||""}:{key:re.branch||"",label:re.branch||""};for(const re of rt){const{key:be,label:Me}=te(re);G.has(be)||G.set(be,{key:be,label:Me,packsCash:0,packsCredit:0,salesCash:0,salesCredit:0,commCash:0,commCredit:0,rows:[]});const tt=G.get(be);tt.rows.push(re),re.type==="CREDITO"?(tt.packsCredit+=Er(re.packages),tt.salesCredit+=Er(re.amount),tt.commCredit+=Er(re.commission)):(tt.packsCash+=Er(re.packages),tt.salesCash+=Er(re.amount),tt.commCash+=Er(re.commission))}const He=Array.from(G.values()).map(re=>({...re,packsCash:Lo(re.packsCash),packsCredit:Lo(re.packsCredit),salesCash:Ir(re.salesCash),salesCredit:Ir(re.salesCredit),commCash:Ir(re.commCash),commCredit:Ir(re.commCredit)}));return E==="DIA"?He.sort((re,be)=>re.key<be.key?1:-1):He.sort((re,be)=>be.salesCash+be.salesCredit-(re.salesCash+re.salesCredit)),He},[rt,E]),$e=v.useMemo(()=>{if(!Ye)return[];const G=ye.find(te=>te.key===Ye);return(G==null?void 0:G.rows)||[]},[Ye,ye]),Ne=v.useMemo(()=>{const G={};for(const te of $e){const He=te.productName||"(sin nombre)";G[He]||(G[He]={productName:He,packsCash:0,packsCredit:0,salesCash:0,salesCredit:0,commCash:0,commCredit:0}),te.type==="CREDITO"?(G[He].packsCredit+=Er(te.packages),G[He].salesCredit+=Er(te.amount),G[He].commCredit+=Er(te.commission)):(G[He].packsCash+=Er(te.packages),G[He].salesCash+=Er(te.amount),G[He].commCash+=Er(te.commission))}return Object.values(G).map(te=>({...te,packsCash:Lo(te.packsCash),packsCredit:Lo(te.packsCredit),salesCash:Ir(te.salesCash),salesCredit:Ir(te.salesCredit),commCash:Ir(te.commCash),commCredit:Ir(te.commCredit)})).sort((te,He)=>He.salesCash+He.salesCredit-(te.salesCash+te.salesCredit))},[$e]),ct=v.useMemo(()=>{const G={},te=be=>(mt[be]||"").trim()||be;for(const be of R){const Me=String(be.customerId||"").trim();if(!Me)continue;const tt=String(be.date||"");if(tt&&tt>l)continue;G[Me]||(G[Me]={customerId:Me,name:te(Me),balance:0,lastPayment:""});const lt=Er(be.amount);be.type==="CARGO"&&(G[Me].balance+=lt),be.type==="ABONO"&&(G[Me].balance-=lt,(!G[Me].lastPayment||tt>G[Me].lastPayment)&&(G[Me].lastPayment=tt))}const He=Object.values(G).map(be=>({...be,balance:Ir(be.balance)})).filter(be=>be.balance>0).sort((be,Me)=>Me.balance-be.balance),re=Ir(He.reduce((be,Me)=>be+Me.balance,0));return{count:He.length,totalPending:re,list:He.slice(0,20)}},[R,mt,l]),xe=v.useMemo(()=>{const G=Ir(we.salesTotal),te=Ir(we.commTotal),He=Ir(Te.total),re=Ir(G-te-He),be=new Set;for(const X of rt)X.date&&be.add(X.date);const Me=Math.max(1,be.size),tt=Ir(G/Me),lt=Ir(te/Me),ae=Ir(He/Me),V=Ir(re/Me);return{ingreso:G,comision:te,gastos:He,gananciaNeta:re,daysCount:Me,ingresoDia:tt,comisionDia:lt,gastosDia:ae,netaDia:V}},[we,Te.total,rt]),Qe=v.useMemo(()=>{const G={};for(const be of rt){const Me=be.date;Me&&(G[Me]||(G[Me]={date:Me,ingreso:0,comision:0}),G[Me].ingreso+=Er(be.amount),G[Me].comision+=Er(be.commission))}const te=Object.keys(G).sort((be,Me)=>be<Me?-1:1),He=te.map(be=>({label:be.slice(5),value:Ir(G[be].ingreso)})),re=te.map(be=>{var V,X;const Me=Er((V=G[be])==null?void 0:V.ingreso),tt=Er((X=G[be])==null?void 0:X.comision),lt=Er(Te.byDay[be]||0),ae=Me-tt-lt;return{label:be.slice(5),value:Ir(ae)}});return{seriesIngreso:He,seriesNeta:re,datesCount:te.length}},[rt,Te.byDay]),dt=v.useMemo(()=>[{label:"Rivas",value:Er(Ue.RIVAS.sales)},{label:"San Jorge",value:Er(Ue.SAN_JORGE.sales)},{label:"Isla",value:Er(Ue.ISLA.sales)}].map(G=>({...G,value:Ir(G.value)})),[Ue]),Bt=async()=>{if(le.current){le.current.classList.add("force-pdf-colors");try{const te=(await gg(le.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),He=new Br;He.addImage(te,"PNG",10,10,190,0),He.save(`data_center_dulces_${s}_a_${l}.pdf`)}finally{le.current.classList.remove("force-pdf-colors")}}},qe=()=>{const te=[["date","processedDate","status","type","vendorId","vendorName","branch","productName","packages","amount","commission","customerId","customerName"].join(","),...rt.map(Me=>[Me.date,Me.processedDate||"",Me.status,Me.type,Me.vendorId,`"${String(Me.vendorName||"").replace(/"/g,'""')}"`,Me.branch||"",`"${String(Me.productName||"").replace(/"/g,'""')}"`,Is(Me.packages),gr(Me.amount),gr(Me.commission),Me.customerId||"",`"${String(_e(Me)||"").replace(/"/g,'""')}"`].join(","))],He=new Blob([te.join(`
`)],{type:"text/csv;charset=utf-8;"}),re=URL.createObjectURL(He),be=document.createElement("a");be.href=re,be.download=`data_center_dulces_${s}_a_${l}.csv`,be.click(),URL.revokeObjectURL(re)};return n?o.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 md:px-0",children:o.jsxs("div",{className:"bg-white p-3 sm:p-4 md:p-6 rounded-2xl shadow-2xl",children:[o.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between mb-4",children:[o.jsx("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:"Data Center - Dulces"}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center sm:justify-end",children:[o.jsx("button",{onClick:Bt,className:`\r
                inline-flex items-center justify-center gap-2\r
                w-full sm:w-auto\r
                px-3 py-2 text-sm font-semibold\r
                rounded-lg md:rounded-md\r
                bg-green-600 text-white hover:bg-green-700 transition-colors\r
              `,children:"Exportar PDF"}),o.jsx("button",{onClick:qe,className:`\r
                inline-flex items-center justify-center gap-2\r
                w-full sm:w-auto\r
                px-3 py-2 text-sm font-semibold\r
                rounded-lg md:rounded-md\r
                bg-gray-800 text-white hover:bg-black transition-colors\r
              `,children:"Exportar CSV"})]})]}),o.jsx("div",{className:"rounded-2xl border border-gray-100 p-3 sm:p-4 mb-3 shadow-sm bg-white",children:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded-lg px-3 py-2 w-full text-sm",value:s,onChange:G=>i(G.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded-lg px-3 py-2 w-full text-sm",value:l,onChange:G=>c(G.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Estado"}),o.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:u,onChange:G=>d(G.target.value),children:[o.jsx("option",{value:"TODAS",children:"Todas"}),o.jsx("option",{value:"FLOTANTE",children:"Flotante"}),o.jsx("option",{value:"PROCESADA",children:"Procesada"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Tipo"}),o.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:f,onChange:G=>h(G.target.value),children:[o.jsx("option",{value:"AMBAS",children:"Ambas"}),o.jsx("option",{value:"CASH",children:"Cash"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Vendedor"}),o.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:A,onChange:G=>m(G.target.value),children:[o.jsx("option",{value:"ALL",children:"Todos"}),fe.map(G=>o.jsx("option",{value:G.id,children:G.name||G.id},G.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Sucursal"}),o.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:p,onChange:G=>g(G.target.value),children:[o.jsx("option",{value:"ALL",children:"Todas"}),o.jsx("option",{value:"RIVAS",children:"Rivas"}),o.jsx("option",{value:"SAN_JORGE",children:"San Jorge"}),o.jsx("option",{value:"ISLA",children:"Isla"})]})]}),o.jsxs("div",{className:"sm:col-span-2 lg:col-span-3",children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Producto (opcional)"}),o.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:x,onChange:G=>y(G.target.value),placeholder:"Ej: Conitos"})]}),o.jsxs("div",{className:"sm:col-span-2 lg:col-span-3",children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Cliente (opcional)"}),o.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:b,onChange:G=>w(G.target.value),placeholder:"Ej: Javier"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Monto min"}),o.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:j,onChange:G=>I(G.target.value),placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Monto max"}),o.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:_,onChange:G=>S(G.target.value),placeholder:"999999"})]}),o.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Agrupar por"}),o.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:E,onChange:G=>{ie(""),k(G.target.value)},children:[o.jsx("option",{value:"DIA",children:"Da"}),o.jsx("option",{value:"VENDEDOR",children:"Vendedor"}),o.jsx("option",{value:"PRODUCTO",children:"Producto"}),o.jsx("option",{value:"SUCURSAL",children:"Sucursal"})]})]})]})}),o.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between mb-4",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>{Oe(""),ot("MACRO")},className:["px-3 py-2 rounded-full text-sm font-semibold border transition-colors",je==="MACRO"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50"].join(" "),children:"Data Macro"}),o.jsx("button",{onClick:()=>{Oe(""),ot("DETALLE")},className:["px-3 py-2 rounded-full text-sm font-semibold border transition-colors",je==="DETALLE"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50"].join(" "),children:"Data Detalle"})]}),o.jsxs("div",{className:"text-xs text-gray-600",children:["Gastos del perodo (expenses_candies):"," ",o.jsxs("strong",{children:["C$",gr(Te.total)]})]})]}),o.jsxs("div",{ref:le,children:[je==="MACRO"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ingreso (ventas)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",gr(xe.ingreso)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin vendedor"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["-C$",gr(xe.comision)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",gr(we.commCash),"  Crdito: C$",gr(we.commCredit)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Gastos (expenses_candies)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["-C$",gr(xe.gastos)]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se calcula automtico por fechas"})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia neta (real)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",gr(xe.gananciaNeta)]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Ingreso  Comisin  Gastos"})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Promedio neto por da"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",gr(xe.netaDia)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Das con ventas: ",o.jsx("strong",{children:xe.daysCount})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mb-3",children:[o.jsx(E$,{title:"Ventas por da (Ingreso)",series:Qe.seriesIngreso,valuePrefix:"C$"}),o.jsx(E$,{title:"Ganancia neta por da (real)",series:Qe.seriesNeta,valuePrefix:"C$"})]}),o.jsx("div",{className:"mb-6",children:o.jsx(s9e,{title:"Distribucin de ventas por sucursal",items:dt})})]}),je==="DETALLE"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:Is(we.packsCash)}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:Is(we.packsCredit)}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas totales"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",gr(we.salesTotal)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",gr(we.salesCash),"  Crdito: C$",gr(we.salesCredit)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",gr(we.commTotal)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",gr(we.commCash),"  Crdito: C$",gr(we.commCredit)]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Gross Profit total (rdenes maestras)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",gr(Ce.grossTotal)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["R: ",gr(Ce.grossRivas),"  SJ:"," ",gr(Ce.grossSanJorge),"  I:"," ",gr(Ce.grossIsla)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total esperado (por sucursal)"}),o.jsxs("div",{className:"text-sm mt-2 space-y-1",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Rivas"}),o.jsxs("strong",{children:["C$",gr(Ce.expectedRivas)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"San Jorge"}),o.jsxs("strong",{children:["C$",gr(Ce.expectedSanJorge)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Isla"}),o.jsxs("strong",{children:["C$",gr(Ce.expectedIsla)]})]})]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Actual ventas por sucursal"}),o.jsxs("div",{className:"text-sm mt-2 space-y-1",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Rivas"}),o.jsxs("strong",{children:["C$",gr(Ue.RIVAS.sales)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"San Jorge"}),o.jsxs("strong",{children:["C$",gr(Ue.SAN_JORGE.sales)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Isla"}),o.jsxs("strong",{children:["C$",gr(Ue.ISLA.sales)]})]})]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Diferencia vs esperado"}),o.jsxs("div",{className:"text-sm mt-2 space-y-1",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Rivas"}),o.jsxs("strong",{children:["C$",gr(Ve.RIVAS)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"San Jorge"}),o.jsxs("strong",{children:["C$",gr(Ve.SAN_JORGE)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Isla"}),o.jsxs("strong",{children:["C$",gr(Ve.ISLA)]})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado a precio proveedor (rdenes vendedor)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",gr(ce.providerTotalVendor)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes ordenados (maestras)"}),o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:Is(ce.orderedPacksMaster)}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Restantes (perodo):"," ",o.jsx("strong",{children:Is(ce.remainingPacksMaster)})]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Existencia global (todas):"," ",o.jsx("strong",{children:Is(At.masterRemainingPackages)})]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes ordenados (rdenes vendedor)"}),o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:Is(ce.orderedPacksVendor)}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Restantes (perodo):"," ",o.jsx("strong",{children:Is(ce.remainingPacksVendor)})]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Existencia global (todas):"," ",o.jsx("strong",{children:Is(At.vendorRemainingPackages)})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado (precio proveedor)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",gr(Xe)]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Sumatoria rdenes maestras (perodo)"})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Productos dispersados (precio venta)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",gr(ft.dispersedTotal)]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Sumatoria rdenes de vendedores (perodo)"})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Dispersado Isla (precio venta)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",gr(ft.dispersedIsla)]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Usado para Total existente"})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total existente (Isla)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",gr(ft.totalExistenteIsla)]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Esperado Isla  Dispersado Isla"})]})]}),o.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-4 shadow-sm bg-white border-gray-100",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[o.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"rdenes de vendedores (Global)"}),o.jsxs("div",{className:"text-xs text-gray-500",children:["Basado en ",o.jsx("strong",{children:"precio de venta"})," (por sucursal del vendedor)"]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-2 text-sm",children:[o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total orden:"," ",o.jsxs("strong",{children:["C$",gr(gt.global.totalOrden)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Vendido:"," ",o.jsxs("strong",{children:["C$",gr(gt.global.vendido)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Restante:"," ",o.jsxs("strong",{children:["C$",gr(gt.global.restante)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Comisin:"," ",o.jsxs("strong",{children:["C$",gr(gt.global.comision)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total esperado:"," ",o.jsxs("strong",{children:["C$",gr(gt.global.totalEsperado)]})]})]})]}),o.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-6 shadow-sm bg-white border-gray-100",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2 mb-3",children:[o.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"rdenes de vendedores (Detalle por orden)"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Click/Tap en una orden para ver productos asociados/vendidos/restantes"})]}),gt.orders.length===0?o.jsx("div",{className:"text-sm text-gray-500",children:""}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"md:hidden space-y-2",children:gt.orders.map(G=>o.jsxs("div",{className:"border rounded-2xl p-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-semibold truncate",children:G.orderId}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1 truncate",children:[G.sellerName," ",G.branch?` ${G.branch}`:""," ",G.date?` ${G.date}`:""]})]}),o.jsx("button",{className:"px-3 py-2 rounded-lg bg-gray-800 text-white text-sm font-semibold",onClick:()=>Oe(G.orderKey),children:"Ver"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total"}),o.jsxs("div",{className:"font-bold",children:["C$",gr(G.totalOrden)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendido"}),o.jsxs("div",{className:"font-bold",children:["C$",gr(G.vendido)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Restante"}),o.jsxs("div",{className:"font-bold",children:["C$",gr(G.restante)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),o.jsxs("div",{className:"font-bold",children:["C$",gr(G.comision)]})]})]})]},G.orderKey))}),o.jsx("div",{className:"hidden md:block overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2 text-left",children:"Orden"}),o.jsx("th",{className:"border p-2 text-left",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Sucursal"}),o.jsx("th",{className:"border p-2",children:"Fecha"}),o.jsx("th",{className:"border p-2",children:"Total orden"}),o.jsx("th",{className:"border p-2",children:"Vendido"}),o.jsx("th",{className:"border p-2",children:"Restante"}),o.jsx("th",{className:"border p-2",children:"Comisin"}),o.jsx("th",{className:"border p-2",children:"Total esperado"}),o.jsx("th",{className:"border p-2",children:"Accin"})]})}),o.jsx("tbody",{children:gt.orders.map(G=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-2 text-left",children:G.orderId}),o.jsx("td",{className:"border p-2 text-left",children:G.sellerName}),o.jsx("td",{className:"border p-2",children:G.branch||""}),o.jsx("td",{className:"border p-2",children:G.date||""}),o.jsxs("td",{className:"border p-2",children:["C$",gr(G.totalOrden)]}),o.jsxs("td",{className:"border p-2",children:["C$",gr(G.vendido)]}),o.jsxs("td",{className:"border p-2",children:["C$",gr(G.restante)]}),o.jsxs("td",{className:"border p-2",children:["C$",gr(G.comision)]}),o.jsxs("td",{className:"border p-2",children:["C$",gr(G.totalEsperado)]}),o.jsx("td",{className:"border p-2",children:o.jsx("button",{className:"text-xs bg-gray-800 text-white px-3 py-2 rounded-lg hover:bg-black",onClick:()=>Oe(G.orderKey),children:"Ver detalle"})})]},G.orderKey))})]})}),vt&&o.jsxs("div",{className:"mt-4 rounded-2xl border-2 border-gray-100 p-3 sm:p-4 shadow-lg bg-white",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-3",children:[o.jsxs("h4",{className:"text-base sm:text-xl font-semibold truncate",children:["Detalle orden vendedor  ",vt.orderId]}),o.jsx("button",{onClick:()=>Oe(""),className:"w-full sm:w-auto text-sm px-3 py-2 border rounded-lg hover:bg-gray-50",children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-2 text-sm mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total orden:"," ",o.jsxs("strong",{children:["C$",gr(vt.totalOrden)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Vendido:"," ",o.jsxs("strong",{children:["C$",gr(vt.vendido)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Restante:"," ",o.jsxs("strong",{children:["C$",gr(vt.restante)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Comisin:"," ",o.jsxs("strong",{children:["C$",gr(vt.comision)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total esperado:"," ",o.jsxs("strong",{children:["C$",gr(vt.totalEsperado)]})]})]}),o.jsx("h5",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Productos asociados (Nombre - Asociados - Vendidos - Restantes)"}),o.jsx("div",{className:"md:hidden space-y-2",children:vt.products.map(G=>o.jsxs("div",{className:"border rounded-2xl p-3",children:[o.jsx("div",{className:"font-semibold",children:G.productName}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Asociados"}),o.jsx("div",{className:"font-bold",children:G.asociados})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendidos"}),o.jsx("div",{className:"font-bold",children:G.vendidos})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Restantes"}),o.jsx("div",{className:"font-bold",children:G.restantes})]})]})]},G.productName))}),o.jsx("div",{className:"hidden md:block overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2 text-left",children:"Nombre producto"}),o.jsx("th",{className:"border p-2",children:"Asociados"}),o.jsx("th",{className:"border p-2",children:"Vendidos"}),o.jsx("th",{className:"border p-2",children:"Restantes"})]})}),o.jsxs("tbody",{children:[vt.products.map(G=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-2 text-left",children:G.productName}),o.jsx("td",{className:"border p-2",children:G.asociados}),o.jsx("td",{className:"border p-2",children:G.vendidos}),o.jsx("td",{className:"border p-2",children:G.restantes})]},G.productName)),vt.products.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-4 text-center text-gray-500",children:"Sin productos."})})]})]})})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Existencia global (maestras)"}),o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:Is(At.masterRemainingPackages)}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"remainingPackages (todas)"})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Existencia global (vendedores)"}),o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:Is(At.vendorRemainingPackages)}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"remainingPackages (todas)"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin cash)"}),ue.cashArr.length===0?o.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):o.jsx("div",{className:"mt-2 space-y-1 max-h-40 overflow-auto pr-1",children:ue.cashArr.map(G=>o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"truncate",children:G.name}),o.jsxs("strong",{className:"ml-2",children:["C$",gr(G.total)]})]},G.vendorId))})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin crdito)"}),ue.creditArr.length===0?o.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):o.jsx("div",{className:"mt-2 space-y-1 max-h-40 overflow-auto pr-1",children:ue.creditArr.map(G=>o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"truncate",children:G.name}),o.jsxs("strong",{className:"ml-2",children:["C$",gr(G.total)]})]},G.vendorId))})]})]}),o.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-6 shadow-sm bg-white border-gray-100",children:[o.jsxs("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:["Cartera (saldo pendiente hasta ",l,")"]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-sm mb-3",children:[o.jsxs("div",{children:["Clientes con saldo: ",o.jsx("strong",{children:ct.count})]}),o.jsxs("div",{children:["Saldo total pendiente:"," ",o.jsxs("strong",{children:["C$",gr(ct.totalPending)]})]}),o.jsx("div",{className:"text-gray-500",children:"*Muestra top 20 por monto"})]}),ct.list.length===0?o.jsx("div",{className:"text-sm text-gray-500",children:""}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"md:hidden space-y-2",children:ct.list.map(G=>o.jsxs("div",{className:"border rounded-xl p-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx("div",{className:"font-semibold truncate",children:G.name}),o.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",gr(G.balance)]})]}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["ltimo abono:"," ",o.jsx("span",{className:"font-medium",children:G.lastPayment||""})]})]},G.customerId))}),o.jsx("div",{className:"hidden md:block overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2 text-left",children:"Cliente"}),o.jsx("th",{className:"border p-2",children:"Saldo"}),o.jsx("th",{className:"border p-2",children:"ltimo abono"})]})}),o.jsx("tbody",{children:ct.list.map(G=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-2 text-left",children:G.name}),o.jsxs("td",{className:"border p-2",children:["C$",gr(G.balance)]}),o.jsx("td",{className:"border p-2",children:G.lastPayment||""})]},G.customerId))})]})})]})]}),o.jsxs("div",{className:"mb-3 flex flex-col sm:flex-row sm:items-center gap-2",children:[o.jsxs("h3",{className:"font-semibold text-sm sm:text-base",children:["Tabla principal (Agrupar por: ",E,")"]}),o.jsx("span",{className:"text-xs text-gray-500 sm:ml-auto",children:"Tap/Click en Ver detalle para drill-down"})]}),P?o.jsx("p",{className:"text-sm",children:"Cargando..."}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"md:hidden space-y-2 mb-6",children:ye.length===0?o.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin datos con los filtros seleccionados."}):ye.map(G=>o.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx("div",{className:"font-semibold truncate",children:G.label}),o.jsx("button",{className:"px-3 py-2 rounded-lg bg-gray-800 text-white text-sm font-semibold",onClick:()=>ie(G.key),children:"Ver detalle"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),o.jsx("div",{className:"font-bold",children:Is(G.packsCash)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),o.jsx("div",{className:"font-bold",children:Is(G.packsCredit)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),o.jsxs("div",{className:"font-bold",children:["C$",gr(G.salesCash)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),o.jsxs("div",{className:"font-bold",children:["C$",gr(G.salesCredit)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash"}),o.jsxs("div",{className:"font-bold",children:["C$",gr(G.commCash)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito"}),o.jsxs("div",{className:"font-bold",children:["C$",gr(G.commCredit)]})]})]})]},G.key))}),o.jsx("div",{className:"hidden md:block overflow-x-auto mb-6 shadow-2xl rounded-xl border",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2 text-left",children:E==="DIA"?"Da":E==="VENDEDOR"?"Vendedor":E==="PRODUCTO"?"Producto":"Sucursal"}),o.jsx("th",{className:"border p-2",children:"Paquetes cash"}),o.jsx("th",{className:"border p-2",children:"Paquetes crdito"}),o.jsx("th",{className:"border p-2",children:"Ventas cash"}),o.jsx("th",{className:"border p-2",children:"Ventas crdito"}),o.jsx("th",{className:"border p-2",children:"Comisin cash"}),o.jsx("th",{className:"border p-2",children:"Comisin crdito"}),o.jsx("th",{className:"border p-2",children:"Opciones"})]})}),o.jsxs("tbody",{children:[ye.map(G=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-2 text-left",children:G.label}),o.jsx("td",{className:"border p-2",children:Is(G.packsCash)}),o.jsx("td",{className:"border p-2",children:Is(G.packsCredit)}),o.jsxs("td",{className:"border p-2",children:["C$",gr(G.salesCash)]}),o.jsxs("td",{className:"border p-2",children:["C$",gr(G.salesCredit)]}),o.jsxs("td",{className:"border p-2",children:["C$",gr(G.commCash)]}),o.jsxs("td",{className:"border p-2",children:["C$",gr(G.commCredit)]}),o.jsx("td",{className:"border p-2",children:o.jsx("button",{className:"text-xs bg-gray-800 text-white px-3 py-2 rounded-lg hover:bg-black",onClick:()=>ie(G.key),children:"Ver detalle"})})]},G.key)),ye.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sin datos con los filtros seleccionados."})})]})]})})]}),Ye&&o.jsxs("div",{className:"rounded-2xl shadow-lg p-3 sm:p-4 bg-white border-solid border-2 border-gray-100",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-3",children:[o.jsxs("h2",{className:"text-base sm:text-xl font-semibold truncate",children:["Detalle "," ",((bt=ye.find(G=>G.key===Ye))==null?void 0:bt.label)||Ye]}),o.jsx("button",{onClick:()=>ie(""),className:"w-full sm:w-auto text-sm px-3 py-2 border rounded-lg hover:bg-gray-50",children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 text-sm mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total Ventas cash:"," ",o.jsxs("strong",{children:["C$",gr($e.filter(G=>G.type==="CONTADO").reduce((G,te)=>G+Er(te.amount),0))]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total Ventas crdito:"," ",o.jsxs("strong",{children:["C$",gr($e.filter(G=>G.type==="CREDITO").reduce((G,te)=>G+Er(te.amount),0))]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total paquetes cash:"," ",o.jsx("strong",{children:Is($e.filter(G=>G.type==="CONTADO").reduce((G,te)=>G+Er(te.packages),0))})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total paquetes crdito:"," ",o.jsx("strong",{children:Is($e.filter(G=>G.type==="CREDITO").reduce((G,te)=>G+Er(te.packages),0))})]})]}),o.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Ventas incluidas"}),o.jsx("div",{className:"md:hidden space-y-2 mb-4",children:$e.length===0?o.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin detalle."}):$e.map(G=>o.jsxs("div",{className:"border rounded-2xl p-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx("div",{className:"font-semibold truncate",children:G.productName}),o.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",gr(G.amount)]})]}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Vendedor:"," ",o.jsx("span",{className:"font-medium",children:G.vendorName})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Tipo"}),o.jsx("div",{className:"font-bold",children:G.type==="CREDITO"?"Crdito":"Cash"})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Sucursal"}),o.jsx("div",{className:"font-bold",children:G.branch||""})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),o.jsx("div",{className:"font-bold",children:Is(G.packages)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),o.jsxs("div",{className:"font-bold",children:["C$",gr(G.commission)]})]})]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Fecha: ",G.date]})]},G.id))}),o.jsx("div",{className:"hidden md:block overflow-x-auto mb-4",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Tipo"}),o.jsx("th",{className:"border p-2",children:"Sucursal"}),o.jsx("th",{className:"border p-2",children:"Paquetes"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Comisin"}),o.jsx("th",{className:"border p-2",children:"Fecha venta"})]})}),o.jsxs("tbody",{children:[$e.map(G=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-2",children:G.vendorName}),o.jsx("td",{className:"border p-2",children:G.productName}),o.jsx("td",{className:"border p-2",children:G.type==="CREDITO"?"Crdito":"Cash"}),o.jsx("td",{className:"border p-2",children:G.branch||""}),o.jsx("td",{className:"border p-2",children:Is(G.packages)}),o.jsxs("td",{className:"border p-2",children:["C$",gr(G.amount)]}),o.jsxs("td",{className:"border p-2",children:["C$",gr(G.commission)]}),o.jsx("td",{className:"border p-2",children:G.date})]},G.id)),$e.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sin detalle."})})]})]})}),o.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Consolidado por producto"}),o.jsx("div",{className:"md:hidden space-y-2",children:Ne.length===0?o.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin consolidado."}):Ne.map(G=>o.jsxs("div",{className:"border rounded-2xl p-3",children:[o.jsx("div",{className:"font-semibold",children:G.productName}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paq cash"}),o.jsx("div",{className:"font-bold",children:Is(G.packsCash)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paq crdito"}),o.jsx("div",{className:"font-bold",children:Is(G.packsCredit)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),o.jsxs("div",{className:"font-bold",children:["C$",gr(G.salesCash)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),o.jsxs("div",{className:"font-bold",children:["C$",gr(G.salesCredit)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Com cash"}),o.jsxs("div",{className:"font-bold",children:["C$",gr(G.commCash)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Com crdito"}),o.jsxs("div",{className:"font-bold",children:["C$",gr(G.commCredit)]})]})]})]},G.productName))}),o.jsx("div",{className:"hidden md:block overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Total paquetes cash"}),o.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),o.jsx("th",{className:"border p-2",children:"Ventas cash"}),o.jsx("th",{className:"border p-2",children:"Ventas crdito"}),o.jsx("th",{className:"border p-2",children:"Comisin cash"}),o.jsx("th",{className:"border p-2",children:"Comisin crdito"})]})}),o.jsxs("tbody",{children:[Ne.map(G=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-2 text-left",children:G.productName}),o.jsx("td",{className:"border p-2",children:Is(G.packsCash)}),o.jsx("td",{className:"border p-2",children:Is(G.packsCredit)}),o.jsxs("td",{className:"border p-2",children:["C$",gr(G.salesCash)]}),o.jsxs("td",{className:"border p-2",children:["C$",gr(G.salesCredit)]}),o.jsxs("td",{className:"border p-2",children:["C$",gr(G.commCash)]}),o.jsxs("td",{className:"border p-2",children:["C$",gr(G.commCredit)]})]},G.productName)),Ne.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"p-4 text-center text-gray-500",children:"Sin consolidado."})})]})]})})]})]})]}),O&&o.jsx("p",{className:"mt-3 text-sm",children:O})]})}):o.jsxs("div",{className:"max-w-5xl mx-auto p-3 sm:p-4 md:p-6 bg-white rounded-2xl shadow-2xl",children:[o.jsx("h2",{className:"text-lg md:text-xl font-bold",children:"Data Center - Dulces"}),o.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"No autorizado."})]})}function Eae(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=Eae(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Sa(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=Eae(t))&&(n&&(n+=" "),n+=e);return n}var l9e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function sR(t){if(typeof t!="string")return!1;var e=l9e;return e.includes(t)}var c9e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],u9e=new Set(c9e);function Sae(t){return typeof t!="string"?!1:u9e.has(t)}function Iae(t){return typeof t=="string"&&t.startsWith("data-")}function Qf(t){if(typeof t!="object"||t===null)return{};var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Sae(r)||Iae(r))&&(e[r]=t[r]);return e}function O2(t){if(t==null)return null;if(v.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Qf(e)}return typeof t=="object"&&!Array.isArray(t)?Qf(t):null}function sd(t){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Sae(r)||Iae(r)||sR(r))&&(e[r]=t[r]);return e}var d9e=["children","width","height","viewBox","className","style","title","desc"];function Rk(){return Rk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Rk.apply(null,arguments)}function f9e(t,e){if(t==null)return{};var r,n,a=A9e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function A9e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var iR=v.forwardRef((t,e)=>{var{children:r,width:n,height:a,viewBox:s,className:i,style:l,title:c,desc:u}=t,d=f9e(t,d9e),f=s||{width:n,height:a,x:0,y:0},h=Sa("recharts-surface",i);return v.createElement("svg",Rk({},sd(d),{className:h,width:n,height:a,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:e}),v.createElement("title",null,c),v.createElement("desc",null,u),r)}),h9e=["children","className"];function Mk(){return Mk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Mk.apply(null,arguments)}function m9e(t,e){if(t==null)return{};var r,n,a=p9e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function p9e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var rc=v.forwardRef((t,e)=>{var{children:r,className:n}=t,a=m9e(t,h9e),s=Sa("recharts-layer",n);return v.createElement("g",Mk({className:s},sd(a),{ref:e}),r)}),jae=v.createContext(null),g9e=()=>v.useContext(jae);function Va(t){return function(){return t}}const Pae=Math.cos,LS=Math.sin,nf=Math.sqrt,US=Math.PI,X4=2*US,Lk=Math.PI,Uk=2*Lk,Km=1e-6,x9e=Uk-Km;function Bae(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function v9e(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Bae;const r=10**e;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class y9e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Bae:v9e(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,s,i){this._append`C${+e},${+r},${+n},${+a},${this._x1=+s},${this._y1=+i}`}arcTo(e,r,n,a,s){if(e=+e,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let i=this._x1,l=this._y1,c=n-e,u=a-r,d=i-e,f=l-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(h>Km)if(!(Math.abs(f*c-u*d)>Km)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let A=n-i,m=a-l,p=c*c+u*u,g=A*A+m*m,x=Math.sqrt(p),y=Math.sqrt(h),b=s*Math.tan((Lk-Math.acos((p+h-g)/(2*x*y)))/2),w=b/y,j=b/x;Math.abs(w-1)>Km&&this._append`L${e+w*d},${r+w*f}`,this._append`A${s},${s},0,0,${+(f*A>d*m)},${this._x1=e+j*c},${this._y1=r+j*u}`}}arc(e,r,n,a,s,i){if(e=+e,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=e+l,d=r+c,f=1^i,h=i?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Km||Math.abs(this._y1-d)>Km)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%Uk+Uk),h>x9e?this._append`A${n},${n},0,1,${f},${e-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>Km&&this._append`A${n},${n},0,${+(h>=Lk)},${f},${this._x1=e+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function oR(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new y9e(e)}function lR(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Tae(t){this._context=t}Tae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Y4(t){return new Tae(t)}function kae(t){return t[0]}function Fae(t){return t[1]}function Oae(t,e){var r=Va(!0),n=null,a=Y4,s=null,i=oR(l);t=typeof t=="function"?t:t===void 0?kae:Va(t),e=typeof e=="function"?e:e===void 0?Fae:Va(e);function l(c){var u,d=(c=lR(c)).length,f,h=!1,A;for(n==null&&(s=a(A=i())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(f,u,c),+e(f,u,c));if(A)return s=null,A+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Va(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Va(+c),l):e},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Va(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(s=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=s=null:s=a(n=c),l):n},l}function ZC(t,e,r){var n=null,a=Va(!0),s=null,i=Y4,l=null,c=oR(u);t=typeof t=="function"?t:t===void 0?kae:Va(+t),e=typeof e=="function"?e:Va(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?Fae:Va(+r);function u(f){var h,A,m,p=(f=lR(f)).length,g,x=!1,y,b=new Array(p),w=new Array(p);for(s==null&&(l=i(y=c())),h=0;h<=p;++h){if(!(h<p&&a(g=f[h],h,f))===x)if(x=!x)A=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),m=h-1;m>=A;--m)l.point(b[m],w[m]);l.lineEnd(),l.areaEnd()}x&&(b[h]=+t(g,h,f),w[h]=+e(g,h,f),l.point(n?+n(g,h,f):b[h],r?+r(g,h,f):w[h]))}if(y)return l=null,y+""||null}function d(){return Oae().defined(a).curve(i).context(s)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:Va(+f),n=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Va(+f),u):t},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Va(+f),u):n},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:Va(+f),r=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Va(+f),u):e},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Va(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(r)},u.lineX1=function(){return d().x(n).y(e)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Va(!!f),u):a},u.curve=function(f){return arguments.length?(i=f,s!=null&&(l=i(s)),u):i},u.context=function(f){return arguments.length?(f==null?s=l=null:l=i(s=f),u):s},u}class Dae{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function b9e(t){return new Dae(t,!0)}function w9e(t){return new Dae(t,!1)}const cR={draw(t,e){const r=nf(e/US);t.moveTo(r,0),t.arc(0,0,r,0,X4)}},N9e={draw(t,e){const r=nf(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},Rae=nf(1/3),C9e=Rae*2,_9e={draw(t,e){const r=nf(e/C9e),n=r*Rae;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},E9e={draw(t,e){const r=nf(e),n=-r/2;t.rect(n,n,r,r)}},S9e=.8908130915292852,Mae=LS(US/10)/LS(7*US/10),I9e=LS(X4/10)*Mae,j9e=-Pae(X4/10)*Mae,P9e={draw(t,e){const r=nf(e*S9e),n=I9e*r,a=j9e*r;t.moveTo(0,-r),t.lineTo(n,a);for(let s=1;s<5;++s){const i=X4*s/5,l=Pae(i),c=LS(i);t.lineTo(c*r,-l*r),t.lineTo(l*n-c*a,c*n+l*a)}t.closePath()}},TP=nf(3),B9e={draw(t,e){const r=-nf(e/(TP*3));t.moveTo(0,r*2),t.lineTo(-TP*r,-r),t.lineTo(TP*r,-r),t.closePath()}},Pu=-.5,Bu=nf(3)/2,Qk=1/nf(12),T9e=(Qk/2+1)*3,k9e={draw(t,e){const r=nf(e/T9e),n=r/2,a=r*Qk,s=n,i=r*Qk+r,l=-s,c=i;t.moveTo(n,a),t.lineTo(s,i),t.lineTo(l,c),t.lineTo(Pu*n-Bu*a,Bu*n+Pu*a),t.lineTo(Pu*s-Bu*i,Bu*s+Pu*i),t.lineTo(Pu*l-Bu*c,Bu*l+Pu*c),t.lineTo(Pu*n+Bu*a,Pu*a-Bu*n),t.lineTo(Pu*s+Bu*i,Pu*i-Bu*s),t.lineTo(Pu*l+Bu*c,Pu*c-Bu*l),t.closePath()}};function F9e(t,e){let r=null,n=oR(a);t=typeof t=="function"?t:Va(t||cR),e=typeof e=="function"?e:Va(e===void 0?64:+e);function a(){let s;if(r||(r=s=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(t=typeof s=="function"?s:Va(s),a):t},a.size=function(s){return arguments.length?(e=typeof s=="function"?s:Va(+s),a):e},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function QS(){}function VS(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function Lae(t){this._context=t}Lae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:VS(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:VS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function O9e(t){return new Lae(t)}function Uae(t){this._context=t}Uae.prototype={areaStart:QS,areaEnd:QS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:VS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function D9e(t){return new Uae(t)}function Qae(t){this._context=t}Qae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:VS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function R9e(t){return new Qae(t)}function Vae(t){this._context=t}Vae.prototype={areaStart:QS,areaEnd:QS,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function M9e(t){return new Vae(t)}function S$(t){return t<0?-1:1}function I$(t,e,r){var n=t._x1-t._x0,a=e-t._x1,s=(t._y1-t._y0)/(n||a<0&&-0),i=(r-t._y1)/(a||n<0&&-0),l=(s*a+i*n)/(n+a);return(S$(s)+S$(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(l))||0}function j$(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function kP(t,e,r){var n=t._x0,a=t._y0,s=t._x1,i=t._y1,l=(s-n)/3;t._context.bezierCurveTo(n+l,a+l*e,s-l,i-l*r,s,i)}function HS(t){this._context=t}HS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:kP(this,this._t0,j$(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,kP(this,j$(this,r=I$(this,t,e)),r);break;default:kP(this,this._t0,r=I$(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function Hae(t){this._context=new $ae(t)}(Hae.prototype=Object.create(HS.prototype)).point=function(t,e){HS.prototype.point.call(this,e,t)};function $ae(t){this._context=t}$ae.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,a,s){this._context.bezierCurveTo(e,t,n,r,s,a)}};function L9e(t){return new HS(t)}function U9e(t){return new Hae(t)}function Gae(t){this._context=t}Gae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=P$(t),a=P$(e),s=0,i=1;i<r;++s,++i)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],t[i],e[i]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function P$(t){var e,r=t.length-1,n,a=new Array(r),s=new Array(r),i=new Array(r);for(a[0]=0,s[0]=2,i[0]=t[0]+2*t[1],e=1;e<r-1;++e)a[e]=1,s[e]=4,i[e]=4*t[e]+2*t[e+1];for(a[r-1]=2,s[r-1]=7,i[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=a[e]/s[e-1],s[e]-=n,i[e]-=n*i[e-1];for(a[r-1]=i[r-1]/s[r-1],e=r-2;e>=0;--e)a[e]=(i[e]-a[e+1])/s[e];for(s[r-1]=(t[r]+a[r-1])/2,e=0;e<r-1;++e)s[e]=2*t[e+1]-a[e+1];return[a,s]}function Q9e(t){return new Gae(t)}function J4(t,e){this._context=t,this._t=e}J4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function V9e(t){return new J4(t,.5)}function H9e(t){return new J4(t,0)}function $9e(t){return new J4(t,1)}function eg(t,e){if((i=t.length)>1)for(var r=1,n,a,s=t[e[0]],i,l=s.length;r<i;++r)for(a=s,s=t[e[r]],n=0;n<l;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function Vk(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function G9e(t,e){return t[e]}function K9e(t){const e=[];return e.key=t,e}function q9e(){var t=Va([]),e=Vk,r=eg,n=G9e;function a(s){var i=Array.from(t.apply(this,arguments),K9e),l,c=i.length,u=-1,d;for(const f of s)for(l=0,++u;l<c;++l)(i[l][u]=[0,+n(f,i[l].key,u,s)]).data=f;for(l=0,d=lR(e(i));l<c;++l)i[d[l]].index=l;return r(i,d),i}return a.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Va(Array.from(s)),a):t},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:Va(+s),a):n},a.order=function(s){return arguments.length?(e=s==null?Vk:typeof s=="function"?s:Va(Array.from(s)),a):e},a.offset=function(s){return arguments.length?(r=s??eg,a):r},a}function z9e(t,e){if((n=t.length)>0){for(var r,n,a=0,s=t[0].length,i;a<s;++a){for(i=r=0;r<n;++r)i+=t[r][a][1]||0;if(i)for(r=0;r<n;++r)t[r][a][1]/=i}eg(t,e)}}function W9e(t,e){if((a=t.length)>0){for(var r=0,n=t[e[0]],a,s=n.length;r<s;++r){for(var i=0,l=0;i<a;++i)l+=t[i][r][1]||0;n[r][1]+=n[r][0]=-l/2}eg(t,e)}}function X9e(t,e){if(!(!((i=t.length)>0)||!((s=(a=t[e[0]]).length)>0))){for(var r=0,n=1,a,s,i;n<s;++n){for(var l=0,c=0,u=0;l<i;++l){for(var d=t[e[l]],f=d[n][1]||0,h=d[n-1][1]||0,A=(f-h)/2,m=0;m<l;++m){var p=t[e[m]],g=p[n][1]||0,x=p[n-1][1]||0;A+=g-x}c+=f,u+=A*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,eg(t,e)}}var Z4={},Kae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==="__proto__"}t.isUnsafeProperty=e})(Kae);var uR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}t.isDeepKey=e})(uR);var ej={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}t.toKey=e})(ej);var tj={},qae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(e).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}t.toString=e})(qae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qae,r=ej;function n(a){if(Array.isArray(a))return a.map(r.toKey);if(typeof a=="symbol")return[a];a=e.toString(a);const s=[],i=a.length;if(i===0)return s;let l=0,c="",u="",d=!1;for(a.charCodeAt(0)===46&&(s.push(""),l++);l<i;){const f=a[l];u?f==="\\"&&l+1<i?(l++,c+=a[l]):f===u?u="":c+=f:d?f==='"'||f==="'"?u=f:f==="]"?(d=!1,s.push(c),c=""):c+=f:f==="["?(d=!0,c&&(s.push(c),c="")):f==="."?c&&(s.push(c),c=""):c+=f,l++}return c&&s.push(c),s}t.toPath=n})(tj);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Kae,r=uR,n=ej,a=tj;function s(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?s(l,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return i(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function i(l,c,u){if(c.length===0)return u;let d=l;for(let f=0;f<c.length;f++){if(d==null||e.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}t.get=s})(Z4);var Y9e=Z4.get;const tg=oh(Y9e);var J9e=4;function j0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:J9e,r=10**e,n=Math.round(t*r)/r;return Object.is(n,-0)?0:n}function zs(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return t.reduce((a,s,i)=>{var l=r[i-1];return typeof l=="string"?a+l+s:l!==void 0?a+j0(l)+s:a+s},"")}var rl=t=>t===0?0:t>0?1:-1,Vf=t=>typeof t=="number"&&t!=+t,eh=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Kr=t=>(typeof t=="number"||t instanceof Number)&&!Vf(t),Hf=t=>Kr(t)||typeof t=="string",Z9e=0,D2=t=>{var e=++Z9e;return"".concat(t||"").concat(e)},Bl=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Kr(e)&&typeof e!="string")return n;var s;if(eh(e)){if(r==null)return n;var i=e.indexOf("%");s=r*parseFloat(e.slice(0,i))/100}else s=+e;return Vf(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},zae=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,r={},n=0;n<e;n++)if(!r[String(t[n])])r[String(t[n])]=!0;else return!0;return!1};function zi(t,e,r){return Kr(t)&&Kr(e)?j0(t+r*(e-t)):e}function eQe(t,e,r){if(!(!t||!t.length))return t.find(n=>n&&(typeof e=="function"?e(n):tg(n,e))===r)}var Bo=t=>t===null||typeof t>"u",Fw=t=>Bo(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function tQe(t){return t!=null}function Ow(){}var rQe=["type","size","sizeType"];function Hk(){return Hk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Hk.apply(null,arguments)}function B$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function T$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?B$(Object(r),!0).forEach(function(n){nQe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):B$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nQe(t,e,r){return(e=aQe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aQe(t){var e=sQe(t,"string");return typeof e=="symbol"?e:e+""}function sQe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iQe(t,e){if(t==null)return{};var r,n,a=oQe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function oQe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Wae={symbolCircle:cR,symbolCross:N9e,symbolDiamond:_9e,symbolSquare:E9e,symbolStar:P9e,symbolTriangle:B9e,symbolWye:k9e},lQe=Math.PI/180,cQe=t=>{var e="symbol".concat(Fw(t));return Wae[e]||cR},uQe=(t,e,r)=>{if(e==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var n=18*lQe;return 1.25*t*t*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},dQe=(t,e)=>{Wae["symbol".concat(Fw(t))]=e},dR=t=>{var{type:e="circle",size:r=64,sizeType:n="area"}=t,a=iQe(t,rQe),s=T$(T$({},a),{},{type:e,size:r,sizeType:n}),i="circle";typeof e=="string"&&(i=e);var l=()=>{var h=cQe(i),A=F9e().type(h).size(uQe(r,n,i)),m=A();if(m!==null)return m},{className:c,cx:u,cy:d}=s,f=sd(s);return Kr(u)&&Kr(d)&&Kr(r)?v.createElement("path",Hk({},f,{className:Sa("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:l()})):null};dR.registerSymbol=dQe;var Xae=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,fQe=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(v.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{sR(a)&&(n[a]=s=>r[a](r,s))}),n},AQe=(t,e,r)=>n=>(t(e,r,n),null),Dw=(t,e,r)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var n=null;return Object.keys(t).forEach(a=>{var s=t[a];sR(a)&&typeof s=="function"&&(n||(n={}),n[a]=AQe(s,e,r))}),n};function k$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function hQe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?k$(Object(r),!0).forEach(function(n){mQe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mQe(t,e,r){return(e=pQe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pQe(t){var e=gQe(t,"string");return typeof e=="symbol"?e:e+""}function gQe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sl(t,e){var r=hQe({},t),n=e,a=Object.keys(e),s=a.reduce((i,l)=>(i[l]===void 0&&n[l]!==void 0&&(i[l]=n[l]),i),r);return s}function $S(){return $S=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$S.apply(null,arguments)}function F$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function xQe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?F$(Object(r),!0).forEach(function(n){vQe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vQe(t,e,r){return(e=yQe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yQe(t){var e=bQe(t,"string");return typeof e=="symbol"?e:e+""}function bQe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Mu=32,wQe={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function NQe(t){var{data:e,iconType:r,inactiveColor:n}=t,a=Mu/2,s=Mu/6,i=Mu/3,l=e.inactive?n:e.color,c=r??e.type;if(c==="none")return null;if(c==="plainline"){var u;return v.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:(u=e.payload)===null||u===void 0?void 0:u.strokeDasharray,x1:0,y1:a,x2:Mu,y2:a,className:"recharts-legend-icon"})}if(c==="line")return v.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*i,",").concat(a,`
            H`).concat(Mu,"M").concat(2*i,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(i,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return v.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Mu/8,"h").concat(Mu,"v").concat(Mu*3/4,"h").concat(-Mu,"z"),className:"recharts-legend-icon"});if(v.isValidElement(e.legendIcon)){var d=xQe({},e);return delete d.legendIcon,v.cloneElement(e.legendIcon,d)}return v.createElement(dR,{fill:l,cx:a,cy:a,size:Mu,sizeType:"diameter",type:c})}function CQe(t){var{payload:e,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:i}=t,l={x:0,y:0,width:Mu,height:Mu},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((d,f)=>{var h=d.formatter||a,A=Sa({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var m=d.inactive?s:d.color,p=h?h(d.value,d,f):d.value;return v.createElement("li",$S({className:A,style:c,key:"legend-item-".concat(f)},Dw(t,d,f)),v.createElement(iR,{width:r,height:r,viewBox:l,style:u,"aria-label":"".concat(p," legend icon")},v.createElement(NQe,{data:d,iconType:i,inactiveColor:s})),v.createElement("span",{className:"recharts-legend-item-text",style:{color:m}},p))})}var _Qe=t=>{var e=sl(t,wQe),{payload:r,layout:n,align:a}=e;if(!r||!r.length)return null;var s={padding:0,margin:0,textAlign:n==="horizontal"?a:"left"};return v.createElement("ul",{className:"recharts-default-legend",style:s},v.createElement(CQe,$S({},e,{payload:r})))},Yae={},Jae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){const a=new Map;for(let s=0;s<r.length;s++){const i=r[s],l=n(i);a.has(l)||a.set(l,i)}return Array.from(a.values())}t.uniqBy=e})(Jae);var fR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r}t.identity=e})(fR);var Zae={},rj={},ese={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Number.isSafeInteger(r)&&r>=0}t.isLength=e})(ese);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ese;function r(n){return n!=null&&typeof n!="function"&&e.isLength(n.length)}t.isArrayLike=r})(rj);var tse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="object"&&r!==null}t.isObjectLike=e})(tse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rj,r=tse;function n(a){return r.isObjectLike(a)&&e.isArrayLike(a)}t.isArrayLikeObject=n})(Zae);var rse={},nse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Z4;function r(n){return function(a){return e.get(a,n)}}t.property=r})(nse);var ase={},AR={},sse={},hR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r!==null&&(typeof r=="object"||typeof r=="function")}t.isObject=e})(hR);var mR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null||typeof r!="object"&&typeof r!="function"}t.isPrimitive=e})(mR);var pR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}t.eq=e})(pR);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=hR,r=mR,n=pR;function a(d,f,h){return typeof h!="function"?a(d,f,()=>{}):s(d,f,function A(m,p,g,x,y,b){const w=h(m,p,g,x,y,b);return w!==void 0?!!w:s(m,p,A,b)},new Map)}function s(d,f,h,A){if(f===d)return!0;switch(typeof f){case"object":return i(d,f,h,A);case"function":return Object.keys(f).length>0?s(d,{...f},h,A):n.eq(d,f);default:return e.isObject(d)?typeof f=="string"?f==="":!0:n.eq(d,f)}}function i(d,f,h,A){if(f==null)return!0;if(Array.isArray(f))return c(d,f,h,A);if(f instanceof Map)return l(d,f,h,A);if(f instanceof Set)return u(d,f,h,A);const m=Object.keys(f);if(d==null||r.isPrimitive(d))return m.length===0;if(m.length===0)return!0;if(A!=null&&A.has(f))return A.get(f)===d;A==null||A.set(f,d);try{for(let p=0;p<m.length;p++){const g=m[p];if(!r.isPrimitive(d)&&!(g in d)||f[g]===void 0&&d[g]!==void 0||f[g]===null&&d[g]!==null||!h(d[g],f[g],g,d,f,A))return!1}return!0}finally{A==null||A.delete(f)}}function l(d,f,h,A){if(f.size===0)return!0;if(!(d instanceof Map))return!1;for(const[m,p]of f.entries()){const g=d.get(m);if(h(g,p,m,d,f,A)===!1)return!1}return!0}function c(d,f,h,A){if(f.length===0)return!0;if(!Array.isArray(d))return!1;const m=new Set;for(let p=0;p<f.length;p++){const g=f[p];let x=!1;for(let y=0;y<d.length;y++){if(m.has(y))continue;const b=d[y];let w=!1;if(h(b,g,p,d,f,A)&&(w=!0),w){m.add(y),x=!0;break}}if(!x)return!1}return!0}function u(d,f,h,A){return f.size===0?!0:d instanceof Set?c([...d],[...f],h,A):!1}t.isMatchWith=a,t.isSetMatch=u})(sse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=sse;function r(n,a){return e.isMatchWith(n,a,()=>{})}t.isMatch=r})(AR);var ise={},gR={},ose={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}t.getSymbols=e})(ose);var xR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}t.getTag=e})(xR);var vR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",i="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",A="[object Object]",m="[object Error]",p="[object DataView]",g="[object Uint8Array]",x="[object Uint8ClampedArray]",y="[object Uint16Array]",b="[object Uint32Array]",w="[object BigUint64Array]",j="[object Int8Array]",I="[object Int16Array]",_="[object Int32Array]",S="[object BigInt64Array]",E="[object Float32Array]",k="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=h,t.arrayTag=d,t.bigInt64ArrayTag=S,t.bigUint64ArrayTag=w,t.booleanTag=a,t.dataViewTag=p,t.dateTag=l,t.errorTag=m,t.float32ArrayTag=E,t.float64ArrayTag=k,t.functionTag=f,t.int16ArrayTag=I,t.int32ArrayTag=_,t.int8ArrayTag=j,t.mapTag=c,t.numberTag=n,t.objectTag=A,t.regexpTag=e,t.setTag=u,t.stringTag=r,t.symbolTag=i,t.uint16ArrayTag=y,t.uint32ArrayTag=b,t.uint8ArrayTag=g,t.uint8ClampedArrayTag=x})(vR);var lse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}t.isTypedArray=e})(lse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ose,r=xR,n=vR,a=mR,s=lse;function i(d,f){return l(d,void 0,d,new Map,f)}function l(d,f,h,A=new Map,m=void 0){const p=m==null?void 0:m(d,f,h,A);if(p!==void 0)return p;if(a.isPrimitive(d))return d;if(A.has(d))return A.get(d);if(Array.isArray(d)){const g=new Array(d.length);A.set(d,g);for(let x=0;x<d.length;x++)g[x]=l(d[x],x,h,A,m);return Object.hasOwn(d,"index")&&(g.index=d.index),Object.hasOwn(d,"input")&&(g.input=d.input),g}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const g=new RegExp(d.source,d.flags);return g.lastIndex=d.lastIndex,g}if(d instanceof Map){const g=new Map;A.set(d,g);for(const[x,y]of d)g.set(x,l(y,x,h,A,m));return g}if(d instanceof Set){const g=new Set;A.set(d,g);for(const x of d)g.add(l(x,void 0,h,A,m));return g}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const g=new(Object.getPrototypeOf(d)).constructor(d.length);A.set(d,g);for(let x=0;x<d.length;x++)g[x]=l(d[x],x,h,A,m);return g}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const g=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return A.set(d,g),c(g,d,h,A,m),g}if(typeof File<"u"&&d instanceof File){const g=new File([d],d.name,{type:d.type});return A.set(d,g),c(g,d,h,A,m),g}if(typeof Blob<"u"&&d instanceof Blob){const g=new Blob([d],{type:d.type});return A.set(d,g),c(g,d,h,A,m),g}if(d instanceof Error){const g=new d.constructor;return A.set(d,g),g.message=d.message,g.name=d.name,g.stack=d.stack,g.cause=d.cause,c(g,d,h,A,m),g}if(d instanceof Boolean){const g=new Boolean(d.valueOf());return A.set(d,g),c(g,d,h,A,m),g}if(d instanceof Number){const g=new Number(d.valueOf());return A.set(d,g),c(g,d,h,A,m),g}if(d instanceof String){const g=new String(d.valueOf());return A.set(d,g),c(g,d,h,A,m),g}if(typeof d=="object"&&u(d)){const g=Object.create(Object.getPrototypeOf(d));return A.set(d,g),c(g,d,h,A,m),g}return d}function c(d,f,h=d,A,m){const p=[...Object.keys(f),...e.getSymbols(f)];for(let g=0;g<p.length;g++){const x=p[g],y=Object.getOwnPropertyDescriptor(d,x);(y==null||y.writable)&&(d[x]=l(f[x],x,h,A,m))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=i,t.cloneDeepWithImpl=l,t.copyProperties=c})(gR);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=gR;function r(n){return e.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}t.cloneDeep=r})(ise);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=AR,r=ise;function n(a){return a=r.cloneDeep(a),s=>e.isMatch(s,a)}t.matches=n})(ase);var cse={},use={},dse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=gR,r=vR;function n(a,s){return e.cloneDeepWith(a,(i,l,c,u)=>{const d=s==null?void 0:s(i,l,c,u);if(d!==void 0)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return e.copyProperties(f,a),f}case r.argumentsTag:{const f={};return e.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}t.cloneDeepWith=n})(dse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=dse;function r(n){return e.cloneDeepWith(n)}t.cloneDeep=r})(use);var fse={},yR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return e.test(n)}}t.isIndex=r})(yR);var Ase={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=xR;function r(n){return n!==null&&typeof n=="object"&&e.getTag(n)==="[object Arguments]"}t.isArguments=r})(Ase);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=uR,r=yR,n=Ase,a=tj;function s(i,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&e.isDeepKey(l)&&(i==null?void 0:i[l])==null?c=a.toPath(l):c=[l],c.length===0)return!1;let u=i;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}t.has=s})(fse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=AR,r=ej,n=use,a=Z4,s=fse;function i(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,l);return d===void 0?s.has(u,l):c===void 0?d===void 0:e.isMatch(d,c)}}t.matchesProperty=i})(cse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=fR,r=nse,n=ase,a=cse;function s(i){if(i==null)return e.identity;switch(typeof i){case"function":return i;case"object":return Array.isArray(i)&&i.length===2?a.matchesProperty(i[0],i[1]):n.matches(i);case"string":case"symbol":case"number":return r.property(i)}}t.iteratee=s})(rse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Jae,r=fR,n=Zae,a=rse;function s(i,l=r.identity){return n.isArrayLikeObject(i)?e.uniqBy(Array.from(i),a.iteratee(l)):[]}t.uniqBy=s})(Yae);var EQe=Yae.uniqBy;const O$=oh(EQe);function hse(t,e,r){return e===!0?O$(t,r):typeof e=="function"?O$(t,e):t}var mse={exports:{}},pse={},gse={exports:{}},xse={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pv=v;function SQe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var IQe=typeof Object.is=="function"?Object.is:SQe,jQe=Pv.useState,PQe=Pv.useEffect,BQe=Pv.useLayoutEffect,TQe=Pv.useDebugValue;function kQe(t,e){var r=e(),n=jQe({inst:{value:r,getSnapshot:e}}),a=n[0].inst,s=n[1];return BQe(function(){a.value=r,a.getSnapshot=e,FP(a)&&s({inst:a})},[t,r,e]),PQe(function(){return FP(a)&&s({inst:a}),t(function(){FP(a)&&s({inst:a})})},[t]),TQe(r),r}function FP(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!IQe(t,r)}catch{return!0}}function FQe(t,e){return e()}var OQe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?FQe:kQe;xse.useSyncExternalStore=Pv.useSyncExternalStore!==void 0?Pv.useSyncExternalStore:OQe;gse.exports=xse;var DQe=gse.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nj=v,RQe=DQe;function MQe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var LQe=typeof Object.is=="function"?Object.is:MQe,UQe=RQe.useSyncExternalStore,QQe=nj.useRef,VQe=nj.useEffect,HQe=nj.useMemo,$Qe=nj.useDebugValue;pse.useSyncExternalStoreWithSelector=function(t,e,r,n,a){var s=QQe(null);if(s.current===null){var i={hasValue:!1,value:null};s.current=i}else i=s.current;s=HQe(function(){function c(A){if(!u){if(u=!0,d=A,A=n(A),a!==void 0&&i.hasValue){var m=i.value;if(a(m,A))return f=m}return f=A}if(m=f,LQe(d,A))return m;var p=n(A);return a!==void 0&&a(m,p)?(d=A,m):(d=A,f=p)}var u=!1,d,f,h=r===void 0?null:r;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,r,n,a]);var l=UQe(t,s[0],s[1]);return VQe(function(){i.hasValue=!0,i.value=l},[l]),$Qe(l),l};mse.exports=pse;var GQe=mse.exports,bR=v.createContext(null),KQe=t=>t,qa=()=>{var t=v.useContext(bR);return t?t.store.dispatch:KQe},sE=()=>{},qQe=()=>sE,zQe=(t,e)=>t===e;function Hr(t){var e=v.useContext(bR);return GQe.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:qQe,e?e.store.getState:sE,e?e.store.getState:sE,e?t:sE,zQe)}function WQe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function XQe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function YQe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(r=>typeof r=="function")){const r=t.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${r}]`)}}var D$=t=>Array.isArray(t)?t:[t];function JQe(t){const e=Array.isArray(t[0])?t[0]:t;return YQe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function ZQe(t,e){const r=[],{length:n}=t;for(let a=0;a<n;a++)r.push(t[a].apply(null,e));return r}var eVe=class{constructor(t){this.value=t}deref(){return this.value}},tVe=typeof WeakRef<"u"?WeakRef:eVe,rVe=0,R$=1;function e_(){return{s:rVe,v:void 0,o:null,p:null}}function vse(t,e={}){let r=e_();const{resultEqualityCheck:n}=e;let a,s=0;function i(){var f;let l=r;const{length:c}=arguments;for(let h=0,A=c;h<A;h++){const m=arguments[h];if(typeof m=="function"||typeof m=="object"&&m!==null){let p=l.o;p===null&&(l.o=p=new WeakMap);const g=p.get(m);g===void 0?(l=e_(),p.set(m,l)):l=g}else{let p=l.p;p===null&&(l.p=p=new Map);const g=p.get(m);g===void 0?(l=e_(),p.set(m,l)):l=g}}const u=l;let d;if(l.s===R$)d=l.v;else if(d=t.apply(null,arguments),s++,n){const h=((f=a==null?void 0:a.deref)==null?void 0:f.call(a))??a;h!=null&&n(h,d)&&(d=h,s!==0&&s--),a=typeof d=="object"&&d!==null||typeof d=="function"?new tVe(d):d}return u.s=R$,u.v=d,d}return i.clearCache=()=>{r=e_(),i.resetResultsCount()},i.resultsCount=()=>s,i.resetResultsCount=()=>{s=0},i}function nVe(t,...e){const r=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,n=(...a)=>{let s=0,i=0,l,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),WQe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:h=[],argsMemoize:A=vse,argsMemoizeOptions:m=[]}=d,p=D$(h),g=D$(m),x=JQe(a),y=f(function(){return s++,u.apply(null,arguments)},...p),b=A(function(){i++;const j=ZQe(x,arguments);return l=y.apply(null,j),l},...g);return Object.assign(b,{resultFunc:u,memoizedResultFunc:y,dependencies:x,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>l,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:A})};return Object.assign(n,{withTypes:()=>n}),n}var Ut=nVe(vse),aVe=Object.assign((t,e=Ut)=>{XQe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const r=Object.keys(t),n=r.map(s=>t[s]);return e(n,(...s)=>s.reduce((i,l,c)=>(i[r[c]]=l,i),{}))},{withTypes:()=>aVe}),yse={},bse={},wse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const i=e(n),l=e(a);if(i===l&&i===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?l-i:i-l}return 0};t.compareValues=r})(wse);var Nse={},wR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"||r instanceof Symbol}t.isSymbol=e})(wR);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wR,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,i){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||i!=null&&Object.hasOwn(i,s)}t.isKey=a})(Nse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wse,r=Nse,n=tj;function a(s,i,l,c){if(s==null)return[];l=c?void 0:l,Array.isArray(s)||(s=Object.values(s)),Array.isArray(i)||(i=i==null?[null]:[i]),i.length===0&&(i=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(A=>String(A));const u=(A,m)=>{let p=A;for(let g=0;g<m.length&&p!=null;++g)p=p[m[g]];return p},d=(A,m)=>m==null||A==null?m:typeof A=="object"&&"key"in A?Object.hasOwn(m,A.key)?m[A.key]:u(m,A.path):typeof A=="function"?A(m):Array.isArray(A)?u(m,A):typeof m=="object"?m[A]:m,f=i.map(A=>(Array.isArray(A)&&A.length===1&&(A=A[0]),A==null||typeof A=="function"||Array.isArray(A)||r.isKey(A)?A:{key:A,path:n.toPath(A)}));return s.map(A=>({original:A,criteria:f.map(m=>d(m,A))})).slice().sort((A,m)=>{for(let p=0;p<f.length;p++){const g=e.compareValues(A.criteria[p],m.criteria[p],l[p]);if(g!==0)return g}return 0}).map(A=>A.original)}t.orderBy=a})(bse);var Cse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n=1){const a=[],s=Math.floor(n),i=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<s?i(d,c+1):a.push(d)}};return i(r,0),a}t.flatten=e})(Cse);var NR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yR,r=rj,n=hR,a=pR;function s(i,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&e.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?a.eq(c[l],i):!1}t.isIterateeCall=s})(NR);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=bse,r=Cse,n=NR;function a(s,...i){const l=i.length;return l>1&&n.isIterateeCall(s,i[0],i[1])?i=[]:l>2&&n.isIterateeCall(i[0],i[1],i[2])&&(i=[i[0]]),e.orderBy(s,r.flatten(i),["asc"])}t.sortBy=a})(yse);var sVe=yse.sortBy;const aj=oh(sVe);var _se=t=>t.legend.settings,iVe=t=>t.legend.size,oVe=t=>t.legend.payload,lVe=Ut([oVe,_se],(t,e)=>{var{itemSorter:r}=e,n=t.flat(1);return r?aj(n,r):n});function cVe(){return Hr(lVe)}var t_=1;function Ese(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,r]=v.useState({height:0,left:0,top:0,width:0}),n=v.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),i={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(i.height-e.height)>t_||Math.abs(i.left-e.left)>t_||Math.abs(i.top-e.top)>t_||Math.abs(i.width-e.width)>t_)&&r({height:i.height,left:i.left,top:i.top,width:i.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,n]}function Go(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var uVe=typeof Symbol=="function"&&Symbol.observable||"@@observable",M$=uVe,OP=()=>Math.random().toString(36).substring(7).split("").join("."),dVe={INIT:`@@redux/INIT${OP()}`,REPLACE:`@@redux/REPLACE${OP()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${OP()}`},GS=dVe;function CR(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function Sse(t,e,r){if(typeof t!="function")throw new Error(Go(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Go(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Go(1));return r(Sse)(t,e)}let n=t,a=e,s=new Map,i=s,l=0,c=!1;function u(){i===s&&(i=new Map,s.forEach((g,x)=>{i.set(x,g)}))}function d(){if(c)throw new Error(Go(3));return a}function f(g){if(typeof g!="function")throw new Error(Go(4));if(c)throw new Error(Go(5));let x=!0;u();const y=l++;return i.set(y,g),function(){if(x){if(c)throw new Error(Go(6));x=!1,u(),i.delete(y),s=null}}}function h(g){if(!CR(g))throw new Error(Go(7));if(typeof g.type>"u")throw new Error(Go(8));if(typeof g.type!="string")throw new Error(Go(17));if(c)throw new Error(Go(9));try{c=!0,a=n(a,g)}finally{c=!1}return(s=i).forEach(y=>{y()}),g}function A(g){if(typeof g!="function")throw new Error(Go(10));n=g,h({type:GS.REPLACE})}function m(){const g=f;return{subscribe(x){if(typeof x!="object"||x===null)throw new Error(Go(11));function y(){const w=x;w.next&&w.next(d())}return y(),{unsubscribe:g(y)}},[M$](){return this}}}return h({type:GS.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:A,[M$]:m}}function fVe(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:GS.INIT})>"u")throw new Error(Go(12));if(typeof r(void 0,{type:GS.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Go(13))})}function Ise(t){const e=Object.keys(t),r={};for(let s=0;s<e.length;s++){const i=e[s];typeof t[i]=="function"&&(r[i]=t[i])}const n=Object.keys(r);let a;try{fVe(r)}catch(s){a=s}return function(i={},l){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],h=r[f],A=i[f],m=h(A,l);if(typeof m>"u")throw l&&l.type,new Error(Go(14));u[f]=m,c=c||m!==A}return c=c||n.length!==Object.keys(i).length,c?u:i}}function KS(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,r)=>(...n)=>e(r(...n)))}function AVe(...t){return e=>(r,n)=>{const a=e(r,n);let s=()=>{throw new Error(Go(15))};const i={getState:a.getState,dispatch:(c,...u)=>s(c,...u)},l=t.map(c=>c(i));return s=KS(...l)(a.dispatch),{...a,dispatch:s}}}function jse(t){return CR(t)&&"type"in t&&typeof t.type=="string"}var Pse=Symbol.for("immer-nothing"),L$=Symbol.for("immer-draftable"),nc=Symbol.for("immer-state");function kd(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var nu=Object,Bv=nu.getPrototypeOf,qS="constructor",sj="prototype",$k="configurable",zS="enumerable",iE="writable",R2="value",th=t=>!!t&&!!t[nc];function Wd(t){var e;return t?Bse(t)||oj(t)||!!t[L$]||!!((e=t[qS])!=null&&e[L$])||lj(t)||cj(t):!1}var hVe=nu[sj][qS].toString(),U$=new WeakMap;function Bse(t){if(!t||!_R(t))return!1;const e=Bv(t);if(e===null||e===nu[sj])return!0;const r=nu.hasOwnProperty.call(e,qS)&&e[qS];if(r===Object)return!0;if(!wx(r))return!1;let n=U$.get(r);return n===void 0&&(n=Function.toString.call(r),U$.set(r,n)),n===hVe}function ij(t,e,r=!0){Rw(t)===0?(r?Reflect.ownKeys(t):nu.keys(t)).forEach(a=>{e(a,t[a],t)}):t.forEach((n,a)=>e(a,n,t))}function Rw(t){const e=t[nc];return e?e.type_:oj(t)?1:lj(t)?2:cj(t)?3:0}var Q$=(t,e,r=Rw(t))=>r===2?t.has(e):nu[sj].hasOwnProperty.call(t,e),Gk=(t,e,r=Rw(t))=>r===2?t.get(e):t[e],WS=(t,e,r,n=Rw(t))=>{n===2?t.set(e,r):n===3?t.add(r):t[e]=r};function mVe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var oj=Array.isArray,lj=t=>t instanceof Map,cj=t=>t instanceof Set,_R=t=>typeof t=="object",wx=t=>typeof t=="function",DP=t=>typeof t=="boolean";function pVe(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var bA=t=>t.copy_||t.base_,ER=t=>t.modified_?t.copy_:t.base_;function Kk(t,e){if(lj(t))return new Map(t);if(cj(t))return new Set(t);if(oj(t))return Array[sj].slice.call(t);const r=Bse(t);if(e===!0||e==="class_only"&&!r){const n=nu.getOwnPropertyDescriptors(t);delete n[nc];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const i=a[s],l=n[i];l[iE]===!1&&(l[iE]=!0,l[$k]=!0),(l.get||l.set)&&(n[i]={[$k]:!0,[iE]:!0,[zS]:l[zS],[R2]:t[i]})}return nu.create(Bv(t),n)}else{const n=Bv(t);if(n!==null&&r)return{...t};const a=nu.create(n);return nu.assign(a,t)}}function SR(t,e=!1){return uj(t)||th(t)||!Wd(t)||(Rw(t)>1&&nu.defineProperties(t,{set:r_,add:r_,clear:r_,delete:r_}),nu.freeze(t),e&&ij(t,(r,n)=>{SR(n,!0)},!1)),t}function gVe(){kd(2)}var r_={[R2]:gVe};function uj(t){return t===null||!_R(t)?!0:nu.isFrozen(t)}var XS="MapSet",qk="Patches",V$="ArrayMethods",Tse={};function rg(t){const e=Tse[t];return e||kd(0,t),e}var H$=t=>!!Tse[t],M2,kse=()=>M2,xVe=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:H$(XS)?rg(XS):void 0,arrayMethodsPlugin_:H$(V$)?rg(V$):void 0});function $$(t,e){e&&(t.patchPlugin_=rg(qk),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function zk(t){Wk(t),t.drafts_.forEach(vVe),t.drafts_=null}function Wk(t){t===M2&&(M2=t.parent_)}var G$=t=>M2=xVe(M2,t);function vVe(t){const e=t[nc];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function K$(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];if(t!==void 0&&t!==r){r[nc].modified_&&(zk(e),kd(4)),Wd(t)&&(t=q$(e,t));const{patchPlugin_:a}=e;a&&a.generateReplacementPatches_(r[nc].base_,t,e)}else t=q$(e,r);return yVe(e,t,!0),zk(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Pse?t:void 0}function q$(t,e){if(uj(e))return e;const r=e[nc];if(!r)return YS(e,t.handledSet_,t);if(!dj(r,t))return e;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(t);Dse(r,t)}return r.copy_}function yVe(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&SR(e,r)}function Fse(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var dj=(t,e)=>t.scope_===e,bVe=[];function Ose(t,e,r,n){const a=bA(t),s=t.type_;if(n!==void 0&&Gk(a,n,s)===e){WS(a,n,r,s);return}if(!t.draftLocations_){const l=t.draftLocations_=new Map;ij(a,(c,u)=>{if(th(u)){const d=l.get(u)||[];d.push(c),l.set(u,d)}})}const i=t.draftLocations_.get(e)??bVe;for(const l of i)WS(a,l,r,s)}function wVe(t,e,r){t.callbacks_.push(function(a){var l;const s=e;if(!s||!dj(s,a))return;(l=a.mapSetPlugin_)==null||l.fixSetContents(s);const i=ER(s);Ose(t,s.draft_??s,i,r),Dse(s,a)})}function Dse(t,e){var n;if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(((n=t.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:a}=e;if(a){const s=a.getPath(t);s&&a.generatePatches_(t,s,e)}Fse(t)}}function NVe(t,e,r){const{scope_:n}=t;if(th(r)){const a=r[nc];dj(a,n)&&a.callbacks_.push(function(){oE(t);const i=ER(a);Ose(t,r,i,e)})}else Wd(r)&&t.callbacks_.push(function(){const s=bA(t);t.type_===3?s.has(r)&&YS(r,n.handledSet_,n):Gk(s,e,t.type_)===r&&n.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&YS(Gk(t.copy_,e,t.type_),n.handledSet_,n)})}function YS(t,e,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||th(t)||e.has(t)||!Wd(t)||uj(t)||(e.add(t),ij(t,(n,a)=>{if(th(a)){const s=a[nc];if(dj(s,r)){const i=ER(s);WS(t,n,i,t.type_),Fse(s)}}else Wd(a)&&YS(a,e,r)})),t}function CVe(t,e){const r=oj(t),n={type_:r?1:0,scope_:e?e.scope_:kse(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=n,s=JS;r&&(a=[n],s=L2);const{revoke:i,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=i,[l,n]}var JS={get(t,e){if(e===nc)return t;let r=t.scope_.arrayMethodsPlugin_;const n=t.type_===1&&typeof e=="string";if(n&&r!=null&&r.isArrayOperationMethod(e))return r.createMethodInterceptor(t,e);const a=bA(t);if(!Q$(a,e,t.type_))return _Ve(t,a,e);const s=a[e];if(t.finalized_||!Wd(s)||n&&t.operationMethod&&(r!=null&&r.isMutatingArrayMethod(t.operationMethod))&&pVe(e))return s;if(s===RP(t.base_,e)){oE(t);const i=t.type_===1?+e:e,l=Yk(t.scope_,s,t,i);return t.copy_[i]=l}return s},has(t,e){return e in bA(t)},ownKeys(t){return Reflect.ownKeys(bA(t))},set(t,e,r){const n=Rse(bA(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const a=RP(bA(t),e),s=a==null?void 0:a[nc];if(s&&s.base_===r)return t.copy_[e]=r,t.assigned_.set(e,!1),!0;if(mVe(r,a)&&(r!==void 0||Q$(t.base_,e,t.type_)))return!0;oE(t),Xk(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_.set(e,!0),NVe(t,e,r)),!0},deleteProperty(t,e){return oE(t),RP(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),Xk(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=bA(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{[iE]:!0,[$k]:t.type_!==1||e!=="length",[zS]:n[zS],[R2]:r[e]}},defineProperty(){kd(11)},getPrototypeOf(t){return Bv(t.base_)},setPrototypeOf(){kd(12)}},L2={};for(let t in JS){let e=JS[t];L2[t]=function(){const r=arguments;return r[0]=r[0][0],e.apply(this,r)}}L2.deleteProperty=function(t,e){return L2.set.call(this,t,e,void 0)};L2.set=function(t,e,r){return JS.set.call(this,t[0],e,r,t[0])};function RP(t,e){const r=t[nc];return(r?bA(r):t)[e]}function _Ve(t,e,r){var a;const n=Rse(e,r);return n?R2 in n?n[R2]:(a=n.get)==null?void 0:a.call(t.draft_):void 0}function Rse(t,e){if(!(e in t))return;let r=Bv(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Bv(r)}}function Xk(t){t.modified_||(t.modified_=!0,t.parent_&&Xk(t.parent_))}function oE(t){t.copy_||(t.assigned_=new Map,t.copy_=Kk(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var EVe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,a)=>{if(wx(r)&&!wx(n)){const i=n;n=r;const l=this;return function(u=i,...d){return l.produce(u,f=>n.call(this,f,...d))}}wx(n)||kd(6),a!==void 0&&!wx(a)&&kd(7);let s;if(Wd(r)){const i=G$(this),l=Yk(i,r,void 0);let c=!0;try{s=n(l),c=!1}finally{c?zk(i):Wk(i)}return $$(i,a),K$(s,i)}else if(!r||!_R(r)){if(s=n(r),s===void 0&&(s=r),s===Pse&&(s=void 0),this.autoFreeze_&&SR(s,!0),a){const i=[],l=[];rg(qk).generateReplacementPatches_(r,s,{patches_:i,inversePatches_:l}),a(i,l)}return s}else kd(1,r)},this.produceWithPatches=(r,n)=>{if(wx(r))return(l,...c)=>this.produceWithPatches(l,u=>r(u,...c));let a,s;return[this.produce(r,n,(l,c)=>{a=l,s=c}),a,s]},DP(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),DP(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),DP(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Wd(e)||kd(8),th(e)&&(e=Hd(e));const r=G$(this),n=Yk(r,e,void 0);return n[nc].isManual_=!0,Wk(r),n}finishDraft(e,r){const n=e&&e[nc];(!n||!n.isManual_)&&kd(9);const{scope_:a}=n;return $$(a,r),K$(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,r){let n;for(n=r.length-1;n>=0;n--){const s=r[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(r=r.slice(n+1));const a=rg(qk).applyPatches_;return th(e)?a(e,r):this.produce(e,s=>a(s,r))}};function Yk(t,e,r,n){const[a,s]=lj(e)?rg(XS).proxyMap_(e,r):cj(e)?rg(XS).proxySet_(e,r):CVe(e,r);return((r==null?void 0:r.scope_)??kse()).drafts_.push(a),s.callbacks_=(r==null?void 0:r.callbacks_)??[],s.key_=n,r&&n!==void 0?wVe(r,s,n):s.callbacks_.push(function(c){var d;(d=c.mapSetPlugin_)==null||d.fixSetContents(s);const{patchPlugin_:u}=c;s.modified_&&u&&u.generatePatches_(s,[],c)}),a}function Hd(t){return th(t)||kd(10,t),Mse(t)}function Mse(t){if(!Wd(t)||uj(t))return t;const e=t[nc];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=Kk(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=Kk(t,!0);return ij(r,(a,s)=>{WS(r,a,Mse(s))},n),e&&(e.finalized_=!1),r}var SVe=new EVe,Lse=SVe.produce;function Use(t){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,t):a(s)}var IVe=Use(),jVe=Use,PVe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?KS:KS.apply(null,arguments)};function id(t,e){function r(...n){if(e){let a=e(...n);if(!a)throw new Error(iu(0));return{type:t,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:t,payload:n[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=n=>jse(n)&&n.type===t,r}var Qse=class $y extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,$y.prototype)}static get[Symbol.species](){return $y}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new $y(...e[0].concat(this)):new $y(...e.concat(this))}};function z$(t){return Wd(t)?Lse(t,()=>{}):t}function n_(t,e,r){return t.has(e)?t.get(e):t.set(e,r(e)).get(e)}function BVe(t){return typeof t=="boolean"}var TVe=()=>function(e){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=e??{};let i=new Qse;return r&&(BVe(r)?i.push(IVe):i.push(jVe(r.extraArgument))),i},Vse="RTK_autoBatch",ds=()=>t=>({payload:t,meta:{[Vse]:!0}}),W$=t=>e=>{setTimeout(e,t)},Hse=(t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let a=!0,s=!1,i=!1;const l=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:W$(10):t.type==="callback"?t.queueNotification:W$(t.timeout),u=()=>{i=!1,s&&(s=!1,l.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),h=n.subscribe(f);return l.add(d),()=>{h(),l.delete(d)}},dispatch(d){var f;try{return a=!((f=d==null?void 0:d.meta)!=null&&f[Vse]),s=!a,s&&(i||(i=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},kVe=t=>function(r){const{autoBatch:n=!0}=r??{};let a=new Qse(t);return n&&a.push(Hse(typeof n=="object"?n:void 0)),a};function FVe(t){const e=TVe(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:i=void 0}=t||{};let l;if(typeof r=="function")l=r;else if(CR(r))l=Ise(r);else throw new Error(iu(1));let c;typeof n=="function"?c=n(e):c=e();let u=KS;a&&(u=PVe({trace:!1,...typeof a=="object"&&a}));const d=AVe(...c),f=kVe(d);let h=typeof i=="function"?i(f):f();const A=u(...h);return Sse(l,s,A)}function $se(t){const e={},r=[];let n;const a={addCase(s,i){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(iu(28));if(l in e)throw new Error(iu(29));return e[l]=i,a},addAsyncThunk(s,i){return i.pending&&(e[s.pending.type]=i.pending),i.rejected&&(e[s.rejected.type]=i.rejected),i.fulfilled&&(e[s.fulfilled.type]=i.fulfilled),i.settled&&r.push({matcher:s.settled,reducer:i.settled}),a},addMatcher(s,i){return r.push({matcher:s,reducer:i}),a},addDefaultCase(s){return n=s,a}};return t(a),[e,r,n]}function OVe(t){return typeof t=="function"}function DVe(t,e){let[r,n,a]=$se(e),s;if(OVe(t))s=()=>z$(t());else{const l=z$(t);s=()=>l}function i(l=s(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if(th(d)){const A=f(d,c);return A===void 0?d:A}else{if(Wd(d))return Lse(d,h=>f(h,c));{const h=f(d,c);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},l)}return i.getInitialState=s,i}var RVe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",MVe=(t=21)=>{let e="",r=t;for(;r--;)e+=RVe[Math.random()*64|0];return e},LVe=Symbol.for("rtk-slice-createasyncthunk");function UVe(t,e){return`${t}/${e}`}function QVe({creators:t}={}){var r;const e=(r=t==null?void 0:t.asyncThunk)==null?void 0:r[LVe];return function(a){const{name:s,reducerPath:i=s}=a;if(!s)throw new Error(iu(11));const l=(typeof a.reducers=="function"?a.reducers(HVe()):a.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(w,j){const I=typeof w=="string"?w:w.type;if(!I)throw new Error(iu(12));if(I in u.sliceCaseReducersByType)throw new Error(iu(13));return u.sliceCaseReducersByType[I]=j,d},addMatcher(w,j){return u.sliceMatchers.push({matcher:w,reducer:j}),d},exposeAction(w,j){return u.actionCreators[w]=j,d},exposeCaseReducer(w,j){return u.sliceCaseReducersByName[w]=j,d}};c.forEach(w=>{const j=l[w],I={reducerName:w,type:UVe(s,w),createNotation:typeof a.reducers=="function"};GVe(j)?qVe(I,j,d,e):$Ve(I,j,d)});function f(){const[w={},j=[],I=void 0]=typeof a.extraReducers=="function"?$se(a.extraReducers):[a.extraReducers],_={...w,...u.sliceCaseReducersByType};return DVe(a.initialState,S=>{for(let E in _)S.addCase(E,_[E]);for(let E of u.sliceMatchers)S.addMatcher(E.matcher,E.reducer);for(let E of j)S.addMatcher(E.matcher,E.reducer);I&&S.addDefaultCase(I)})}const h=w=>w,A=new Map,m=new WeakMap;let p;function g(w,j){return p||(p=f()),p(w,j)}function x(){return p||(p=f()),p.getInitialState()}function y(w,j=!1){function I(S){let E=S[w];return typeof E>"u"&&j&&(E=n_(m,I,x)),E}function _(S=h){const E=n_(A,j,()=>new WeakMap);return n_(E,S,()=>{const k={};for(const[P,T]of Object.entries(a.selectors??{}))k[P]=VVe(T,S,()=>n_(m,S,x),j);return k})}return{reducerPath:w,getSelectors:_,get selectors(){return _(I)},selectSlice:I}}const b={name:s,reducer:g,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:x,...y(i),injectInto(w,{reducerPath:j,...I}={}){const _=j??i;return w.inject({reducerPath:_,reducer:g},I),{...b,...y(_,!0)}}};return b}}function VVe(t,e,r,n){function a(s,...i){let l=e(s);return typeof l>"u"&&n&&(l=r()),t(l,...i)}return a.unwrapped=t,a}var Bc=QVe();function HVe(){function t(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function $Ve({type:t,reducerName:e,createNotation:r},n,a){let s,i;if("reducer"in n){if(r&&!KVe(n))throw new Error(iu(17));s=n.reducer,i=n.prepare}else s=n;a.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,i?id(t,i):id(t))}function GVe(t){return t._reducerDefinitionType==="asyncThunk"}function KVe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function qVe({type:t,reducerName:e},r,n,a){if(!a)throw new Error(iu(18));const{payloadCreator:s,fulfilled:i,pending:l,rejected:c,settled:u,options:d}=r,f=a(t,s,d);n.exposeAction(e,f),i&&n.addCase(f.fulfilled,i),l&&n.addCase(f.pending,l),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(e,{fulfilled:i||a_,pending:l||a_,rejected:c||a_,settled:u||a_})}function a_(){}var zVe="task",Gse="listener",Kse="completed",IR="cancelled",WVe=`task-${IR}`,XVe=`task-${Kse}`,Jk=`${Gse}-${IR}`,YVe=`${Gse}-${Kse}`,fj=class{constructor(t){dr(this,"name","TaskAbortError");dr(this,"message");this.code=t,this.message=`${zVe} ${IR} (reason: ${t})`}},jR=(t,e)=>{if(typeof t!="function")throw new TypeError(iu(32))},ZS=()=>{},qse=(t,e=ZS)=>(t.catch(e),t),zse=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Sp=t=>{if(t.aborted)throw new fj(t.reason)};function Wse(t,e){let r=ZS;return new Promise((n,a)=>{const s=()=>a(new fj(t.reason));if(t.aborted){s();return}r=zse(t,s),e.finally(()=>r()).then(n,a)}).finally(()=>{r=ZS})}var JVe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(r){return{status:r instanceof fj?"cancelled":"rejected",error:r}}finally{e==null||e()}},eI=t=>e=>qse(Wse(t,e).then(r=>(Sp(t),r))),Xse=t=>{const e=eI(t);return r=>e(new Promise(n=>setTimeout(n,r)))},{assign:iv}=Object,X$={},Aj="listenerMiddleware",ZVe=(t,e)=>{const r=n=>zse(t,()=>n.abort(t.reason));return(n,a)=>{jR(n);const s=new AbortController;r(s);const i=JVe(async()=>{Sp(t),Sp(s.signal);const l=await n({pause:eI(s.signal),delay:Xse(s.signal),signal:s.signal});return Sp(s.signal),l},()=>s.abort(XVe));return a!=null&&a.autoJoin&&e.push(i.catch(ZS)),{result:eI(t)(i),cancel(){s.abort(WVe)}}}},eHe=(t,e)=>{const r=async(n,a)=>{Sp(e);let s=()=>{};const l=[new Promise((c,u)=>{let d=t({predicate:n,effect:(f,h)=>{h.unsubscribe(),c([f,h.getState(),h.getOriginalState()])}});s=()=>{d(),u()}})];a!=null&&l.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await Wse(e,Promise.race(l));return Sp(e),c}finally{s()}};return(n,a)=>qse(r(n,a))},Yse=t=>{let{type:e,actionCreator:r,matcher:n,predicate:a,effect:s}=t;if(e)a=id(e).match;else if(r)e=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(iu(21));return jR(s),{predicate:a,type:e,effect:s}},Jse=iv(t=>{const{type:e,predicate:r,effect:n}=Yse(t);return{id:MVe(),effect:n,type:e,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(iu(22))}}},{withTypes:()=>Jse}),Y$=(t,e)=>{const{type:r,effect:n,predicate:a}=Yse(e);return Array.from(t.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},Zk=t=>{t.pending.forEach(e=>{e.abort(Jk)})},tHe=(t,e)=>()=>{for(const r of e.keys())Zk(r);t.clear()},J$=(t,e,r)=>{try{t(e,r)}catch(n){setTimeout(()=>{throw n},0)}},Zse=iv(id(`${Aj}/add`),{withTypes:()=>Zse}),rHe=id(`${Aj}/removeAll`),eie=iv(id(`${Aj}/remove`),{withTypes:()=>eie}),nHe=(...t)=>{console.error(`${Aj}/error`,...t)},Mw=(t={})=>{const e=new Map,r=new Map,n=A=>{const m=r.get(A)??0;r.set(A,m+1)},a=A=>{const m=r.get(A)??1;m===1?r.delete(A):r.set(A,m-1)},{extra:s,onError:i=nHe}=t;jR(i);const l=A=>(A.unsubscribe=()=>e.delete(A.id),e.set(A.id,A),m=>{A.unsubscribe(),m!=null&&m.cancelActive&&Zk(A)}),c=A=>{const m=Y$(e,A)??Jse(A);return l(m)};iv(c,{withTypes:()=>c});const u=A=>{const m=Y$(e,A);return m&&(m.unsubscribe(),A.cancelActive&&Zk(m)),!!m};iv(u,{withTypes:()=>u});const d=async(A,m,p,g)=>{const x=new AbortController,y=eHe(c,x.signal),b=[];try{A.pending.add(x),n(A),await Promise.resolve(A.effect(m,iv({},p,{getOriginalState:g,condition:(w,j)=>y(w,j).then(Boolean),take:y,delay:Xse(x.signal),pause:eI(x.signal),extra:s,signal:x.signal,fork:ZVe(x.signal,b),unsubscribe:A.unsubscribe,subscribe:()=>{e.set(A.id,A)},cancelActiveListeners:()=>{A.pending.forEach((w,j,I)=>{w!==x&&(w.abort(Jk),I.delete(w))})},cancel:()=>{x.abort(Jk),A.pending.delete(x)},throwIfCancelled:()=>{Sp(x.signal)}})))}catch(w){w instanceof fj||J$(i,w,{raisedBy:"effect"})}finally{await Promise.all(b),x.abort(YVe),a(A),A.pending.delete(x)}},f=tHe(e,r);return{middleware:A=>m=>p=>{if(!jse(p))return m(p);if(Zse.match(p))return c(p.payload);if(rHe.match(p)){f();return}if(eie.match(p))return u(p.payload);let g=A.getState();const x=()=>{if(g===X$)throw new Error(iu(23));return g};let y;try{if(y=m(p),e.size>0){const b=A.getState(),w=Array.from(e.values());for(const j of w){let I=!1;try{I=j.predicate(p,b,g)}catch(_){I=!1,J$(i,_,{raisedBy:"predicate"})}I&&d(j,p,A,x)}}}finally{g=X$}return y},startListening:c,stopListening:u,clearListeners:f}};function iu(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var aHe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},tie=Bc({name:"chartLayout",initialState:aHe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var r,n,a,s;t.margin.top=(r=e.payload.top)!==null&&r!==void 0?r:0,t.margin.right=(n=e.payload.right)!==null&&n!==void 0?n:0,t.margin.bottom=(a=e.payload.bottom)!==null&&a!==void 0?a:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:sHe,setLayout:iHe,setChartSize:oHe,setScale:lHe}=tie.actions,cHe=tie.reducer;function rie(t,e,r){return Array.isArray(t)&&t&&e+r!==0?t.slice(e,r+1):t}function Ms(t){return Number.isFinite(t)}function cm(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function Z$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Hx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Z$(Object(r),!0).forEach(function(n){uHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uHe(t,e,r){return(e=dHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dHe(t){var e=fHe(t,"string");return typeof e=="symbol"?e:e+""}function fHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function as(t,e,r){return Bo(t)||Bo(e)?r:Hf(e)?tg(t,e,r):typeof e=="function"?e(t):r}var AHe=(t,e,r)=>{if(e&&r){var{width:n,height:a}=r,{align:s,verticalAlign:i,layout:l}=e;if((l==="vertical"||l==="horizontal"&&i==="middle")&&s!=="center"&&Kr(t[s]))return Hx(Hx({},t),{},{[s]:t[s]+(n||0)});if((l==="horizontal"||l==="vertical"&&s==="center")&&i!=="middle"&&Kr(t[i]))return Hx(Hx({},t),{},{[i]:t[i]+(a||0)})}return t},Eg=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",eG=1e-4,hHe=t=>{var e=t.domain();if(!(!e||e.length<=2)){var r=e.length,n=t.range(),a=Math.min(n[0],n[1])-eG,s=Math.max(n[0],n[1])+eG,i=t(e[0]),l=t(e[r-1]);(i<a||i>s||l<a||l>s)&&t.domain([e[0],e[r-1]])}},mHe=(t,e)=>{if(!e||e.length!==2||!Kr(e[0])||!Kr(e[1]))return t;var r=Math.min(e[0],e[1]),n=Math.max(e[0],e[1]),a=[t[0],t[1]];return(!Kr(t[0])||t[0]<r)&&(a[0]=r),(!Kr(t[1])||t[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},pHe=t=>{var e,r=t.length;if(!(r<=0)){var n=(e=t[0])===null||e===void 0?void 0:e.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var s=0,i=0,l=0;l<r;++l){var c=t[l],u=c==null?void 0:c[a];if(u!=null){var d=u[1],f=u[0],h=Vf(d)?f:d;h>=0?(u[0]=s,u[1]=s+h,s=d):(u[0]=i,u[1]=i+h,i=d)}}}},gHe=t=>{var e,r=t.length;if(!(r<=0)){var n=(e=t[0])===null||e===void 0?void 0:e.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var s=0,i=0;i<r;++i){var l=t[i],c=l==null?void 0:l[a];if(c!=null){var u=Vf(c[1])?c[0]:c[1];u>=0?(c[0]=s,c[1]=s+u,s=c[1]):(c[0]=0,c[1]=0)}}}},xHe={sign:pHe,expand:z9e,none:eg,silhouette:W9e,wiggle:X9e,positive:gHe},vHe=(t,e,r)=>{var n,a=(n=xHe[r])!==null&&n!==void 0?n:eg,s=q9e().keys(e).value((l,c)=>Number(as(l,c,0))).order(Vk).offset(a),i=s(t);return i.forEach((l,c)=>{l.forEach((u,d)=>{var f=as(t[d],e[c],0);Array.isArray(f)&&f.length===2&&Kr(f[0])&&Kr(f[1])&&(u[0]=f[0],u[1]=f[1])})}),i};function yHe(t){return t==null?void 0:String(t)}var tG=t=>{var{axis:e,ticks:r,offset:n,bandSize:a,entry:s,index:i}=t;if(e.type==="category")return r[i]?r[i].coordinate+n:null;var l=as(s,e.dataKey,e.scale.domain()[i]);return Bo(l)?null:e.scale(l)-a/2+n},bHe=t=>{var{numericAxis:e}=t,r=e.scale.domain();if(e.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},wHe=t=>{var e=t.flat(2).filter(Kr);return[Math.min(...e),Math.max(...e)]},NHe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],CHe=(t,e,r)=>{if(t!=null)return NHe(Object.keys(t).reduce((n,a)=>{var s=t[a];if(!s)return n;var{stackedData:i}=s,l=i.reduce((c,u)=>{var d=rie(u,e,r),f=wHe(d);return!Ms(f[0])||!Ms(f[1])?c:[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},rG=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,nG=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,tI=(t,e,r)=>{if(t&&t.scale&&t.scale.bandwidth){var n=t.scale.bandwidth();if(!r||n>0)return n}if(t&&e&&e.length>=2){for(var a=aj(e,d=>d.coordinate),s=1/0,i=1,l=a.length;i<l;i++){var c=a[i],u=a[i-1];s=Math.min(((c==null?void 0:c.coordinate)||0)-((u==null?void 0:u.coordinate)||0),s)}return s===1/0?0:s}return r?void 0:0};function aG(t){var{tooltipEntrySettings:e,dataKey:r,payload:n,value:a,name:s}=t;return Hx(Hx({},e),{},{dataKey:r,payload:n,value:a,name:s})}function hj(t,e){if(t)return String(t);if(typeof e=="string")return e}var _He=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},EHe=(t,e)=>e==="centric"?t.angle:t.radius,gh=t=>t.layout.width,xh=t=>t.layout.height,SHe=t=>t.layout.scale,nie=t=>t.layout.margin,mj=Ut(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),pj=Ut(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),aie="data-recharts-item-index",sie="data-recharts-item-id",Lw=60;function sG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function s_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sG(Object(r),!0).forEach(function(n){IHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function IHe(t,e,r){return(e=jHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jHe(t){var e=PHe(t,"string");return typeof e=="symbol"?e:e+""}function PHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var BHe=t=>t.brush.height;function THe(t){var e=pj(t);return e.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:Lw;return r+a}return r},0)}function kHe(t){var e=pj(t);return e.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:Lw;return r+a}return r},0)}function FHe(t){var e=mj(t);return e.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function OHe(t){var e=mj(t);return e.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var so=Ut([gh,xh,nie,BHe,THe,kHe,FHe,OHe,_se,iVe],(t,e,r,n,a,s,i,l,c,u)=>{var d={left:(r.left||0)+a,right:(r.right||0)+s},f={top:(r.top||0)+i,bottom:(r.bottom||0)+l},h=s_(s_({},f),d),A=h.bottom;h.bottom+=n,h=AHe(h,c,u);var m=t-h.left-h.right,p=e-h.top-h.bottom;return s_(s_({brushBottom:A},h),{},{width:Math.max(m,0),height:Math.max(p,0)})}),DHe=Ut(so,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),PR=Ut(gh,xh,(t,e)=>({x:0,y:0,width:t,height:e})),RHe=v.createContext(null),hu=()=>v.useContext(RHe)!=null,gj=t=>t.brush,xj=Ut([gj,so,nie],(t,e,r)=>({height:t.height,x:Kr(t.x)?t.x:e.left,y:Kr(t.y)?t.y:e.top+e.height+e.brushBottom-((r==null?void 0:r.bottom)||0),width:Kr(t.width)?t.width:e.width})),iie={},oie={},lie={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n,{signal:a,edges:s}={}){let i,l=null;const c=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{l!==null&&(r.apply(i,l),i=void 0,l=null)},f=()=>{u&&d(),p()};let h=null;const A=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},n)},m=()=>{h!==null&&(clearTimeout(h),h=null)},p=()=>{m(),i=void 0,l=null},g=()=>{d()},x=function(...y){if(a!=null&&a.aborted)return;i=this,l=y;const b=h==null;A(),c&&b&&d()};return x.schedule=A,x.cancel=p,x.flush=g,a==null||a.addEventListener("abort",p,{once:!0}),x}t.debounce=e})(lie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=lie;function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:i=!1,trailing:l=!0,maxWait:c}=s,u=Array(2);i&&(u[0]="leading"),l&&(u[1]="trailing");let d,f=null;const h=e.debounce(function(...p){d=n.apply(this,p),f=null},a,{edges:u}),A=function(...p){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,p),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,p),d)},m=()=>(h.flush(),d);return A.cancel=h.cancel,A.flush=m,A}t.debounce=r})(oie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=oie;function r(n,a=0,s={}){const{leading:i=!0,trailing:l=!0}=s;return e.debounce(n,a,{leading:i,maxWait:a,trailing:l})}t.throttle=r})(iie);var MHe=iie.throttle;const LHe=oh(MHe);var iG=function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var i=0;console.warn(r.replace(/%s/g,()=>a[i++]))}},cie=(t,e,r)=>{var{width:n="100%",height:a="100%",aspect:s,maxHeight:i}=r,l=eh(n)?t:Number(n),c=eh(a)?e:Number(a);return s&&s>0&&(l?c=l/s:c&&(l=c*s),i&&c!=null&&c>i&&(c=i)),{calculatedWidth:l,calculatedHeight:c}},UHe={width:0,height:0,overflow:"visible"},QHe={width:0,overflowX:"visible"},VHe={height:0,overflowY:"visible"},HHe={},$He=t=>{var{width:e,height:r}=t,n=eh(e),a=eh(r);return n&&a?UHe:n?QHe:a?VHe:HHe};function GHe(t){var{width:e,height:r,aspect:n}=t,a=e,s=r;return a===void 0&&s===void 0?(a="100%",s="100%"):a===void 0?a=n&&n>0?void 0:"100%":s===void 0&&(s=n&&n>0?void 0:"100%"),{width:a,height:s}}function eF(){return eF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},eF.apply(null,arguments)}function oG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function lG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oG(Object(r),!0).forEach(function(n){KHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function KHe(t,e,r){return(e=qHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qHe(t){var e=zHe(t,"string");return typeof e=="symbol"?e:e+""}function zHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uie=v.createContext({width:-1,height:-1});function WHe(t){return cm(t.width)&&cm(t.height)}function die(t){var{children:e,width:r,height:n}=t,a=v.useMemo(()=>({width:r,height:n}),[r,n]);return WHe(a)?v.createElement(uie.Provider,{value:a},e):null}var BR=()=>v.useContext(uie),XHe=v.forwardRef((t,e)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a,height:s,minWidth:i=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:f,className:h,onResize:A,style:m={}}=t,p=v.useRef(null),g=v.useRef();g.current=A,v.useImperativeHandle(e,()=>p.current);var[x,y]=v.useState({containerWidth:n.width,containerHeight:n.height}),b=v.useCallback((S,E)=>{y(k=>{var P=Math.round(S),T=Math.round(E);return k.containerWidth===P&&k.containerHeight===T?k:{containerWidth:P,containerHeight:T}})},[]);v.useEffect(()=>{if(p.current==null||typeof ResizeObserver>"u")return Ow;var S=T=>{var O,{width:W,height:Ae}=T[0].contentRect;b(W,Ae),(O=g.current)===null||O===void 0||O.call(g,W,Ae)};d>0&&(S=LHe(S,d,{trailing:!0,leading:!1}));var E=new ResizeObserver(S),{width:k,height:P}=p.current.getBoundingClientRect();return b(k,P),E.observe(p.current),()=>{E.disconnect()}},[b,d]);var{containerWidth:w,containerHeight:j}=x;iG(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:I,calculatedHeight:_}=cie(w,j,{width:a,height:s,aspect:r,maxHeight:c});return iG(I!=null&&I>0||_!=null&&_>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,I,_,a,s,i,l,r),v.createElement("div",{id:f?"".concat(f):void 0,className:Sa("recharts-responsive-container",h),style:lG(lG({},m),{},{width:a,height:s,minWidth:i,minHeight:l,maxHeight:c}),ref:p},v.createElement("div",{style:$He({width:a,height:s})},v.createElement(die,{width:I,height:_},u)))}),cG=v.forwardRef((t,e)=>{var r=BR();if(cm(r.width)&&cm(r.height))return t.children;var{width:n,height:a}=GHe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:i}=cie(void 0,void 0,{width:n,height:a,aspect:t.aspect,maxHeight:t.maxHeight});return Kr(s)&&Kr(i)?v.createElement(die,{width:s,height:i},t.children):v.createElement(XHe,eF({},t,{width:n,height:a,ref:e}))});function fie(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var vj=()=>{var t,e=hu(),r=Hr(DHe),n=Hr(xj),a=(t=Hr(gj))===null||t===void 0?void 0:t.padding;return!e||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},YHe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},JHe=()=>{var t;return(t=Hr(so))!==null&&t!==void 0?t:YHe},Aie=()=>Hr(gh),hie=()=>Hr(xh),ZHe=()=>Hr(t=>t.layout.margin),ra=t=>t.layout.layoutType,Uw=()=>Hr(ra),e$e=()=>{var t=Uw();return t!==void 0},yj=t=>{var e=qa(),r=hu(),{width:n,height:a}=t,s=BR(),i=n,l=a;return s&&(i=s.width>0?s.width:n,l=s.height>0?s.height:a),v.useEffect(()=>{!r&&cm(i)&&cm(l)&&e(oHe({width:i,height:l}))},[e,r,i,l]),null},mie=Symbol.for("immer-nothing"),uG=Symbol.for("immer-draftable"),du=Symbol.for("immer-state");function Fd(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var U2=Object.getPrototypeOf;function Tv(t){return!!t&&!!t[du]}function ng(t){var e;return t?pie(t)||Array.isArray(t)||!!t[uG]||!!((e=t.constructor)!=null&&e[uG])||Qw(t)||wj(t):!1}var t$e=Object.prototype.constructor.toString(),dG=new WeakMap;function pie(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=dG.get(r);return n===void 0&&(n=Function.toString.call(r),dG.set(r,n)),n===t$e}function rI(t,e,r=!0){bj(t)===0?(r?Reflect.ownKeys(t):Object.keys(t)).forEach(a=>{e(a,t[a],t)}):t.forEach((n,a)=>e(a,n,t))}function bj(t){const e=t[du];return e?e.type_:Array.isArray(t)?1:Qw(t)?2:wj(t)?3:0}function tF(t,e){return bj(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function gie(t,e,r){const n=bj(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function r$e(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Qw(t){return t instanceof Map}function wj(t){return t instanceof Set}function qm(t){return t.copy_||t.base_}function rF(t,e){if(Qw(t))return new Map(t);if(wj(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=pie(t);if(e===!0||e==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(t);delete n[du];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const i=a[s],l=n[i];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[i]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[i]})}return Object.create(U2(t),n)}else{const n=U2(t);if(n!==null&&r)return{...t};const a=Object.create(n);return Object.assign(a,t)}}function TR(t,e=!1){return Nj(t)||Tv(t)||!ng(t)||(bj(t)>1&&Object.defineProperties(t,{set:i_,add:i_,clear:i_,delete:i_}),Object.freeze(t),e&&Object.values(t).forEach(r=>TR(r,!0))),t}function n$e(){Fd(2)}var i_={value:n$e};function Nj(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var a$e={};function ag(t){const e=a$e[t];return e||Fd(0,t),e}var Q2;function xie(){return Q2}function s$e(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function fG(t,e){e&&(ag("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function nF(t){aF(t),t.drafts_.forEach(i$e),t.drafts_=null}function aF(t){t===Q2&&(Q2=t.parent_)}function AG(t){return Q2=s$e(Q2,t)}function i$e(t){const e=t[du];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function hG(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[du].modified_&&(nF(e),Fd(4)),ng(t)&&(t=nI(e,t),e.parent_||aI(e,t)),e.patches_&&ag("Patches").generateReplacementPatches_(r[du].base_,t,e.patches_,e.inversePatches_)):t=nI(e,r,[]),nF(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==mie?t:void 0}function nI(t,e,r){if(Nj(e))return e;const n=t.immer_.shouldUseStrictIteration(),a=e[du];if(!a)return rI(e,(s,i)=>mG(t,a,e,s,i,r),n),e;if(a.scope_!==t)return e;if(!a.modified_)return aI(t,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const s=a.copy_;let i=s,l=!1;a.type_===3&&(i=new Set(s),s.clear(),l=!0),rI(i,(c,u)=>mG(t,a,s,c,u,r,l),n),aI(t,s,!1),r&&t.patches_&&ag("Patches").generatePatches_(a,r,t.patches_,t.inversePatches_)}return a.copy_}function mG(t,e,r,n,a,s,i){if(a==null||typeof a!="object"&&!i)return;const l=Nj(a);if(!(l&&!i)){if(Tv(a)){const c=s&&e&&e.type_!==3&&!tF(e.assigned_,n)?s.concat(n):void 0,u=nI(t,a,c);if(gie(r,n,u),Tv(u))t.canAutoFreeze_=!1;else return}else i&&r.add(a);if(ng(a)&&!l){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[n]===a&&l)return;nI(t,a),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&(Qw(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&aI(t,a)}}}function aI(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&TR(e,r)}function o$e(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:xie(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=kR;r&&(a=[n],s=V2);const{revoke:i,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=i,l}var kR={get(t,e){if(e===du)return t;const r=qm(t);if(!tF(r,e))return l$e(t,r,e);const n=r[e];return t.finalized_||!ng(n)?n:n===MP(t.base_,e)?(LP(t),t.copy_[e]=iF(n,t)):n},has(t,e){return e in qm(t)},ownKeys(t){return Reflect.ownKeys(qm(t))},set(t,e,r){const n=vie(qm(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const a=MP(qm(t),e),s=a==null?void 0:a[du];if(s&&s.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(r$e(r,a)&&(r!==void 0||tF(t.base_,e)))return!0;LP(t),sF(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return MP(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,LP(t),sF(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=qm(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){Fd(11)},getPrototypeOf(t){return U2(t.base_)},setPrototypeOf(){Fd(12)}},V2={};rI(kR,(t,e)=>{V2[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});V2.deleteProperty=function(t,e){return V2.set.call(this,t,e,void 0)};V2.set=function(t,e,r){return kR.set.call(this,t[0],e,r,t[0])};function MP(t,e){const r=t[du];return(r?qm(r):t)[e]}function l$e(t,e,r){var a;const n=vie(e,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(t.draft_):void 0}function vie(t,e){if(!(e in t))return;let r=U2(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=U2(r)}}function sF(t){t.modified_||(t.modified_=!0,t.parent_&&sF(t.parent_))}function LP(t){t.copy_||(t.copy_=rF(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var c$e=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const s=r;r=e;const i=this;return function(c=s,...u){return i.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&Fd(6),n!==void 0&&typeof n!="function"&&Fd(7);let a;if(ng(e)){const s=AG(this),i=iF(e,void 0);let l=!0;try{a=r(i),l=!1}finally{l?nF(s):aF(s)}return fG(s,n),hG(a,s)}else if(!e||typeof e!="object"){if(a=r(e),a===void 0&&(a=e),a===mie&&(a=void 0),this.autoFreeze_&&TR(a,!0),n){const s=[],i=[];ag("Patches").generateReplacementPatches_(e,a,s,i),n(s,i)}return a}else Fd(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(i,...l)=>this.produceWithPatches(i,c=>e(c,...l));let n,a;return[this.produce(e,r,(i,l)=>{n=i,a=l}),n,a]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){ng(t)||Fd(8),Tv(t)&&(t=u$e(t));const e=AG(this),r=iF(t,void 0);return r[du].isManual_=!0,aF(e),r}finishDraft(t,e){const r=t&&t[du];(!r||!r.isManual_)&&Fd(9);const{scope_:n}=r;return fG(n,e),hG(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const a=e[r];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}r>-1&&(e=e.slice(r+1));const n=ag("Patches").applyPatches_;return Tv(t)?n(t,e):this.produce(t,a=>n(a,e))}};function iF(t,e){const r=Qw(t)?ag("MapSet").proxyMap_(t,e):wj(t)?ag("MapSet").proxySet_(t,e):o$e(t,e);return(e?e.scope_:xie()).drafts_.push(r),r}function u$e(t){return Tv(t)||Fd(10,t),yie(t)}function yie(t){if(!ng(t)||Nj(t))return t;const e=t[du];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=rF(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=rF(t,!0);return rI(r,(a,s)=>{gie(r,a,yie(s))},n),e&&(e.finalized_=!1),r}var d$e=new c$e;d$e.produce;var f$e={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},bie=Bc({name:"legend",initialState:f$e,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:ds()},replaceLegendPayload:{reducer(t,e){var{prev:r,next:n}=e.payload,a=Hd(t).payload.indexOf(r);a>-1&&(t.payload[a]=n)},prepare:ds()},removeLegendPayload:{reducer(t,e){var r=Hd(t).payload.indexOf(e.payload);r>-1&&t.payload.splice(r,1)},prepare:ds()}}}),{setLegendSize:pG,setLegendSettings:A$e,addLegendPayload:wie,replaceLegendPayload:Nie,removeLegendPayload:Cie}=bie.actions,h$e=bie.reducer,m$e=["contextPayload"];function oF(){return oF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},oF.apply(null,arguments)}function gG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function kv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gG(Object(r),!0).forEach(function(n){p$e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function p$e(t,e,r){return(e=g$e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function g$e(t){var e=x$e(t,"string");return typeof e=="symbol"?e:e+""}function x$e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function v$e(t,e){if(t==null)return{};var r,n,a=y$e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function y$e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function b$e(t){return t.value}function w$e(t){var{contextPayload:e}=t,r=v$e(t,m$e),n=hse(e,t.payloadUniqBy,b$e),a=kv(kv({},r),{},{payload:n});return v.isValidElement(t.content)?v.cloneElement(t.content,a):typeof t.content=="function"?v.createElement(t.content,a):v.createElement(_Qe,a)}function N$e(t,e,r,n,a,s){var{layout:i,align:l,verticalAlign:c}=e,u,d;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(l==="center"&&i==="vertical"?u={left:((n||0)-s.width)/2}:u=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(c==="middle"?d={top:((a||0)-s.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),kv(kv({},u),d)}function C$e(t){var e=qa();return v.useEffect(()=>{e(A$e(t))},[e,t]),null}function _$e(t){var e=qa();return v.useEffect(()=>(e(pG(t)),()=>{e(pG({width:0,height:0}))}),[e,t]),null}function E$e(t,e,r,n){return t==="vertical"&&Kr(e)?{height:e}:t==="horizontal"?{width:r||n}:null}var S$e={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function lF(t){var e=sl(t,S$e),r=cVe(),n=g9e(),a=ZHe(),{width:s,height:i,wrapperStyle:l,portal:c}=e,[u,d]=Ese([r]),f=Aie(),h=hie();if(f==null||h==null)return null;var A=f-((a==null?void 0:a.left)||0)-((a==null?void 0:a.right)||0),m=E$e(e.layout,i,s,A),p=c?l:kv(kv({position:"absolute",width:(m==null?void 0:m.width)||s||"auto",height:(m==null?void 0:m.height)||i||"auto"},N$e(l,e,a,f,h,u)),l),g=c??n;if(g==null||r==null)return null;var x=v.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:d},v.createElement(C$e,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!c&&v.createElement(_$e,{width:u.width,height:u.height}),v.createElement(w$e,oF({},e,m,{margin:a,chartWidth:f,chartHeight:h,contextPayload:r})));return su.createPortal(x,g)}lF.displayName="Legend";function cF(){return cF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cF.apply(null,arguments)}function xG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function UP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xG(Object(r),!0).forEach(function(n){I$e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function I$e(t,e,r){return(e=j$e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function j$e(t){var e=P$e(t,"string");return typeof e=="symbol"?e:e+""}function P$e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function B$e(t){return Array.isArray(t)&&Hf(t[0])&&Hf(t[1])?t.join(" ~ "):t}var T$e=t=>{var{separator:e=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:i,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=t,A=()=>{if(s&&s.length){var j={padding:0,margin:0},I=(l?aj(s,l):s).map((_,S)=>{if(_.type==="none")return null;var E=_.formatter||i||B$e,{value:k,name:P}=_,T=k,O=P;if(E){var W=E(k,P,_,S,s);if(Array.isArray(W))[T,O]=W;else if(W!=null)T=W;else return null}var Ae=UP({display:"block",paddingTop:4,paddingBottom:4,color:_.color||"#000"},n);return v.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(S),style:Ae},Hf(O)?v.createElement("span",{className:"recharts-tooltip-item-name"},O):null,Hf(O)?v.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,v.createElement("span",{className:"recharts-tooltip-item-value"},T),v.createElement("span",{className:"recharts-tooltip-item-unit"},_.unit||""))});return v.createElement("ul",{className:"recharts-tooltip-item-list",style:j},I)}return null},m=UP({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),p=UP({margin:0},a),g=!Bo(d),x=g?d:"",y=Sa("recharts-default-tooltip",c),b=Sa("recharts-tooltip-label",u);g&&f&&s!==void 0&&s!==null&&(x=f(d,s));var w=h?{role:"status","aria-live":"assertive"}:{};return v.createElement("div",cF({className:y,style:m},w),v.createElement("p",{className:b,style:p},v.isValidElement(x)?x:"".concat(x)),A())},fy="recharts-tooltip-wrapper",k$e={visibility:"hidden"};function F$e(t){var{coordinate:e,translateX:r,translateY:n}=t;return Sa(fy,{["".concat(fy,"-right")]:Kr(r)&&e&&Kr(e.x)&&r>=e.x,["".concat(fy,"-left")]:Kr(r)&&e&&Kr(e.x)&&r<e.x,["".concat(fy,"-bottom")]:Kr(n)&&e&&Kr(e.y)&&n>=e.y,["".concat(fy,"-top")]:Kr(n)&&e&&Kr(e.y)&&n<e.y})}function vG(t){var{allowEscapeViewBox:e,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=t;if(s&&Kr(s[n]))return s[n];var d=r[n]-l-(a>0?a:0),f=r[n]+a;if(e[n])return i[n]?d:f;var h=c[n];if(h==null)return 0;if(i[n]){var A=d,m=h;return A<m?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var p=f+l,g=h+u;return p>g?Math.max(d,h):Math.max(f,h)}function O$e(t){var{translateX:e,translateY:r,useTranslate3d:n}=t;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function D$e(t){var{allowEscapeViewBox:e,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:i,useTranslate3d:l,viewBox:c}=t,u,d,f;return i.height>0&&i.width>0&&r?(d=vG({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.width,viewBox:c,viewBoxDimension:c.width}),f=vG({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.height,viewBox:c,viewBoxDimension:c.height}),u=O$e({translateX:d,translateY:f,useTranslate3d:l})):u=k$e,{cssProperties:u,cssClasses:F$e({translateX:d,translateY:f,coordinate:r})}}function yG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function o_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yG(Object(r),!0).forEach(function(n){uF(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uF(t,e,r){return(e=R$e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function R$e(t){var e=M$e(t,"string");return typeof e=="symbol"?e:e+""}function M$e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class L$e extends v.PureComponent{constructor(){super(...arguments),uF(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),uF(this,"handleKeyDown",e=>{if(e.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,r;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:i,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:A,wrapperStyle:m,lastBoundingBox:p,innerRef:g,hasPortalFromProps:x}=this.props,{cssClasses:y,cssProperties:b}=D$e({allowEscapeViewBox:r,coordinate:i,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:p.height,width:p.width},useTranslate3d:h,viewBox:A}),w=x?{}:o_(o_({transition:c&&e?"transform ".concat(n,"ms ").concat(a):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&l?"visible":"hidden",position:"absolute",top:0,left:0}),j=o_(o_({},w),{},{visibility:!this.state.dismissed&&e&&l?"visible":"hidden"},m);return v.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:y,style:j,ref:g},s)}}var _ie=()=>{var t;return(t=Hr(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function dF(){return dF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dF.apply(null,arguments)}function bG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function wG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bG(Object(r),!0).forEach(function(n){U$e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function U$e(t,e,r){return(e=Q$e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Q$e(t){var e=V$e(t,"string");return typeof e=="symbol"?e:e+""}function V$e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var NG={curveBasisClosed:D9e,curveBasisOpen:R9e,curveBasis:O9e,curveBumpX:b9e,curveBumpY:w9e,curveLinearClosed:M9e,curveLinear:Y4,curveMonotoneX:L9e,curveMonotoneY:U9e,curveNatural:Q9e,curveStep:V9e,curveStepAfter:$9e,curveStepBefore:H9e},sI=t=>Ms(t.x)&&Ms(t.y),CG=t=>t.base!=null&&sI(t.base)&&sI(t),Ay=t=>t.x,hy=t=>t.y,H$e=(t,e)=>{if(typeof t=="function")return t;var r="curve".concat(Fw(t));return(r==="curveMonotone"||r==="curveBump")&&e?NG["".concat(r).concat(e==="vertical"?"Y":"X")]:NG[r]||Y4},$$e=t=>{var{type:e="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=t,i=H$e(e,a),l=s?r.filter(sI):r,c;if(Array.isArray(n)){var u=r.map((A,m)=>wG(wG({},A),{},{base:n[m]}));a==="vertical"?c=ZC().y(hy).x1(Ay).x0(A=>A.base.x):c=ZC().x(Ay).y1(hy).y0(A=>A.base.y);var d=c.defined(CG).curve(i),f=s?u.filter(CG):u;return d(f)}a==="vertical"&&Kr(n)?c=ZC().y(hy).x1(Ay).x0(n):Kr(n)?c=ZC().x(Ay).y1(hy).y0(n):c=Oae().x(Ay).y(hy);var h=c.defined(sI).curve(i);return h(l)},FR=t=>{var{className:e,points:r,path:n,pathRef:a}=t,s=Uw();if((!r||!r.length)&&!n)return null;var i={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||s,connectNulls:t.connectNulls},l=r&&r.length?$$e(i):n;return v.createElement("path",dF({},Qf(t),fQe(t),{className:Sa("recharts-curve",e),d:l===null?void 0:l,ref:a}))},G$e=["x","y","top","left","width","height","className"];function fF(){return fF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fF.apply(null,arguments)}function _G(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function K$e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_G(Object(r),!0).forEach(function(n){q$e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_G(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function q$e(t,e,r){return(e=z$e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function z$e(t){var e=W$e(t,"string");return typeof e=="symbol"?e:e+""}function W$e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function X$e(t,e){if(t==null)return{};var r,n,a=Y$e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Y$e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var J$e=(t,e,r,n,a,s)=>"M".concat(t,",").concat(a,"v").concat(n,"M").concat(s,",").concat(e,"h").concat(r),Z$e=t=>{var{x:e=0,y:r=0,top:n=0,left:a=0,width:s=0,height:i=0,className:l}=t,c=X$e(t,G$e),u=K$e({x:e,y:r,top:n,left:a,width:s,height:i},c);return!Kr(e)||!Kr(r)||!Kr(s)||!Kr(i)||!Kr(n)||!Kr(a)?null:v.createElement("path",fF({},sd(u),{className:Sa("recharts-cross",l),d:J$e(e,r,s,i,n,a)}))};function eGe(t,e,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-a,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function EG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function SG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?EG(Object(r),!0).forEach(function(n){tGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):EG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function tGe(t,e,r){return(e=rGe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rGe(t){var e=nGe(t,"string");return typeof e=="symbol"?e:e+""}function nGe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var aGe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),Eie=(t,e,r)=>t.map(n=>"".concat(aGe(n)," ").concat(e,"ms ").concat(r)).join(","),sGe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((r,n)=>r.filter(a=>n.includes(a))),H2=(t,e)=>Object.keys(e).reduce((r,n)=>SG(SG({},r),{},{[n]:t(n,e[n])}),{});function IG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Wi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IG(Object(r),!0).forEach(function(n){iGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function iGe(t,e,r){return(e=oGe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oGe(t){var e=lGe(t,"string");return typeof e=="symbol"?e:e+""}function lGe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var iI=(t,e,r)=>t+(e-t)*r,AF=t=>{var{from:e,to:r}=t;return e!==r},Sie=(t,e,r)=>{var n=H2((a,s)=>{if(AF(s)){var[i,l]=t(s.from,s.to,s.velocity);return Wi(Wi({},s),{},{from:i,velocity:l})}return s},e);return r<1?H2((a,s)=>AF(s)&&n[a]!=null?Wi(Wi({},s),{},{velocity:iI(s.velocity,n[a].velocity,r),from:iI(s.from,n[a].from,r)}):s,e):Sie(t,n,r-1)};function cGe(t,e,r,n,a,s){var i,l=n.reduce((h,A)=>Wi(Wi({},h),{},{[A]:{from:t[A],velocity:0,to:e[A]}}),{}),c=()=>H2((h,A)=>A.from,l),u=()=>!Object.values(l).filter(AF).length,d=null,f=h=>{i||(i=h);var A=h-i,m=A/r.dt;l=Sie(r,l,m),a(Wi(Wi(Wi({},t),e),c())),i=h,u()||(d=s.setTimeout(f))};return()=>(d=s.setTimeout(f),()=>{var h;(h=d)===null||h===void 0||h()})}function uGe(t,e,r,n,a,s,i){var l=null,c=a.reduce((f,h)=>{var A=t[h],m=e[h];return A==null||m==null?f:Wi(Wi({},f),{},{[h]:[A,m]})},{}),u,d=f=>{u||(u=f);var h=(f-u)/n,A=H2((p,g)=>iI(...g,r(h)),c);if(s(Wi(Wi(Wi({},t),e),A)),h<1)l=i.setTimeout(d);else{var m=H2((p,g)=>iI(...g,r(1)),c);s(Wi(Wi(Wi({},t),e),m))}};return()=>(l=i.setTimeout(d),()=>{var f;(f=l)===null||f===void 0||f()})}const dGe=(t,e,r,n,a,s)=>{var i=sGe(t,e);return r==null?()=>(a(Wi(Wi({},t),e)),()=>{}):r.isStepper===!0?cGe(t,e,r,i,a,s):uGe(t,e,r,n,i,a,s)};var oI=1e-4,Iie=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],jie=(t,e)=>t.map((r,n)=>r*e**n).reduce((r,n)=>r+n),jG=(t,e)=>r=>{var n=Iie(t,e);return jie(n,r)},fGe=(t,e)=>r=>{var n=Iie(t,e),a=[...n.map((s,i)=>s*i).slice(1),0];return jie(a,r)},AGe=t=>{var e,r=t.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(e=r[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(n==null||n.length!==4)return null;var a=n.map(s=>parseFloat(s));return[a[0],a[1],a[2],a[3]]},hGe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a=AGe(r[0]);if(a)return a}}return r.length===4?r:[0,0,1,1]},mGe=(t,e,r,n)=>{var a=jG(t,r),s=jG(e,n),i=fGe(t,r),l=u=>u>1?1:u<0?0:u,c=u=>{for(var d=u>1?1:u,f=d,h=0;h<8;++h){var A=a(f)-d,m=i(f);if(Math.abs(A-d)<oI||m<oI)return s(f);f=l(f-A/m)}return s(f)};return c.isStepper=!1,c},PG=function(){return mGe(...hGe(...arguments))},pGe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=e,s=(i,l,c)=>{var u=-(i-l)*r,d=c*n,f=c+(u-d)*a/1e3,h=c*a/1e3+i;return Math.abs(h-l)<oI&&Math.abs(f)<oI?[l,0]:[h,f]};return s.isStepper=!0,s.dt=a,s},gGe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return PG(t);case"spring":return pGe();default:if(t.split("(")[0]==="cubic-bezier")return PG(t)}return typeof t=="function"?t:null};function xGe(t){var e,r=()=>null,n=!1,a=null,s=i=>{if(!n){if(Array.isArray(i)){if(!i.length)return;var l=i,[c,...u]=l;if(typeof c=="number"){a=t.setTimeout(s.bind(null,u),c);return}s(c),a=t.setTimeout(s.bind(null,u));return}typeof i=="string"&&(e=i,r(e)),typeof i=="object"&&(e=i,r(e)),typeof i=="function"&&i()}};return{stop:()=>{n=!0},start:i=>{n=!1,a&&(a(),a=null),s(i)},subscribe:i=>(r=i,()=>{r=()=>null}),getTimeoutController:()=>t}}class vGe{setTimeout(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=i=>{i-n>=r?e(i):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{a!=null&&cancelAnimationFrame(a)}}}function yGe(){return xGe(new vGe)}var bGe=v.createContext(yGe);function wGe(t,e){var r=v.useContext(bGe);return v.useMemo(()=>e??r(t),[t,e,r])}var NGe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Cj={isSsr:NGe()},CGe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},BG={t:0},QP={t:1};function _j(t){var e=sl(t,CGe),{isActive:r,canBegin:n,duration:a,easing:s,begin:i,onAnimationEnd:l,onAnimationStart:c,children:u}=e,d=r==="auto"?!Cj.isSsr:r,f=wGe(e.animationId,e.animationManager),[h,A]=v.useState(d?BG:QP),m=v.useRef(null);return v.useEffect(()=>{d||A(QP)},[d]),v.useEffect(()=>{if(!d||!n)return Ow;var p=dGe(BG,QP,gGe(s),a,A,f.getTimeoutController()),g=()=>{m.current=p()};return f.start([c,i,g,a,l]),()=>{f.stop(),m.current&&m.current(),l()}},[d,n,a,s,i,c,l,f]),u(h.t)}function Ej(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=v.useRef(D2(e)),n=v.useRef(t);return n.current!==t&&(r.current=D2(e),n.current=t),r.current}var _Ge=["radius"],EGe=["radius"],TG,kG,FG,OG,DG,RG,MG,LG,UG,QG;function VG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function HG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?VG(Object(r),!0).forEach(function(n){SGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function SGe(t,e,r){return(e=IGe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function IGe(t){var e=jGe(t,"string");return typeof e=="symbol"?e:e+""}function jGe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lI(){return lI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lI.apply(null,arguments)}function $G(t,e){if(t==null)return{};var r,n,a=PGe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function PGe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function xf(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var GG=(t,e,r,n,a)=>{var s=j0(r),i=j0(n),l=Math.min(Math.abs(s)/2,Math.abs(i)/2),c=i>=0?1:-1,u=s>=0?1:-1,d=i>=0&&s>=0||i<0&&s<0?1:0,f;if(l>0&&a instanceof Array){for(var h=[0,0,0,0],A=0,m=4;A<m;A++)h[A]=a[A]>l?l:a[A];f=zs(TG||(TG=xf(["M",",",""])),t,e+c*h[0]),h[0]>0&&(f+=zs(kG||(kG=xf(["A ",",",",0,0,",",",",",""])),h[0],h[0],d,t+u*h[0],e)),f+=zs(FG||(FG=xf(["L ",",",""])),t+r-u*h[1],e),h[1]>0&&(f+=zs(OG||(OG=xf(["A ",",",",0,0,",`,
        `,",",""])),h[1],h[1],d,t+r,e+c*h[1])),f+=zs(DG||(DG=xf(["L ",",",""])),t+r,e+n-c*h[2]),h[2]>0&&(f+=zs(RG||(RG=xf(["A ",",",",0,0,",`,
        `,",",""])),h[2],h[2],d,t+r-u*h[2],e+n)),f+=zs(MG||(MG=xf(["L ",",",""])),t+u*h[3],e+n),h[3]>0&&(f+=zs(LG||(LG=xf(["A ",",",",0,0,",`,
        `,",",""])),h[3],h[3],d,t,e+n-c*h[3])),f+="Z"}else if(l>0&&a===+a&&a>0){var p=Math.min(l,a);f=zs(UG||(UG=xf(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+c*p,p,p,d,t+u*p,e,t+r-u*p,e,p,p,d,t+r,e+c*p,t+r,e+n-c*p,p,p,d,t+r-u*p,e+n,t+u*p,e+n,p,p,d,t,e+n-c*p)}else f=zs(QG||(QG=xf(["M ",","," h "," v "," h "," Z"])),t,e,r,n,-r);return f},KG={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Pie=t=>{var e=sl(t,KG),r=v.useRef(null),[n,a]=v.useState(-1);v.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var fe=r.current.getTotalLength();fe&&a(fe)}catch{}},[]);var{x:s,y:i,width:l,height:c,radius:u,className:d}=e,{animationEasing:f,animationDuration:h,animationBegin:A,isAnimationActive:m,isUpdateAnimationActive:p}=e,g=v.useRef(l),x=v.useRef(c),y=v.useRef(s),b=v.useRef(i),w=v.useMemo(()=>({x:s,y:i,width:l,height:c,radius:u}),[s,i,l,c,u]),j=Ej(w,"rectangle-");if(s!==+s||i!==+i||l!==+l||c!==+c||l===0||c===0)return null;var I=Sa("recharts-rectangle",d);if(!p){var _=sd(e),{radius:S}=_,E=$G(_,_Ge);return v.createElement("path",lI({},E,{x:j0(s),y:j0(i),width:j0(l),height:j0(c),radius:typeof u=="number"?u:void 0,className:I,d:GG(s,i,l,c,u)}))}var k=g.current,P=x.current,T=y.current,O=b.current,W="0px ".concat(n===-1?1:n,"px"),Ae="".concat(n,"px 0px"),de=Eie(["strokeDasharray"],h,typeof f=="string"?f:KG.animationEasing);return v.createElement(_j,{animationId:j,key:j,canBegin:n>0,duration:h,easing:f,isActive:p,begin:A},fe=>{var ge=zi(k,l,fe),ee=zi(P,c,fe),Fe=zi(T,s,fe),Pe=zi(O,i,fe);r.current&&(g.current=ge,x.current=ee,y.current=Fe,b.current=Pe);var F;m?fe>0?F={transition:de,strokeDasharray:Ae}:F={strokeDasharray:W}:F={strokeDasharray:Ae};var Q=sd(e),{radius:H}=Q,R=$G(Q,EGe);return v.createElement("path",lI({},R,{radius:typeof u=="number"?u:void 0,className:I,d:GG(Fe,Pe,ge,ee,u),ref:r,style:HG(HG({},F),e.style)}))})};function qG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function zG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qG(Object(r),!0).forEach(function(n){BGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function BGe(t,e,r){return(e=TGe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function TGe(t){var e=kGe(t,"string");return typeof e=="symbol"?e:e+""}function kGe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cI=Math.PI/180,FGe=t=>t*180/Math.PI,ki=(t,e,r,n)=>({x:t+Math.cos(-cI*n)*r,y:e+Math.sin(-cI*n)*r}),Bie=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},OGe=(t,e)=>{var{x:r,y:n}=t,{x:a,y:s}=e;return Math.sqrt((r-a)**2+(n-s)**2)},DGe=(t,e)=>{var{x:r,y:n}=t,{cx:a,cy:s}=e,i=OGe({x:r,y:n},{x:a,y:s});if(i<=0)return{radius:i,angle:0};var l=(r-a)/i,c=Math.acos(l);return n>s&&(c=2*Math.PI-c),{radius:i,angle:FGe(c),angleInRadian:c}},RGe=t=>{var{startAngle:e,endAngle:r}=t,n=Math.floor(e/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:e-s*360,endAngle:r-s*360}},MGe=(t,e)=>{var{startAngle:r,endAngle:n}=e,a=Math.floor(r/360),s=Math.floor(n/360),i=Math.min(a,s);return t+i*360},LGe=(t,e)=>{var{chartX:r,chartY:n}=t,{radius:a,angle:s}=DGe({x:r,y:n},e),{innerRadius:i,outerRadius:l}=e;if(a<i||a>l||a===0)return null;var{startAngle:c,endAngle:u}=RGe(e),d=s,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?zG(zG({},e),{},{radius:a,angle:MGe(d,e)}):null};function Tie(t){var{cx:e,cy:r,radius:n,startAngle:a,endAngle:s}=t,i=ki(e,r,n,a),l=ki(e,r,n,s);return{points:[i,l],cx:e,cy:r,radius:n,startAngle:a,endAngle:s}}var WG,XG,YG,JG,ZG,eK,tK;function hF(){return hF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hF.apply(null,arguments)}function cp(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var UGe=(t,e)=>{var r=rl(e-t),n=Math.min(Math.abs(e-t),359.999);return r*n},l_=t=>{var{cx:e,cy:r,radius:n,angle:a,sign:s,isExternal:i,cornerRadius:l,cornerIsExternal:c}=t,u=l*(i?1:-1)+n,d=Math.asin(l/u)/cI,f=c?a:a+s*d,h=ki(e,r,u,f),A=ki(e,r,n,f),m=c?a-s*d:a,p=ki(e,r,u*Math.cos(d*cI),m);return{center:h,circleTangency:A,lineTangency:p,theta:d}},kie=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:i}=t,l=UGe(s,i),c=s+l,u=ki(e,r,a,s),d=ki(e,r,a,c),f=zs(WG||(WG=cp(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,a,a,+(Math.abs(l)>180),+(s>c),d.x,d.y);if(n>0){var h=ki(e,r,n,s),A=ki(e,r,n,c);f+=zs(XG||(XG=cp(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),A.x,A.y,n,n,+(Math.abs(l)>180),+(s<=c),h.x,h.y)}else f+=zs(YG||(YG=cp(["L ",","," Z"])),e,r);return f},QGe=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:i,cornerIsExternal:l,startAngle:c,endAngle:u}=t,d=rl(u-c),{circleTangency:f,lineTangency:h,theta:A}=l_({cx:e,cy:r,radius:a,angle:c,sign:d,cornerRadius:s,cornerIsExternal:l}),{circleTangency:m,lineTangency:p,theta:g}=l_({cx:e,cy:r,radius:a,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:l}),x=l?Math.abs(c-u):Math.abs(c-u)-A-g;if(x<0)return i?zs(JG||(JG=cp(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),h.x,h.y,s,s,s*2,s,s,-s*2):kie({cx:e,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var y=zs(ZG||(ZG=cp(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),h.x,h.y,s,s,+(d<0),f.x,f.y,a,a,+(x>180),+(d<0),m.x,m.y,s,s,+(d<0),p.x,p.y);if(n>0){var{circleTangency:b,lineTangency:w,theta:j}=l_({cx:e,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),{circleTangency:I,lineTangency:_,theta:S}=l_({cx:e,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),E=l?Math.abs(c-u):Math.abs(c-u)-j-S;if(E<0&&s===0)return"".concat(y,"L").concat(e,",").concat(r,"Z");y+=zs(eK||(eK=cp(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),_.x,_.y,s,s,+(d<0),I.x,I.y,n,n,+(E>180),+(d>0),b.x,b.y,s,s,+(d<0),w.x,w.y)}else y+=zs(tK||(tK=cp(["L",",","Z"])),e,r);return y},VGe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Fie=t=>{var e=sl(t,VGe),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:i,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=e;if(s<a||u===d)return null;var h=Sa("recharts-sector",f),A=s-a,m=Bl(i,A,0,!0),p;return m>0&&Math.abs(u-d)<360?p=QGe({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(m,A/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):p=kie({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),v.createElement("path",hF({},sd(e),{className:h,d:p}))};function HGe(t,e,r){if(t==="horizontal")return[{x:e.x,y:r.top},{x:e.x,y:r.top+r.height}];if(t==="vertical")return[{x:r.left,y:e.y},{x:r.left+r.width,y:e.y}];if(Xae(e)){if(t==="centric"){var{cx:n,cy:a,innerRadius:s,outerRadius:i,angle:l}=e,c=ki(n,a,s,l),u=ki(n,a,i,l);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return Tie(e)}}var Oie={},Die={},Rie={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wR;function r(n){return e.isSymbol(n)?NaN:Number(n)}t.toNumber=r})(Rie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Rie;function r(n){return n?(n=e.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}t.toFinite=r})(Die);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=NR,r=Die;function n(a,s,i){i&&typeof i!="number"&&e.isIterateeCall(a,s,i)&&(s=i=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),i=i===void 0?a<s?1:-1:r.toFinite(i);const l=Math.max(Math.ceil((s-a)/(i||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=a,a+=i;return c}t.range=n})(Oie);var $Ge=Oie.range;const Mie=oh($Ge);function q0(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function GGe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function OR(t){let e,r,n;t.length!==2?(e=q0,r=(l,c)=>q0(t(l),c),n=(l,c)=>t(l)-c):(e=t===q0||t===GGe?t:KGe,r=t,n=t);function a(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function i(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:i,right:s}}function KGe(){return 0}function Lie(t){return t===null?NaN:+t}function*qGe(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const zGe=OR(q0),Vw=zGe.right;OR(Lie).center;class rK extends Map{constructor(e,r=YGe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,a]of e)this.set(n,a)}get(e){return super.get(nK(this,e))}has(e){return super.has(nK(this,e))}set(e,r){return super.set(WGe(this,e),r)}delete(e){return super.delete(XGe(this,e))}}function nK({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function WGe({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function XGe({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function YGe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function JGe(t=q0){if(t===q0)return Uie;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function Uie(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const ZGe=Math.sqrt(50),eKe=Math.sqrt(10),tKe=Math.sqrt(2);function uI(t,e,r){const n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),i=s>=ZGe?10:s>=eKe?5:s>=tKe?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/i,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,a)*i,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=r&&r<2?uI(t,e,r*2):[l,c,u]}function mF(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[a,s,i]=n?uI(e,t,r):uI(t,e,r);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(n)if(i<0)for(let u=0;u<l;++u)c[u]=(s-u)/-i;else for(let u=0;u<l;++u)c[u]=(s-u)*i;else if(i<0)for(let u=0;u<l;++u)c[u]=(a+u)/-i;else for(let u=0;u<l;++u)c[u]=(a+u)*i;return c}function pF(t,e,r){return e=+e,t=+t,r=+r,uI(t,e,r)[2]}function gF(t,e,r){e=+e,t=+t,r=+r;const n=e<t,a=n?pF(e,t,r):pF(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function aK(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function sK(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Qie(t,e,r=0,n=1/0,a){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(a=a===void 0?Uie:JGe(a);n>r;){if(n-r>600){const c=n-r+1,u=e-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),A=Math.max(r,Math.floor(e-u*f/c+h)),m=Math.min(n,Math.floor(e+(c-u)*f/c+h));Qie(t,e,A,m,a)}const s=t[e];let i=r,l=n;for(my(t,r,e),a(t[n],s)>0&&my(t,r,n);i<l;){for(my(t,i,l),++i,--l;a(t[i],s)<0;)++i;for(;a(t[l],s)>0;)--l}a(t[r],s)===0?my(t,r,l):(++l,my(t,l,n)),l<=e&&(r=l+1),e<=l&&(n=l-1)}return t}function my(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function rKe(t,e,r){if(t=Float64Array.from(qGe(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return sK(t);if(e>=1)return aK(t);var n,a=(n-1)*e,s=Math.floor(a),i=aK(Qie(t,s).subarray(0,s+1)),l=sK(t.subarray(s+1));return i+(l-i)*(a-s)}}function nKe(t,e,r=Lie){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,a=(n-1)*e,s=Math.floor(a),i=+r(t[s],s,t),l=+r(t[s+1],s+1,t);return i+(l-i)*(a-s)}}function aKe(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,s=new Array(a);++n<a;)s[n]=t+n*r;return s}function cd(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function vh(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const xF=Symbol("implicit");function DR(){var t=new rK,e=[],r=[],n=xF;function a(s){let i=t.get(s);if(i===void 0){if(n!==xF)return n;t.set(s,i=e.push(s)-1)}return r[i%r.length]}return a.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new rK;for(const i of s)t.has(i)||t.set(i,e.push(i)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return DR(e,r).unknown(n)},cd.apply(a,arguments),a}function RR(){var t=DR().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,s,i,l=!1,c=0,u=0,d=.5;delete t.unknown;function f(){var h=e().length,A=a<n,m=A?a:n,p=A?n:a;s=(p-m)/Math.max(1,h-c+u*2),l&&(s=Math.floor(s)),m+=(p-m-s*(h-c))*d,i=s*(1-c),l&&(m=Math.round(m),i=Math.round(i));var g=aKe(h).map(function(x){return m+s*x});return r(A?g.reverse():g)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},t.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,l=!0,f()},t.bandwidth=function(){return i},t.step=function(){return s},t.round=function(h){return arguments.length?(l=!!h,f()):l},t.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},t.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},t.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},t.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},t.copy=function(){return RR(e(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},cd.apply(f(),arguments)}function Vie(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Vie(e())},t}function sKe(){return Vie(RR.apply(null,arguments).paddingInner(1))}function MR(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function Hie(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Hw(){}var $2=.7,dI=1/$2,ov="\\s*([+-]?\\d+)\\s*",G2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Mf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",iKe=/^#([0-9a-f]{3,8})$/,oKe=new RegExp(`^rgb\\(${ov},${ov},${ov}\\)$`),lKe=new RegExp(`^rgb\\(${Mf},${Mf},${Mf}\\)$`),cKe=new RegExp(`^rgba\\(${ov},${ov},${ov},${G2}\\)$`),uKe=new RegExp(`^rgba\\(${Mf},${Mf},${Mf},${G2}\\)$`),dKe=new RegExp(`^hsl\\(${G2},${Mf},${Mf}\\)$`),fKe=new RegExp(`^hsla\\(${G2},${Mf},${Mf},${G2}\\)$`),iK={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};MR(Hw,K2,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:oK,formatHex:oK,formatHex8:AKe,formatHsl:hKe,formatRgb:lK,toString:lK});function oK(){return this.rgb().formatHex()}function AKe(){return this.rgb().formatHex8()}function hKe(){return $ie(this).formatHsl()}function lK(){return this.rgb().formatRgb()}function K2(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=iKe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?cK(e):r===3?new bc(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?c_(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?c_(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=oKe.exec(t))?new bc(e[1],e[2],e[3],1):(e=lKe.exec(t))?new bc(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=cKe.exec(t))?c_(e[1],e[2],e[3],e[4]):(e=uKe.exec(t))?c_(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=dKe.exec(t))?fK(e[1],e[2]/100,e[3]/100,1):(e=fKe.exec(t))?fK(e[1],e[2]/100,e[3]/100,e[4]):iK.hasOwnProperty(t)?cK(iK[t]):t==="transparent"?new bc(NaN,NaN,NaN,0):null}function cK(t){return new bc(t>>16&255,t>>8&255,t&255,1)}function c_(t,e,r,n){return n<=0&&(t=e=r=NaN),new bc(t,e,r,n)}function mKe(t){return t instanceof Hw||(t=K2(t)),t?(t=t.rgb(),new bc(t.r,t.g,t.b,t.opacity)):new bc}function vF(t,e,r,n){return arguments.length===1?mKe(t):new bc(t,e,r,n??1)}function bc(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}MR(bc,vF,Hie(Hw,{brighter(t){return t=t==null?dI:Math.pow(dI,t),new bc(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?$2:Math.pow($2,t),new bc(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new bc(Ip(this.r),Ip(this.g),Ip(this.b),fI(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:uK,formatHex:uK,formatHex8:pKe,formatRgb:dK,toString:dK}));function uK(){return`#${up(this.r)}${up(this.g)}${up(this.b)}`}function pKe(){return`#${up(this.r)}${up(this.g)}${up(this.b)}${up((isNaN(this.opacity)?1:this.opacity)*255)}`}function dK(){const t=fI(this.opacity);return`${t===1?"rgb(":"rgba("}${Ip(this.r)}, ${Ip(this.g)}, ${Ip(this.b)}${t===1?")":`, ${t})`}`}function fI(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ip(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function up(t){return t=Ip(t),(t<16?"0":"")+t.toString(16)}function fK(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Od(t,e,r,n)}function $ie(t){if(t instanceof Od)return new Od(t.h,t.s,t.l,t.opacity);if(t instanceof Hw||(t=K2(t)),!t)return new Od;if(t instanceof Od)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),s=Math.max(e,r,n),i=NaN,l=s-a,c=(s+a)/2;return l?(e===s?i=(r-n)/l+(r<n)*6:r===s?i=(n-e)/l+2:i=(e-r)/l+4,l/=c<.5?s+a:2-s-a,i*=60):l=c>0&&c<1?0:i,new Od(i,l,c,t.opacity)}function gKe(t,e,r,n){return arguments.length===1?$ie(t):new Od(t,e,r,n??1)}function Od(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}MR(Od,gKe,Hie(Hw,{brighter(t){return t=t==null?dI:Math.pow(dI,t),new Od(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?$2:Math.pow($2,t),new Od(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new bc(VP(t>=240?t-240:t+120,a,n),VP(t,a,n),VP(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new Od(AK(this.h),u_(this.s),u_(this.l),fI(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=fI(this.opacity);return`${t===1?"hsl(":"hsla("}${AK(this.h)}, ${u_(this.s)*100}%, ${u_(this.l)*100}%${t===1?")":`, ${t})`}`}}));function AK(t){return t=(t||0)%360,t<0?t+360:t}function u_(t){return Math.max(0,Math.min(1,t||0))}function VP(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const LR=t=>()=>t;function xKe(t,e){return function(r){return t+r*e}}function vKe(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function yKe(t){return(t=+t)==1?Gie:function(e,r){return r-e?vKe(e,r,t):LR(isNaN(e)?r:e)}}function Gie(t,e){var r=e-t;return r?xKe(t,r):LR(isNaN(t)?e:t)}const hK=function t(e){var r=yKe(e);function n(a,s){var i=r((a=vF(a)).r,(s=vF(s)).r),l=r(a.g,s.g),c=r(a.b,s.b),u=Gie(a.opacity,s.opacity);return function(d){return a.r=i(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=t,n}(1);function bKe(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=t[a]*(1-s)+e[a]*s;return n}}function wKe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function NKe(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),s=new Array(r),i;for(i=0;i<n;++i)a[i]=u1(t[i],e[i]);for(;i<r;++i)s[i]=e[i];return function(l){for(i=0;i<n;++i)s[i]=a[i](l);return s}}function CKe(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function AI(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function _Ke(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=u1(t[a],e[a]):n[a]=e[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var yF=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,HP=new RegExp(yF.source,"g");function EKe(t){return function(){return t}}function SKe(t){return function(e){return t(e)+""}}function IKe(t,e){var r=yF.lastIndex=HP.lastIndex=0,n,a,s,i=-1,l=[],c=[];for(t=t+"",e=e+"";(n=yF.exec(t))&&(a=HP.exec(e));)(s=a.index)>r&&(s=e.slice(r,s),l[i]?l[i]+=s:l[++i]=s),(n=n[0])===(a=a[0])?l[i]?l[i]+=a:l[++i]=a:(l[++i]=null,c.push({i,x:AI(n,a)})),r=HP.lastIndex;return r<e.length&&(s=e.slice(r),l[i]?l[i]+=s:l[++i]=s),l.length<2?c[0]?SKe(c[0].x):EKe(e):(e=c.length,function(u){for(var d=0,f;d<e;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function u1(t,e){var r=typeof e,n;return e==null||r==="boolean"?LR(e):(r==="number"?AI:r==="string"?(n=K2(e))?(e=n,hK):IKe:e instanceof K2?hK:e instanceof Date?CKe:wKe(e)?bKe:Array.isArray(e)?NKe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?_Ke:AI)(t,e)}function UR(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function jKe(t,e){e===void 0&&(e=t,t=u1);for(var r=0,n=e.length-1,a=e[0],s=new Array(n<0?0:n);r<n;)s[r]=t(a,a=e[++r]);return function(i){var l=Math.max(0,Math.min(n-1,Math.floor(i*=n)));return s[l](i-l)}}function PKe(t){return function(){return t}}function hI(t){return+t}var mK=[0,1];function Jl(t){return t}function bF(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:PKe(isNaN(e)?NaN:.5)}function BKe(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function TKe(t,e,r){var n=t[0],a=t[1],s=e[0],i=e[1];return a<n?(n=bF(a,n),s=r(i,s)):(n=bF(n,a),s=r(s,i)),function(l){return s(n(l))}}function kKe(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),s=new Array(n),i=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++i<n;)a[i]=bF(t[i],t[i+1]),s[i]=r(e[i],e[i+1]);return function(l){var c=Vw(t,l,1,n)-1;return s[c](a[c](l))}}function $w(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Sj(){var t=mK,e=mK,r=u1,n,a,s,i=Jl,l,c,u;function d(){var h=Math.min(t.length,e.length);return i!==Jl&&(i=BKe(t[0],t[h-1])),l=h>2?kKe:TKe,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(c||(c=l(t.map(n),e,r)))(n(i(h)))}return f.invert=function(h){return i(a((u||(u=l(e,t.map(n),AI)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,hI),d()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),d()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),r=UR,d()},f.clamp=function(h){return arguments.length?(i=h?!0:Jl,d()):i!==Jl},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,A){return n=h,a=A,d()}}function QR(){return Sj()(Jl,Jl)}function FKe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function mI(t,e){if(!isFinite(t)||t===0)return null;var r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Fv(t){return t=mI(Math.abs(t)),t?t[1]:NaN}function OKe(t,e){return function(r,n){for(var a=r.length,s=[],i=0,l=t[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),s.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=t[i=(i+1)%t.length];return s.reverse().join(e)}}function DKe(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var RKe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function q2(t){if(!(e=RKe.exec(t)))throw new Error("invalid format: "+t);var e;return new VR({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}q2.prototype=VR.prototype;function VR(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}VR.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function MKe(t){e:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var pI;function LKe(t,e){var r=mI(t,e);if(!r)return pI=void 0,t.toPrecision(e);var n=r[0],a=r[1],s=a-(pI=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,i=n.length;return s===i?n:s>i?n+new Array(s-i+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+mI(t,Math.max(0,e+s-1))[0]}function pK(t,e){var r=mI(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const gK={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:FKe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>pK(t*100,e),r:pK,s:LKe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function xK(t){return t}var vK=Array.prototype.map,yK=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function UKe(t){var e=t.grouping===void 0||t.thousands===void 0?xK:OKe(vK.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?xK:DKe(vK.call(t.numerals,String)),i=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(f,h){f=q2(f);var A=f.fill,m=f.align,p=f.sign,g=f.symbol,x=f.zero,y=f.width,b=f.comma,w=f.precision,j=f.trim,I=f.type;I==="n"?(b=!0,I="g"):gK[I]||(w===void 0&&(w=12),j=!0,I="g"),(x||A==="0"&&m==="=")&&(x=!0,A="0",m="=");var _=(h&&h.prefix!==void 0?h.prefix:"")+(g==="$"?r:g==="#"&&/[boxX]/.test(I)?"0"+I.toLowerCase():""),S=(g==="$"?n:/[%p]/.test(I)?i:"")+(h&&h.suffix!==void 0?h.suffix:""),E=gK[I],k=/[defgprs%]/.test(I);w=w===void 0?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function P(T){var O=_,W=S,Ae,de,fe;if(I==="c")W=E(T)+W,T="";else{T=+T;var ge=T<0||1/T<0;if(T=isNaN(T)?c:E(Math.abs(T),w),j&&(T=MKe(T)),ge&&+T==0&&p!=="+"&&(ge=!1),O=(ge?p==="("?p:l:p==="-"||p==="("?"":p)+O,W=(I==="s"&&!isNaN(T)&&pI!==void 0?yK[8+pI/3]:"")+W+(ge&&p==="("?")":""),k){for(Ae=-1,de=T.length;++Ae<de;)if(fe=T.charCodeAt(Ae),48>fe||fe>57){W=(fe===46?a+T.slice(Ae+1):T.slice(Ae))+W,T=T.slice(0,Ae);break}}}b&&!x&&(T=e(T,1/0));var ee=O.length+T.length+W.length,Fe=ee<y?new Array(y-ee+1).join(A):"";switch(b&&x&&(T=e(Fe+T,Fe.length?y-W.length:1/0),Fe=""),m){case"<":T=O+T+W+Fe;break;case"=":T=O+Fe+T+W;break;case"^":T=Fe.slice(0,ee=Fe.length>>1)+O+T+W+Fe.slice(ee);break;default:T=Fe+O+T+W;break}return s(T)}return P.toString=function(){return f+""},P}function d(f,h){var A=Math.max(-8,Math.min(8,Math.floor(Fv(h)/3)))*3,m=Math.pow(10,-A),p=u((f=q2(f),f.type="f",f),{suffix:yK[8+A/3]});return function(g){return p(m*g)}}return{format:u,formatPrefix:d}}var d_,HR,Kie;QKe({thousands:",",grouping:[3],currency:["$",""]});function QKe(t){return d_=UKe(t),HR=d_.format,Kie=d_.formatPrefix,d_}function VKe(t){return Math.max(0,-Fv(Math.abs(t)))}function HKe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Fv(e)/3)))*3-Fv(Math.abs(t)))}function $Ke(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Fv(e)-Fv(t))+1}function qie(t,e,r,n){var a=gF(t,e,r),s;switch(n=q2(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(s=HKe(a,i))&&(n.precision=s),Kie(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=$Ke(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=VKe(a))&&(n.precision=s-(n.type==="%")*2);break}}return HR(n)}function bm(t){var e=t.domain;return t.ticks=function(r){var n=e();return mF(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return qie(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,s=n.length-1,i=n[a],l=n[s],c,u,d=10;for(l<i&&(u=i,i=l,l=u,u=a,a=s,s=u);d-- >0;){if(u=pF(i,l,r),u===c)return n[a]=i,n[s]=l,e(n);if(u>0)i=Math.floor(i/u)*u,l=Math.ceil(l/u)*u;else if(u<0)i=Math.ceil(i*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function zie(){var t=QR();return t.copy=function(){return $w(t,zie())},cd.apply(t,arguments),bm(t)}function Wie(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,hI),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return Wie(t).unknown(e)},t=arguments.length?Array.from(t,hI):[0,1],bm(r)}function Xie(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],s=t[n],i;return s<a&&(i=r,r=n,n=i,i=a,a=s,s=i),t[r]=e.floor(a),t[n]=e.ceil(s),t}function bK(t){return Math.log(t)}function wK(t){return Math.exp(t)}function GKe(t){return-Math.log(-t)}function KKe(t){return-Math.exp(-t)}function qKe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function zKe(t){return t===10?qKe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function WKe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function NK(t){return(e,r)=>-t(-e,r)}function $R(t){const e=t(bK,wK),r=e.domain;let n=10,a,s;function i(){return a=WKe(n),s=zKe(n),r()[0]<0?(a=NK(a),s=NK(s),t(GKe,KKe)):t(bK,wK),e}return e.base=function(l){return arguments.length?(n=+l,i()):n},e.domain=function(l){return arguments.length?(r(l),i()):r()},e.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),A=a(d),m,p;const g=l==null?10:+l;let x=[];if(!(n%1)&&A-h<g){if(h=Math.floor(h),A=Math.ceil(A),u>0){for(;h<=A;++h)for(m=1;m<n;++m)if(p=h<0?m/s(-h):m*s(h),!(p<u)){if(p>d)break;x.push(p)}}else for(;h<=A;++h)for(m=n-1;m>=1;--m)if(p=h>0?m/s(-h):m*s(h),!(p<u)){if(p>d)break;x.push(p)}x.length*2<g&&(x=mF(u,d,g))}else x=mF(h,A,Math.min(A-h,g)).map(s);return f?x.reverse():x},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=q2(c)).precision==null&&(c.trim=!0),c=HR(c)),l===1/0)return c;const u=Math.max(1,n*l/e.ticks().length);return d=>{let f=d/s(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},e.nice=()=>r(Xie(r(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),e}function Yie(){const t=$R(Sj()).domain([1,10]);return t.copy=()=>$w(t,Yie()).base(t.base()),cd.apply(t,arguments),t}function CK(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function _K(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function GR(t){var e=1,r=t(CK(e),_K(e));return r.constant=function(n){return arguments.length?t(CK(e=+n),_K(e)):e},bm(r)}function Jie(){var t=GR(Sj());return t.copy=function(){return $w(t,Jie()).constant(t.constant())},cd.apply(t,arguments)}function EK(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function XKe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function YKe(t){return t<0?-t*t:t*t}function KR(t){var e=t(Jl,Jl),r=1;function n(){return r===1?t(Jl,Jl):r===.5?t(XKe,YKe):t(EK(r),EK(1/r))}return e.exponent=function(a){return arguments.length?(r=+a,n()):r},bm(e)}function qR(){var t=KR(Sj());return t.copy=function(){return $w(t,qR()).exponent(t.exponent())},cd.apply(t,arguments),t}function JKe(){return qR.apply(null,arguments).exponent(.5)}function SK(t){return Math.sign(t)*t*t}function ZKe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Zie(){var t=QR(),e=[0,1],r=!1,n;function a(s){var i=ZKe(t(s));return isNaN(i)?n:r?Math.round(i):i}return a.invert=function(s){return t.invert(SK(s))},a.domain=function(s){return arguments.length?(t.domain(s),a):t.domain()},a.range=function(s){return arguments.length?(t.range((e=Array.from(s,hI)).map(SK)),a):e.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(t.clamp(s),a):t.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return Zie(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},cd.apply(a,arguments),bm(a)}function eoe(){var t=[],e=[],r=[],n;function a(){var i=0,l=Math.max(1,e.length);for(r=new Array(l-1);++i<l;)r[i-1]=nKe(t,i/l);return s}function s(i){return i==null||isNaN(i=+i)?n:e[Vw(r,i)]}return s.invertExtent=function(i){var l=e.indexOf(i);return l<0?[NaN,NaN]:[l>0?r[l-1]:t[0],l<r.length?r[l]:t[t.length-1]]},s.domain=function(i){if(!arguments.length)return t.slice();t=[];for(let l of i)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(q0),a()},s.range=function(i){return arguments.length?(e=Array.from(i),a()):e.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return eoe().domain(t).range(e).unknown(n)},cd.apply(s,arguments)}function toe(){var t=0,e=1,r=1,n=[.5],a=[0,1],s;function i(c){return c!=null&&c<=c?a[Vw(n,c,0,r)]:s}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*e-(c-r)*t)/(r+1);return i}return i.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},i.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},i.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,n[0]]:u>=r?[n[r-1],e]:[n[u-1],n[u]]},i.unknown=function(c){return arguments.length&&(s=c),i},i.thresholds=function(){return n.slice()},i.copy=function(){return toe().domain([t,e]).range(a).unknown(s)},cd.apply(bm(i),arguments)}function roe(){var t=[.5],e=[0,1],r,n=1;function a(s){return s!=null&&s<=s?e[Vw(t,s,0,n)]:r}return a.domain=function(s){return arguments.length?(t=Array.from(s),n=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(s){return arguments.length?(e=Array.from(s),n=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(s){var i=e.indexOf(s);return[t[i-1],t[i]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return roe().domain(t).range(e).unknown(r)},cd.apply(a,arguments)}const $P=new Date,GP=new Date;function io(t,e,r,n){function a(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(t(s=new Date(+s)),s),a.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),a.round=s=>{const i=a(s),l=a.ceil(s);return s-i<l-s?i:l},a.offset=(s,i)=>(e(s=new Date(+s),i==null?1:Math.floor(i)),s),a.range=(s,i,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<i)||!(l>0))return c;let u;do c.push(u=new Date(+s)),e(s,l),t(s);while(u<s&&s<i);return c},a.filter=s=>io(i=>{if(i>=i)for(;t(i),!s(i);)i.setTime(i-1)},(i,l)=>{if(i>=i)if(l<0)for(;++l<=0;)for(;e(i,-1),!s(i););else for(;--l>=0;)for(;e(i,1),!s(i););}),r&&(a.count=(s,i)=>($P.setTime(+s),GP.setTime(+i),t($P),t(GP),Math.floor(r($P,GP))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?i=>n(i)%s===0:i=>a.count(0,i)%s===0):a)),a}const gI=io(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);gI.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?io(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):gI);gI.range;const BA=1e3,Xu=BA*60,TA=Xu*60,rh=TA*24,zR=rh*7,IK=rh*30,KP=rh*365,dp=io(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*BA)},(t,e)=>(e-t)/BA,t=>t.getUTCSeconds());dp.range;const WR=io(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*BA)},(t,e)=>{t.setTime(+t+e*Xu)},(t,e)=>(e-t)/Xu,t=>t.getMinutes());WR.range;const XR=io(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Xu)},(t,e)=>(e-t)/Xu,t=>t.getUTCMinutes());XR.range;const YR=io(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*BA-t.getMinutes()*Xu)},(t,e)=>{t.setTime(+t+e*TA)},(t,e)=>(e-t)/TA,t=>t.getHours());YR.range;const JR=io(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*TA)},(t,e)=>(e-t)/TA,t=>t.getUTCHours());JR.range;const Gw=io(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Xu)/rh,t=>t.getDate()-1);Gw.range;const Ij=io(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/rh,t=>t.getUTCDate()-1);Ij.range;const noe=io(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/rh,t=>Math.floor(t/rh));noe.range;function Sg(t){return io(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Xu)/zR)}const jj=Sg(0),xI=Sg(1),eqe=Sg(2),tqe=Sg(3),Ov=Sg(4),rqe=Sg(5),nqe=Sg(6);jj.range;xI.range;eqe.range;tqe.range;Ov.range;rqe.range;nqe.range;function Ig(t){return io(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/zR)}const Pj=Ig(0),vI=Ig(1),aqe=Ig(2),sqe=Ig(3),Dv=Ig(4),iqe=Ig(5),oqe=Ig(6);Pj.range;vI.range;aqe.range;sqe.range;Dv.range;iqe.range;oqe.range;const ZR=io(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());ZR.range;const e8=io(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());e8.range;const nh=io(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());nh.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:io(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});nh.range;const ah=io(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());ah.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:io(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});ah.range;function aoe(t,e,r,n,a,s){const i=[[dp,1,BA],[dp,5,5*BA],[dp,15,15*BA],[dp,30,30*BA],[s,1,Xu],[s,5,5*Xu],[s,15,15*Xu],[s,30,30*Xu],[a,1,TA],[a,3,3*TA],[a,6,6*TA],[a,12,12*TA],[n,1,rh],[n,2,2*rh],[r,1,zR],[e,1,IK],[e,3,3*IK],[t,1,KP]];function l(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const A=f&&typeof f.range=="function"?f:c(u,d,f),m=A?A.range(u,+d+1):[];return h?m.reverse():m}function c(u,d,f){const h=Math.abs(d-u)/f,A=OR(([,,g])=>g).right(i,h);if(A===i.length)return t.every(gF(u/KP,d/KP,f));if(A===0)return gI.every(Math.max(gF(u,d,f),1));const[m,p]=i[h/i[A-1][2]<i[A][2]/h?A-1:A];return m.every(p)}return[l,c]}const[lqe,cqe]=aoe(ah,e8,Pj,noe,JR,XR),[uqe,dqe]=aoe(nh,ZR,jj,Gw,YR,WR);function qP(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function zP(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function py(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function fqe(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,s=t.days,i=t.shortDays,l=t.months,c=t.shortMonths,u=gy(a),d=xy(a),f=gy(s),h=xy(s),A=gy(i),m=xy(i),p=gy(l),g=xy(l),x=gy(c),y=xy(c),b={a:fe,A:ge,b:ee,B:Fe,c:null,d:FK,e:FK,f:Oqe,g:Gqe,G:qqe,H:Tqe,I:kqe,j:Fqe,L:soe,m:Dqe,M:Rqe,p:Pe,q:F,Q:RK,s:MK,S:Mqe,u:Lqe,U:Uqe,V:Qqe,w:Vqe,W:Hqe,x:null,X:null,y:$qe,Y:Kqe,Z:zqe,"%":DK},w={a:Q,A:H,b:R,B:z,c:null,d:OK,e:OK,f:Jqe,g:lze,G:uze,H:Wqe,I:Xqe,j:Yqe,L:ooe,m:Zqe,M:eze,p:J,q:D,Q:RK,s:MK,S:tze,u:rze,U:nze,V:aze,w:sze,W:ize,x:null,X:null,y:oze,Y:cze,Z:dze,"%":DK},j={a:k,A:P,b:T,B:O,c:W,d:TK,e:TK,f:Iqe,g:BK,G:PK,H:kK,I:kK,j:Cqe,L:Sqe,m:Nqe,M:_qe,p:E,q:wqe,Q:Pqe,s:Bqe,S:Eqe,u:gqe,U:xqe,V:vqe,w:pqe,W:yqe,x:Ae,X:de,y:BK,Y:PK,Z:bqe,"%":jqe};b.x=I(r,b),b.X=I(n,b),b.c=I(e,b),w.x=I(r,w),w.X=I(n,w),w.c=I(e,w);function I(U,ne){return function(ve){var L=[],Ye=-1,ie=0,Z=U.length,Oe,le,se;for(ve instanceof Date||(ve=new Date(+ve));++Ye<Z;)U.charCodeAt(Ye)===37&&(L.push(U.slice(ie,Ye)),(le=jK[Oe=U.charAt(++Ye)])!=null?Oe=U.charAt(++Ye):le=Oe==="e"?" ":"0",(se=ne[Oe])&&(Oe=se(ve,le)),L.push(Oe),ie=Ye+1);return L.push(U.slice(ie,Ye)),L.join("")}}function _(U,ne){return function(ve){var L=py(1900,void 0,1),Ye=S(L,U,ve+="",0),ie,Z;if(Ye!=ve.length)return null;if("Q"in L)return new Date(L.Q);if("s"in L)return new Date(L.s*1e3+("L"in L?L.L:0));if(ne&&!("Z"in L)&&(L.Z=0),"p"in L&&(L.H=L.H%12+L.p*12),L.m===void 0&&(L.m="q"in L?L.q:0),"V"in L){if(L.V<1||L.V>53)return null;"w"in L||(L.w=1),"Z"in L?(ie=zP(py(L.y,0,1)),Z=ie.getUTCDay(),ie=Z>4||Z===0?vI.ceil(ie):vI(ie),ie=Ij.offset(ie,(L.V-1)*7),L.y=ie.getUTCFullYear(),L.m=ie.getUTCMonth(),L.d=ie.getUTCDate()+(L.w+6)%7):(ie=qP(py(L.y,0,1)),Z=ie.getDay(),ie=Z>4||Z===0?xI.ceil(ie):xI(ie),ie=Gw.offset(ie,(L.V-1)*7),L.y=ie.getFullYear(),L.m=ie.getMonth(),L.d=ie.getDate()+(L.w+6)%7)}else("W"in L||"U"in L)&&("w"in L||(L.w="u"in L?L.u%7:"W"in L?1:0),Z="Z"in L?zP(py(L.y,0,1)).getUTCDay():qP(py(L.y,0,1)).getDay(),L.m=0,L.d="W"in L?(L.w+6)%7+L.W*7-(Z+5)%7:L.w+L.U*7-(Z+6)%7);return"Z"in L?(L.H+=L.Z/100|0,L.M+=L.Z%100,zP(L)):qP(L)}}function S(U,ne,ve,L){for(var Ye=0,ie=ne.length,Z=ve.length,Oe,le;Ye<ie;){if(L>=Z)return-1;if(Oe=ne.charCodeAt(Ye++),Oe===37){if(Oe=ne.charAt(Ye++),le=j[Oe in jK?ne.charAt(Ye++):Oe],!le||(L=le(U,ve,L))<0)return-1}else if(Oe!=ve.charCodeAt(L++))return-1}return L}function E(U,ne,ve){var L=u.exec(ne.slice(ve));return L?(U.p=d.get(L[0].toLowerCase()),ve+L[0].length):-1}function k(U,ne,ve){var L=A.exec(ne.slice(ve));return L?(U.w=m.get(L[0].toLowerCase()),ve+L[0].length):-1}function P(U,ne,ve){var L=f.exec(ne.slice(ve));return L?(U.w=h.get(L[0].toLowerCase()),ve+L[0].length):-1}function T(U,ne,ve){var L=x.exec(ne.slice(ve));return L?(U.m=y.get(L[0].toLowerCase()),ve+L[0].length):-1}function O(U,ne,ve){var L=p.exec(ne.slice(ve));return L?(U.m=g.get(L[0].toLowerCase()),ve+L[0].length):-1}function W(U,ne,ve){return S(U,e,ne,ve)}function Ae(U,ne,ve){return S(U,r,ne,ve)}function de(U,ne,ve){return S(U,n,ne,ve)}function fe(U){return i[U.getDay()]}function ge(U){return s[U.getDay()]}function ee(U){return c[U.getMonth()]}function Fe(U){return l[U.getMonth()]}function Pe(U){return a[+(U.getHours()>=12)]}function F(U){return 1+~~(U.getMonth()/3)}function Q(U){return i[U.getUTCDay()]}function H(U){return s[U.getUTCDay()]}function R(U){return c[U.getUTCMonth()]}function z(U){return l[U.getUTCMonth()]}function J(U){return a[+(U.getUTCHours()>=12)]}function D(U){return 1+~~(U.getUTCMonth()/3)}return{format:function(U){var ne=I(U+="",b);return ne.toString=function(){return U},ne},parse:function(U){var ne=_(U+="",!1);return ne.toString=function(){return U},ne},utcFormat:function(U){var ne=I(U+="",w);return ne.toString=function(){return U},ne},utcParse:function(U){var ne=_(U+="",!0);return ne.toString=function(){return U},ne}}}var jK={"-":"",_:" ",0:"0"},To=/^\s*\d+/,Aqe=/^%/,hqe=/[\\^$*+?|[\]().{}]/g;function ta(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(e)+a:a)}function mqe(t){return t.replace(hqe,"\\$&")}function gy(t){return new RegExp("^(?:"+t.map(mqe).join("|")+")","i")}function xy(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function pqe(t,e,r){var n=To.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function gqe(t,e,r){var n=To.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function xqe(t,e,r){var n=To.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function vqe(t,e,r){var n=To.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function yqe(t,e,r){var n=To.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function PK(t,e,r){var n=To.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function BK(t,e,r){var n=To.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function bqe(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function wqe(t,e,r){var n=To.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function Nqe(t,e,r){var n=To.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function TK(t,e,r){var n=To.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function Cqe(t,e,r){var n=To.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function kK(t,e,r){var n=To.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function _qe(t,e,r){var n=To.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function Eqe(t,e,r){var n=To.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function Sqe(t,e,r){var n=To.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function Iqe(t,e,r){var n=To.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function jqe(t,e,r){var n=Aqe.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function Pqe(t,e,r){var n=To.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function Bqe(t,e,r){var n=To.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function FK(t,e){return ta(t.getDate(),e,2)}function Tqe(t,e){return ta(t.getHours(),e,2)}function kqe(t,e){return ta(t.getHours()%12||12,e,2)}function Fqe(t,e){return ta(1+Gw.count(nh(t),t),e,3)}function soe(t,e){return ta(t.getMilliseconds(),e,3)}function Oqe(t,e){return soe(t,e)+"000"}function Dqe(t,e){return ta(t.getMonth()+1,e,2)}function Rqe(t,e){return ta(t.getMinutes(),e,2)}function Mqe(t,e){return ta(t.getSeconds(),e,2)}function Lqe(t){var e=t.getDay();return e===0?7:e}function Uqe(t,e){return ta(jj.count(nh(t)-1,t),e,2)}function ioe(t){var e=t.getDay();return e>=4||e===0?Ov(t):Ov.ceil(t)}function Qqe(t,e){return t=ioe(t),ta(Ov.count(nh(t),t)+(nh(t).getDay()===4),e,2)}function Vqe(t){return t.getDay()}function Hqe(t,e){return ta(xI.count(nh(t)-1,t),e,2)}function $qe(t,e){return ta(t.getFullYear()%100,e,2)}function Gqe(t,e){return t=ioe(t),ta(t.getFullYear()%100,e,2)}function Kqe(t,e){return ta(t.getFullYear()%1e4,e,4)}function qqe(t,e){var r=t.getDay();return t=r>=4||r===0?Ov(t):Ov.ceil(t),ta(t.getFullYear()%1e4,e,4)}function zqe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ta(e/60|0,"0",2)+ta(e%60,"0",2)}function OK(t,e){return ta(t.getUTCDate(),e,2)}function Wqe(t,e){return ta(t.getUTCHours(),e,2)}function Xqe(t,e){return ta(t.getUTCHours()%12||12,e,2)}function Yqe(t,e){return ta(1+Ij.count(ah(t),t),e,3)}function ooe(t,e){return ta(t.getUTCMilliseconds(),e,3)}function Jqe(t,e){return ooe(t,e)+"000"}function Zqe(t,e){return ta(t.getUTCMonth()+1,e,2)}function eze(t,e){return ta(t.getUTCMinutes(),e,2)}function tze(t,e){return ta(t.getUTCSeconds(),e,2)}function rze(t){var e=t.getUTCDay();return e===0?7:e}function nze(t,e){return ta(Pj.count(ah(t)-1,t),e,2)}function loe(t){var e=t.getUTCDay();return e>=4||e===0?Dv(t):Dv.ceil(t)}function aze(t,e){return t=loe(t),ta(Dv.count(ah(t),t)+(ah(t).getUTCDay()===4),e,2)}function sze(t){return t.getUTCDay()}function ize(t,e){return ta(vI.count(ah(t)-1,t),e,2)}function oze(t,e){return ta(t.getUTCFullYear()%100,e,2)}function lze(t,e){return t=loe(t),ta(t.getUTCFullYear()%100,e,2)}function cze(t,e){return ta(t.getUTCFullYear()%1e4,e,4)}function uze(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Dv(t):Dv.ceil(t),ta(t.getUTCFullYear()%1e4,e,4)}function dze(){return"+0000"}function DK(){return"%"}function RK(t){return+t}function MK(t){return Math.floor(+t/1e3)}var ox,coe,uoe;fze({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function fze(t){return ox=fqe(t),coe=ox.format,ox.parse,uoe=ox.utcFormat,ox.utcParse,ox}function Aze(t){return new Date(t)}function hze(t){return t instanceof Date?+t:+new Date(+t)}function t8(t,e,r,n,a,s,i,l,c,u){var d=QR(),f=d.invert,h=d.domain,A=u(".%L"),m=u(":%S"),p=u("%I:%M"),g=u("%I %p"),x=u("%a %d"),y=u("%b %d"),b=u("%B"),w=u("%Y");function j(I){return(c(I)<I?A:l(I)<I?m:i(I)<I?p:s(I)<I?g:n(I)<I?a(I)<I?x:y:r(I)<I?b:w)(I)}return d.invert=function(I){return new Date(f(I))},d.domain=function(I){return arguments.length?h(Array.from(I,hze)):h().map(Aze)},d.ticks=function(I){var _=h();return t(_[0],_[_.length-1],I??10)},d.tickFormat=function(I,_){return _==null?j:u(_)},d.nice=function(I){var _=h();return(!I||typeof I.range!="function")&&(I=e(_[0],_[_.length-1],I??10)),I?h(Xie(_,I)):d},d.copy=function(){return $w(d,t8(t,e,r,n,a,s,i,l,c,u))},d}function mze(){return cd.apply(t8(uqe,dqe,nh,ZR,jj,Gw,YR,WR,dp,coe).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function pze(){return cd.apply(t8(lqe,cqe,ah,e8,Pj,Ij,JR,XR,dp,uoe).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Bj(){var t=0,e=1,r,n,a,s,i=Jl,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:i(a===0?.5:(f=(s(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,r=s(t=+t),n=s(e=+e),a=r===n?0:1/(n-r),u):[t,e]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(i=f,u):i};function d(f){return function(h){var A,m;return arguments.length?([A,m]=h,i=f(A,m),u):[i(0),i(1)]}}return u.range=d(u1),u.rangeRound=d(UR),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,r=f(t),n=f(e),a=r===n?0:1/(n-r),u}}function wm(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function doe(){var t=bm(Bj()(Jl));return t.copy=function(){return wm(t,doe())},vh.apply(t,arguments)}function foe(){var t=$R(Bj()).domain([1,10]);return t.copy=function(){return wm(t,foe()).base(t.base())},vh.apply(t,arguments)}function Aoe(){var t=GR(Bj());return t.copy=function(){return wm(t,Aoe()).constant(t.constant())},vh.apply(t,arguments)}function r8(){var t=KR(Bj());return t.copy=function(){return wm(t,r8()).exponent(t.exponent())},vh.apply(t,arguments)}function gze(){return r8.apply(null,arguments).exponent(.5)}function hoe(){var t=[],e=Jl;function r(n){if(n!=null&&!isNaN(n=+n))return e((Vw(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(q0),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,a)=>e(a/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>rKe(t,s/n))},r.copy=function(){return hoe(e).domain(t)},vh.apply(r,arguments)}function Tj(){var t=0,e=.5,r=1,n=1,a,s,i,l,c,u=Jl,d,f=!1,h;function A(p){return isNaN(p=+p)?h:(p=.5+((p=+d(p))-s)*(n*p<n*s?l:c),u(f?Math.max(0,Math.min(1,p)):p))}A.domain=function(p){return arguments.length?([t,e,r]=p,a=d(t=+t),s=d(e=+e),i=d(r=+r),l=a===s?0:.5/(s-a),c=s===i?0:.5/(i-s),n=s<a?-1:1,A):[t,e,r]},A.clamp=function(p){return arguments.length?(f=!!p,A):f},A.interpolator=function(p){return arguments.length?(u=p,A):u};function m(p){return function(g){var x,y,b;return arguments.length?([x,y,b]=g,u=jKe(p,[x,y,b]),A):[u(0),u(.5),u(1)]}}return A.range=m(u1),A.rangeRound=m(UR),A.unknown=function(p){return arguments.length?(h=p,A):h},function(p){return d=p,a=p(t),s=p(e),i=p(r),l=a===s?0:.5/(s-a),c=s===i?0:.5/(i-s),n=s<a?-1:1,A}}function moe(){var t=bm(Tj()(Jl));return t.copy=function(){return wm(t,moe())},vh.apply(t,arguments)}function poe(){var t=$R(Tj()).domain([.1,1,10]);return t.copy=function(){return wm(t,poe()).base(t.base())},vh.apply(t,arguments)}function goe(){var t=GR(Tj());return t.copy=function(){return wm(t,goe()).constant(t.constant())},vh.apply(t,arguments)}function n8(){var t=KR(Tj());return t.copy=function(){return wm(t,n8()).exponent(t.exponent())},vh.apply(t,arguments)}function xze(){return n8.apply(null,arguments).exponent(.5)}const Gy=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:RR,scaleDiverging:moe,scaleDivergingLog:poe,scaleDivergingPow:n8,scaleDivergingSqrt:xze,scaleDivergingSymlog:goe,scaleIdentity:Wie,scaleImplicit:xF,scaleLinear:zie,scaleLog:Yie,scaleOrdinal:DR,scalePoint:sKe,scalePow:qR,scaleQuantile:eoe,scaleQuantize:toe,scaleRadial:Zie,scaleSequential:doe,scaleSequentialLog:foe,scaleSequentialPow:r8,scaleSequentialQuantile:hoe,scaleSequentialSqrt:gze,scaleSequentialSymlog:Aoe,scaleSqrt:JKe,scaleSymlog:Jie,scaleThreshold:roe,scaleTime:mze,scaleUtc:pze,tickFormat:qie},Symbol.toStringTag,{value:"Module"}));var yh=t=>t.chartData,kj=Ut([yh],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),xoe=(t,e,r,n)=>n?kj(t):yh(t),vze=(t,e,r)=>r?kj(t):yh(t);function um(t){if(Array.isArray(t)&&t.length===2){var[e,r]=t;if(Ms(e)&&Ms(r))return!0}return!1}function LK(t,e,r){return r?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function voe(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[r,n]=t,a,s;if(Ms(r))a=r;else if(typeof r=="function")return;if(Ms(n))s=n;else if(typeof n=="function")return;var i=[a,s];if(um(i))return i}}function yze(t,e,r){if(!(!r&&e==null)){if(typeof t=="function"&&e!=null)try{var n=t(e,r);if(um(n))return LK(n,e,r)}catch{}if(Array.isArray(t)&&t.length===2){var[a,s]=t,i,l;if(a==="auto")e!=null&&(i=Math.min(...e));else if(Kr(a))i=a;else if(typeof a=="function")try{e!=null&&(i=a(e==null?void 0:e[0]))}catch{}else if(typeof a=="string"&&rG.test(a)){var c=rG.exec(a);if(c==null||c[1]==null||e==null)i=void 0;else{var u=+c[1];i=e[0]-u}}else i=e==null?void 0:e[0];if(s==="auto")e!=null&&(l=Math.max(...e));else if(Kr(s))l=s;else if(typeof s=="function")try{e!=null&&(l=s(e==null?void 0:e[1]))}catch{}else if(typeof s=="string"&&nG.test(s)){var d=nG.exec(s);if(d==null||d[1]==null||e==null)l=void 0;else{var f=+d[1];l=e[1]+f}}else l=e==null?void 0:e[1];var h=[i,l];if(um(h))return e==null?h:LK(h,e,r)}}}var d1=1e9,bze={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},s8,gs=!0,od="[DecimalError] ",jp=od+"Invalid argument: ",a8=od+"Exponent out of range: ",f1=Math.floor,zm=Math.pow,wze=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Zc,bo=1e7,es=7,yoe=9007199254740991,yI=f1(yoe/es),kr={};kr.absoluteValue=kr.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};kr.comparedTo=kr.cmp=function(t){var e,r,n,a,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(n=s.d.length,a=t.d.length,e=0,r=n<a?n:a;e<r;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};kr.decimalPlaces=kr.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*es;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};kr.dividedBy=kr.div=function(t){return HA(this,new this.constructor(t))};kr.dividedToIntegerBy=kr.idiv=function(t){var e=this,r=e.constructor;return Ra(HA(e,new r(t),0,1),r.precision)};kr.equals=kr.eq=function(t){return!this.cmp(t)};kr.exponent=function(){return Fi(this)};kr.greaterThan=kr.gt=function(t){return this.cmp(t)>0};kr.greaterThanOrEqualTo=kr.gte=function(t){return this.cmp(t)>=0};kr.isInteger=kr.isint=function(){return this.e>this.d.length-2};kr.isNegative=kr.isneg=function(){return this.s<0};kr.isPositive=kr.ispos=function(){return this.s>0};kr.isZero=function(){return this.s===0};kr.lessThan=kr.lt=function(t){return this.cmp(t)<0};kr.lessThanOrEqualTo=kr.lte=function(t){return this.cmp(t)<1};kr.logarithm=kr.log=function(t){var e,r=this,n=r.constructor,a=n.precision,s=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Zc))throw Error(od+"NaN");if(r.s<1)throw Error(od+(r.s?"NaN":"-Infinity"));return r.eq(Zc)?new n(0):(gs=!1,e=HA(z2(r,s),z2(t,s),s),gs=!0,Ra(e,a))};kr.minus=kr.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Noe(e,t):boe(e,(t.s=-t.s,t))};kr.modulo=kr.mod=function(t){var e,r=this,n=r.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(od+"NaN");return r.s?(gs=!1,e=HA(r,t,0,1).times(t),gs=!0,r.minus(e)):Ra(new n(r),a)};kr.naturalExponential=kr.exp=function(){return woe(this)};kr.naturalLogarithm=kr.ln=function(){return z2(this)};kr.negated=kr.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};kr.plus=kr.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?boe(e,t):Noe(e,(t.s=-t.s,t))};kr.precision=kr.sd=function(t){var e,r,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(jp+t);if(e=Fi(a)+1,n=a.d.length-1,r=n*es+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};kr.squareRoot=kr.sqrt=function(){var t,e,r,n,a,s,i,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(od+"NaN")}for(t=Fi(l),gs=!1,a=Math.sqrt(+l),a==0||a==1/0?(e=Tf(l.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=f1((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new c(e)):n=new c(a.toString()),r=c.precision,a=i=r+3;;)if(s=n,n=s.plus(HA(l,s,i+2)).times(.5),Tf(s.d).slice(0,i)===(e=Tf(n.d)).slice(0,i)){if(e=e.slice(i-3,i+1),a==i&&e=="4999"){if(Ra(s,r+1,0),s.times(s).eq(l)){n=s;break}}else if(e!="9999")break;i+=4}return gs=!0,Ra(n,r)};kr.times=kr.mul=function(t){var e,r,n,a,s,i,l,c,u,d=this,f=d.constructor,h=d.d,A=(t=new f(t)).d;if(!d.s||!t.s)return new f(0);for(t.s*=d.s,r=d.e+t.e,c=h.length,u=A.length,c<u&&(s=h,h=A,A=s,i=c,c=u,u=i),s=[],i=c+u,n=i;n--;)s.push(0);for(n=u;--n>=0;){for(e=0,a=c+n;a>n;)l=s[a]+A[n]*h[a-n-1]+e,s[a--]=l%bo|0,e=l/bo|0;s[a]=(s[a]+e)%bo|0}for(;!s[--i];)s.pop();return e?++r:s.shift(),t.d=s,t.e=r,gs?Ra(t,f.precision):t};kr.toDecimalPlaces=kr.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:($f(t,0,d1),e===void 0?e=n.rounding:$f(e,0,8),Ra(r,t+Fi(r)+1,e))};kr.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=sg(n,!0):($f(t,0,d1),e===void 0?e=a.rounding:$f(e,0,8),n=Ra(new a(n),t+1,e),r=sg(n,!0,t+1)),r};kr.toFixed=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?sg(a):($f(t,0,d1),e===void 0?e=s.rounding:$f(e,0,8),n=Ra(new s(a),t+Fi(a)+1,e),r=sg(n.abs(),!1,t+Fi(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};kr.toInteger=kr.toint=function(){var t=this,e=t.constructor;return Ra(new e(t),Fi(t)+1,e.rounding)};kr.toNumber=function(){return+this};kr.toPower=kr.pow=function(t){var e,r,n,a,s,i,l=this,c=l.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(Zc);if(l=new c(l),!l.s){if(t.s<1)throw Error(od+"Infinity");return l}if(l.eq(Zc))return l;if(n=c.precision,t.eq(Zc))return Ra(l,n);if(e=t.e,r=t.d.length-1,i=e>=r,s=l.s,i){if((r=d<0?-d:d)<=yoe){for(a=new c(Zc),e=Math.ceil(n/es+4),gs=!1;r%2&&(a=a.times(l),QK(a.d,e)),r=f1(r/2),r!==0;)l=l.times(l),QK(l.d,e);return gs=!0,t.s<0?new c(Zc).div(a):Ra(a,n)}}else if(s<0)throw Error(od+"NaN");return s=s<0&&t.d[Math.max(e,r)]&1?-1:1,l.s=1,gs=!1,a=t.times(z2(l,n+u)),gs=!0,a=woe(a),a.s=s,a};kr.toPrecision=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?(r=Fi(a),n=sg(a,r<=s.toExpNeg||r>=s.toExpPos)):($f(t,1,d1),e===void 0?e=s.rounding:$f(e,0,8),a=Ra(new s(a),t,e),r=Fi(a),n=sg(a,t<=r||r<=s.toExpNeg,t)),n};kr.toSignificantDigits=kr.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):($f(t,1,d1),e===void 0?e=n.rounding:$f(e,0,8)),Ra(new n(r),t,e)};kr.toString=kr.valueOf=kr.val=kr.toJSON=kr[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Fi(t),r=t.constructor;return sg(t,e<=r.toExpNeg||e>=r.toExpPos)};function boe(t,e){var r,n,a,s,i,l,c,u,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),gs?Ra(e,f):e;if(c=t.d,u=e.d,i=t.e,a=e.e,c=c.slice(),s=i-a,s){for(s<0?(n=c,s=-s,l=u.length):(n=u,a=i,l=c.length),i=Math.ceil(f/es),l=i>l?i+1:l+1,s>l&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/bo|0,c[s]%=bo;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=a,gs?Ra(e,f):e}function $f(t,e,r){if(t!==~~t||t<e||t>r)throw Error(jp+t)}function Tf(t){var e,r,n,a=t.length-1,s="",i=t[0];if(a>0){for(s+=i,e=1;e<a;e++)n=t[e]+"",r=es-n.length,r&&(s+=l0(r)),s+=n;i=t[e],n=i+"",r=es-n.length,r&&(s+=l0(r))}else if(i===0)return"0";for(;i%10===0;)i/=10;return s+i}var HA=function(){function t(n,a){var s,i=0,l=n.length;for(n=n.slice();l--;)s=n[l]*a+i,n[l]=s%bo|0,i=s/bo|0;return i&&n.unshift(i),n}function e(n,a,s,i){var l,c;if(s!=i)c=s>i?1:-1;else for(l=c=0;l<s;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,s){for(var i=0;s--;)n[s]-=i,i=n[s]<a[s]?1:0,n[s]=i*bo+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,i){var l,c,u,d,f,h,A,m,p,g,x,y,b,w,j,I,_,S,E=n.constructor,k=n.s==a.s?1:-1,P=n.d,T=a.d;if(!n.s)return new E(n);if(!a.s)throw Error(od+"Division by zero");for(c=n.e-a.e,_=T.length,j=P.length,A=new E(k),m=A.d=[],u=0;T[u]==(P[u]||0);)++u;if(T[u]>(P[u]||0)&&--c,s==null?y=s=E.precision:i?y=s+(Fi(n)-Fi(a))+1:y=s,y<0)return new E(0);if(y=y/es+2|0,u=0,_==1)for(d=0,T=T[0],y++;(u<j||d)&&y--;u++)b=d*bo+(P[u]||0),m[u]=b/T|0,d=b%T|0;else{for(d=bo/(T[0]+1)|0,d>1&&(T=t(T,d),P=t(P,d),_=T.length,j=P.length),w=_,p=P.slice(0,_),g=p.length;g<_;)p[g++]=0;S=T.slice(),S.unshift(0),I=T[0],T[1]>=bo/2&&++I;do d=0,l=e(T,p,_,g),l<0?(x=p[0],_!=g&&(x=x*bo+(p[1]||0)),d=x/I|0,d>1?(d>=bo&&(d=bo-1),f=t(T,d),h=f.length,g=p.length,l=e(f,p,h,g),l==1&&(d--,r(f,_<h?S:T,h))):(d==0&&(l=d=1),f=T.slice()),h=f.length,h<g&&f.unshift(0),r(p,f,g),l==-1&&(g=p.length,l=e(T,p,_,g),l<1&&(d++,r(p,_<g?S:T,g))),g=p.length):l===0&&(d++,p=[0]),m[u++]=d,l&&p[0]?p[g++]=P[w]||0:(p=[P[w]],g=1);while((w++<j||p[0]!==void 0)&&y--)}return m[0]||m.shift(),A.e=c,Ra(A,i?s+Fi(A)+1:s)}}();function woe(t,e){var r,n,a,s,i,l,c=0,u=0,d=t.constructor,f=d.precision;if(Fi(t)>16)throw Error(a8+Fi(t));if(!t.s)return new d(Zc);for(gs=!1,l=f,i=new d(.03125);t.abs().gte(.1);)t=t.times(i),u+=5;for(n=Math.log(zm(2,u))/Math.LN10*2+5|0,l+=n,r=a=s=new d(Zc),d.precision=l;;){if(a=Ra(a.times(t),l),r=r.times(++c),i=s.plus(HA(a,r,l)),Tf(i.d).slice(0,l)===Tf(s.d).slice(0,l)){for(;u--;)s=Ra(s.times(s),l);return d.precision=f,e==null?(gs=!0,Ra(s,f)):s}s=i}}function Fi(t){for(var e=t.e*es,r=t.d[0];r>=10;r/=10)e++;return e}function WP(t,e,r){if(e>t.LN10.sd())throw gs=!0,r&&(t.precision=r),Error(od+"LN10 precision limit exceeded");return Ra(new t(t.LN10),e)}function l0(t){for(var e="";t--;)e+="0";return e}function z2(t,e){var r,n,a,s,i,l,c,u,d,f=1,h=10,A=t,m=A.d,p=A.constructor,g=p.precision;if(A.s<1)throw Error(od+(A.s?"NaN":"-Infinity"));if(A.eq(Zc))return new p(0);if(e==null?(gs=!1,u=g):u=e,A.eq(10))return e==null&&(gs=!0),WP(p,u);if(u+=h,p.precision=u,r=Tf(m),n=r.charAt(0),s=Fi(A),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)A=A.times(t),r=Tf(A.d),n=r.charAt(0),f++;s=Fi(A),n>1?(A=new p("0."+r),s++):A=new p(n+"."+r.slice(1))}else return c=WP(p,u+2,g).times(s+""),A=z2(new p(n+"."+r.slice(1)),u-h).plus(c),p.precision=g,e==null?(gs=!0,Ra(A,g)):A;for(l=i=A=HA(A.minus(Zc),A.plus(Zc),u),d=Ra(A.times(A),u),a=3;;){if(i=Ra(i.times(d),u),c=l.plus(HA(i,new p(a),u)),Tf(c.d).slice(0,u)===Tf(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(WP(p,u+2,g).times(s+""))),l=HA(l,new p(f),u),p.precision=g,e==null?(gs=!0,Ra(l,g)):l;l=c,a+=2}}function UK(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(n,a),e){if(a-=n,r=r-n-1,t.e=f1(r/es),t.d=[],n=(r+1)%es,r<0&&(n+=es),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=es;n<a;)t.d.push(+e.slice(n,n+=es));e=e.slice(n),n=es-e.length}else n-=a;for(;n--;)e+="0";if(t.d.push(+e),gs&&(t.e>yI||t.e<-yI))throw Error(a8+r)}else t.s=0,t.e=0,t.d=[0];return t}function Ra(t,e,r){var n,a,s,i,l,c,u,d,f=t.d;for(i=1,s=f[0];s>=10;s/=10)i++;if(n=e-i,n<0)n+=es,a=e,u=f[d=0];else{if(d=Math.ceil((n+1)/es),s=f.length,d>=s)return t;for(u=s=f[d],i=1;s>=10;s/=10)i++;n%=es,a=n-es+i}if(r!==void 0&&(s=zm(10,i-a-1),l=u/s%10|0,c=e<0||f[d+1]!==void 0||u%s,c=r<4?(l||c)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/zm(10,i-a):0:f[d-1])%10&1||r==(t.s<0?8:7))),e<1||!f[0])return c?(s=Fi(t),f.length=1,e=e-s-1,f[0]=zm(10,(es-e%es)%es),t.e=f1(-e/es)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(n==0?(f.length=d,s=1,d--):(f.length=d+1,s=zm(10,es-n),f[d]=a>0?(u/zm(10,i-a)%zm(10,a)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==bo&&(f[0]=1,++t.e);break}else{if(f[d]+=s,f[d]!=bo)break;f[d--]=0,s=1}for(n=f.length;f[--n]===0;)f.pop();if(gs&&(t.e>yI||t.e<-yI))throw Error(a8+Fi(t));return t}function Noe(t,e){var r,n,a,s,i,l,c,u,d,f,h=t.constructor,A=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),gs?Ra(e,A):e;if(c=t.d,f=e.d,n=e.e,u=t.e,c=c.slice(),i=u-n,i){for(d=i<0,d?(r=c,i=-i,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(A/es),l)+2,i>a&&(i=a,r.length=1),r.reverse(),a=i;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}i=0}for(d&&(r=c,c=f,f=r,e.s=-e.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>i;){if(c[--a]<f[a]){for(s=a;s&&c[--s]===0;)c[s]=bo-1;--c[s],c[a]+=bo}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=n,gs?Ra(e,A):e):new h(0)}function sg(t,e,r){var n,a=Fi(t),s=Tf(t.d),i=s.length;return e?(r&&(n=r-i)>0?s=s.charAt(0)+"."+s.slice(1)+l0(n):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+l0(-a-1)+s,r&&(n=r-i)>0&&(s+=l0(n))):a>=i?(s+=l0(a+1-i),r&&(n=r-a-1)>0&&(s=s+"."+l0(n))):((n=a+1)<i&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-i)>0&&(a+1===i&&(s+="."),s+=l0(n))),t.s<0?"-"+s:s}function QK(t,e){if(t.length>e)return t.length=e,!0}function Coe(t){var e,r,n;function a(s){var i=this;if(!(i instanceof a))return new a(s);if(i.constructor=a,s instanceof a){i.s=s.s,i.e=s.e,i.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(jp+s);if(s>0)i.s=1;else if(s<0)s=-s,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(s===~~s&&s<1e7){i.e=0,i.d=[s];return}return UK(i,s.toString())}else if(typeof s!="string")throw Error(jp+s);if(s.charCodeAt(0)===45?(s=s.slice(1),i.s=-1):i.s=1,wze.test(s))UK(i,s);else throw Error(jp+s)}if(a.prototype=kr,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=Coe,a.config=a.set=Nze,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function Nze(t){if(!t||typeof t!="object")throw Error(od+"Object expected");var e,r,n,a=["precision",1,d1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((n=t[r=a[e]])!==void 0)if(f1(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(jp+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(jp+r+": "+n);return this}var s8=Coe(bze);Zc=new s8(1);const wa=s8;var Cze=t=>t,_oe={},Eoe=t=>t===_oe,VK=t=>function e(){return arguments.length===0||arguments.length===1&&Eoe(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},Soe=(t,e)=>t===1?e:VK(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(i=>i!==_oe).length;return s>=t?e(...n):Soe(t-s,VK(function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];var u=n.map(d=>Eoe(d)?l.shift():d);return e(...u,...l)}))}),_ze=t=>Soe(t.length,t),wF=(t,e)=>{for(var r=[],n=t;n<e;++n)r[n-t]=n;return r},Eze=_ze((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(r=>e[r]).map(t)),Sze=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return Cze;var a=r.reverse(),s=a[0],i=a.slice(1);return function(){return i.reduce((l,c)=>c(l),s(...arguments))}};function Ioe(t){var e;return t===0?e=1:e=Math.floor(new wa(t).abs().log(10).toNumber())+1,e}function joe(t,e,r){for(var n=new wa(t),a=0,s=[];n.lt(e)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}var Poe=t=>{var[e,r]=t,[n,a]=[e,r];return e>r&&([n,a]=[r,e]),[n,a]},Boe=(t,e,r)=>{if(t.lte(0))return new wa(0);var n=Ioe(t.toNumber()),a=new wa(10).pow(n),s=t.div(a),i=n!==1?.05:.1,l=new wa(Math.ceil(s.div(i).toNumber())).add(r).mul(i),c=l.mul(a);return e?new wa(c.toNumber()):new wa(Math.ceil(c.toNumber()))},Ize=(t,e,r)=>{var n=new wa(1),a=new wa(t);if(!a.isint()&&r){var s=Math.abs(t);s<1?(n=new wa(10).pow(Ioe(t)-1),a=new wa(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new wa(Math.floor(t)))}else t===0?a=new wa(Math.floor((e-1)/2)):r||(a=new wa(Math.floor(t)));var i=Math.floor((e-1)/2),l=Sze(Eze(c=>a.add(new wa(c-i).mul(n)).toNumber()),wF);return l(0,e)},Toe=function(e,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-e)/(n-1)))return{step:new wa(0),tickMin:new wa(0),tickMax:new wa(0)};var i=Boe(new wa(r).sub(e).div(n-1),a,s),l;e<=0&&r>=0?l=new wa(0):(l=new wa(e).add(r).div(2),l=l.sub(new wa(l).mod(i)));var c=Math.ceil(l.sub(e).div(i).toNumber()),u=Math.ceil(new wa(r).sub(l).div(i).toNumber()),d=c+u+1;return d>n?Toe(e,r,n,a,s+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:i,tickMin:l.sub(new wa(c).mul(i)),tickMax:l.add(new wa(u).mul(i))})},jze=function(e){var[r,n]=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(a,2),[l,c]=Poe([r,n]);if(l===-1/0||c===1/0){var u=c===1/0?[l,...wF(0,a-1).map(()=>1/0)]:[...wF(0,a-1).map(()=>-1/0),c];return r>n?u.reverse():u}if(l===c)return Ize(l,a,s);var{step:d,tickMin:f,tickMax:h}=Toe(l,c,i,s,0),A=joe(f,h.add(new wa(.1).mul(d)),d);return r>n?A.reverse():A},Pze=function(e,r){var[n,a]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,l]=Poe([n,a]);if(i===-1/0||l===1/0)return[n,a];if(i===l)return[i];var c=Math.max(r,2),u=Boe(new wa(l).sub(i).div(c-1),s,0),d=[...joe(new wa(i),new wa(l),u),l];return s===!1&&(d=d.map(f=>Math.round(f))),n>a?d.reverse():d},koe=t=>t.rootProps.maxBarSize,Bze=t=>t.rootProps.barGap,Foe=t=>t.rootProps.barCategoryGap,Tze=t=>t.rootProps.barSize,Kw=t=>t.rootProps.stackOffset,Ooe=t=>t.rootProps.reverseStackOrder,i8=t=>t.options.chartName,o8=t=>t.rootProps.syncId,Doe=t=>t.rootProps.syncMethod,l8=t=>t.options.eventEmitter,jl={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},wA={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},zc={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Fj=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},kze={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:wA.angleAxisId,includeHidden:!1,name:void 0,reversed:wA.reversed,scale:wA.scale,tick:wA.tick,tickCount:void 0,ticks:void 0,type:wA.type,unit:void 0},Fze={allowDataOverflow:zc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:zc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:zc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:zc.scale,tick:zc.tick,tickCount:zc.tickCount,ticks:void 0,type:zc.type,unit:void 0},Oze={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:wA.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:wA.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:wA.scale,tick:wA.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Dze={allowDataOverflow:zc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:zc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:zc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:zc.scale,tick:zc.tick,tickCount:zc.tickCount,ticks:void 0,type:"category",unit:void 0},c8=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?Oze:kze,u8=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?Dze:Fze,Oj=t=>t.polarOptions,d8=Ut([gh,xh,so],Bie),Roe=Ut([Oj,d8],(t,e)=>{if(t!=null)return Bl(t.innerRadius,e,0)}),Moe=Ut([Oj,d8],(t,e)=>{if(t!=null)return Bl(t.outerRadius,e,e*.8)}),Rze=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:r}=t;return[e,r]},Loe=Ut([Oj],Rze);Ut([c8,Loe],Fj);var Uoe=Ut([d8,Roe,Moe],(t,e,r)=>{if(!(t==null||e==null||r==null))return[e,r]});Ut([u8,Uoe],Fj);var Qoe=Ut([ra,Oj,Roe,Moe,gh,xh],(t,e,r,n,a,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||r==null||n==null)){var{cx:i,cy:l,startAngle:c,endAngle:u}=e;return{cx:Bl(i,a,a/2),cy:Bl(l,s,s/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),ys=(t,e)=>e,qw=(t,e,r)=>r;function f8(t){return t==null?void 0:t.id}function Voe(t,e,r){var{chartData:n=[]}=e,{allowDuplicatedCategory:a,dataKey:s}=r,i=new Map;return t.forEach(l=>{var c,u=(c=l.data)!==null&&c!==void 0?c:n;if(!(u==null||u.length===0)){var d=f8(l);u.forEach((f,h)=>{var A=s==null||a?h:String(as(f,s,null)),m=as(f,l.dataKey,0),p;i.has(A)?p=i.get(A):p={},Object.assign(p,{[d]:m}),i.set(A,p)})}}),Array.from(i.values())}function Dj(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var Rj=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function Mj(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function Mze(t,e){if(t.length===e.length){for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}return!1}var oo=t=>{var e=ra(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},A1=t=>t.tooltip.settings.axisId;function HK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function bI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?HK(Object(r),!0).forEach(function(n){Lze(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Lze(t,e,r){return(e=Uze(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Uze(t){var e=Qze(t,"string");return typeof e=="symbol"?e:e+""}function Qze(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var NF=[0,"auto"],po={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Hoe=(t,e)=>t.cartesianAxis.xAxis[e],bh=(t,e)=>{var r=Hoe(t,e);return r??po},go={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:NF,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Lw},$oe=(t,e)=>t.cartesianAxis.yAxis[e],wh=(t,e)=>{var r=$oe(t,e);return r??go},Vze={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},A8=(t,e)=>{var r=t.cartesianAxis.zAxis[e];return r??Vze},Ls=(t,e,r)=>{switch(e){case"xAxis":return bh(t,r);case"yAxis":return wh(t,r);case"zAxis":return A8(t,r);case"angleAxis":return c8(t,r);case"radiusAxis":return u8(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},Hze=(t,e,r)=>{switch(e){case"xAxis":return bh(t,r);case"yAxis":return wh(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},zw=(t,e,r)=>{switch(e){case"xAxis":return bh(t,r);case"yAxis":return wh(t,r);case"angleAxis":return c8(t,r);case"radiusAxis":return u8(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},Goe=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function h8(t,e){return r=>{switch(t){case"xAxis":return"xAxisId"in r&&r.xAxisId===e;case"yAxis":return"yAxisId"in r&&r.yAxisId===e;case"zAxis":return"zAxisId"in r&&r.zAxisId===e;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===e;default:return!1}}}var m8=t=>t.graphicalItems.cartesianItems,$ze=Ut([ys,qw],h8),p8=(t,e,r)=>t.filter(r).filter(n=>(e==null?void 0:e.includeHidden)===!0?!0:!n.hide),Ww=Ut([m8,Ls,$ze],p8,{memoizeOptions:{resultEqualityCheck:Mj}}),Koe=Ut([Ww],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(Dj)),qoe=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),Gze=Ut([Ww],qoe),g8=t=>t.map(e=>e.data).filter(Boolean).flat(1),Kze=Ut([Ww],g8,{memoizeOptions:{resultEqualityCheck:Mj}}),x8=(t,e)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=e;return t.length>0?t:r.slice(n,a+1)},v8=Ut([Kze,xoe],x8),y8=(t,e,r)=>(e==null?void 0:e.dataKey)!=null?t.map(n=>({value:as(n,e.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>t.map(a=>({value:as(a,n)}))):t.map(n=>({value:n})),Lj=Ut([v8,Ls,Ww],y8);function zoe(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function lE(t){if(Hf(t)||t instanceof Date){var e=Number(t);if(Ms(e))return e}}function $K(t){if(Array.isArray(t)){var e=[lE(t[0]),lE(t[1])];return um(e)?e:void 0}var r=lE(t);if(r!=null)return[r,r]}function sh(t){return t.map(lE).filter(tQe)}function qze(t,e,r){return!r||typeof e!="number"||Vf(e)?[]:r.length?sh(r.flatMap(n=>{var a=as(t,n.dataKey),s,i;if(Array.isArray(a)?[s,i]=a:s=i=a,!(!Ms(s)||!Ms(i)))return[e-s,e+i]})):[]}var lo=t=>{var e=oo(t),r=A1(t);return zw(t,e,r)},Xw=Ut([lo],t=>t==null?void 0:t.dataKey),zze=Ut([Koe,xoe,lo],Voe),Woe=(t,e,r,n)=>{var a={},s=e.reduce((i,l)=>{if(l.stackId==null)return i;var c=i[l.stackId];return c==null&&(c=[]),c.push(l),i[l.stackId]=c,i},a);return Object.fromEntries(Object.entries(s).map(i=>{var[l,c]=i,u=n?[...c].reverse():c,d=u.map(f8);return[l,{stackedData:vHe(t,d,r),graphicalItems:u}]}))},CF=Ut([zze,Koe,Kw,Ooe],Woe),Xoe=(t,e,r,n)=>{var{dataStartIndex:a,dataEndIndex:s}=e;if(n==null&&r!=="zAxis"){var i=CHe(t,a,s);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},Wze=Ut([Ls],t=>t.allowDataOverflow),b8=t=>{var e;if(t==null||!("domain"in t))return NF;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var r=sh(t.ticks);return[Math.min(...r),Math.max(...r)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:NF},w8=Ut([Ls],b8),N8=Ut([w8,Wze],voe),Xze=Ut([CF,yh,ys,N8],Xoe,{memoizeOptions:{resultEqualityCheck:Rj}}),Uj=t=>t.errorBars,Yze=(t,e,r)=>t.flatMap(n=>e[n.id]).filter(Boolean).filter(n=>zoe(r,n)),wI=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),i=Math.min(...s),l=Math.max(...s);return[i,l]}},C8=(t,e,r,n,a)=>{var s,i;if(r.length>0&&t.forEach(l=>{r.forEach(c=>{var u,d,f=(u=n[c.id])===null||u===void 0?void 0:u.filter(x=>zoe(a,x)),h=as(l,(d=e.dataKey)!==null&&d!==void 0?d:c.dataKey),A=qze(l,h,f);if(A.length>=2){var m=Math.min(...A),p=Math.max(...A);(s==null||m<s)&&(s=m),(i==null||p>i)&&(i=p)}var g=$K(h);g!=null&&(s=s==null?g[0]:Math.min(s,g[0]),i=i==null?g[1]:Math.max(i,g[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(l=>{var c=$K(as(l,e.dataKey));c!=null&&(s=s==null?c[0]:Math.min(s,c[0]),i=i==null?c[1]:Math.max(i,c[1]))}),Ms(s)&&Ms(i))return[s,i]},Jze=Ut([v8,Ls,Gze,Uj,ys],C8,{memoizeOptions:{resultEqualityCheck:Rj}});function Zze(t){var{value:e}=t;if(Hf(e)||e instanceof Date)return e}var eWe=(t,e,r)=>{var n=t.map(Zze).filter(a=>a!=null);return r&&(e.dataKey==null||e.allowDuplicatedCategory&&zae(n))?Mie(0,t.length):e.allowDuplicatedCategory?n:Array.from(new Set(n))},Yoe=t=>t.referenceElements.dots,h1=(t,e,r)=>t.filter(n=>n.ifOverflow==="extendDomain").filter(n=>e==="xAxis"?n.xAxisId===r:n.yAxisId===r),tWe=Ut([Yoe,ys,qw],h1),Joe=t=>t.referenceElements.areas,rWe=Ut([Joe,ys,qw],h1),Zoe=t=>t.referenceElements.lines,nWe=Ut([Zoe,ys,qw],h1),ele=(t,e)=>{if(t!=null){var r=sh(t.map(n=>e==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},aWe=Ut(tWe,ys,ele),tle=(t,e)=>{if(t!=null){var r=sh(t.flatMap(n=>[e==="xAxis"?n.x1:n.y1,e==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},sWe=Ut([rWe,ys],tle);function iWe(t){var e;if(t.x!=null)return sh([t.x]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.x);return r==null||r.length===0?[]:sh(r)}function oWe(t){var e;if(t.y!=null)return sh([t.y]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.y);return r==null||r.length===0?[]:sh(r)}var rle=(t,e)=>{if(t!=null){var r=t.flatMap(n=>e==="xAxis"?iWe(n):oWe(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},lWe=Ut([nWe,ys],rle),cWe=Ut(aWe,lWe,sWe,(t,e,r)=>wI(t,r,e)),_8=(t,e,r,n,a,s,i,l)=>{if(r!=null)return r;var c=i==="vertical"&&l==="xAxis"||i==="horizontal"&&l==="yAxis",u=c?wI(n,s,a):wI(s,a);return yze(e,u,t.allowDataOverflow)},uWe=Ut([Ls,w8,N8,Xze,Jze,cWe,ra,ys],_8,{memoizeOptions:{resultEqualityCheck:Rj}}),dWe=[0,1],E8=(t,e,r,n,a,s,i)=>{if(!((t==null||r==null||r.length===0)&&i===void 0)){var{dataKey:l,type:c}=t,u=Eg(e,s);if(u&&l==null){var d;return Mie(0,(d=r==null?void 0:r.length)!==null&&d!==void 0?d:0)}return c==="category"?eWe(n,t,u):a==="expand"?dWe:i}},S8=Ut([Ls,ra,v8,Lj,Kw,ys,uWe],E8),nle=(t,e,r,n,a)=>{if(t!=null){var{scale:s,type:i}=t;if(s==="auto")return e==="radial"&&a==="radiusAxis"?"band":e==="radial"&&a==="angleAxis"?"linear":i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":i==="category"?"band":"linear";if(typeof s=="string"){var l="scale".concat(Fw(s));return l in Gy?l:"point"}}},m1=Ut([Ls,ra,Goe,i8,ys],nle);function fWe(t){if(t!=null){if(t in Gy)return Gy[t]();var e="scale".concat(Fw(t));if(e in Gy)return Gy[e]()}}function I8(t,e,r,n){if(!(r==null||n==null)){if(typeof t.scale=="function")return t.scale.copy().domain(r).range(n);var a=fWe(e);if(a!=null){var s=a.domain(r).range(n);return hHe(s),s}}}var j8=(t,e,r)=>{var n=b8(e);if(!(r!=="auto"&&r!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&um(t))return jze(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&um(t))return Pze(t,e.tickCount,e.allowDecimals)}},P8=Ut([S8,zw,m1],j8),B8=(t,e,r,n)=>{if(n!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&um(e)&&Array.isArray(r)&&r.length>0){var a=e[0],s=r[0],i=e[1],l=r[r.length-1];return[Math.min(a,s),Math.max(i,l)]}return e},AWe=Ut([Ls,S8,P8,ys],B8),hWe=Ut(Lj,Ls,(t,e)=>{if(!(!e||e.type!=="number")){var r=1/0,n=Array.from(sh(t.map(f=>f.value))).sort((f,h)=>f-h),a=n[0],s=n[n.length-1];if(a==null||s==null)return 1/0;var i=s-a;if(i===0)return 1/0;for(var l=0;l<n.length-1;l++){var c=n[l],u=n[l+1];if(!(c==null||u==null)){var d=u-c;r=Math.min(r,d)}}return r/i}}),ale=Ut(hWe,ra,Foe,so,(t,e,r,n,a)=>a,(t,e,r,n,a)=>{if(!Ms(t))return 0;var s=e==="vertical"?n.height:n.width;if(a==="gap")return t*s/2;if(a==="no-gap"){var i=Bl(r,t*s),l=t*s/2;return l-i-(l-i)/s*i}return 0}),mWe=(t,e,r)=>{var n=bh(t,e);return n==null||typeof n.padding!="string"?0:ale(t,"xAxis",e,r,n.padding)},pWe=(t,e,r)=>{var n=wh(t,e);return n==null||typeof n.padding!="string"?0:ale(t,"yAxis",e,r,n.padding)},gWe=Ut(bh,mWe,(t,e)=>{var r,n;if(t==null)return{left:0,right:0};var{padding:a}=t;return typeof a=="string"?{left:e,right:e}:{left:((r=a.left)!==null&&r!==void 0?r:0)+e,right:((n=a.right)!==null&&n!==void 0?n:0)+e}}),xWe=Ut(wh,pWe,(t,e)=>{var r,n;if(t==null)return{top:0,bottom:0};var{padding:a}=t;return typeof a=="string"?{top:e,bottom:e}:{top:((r=a.top)!==null&&r!==void 0?r:0)+e,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+e}}),vWe=Ut([so,gWe,xj,gj,(t,e,r)=>r],(t,e,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),yWe=Ut([so,ra,xWe,xj,gj,(t,e,r)=>r],(t,e,r,n,a,s)=>{var{padding:i}=a;return s?[n.height-i.bottom,i.top]:e==="horizontal"?[t.top+t.height-r.bottom,t.top+r.top]:[t.top+r.top,t.top+t.height-r.bottom]}),Yw=(t,e,r,n)=>{var a;switch(e){case"xAxis":return vWe(t,r,n);case"yAxis":return yWe(t,r,n);case"zAxis":return(a=A8(t,r))===null||a===void 0?void 0:a.range;case"angleAxis":return Loe(t);case"radiusAxis":return Uoe(t,r);default:return}},sle=Ut([Ls,Yw],Fj),Qj=Ut([Ls,m1,AWe,sle],I8);Ut([Ww,Uj,ys],Yze);function ile(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var Vj=(t,e)=>e,Hj=(t,e,r)=>r,bWe=Ut(mj,Vj,Hj,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(ile)),wWe=Ut(pj,Vj,Hj,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(ile)),ole=(t,e)=>({width:t.width,height:e.height}),NWe=(t,e)=>{var r=typeof e.width=="number"?e.width:Lw;return{width:r,height:t.height}},lle=Ut(so,bh,ole),CWe=(t,e,r)=>{switch(e){case"top":return t.top;case"bottom":return r-t.bottom;default:return 0}},_We=(t,e,r)=>{switch(e){case"left":return t.left;case"right":return r-t.right;default:return 0}},EWe=Ut(xh,so,bWe,Vj,Hj,(t,e,r,n,a)=>{var s={},i;return r.forEach(l=>{var c=ole(e,l);i==null&&(i=CWe(e,n,t));var u=n==="top"&&!a||n==="bottom"&&a;s[l.id]=i-Number(u)*c.height,i+=(u?-1:1)*c.height}),s}),SWe=Ut(gh,so,wWe,Vj,Hj,(t,e,r,n,a)=>{var s={},i;return r.forEach(l=>{var c=NWe(e,l);i==null&&(i=_We(e,n,t));var u=n==="left"&&!a||n==="right"&&a;s[l.id]=i-Number(u)*c.width,i+=(u?-1:1)*c.width}),s}),IWe=(t,e)=>{var r=bh(t,e);if(r!=null)return EWe(t,r.orientation,r.mirror)},jWe=Ut([so,bh,IWe,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var a=r==null?void 0:r[n];return a==null?{x:t.left,y:0}:{x:t.left,y:a}}}),PWe=(t,e)=>{var r=wh(t,e);if(r!=null)return SWe(t,r.orientation,r.mirror)},BWe=Ut([so,wh,PWe,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var a=r==null?void 0:r[n];return a==null?{x:0,y:t.top}:{x:a,y:t.top}}}),cle=Ut(so,wh,(t,e)=>{var r=typeof e.width=="number"?e.width:Lw;return{width:r,height:t.height}}),GK=(t,e,r)=>{switch(e){case"xAxis":return lle(t,r).width;case"yAxis":return cle(t,r).height;default:return}},ule=(t,e,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:i}=r,l=Eg(t,n),c=e.map(u=>u.value);if(i&&l&&s==="category"&&a&&zae(c))return c}},T8=Ut([ra,Lj,Ls,ys],ule),dle=(t,e,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,i=Eg(t,n);if(i&&(a==="number"||s!=="auto"))return e.map(l=>l.value)}},k8=Ut([ra,Lj,zw,ys],dle);Ut([ra,Hze,m1,Qj,T8,k8,Yw,P8,ys],(t,e,r,n,a,s,i,l,c)=>{if(e!=null){var u=Eg(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:s,duplicateDomain:a,isCategorical:u,niceTicks:l,range:i,realScaleType:r,scale:n}}});var TWe=(t,e,r,n,a,s,i,l,c)=>{if(!(e==null||n==null)){var u=Eg(t,c),{type:d,ticks:f,tickCount:h}=e,A=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,m=d==="category"&&n.bandwidth?n.bandwidth()/A:0;m=c==="angleAxis"&&s!=null&&s.length>=2?rl(s[0]-s[1])*2*m:m;var p=f||a;if(p){var g=p.map((x,y)=>{var b=i?i.indexOf(x):x;return{index:y,coordinate:n(b)+m,value:x,offset:m}});return g.filter(x=>Ms(x.coordinate))}return u&&l?l.map((x,y)=>({coordinate:n(x)+m,value:x,index:y,offset:m})).filter(x=>Ms(x.coordinate)):n.ticks?n.ticks(h).map(x=>({coordinate:n(x)+m,value:x,offset:m})):n.domain().map((x,y)=>({coordinate:n(x)+m,value:i?i[x]:x,index:y,offset:m}))}},fle=Ut([ra,zw,m1,Qj,P8,Yw,T8,k8,ys],TWe),kWe=(t,e,r,n,a,s,i)=>{if(!(e==null||r==null||n==null||n[0]===n[1])){var l=Eg(t,i),{tickCount:c}=e,u=0;return u=i==="angleAxis"&&(n==null?void 0:n.length)>=2?rl(n[0]-n[1])*2*u:u,l&&s?s.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},Rv=Ut([ra,zw,Qj,Yw,T8,k8,ys],kWe),Mv=Ut(Ls,Qj,(t,e)=>{if(!(t==null||e==null))return bI(bI({},t),{},{scale:e})}),FWe=Ut([Ls,m1,S8,sle],I8);Ut((t,e,r)=>A8(t,r),FWe,(t,e)=>{if(!(t==null||e==null))return bI(bI({},t),{},{scale:e})});var OWe=Ut([ra,mj,pj],(t,e,r)=>{switch(t){case"horizontal":return e.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Ale=t=>t.options.defaultTooltipEventType,hle=t=>t.options.validateTooltipEventTypes;function mle(t,e,r){if(t==null)return e;var n=t?"axis":"item";return r==null?e:r.includes(n)?n:e}function F8(t,e){var r=Ale(t),n=hle(t);return mle(e,r,n)}function DWe(t){return Hr(e=>F8(e,t))}var ple=(t,e)=>{var r,n=Number(e);if(!(Vf(n)||e==null))return n>=0?t==null||(r=t[n])===null||r===void 0?void 0:r.value:void 0},RWe=t=>t.tooltip.settings,v0={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},MWe={itemInteraction:{click:v0,hover:v0},axisInteraction:{click:v0,hover:v0},keyboardInteraction:v0,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},gle=Bc({name:"tooltip",initialState:MWe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:ds()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:r,next:n}=e.payload,a=Hd(t).tooltipItemPayloads.indexOf(r);a>-1&&(t.tooltipItemPayloads[a]=n)},prepare:ds()},removeTooltipEntrySettings:{reducer(t,e){var r=Hd(t).tooltipItemPayloads.indexOf(e.payload);r>-1&&t.tooltipItemPayloads.splice(r,1)},prepare:ds()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:LWe,replaceTooltipEntrySettings:UWe,removeTooltipEntrySettings:QWe,setTooltipSettingsState:VWe,setActiveMouseOverItemIndex:xle,mouseLeaveItem:HWe,mouseLeaveChart:vle,setActiveClickItemIndex:$We,setMouseOverAxisIndex:yle,setMouseClickAxisIndex:GWe,setSyncInteraction:_F,setKeyboardInteraction:EF}=gle.actions,KWe=gle.reducer;function KK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function f_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KK(Object(r),!0).forEach(function(n){qWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function qWe(t,e,r){return(e=zWe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zWe(t){var e=WWe(t,"string");return typeof e=="symbol"?e:e+""}function WWe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XWe(t,e,r){return e==="axis"?r==="click"?t.axisInteraction.click:t.axisInteraction.hover:r==="click"?t.itemInteraction.click:t.itemInteraction.hover}function YWe(t){return t.index!=null}var ble=(t,e,r,n)=>{if(e==null)return v0;var a=XWe(t,e,r);if(a==null)return v0;if(a.active)return a;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(YWe(a)){if(s)return f_(f_({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return f_(f_({},v0),{},{coordinate:a.coordinate})};function JWe(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var r=Number(t);return Number.isFinite(r)?r:void 0}function ZWe(t,e){var r=JWe(t),n=e[0],a=e[1];if(r===void 0)return!1;var s=Math.min(n,a),i=Math.max(n,a);return r>=s&&r<=i}function eXe(t,e,r){if(r==null||e==null)return!0;var n=as(t,e);return n==null||!um(r)?!0:ZWe(n,r)}var O8=(t,e,r,n)=>{var a=t==null?void 0:t.index;if(a==null)return null;var s=Number(a);if(!Ms(s))return a;var i=0,l=1/0;e.length>0&&(l=e.length-1);var c=Math.max(i,Math.min(s,l)),u=e[c];return u==null||eXe(u,r,n)?String(c):null},wle=(t,e,r,n,a,s,i,l)=>{if(!(s==null||l==null)){var c=i[0],u=c==null?void 0:l(c.positions,s);if(u!=null)return u;var d=a==null?void 0:a[Number(s)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+e)/2};default:return{x:(n.left+t)/2,y:d.coordinate}}}},Nle=(t,e,r,n)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var a;if(r==="hover"?a=t.itemInteraction.hover.graphicalItemId:a=t.itemInteraction.click.graphicalItemId,a==null&&n!=null){var s=t.tooltipItemPayloads[0];return s!=null?[s]:[]}return t.tooltipItemPayloads.filter(i=>{var l;return((l=i.settings)===null||l===void 0?void 0:l.graphicalItemId)===a})},Jw=t=>t.options.tooltipPayloadSearcher,p1=t=>t.tooltip;function qK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function zK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qK(Object(r),!0).forEach(function(n){tXe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function tXe(t,e,r){return(e=rXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rXe(t){var e=nXe(t,"string");return typeof e=="symbol"?e:e+""}function nXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aXe(t,e){return t??e}var Cle=(t,e,r,n,a,s,i)=>{if(!(e==null||s==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return t.reduce((h,A)=>{var m,{dataDefinedOnItem:p,settings:g}=A,x=aXe(p,l),y=Array.isArray(x)?rie(x,u,d):x,b=(m=g==null?void 0:g.dataKey)!==null&&m!==void 0?m:n,w=g==null?void 0:g.nameKey,j;if(n&&Array.isArray(y)&&!Array.isArray(y[0])&&i==="axis"?j=eQe(y,n,a):j=s(y,e,c,w),Array.isArray(j))j.forEach(_=>{var S=zK(zK({},g),{},{name:_.name,unit:_.unit,color:void 0,fill:void 0});h.push(aG({tooltipEntrySettings:S,dataKey:_.dataKey,payload:_.payload,value:as(_.payload,_.dataKey),name:_.name}))});else{var I;h.push(aG({tooltipEntrySettings:g,dataKey:b,payload:j,value:as(j,b),name:(I=as(j,w))!==null&&I!==void 0?I:g==null?void 0:g.name}))}return h},f)}},D8=Ut([lo,ra,Goe,i8,oo],nle),sXe=Ut([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),iXe=Ut([oo,A1],h8),g1=Ut([sXe,lo,iXe],p8,{memoizeOptions:{resultEqualityCheck:Mj}}),oXe=Ut([g1],t=>t.filter(Dj)),lXe=Ut([g1],g8,{memoizeOptions:{resultEqualityCheck:Mj}}),x1=Ut([lXe,yh],x8),cXe=Ut([oXe,yh,lo],Voe),R8=Ut([x1,lo,g1],y8),_le=Ut([lo],b8),uXe=Ut([lo],t=>t.allowDataOverflow),Ele=Ut([_le,uXe],voe),dXe=Ut([g1],t=>t.filter(Dj)),fXe=Ut([cXe,dXe,Kw,Ooe],Woe),AXe=Ut([fXe,yh,oo,Ele],Xoe),hXe=Ut([g1],qoe),mXe=Ut([x1,lo,hXe,Uj,oo],C8,{memoizeOptions:{resultEqualityCheck:Rj}}),pXe=Ut([Yoe,oo,A1],h1),gXe=Ut([pXe,oo],ele),xXe=Ut([Joe,oo,A1],h1),vXe=Ut([xXe,oo],tle),yXe=Ut([Zoe,oo,A1],h1),bXe=Ut([yXe,oo],rle),wXe=Ut([gXe,bXe,vXe],wI),NXe=Ut([lo,_le,Ele,AXe,mXe,wXe,ra,oo],_8),Zw=Ut([lo,ra,x1,R8,Kw,oo,NXe],E8),CXe=Ut([Zw,lo,D8],j8),_Xe=Ut([lo,Zw,CXe,oo],B8),Sle=t=>{var e=oo(t),r=A1(t),n=!1;return Yw(t,e,r,n)},Ile=Ut([lo,Sle],Fj),jle=Ut([lo,D8,_Xe,Ile],I8),EXe=Ut([ra,R8,lo,oo],ule),SXe=Ut([ra,R8,lo,oo],dle),IXe=(t,e,r,n,a,s,i,l)=>{if(e){var{type:c}=e,u=Eg(t,l);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=l==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?rl(a[0]-a[1])*2*f:f,u&&i?i.map((h,A)=>({coordinate:n(h)+f,value:h,index:A,offset:f})):n.domain().map((h,A)=>({coordinate:n(h)+f,value:s?s[h]:h,index:A,offset:f}))}}},Nh=Ut([ra,lo,D8,jle,Sle,EXe,SXe,oo],IXe),M8=Ut([Ale,hle,RWe],(t,e,r)=>mle(r.shared,t,e)),Ple=t=>t.tooltip.settings.trigger,L8=t=>t.tooltip.settings.defaultIndex,eN=Ut([p1,M8,Ple,L8],ble),ig=Ut([eN,x1,Xw,Zw],O8),Ble=Ut([Nh,ig],ple),U8=Ut([eN],t=>{if(t)return t.dataKey}),jXe=Ut([eN],t=>{if(t)return t.graphicalItemId}),Tle=Ut([p1,M8,Ple,L8],Nle),PXe=Ut([gh,xh,ra,so,Nh,L8,Tle,Jw],wle),BXe=Ut([eN,PXe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),TXe=Ut([eN],t=>{var e;return(e=t==null?void 0:t.active)!==null&&e!==void 0?e:!1}),kXe=Ut([Tle,ig,yh,Xw,Ble,Jw,M8],Cle);Ut([kXe],t=>{if(t!=null){var e=t.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(e))}});function WK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function XK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?WK(Object(r),!0).forEach(function(n){FXe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function FXe(t,e,r){return(e=OXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function OXe(t){var e=DXe(t,"string");return typeof e=="symbol"?e:e+""}function DXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var RXe=()=>Hr(lo),MXe=()=>{var t=RXe(),e=Hr(Nh),r=Hr(jle);return tI(!t||!r?void 0:XK(XK({},t),{},{scale:r}),e)};function YK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function lx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YK(Object(r),!0).forEach(function(n){LXe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function LXe(t,e,r){return(e=UXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function UXe(t){var e=QXe(t,"string");return typeof e=="symbol"?e:e+""}function QXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var VXe=(t,e,r,n)=>{var a=e.find(s=>s&&s.index===r);if(a){if(t==="horizontal")return{x:a.coordinate,y:n.chartY};if(t==="vertical")return{x:n.chartX,y:a.coordinate}}return{x:0,y:0}},HXe=(t,e,r,n)=>{var a=e.find(u=>u&&u.index===r);if(a){if(t==="centric"){var s=a.coordinate,{radius:i}=n;return lx(lx(lx({},n),ki(n.cx,n.cy,i,s)),{},{angle:s,radius:i})}var l=a.coordinate,{angle:c}=n;return lx(lx(lx({},n),ki(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function $Xe(t,e){var{chartX:r,chartY:n}=t;return r>=e.left&&r<=e.left+e.width&&n>=e.top&&n<=e.top+e.height}var kle=(t,e,r,n,a)=>{var s,i=(s=e==null?void 0:e.length)!==null&&s!==void 0?s:0;if(i<=1||t==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var l=0;l<i;l++){var c,u,d,f,h,A=l>0?(c=r[l-1])===null||c===void 0?void 0:c.coordinate:(u=r[i-1])===null||u===void 0?void 0:u.coordinate,m=(d=r[l])===null||d===void 0?void 0:d.coordinate,p=l>=i-1?(f=r[0])===null||f===void 0?void 0:f.coordinate:(h=r[l+1])===null||h===void 0?void 0:h.coordinate,g=void 0;if(!(A==null||m==null||p==null))if(rl(m-A)!==rl(p-m)){var x=[];if(rl(p-m)===rl(a[1]-a[0])){g=p;var y=m+a[1]-a[0];x[0]=Math.min(y,(y+A)/2),x[1]=Math.max(y,(y+A)/2)}else{g=A;var b=p+a[1]-a[0];x[0]=Math.min(m,(b+m)/2),x[1]=Math.max(m,(b+m)/2)}var w=[Math.min(m,(g+m)/2),Math.max(m,(g+m)/2)];if(t>w[0]&&t<=w[1]||t>=x[0]&&t<=x[1]){var j;return(j=r[l])===null||j===void 0?void 0:j.index}}else{var I=Math.min(A,p),_=Math.max(A,p);if(t>(I+m)/2&&t<=(_+m)/2){var S;return(S=r[l])===null||S===void 0?void 0:S.index}}}else if(e)for(var E=0;E<i;E++){var k=e[E];if(k!=null){var P=e[E+1],T=e[E-1];if(E===0&&P!=null&&t<=(k.coordinate+P.coordinate)/2||E===i-1&&T!=null&&t>(k.coordinate+T.coordinate)/2||E>0&&E<i-1&&T!=null&&P!=null&&t>(k.coordinate+T.coordinate)/2&&t<=(k.coordinate+P.coordinate)/2)return k.index}}return-1},GXe=()=>Hr(i8),Q8=(t,e)=>e,Fle=(t,e,r)=>r,V8=(t,e,r,n)=>n,KXe=Ut(Nh,t=>aj(t,e=>e.coordinate)),H8=Ut([p1,Q8,Fle,V8],ble),$8=Ut([H8,x1,Xw,Zw],O8),qXe=(t,e,r)=>{if(e!=null){var n=p1(t);return e==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},Ole=Ut([p1,Q8,Fle,V8],Nle),NI=Ut([gh,xh,ra,so,Nh,V8,Ole,Jw],wle),zXe=Ut([H8,NI],(t,e)=>{var r;return(r=t.coordinate)!==null&&r!==void 0?r:e}),Dle=Ut([Nh,$8],ple),WXe=Ut([Ole,$8,yh,Xw,Dle,Jw,Q8],Cle),XXe=Ut([H8,$8],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),YXe=(t,e,r,n,a,s,i)=>{if(!(!t||!r||!n||!a)&&$Xe(t,i)){var l=_He(t,e),c=kle(l,s,a,r,n),u=VXe(e,a,c,t);return{activeIndex:String(c),activeCoordinate:u}}},JXe=(t,e,r,n,a,s,i)=>{if(!(!t||!n||!a||!s||!r)){var l=LGe(t,r);if(l){var c=EHe(l,e),u=kle(c,i,s,n,a),d=HXe(e,s,u,l);return{activeIndex:String(u),activeCoordinate:d}}}},ZXe=(t,e,r,n,a,s,i,l)=>{if(!(!t||!e||!n||!a||!s))return e==="horizontal"||e==="vertical"?YXe(t,e,n,a,s,i,l):JXe(t,e,r,n,a,s,i)},eYe=Ut(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,r)=>r,(t,e,r)=>{if(e!=null){var n=t[e];if(n!=null)return r?n.panoramaElement:n.element}}),tYe=Ut(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(n=>parseInt(n,10)).concat(Object.values(jl)),r=Array.from(new Set(e));return r.sort((n,a)=>n-a)},{memoizeOptions:{resultEqualityCheck:Mze}});function JK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ZK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JK(Object(r),!0).forEach(function(n){rYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rYe(t,e,r){return(e=nYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nYe(t){var e=aYe(t,"string");return typeof e=="symbol"?e:e+""}function aYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sYe={},iYe={zIndexMap:Object.values(jl).reduce((t,e)=>ZK(ZK({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),sYe)},oYe=new Set(Object.values(jl));function lYe(t){return oYe.has(t)}var Rle=Bc({name:"zIndex",initialState:iYe,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]?t.zIndexMap[r].consumers+=1:t.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:ds()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(t.zIndexMap[r].consumers-=1,t.zIndexMap[r].consumers<=0&&!lYe(r)&&delete t.zIndexMap[r])},prepare:ds()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:r,element:n,isPanorama:a}=e.payload;t.zIndexMap[r]?a?t.zIndexMap[r].panoramaElement=n:t.zIndexMap[r].element=n:t.zIndexMap[r]={consumers:0,element:a?void 0:n,panoramaElement:a?n:void 0}},prepare:ds()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(e.payload.isPanorama?t.zIndexMap[r].panoramaElement=void 0:t.zIndexMap[r].element=void 0)},prepare:ds()}}}),{registerZIndexPortal:cYe,unregisterZIndexPortal:uYe,registerZIndexPortalElement:dYe,unregisterZIndexPortalElement:fYe}=Rle.actions,AYe=Rle.reducer;function Yf(t){var{zIndex:e,children:r}=t,n=e$e(),a=n&&e!==void 0&&e!==0,s=hu(),i=qa();v.useLayoutEffect(()=>a?(i(cYe({zIndex:e})),()=>{i(uYe({zIndex:e}))}):Ow,[i,e,a]);var l=Hr(c=>eYe(c,e,s));return a?l?su.createPortal(r,l):null:r}function SF(){return SF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},SF.apply(null,arguments)}function eq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function A_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eq(Object(r),!0).forEach(function(n){hYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hYe(t,e,r){return(e=mYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mYe(t){var e=pYe(t,"string");return typeof e=="symbol"?e:e+""}function pYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gYe(t){var{cursor:e,cursorComp:r,cursorProps:n}=t;return v.isValidElement(e)?v.cloneElement(e,n):v.createElement(r,n)}function xYe(t){var e,{coordinate:r,payload:n,index:a,offset:s,tooltipAxisBandSize:i,layout:l,cursor:c,tooltipEventType:u,chartName:d}=t,f=r,h=n,A=a;if(!c||!f||d!=="ScatterChart"&&u!=="axis")return null;var m,p,g;if(d==="ScatterChart")m=f,p=Z$e,g=jl.cursorLine;else if(d==="BarChart")m=eGe(l,f,s,i),p=Pie,g=jl.cursorRectangle;else if(l==="radial"&&Xae(f)){var{cx:x,cy:y,radius:b,startAngle:w,endAngle:j}=Tie(f);m={cx:x,cy:y,startAngle:w,endAngle:j,innerRadius:b,outerRadius:b},p=Fie,g=jl.cursorLine}else m={points:HGe(l,f,s)},p=FR,g=jl.cursorLine;var I=typeof c=="object"&&"className"in c?c.className:void 0,_=A_(A_(A_(A_({stroke:"#ccc",pointerEvents:"none"},s),m),O2(c)),{},{payload:h,payloadIndex:A,className:Sa("recharts-tooltip-cursor",I)});return v.createElement(Yf,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:g},v.createElement(gYe,{cursor:c,cursorComp:p,cursorProps:_}))}function vYe(t){var e=MXe(),r=JHe(),n=Uw(),a=GXe();return e==null||r==null||n==null||a==null?null:v.createElement(xYe,SF({},t,{offset:r,layout:n,tooltipAxisBandSize:e,chartName:a}))}var Mle=v.createContext(null),yYe=()=>v.useContext(Mle),Lle={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var A=new a(d,f||c,h),m=r?r+u:u;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],A]:c._events[m].push(A):(c._events[m]=A,c._eventsCount++),c}function i(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)e.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,A=f.length,m=new Array(A);h<A;h++)m[h]=f[h].fn;return m},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,A,m){var p=r?r+u:u;if(!this._events[p])return!1;var g=this._events[p],x=arguments.length,y,b;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),x){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,d),!0;case 3:return g.fn.call(g.context,d,f),!0;case 4:return g.fn.call(g.context,d,f,h),!0;case 5:return g.fn.call(g.context,d,f,h,A),!0;case 6:return g.fn.call(g.context,d,f,h,A,m),!0}for(b=1,y=new Array(x-1);b<x;b++)y[b-1]=arguments[b];g.fn.apply(g.context,y)}else{var w=g.length,j;for(b=0;b<w;b++)switch(g[b].once&&this.removeListener(u,g[b].fn,void 0,!0),x){case 1:g[b].fn.call(g[b].context);break;case 2:g[b].fn.call(g[b].context,d);break;case 3:g[b].fn.call(g[b].context,d,f);break;case 4:g[b].fn.call(g[b].context,d,f,h);break;default:if(!y)for(j=1,y=new Array(x-1);j<x;j++)y[j-1]=arguments[j];g[b].fn.apply(g[b].context,y)}}return!0},l.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var A=r?r+u:u;if(!this._events[A])return this;if(!d)return i(this,A),this;var m=this._events[A];if(m.fn)m.fn===d&&(!h||m.once)&&(!f||m.context===f)&&i(this,A);else{for(var p=0,g=[],x=m.length;p<x;p++)(m[p].fn!==d||h&&!m[p].once||f&&m[p].context!==f)&&g.push(m[p]);g.length?this._events[A]=g.length===1?g[0]:g:i(this,A)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&i(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(Lle);var bYe=Lle.exports;const wYe=oh(bYe);var W2=new wYe,IF="recharts.syncEvent.tooltip",tq="recharts.syncEvent.brush";function Ule(t,e){if(e){var r=Number.parseInt(e,10);if(!Vf(r))return t==null?void 0:t[r]}}var NYe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},Qle=Bc({name:"options",initialState:NYe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),CYe=Qle.reducer,{createEventEmitter:_Ye}=Qle.actions;function EYe(t){return t.tooltip.syncInteraction}var SYe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Vle=Bc({name:"chartData",initialState:SYe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:r,endIndex:n}=e.payload;r!=null&&(t.dataStartIndex=r),n!=null&&(t.dataEndIndex=n)}}}),{setChartData:rq,setDataStartEndIndexes:IYe,setComputedData:Fat}=Vle.actions,jYe=Vle.reducer,PYe=["x","y"];function nq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function cx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nq(Object(r),!0).forEach(function(n){BYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function BYe(t,e,r){return(e=TYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function TYe(t){var e=kYe(t,"string");return typeof e=="symbol"?e:e+""}function kYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FYe(t,e){if(t==null)return{};var r,n,a=OYe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function OYe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function DYe(){var t=Hr(o8),e=Hr(l8),r=qa(),n=Hr(Doe),a=Hr(Nh),s=Uw(),i=vj(),l=Hr(c=>c.rootProps.className);v.useEffect(()=>{if(t==null)return Ow;var c=(u,d,f)=>{if(e!==f&&t===u){if(n==="index"){var h;if(i&&d!==null&&d!==void 0&&(h=d.payload)!==null&&h!==void 0&&h.coordinate&&d.payload.sourceViewBox){var A=d.payload.coordinate,{x:m,y:p}=A,g=FYe(A,PYe),{x,y,width:b,height:w}=d.payload.sourceViewBox,j=cx(cx({},g),{},{x:i.x+(b?(m-x)/b:0)*i.width,y:i.y+(w?(p-y)/w:0)*i.height});r(cx(cx({},d),{},{payload:cx(cx({},d.payload),{},{coordinate:j})}))}else r(d);return}if(a!=null){var I;if(typeof n=="function"){var _={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},S=n(a,_);I=a[S]}else n==="value"&&(I=a.find(de=>String(de.value)===d.payload.label));var{coordinate:E}=d.payload;if(I==null||d.payload.active===!1||E==null||i==null){r(_F({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:k,y:P}=E,T=Math.min(k,i.x+i.width),O=Math.min(P,i.y+i.height),W={x:s==="horizontal"?I.coordinate:T,y:s==="horizontal"?O:I.coordinate},Ae=_F({active:d.payload.active,coordinate:W,dataKey:d.payload.dataKey,index:String(I.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});r(Ae)}}};return W2.on(IF,c),()=>{W2.off(IF,c)}},[l,r,e,t,n,a,s,i])}function RYe(){var t=Hr(o8),e=Hr(l8),r=qa();v.useEffect(()=>{if(t==null)return Ow;var n=(a,s,i)=>{e!==i&&t===a&&r(IYe(s))};return W2.on(tq,n),()=>{W2.off(tq,n)}},[r,e,t])}function MYe(){var t=qa();v.useEffect(()=>{t(_Ye())},[t]),DYe(),RYe()}function LYe(t,e,r,n,a,s){var i=Hr(A=>qXe(A,t,e)),l=Hr(l8),c=Hr(o8),u=Hr(Doe),d=Hr(EYe),f=d==null?void 0:d.active,h=vj();v.useEffect(()=>{if(!f&&c!=null&&l!=null){var A=_F({active:s,coordinate:r,dataKey:i,index:a,label:typeof n=="number"?String(n):n,sourceViewBox:h,graphicalItemId:void 0});W2.emit(IF,c,A,l)}},[f,r,i,a,n,l,c,u,s,h])}function aq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function sq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aq(Object(r),!0).forEach(function(n){UYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function UYe(t,e,r){return(e=QYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function QYe(t){var e=VYe(t,"string");return typeof e=="symbol"?e:e+""}function VYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function HYe(t){return t.dataKey}function $Ye(t,e){return v.isValidElement(t)?v.cloneElement(t,e):typeof t=="function"?v.createElement(t,e):v.createElement(T$e,e)}var iq=[],GYe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function oq(t){var e,r,n=sl(t,GYe),{active:a,allowEscapeViewBox:s,animationDuration:i,animationEasing:l,content:c,filterNull:u,isAnimationActive:d,offset:f,payloadUniqBy:h,position:A,reverseDirection:m,useTranslate3d:p,wrapperStyle:g,cursor:x,shared:y,trigger:b,defaultIndex:w,portal:j,axisId:I}=n,_=qa(),S=typeof w=="number"?String(w):w;v.useEffect(()=>{_(VWe({shared:y,trigger:b,axisId:I,active:a,defaultIndex:S}))},[_,y,b,I,a,S]);var E=vj(),k=_ie(),P=DWe(y),{activeIndex:T,isActive:O}=(e=Hr(J=>XXe(J,P,b,S)))!==null&&e!==void 0?e:{},W=Hr(J=>WXe(J,P,b,S)),Ae=Hr(J=>Dle(J,P,b,S)),de=Hr(J=>zXe(J,P,b,S)),fe=W,ge=yYe(),ee=(r=a??O)!==null&&r!==void 0?r:!1,[Fe,Pe]=Ese([fe,ee]),F=P==="axis"?Ae:void 0;LYe(P,b,de,F,T,ee);var Q=j??ge;if(Q==null||E==null||P==null)return null;var H=fe??iq;ee||(H=iq),u&&H.length&&(H=hse(H.filter(J=>J.value!=null&&(J.hide!==!0||n.includeHidden)),h,HYe));var R=H.length>0,z=v.createElement(L$e,{allowEscapeViewBox:s,animationDuration:i,animationEasing:l,isAnimationActive:d,active:ee,coordinate:de,hasPayload:R,offset:f,position:A,reverseDirection:m,useTranslate3d:p,viewBox:E,wrapperStyle:g,lastBoundingBox:Fe,innerRef:Pe,hasPortalFromProps:!!j},$Ye(c,sq(sq({},n),{},{payload:H,label:F,active:ee,activeIndex:T,coordinate:de,accessibilityLayer:k})));return v.createElement(v.Fragment,null,su.createPortal(z,Q),ee&&v.createElement(vYe,{cursor:x,tooltipEventType:P,coordinate:de,payload:H,index:T}))}var tN=t=>null;tN.displayName="Cell";function KYe(t,e,r){return(e=qYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qYe(t){var e=zYe(t,"string");return typeof e=="symbol"?e:e+""}function zYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class WYe{constructor(e){KYe(this,"cache",new Map),this.maxSize=e}get(e){var r=this.cache.get(e);return r!==void 0&&(this.cache.delete(e),this.cache.set(e,r)),r}set(e,r){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(e,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function lq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function XYe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lq(Object(r),!0).forEach(function(n){YYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function YYe(t,e,r){return(e=JYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function JYe(t){var e=ZYe(t,"string");return typeof e=="symbol"?e:e+""}function ZYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var eJe={cacheSize:2e3,enableCache:!0},Hle=XYe({},eJe),cq=new WYe(Hle.cacheSize),tJe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},uq="recharts_measurement_span";function rJe(t,e){var r=e.fontSize||"",n=e.fontFamily||"",a=e.fontWeight||"",s=e.fontStyle||"",i=e.letterSpacing||"",l=e.textTransform||"";return"".concat(t,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(i,"|").concat(l)}var dq=(t,e)=>{try{var r=document.getElementById(uq);r||(r=document.createElement("span"),r.setAttribute("id",uq),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,tJe,e),r.textContent="".concat(t);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},jb=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Cj.isSsr)return{width:0,height:0};if(!Hle.enableCache)return dq(e,r);var n=rJe(e,r),a=cq.get(n);if(a)return a;var s=dq(e,r);return cq.set(n,s),s},$le;function nJe(t,e,r){return(e=aJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aJe(t){var e=sJe(t,"string");return typeof e=="symbol"?e:e+""}function sJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Aq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,iJe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,oJe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,lJe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},cJe=["cm","mm","pt","pc","in","Q","px"];function uJe(t){return cJe.includes(t)}var $x="NaN";function dJe(t,e){return t*lJe[e]}class qo{static parse(e){var r,[,n,a]=(r=oJe.exec(e))!==null&&r!==void 0?r:[];return n==null?qo.NaN:new qo(parseFloat(n),a??"")}constructor(e,r){this.num=e,this.unit=r,this.num=e,this.unit=r,Vf(e)&&(this.unit=""),r!==""&&!iJe.test(r)&&(this.num=NaN,this.unit=""),uJe(r)&&(this.num=dJe(e,r),this.unit="px")}add(e){return this.unit!==e.unit?new qo(NaN,""):new qo(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new qo(NaN,""):new qo(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new qo(NaN,""):new qo(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new qo(NaN,""):new qo(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Vf(this.num)}}$le=qo;nJe(qo,"NaN",new $le(NaN,""));function Gle(t){if(t==null||t.includes($x))return $x;for(var e=t;e.includes("*")||e.includes("/");){var r,[,n,a,s]=(r=fq.exec(e))!==null&&r!==void 0?r:[],i=qo.parse(n??""),l=qo.parse(s??""),c=a==="*"?i.multiply(l):i.divide(l);if(c.isNaN())return $x;e=e.replace(fq,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,d,f,h]=(u=Aq.exec(e))!==null&&u!==void 0?u:[],A=qo.parse(d??""),m=qo.parse(h??""),p=f==="+"?A.add(m):A.subtract(m);if(p.isNaN())return $x;e=e.replace(Aq,p.toString())}return e}var hq=/\(([^()]*)\)/;function fJe(t){for(var e=t,r;(r=hq.exec(e))!=null;){var[,n]=r;e=e.replace(hq,Gle(n))}return e}function AJe(t){var e=t.replace(/\s+/g,"");return e=fJe(e),e=Gle(e),e}function hJe(t){try{return AJe(t)}catch{return $x}}function XP(t){var e=hJe(t.slice(5,-1));return e===$x?"":e}var mJe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],pJe=["dx","dy","angle","className","breakAll"];function jF(){return jF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jF.apply(null,arguments)}function mq(t,e){if(t==null)return{};var r,n,a=gJe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function gJe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Kle=/[ \f\n\r\t\v\u2028\u2029]+/,qle=t=>{var{children:e,breakAll:r,style:n}=t;try{var a=[];Bo(e)||(r?a=e.toString().split(""):a=e.toString().split(Kle));var s=a.map(l=>({word:l,width:jb(l,n).width})),i=r?0:jb("",n).width;return{wordsWithComputedWidth:s,spaceWidth:i}}catch{return null}};function xJe(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var zle=(t,e,r,n)=>t.reduce((a,s)=>{var{word:i,width:l}=s,c=a[a.length-1];if(c&&l!=null&&(e==null||n||c.width+l+r<Number(e)))c.words.push(i),c.width+=l+r;else{var u={words:[i],width:l};a.push(u)}return a},[]),Wle=t=>t.reduce((e,r)=>e.width>r.width?e:r),vJe="",pq=(t,e,r,n,a,s,i,l)=>{var c=t.slice(0,e),u=qle({breakAll:r,style:n,children:c+vJe});if(!u)return[!1,[]];var d=zle(u.wordsWithComputedWidth,s,i,l),f=d.length>a||Wle(d).width>Number(s);return[f,d]},yJe=(t,e,r,n,a)=>{var{maxLines:s,children:i,style:l,breakAll:c}=t,u=Kr(s),d=String(i),f=zle(e,n,r,a);if(!u||a)return f;var h=f.length>s||Wle(f).width>Number(n);if(!h)return f;for(var A=0,m=d.length-1,p=0,g;A<=m&&p<=d.length-1;){var x=Math.floor((A+m)/2),y=x-1,[b,w]=pq(d,y,c,l,s,n,r,a),[j]=pq(d,x,c,l,s,n,r,a);if(!b&&!j&&(A=x+1),b&&j&&(m=x-1),!b&&j){g=w;break}p++}return g||f},gq=t=>{var e=Bo(t)?[]:t.toString().split(Kle);return[{words:e,width:void 0}]},bJe=t=>{var{width:e,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:i}=t;if((e||r)&&!Cj.isSsr){var l,c,u=qle({breakAll:s,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;l=d,c=f}else return gq(n);return yJe({breakAll:s,children:n,maxLines:i,style:a},l,c,e,!!r)}return gq(n)},Xle="#808080",wJe={angle:0,breakAll:!1,capHeight:"0.71em",fill:Xle,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},$j=v.forwardRef((t,e)=>{var r=sl(t,wJe),{x:n,y:a,lineHeight:s,capHeight:i,fill:l,scaleToFit:c,textAnchor:u,verticalAnchor:d}=r,f=mq(r,mJe),h=v.useMemo(()=>bJe({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:c,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,c,f.style,f.width]),{dx:A,dy:m,angle:p,className:g,breakAll:x}=f,y=mq(f,pJe);if(!Hf(n)||!Hf(a)||h.length===0)return null;var b=Number(n)+(Kr(A)?A:0),w=Number(a)+(Kr(m)?m:0);if(!Ms(b)||!Ms(w))return null;var j;switch(d){case"start":j=XP("calc(".concat(i,")"));break;case"middle":j=XP("calc(".concat((h.length-1)/2," * -").concat(s," + (").concat(i," / 2))"));break;default:j=XP("calc(".concat(h.length-1," * -").concat(s,")"));break}var I=[];if(c){var _=h[0].width,{width:S}=f;I.push("scale(".concat(Kr(S)&&Kr(_)?S/_:1,")"))}return p&&I.push("rotate(".concat(p,", ").concat(b,", ").concat(w,")")),I.length&&(y.transform=I.join(" ")),v.createElement("text",jF({},sd(y),{ref:e,x:b,y:w,className:Sa("recharts-text",g),textAnchor:u,fill:l.includes("url")?Xle:l}),h.map((E,k)=>{var P=E.words.join(x?"":" ");return v.createElement("tspan",{x:b,dy:k===0?j:s,key:"".concat(P,"-").concat(k)},P)}))});$j.displayName="Text";var NJe=["labelRef"],CJe=["content"];function xq(t,e){if(t==null)return{};var r,n,a=_Je(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function _Je(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function vq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ci(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vq(Object(r),!0).forEach(function(n){EJe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function EJe(t,e,r){return(e=SJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function SJe(t){var e=IJe(t,"string");return typeof e=="symbol"?e:e+""}function IJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function NA(){return NA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},NA.apply(null,arguments)}var Yle=v.createContext(null),jJe=t=>{var{x:e,y:r,upperWidth:n,lowerWidth:a,width:s,height:i,children:l}=t,c=v.useMemo(()=>({x:e,y:r,upperWidth:n,lowerWidth:a,width:s,height:i}),[e,r,n,a,s,i]);return v.createElement(Yle.Provider,{value:c},l)},Jle=()=>{var t=v.useContext(Yle),e=vj();return t||fie(e)},PJe=v.createContext(null),BJe=()=>{var t=v.useContext(PJe),e=Hr(Qoe);return t||e},TJe=t=>{var{value:e,formatter:r}=t,n=Bo(t.children)?e:t.children;return typeof r=="function"?r(n):n},G8=t=>t!=null&&typeof t=="function",kJe=(t,e)=>{var r=rl(e-t),n=Math.min(Math.abs(e-t),360);return r*n},FJe=(t,e,r,n,a)=>{var{offset:s,className:i}=t,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:A}=a,m=(u+d)/2,p=kJe(f,h),g=p>=0?1:-1,x,y;switch(e){case"insideStart":x=f+g*s,y=A;break;case"insideEnd":x=h-g*s,y=!A;break;case"end":x=h+g*s,y=A;break;default:throw new Error("Unsupported position ".concat(e))}y=p<=0?y:!y;var b=ki(l,c,m,x),w=ki(l,c,m,x+(y?1:-1)*359),j="M".concat(b.x,",").concat(b.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(y?0:1,`,
    `).concat(w.x,",").concat(w.y),I=Bo(t.id)?D2("recharts-radial-line-"):t.id;return v.createElement("text",NA({},n,{dominantBaseline:"central",className:Sa("recharts-radial-bar-label",i)}),v.createElement("defs",null,v.createElement("path",{id:I,d:j})),v.createElement("textPath",{xlinkHref:"#".concat(I)},r))},OJe=(t,e,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:i,startAngle:l,endAngle:c}=t,u=(l+c)/2;if(r==="outside"){var{x:d,y:f}=ki(n,a,i+e,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=(s+i)/2,{x:A,y:m}=ki(n,a,h,u);return{x:A,y:m,textAnchor:"middle",verticalAnchor:"middle"}},PF=t=>"cx"in t&&Kr(t.cx),DJe=(t,e)=>{var{parentViewBox:r,offset:n,position:a}=t,s;r!=null&&!PF(r)&&(s=r);var{x:i,y:l,upperWidth:c,lowerWidth:u,height:d}=e,f=i,h=i+(c-u)/2,A=(f+h)/2,m=(c+u)/2,p=f+c/2,g=d>=0?1:-1,x=g*n,y=g>0?"end":"start",b=g>0?"start":"end",w=c>=0?1:-1,j=w*n,I=w>0?"end":"start",_=w>0?"start":"end";if(a==="top"){var S={x:f+c/2,y:l-x,textAnchor:"middle",verticalAnchor:y};return ci(ci({},S),s?{height:Math.max(l-s.y,0),width:c}:{})}if(a==="bottom"){var E={x:h+u/2,y:l+d+x,textAnchor:"middle",verticalAnchor:b};return ci(ci({},E),s?{height:Math.max(s.y+s.height-(l+d),0),width:u}:{})}if(a==="left"){var k={x:A-j,y:l+d/2,textAnchor:I,verticalAnchor:"middle"};return ci(ci({},k),s?{width:Math.max(k.x-s.x,0),height:d}:{})}if(a==="right"){var P={x:A+m+j,y:l+d/2,textAnchor:_,verticalAnchor:"middle"};return ci(ci({},P),s?{width:Math.max(s.x+s.width-P.x,0),height:d}:{})}var T=s?{width:m,height:d}:{};return a==="insideLeft"?ci({x:A+j,y:l+d/2,textAnchor:_,verticalAnchor:"middle"},T):a==="insideRight"?ci({x:A+m-j,y:l+d/2,textAnchor:I,verticalAnchor:"middle"},T):a==="insideTop"?ci({x:f+c/2,y:l+x,textAnchor:"middle",verticalAnchor:b},T):a==="insideBottom"?ci({x:h+u/2,y:l+d-x,textAnchor:"middle",verticalAnchor:y},T):a==="insideTopLeft"?ci({x:f+j,y:l+x,textAnchor:_,verticalAnchor:b},T):a==="insideTopRight"?ci({x:f+c-j,y:l+x,textAnchor:I,verticalAnchor:b},T):a==="insideBottomLeft"?ci({x:h+j,y:l+d-x,textAnchor:_,verticalAnchor:y},T):a==="insideBottomRight"?ci({x:h+u-j,y:l+d-x,textAnchor:I,verticalAnchor:y},T):a&&typeof a=="object"&&(Kr(a.x)||eh(a.x))&&(Kr(a.y)||eh(a.y))?ci({x:i+Bl(a.x,m),y:l+Bl(a.y,d),textAnchor:"end",verticalAnchor:"end"},T):ci({x:p,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},T)},RJe={angle:0,offset:5,zIndex:jl.label,position:"middle",textBreakAll:!1};function c0(t){var e=sl(t,RJe),{viewBox:r,position:n,value:a,children:s,content:i,className:l="",textBreakAll:c,labelRef:u}=e,d=BJe(),f=Jle(),h=n==="center"?f:d??f,A,m,p;if(r==null?A=h:PF(r)?A=r:A=fie(r),!A||Bo(a)&&Bo(s)&&!v.isValidElement(i)&&typeof i!="function")return null;var g=ci(ci({},e),{},{viewBox:A});if(v.isValidElement(i)){var{labelRef:x}=g,y=xq(g,NJe);return v.cloneElement(i,y)}if(typeof i=="function"){var{content:b}=g,w=xq(g,CJe);if(m=v.createElement(i,w),v.isValidElement(m))return m}else m=TJe(e);var j=sd(e);if(PF(A)){if(n==="insideStart"||n==="insideEnd"||n==="end")return FJe(e,n,m,j,A);p=OJe(A,e.offset,e.position)}else p=DJe(e,A);return v.createElement(Yf,{zIndex:e.zIndex},v.createElement($j,NA({ref:u,className:Sa("recharts-label",l)},j,p,{textAnchor:xJe(j.textAnchor)?j.textAnchor:p.textAnchor,breakAll:c}),m))}c0.displayName="Label";var MJe=(t,e,r)=>{if(!t)return null;var n={viewBox:e,labelRef:r};return t===!0?v.createElement(c0,NA({key:"label-implicit"},n)):Hf(t)?v.createElement(c0,NA({key:"label-implicit",value:t},n)):v.isValidElement(t)?t.type===c0?v.cloneElement(t,ci({key:"label-implicit"},n)):v.createElement(c0,NA({key:"label-implicit",content:t},n)):G8(t)?v.createElement(c0,NA({key:"label-implicit",content:t},n)):t&&typeof t=="object"?v.createElement(c0,NA({},t,{key:"label-implicit"},n)):null};function LJe(t){var{label:e,labelRef:r}=t,n=Jle();return MJe(e,n,r)||null}var Zle={},ece={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r[r.length-1]}t.last=e})(ece);var tce={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Array.isArray(r)?r:Array.from(r)}t.toArray=e})(tce);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ece,r=tce,n=rj;function a(s){if(n.isArrayLike(s))return e.last(r.toArray(s))}t.last=a})(Zle);var UJe=Zle.last;const QJe=oh(UJe);var VJe=["valueAccessor"],HJe=["dataKey","clockWise","id","textBreakAll","zIndex"];function CI(){return CI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},CI.apply(null,arguments)}function yq(t,e){if(t==null)return{};var r,n,a=$Je(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function $Je(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var GJe=t=>Array.isArray(t.value)?QJe(t.value):t.value,rce=v.createContext(void 0),KJe=rce.Provider,nce=v.createContext(void 0),qJe=nce.Provider;function zJe(){return v.useContext(rce)}function WJe(){return v.useContext(nce)}function cE(t){var{valueAccessor:e=GJe}=t,r=yq(t,VJe),{dataKey:n,clockWise:a,id:s,textBreakAll:i,zIndex:l}=r,c=yq(r,HJe),u=zJe(),d=WJe(),f=u||d;return!f||!f.length?null:v.createElement(Yf,{zIndex:l??jl.label},v.createElement(rc,{className:"recharts-label-list"},f.map((h,A)=>{var m,p=Bo(n)?e(h,A):as(h&&h.payload,n),g=Bo(s)?{}:{id:"".concat(s,"-").concat(A)};return v.createElement(c0,CI({key:"label-".concat(A)},sd(h),c,g,{fill:(m=r.fill)!==null&&m!==void 0?m:h.fill,parentViewBox:h.parentViewBox,value:p,textBreakAll:i,viewBox:h.viewBox,index:A,zIndex:0}))})))}cE.displayName="LabelList";function ace(t){var{label:e}=t;return e?e===!0?v.createElement(cE,{key:"labelList-implicit"}):v.isValidElement(e)||G8(e)?v.createElement(cE,{key:"labelList-implicit",content:e}):typeof e=="object"?v.createElement(cE,CI({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var sce=t=>t.graphicalItems.polarItems,XJe=Ut([ys,qw],h8),Gj=Ut([sce,Ls,XJe],p8),YJe=Ut([Gj],g8),Kj=Ut([YJe,kj],x8),JJe=Ut([Kj,Ls,Gj],y8);Ut([Kj,Ls,Gj],(t,e,r)=>r.length>0?t.flatMap(n=>r.flatMap(a=>{var s,i=as(n,(s=e.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:i,errorDomain:[]}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(n=>({value:as(n,e.dataKey),errorDomain:[]})):t.map(n=>({value:n,errorDomain:[]})));var bq=()=>{},ZJe=Ut([Kj,Ls,Gj,Uj,ys],C8),eZe=Ut([Ls,w8,N8,bq,ZJe,bq,ra,ys],_8),ice=Ut([Ls,ra,Kj,JJe,Kw,ys,eZe],E8),tZe=Ut([ice,Ls,m1],j8);Ut([Ls,ice,tZe,ys],B8);var rZe={radiusAxis:{},angleAxis:{}},oce=Bc({name:"polarAxis",initialState:rZe,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:Oat,removeRadiusAxis:Dat,addAngleAxis:Rat,removeAngleAxis:Mat}=oce.actions,nZe=oce.reducer;function wq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Nq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wq(Object(r),!0).forEach(function(n){aZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function aZe(t,e,r){return(e=sZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sZe(t){var e=iZe(t,"string");return typeof e=="symbol"?e:e+""}function iZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oZe=(t,e)=>e,K8=Ut([sce,oZe],(t,e)=>t.filter(r=>r.type==="pie").find(r=>r.id===e)),lZe=[],q8=(t,e,r)=>(r==null?void 0:r.length)===0?lZe:r,lce=Ut([kj,K8,q8],(t,e,r)=>{var{chartData:n}=t;if(e!=null){var a;if((e==null?void 0:e.data)!=null&&e.data.length>0?a=e.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>Nq(Nq({},e.presentationProps),s.props))),a!=null)return a}}),cZe=Ut([lce,K8,q8],(t,e,r)=>{if(!(t==null||e==null))return t.map((n,a)=>{var s,i=as(n,e.nameKey,e.name),l;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?l=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?l=n.fill:l=e.fill,{value:hj(i,e.dataKey),color:l,payload:n,type:e.legendType}})}),uZe=Ut([lce,K8,q8,so],(t,e,r,n)=>{if(!(e==null||t==null))return Aet({offset:n,pieSettings:e,displayedData:t,cells:r})}),cce={exports:{}},Ma={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z8=Symbol.for("react.transitional.element"),W8=Symbol.for("react.portal"),qj=Symbol.for("react.fragment"),zj=Symbol.for("react.strict_mode"),Wj=Symbol.for("react.profiler"),Xj=Symbol.for("react.consumer"),Yj=Symbol.for("react.context"),Jj=Symbol.for("react.forward_ref"),Zj=Symbol.for("react.suspense"),e3=Symbol.for("react.suspense_list"),t3=Symbol.for("react.memo"),r3=Symbol.for("react.lazy"),dZe=Symbol.for("react.view_transition"),fZe=Symbol.for("react.client.reference");function ud(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case z8:switch(t=t.type,t){case qj:case Wj:case zj:case Zj:case e3:case dZe:return t;default:switch(t=t&&t.$$typeof,t){case Yj:case Jj:case r3:case t3:return t;case Xj:return t;default:return e}}case W8:return e}}}Ma.ContextConsumer=Xj;Ma.ContextProvider=Yj;Ma.Element=z8;Ma.ForwardRef=Jj;Ma.Fragment=qj;Ma.Lazy=r3;Ma.Memo=t3;Ma.Portal=W8;Ma.Profiler=Wj;Ma.StrictMode=zj;Ma.Suspense=Zj;Ma.SuspenseList=e3;Ma.isContextConsumer=function(t){return ud(t)===Xj};Ma.isContextProvider=function(t){return ud(t)===Yj};Ma.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===z8};Ma.isForwardRef=function(t){return ud(t)===Jj};Ma.isFragment=function(t){return ud(t)===qj};Ma.isLazy=function(t){return ud(t)===r3};Ma.isMemo=function(t){return ud(t)===t3};Ma.isPortal=function(t){return ud(t)===W8};Ma.isProfiler=function(t){return ud(t)===Wj};Ma.isStrictMode=function(t){return ud(t)===zj};Ma.isSuspense=function(t){return ud(t)===Zj};Ma.isSuspenseList=function(t){return ud(t)===e3};Ma.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===qj||t===Wj||t===zj||t===Zj||t===e3||typeof t=="object"&&t!==null&&(t.$$typeof===r3||t.$$typeof===t3||t.$$typeof===Yj||t.$$typeof===Xj||t.$$typeof===Jj||t.$$typeof===fZe||t.getModuleId!==void 0)};Ma.typeOf=ud;cce.exports=Ma;var AZe=cce.exports,Cq=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",_q=null,YP=null,uce=t=>{if(t===_q&&Array.isArray(YP))return YP;var e=[];return v.Children.forEach(t,r=>{Bo(r)||(AZe.isFragment(r)?e=e.concat(uce(r.props.children)):e.push(r))}),YP=e,_q=t,e};function X8(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(a=>Cq(a)):n=[Cq(e)],uce(t).forEach(a=>{var s=tg(a,"type.displayName")||tg(a,"type.name");s&&n.indexOf(s)!==-1&&r.push(a)}),r}var dce={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}t.isPlainObject=e})(dce);var hZe=dce.isPlainObject;const mZe=oh(hZe);var Eq,Sq,Iq,jq,Pq;function Bq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Tq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Bq(Object(r),!0).forEach(function(n){pZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pZe(t,e,r){return(e=gZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gZe(t){var e=xZe(t,"string");return typeof e=="symbol"?e:e+""}function xZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _I(){return _I=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_I.apply(null,arguments)}function vy(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var kq=(t,e,r,n,a)=>{var s=r-n,i;return i=zs(Eq||(Eq=vy(["M ",",",""])),t,e),i+=zs(Sq||(Sq=vy(["L ",",",""])),t+r,e),i+=zs(Iq||(Iq=vy(["L ",",",""])),t+r-s/2,e+a),i+=zs(jq||(jq=vy(["L ",",",""])),t+r-s/2-n,e+a),i+=zs(Pq||(Pq=vy(["L ",","," Z"])),t,e),i},vZe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},yZe=t=>{var e=sl(t,vZe),{x:r,y:n,upperWidth:a,lowerWidth:s,height:i,className:l}=e,{animationEasing:c,animationDuration:u,animationBegin:d,isUpdateAnimationActive:f}=e,h=v.useRef(null),[A,m]=v.useState(-1),p=v.useRef(a),g=v.useRef(s),x=v.useRef(i),y=v.useRef(r),b=v.useRef(n),w=Ej(t,"trapezoid-");if(v.useEffect(()=>{if(h.current&&h.current.getTotalLength)try{var W=h.current.getTotalLength();W&&m(W)}catch{}},[]),r!==+r||n!==+n||a!==+a||s!==+s||i!==+i||a===0&&s===0||i===0)return null;var j=Sa("recharts-trapezoid",l);if(!f)return v.createElement("g",null,v.createElement("path",_I({},sd(e),{className:j,d:kq(r,n,a,s,i)})));var I=p.current,_=g.current,S=x.current,E=y.current,k=b.current,P="0px ".concat(A===-1?1:A,"px"),T="".concat(A,"px 0px"),O=Eie(["strokeDasharray"],u,c);return v.createElement(_j,{animationId:w,key:w,canBegin:A>0,duration:u,easing:c,isActive:f,begin:d},W=>{var Ae=zi(I,a,W),de=zi(_,s,W),fe=zi(S,i,W),ge=zi(E,r,W),ee=zi(k,n,W);h.current&&(p.current=Ae,g.current=de,x.current=fe,y.current=ge,b.current=ee);var Fe=W>0?{transition:O,strokeDasharray:T}:{strokeDasharray:P};return v.createElement("path",_I({},sd(e),{className:j,d:kq(ge,ee,Ae,de,fe),ref:h,style:Tq(Tq({},Fe),e.style)}))})},bZe=["option","shapeType","activeClassName"];function wZe(t,e){if(t==null)return{};var r,n,a=NZe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function NZe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Fq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function EI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Fq(Object(r),!0).forEach(function(n){CZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Fq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function CZe(t,e,r){return(e=_Ze(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _Ze(t){var e=EZe(t,"string");return typeof e=="symbol"?e:e+""}function EZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function SZe(t,e){return EI(EI({},e),t)}function IZe(t,e){return t==="symbols"}function Oq(t){var{shapeType:e,elementProps:r}=t;switch(e){case"rectangle":return v.createElement(Pie,r);case"trapezoid":return v.createElement(yZe,r);case"sector":return v.createElement(Fie,r);case"symbols":if(IZe(e))return v.createElement(dR,r);break;case"curve":return v.createElement(FR,r);default:return null}}function jZe(t){return v.isValidElement(t)?t.props:t}function fce(t){var{option:e,shapeType:r,activeClassName:n="recharts-active-shape"}=t,a=wZe(t,bZe),s;if(v.isValidElement(e))s=v.cloneElement(e,EI(EI({},a),jZe(e)));else if(typeof e=="function")s=e(a,a.index);else if(mZe(e)&&typeof e!="boolean"){var i=SZe(e,a);s=v.createElement(Oq,{shapeType:r,elementProps:i})}else{var l=a;s=v.createElement(Oq,{shapeType:r,elementProps:l})}return a.isActive?v.createElement(rc,{className:n},s):s}var Y8=(t,e,r)=>{var n=qa();return(a,s)=>i=>{t==null||t(a,s,i),n(xle({activeIndex:String(s),activeDataKey:e,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}},J8=t=>{var e=qa();return(r,n)=>a=>{t==null||t(r,n,a),e(HWe())}},Z8=(t,e,r)=>{var n=qa();return(a,s)=>i=>{t==null||t(a,s,i),n($We({activeIndex:String(s),activeDataKey:e,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}};function Ace(t){var{tooltipEntrySettings:e}=t,r=qa(),n=hu(),a=v.useRef(null);return v.useLayoutEffect(()=>{n||(a.current===null?r(LWe(e)):a.current!==e&&r(UWe({prev:a.current,next:e})),a.current=e)},[e,r,n]),v.useLayoutEffect(()=>()=>{a.current&&(r(QWe(a.current)),a.current=null)},[r]),null}function PZe(t){var{legendPayload:e}=t,r=qa(),n=hu(),a=v.useRef(null);return v.useLayoutEffect(()=>{n||(a.current===null?r(wie(e)):a.current!==e&&r(Nie({prev:a.current,next:e})),a.current=e)},[r,n,e]),v.useLayoutEffect(()=>()=>{a.current&&(r(Cie(a.current)),a.current=null)},[r]),null}function BZe(t){var{legendPayload:e}=t,r=qa(),n=Hr(ra),a=v.useRef(null);return v.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(a.current===null?r(wie(e)):a.current!==e&&r(Nie({prev:a.current,next:e})),a.current=e)},[r,n,e]),v.useLayoutEffect(()=>()=>{a.current&&(r(Cie(a.current)),a.current=null)},[r]),null}var JP,TZe=()=>{var[t]=v.useState(()=>D2("uid-"));return t},kZe=(JP=Wue.useId)!==null&&JP!==void 0?JP:TZe;function FZe(t,e){var r=kZe();return e||(t?"".concat(t,"-").concat(r):r)}var OZe=v.createContext(void 0),hce=t=>{var{id:e,type:r,children:n}=t,a=FZe("recharts-".concat(r),e);return v.createElement(OZe.Provider,{value:a},n(a))},DZe={cartesianItems:[],polarItems:[]},mce=Bc({name:"graphicalItems",initialState:DZe,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:ds()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:r,next:n}=e.payload,a=Hd(t).cartesianItems.indexOf(r);a>-1&&(t.cartesianItems[a]=n)},prepare:ds()},removeCartesianGraphicalItem:{reducer(t,e){var r=Hd(t).cartesianItems.indexOf(e.payload);r>-1&&t.cartesianItems.splice(r,1)},prepare:ds()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:ds()},removePolarGraphicalItem:{reducer(t,e){var r=Hd(t).polarItems.indexOf(e.payload);r>-1&&t.polarItems.splice(r,1)},prepare:ds()}}}),{addCartesianGraphicalItem:RZe,replaceCartesianGraphicalItem:MZe,removeCartesianGraphicalItem:LZe,addPolarGraphicalItem:UZe,removePolarGraphicalItem:QZe}=mce.actions,VZe=mce.reducer,HZe=t=>{var e=qa(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?e(RZe(t)):r.current!==t&&e(MZe({prev:r.current,next:t})),r.current=t},[e,t]),v.useLayoutEffect(()=>()=>{r.current&&(e(LZe(r.current)),r.current=null)},[e]),null},$Ze=v.memo(HZe);function GZe(t){var e=qa();return v.useLayoutEffect(()=>(e(UZe(t)),()=>{e(QZe(t))}),[e,t]),null}var KZe=["key"],qZe=["onMouseEnter","onClick","onMouseLeave"],zZe=["id"],WZe=["id"];function Dq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ys(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Dq(Object(r),!0).forEach(function(n){XZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function XZe(t,e,r){return(e=YZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function YZe(t){var e=JZe(t,"string");return typeof e=="symbol"?e:e+""}function JZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dm(){return dm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dm.apply(null,arguments)}function n3(t,e){if(t==null)return{};var r,n,a=ZZe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function ZZe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function eet(t){var e=v.useMemo(()=>X8(t.children,tN),[t.children]),r=Hr(n=>cZe(n,t.id,e));return r==null?null:v.createElement(BZe,{legendPayload:r})}var tet=v.memo(t=>{var{dataKey:e,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:i,name:l,hide:c,tooltipType:u,id:d}=t,f={dataDefinedOnItem:n.map(h=>h.tooltipPayload),positions:n.map(h=>h.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:i,dataKey:e,nameKey:r,name:hj(l,e),hide:c,type:u,color:i,unit:"",graphicalItemId:d}};return v.createElement(Ace,{tooltipEntrySettings:f})}),ret=(t,e)=>t>e?"start":t<e?"end":"middle",net=(t,e,r)=>Bl(typeof e=="function"?e(t):e,r,r*.8),aet=(t,e,r)=>{var{top:n,left:a,width:s,height:i}=e,l=Bie(s,i),c=a+Bl(t.cx,s,s/2),u=n+Bl(t.cy,i,i/2),d=Bl(t.innerRadius,l,0),f=net(r,t.outerRadius,l),h=t.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:f,maxRadius:h}},set=(t,e)=>{var r=rl(e-t),n=Math.min(Math.abs(e-t),360);return r*n};function iet(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var oet=(t,e)=>{if(v.isValidElement(t))return v.cloneElement(t,e);if(typeof t=="function")return t(e);var r=Sa("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:n}=e,a=n3(e,KZe);return v.createElement(FR,dm({},a,{type:"linear",className:r}))},cet=(t,e,r)=>{if(v.isValidElement(t))return v.cloneElement(t,e);var n=r;if(typeof t=="function"&&(n=t(e),v.isValidElement(n)))return n;var a=Sa("recharts-pie-label-text",iet(t));return v.createElement($j,dm({},e,{alignmentBaseline:"middle",className:a}),n)};function uet(t){var{sectors:e,props:r,showLabels:n}=t,{label:a,labelLine:s,dataKey:i}=r;if(!n||!a||!e)return null;var l=Qf(r),c=O2(a),u=O2(s),d=typeof a=="object"&&"offsetRadius"in a&&typeof a.offsetRadius=="number"&&a.offsetRadius||20,f=e.map((h,A)=>{var m=(h.startAngle+h.endAngle)/2,p=ki(h.cx,h.cy,h.outerRadius+d,m),g=Ys(Ys(Ys(Ys({},l),h),{},{stroke:"none"},c),{},{index:A,textAnchor:ret(p.x,h.cx)},p),x=Ys(Ys(Ys(Ys({},l),h),{},{fill:"none",stroke:h.fill},u),{},{index:A,points:[ki(h.cx,h.cy,h.outerRadius,m),p],key:"line"});return v.createElement(Yf,{zIndex:jl.label,key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(A)},v.createElement(rc,null,s&&oet(s,x),cet(a,g,as(h,i))))});return v.createElement(rc,{className:"recharts-pie-labels"},f)}function det(t){var{sectors:e,props:r,showLabels:n}=t,{label:a}=r;return typeof a=="object"&&a!=null&&"position"in a?v.createElement(ace,{label:a}):v.createElement(uet,{sectors:e,props:r,showLabels:n})}function fet(t){var{sectors:e,activeShape:r,inactiveShape:n,allOtherPieProps:a,shape:s,id:i}=t,l=Hr(ig),c=Hr(U8),u=Hr(jXe),{onMouseEnter:d,onClick:f,onMouseLeave:h}=a,A=n3(a,qZe),m=Y8(d,a.dataKey,i),p=J8(h),g=Z8(f,a.dataKey,i);return e==null||e.length===0?null:v.createElement(v.Fragment,null,e.map((x,y)=>{if((x==null?void 0:x.startAngle)===0&&(x==null?void 0:x.endAngle)===0&&e.length!==1)return null;var b=u==null||u===i,w=String(y)===l&&(c==null||a.dataKey===c)&&b,j=l?n:null,I=r&&w?r:j,_=Ys(Ys({},x),{},{stroke:x.stroke,tabIndex:-1,[aie]:y,[sie]:i});return v.createElement(rc,dm({key:"sector-".concat(x==null?void 0:x.startAngle,"-").concat(x==null?void 0:x.endAngle,"-").concat(x.midAngle,"-").concat(y),tabIndex:-1,className:"recharts-pie-sector"},Dw(A,x,y),{onMouseEnter:m(x,y),onMouseLeave:p(x,y),onClick:g(x,y)}),v.createElement(fce,dm({option:s??I,index:y,shapeType:"sector",isActive:w},_)))}))}function Aet(t){var e,{pieSettings:r,displayedData:n,cells:a,offset:s}=t,{cornerRadius:i,startAngle:l,endAngle:c,dataKey:u,nameKey:d,tooltipType:f}=r,h=Math.abs(r.minAngle),A=set(l,c),m=Math.abs(A),p=n.length<=1?0:(e=r.paddingAngle)!==null&&e!==void 0?e:0,g=n.filter(I=>as(I,u,0)!==0).length,x=(m>=360?g:g-1)*p,y=m-g*h-x,b=n.reduce((I,_)=>{var S=as(_,u,0);return I+(Kr(S)?S:0)},0),w;if(b>0){var j;w=n.map((I,_)=>{var S=as(I,u,0),E=as(I,d,_),k=aet(r,s,I),P=(Kr(S)?S:0)/b,T,O=Ys(Ys({},I),a&&a[_]&&a[_].props);_?T=j.endAngle+rl(A)*p*(S!==0?1:0):T=l;var W=T+rl(A)*((S!==0?h:0)+P*y),Ae=(T+W)/2,de=(k.innerRadius+k.outerRadius)/2,fe=[{name:E,value:S,payload:O,dataKey:u,type:f,graphicalItemId:r.id}],ge=ki(k.cx,k.cy,de,Ae);return j=Ys(Ys(Ys(Ys({},r.presentationProps),{},{percent:P,cornerRadius:typeof i=="string"?parseFloat(i):i,name:E,tooltipPayload:fe,midAngle:Ae,middleRadius:de,tooltipPosition:ge},O),k),{},{value:S,dataKey:u,startAngle:T,endAngle:W,payload:O,paddingAngle:rl(A)*p}),j})}return w}function het(t){var{showLabels:e,sectors:r,children:n}=t,a=v.useMemo(()=>!e||!r?[]:r.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[r,e]);return v.createElement(qJe,{value:e?a:void 0},n)}function met(t){var{props:e,previousSectorsRef:r,id:n}=t,{sectors:a,isAnimationActive:s,animationBegin:i,animationDuration:l,animationEasing:c,activeShape:u,inactiveShape:d,onAnimationStart:f,onAnimationEnd:h}=e,A=Ej(e,"recharts-pie-"),m=r.current,[p,g]=v.useState(!1),x=v.useCallback(()=>{typeof h=="function"&&h(),g(!1)},[h]),y=v.useCallback(()=>{typeof f=="function"&&f(),g(!0)},[f]);return v.createElement(het,{showLabels:!p,sectors:a},v.createElement(_j,{animationId:A,begin:i,duration:l,isActive:s,easing:c,onAnimationStart:y,onAnimationEnd:x,key:A},b=>{var w=[],j=a&&a[0],I=j==null?void 0:j.startAngle;return a==null||a.forEach((_,S)=>{var E=m&&m[S],k=S>0?tg(_,"paddingAngle",0):0;if(E){var P=zi(E.endAngle-E.startAngle,_.endAngle-_.startAngle,b),T=Ys(Ys({},_),{},{startAngle:I+k,endAngle:I+P+k});w.push(T),I=T.endAngle}else{var{endAngle:O,startAngle:W}=_,Ae=zi(0,O-W,b),de=Ys(Ys({},_),{},{startAngle:I+k,endAngle:I+Ae+k});w.push(de),I=de.endAngle}}),r.current=w,v.createElement(rc,null,v.createElement(fet,{sectors:w,activeShape:u,inactiveShape:d,allOtherPieProps:e,shape:e.shape,id:n}))}),v.createElement(det,{showLabels:!p,sectors:a,props:e}),e.children)}var pet={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:jl.area};function get(t){var{id:e}=t,r=n3(t,zZe),{hide:n,className:a,rootTabIndex:s}=t,i=v.useMemo(()=>X8(t.children,tN),[t.children]),l=Hr(d=>uZe(d,e,i)),c=v.useRef(null),u=Sa("recharts-pie",a);return n||l==null?(c.current=null,v.createElement(rc,{tabIndex:s,className:u})):v.createElement(Yf,{zIndex:t.zIndex},v.createElement(tet,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:l,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),v.createElement(rc,{tabIndex:s,className:u},v.createElement(met,{props:Ys(Ys({},r),{},{sectors:l}),previousSectorsRef:c,id:e})))}function pce(t){var e=sl(t,pet),{id:r}=e,n=n3(e,WZe),a=Qf(n);return v.createElement(hce,{id:r,type:"pie"},s=>v.createElement(v.Fragment,null,v.createElement(GZe,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a,maxRadius:e.maxRadius}),v.createElement(eet,dm({},n,{id:s})),v.createElement(get,dm({},n,{id:s}))))}pce.displayName="Pie";function Rq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Mq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Rq(Object(r),!0).forEach(function(n){xet(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xet(t,e,r){return(e=vet(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vet(t){var e=yet(t,"string");return typeof e=="symbol"?e:e+""}function yet(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gce=0,bet={xAxis:{},yAxis:{},zAxis:{}},xce=Bc({name:"cartesianAxis",initialState:bet,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:ds()},replaceXAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.xAxis[r.id],t.xAxis[n.id]=n)},prepare:ds()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:ds()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:ds()},replaceYAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.yAxis[r.id],t.yAxis[n.id]=n)},prepare:ds()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:ds()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:ds()},replaceZAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.zAxis[r.id],t.zAxis[n.id]=n)},prepare:ds()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:ds()},updateYAxisWidth(t,e){var{id:r,width:n}=e.payload,a=t.yAxis[r];if(a){var s=a.widthHistory||[];if(s.length===3&&s[0]===s[2]&&n===s[1]&&n!==a.width&&Math.abs(n-s[0])<=1)return;var i=[...s,n].slice(-3);t.yAxis[r]=Mq(Mq({},t.yAxis[r]),{},{width:n,widthHistory:i})}}}}),{addXAxis:wet,replaceXAxis:Net,removeXAxis:Cet,addYAxis:_et,replaceYAxis:Eet,removeYAxis:Iet,addZAxis:Lat,replaceZAxis:Uat,removeZAxis:Qat,updateYAxisWidth:jet}=xce.actions,Pet=xce.reducer,Bet=Ut([so],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),Tet=Ut([Bet,gh,xh],(t,e,r)=>{if(!(!t||e==null||r==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,r-t.top-t.bottom)}}),vce=()=>Hr(Tet),Lq=(t,e,r)=>{var n=r??t;if(!Bo(n))return Bl(n,e,0)},ket=(t,e,r)=>{var n={},a=t.filter(Dj),s=t.filter(u=>u.stackId==null),i=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),l=Object.entries(i).map(u=>{var[d,f]=u,h=f.map(m=>m.dataKey),A=Lq(e,r,f[0].barSize);return{stackId:d,dataKeys:h,barSize:A}}),c=s.map(u=>{var d=[u.dataKey].filter(h=>h!=null),f=Lq(e,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...l,...c]};function Uq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function h_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Uq(Object(r),!0).forEach(function(n){Fet(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Uq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Fet(t,e,r){return(e=Oet(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Oet(t){var e=Det(t,"string");return typeof e=="symbol"?e:e+""}function Det(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ret(t,e,r,n,a){var s=n.length;if(!(s<1)){var i=Bl(t,r,0,!0),l,c=[];if(Ms(n[0].barSize)){var u=!1,d=r/s,f=n.reduce((x,y)=>x+(y.barSize||0),0);f+=(s-1)*i,f>=r&&(f-=(s-1)*i,i=0),f>=r&&d>0&&(u=!0,d*=.9,f=s*d);var h=(r-f)/2>>0,A={offset:h-i,size:0};l=n.reduce((x,y)=>{var b,w={stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:A.offset+A.size+i,size:u?d:(b=y.barSize)!==null&&b!==void 0?b:0}},j=[...x,w];return A=j[j.length-1].position,j},c)}else{var m=Bl(e,r,0,!0);r-2*m-(s-1)*i<=0&&(i=0);var p=(r-2*m-(s-1)*i)/s;p>1&&(p>>=0);var g=Ms(a)?Math.min(p,a):p;l=n.reduce((x,y,b)=>[...x,{stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:m+(p+i)*b+(p-g)/2,size:g}}],c)}return l}}var Met=(t,e,r,n,a,s,i)=>{var l=Bo(i)?e:i,c=Ret(r,n,a!==s?a:s,t,l);return a!==s&&c!=null&&(c=c.map(u=>h_(h_({},u),{},{position:h_(h_({},u.position),{},{offset:u.position.offset-a/2})}))),c},Let=(t,e)=>{var r=f8(e);if(!(!t||r==null||e==null)){var{stackId:n}=e;if(n!=null){var a=t[n];if(a){var{stackedData:s}=a;if(s)return s.find(i=>i.key===r)}}}};function Uet(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&Ms(t.zIndex)?t.zIndex:e}var yce=t=>{var{chartData:e}=t,r=qa(),n=hu();return v.useEffect(()=>n?()=>{}:(r(rq(e)),()=>{r(rq(void 0))}),[e,r,n]),null},Qq={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},bce=Bc({name:"brush",initialState:Qq,reducers:{setBrushSettings(t,e){return e.payload==null?Qq:e.payload}}}),{setBrushSettings:Vat}=bce.actions,Qet=bce.reducer;function Vet(t,e,r){return(e=Het(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Het(t){var e=$et(t,"string");return typeof e=="symbol"?e:e+""}function $et(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class eM{static create(e){return new eM(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(n)switch(n){case"start":return this.scale(e);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(r){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}return this.scale(e)}}isInRange(e){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?e>=n&&e<=a:e>=a&&e<=n}}Vet(eM,"EPS",1e-4);function Get(t){return(t%180+180)%180}var Ket=function(e){var{width:r,height:n}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Get(a),i=s*Math.PI/180,l=Math.atan(n/r),c=i>l&&i<Math.PI-l?n/Math.sin(i):r/Math.cos(i);return Math.abs(c)},qet={dots:[],areas:[],lines:[]},wce=Bc({name:"referenceElements",initialState:qet,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var r=Hd(t).dots.findIndex(n=>n===e.payload);r!==-1&&t.dots.splice(r,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var r=Hd(t).areas.findIndex(n=>n===e.payload);r!==-1&&t.areas.splice(r,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var r=Hd(t).lines.findIndex(n=>n===e.payload);r!==-1&&t.lines.splice(r,1)}}}),{addDot:Hat,removeDot:$at,addArea:Gat,removeArea:Kat,addLine:qat,removeLine:zat}=wce.actions,zet=wce.reducer,Wet=v.createContext(void 0),Xet=t=>{var{children:e}=t,[r]=v.useState("".concat(D2("recharts"),"-clip")),n=vce();if(n==null)return null;var{x:a,y:s,width:i,height:l}=n;return v.createElement(Wet.Provider,{value:r},v.createElement("defs",null,v.createElement("clipPath",{id:r},v.createElement("rect",{x:a,y:s,height:l,width:i}))),e)};function Nce(t,e){if(e<1)return[];if(e===1)return t;for(var r=[],n=0;n<t.length;n+=e){var a=t[n];a!==void 0&&r.push(a)}return r}function Yet(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return Ket(n,r)}function Jet(t,e,r){var n=r==="width",{x:a,y:s,width:i,height:l}=t;return e===1?{start:n?a:s,end:n?a+i:s+l}:{start:n?a+i:s+l,end:n?a:s}}function X2(t,e,r,n,a){if(t*e<t*n||t*e>t*a)return!1;var s=r();return t*(e-t*s/2-n)>=0&&t*(e+t*s/2-a)<=0}function Zet(t,e){return Nce(t,e+1)}function ett(t,e,r,n,a){for(var s=(n||[]).slice(),{start:i,end:l}=e,c=0,u=1,d=i,f=function(){var m=n==null?void 0:n[c];if(m===void 0)return{v:Nce(n,u)};var p=c,g,x=()=>(g===void 0&&(g=r(m,p)),g),y=m.coordinate,b=c===0||X2(t,y,x,d,l);b||(c=0,d=i,u+=1),b&&(d=y+t*(x()/2+a),c+=u)},h;u<=s.length;)if(h=f(),h)return h.v;return[]}function ttt(t,e,r,n,a){var s=(n||[]).slice(),i=s.length;if(i===0)return[];for(var{start:l,end:c}=e,u=1;u<=i;u++){for(var d=(i-1)%u,f=l,h=!0,A=function(){var y=n[m],b=m,w,j=()=>(w===void 0&&(w=r(y,b)),w),I=y.coordinate,_=m===d||X2(t,I,j,f,c);if(!_)return h=!1,1;_&&(f=I+t*(j()/2+a))},m=d;m<i&&!A();m+=u);if(h){for(var p=[],g=d;g<i;g+=u)p.push(n[g]);return p}}return[]}function Vq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function wl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Vq(Object(r),!0).forEach(function(n){rtt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rtt(t,e,r){return(e=ntt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ntt(t){var e=att(t,"string");return typeof e=="symbol"?e:e+""}function att(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function stt(t,e,r,n,a){for(var s=(n||[]).slice(),i=s.length,{start:l}=e,{end:c}=e,u=function(h){var A=s[h],m,p=()=>(m===void 0&&(m=r(A,h)),m);if(h===i-1){var g=t*(A.coordinate+t*p()/2-c);s[h]=A=wl(wl({},A),{},{tickCoord:g>0?A.coordinate-g*t:A.coordinate})}else s[h]=A=wl(wl({},A),{},{tickCoord:A.coordinate});if(A.tickCoord!=null){var x=X2(t,A.tickCoord,p,l,c);x&&(c=A.tickCoord-t*(p()/2+a),s[h]=wl(wl({},A),{},{isShow:!0}))}},d=i-1;d>=0;d--)u(d);return s}function itt(t,e,r,n,a,s){var i=(n||[]).slice(),l=i.length,{start:c,end:u}=e;if(s){var d=n[l-1],f=r(d,l-1),h=t*(d.coordinate+t*f/2-u);if(i[l-1]=d=wl(wl({},d),{},{tickCoord:h>0?d.coordinate-h*t:d.coordinate}),d.tickCoord!=null){var A=X2(t,d.tickCoord,()=>f,c,u);A&&(u=d.tickCoord-t*(f/2+a),i[l-1]=wl(wl({},d),{},{isShow:!0}))}}for(var m=s?l-1:l,p=function(y){var b=i[y],w,j=()=>(w===void 0&&(w=r(b,y)),w);if(y===0){var I=t*(b.coordinate-t*j()/2-c);i[y]=b=wl(wl({},b),{},{tickCoord:I<0?b.coordinate-I*t:b.coordinate})}else i[y]=b=wl(wl({},b),{},{tickCoord:b.coordinate});if(b.tickCoord!=null){var _=X2(t,b.tickCoord,j,c,u);_&&(c=b.tickCoord+t*(j()/2+a),i[y]=wl(wl({},b),{},{isShow:!0}))}},g=0;g<m;g++)p(g);return i}function ott(t,e,r){var{tick:n,ticks:a,viewBox:s,minTickGap:i,orientation:l,interval:c,tickFormatter:u,unit:d,angle:f}=t;if(!a||!a.length||!n)return[];if(Kr(c)||Cj.isSsr){var h;return(h=Zet(a,Kr(c)?c:0))!==null&&h!==void 0?h:[]}var A=[],m=l==="top"||l==="bottom"?"width":"height",p=d&&m==="width"?jb(d,{fontSize:e,letterSpacing:r}):{width:0,height:0},g=(b,w)=>{var j=typeof u=="function"?u(b.value,w):b.value;return m==="width"?Yet(jb(j,{fontSize:e,letterSpacing:r}),p,f):jb(j,{fontSize:e,letterSpacing:r})[m]},x=a.length>=2?rl(a[1].coordinate-a[0].coordinate):1,y=Jet(s,x,m);return c==="equidistantPreserveStart"?ett(x,y,g,a,i):c==="equidistantPreserveEnd"?ttt(x,y,g,a,i):(c==="preserveStart"||c==="preserveStartEnd"?A=itt(x,y,g,a,i,c==="preserveStartEnd"):A=stt(x,y,g,a,i),A.filter(b=>b.isShow))}var ltt=t=>{var{ticks:e,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=t,i=0;if(e){Array.from(e).forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>i&&(i=f.width)}});var l=r?r.getBoundingClientRect().width:0,c=a+s,u=i+c+l+(r?n:0);return Math.round(u)}return 0},ctt=["axisLine","width","height","className","hide","ticks","axisType"];function utt(t,e){if(t==null)return{};var r,n,a=dtt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function dtt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function og(){return og=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},og.apply(null,arguments)}function Hq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ii(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Hq(Object(r),!0).forEach(function(n){ftt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Hq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ftt(t,e,r){return(e=Att(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Att(t){var e=htt(t,"string");return typeof e=="symbol"?e:e+""}function htt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Pp={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:jl.axis};function mtt(t){var{x:e,y:r,width:n,height:a,orientation:s,mirror:i,axisLine:l,otherSvgProps:c}=t;if(!l)return null;var u=Ii(Ii(Ii({},c),Qf(l)),{},{fill:"none"});if(s==="top"||s==="bottom"){var d=+(s==="top"&&!i||s==="bottom"&&i);u=Ii(Ii({},u),{},{x1:e,y1:r+d*a,x2:e+n,y2:r+d*a})}else{var f=+(s==="left"&&!i||s==="right"&&i);u=Ii(Ii({},u),{},{x1:e+f*n,y1:r,x2:e+f*n,y2:r+a})}return v.createElement("line",og({},u,{className:Sa("recharts-cartesian-axis-line",tg(l,"className"))}))}function ptt(t,e,r,n,a,s,i,l,c){var u,d,f,h,A,m,p=l?-1:1,g=t.tickSize||i,x=Kr(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":u=d=t.coordinate,h=r+ +!l*a,f=h-p*g,m=f-p*c,A=x;break;case"left":f=h=t.coordinate,d=e+ +!l*n,u=d-p*g,A=u-p*c,m=x;break;case"right":f=h=t.coordinate,d=e+ +l*n,u=d+p*g,A=u+p*c,m=x;break;default:u=d=t.coordinate,h=r+ +l*a,f=h+p*g,m=f+p*c,A=x;break}return{line:{x1:u,y1:f,x2:d,y2:h},tick:{x:A,y:m}}}function gtt(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function xtt(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function vtt(t){var{option:e,tickProps:r,value:n}=t,a,s=Sa(r.className,"recharts-cartesian-axis-tick-value");if(v.isValidElement(e))a=v.cloneElement(e,Ii(Ii({},r),{},{className:s}));else if(typeof e=="function")a=e(Ii(Ii({},r),{},{className:s}));else{var i="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(i=Sa(i,e==null?void 0:e.className)),a=v.createElement($j,og({},r,{className:i}),n)}return a}var ytt=v.forwardRef((t,e)=>{var{ticks:r=[],tick:n,tickLine:a,stroke:s,tickFormatter:i,unit:l,padding:c,tickTextProps:u,orientation:d,mirror:f,x:h,y:A,width:m,height:p,tickSize:g,tickMargin:x,fontSize:y,letterSpacing:b,getTicksConfig:w,events:j,axisType:I}=t,_=ott(Ii(Ii({},w),{},{ticks:r}),y,b),S=gtt(d,f),E=xtt(d,f),k=Qf(w),P=O2(n),T={};typeof a=="object"&&(T=a);var O=Ii(Ii({},k),{},{fill:"none"},T),W=_.map(fe=>Ii({entry:fe},ptt(fe,h,A,m,p,d,g,f,x))),Ae=W.map(fe=>{var{entry:ge,line:ee}=fe;return v.createElement(rc,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(ge.value,"-").concat(ge.coordinate,"-").concat(ge.tickCoord)},a&&v.createElement("line",og({},O,ee,{className:Sa("recharts-cartesian-axis-tick-line",tg(a,"className"))})))}),de=W.map((fe,ge)=>{var{entry:ee,tick:Fe}=fe,Pe=Ii(Ii(Ii(Ii({textAnchor:S,verticalAnchor:E},k),{},{stroke:"none",fill:s},P),Fe),{},{index:ge,payload:ee,visibleTicksCount:_.length,tickFormatter:i,padding:c},u);return v.createElement(rc,og({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ee.value,"-").concat(ee.coordinate,"-").concat(ee.tickCoord)},Dw(j,ee,ge)),n&&v.createElement(vtt,{option:n,tickProps:Pe,value:"".concat(typeof i=="function"?i(ee.value,ge):ee.value).concat(l||"")}))});return v.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(I,"-ticks")},de.length>0&&v.createElement(Yf,{zIndex:jl.label},v.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(I,"-tick-labels"),ref:e},de)),Ae.length>0&&v.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(I,"-tick-lines")},Ae))}),btt=v.forwardRef((t,e)=>{var{axisLine:r,width:n,height:a,className:s,hide:i,ticks:l,axisType:c}=t,u=utt(t,ctt),[d,f]=v.useState(""),[h,A]=v.useState(""),m=v.useRef(null);v.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var g;return ltt({ticks:m.current,label:(g=t.labelRef)===null||g===void 0?void 0:g.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var p=v.useCallback(g=>{if(g){var x=g.getElementsByClassName("recharts-cartesian-axis-tick-value");m.current=x;var y=x[0];if(y){var b=window.getComputedStyle(y),w=b.fontSize,j=b.letterSpacing;(w!==d||j!==h)&&(f(w),A(j))}}},[d,h]);return i||n!=null&&n<=0||a!=null&&a<=0?null:v.createElement(Yf,{zIndex:t.zIndex},v.createElement(rc,{className:Sa("recharts-cartesian-axis",s)},v.createElement(mtt,{x:t.x,y:t.y,width:n,height:a,orientation:t.orientation,mirror:t.mirror,axisLine:r,otherSvgProps:Qf(t)}),v.createElement(ytt,{ref:p,axisType:c,events:u,fontSize:d,getTicksConfig:t,height:t.height,letterSpacing:h,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:l,unit:t.unit,width:t.width,x:t.x,y:t.y}),v.createElement(jJe,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},v.createElement(LJe,{label:t.label,labelRef:t.labelRef}),t.children)))}),tM=v.forwardRef((t,e)=>{var r=sl(t,Pp);return v.createElement(btt,og({},r,{ref:e}))});tM.displayName="CartesianAxis";var wtt={},Cce=Bc({name:"errorBars",initialState:wtt,reducers:{addErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]||(t[r]=[]),t[r].push(n)},replaceErrorBar:(t,e)=>{var{itemId:r,prev:n,next:a}=e.payload;t[r]&&(t[r]=t[r].map(s=>s.dataKey===n.dataKey&&s.direction===n.direction?a:s))},removeErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]&&(t[r]=t[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:Wat,replaceErrorBar:Xat,removeErrorBar:Yat}=Cce.actions,Ntt=Cce.reducer,Ctt=["children"];function _tt(t,e){if(t==null)return{};var r,n,a=Ett(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Ett(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Stt={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Itt=v.createContext(Stt);function jtt(t){var{children:e}=t,r=_tt(t,Ctt);return v.createElement(Itt.Provider,{value:r},e)}function _ce(t,e){var r,n,a=Hr(u=>bh(u,t)),s=Hr(u=>wh(u,e)),i=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:po.allowDataOverflow,l=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:go.allowDataOverflow,c=i||l;return{needClip:c,needClipX:i,needClipY:l}}function Ptt(t){var{xAxisId:e,yAxisId:r,clipPathId:n}=t,a=vce(),{needClipX:s,needClipY:i,needClip:l}=_ce(e,r);if(!l||!a)return null;var{x:c,y:u,width:d,height:f}=a;return v.createElement("clipPath",{id:"clipPath-".concat(n)},v.createElement("rect",{x:s?c:c-d/2,y:i?u:u-f/2,width:s?d:d*2,height:i?f:f*2}))}var Btt={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rN=v;function Ttt(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ktt=typeof Object.is=="function"?Object.is:Ttt,Ftt=rN.useSyncExternalStore,Ott=rN.useRef,Dtt=rN.useEffect,Rtt=rN.useMemo,Mtt=rN.useDebugValue;Btt.useSyncExternalStoreWithSelector=function(t,e,r,n,a){var s=Ott(null);if(s.current===null){var i={hasValue:!1,value:null};s.current=i}else i=s.current;s=Rtt(function(){function c(A){if(!u){if(u=!0,d=A,A=n(A),a!==void 0&&i.hasValue){var m=i.value;if(a(m,A))return f=m}return f=A}if(m=f,ktt(d,A))return m;var p=n(A);return a!==void 0&&a(m,p)?(d=A,m):(d=A,f=p)}var u=!1,d,f,h=r===void 0?null:r;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,r,n,a]);var l=Ftt(t,s[0],s[1]);return Dtt(function(){i.hasValue=!0,i.value=l},[l]),Mtt(l),l};function Ltt(t){t()}function Utt(){let t=null,e=null;return{clear(){t=null,e=null},notify(){Ltt(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=t;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=e={callback:r,next:null,prev:e};return a.prev?a.prev.next=a:t=a,function(){!n||t===null||(n=!1,a.next?a.next.prev=a.prev:e=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}var $q={notify(){},get:()=>[]};function Qtt(t,e){let r,n=$q,a=0,s=!1;function i(p){d();const g=n.subscribe(p);let x=!1;return()=>{x||(x=!0,g(),f())}}function l(){n.notify()}function c(){m.onStateChange&&m.onStateChange()}function u(){return s}function d(){a++,r||(r=t.subscribe(c),n=Utt())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=$q)}function h(){s||(s=!0,d())}function A(){s&&(s=!1,f())}const m={addNestedSub:i,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:A,getListeners:()=>n};return m}var Vtt=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Htt=Vtt(),$tt=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Gtt=$tt(),Ktt=()=>Htt||Gtt?v.useLayoutEffect:v.useEffect,qtt=Ktt();function Gq(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function ztt(t,e){if(Gq(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(e,r[a])||!Gq(t[r[a]],e[r[a]]))return!1;return!0}var ZP=Symbol.for("react-redux-context"),eB=typeof globalThis<"u"?globalThis:{};function Wtt(){if(!v.createContext)return{};const t=eB[ZP]??(eB[ZP]=new Map);let e=t.get(v.createContext);return e||(e=v.createContext(null),t.set(v.createContext,e)),e}var Xtt=Wtt();function Ytt(t){const{children:e,context:r,serverState:n,store:a}=t,s=v.useMemo(()=>{const c=Qtt(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),i=v.useMemo(()=>a.getState(),[a]);qtt(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),i!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,i]);const l=r||Xtt;return v.createElement(l.Provider,{value:s},e)}var Jtt=Ytt,Ztt=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function ert(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function rM(t,e){var r=new Set([...Object.keys(t),...Object.keys(e)]);for(var n of r)if(Ztt.has(n)){if(t[n]==null&&e[n]==null)continue;if(!ztt(t[n],e[n]))return!1}else if(!ert(t[n],e[n]))return!1;return!0}function jg(t,e){var r,n;return(r=(n=t.graphicalItems.cartesianItems.find(a=>a.id===e))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:gce}function Pg(t,e){var r,n;return(r=(n=t.graphicalItems.cartesianItems.find(a=>a.id===e))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:gce}var trt="Invariant failed";function rrt(t,e){throw new Error(trt)}function BF(){return BF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},BF.apply(null,arguments)}function SI(t){return v.createElement(fce,BF({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var nrt=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(Kr(e))return e;var s=Kr(n)||Bo(n);return s?e(n,a):(s||rrt(),r)}},art=(t,e,r)=>r,srt=(t,e)=>e,nN=Ut([m8,srt],(t,e)=>t.filter(r=>r.type==="bar").find(r=>r.id===e)),irt=Ut([nN],t=>t==null?void 0:t.maxBarSize),ort=(t,e,r,n)=>n,lrt=Ut([ra,m8,jg,Pg,art],(t,e,r,n,a)=>e.filter(s=>t==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),crt=(t,e,r)=>{var n=ra(t),a=jg(t,e),s=Pg(t,e);if(!(a==null||s==null))return n==="horizontal"?CF(t,"yAxis",s,r):CF(t,"xAxis",a,r)},urt=(t,e)=>{var r=ra(t),n=jg(t,e),a=Pg(t,e);if(!(n==null||a==null))return r==="horizontal"?GK(t,"xAxis",n):GK(t,"yAxis",a)},drt=Ut([lrt,Tze,urt],ket),frt=(t,e,r)=>{var n,a,s=nN(t,e);if(s!=null){var i=jg(t,e),l=Pg(t,e);if(!(i==null||l==null)){var c=ra(t),u=koe(t),{maxBarSize:d}=s,f=Bo(d)?u:d,h,A;return c==="horizontal"?(h=Mv(t,"xAxis",i,r),A=Rv(t,"xAxis",i,r)):(h=Mv(t,"yAxis",l,r),A=Rv(t,"yAxis",l,r)),(n=(a=tI(h,A,!0))!==null&&a!==void 0?a:f)!==null&&n!==void 0?n:0}}},Ece=(t,e,r)=>{var n=ra(t),a=jg(t,e),s=Pg(t,e);if(!(a==null||s==null)){var i,l;return n==="horizontal"?(i=Mv(t,"xAxis",a,r),l=Rv(t,"xAxis",a,r)):(i=Mv(t,"yAxis",s,r),l=Rv(t,"yAxis",s,r)),tI(i,l)}},Art=Ut([drt,koe,Bze,Foe,frt,Ece,irt],Met),hrt=(t,e,r)=>{var n=jg(t,e);if(n!=null)return Mv(t,"xAxis",n,r)},mrt=(t,e,r)=>{var n=Pg(t,e);if(n!=null)return Mv(t,"yAxis",n,r)},prt=(t,e,r)=>{var n=jg(t,e);if(n!=null)return Rv(t,"xAxis",n,r)},grt=(t,e,r)=>{var n=Pg(t,e);if(n!=null)return Rv(t,"yAxis",n,r)},xrt=Ut([Art,nN],(t,e)=>{if(!(t==null||e==null)){var r=t.find(n=>n.stackId===e.stackId&&e.dataKey!=null&&n.dataKeys.includes(e.dataKey));if(r!=null)return r.position}}),vrt=Ut([crt,nN],Let),yrt=Ut([so,PR,hrt,mrt,prt,grt,xrt,ra,vze,Ece,vrt,nN,ort],(t,e,r,n,a,s,i,l,c,u,d,f,h)=>{var{chartData:A,dataStartIndex:m,dataEndIndex:p}=c;if(!(f==null||i==null||e==null||l!=="horizontal"&&l!=="vertical"||r==null||n==null||a==null||s==null||u==null)){var{data:g}=f,x;if(g!=null&&g.length>0?x=g:x=A==null?void 0:A.slice(m,p+1),x!=null)return Wrt({layout:l,barSettings:f,pos:i,parentViewBox:e,bandSize:u,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:s,stackedData:d,displayedData:x,offset:t,cells:h,dataStartIndex:m})}}),brt=["index"];function TF(){return TF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},TF.apply(null,arguments)}function wrt(t,e){if(t==null)return{};var r,n,a=Nrt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Nrt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Sce=v.createContext(void 0),Crt=t=>{var e=v.useContext(Sce);if(e!=null)return e.stackId;if(t!=null)return yHe(t)},_rt=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),Ert=t=>{var e=v.useContext(Sce);if(e!=null){var{stackId:r}=e;return"url(#".concat(_rt(r,t),")")}},Srt=t=>{var{index:e}=t,r=wrt(t,brt),n=Ert(e);return v.createElement(rc,TF({className:"recharts-bar-stack-layer",clipPath:n},r))},Irt=["onMouseEnter","onMouseLeave","onClick"],jrt=["value","background","tooltipPosition"],Prt=["id"],Brt=["onMouseEnter","onClick","onMouseLeave"];function ih(){return ih=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ih.apply(null,arguments)}function Kq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Xl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Kq(Object(r),!0).forEach(function(n){Trt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Kq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Trt(t,e,r){return(e=krt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function krt(t){var e=Frt(t,"string");return typeof e=="symbol"?e:e+""}function Frt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function II(t,e){if(t==null)return{};var r,n,a=Ort(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Ort(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Drt=t=>{var{dataKey:e,name:r,fill:n,legendType:a,hide:s}=t;return[{inactive:s,dataKey:e,type:a,color:n,value:hj(r,e),payload:t}]},Rrt=v.memo(t=>{var{dataKey:e,stroke:r,strokeWidth:n,fill:a,name:s,hide:i,unit:l,tooltipType:c,id:u}=t,d={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:e,nameKey:void 0,name:hj(s,e),hide:i,type:c,color:a,unit:l,graphicalItemId:u}};return v.createElement(Ace,{tooltipEntrySettings:d})});function Mrt(t){var e=Hr(ig),{data:r,dataKey:n,background:a,allOtherBarProps:s}=t,{onMouseEnter:i,onMouseLeave:l,onClick:c}=s,u=II(s,Irt),d=Y8(i,n,s.id),f=J8(l),h=Z8(c,n,s.id);if(!a||r==null)return null;var A=O2(a);return v.createElement(Yf,{zIndex:Uet(a,jl.barBackground)},r.map((m,p)=>{var{value:g,background:x,tooltipPosition:y}=m,b=II(m,jrt);if(!x)return null;var w=d(m,p),j=f(m,p),I=h(m,p),_=Xl(Xl(Xl(Xl(Xl({option:a,isActive:String(p)===e},b),{},{fill:"#eee"},x),A),Dw(u,m,p)),{},{onMouseEnter:w,onMouseLeave:j,onClick:I,dataKey:n,index:p,className:"recharts-bar-background-rectangle"});return v.createElement(SI,ih({key:"background-bar-".concat(p)},_))}))}function Lrt(t){var{showLabels:e,children:r,rects:n}=t,a=n==null?void 0:n.map(s=>{var i={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return Xl(Xl({},i),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:i,fill:s.fill})});return v.createElement(KJe,{value:e?a:void 0},r)}function Urt(t){var{shape:e,activeBar:r,baseProps:n,entry:a,index:s,dataKey:i}=t,l=Hr(ig),c=Hr(U8),u=r&&String(s)===l&&(c==null||i===c),d=u?r:e;return u?v.createElement(Yf,{zIndex:jl.activeBar},v.createElement(SI,ih({},n,{name:String(n.name)},a,{isActive:u,option:d,index:s,dataKey:i}))):v.createElement(SI,ih({},n,{name:String(n.name)},a,{isActive:u,option:d,index:s,dataKey:i}))}function Qrt(t){var{shape:e,baseProps:r,entry:n,index:a,dataKey:s}=t;return v.createElement(SI,ih({},r,{name:String(r.name)},n,{isActive:!1,option:e,index:a,dataKey:s}))}function Vrt(t){var e,{data:r,props:n}=t,a=(e=Qf(n))!==null&&e!==void 0?e:{},{id:s}=a,i=II(a,Prt),{shape:l,dataKey:c,activeBar:u}=n,{onMouseEnter:d,onClick:f,onMouseLeave:h}=n,A=II(n,Brt),m=Y8(d,c,s),p=J8(h),g=Z8(f,c,s);return r?v.createElement(v.Fragment,null,r.map((x,y)=>v.createElement(Srt,ih({index:y,key:"rectangle-".concat(x==null?void 0:x.x,"-").concat(x==null?void 0:x.y,"-").concat(x==null?void 0:x.value,"-").concat(y),className:"recharts-bar-rectangle"},Dw(A,x,y),{onMouseEnter:m(x,y),onMouseLeave:p(x,y),onClick:g(x,y)}),u?v.createElement(Urt,{shape:l,activeBar:u,baseProps:i,entry:x,index:y,dataKey:c}):v.createElement(Qrt,{shape:l,baseProps:i,entry:x,index:y,dataKey:c})))):null}function Hrt(t){var{props:e,previousRectanglesRef:r}=t,{data:n,layout:a,isAnimationActive:s,animationBegin:i,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=e,f=r.current,h=Ej(e,"recharts-bar-"),[A,m]=v.useState(!1),p=!A,g=v.useCallback(()=>{typeof u=="function"&&u(),m(!1)},[u]),x=v.useCallback(()=>{typeof d=="function"&&d(),m(!0)},[d]);return v.createElement(Lrt,{showLabels:p,rects:n},v.createElement(_j,{animationId:h,begin:i,duration:l,isActive:s,easing:c,onAnimationEnd:g,onAnimationStart:x,key:h},y=>{var b=y===1?n:n==null?void 0:n.map((w,j)=>{var I=f&&f[j];if(I)return Xl(Xl({},w),{},{x:zi(I.x,w.x,y),y:zi(I.y,w.y,y),width:zi(I.width,w.width,y),height:zi(I.height,w.height,y)});if(a==="horizontal"){var _=zi(0,w.height,y),S=zi(w.stackedBarStart,w.y,y);return Xl(Xl({},w),{},{y:S,height:_})}var E=zi(0,w.width,y),k=zi(w.stackedBarStart,w.x,y);return Xl(Xl({},w),{},{width:E,x:k})});return y>0&&(r.current=b??null),b==null?null:v.createElement(rc,null,v.createElement(Vrt,{props:e,data:b}))}),v.createElement(ace,{label:e.label}),e.children)}function $rt(t){var e=v.useRef(null);return v.createElement(Hrt,{previousRectanglesRef:e,props:t})}var Ice=0,Grt=(t,e)=>{var r=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:r,errorVal:as(t,e)}};class Krt extends v.PureComponent{render(){var{hide:e,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:i,needClip:l,background:c,id:u}=this.props;if(e||r==null)return null;var d=Sa("recharts-bar",a),f=u;return v.createElement(rc,{className:d,id:u},l&&v.createElement("defs",null,v.createElement(Ptt,{clipPathId:f,xAxisId:s,yAxisId:i})),v.createElement(rc,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):void 0},v.createElement(Mrt,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),v.createElement($rt,this.props)))}}var qrt={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:Ice,xAxisId:0,yAxisId:0,zIndex:jl.bar};function zrt(t){var{xAxisId:e,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=t,{needClip:f}=_ce(e,r),h=Uw(),A=hu(),m=X8(t.children,tN),p=Hr(y=>yrt(y,t.id,A,m));if(h!=="vertical"&&h!=="horizontal")return null;var g,x=p==null?void 0:p[0];return x==null||x.height==null||x.width==null?g=0:g=h==="vertical"?x.height/2:x.width/2,v.createElement(jtt,{xAxisId:e,yAxisId:r,data:p,dataPointFormatter:Grt,errorBarOffset:g},v.createElement(Krt,ih({},t,{layout:h,needClip:f,data:p,xAxisId:e,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function Wrt(t){var{layout:e,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:i,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:h,cells:A,parentViewBox:m,dataStartIndex:p}=t,g=e==="horizontal"?l:i,x=d?g.scale.domain():null,y=bHe({numericAxis:g}),b=g.scale(y);return f.map((w,j)=>{var I,_,S,E,k,P;if(d){var T=d[j+p];if(T==null)return null;I=mHe(T,x)}else I=as(w,r),Array.isArray(I)||(I=[y,I]);var O=nrt(n,Ice)(I[1],j);if(e==="horizontal"){var W,[Ae,de]=[l.scale(I[0]),l.scale(I[1])];_=tG({axis:i,ticks:c,bandSize:s,offset:a.offset,entry:w,index:j}),S=(W=de??Ae)!==null&&W!==void 0?W:void 0,E=a.size;var fe=Ae-de;if(k=Vf(fe)?0:fe,P={x:_,y:h.top,width:E,height:h.height},Math.abs(O)>0&&Math.abs(k)<Math.abs(O)){var ge=rl(k||O)*(Math.abs(O)-Math.abs(k));S-=ge,k+=ge}}else{var[ee,Fe]=[i.scale(I[0]),i.scale(I[1])];if(_=ee,S=tG({axis:l,ticks:u,bandSize:s,offset:a.offset,entry:w,index:j}),E=Fe-ee,k=a.size,P={x:h.left,y:S,width:h.width,height:k},Math.abs(O)>0&&Math.abs(E)<Math.abs(O)){var Pe=rl(E||O)*(Math.abs(O)-Math.abs(E));E+=Pe}}if(_==null||S==null||E==null||k==null)return null;var F=Xl(Xl({},w),{},{stackedBarStart:b,x:_,y:S,width:E,height:k,value:d?I:I[1],payload:w,background:P,tooltipPosition:{x:_+E/2,y:S+k/2},parentViewBox:m},A&&A[j]&&A[j].props);return F}).filter(Boolean)}function Xrt(t){var e=sl(t,qrt),r=Crt(e.stackId),n=hu();return v.createElement(hce,{id:e.id,type:"bar"},a=>v.createElement(v.Fragment,null,v.createElement(PZe,{legendPayload:Drt(e)}),v.createElement(Rrt,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:a}),v.createElement($Ze,{type:"bar",id:a,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:r,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:n}),v.createElement(Yf,{zIndex:e.zIndex},v.createElement(zrt,ih({},e,{id:a})))))}var kF=v.memo(Xrt,rM);kF.displayName="Bar";var Yrt=["domain","range"],Jrt=["domain","range"];function qq(t,e){if(t==null)return{};var r,n,a=Zrt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Zrt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function zq(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function jce(t,e){if(t===e)return!0;var{domain:r,range:n}=t,a=qq(t,Yrt),{domain:s,range:i}=e,l=qq(e,Jrt);return!zq(r,s)||!zq(n,i)?!1:rM(a,l)}var ent=["dangerouslySetInnerHTML","ticks","scale"],tnt=["id","scale"];function FF(){return FF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},FF.apply(null,arguments)}function Wq(t,e){if(t==null)return{};var r,n,a=rnt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function rnt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function nnt(t){var e=qa(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?e(wet(t)):r.current!==t&&e(Net({prev:r.current,next:t})),r.current=t},[t,e]),v.useLayoutEffect(()=>()=>{r.current&&(e(Cet(r.current)),r.current=null)},[e]),null}var ant=t=>{var{xAxisId:e,className:r}=t,n=Hr(PR),a=hu(),s="xAxis",i=Hr(x=>fle(x,s,e,a)),l=Hr(x=>lle(x,e)),c=Hr(x=>jWe(x,e)),u=Hr(x=>Hoe(x,e));if(l==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f,scale:h}=t,A=Wq(t,ent),{id:m,scale:p}=u,g=Wq(u,tnt);return v.createElement(tM,FF({},A,g,{x:c.x,y:c.y,width:l.width,height:l.height,className:Sa("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:i,axisType:s}))},snt={allowDataOverflow:po.allowDataOverflow,allowDecimals:po.allowDecimals,allowDuplicatedCategory:po.allowDuplicatedCategory,angle:po.angle,axisLine:Pp.axisLine,height:po.height,hide:!1,includeHidden:po.includeHidden,interval:po.interval,minTickGap:po.minTickGap,mirror:po.mirror,orientation:po.orientation,padding:po.padding,reversed:po.reversed,scale:po.scale,tick:po.tick,tickCount:po.tickCount,tickLine:Pp.tickLine,tickSize:Pp.tickSize,type:po.type,xAxisId:0},int=t=>{var e=sl(t,snt);return v.createElement(v.Fragment,null,v.createElement(nnt,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),v.createElement(ant,e))},Pce=v.memo(int,jce);Pce.displayName="XAxis";var ont=["dangerouslySetInnerHTML","ticks","scale"],lnt=["id","scale"];function OF(){return OF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},OF.apply(null,arguments)}function Xq(t,e){if(t==null)return{};var r,n,a=cnt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function cnt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function unt(t){var e=qa(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?e(_et(t)):r.current!==t&&e(Eet({prev:r.current,next:t})),r.current=t},[t,e]),v.useLayoutEffect(()=>()=>{r.current&&(e(Iet(r.current)),r.current=null)},[e]),null}var dnt=t=>{var{yAxisId:e,className:r,width:n,label:a}=t,s=v.useRef(null),i=v.useRef(null),l=Hr(PR),c=hu(),u=qa(),d="yAxis",f=Hr(I=>cle(I,e)),h=Hr(I=>BWe(I,e)),A=Hr(I=>fle(I,d,e,c)),m=Hr(I=>$oe(I,e));if(v.useLayoutEffect(()=>{if(!(n!=="auto"||!f||G8(a)||v.isValidElement(a)||m==null)){var I=s.current;if(I){var _=I.getCalculatedWidth();Math.round(f.width)!==Math.round(_)&&u(jet({id:e,width:_}))}}},[A,f,u,a,e,n,m]),f==null||h==null||m==null)return null;var{dangerouslySetInnerHTML:p,ticks:g,scale:x}=t,y=Xq(t,ont),{id:b,scale:w}=m,j=Xq(m,lnt);return v.createElement(tM,OF({},y,j,{ref:s,labelRef:i,x:h.x,y:h.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:f.width,height:f.height,className:Sa("recharts-".concat(d," ").concat(d),r),viewBox:l,ticks:A,axisType:d}))},fnt={allowDataOverflow:go.allowDataOverflow,allowDecimals:go.allowDecimals,allowDuplicatedCategory:go.allowDuplicatedCategory,angle:go.angle,axisLine:Pp.axisLine,hide:!1,includeHidden:go.includeHidden,interval:go.interval,minTickGap:go.minTickGap,mirror:go.mirror,orientation:go.orientation,padding:go.padding,reversed:go.reversed,scale:go.scale,tick:go.tick,tickCount:go.tickCount,tickLine:Pp.tickLine,tickSize:Pp.tickSize,type:go.type,width:go.width,yAxisId:0},Ant=t=>{var e=sl(t,fnt);return v.createElement(v.Fragment,null,v.createElement(unt,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),v.createElement(dnt,e))},Bce=v.memo(Ant,jce);Bce.displayName="YAxis";var hnt=(t,e)=>e,nM=Ut([hnt,ra,Qoe,oo,Ile,Nh,KXe,so],ZXe),aM=t=>{var e=t.currentTarget.getBoundingClientRect(),r=e.width/t.currentTarget.offsetWidth,n=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/r),chartY:Math.round((t.clientY-e.top)/n)}},Tce=id("mouseClick"),kce=Mw();kce.startListening({actionCreator:Tce,effect:(t,e)=>{var r=t.payload,n=nM(e.getState(),aM(r));(n==null?void 0:n.activeIndex)!=null&&e.dispatch(GWe({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var DF=id("mouseMove"),Fce=Mw(),m_=null;Fce.startListening({actionCreator:DF,effect:(t,e)=>{var r=t.payload;m_!==null&&cancelAnimationFrame(m_);var n=aM(r);m_=requestAnimationFrame(()=>{var a=e.getState(),s=F8(a,a.tooltip.settings.shared);if(s==="axis"){var i=nM(a,n);(i==null?void 0:i.activeIndex)!=null?e.dispatch(yle({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):e.dispatch(vle())}m_=null})}});function mnt(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var Yq={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},Oce=Bc({name:"rootProps",initialState:Yq,reducers:{updateOptions:(t,e)=>{var r;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(r=e.payload.barGap)!==null&&r!==void 0?r:Yq.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),pnt=Oce.reducer,{updateOptions:gnt}=Oce.actions,Dce=Bc({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:xnt}=Dce.actions,vnt=Dce.reducer,Rce=id("keyDown"),Mce=id("focus"),sM=Mw();sM.startListening({actionCreator:Rce,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var i=O8(a,x1(r),Xw(r),Zw(r)),l=i==null?-1:Number(i);if(!(!Number.isFinite(l)||l<0)){var c=Nh(r);if(s==="Enter"){var u=NI(r,"axis","hover",String(a.index));e.dispatch(EF({active:!a.active,activeIndex:a.index,activeCoordinate:u}));return}var d=OWe(r),f=d==="left-to-right"?1:-1,h=s==="ArrowRight"?1:-1,A=l+h*f;if(!(c==null||A>=c.length||A<0)){var m=NI(r,"axis","hover",String(A));e.dispatch(EF({active:!0,activeIndex:A.toString(),activeCoordinate:m}))}}}}}});sM.startListening({actionCreator:Mce,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",i=NI(r,"axis","hover",String(s));e.dispatch(EF({active:!0,activeIndex:s,activeCoordinate:i}))}}}});var Du=id("externalEvent"),Lce=Mw(),tB=new Map;Lce.startListening({actionCreator:Du,effect:(t,e)=>{var{handler:r,reactEvent:n}=t.payload;if(r!=null){n.persist();var a=n.type,s=tB.get(a);s!==void 0&&cancelAnimationFrame(s);var i=requestAnimationFrame(()=>{try{var l=e.getState(),c={activeCoordinate:BXe(l),activeDataKey:U8(l),activeIndex:ig(l),activeLabel:Ble(l),activeTooltipIndex:ig(l),isTooltipActive:TXe(l)};r(c,n)}finally{tB.delete(a)}});tB.set(a,i)}}});var ynt=Ut([p1],t=>t.tooltipItemPayloads),bnt=Ut([ynt,Jw,(t,e)=>e,(t,e,r)=>r],(t,e,r,n)=>{var a=t.find(l=>l.settings.graphicalItemId===n);if(a!=null){var{positions:s}=a;if(s!=null){var i=e(s,r);return i}}}),Uce=id("touchMove"),Qce=Mw();Qce.startListening({actionCreator:Uce,effect:(t,e)=>{var r=t.payload;if(!(r.touches==null||r.touches.length===0)){var n=e.getState(),a=F8(n,n.tooltip.settings.shared);if(a==="axis"){var s=r.touches[0];if(s==null)return;var i=nM(n,aM({clientX:s.clientX,clientY:s.clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&e.dispatch(yle({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(a==="item"){var l,c=r.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute(aie),f=(l=u.getAttribute(sie))!==null&&l!==void 0?l:void 0,h=g1(n).find(p=>p.id===f);if(d==null||h==null||f==null)return;var{dataKey:A}=h,m=bnt(n,d,f);e.dispatch(xle({activeDataKey:A,activeIndex:d,activeCoordinate:m,activeGraphicalItemId:f}))}}}});var wnt=Ise({brush:Qet,cartesianAxis:Pet,chartData:jYe,errorBars:Ntt,graphicalItems:VZe,layout:cHe,legend:h$e,options:CYe,polarAxis:nZe,polarOptions:vnt,referenceElements:zet,rootProps:pnt,tooltip:KWe,zIndex:AYe}),Nnt=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return FVe({reducer:wnt,preloadedState:e,middleware:n=>{var a;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((a="es6")!==null&&a!==void 0?a:"")}).concat([kce.middleware,Fce.middleware,sM.middleware,Lce.middleware,Qce.middleware])},enhancers:n=>{var a=n;return typeof n=="function"&&(a=n()),a.concat(Hse({type:"raf"}))},devTools:{serialize:{replacer:mnt},name:"recharts-".concat(r)}})};function Vce(t){var{preloadedState:e,children:r,reduxStoreName:n}=t,a=hu(),s=v.useRef(null);if(a)return r;s.current==null&&(s.current=Nnt(e,n));var i=bR;return v.createElement(Jtt,{context:i,store:s.current},r)}function Cnt(t){var{layout:e,margin:r}=t,n=qa(),a=hu();return v.useEffect(()=>{a||(n(iHe(e)),n(sHe(r)))},[n,a,e,r]),null}var Hce=v.memo(Cnt,rM);function $ce(t){var e=qa();return v.useEffect(()=>{e(gnt(t))},[e,t]),null}function Jq(t){var{zIndex:e,isPanorama:r}=t,n=v.useRef(null),a=qa();return v.useLayoutEffect(()=>(n.current&&a(dYe({zIndex:e,element:n.current,isPanorama:r})),()=>{a(fYe({zIndex:e,isPanorama:r}))}),[a,e,r]),v.createElement("g",{tabIndex:-1,ref:n})}function Zq(t){var{children:e,isPanorama:r}=t,n=Hr(tYe);if(!n||n.length===0)return e;var a=n.filter(i=>i<0),s=n.filter(i=>i>0);return v.createElement(v.Fragment,null,a.map(i=>v.createElement(Jq,{key:i,zIndex:i,isPanorama:r})),e,s.map(i=>v.createElement(Jq,{key:i,zIndex:i,isPanorama:r})))}var _nt=["children"];function Ent(t,e){if(t==null)return{};var r,n,a=Snt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Snt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function jI(){return jI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jI.apply(null,arguments)}var Int={width:"100%",height:"100%",display:"block"},jnt=v.forwardRef((t,e)=>{var r=Aie(),n=hie(),a=_ie();if(!cm(r)||!cm(n))return null;var{children:s,otherAttributes:i,title:l,desc:c}=t,u,d;return i!=null&&(typeof i.tabIndex=="number"?u=i.tabIndex:u=a?0:void 0,typeof i.role=="string"?d=i.role:d=a?"application":void 0),v.createElement(iR,jI({},i,{title:l,desc:c,role:d,tabIndex:u,width:r,height:n,style:Int,ref:e}),s)}),Pnt=t=>{var{children:e}=t,r=Hr(xj);if(!r)return null;var{width:n,height:a,y:s,x:i}=r;return v.createElement(iR,{width:n,height:a,x:i,y:s},e)},ez=v.forwardRef((t,e)=>{var{children:r}=t,n=Ent(t,_nt),a=hu();return a?v.createElement(Pnt,null,v.createElement(Zq,{isPanorama:!0},r)):v.createElement(jnt,jI({ref:e},n),v.createElement(Zq,{isPanorama:!1},r))});function Bnt(){var t=qa(),[e,r]=v.useState(null),n=Hr(SHe);return v.useEffect(()=>{if(e!=null){var a=e.getBoundingClientRect(),s=a.width/e.offsetWidth;Ms(s)&&s!==n&&t(lHe(s))}},[e,t,n]),r}function tz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Tnt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tz(Object(r),!0).forEach(function(n){knt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function knt(t,e,r){return(e=Fnt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Fnt(t){var e=Ont(t,"string");return typeof e=="symbol"?e:e+""}function Ont(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lg(){return lg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lg.apply(null,arguments)}var Dnt=()=>(MYe(),null);function PI(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var Rnt=v.forwardRef((t,e)=>{var r,n,a=v.useRef(null),[s,i]=v.useState({containerWidth:PI((r=t.style)===null||r===void 0?void 0:r.width),containerHeight:PI((n=t.style)===null||n===void 0?void 0:n.height)}),l=v.useCallback((u,d)=>{i(f=>{var h=Math.round(u),A=Math.round(d);return f.containerWidth===h&&f.containerHeight===A?f:{containerWidth:h,containerHeight:A}})},[]),c=v.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null&&typeof ResizeObserver<"u"){var{width:d,height:f}=u.getBoundingClientRect();l(d,f);var h=m=>{var{width:p,height:g}=m[0].contentRect;l(p,g)},A=new ResizeObserver(h);A.observe(u),a.current=A}},[e,l]);return v.useEffect(()=>()=>{var u=a.current;u!=null&&u.disconnect()},[l]),v.createElement(v.Fragment,null,v.createElement(yj,{width:s.containerWidth,height:s.containerHeight}),v.createElement("div",lg({ref:c},t)))}),Mnt=v.forwardRef((t,e)=>{var{width:r,height:n}=t,[a,s]=v.useState({containerWidth:PI(r),containerHeight:PI(n)}),i=v.useCallback((c,u)=>{s(d=>{var f=Math.round(c),h=Math.round(u);return d.containerWidth===f&&d.containerHeight===h?d:{containerWidth:f,containerHeight:h}})},[]),l=v.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:u,height:d}=c.getBoundingClientRect();i(u,d)}},[e,i]);return v.createElement(v.Fragment,null,v.createElement(yj,{width:a.containerWidth,height:a.containerHeight}),v.createElement("div",lg({ref:l},t)))}),Lnt=v.forwardRef((t,e)=>{var{width:r,height:n}=t;return v.createElement(v.Fragment,null,v.createElement(yj,{width:r,height:n}),v.createElement("div",lg({ref:e},t)))}),Unt=v.forwardRef((t,e)=>{var{width:r,height:n}=t;return eh(r)||eh(n)?v.createElement(Mnt,lg({},t,{ref:e})):v.createElement(Lnt,lg({},t,{ref:e}))});function Qnt(t){return t===!0?Rnt:Unt}var Vnt=v.forwardRef((t,e)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:i,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:A,onTouchMove:m,onTouchStart:p,style:g,width:x,responsive:y,dispatchTouchEvents:b=!0}=t,w=v.useRef(null),j=qa(),[I,_]=v.useState(null),[S,E]=v.useState(null),k=Bnt(),P=BR(),T=(P==null?void 0:P.width)>0?P.width:x,O=(P==null?void 0:P.height)>0?P.height:a,W=v.useCallback(U=>{k(U),typeof e=="function"&&e(U),_(U),E(U),U!=null&&(w.current=U)},[k,e,_,E]),Ae=v.useCallback(U=>{j(Tce(U)),j(Du({handler:s,reactEvent:U}))},[j,s]),de=v.useCallback(U=>{j(DF(U)),j(Du({handler:u,reactEvent:U}))},[j,u]),fe=v.useCallback(U=>{j(vle()),j(Du({handler:d,reactEvent:U}))},[j,d]),ge=v.useCallback(U=>{j(DF(U)),j(Du({handler:f,reactEvent:U}))},[j,f]),ee=v.useCallback(()=>{j(Mce())},[j]),Fe=v.useCallback(U=>{j(Rce(U.key))},[j]),Pe=v.useCallback(U=>{j(Du({handler:i,reactEvent:U}))},[j,i]),F=v.useCallback(U=>{j(Du({handler:l,reactEvent:U}))},[j,l]),Q=v.useCallback(U=>{j(Du({handler:c,reactEvent:U}))},[j,c]),H=v.useCallback(U=>{j(Du({handler:h,reactEvent:U}))},[j,h]),R=v.useCallback(U=>{j(Du({handler:p,reactEvent:U}))},[j,p]),z=v.useCallback(U=>{b&&j(Uce(U)),j(Du({handler:m,reactEvent:U}))},[j,b,m]),J=v.useCallback(U=>{j(Du({handler:A,reactEvent:U}))},[j,A]),D=Qnt(y);return v.createElement(Mle.Provider,{value:I},v.createElement(jae.Provider,{value:S},v.createElement(D,{width:T??(g==null?void 0:g.width),height:O??(g==null?void 0:g.height),className:Sa("recharts-wrapper",n),style:Tnt({position:"relative",cursor:"default",width:T,height:O},g),onClick:Ae,onContextMenu:Pe,onDoubleClick:F,onFocus:ee,onKeyDown:Fe,onMouseDown:Q,onMouseEnter:de,onMouseLeave:fe,onMouseMove:ge,onMouseUp:H,onTouchEnd:J,onTouchMove:z,onTouchStart:R,ref:W},v.createElement(Dnt,null),r)))}),Hnt=["width","height","responsive","children","className","style","compact","title","desc"];function $nt(t,e){if(t==null)return{};var r,n,a=Gnt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Gnt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Gce=v.forwardRef((t,e)=>{var{width:r,height:n,responsive:a,children:s,className:i,style:l,compact:c,title:u,desc:d}=t,f=$nt(t,Hnt),h=Qf(f);return c?v.createElement(v.Fragment,null,v.createElement(yj,{width:r,height:n}),v.createElement(ez,{otherAttributes:h,title:u,desc:d},s)):v.createElement(Vnt,{className:i,style:l,width:r,height:n,responsive:a??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},v.createElement(ez,{otherAttributes:h,title:u,desc:d,ref:e},v.createElement(Xet,null,s)))});function RF(){return RF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},RF.apply(null,arguments)}var Knt={top:5,right:5,bottom:5,left:5},qnt={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:Knt,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},znt=v.forwardRef(function(e,r){var n,a=sl(e.categoricalChartProps,qnt),{chartName:s,defaultTooltipEventType:i,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:u}=e,d={chartName:s,defaultTooltipEventType:i,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return v.createElement(Vce,{preloadedState:{options:d},reduxStoreName:(n=u.id)!==null&&n!==void 0?n:s},v.createElement(yce,{chartData:u.data}),v.createElement(Hce,{layout:a.layout,margin:a.margin}),v.createElement($ce,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),v.createElement(Gce,RF({},a,{ref:r})))}),Wnt=["axis","item"],Xnt=v.forwardRef((t,e)=>v.createElement(znt,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Wnt,tooltipPayloadSearcher:Ule,categoricalChartProps:t,ref:e}));function Ynt(t){var e=qa();return v.useEffect(()=>{e(xnt(t))},[e,t]),null}var Jnt=["layout"];function MF(){return MF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},MF.apply(null,arguments)}function Znt(t,e){if(t==null)return{};var r,n,a=eat(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function eat(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var tat={top:5,right:5,bottom:5,left:5},Kce={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:tat,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},rat=v.forwardRef(function(e,r){var n,a=sl(e.categoricalChartProps,Kce),{layout:s}=a,i=Znt(a,Jnt),{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d}=e,f={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return v.createElement(Vce,{preloadedState:{options:f},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:l},v.createElement(yce,{chartData:a.data}),v.createElement(Hce,{layout:s,margin:a.margin}),v.createElement($ce,{baseValue:void 0,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),v.createElement(Ynt,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),v.createElement(Gce,MF({},i,{ref:r})))});function rz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function nz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rz(Object(r),!0).forEach(function(n){nat(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nat(t,e,r){return(e=aat(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aat(t){var e=sat(t,"string");return typeof e=="symbol"?e:e+""}function sat(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var iat=["item"],oat=nz(nz({},Kce),{},{layout:"centric",startAngle:0,endAngle:360}),lat=v.forwardRef((t,e)=>{var r=sl(t,oat);return v.createElement(rat,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:iat,tooltipPayloadSearcher:Ule,categoricalChartProps:r,ref:e})});const cat="sellers_candies",p_="cash_deliveries_candies";function sa(t){const e=typeof t=="number"?t:parseFloat(String(t??"").replace(/,/g,""));return Number.isFinite(e)?e:0}function oi(t){return Number.isFinite(t)?t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}function g_(t,e){return t*e/100}function x_(t,e,r){return t-e-r}function az(t){return t?br(t.toDate(),"yyyy-MM-dd"):""}function v_(t){if(!t)return or.fromDate(new Date);const[e,r,n]=t.split("-").map(s=>parseInt(s,10)),a=new Date(e,(r||1)-1,n||1,0,0,0,0);return or.fromDate(a)}function uat(){const t=new Date,[e,r]=v.useState(br(Zd(t),"yyyy-MM-dd")),[n,a]=v.useState(br(Jd(t),"yyyy-MM-dd")),[s,i]=v.useState([]),l=v.useMemo(()=>{const D=new Map;return s.forEach(U=>D.set(U.id,U)),D},[s]),[c,u]=v.useState([]),[d,f]=v.useState(!0),[h,A]=v.useState(()=>br(new Date,"yyyy-MM-dd")),[m,p]=v.useState(""),[g,x]=v.useState(""),[y,b]=v.useState("0"),[w,j]=v.useState(""),[I,_]=v.useState(null),[S,E]=v.useState({}),k=v.useRef(null);v.useEffect(()=>{const D=tr(pt(Ge,cat),ln("name","asc")),U=qd(D,ne=>{const ve=ne.docs.map(L=>{const Ye=L.data();return{id:L.id,name:String((Ye==null?void 0:Ye.name)??""),branch:Ye!=null&&Ye.branch?String(Ye.branch):"",commissionPercent:sa((Ye==null?void 0:Ye.commissionPercent)??0)}});i(ve)},()=>i([]));return()=>U()},[]),v.useEffect(()=>{f(!0);const D=v_(e),U=new Date(v_(n).toDate().getTime());U.setDate(U.getDate()+1);const ne=or.fromDate(U),ve=tr(pt(Ge,p_),sr("date",">=",D),sr("date","<",ne),ln("date","desc")),L=qd(ve,Ye=>{const ie=Ye.docs.map(Z=>{const Oe=Z.data();return{id:Z.id,date:Oe==null?void 0:Oe.date,sellerId:String((Oe==null?void 0:Oe.sellerId)??""),sellerName:String((Oe==null?void 0:Oe.sellerName)??""),amountDelivered:sa(Oe==null?void 0:Oe.amountDelivered),commissionPercent:sa(Oe==null?void 0:Oe.commissionPercent),commissionPaid:sa(Oe==null?void 0:Oe.commissionPaid),extraExpenses:sa(Oe==null?void 0:Oe.extraExpenses),totalFinal:sa(Oe==null?void 0:Oe.totalFinal),comment:String((Oe==null?void 0:Oe.comment)??""),createdAt:Oe==null?void 0:Oe.createdAt,updatedAt:Oe==null?void 0:Oe.updatedAt}});u(ie),f(!1)},Ye=>{console.error("Firestore deliveries query error:",Ye),u([]),f(!1),alert("Firestore query fall. Revis consola (probable ndice).")});return()=>L()},[e,n]);const P=v.useMemo(()=>m?l.get(m):void 0,[m,l]),T=sa((P==null?void 0:P.commissionPercent)??0),O=sa(g),W=sa(y),Ae=g_(O,T),de=x_(O,Ae,W),fe=v.useMemo(()=>{var U;const D=new Map;for(const ne of c){const ve=ne.sellerId||ne.sellerName||"UNKNOWN",L=D.get(ve)??{sellerId:ne.sellerId,sellerName:ne.sellerName||((U=l.get(ne.sellerId))==null?void 0:U.name)||"Sin nombre",delivered:0,commission:0,totalFinal:0};L.delivered+=sa(ne.amountDelivered),L.commission+=sa(ne.commissionPaid),L.totalFinal+=sa(ne.totalFinal),D.set(ve,L)}return Array.from(D.values()).sort((ne,ve)=>ne.sellerName.localeCompare(ve.sellerName))},[c,l]),ge=v.useMemo(()=>{let D=0,U=0,ne=0,ve=0;for(const L of c)D+=sa(L.amountDelivered),U+=sa(L.commissionPaid),ne+=sa(L.extraExpenses),ve+=sa(L.totalFinal);return{delivered:D,commission:U,expenses:ne,totalFinal:ve}},[c]),ee=v.useMemo(()=>fe.map(D=>({name:D.sellerName,Entregado:Number(D.delivered.toFixed(2)),Comision:Number(D.commission.toFixed(2))})),[fe]),Fe=v.useMemo(()=>[{name:"Total Entregado (Bruto)",value:Number(ge.delivered.toFixed(2))},{name:"Total Comisin",value:Number(ge.commission.toFixed(2))},{name:"Total Gastos",value:Number(ge.expenses.toFixed(2))}].filter(D=>D.value>0),[ge]),Pe=["#3B82F6","#F59E0B","#EF4444"];async function F(){if(!m)return alert("Seleccion un vendedor.");if(O<=0)return alert("Ingres un Monto entregado vlido (> 0).");const D=l.get(m),U=(D==null?void 0:D.name)??"Sin nombre",ne=sa((D==null?void 0:D.commissionPercent)??0),ve=g_(O,ne),L=x_(O,ve,W);await wn(pt(Ge,p_),{date:v_(h),sellerId:m,sellerName:U,amountDelivered:O,commissionPercent:ne,commissionPaid:ve,extraExpenses:W,totalFinal:L,comment:w??"",createdAt:or.now()}),x(""),b("0"),j("")}function Q(D){_(D.id),E({...D,dateInput:az(D.date)})}function H(){_(null),E({})}async function R(D){const U=S,ne=String(U.sellerId??""),ve=l.get(ne),L=String(U.sellerName??(ve==null?void 0:ve.name)??"Sin nombre"),Ye=sa(U.amountDelivered),ie=sa(U.extraExpenses),Z=sa(U.commissionPercent??(ve==null?void 0:ve.commissionPercent)??0),Oe=g_(Ye,Z),le=x_(Ye,Oe,ie),se=v_(String(U.dateInput??az(U.date)));await rn(Kt(Ge,p_,D),{date:se,sellerId:ne,sellerName:L,amountDelivered:Ye,commissionPercent:Z,commissionPaid:Oe,extraExpenses:ie,totalFinal:le,comment:String(U.comment??""),updatedAt:or.now()}),H()}async function z(D){confirm("Eliminar este registro?")&&await yn(Kt(Ge,p_,D))}async function J(){if(!k.current)return;const D=await gg(k.current,{scale:2,useCORS:!0,backgroundColor:"#ffffff",scrollX:0,scrollY:-window.scrollY}),U=D.toDataURL("image/png"),ne=new Br("p","mm","a4"),ve=ne.internal.pageSize.getWidth(),L=ne.internal.pageSize.getHeight(),Ye=ve,ie=D.height*Ye/D.width;let Z=ie,Oe=0;for(ne.addImage(U,"PNG",0,Oe,Ye,ie),Z-=L;Z>0;)ne.addPage(),Oe=-(ie-Z),ne.addImage(U,"PNG",0,Oe,Ye,ie),Z-=L;ne.save(`Entregas_Dulces_${e}_a_${n}.pdf`)}return o.jsxs("div",{className:"p-3 md:p-6 max-w-7xl mx-auto space-y-3 md:space-y-4",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg md:text-2xl font-black text-gray-900",children:"Control Contable - Entregas de Vendedores (Dulces)"}),o.jsxs("p",{className:"text-xs md:text-sm text-gray-600",children:["Periodo: ",o.jsx("span",{className:"font-bold",children:e})," "," ",o.jsx("span",{className:"font-bold",children:n})]})]}),o.jsx("button",{onClick:J,className:"h-10 px-4 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800 active:scale-[0.99] transition",children:"Exportar a PDF"})]}),o.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[o.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Filtros de periodo"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Desde"}),o.jsx("input",{type:"date",value:e,onChange:D=>r(D.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Hasta"}),o.jsx("input",{type:"date",value:n,onChange:D=>a(D.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]})]})]}),o.jsxs("div",{ref:k,className:"space-y-3 md:space-y-4",children:[o.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[o.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"KPIs Consolidados"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[o.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[o.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Entradas (Neto)"}),o.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",oi(ge.totalFinal)]}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Entregado - Comisin - Gastos"})]}),o.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[o.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Comisiones"}),o.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",oi(ge.commission)]}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Suma de comisin pagada"})]}),o.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[o.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Gastos extras"}),o.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",oi(ge.expenses)]}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Suma de gastos registrados"})]}),o.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[o.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"Total entregado (Bruto)"}),o.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",oi(ge.delivered)]}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Sin restar nada"})]})]}),o.jsx("div",{className:"font-black text-sm text-gray-900 mt-4 mb-2",children:"KPI Vendedores (sumatoria del periodo)"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-[520px] w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-50 text-gray-700",children:[o.jsx("th",{className:"text-left p-2 font-black",children:"Vendedor"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Entregado"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Comisin"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Total final"})]})}),o.jsx("tbody",{children:fe.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-2 text-gray-500",colSpan:4,children:"Sin datos en el periodo seleccionado."})}):fe.map(D=>o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"p-2",children:D.sellerName}),o.jsxs("td",{className:"p-2 text-right",children:["$ ",oi(D.delivered)]}),o.jsxs("td",{className:"p-2 text-right",children:["$ ",oi(D.commission)]}),o.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",oi(D.totalFinal)]})]},D.sellerId||D.sellerName))})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[o.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Entregas y Comisin por vendedor (Barras)"}),o.jsx("div",{className:"w-full h-[320px]",children:o.jsx(cG,{children:o.jsxs(Xnt,{data:ee,children:[o.jsx(Pce,{dataKey:"name",interval:0,angle:-12,height:70}),o.jsx(Bce,{}),o.jsx(oq,{}),o.jsx(lF,{}),o.jsx(kF,{dataKey:"Entregado"}),o.jsx(kF,{dataKey:"Comision"})]})})})]}),o.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[o.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Distribucin (Pastel)"}),o.jsx("div",{className:"w-full h-[320px]",children:o.jsx(cG,{children:o.jsxs(lat,{children:[o.jsx(pce,{data:Fe,dataKey:"value",nameKey:"name",outerRadius:110,label:!0,children:Fe.map((D,U)=>o.jsx(tN,{fill:Pe[U%Pe.length]},U))}),o.jsx(oq,{}),o.jsx(lF,{})]})})})]})]}),o.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[o.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Agregar movimiento"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Fecha"}),o.jsx("input",{type:"date",value:h,onChange:D=>A(D.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Vendedor"}),o.jsxs("select",{value:m,onChange:D=>p(D.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10 bg-white",children:[o.jsx("option",{value:"",children:"Seleccionar..."}),s.map(D=>o.jsxs("option",{value:D.id,children:[D.name," ",D.branch?`(${D.branch})`:""]},D.id))]})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Monto entregado"}),o.jsx("input",{type:"number",inputMode:"decimal",value:g,onChange:D=>x(D.target.value),placeholder:"0.00",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin configurada"}),o.jsx("input",{value:`${T}%`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-800"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin pagada"}),o.jsx("input",{value:`$ ${oi(Ae)}`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-800"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Gastos extras"}),o.jsx("input",{type:"number",inputMode:"decimal",value:y,onChange:D=>b(D.target.value),placeholder:"0.00",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Total final"}),o.jsx("input",{value:`$ ${oi(de)}`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-900 font-extrabold"})]}),o.jsxs("label",{className:"space-y-1 md:col-span-2",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comentario"}),o.jsx("input",{value:w,onChange:D=>j(D.target.value),placeholder:"Opcional...",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]})]}),o.jsx("div",{className:"mt-3",children:o.jsx("button",{onClick:F,className:"w-full md:w-auto h-10 px-4 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800 active:scale-[0.99] transition",children:"Guardar movimiento"})})]}),o.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[o.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Registro detallado"}),d?o.jsx("div",{className:"text-sm text-gray-500",children:"Cargando..."}):c.length===0?o.jsx("div",{className:"text-sm text-gray-500",children:"No hay registros en el periodo."}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"hidden md:block overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1100px] w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-50 text-gray-700",children:[o.jsx("th",{className:"text-left p-2 font-black",children:"Fecha"}),o.jsx("th",{className:"text-left p-2 font-black",children:"Vendedor"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Monto entregado"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Comisin %"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Comisin pagada"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Gastos"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Total final"}),o.jsx("th",{className:"text-left p-2 font-black",children:"Comentario"}),o.jsx("th",{className:"text-left p-2 font-black",children:"Acciones"})]})}),o.jsx("tbody",{children:c.map(D=>{if(!(I===D.id))return o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"p-2",children:br(D.date.toDate(),"yyyy-MM-dd")}),o.jsx("td",{className:"p-2 font-semibold",children:D.sellerName}),o.jsxs("td",{className:"p-2 text-right",children:["$ ",oi(D.amountDelivered)]}),o.jsxs("td",{className:"p-2 text-right",children:[oi(D.commissionPercent),"%"]}),o.jsxs("td",{className:"p-2 text-right",children:["$ ",oi(D.commissionPaid)]}),o.jsxs("td",{className:"p-2 text-right",children:["$ ",oi(D.extraExpenses)]}),o.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",oi(D.totalFinal)]}),o.jsx("td",{className:"p-2",children:D.comment}),o.jsx("td",{className:"p-2",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>Q(D),className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Editar"}),o.jsx("button",{onClick:()=>z(D.id),className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold text-red-700 hover:bg-red-50",children:"Eliminar"})]})})]},D.id);const ne=sa(S.amountDelivered??D.amountDelivered),ve=sa(S.commissionPercent??D.commissionPercent),L=sa(S.extraExpenses??D.extraExpenses),Ye=g_(ne,ve),ie=x_(ne,Ye,L);return o.jsxs("tr",{className:"border-t bg-yellow-50/40",children:[o.jsx("td",{className:"p-2",children:o.jsx("input",{type:"date",value:String(S.dateInput??""),onChange:Z=>E(Oe=>({...Oe,dateInput:Z.target.value})),className:"h-9 px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),o.jsx("td",{className:"p-2",children:o.jsxs("select",{value:String(S.sellerId??D.sellerId),onChange:Z=>{const Oe=Z.target.value,le=l.get(Oe);E(se=>({...se,sellerId:Oe,sellerName:(le==null?void 0:le.name)??"",commissionPercent:sa((le==null?void 0:le.commissionPercent)??0)}))},className:"h-9 px-3 rounded-xl border border-gray-200 bg-white outline-none",children:[o.jsx("option",{value:"",children:"Seleccionar..."}),s.map(Z=>o.jsxs("option",{value:Z.id,children:[Z.name," ",Z.branch?`(${Z.branch})`:""]},Z.id))]})}),o.jsx("td",{className:"p-2 text-right",children:o.jsx("input",{type:"number",value:String(ne),onChange:Z=>E(Oe=>({...Oe,amountDelivered:sa(Z.target.value)})),className:"h-9 w-32 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),o.jsx("td",{className:"p-2 text-right",children:o.jsx("input",{type:"number",value:String(ve),onChange:Z=>E(Oe=>({...Oe,commissionPercent:sa(Z.target.value)})),className:"h-9 w-24 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),o.jsxs("td",{className:"p-2 text-right font-semibold",children:["$ ",oi(Ye)]}),o.jsx("td",{className:"p-2 text-right",children:o.jsx("input",{type:"number",value:String(L),onChange:Z=>E(Oe=>({...Oe,extraExpenses:sa(Z.target.value)})),className:"h-9 w-32 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),o.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",oi(ie)]}),o.jsx("td",{className:"p-2",children:o.jsx("input",{type:"text",value:String(S.comment??D.comment),onChange:Z=>E(Oe=>({...Oe,comment:Z.target.value})),className:"h-9 w-full px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),o.jsx("td",{className:"p-2",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>R(D.id),className:"h-8 px-3 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800",children:"Guardar"}),o.jsx("button",{onClick:H,className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Cancelar"})]})})]},D.id)})})]})}),o.jsxs("div",{className:"md:hidden space-y-3",children:[c.map(D=>o.jsxs("div",{className:"rounded-2xl border border-gray-100 p-3 bg-white",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx("div",{className:"font-black text-gray-900",children:D.sellerName}),o.jsx("div",{className:"text-xs font-extrabold bg-gray-100 rounded-full px-3 py-1",children:br(D.date.toDate(),"yyyy-MM-dd")})]}),o.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Monto entregado"}),o.jsxs("div",{className:"font-extrabold",children:["$ ",oi(D.amountDelivered)]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comisin %"}),o.jsxs("div",{className:"font-semibold",children:[oi(D.commissionPercent),"%"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comisin pagada"}),o.jsxs("div",{className:"font-semibold",children:["$ ",oi(D.commissionPaid)]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Gastos"}),o.jsxs("div",{className:"font-semibold",children:["$ ",oi(D.extraExpenses)]})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Total final"}),o.jsxs("div",{className:"text-base font-black",children:["$ ",oi(D.totalFinal)]})]}),D.comment?o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comentario"}),o.jsx("div",{className:"text-sm text-gray-800",children:D.comment})]}):null]}),o.jsxs("div",{className:"mt-3 flex gap-2",children:[o.jsx("button",{onClick:()=>Q(D),className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Editar"}),o.jsx("button",{onClick:()=>z(D.id),className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold text-red-700 hover:bg-red-50",children:"Eliminar"})]})]},D.id)),I?o.jsxs("div",{className:"rounded-2xl border border-yellow-200 bg-yellow-50 p-3",children:[o.jsx("div",{className:"font-black text-gray-900 mb-3",children:"Editando registro"}),o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Fecha"}),o.jsx("input",{type:"date",value:String(S.dateInput??""),onChange:D=>E(U=>({...U,dateInput:D.target.value})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Vendedor"}),o.jsxs("select",{value:String(S.sellerId??""),onChange:D=>{const U=D.target.value,ne=l.get(U);E(ve=>({...ve,sellerId:U,sellerName:(ne==null?void 0:ne.name)??"",commissionPercent:sa((ne==null?void 0:ne.commissionPercent)??0)}))},className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white",children:[o.jsx("option",{value:"",children:"Seleccionar..."}),s.map(D=>o.jsxs("option",{value:D.id,children:[D.name," ",D.branch?`(${D.branch})`:""]},D.id))]})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Monto entregado"}),o.jsx("input",{type:"number",value:String(S.amountDelivered??""),onChange:D=>E(U=>({...U,amountDelivered:sa(D.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Gastos extras"}),o.jsx("input",{type:"number",value:String(S.extraExpenses??""),onChange:D=>E(U=>({...U,extraExpenses:sa(D.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin %"}),o.jsx("input",{type:"number",value:String(S.commissionPercent??""),onChange:D=>E(U=>({...U,commissionPercent:sa(D.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comentario"}),o.jsx("input",{type:"text",value:String(S.comment??""),onChange:D=>E(U=>({...U,comment:D.target.value})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>R(I),className:"flex-1 h-10 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800",children:"Guardar"}),o.jsx("button",{onClick:H,className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Cancelar"})]})]})]}):null]})]})]})]})]})}const Mm=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function dat(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function sz(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function fat(t){const e=String(t||"").trim();if(!e)return 0;const r=Date.parse(e);return Number.isFinite(r)?r:0}function Aat({open:t,onClose:e,onDetected:r}){const n=v.useRef(null),a=v.useRef(null),[s,i]=v.useState(""),l=v.useRef("");return v.useEffect(()=>{if(!t)return;let c=!1;const u=new g2,d=()=>{var h,A,m;try{(h=a.current)==null||h.stop()}catch{}a.current=null;try{const p=(A=n.current)==null?void 0:A.srcObject;(m=p==null?void 0:p.getTracks)==null||m.call(p).forEach(g=>g.stop())}catch{}try{n.current&&(n.current.srcObject=null)}catch{}};return(async()=>{i("");try{if(!n.current)return;try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(m=>m.stop())}catch{}const h=await u.decodeFromConstraints({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}},audio:!1},n.current,A=>{if(!c&&A){const m=String(A.getText()||"").trim().replace(/\s+/g,"");if(!m||m===l.current)return;l.current=m,d(),r(m),e()}});a.current=h}catch(h){const A=String((h==null?void 0:h.message)||""),m=String((h==null?void 0:h.name)||"");A.toLowerCase().includes("permission")||m==="NotAllowedError"?i("Permiso de cmara denegado."):m==="NotFoundError"||A.toLowerCase().includes("notfound")?i("No se encontr cmara en este dispositivo."):A.toLowerCase().includes("secure")||A.toLowerCase().includes("https")?i("La cmara requiere HTTPS (sitio seguro)."):i(A||"No se pudo iniciar el escner.")}})(),()=>{c=!0,d()}},[t,e,r]),t?o.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 p-3 flex items-center justify-center",children:o.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-lg border overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[o.jsx("div",{className:"font-bold",children:"Escanear cdigo"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:e,type:"button",children:"Cerrar"})]}),o.jsxs("div",{className:"p-3",children:[o.jsxs("div",{className:"relative w-full aspect-[3/4] bg-black rounded-xl overflow-hidden",children:[o.jsx("video",{ref:n,className:"w-full h-full object-cover",muted:!0,playsInline:!0,autoPlay:!0}),o.jsx("div",{className:"absolute inset-0 pointer-events-none",children:o.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[85%] h-40 border-2 border-white/70 rounded-xl"})})]}),s&&o.jsx("div",{className:"mt-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2",children:s}),o.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Apunt al cdigo de barras y mantenelo estable."})]})]})}):null}function hat(){const{refreshKey:t,refresh:e}=jc(),[r,n]=v.useState(!0),[a,s]=v.useState(""),[i,l]=v.useState([]),[c,u]=v.useState(""),[d,f]=v.useState(""),[h,A]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState("ANY"),[y,b]=v.useState(!1),[w,j]=v.useState({});v.useEffect(()=>{(async()=>{n(!0),s("");try{const ue=await Lt(tr(pt(Ge,"candy_main_orders"))),ce=new Map;ue.forEach(Xe=>{var $e,Ne,ct;const ft=Xe.data(),gt=fat(ft.date),vt=((Ne=($e=ft==null?void 0:ft.createdAt)==null?void 0:$e.toMillis)==null?void 0:Ne.call($e))||((ct=ft==null?void 0:ft.createdAt)!=null&&ct.seconds?ft.createdAt.seconds*1e3:0)||0,At=Math.max(gt,vt),ye=Array.isArray(ft.items)?ft.items:[];for(const xe of ye){const Qe=String((xe==null?void 0:xe.id)||(xe==null?void 0:xe.productId)||"").trim();if(!Qe)continue;const dt=String((xe==null?void 0:xe.name)||(xe==null?void 0:xe.productName)||"").trim(),Bt=String((xe==null?void 0:xe.category)||"").trim(),qe=Number((xe==null?void 0:xe.unitPriceIsla)||0),bt=Number((xe==null?void 0:xe.unitPriceRivas)||0),G=Number((xe==null?void 0:xe.unitsPerPackage)||(xe==null?void 0:xe.unitsPerPack)||1),te=ce.get(Qe);(!te||At>=te._sortKey)&&ce.set(Qe,{productId:Qe,category:Bt,productName:dt,priceIsla:qe,priceRivas:bt,unitsPerPackage:G,_sortKey:At})}});const Te=Array.from(ce.values()).sort((Xe,ft)=>Xe.productName.localeCompare(ft.productName,"es"));l(Te)}catch(ue){console.error(ue),s(" Error cargando precios desde rdenes maestras."),l([])}finally{n(!1)}})()},[t]),v.useEffect(()=>{const ue=pt(Ge,"products_candies"),ce=tr(ue),Te=qd(ce,Xe=>{const ft={},gt={},vt={},At={};Xe.forEach(ye=>{const $e=ye.data();ft[ye.id]=Number(($e==null?void 0:$e.providerPrice)||($e==null?void 0:$e.providerPricePerUnit)||0),vt[ye.id]=Number(($e==null?void 0:$e.unitsPerPackage)||($e==null?void 0:$e.unitsPerPack)||1)||1;const Ne=String(($e==null?void 0:$e.barcode)||"").trim();Ne&&(gt[ye.id]=Ne);const ct=String(($e==null?void 0:$e.packaging)||($e==null?void 0:$e.empaque)||"").trim();ct&&(At[ye.id]=ct)});try{const ye=S.current||{};let $e=!1;for(const Qe of Object.keys(gt))if((gt[Qe]||"")!==(ye[Qe]||"")){$e=!0;break}const Ne=k.current||{};let ct=!1;for(const Qe of Object.keys(vt))if((vt[Qe]||0)!==(Ne[Qe]||0)){ct=!0;break}W(ft),de(vt);const xe={...gt,...ye};_(xe),S.current=xe,k.current={...vt},Fe(At),l(Qe=>Qe.map(dt=>({...dt,unitsPerPackage:vt[dt.productId]??dt.unitsPerPackage}))),!E.current&&$e&&(s(" Cdigo actualizado."),setTimeout(()=>s(""),3e3)),!E.current&&ct&&(s(" Unidades x paquete actualizadas."),setTimeout(()=>s(""),3e3)),E.current=!1}catch{W(ft),de(vt),_($e=>({...gt,...$e})),k.current={...vt},Fe(At),l($e=>$e.map(Ne=>({...Ne,unitsPerPackage:vt[Ne.productId]??Ne.unitsPerPackage})))}},Xe=>console.error(Xe));return()=>Te()},[]);const[I,_]=v.useState({}),S=v.useRef({}),E=v.useRef(!0),k=v.useRef({}),P=v.useRef({}),T=v.useRef(!0),[O,W]=v.useState({}),[Ae,de]=v.useState({}),[fe,ge]=v.useState({}),[ee,Fe]=v.useState({}),[Pe,F]=v.useState("");v.useEffect(()=>{const ue=pt(Ge,"inventory_candies"),ce=tr(ue),Te=qd(ce,Xe=>{try{const ft={};Xe.forEach(vt=>{var xe,Qe,dt;const At=vt.data(),ye=String(At.productId||"").trim();if(!ye)return;const $e=Number(At.unitsPerPackage||At.unitsPerPack||0)||0,Ne=((Qe=(xe=At==null?void 0:At.createdAt)==null?void 0:xe.toMillis)==null?void 0:Qe.call(xe))||((dt=At==null?void 0:At.createdAt)!=null&&dt.seconds?At.createdAt.seconds*1e3:0)||0,ct=ft[ye];(!ct||Ne>=ct.ts)&&(ft[ye]={val:$e||0,ts:Ne})});const gt={};for(const vt of Object.keys(ft))gt[vt]=ft[vt].val||0;ge(gt);try{const vt=P.current||{};let At=!1;for(const ye of Object.keys(gt))if((gt[ye]||0)!==(vt[ye]||0)){At=!0;break}P.current={...gt},!T.current&&At&&(s(" Inventario: unidades por paquete actualizadas."),setTimeout(()=>s(""),3e3)),T.current=!1}catch{}l(vt=>vt.map(At=>({...At,unitsPerPackage:gt[At.productId]??Ae[At.productId]??At.unitsPerPackage})))}catch(ft){console.error("inventory_candies snapshot error:",ft)}},Xe=>console.error(Xe));return()=>Te()},[Ae]),v.useEffect(()=>{l(ue=>ue.map(ce=>({...ce,unitsPerPackage:fe[ce.productId]??Ae[ce.productId]??ce.unitsPerPackage})))},[Ae,fe]);const Q=v.useMemo(()=>{const ue=dat(c),ce=String(d||"").trim(),Te=String(Pe||"").trim().toLowerCase(),Xe=h.trim()===""?null:sz(h,NaN),ft=m.trim()===""?null:sz(m,NaN);return i.filter(gt=>{const vt=String(ee[gt.productId]||"").trim().toLowerCase();if(Te)return vt===Te;if(ue&&!`${gt.category} ${gt.productName}`.toLowerCase().includes(ue))return!1;if(ce){const Ne=String(gt.productId||""),ct=String(I[gt.productId]||"");if(!Ne.includes(ce)&&!ct.includes(ce))return!1}const At=g==="ISLA"?[gt.priceIsla]:g==="RIVAS"?[gt.priceRivas]:[gt.priceIsla,gt.priceRivas],ye=Xe==null||!Number.isFinite(Xe)?!0:At.some(Ne=>Ne>=Xe),$e=ft==null||!Number.isFinite(ft)?!0:At.some(Ne=>Ne<=ft);return ye&&$e})},[i,c,h,m,g,I,Pe,ee]),H=v.useMemo(()=>{const ue=new Map;for(const ce of Q){const Te=(ce.category||"Sin categora").trim()||"Sin categora",Xe=ue.get(Te)||[];Xe.push(ce),ue.set(Te,Xe)}return Array.from(ue.entries()).sort(([ce],[Te])=>ce.localeCompare(Te,"es"))},[Q]),R=ue=>{j(ce=>({...ce,[ue]:!ce[ue]}))},z=()=>{u(""),A(""),p(""),x("ANY"),F("")},[J,D]=v.useState(!1),[U,ne]=v.useState("search"),[ve,L]=v.useState(null),[Ye,ie]=v.useState(0),[Z,Oe]=v.useState(0),[le,se]=v.useState(null),[Be,je]=v.useState(""),[ot,mt]=v.useState(""),ut=v.useMemo(()=>c.trim()!==""||h.trim()!==""||m.trim()!==""||g!=="ANY"||Pe.trim()!=="",[c,h,m,g,Pe]),[_e,rt]=v.useState(!1);v.useEffect(()=>{var Te;const ue=window.matchMedia("(max-width: 900px)"),ce=()=>rt(ue.matches);return ce(),(Te=ue.addEventListener)==null||Te.call(ue,"change",ce),()=>{var Xe;return(Xe=ue.removeEventListener)==null?void 0:Xe.call(ue,"change",ce)}},[]);const[we,Ce]=v.useState(!1);v.useEffect(()=>{const ue=JO(Rf,async ce=>{if(!ce)return Ce(!1);try{const Te=await xi(Kt(Ge,"users",ce.uid)),Xe=Te.exists()?Te.data():null,ft=Xe?Array.isArray(Xe.roles)?Xe.roles:Xe.role?[Xe.role]:[]:[];Ce(zr(ft,"admin"))}catch(Te){console.error(Te),Ce(!1)}});return()=>ue()},[]);const Ue=async ue=>{var ce;if(U==="search"){f(ue);const Te=Object.keys(I).find(gt=>(I[gt]||"")===ue),Xe=(ce=i.find(gt=>String(gt.productId||"").includes(ue)))==null?void 0:ce.productId,ft=Te||Xe||null;ft&&(se(ft),b(!1)),D(!1);return}if(U==="edit"&&ve)try{const Te=pt(Ge,"products_candies"),Xe=Kt(Te,ve);await rn(Xe,{barcode:ue}),_(ft=>({...ft,[ve]:ue})),je(ue),D(!1),ne("search"),s(" Producto guardado.")}catch(Te){console.error(Te),s(" Error guardando el cdigo.")}},Ve=async ue=>{l(ce=>ce.map(Te=>Te.productId===ue?{...Te,priceIsla:Number(Ye||0),priceRivas:Number(Z||0)}:Te));try{const ce=String(ot||"").trim();await rn(Kt(pt(Ge,"products_candies"),ue),{packaging:ce||""}),Fe(Te=>({...Te,[ue]:ce||""}))}catch(ce){console.error("Error updating packaging:",ce),s(" Error guardando empaque.")}L(null),s(_e?" Producto guardado.":"")};return o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Precio Ventas"}),o.jsx("div",{className:"flex gap-2",children:o.jsx(Ic,{onClick:e,loading:r})})]}),o.jsxs("div",{className:"md:hidden mb-3",children:[o.jsxs("button",{type:"button",onClick:()=>b(ue=>!ue),className:`w-full px-3 py-3 rounded-xl border shadow-sm flex items-center justify-between ${ut?"bg-yellow-50 border-yellow-200":"bg-white"}`,children:[o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"font-semibold",children:"Filtros"}),o.jsxs("div",{className:"text-xs text-gray-600",children:[ut?"Activos":"Ninguno","  ","Mostrando ",o.jsx("b",{children:Q.length})]})]}),o.jsx("div",{className:"text-sm font-semibold",children:y?"Cerrar":"Abrir"})]}),y&&o.jsx("div",{className:"mt-2 bg-white border rounded-xl shadow-sm p-3 text-sm",children:o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Producto"}),o.jsx("input",{className:"w-full border rounded px-2 py-2",value:c,onChange:ue=>u(ue.target.value),placeholder:"Ej: Conitos, Gomitas"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Tipo empaque"}),o.jsxs("select",{className:"w-full border rounded px-2 py-2",value:Pe,onChange:ue=>F(ue.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Buscar por EAN"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{className:"flex-1 border rounded px-2 py-2",value:d,onChange:ue=>f(ue.target.value),placeholder:"Cdigo EAN"}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{ne("search"),D(!0)},children:"Escanear"})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{z(),f("")},children:"Limpiar filtros"}),o.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",onClick:()=>b(!1),children:"Aplicar"})]})]})})]}),o.jsxs("div",{className:"hidden md:block bg-white p-3 rounded shadow border mb-3 text-sm",children:[o.jsxs("div",{className:"grid grid-cols-6 gap-3 items-end",children:[o.jsxs("div",{className:"col-span-2",children:[o.jsx("label",{className:"block font-semibold",children:"Filtrar por producto"}),o.jsx("input",{className:"w-full border rounded px-2 py-1",value:c,onChange:ue=>u(ue.target.value),placeholder:"Ej: Conitos, Gomitas"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Tipo empaque"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:Pe,onChange:ue=>F(ue.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio mn"}),o.jsx("input",{className:"w-full border rounded px-2 py-1 text-right",inputMode:"decimal",value:h,onChange:ue=>A(ue.target.value),placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio mx"}),o.jsx("input",{className:"w-full border rounded px-2 py-1 text-right",inputMode:"decimal",value:m,onChange:ue=>p(ue.target.value),placeholder:"0"})]}),o.jsx("div",{className:"text-right",children:o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:z,children:"Limpiar"})})]}),o.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[o.jsxs("div",{className:"text-xs text-gray-600",children:["Fuente: ",o.jsx("b",{children:"candy_main_orders.items[]"}),"  Muestra el"," ",o.jsx("b",{children:"ltimo precio"})," registrado por producto."]}),o.jsxs("div",{className:"text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Mostrando:"})," ",o.jsx("b",{children:Q.length})]})]})]}),o.jsxs("div",{className:"md:hidden",children:[r?o.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Cargando"}):Q.length===0?o.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Sin resultados."}):o.jsx("div",{className:"space-y-2",children:H.map(([ue,ce])=>{const Te=!!w[ue];return o.jsxs("div",{className:"bg-white border rounded-2xl shadow-sm overflow-hidden",children:[o.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>R(ue),children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"text-[13px] font-semibold truncate",children:ue}),o.jsxs("div",{className:"text-[10px] text-gray-600 truncate",children:[ce.length," ",ce.length===1?"producto":"productos"]})]}),o.jsx("div",{className:"text-sm font-semibold",children:Te?"":"+"})]}),Te&&o.jsx("div",{className:"px-3 pb-3 border-t space-y-2",children:ce.map(Xe=>{const ft=le===Xe.productId,gt=ve===Xe.productId,vt=O[Xe.productId]||0,At=Xe.priceIsla-vt,ye=At*.25;return o.jsxs("div",{className:"bg-white border rounded-xl overflow-hidden",children:[o.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>se($e=>$e===Xe.productId?null:Xe.productId),children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"text-[13px] font-semibold truncate",children:Xe.productName}),o.jsx("div",{className:"text-[10px] text-gray-600 truncate",children:Xe.category})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"P. Paquete"}),o.jsx("div",{className:"text-sm font-semibold tabular-nums",children:Mm(Xe.priceIsla)})]})]}),ft&&o.jsx("div",{className:"px-3 pb-3 border-t",children:o.jsxs("div",{className:"pt-3 space-y-2 text-sm",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"Categora"}),o.jsx("div",{className:"text-sm",children:Xe.category}),o.jsxs("div",{className:"mt-2",children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"Unidades x paquete"}),o.jsx("div",{className:"text-sm",children:String(Xe.unitsPerPackage||1)})]}),o.jsxs("div",{className:"mt-2",children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"Precio Unidad"}),o.jsx("div",{className:"text-sm tabular-nums",children:Mm(Xe.priceIsla/(Xe.unitsPerPackage||1))})]}),o.jsxs("div",{className:"mt-2",children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"Precio Paquete"}),gt?o.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:String(Ye),onChange:$e=>ie(Number($e.target.value||0))}):o.jsx("div",{className:"text-sm font-semibold tabular-nums",children:Mm(Xe.priceIsla)})]})]}),o.jsxs("div",{children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"Utilidad Bruta"}),o.jsx("div",{className:"text-sm tabular-nums",children:Mm(At)})]}),o.jsxs("div",{className:"mt-1",children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"Comisin"}),o.jsx("div",{className:"text-sm tabular-nums",children:Mm(ye)})]}),o.jsxs("div",{className:"mt-2",children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"Cdigo EAN"}),gt?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{className:"flex-1 border rounded px-2 py-2",value:Be,readOnly:!0}),o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white",onClick:()=>{ne("edit"),D(!0)},type:"button",children:"Escanear"})]}):o.jsx("div",{children:I[Xe.productId]||""})]}),o.jsxs("div",{className:"mt-2",children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"Tipo Empaque"}),gt?o.jsxs("select",{className:"w-full border rounded px-2 py-2",value:ot,onChange:$e=>mt($e.target.value),children:[o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]}):o.jsx("div",{className:"text-sm",children:ee[Xe.productId]||""})]})]})]}),o.jsx("div",{className:"flex gap-2",children:gt?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white",onClick:()=>{Ve(Xe.productId),se(null)},type:"button",children:"Guardar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{ne("edit"),D(!0)},type:"button",children:"Escanear"}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200",onClick:()=>L(null),type:"button",children:"Cancelar"})]}):we&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-3 py-2 rounded bg-yellow-400",onClick:()=>{L(Xe.productId),ie(Xe.priceIsla||0),Oe(Xe.priceRivas||0),je(I[Xe.productId]||""),mt(ee[Xe.productId]||"")},type:"button",children:"Editar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white",onClick:()=>l($e=>$e.filter(Ne=>Ne.productId!==Xe.productId)),type:"button",children:"Borrar"})]})})]})})]},Xe.productId)})})]},ue)})}),a&&o.jsx("p",{className:"mt-2 text-sm",children:a})]}),o.jsx(Aat,{open:J,onClose:()=>D(!1),onDetected:Ue}),o.jsx("div",{className:"hidden md:block bg-white rounded shadow border w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-[900px] w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border text-left",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border text-left",children:"Empaque"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio Isla"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio Rivas"}),o.jsx("th",{className:"p-2 border text-right",children:"Acciones"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Cargando"})}):Q.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Sin resultados."})}):Q.map(ue=>o.jsxs("tr",{children:[o.jsx("td",{className:"p-2 border",children:ue.category}),o.jsx("td",{className:"p-2 border",children:ue.productName}),o.jsx("td",{className:"p-2 border",children:ve===ue.productId?o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:ot,onChange:ce=>mt(ce.target.value),children:[o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]}):ee[ue.productId]||""}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:ve===ue.productId?o.jsx("input",{className:"w-24 border rounded px-2 py-1 text-right",inputMode:"decimal",value:String(Ye),onChange:ce=>ie(Number(ce.target.value||0))}):Mm(ue.priceIsla)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:ve===ue.productId?o.jsx("input",{className:"w-24 border rounded px-2 py-1 text-right",inputMode:"decimal",value:String(Z),onChange:ce=>Oe(Number(ce.target.value||0))}):Mm(ue.priceRivas)}),o.jsx("td",{className:"p-2 border text-right",children:ve===ue.productId?o.jsxs("div",{className:"flex items-center justify-end gap-2",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white text-sm",onClick:()=>Ve(ue.productId),type:"button",children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 text-sm",onClick:()=>L(null),type:"button",children:"Cancelar"})]}):we&&o.jsxs("div",{className:"flex items-center justify-end gap-2",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 text-sm",onClick:()=>{L(ue.productId),ie(ue.priceIsla||0),Oe(ue.priceRivas||0),je(I[ue.productId]||"")},type:"button",children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white text-sm",onClick:()=>{L(ue.productId),ne("edit"),D(!0)},type:"button",children:"Escanear"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white text-sm",onClick:()=>l(ce=>ce.filter(Te=>Te.productId!==ue.productId)),type:"button",children:"Borrar"})]})})]},ue.productId))})]})}),a&&o.jsx("p",{className:"hidden md:block mt-2 text-sm",children:a})]})}const y_=["Cuaderno","Block","Lapicero","Lpiz","Tajador","Borrador","Corrector","Cartucheras"],iz=["Lider","Scribe","Smarty","Pointer","Paper Mate","Otro"],rB=["Hombre","Mujer","Variado","NA"],mat=["Universitario Cocido","5 Materia","2 Materia","Doble Raya","Rayado","Cuadriculado","Subrayado","Sublineado","Liso"],vl=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function $i(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function Kl(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function uE(t,e=1){const r=Math.floor(Kl(t,e));return r>0?r:e}function qce(t){return!Number.isFinite(t)||t<=0?0:t}function nB(t){const e=String(t??"").trim();return e||""}function Ed(t,e){const r=Object.keys(t||{}),n=new Map;r.forEach(a=>n.set($i(a),a));for(const a of e){const s=n.get($i(a));if(s!=null)return t[s]}}function pat(t){return Object.values(t||{}).every(r=>$i(r)==="")}function ux(t){const e=Math.max(0,Kl(t.providerPrice,0)),r=Math.max(1,uE(t.quantity,1)),n=qce(Kl(t.margin,0)),a=Math.max(0,Kl(t.salePrice,0)),s=n>0?e/n:e,i=a>0?a:s,l=i>0?e/i:n,c=e*r,u=(i-e)*r,d=i*r;return{providerPrice:e,quantity:r,margin:l,salePrice:i,facturado:c,gain:u,totalEsperado:d}}function gat(){const{refreshKey:t,refresh:e}=jc(),[r,n]=v.useState(!0),[a,s]=v.useState(""),[i,l]=v.useState([]),[c,u]=v.useState(!1),[d,f]=v.useState(""),[h,A]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(""),[y,b]=v.useState(!1),[w,j]=v.useState(null),[I,_]=v.useState(!1),[S,E]=v.useState(null),[k,P]=v.useState(y_[0]),[T,O]=v.useState(iz[0]),[W,Ae]=v.useState(""),[de,fe]=v.useState(0),[ge,ee]=v.useState(1),[Fe,Pe]=v.useState(.7),[F,Q]=v.useState(0),[H,R]=v.useState("NA"),[z,J]=v.useState(""),[D,U]=v.useState(""),[ne,ve]=v.useState(!1),[L,Ye]=v.useState(""),[ie,Z]=v.useState([]),[Oe,le]=v.useState([]),[se,Be]=v.useState(!1);v.useEffect(()=>{(async()=>{n(!0),s("");try{const ye=await Lt(tr(pt(Ge,"products_stationery"))),$e=[];ye.forEach(Ne=>{const ct=Ne.data();$e.push({id:Ne.id,category:ct.category||"",brand:ct.brand||"",name:ct.name||"",providerPrice:Number(ct.providerPrice||0),quantity:Number(ct.quantity||1),facturado:Number(ct.facturado||0),margin:Number(ct.margin||0),salePrice:Number(ct.salePrice||0),gain:Number(ct.gain||0),gender:ct.gender||"NA",typeProduct:ct.typeProduct||"",code:ct.code??"",createdAt:ct.createdAt,updatedAt:ct.updatedAt,totalEsperado:Number(ct.totalEsperado||Number(ct.salePrice||0)*Number(ct.quantity||1))})}),l($e)}catch(ye){console.error(ye),s(" Error cargando productos (papelera).")}finally{n(!1)}})()},[t]);const je=v.useMemo(()=>{const ye=$i(d),$e=$i(h),Ne=m.trim()===""?null:Kl(m,NaN),ct=g.trim()===""?null:Kl(g,NaN);return i.filter(xe=>!(ye&&!`${xe.category} ${xe.name}`.toLowerCase().includes(ye)||$e&&!String(xe.code||"").toLowerCase().includes($e)||Ne!=null&&Number.isFinite(Ne)&&xe.salePrice<Ne||ct!=null&&Number.isFinite(ct)&&xe.salePrice>ct))},[i,d,h,m,g]),ot=v.useMemo(()=>d.trim()!==""||h.trim()!==""||m.trim()!==""||g.trim()!=="",[d,h,m,g]),mt=v.useMemo(()=>{const ye=i.length,$e=i.reduce((xe,Qe)=>xe+(Qe.facturado||0),0),Ne=i.reduce((xe,Qe)=>xe+Number(Qe.totalEsperado||Number(Qe.salePrice||0)*Number(Qe.quantity||1)),0),ct=i.reduce((xe,Qe)=>xe+(Qe.gain||0),0);return{count:ye,sumFact:$e,sumEsperado:Ne,sumGain:ct}},[i]),ut=()=>{P(y_[0]),Ae(""),fe(0),ee(1),Pe(.7),Q(0),R("NA"),J(""),U(""),j(null)},_e=()=>{ut(),b(!0)},rt=ye=>{j(ye),P(ye.category||y_[0]),O(ye.brand||iz[0]),Ae(ye.name||""),fe(Number(ye.providerPrice||0)),ee(Number(ye.quantity||1)),Pe(Number(ye.margin||.7)),Q(Number(ye.salePrice||0)),R(ye.gender||"NA"),J(ye.typeProduct||""),U(String(ye.code||"")),b(!0)},we=async()=>{s("");const ye=String(k||"").trim(),$e=String(T||"").trim(),Ne=String(W||"").trim(),{providerPrice:ct,quantity:xe,margin:Qe,salePrice:dt,facturado:Bt,totalEsperado:qe,gain:bt}=ux({providerPrice:de,quantity:ge,margin:Fe,salePrice:F});if(!ye)return s(" Categora requerida.");if(!Ne)return s(" Producto requerido.");if(ct<=0)return s(" Precio proveedor debe ser > 0.");if(xe<=0)return s(" Cantidad debe ser > 0.");if(dt<=0)return s(" Precio venta invlido.");if(Qe<=0)return s(" Margen invlido.");const G={category:ye,brand:$e,name:Ne,providerPrice:ct,quantity:xe,facturado:Bt,margin:Qe,salePrice:dt,gain:bt,gender:H||"NA",typeProduct:String(z||"").trim(),code:nB(D)||null,updatedAt:or.now(),totalEsperado:qe};try{n(!0),w?(await rn(Kt(Ge,"products_stationery",w.id),G),s(" Producto actualizado.")):(await wn(pt(Ge,"products_stationery"),{...G,createdAt:or.now()}),s(" Producto creado.")),b(!1),j(null),ut(),e()}catch(te){console.error(te),s(" Error guardando producto.")}finally{n(!1)}},Ce=async()=>{var ye;try{const $e=new g2,Ne=await g2.listVideoInputDevices(),ct=(ye=Ne[Ne.length-1])==null?void 0:ye.deviceId;if(!ct)return null;const xe=document.createElement("div");xe.className="fixed inset-0 z-[9999] bg-black/70 flex items-center justify-center p-3";const Qe=document.createElement("div");Qe.className="bg-white w-full max-w-md rounded-xl overflow-hidden shadow-xl";const dt=document.createElement("div");dt.className="p-3 flex items-center justify-between border-b",dt.innerHTML="<div style='font-weight:700'>Escanear cdigo</div>";const Bt=document.createElement("button");Bt.textContent="Cerrar",Bt.className="px-3 py-1 rounded bg-gray-200";const qe=document.createElement("div");qe.className="p-3";const bt=document.createElement("video");return bt.style.width="100%",bt.style.borderRadius="12px",qe.appendChild(bt),dt.appendChild(Bt),Qe.appendChild(dt),Qe.appendChild(qe),xe.appendChild(Qe),document.body.appendChild(xe),await new Promise(async G=>{const te=()=>{xe.remove(),G(null)};Bt.onclick=te;const He=await $e.decodeFromVideoDevice(ct,bt,re=>{if(re){const be=re.getText();try{He.stop()}catch{}xe.remove(),G(be)}})})}catch($e){return console.error($e),null}},Ue=async()=>{const ye=await Ce();ye&&U(ye)},Ve=async()=>{const ye=await Ce();if(!ye)return;const $e=i.find(Ne=>String(Ne.code||"")===String(ye));$e?(E($e),_(!0),s("")):(E(null),_(!0),s(""))},ue=(ye,$e)=>{const Ne=ye.map(Qe=>({Id:Qe.id,Categoria:Qe.category,brand:Qe.brand,Producto:Qe.name,PrecioProveedor:Qe.providerPrice,Cantidad:Qe.quantity,Facturado:Qe.facturado,TotalEsperado:Qe.totalEsperado||Qe.salePrice*Qe.quantity,Margen:Qe.margin,PrecioVenta:Qe.salePrice,Ganancia:Qe.gain,Genero:Qe.gender,TipoProducto:Qe.typeProduct,Codigo:Qe.code||""})),ct=js.json_to_sheet(Ne),xe=js.book_new();js.book_append_sheet(xe,ct,"Productos"),Ok(xe,$e)},ce=()=>{const ye=[{Id:"",Categoria:"Cuaderno",brand:"Lider",Producto:"Cuaderno Norma 100 hojas",PrecioProveedor:120,Cantidad:12,Margen:.7,PrecioVenta:"",Genero:"NA",TipoProducto:"Universitario Cocido",Codigo:"1234567890123"}],$e=js.json_to_sheet(ye),Ne=js.book_new();js.book_append_sheet(Ne,$e,"Productos");const ct=W4(Ne,{type:"array",bookType:"xlsx"}),xe=new Blob([ct],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),Qe=URL.createObjectURL(xe),dt=document.createElement("a");dt.href=Qe,dt.download="template_products_stationery.xlsx",document.body.appendChild(dt),dt.click(),dt.remove(),URL.revokeObjectURL(Qe)},Te=ye=>{const $e=[],Ne=[];ye.forEach((xe,Qe)=>{if(!xe||typeof xe!="object"||pat(xe))return;const dt=Qe+2,Bt=String(Ed(xe,["Id","ID","docId","DocId"])??"").trim(),qe=String(Ed(xe,["Categoria","Categora","Category","category"])??"").trim(),bt=String(Ed(xe,["Brand","Marca","brand","marca"])??"").trim(),G=String(Ed(xe,["Producto","Product","Nombre","Name","name"])??"").trim(),te=Ed(xe,["PrecioProveedor","Precio Prov","Precio Prov.","ProviderPrice","Costo","providerPrice"]),He=Ed(xe,["Cantidad","Qty","quantity","cantidad"]),re=Ed(xe,["Margen","Margin","margen","margin"]),be=Ed(xe,["PrecioVenta","Precio Venta","SalePrice","salePrice"]),Me=String(Ed(xe,["Genero","Gnero","Gender","gender"])??"NA").trim(),tt=String(Ed(xe,["TipoProducto","Tipo","TypeProduct","typeProduct","Tipo producto"])??"").trim(),lt=Ed(xe,["Codigo","Cdigo","Code","Barcode","code"]),ae=nB(lt),V=Math.max(0,Kl(te,0)),X=Math.max(1,uE(He,1)),me=qce(Kl(re,0)),Ie=Math.max(0,Kl(be,0));qe||Ne.push(`Fila ${dt}: falta Categoria.`),G||Ne.push(`Fila ${dt}: falta Producto.`),V<=0&&Ne.push(`Fila ${dt}: PrecioProveedor debe ser > 0.`),X<=0&&Ne.push(`Fila ${dt}: Cantidad debe ser > 0.`),me<=0&&Ie<=0&&Ne.push(`Fila ${dt}: Margen debe ser > 0 (o enviar PrecioVenta).`);const pe=rB.includes(Me||"NA")?Me:"NA";qe&&G&&V>0&&X>0&&(me>0||Ie>0)&&$e.push({id:Bt||void 0,category:qe,brand:bt,name:G,providerPrice:V,quantity:X,margin:me>0?me:.7,salePrice:Ie>0?Ie:void 0,gender:pe,typeProduct:tt,code:ae||"",_raw:xe})});const ct=new Map;for(const xe of $e){const Qe=xe.id?`id::${xe.id}`:`${$i(xe.category)}::${$i(xe.name)}`;ct.set(Qe,xe)}return{rows:Array.from(ct.values()),errors:Ne}},Xe=async ye=>{if(s(""),le([]),Z([]),Ye((ye==null?void 0:ye.name)||""),!ye)return;const $e=ye.name.toLowerCase(),Ne=$e.endsWith(".xlsx")||$e.endsWith(".xls"),ct=$e.endsWith(".csv");if(!Ne&&!ct){le(["Solo se permiten archivos .xlsx, .xls o .csv"]);return}try{Be(!0);const xe=new FileReader,Qe=await new Promise((He,re)=>{xe.onerror=()=>re(new Error("No se pudo leer el archivo.")),xe.onload=()=>He(xe.result),xe.readAsArrayBuffer(ye)}),dt=B2(new Uint8Array(Qe),{type:"array"}),Bt=dt.SheetNames[0],qe=dt.Sheets[Bt],bt=js.sheet_to_json(qe,{defval:""}),{rows:G,errors:te}=Te(bt);Z(G),le(te),G.length===0&&te.length===0&&le(["No se encontraron filas vlidas para importar."])}catch(xe){console.error(xe),le(["Error leyendo el archivo. Revis que no est corrupto."])}finally{Be(!1)}},ft=(ye,$e)=>{Z(Ne=>{const ct=[...Ne],xe=ct[ye];return xe?(ct[ye]={...xe,...$e},ct):Ne})},gt=v.useMemo(()=>{const ye=new Set(i.map(xe=>xe.id)),$e=new Set(i.map(xe=>`${$i(xe.category)}::${$i(xe.name)}`));let Ne=0,ct=0;for(const xe of ie){if(xe.id&&ye.has(xe.id)){Ne+=1;continue}const Qe=`${$i(xe.category)}::${$i(xe.name)}`;$e.has(Qe)?Ne+=1:ct+=1}return{total:ie.length,willCreate:ct,willUpdate:Ne}},[ie,i]),vt=async()=>{if(s(""),Oe.length>0){s(" Correg los errores antes de importar.");return}if(ie.length===0){s(" No hay filas para importar.");return}try{Be(!0);const ye={},$e={};i.forEach(Qe=>{ye[Qe.id]=Qe,$e[`${$i(Qe.category)}::${$i(Qe.name)}`]=Qe});const Ne=pg(Ge);let ct=0,xe=0;for(const Qe of ie){const dt=String(Qe.category||"").trim(),Bt=String(Qe.name||"").trim(),{providerPrice:qe,quantity:bt,margin:G,salePrice:te,facturado:He,totalEsperado:re,gain:be}=ux({providerPrice:Qe.providerPrice,quantity:Qe.quantity,margin:Qe.margin,salePrice:Qe.salePrice});if(!dt||!Bt||qe<=0||bt<=0||te<=0||G<=0)continue;const Me={category:dt,name:Bt,providerPrice:qe,quantity:bt,facturado:He,totalEsperado:re,margin:G,salePrice:te,gain:be,gender:Qe.gender||"NA",typeProduct:String(Qe.typeProduct||"").trim(),code:nB(Qe.code)||null,updatedAt:or.now()};let tt;if(Qe.id&&ye[Qe.id])tt=ye[Qe.id];else{const lt=`${$i(dt)}::${$i(Bt)}`;tt=$e[lt]}if(tt)Ne.update(Kt(Ge,"products_stationery",tt.id),Me),xe+=1;else{const lt=Kt(pt(Ge,"products_stationery"));Ne.set(lt,{...Me,createdAt:or.now()}),ct+=1}}await Ne.commit(),s(` Importacin lista. Creados: ${ct}, Actualizados: ${xe}`),ve(!1),Z([]),le([]),Ye(""),e()}catch(ye){console.error(ye),s(" Error importando productos a Firestore.")}finally{Be(!1)}},At=()=>{f(""),A(""),p(""),x("")};return o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Papelera"}),o.jsxs("div",{className:"flex gap-2 flex-wrap justify-end",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-900 text-white hover:bg-black",onClick:Ve,type:"button",children:"Escanear"}),o.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:_e,type:"button",children:"+ Nuevo"}),o.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",onClick:()=>{ve(!0),Z([]),le([]),Ye("")},type:"button",children:"Importar (.xlsx)"}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ue(i,"products_stationery_todo.xlsx"),type:"button",children:"Exportar (todo)"}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ue(je,"products_stationery_filtrado.xlsx"),type:"button",children:"Exportar (filtrado)"}),o.jsx(Ic,{onClick:e,loading:r||se})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[o.jsx(b_,{label:"Productos",value:mt.count}),o.jsx(b_,{label:"Facturado",value:vl(mt.sumFact)}),o.jsx(b_,{label:"Esperado",value:vl(mt.sumEsperado)}),o.jsx(b_,{label:"Ganancia",value:vl(mt.sumGain)})]}),o.jsxs("div",{className:"mb-3",children:[o.jsxs("button",{className:`w-full md:w-auto px-3 py-2 rounded border bg-white hover:bg-gray-50 ${ot?"border-yellow-300 bg-yellow-50":""}`,type:"button",onClick:()=>u(ye=>!ye),children:[c?"Cerrar filtros":"Abrir filtros"," ",ot?"(activos)":""]}),c&&o.jsxs("div",{className:"mt-2 bg-white border rounded-xl shadow-sm p-3 text-sm",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 items-end",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Producto"}),o.jsx("input",{className:"w-full border rounded px-2 py-2",value:d,onChange:ye=>f(ye.target.value),placeholder:"Ej: Cuaderno Norma"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Cdigo"}),o.jsx("input",{className:"w-full border rounded px-2 py-2",value:h,onChange:ye=>A(ye.target.value),placeholder:"Barcode"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio venta mn"}),o.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:m,onChange:ye=>p(ye.target.value),placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio venta mx"}),o.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:g,onChange:ye=>x(ye.target.value),placeholder:"0"})]}),o.jsxs("div",{className:"md:col-span-4 flex gap-2 justify-end",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:At,children:"Limpiar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:()=>u(!1),children:"Aplicar"})]})]}),o.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs text-gray-600",children:[o.jsxs("div",{children:["Mostrando: ",o.jsx("b",{children:je.length})]}),o.jsxs("div",{children:["Coleccin: ",o.jsx("b",{children:"products_stationery"})]})]})]})]}),o.jsx("div",{className:"md:hidden space-y-2",children:r?o.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Cargando"}):je.length===0?o.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Sin resultados."}):je.map(ye=>o.jsxs("div",{className:"bg-white border rounded-xl p-3 shadow-sm",children:[o.jsx("div",{className:"text-xs text-gray-600",children:ye.category}),o.jsx("div",{className:"text-base font-bold leading-tight",children:ye.name}),o.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Venta"}),o.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:vl(ye.salePrice)})]}),o.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Ganancia"}),o.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Esperado:"," ",o.jsx("b",{children:vl(ye.totalEsperado||ye.salePrice*ye.quantity)})]}),o.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:vl(ye.gain)})]})]}),o.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Cdigo: ",o.jsx("b",{children:ye.code||""})]}),o.jsx("div",{className:"mt-2 flex gap-2",children:o.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>rt(ye),children:"Editar"})})]},ye.id))}),o.jsx("div",{className:"hidden md:block bg-white border rounded overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1200px] w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border text-left",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Proveedor"}),o.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),o.jsx("th",{className:"p-2 border text-right",children:"Facturado"}),o.jsx("th",{className:"p-2 border text-right",children:"Esperado"}),o.jsx("th",{className:"p-2 border text-right",children:"Margen"}),o.jsx("th",{className:"p-2 border text-right",children:"Venta"}),o.jsx("th",{className:"p-2 border text-right",children:"Ganancia"}),o.jsx("th",{className:"p-2 border text-left",children:"Gnero"}),o.jsx("th",{className:"p-2 border text-left",children:"Tipo"}),o.jsx("th",{className:"p-2 border text-left",children:"Cdigo"}),o.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:12,children:"Cargando"})}):je.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:12,children:"Sin resultados."})}):je.map(ye=>o.jsxs("tr",{className:"align-top",children:[o.jsx("td",{className:"p-2 border",children:ye.category}),o.jsx("td",{className:"p-2 border",children:ye.name}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:vl(ye.providerPrice)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:ye.quantity}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:vl(ye.facturado)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:vl(ye.totalEsperado||ye.salePrice*ye.quantity)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Number(ye.margin||0).toFixed(2)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:vl(ye.salePrice)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:vl(ye.gain)}),o.jsx("td",{className:"p-2 border",children:ye.gender}),o.jsx("td",{className:"p-2 border",children:ye.typeProduct}),o.jsx("td",{className:"p-2 border",children:ye.code||""}),o.jsx("td",{className:"p-2 border text-center",children:o.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>rt(ye),children:"Editar"})})]},ye.id))})]})}),a&&o.jsx("p",{className:"mt-2 text-sm",children:a}),y&&o.jsxs(oz,{onClose:()=>b(!1),title:w?"Editar producto":"Nuevo producto",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Categora"}),o.jsx("select",{className:"w-full border rounded px-2 py-2",value:k,onChange:ye=>P(ye.target.value),children:y_.map(ye=>o.jsx("option",{value:ye,children:ye},ye))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Producto"}),o.jsx("input",{className:"w-full border rounded px-2 py-2",value:W,onChange:ye=>Ae(ye.target.value),placeholder:"Ej: Cuaderno Norma..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio proveedor"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(de)?"":de,onChange:ye=>fe(Math.max(0,Kl(ye.target.value,0)))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Cantidad"}),o.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-2 text-right",value:ge,onChange:ye=>ee(uE(ye.target.value,1))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Facturado (auto)"}),o.jsx("div",{className:"w-full border rounded px-2 py-2 text-right bg-gray-50 tabular-nums",children:vl(ux({providerPrice:de,quantity:ge,margin:Fe,salePrice:F}).facturado)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Margen"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(Fe)?"":Fe,onChange:ye=>Pe(Math.max(0,Kl(ye.target.value,0)))}),o.jsx("div",{className:"text-[11px] text-gray-600 mt-1",children:"Ej: 0.70 / 0.80"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio venta (editable)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(ux({providerPrice:de,quantity:ge,margin:Fe,salePrice:F}).salePrice)?"":ux({providerPrice:de,quantity:ge,margin:Fe,salePrice:F}).salePrice,onChange:ye=>{Q(Math.max(0,Kl(ye.target.value,0)))}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Ganancia (auto)"}),o.jsx("div",{className:"w-full border rounded px-2 py-2 text-right bg-gray-50 tabular-nums",children:vl(ux({providerPrice:de,quantity:ge,margin:Fe,salePrice:F}).gain)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Gnero"}),o.jsx("select",{className:"w-full border rounded px-2 py-2",value:H,onChange:ye=>R(ye.target.value),children:rB.map(ye=>o.jsx("option",{value:ye,children:ye},ye))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Tipo producto"}),o.jsxs("select",{className:"w-full border rounded px-2 py-2",value:z,onChange:ye=>J(ye.target.value),children:[o.jsx("option",{value:"",children:""}),mat.map(ye=>o.jsx("option",{value:ye,children:ye},ye))]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block font-semibold",children:"Cdigo"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{className:"flex-1 border rounded px-2 py-2",value:D,onChange:ye=>U(ye.target.value),placeholder:"Escane o peg el cdigo"}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:Ue,children:"Escanear"})]})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:()=>{b(!1),j(null)},children:"Cancelar"}),o.jsx("button",{className:"px-4 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:we,disabled:r,children:"Guardar"})]})]}),I&&o.jsx(oz,{onClose:()=>_(!1),title:"Resultado de escaneo",children:S?o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"text-xs text-gray-600",children:S.category}),o.jsx("div",{className:"text-lg font-bold",children:S.name}),o.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Precio venta"}),o.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:vl(S.salePrice)})]}),o.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Ganancia"}),o.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:vl(S.gain)})]})]}),o.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"rounded-lg border p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Proveedor"}),o.jsx("div",{className:"font-semibold tabular-nums",children:vl(S.providerPrice)})]}),o.jsxs("div",{className:"rounded-lg border p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Cantidad"}),o.jsx("div",{className:"font-semibold tabular-nums",children:S.quantity})]}),o.jsxs("div",{className:"rounded-lg border p-2 col-span-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Cdigo"}),o.jsx("div",{className:"font-semibold tabular-nums",children:S.code||""})]})]}),o.jsx("div",{className:"mt-4 flex justify-end",children:o.jsx("button",{className:"px-4 py-2 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>{_(!1),rt(S)},children:"Editar"})})]}):o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"font-semibold",children:"No encontrado"}),o.jsxs("div",{className:"text-gray-600 mt-1",children:["Ese cdigo no existe en ",o.jsx("b",{children:"products_stationery"}),"."]})]})}),ne&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-3",children:o.jsxs("div",{className:"bg-white w-full max-w-6xl max-h-[90vh] overflow-y-auto rounded shadow-lg p-5 text-sm",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-xl font-bold",children:"Importar papelera (.xlsx / .csv)"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ve(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:[o.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-end md:justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"1) Sub tu archivo"}),o.jsx("div",{className:"text-xs text-gray-600",children:"Columnas esperadas: Id (opcional), Categoria, Producto, PrecioProveedor, Cantidad, Margen (o PrecioVenta), Genero, TipoProducto, Codigo."})]}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:ce,type:"button",children:"Descargar template .xlsx"})]}),o.jsxs("div",{className:"mt-3 flex flex-col md:flex-row gap-3 md:items-center",children:[o.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:ye=>{var $e;return Xe((($e=ye.target.files)==null?void 0:$e[0])||null)}}),L&&o.jsxs("span",{className:"text-xs text-gray-600",children:["Archivo: ",o.jsx("b",{children:L})]}),se&&o.jsx("span",{className:"text-xs",children:"Procesando"})]})]}),Oe.length>0&&o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-3 mb-3",children:[o.jsx("div",{className:"font-semibold text-red-700 mb-2",children:"Errores encontrados"}),o.jsx("ul",{className:"list-disc pl-5 text-red-700 text-xs space-y-1",children:Oe.slice(0,60).map((ye,$e)=>o.jsx("li",{children:ye},$e))})]}),o.jsxs("div",{className:"bg-white border rounded p-3",children:[o.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between mb-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"2) Previsualizacin (editable)"}),o.jsxs("div",{className:"text-xs text-gray-600",children:["Se importarn ",gt.total," filas (Crear:"," ",gt.willCreate," / Actualizar:"," ",gt.willUpdate,")"]})]}),o.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50",onClick:vt,disabled:se||ie.length===0||Oe.length>0,type:"button",children:"Importar a Firestore"})]}),o.jsxs("div",{className:"overflow-x-auto border rounded",children:[o.jsxs("table",{className:"min-w-[1500px] w-full text-xs",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border text-left",children:"Id (opcional)"}),o.jsx("th",{className:"p-2 border text-left",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Proveedor"}),o.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),o.jsx("th",{className:"p-2 border text-right",children:"Margen"}),o.jsx("th",{className:"p-2 border text-right",children:"PrecioVenta"}),o.jsx("th",{className:"p-2 border text-left",children:"Gnero"}),o.jsx("th",{className:"p-2 border text-left",children:"Tipo"}),o.jsx("th",{className:"p-2 border text-left",children:"Cdigo"}),o.jsx("th",{className:"p-2 border text-center",children:"Accin"})]})}),o.jsx("tbody",{children:ie.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:11,className:"p-4 text-center text-gray-500",children:"Sub un archivo para ver la previsualizacin."})}):ie.slice(0,300).map((ye,$e)=>{const Ne=ye.id?i.some(Qe=>Qe.id===ye.id):!1,ct=i.some(Qe=>`${$i(Qe.category)}::${$i(Qe.name)}`==`${$i(ye.category)}::${$i(ye.name)}`),xe=Ne||ct;return o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:ye.id||"",onChange:Qe=>ft($e,{id:Qe.target.value.trim()||void 0}),placeholder:"docId (update exacto)"})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-44 border rounded px-2 py-1",value:ye.category,onChange:Qe=>ft($e,{category:Qe.target.value})})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-72 border rounded px-2 py-1",value:ye.name,onChange:Qe=>ft($e,{name:Qe.target.value})})}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:o.jsx("input",{type:"number",step:"0.01",className:"w-28 border rounded px-2 py-1 text-right",value:ye.providerPrice,onChange:Qe=>ft($e,{providerPrice:Math.max(0,Kl(Qe.target.value,0))})})}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:o.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:ye.quantity,onChange:Qe=>ft($e,{quantity:uE(Qe.target.value,1)})})}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:o.jsx("input",{type:"number",step:"0.01",className:"w-24 border rounded px-2 py-1 text-right",value:ye.margin,onChange:Qe=>ft($e,{margin:Math.max(0,Kl(Qe.target.value,0))})})}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:o.jsx("input",{type:"number",step:"0.01",className:"w-28 border rounded px-2 py-1 text-right",value:ye.salePrice??"",onChange:Qe=>ft($e,{salePrice:Math.max(0,Kl(Qe.target.value,0))||void 0}),placeholder:"Opcional"})}),o.jsx("td",{className:"p-2 border",children:o.jsx("select",{className:"w-28 border rounded px-2 py-1",value:ye.gender,onChange:Qe=>ft($e,{gender:Qe.target.value}),children:rB.map(Qe=>o.jsx("option",{value:Qe,children:Qe},Qe))})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:ye.typeProduct,onChange:Qe=>ft($e,{typeProduct:Qe.target.value})})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:ye.code||"",onChange:Qe=>ft($e,{code:Qe.target.value})})}),o.jsx("td",{className:"p-2 border text-center",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] ${xe?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:xe?"ACTUALIZA":"CREA"})})]},`${ye.id||""}-${$e}`)})})]}),ie.length>300&&o.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:["Mostrando 300 de ",ie.length," filas (importa todas)."]})]})]})]})})]})}function b_({label:t,value:e}){return o.jsxs("div",{className:"bg-white border rounded p-3 shadow-sm",children:[o.jsx("div",{className:"text-xs text-gray-500",children:t}),o.jsx("div",{className:"text-lg font-extrabold",children:e})]})}function oz({title:t,children:e,onClose:r}){return o.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-3",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-3xl p-4 relative",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-xl font-bold",children:t}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:r,type:"button",children:"Cerrar"})]}),e]})})}const Tu=t=>`C$ ${(Number(t)||0).toFixed(2)}`,aB=(t,e)=>{var r;return((r=t._raw)==null?void 0:r.clientName)||t.customerName||(t.customerId?e[t.customerId]:"")||"Nombre cliente"},lz=t=>{const e=fp(t.date);if(isFinite(e))return e;const r=t._raw||{},n=[r.date,r.closureDate,r.processedDate,r.createdAt,r.timestamp];for(const a of n){const s=fp(a);if(isFinite(s))return s}return NaN};function Nx(t){if(!t)return"";if(t!=null&&t.toDate)return br(t.toDate(),"yyyy-MM-dd");const e=String(t).trim();if(!e)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const r=["dd/MM/yyyy","d/M/yyyy","MM/dd/yyyy","M/d/yyyy","yyyy/MM/dd","yyyy-M-d","yyyy/M/d","yyyy-MM-dd'T'HH:mm:ss","yyyy-MM-dd'T'HH:mm:ss.SSSX"];for(const a of r){const s=KZ(e,a,new Date);if(q6(s))return br(s,"yyyy-MM-dd")}const n=new Date(e);return isNaN(n.getTime())?"":br(n,"yyyy-MM-dd")}function fp(t){const e=Nx(t);if(!e)return NaN;const r=KZ(e,"yyyy-MM-dd",new Date);return q6(r)?r.getTime():NaN}function xat(t){var i,l;if(String((t==null?void 0:t.status)||"").toUpperCase()==="PROCESADA"){const c=Nx(t==null?void 0:t.closureDate);if(c)return c;const u=Nx(t==null?void 0:t.processedDate);if(u)return u}const r=Nx(t==null?void 0:t.date),n=(i=t==null?void 0:t.createdAt)!=null&&i.toDate?t.createdAt.toDate():null;if(r&&n){const c=fp(r),u=n.getTime();if(Math.abs(u-c)/(1e3*60*60*24)>30)return br(n,"yyyy-MM-dd")}if(r)return r;if((l=t==null?void 0:t.timestamp)!=null&&l.toDate)return br(t.timestamp.toDate(),"yyyy-MM-dd");if(n)return br(n,"yyyy-MM-dd");const a=Nx(t==null?void 0:t.closureDate);if(a)return a;const s=Nx(t==null?void 0:t.processedDate);return s||""}function vat(t,e){const r=xat(t);if(!r)return null;let n=0,a=0;return Array.isArray(t.items)&&t.items.length>0?(n=t.items.reduce((s,i)=>s+(Number(i.qty??i.quantity??i.lbs??0)||0),0),a=Number(t.amount??t.total??0)||0):(n=Number(t.quantity??t.lbs??t.weight??0)||0,a=Number(t.amount??t.total??0)||0),{id:e,date:r,type:t.type||"CONTADO",total:a,quantity:n,customerId:t.customerId||void 0,customerName:t.customerName||void 0,_raw:t}}async function yat(t){const e=tr(pt(Ge,"ar_movements"),sr("ref.saleId","==",t)),r=await Lt(e);await Promise.all(r.docs.map(n=>yn(Kt(Ge,"ar_movements",n.id))))}function bat({role:t="",sellerCandyId:e="",roles:r}){const n=r&&r.length?r:t,a=zr(n,"vendedor_pollo"),s=zr(n,"admin");if(!(zr(n,"admin")||zr(n,"vendedor_pollo")||zr(n,"supervisor_pollo")||zr(n,"contador")))return o.jsx("div",{className:"p-6 max-w-4xl mx-auto text-center text-red-600",children:"Acceso restringido  Solo administradores, vendedores y supervisores de pollo."});const i=s?7:6,[l,c]=v.useState(!1),[u,d]=v.useState(!1),[f,h]=v.useState(null),[A,m]=v.useState([]),p=async se=>{c(!0),d(!0),h(se),m([]);try{const Be=await xi(Kt(Ge,"salesV2",se)),je=Be.exists()?Be.data():null;if(!je){m([]);return}let ot=[];if(Array.isArray(je.items)&&je.items.length>0)ot=je.items;else if(je.items&&typeof je.items=="object")try{ot=Object.values(je.items)}catch{ot=[]}else je.item?ot=[je.item]:Array.isArray(je.products)&&je.products.length>0?ot=je.products:Array.isArray(je.lines)&&je.lines.length>0?ot=je.lines:Array.isArray(je.detalles)&&je.detalles.length>0?ot=je.detalles:(je.productName||je.product)&&(ot=[{productName:je.productName||je.product||"",qty:je.qty??je.quantity??je.lbs??0,unitPrice:je.unitPrice??je.price??0,discount:je.discount??0,total:je.total??je.amount??0}]);const mt=Ue=>{if(Ue==null)return NaN;if(typeof Ue=="number")return Ue;let Ve=String(Ue).trim();if(!Ve)return NaN;if(Ve=Ve.replace(/[^0-9.,-]/g,""),!Ve)return NaN;Ve.indexOf(".")>-1&&Ve.indexOf(",")>-1?Ve=Ve.replace(/,/g,""):Ve.indexOf(",")>-1&&Ve.indexOf(".")===-1&&(Ve=Ve.replace(/,/g,"."));const ue=Number(Ve);return isNaN(ue)?NaN:ue},ut=new Set;for(const Ue of ot)if(Array.isArray(Ue==null?void 0:Ue.allocations))for(const Ve of Ue.allocations){const ue=String((Ve==null?void 0:Ve.batchId)||"").trim();ue&&ut.add(ue)}else if(Ue!=null&&Ue.allocations&&typeof Ue.allocations=="object")try{for(const Ve of Object.values(Ue.allocations)){const ue=String((Ve==null?void 0:Ve.batchId)||"").trim();ue&&ut.add(ue)}}catch{}if(Array.isArray(je==null?void 0:je.allocations))for(const Ue of je.allocations){const Ve=String((Ue==null?void 0:Ue.batchId)||"").trim();Ve&&ut.add(Ve)}const _e={};ut.size>0&&await Promise.all(Array.from(ut).map(async Ue=>{try{const Ve=await xi(Kt(Ge,"inventory_batches",Ue));if(Ve.exists()){const ue=Ve.data();_e[Ue]=Number(ue.salePrice??ue.sale_price??ue.price??0)}}catch{}}));const rt=new Set;for(const Ue of ot){const Ve=String(Ue.productId||Ue.productId||"").trim();Ve&&rt.add(Ve)}const we={};rt.size>0&&await Promise.all(Array.from(rt).map(async Ue=>{try{const Ve=await xi(Kt(Ge,"products",Ue));if(Ve.exists()){const ue=Ve.data();we[Ue]=Number(ue.salePrice??ue.price??0)}}catch{}}));const Ce=ot.map(Ue=>{const Ve=String(Ue.productName||Ue.product||Ue.name||"(sin nombre)"),ue=Number(Ue.qty??Ue.quantity??Ue.lbs??Ue.weight??0)||0,ce=mt(Ue.total??Ue.lineFinal??Ue.amount??Ue.monto??Ue.line_total)||0;let Te=0;const Xe=[Ue.unitPrice,Ue.unitPricePackage,Ue.salePrice,Ue.sale_price,Ue.price,Ue.unit_price,Ue.pricePerUnit,Ue.price_per_unit];for(const vt of Xe){const At=mt(vt);if(!isNaN(At)&&At!==0){Te=At;break}}if(!Te){const vt=(je==null?void 0:je.salePrice)??(je==null?void 0:je.sale_price)??(je==null?void 0:je.unitPrice)??(je==null?void 0:je.unit_price)??(je==null?void 0:je.price)??(je==null?void 0:je.pricePerUnit),At=mt(vt);!isNaN(At)&&At!==0&&(Te=At)}if(!Te){const vt=Array.isArray(Ue.allocations)?Ue.allocations[0]:Ue.allocations&&typeof Ue.allocations=="object"?Object.values(Ue.allocations)[0]:null,At=vt?String(vt.batchId||"").trim():"";At&&_e[At]&&(Te=_e[At]||0)}!Te&&Ue.productId&&(Te=we[String(Ue.productId)]||0),(!Te||Te===0)&&ce>0&&ue>0&&(Te=ce/ue);const ft=mt(Ue.discount??Ue.desc??0)||0;let gt=ce;return(!gt||gt===0)&&(gt=Number(Te*ue||0)),gt=Number(gt)||0,{productName:Ve,qty:ue,unitPrice:Te,discount:ft,total:gt}});m(Ce)}catch(Be){console.error(Be)}finally{d(!1)}},[g,x]=v.useState(br(new Date,"yyyy-MM-01")),[y,b]=v.useState(br(new Date,"yyyy-MM-dd")),[w,j]=v.useState([]),[I,_]=v.useState([]),[S,E]=v.useState([]),[k,P]=v.useState(!0),[T,O]=v.useState(""),[W,Ae]=v.useState(""),[de,fe]=v.useState(""),[ge,ee]=v.useState("ALL"),[Fe,Pe]=v.useState(null),F=15,[Q,H]=v.useState(1),R=v.useMemo(()=>{const se={};return w.forEach(Be=>se[Be.id]=Be.name),se},[w]);v.useEffect(()=>{ge!=="ALL"&&!S.includes(ge)&&ee("ALL")},[S,ge]),v.useEffect(()=>{(async()=>{P(!0),O("");try{const se=[];if(a&&e){const _e=tr(pt(Ge,"customers_pollo"),sr("vendorId","==",e),ln("createdAt","desc"));(await Lt(_e)).forEach(we=>se.push({id:we.id,name:we.data().name||""}))}else(await Lt(tr(pt(Ge,"customers_pollo"),ln("createdAt","desc")))).forEach(rt=>se.push({id:rt.id,name:rt.data().name||""}));j(se);const Be=await Lt(tr(pt(Ge,"salesV2"),ln("createdAt","desc"))),je=[];Be.forEach(_e=>{const rt=vat(_e.data(),_e.id);rt&&je.push(rt)});const ot=je.sort((_e,rt)=>rt.date.localeCompare(_e.date));_(ot);const mt=fp(g),ut=fp(y);E(Array.from(new Set(ot.filter(_e=>{const rt=lz(_e);return!(!isFinite(rt)||isFinite(mt)&&rt<mt||isFinite(ut)&&rt>ut)}).map(_e=>{var rt,we,Ce,Ue;return((rt=_e._raw)==null?void 0:rt.productName)||((Ue=(Ce=(we=_e._raw)==null?void 0:we.items)==null?void 0:Ce[0])==null?void 0:Ue.productName)||"(sin producto)"}))).sort()),H(1)}catch(se){console.error(se),O(" Error cargando transacciones.")}finally{P(!1)}})()},[g,y]);const z=v.useMemo(()=>{const se=fp(g),Be=fp(y);return I.filter(je=>{const ot=lz(je);return!(!isFinite(ot)||isFinite(se)&&ot<se||isFinite(Be)&&ot>Be)})},[I,g,y]),J=v.useMemo(()=>z.filter(se=>{var Be,je,ot,mt;if(W&&se.customerId!==W||de&&se.type!==de)return!1;if(ge&&ge!=="ALL"){const ut=((Be=se._raw)==null?void 0:Be.productName)||((mt=(ot=(je=se._raw)==null?void 0:je.items)==null?void 0:ot[0])==null?void 0:mt.productName)||"";if(!ut||ut!==ge)return!1}return!0}),[z,W,de,ge]),D=v.useMemo(()=>{let se=0,Be=0,je=0,ot=0;for(const _e of z)_e.type==="CONTADO"?(se+=_e.quantity,je+=_e.total):(Be+=_e.quantity,ot+=_e.total);const mt=se+Be,ut=je+ot;return{packsCash:se,packsCredito:Be,packsTotal:mt,montoCash:je,montoCredito:ot,montoTotal:ut}},[z]),U=Math.max(1,Math.ceil(J.length/F)),ne=v.useMemo(()=>{const se=(Q-1)*F;return J.slice(se,se+F)},[J,Q]);v.useMemo(()=>f&&I.find(se=>se.id===f)||null,[f,I]);const ve=async se=>{if(s&&(Pe(null),!!window.confirm("Eliminar esta venta? Se restaurar el inventario asociado.")))try{P(!0),await Hte(se.id),await yat(se.id),_(Be=>Be.filter(je=>je.id!==se.id)),O(" Venta eliminada")}catch(Be){console.error(Be),O(" No se pudo eliminar la venta.")}finally{P(!1)}},L=()=>{const se=`Ventas del dia  ${g} a ${y}`,Be=ut=>(ut||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),je=J.map(ut=>{var rt,we,Ce,Ue;const _e=aB(ut,R);return(rt=ut._raw)!=null&&rt.productName||(Ue=(Ce=(we=ut._raw)==null?void 0:we.items)==null?void 0:Ce[0])!=null&&Ue.productName,`<tr>
          <td>${ut.date}</td>
          <td>${Be(_e)}</td>
          <td>${ut.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${ut.quantity}</td>
          <td style="text-align:right">${Tu(ut.total)}</td>
        </tr>`}).join(""),ot=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${Be(se)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${Be(se)}</h1>
      <div class="kpis">
        <div><b>Libras Cash:</b> ${D.packsCash}</div>
        <div><b>Libras Crdito:</b> ${D.packsCredito}</div>
        <div><b>Ventas Cash:</b> ${Tu(D.montoCash)}</div>
        <div><b>Ventas Crdito:</b> ${Tu(D.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Libras</th><th>Ventas</th>
      </tr></thead><tbody>
      ${je||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,mt=window.open("","_blank");mt&&(mt.document.open(),mt.document.write(ot),mt.document.close())},Ye=()=>H(1),ie=()=>H(se=>Math.max(1,se-1)),Z=()=>H(se=>Math.min(U,se+1)),Oe=()=>H(U),le=()=>{const se=[];if(U<=7)for(let je=1;je<=U;je++)se.push(je);else{const je=Math.max(1,Q-2),ot=Math.min(U,Q+2);se.push(1),je>2&&se.push(-1);for(let mt=je;mt<=ot;mt++)mt!==1&&mt!==U&&se.push(mt);ot<U-1&&se.push(-2),se.push(U)}return o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 justify-between mt-3",children:[o.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Ye,disabled:Q===1,children:" Primero"}),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ie,disabled:Q===1,children:" Anterior"}),se.map((je,ot)=>typeof je=="number"?o.jsx("button",{className:`px-3 py-1 border rounded ${je===Q?"bg-blue-600 text-white":""}`,onClick:()=>H(je),children:je},ot):o.jsx("span",{className:"px-2",children:""},ot)),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Z,disabled:Q===U,children:"Siguiente "}),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Oe,disabled:Q===U,children:"ltimo "})]}),o.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",Q," de ",U,"  ",J.length," transaccin(es)"]})]})};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas del dia"}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 items-end text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:g,onChange:se=>{x(se.target.value),H(1)}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:y,onChange:se=>{b(se.target.value),H(1)}})]}),o.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[o.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:W,onChange:se=>{Ae(se.target.value),H(1)},children:[o.jsx("option",{value:"",children:"Todos"}),w.map(se=>o.jsx("option",{value:se.id,children:se.name},se.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Tipo"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:de,onChange:se=>{fe(se.target.value),H(1)},children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"CONTADO",children:"Cash"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:ge,onChange:se=>{ee(se.target.value),H(1)},children:[o.jsx("option",{value:"ALL",children:"Todos"}),S.map(se=>o.jsx("option",{value:se,children:se},se))]})]}),o.jsx("button",{className:"sm:col-span-2 lg:col-span-1 px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 w-full",onClick:L,children:"Exportar PDF"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-3 mb-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Libras Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:D.packsCash})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Libras Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:D.packsCredito})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Libras Total"}),o.jsx("div",{className:"text-xl font-semibold",children:D.packsTotal})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:Tu(D.montoCash)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:Tu(D.montoCredito)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Total"}),o.jsx("div",{className:"text-xl font-semibold",children:Tu(D.montoTotal)})]})]}),o.jsxs("div",{className:"block md:hidden space-y-3",children:[k?o.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Cargando"}):ne.length===0?o.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Sin transacciones en el rango."}):ne.map(se=>{var ot,mt,ut,_e;const Be=aB(se,R),je=((ot=se._raw)==null?void 0:ot.productName)||((_e=(ut=(mt=se._raw)==null?void 0:mt.items)==null?void 0:ut[0])==null?void 0:_e.productName)||"(sin producto)";return o.jsx("div",{className:"bg-white border rounded-xl shadow",children:o.jsxs("details",{className:"group",children:[o.jsxs("summary",{className:"list-none cursor-pointer p-3 flex items-start gap-3",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("div",{className:"font-semibold truncate",children:Be}),o.jsx("div",{className:"text-xs text-gray-600 shrink-0",children:se.date})]}),o.jsxs("div",{className:"mt-1 flex items-center gap-2 flex-wrap text-xs",children:[o.jsx("span",{className:`px-2 py-1 rounded-full border ${se.type==="CREDITO"?"bg-yellow-50 border-yellow-200 text-yellow-700":"bg-green-50 border-green-200 text-green-700"}`,children:se.type==="CREDITO"?"Crdito":"Cash"}),o.jsxs("span",{className:"text-gray-700",children:[o.jsx("b",{children:"Libras:"})," ",o.jsx("button",{type:"button",className:"underline text-blue-600",onClick:rt=>{rt.preventDefault(),p(se.id)},title:"Ver detalle",children:se.quantity})]}),o.jsxs("span",{className:"text-gray-700",children:[o.jsx("b",{children:"Monto:"})," ",Tu(se.total)]})]})]}),o.jsx("div",{className:"text-gray-500 mt-1",children:o.jsx("span",{className:"inline-block transition-transform group-open:rotate-180",children:""})})]}),o.jsx("div",{className:"px-3 pb-3 pt-0 text-sm",children:o.jsxs("div",{className:"grid grid-cols-1 gap-2 border-t pt-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Cliente"}),o.jsx("span",{className:"font-medium text-right",children:Be})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Producto"}),o.jsx("span",{className:"font-medium text-right",children:je})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Fecha"}),o.jsx("span",{className:"font-medium",children:se.date})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Tipo"}),o.jsx("span",{className:"font-medium",children:se.type==="CREDITO"?"Crdito":"Cash"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Libras"}),o.jsx("span",{className:"font-medium",children:o.jsx("button",{type:"button",className:"underline text-blue-600",onClick:()=>p(se.id),title:"Ver detalle",children:se.quantity})})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Monto"}),o.jsx("span",{className:"font-semibold",children:Tu(se.total)})]}),o.jsx("div",{className:"flex items-center justify-between",children:s&&o.jsxs("div",{className:"pt-2 flex items-center justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded border hover:bg-gray-50",onClick:()=>Pe(rt=>rt===se.id?null:se.id),children:" Acciones"}),Fe===se.id&&o.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>ve(se),children:"Eliminar"})]})})]})})]})},se.id)}),o.jsx("div",{className:"bg-white p-3 rounded shadow border",children:le()})]}),o.jsxs("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full",children:[o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Cliente"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Libras"}),o.jsx("th",{className:"p-2 border",children:"Ventas"}),s&&o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:k?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:i,children:"Cargando"})}):ne.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:i,children:"Sin transacciones en el rango."})}):ne.map(se=>{var ot,mt,ut,_e;const Be=aB(se,R),je=((ot=se._raw)==null?void 0:ot.productName)||((_e=(ut=(mt=se._raw)==null?void 0:mt.items)==null?void 0:ut[0])==null?void 0:_e.productName)||"(sin producto)";return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:se.date}),o.jsx("td",{className:"p-2 border",children:Be}),o.jsx("td",{className:"p-2 border",children:je}),o.jsx("td",{className:"p-2 border",children:se.type==="CREDITO"?"Crdito":"Cash"}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver detalle de productos de esta venta",onClick:()=>p(se.id),children:se.quantity})}),o.jsx("td",{className:"p-2 border",children:Tu(se.total)}),s&&o.jsxs("td",{className:"p-2 border relative",children:[o.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>Pe(rt=>rt===se.id?null:se.id),title:"Acciones",children:""}),Fe===se.id&&o.jsx("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:o.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>ve(se),children:"Eliminar"})})]})]},se.id)})})]}),le()]}),T&&o.jsx("p",{className:"mt-2 text-sm",children:T}),l&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("div",{children:o.jsxs("h3",{className:"text-lg font-bold",children:["Productos vendidos"," ",f?` #${f}`:""]})}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>c(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Libras"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio"}),o.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),o.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),o.jsx("tbody",{children:u?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):A.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):A.map((se,Be)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border text-left",children:se.productName}),o.jsx("td",{className:"p-2 border text-right",children:se.qty}),o.jsx("td",{className:"p-2 border text-right",children:Tu(se.unitPrice)}),o.jsx("td",{className:"p-2 border text-right",children:Tu(se.discount||0)}),o.jsx("td",{className:"p-2 border text-right",children:Tu(se.total)})]},Be))})]})})]})})]})}function wat(){const[t,e]=v.useState(!1);return v.useEffect(()=>{var a;const r=window.matchMedia("(max-width: 900px)"),n=()=>e(r.matches);return n(),(a=r.addEventListener)==null||a.call(r,"change",n),()=>{var s;return(s=r.removeEventListener)==null?void 0:s.call(r,"change",n)}},[]),t}function Nat(){const[t,e]=v.useState(null),[r,n]=v.useState(""),[a,s]=v.useState([]),[i,l]=v.useState(""),[c,u]=v.useState(!0),d=wat(),f=v.useMemo(()=>d?o.jsx(V1e,{role:r,roles:a}):o.jsx(Q1e,{role:r,roles:a}),[d,r,a]),h=(t==null?void 0:t.email)||"";if(v.useEffect(()=>{const m=JO(Rf,async p=>{if(u(!0),p){e(p);try{const g=Kt(Ge,"users",p.uid),x=await xi(g);if(x.exists()){const y=x.data(),b=Array.isArray(y.roles)?y.roles:y.role?[y.role]:[],w=y.sellerCandyId||"";s(b),n(b[0]||""),l(w||"")}else n(""),s([]),l("")}catch{n(""),l("")}}else e(null),n(""),l("");u(!1)});return()=>m()},[]),c)return o.jsx("div",{className:"p-6 text-center",children:"Cargando..."});const A=()=>{const m=a&&a.length?a:r;return zr(m,"admin")?o.jsx(pA,{to:"financialDashboard",replace:!0}):zr(m,"vendedor_pollo")?o.jsx(pA,{to:"salesV2",replace:!0}):zr(m,"supervisor_pollo")?o.jsx(pA,{to:"batches",replace:!0}):zr(m,"contador")?o.jsx(pA,{to:"batches",replace:!0}):zr(m,"vendedor_ropa")?o.jsx(pA,{to:"salesClothes",replace:!0}):zr(m,"vendedor_dulces")?o.jsx(pA,{to:"salesCandies",replace:!0}):o.jsx(pA,{to:"/",replace:!0})};return o.jsx(yhe,{children:o.jsxs(YAe,{children:[o.jsx(un,{path:"/",element:o.jsx(R1e,{})}),o.jsxs(un,{path:"/admin",element:o.jsx(xn,{allowedRoles:["admin","vendedor_pollo","vendedor_ropa","vendedor_dulces","supervisor_pollo","contador"],children:f}),children:[o.jsx(un,{index:!0,element:o.jsx(A,{})}),o.jsx(un,{path:"bills",element:o.jsx(xn,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:o.jsx(h4e,{role:r,roles:a})})}),o.jsx(un,{path:"salesV2",element:o.jsx(xn,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:o.jsx(hV,{user:t})})}),o.jsx(un,{path:"financialDashboard",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(j4e,{})})}),o.jsx(un,{path:"expenses",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(P4e,{})})}),o.jsx(un,{path:"transactionsPollo",element:o.jsx(xn,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:o.jsx(bat,{role:r,roles:a})})}),o.jsx(un,{path:"batches",element:o.jsx(xn,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:o.jsx(E4e,{role:r,roles:a})})}),o.jsx(un,{path:"paidBatches",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(R4e,{})})}),o.jsx(un,{path:"fix",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(k4e,{})})}),o.jsx(un,{path:"transactionclose",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(S4e,{})})}),o.jsx(un,{path:"billhistoric",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(m4e,{})})}),o.jsx(un,{path:"users",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(p4e,{})})}),o.jsx(un,{path:"products",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(g4e,{})})}),o.jsx(un,{path:"customersPollo",element:o.jsx(xn,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:o.jsx(hje,{role:r,roles:a,currentUserEmail:h,sellerPolloId:i})})}),o.jsx(un,{path:"datacenter",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(o9e,{})})}),o.jsx(un,{path:"productsCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(u7e,{})})}),o.jsx(un,{path:"mainordersCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(G7e,{})})}),o.jsx(un,{path:"productsPricesCandies",element:o.jsx(xn,{roles:a,allowedRoles:["admin","vendedor_dulces"],children:o.jsx(hat,{})})}),o.jsx(un,{path:"inventoryMainOrderCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(K7e,{})})}),o.jsx(un,{path:"inventoryCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(g7e,{})})}),o.jsx(un,{path:"billingsCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(t9e,{})})}),o.jsx(un,{path:"cashDeliveries",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(uat,{})})}),o.jsx(un,{path:"customersCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(x7e,{role:r,roles:a,currentUserEmail:h,sellerCandyId:i})})}),o.jsx(un,{path:"salesCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(C7e,{role:r,roles:a,currentUserEmail:h,sellerCandyId:i})})}),o.jsx(un,{path:"expensesCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(_7e,{})})}),o.jsx(un,{path:"dashboardCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(F7e,{})})}),o.jsx(un,{path:"transactionCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(j7e,{role:r,roles:a,currentUserEmail:h,sellerCandyId:i})})}),o.jsx(un,{path:"vendorsCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(O7e,{})})}),o.jsx(un,{path:"productsVendorsCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(U7e,{role:r,roles:a,currentUserEmail:h,sellerCandyId:i})})}),o.jsx(un,{path:"cierreVentasCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(z7e,{role:r,roles:a,currentUserEmail:h,sellerCandyId:i})})}),o.jsx(un,{path:"reporteCierresCandies",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(n9e,{role:r,roles:a,currentUserEmail:h,sellerCandyId:i})})}),o.jsx(un,{path:"consolidatedVendors",element:o.jsx(xn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(Z7e,{})})}),o.jsx(un,{path:"salesClothes",element:o.jsx(xn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(nje,{})})}),o.jsx(un,{path:"notebooksInventory",element:o.jsx(xn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(gat,{})})}),o.jsx(un,{path:"TransactionsReportClothes",element:o.jsx(xn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(Aje,{})})}),o.jsx(un,{path:"financialDashboardClothes",element:o.jsx(xn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(ije,{})})}),o.jsx(un,{path:"ExpensesClothes",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(oje,{})})}),o.jsx(un,{path:"inventoryClothesBatches",element:o.jsx(xn,{allowedRoles:["admin"],children:o.jsx(Q4e,{})})}),o.jsx(un,{path:"productsClothes",element:o.jsx(xn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(J4e,{})})}),o.jsx(un,{path:"CustomersClothes",element:o.jsx(xn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(eje,{})})})]}),o.jsx(un,{path:"/salesV2",element:o.jsx(xn,{allowedRoles:["admin","vendedor_pollo","contador"],children:o.jsx(hV,{user:t})})}),o.jsx(un,{path:"*",element:o.jsx(pA,{to:"/"})})]})})}D1e.then(t=>{console.info("Auth persistence mode:",t)}).catch(()=>{}).finally(()=>{sB.createRoot(document.getElementById("root")).render(o.jsx(No.StrictMode,{children:o.jsx(Nat,{})}))});export{Na as _,_at as c,oh as g};
