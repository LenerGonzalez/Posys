(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var IW=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function NP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var D_={exports:{}},ov={},R_={exports:{}},nr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bp=Symbol.for("react.element"),EP=Symbol.for("react.portal"),_P=Symbol.for("react.fragment"),IP=Symbol.for("react.strict_mode"),SP=Symbol.for("react.profiler"),FP=Symbol.for("react.provider"),TP=Symbol.for("react.context"),UP=Symbol.for("react.forward_ref"),PP=Symbol.for("react.suspense"),QP=Symbol.for("react.memo"),jP=Symbol.for("react.lazy"),eC=Symbol.iterator;function LP(t){return t===null||typeof t!="object"?null:(t=eC&&t[eC]||t["@@iterator"],typeof t=="function"?t:null)}var O_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M_=Object.assign,H_={};function Rd(t,e,r){this.props=t,this.context=e,this.refs=H_,this.updater=r||O_}Rd.prototype.isReactComponent={};Rd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Rd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function V_(){}V_.prototype=Rd.prototype;function dx(t,e,r){this.props=t,this.context=e,this.refs=H_,this.updater=r||O_}var hx=dx.prototype=new V_;hx.constructor=dx;M_(hx,Rd.prototype);hx.isPureReactComponent=!0;var tC=Array.isArray,K_=Object.prototype.hasOwnProperty,fx={current:null},q_={key:!0,ref:!0,__self:!0,__source:!0};function G_(t,e,r){var n,s={},i=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)K_.call(e,n)&&!q_.hasOwnProperty(n)&&(s[n]=e[n]);var A=arguments.length-2;if(A===1)s.children=r;else if(1<A){for(var l=Array(A),c=0;c<A;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(n in A=t.defaultProps,A)s[n]===void 0&&(s[n]=A[n]);return{$$typeof:Bp,type:t,key:i,ref:a,props:s,_owner:fx.current}}function kP(t,e){return{$$typeof:Bp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function px(t){return typeof t=="object"&&t!==null&&t.$$typeof===Bp}function DP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var rC=/\/+/g;function Ly(t,e){return typeof t=="object"&&t!==null&&t.key!=null?DP(""+t.key):e.toString(36)}function Ng(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Bp:case EP:a=!0}}if(a)return a=t,s=s(a),t=n===""?"."+Ly(a,0):n,tC(s)?(r="",t!=null&&(r=t.replace(rC,"$&/")+"/"),Ng(s,e,r,"",function(c){return c})):s!=null&&(px(s)&&(s=kP(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(rC,"$&/")+"/")+t)),e.push(s)),1;if(a=0,n=n===""?".":n+":",tC(t))for(var A=0;A<t.length;A++){i=t[A];var l=n+Ly(i,A);a+=Ng(i,e,r,l,s)}else if(l=LP(t),typeof l=="function")for(t=l.call(t),A=0;!(i=t.next()).done;)i=i.value,l=n+Ly(i,A++),a+=Ng(i,e,r,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function vm(t,e,r){if(t==null)return t;var n=[],s=0;return Ng(t,n,"","",function(i){return e.call(r,i,s++)}),n}function RP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var js={current:null},Eg={transition:null},OP={ReactCurrentDispatcher:js,ReactCurrentBatchConfig:Eg,ReactCurrentOwner:fx};function z_(){throw Error("act(...) is not supported in production builds of React.")}nr.Children={map:vm,forEach:function(t,e,r){vm(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return vm(t,function(){e++}),e},toArray:function(t){return vm(t,function(e){return e})||[]},only:function(t){if(!px(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};nr.Component=Rd;nr.Fragment=_P;nr.Profiler=SP;nr.PureComponent=dx;nr.StrictMode=IP;nr.Suspense=PP;nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OP;nr.act=z_;nr.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=M_({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=fx.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var A=t.type.defaultProps;for(l in e)K_.call(e,l)&&!q_.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&A!==void 0?A[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){A=Array(l);for(var c=0;c<l;c++)A[c]=arguments[c+2];n.children=A}return{$$typeof:Bp,type:t.type,key:s,ref:i,props:n,_owner:a}};nr.createContext=function(t){return t={$$typeof:TP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:FP,_context:t},t.Consumer=t};nr.createElement=G_;nr.createFactory=function(t){var e=G_.bind(null,t);return e.type=t,e};nr.createRef=function(){return{current:null}};nr.forwardRef=function(t){return{$$typeof:UP,render:t}};nr.isValidElement=px;nr.lazy=function(t){return{$$typeof:jP,_payload:{_status:-1,_result:t},_init:RP}};nr.memo=function(t,e){return{$$typeof:QP,type:t,compare:e===void 0?null:e}};nr.startTransition=function(t){var e=Eg.transition;Eg.transition={};try{t()}finally{Eg.transition=e}};nr.unstable_act=z_;nr.useCallback=function(t,e){return js.current.useCallback(t,e)};nr.useContext=function(t){return js.current.useContext(t)};nr.useDebugValue=function(){};nr.useDeferredValue=function(t){return js.current.useDeferredValue(t)};nr.useEffect=function(t,e){return js.current.useEffect(t,e)};nr.useId=function(){return js.current.useId()};nr.useImperativeHandle=function(t,e,r){return js.current.useImperativeHandle(t,e,r)};nr.useInsertionEffect=function(t,e){return js.current.useInsertionEffect(t,e)};nr.useLayoutEffect=function(t,e){return js.current.useLayoutEffect(t,e)};nr.useMemo=function(t,e){return js.current.useMemo(t,e)};nr.useReducer=function(t,e,r){return js.current.useReducer(t,e,r)};nr.useRef=function(t){return js.current.useRef(t)};nr.useState=function(t){return js.current.useState(t)};nr.useSyncExternalStore=function(t,e,r){return js.current.useSyncExternalStore(t,e,r)};nr.useTransition=function(){return js.current.useTransition()};nr.version="18.3.1";R_.exports=nr;var U=R_.exports;const _o=NP(U);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MP=U,HP=Symbol.for("react.element"),VP=Symbol.for("react.fragment"),KP=Object.prototype.hasOwnProperty,qP=MP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GP={key:!0,ref:!0,__self:!0,__source:!0};function $_(t,e,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)KP.call(e,n)&&!GP.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:HP,type:t,key:i,ref:a,props:s,_owner:qP.current}}ov.Fragment=VP;ov.jsx=$_;ov.jsxs=$_;D_.exports=ov;var o=D_.exports,s1={},W_={exports:{}},pi={},J_={exports:{}},X_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(te,se){var ne=te.length;te.push(se);e:for(;0<ne;){var ye=ne-1>>>1,F=te[ye];if(0<s(F,se))te[ye]=se,te[ne]=F,ne=ye;else break e}}function r(te){return te.length===0?null:te[0]}function n(te){if(te.length===0)return null;var se=te[0],ne=te.pop();if(ne!==se){te[0]=ne;e:for(var ye=0,F=te.length,L=F>>>1;ye<L;){var W=2*(ye+1)-1,q=te[W],H=W+1,re=te[H];if(0>s(q,ne))H<F&&0>s(re,q)?(te[ye]=re,te[H]=ne,ye=H):(te[ye]=q,te[W]=ne,ye=W);else if(H<F&&0>s(re,ne))te[ye]=re,te[H]=ne,ye=H;else break e}}return se}function s(te,se){var ne=te.sortIndex-se.sortIndex;return ne!==0?ne:te.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,A=a.now();t.unstable_now=function(){return a.now()-A}}var l=[],c=[],u=1,h=null,m=3,p=!1,b=!1,B=!1,E=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(te){for(var se=r(c);se!==null;){if(se.callback===null)n(c);else if(se.startTime<=te)n(c),se.sortIndex=se.expirationTime,e(l,se);else break;se=r(c)}}function M(te){if(B=!1,S(te),!b)if(r(l)!==null)b=!0,ue(R);else{var se=r(c);se!==null&&he(M,se.startTime-te)}}function R(te,se){b=!1,B&&(B=!1,y(N),N=-1),p=!0;var ne=m;try{for(S(se),h=r(l);h!==null&&(!(h.expirationTime>se)||te&&!_());){var ye=h.callback;if(typeof ye=="function"){h.callback=null,m=h.priorityLevel;var F=ye(h.expirationTime<=se);se=t.unstable_now(),typeof F=="function"?h.callback=F:h===r(l)&&n(l),S(se)}else n(l);h=r(l)}if(h!==null)var L=!0;else{var W=r(c);W!==null&&he(M,W.startTime-se),L=!1}return L}finally{h=null,m=ne,p=!1}}var O=!1,I=null,N=-1,j=5,D=-1;function _(){return!(t.unstable_now()-D<j)}function T(){if(I!==null){var te=t.unstable_now();D=te;var se=!0;try{se=I(!0,te)}finally{se?P():(O=!1,I=null)}}else O=!1}var P;if(typeof w=="function")P=function(){w(T)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,Ae=ee.port2;ee.port1.onmessage=T,P=function(){Ae.postMessage(null)}}else P=function(){E(T,0)};function ue(te){I=te,O||(O=!0,P())}function he(te,se){N=E(function(){te(t.unstable_now())},se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(te){te.callback=null},t.unstable_continueExecution=function(){b||p||(b=!0,ue(R))},t.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<te?Math.floor(1e3/te):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(te){switch(m){case 1:case 2:case 3:var se=3;break;default:se=m}var ne=m;m=se;try{return te()}finally{m=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(te,se){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ne=m;m=te;try{return se()}finally{m=ne}},t.unstable_scheduleCallback=function(te,se,ne){var ye=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?ye+ne:ye):ne=ye,te){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=ne+F,te={id:u++,callback:se,priorityLevel:te,startTime:ne,expirationTime:F,sortIndex:-1},ne>ye?(te.sortIndex=ne,e(c,te),r(l)===null&&te===r(c)&&(B?(y(N),N=-1):B=!0,he(M,ne-ye))):(te.sortIndex=F,e(l,te),b||p||(b=!0,ue(R))),te},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(te){var se=m;return function(){var ne=m;m=se;try{return te.apply(this,arguments)}finally{m=ne}}}})(X_);J_.exports=X_;var zP=J_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $P=U,di=zP;function Ye(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Y_=new Set,kf={};function Mc(t,e){wd(t,e),wd(t+"Capture",e)}function wd(t,e){for(kf[t]=e,t=0;t<e.length;t++)Y_.add(e[t])}var jo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),i1=Object.prototype.hasOwnProperty,WP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nC={},sC={};function JP(t){return i1.call(sC,t)?!0:i1.call(nC,t)?!1:WP.test(t)?sC[t]=!0:(nC[t]=!0,!1)}function XP(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function YP(t,e,r,n){if(e===null||typeof e>"u"||XP(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ls(t,e,r,n,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var cs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){cs[t]=new Ls(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];cs[e]=new Ls(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){cs[t]=new Ls(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){cs[t]=new Ls(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){cs[t]=new Ls(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){cs[t]=new Ls(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){cs[t]=new Ls(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){cs[t]=new Ls(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){cs[t]=new Ls(t,5,!1,t.toLowerCase(),null,!1,!1)});var mx=/[\-:]([a-z])/g;function gx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(mx,gx);cs[e]=new Ls(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(mx,gx);cs[e]=new Ls(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(mx,gx);cs[e]=new Ls(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){cs[t]=new Ls(t,1,!1,t.toLowerCase(),null,!1,!1)});cs.xlinkHref=new Ls("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){cs[t]=new Ls(t,1,!1,t.toLowerCase(),null,!0,!0)});function vx(t,e,r,n){var s=cs.hasOwnProperty(e)?cs[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(YP(e,r,s,n)&&(r=null),n||s===null?JP(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Ko=$P.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ym=Symbol.for("react.element"),Wu=Symbol.for("react.portal"),Ju=Symbol.for("react.fragment"),yx=Symbol.for("react.strict_mode"),a1=Symbol.for("react.profiler"),Z_=Symbol.for("react.provider"),eI=Symbol.for("react.context"),wx=Symbol.for("react.forward_ref"),o1=Symbol.for("react.suspense"),A1=Symbol.for("react.suspense_list"),xx=Symbol.for("react.memo"),TA=Symbol.for("react.lazy"),tI=Symbol.for("react.offscreen"),iC=Symbol.iterator;function bh(t){return t===null||typeof t!="object"?null:(t=iC&&t[iC]||t["@@iterator"],typeof t=="function"?t:null)}var on=Object.assign,ky;function zh(t){if(ky===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);ky=e&&e[1]||""}return`
`+ky+t}var Dy=!1;function Ry(t,e){if(!t||Dy)return"";Dy=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,A=i.length-1;1<=a&&0<=A&&s[a]!==i[A];)A--;for(;1<=a&&0<=A;a--,A--)if(s[a]!==i[A]){if(a!==1||A!==1)do if(a--,A--,0>A||s[a]!==i[A]){var l=`
`+s[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=A);break}}}finally{Dy=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?zh(t):""}function ZP(t){switch(t.tag){case 5:return zh(t.type);case 16:return zh("Lazy");case 13:return zh("Suspense");case 19:return zh("SuspenseList");case 0:case 2:case 15:return t=Ry(t.type,!1),t;case 11:return t=Ry(t.type.render,!1),t;case 1:return t=Ry(t.type,!0),t;default:return""}}function l1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ju:return"Fragment";case Wu:return"Portal";case a1:return"Profiler";case yx:return"StrictMode";case o1:return"Suspense";case A1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case eI:return(t.displayName||"Context")+".Consumer";case Z_:return(t._context.displayName||"Context")+".Provider";case wx:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xx:return e=t.displayName||null,e!==null?e:l1(t.type)||"Memo";case TA:e=t._payload,t=t._init;try{return l1(t(e))}catch{}}return null}function eQ(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return l1(e);case 8:return e===yx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function dl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function rI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function tQ(t){var e=rI(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function wm(t){t._valueTracker||(t._valueTracker=tQ(t))}function nI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=rI(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function r0(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function c1(t,e){var r=e.checked;return on({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function aC(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=dl(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function sI(t,e){e=e.checked,e!=null&&vx(t,"checked",e,!1)}function u1(t,e){sI(t,e);var r=dl(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?d1(t,e.type,r):e.hasOwnProperty("defaultValue")&&d1(t,e.type,dl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function oC(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function d1(t,e,r){(e!=="number"||r0(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var $h=Array.isArray;function ld(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+dl(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function h1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ye(91));return on({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function AC(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Ye(92));if($h(r)){if(1<r.length)throw Error(Ye(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:dl(r)}}function iI(t,e){var r=dl(e.value),n=dl(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function lC(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function aI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function f1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?aI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xm,oI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(xm=xm||document.createElement("div"),xm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Df(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var uf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rQ=["Webkit","ms","Moz","O"];Object.keys(uf).forEach(function(t){rQ.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),uf[e]=uf[t]})});function AI(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||uf.hasOwnProperty(t)&&uf[t]?(""+e).trim():e+"px"}function lI(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=AI(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var nQ=on({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function p1(t,e){if(e){if(nQ[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ye(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ye(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ye(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ye(62))}}function m1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var g1=null;function bx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var v1=null,cd=null,ud=null;function cC(t){if(t=Ep(t)){if(typeof v1!="function")throw Error(Ye(280));var e=t.stateNode;e&&(e=dv(e),v1(t.stateNode,t.type,e))}}function cI(t){cd?ud?ud.push(t):ud=[t]:cd=t}function uI(){if(cd){var t=cd,e=ud;if(ud=cd=null,cC(t),e)for(t=0;t<e.length;t++)cC(e[t])}}function dI(t,e){return t(e)}function hI(){}var Oy=!1;function fI(t,e,r){if(Oy)return t(e,r);Oy=!0;try{return dI(t,e,r)}finally{Oy=!1,(cd!==null||ud!==null)&&(hI(),uI())}}function Rf(t,e){var r=t.stateNode;if(r===null)return null;var n=dv(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Ye(231,e,typeof r));return r}var y1=!1;if(jo)try{var Bh={};Object.defineProperty(Bh,"passive",{get:function(){y1=!0}}),window.addEventListener("test",Bh,Bh),window.removeEventListener("test",Bh,Bh)}catch{y1=!1}function sQ(t,e,r,n,s,i,a,A,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(u){this.onError(u)}}var df=!1,n0=null,s0=!1,w1=null,iQ={onError:function(t){df=!0,n0=t}};function aQ(t,e,r,n,s,i,a,A,l){df=!1,n0=null,sQ.apply(iQ,arguments)}function oQ(t,e,r,n,s,i,a,A,l){if(aQ.apply(this,arguments),df){if(df){var c=n0;df=!1,n0=null}else throw Error(Ye(198));s0||(s0=!0,w1=c)}}function Hc(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function pI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function uC(t){if(Hc(t)!==t)throw Error(Ye(188))}function AQ(t){var e=t.alternate;if(!e){if(e=Hc(t),e===null)throw Error(Ye(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return uC(s),t;if(i===n)return uC(s),e;i=i.sibling}throw Error(Ye(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,A=s.child;A;){if(A===r){a=!0,r=s,n=i;break}if(A===n){a=!0,n=s,r=i;break}A=A.sibling}if(!a){for(A=i.child;A;){if(A===r){a=!0,r=i,n=s;break}if(A===n){a=!0,n=i,r=s;break}A=A.sibling}if(!a)throw Error(Ye(189))}}if(r.alternate!==n)throw Error(Ye(190))}if(r.tag!==3)throw Error(Ye(188));return r.stateNode.current===r?t:e}function mI(t){return t=AQ(t),t!==null?gI(t):null}function gI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=gI(t);if(e!==null)return e;t=t.sibling}return null}var vI=di.unstable_scheduleCallback,dC=di.unstable_cancelCallback,lQ=di.unstable_shouldYield,cQ=di.unstable_requestPaint,yn=di.unstable_now,uQ=di.unstable_getCurrentPriorityLevel,Bx=di.unstable_ImmediatePriority,yI=di.unstable_UserBlockingPriority,i0=di.unstable_NormalPriority,dQ=di.unstable_LowPriority,wI=di.unstable_IdlePriority,Av=null,Da=null;function hQ(t){if(Da&&typeof Da.onCommitFiberRoot=="function")try{Da.onCommitFiberRoot(Av,t,void 0,(t.current.flags&128)===128)}catch{}}var sa=Math.clz32?Math.clz32:mQ,fQ=Math.log,pQ=Math.LN2;function mQ(t){return t>>>=0,t===0?32:31-(fQ(t)/pQ|0)|0}var bm=64,Bm=4194304;function Wh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function a0(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,a=r&268435455;if(a!==0){var A=a&~s;A!==0?n=Wh(A):(i&=a,i!==0&&(n=Wh(i)))}else a=r&~s,a!==0?n=Wh(a):i!==0&&(n=Wh(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-sa(e),s=1<<r,n|=t[r],e&=~s;return n}function gQ(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vQ(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-sa(i),A=1<<a,l=s[a];l===-1?(!(A&r)||A&n)&&(s[a]=gQ(A,e)):l<=e&&(t.expiredLanes|=A),i&=~A}}function x1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function xI(){var t=bm;return bm<<=1,!(bm&4194240)&&(bm=64),t}function My(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Cp(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-sa(e),t[e]=r}function yQ(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-sa(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function Cx(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-sa(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Sr=0;function bI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var BI,Nx,CI,NI,EI,b1=!1,Cm=[],JA=null,XA=null,YA=null,Of=new Map,Mf=new Map,QA=[],wQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hC(t,e){switch(t){case"focusin":case"focusout":JA=null;break;case"dragenter":case"dragleave":XA=null;break;case"mouseover":case"mouseout":YA=null;break;case"pointerover":case"pointerout":Of.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mf.delete(e.pointerId)}}function Ch(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ep(e),e!==null&&Nx(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function xQ(t,e,r,n,s){switch(e){case"focusin":return JA=Ch(JA,t,e,r,n,s),!0;case"dragenter":return XA=Ch(XA,t,e,r,n,s),!0;case"mouseover":return YA=Ch(YA,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return Of.set(i,Ch(Of.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Mf.set(i,Ch(Mf.get(i)||null,t,e,r,n,s)),!0}return!1}function _I(t){var e=dc(t.target);if(e!==null){var r=Hc(e);if(r!==null){if(e=r.tag,e===13){if(e=pI(r),e!==null){t.blockedOn=e,EI(t.priority,function(){CI(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _g(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=B1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);g1=n,r.target.dispatchEvent(n),g1=null}else return e=Ep(r),e!==null&&Nx(e),t.blockedOn=r,!1;e.shift()}return!0}function fC(t,e,r){_g(t)&&r.delete(e)}function bQ(){b1=!1,JA!==null&&_g(JA)&&(JA=null),XA!==null&&_g(XA)&&(XA=null),YA!==null&&_g(YA)&&(YA=null),Of.forEach(fC),Mf.forEach(fC)}function Nh(t,e){t.blockedOn===e&&(t.blockedOn=null,b1||(b1=!0,di.unstable_scheduleCallback(di.unstable_NormalPriority,bQ)))}function Hf(t){function e(s){return Nh(s,t)}if(0<Cm.length){Nh(Cm[0],t);for(var r=1;r<Cm.length;r++){var n=Cm[r];n.blockedOn===t&&(n.blockedOn=null)}}for(JA!==null&&Nh(JA,t),XA!==null&&Nh(XA,t),YA!==null&&Nh(YA,t),Of.forEach(e),Mf.forEach(e),r=0;r<QA.length;r++)n=QA[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<QA.length&&(r=QA[0],r.blockedOn===null);)_I(r),r.blockedOn===null&&QA.shift()}var dd=Ko.ReactCurrentBatchConfig,o0=!0;function BQ(t,e,r,n){var s=Sr,i=dd.transition;dd.transition=null;try{Sr=1,Ex(t,e,r,n)}finally{Sr=s,dd.transition=i}}function CQ(t,e,r,n){var s=Sr,i=dd.transition;dd.transition=null;try{Sr=4,Ex(t,e,r,n)}finally{Sr=s,dd.transition=i}}function Ex(t,e,r,n){if(o0){var s=B1(t,e,r,n);if(s===null)Xy(t,e,n,A0,r),hC(t,n);else if(xQ(s,t,e,r,n))n.stopPropagation();else if(hC(t,n),e&4&&-1<wQ.indexOf(t)){for(;s!==null;){var i=Ep(s);if(i!==null&&BI(i),i=B1(t,e,r,n),i===null&&Xy(t,e,n,A0,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Xy(t,e,n,null,r)}}var A0=null;function B1(t,e,r,n){if(A0=null,t=bx(n),t=dc(t),t!==null)if(e=Hc(t),e===null)t=null;else if(r=e.tag,r===13){if(t=pI(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return A0=t,null}function II(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uQ()){case Bx:return 1;case yI:return 4;case i0:case dQ:return 16;case wI:return 536870912;default:return 16}default:return 16}}var VA=null,_x=null,Ig=null;function SI(){if(Ig)return Ig;var t,e=_x,r=e.length,n,s="value"in VA?VA.value:VA.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===s[i-n];n++);return Ig=s.slice(t,1<n?1-n:void 0)}function Sg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Nm(){return!0}function pC(){return!1}function mi(t){function e(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(r=t[A],this[A]=r?r(i):i[A]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Nm:pC,this.isPropagationStopped=pC,this}return on(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Nm)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Nm)},persist:function(){},isPersistent:Nm}),e}var Od={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ix=mi(Od),Np=on({},Od,{view:0,detail:0}),NQ=mi(Np),Hy,Vy,Eh,lv=on({},Np,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Eh&&(Eh&&t.type==="mousemove"?(Hy=t.screenX-Eh.screenX,Vy=t.screenY-Eh.screenY):Vy=Hy=0,Eh=t),Hy)},movementY:function(t){return"movementY"in t?t.movementY:Vy}}),mC=mi(lv),EQ=on({},lv,{dataTransfer:0}),_Q=mi(EQ),IQ=on({},Np,{relatedTarget:0}),Ky=mi(IQ),SQ=on({},Od,{animationName:0,elapsedTime:0,pseudoElement:0}),FQ=mi(SQ),TQ=on({},Od,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),UQ=mi(TQ),PQ=on({},Od,{data:0}),gC=mi(PQ),QQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kQ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=LQ[t])?!!e[t]:!1}function Sx(){return kQ}var DQ=on({},Np,{key:function(t){if(t.key){var e=QQ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Sg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?jQ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sx,charCode:function(t){return t.type==="keypress"?Sg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Sg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),RQ=mi(DQ),OQ=on({},lv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vC=mi(OQ),MQ=on({},Np,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sx}),HQ=mi(MQ),VQ=on({},Od,{propertyName:0,elapsedTime:0,pseudoElement:0}),KQ=mi(VQ),qQ=on({},lv,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),GQ=mi(qQ),zQ=[9,13,27,32],Fx=jo&&"CompositionEvent"in window,hf=null;jo&&"documentMode"in document&&(hf=document.documentMode);var $Q=jo&&"TextEvent"in window&&!hf,FI=jo&&(!Fx||hf&&8<hf&&11>=hf),yC=" ",wC=!1;function TI(t,e){switch(t){case"keyup":return zQ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function UI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xu=!1;function WQ(t,e){switch(t){case"compositionend":return UI(e);case"keypress":return e.which!==32?null:(wC=!0,yC);case"textInput":return t=e.data,t===yC&&wC?null:t;default:return null}}function JQ(t,e){if(Xu)return t==="compositionend"||!Fx&&TI(t,e)?(t=SI(),Ig=_x=VA=null,Xu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return FI&&e.locale!=="ko"?null:e.data;default:return null}}var XQ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!XQ[t.type]:e==="textarea"}function PI(t,e,r,n){cI(n),e=l0(e,"onChange"),0<e.length&&(r=new Ix("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var ff=null,Vf=null;function YQ(t){KI(t,0)}function cv(t){var e=ed(t);if(nI(e))return t}function ZQ(t,e){if(t==="change")return e}var QI=!1;if(jo){var qy;if(jo){var Gy="oninput"in document;if(!Gy){var bC=document.createElement("div");bC.setAttribute("oninput","return;"),Gy=typeof bC.oninput=="function"}qy=Gy}else qy=!1;QI=qy&&(!document.documentMode||9<document.documentMode)}function BC(){ff&&(ff.detachEvent("onpropertychange",jI),Vf=ff=null)}function jI(t){if(t.propertyName==="value"&&cv(Vf)){var e=[];PI(e,Vf,t,bx(t)),fI(YQ,e)}}function ej(t,e,r){t==="focusin"?(BC(),ff=e,Vf=r,ff.attachEvent("onpropertychange",jI)):t==="focusout"&&BC()}function tj(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cv(Vf)}function rj(t,e){if(t==="click")return cv(e)}function nj(t,e){if(t==="input"||t==="change")return cv(e)}function sj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var oa=typeof Object.is=="function"?Object.is:sj;function Kf(t,e){if(oa(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!i1.call(e,s)||!oa(t[s],e[s]))return!1}return!0}function CC(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function NC(t,e){var r=CC(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=CC(r)}}function LI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?LI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function kI(){for(var t=window,e=r0();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=r0(t.document)}return e}function Tx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ij(t){var e=kI(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&LI(r.ownerDocument.documentElement,r)){if(n!==null&&Tx(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=NC(r,i);var a=NC(r,n);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var aj=jo&&"documentMode"in document&&11>=document.documentMode,Yu=null,C1=null,pf=null,N1=!1;function EC(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;N1||Yu==null||Yu!==r0(n)||(n=Yu,"selectionStart"in n&&Tx(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),pf&&Kf(pf,n)||(pf=n,n=l0(C1,"onSelect"),0<n.length&&(e=new Ix("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Yu)))}function Em(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Zu={animationend:Em("Animation","AnimationEnd"),animationiteration:Em("Animation","AnimationIteration"),animationstart:Em("Animation","AnimationStart"),transitionend:Em("Transition","TransitionEnd")},zy={},DI={};jo&&(DI=document.createElement("div").style,"AnimationEvent"in window||(delete Zu.animationend.animation,delete Zu.animationiteration.animation,delete Zu.animationstart.animation),"TransitionEvent"in window||delete Zu.transitionend.transition);function uv(t){if(zy[t])return zy[t];if(!Zu[t])return t;var e=Zu[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in DI)return zy[t]=e[r];return t}var RI=uv("animationend"),OI=uv("animationiteration"),MI=uv("animationstart"),HI=uv("transitionend"),VI=new Map,_C="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bl(t,e){VI.set(t,e),Mc(e,[t])}for(var $y=0;$y<_C.length;$y++){var Wy=_C[$y],oj=Wy.toLowerCase(),Aj=Wy[0].toUpperCase()+Wy.slice(1);Bl(oj,"on"+Aj)}Bl(RI,"onAnimationEnd");Bl(OI,"onAnimationIteration");Bl(MI,"onAnimationStart");Bl("dblclick","onDoubleClick");Bl("focusin","onFocus");Bl("focusout","onBlur");Bl(HI,"onTransitionEnd");wd("onMouseEnter",["mouseout","mouseover"]);wd("onMouseLeave",["mouseout","mouseover"]);wd("onPointerEnter",["pointerout","pointerover"]);wd("onPointerLeave",["pointerout","pointerover"]);Mc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jh));function IC(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,oQ(n,e,void 0,t),t.currentTarget=null}function KI(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var a=n.length-1;0<=a;a--){var A=n[a],l=A.instance,c=A.currentTarget;if(A=A.listener,l!==i&&s.isPropagationStopped())break e;IC(s,A,c),i=l}else for(a=0;a<n.length;a++){if(A=n[a],l=A.instance,c=A.currentTarget,A=A.listener,l!==i&&s.isPropagationStopped())break e;IC(s,A,c),i=l}}}if(s0)throw t=w1,s0=!1,w1=null,t}function qr(t,e){var r=e[F1];r===void 0&&(r=e[F1]=new Set);var n=t+"__bubble";r.has(n)||(qI(e,t,2,!1),r.add(n))}function Jy(t,e,r){var n=0;e&&(n|=4),qI(r,t,n,e)}var _m="_reactListening"+Math.random().toString(36).slice(2);function qf(t){if(!t[_m]){t[_m]=!0,Y_.forEach(function(r){r!=="selectionchange"&&(lj.has(r)||Jy(r,!1,t),Jy(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_m]||(e[_m]=!0,Jy("selectionchange",!1,e))}}function qI(t,e,r,n){switch(II(e)){case 1:var s=BQ;break;case 4:s=CQ;break;default:s=Ex}r=s.bind(null,e,r,t),s=void 0,!y1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Xy(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var A=n.stateNode.containerInfo;if(A===s||A.nodeType===8&&A.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;A!==null;){if(a=dc(A),a===null)return;if(l=a.tag,l===5||l===6){n=i=a;continue e}A=A.parentNode}}n=n.return}fI(function(){var c=i,u=bx(r),h=[];e:{var m=VI.get(t);if(m!==void 0){var p=Ix,b=t;switch(t){case"keypress":if(Sg(r)===0)break e;case"keydown":case"keyup":p=RQ;break;case"focusin":b="focus",p=Ky;break;case"focusout":b="blur",p=Ky;break;case"beforeblur":case"afterblur":p=Ky;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=mC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=_Q;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=HQ;break;case RI:case OI:case MI:p=FQ;break;case HI:p=KQ;break;case"scroll":p=NQ;break;case"wheel":p=GQ;break;case"copy":case"cut":case"paste":p=UQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=vC}var B=(e&4)!==0,E=!B&&t==="scroll",y=B?m!==null?m+"Capture":null:m;B=[];for(var w=c,S;w!==null;){S=w;var M=S.stateNode;if(S.tag===5&&M!==null&&(S=M,y!==null&&(M=Rf(w,y),M!=null&&B.push(Gf(w,M,S)))),E)break;w=w.return}0<B.length&&(m=new p(m,b,null,r,u),h.push({event:m,listeners:B}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&r!==g1&&(b=r.relatedTarget||r.fromElement)&&(dc(b)||b[Lo]))break e;if((p||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,p?(b=r.relatedTarget||r.toElement,p=c,b=b?dc(b):null,b!==null&&(E=Hc(b),b!==E||b.tag!==5&&b.tag!==6)&&(b=null)):(p=null,b=c),p!==b)){if(B=mC,M="onMouseLeave",y="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(B=vC,M="onPointerLeave",y="onPointerEnter",w="pointer"),E=p==null?m:ed(p),S=b==null?m:ed(b),m=new B(M,w+"leave",p,r,u),m.target=E,m.relatedTarget=S,M=null,dc(u)===c&&(B=new B(y,w+"enter",b,r,u),B.target=S,B.relatedTarget=E,M=B),E=M,p&&b)t:{for(B=p,y=b,w=0,S=B;S;S=xu(S))w++;for(S=0,M=y;M;M=xu(M))S++;for(;0<w-S;)B=xu(B),w--;for(;0<S-w;)y=xu(y),S--;for(;w--;){if(B===y||y!==null&&B===y.alternate)break t;B=xu(B),y=xu(y)}B=null}else B=null;p!==null&&SC(h,m,p,B,!1),b!==null&&E!==null&&SC(h,E,b,B,!0)}}e:{if(m=c?ed(c):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var R=ZQ;else if(xC(m))if(QI)R=nj;else{R=tj;var O=ej}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(R=rj);if(R&&(R=R(t,c))){PI(h,R,r,u);break e}O&&O(t,m,c),t==="focusout"&&(O=m._wrapperState)&&O.controlled&&m.type==="number"&&d1(m,"number",m.value)}switch(O=c?ed(c):window,t){case"focusin":(xC(O)||O.contentEditable==="true")&&(Yu=O,C1=c,pf=null);break;case"focusout":pf=C1=Yu=null;break;case"mousedown":N1=!0;break;case"contextmenu":case"mouseup":case"dragend":N1=!1,EC(h,r,u);break;case"selectionchange":if(aj)break;case"keydown":case"keyup":EC(h,r,u)}var I;if(Fx)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Xu?TI(t,r)&&(N="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(N="onCompositionStart");N&&(FI&&r.locale!=="ko"&&(Xu||N!=="onCompositionStart"?N==="onCompositionEnd"&&Xu&&(I=SI()):(VA=u,_x="value"in VA?VA.value:VA.textContent,Xu=!0)),O=l0(c,N),0<O.length&&(N=new gC(N,t,null,r,u),h.push({event:N,listeners:O}),I?N.data=I:(I=UI(r),I!==null&&(N.data=I)))),(I=$Q?WQ(t,r):JQ(t,r))&&(c=l0(c,"onBeforeInput"),0<c.length&&(u=new gC("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:c}),u.data=I))}KI(h,e)})}function Gf(t,e,r){return{instance:t,listener:e,currentTarget:r}}function l0(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Rf(t,r),i!=null&&n.unshift(Gf(t,i,s)),i=Rf(t,e),i!=null&&n.push(Gf(t,i,s))),t=t.return}return n}function xu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function SC(t,e,r,n,s){for(var i=e._reactName,a=[];r!==null&&r!==n;){var A=r,l=A.alternate,c=A.stateNode;if(l!==null&&l===n)break;A.tag===5&&c!==null&&(A=c,s?(l=Rf(r,i),l!=null&&a.unshift(Gf(r,l,A))):s||(l=Rf(r,i),l!=null&&a.push(Gf(r,l,A)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var cj=/\r\n?/g,uj=/\u0000|\uFFFD/g;function FC(t){return(typeof t=="string"?t:""+t).replace(cj,`
`).replace(uj,"")}function Im(t,e,r){if(e=FC(e),FC(t)!==e&&r)throw Error(Ye(425))}function c0(){}var E1=null,_1=null;function I1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var S1=typeof setTimeout=="function"?setTimeout:void 0,dj=typeof clearTimeout=="function"?clearTimeout:void 0,TC=typeof Promise=="function"?Promise:void 0,hj=typeof queueMicrotask=="function"?queueMicrotask:typeof TC<"u"?function(t){return TC.resolve(null).then(t).catch(fj)}:S1;function fj(t){setTimeout(function(){throw t})}function Yy(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Hf(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Hf(e)}function ZA(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function UC(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Md=Math.random().toString(36).slice(2),Pa="__reactFiber$"+Md,zf="__reactProps$"+Md,Lo="__reactContainer$"+Md,F1="__reactEvents$"+Md,pj="__reactListeners$"+Md,mj="__reactHandles$"+Md;function dc(t){var e=t[Pa];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Lo]||r[Pa]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=UC(t);t!==null;){if(r=t[Pa])return r;t=UC(t)}return e}t=r,r=t.parentNode}return null}function Ep(t){return t=t[Pa]||t[Lo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ed(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ye(33))}function dv(t){return t[zf]||null}var T1=[],td=-1;function Cl(t){return{current:t}}function zr(t){0>td||(t.current=T1[td],T1[td]=null,td--)}function Mr(t,e){td++,T1[td]=t.current,t.current=e}var hl={},Cs=Cl(hl),$s=Cl(!1),_c=hl;function xd(t,e){var r=t.type.contextTypes;if(!r)return hl;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ws(t){return t=t.childContextTypes,t!=null}function u0(){zr($s),zr(Cs)}function PC(t,e,r){if(Cs.current!==hl)throw Error(Ye(168));Mr(Cs,e),Mr($s,r)}function GI(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(Ye(108,eQ(t)||"Unknown",s));return on({},r,n)}function d0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hl,_c=Cs.current,Mr(Cs,t),Mr($s,$s.current),!0}function QC(t,e,r){var n=t.stateNode;if(!n)throw Error(Ye(169));r?(t=GI(t,e,_c),n.__reactInternalMemoizedMergedChildContext=t,zr($s),zr(Cs),Mr(Cs,t)):zr($s),Mr($s,r)}var wo=null,hv=!1,Zy=!1;function zI(t){wo===null?wo=[t]:wo.push(t)}function gj(t){hv=!0,zI(t)}function Nl(){if(!Zy&&wo!==null){Zy=!0;var t=0,e=Sr;try{var r=wo;for(Sr=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}wo=null,hv=!1}catch(s){throw wo!==null&&(wo=wo.slice(t+1)),vI(Bx,Nl),s}finally{Sr=e,Zy=!1}}return null}var rd=[],nd=0,h0=null,f0=0,Ii=[],Si=0,Ic=null,xo=1,bo="";function tc(t,e){rd[nd++]=f0,rd[nd++]=h0,h0=t,f0=e}function $I(t,e,r){Ii[Si++]=xo,Ii[Si++]=bo,Ii[Si++]=Ic,Ic=t;var n=xo;t=bo;var s=32-sa(n)-1;n&=~(1<<s),r+=1;var i=32-sa(e)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,xo=1<<32-sa(e)+s|r<<s|n,bo=i+t}else xo=1<<i|r<<s|n,bo=t}function Ux(t){t.return!==null&&(tc(t,1),$I(t,1,0))}function Px(t){for(;t===h0;)h0=rd[--nd],rd[nd]=null,f0=rd[--nd],rd[nd]=null;for(;t===Ic;)Ic=Ii[--Si],Ii[Si]=null,bo=Ii[--Si],Ii[Si]=null,xo=Ii[--Si],Ii[Si]=null}var ui=null,Ai=null,Xr=!1,na=null;function WI(t,e){var r=Ti(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function jC(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ui=t,Ai=ZA(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ui=t,Ai=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Ic!==null?{id:xo,overflow:bo}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Ti(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,ui=t,Ai=null,!0):!1;default:return!1}}function U1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function P1(t){if(Xr){var e=Ai;if(e){var r=e;if(!jC(t,e)){if(U1(t))throw Error(Ye(418));e=ZA(r.nextSibling);var n=ui;e&&jC(t,e)?WI(n,r):(t.flags=t.flags&-4097|2,Xr=!1,ui=t)}}else{if(U1(t))throw Error(Ye(418));t.flags=t.flags&-4097|2,Xr=!1,ui=t}}}function LC(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ui=t}function Sm(t){if(t!==ui)return!1;if(!Xr)return LC(t),Xr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!I1(t.type,t.memoizedProps)),e&&(e=Ai)){if(U1(t))throw JI(),Error(Ye(418));for(;e;)WI(t,e),e=ZA(e.nextSibling)}if(LC(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ye(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Ai=ZA(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Ai=null}}else Ai=ui?ZA(t.stateNode.nextSibling):null;return!0}function JI(){for(var t=Ai;t;)t=ZA(t.nextSibling)}function bd(){Ai=ui=null,Xr=!1}function Qx(t){na===null?na=[t]:na.push(t)}var vj=Ko.ReactCurrentBatchConfig;function _h(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ye(309));var n=r.stateNode}if(!n)throw Error(Ye(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var A=s.refs;a===null?delete A[i]:A[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(Ye(284));if(!r._owner)throw Error(Ye(290,t))}return t}function Fm(t,e){throw t=Object.prototype.toString.call(e),Error(Ye(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function kC(t){var e=t._init;return e(t._payload)}function XI(t){function e(y,w){if(t){var S=y.deletions;S===null?(y.deletions=[w],y.flags|=16):S.push(w)}}function r(y,w){if(!t)return null;for(;w!==null;)e(y,w),w=w.sibling;return null}function n(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function s(y,w){return y=nl(y,w),y.index=0,y.sibling=null,y}function i(y,w,S){return y.index=S,t?(S=y.alternate,S!==null?(S=S.index,S<w?(y.flags|=2,w):S):(y.flags|=2,w)):(y.flags|=1048576,w)}function a(y){return t&&y.alternate===null&&(y.flags|=2),y}function A(y,w,S,M){return w===null||w.tag!==6?(w=aw(S,y.mode,M),w.return=y,w):(w=s(w,S),w.return=y,w)}function l(y,w,S,M){var R=S.type;return R===Ju?u(y,w,S.props.children,M,S.key):w!==null&&(w.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===TA&&kC(R)===w.type)?(M=s(w,S.props),M.ref=_h(y,w,S),M.return=y,M):(M=Lg(S.type,S.key,S.props,null,y.mode,M),M.ref=_h(y,w,S),M.return=y,M)}function c(y,w,S,M){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=ow(S,y.mode,M),w.return=y,w):(w=s(w,S.children||[]),w.return=y,w)}function u(y,w,S,M,R){return w===null||w.tag!==7?(w=yc(S,y.mode,M,R),w.return=y,w):(w=s(w,S),w.return=y,w)}function h(y,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=aw(""+w,y.mode,S),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ym:return S=Lg(w.type,w.key,w.props,null,y.mode,S),S.ref=_h(y,null,w),S.return=y,S;case Wu:return w=ow(w,y.mode,S),w.return=y,w;case TA:var M=w._init;return h(y,M(w._payload),S)}if($h(w)||bh(w))return w=yc(w,y.mode,S,null),w.return=y,w;Fm(y,w)}return null}function m(y,w,S,M){var R=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return R!==null?null:A(y,w,""+S,M);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ym:return S.key===R?l(y,w,S,M):null;case Wu:return S.key===R?c(y,w,S,M):null;case TA:return R=S._init,m(y,w,R(S._payload),M)}if($h(S)||bh(S))return R!==null?null:u(y,w,S,M,null);Fm(y,S)}return null}function p(y,w,S,M,R){if(typeof M=="string"&&M!==""||typeof M=="number")return y=y.get(S)||null,A(w,y,""+M,R);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case ym:return y=y.get(M.key===null?S:M.key)||null,l(w,y,M,R);case Wu:return y=y.get(M.key===null?S:M.key)||null,c(w,y,M,R);case TA:var O=M._init;return p(y,w,S,O(M._payload),R)}if($h(M)||bh(M))return y=y.get(S)||null,u(w,y,M,R,null);Fm(w,M)}return null}function b(y,w,S,M){for(var R=null,O=null,I=w,N=w=0,j=null;I!==null&&N<S.length;N++){I.index>N?(j=I,I=null):j=I.sibling;var D=m(y,I,S[N],M);if(D===null){I===null&&(I=j);break}t&&I&&D.alternate===null&&e(y,I),w=i(D,w,N),O===null?R=D:O.sibling=D,O=D,I=j}if(N===S.length)return r(y,I),Xr&&tc(y,N),R;if(I===null){for(;N<S.length;N++)I=h(y,S[N],M),I!==null&&(w=i(I,w,N),O===null?R=I:O.sibling=I,O=I);return Xr&&tc(y,N),R}for(I=n(y,I);N<S.length;N++)j=p(I,y,N,S[N],M),j!==null&&(t&&j.alternate!==null&&I.delete(j.key===null?N:j.key),w=i(j,w,N),O===null?R=j:O.sibling=j,O=j);return t&&I.forEach(function(_){return e(y,_)}),Xr&&tc(y,N),R}function B(y,w,S,M){var R=bh(S);if(typeof R!="function")throw Error(Ye(150));if(S=R.call(S),S==null)throw Error(Ye(151));for(var O=R=null,I=w,N=w=0,j=null,D=S.next();I!==null&&!D.done;N++,D=S.next()){I.index>N?(j=I,I=null):j=I.sibling;var _=m(y,I,D.value,M);if(_===null){I===null&&(I=j);break}t&&I&&_.alternate===null&&e(y,I),w=i(_,w,N),O===null?R=_:O.sibling=_,O=_,I=j}if(D.done)return r(y,I),Xr&&tc(y,N),R;if(I===null){for(;!D.done;N++,D=S.next())D=h(y,D.value,M),D!==null&&(w=i(D,w,N),O===null?R=D:O.sibling=D,O=D);return Xr&&tc(y,N),R}for(I=n(y,I);!D.done;N++,D=S.next())D=p(I,y,N,D.value,M),D!==null&&(t&&D.alternate!==null&&I.delete(D.key===null?N:D.key),w=i(D,w,N),O===null?R=D:O.sibling=D,O=D);return t&&I.forEach(function(T){return e(y,T)}),Xr&&tc(y,N),R}function E(y,w,S,M){if(typeof S=="object"&&S!==null&&S.type===Ju&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case ym:e:{for(var R=S.key,O=w;O!==null;){if(O.key===R){if(R=S.type,R===Ju){if(O.tag===7){r(y,O.sibling),w=s(O,S.props.children),w.return=y,y=w;break e}}else if(O.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===TA&&kC(R)===O.type){r(y,O.sibling),w=s(O,S.props),w.ref=_h(y,O,S),w.return=y,y=w;break e}r(y,O);break}else e(y,O);O=O.sibling}S.type===Ju?(w=yc(S.props.children,y.mode,M,S.key),w.return=y,y=w):(M=Lg(S.type,S.key,S.props,null,y.mode,M),M.ref=_h(y,w,S),M.return=y,y=M)}return a(y);case Wu:e:{for(O=S.key;w!==null;){if(w.key===O)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){r(y,w.sibling),w=s(w,S.children||[]),w.return=y,y=w;break e}else{r(y,w);break}else e(y,w);w=w.sibling}w=ow(S,y.mode,M),w.return=y,y=w}return a(y);case TA:return O=S._init,E(y,w,O(S._payload),M)}if($h(S))return b(y,w,S,M);if(bh(S))return B(y,w,S,M);Fm(y,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(r(y,w.sibling),w=s(w,S),w.return=y,y=w):(r(y,w),w=aw(S,y.mode,M),w.return=y,y=w),a(y)):r(y,w)}return E}var Bd=XI(!0),YI=XI(!1),p0=Cl(null),m0=null,sd=null,jx=null;function Lx(){jx=sd=m0=null}function kx(t){var e=p0.current;zr(p0),t._currentValue=e}function Q1(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function hd(t,e){m0=t,jx=sd=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Gs=!0),t.firstContext=null)}function ki(t){var e=t._currentValue;if(jx!==t)if(t={context:t,memoizedValue:e,next:null},sd===null){if(m0===null)throw Error(Ye(308));sd=t,m0.dependencies={lanes:0,firstContext:t}}else sd=sd.next=t;return e}var hc=null;function Dx(t){hc===null?hc=[t]:hc.push(t)}function ZI(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,Dx(e)):(r.next=s.next,s.next=r),e.interleaved=r,ko(t,n)}function ko(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var UA=!1;function Rx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Io(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function el(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,hr&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,ko(t,r)}return s=n.interleaved,s===null?(e.next=e,Dx(n)):(e.next=s.next,s.next=e),n.interleaved=e,ko(t,r)}function Fg(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Cx(t,r)}}function DC(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function g0(t,e,r,n){var s=t.updateQueue;UA=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,A=s.shared.pending;if(A!==null){s.shared.pending=null;var l=A,c=l.next;l.next=null,a===null?i=c:a.next=c,a=l;var u=t.alternate;u!==null&&(u=u.updateQueue,A=u.lastBaseUpdate,A!==a&&(A===null?u.firstBaseUpdate=c:A.next=c,u.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;a=0,u=c=l=null,A=i;do{var m=A.lane,p=A.eventTime;if((n&m)===m){u!==null&&(u=u.next={eventTime:p,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var b=t,B=A;switch(m=e,p=r,B.tag){case 1:if(b=B.payload,typeof b=="function"){h=b.call(p,h,m);break e}h=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=B.payload,m=typeof b=="function"?b.call(p,h,m):b,m==null)break e;h=on({},h,m);break e;case 2:UA=!0}}A.callback!==null&&A.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[A]:m.push(A))}else p={eventTime:p,lane:m,tag:A.tag,payload:A.payload,callback:A.callback,next:null},u===null?(c=u=p,l=h):u=u.next=p,a|=m;if(A=A.next,A===null){if(A=s.shared.pending,A===null)break;m=A,A=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(u===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Fc|=a,t.lanes=a,t.memoizedState=h}}function RC(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(Ye(191,s));s.call(n)}}}var _p={},Ra=Cl(_p),$f=Cl(_p),Wf=Cl(_p);function fc(t){if(t===_p)throw Error(Ye(174));return t}function Ox(t,e){switch(Mr(Wf,e),Mr($f,t),Mr(Ra,_p),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:f1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=f1(e,t)}zr(Ra),Mr(Ra,e)}function Cd(){zr(Ra),zr($f),zr(Wf)}function tS(t){fc(Wf.current);var e=fc(Ra.current),r=f1(e,t.type);e!==r&&(Mr($f,t),Mr(Ra,r))}function Mx(t){$f.current===t&&(zr(Ra),zr($f))}var sn=Cl(0);function v0(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ew=[];function Hx(){for(var t=0;t<ew.length;t++)ew[t]._workInProgressVersionPrimary=null;ew.length=0}var Tg=Ko.ReactCurrentDispatcher,tw=Ko.ReactCurrentBatchConfig,Sc=0,an=null,Pn=null,qn=null,y0=!1,mf=!1,Jf=0,yj=0;function hs(){throw Error(Ye(321))}function Vx(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!oa(t[r],e[r]))return!1;return!0}function Kx(t,e,r,n,s,i){if(Sc=i,an=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Tg.current=t===null||t.memoizedState===null?Bj:Cj,t=r(n,s),mf){i=0;do{if(mf=!1,Jf=0,25<=i)throw Error(Ye(301));i+=1,qn=Pn=null,e.updateQueue=null,Tg.current=Nj,t=r(n,s)}while(mf)}if(Tg.current=w0,e=Pn!==null&&Pn.next!==null,Sc=0,qn=Pn=an=null,y0=!1,e)throw Error(Ye(300));return t}function qx(){var t=Jf!==0;return Jf=0,t}function Ua(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qn===null?an.memoizedState=qn=t:qn=qn.next=t,qn}function Di(){if(Pn===null){var t=an.alternate;t=t!==null?t.memoizedState:null}else t=Pn.next;var e=qn===null?an.memoizedState:qn.next;if(e!==null)qn=e,Pn=t;else{if(t===null)throw Error(Ye(310));Pn=t,t={memoizedState:Pn.memoizedState,baseState:Pn.baseState,baseQueue:Pn.baseQueue,queue:Pn.queue,next:null},qn===null?an.memoizedState=qn=t:qn=qn.next=t}return qn}function Xf(t,e){return typeof e=="function"?e(t):e}function rw(t){var e=Di(),r=e.queue;if(r===null)throw Error(Ye(311));r.lastRenderedReducer=t;var n=Pn,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var A=a=null,l=null,c=i;do{var u=c.lane;if((Sc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(A=l=h,a=n):l=l.next=h,an.lanes|=u,Fc|=u}c=c.next}while(c!==null&&c!==i);l===null?a=n:l.next=A,oa(n,e.memoizedState)||(Gs=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,an.lanes|=i,Fc|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function nw(t){var e=Di(),r=e.queue;if(r===null)throw Error(Ye(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);oa(i,e.memoizedState)||(Gs=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function rS(){}function nS(t,e){var r=an,n=Di(),s=e(),i=!oa(n.memoizedState,s);if(i&&(n.memoizedState=s,Gs=!0),n=n.queue,Gx(aS.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||qn!==null&&qn.memoizedState.tag&1){if(r.flags|=2048,Yf(9,iS.bind(null,r,n,s,e),void 0,null),Gn===null)throw Error(Ye(349));Sc&30||sS(r,e,s)}return s}function sS(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=an.updateQueue,e===null?(e={lastEffect:null,stores:null},an.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function iS(t,e,r,n){e.value=r,e.getSnapshot=n,oS(e)&&AS(t)}function aS(t,e,r){return r(function(){oS(e)&&AS(t)})}function oS(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!oa(t,r)}catch{return!0}}function AS(t){var e=ko(t,1);e!==null&&ia(e,t,1,-1)}function OC(t){var e=Ua();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xf,lastRenderedState:t},e.queue=t,t=t.dispatch=bj.bind(null,an,t),[e.memoizedState,t]}function Yf(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=an.updateQueue,e===null?(e={lastEffect:null,stores:null},an.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function lS(){return Di().memoizedState}function Ug(t,e,r,n){var s=Ua();an.flags|=t,s.memoizedState=Yf(1|e,r,void 0,n===void 0?null:n)}function fv(t,e,r,n){var s=Di();n=n===void 0?null:n;var i=void 0;if(Pn!==null){var a=Pn.memoizedState;if(i=a.destroy,n!==null&&Vx(n,a.deps)){s.memoizedState=Yf(e,r,i,n);return}}an.flags|=t,s.memoizedState=Yf(1|e,r,i,n)}function MC(t,e){return Ug(8390656,8,t,e)}function Gx(t,e){return fv(2048,8,t,e)}function cS(t,e){return fv(4,2,t,e)}function uS(t,e){return fv(4,4,t,e)}function dS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hS(t,e,r){return r=r!=null?r.concat([t]):null,fv(4,4,dS.bind(null,e,t),r)}function zx(){}function fS(t,e){var r=Di();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Vx(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function pS(t,e){var r=Di();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Vx(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function mS(t,e,r){return Sc&21?(oa(r,e)||(r=xI(),an.lanes|=r,Fc|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Gs=!0),t.memoizedState=r)}function wj(t,e){var r=Sr;Sr=r!==0&&4>r?r:4,t(!0);var n=tw.transition;tw.transition={};try{t(!1),e()}finally{Sr=r,tw.transition=n}}function gS(){return Di().memoizedState}function xj(t,e,r){var n=rl(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},vS(t))yS(e,r);else if(r=ZI(t,e,r,n),r!==null){var s=Ps();ia(r,t,n,s),wS(r,e,n)}}function bj(t,e,r){var n=rl(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(vS(t))yS(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,A=i(a,r);if(s.hasEagerState=!0,s.eagerState=A,oa(A,a)){var l=e.interleaved;l===null?(s.next=s,Dx(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}r=ZI(t,e,s,n),r!==null&&(s=Ps(),ia(r,t,n,s),wS(r,e,n))}}function vS(t){var e=t.alternate;return t===an||e!==null&&e===an}function yS(t,e){mf=y0=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function wS(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Cx(t,r)}}var w0={readContext:ki,useCallback:hs,useContext:hs,useEffect:hs,useImperativeHandle:hs,useInsertionEffect:hs,useLayoutEffect:hs,useMemo:hs,useReducer:hs,useRef:hs,useState:hs,useDebugValue:hs,useDeferredValue:hs,useTransition:hs,useMutableSource:hs,useSyncExternalStore:hs,useId:hs,unstable_isNewReconciler:!1},Bj={readContext:ki,useCallback:function(t,e){return Ua().memoizedState=[t,e===void 0?null:e],t},useContext:ki,useEffect:MC,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Ug(4194308,4,dS.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Ug(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ug(4,2,t,e)},useMemo:function(t,e){var r=Ua();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Ua();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=xj.bind(null,an,t),[n.memoizedState,t]},useRef:function(t){var e=Ua();return t={current:t},e.memoizedState=t},useState:OC,useDebugValue:zx,useDeferredValue:function(t){return Ua().memoizedState=t},useTransition:function(){var t=OC(!1),e=t[0];return t=wj.bind(null,t[1]),Ua().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=an,s=Ua();if(Xr){if(r===void 0)throw Error(Ye(407));r=r()}else{if(r=e(),Gn===null)throw Error(Ye(349));Sc&30||sS(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,MC(aS.bind(null,n,i,t),[t]),n.flags|=2048,Yf(9,iS.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=Ua(),e=Gn.identifierPrefix;if(Xr){var r=bo,n=xo;r=(n&~(1<<32-sa(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Jf++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=yj++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Cj={readContext:ki,useCallback:fS,useContext:ki,useEffect:Gx,useImperativeHandle:hS,useInsertionEffect:cS,useLayoutEffect:uS,useMemo:pS,useReducer:rw,useRef:lS,useState:function(){return rw(Xf)},useDebugValue:zx,useDeferredValue:function(t){var e=Di();return mS(e,Pn.memoizedState,t)},useTransition:function(){var t=rw(Xf)[0],e=Di().memoizedState;return[t,e]},useMutableSource:rS,useSyncExternalStore:nS,useId:gS,unstable_isNewReconciler:!1},Nj={readContext:ki,useCallback:fS,useContext:ki,useEffect:Gx,useImperativeHandle:hS,useInsertionEffect:cS,useLayoutEffect:uS,useMemo:pS,useReducer:nw,useRef:lS,useState:function(){return nw(Xf)},useDebugValue:zx,useDeferredValue:function(t){var e=Di();return Pn===null?e.memoizedState=t:mS(e,Pn.memoizedState,t)},useTransition:function(){var t=nw(Xf)[0],e=Di().memoizedState;return[t,e]},useMutableSource:rS,useSyncExternalStore:nS,useId:gS,unstable_isNewReconciler:!1};function ea(t,e){if(t&&t.defaultProps){e=on({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function j1(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:on({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var pv={isMounted:function(t){return(t=t._reactInternals)?Hc(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Ps(),s=rl(t),i=Io(n,s);i.payload=e,r!=null&&(i.callback=r),e=el(t,i,s),e!==null&&(ia(e,t,s,n),Fg(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Ps(),s=rl(t),i=Io(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=el(t,i,s),e!==null&&(ia(e,t,s,n),Fg(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Ps(),n=rl(t),s=Io(r,n);s.tag=2,e!=null&&(s.callback=e),e=el(t,s,n),e!==null&&(ia(e,t,n,r),Fg(e,t,n))}};function HC(t,e,r,n,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,a):e.prototype&&e.prototype.isPureReactComponent?!Kf(r,n)||!Kf(s,i):!0}function xS(t,e,r){var n=!1,s=hl,i=e.contextType;return typeof i=="object"&&i!==null?i=ki(i):(s=Ws(e)?_c:Cs.current,n=e.contextTypes,i=(n=n!=null)?xd(t,s):hl),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=pv,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function VC(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&pv.enqueueReplaceState(e,e.state,null)}function L1(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},Rx(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ki(i):(i=Ws(e)?_c:Cs.current,s.context=xd(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(j1(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&pv.enqueueReplaceState(s,s.state,null),g0(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Nd(t,e){try{var r="",n=e;do r+=ZP(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function sw(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function k1(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Ej=typeof WeakMap=="function"?WeakMap:Map;function bS(t,e,r){r=Io(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){b0||(b0=!0,z1=n),k1(t,e)},r}function BS(t,e,r){r=Io(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){k1(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){k1(t,e),typeof n!="function"&&(tl===null?tl=new Set([this]):tl.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function KC(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Ej;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=Oj.bind(null,t,e,r),e.then(t,t))}function qC(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function GC(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Io(-1,1),e.tag=2,el(r,e,1))),r.lanes|=1),t)}var _j=Ko.ReactCurrentOwner,Gs=!1;function Ts(t,e,r,n){e.child=t===null?YI(e,null,r,n):Bd(e,t.child,r,n)}function zC(t,e,r,n,s){r=r.render;var i=e.ref;return hd(e,s),n=Kx(t,e,r,n,i,s),r=qx(),t!==null&&!Gs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Do(t,e,s)):(Xr&&r&&Ux(e),e.flags|=1,Ts(t,e,n,s),e.child)}function $C(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!tb(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,CS(t,e,i,n,s)):(t=Lg(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:Kf,r(a,n)&&t.ref===e.ref)return Do(t,e,s)}return e.flags|=1,t=nl(i,n),t.ref=e.ref,t.return=e,e.child=t}function CS(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(Kf(i,n)&&t.ref===e.ref)if(Gs=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(Gs=!0);else return e.lanes=t.lanes,Do(t,e,s)}return D1(t,e,r,n,s)}function NS(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mr(ad,oi),oi|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Mr(ad,oi),oi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Mr(ad,oi),oi|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,Mr(ad,oi),oi|=n;return Ts(t,e,s,r),e.child}function ES(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function D1(t,e,r,n,s){var i=Ws(r)?_c:Cs.current;return i=xd(e,i),hd(e,s),r=Kx(t,e,r,n,i,s),n=qx(),t!==null&&!Gs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Do(t,e,s)):(Xr&&n&&Ux(e),e.flags|=1,Ts(t,e,r,s),e.child)}function WC(t,e,r,n,s){if(Ws(r)){var i=!0;d0(e)}else i=!1;if(hd(e,s),e.stateNode===null)Pg(t,e),xS(e,r,n),L1(e,r,n,s),n=!0;else if(t===null){var a=e.stateNode,A=e.memoizedProps;a.props=A;var l=a.context,c=r.contextType;typeof c=="object"&&c!==null?c=ki(c):(c=Ws(r)?_c:Cs.current,c=xd(e,c));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(A!==n||l!==c)&&VC(e,a,n,c),UA=!1;var m=e.memoizedState;a.state=m,g0(e,n,a,s),l=e.memoizedState,A!==n||m!==l||$s.current||UA?(typeof u=="function"&&(j1(e,r,u,n),l=e.memoizedState),(A=UA||HC(e,r,A,n,m,l,c))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),a.props=n,a.state=l,a.context=c,n=A):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,eS(t,e),A=e.memoizedProps,c=e.type===e.elementType?A:ea(e.type,A),a.props=c,h=e.pendingProps,m=a.context,l=r.contextType,typeof l=="object"&&l!==null?l=ki(l):(l=Ws(r)?_c:Cs.current,l=xd(e,l));var p=r.getDerivedStateFromProps;(u=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(A!==h||m!==l)&&VC(e,a,n,l),UA=!1,m=e.memoizedState,a.state=m,g0(e,n,a,s);var b=e.memoizedState;A!==h||m!==b||$s.current||UA?(typeof p=="function"&&(j1(e,r,p,n),b=e.memoizedState),(c=UA||HC(e,r,c,n,m,b,l)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,b,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,b,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||A===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||A===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=b),a.props=n,a.state=b,a.context=l,n=c):(typeof a.componentDidUpdate!="function"||A===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||A===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return R1(t,e,r,n,i,s)}function R1(t,e,r,n,s,i){ES(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return s&&QC(e,r,!1),Do(t,e,i);n=e.stateNode,_j.current=e;var A=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=Bd(e,t.child,null,i),e.child=Bd(e,null,A,i)):Ts(t,e,A,i),e.memoizedState=n.state,s&&QC(e,r,!0),e.child}function _S(t){var e=t.stateNode;e.pendingContext?PC(t,e.pendingContext,e.pendingContext!==e.context):e.context&&PC(t,e.context,!1),Ox(t,e.containerInfo)}function JC(t,e,r,n,s){return bd(),Qx(s),e.flags|=256,Ts(t,e,r,n),e.child}var O1={dehydrated:null,treeContext:null,retryLane:0};function M1(t){return{baseLanes:t,cachePool:null,transitions:null}}function IS(t,e,r){var n=e.pendingProps,s=sn.current,i=!1,a=(e.flags&128)!==0,A;if((A=a)||(A=t!==null&&t.memoizedState===null?!1:(s&2)!==0),A?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Mr(sn,s&1),t===null)return P1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,i?(n=e.mode,i=e.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=vv(a,n,0,null),t=yc(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=M1(r),e.memoizedState=O1,t):$x(e,a));if(s=t.memoizedState,s!==null&&(A=s.dehydrated,A!==null))return Ij(t,e,a,n,A,s,r);if(i){i=n.fallback,a=e.mode,s=t.child,A=s.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=nl(s,l),n.subtreeFlags=s.subtreeFlags&14680064),A!==null?i=nl(A,i):(i=yc(i,a,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,a=t.child.memoizedState,a=a===null?M1(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~r,e.memoizedState=O1,n}return i=t.child,t=i.sibling,n=nl(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function $x(t,e){return e=vv({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Tm(t,e,r,n){return n!==null&&Qx(n),Bd(e,t.child,null,r),t=$x(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ij(t,e,r,n,s,i,a){if(r)return e.flags&256?(e.flags&=-257,n=sw(Error(Ye(422))),Tm(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=vv({mode:"visible",children:n.children},s,0,null),i=yc(i,s,a,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&Bd(e,t.child,null,a),e.child.memoizedState=M1(a),e.memoizedState=O1,i);if(!(e.mode&1))return Tm(t,e,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var A=n.dgst;return n=A,i=Error(Ye(419)),n=sw(i,n,void 0),Tm(t,e,a,n)}if(A=(a&t.childLanes)!==0,Gs||A){if(n=Gn,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ko(t,s),ia(n,t,s,-1))}return eb(),n=sw(Error(Ye(421))),Tm(t,e,a,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Mj.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ai=ZA(s.nextSibling),ui=e,Xr=!0,na=null,t!==null&&(Ii[Si++]=xo,Ii[Si++]=bo,Ii[Si++]=Ic,xo=t.id,bo=t.overflow,Ic=e),e=$x(e,n.children),e.flags|=4096,e)}function XC(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Q1(t.return,e,r)}function iw(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function SS(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(Ts(t,e,n.children,r),n=sn.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&XC(t,r,e);else if(t.tag===19)XC(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Mr(sn,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&v0(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),iw(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&v0(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}iw(e,!0,r,null,i);break;case"together":iw(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Pg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Do(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Fc|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ye(153));if(e.child!==null){for(t=e.child,r=nl(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=nl(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Sj(t,e,r){switch(e.tag){case 3:_S(e),bd();break;case 5:tS(e);break;case 1:Ws(e.type)&&d0(e);break;case 4:Ox(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;Mr(p0,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Mr(sn,sn.current&1),e.flags|=128,null):r&e.child.childLanes?IS(t,e,r):(Mr(sn,sn.current&1),t=Do(t,e,r),t!==null?t.sibling:null);Mr(sn,sn.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return SS(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Mr(sn,sn.current),n)break;return null;case 22:case 23:return e.lanes=0,NS(t,e,r)}return Do(t,e,r)}var FS,H1,TS,US;FS=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};H1=function(){};TS=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,fc(Ra.current);var i=null;switch(r){case"input":s=c1(t,s),n=c1(t,n),i=[];break;case"select":s=on({},s,{value:void 0}),n=on({},n,{value:void 0}),i=[];break;case"textarea":s=h1(t,s),n=h1(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=c0)}p1(r,n);var a;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var A=s[c];for(a in A)A.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(kf.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var l=n[c];if(A=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&l!==A&&(l!=null||A!=null))if(c==="style")if(A){for(a in A)!A.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&A[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(i||(i=[]),i.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,A=A?A.__html:void 0,l!=null&&A!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(kf.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&qr("scroll",t),i||A===l||(i=[])):(i=i||[]).push(c,l))}r&&(i=i||[]).push("style",r);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};US=function(t,e,r,n){r!==n&&(e.flags|=4)};function Ih(t,e){if(!Xr)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function fs(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Fj(t,e,r){var n=e.pendingProps;switch(Px(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fs(e),null;case 1:return Ws(e.type)&&u0(),fs(e),null;case 3:return n=e.stateNode,Cd(),zr($s),zr(Cs),Hx(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Sm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,na!==null&&(J1(na),na=null))),H1(t,e),fs(e),null;case 5:Mx(e);var s=fc(Wf.current);if(r=e.type,t!==null&&e.stateNode!=null)TS(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Ye(166));return fs(e),null}if(t=fc(Ra.current),Sm(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[Pa]=e,n[zf]=i,t=(e.mode&1)!==0,r){case"dialog":qr("cancel",n),qr("close",n);break;case"iframe":case"object":case"embed":qr("load",n);break;case"video":case"audio":for(s=0;s<Jh.length;s++)qr(Jh[s],n);break;case"source":qr("error",n);break;case"img":case"image":case"link":qr("error",n),qr("load",n);break;case"details":qr("toggle",n);break;case"input":aC(n,i),qr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},qr("invalid",n);break;case"textarea":AC(n,i),qr("invalid",n)}p1(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var A=i[a];a==="children"?typeof A=="string"?n.textContent!==A&&(i.suppressHydrationWarning!==!0&&Im(n.textContent,A,t),s=["children",A]):typeof A=="number"&&n.textContent!==""+A&&(i.suppressHydrationWarning!==!0&&Im(n.textContent,A,t),s=["children",""+A]):kf.hasOwnProperty(a)&&A!=null&&a==="onScroll"&&qr("scroll",n)}switch(r){case"input":wm(n),oC(n,i,!0);break;case"textarea":wm(n),lC(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=c0)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=aI(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[Pa]=e,t[zf]=n,FS(t,e,!1,!1),e.stateNode=t;e:{switch(a=m1(r,n),r){case"dialog":qr("cancel",t),qr("close",t),s=n;break;case"iframe":case"object":case"embed":qr("load",t),s=n;break;case"video":case"audio":for(s=0;s<Jh.length;s++)qr(Jh[s],t);s=n;break;case"source":qr("error",t),s=n;break;case"img":case"image":case"link":qr("error",t),qr("load",t),s=n;break;case"details":qr("toggle",t),s=n;break;case"input":aC(t,n),s=c1(t,n),qr("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=on({},n,{value:void 0}),qr("invalid",t);break;case"textarea":AC(t,n),s=h1(t,n),qr("invalid",t);break;default:s=n}p1(r,s),A=s;for(i in A)if(A.hasOwnProperty(i)){var l=A[i];i==="style"?lI(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&oI(t,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Df(t,l):typeof l=="number"&&Df(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(kf.hasOwnProperty(i)?l!=null&&i==="onScroll"&&qr("scroll",t):l!=null&&vx(t,i,l,a))}switch(r){case"input":wm(t),oC(t,n,!1);break;case"textarea":wm(t),lC(t);break;case"option":n.value!=null&&t.setAttribute("value",""+dl(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?ld(t,!!n.multiple,i,!1):n.defaultValue!=null&&ld(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=c0)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return fs(e),null;case 6:if(t&&e.stateNode!=null)US(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Ye(166));if(r=fc(Wf.current),fc(Ra.current),Sm(e)){if(n=e.stateNode,r=e.memoizedProps,n[Pa]=e,(i=n.nodeValue!==r)&&(t=ui,t!==null))switch(t.tag){case 3:Im(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Im(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Pa]=e,e.stateNode=n}return fs(e),null;case 13:if(zr(sn),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Xr&&Ai!==null&&e.mode&1&&!(e.flags&128))JI(),bd(),e.flags|=98560,i=!1;else if(i=Sm(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(Ye(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ye(317));i[Pa]=e}else bd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;fs(e),i=!1}else na!==null&&(J1(na),na=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||sn.current&1?Ln===0&&(Ln=3):eb())),e.updateQueue!==null&&(e.flags|=4),fs(e),null);case 4:return Cd(),H1(t,e),t===null&&qf(e.stateNode.containerInfo),fs(e),null;case 10:return kx(e.type._context),fs(e),null;case 17:return Ws(e.type)&&u0(),fs(e),null;case 19:if(zr(sn),i=e.memoizedState,i===null)return fs(e),null;if(n=(e.flags&128)!==0,a=i.rendering,a===null)if(n)Ih(i,!1);else{if(Ln!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=v0(t),a!==null){for(e.flags|=128,Ih(i,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Mr(sn,sn.current&1|2),e.child}t=t.sibling}i.tail!==null&&yn()>Ed&&(e.flags|=128,n=!0,Ih(i,!1),e.lanes=4194304)}else{if(!n)if(t=v0(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Ih(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Xr)return fs(e),null}else 2*yn()-i.renderingStartTime>Ed&&r!==1073741824&&(e.flags|=128,n=!0,Ih(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(r=i.last,r!==null?r.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=yn(),e.sibling=null,r=sn.current,Mr(sn,n?r&1|2:r&1),e):(fs(e),null);case 22:case 23:return Zx(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?oi&1073741824&&(fs(e),e.subtreeFlags&6&&(e.flags|=8192)):fs(e),null;case 24:return null;case 25:return null}throw Error(Ye(156,e.tag))}function Tj(t,e){switch(Px(e),e.tag){case 1:return Ws(e.type)&&u0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Cd(),zr($s),zr(Cs),Hx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Mx(e),null;case 13:if(zr(sn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ye(340));bd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return zr(sn),null;case 4:return Cd(),null;case 10:return kx(e.type._context),null;case 22:case 23:return Zx(),null;case 24:return null;default:return null}}var Um=!1,bs=!1,Uj=typeof WeakSet=="function"?WeakSet:Set,xt=null;function id(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){dn(t,e,n)}else r.current=null}function V1(t,e,r){try{r()}catch(n){dn(t,e,n)}}var YC=!1;function Pj(t,e){if(E1=o0,t=kI(),Tx(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,A=-1,l=-1,c=0,u=0,h=t,m=null;t:for(;;){for(var p;h!==r||s!==0&&h.nodeType!==3||(A=a+s),h!==i||n!==0&&h.nodeType!==3||(l=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(p=h.firstChild)!==null;)m=h,h=p;for(;;){if(h===t)break t;if(m===r&&++c===s&&(A=a),m===i&&++u===n&&(l=a),(p=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=p}r=A===-1||l===-1?null:{start:A,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(_1={focusedElem:t,selectionRange:r},o0=!1,xt=e;xt!==null;)if(e=xt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,xt=t;else for(;xt!==null;){e=xt;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var B=b.memoizedProps,E=b.memoizedState,y=e.stateNode,w=y.getSnapshotBeforeUpdate(e.elementType===e.type?B:ea(e.type,B),E);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ye(163))}}catch(M){dn(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,xt=t;break}xt=e.return}return b=YC,YC=!1,b}function gf(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&V1(e,r,i)}s=s.next}while(s!==n)}}function mv(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function K1(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function PS(t){var e=t.alternate;e!==null&&(t.alternate=null,PS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Pa],delete e[zf],delete e[F1],delete e[pj],delete e[mj])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function QS(t){return t.tag===5||t.tag===3||t.tag===4}function ZC(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||QS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function q1(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=c0));else if(n!==4&&(t=t.child,t!==null))for(q1(t,e,r),t=t.sibling;t!==null;)q1(t,e,r),t=t.sibling}function G1(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(G1(t,e,r),t=t.sibling;t!==null;)G1(t,e,r),t=t.sibling}var ts=null,ra=!1;function bA(t,e,r){for(r=r.child;r!==null;)jS(t,e,r),r=r.sibling}function jS(t,e,r){if(Da&&typeof Da.onCommitFiberUnmount=="function")try{Da.onCommitFiberUnmount(Av,r)}catch{}switch(r.tag){case 5:bs||id(r,e);case 6:var n=ts,s=ra;ts=null,bA(t,e,r),ts=n,ra=s,ts!==null&&(ra?(t=ts,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):ts.removeChild(r.stateNode));break;case 18:ts!==null&&(ra?(t=ts,r=r.stateNode,t.nodeType===8?Yy(t.parentNode,r):t.nodeType===1&&Yy(t,r),Hf(t)):Yy(ts,r.stateNode));break;case 4:n=ts,s=ra,ts=r.stateNode.containerInfo,ra=!0,bA(t,e,r),ts=n,ra=s;break;case 0:case 11:case 14:case 15:if(!bs&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&V1(r,e,a),s=s.next}while(s!==n)}bA(t,e,r);break;case 1:if(!bs&&(id(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(A){dn(r,e,A)}bA(t,e,r);break;case 21:bA(t,e,r);break;case 22:r.mode&1?(bs=(n=bs)||r.memoizedState!==null,bA(t,e,r),bs=n):bA(t,e,r);break;default:bA(t,e,r)}}function e5(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Uj),e.forEach(function(n){var s=Hj.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Wi(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,a=e,A=a;e:for(;A!==null;){switch(A.tag){case 5:ts=A.stateNode,ra=!1;break e;case 3:ts=A.stateNode.containerInfo,ra=!0;break e;case 4:ts=A.stateNode.containerInfo,ra=!0;break e}A=A.return}if(ts===null)throw Error(Ye(160));jS(i,a,s),ts=null,ra=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){dn(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)LS(e,t),e=e.sibling}function LS(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wi(e,t),Sa(t),n&4){try{gf(3,t,t.return),mv(3,t)}catch(B){dn(t,t.return,B)}try{gf(5,t,t.return)}catch(B){dn(t,t.return,B)}}break;case 1:Wi(e,t),Sa(t),n&512&&r!==null&&id(r,r.return);break;case 5:if(Wi(e,t),Sa(t),n&512&&r!==null&&id(r,r.return),t.flags&32){var s=t.stateNode;try{Df(s,"")}catch(B){dn(t,t.return,B)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=r!==null?r.memoizedProps:i,A=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{A==="input"&&i.type==="radio"&&i.name!=null&&sI(s,i),m1(A,a);var c=m1(A,i);for(a=0;a<l.length;a+=2){var u=l[a],h=l[a+1];u==="style"?lI(s,h):u==="dangerouslySetInnerHTML"?oI(s,h):u==="children"?Df(s,h):vx(s,u,h,c)}switch(A){case"input":u1(s,i);break;case"textarea":iI(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?ld(s,!!i.multiple,p,!1):m!==!!i.multiple&&(i.defaultValue!=null?ld(s,!!i.multiple,i.defaultValue,!0):ld(s,!!i.multiple,i.multiple?[]:"",!1))}s[zf]=i}catch(B){dn(t,t.return,B)}}break;case 6:if(Wi(e,t),Sa(t),n&4){if(t.stateNode===null)throw Error(Ye(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(B){dn(t,t.return,B)}}break;case 3:if(Wi(e,t),Sa(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Hf(e.containerInfo)}catch(B){dn(t,t.return,B)}break;case 4:Wi(e,t),Sa(t);break;case 13:Wi(e,t),Sa(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Xx=yn())),n&4&&e5(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(bs=(c=bs)||u,Wi(e,t),bs=c):Wi(e,t),Sa(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(xt=t,u=t.child;u!==null;){for(h=xt=u;xt!==null;){switch(m=xt,p=m.child,m.tag){case 0:case 11:case 14:case 15:gf(4,m,m.return);break;case 1:id(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(B){dn(n,r,B)}}break;case 5:id(m,m.return);break;case 22:if(m.memoizedState!==null){r5(h);continue}}p!==null?(p.return=m,xt=p):r5(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(A=h.stateNode,l=h.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,A.style.display=AI("display",a))}catch(B){dn(t,t.return,B)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(B){dn(t,t.return,B)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Wi(e,t),Sa(t),n&4&&e5(t);break;case 21:break;default:Wi(e,t),Sa(t)}}function Sa(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(QS(r)){var n=r;break e}r=r.return}throw Error(Ye(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Df(s,""),n.flags&=-33);var i=ZC(t);G1(t,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,A=ZC(t);q1(t,A,a);break;default:throw Error(Ye(161))}}catch(l){dn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Qj(t,e,r){xt=t,kS(t)}function kS(t,e,r){for(var n=(t.mode&1)!==0;xt!==null;){var s=xt,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||Um;if(!a){var A=s.alternate,l=A!==null&&A.memoizedState!==null||bs;A=Um;var c=bs;if(Um=a,(bs=l)&&!c)for(xt=s;xt!==null;)a=xt,l=a.child,a.tag===22&&a.memoizedState!==null?n5(s):l!==null?(l.return=a,xt=l):n5(s);for(;i!==null;)xt=i,kS(i),i=i.sibling;xt=s,Um=A,bs=c}t5(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,xt=i):t5(t)}}function t5(t){for(;xt!==null;){var e=xt;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:bs||mv(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!bs)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:ea(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&RC(e,i,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}RC(e,a,r)}break;case 5:var A=e.stateNode;if(r===null&&e.flags&4){r=A;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Hf(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ye(163))}bs||e.flags&512&&K1(e)}catch(m){dn(e,e.return,m)}}if(e===t){xt=null;break}if(r=e.sibling,r!==null){r.return=e.return,xt=r;break}xt=e.return}}function r5(t){for(;xt!==null;){var e=xt;if(e===t){xt=null;break}var r=e.sibling;if(r!==null){r.return=e.return,xt=r;break}xt=e.return}}function n5(t){for(;xt!==null;){var e=xt;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{mv(4,e)}catch(l){dn(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(l){dn(e,s,l)}}var i=e.return;try{K1(e)}catch(l){dn(e,i,l)}break;case 5:var a=e.return;try{K1(e)}catch(l){dn(e,a,l)}}}catch(l){dn(e,e.return,l)}if(e===t){xt=null;break}var A=e.sibling;if(A!==null){A.return=e.return,xt=A;break}xt=e.return}}var jj=Math.ceil,x0=Ko.ReactCurrentDispatcher,Wx=Ko.ReactCurrentOwner,ji=Ko.ReactCurrentBatchConfig,hr=0,Gn=null,Sn=null,ls=0,oi=0,ad=Cl(0),Ln=0,Zf=null,Fc=0,gv=0,Jx=0,vf=null,qs=null,Xx=0,Ed=1/0,yo=null,b0=!1,z1=null,tl=null,Pm=!1,KA=null,B0=0,yf=0,$1=null,Qg=-1,jg=0;function Ps(){return hr&6?yn():Qg!==-1?Qg:Qg=yn()}function rl(t){return t.mode&1?hr&2&&ls!==0?ls&-ls:vj.transition!==null?(jg===0&&(jg=xI()),jg):(t=Sr,t!==0||(t=window.event,t=t===void 0?16:II(t.type)),t):1}function ia(t,e,r,n){if(50<yf)throw yf=0,$1=null,Error(Ye(185));Cp(t,r,n),(!(hr&2)||t!==Gn)&&(t===Gn&&(!(hr&2)&&(gv|=r),Ln===4&&jA(t,ls)),Js(t,n),r===1&&hr===0&&!(e.mode&1)&&(Ed=yn()+500,hv&&Nl()))}function Js(t,e){var r=t.callbackNode;vQ(t,e);var n=a0(t,t===Gn?ls:0);if(n===0)r!==null&&dC(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&dC(r),e===1)t.tag===0?gj(s5.bind(null,t)):zI(s5.bind(null,t)),hj(function(){!(hr&6)&&Nl()}),r=null;else{switch(bI(n)){case 1:r=Bx;break;case 4:r=yI;break;case 16:r=i0;break;case 536870912:r=wI;break;default:r=i0}r=qS(r,DS.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function DS(t,e){if(Qg=-1,jg=0,hr&6)throw Error(Ye(327));var r=t.callbackNode;if(fd()&&t.callbackNode!==r)return null;var n=a0(t,t===Gn?ls:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=C0(t,n);else{e=n;var s=hr;hr|=2;var i=OS();(Gn!==t||ls!==e)&&(yo=null,Ed=yn()+500,vc(t,e));do try{Dj();break}catch(A){RS(t,A)}while(!0);Lx(),x0.current=i,hr=s,Sn!==null?e=0:(Gn=null,ls=0,e=Ln)}if(e!==0){if(e===2&&(s=x1(t),s!==0&&(n=s,e=W1(t,s))),e===1)throw r=Zf,vc(t,0),jA(t,n),Js(t,yn()),r;if(e===6)jA(t,n);else{if(s=t.current.alternate,!(n&30)&&!Lj(s)&&(e=C0(t,n),e===2&&(i=x1(t),i!==0&&(n=i,e=W1(t,i))),e===1))throw r=Zf,vc(t,0),jA(t,n),Js(t,yn()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(Ye(345));case 2:rc(t,qs,yo);break;case 3:if(jA(t,n),(n&130023424)===n&&(e=Xx+500-yn(),10<e)){if(a0(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Ps(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=S1(rc.bind(null,t,qs,yo),e);break}rc(t,qs,yo);break;case 4:if(jA(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var a=31-sa(n);i=1<<a,a=e[a],a>s&&(s=a),n&=~i}if(n=s,n=yn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*jj(n/1960))-n,10<n){t.timeoutHandle=S1(rc.bind(null,t,qs,yo),n);break}rc(t,qs,yo);break;case 5:rc(t,qs,yo);break;default:throw Error(Ye(329))}}}return Js(t,yn()),t.callbackNode===r?DS.bind(null,t):null}function W1(t,e){var r=vf;return t.current.memoizedState.isDehydrated&&(vc(t,e).flags|=256),t=C0(t,e),t!==2&&(e=qs,qs=r,e!==null&&J1(e)),t}function J1(t){qs===null?qs=t:qs.push.apply(qs,t)}function Lj(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!oa(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function jA(t,e){for(e&=~Jx,e&=~gv,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-sa(e),n=1<<r;t[r]=-1,e&=~n}}function s5(t){if(hr&6)throw Error(Ye(327));fd();var e=a0(t,0);if(!(e&1))return Js(t,yn()),null;var r=C0(t,e);if(t.tag!==0&&r===2){var n=x1(t);n!==0&&(e=n,r=W1(t,n))}if(r===1)throw r=Zf,vc(t,0),jA(t,e),Js(t,yn()),r;if(r===6)throw Error(Ye(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,rc(t,qs,yo),Js(t,yn()),null}function Yx(t,e){var r=hr;hr|=1;try{return t(e)}finally{hr=r,hr===0&&(Ed=yn()+500,hv&&Nl())}}function Tc(t){KA!==null&&KA.tag===0&&!(hr&6)&&fd();var e=hr;hr|=1;var r=ji.transition,n=Sr;try{if(ji.transition=null,Sr=1,t)return t()}finally{Sr=n,ji.transition=r,hr=e,!(hr&6)&&Nl()}}function Zx(){oi=ad.current,zr(ad)}function vc(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,dj(r)),Sn!==null)for(r=Sn.return;r!==null;){var n=r;switch(Px(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&u0();break;case 3:Cd(),zr($s),zr(Cs),Hx();break;case 5:Mx(n);break;case 4:Cd();break;case 13:zr(sn);break;case 19:zr(sn);break;case 10:kx(n.type._context);break;case 22:case 23:Zx()}r=r.return}if(Gn=t,Sn=t=nl(t.current,null),ls=oi=e,Ln=0,Zf=null,Jx=gv=Fc=0,qs=vf=null,hc!==null){for(e=0;e<hc.length;e++)if(r=hc[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}hc=null}return t}function RS(t,e){do{var r=Sn;try{if(Lx(),Tg.current=w0,y0){for(var n=an.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}y0=!1}if(Sc=0,qn=Pn=an=null,mf=!1,Jf=0,Wx.current=null,r===null||r.return===null){Ln=1,Zf=e,Sn=null;break}e:{var i=t,a=r.return,A=r,l=e;if(e=ls,A.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=A,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=qC(a);if(p!==null){p.flags&=-257,GC(p,a,A,i,e),p.mode&1&&KC(i,c,e),e=p,l=c;var b=e.updateQueue;if(b===null){var B=new Set;B.add(l),e.updateQueue=B}else b.add(l);break e}else{if(!(e&1)){KC(i,c,e),eb();break e}l=Error(Ye(426))}}else if(Xr&&A.mode&1){var E=qC(a);if(E!==null){!(E.flags&65536)&&(E.flags|=256),GC(E,a,A,i,e),Qx(Nd(l,A));break e}}i=l=Nd(l,A),Ln!==4&&(Ln=2),vf===null?vf=[i]:vf.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=bS(i,l,e);DC(i,y);break e;case 1:A=l;var w=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(tl===null||!tl.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var M=BS(i,A,e);DC(i,M);break e}}i=i.return}while(i!==null)}HS(r)}catch(R){e=R,Sn===r&&r!==null&&(Sn=r=r.return);continue}break}while(!0)}function OS(){var t=x0.current;return x0.current=w0,t===null?w0:t}function eb(){(Ln===0||Ln===3||Ln===2)&&(Ln=4),Gn===null||!(Fc&268435455)&&!(gv&268435455)||jA(Gn,ls)}function C0(t,e){var r=hr;hr|=2;var n=OS();(Gn!==t||ls!==e)&&(yo=null,vc(t,e));do try{kj();break}catch(s){RS(t,s)}while(!0);if(Lx(),hr=r,x0.current=n,Sn!==null)throw Error(Ye(261));return Gn=null,ls=0,Ln}function kj(){for(;Sn!==null;)MS(Sn)}function Dj(){for(;Sn!==null&&!lQ();)MS(Sn)}function MS(t){var e=KS(t.alternate,t,oi);t.memoizedProps=t.pendingProps,e===null?HS(t):Sn=e,Wx.current=null}function HS(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Tj(r,e),r!==null){r.flags&=32767,Sn=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ln=6,Sn=null;return}}else if(r=Fj(r,e,oi),r!==null){Sn=r;return}if(e=e.sibling,e!==null){Sn=e;return}Sn=e=t}while(e!==null);Ln===0&&(Ln=5)}function rc(t,e,r){var n=Sr,s=ji.transition;try{ji.transition=null,Sr=1,Rj(t,e,r,n)}finally{ji.transition=s,Sr=n}return null}function Rj(t,e,r,n){do fd();while(KA!==null);if(hr&6)throw Error(Ye(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Ye(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(yQ(t,i),t===Gn&&(Sn=Gn=null,ls=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Pm||(Pm=!0,qS(i0,function(){return fd(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=ji.transition,ji.transition=null;var a=Sr;Sr=1;var A=hr;hr|=4,Wx.current=null,Pj(t,r),LS(r,t),ij(_1),o0=!!E1,_1=E1=null,t.current=r,Qj(r),cQ(),hr=A,Sr=a,ji.transition=i}else t.current=r;if(Pm&&(Pm=!1,KA=t,B0=s),i=t.pendingLanes,i===0&&(tl=null),hQ(r.stateNode),Js(t,yn()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(b0)throw b0=!1,t=z1,z1=null,t;return B0&1&&t.tag!==0&&fd(),i=t.pendingLanes,i&1?t===$1?yf++:(yf=0,$1=t):yf=0,Nl(),null}function fd(){if(KA!==null){var t=bI(B0),e=ji.transition,r=Sr;try{if(ji.transition=null,Sr=16>t?16:t,KA===null)var n=!1;else{if(t=KA,KA=null,B0=0,hr&6)throw Error(Ye(331));var s=hr;for(hr|=4,xt=t.current;xt!==null;){var i=xt,a=i.child;if(xt.flags&16){var A=i.deletions;if(A!==null){for(var l=0;l<A.length;l++){var c=A[l];for(xt=c;xt!==null;){var u=xt;switch(u.tag){case 0:case 11:case 15:gf(8,u,i)}var h=u.child;if(h!==null)h.return=u,xt=h;else for(;xt!==null;){u=xt;var m=u.sibling,p=u.return;if(PS(u),u===c){xt=null;break}if(m!==null){m.return=p,xt=m;break}xt=p}}}var b=i.alternate;if(b!==null){var B=b.child;if(B!==null){b.child=null;do{var E=B.sibling;B.sibling=null,B=E}while(B!==null)}}xt=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,xt=a;else e:for(;xt!==null;){if(i=xt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:gf(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,xt=y;break e}xt=i.return}}var w=t.current;for(xt=w;xt!==null;){a=xt;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,xt=S;else e:for(a=w;xt!==null;){if(A=xt,A.flags&2048)try{switch(A.tag){case 0:case 11:case 15:mv(9,A)}}catch(R){dn(A,A.return,R)}if(A===a){xt=null;break e}var M=A.sibling;if(M!==null){M.return=A.return,xt=M;break e}xt=A.return}}if(hr=s,Nl(),Da&&typeof Da.onPostCommitFiberRoot=="function")try{Da.onPostCommitFiberRoot(Av,t)}catch{}n=!0}return n}finally{Sr=r,ji.transition=e}}return!1}function i5(t,e,r){e=Nd(r,e),e=bS(t,e,1),t=el(t,e,1),e=Ps(),t!==null&&(Cp(t,1,e),Js(t,e))}function dn(t,e,r){if(t.tag===3)i5(t,t,r);else for(;e!==null;){if(e.tag===3){i5(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(tl===null||!tl.has(n))){t=Nd(r,t),t=BS(e,t,1),e=el(e,t,1),t=Ps(),e!==null&&(Cp(e,1,t),Js(e,t));break}}e=e.return}}function Oj(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Ps(),t.pingedLanes|=t.suspendedLanes&r,Gn===t&&(ls&r)===r&&(Ln===4||Ln===3&&(ls&130023424)===ls&&500>yn()-Xx?vc(t,0):Jx|=r),Js(t,e)}function VS(t,e){e===0&&(t.mode&1?(e=Bm,Bm<<=1,!(Bm&130023424)&&(Bm=4194304)):e=1);var r=Ps();t=ko(t,e),t!==null&&(Cp(t,e,r),Js(t,r))}function Mj(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),VS(t,r)}function Hj(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Ye(314))}n!==null&&n.delete(e),VS(t,r)}var KS;KS=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||$s.current)Gs=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Gs=!1,Sj(t,e,r);Gs=!!(t.flags&131072)}else Gs=!1,Xr&&e.flags&1048576&&$I(e,f0,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Pg(t,e),t=e.pendingProps;var s=xd(e,Cs.current);hd(e,r),s=Kx(null,e,n,t,s,r);var i=qx();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ws(n)?(i=!0,d0(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Rx(e),s.updater=pv,e.stateNode=s,s._reactInternals=e,L1(e,n,t,r),e=R1(null,e,n,!0,i,r)):(e.tag=0,Xr&&i&&Ux(e),Ts(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Pg(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=Kj(n),t=ea(n,t),s){case 0:e=D1(null,e,n,t,r);break e;case 1:e=WC(null,e,n,t,r);break e;case 11:e=zC(null,e,n,t,r);break e;case 14:e=$C(null,e,n,ea(n.type,t),r);break e}throw Error(Ye(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:ea(n,s),D1(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:ea(n,s),WC(t,e,n,s,r);case 3:e:{if(_S(e),t===null)throw Error(Ye(387));n=e.pendingProps,i=e.memoizedState,s=i.element,eS(t,e),g0(e,n,null,r);var a=e.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Nd(Error(Ye(423)),e),e=JC(t,e,n,r,s);break e}else if(n!==s){s=Nd(Error(Ye(424)),e),e=JC(t,e,n,r,s);break e}else for(Ai=ZA(e.stateNode.containerInfo.firstChild),ui=e,Xr=!0,na=null,r=YI(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(bd(),n===s){e=Do(t,e,r);break e}Ts(t,e,n,r)}e=e.child}return e;case 5:return tS(e),t===null&&P1(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,I1(n,s)?a=null:i!==null&&I1(n,i)&&(e.flags|=32),ES(t,e),Ts(t,e,a,r),e.child;case 6:return t===null&&P1(e),null;case 13:return IS(t,e,r);case 4:return Ox(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Bd(e,null,n,r):Ts(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:ea(n,s),zC(t,e,n,s,r);case 7:return Ts(t,e,e.pendingProps,r),e.child;case 8:return Ts(t,e,e.pendingProps.children,r),e.child;case 12:return Ts(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Mr(p0,n._currentValue),n._currentValue=a,i!==null)if(oa(i.value,a)){if(i.children===s.children&&!$s.current){e=Do(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var A=i.dependencies;if(A!==null){a=i.child;for(var l=A.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=Io(-1,r&-r),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),Q1(i.return,r,e),A.lanes|=r;break}l=l.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(Ye(341));a.lanes|=r,A=a.alternate,A!==null&&(A.lanes|=r),Q1(a,r,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Ts(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,hd(e,r),s=ki(s),n=n(s),e.flags|=1,Ts(t,e,n,r),e.child;case 14:return n=e.type,s=ea(n,e.pendingProps),s=ea(n.type,s),$C(t,e,n,s,r);case 15:return CS(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:ea(n,s),Pg(t,e),e.tag=1,Ws(n)?(t=!0,d0(e)):t=!1,hd(e,r),xS(e,n,s),L1(e,n,s,r),R1(null,e,n,!0,t,r);case 19:return SS(t,e,r);case 22:return NS(t,e,r)}throw Error(Ye(156,e.tag))};function qS(t,e){return vI(t,e)}function Vj(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ti(t,e,r,n){return new Vj(t,e,r,n)}function tb(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Kj(t){if(typeof t=="function")return tb(t)?1:0;if(t!=null){if(t=t.$$typeof,t===wx)return 11;if(t===xx)return 14}return 2}function nl(t,e){var r=t.alternate;return r===null?(r=Ti(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Lg(t,e,r,n,s,i){var a=2;if(n=t,typeof t=="function")tb(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Ju:return yc(r.children,s,i,e);case yx:a=8,s|=8;break;case a1:return t=Ti(12,r,e,s|2),t.elementType=a1,t.lanes=i,t;case o1:return t=Ti(13,r,e,s),t.elementType=o1,t.lanes=i,t;case A1:return t=Ti(19,r,e,s),t.elementType=A1,t.lanes=i,t;case tI:return vv(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Z_:a=10;break e;case eI:a=9;break e;case wx:a=11;break e;case xx:a=14;break e;case TA:a=16,n=null;break e}throw Error(Ye(130,t==null?t:typeof t,""))}return e=Ti(a,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function yc(t,e,r,n){return t=Ti(7,t,n,e),t.lanes=r,t}function vv(t,e,r,n){return t=Ti(22,t,n,e),t.elementType=tI,t.lanes=r,t.stateNode={isHidden:!1},t}function aw(t,e,r){return t=Ti(6,t,null,e),t.lanes=r,t}function ow(t,e,r){return e=Ti(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function qj(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=My(0),this.expirationTimes=My(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=My(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function rb(t,e,r,n,s,i,a,A,l){return t=new qj(t,e,r,A,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ti(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rx(i),t}function Gj(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wu,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function GS(t){if(!t)return hl;t=t._reactInternals;e:{if(Hc(t)!==t||t.tag!==1)throw Error(Ye(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ws(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ye(171))}if(t.tag===1){var r=t.type;if(Ws(r))return GI(t,r,e)}return e}function zS(t,e,r,n,s,i,a,A,l){return t=rb(r,n,!0,t,s,i,a,A,l),t.context=GS(null),r=t.current,n=Ps(),s=rl(r),i=Io(n,s),i.callback=e??null,el(r,i,s),t.current.lanes=s,Cp(t,s,n),Js(t,n),t}function yv(t,e,r,n){var s=e.current,i=Ps(),a=rl(s);return r=GS(r),e.context===null?e.context=r:e.pendingContext=r,e=Io(i,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=el(s,e,a),t!==null&&(ia(t,s,a,i),Fg(t,s,a)),a}function N0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function a5(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function nb(t,e){a5(t,e),(t=t.alternate)&&a5(t,e)}function zj(){return null}var $S=typeof reportError=="function"?reportError:function(t){console.error(t)};function sb(t){this._internalRoot=t}wv.prototype.render=sb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ye(409));yv(t,e,null,null)};wv.prototype.unmount=sb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Tc(function(){yv(null,t,null,null)}),e[Lo]=null}};function wv(t){this._internalRoot=t}wv.prototype.unstable_scheduleHydration=function(t){if(t){var e=NI();t={blockedOn:null,target:t,priority:e};for(var r=0;r<QA.length&&e!==0&&e<QA[r].priority;r++);QA.splice(r,0,t),r===0&&_I(t)}};function ib(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function o5(){}function $j(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var c=N0(a);i.call(c)}}var a=zS(e,n,t,0,null,!1,!1,"",o5);return t._reactRootContainer=a,t[Lo]=a.current,qf(t.nodeType===8?t.parentNode:t),Tc(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var A=n;n=function(){var c=N0(l);A.call(c)}}var l=rb(t,0,!1,null,null,!1,!1,"",o5);return t._reactRootContainer=l,t[Lo]=l.current,qf(t.nodeType===8?t.parentNode:t),Tc(function(){yv(e,l,r,n)}),l}function bv(t,e,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var A=s;s=function(){var l=N0(a);A.call(l)}}yv(e,a,t,s)}else a=$j(r,e,t,s,n);return N0(a)}BI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Wh(e.pendingLanes);r!==0&&(Cx(e,r|1),Js(e,yn()),!(hr&6)&&(Ed=yn()+500,Nl()))}break;case 13:Tc(function(){var n=ko(t,1);if(n!==null){var s=Ps();ia(n,t,1,s)}}),nb(t,1)}};Nx=function(t){if(t.tag===13){var e=ko(t,134217728);if(e!==null){var r=Ps();ia(e,t,134217728,r)}nb(t,134217728)}};CI=function(t){if(t.tag===13){var e=rl(t),r=ko(t,e);if(r!==null){var n=Ps();ia(r,t,e,n)}nb(t,e)}};NI=function(){return Sr};EI=function(t,e){var r=Sr;try{return Sr=t,e()}finally{Sr=r}};v1=function(t,e,r){switch(e){case"input":if(u1(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=dv(n);if(!s)throw Error(Ye(90));nI(n),u1(n,s)}}}break;case"textarea":iI(t,r);break;case"select":e=r.value,e!=null&&ld(t,!!r.multiple,e,!1)}};dI=Yx;hI=Tc;var Wj={usingClientEntryPoint:!1,Events:[Ep,ed,dv,cI,uI,Yx]},Sh={findFiberByHostInstance:dc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Jj={bundleType:Sh.bundleType,version:Sh.version,rendererPackageName:Sh.rendererPackageName,rendererConfig:Sh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ko.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=mI(t),t===null?null:t.stateNode},findFiberByHostInstance:Sh.findFiberByHostInstance||zj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qm.isDisabled&&Qm.supportsFiber)try{Av=Qm.inject(Jj),Da=Qm}catch{}}pi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wj;pi.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ib(e))throw Error(Ye(200));return Gj(t,e,null,r)};pi.createRoot=function(t,e){if(!ib(t))throw Error(Ye(299));var r=!1,n="",s=$S;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=rb(t,1,!1,null,null,r,!1,n,s),t[Lo]=e.current,qf(t.nodeType===8?t.parentNode:t),new sb(e)};pi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ye(188)):(t=Object.keys(t).join(","),Error(Ye(268,t)));return t=mI(e),t=t===null?null:t.stateNode,t};pi.flushSync=function(t){return Tc(t)};pi.hydrate=function(t,e,r){if(!xv(e))throw Error(Ye(200));return bv(null,t,e,!0,r)};pi.hydrateRoot=function(t,e,r){if(!ib(t))throw Error(Ye(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=$S;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=zS(e,null,t,1,r??null,s,!1,i,a),t[Lo]=e.current,qf(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new wv(e)};pi.render=function(t,e,r){if(!xv(e))throw Error(Ye(200));return bv(null,t,e,!1,r)};pi.unmountComponentAtNode=function(t){if(!xv(t))throw Error(Ye(40));return t._reactRootContainer?(Tc(function(){bv(null,null,t,!1,function(){t._reactRootContainer=null,t[Lo]=null})}),!0):!1};pi.unstable_batchedUpdates=Yx;pi.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!xv(r))throw Error(Ye(200));if(t==null||t._reactInternals===void 0)throw Error(Ye(38));return bv(t,e,r,!1,n)};pi.version="18.3.1-next-f1338f8080-20240426";function WS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(WS)}catch(t){console.error(t)}}WS(),W_.exports=pi;var _d=W_.exports,A5=_d;s1.createRoot=A5.createRoot,s1.hydrateRoot=A5.hydrateRoot;/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var l5="popstate";function Xj(t={}){function e(n,s){let{pathname:i,search:a,hash:A}=n.location;return X1("",{pathname:i,search:a,hash:A},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:ep(s)}return Zj(e,r,null,t)}function tn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Aa(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Yj(){return Math.random().toString(36).substring(2,10)}function c5(t,e){return{usr:t.state,key:t.key,idx:e}}function X1(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Hd(e):e,state:r,key:e&&e.key||n||Yj()}}function ep({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Hd(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function Zj(t,e,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,A="POP",l=null,c=u();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function u(){return(a.state||{idx:null}).idx}function h(){A="POP";let E=u(),y=E==null?null:E-c;c=E,l&&l({action:A,location:B.location,delta:y})}function m(E,y){A="PUSH";let w=X1(B.location,E,y);c=u()+1;let S=c5(w,c),M=B.createHref(w);try{a.pushState(S,"",M)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;s.location.assign(M)}i&&l&&l({action:A,location:B.location,delta:1})}function p(E,y){A="REPLACE";let w=X1(B.location,E,y);c=u();let S=c5(w,c),M=B.createHref(w);a.replaceState(S,"",M),i&&l&&l({action:A,location:B.location,delta:0})}function b(E){return eL(E)}let B={get action(){return A},get location(){return t(s,a)},listen(E){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(l5,h),l=E,()=>{s.removeEventListener(l5,h),l=null}},createHref(E){return e(s,E)},createURL:b,encodeLocation(E){let y=b(E);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:m,replace:p,go(E){return a.go(E)}};return B}function eL(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),tn(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:ep(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function JS(t,e,r="/"){return tL(t,e,r,!1)}function tL(t,e,r,n){let s=typeof e=="string"?Hd(e):e,i=Ro(s.pathname||"/",r);if(i==null)return null;let a=XS(t);rL(a);let A=null;for(let l=0;A==null&&l<a.length;++l){let c=hL(i);A=uL(a[l],c,n)}return A}function XS(t,e=[],r=[],n="",s=!1){let i=(a,A,l=s,c)=>{let u={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:A,route:a};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(n)&&l)return;tn(u.relativePath.startsWith(n),`Absolute route path "${u.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(n.length)}let h=So([n,u.relativePath]),m=r.concat(u);a.children&&a.children.length>0&&(tn(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),XS(a.children,e,m,h,l)),!(a.path==null&&!a.index)&&e.push({path:h,score:lL(h,a.index),routesMeta:m})};return t.forEach((a,A)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,A);else for(let c of YS(a.path))i(a,A,!0,c)}),e}function YS(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=YS(n.join("/")),A=[];return A.push(...a.map(l=>l===""?i:[i,l].join("/"))),s&&A.push(...a),A.map(l=>t.startsWith("/")&&l===""?"/":l)}function rL(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:cL(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var nL=/^:[\w-]+$/,sL=3,iL=2,aL=1,oL=10,AL=-2,u5=t=>t==="*";function lL(t,e){let r=t.split("/"),n=r.length;return r.some(u5)&&(n+=AL),e&&(n+=iL),r.filter(s=>!u5(s)).reduce((s,i)=>s+(nL.test(i)?sL:i===""?aL:oL),n)}function cL(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function uL(t,e,r=!1){let{routesMeta:n}=t,s={},i="/",a=[];for(let A=0;A<n.length;++A){let l=n[A],c=A===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",h=E0({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),m=l.route;if(!h&&c&&r&&!n[n.length-1].route.index&&(h=E0({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:So([i,h.pathname]),pathnameBase:gL(So([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=So([i,h.pathnameBase]))}return a}function E0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=dL(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),A=s.slice(1);return{params:n.reduce((c,{paramName:u,isOptional:h},m)=>{if(u==="*"){let b=A[m]||"";a=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const p=A[m];return h&&!p?c[u]=void 0:c[u]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:a,pattern:t}}function dL(t,e=!1,r=!0){Aa(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,A,l)=>(n.push({paramName:A,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function hL(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Aa(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ro(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function fL(t,e="/"){let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?Hd(t):t;return{pathname:r?r.startsWith("/")?r:pL(r,e):e,search:vL(n),hash:yL(s)}}function pL(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Aw(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function mL(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function ab(t){let e=mL(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function ob(t,e,r,n=!1){let s;typeof t=="string"?s=Hd(t):(s={...t},tn(!s.pathname||!s.pathname.includes("?"),Aw("?","pathname","search",s)),tn(!s.pathname||!s.pathname.includes("#"),Aw("#","pathname","hash",s)),tn(!s.search||!s.search.includes("#"),Aw("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,A;if(a==null)A=r;else{let h=e.length-1;if(!n&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}A=h>=0?e[h]:"/"}let l=fL(s,A),c=a&&a!=="/"&&a.endsWith("/"),u=(i||a===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var So=t=>t.join("/").replace(/\/\/+/g,"/"),gL=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),vL=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,yL=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function wL(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var ZS=["POST","PUT","PATCH","DELETE"];new Set(ZS);var xL=["GET",...ZS];new Set(xL);var Vd=U.createContext(null);Vd.displayName="DataRouter";var Bv=U.createContext(null);Bv.displayName="DataRouterState";U.createContext(!1);var eF=U.createContext({isTransitioning:!1});eF.displayName="ViewTransition";var bL=U.createContext(new Map);bL.displayName="Fetchers";var BL=U.createContext(null);BL.displayName="Await";var ua=U.createContext(null);ua.displayName="Navigation";var Ip=U.createContext(null);Ip.displayName="Location";var da=U.createContext({outlet:null,matches:[],isDataRoute:!1});da.displayName="Route";var Ab=U.createContext(null);Ab.displayName="RouteError";function CL(t,{relative:e}={}){tn(Kd(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=U.useContext(ua),{hash:s,pathname:i,search:a}=Sp(t,{relative:e}),A=i;return r!=="/"&&(A=i==="/"?r:So([r,i])),n.createHref({pathname:A,search:a,hash:s})}function Kd(){return U.useContext(Ip)!=null}function El(){return tn(Kd(),"useLocation() may be used only in the context of a <Router> component."),U.useContext(Ip).location}var tF="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function rF(t){U.useContext(ua).static||U.useLayoutEffect(t)}function Cv(){let{isDataRoute:t}=U.useContext(da);return t?RL():NL()}function NL(){tn(Kd(),"useNavigate() may be used only in the context of a <Router> component.");let t=U.useContext(Vd),{basename:e,navigator:r}=U.useContext(ua),{matches:n}=U.useContext(da),{pathname:s}=El(),i=JSON.stringify(ab(n)),a=U.useRef(!1);return rF(()=>{a.current=!0}),U.useCallback((l,c={})=>{if(Aa(a.current,tF),!a.current)return;if(typeof l=="number"){r.go(l);return}let u=ob(l,JSON.parse(i),s,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:So([e,u.pathname])),(c.replace?r.replace:r.push)(u,c.state,c)},[e,r,i,s,t])}var EL=U.createContext(null);function _L(t){let e=U.useContext(da).outlet;return e&&U.createElement(EL.Provider,{value:t},e)}function Sp(t,{relative:e}={}){let{matches:r}=U.useContext(da),{pathname:n}=El(),s=JSON.stringify(ab(r));return U.useMemo(()=>ob(t,JSON.parse(s),n,e==="path"),[t,s,n,e])}function IL(t,e){return nF(t,e)}function nF(t,e,r,n){var y;tn(Kd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=U.useContext(ua),{matches:i}=U.useContext(da),a=i[i.length-1],A=a?a.params:{},l=a?a.pathname:"/",c=a?a.pathnameBase:"/",u=a&&a.route;{let w=u&&u.path||"";sF(l,!u||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let h=El(),m;if(e){let w=typeof e=="string"?Hd(e):e;tn(c==="/"||((y=w.pathname)==null?void 0:y.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${w.pathname}" was given in the \`location\` prop.`),m=w}else m=h;let p=m.pathname||"/",b=p;if(c!=="/"){let w=c.replace(/^\//,"").split("/");b="/"+p.replace(/^\//,"").split("/").slice(w.length).join("/")}let B=JS(t,{pathname:b});Aa(u||B!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Aa(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=PL(B&&B.map(w=>Object.assign({},w,{params:Object.assign({},A,w.params),pathname:So([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:So([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,r,n);return e&&E?U.createElement(Ip.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},E):E}function SL(){let t=DL(),e=wL(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=U.createElement(U.Fragment,null,U.createElement("p",null," Hey developer "),U.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",U.createElement("code",{style:i},"ErrorBoundary")," or"," ",U.createElement("code",{style:i},"errorElement")," prop on your route.")),U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),r?U.createElement("pre",{style:s},r):null,a)}var FL=U.createElement(SL,null),TL=class extends U.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?U.createElement(da.Provider,{value:this.props.routeContext},U.createElement(Ab.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function UL({routeContext:t,match:e,children:r}){let n=U.useContext(Vd);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),U.createElement(da.Provider,{value:t},r)}function PL(t,e=[],r=null,n=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let s=t,i=r==null?void 0:r.errors;if(i!=null){let l=s.findIndex(c=>c.route.id&&(i==null?void 0:i[c.route.id])!==void 0);tn(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,l+1))}let a=!1,A=-1;if(r)for(let l=0;l<s.length;l++){let c=s[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(A=l),c.route.id){let{loaderData:u,errors:h}=r,m=c.route.loader&&!u.hasOwnProperty(c.route.id)&&(!h||h[c.route.id]===void 0);if(c.route.lazy||m){a=!0,A>=0?s=s.slice(0,A+1):s=[s[0]];break}}}return s.reduceRight((l,c,u)=>{let h,m=!1,p=null,b=null;r&&(h=i&&c.route.id?i[c.route.id]:void 0,p=c.route.errorElement||FL,a&&(A<0&&u===0?(sF("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,b=null):A===u&&(m=!0,b=c.route.hydrateFallbackElement||null)));let B=e.concat(s.slice(0,u+1)),E=()=>{let y;return h?y=p:m?y=b:c.route.Component?y=U.createElement(c.route.Component,null):c.route.element?y=c.route.element:y=l,U.createElement(UL,{match:c,routeContext:{outlet:l,matches:B,isDataRoute:r!=null},children:y})};return r&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?U.createElement(TL,{location:r.location,revalidation:r.revalidation,component:p,error:h,children:E(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):E()},null)}function lb(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QL(t){let e=U.useContext(Vd);return tn(e,lb(t)),e}function jL(t){let e=U.useContext(Bv);return tn(e,lb(t)),e}function LL(t){let e=U.useContext(da);return tn(e,lb(t)),e}function cb(t){let e=LL(t),r=e.matches[e.matches.length-1];return tn(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function kL(){return cb("useRouteId")}function DL(){var n;let t=U.useContext(Ab),e=jL("useRouteError"),r=cb("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}function RL(){let{router:t}=QL("useNavigate"),e=cb("useNavigate"),r=U.useRef(!1);return rF(()=>{r.current=!0}),U.useCallback(async(s,i={})=>{Aa(r.current,tF),r.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var d5={};function sF(t,e,r){!e&&!d5[t]&&(d5[t]=!0,Aa(!1,r))}U.memo(OL);function OL({routes:t,future:e,state:r}){return nF(t,void 0,r,e)}function Ru({to:t,replace:e,state:r,relative:n}){tn(Kd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=U.useContext(ua);Aa(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=U.useContext(da),{pathname:a}=El(),A=Cv(),l=ob(t,ab(i),a,n==="path"),c=JSON.stringify(l);return U.useEffect(()=>{A(JSON.parse(c),{replace:e,state:r,relative:n})},[A,c,n,e,r]),null}function ML(t){return _L(t.context)}function Rr(t){tn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function HL({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:s,static:i=!1}){tn(!Kd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),A=U.useMemo(()=>({basename:a,navigator:s,static:i,future:{}}),[a,s,i]);typeof r=="string"&&(r=Hd(r));let{pathname:l="/",search:c="",hash:u="",state:h=null,key:m="default"}=r,p=U.useMemo(()=>{let b=Ro(l,a);return b==null?null:{location:{pathname:b,search:c,hash:u,state:h,key:m},navigationType:n}},[a,l,c,u,h,m,n]);return Aa(p!=null,`<Router basename="${a}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:U.createElement(ua.Provider,{value:A},U.createElement(Ip.Provider,{children:e,value:p}))}function VL({children:t,location:e}){return IL(Y1(t),e)}function Y1(t,e=[]){let r=[];return U.Children.forEach(t,(n,s)=>{if(!U.isValidElement(n))return;let i=[...e,s];if(n.type===U.Fragment){r.push.apply(r,Y1(n.props.children,i));return}tn(n.type===Rr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),tn(!n.props.index||!n.props.children,"An index route cannot have child routes.");let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Y1(n.props.children,i)),r.push(a)}),r}var kg="get",Dg="application/x-www-form-urlencoded";function Nv(t){return t!=null&&typeof t.tagName=="string"}function KL(t){return Nv(t)&&t.tagName.toLowerCase()==="button"}function qL(t){return Nv(t)&&t.tagName.toLowerCase()==="form"}function GL(t){return Nv(t)&&t.tagName.toLowerCase()==="input"}function zL(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $L(t,e){return t.button===0&&(!e||e==="_self")&&!zL(t)}var jm=null;function WL(){if(jm===null)try{new FormData(document.createElement("form"),0),jm=!1}catch{jm=!0}return jm}var JL=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function lw(t){return t!=null&&!JL.has(t)?(Aa(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Dg}"`),null):t}function XL(t,e){let r,n,s,i,a;if(qL(t)){let A=t.getAttribute("action");n=A?Ro(A,e):null,r=t.getAttribute("method")||kg,s=lw(t.getAttribute("enctype"))||Dg,i=new FormData(t)}else if(KL(t)||GL(t)&&(t.type==="submit"||t.type==="image")){let A=t.form;if(A==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||A.getAttribute("action");if(n=l?Ro(l,e):null,r=t.getAttribute("formmethod")||A.getAttribute("method")||kg,s=lw(t.getAttribute("formenctype"))||lw(A.getAttribute("enctype"))||Dg,i=new FormData(A,t),!WL()){let{name:c,type:u,value:h}=t;if(u==="image"){let m=c?`${c}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else c&&i.append(c,h)}}else{if(Nv(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=kg,n=null,s=Dg,a=t}return i&&s==="text/plain"&&(a=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ub(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function YL(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&Ro(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function ZL(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ek(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function tk(t,e,r){let n=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let a=await ZL(i,r);return a.links?a.links():[]}return[]}));return ik(n.flat(1).filter(ek).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function h5(t,e,r,n,s,i){let a=(l,c)=>r[c]?l.route.id!==r[c].route.id:!0,A=(l,c)=>{var u;return r[c].pathname!==l.pathname||((u=r[c].route.path)==null?void 0:u.endsWith("*"))&&r[c].params["*"]!==l.params["*"]};return i==="assets"?e.filter((l,c)=>a(l,c)||A(l,c)):i==="data"?e.filter((l,c)=>{var h;let u=n.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(a(l,c)||A(l,c))return!0;if(l.route.shouldRevalidate){let m=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((h=r[0])==null?void 0:h.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function rk(t,e,{includeHydrateFallback:r}={}){return nk(t.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function nk(t){return[...new Set(t)]}function sk(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function ik(t,e){let r=new Set;return new Set(e),t.reduce((n,s)=>{let i=JSON.stringify(sk(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}function iF(){let t=U.useContext(Vd);return ub(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function ak(){let t=U.useContext(Bv);return ub(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var db=U.createContext(void 0);db.displayName="FrameworkContext";function aF(){let t=U.useContext(db);return ub(t,"You must render this element inside a <HydratedRouter> element"),t}function ok(t,e){let r=U.useContext(db),[n,s]=U.useState(!1),[i,a]=U.useState(!1),{onFocus:A,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:h}=e,m=U.useRef(null);U.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let B=y=>{y.forEach(w=>{a(w.isIntersecting)})},E=new IntersectionObserver(B,{threshold:.5});return m.current&&E.observe(m.current),()=>{E.disconnect()}}},[t]),U.useEffect(()=>{if(n){let B=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(B)}}},[n]);let p=()=>{s(!0)},b=()=>{s(!1),a(!1)};return r?t!=="intent"?[i,m,{}]:[i,m,{onFocus:Fh(A,p),onBlur:Fh(l,b),onMouseEnter:Fh(c,p),onMouseLeave:Fh(u,b),onTouchStart:Fh(h,p)}]:[!1,m,{}]}function Fh(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function Ak({page:t,...e}){let{router:r}=iF(),n=U.useMemo(()=>JS(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?U.createElement(ck,{page:t,matches:n,...e}):null}function lk(t){let{manifest:e,routeModules:r}=aF(),[n,s]=U.useState([]);return U.useEffect(()=>{let i=!1;return tk(t,e,r).then(a=>{i||s(a)}),()=>{i=!0}},[t,e,r]),n}function ck({page:t,matches:e,...r}){let n=El(),{manifest:s,routeModules:i}=aF(),{basename:a}=iF(),{loaderData:A,matches:l}=ak(),c=U.useMemo(()=>h5(t,e,l,s,n,"data"),[t,e,l,s,n]),u=U.useMemo(()=>h5(t,e,l,s,n,"assets"),[t,e,l,s,n]),h=U.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let b=new Set,B=!1;if(e.forEach(y=>{var S;let w=s.routes[y.route.id];!w||!w.hasLoader||(!c.some(M=>M.route.id===y.route.id)&&y.route.id in A&&((S=i[y.route.id])!=null&&S.shouldRevalidate)||w.hasClientLoader?B=!0:b.add(y.route.id))}),b.size===0)return[];let E=YL(t,a,"data");return B&&b.size>0&&E.searchParams.set("_routes",e.filter(y=>b.has(y.route.id)).map(y=>y.route.id).join(",")),[E.pathname+E.search]},[a,A,n,s,c,e,t,i]),m=U.useMemo(()=>rk(u,s),[u,s]),p=lk(u);return U.createElement(U.Fragment,null,h.map(b=>U.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...r})),m.map(b=>U.createElement("link",{key:b,rel:"modulepreload",href:b,...r})),p.map(({key:b,link:B})=>U.createElement("link",{key:b,nonce:r.nonce,...B})))}function uk(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var oF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{oF&&(window.__reactRouterVersion="7.8.1")}catch{}function dk({basename:t,children:e,window:r}){let n=U.useRef();n.current==null&&(n.current=Xj({window:r,v5Compat:!0}));let s=n.current,[i,a]=U.useState({action:s.action,location:s.location}),A=U.useCallback(l=>{U.startTransition(()=>a(l))},[a]);return U.useLayoutEffect(()=>s.listen(A),[s,A]),U.createElement(HL,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var AF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lF=U.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:a,state:A,target:l,to:c,preventScrollReset:u,viewTransition:h,...m},p){let{basename:b}=U.useContext(ua),B=typeof c=="string"&&AF.test(c),E,y=!1;if(typeof c=="string"&&B&&(E=c,oF))try{let j=new URL(window.location.href),D=c.startsWith("//")?new URL(j.protocol+c):new URL(c),_=Ro(D.pathname,b);D.origin===j.origin&&_!=null?c=_+D.search+D.hash:y=!0}catch{Aa(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=CL(c,{relative:s}),[S,M,R]=ok(n,m),O=pk(c,{replace:a,state:A,target:l,preventScrollReset:u,relative:s,viewTransition:h});function I(j){e&&e(j),j.defaultPrevented||O(j)}let N=U.createElement("a",{...m,...R,href:E||w,onClick:y||i?e:I,ref:uk(p,M),target:l,"data-discover":!B&&r==="render"?"true":void 0});return S&&!B?U.createElement(U.Fragment,null,N,U.createElement(Ak,{page:w})):N});lF.displayName="Link";var Nr=U.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:a,viewTransition:A,children:l,...c},u){let h=Sp(a,{relative:c.relative}),m=El(),p=U.useContext(Bv),{navigator:b,basename:B}=U.useContext(ua),E=p!=null&&wk(h)&&A===!0,y=b.encodeLocation?b.encodeLocation(h).pathname:h.pathname,w=m.pathname,S=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(w=w.toLowerCase(),S=S?S.toLowerCase():null,y=y.toLowerCase()),S&&B&&(S=Ro(S,B)||S);const M=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let R=w===y||!s&&w.startsWith(y)&&w.charAt(M)==="/",O=S!=null&&(S===y||!s&&S.startsWith(y)&&S.charAt(y.length)==="/"),I={isActive:R,isPending:O,isTransitioning:E},N=R?e:void 0,j;typeof n=="function"?j=n(I):j=[n,R?"active":null,O?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let D=typeof i=="function"?i(I):i;return U.createElement(lF,{...c,"aria-current":N,className:j,ref:u,style:D,to:a,viewTransition:A},typeof l=="function"?l(I):l)});Nr.displayName="NavLink";var hk=U.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:s,state:i,method:a=kg,action:A,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:h,...m},p)=>{let b=vk(),B=yk(A,{relative:c}),E=a.toLowerCase()==="get"?"get":"post",y=typeof A=="string"&&AF.test(A),w=S=>{if(l&&l(S),S.defaultPrevented)return;S.preventDefault();let M=S.nativeEvent.submitter,R=(M==null?void 0:M.getAttribute("formmethod"))||a;b(M||S.currentTarget,{fetcherKey:e,method:R,navigate:r,replace:s,state:i,relative:c,preventScrollReset:u,viewTransition:h})};return U.createElement("form",{ref:p,method:E,action:B,onSubmit:n?l:w,...m,"data-discover":!y&&t==="render"?"true":void 0})});hk.displayName="Form";function fk(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cF(t){let e=U.useContext(Vd);return tn(e,fk(t)),e}function pk(t,{target:e,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:a}={}){let A=Cv(),l=El(),c=Sp(t,{relative:i});return U.useCallback(u=>{if($L(u,e)){u.preventDefault();let h=r!==void 0?r:ep(l)===ep(c);A(t,{replace:h,state:n,preventScrollReset:s,relative:i,viewTransition:a})}},[l,A,c,r,n,e,t,s,i,a])}var mk=0,gk=()=>`__${String(++mk)}__`;function vk(){let{router:t}=cF("useSubmit"),{basename:e}=U.useContext(ua),r=kL();return U.useCallback(async(n,s={})=>{let{action:i,method:a,encType:A,formData:l,body:c}=XL(n,e);if(s.navigate===!1){let u=s.fetcherKey||gk();await t.fetch(u,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||a,formEncType:s.encType||A,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||a,formEncType:s.encType||A,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,r])}function yk(t,{relative:e}={}){let{basename:r}=U.useContext(ua),n=U.useContext(da);tn(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...Sp(t||".",{relative:e})},a=El();if(t==null){i.search=a.search;let A=new URLSearchParams(i.search),l=A.getAll("index");if(l.some(u=>u==="")){A.delete("index"),l.filter(h=>h).forEach(h=>A.append("index",h));let u=A.toString();i.search=u?`?${u}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:So([r,i.pathname])),ep(i)}function wk(t,{relative:e}={}){let r=U.useContext(eF);tn(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=cF("useViewTransitionState"),s=Sp(t,{relative:e});if(!r.isTransitioning)return!1;let i=Ro(r.currentLocation.pathname,n)||r.currentLocation.pathname,a=Ro(r.nextLocation.pathname,n)||r.nextLocation.pathname;return E0(s.pathname,a)!=null||E0(s.pathname,i)!=null}var f5={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uF=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},xk=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],a=t[r++],A=t[r++],l=((s&7)<<18|(i&63)<<12|(a&63)<<6|A&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const i=t[r++],a=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},dF={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,A=a?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,h=(i&3)<<4|A>>4;let m=(A&15)<<2|c>>6,p=c&63;l||(p=64,a||(m=64)),n.push(r[u],r[h],r[m],r[p])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(uF(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):xk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],A=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const h=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||A==null||c==null||h==null)throw new bk;const m=i<<2|A>>4;if(n.push(m),c!==64){const p=A<<4&240|c>>2;if(n.push(p),h!==64){const b=c<<6&192|h;n.push(b)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class bk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Bk=function(t){const e=uF(t);return dF.encodeByteArray(e,!0)},_0=function(t){return Bk(t).replace(/\./g,"")},hF=function(t){try{return dF.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk=()=>Ck().__FIREBASE_DEFAULTS__,Ek=()=>{if(typeof process>"u"||typeof f5>"u")return;const t=f5.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},_k=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&hF(t[1]);return e&&JSON.parse(e)},Ev=()=>{try{return Nk()||Ek()||_k()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},fF=t=>{var e,r;return(r=(e=Ev())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},Ik=t=>{const e=fF(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},pF=()=>{var t;return(t=Ev())===null||t===void 0?void 0:t.config},mF=t=>{var e;return(e=Ev())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[_0(JSON.stringify(r)),_0(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Tk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kn())}function Uk(){var t;const e=(t=Ev())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Pk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Qk(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function jk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Lk(){const t=kn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function gF(){return!Uk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vF(){try{return typeof indexedDB=="object"}catch{return!1}}function kk(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk="FirebaseError";class qo extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=Dk,Object.setPrototypeOf(this,qo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fp.prototype.create)}}class Fp{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?Rk(i,n):"Error",A=`${this.serviceName}: ${a} (${s}).`;return new qo(s,A,n)}}function Rk(t,e){return t.replace(Ok,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const Ok=/\{\$([^}]+)}/g;function Mk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function I0(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],a=e[s];if(p5(i)&&p5(a)){if(!I0(i,a))return!1}else if(i!==a)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function p5(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Xh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,i]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Yh(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function Hk(t,e){const r=new Vk(t,e);return r.subscribe.bind(r)}class Vk{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");Kk(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=cw),s.error===void 0&&(s.error=cw),s.complete===void 0&&(s.complete=cw);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Kk(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function cw(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(t){return t&&t._delegate?t._delegate:t}class Uc{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new Sk;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zk(e))try{this.getOrInitializeService({instanceIdentifier:nc})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=nc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=nc){return this.instances.has(e)}getOptions(e=nc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,a]of this.instancesDeferred.entries()){const A=this.normalizeInstanceIdentifier(i);n===A&&a.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Gk(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=nc){return this.component?this.component.multipleInstances?e:nc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Gk(t){return t===nc?void 0:t}function zk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new qk(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ar;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ar||(Ar={}));const Wk={debug:Ar.DEBUG,verbose:Ar.VERBOSE,info:Ar.INFO,warn:Ar.WARN,error:Ar.ERROR,silent:Ar.SILENT},Jk=Ar.INFO,Xk={[Ar.DEBUG]:"log",[Ar.VERBOSE]:"log",[Ar.INFO]:"info",[Ar.WARN]:"warn",[Ar.ERROR]:"error"},Yk=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=Xk[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let hb=class{constructor(e){this.name=e,this._logLevel=Jk,this._logHandler=Yk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ar))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Wk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ar.DEBUG,...e),this._logHandler(this,Ar.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ar.VERBOSE,...e),this._logHandler(this,Ar.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ar.INFO,...e),this._logHandler(this,Ar.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ar.WARN,...e),this._logHandler(this,Ar.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ar.ERROR,...e),this._logHandler(this,Ar.ERROR,...e)}};const Zk=(t,e)=>e.some(r=>t instanceof r);let m5,g5;function eD(){return m5||(m5=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tD(){return g5||(g5=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yF=new WeakMap,Z1=new WeakMap,wF=new WeakMap,uw=new WeakMap,fb=new WeakMap;function rD(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{r(sl(t.result)),s()},a=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&yF.set(r,t)}).catch(()=>{}),fb.set(e,t),e}function nD(t){if(Z1.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{r(),s()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Z1.set(t,e)}let e2={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Z1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wF.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return sl(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function sD(t){e2=t(e2)}function iD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(dw(this),e,...r);return wF.set(n,e.sort?e.sort():[e]),sl(n)}:tD().includes(t)?function(...e){return t.apply(dw(this),e),sl(yF.get(this))}:function(...e){return sl(t.apply(dw(this),e))}}function aD(t){return typeof t=="function"?iD(t):(t instanceof IDBTransaction&&nD(t),Zk(t,eD())?new Proxy(t,e2):t)}function sl(t){if(t instanceof IDBRequest)return rD(t);if(uw.has(t))return uw.get(t);const e=aD(t);return e!==t&&(uw.set(t,e),fb.set(e,t)),e}const dw=t=>fb.get(t);function oD(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),A=sl(a);return n&&a.addEventListener("upgradeneeded",l=>{n(sl(a.result),l.oldVersion,l.newVersion,sl(a.transaction),l)}),r&&a.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),A.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),A}const AD=["get","getKey","getAll","getAllKeys","count"],lD=["put","add","delete","clear"],hw=new Map;function v5(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(hw.get(e))return hw.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=lD.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||AD.includes(r)))return;const i=async function(a,...A){const l=this.transaction(a,s?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(A.shift())),(await Promise.all([c[r](...A),s&&l.done]))[0]};return hw.set(e,i),i}sD(t=>({...t,get:(e,r,n)=>v5(e,r)||t.get(e,r,n),has:(e,r)=>!!v5(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(uD(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function uD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const t2="@firebase/app",y5="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=new hb("@firebase/app"),dD="@firebase/app-compat",hD="@firebase/analytics-compat",fD="@firebase/analytics",pD="@firebase/app-check-compat",mD="@firebase/app-check",gD="@firebase/auth",vD="@firebase/auth-compat",yD="@firebase/database",wD="@firebase/data-connect",xD="@firebase/database-compat",bD="@firebase/functions",BD="@firebase/functions-compat",CD="@firebase/installations",ND="@firebase/installations-compat",ED="@firebase/messaging",_D="@firebase/messaging-compat",ID="@firebase/performance",SD="@firebase/performance-compat",FD="@firebase/remote-config",TD="@firebase/remote-config-compat",UD="@firebase/storage",PD="@firebase/storage-compat",QD="@firebase/firestore",jD="@firebase/vertexai-preview",LD="@firebase/firestore-compat",kD="firebase",DD="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2="[DEFAULT]",RD={[t2]:"fire-core",[dD]:"fire-core-compat",[fD]:"fire-analytics",[hD]:"fire-analytics-compat",[mD]:"fire-app-check",[pD]:"fire-app-check-compat",[gD]:"fire-auth",[vD]:"fire-auth-compat",[yD]:"fire-rtdb",[wD]:"fire-data-connect",[xD]:"fire-rtdb-compat",[bD]:"fire-fn",[BD]:"fire-fn-compat",[CD]:"fire-iid",[ND]:"fire-iid-compat",[ED]:"fire-fcm",[_D]:"fire-fcm-compat",[ID]:"fire-perf",[SD]:"fire-perf-compat",[FD]:"fire-rc",[TD]:"fire-rc-compat",[UD]:"fire-gcs",[PD]:"fire-gcs-compat",[QD]:"fire-fst",[LD]:"fire-fst-compat",[jD]:"fire-vertex","fire-js":"fire-js",[kD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id=new Map,n2=new Map,s2=new Map;function w5(t,e){try{t.container.addComponent(e)}catch(r){Oo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Sd(t){const e=t.name;if(s2.has(e))return Oo.debug(`There were multiple attempts to register component ${e}.`),!1;s2.set(e,t);for(const r of Id.values())w5(r,t);for(const r of n2.values())w5(r,t);return!0}function pb(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Qa(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},il=new Fp("app","Firebase",OD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Uc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw il.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd=DD;function mb(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:r2,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw il.create("bad-app-name",{appName:String(s)});if(r||(r=pF()),!r)throw il.create("no-options");const i=Id.get(s);if(i){if(I0(r,i.options)&&I0(n,i.config))return i;throw il.create("duplicate-app",{appName:s})}const a=new $k(s);for(const l of s2.values())a.addComponent(l);const A=new MD(r,n,a);return Id.set(s,A),A}function gb(t=r2){const e=Id.get(t);if(!e&&t===r2&&pF())return mb();if(!e)throw il.create("no-app",{appName:t});return e}async function HD(t){let e=!1;const r=t.name;Id.has(r)?(e=!0,Id.delete(r)):n2.has(r)&&t.decRefCount()<=0&&(n2.delete(r),e=!0),e&&(await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function al(t,e,r){var n;let s=(n=RD[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const A=[`Unable to register library "${s}" with version "${e}":`];i&&A.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&A.push("and"),a&&A.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Oo.warn(A.join(" "));return}Sd(new Uc(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD="firebase-heartbeat-database",KD=1,tp="firebase-heartbeat-store";let fw=null;function xF(){return fw||(fw=oD(VD,KD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(tp)}catch(r){console.warn(r)}}}}).catch(t=>{throw il.create("idb-open",{originalErrorMessage:t.message})})),fw}async function qD(t){try{const r=(await xF()).transaction(tp),n=await r.objectStore(tp).get(bF(t));return await r.done,n}catch(e){if(e instanceof qo)Oo.warn(e.message);else{const r=il.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Oo.warn(r.message)}}}async function x5(t,e){try{const n=(await xF()).transaction(tp,"readwrite");await n.objectStore(tp).put(e,bF(t)),await n.done}catch(r){if(r instanceof qo)Oo.warn(r.message);else{const n=il.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Oo.warn(n.message)}}}function bF(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD=1024,zD=30*24*60*60*1e3;class $D{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new JD(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=b5();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const A=new Date(a.date).valueOf();return Date.now()-A<=zD}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Oo.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=b5(),{heartbeatsToSend:n,unsentEntries:s}=WD(this._heartbeatsCache.heartbeats),i=_0(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return Oo.warn(r),""}}}function b5(){return new Date().toISOString().substring(0,10)}function WD(t,e=GD){const r=[];let n=t.slice();for(const s of t){const i=r.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),B5(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),B5(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class JD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vF()?kk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await qD(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return x5(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return x5(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function B5(t){return _0(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD(t){Sd(new Uc("platform-logger",e=>new cD(e),"PRIVATE")),Sd(new Uc("heartbeat",e=>new $D(e),"PRIVATE")),al(t2,y5,t),al(t2,y5,"esm2017"),al("fire-js","")}XD("");function vb(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function BF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const YD=BF,CF=new Fp("auth","Firebase",BF());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0=new hb("@firebase/auth");function ZD(t,...e){S0.logLevel<=Ar.WARN&&S0.warn(`Auth (${qd}): ${t}`,...e)}function Rg(t,...e){S0.logLevel<=Ar.ERROR&&S0.error(`Auth (${qd}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(t,...e){throw yb(t,...e)}function Oa(t,...e){return yb(t,...e)}function NF(t,e,r){const n=Object.assign(Object.assign({},YD()),{[e]:r});return new Fp("auth","Firebase",n).create(e,{appName:t.name})}function Fo(t){return NF(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yb(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return CF.create(t,...e)}function Kt(t,e,...r){if(!t)throw yb(e,...r)}function Bo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Rg(e),new Error(e)}function Mo(t,e){t||Bo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function eR(){return C5()==="http:"||C5()==="https:"}function C5(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eR()||Qk()||"connection"in navigator)?navigator.onLine:!0}function rR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e,r){this.shortDelay=e,this.longDelay=r,Mo(r>e,"Short delay should be less than long delay!"),this.isMobile=Tk()||jk()}get(){return tR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(t,e){Mo(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=new Up(3e4,6e4);function _l(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Il(t,e,r,n,s={}){return _F(t,s,async()=>{let i={},a={};n&&(e==="GET"?a=n:i={body:JSON.stringify(n)});const A=Tp(Object.assign({key:t.config.apiKey},a)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return Pk()||(c.referrerPolicy="no-referrer"),EF.fetch()(IF(t,t.config.apiHost,r,A),c)})}async function _F(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},nR),e);try{const s=new aR(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Lm(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const A=i.ok?a.errorMessage:a.error.message,[l,c]=A.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lm(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Lm(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw Lm(t,"user-disabled",a);const u=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw NF(t,u,c);la(t,u)}}catch(s){if(s instanceof qo)throw s;la(t,"network-request-failed",{message:String(s)})}}async function Pp(t,e,r,n,s={}){const i=await Il(t,e,r,n,s);return"mfaPendingCredential"in i&&la(t,"multi-factor-auth-required",{_serverResponse:i}),i}function IF(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?wb(t.config,s):`${t.config.apiScheme}://${s}`}function iR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class aR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Oa(this.auth,"network-request-failed")),sR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Lm(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=Oa(t,e,n);return s.customData._tokenResponse=r,s}function N5(t){return t!==void 0&&t.enterprise!==void 0}class oR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return iR(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function AR(t,e){return Il(t,"GET","/v2/recaptchaConfig",_l(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lR(t,e){return Il(t,"POST","/v1/accounts:delete",e)}async function SF(t,e){return Il(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function cR(t,e=!1){const r=hn(t),n=await r.getIdToken(e),s=xb(n);Kt(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:wf(pw(s.auth_time)),issuedAtTime:wf(pw(s.iat)),expirationTime:wf(pw(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function pw(t){return Number(t)*1e3}function xb(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Rg("JWT malformed, contained fewer than 3 sections"),null;try{const s=hF(r);return s?JSON.parse(s):(Rg("Failed to decode base64 JWT payload"),null)}catch(s){return Rg("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function E5(t){const e=xb(t);return Kt(e,"internal-error"),Kt(typeof e.exp<"u","internal-error"),Kt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rp(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof qo&&uR(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function uR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=wf(this.lastLoginAt),this.creationTime=wf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F0(t){var e;const r=t.auth,n=await t.getIdToken(),s=await rp(t,SF(r,{idToken:n}));Kt(s==null?void 0:s.users.length,r,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?FF(i.providerUserInfo):[],A=fR(t.providerData,a),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(A!=null&&A.length),u=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:A,metadata:new a2(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function hR(t){const e=hn(t);await F0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function fR(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function FF(t){return t.map(e=>{var{providerId:r}=e,n=vb(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pR(t,e){const r=await _F(t,{},async()=>{const n=Tp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=IF(t,s,"/v1/token",`key=${i}`),A=await t._getAdditionalHeaders();return A["Content-Type"]="application/x-www-form-urlencoded",EF.fetch()(a,{method:"POST",headers:A,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function mR(t,e){return Il(t,"POST","/v2/accounts:revokeToken",_l(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Kt(e.idToken,"internal-error"),Kt(typeof e.idToken<"u","internal-error"),Kt(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):E5(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Kt(e.length!==0,"internal-error");const r=E5(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Kt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await pR(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,a=new pd;return n&&(Kt(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),s&&(Kt(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(Kt(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pd,this.toJSON())}_performRefresh(){return Bo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(t,e){Kt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Co{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,i=vb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new a2(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await rp(this,this.stsTokenManager.getToken(this.auth,e));return Kt(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return cR(this,e)}reload(){return hR(this)}_assign(e){this!==e&&(Kt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Co(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Kt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await F0(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qa(this.auth.app))return Promise.reject(Fo(this.auth));const e=await this.getIdToken();return await rp(this,lR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,i,a,A,l,c,u;const h=(n=r.displayName)!==null&&n!==void 0?n:void 0,m=(s=r.email)!==null&&s!==void 0?s:void 0,p=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,b=(a=r.photoURL)!==null&&a!==void 0?a:void 0,B=(A=r.tenantId)!==null&&A!==void 0?A:void 0,E=(l=r._redirectEventId)!==null&&l!==void 0?l:void 0,y=(c=r.createdAt)!==null&&c!==void 0?c:void 0,w=(u=r.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:S,emailVerified:M,isAnonymous:R,providerData:O,stsTokenManager:I}=r;Kt(S&&I,e,"internal-error");const N=pd.fromJSON(this.name,I);Kt(typeof S=="string",e,"internal-error"),BA(h,e.name),BA(m,e.name),Kt(typeof M=="boolean",e,"internal-error"),Kt(typeof R=="boolean",e,"internal-error"),BA(p,e.name),BA(b,e.name),BA(B,e.name),BA(E,e.name),BA(y,e.name),BA(w,e.name);const j=new Co({uid:S,auth:e,email:m,emailVerified:M,displayName:h,isAnonymous:R,photoURL:b,phoneNumber:p,tenantId:B,stsTokenManager:N,createdAt:y,lastLoginAt:w});return O&&Array.isArray(O)&&(j.providerData=O.map(D=>Object.assign({},D))),E&&(j._redirectEventId=E),j}static async _fromIdTokenResponse(e,r,n=!1){const s=new pd;s.updateFromServerResponse(r);const i=new Co({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await F0(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];Kt(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?FF(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),A=new pd;A.updateFromIdToken(n);const l=new Co({uid:s.localId,auth:e,stsTokenManager:A,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new a2(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5=new Map;function No(t){Mo(t instanceof Function,"Expected a class definition");let e=_5.get(t);return e?(Mo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,_5.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TF{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}TF.type="NONE";const I5=TF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(t,e,r){return`firebase:${t}:${e}:${r}`}class md{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=Og(this.userKey,s.apiKey,i),this.fullPersistenceKey=Og("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Co._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new md(No(I5),e,n);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||No(I5);const a=Og(n,e.config.apiKey,e.name);let A=null;for(const c of r)try{const u=await c._get(a);if(u){const h=Co._fromJSON(e,u);c!==i&&(A=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new md(i,e,n):(i=l[0],A&&await i._set(a,A.toJSON()),await Promise.all(r.map(async c=>{if(c!==i)try{await c._remove(a)}catch{}})),new md(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S5(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(UF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kF(e))return"Blackberry";if(DF(e))return"Webos";if(PF(e))return"Safari";if((e.includes("chrome/")||QF(e))&&!e.includes("edge/"))return"Chrome";if(LF(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function UF(t=kn()){return/firefox\//i.test(t)}function PF(t=kn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function QF(t=kn()){return/crios\//i.test(t)}function jF(t=kn()){return/iemobile/i.test(t)}function LF(t=kn()){return/android/i.test(t)}function kF(t=kn()){return/blackberry/i.test(t)}function DF(t=kn()){return/webos/i.test(t)}function bb(t=kn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function gR(t=kn()){var e;return bb(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function vR(){return Lk()&&document.documentMode===10}function RF(t=kn()){return bb(t)||LF(t)||DF(t)||kF(t)||/windows phone/i.test(t)||jF(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OF(t,e=[]){let r;switch(t){case"Browser":r=S5(kn());break;case"Worker":r=`${S5(kn())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${qd}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((a,A)=>{try{const l=e(i);a(l)}catch(l){A(l)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wR(t,e={}){return Il(t,"GET","/v2/passwordPolicy",_l(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR=6;class bR{constructor(e){var r,n,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:xR,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,i,a,A;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(r=l.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(A=l.containsNonAlphanumericCharacter)!==null&&A!==void 0?A:!0),l}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new F5(this),this.idTokenSubscription=new F5(this),this.beforeStateQueue=new yR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=CF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=No(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await md.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await SF(this,{idToken:e}),n=await Co._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Qa(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(A=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(A,A))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,A=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===A)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Kt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await F0(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qa(this.app))return Promise.reject(Fo(this));const r=e?hn(e):null;return r&&Kt(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Kt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qa(this.app)?Promise.reject(Fo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qa(this.app)?Promise.reject(Fo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(No(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wR(this),r=new bR(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Fp("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await mR(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&No(e)||this._popupRedirectResolver;Kt(r,this,"argument-error"),this.redirectPersistenceManager=await md.create(this,[No(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let a=!1;const A=this._isInitialized?Promise.resolve():this._initializationPromise;if(Kt(A,this,"internal-error"),A.then(()=>{a||i(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,s);return()=>{a=!0,l()}}else{const l=e.addObserver(r);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Kt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=OF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&ZD(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Vc(t){return hn(t)}class F5{constructor(e){this.auth=e,this.observer=null,this.addObserver=Hk(r=>this.observer=r)}get next(){return Kt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _v={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CR(t){_v=t}function MF(t){return _v.loadJS(t)}function NR(){return _v.recaptchaEnterpriseScript}function ER(){return _v.gapiScript}function _R(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const IR="recaptcha-enterprise",SR="NO_RECAPTCHA";class FR{constructor(e){this.type=IR,this.auth=Vc(e)}async verify(e="verify",r=!1){async function n(i){if(!r){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,A)=>{AR(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)A(new Error("recaptcha Enterprise site key undefined"));else{const c=new oR(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,a(c.siteKey)}}).catch(l=>{A(l)})})}function s(i,a,A){const l=window.grecaptcha;N5(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{a(c)}).catch(()=>{a(SR)})}):A(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,a)=>{n(this.auth).then(A=>{if(!r&&N5(window.grecaptcha))s(A,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=NR();l.length!==0&&(l+=A),MF(l).then(()=>{s(A,i,a)}).catch(c=>{a(c)})}}).catch(A=>{a(A)})})}}async function T5(t,e,r,n=!1){const s=new FR(t);let i;try{i=await s.verify(r)}catch{i=await s.verify(r,!0)}const a=Object.assign({},e);return n?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function o2(t,e,r,n){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await T5(t,e,r,r==="getOobCode");return n(t,i)}else return n(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await T5(t,e,r,r==="getOobCode");return n(t,a)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(t,e){const r=pb(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(I0(i,e??{}))return s;la(s,"already-initialized")}return r.initialize({options:e})}function UR(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(No);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function PR(t,e,r){const n=Vc(t);Kt(n._canInitEmulator,n,"emulator-config-failed"),Kt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=HF(e),{host:a,port:A}=QR(e),l=A===null?"":`:${A}`;n.config.emulator={url:`${i}//${a}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:A,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),jR()}function HF(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function QR(t){const e=HF(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:U5(n.substr(i.length+1))}}else{const[i,a]=n.split(":");return{host:i,port:U5(a)}}}function U5(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function jR(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Bo("not implemented")}_getIdTokenResponse(e){return Bo("not implemented")}_linkToIdToken(e,r){return Bo("not implemented")}_getReauthenticationResolver(e){return Bo("not implemented")}}async function LR(t,e){return Il(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kR(t,e){return Pp(t,"POST","/v1/accounts:signInWithPassword",_l(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DR(t,e){return Pp(t,"POST","/v1/accounts:signInWithEmailLink",_l(t,e))}async function RR(t,e){return Pp(t,"POST","/v1/accounts:signInWithEmailLink",_l(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np extends Bb{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new np(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new np(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return o2(e,r,"signInWithPassword",kR);case"emailLink":return DR(e,{email:this._email,oobCode:this._password});default:la(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return o2(e,n,"signUpPassword",LR);case"emailLink":return RR(e,{idToken:r,email:this._email,oobCode:this._password});default:la(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gd(t,e){return Pp(t,"POST","/v1/accounts:signInWithIdp",_l(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR="http://localhost";class Pc extends Bb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Pc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):la("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,i=vb(r,["providerId","signInMethod"]);if(!n||!s)return null;const a=new Pc(n,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return gd(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,gd(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,gd(e,r)}buildRequest(){const e={requestUri:OR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Tp(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function HR(t){const e=Xh(Yh(t)).link,r=e?Xh(Yh(e)).deep_link_id:null,n=Xh(Yh(t)).deep_link_id;return(n?Xh(Yh(n)).link:null)||n||r||e||t}class Cb{constructor(e){var r,n,s,i,a,A;const l=Xh(Yh(e)),c=(r=l.apiKey)!==null&&r!==void 0?r:null,u=(n=l.oobCode)!==null&&n!==void 0?n:null,h=MR((s=l.mode)!==null&&s!==void 0?s:null);Kt(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=l.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(A=l.tenantId)!==null&&A!==void 0?A:null}static parseLink(e){const r=HR(e);try{return new Cb(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(){this.providerId=Gd.PROVIDER_ID}static credential(e,r){return np._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=Cb.parseLink(r);return Kt(n,"argument-error"),np._fromEmailAndCode(e,n.code,n.tenantId)}}Gd.PROVIDER_ID="password";Gd.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Gd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp extends VF{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA extends Qp{constructor(){super("facebook.com")}static credential(e){return Pc._fromParams({providerId:LA.PROVIDER_ID,signInMethod:LA.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return LA.credentialFromTaggedObject(e)}static credentialFromError(e){return LA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return LA.credential(e.oauthAccessToken)}catch{return null}}}LA.FACEBOOK_SIGN_IN_METHOD="facebook.com";LA.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA extends Qp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Pc._fromParams({providerId:kA.PROVIDER_ID,signInMethod:kA.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return kA.credentialFromTaggedObject(e)}static credentialFromError(e){return kA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return kA.credential(r,n)}catch{return null}}}kA.GOOGLE_SIGN_IN_METHOD="google.com";kA.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA extends Qp{constructor(){super("github.com")}static credential(e){return Pc._fromParams({providerId:DA.PROVIDER_ID,signInMethod:DA.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return DA.credentialFromTaggedObject(e)}static credentialFromError(e){return DA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return DA.credential(e.oauthAccessToken)}catch{return null}}}DA.GITHUB_SIGN_IN_METHOD="github.com";DA.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA extends Qp{constructor(){super("twitter.com")}static credential(e,r){return Pc._fromParams({providerId:RA.PROVIDER_ID,signInMethod:RA.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return RA.credentialFromTaggedObject(e)}static credentialFromError(e){return RA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return RA.credential(r,n)}catch{return null}}}RA.TWITTER_SIGN_IN_METHOD="twitter.com";RA.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(t,e){return Pp(t,"POST","/v1/accounts:signUp",_l(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await Co._fromIdTokenResponse(e,n,s),a=P5(n);return new Qc({user:i,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=P5(n);return new Qc({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function P5(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0 extends qo{constructor(e,r,n,s){var i;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,T0.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new T0(e,r,n,s)}}function KF(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?T0._fromErrorAndOperation(t,i,e,n):i})}async function KR(t,e,r=!1){const n=await rp(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Qc._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qR(t,e,r=!1){const{auth:n}=t;if(Qa(n.app))return Promise.reject(Fo(n));const s="reauthenticate";try{const i=await rp(t,KF(n,s,e,t),r);Kt(i.idToken,n,"internal-error");const a=xb(i.idToken);Kt(a,n,"internal-error");const{sub:A}=a;return Kt(t.uid===A,n,"user-mismatch"),Qc._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&la(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qF(t,e,r=!1){if(Qa(t.app))return Promise.reject(Fo(t));const n="signIn",s=await KF(t,n,e),i=await Qc._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}async function GR(t,e){return qF(Vc(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GF(t){const e=Vc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function zR(t,e,r){if(Qa(t.app))return Promise.reject(Fo(t));const n=Vc(t),a=await o2(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",VR).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&GF(t),l}),A=await Qc._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(A.user),A}function $R(t,e,r){return Qa(t.app)?Promise.reject(Fo(t)):GR(hn(t),Gd.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&GF(t),n})}function WR(t,e,r,n){return hn(t).onIdTokenChanged(e,r,n)}function JR(t,e,r){return hn(t).beforeAuthStateChanged(e,r)}function zF(t,e,r,n){return hn(t).onAuthStateChanged(e,r,n)}function $F(t){return hn(t).signOut()}const U0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(U0,"1"),this.storage.removeItem(U0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=1e3,YR=10;class JF extends WF{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=RF(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,A,l)=>{this.notifyListeners(a,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},i=this.storage.getItem(n);vR()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,YR):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},XR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}JF.type="LOCAL";const ZR=JF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF extends WF{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}XF.type="SESSION";const YF=XF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e6(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new Iv(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const A=Array.from(a).map(async c=>c(r.origin,i)),l=await e6(A);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Iv.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((A,l)=>{const c=Nb("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},n);a={messageChannel:s,onMessage(h){const m=h;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),A(m.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ma(){return window}function r6(t){Ma().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZF(){return typeof Ma().WorkerGlobalScope<"u"&&typeof Ma().importScripts=="function"}async function n6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function s6(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function i6(){return ZF()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4="firebaseLocalStorageDb",a6=1,P0="firebaseLocalStorage",t4="fbase_key";class jp{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Sv(t,e){return t.transaction([P0],e?"readwrite":"readonly").objectStore(P0)}function o6(){const t=indexedDB.deleteDatabase(e4);return new jp(t).toPromise()}function A2(){const t=indexedDB.open(e4,a6);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(P0,{keyPath:t4})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(P0)?e(n):(n.close(),await o6(),e(await A2()))})})}async function Q5(t,e,r){const n=Sv(t,!0).put({[t4]:e,value:r});return new jp(n).toPromise()}async function A6(t,e){const r=Sv(t,!1).get(e),n=await new jp(r).toPromise();return n===void 0?null:n.value}function j5(t,e){const r=Sv(t,!0).delete(e);return new jp(r).toPromise()}const l6=800,c6=3;class r4{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await A2(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>c6)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ZF()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Iv._getInstance(i6()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await n6(),!this.activeServiceWorker)return;this.sender=new t6(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||s6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await A2();return await Q5(e,U0,"1"),await j5(e,U0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>Q5(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>A6(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>j5(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Sv(s,!1).getAll();return new jp(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),l6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}r4.type="LOCAL";const u6=r4;new Up(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d6(t,e){return e?No(e):(Kt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb extends Bb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gd(e,this._buildIdpRequest())}_linkToIdToken(e,r){return gd(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return gd(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function h6(t){return qF(t.auth,new Eb(t),t.bypassAuthState)}function f6(t){const{auth:e,user:r}=t;return Kt(r,e,"internal-error"),qR(r,new Eb(t),t.bypassAuthState)}async function p6(t){const{auth:e,user:r}=t;return Kt(r,e,"internal-error"),KR(r,new Eb(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:a,type:A}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(A)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return h6;case"linkViaPopup":case"linkViaRedirect":return p6;case"reauthViaPopup":case"reauthViaRedirect":return f6;default:la(this.auth,"internal-error")}}resolve(e){Mo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6=new Up(2e3,1e4);class od extends n4{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,od.currentPopupAction&&od.currentPopupAction.cancel(),od.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Kt(e,this.auth,"internal-error"),e}async onExecution(){Mo(this.filter.length===1,"Popup operations only handle one event");const e=Nb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Oa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Oa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,od.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Oa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,m6.get())};e()}}od.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6="pendingRedirect",Mg=new Map;class v6 extends n4{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Mg.get(this.auth._key());if(!e){try{const n=await y6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Mg.set(this.auth._key(),e)}return this.bypassAuthState||Mg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function y6(t,e){const r=b6(e),n=x6(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function w6(t,e){Mg.set(t._key(),e)}function x6(t){return No(t._redirectPersistence)}function b6(t){return Og(g6,t.config.apiKey,t.name)}async function B6(t,e,r=!1){if(Qa(t.app))return Promise.reject(Fo(t));const n=Vc(t),s=d6(n,e),a=await new v6(n,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6=10*60*1e3;class N6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!E6(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!s4(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Oa(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=C6&&this.cachedEventUids.clear(),this.cachedEventUids.has(L5(e))}saveEventToCache(e){this.cachedEventUids.add(L5(e)),this.lastProcessedEventTime=Date.now()}}function L5(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function s4({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function E6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return s4(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _6(t,e={}){return Il(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,S6=/^https?/;async function F6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _6(t);for(const r of e)try{if(T6(r))return}catch{}la(t,"unauthorized-domain")}function T6(t){const e=i2(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!S6.test(r))return!1;if(I6.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6=new Up(3e4,6e4);function k5(){const t=Ma().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function P6(t){return new Promise((e,r)=>{var n,s,i;function a(){k5(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{k5(),r(Oa(t,"network-request-failed"))},timeout:U6.get()})}if(!((s=(n=Ma().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Ma().gapi)===null||i===void 0)&&i.load)a();else{const A=_R("iframefcb");return Ma()[A]=()=>{gapi.load?a():r(Oa(t,"network-request-failed"))},MF(`${ER()}?onload=${A}`).catch(l=>r(l))}}).catch(e=>{throw Hg=null,e})}let Hg=null;function Q6(t){return Hg=Hg||P6(t),Hg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6=new Up(5e3,15e3),L6="__/auth/iframe",k6="emulator/auth/iframe",D6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},R6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function O6(t){const e=t.config;Kt(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?wb(e,k6):`https://${t.config.authDomain}/${L6}`,n={apiKey:e.apiKey,appName:t.name,v:qd},s=R6.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${Tp(n).slice(1)}`}async function M6(t){const e=await Q6(t),r=Ma().gapi;return Kt(r,t,"internal-error"),e.open({where:document.body,url:O6(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:D6,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const a=Oa(t,"network-request-failed"),A=Ma().setTimeout(()=>{i(a)},j6.get());function l(){Ma().clearTimeout(A),s(n)}n.ping(l).then(l,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},V6=500,K6=600,q6="_blank",G6="http://localhost";class D5{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function z6(t,e,r,n=V6,s=K6){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let A="";const l=Object.assign(Object.assign({},H6),{width:n.toString(),height:s.toString(),top:i,left:a}),c=kn().toLowerCase();r&&(A=QF(c)?q6:r),UF(c)&&(e=e||G6,l.scrollbars="yes");const u=Object.entries(l).reduce((m,[p,b])=>`${m}${p}=${b},`,"");if(gR(c)&&A!=="_self")return $6(e||"",A),new D5(null);const h=window.open(e||"",A,u);Kt(h,t,"popup-blocked");try{h.focus()}catch{}return new D5(h)}function $6(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W6="__/auth/handler",J6="emulator/auth/handler",X6=encodeURIComponent("fac");async function R5(t,e,r,n,s,i){Kt(t.config.authDomain,t,"auth-domain-config-required"),Kt(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:qd,eventId:s};if(e instanceof VF){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",Mk(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries({}))a[u]=h}if(e instanceof Qp){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(a.scopes=u.join(","))}t.tenantId&&(a.tid=t.tenantId);const A=a;for(const u of Object.keys(A))A[u]===void 0&&delete A[u];const l=await t._getAppCheckToken(),c=l?`#${X6}=${encodeURIComponent(l)}`:"";return`${Y6(t)}?${Tp(A).slice(1)}${c}`}function Y6({config:t}){return t.emulator?wb(t,J6):`https://${t.authDomain}/${W6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw="webStorageSupport";class Z6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=YF,this._completeRedirectFn=B6,this._overrideRedirectResult=w6}async _openPopup(e,r,n,s){var i;Mo((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await R5(e,r,n,i2(),s);return z6(e,a,Nb())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await R5(e,r,n,i2(),s);return r6(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(Mo(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await M6(e),n=new N6(e);return r.register("authEvent",s=>(Kt(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(mw,{type:mw},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[mw];a!==void 0&&r(!!a),la(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=F6(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return RF()||PF()||bb()}}const eO=Z6;var O5="@firebase/auth",M5="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Kt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nO(t){Sd(new Uc("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:A}=n.options;Kt(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:a,authDomain:A,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:OF(t)},c=new BR(n,s,i,l);return UR(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Sd(new Uc("auth-internal",e=>{const r=Vc(e.getProvider("auth").getImmediate());return(n=>new tO(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),al(O5,M5,rO(t)),al(O5,M5,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO=5*60,iO=mF("authIdTokenMaxAge")||sO;let H5=null;const aO=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>iO)return;const s=r==null?void 0:r.token;H5!==s&&(H5=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function i4(t=gb()){const e=pb(t,"auth");if(e.isInitialized())return e.getImmediate();const r=TR(t,{popupRedirectResolver:eO,persistence:[u6,ZR,YF]}),n=mF("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const a=aO(i.toString());JR(r,a,()=>a(r.currentUser)),WR(r,A=>a(A))}}const s=fF("auth");return s&&PR(r,`http://${s}`),r}function oO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}CR({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=Oa("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",oO().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nO("Browser");var AO="firebase",lO="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */al(AO,lO,"app");var V5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wc,a4;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,N){function j(){}j.prototype=N.prototype,I.D=N.prototype,I.prototype=new j,I.prototype.constructor=I,I.C=function(D,_,T){for(var P=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)P[ee-2]=arguments[ee];return N.prototype[_].apply(D,P)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,N,j){j||(j=0);var D=Array(16);if(typeof N=="string")for(var _=0;16>_;++_)D[_]=N.charCodeAt(j++)|N.charCodeAt(j++)<<8|N.charCodeAt(j++)<<16|N.charCodeAt(j++)<<24;else for(_=0;16>_;++_)D[_]=N[j++]|N[j++]<<8|N[j++]<<16|N[j++]<<24;N=I.g[0],j=I.g[1],_=I.g[2];var T=I.g[3],P=N+(T^j&(_^T))+D[0]+3614090360&4294967295;N=j+(P<<7&4294967295|P>>>25),P=T+(_^N&(j^_))+D[1]+3905402710&4294967295,T=N+(P<<12&4294967295|P>>>20),P=_+(j^T&(N^j))+D[2]+606105819&4294967295,_=T+(P<<17&4294967295|P>>>15),P=j+(N^_&(T^N))+D[3]+3250441966&4294967295,j=_+(P<<22&4294967295|P>>>10),P=N+(T^j&(_^T))+D[4]+4118548399&4294967295,N=j+(P<<7&4294967295|P>>>25),P=T+(_^N&(j^_))+D[5]+1200080426&4294967295,T=N+(P<<12&4294967295|P>>>20),P=_+(j^T&(N^j))+D[6]+2821735955&4294967295,_=T+(P<<17&4294967295|P>>>15),P=j+(N^_&(T^N))+D[7]+4249261313&4294967295,j=_+(P<<22&4294967295|P>>>10),P=N+(T^j&(_^T))+D[8]+1770035416&4294967295,N=j+(P<<7&4294967295|P>>>25),P=T+(_^N&(j^_))+D[9]+2336552879&4294967295,T=N+(P<<12&4294967295|P>>>20),P=_+(j^T&(N^j))+D[10]+4294925233&4294967295,_=T+(P<<17&4294967295|P>>>15),P=j+(N^_&(T^N))+D[11]+2304563134&4294967295,j=_+(P<<22&4294967295|P>>>10),P=N+(T^j&(_^T))+D[12]+1804603682&4294967295,N=j+(P<<7&4294967295|P>>>25),P=T+(_^N&(j^_))+D[13]+4254626195&4294967295,T=N+(P<<12&4294967295|P>>>20),P=_+(j^T&(N^j))+D[14]+2792965006&4294967295,_=T+(P<<17&4294967295|P>>>15),P=j+(N^_&(T^N))+D[15]+1236535329&4294967295,j=_+(P<<22&4294967295|P>>>10),P=N+(_^T&(j^_))+D[1]+4129170786&4294967295,N=j+(P<<5&4294967295|P>>>27),P=T+(j^_&(N^j))+D[6]+3225465664&4294967295,T=N+(P<<9&4294967295|P>>>23),P=_+(N^j&(T^N))+D[11]+643717713&4294967295,_=T+(P<<14&4294967295|P>>>18),P=j+(T^N&(_^T))+D[0]+3921069994&4294967295,j=_+(P<<20&4294967295|P>>>12),P=N+(_^T&(j^_))+D[5]+3593408605&4294967295,N=j+(P<<5&4294967295|P>>>27),P=T+(j^_&(N^j))+D[10]+38016083&4294967295,T=N+(P<<9&4294967295|P>>>23),P=_+(N^j&(T^N))+D[15]+3634488961&4294967295,_=T+(P<<14&4294967295|P>>>18),P=j+(T^N&(_^T))+D[4]+3889429448&4294967295,j=_+(P<<20&4294967295|P>>>12),P=N+(_^T&(j^_))+D[9]+568446438&4294967295,N=j+(P<<5&4294967295|P>>>27),P=T+(j^_&(N^j))+D[14]+3275163606&4294967295,T=N+(P<<9&4294967295|P>>>23),P=_+(N^j&(T^N))+D[3]+4107603335&4294967295,_=T+(P<<14&4294967295|P>>>18),P=j+(T^N&(_^T))+D[8]+1163531501&4294967295,j=_+(P<<20&4294967295|P>>>12),P=N+(_^T&(j^_))+D[13]+2850285829&4294967295,N=j+(P<<5&4294967295|P>>>27),P=T+(j^_&(N^j))+D[2]+4243563512&4294967295,T=N+(P<<9&4294967295|P>>>23),P=_+(N^j&(T^N))+D[7]+1735328473&4294967295,_=T+(P<<14&4294967295|P>>>18),P=j+(T^N&(_^T))+D[12]+2368359562&4294967295,j=_+(P<<20&4294967295|P>>>12),P=N+(j^_^T)+D[5]+4294588738&4294967295,N=j+(P<<4&4294967295|P>>>28),P=T+(N^j^_)+D[8]+2272392833&4294967295,T=N+(P<<11&4294967295|P>>>21),P=_+(T^N^j)+D[11]+1839030562&4294967295,_=T+(P<<16&4294967295|P>>>16),P=j+(_^T^N)+D[14]+4259657740&4294967295,j=_+(P<<23&4294967295|P>>>9),P=N+(j^_^T)+D[1]+2763975236&4294967295,N=j+(P<<4&4294967295|P>>>28),P=T+(N^j^_)+D[4]+1272893353&4294967295,T=N+(P<<11&4294967295|P>>>21),P=_+(T^N^j)+D[7]+4139469664&4294967295,_=T+(P<<16&4294967295|P>>>16),P=j+(_^T^N)+D[10]+3200236656&4294967295,j=_+(P<<23&4294967295|P>>>9),P=N+(j^_^T)+D[13]+681279174&4294967295,N=j+(P<<4&4294967295|P>>>28),P=T+(N^j^_)+D[0]+3936430074&4294967295,T=N+(P<<11&4294967295|P>>>21),P=_+(T^N^j)+D[3]+3572445317&4294967295,_=T+(P<<16&4294967295|P>>>16),P=j+(_^T^N)+D[6]+76029189&4294967295,j=_+(P<<23&4294967295|P>>>9),P=N+(j^_^T)+D[9]+3654602809&4294967295,N=j+(P<<4&4294967295|P>>>28),P=T+(N^j^_)+D[12]+3873151461&4294967295,T=N+(P<<11&4294967295|P>>>21),P=_+(T^N^j)+D[15]+530742520&4294967295,_=T+(P<<16&4294967295|P>>>16),P=j+(_^T^N)+D[2]+3299628645&4294967295,j=_+(P<<23&4294967295|P>>>9),P=N+(_^(j|~T))+D[0]+4096336452&4294967295,N=j+(P<<6&4294967295|P>>>26),P=T+(j^(N|~_))+D[7]+1126891415&4294967295,T=N+(P<<10&4294967295|P>>>22),P=_+(N^(T|~j))+D[14]+2878612391&4294967295,_=T+(P<<15&4294967295|P>>>17),P=j+(T^(_|~N))+D[5]+4237533241&4294967295,j=_+(P<<21&4294967295|P>>>11),P=N+(_^(j|~T))+D[12]+1700485571&4294967295,N=j+(P<<6&4294967295|P>>>26),P=T+(j^(N|~_))+D[3]+2399980690&4294967295,T=N+(P<<10&4294967295|P>>>22),P=_+(N^(T|~j))+D[10]+4293915773&4294967295,_=T+(P<<15&4294967295|P>>>17),P=j+(T^(_|~N))+D[1]+2240044497&4294967295,j=_+(P<<21&4294967295|P>>>11),P=N+(_^(j|~T))+D[8]+1873313359&4294967295,N=j+(P<<6&4294967295|P>>>26),P=T+(j^(N|~_))+D[15]+4264355552&4294967295,T=N+(P<<10&4294967295|P>>>22),P=_+(N^(T|~j))+D[6]+2734768916&4294967295,_=T+(P<<15&4294967295|P>>>17),P=j+(T^(_|~N))+D[13]+1309151649&4294967295,j=_+(P<<21&4294967295|P>>>11),P=N+(_^(j|~T))+D[4]+4149444226&4294967295,N=j+(P<<6&4294967295|P>>>26),P=T+(j^(N|~_))+D[11]+3174756917&4294967295,T=N+(P<<10&4294967295|P>>>22),P=_+(N^(T|~j))+D[2]+718787259&4294967295,_=T+(P<<15&4294967295|P>>>17),P=j+(T^(_|~N))+D[9]+3951481745&4294967295,I.g[0]=I.g[0]+N&4294967295,I.g[1]=I.g[1]+(_+(P<<21&4294967295|P>>>11))&4294967295,I.g[2]=I.g[2]+_&4294967295,I.g[3]=I.g[3]+T&4294967295}n.prototype.u=function(I,N){N===void 0&&(N=I.length);for(var j=N-this.blockSize,D=this.B,_=this.h,T=0;T<N;){if(_==0)for(;T<=j;)s(this,I,T),T+=this.blockSize;if(typeof I=="string"){for(;T<N;)if(D[_++]=I.charCodeAt(T++),_==this.blockSize){s(this,D),_=0;break}}else for(;T<N;)if(D[_++]=I[T++],_==this.blockSize){s(this,D),_=0;break}}this.h=_,this.o+=N},n.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var N=1;N<I.length-8;++N)I[N]=0;var j=8*this.o;for(N=I.length-8;N<I.length;++N)I[N]=j&255,j/=256;for(this.u(I),I=Array(16),N=j=0;4>N;++N)for(var D=0;32>D;D+=8)I[j++]=this.g[N]>>>D&255;return I};function i(I,N){var j=A;return Object.prototype.hasOwnProperty.call(j,I)?j[I]:j[I]=N(I)}function a(I,N){this.h=N;for(var j=[],D=!0,_=I.length-1;0<=_;_--){var T=I[_]|0;D&&T==N||(j[_]=T,D=!1)}this.g=j}var A={};function l(I){return-128<=I&&128>I?i(I,function(N){return new a([N|0],0>N?-1:0)}):new a([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return h;if(0>I)return E(c(-I));for(var N=[],j=1,D=0;I>=j;D++)N[D]=I/j|0,j*=4294967296;return new a(N,0)}function u(I,N){if(I.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(I.charAt(0)=="-")return E(u(I.substring(1),N));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var j=c(Math.pow(N,8)),D=h,_=0;_<I.length;_+=8){var T=Math.min(8,I.length-_),P=parseInt(I.substring(_,_+T),N);8>T?(T=c(Math.pow(N,T)),D=D.j(T).add(c(P))):(D=D.j(j),D=D.add(c(P)))}return D}var h=l(0),m=l(1),p=l(16777216);t=a.prototype,t.m=function(){if(B(this))return-E(this).m();for(var I=0,N=1,j=0;j<this.g.length;j++){var D=this.i(j);I+=(0<=D?D:4294967296+D)*N,N*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(b(this))return"0";if(B(this))return"-"+E(this).toString(I);for(var N=c(Math.pow(I,6)),j=this,D="";;){var _=M(j,N).g;j=y(j,_.j(N));var T=((0<j.g.length?j.g[0]:j.h)>>>0).toString(I);if(j=_,b(j))return T+D;for(;6>T.length;)T="0"+T;D=T+D}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function b(I){if(I.h!=0)return!1;for(var N=0;N<I.g.length;N++)if(I.g[N]!=0)return!1;return!0}function B(I){return I.h==-1}t.l=function(I){return I=y(this,I),B(I)?-1:b(I)?0:1};function E(I){for(var N=I.g.length,j=[],D=0;D<N;D++)j[D]=~I.g[D];return new a(j,~I.h).add(m)}t.abs=function(){return B(this)?E(this):this},t.add=function(I){for(var N=Math.max(this.g.length,I.g.length),j=[],D=0,_=0;_<=N;_++){var T=D+(this.i(_)&65535)+(I.i(_)&65535),P=(T>>>16)+(this.i(_)>>>16)+(I.i(_)>>>16);D=P>>>16,T&=65535,P&=65535,j[_]=P<<16|T}return new a(j,j[j.length-1]&-2147483648?-1:0)};function y(I,N){return I.add(E(N))}t.j=function(I){if(b(this)||b(I))return h;if(B(this))return B(I)?E(this).j(E(I)):E(E(this).j(I));if(B(I))return E(this.j(E(I)));if(0>this.l(p)&&0>I.l(p))return c(this.m()*I.m());for(var N=this.g.length+I.g.length,j=[],D=0;D<2*N;D++)j[D]=0;for(D=0;D<this.g.length;D++)for(var _=0;_<I.g.length;_++){var T=this.i(D)>>>16,P=this.i(D)&65535,ee=I.i(_)>>>16,Ae=I.i(_)&65535;j[2*D+2*_]+=P*Ae,w(j,2*D+2*_),j[2*D+2*_+1]+=T*Ae,w(j,2*D+2*_+1),j[2*D+2*_+1]+=P*ee,w(j,2*D+2*_+1),j[2*D+2*_+2]+=T*ee,w(j,2*D+2*_+2)}for(D=0;D<N;D++)j[D]=j[2*D+1]<<16|j[2*D];for(D=N;D<2*N;D++)j[D]=0;return new a(j,0)};function w(I,N){for(;(I[N]&65535)!=I[N];)I[N+1]+=I[N]>>>16,I[N]&=65535,N++}function S(I,N){this.g=I,this.h=N}function M(I,N){if(b(N))throw Error("division by zero");if(b(I))return new S(h,h);if(B(I))return N=M(E(I),N),new S(E(N.g),E(N.h));if(B(N))return N=M(I,E(N)),new S(E(N.g),N.h);if(30<I.g.length){if(B(I)||B(N))throw Error("slowDivide_ only works with positive integers.");for(var j=m,D=N;0>=D.l(I);)j=R(j),D=R(D);var _=O(j,1),T=O(D,1);for(D=O(D,2),j=O(j,2);!b(D);){var P=T.add(D);0>=P.l(I)&&(_=_.add(j),T=P),D=O(D,1),j=O(j,1)}return N=y(I,_.j(N)),new S(_,N)}for(_=h;0<=I.l(N);){for(j=Math.max(1,Math.floor(I.m()/N.m())),D=Math.ceil(Math.log(j)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),T=c(j),P=T.j(N);B(P)||0<P.l(I);)j-=D,T=c(j),P=T.j(N);b(T)&&(T=m),_=_.add(T),I=y(I,P)}return new S(_,I)}t.A=function(I){return M(this,I).h},t.and=function(I){for(var N=Math.max(this.g.length,I.g.length),j=[],D=0;D<N;D++)j[D]=this.i(D)&I.i(D);return new a(j,this.h&I.h)},t.or=function(I){for(var N=Math.max(this.g.length,I.g.length),j=[],D=0;D<N;D++)j[D]=this.i(D)|I.i(D);return new a(j,this.h|I.h)},t.xor=function(I){for(var N=Math.max(this.g.length,I.g.length),j=[],D=0;D<N;D++)j[D]=this.i(D)^I.i(D);return new a(j,this.h^I.h)};function R(I){for(var N=I.g.length+1,j=[],D=0;D<N;D++)j[D]=I.i(D)<<1|I.i(D-1)>>>31;return new a(j,I.h)}function O(I,N){var j=N>>5;N%=32;for(var D=I.g.length-j,_=[],T=0;T<D;T++)_[T]=0<N?I.i(T+j)>>>N|I.i(T+j+1)<<32-N:I.i(T+j);return new a(_,I.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,a4=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=u,wc=a}).apply(typeof V5<"u"?V5:typeof self<"u"?self:typeof window<"u"?window:{});var km=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var o4,Zh,A4,Vg,l2,l4,c4,u4;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,C,k){return f==Array.prototype||f==Object.prototype||(f[C]=k.value),f};function r(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof km=="object"&&km];for(var C=0;C<f.length;++C){var k=f[C];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var n=r(this);function s(f,C){if(C)e:{var k=n;f=f.split(".");for(var X=0;X<f.length-1;X++){var xe=f[X];if(!(xe in k))break e;k=k[xe]}f=f[f.length-1],X=k[f],C=C(X),C!=X&&C!=null&&e(k,f,{configurable:!0,writable:!0,value:C})}}function i(f,C){f instanceof String&&(f+="");var k=0,X=!1,xe={next:function(){if(!X&&k<f.length){var Ie=k++;return{value:C(Ie,f[Ie]),done:!1}}return X=!0,{done:!0,value:void 0}}};return xe[Symbol.iterator]=function(){return xe},xe}s("Array.prototype.values",function(f){return f||function(){return i(this,function(C,k){return k})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},A=this||self;function l(f){var C=typeof f;return C=C!="object"?C:f?Array.isArray(f)?"array":C:"null",C=="array"||C=="object"&&typeof f.length=="number"}function c(f){var C=typeof f;return C=="object"&&f!=null||C=="function"}function u(f,C,k){return f.call.apply(f.bind,arguments)}function h(f,C,k){if(!f)throw Error();if(2<arguments.length){var X=Array.prototype.slice.call(arguments,2);return function(){var xe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(xe,X),f.apply(C,xe)}}return function(){return f.apply(C,arguments)}}function m(f,C,k){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,m.apply(null,arguments)}function p(f,C){var k=Array.prototype.slice.call(arguments,1);return function(){var X=k.slice();return X.push.apply(X,arguments),f.apply(this,X)}}function b(f,C){function k(){}k.prototype=C.prototype,f.aa=C.prototype,f.prototype=new k,f.prototype.constructor=f,f.Qb=function(X,xe,Ie){for(var Je=Array(arguments.length-2),Gt=2;Gt<arguments.length;Gt++)Je[Gt-2]=arguments[Gt];return C.prototype[xe].apply(X,Je)}}function B(f){const C=f.length;if(0<C){const k=Array(C);for(let X=0;X<C;X++)k[X]=f[X];return k}return[]}function E(f,C){for(let k=1;k<arguments.length;k++){const X=arguments[k];if(l(X)){const xe=f.length||0,Ie=X.length||0;f.length=xe+Ie;for(let Je=0;Je<Ie;Je++)f[xe+Je]=X[Je]}else f.push(X)}}class y{constructor(C,k){this.i=C,this.j=k,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function w(f){return/^[\s\xa0]*$/.test(f)}function S(){var f=A.navigator;return f&&(f=f.userAgent)?f:""}function M(f){return M[" "](f),f}M[" "]=function(){};var R=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function O(f,C,k){for(const X in f)C.call(k,f[X],X,f)}function I(f,C){for(const k in f)C.call(void 0,f[k],k,f)}function N(f){const C={};for(const k in f)C[k]=f[k];return C}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(f,C){let k,X;for(let xe=1;xe<arguments.length;xe++){X=arguments[xe];for(k in X)f[k]=X[k];for(let Ie=0;Ie<j.length;Ie++)k=j[Ie],Object.prototype.hasOwnProperty.call(X,k)&&(f[k]=X[k])}}function _(f){var C=1;f=f.split(":");const k=[];for(;0<C&&f.length;)k.push(f.shift()),C--;return f.length&&k.push(f.join(":")),k}function T(f){A.setTimeout(()=>{throw f},0)}function P(){var f=se;let C=null;return f.g&&(C=f.g,f.g=f.g.next,f.g||(f.h=null),C.next=null),C}class ee{constructor(){this.h=this.g=null}add(C,k){const X=Ae.get();X.set(C,k),this.h?this.h.next=X:this.g=X,this.h=X}}var Ae=new y(()=>new ue,f=>f.reset());class ue{constructor(){this.next=this.g=this.h=null}set(C,k){this.h=C,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let he,te=!1,se=new ee,ne=()=>{const f=A.Promise.resolve(void 0);he=()=>{f.then(ye)}};var ye=()=>{for(var f;f=P();){try{f.h.call(f.g)}catch(k){T(k)}var C=Ae;C.j(f),100>C.h&&(C.h++,f.next=C.g,C.g=f)}te=!1};function F(){this.s=this.s,this.C=this.C}F.prototype.s=!1,F.prototype.ma=function(){this.s||(this.s=!0,this.N())},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(f,C){this.type=f,this.g=this.target=C,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var W=function(){if(!A.addEventListener||!Object.defineProperty)return!1;var f=!1,C=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const k=()=>{};A.addEventListener("test",k,C),A.removeEventListener("test",k,C)}catch{}return f}();function q(f,C){if(L.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var k=this.type=f.type,X=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=C,C=f.relatedTarget){if(R){e:{try{M(C.nodeName);var xe=!0;break e}catch{}xe=!1}xe||(C=null)}}else k=="mouseover"?C=f.fromElement:k=="mouseout"&&(C=f.toElement);this.relatedTarget=C,X?(this.clientX=X.clientX!==void 0?X.clientX:X.pageX,this.clientY=X.clientY!==void 0?X.clientY:X.pageY,this.screenX=X.screenX||0,this.screenY=X.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:H[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&q.aa.h.call(this)}}b(q,L);var H={2:"touch",3:"pen",4:"mouse"};q.prototype.h=function(){q.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var re="closure_listenable_"+(1e6*Math.random()|0),$=0;function de(f,C,k,X,xe){this.listener=f,this.proxy=null,this.src=C,this.type=k,this.capture=!!X,this.ha=xe,this.key=++$,this.da=this.fa=!1}function pe(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Ne(f){this.src=f,this.g={},this.h=0}Ne.prototype.add=function(f,C,k,X,xe){var Ie=f.toString();f=this.g[Ie],f||(f=this.g[Ie]=[],this.h++);var Je=Fe(f,C,X,xe);return-1<Je?(C=f[Je],k||(C.fa=!1)):(C=new de(C,this.src,Ie,!!X,xe),C.fa=k,f.push(C)),C};function Te(f,C){var k=C.type;if(k in f.g){var X=f.g[k],xe=Array.prototype.indexOf.call(X,C,void 0),Ie;(Ie=0<=xe)&&Array.prototype.splice.call(X,xe,1),Ie&&(pe(C),f.g[k].length==0&&(delete f.g[k],f.h--))}}function Fe(f,C,k,X){for(var xe=0;xe<f.length;++xe){var Ie=f[xe];if(!Ie.da&&Ie.listener==C&&Ie.capture==!!k&&Ie.ha==X)return xe}return-1}var oe="closure_lm_"+(1e6*Math.random()|0),ce={};function J(f,C,k,X,xe){if(Array.isArray(C)){for(var Ie=0;Ie<C.length;Ie++)J(f,C[Ie],k,X,xe);return null}return k=vt(k),f&&f[re]?f.K(C,k,c(X)?!!X.capture:!1,xe):Re(f,C,k,!1,X,xe)}function Re(f,C,k,X,xe,Ie){if(!C)throw Error("Invalid event type");var Je=c(xe)?!!xe.capture:!!xe,Gt=tt(f);if(Gt||(f[oe]=Gt=new Ne(f)),k=Gt.add(C,k,X,Je,Ie),k.proxy)return k;if(X=Le(),k.proxy=X,X.src=f,X.listener=k,f.addEventListener)W||(xe=Je),xe===void 0&&(xe=!1),f.addEventListener(C.toString(),X,xe);else if(f.attachEvent)f.attachEvent(Ge(C.toString()),X);else if(f.addListener&&f.removeListener)f.addListener(X);else throw Error("addEventListener and attachEvent are unavailable.");return k}function Le(){function f(k){return C.call(f.src,f.listener,k)}const C=qe;return f}function Ue(f,C,k,X,xe){if(Array.isArray(C))for(var Ie=0;Ie<C.length;Ie++)Ue(f,C[Ie],k,X,xe);else X=c(X)?!!X.capture:!!X,k=vt(k),f&&f[re]?(f=f.i,C=String(C).toString(),C in f.g&&(Ie=f.g[C],k=Fe(Ie,k,X,xe),-1<k&&(pe(Ie[k]),Array.prototype.splice.call(Ie,k,1),Ie.length==0&&(delete f.g[C],f.h--)))):f&&(f=tt(f))&&(C=f.g[C.toString()],f=-1,C&&(f=Fe(C,k,X,xe)),(k=-1<f?C[f]:null)&&Pe(k))}function Pe(f){if(typeof f!="number"&&f&&!f.da){var C=f.src;if(C&&C[re])Te(C.i,f);else{var k=f.type,X=f.proxy;C.removeEventListener?C.removeEventListener(k,X,f.capture):C.detachEvent?C.detachEvent(Ge(k),X):C.addListener&&C.removeListener&&C.removeListener(X),(k=tt(C))?(Te(k,f),k.h==0&&(k.src=null,C[oe]=null)):pe(f)}}}function Ge(f){return f in ce?ce[f]:ce[f]="on"+f}function qe(f,C){if(f.da)f=!0;else{C=new q(C,this);var k=f.listener,X=f.ha||f.src;f.fa&&Pe(f),f=k.call(X,C)}return f}function tt(f){return f=f[oe],f instanceof Ne?f:null}var Ze="__closure_events_fn_"+(1e9*Math.random()>>>0);function vt(f){return typeof f=="function"?f:(f[Ze]||(f[Ze]=function(C){return f.handleEvent(C)}),f[Ze])}function ht(){F.call(this),this.i=new Ne(this),this.M=this,this.F=null}b(ht,F),ht.prototype[re]=!0,ht.prototype.removeEventListener=function(f,C,k,X){Ue(this,f,C,k,X)};function Ct(f,C){var k,X=f.F;if(X)for(k=[];X;X=X.F)k.push(X);if(f=f.M,X=C.type||C,typeof C=="string")C=new L(C,f);else if(C instanceof L)C.target=C.target||f;else{var xe=C;C=new L(X,f),D(C,xe)}if(xe=!0,k)for(var Ie=k.length-1;0<=Ie;Ie--){var Je=C.g=k[Ie];xe=Ht(Je,X,!0,C)&&xe}if(Je=C.g=f,xe=Ht(Je,X,!0,C)&&xe,xe=Ht(Je,X,!1,C)&&xe,k)for(Ie=0;Ie<k.length;Ie++)Je=C.g=k[Ie],xe=Ht(Je,X,!1,C)&&xe}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var f=this.i,C;for(C in f.g){for(var k=f.g[C],X=0;X<k.length;X++)pe(k[X]);delete f.g[C],f.h--}}this.F=null},ht.prototype.K=function(f,C,k,X){return this.i.add(String(f),C,!1,k,X)},ht.prototype.L=function(f,C,k,X){return this.i.add(String(f),C,!0,k,X)};function Ht(f,C,k,X){if(C=f.i.g[String(C)],!C)return!0;C=C.concat();for(var xe=!0,Ie=0;Ie<C.length;++Ie){var Je=C[Ie];if(Je&&!Je.da&&Je.capture==k){var Gt=Je.listener,ir=Je.ha||Je.src;Je.fa&&Te(f.i,Je),xe=Gt.call(ir,X)!==!1&&xe}}return xe&&!X.defaultPrevented}function Nt(f,C,k){if(typeof f=="function")k&&(f=m(f,k));else if(f&&typeof f.handleEvent=="function")f=m(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:A.setTimeout(f,C||0)}function ie(f){f.g=Nt(()=>{f.g=null,f.i&&(f.i=!1,ie(f))},f.l);const C=f.h;f.h=null,f.m.apply(null,C)}class ve extends F{constructor(C,k){super(),this.m=C,this.l=k,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:ie(this)}N(){super.N(),this.g&&(A.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function We(f){F.call(this),this.h=f,this.g={}}b(We,F);var ot=[];function yt(f){O(f.g,function(C,k){this.g.hasOwnProperty(k)&&Pe(C)},f),f.g={}}We.prototype.N=function(){We.aa.N.call(this),yt(this)},We.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Et=A.JSON.stringify,rt=A.JSON.parse,ur=class{stringify(f){return A.JSON.stringify(f,void 0)}parse(f){return A.JSON.parse(f,void 0)}};function St(){}St.prototype.h=null;function Pr(f){return f.h||(f.h=f.i())}function sr(){}var fr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fn(){L.call(this,"d")}b(fn,L);function vr(){L.call(this,"c")}b(vr,L);var kt={},Yt=null;function us(){return Yt=Yt||new ht}kt.La="serverreachability";function $r(f){L.call(this,kt.La,f)}b($r,L);function mr(f){const C=us();Ct(C,new $r(C))}kt.STAT_EVENT="statevent";function Qe(f,C){L.call(this,kt.STAT_EVENT,f),this.stat=C}b(Qe,L);function Me(f){const C=us();Ct(C,new Qe(C,f))}kt.Ma="timingevent";function Ft(f,C){L.call(this,kt.Ma,f),this.size=C}b(Ft,L);function ft(f,C){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return A.setTimeout(function(){f()},C)}function ct(){this.g=!0}ct.prototype.xa=function(){this.g=!1};function Ut(f,C,k,X,xe,Ie){f.info(function(){if(f.g)if(Ie)for(var Je="",Gt=Ie.split("&"),ir=0;ir<Gt.length;ir++){var zt=Gt[ir].split("=");if(1<zt.length){var wr=zt[0];zt=zt[1];var Qr=wr.split("_");Je=2<=Qr.length&&Qr[1]=="type"?Je+(wr+"="+zt+"&"):Je+(wr+"=redacted&")}}else Je=null;else Je=Ie;return"XMLHTTP REQ ("+X+") [attempt "+xe+"]: "+C+`
`+k+`
`+Je})}function it(f,C,k,X,xe,Ie,Je){f.info(function(){return"XMLHTTP RESP ("+X+") [ attempt "+xe+"]: "+C+`
`+k+`
`+Ie+" "+Je})}function _t(f,C,k,X){f.info(function(){return"XMLHTTP TEXT ("+C+"): "+et(f,k)+(X?" "+X:"")})}function Be(f,C){f.info(function(){return"TIMEOUT: "+C})}ct.prototype.info=function(){};function et(f,C){if(!f.g)return C;if(!C)return null;try{var k=JSON.parse(C);if(k){for(f=0;f<k.length;f++)if(Array.isArray(k[f])){var X=k[f];if(!(2>X.length)){var xe=X[1];if(Array.isArray(xe)&&!(1>xe.length)){var Ie=xe[0];if(Ie!="noop"&&Ie!="stop"&&Ie!="close")for(var Je=1;Je<xe.length;Je++)xe[Je]=""}}}}return Et(k)}catch{return C}}var nt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ot={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zt;function It(){}b(It,St),It.prototype.g=function(){return new XMLHttpRequest},It.prototype.i=function(){return{}},Zt=new It;function mt(f,C,k,X){this.j=f,this.i=C,this.l=k,this.R=X||1,this.U=new We(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ns}function Ns(){this.i=null,this.g="",this.h=!1}var ma={},ga={};function va(f,C,k){f.L=1,f.v=Za(Es(C)),f.m=k,f.P=!0,$a(f,null)}function $a(f,C){f.F=Date.now(),$o(f),f.A=Es(f.v);var k=f.A,X=f.R;Array.isArray(X)||(X=[String(X)]),Vt(k.i,"t",X),f.C=0,k=f.j.J,f.h=new Ns,f.g=V(f.j,k?C:null,!f.m),0<f.O&&(f.M=new ve(m(f.Y,f,f.g),f.O)),C=f.U,k=f.g,X=f.ca;var xe="readystatechange";Array.isArray(xe)||(xe&&(ot[0]=xe.toString()),xe=ot);for(var Ie=0;Ie<xe.length;Ie++){var Je=J(k,xe[Ie],X||C.handleEvent,!1,C.h||C);if(!Je)break;C.g[Je.key]=Je}C=f.H?N(f.H):{},f.m?(f.u||(f.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,C)):(f.u="GET",f.g.ea(f.A,f.u,null,C)),mr(),Ut(f.i,f.u,f.A,f.l,f.R,f.m)}mt.prototype.ca=function(f){f=f.target;const C=this.M;C&&Fn(f)==3?C.j():this.Y(f)},mt.prototype.Y=function(f){try{if(f==this.g)e:{const Qr=Fn(this.g);var C=this.g.Ba();const Gi=this.g.Z();if(!(3>Qr)&&(Qr!=3||this.g&&(this.h.h||this.g.oa()||au(this.g)))){this.J||Qr!=4||C==7||(C==8||0>=Gi?mr(3):mr(2)),ya(this);var k=this.g.Z();this.X=k;t:if(Wa(this)){var X=au(this.g);f="";var xe=X.length,Ie=Fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ri(this),wa(this);var Je="";break t}this.h.i=new A.TextDecoder}for(C=0;C<xe;C++)this.h.h=!0,f+=this.h.i.decode(X[C],{stream:!(Ie&&C==xe-1)});X.length=0,this.h.g+=f,this.C=0,Je=this.h.g}else Je=this.g.oa();if(this.o=k==200,it(this.i,this.u,this.A,this.l,this.R,Qr,k),this.o){if(this.T&&!this.K){t:{if(this.g){var Gt,ir=this.g;if((Gt=ir.g?ir.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Gt)){var zt=Gt;break t}}zt=null}if(k=zt)_t(this.i,this.l,k,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ja(this,k);else{this.o=!1,this.s=3,Me(12),Ri(this),wa(this);break e}}if(this.P){k=!0;let Xn;for(;!this.J&&this.C<Je.length;)if(Xn=Xc(this,Je),Xn==ga){Qr==4&&(this.s=4,Me(14),k=!1),_t(this.i,this.l,null,"[Incomplete Response]");break}else if(Xn==ma){this.s=4,Me(15),_t(this.i,this.l,Je,"[Invalid Chunk]"),k=!1;break}else _t(this.i,this.l,Xn,null),Ja(this,Xn);if(Wa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qr!=4||Je.length!=0||this.h.h||(this.s=1,Me(16),k=!1),this.o=this.o&&k,!k)_t(this.i,this.l,Je,"[Invalid Chunked Response]"),Ri(this),wa(this);else if(0<Je.length&&!this.W){this.W=!0;var wr=this.j;wr.g==this&&wr.ba&&!wr.M&&(wr.j.info("Great, no buffering proxy detected. Bytes received: "+Je.length),AA(wr),wr.M=!0,Me(11))}}else _t(this.i,this.l,Je,null),Ja(this,Je);Qr==4&&Ri(this),this.o&&!this.J&&(Qr==4?Na(this.j,this):(this.o=!1,$o(this)))}else Ba(this.g),k==400&&0<Je.indexOf("Unknown SID")?(this.s=3,Me(12)):(this.s=0,Me(13)),Ri(this),wa(this)}}}catch{}finally{}};function Wa(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Xc(f,C){var k=f.C,X=C.indexOf(`
`,k);return X==-1?ga:(k=Number(C.substring(k,X)),isNaN(k)?ma:(X+=1,X+k>C.length?ga:(C=C.slice(X,X+k),f.C=X+k,C)))}mt.prototype.cancel=function(){this.J=!0,Ri(this)};function $o(f){f.S=Date.now()+f.I,Yc(f,f.I)}function Yc(f,C){if(f.B!=null)throw Error("WatchDog timer not null");f.B=ft(m(f.ba,f),C)}function ya(f){f.B&&(A.clearTimeout(f.B),f.B=null)}mt.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Be(this.i,this.A),this.L!=2&&(mr(),Me(17)),Ri(this),this.s=2,wa(this)):Yc(this,this.S-f)};function wa(f){f.j.G==0||f.J||Na(f.j,f)}function Ri(f){ya(f);var C=f.M;C&&typeof C.ma=="function"&&C.ma(),f.M=null,yt(f.U),f.g&&(C=f.g,f.g=null,C.abort(),C.ma())}function Ja(f,C){try{var k=f.j;if(k.G!=0&&(k.g==f||Ul(k.h,f))){if(!f.K&&Ul(k.h,f)&&k.G==3){try{var X=k.Da.g.parse(C)}catch{X=null}if(Array.isArray(X)&&X.length==3){var xe=X;if(xe[0]==0){e:if(!k.u){if(k.g)if(k.g.F+3e3<f.F)qi(k),sA(k);else break e;so(k),Me(18)}}else k.za=xe[1],0<k.za-k.T&&37500>xe[2]&&k.F&&k.v==0&&!k.C&&(k.C=ft(m(k.Za,k),6e3));if(1>=Xa(k.h)&&k.ca){try{k.ca()}catch{}k.ca=void 0}}else ds(k,11)}else if((f.K||k.g==f)&&qi(k),!w(C))for(xe=k.Da.g.parse(C),C=0;C<xe.length;C++){let zt=xe[C];if(k.T=zt[0],zt=zt[1],k.G==2)if(zt[0]=="c"){k.K=zt[1],k.ia=zt[2];const wr=zt[3];wr!=null&&(k.la=wr,k.j.info("VER="+k.la));const Qr=zt[4];Qr!=null&&(k.Aa=Qr,k.j.info("SVER="+k.Aa));const Gi=zt[5];Gi!=null&&typeof Gi=="number"&&0<Gi&&(X=1.5*Gi,k.L=X,k.j.info("backChannelRequestTimeoutMs_="+X)),X=k;const Xn=f.g;if(Xn){const Ea=Xn.g?Xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ea){var Ie=X.h;Ie.g||Ea.indexOf("spdy")==-1&&Ea.indexOf("quic")==-1&&Ea.indexOf("h2")==-1||(Ie.j=Ie.l,Ie.g=new Set,Ie.h&&(Hr(Ie,Ie.h),Ie.h=null))}if(X.D){const _a=Xn.g?Xn.g.getResponseHeader("X-HTTP-Session-Id"):null;_a&&(X.ya=_a,br(X.I,X.D,_a))}}k.G=3,k.l&&k.l.ua(),k.ba&&(k.R=Date.now()-f.F,k.j.info("Handshake RTT: "+k.R+"ms")),X=k;var Je=f;if(X.qa=v(X,X.J?X.ia:null,X.W),Je.K){Pl(X.h,Je);var Gt=Je,ir=X.L;ir&&(Gt.I=ir),Gt.B&&(ya(Gt),$o(Gt)),X.g=Je}else oA(X);0<k.i.length&&iA(k)}else zt[0]!="stop"&&zt[0]!="close"||ds(k,7);else k.G==3&&(zt[0]=="stop"||zt[0]=="close"?zt[0]=="stop"?ds(k,7):Ki(k):zt[0]!="noop"&&k.l&&k.l.ta(zt),k.v=0)}}mr(4)}catch{}}var sh=class{constructor(f,C){this.g=f,this.map=C}};function Tl(f){this.l=f||10,A.PerformanceNavigationTiming?(f=A.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(A.chrome&&A.chrome.loadTimes&&A.chrome.loadTimes()&&A.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zc(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Xa(f){return f.h?1:f.g?f.g.size:0}function Ul(f,C){return f.h?f.h==C:f.g?f.g.has(C):!1}function Hr(f,C){f.g?f.g.add(C):f.h=C}function Pl(f,C){f.h&&f.h==C?f.h=null:f.g&&f.g.has(C)&&f.g.delete(C)}Tl.prototype.cancel=function(){if(this.i=Ql(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Ql(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let C=f.i;for(const k of f.g.values())C=C.concat(k.D);return C}return B(f.i)}function eu(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(l(f)){for(var C=[],k=f.length,X=0;X<k;X++)C.push(f[X]);return C}C=[],k=0;for(X in f)C[k++]=f[X];return C}function jl(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(l(f)||typeof f=="string"){var C=[];f=f.length;for(var k=0;k<f;k++)C.push(k);return C}C=[],k=0;for(const X in f)C[k++]=X;return C}}}function tu(f,C){if(f.forEach&&typeof f.forEach=="function")f.forEach(C,void 0);else if(l(f)||typeof f=="string")Array.prototype.forEach.call(f,C,void 0);else for(var k=jl(f),X=eu(f),xe=X.length,Ie=0;Ie<xe;Ie++)C.call(void 0,X[Ie],k&&k[Ie],f)}var Ds=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wo(f,C){if(f){f=f.split("&");for(var k=0;k<f.length;k++){var X=f[k].indexOf("="),xe=null;if(0<=X){var Ie=f[k].substring(0,X);xe=f[k].substring(X+1)}else Ie=f[k];C(Ie,xe?decodeURIComponent(xe.replace(/\+/g," ")):"")}}}function An(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof An){this.h=f.h,Ya(this,f.j),this.o=f.o,this.g=f.g,Jo(this,f.s),this.l=f.l;var C=f.i,k=new xa;k.i=C.i,C.g&&(k.g=new Map(C.g),k.h=C.h),Ll(this,k),this.m=f.m}else f&&(C=String(f).match(Ds))?(this.h=!1,Ya(this,C[1]||"",!0),this.o=eo(C[2]||""),this.g=eo(C[3]||"",!0),Jo(this,C[4]),this.l=eo(C[5]||"",!0),Ll(this,C[6]||"",!0),this.m=eo(C[7]||"")):(this.h=!1,this.i=new xa(null,this.h))}An.prototype.toString=function(){var f=[],C=this.j;C&&f.push(Oi(C,ru,!0),":");var k=this.g;return(k||C=="file")&&(f.push("//"),(C=this.o)&&f.push(Oi(C,ru,!0),"@"),f.push(encodeURIComponent(String(k)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.s,k!=null&&f.push(":",String(k))),(k=this.l)&&(this.g&&k.charAt(0)!="/"&&f.push("/"),f.push(Oi(k,k.charAt(0)=="/"?Mi:ah,!0))),(k=this.i.toString())&&f.push("?",k),(k=this.m)&&f.push("#",Oi(k,Yo)),f.join("")};function Es(f){return new An(f)}function Ya(f,C,k){f.j=k?eo(C,!0):C,f.j&&(f.j=f.j.replace(/:$/,""))}function Jo(f,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);f.s=C}else f.s=null}function Ll(f,C,k){C instanceof xa?(f.i=C,oh(f.i,f.h)):(k||(C=Oi(C,Xo)),f.i=new xa(C,f.h))}function br(f,C,k){f.i.set(C,k)}function Za(f){return br(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function eo(f,C){return f?C?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Oi(f,C,k){return typeof f=="string"?(f=encodeURI(f).replace(C,ih),k&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function ih(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var ru=/[#\/\?@]/g,ah=/[#\?:]/g,Mi=/[#\?]/g,Xo=/[#\?@]/g,Yo=/#/g;function xa(f,C){this.h=this.g=null,this.i=f||null,this.j=!!C}function Vr(f){f.g||(f.g=new Map,f.h=0,f.i&&Wo(f.i,function(C,k){f.add(decodeURIComponent(C.replace(/\+/g," ")),k)}))}t=xa.prototype,t.add=function(f,C){Vr(this),this.i=null,f=ba(this,f);var k=this.g.get(f);return k||this.g.set(f,k=[]),k.push(C),this.h+=1,this};function nu(f,C){Vr(f),C=ba(f,C),f.g.has(C)&&(f.i=null,f.h-=f.g.get(C).length,f.g.delete(C))}function kl(f,C){return Vr(f),C=ba(f,C),f.g.has(C)}t.forEach=function(f,C){Vr(this),this.g.forEach(function(k,X){k.forEach(function(xe){f.call(C,xe,X,this)},this)},this)},t.na=function(){Vr(this);const f=Array.from(this.g.values()),C=Array.from(this.g.keys()),k=[];for(let X=0;X<C.length;X++){const xe=f[X];for(let Ie=0;Ie<xe.length;Ie++)k.push(C[X])}return k},t.V=function(f){Vr(this);let C=[];if(typeof f=="string")kl(this,f)&&(C=C.concat(this.g.get(ba(this,f))));else{f=Array.from(this.g.values());for(let k=0;k<f.length;k++)C=C.concat(f[k])}return C},t.set=function(f,C){return Vr(this),this.i=null,f=ba(this,f),kl(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[C]),this.h+=1,this},t.get=function(f,C){return f?(f=this.V(f),0<f.length?String(f[0]):C):C};function Vt(f,C,k){nu(f,C),0<k.length&&(f.i=null,f.g.set(ba(f,C),B(k)),f.h+=k.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],C=Array.from(this.g.keys());for(var k=0;k<C.length;k++){var X=C[k];const Ie=encodeURIComponent(String(X)),Je=this.V(X);for(X=0;X<Je.length;X++){var xe=Ie;Je[X]!==""&&(xe+="="+encodeURIComponent(String(Je[X]))),f.push(xe)}}return this.i=f.join("&")};function ba(f,C){return C=String(C),f.j&&(C=C.toLowerCase()),C}function oh(f,C){C&&!f.j&&(Vr(f),f.i=null,f.g.forEach(function(k,X){var xe=X.toLowerCase();X!=xe&&(nu(this,X),Vt(this,xe,k))},f)),f.j=C}function gi(f,C){const k=new ct;if(A.Image){const X=new Image;X.onload=p(Zs,k,"TestLoadImage: loaded",!0,C,X),X.onerror=p(Zs,k,"TestLoadImage: error",!1,C,X),X.onabort=p(Zs,k,"TestLoadImage: abort",!1,C,X),X.ontimeout=p(Zs,k,"TestLoadImage: timeout",!1,C,X),A.setTimeout(function(){X.ontimeout&&X.ontimeout()},1e4),X.src=f}else C(!1)}function su(f,C){const k=new ct,X=new AbortController,xe=setTimeout(()=>{X.abort(),Zs(k,"TestPingServer: timeout",!1,C)},1e4);fetch(f,{signal:X.signal}).then(Ie=>{clearTimeout(xe),Ie.ok?Zs(k,"TestPingServer: ok",!0,C):Zs(k,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(xe),Zs(k,"TestPingServer: error",!1,C)})}function Zs(f,C,k,X,xe){try{xe&&(xe.onload=null,xe.onerror=null,xe.onabort=null,xe.ontimeout=null),X(k)}catch{}}function Zo(){this.g=new ur}function Dl(f,C,k){const X=k||"";try{tu(f,function(xe,Ie){let Je=xe;c(xe)&&(Je=Et(xe)),C.push(X+Ie+"="+encodeURIComponent(Je))})}catch(xe){throw C.push(X+"type="+encodeURIComponent("_badmap")),xe}}function eA(f){this.l=f.Ub||null,this.j=f.eb||!1}b(eA,St),eA.prototype.g=function(){return new tA(this.l,this.j)},eA.prototype.i=function(f){return function(){return f}}({});function tA(f,C){ht.call(this),this.D=f,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(tA,ht),t=tA.prototype,t.open=function(f,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=C,this.readyState=1,ei(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(C.body=f),(this.D||A).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Hi(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,ei(this)),this.g&&(this.readyState=3,ei(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof A.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;iu(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function iu(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var C=f.value?f.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!f.done}))&&(this.response=this.responseText+=C)}f.done?Hi(this):ei(this),this.readyState==3&&iu(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,Hi(this))},t.Qa=function(f){this.g&&(this.response=f,Hi(this))},t.ga=function(){this.g&&Hi(this)};function Hi(f){f.readyState=4,f.l=null,f.j=null,f.v=null,ei(f)}t.setRequestHeader=function(f,C){this.u.append(f,C)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],C=this.h.entries();for(var k=C.next();!k.done;)k=k.value,f.push(k[0]+": "+k[1]),k=C.next();return f.join(`\r
`)};function ei(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(tA.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Vi(f){let C="";return O(f,function(k,X){C+=X,C+=":",C+=k,C+=`\r
`}),C}function Rl(f,C,k){e:{for(X in k){var X=!1;break e}X=!0}X||(k=Vi(k),typeof f=="string"?k!=null&&encodeURIComponent(String(k)):br(f,C,k))}function yr(f){ht.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(yr,ht);var Ol=/^https?$/i,rA=["POST","PUT"];t=yr.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,C,k,X){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);C=C?C.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zt.g(),this.v=this.o?Pr(this.o):Pr(Zt),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(C,String(f),!0),this.B=!1}catch(Ie){Ml(this,Ie);return}if(f=k||"",k=new Map(this.headers),X)if(Object.getPrototypeOf(X)===Object.prototype)for(var xe in X)k.set(xe,X[xe]);else if(typeof X.keys=="function"&&typeof X.get=="function")for(const Ie of X.keys())k.set(Ie,X.get(Ie));else throw Error("Unknown input type for opt_headers: "+String(X));X=Array.from(k.keys()).find(Ie=>Ie.toLowerCase()=="content-type"),xe=A.FormData&&f instanceof A.FormData,!(0<=Array.prototype.indexOf.call(rA,C,void 0))||X||xe||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ie,Je]of k)this.g.setRequestHeader(Ie,Je);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ti(this),this.u=!0,this.g.send(f),this.u=!1}catch(Ie){Ml(this,Ie)}};function Ml(f,C){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=C,f.m=5,Hl(f),to(f)}function Hl(f){f.A||(f.A=!0,Ct(f,"complete"),Ct(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Ct(this,"complete"),Ct(this,"abort"),to(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),to(this,!0)),yr.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Vl(this):this.bb())},t.bb=function(){Vl(this)};function Vl(f){if(f.h&&typeof a<"u"&&(!f.v[1]||Fn(f)!=4||f.Z()!=2)){if(f.u&&Fn(f)==4)Nt(f.Ea,0,f);else if(Ct(f,"readystatechange"),Fn(f)==4){f.h=!1;try{const Je=f.Z();e:switch(Je){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var k;if(!(k=C)){var X;if(X=Je===0){var xe=String(f.D).match(Ds)[1]||null;!xe&&A.self&&A.self.location&&(xe=A.self.location.protocol.slice(0,-1)),X=!Ol.test(xe?xe.toLowerCase():"")}k=X}if(k)Ct(f,"complete"),Ct(f,"success");else{f.m=6;try{var Ie=2<Fn(f)?f.g.statusText:""}catch{Ie=""}f.l=Ie+" ["+f.Z()+"]",Hl(f)}}finally{to(f)}}}}function to(f,C){if(f.g){ti(f);const k=f.g,X=f.v[0]?()=>{}:null;f.g=null,f.v=null,C||Ct(f,"ready");try{k.onreadystatechange=X}catch{}}}function ti(f){f.I&&(A.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function Fn(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<Fn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var C=this.g.responseText;return f&&C.indexOf(f)==0&&(C=C.substring(f.length)),rt(C)}};function au(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Ba(f){const C={};f=(f.g&&2<=Fn(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let X=0;X<f.length;X++){if(w(f[X]))continue;var k=_(f[X]);const xe=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const Ie=C[xe]||[];C[xe]=Ie,Ie.push(k)}I(C,function(X){return X.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Jn(f,C,k){return k&&k.internalChannelParams&&k.internalChannelParams[f]||C}function nA(f){this.Aa=0,this.i=[],this.j=new ct,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Jn("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Jn("baseRetryDelayMs",5e3,f),this.cb=Jn("retryDelaySeedMs",1e4,f),this.Wa=Jn("forwardChannelMaxRetries",2,f),this.wa=Jn("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Tl(f&&f.concurrentRequestLimit),this.Da=new Zo,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=nA.prototype,t.la=8,t.G=1,t.connect=function(f,C,k,X){Me(0),this.W=f,this.H=C||{},k&&X!==void 0&&(this.H.OSID=k,this.H.OAID=X),this.F=this.X,this.I=v(this,null,this.W),iA(this)};function Ki(f){if(ro(f),f.G==3){var C=f.U++,k=Es(f.I);if(br(k,"SID",f.K),br(k,"RID",C),br(k,"TYPE","terminate"),Ca(f,k),C=new mt(f,f.j,C),C.L=2,C.v=Za(Es(k)),k=!1,A.navigator&&A.navigator.sendBeacon)try{k=A.navigator.sendBeacon(C.v.toString(),"")}catch{}!k&&A.Image&&(new Image().src=C.v,k=!0),k||(C.g=V(C.j,null),C.g.ea(C.v)),C.F=Date.now(),$o(C)}cA(f)}function sA(f){f.g&&(AA(f),f.g.cancel(),f.g=null)}function ro(f){sA(f),f.u&&(A.clearTimeout(f.u),f.u=null),qi(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&A.clearTimeout(f.s),f.s=null)}function iA(f){if(!Zc(f.h)&&!f.s){f.s=!0;var C=f.Ga;he||ne(),te||(he(),te=!0),se.add(C,f),f.B=0}}function Kl(f,C){return Xa(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=C.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=ft(m(f.Ga,f,C),lA(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const xe=new mt(this,this.j,f);let Ie=this.o;if(this.S&&(Ie?(Ie=N(Ie),D(Ie,this.S)):Ie=this.S),this.m!==null||this.O||(xe.H=Ie,Ie=null),this.P)e:{for(var C=0,k=0;k<this.i.length;k++){t:{var X=this.i[k];if("__data__"in X.map&&(X=X.map.__data__,typeof X=="string")){X=X.length;break t}X=void 0}if(X===void 0)break;if(C+=X,4096<C){C=k;break e}if(C===4096||k===this.i.length-1){C=k+1;break e}}C=1e3}else C=1e3;C=no(this,xe,C),k=Es(this.I),br(k,"RID",f),br(k,"CVER",22),this.D&&br(k,"X-HTTP-Session-Id",this.D),Ca(this,k),Ie&&(this.O?C="headers="+encodeURIComponent(String(Vi(Ie)))+"&"+C:this.m&&Rl(k,this.m,Ie)),Hr(this.h,xe),this.Ua&&br(k,"TYPE","init"),this.P?(br(k,"$req",C),br(k,"SID","null"),xe.T=!0,va(xe,k,null)):va(xe,k,C),this.G=2}}else this.G==3&&(f?aA(this,f):this.i.length==0||Zc(this.h)||aA(this))};function aA(f,C){var k;C?k=C.l:k=f.U++;const X=Es(f.I);br(X,"SID",f.K),br(X,"RID",k),br(X,"AID",f.T),Ca(f,X),f.m&&f.o&&Rl(X,f.m,f.o),k=new mt(f,f.j,k,f.B+1),f.m===null&&(k.H=f.o),C&&(f.i=C.D.concat(f.i)),C=no(f,k,1e3),k.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Hr(f.h,k),va(k,X,C)}function Ca(f,C){f.H&&O(f.H,function(k,X){br(C,X,k)}),f.l&&tu({},function(k,X){br(C,X,k)})}function no(f,C,k){k=Math.min(f.i.length,k);var X=f.l?m(f.l.Na,f.l,f):null;e:{var xe=f.i;let Ie=-1;for(;;){const Je=["count="+k];Ie==-1?0<k?(Ie=xe[0].g,Je.push("ofs="+Ie)):Ie=0:Je.push("ofs="+Ie);let Gt=!0;for(let ir=0;ir<k;ir++){let zt=xe[ir].g;const wr=xe[ir].map;if(zt-=Ie,0>zt)Ie=Math.max(0,xe[ir].g-100),Gt=!1;else try{Dl(wr,Je,"req"+zt+"_")}catch{X&&X(wr)}}if(Gt){X=Je.join("&");break e}}}return f=f.i.splice(0,k),C.D=f,X}function oA(f){if(!f.g&&!f.u){f.Y=1;var C=f.Fa;he||ne(),te||(he(),te=!0),se.add(C,f),f.v=0}}function so(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=ft(m(f.Fa,f),lA(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,ou(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=ft(m(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Me(10),sA(this),ou(this))};function AA(f){f.A!=null&&(A.clearTimeout(f.A),f.A=null)}function ou(f){f.g=new mt(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var C=Es(f.qa);br(C,"RID","rpc"),br(C,"SID",f.K),br(C,"AID",f.T),br(C,"CI",f.F?"0":"1"),!f.F&&f.ja&&br(C,"TO",f.ja),br(C,"TYPE","xmlhttp"),Ca(f,C),f.m&&f.o&&Rl(C,f.m,f.o),f.L&&(f.g.I=f.L);var k=f.g;f=f.ia,k.L=1,k.v=Za(Es(C)),k.m=null,k.P=!0,$a(k,f)}t.Za=function(){this.C!=null&&(this.C=null,sA(this),so(this),Me(19))};function qi(f){f.C!=null&&(A.clearTimeout(f.C),f.C=null)}function Na(f,C){var k=null;if(f.g==C){qi(f),AA(f),f.g=null;var X=2}else if(Ul(f.h,C))k=C.D,Pl(f.h,C),X=1;else return;if(f.G!=0){if(C.o)if(X==1){k=C.m?C.m.length:0,C=Date.now()-C.F;var xe=f.B;X=us(),Ct(X,new Ft(X,k)),iA(f)}else oA(f);else if(xe=C.s,xe==3||xe==0&&0<C.X||!(X==1&&Kl(f,C)||X==2&&so(f)))switch(k&&0<k.length&&(C=f.h,C.i=C.i.concat(k)),xe){case 1:ds(f,5);break;case 4:ds(f,10);break;case 3:ds(f,6);break;default:ds(f,2)}}}function lA(f,C){let k=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(k*=2),k*C}function ds(f,C){if(f.j.info("Error code "+C),C==2){var k=m(f.fb,f),X=f.Xa;const xe=!X;X=new An(X||"//www.google.com/images/cleardot.gif"),A.location&&A.location.protocol=="http"||Ya(X,"https"),Za(X),xe?gi(X.toString(),k):su(X.toString(),k)}else Me(2);f.G=0,f.l&&f.l.sa(C),cA(f),ro(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Me(2)):(this.j.info("Failed to ping google.com"),Me(1))};function cA(f){if(f.G=0,f.ka=[],f.l){const C=Ql(f.h);(C.length!=0||f.i.length!=0)&&(E(f.ka,C),E(f.ka,f.i),f.h.i.length=0,B(f.i),f.i.length=0),f.l.ra()}}function v(f,C,k){var X=k instanceof An?Es(k):new An(k);if(X.g!="")C&&(X.g=C+"."+X.g),Jo(X,X.s);else{var xe=A.location;X=xe.protocol,C=C?C+"."+xe.hostname:xe.hostname,xe=+xe.port;var Ie=new An(null);X&&Ya(Ie,X),C&&(Ie.g=C),xe&&Jo(Ie,xe),k&&(Ie.l=k),X=Ie}return k=f.D,C=f.ya,k&&C&&br(X,k,C),br(X,"VER",f.la),Ca(f,X),X}function V(f,C,k){if(C&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=f.Ca&&!f.pa?new yr(new eA({eb:k})):new yr(f.pa),C.Ha(f.J),C}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function le(){}t=le.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function fe(){}fe.prototype.g=function(f,C){return new be(f,C)};function be(f,C){ht.call(this),this.g=new nA(C),this.l=f,this.h=C&&C.messageUrlParams||null,f=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(f?f["X-WebChannel-Content-Type"]=C.messageContentType:f={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(f?f["X-WebChannel-Client-Profile"]=C.va:f={"X-WebChannel-Client-Profile":C.va}),this.g.S=f,(f=C&&C.Sb)&&!w(f)&&(this.g.m=f),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!w(C)&&(this.g.D=C,f=this.h,f!==null&&C in f&&(f=this.h,C in f&&delete f[C])),this.j=new lt(this)}b(be,ht),be.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},be.prototype.close=function(){Ki(this.g)},be.prototype.o=function(f){var C=this.g;if(typeof f=="string"){var k={};k.__data__=f,f=k}else this.u&&(k={},k.__data__=Et(f),f=k);C.i.push(new sh(C.Ya++,f)),C.G==3&&iA(C)},be.prototype.N=function(){this.g.l=null,delete this.j,Ki(this.g),delete this.g,be.aa.N.call(this)};function De(f){fn.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var C=f.__sm__;if(C){e:{for(const k in C){f=k;break e}f=void 0}(this.i=f)&&(f=this.i,C=C!==null&&f in C?C[f]:void 0),this.data=C}else this.data=f}b(De,fn);function $e(){vr.call(this),this.status=1}b($e,vr);function lt(f){this.g=f}b(lt,le),lt.prototype.ua=function(){Ct(this.g,"a")},lt.prototype.ta=function(f){Ct(this.g,new De(f))},lt.prototype.sa=function(f){Ct(this.g,new $e)},lt.prototype.ra=function(){Ct(this.g,"b")},fe.prototype.createWebChannel=fe.prototype.g,be.prototype.send=be.prototype.o,be.prototype.open=be.prototype.m,be.prototype.close=be.prototype.close,u4=function(){return new fe},c4=function(){return us()},l4=kt,l2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},nt.NO_ERROR=0,nt.TIMEOUT=8,nt.HTTP_ERROR=6,Vg=nt,Ot.COMPLETE="complete",A4=Ot,sr.EventType=fr,fr.OPEN="a",fr.CLOSE="b",fr.ERROR="c",fr.MESSAGE="d",ht.prototype.listen=ht.prototype.K,Zh=sr,yr.prototype.listenOnce=yr.prototype.L,yr.prototype.getLastError=yr.prototype.Ka,yr.prototype.getLastErrorCode=yr.prototype.Ba,yr.prototype.getStatus=yr.prototype.Z,yr.prototype.getResponseJson=yr.prototype.Oa,yr.prototype.getResponseText=yr.prototype.oa,yr.prototype.send=yr.prototype.ea,yr.prototype.setWithCredentials=yr.prototype.Ha,o4=yr}).apply(typeof km<"u"?km:typeof self<"u"?self:typeof window<"u"?window:{});const K5="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ns.UNAUTHENTICATED=new ns(null),ns.GOOGLE_CREDENTIALS=new ns("google-credentials-uid"),ns.FIRST_PARTY=new ns("first-party-uid"),ns.MOCK_USER=new ns("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zd="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=new hb("@firebase/firestore");function Ou(){return jc.logLevel}function Xe(t,...e){if(jc.logLevel<=Ar.DEBUG){const r=e.map(_b);jc.debug(`Firestore (${zd}): ${t}`,...r)}}function Us(t,...e){if(jc.logLevel<=Ar.ERROR){const r=e.map(_b);jc.error(`Firestore (${zd}): ${t}`,...r)}}function fl(t,...e){if(jc.logLevel<=Ar.WARN){const r=e.map(_b);jc.warn(`Firestore (${zd}): ${t}`,...r)}}function _b(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(t="Unexpected state"){const e=`FIRESTORE (${zd}) INTERNAL ASSERTION FAILED: `+t;throw Us(e),new Error(e)}function Tt(t,e){t||Bt()}function qt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class st extends qo{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class h4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(ns.UNAUTHENTICATED))}shutdown(){}}class cO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class uO{constructor(e){this.t=e,this.currentUser=ns.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Tt(this.o===void 0);let n=this.i;const s=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let i=new aa;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new aa,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},A=l=>{Xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>A(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?A(l):(Xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new aa)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Tt(typeof n.accessToken=="string"),new d4(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Tt(e===null||typeof e=="string"),new ns(e)}}class dO{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=ns.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class hO{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new dO(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(ns.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pO{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Tt(this.o===void 0);const n=i=>{i.error!=null&&Xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,Xe("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{Xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Tt(typeof r.token=="string"),this.R=r.token,new fO(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=mO(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%e.length))}return n}}function Jt(t,e){return t<e?-1:t>e?1:0}function Fd(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}function f4(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new st(Oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new st(Oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new st(Oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new st(Oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Lt.fromMillis(Date.now())}static fromDate(e){return Lt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Lt(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Jt(this.nanoseconds,e.nanoseconds):Jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new jt(e)}static min(){return new jt(new Lt(0,0))}static max(){return new jt(new Lt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,r,n){r===void 0?r=0:r>e.length&&Bt(),n===void 0?n=e.length-r:n>e.length-r&&Bt(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return sp.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof sp?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=e.get(s),a=r.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class pr extends sp{construct(e,r,n){return new pr(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new st(Oe.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new pr(r)}static emptyPath(){return new pr([])}}const gO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zr extends sp{construct(e,r,n){return new Zr(e,r,n)}static isValidIdentifier(e){return gO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Zr(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new st(Oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;s<e.length;){const A=e[s];if(A==="\\"){if(s+1===e.length)throw new st(Oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new st(Oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,s+=2}else A==="`"?(a=!a,s++):A!=="."||a?(n+=A,s++):(i(),s++)}if(i(),a)throw new st(Oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zr(r)}static emptyPath(){return new Zr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.path=e}static fromPath(e){return new dt(pr.fromString(e))}static fromName(e){return new dt(pr.fromString(e).popFirst(5))}static empty(){return new dt(pr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return pr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new dt(new pr(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e,r,n,s){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=s}}function c2(t){return t.fields.find(e=>e.kind===2)}function sc(t){return t.fields.filter(e=>e.kind!==2)}Q0.UNKNOWN_ID=-1;class Kg{constructor(e,r){this.fieldPath=e,this.kind=r}}class ip{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new ip(0,hi.min())}}function vO(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=jt.fromTimestamp(n===1e9?new Lt(r+1,0):new Lt(r,n));return new hi(s,dt.empty(),e)}function p4(t){return new hi(t.readTime,t.key,-1)}class hi{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new hi(jt.min(),dt.empty(),-1)}static max(){return new hi(jt.max(),dt.empty(),-1)}}function Sb(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=dt.comparator(t.documentKey,e.documentKey),r!==0?r:Jt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class g4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kc(t){if(t.code!==Oe.FAILED_PRECONDITION||t.message!==m4)throw t;Xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Bt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Se((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Se?r:Se.resolve(r)}catch(r){return Se.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Se.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Se.reject(r)}static resolve(e){return new Se((r,n)=>{r(e)})}static reject(e){return new Se((r,n)=>{n(e)})}static waitFor(e){return new Se((r,n)=>{let s=0,i=0,a=!1;e.forEach(A=>{++s,A.next(()=>{++i,a&&i===s&&r()},l=>n(l))}),a=!0,i===s&&r()})}static or(e){let r=Se.resolve(!1);for(const n of e)r=r.next(s=>s?Se.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new Se((n,s)=>{const i=e.length,a=new Array(i);let A=0;for(let l=0;l<i;l++){const c=l;r(e[c]).next(u=>{a[c]=u,++A,A===i&&n(a)},u=>s(u))}})}static doWhile(e,r){return new Se((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new aa,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new xf(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const s=Fb(n.target.error);this.V.reject(new xf(e,s))}}static open(e,r,n,s){try{return new Fv(r,e.transaction(s,n))}catch(i){throw new xf(r,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Xe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new wO(r)}}class ol{constructor(e,r,n){this.name=e,this.version=r,this.p=n,ol.S(kn())===12.2&&Us("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Xe("SimpleDb","Removing database:",e),oc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!vF())return!1;if(ol.v())return!0;const e=kn(),r=ol.S(e),n=0<r&&r<10,s=v4(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(Xe("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const a=i.target.result;r(a)},s.onblocked=()=>{n(new xf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const a=i.target.error;a.name==="VersionError"?n(new st(Oe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?n(new st(Oe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):n(new xf(e,a))},s.onupgradeneeded=i=>{Xe("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const a=i.target.result;this.p.O(a,s.transaction,i.oldVersion,this.version).next(()=>{Xe("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,s){const i=r==="readonly";let a=0;for(;;){++a;try{this.db=await this.M(e);const A=Fv.open(this.db,e,i?"readonly":"readwrite",n),l=s(A).next(c=>(A.g(),c)).catch(c=>(A.abort(c),Se.reject(c))).toPromise();return l.catch(()=>{}),await A.m,l}catch(A){const l=A,c=l.name!=="FirebaseError"&&a<3;if(Xe("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function v4(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class yO{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return oc(this.B.delete())}}class xf extends st{constructor(e,r){super(Oe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Sl(t){return t.name==="IndexedDbTransactionError"}class wO{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(Xe("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(Xe("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),oc(n)}add(e){return Xe("SimpleDb","ADD",this.store.name,e,e),oc(this.store.add(e))}get(e){return oc(this.store.get(e)).next(r=>(r===void 0&&(r=null),Xe("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return Xe("SimpleDb","DELETE",this.store.name,e),oc(this.store.delete(e))}count(){return Xe("SimpleDb","COUNT",this.store.name),oc(this.store.count())}U(e,r){const n=this.options(e,r),s=n.index?this.store.index(n.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(n.range);return new Se((a,A)=>{i.onerror=l=>{A(l.target.error)},i.onsuccess=l=>{a(l.target.result)}})}{const i=this.cursor(n),a=[];return this.W(i,(A,l)=>{a.push(l)}).next(()=>a)}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new Se((s,i)=>{n.onerror=a=>{i(a.target.error)},n.onsuccess=a=>{s(a.target.result)}})}j(e,r){Xe("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const s=this.cursor(n);return this.W(s,(i,a,A)=>A.delete())}J(e,r){let n;r?n=e:(n={},r=e);const s=this.cursor(n);return this.W(s,r)}Y(e){const r=this.cursor({});return new Se((n,s)=>{r.onerror=i=>{const a=Fb(i.target.error);s(a)},r.onsuccess=i=>{const a=i.target.result;a?e(a.primaryKey,a.value).next(A=>{A?a.continue():n()}):n()}})}W(e,r){const n=[];return new Se((s,i)=>{e.onerror=a=>{i(a.target.error)},e.onsuccess=a=>{const A=a.target.result;if(!A)return void s();const l=new yO(A),c=r(A.primaryKey,A.value,l);if(c instanceof Se){const u=c.catch(h=>(l.done(),Se.reject(h)));n.push(u)}l.isDone?s():l.K===null?A.continue():A.continue(l.K)}}).next(()=>Se.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function oc(t){return new Se((e,r)=>{t.onsuccess=n=>{const s=n.target.result;e(s)},t.onerror=n=>{const s=Fb(n.target.error);r(s)}})}let q5=!1;function Fb(t){const e=ol.S(kn());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new st("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return q5||(q5=!0,setTimeout(()=>{throw n},0)),n}}return t}class xO{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Xe("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{Xe("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){Sl(r)?Xe("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await Kc(r)}await this.X(6e4)})}}class bO{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){const n=new Set;let s=r,i=!0;return Se.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!n.has(a))return Xe("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,s).next(A=>{s-=A,n.add(a)});i=!1})).next(()=>r-s)}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(s=>this.localStore.localDocuments.getNextDocuments(e,r,s,n).next(i=>{const a=i.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.re(s,i)).next(A=>(Xe("IndexBackfiller",`Updating offset: ${A}`),this.localStore.indexManager.updateCollectionGroup(e,r,A))).next(()=>a.size)}))}re(e,r){let n=e;return r.changes.forEach((s,i)=>{const a=p4(i);Sb(a,n)>0&&(n=a)}),new hi(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Ui.oe=-1;function Lp(t){return t==null}function ap(t){return t===0&&1/t==-1/0}function BO(t){return typeof t=="number"&&Number.isInteger(t)&&!ap(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=G5(e)),e=CO(t.get(r),e);return G5(e)}function CO(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const i=t.charAt(s);switch(i){case"\0":r+="";break;case"":r+="";break;default:r+=i}}return r}function G5(t){return t+""}function ja(t){const e=t.length;if(Tt(e>=2),e===2)return Tt(t.charAt(0)===""&&t.charAt(1)===""),pr.emptyPath();const r=e-2,n=[];let s="";for(let i=0;i<e;){const a=t.indexOf("",i);switch((a<0||a>r)&&Bt(),t.charAt(a+1)){case"":const A=t.substring(i,a);let l;s.length===0?l=A:(s+=A,l=s,s=""),n.push(l);break;case"":s+=t.substring(i,a),s+="\0";break;case"":s+=t.substring(i,a+1);break;default:Bt()}i=a+2}return new pr(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z5=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(t,e){return[t,Qs(e)]}function y4(t,e,r){return[t,Qs(e),r]}const NO={},EO=["prefixPath","collectionGroup","readTime","documentId"],_O=["prefixPath","collectionGroup","documentId"],IO=["collectionGroup","readTime","prefixPath","documentId"],SO=["canonicalId","targetId"],FO=["targetId","path"],TO=["path","targetId"],UO=["collectionId","parent"],PO=["indexId","uid"],QO=["uid","sequenceNumber"],jO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],LO=["indexId","uid","orderedDocumentKey"],kO=["userId","collectionPath","documentId"],DO=["userId","collectionPath","largestBatchId"],RO=["userId","collectionGroup","largestBatchId"],w4=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],OO=[...w4,"documentOverlays"],x4=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],b4=x4,Tb=[...b4,"indexConfiguration","indexState","indexEntries"],MO=Tb,HO=[...Tb,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2 extends g4{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function Dn(t,e){const r=qt(t);return ol.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $5(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function qc(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function B4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,r){this.comparator=e,this.root=r||ss.EMPTY}insert(e,r){return new rn(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,ss.BLACK,null,null))}remove(e){return new rn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ss.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dm(this.root,e,this.comparator,!0)}}class Dm{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ss{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??ss.RED,this.left=s??ss.EMPTY,this.right=i??ss.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new ss(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ss.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return ss.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ss.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ss.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Bt();const e=this.left.check();if(e!==this.right.check())throw Bt();return e+(this.isRed()?0:1)}}ss.EMPTY=null,ss.RED=!0,ss.BLACK=!1;ss.EMPTY=new class{constructor(){this.size=0}get key(){throw Bt()}get value(){throw Bt()}get color(){throw Bt()}get left(){throw Bt()}get right(){throw Bt()}copy(e,r,n,s,i){return this}insert(e,r,n){return new ss(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this.comparator=e,this.data=new rn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new W5(this.data.getIterator())}getIteratorFrom(e){return new W5(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Ur)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Ur(this.comparator);return r.data=e,r}}class W5{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function bu(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this.fields=e,e.sort(Zr.comparator)}static empty(){return new zs([])}unionWith(e){let r=new Ur(Zr.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new zs(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Fd(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new C4("Invalid base64 string: "+i):i}}(e);return new Cn(r)}static fromUint8Array(e){const r=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Cn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cn.EMPTY_BYTE_STRING=new Cn("");const VO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ho(t){if(Tt(!!t),typeof t=="string"){let e=0;const r=VO.exec(t);if(Tt(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Jr(t.seconds),nanos:Jr(t.nanos)}}function Jr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function pl(t){return typeof t=="string"?Cn.fromBase64String(t):Cn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function Pb(t){const e=t.mapValue.fields.__previous_value__;return Ub(e)?Pb(e):e}function op(t){const e=Ho(t.mapValue.fields.__local_write_time__.timestampValue);return new Lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,r,n,s,i,a,A,l,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=A,this.longPollingOptions=l,this.useFetchStreams=c}}class ml{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new ml("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ml&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Gg={nullValue:"NULL_VALUE"};function Lc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ub(t)?4:N4(t)?9007199254740991:Tv(t)?10:11:Bt()}function Va(t,e){if(t===e)return!0;const r=Lc(t);if(r!==Lc(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return op(t).isEqual(op(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Ho(s.timestampValue),A=Ho(i.timestampValue);return a.seconds===A.seconds&&a.nanos===A.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return pl(s.bytesValue).isEqual(pl(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Jr(s.geoPointValue.latitude)===Jr(i.geoPointValue.latitude)&&Jr(s.geoPointValue.longitude)===Jr(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Jr(s.integerValue)===Jr(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Jr(s.doubleValue),A=Jr(i.doubleValue);return a===A?ap(a)===ap(A):isNaN(a)&&isNaN(A)}return!1}(t,e);case 9:return Fd(t.arrayValue.values||[],e.arrayValue.values||[],Va);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},A=i.mapValue.fields||{};if($5(a)!==$5(A))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(A[l]===void 0||!Va(a[l],A[l])))return!1;return!0}(t,e);default:return Bt()}}function Ap(t,e){return(t.values||[]).find(r=>Va(r,e))!==void 0}function gl(t,e){if(t===e)return 0;const r=Lc(t),n=Lc(e);if(r!==n)return Jt(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Jt(t.booleanValue,e.booleanValue);case 2:return function(i,a){const A=Jr(i.integerValue||i.doubleValue),l=Jr(a.integerValue||a.doubleValue);return A<l?-1:A>l?1:A===l?0:isNaN(A)?isNaN(l)?0:-1:1}(t,e);case 3:return J5(t.timestampValue,e.timestampValue);case 4:return J5(op(t),op(e));case 5:return Jt(t.stringValue,e.stringValue);case 6:return function(i,a){const A=pl(i),l=pl(a);return A.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const A=i.split("/"),l=a.split("/");for(let c=0;c<A.length&&c<l.length;c++){const u=Jt(A[c],l[c]);if(u!==0)return u}return Jt(A.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const A=Jt(Jr(i.latitude),Jr(a.latitude));return A!==0?A:Jt(Jr(i.longitude),Jr(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return X5(t.arrayValue,e.arrayValue);case 10:return function(i,a){var A,l,c,u;const h=i.fields||{},m=a.fields||{},p=(A=h.value)===null||A===void 0?void 0:A.arrayValue,b=(l=m.value)===null||l===void 0?void 0:l.arrayValue,B=Jt(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((u=b==null?void 0:b.values)===null||u===void 0?void 0:u.length)||0);return B!==0?B:X5(p,b)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===qA.mapValue&&a===qA.mapValue)return 0;if(i===qA.mapValue)return 1;if(a===qA.mapValue)return-1;const A=i.fields||{},l=Object.keys(A),c=a.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const m=Jt(l[h],u[h]);if(m!==0)return m;const p=gl(A[l[h]],c[u[h]]);if(p!==0)return p}return Jt(l.length,u.length)}(t.mapValue,e.mapValue);default:throw Bt()}}function J5(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Jt(t,e);const r=Ho(t),n=Ho(e),s=Jt(r.seconds,n.seconds);return s!==0?s:Jt(r.nanos,n.nanos)}function X5(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=gl(r[s],n[s]);if(i)return i}return Jt(r.length,n.length)}function Td(t){return d2(t)}function d2(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=Ho(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return pl(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return dt.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=d2(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const a of n)i?i=!1:s+=",",s+=`${a}:${d2(r.fields[a])}`;return s+"}"}(t.mapValue):Bt()}function lp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function h2(t){return!!t&&"integerValue"in t}function cp(t){return!!t&&"arrayValue"in t}function Y5(t){return!!t&&"nullValue"in t}function Z5(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zg(t){return!!t&&"mapValue"in t}function Tv(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function bf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return qc(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=bf(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=bf(t.arrayValue.values[r]);return e}return Object.assign({},t)}function N4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const E4={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function qO(t){return"nullValue"in t?Gg:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?lp(ml.empty(),dt.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Tv(t)?E4:{mapValue:{}}:Bt()}function GO(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?lp(ml.empty(),dt.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?E4:"mapValue"in t?Tv(t)?{mapValue:{}}:qA:Bt()}function eN(t,e){const r=gl(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function tN(t,e){const r=gl(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this.value=e}static empty(){return new as({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!zg(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=bf(r)}setAll(e){let r=Zr.emptyPath(),n={},s=[];e.forEach((a,A)=>{if(!r.isImmediateParentOf(A)){const l=this.getFieldsMap(r);this.applyChanges(l,n,s),n={},s=[],r=A.popLast()}a?n[A.lastSegment()]=bf(a):s.push(A.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());zg(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Va(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];zg(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){qc(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new as(bf(this.value))}}function _4(t){const e=[];return qc(t.fields,(r,n)=>{const s=new Zr([r]);if(zg(n)){const i=_4(n.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new zs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e,r,n,s,i,a,A){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=a,this.documentState=A}static newInvalidDocument(e){return new Yr(e,0,jt.min(),jt.min(),jt.min(),as.empty(),0)}static newFoundDocument(e,r,n,s){return new Yr(e,1,r,jt.min(),n,s,0)}static newNoDocument(e,r){return new Yr(e,2,r,jt.min(),jt.min(),as.empty(),0)}static newUnknownDocument(e,r){return new Yr(e,3,r,jt.min(),jt.min(),as.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(jt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=as.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=as.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=jt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,r){this.position=e,this.inclusive=r}}function rN(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?n=dt.comparator(dt.fromName(a.referenceValue),r.key):n=gl(a,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function nN(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Va(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,r="asc"){this.field=e,this.dir=r}}function zO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{}class lr extends I4{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new $O(e,r,n):r==="array-contains"?new XO(e,n):r==="in"?new Q4(e,n):r==="not-in"?new YO(e,n):r==="array-contains-any"?new ZO(e,n):new lr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new WO(e,n):new JO(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(gl(r,this.value)):r!==null&&Lc(this.value)===Lc(r)&&this.matchesComparison(gl(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Bt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _r extends I4{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new _r(e,r)}matches(e){return Pd(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Pd(t){return t.op==="and"}function f2(t){return t.op==="or"}function Qb(t){return S4(t)&&Pd(t)}function S4(t){for(const e of t.filters)if(e instanceof _r)return!1;return!0}function p2(t){if(t instanceof lr)return t.field.canonicalString()+t.op.toString()+Td(t.value);if(Qb(t))return t.filters.map(e=>p2(e)).join(",");{const e=t.filters.map(r=>p2(r)).join(",");return`${t.op}(${e})`}}function F4(t,e){return t instanceof lr?function(n,s){return s instanceof lr&&n.op===s.op&&n.field.isEqual(s.field)&&Va(n.value,s.value)}(t,e):t instanceof _r?function(n,s){return s instanceof _r&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,a,A)=>i&&F4(a,s.filters[A]),!0):!1}(t,e):void Bt()}function T4(t,e){const r=t.filters.concat(e);return _r.create(r,t.op)}function U4(t){return t instanceof lr?function(r){return`${r.field.canonicalString()} ${r.op} ${Td(r.value)}`}(t):t instanceof _r?function(r){return r.op.toString()+" {"+r.getFilters().map(U4).join(" ,")+"}"}(t):"Filter"}class $O extends lr{constructor(e,r,n){super(e,r,n),this.key=dt.fromName(n.referenceValue)}matches(e){const r=dt.comparator(e.key,this.key);return this.matchesComparison(r)}}class WO extends lr{constructor(e,r){super(e,"in",r),this.keys=P4("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class JO extends lr{constructor(e,r){super(e,"not-in",r),this.keys=P4("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function P4(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>dt.fromName(n.referenceValue))}class XO extends lr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return cp(r)&&Ap(r.arrayValue,this.value)}}class Q4 extends lr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Ap(this.value.arrayValue,r)}}class YO extends lr{constructor(e,r){super(e,"not-in",r)}matches(e){if(Ap(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Ap(this.value.arrayValue,r)}}class ZO extends lr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!cp(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Ap(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e,r=null,n=[],s=[],i=null,a=null,A=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=a,this.endAt=A,this.ue=null}}function m2(t,e=null,r=[],n=[],s=null,i=null,a=null){return new eM(t,e,r,n,s,i,a)}function kc(t){const e=qt(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>p2(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),Lp(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Td(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Td(n)).join(",")),e.ue=r}return e.ue}function kp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!zO(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!F4(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!nN(t.startAt,e.startAt)&&nN(t.endAt,e.endAt)}function j0(t){return dt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function L0(t,e){return t.filters.filter(r=>r instanceof lr&&r.field.isEqual(e))}function sN(t,e,r){let n=Gg,s=!0;for(const i of L0(t,e)){let a=Gg,A=!0;switch(i.op){case"<":case"<=":a=qO(i.value);break;case"==":case"in":case">=":a=i.value;break;case">":a=i.value,A=!1;break;case"!=":case"not-in":a=Gg}eN({value:n,inclusive:s},{value:a,inclusive:A})<0&&(n=a,s=A)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=r.position[i];eN({value:n,inclusive:s},{value:a,inclusive:r.inclusive})<0&&(n=a,s=r.inclusive);break}}return{value:n,inclusive:s}}function iN(t,e,r){let n=qA,s=!0;for(const i of L0(t,e)){let a=qA,A=!0;switch(i.op){case">=":case">":a=GO(i.value),A=!1;break;case"==":case"in":case"<=":a=i.value;break;case"<":a=i.value,A=!1;break;case"!=":case"not-in":a=qA}tN({value:n,inclusive:s},{value:a,inclusive:A})>0&&(n=a,s=A)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=r.position[i];tN({value:n,inclusive:s},{value:a,inclusive:r.inclusive})>0&&(n=a,s=r.inclusive);break}}return{value:n,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,r=null,n=[],s=[],i=null,a="F",A=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=a,this.startAt=A,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function tM(t,e,r,n,s,i,a,A){return new $d(t,e,r,n,s,i,a,A)}function Dp(t){return new $d(t)}function aN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function j4(t){return t.collectionGroup!==null}function Bf(t){const e=qt(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let A=new Ur(Zr.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(A=A.add(c.field))})}),A})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new up(i,n))}),r.has(Zr.keyField().canonicalString())||e.ce.push(new up(Zr.keyField(),n))}return e.ce}function Li(t){const e=qt(t);return e.le||(e.le=rM(e,Bf(t))),e.le}function rM(t,e){if(t.limitType==="F")return m2(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new up(s.field,i)});const r=t.endAt?new Ud(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Ud(t.startAt.position,t.startAt.inclusive):null;return m2(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function g2(t,e){const r=t.filters.concat([e]);return new $d(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function k0(t,e,r){return new $d(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Uv(t,e){return kp(Li(t),Li(e))&&t.limitType===e.limitType}function L4(t){return`${kc(Li(t))}|lt:${t.limitType}`}function Mu(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>U4(s)).join(", ")}]`),Lp(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>Td(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>Td(s)).join(",")),`Target(${n})`}(Li(t))}; limitType=${t.limitType})`}function Rp(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):dt.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of Bf(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(a,A,l){const c=rN(a,A,l);return a.inclusive?c<=0:c<0}(n.startAt,Bf(n),s)||n.endAt&&!function(a,A,l){const c=rN(a,A,l);return a.inclusive?c>=0:c>0}(n.endAt,Bf(n),s))}(t,e)}function nM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function k4(t){return(e,r)=>{let n=!1;for(const s of Bf(t)){const i=sM(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function sM(t,e,r){const n=t.field.isKeyField()?dt.comparator(e.key,r.key):function(i,a,A){const l=a.data.field(i),c=A.data.field(i);return l!==null&&c!==null?gl(l,c):Bt()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Bt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){qc(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return B4(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM=new rn(dt.comparator);function li(){return iM}const D4=new rn(dt.comparator);function ef(...t){let e=D4;for(const r of t)e=e.insert(r.key,r);return e}function R4(t){let e=D4;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function La(){return Cf()}function O4(){return Cf()}function Cf(){return new Fl(t=>t.toString(),(t,e)=>t.isEqual(e))}const aM=new rn(dt.comparator),oM=new Ur(dt.comparator);function tr(...t){let e=oM;for(const r of t)e=e.add(r);return e}const AM=new Ur(Jt);function lM(){return AM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ap(e)?"-0":e}}function M4(t){return{integerValue:""+t}}function cM(t,e){return BO(e)?M4(e):jb(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(){this._=void 0}}function uM(t,e,r){return t instanceof dp?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ub(i)&&(i=Pb(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(r,e):t instanceof Qd?V4(t,e):t instanceof jd?K4(t,e):function(s,i){const a=H4(s,i),A=oN(a)+oN(s.Pe);return h2(a)&&h2(s.Pe)?M4(A):jb(s.serializer,A)}(t,e)}function dM(t,e,r){return t instanceof Qd?V4(t,e):t instanceof jd?K4(t,e):r}function H4(t,e){return t instanceof hp?function(n){return h2(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class dp extends Pv{}class Qd extends Pv{constructor(e){super(),this.elements=e}}function V4(t,e){const r=q4(e);for(const n of t.elements)r.some(s=>Va(s,n))||r.push(n);return{arrayValue:{values:r}}}class jd extends Pv{constructor(e){super(),this.elements=e}}function K4(t,e){let r=q4(e);for(const n of t.elements)r=r.filter(s=>!Va(s,n));return{arrayValue:{values:r}}}class hp extends Pv{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function oN(t){return Jr(t.integerValue||t.doubleValue)}function q4(t){return cp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e,r){this.field=e,this.transform=r}}function fM(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof Qd&&s instanceof Qd||n instanceof jd&&s instanceof jd?Fd(n.elements,s.elements,Va):n instanceof hp&&s instanceof hp?Va(n.Pe,s.Pe):n instanceof dp&&s instanceof dp}(t.transform,e.transform)}class pM{constructor(e,r){this.version=e,this.transformResults=r}}class en{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new en}static exists(e){return new en(void 0,e)}static updateTime(e){return new en(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $g(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Qv{}function G4(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Jd(t.key,en.none()):new Wd(t.key,t.data,en.none());{const r=t.data,n=as.empty();let s=new Ur(Zr.comparator);for(let i of e.fields)if(!s.has(i)){let a=r.field(i);a===null&&i.length>1&&(i=i.popLast(),a=r.field(i)),a===null?n.delete(i):n.set(i,a),s=s.add(i)}return new Go(t.key,n,new zs(s.toArray()),en.none())}}function mM(t,e,r){t instanceof Wd?function(s,i,a){const A=s.value.clone(),l=lN(s.fieldTransforms,i,a.transformResults);A.setAll(l),i.convertToFoundDocument(a.version,A).setHasCommittedMutations()}(t,e,r):t instanceof Go?function(s,i,a){if(!$g(s.precondition,i))return void i.convertToUnknownDocument(a.version);const A=lN(s.fieldTransforms,i,a.transformResults),l=i.data;l.setAll(z4(s)),l.setAll(A),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,r):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function Nf(t,e,r,n){return t instanceof Wd?function(i,a,A,l){if(!$g(i.precondition,a))return A;const c=i.value.clone(),u=cN(i.fieldTransforms,l,a);return c.setAll(u),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof Go?function(i,a,A,l){if(!$g(i.precondition,a))return A;const c=cN(i.fieldTransforms,l,a),u=a.data;return u.setAll(z4(i)),u.setAll(c),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),A===null?null:A.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,r,n):function(i,a,A){return $g(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):A}(t,e,r)}function gM(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=H4(n.transform,s||null);i!=null&&(r===null&&(r=as.empty()),r.set(n.field,i))}return r||null}function AN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Fd(n,s,(i,a)=>fM(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Wd extends Qv{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Go extends Qv{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function z4(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function lN(t,e,r){const n=new Map;Tt(t.length===r.length);for(let s=0;s<r.length;s++){const i=t[s],a=i.transform,A=e.data.field(i.field);n.set(i.field,dM(a,A,r[s]))}return n}function cN(t,e,r){const n=new Map;for(const s of t){const i=s.transform,a=r.data.field(s.field);n.set(s.field,uM(i,a,e))}return n}class Jd extends Qv{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Lb extends Qv{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&mM(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Nf(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Nf(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=O4();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let A=this.applyToLocalView(a,i.mutatedFields);A=r.has(s.key)?null:A;const l=G4(a,A);l!==null&&n.set(s.key,l),a.isValidDocument()||a.convertToNoDocument(jt.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),tr())}isEqual(e){return this.batchId===e.batchId&&Fd(this.mutations,e.mutations,(r,n)=>AN(r,n))&&Fd(this.baseMutations,e.baseMutations,(r,n)=>AN(r,n))}}class Db{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){Tt(e.mutations.length===n.length);let s=function(){return aM}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,n[a].version);return new Db(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _n,cr;function $4(t){switch(t){default:return Bt();case Oe.CANCELLED:case Oe.UNKNOWN:case Oe.DEADLINE_EXCEEDED:case Oe.RESOURCE_EXHAUSTED:case Oe.INTERNAL:case Oe.UNAVAILABLE:case Oe.UNAUTHENTICATED:return!1;case Oe.INVALID_ARGUMENT:case Oe.NOT_FOUND:case Oe.ALREADY_EXISTS:case Oe.PERMISSION_DENIED:case Oe.FAILED_PRECONDITION:case Oe.ABORTED:case Oe.OUT_OF_RANGE:case Oe.UNIMPLEMENTED:case Oe.DATA_LOSS:return!0}}function W4(t){if(t===void 0)return Us("GRPC error has no .code"),Oe.UNKNOWN;switch(t){case _n.OK:return Oe.OK;case _n.CANCELLED:return Oe.CANCELLED;case _n.UNKNOWN:return Oe.UNKNOWN;case _n.DEADLINE_EXCEEDED:return Oe.DEADLINE_EXCEEDED;case _n.RESOURCE_EXHAUSTED:return Oe.RESOURCE_EXHAUSTED;case _n.INTERNAL:return Oe.INTERNAL;case _n.UNAVAILABLE:return Oe.UNAVAILABLE;case _n.UNAUTHENTICATED:return Oe.UNAUTHENTICATED;case _n.INVALID_ARGUMENT:return Oe.INVALID_ARGUMENT;case _n.NOT_FOUND:return Oe.NOT_FOUND;case _n.ALREADY_EXISTS:return Oe.ALREADY_EXISTS;case _n.PERMISSION_DENIED:return Oe.PERMISSION_DENIED;case _n.FAILED_PRECONDITION:return Oe.FAILED_PRECONDITION;case _n.ABORTED:return Oe.ABORTED;case _n.OUT_OF_RANGE:return Oe.OUT_OF_RANGE;case _n.UNIMPLEMENTED:return Oe.UNIMPLEMENTED;case _n.DATA_LOSS:return Oe.DATA_LOSS;default:return Bt()}}(cr=_n||(_n={}))[cr.OK=0]="OK",cr[cr.CANCELLED=1]="CANCELLED",cr[cr.UNKNOWN=2]="UNKNOWN",cr[cr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cr[cr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cr[cr.NOT_FOUND=5]="NOT_FOUND",cr[cr.ALREADY_EXISTS=6]="ALREADY_EXISTS",cr[cr.PERMISSION_DENIED=7]="PERMISSION_DENIED",cr[cr.UNAUTHENTICATED=16]="UNAUTHENTICATED",cr[cr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cr[cr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cr[cr.ABORTED=10]="ABORTED",cr[cr.OUT_OF_RANGE=11]="OUT_OF_RANGE",cr[cr.UNIMPLEMENTED=12]="UNIMPLEMENTED",cr[cr.INTERNAL=13]="INTERNAL",cr[cr.UNAVAILABLE=14]="UNAVAILABLE",cr[cr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM=new wc([4294967295,4294967295],0);function uN(t){const e=yM().encode(t),r=new a4;return r.update(e),new Uint8Array(r.digest())}function dN(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new wc([r,n],0),new wc([s,i],0)]}class Ob{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new tf(`Invalid padding: ${r}`);if(n<0)throw new tf(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new tf(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new tf(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=wc.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(wc.fromNumber(n)));return s.compare(wM)===1&&(s=new wc([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=uN(e),[n,s]=dN(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);if(!this.de(a))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Ob(i,s,r);return n.forEach(A=>a.insert(A)),a}insert(e){if(this.Ie===0)return;const r=uN(e),[n,s]=dN(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);this.Ae(a)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class tf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,Op.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new jv(jt.min(),s,new rn(Jt),li(),tr())}}class Op{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Op(n,r,tr(),tr(),tr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class J4{constructor(e,r){this.targetId=e,this.me=r}}class X4{constructor(e,r,n=Cn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class hN{constructor(){this.fe=0,this.ge=pN(),this.pe=Cn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=tr(),r=tr(),n=tr();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:Bt()}}),new Op(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=pN()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Tt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class xM{constructor(e){this.Le=e,this.Be=new Map,this.ke=li(),this.qe=fN(),this.Qe=new rn(Jt)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Bt()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const i=s.target;if(j0(i))if(n===0){const a=new dt(i.path);this.Ue(r,a,Yr.newNoDocument(a,jt.min()))}else Tt(n===1);else{const a=this.Ye(r);if(a!==n){const A=this.Ze(e),l=A?this.Xe(A,e,a):1;if(l!==0){this.je(r);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let a,A;try{a=pl(n).toUint8Array()}catch(l){if(l instanceof C4)return fl("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{A=new Ob(a,s,i)}catch(l){return fl(l instanceof tf?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return A.Ie===0?null:A}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const a=this.Le.tt(),A=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(A)||(this.Ue(r,i,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((i,a)=>{const A=this.Je(a);if(A){if(i.current&&j0(A.target)){const l=new dt(A.target.path);this.ke.get(l)!==null||this.it(a,l)||this.Ue(a,l,Yr.newNoDocument(l,e))}i.be&&(r.set(a,i.ve()),i.Ce())}});let n=tr();this.qe.forEach((i,a)=>{let A=!0;a.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(A=!1,!1)}),A&&(n=n.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new jv(e,r,this.Qe,this.ke,n);return this.ke=li(),this.qe=fN(),this.Qe=new rn(Jt),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new hN,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Ur(Jt),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||Xe("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new hN),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function fN(){return new rn(dt.comparator)}function pN(){return new rn(dt.comparator)}const bM={asc:"ASCENDING",desc:"DESCENDING"},BM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CM={and:"AND",or:"OR"};class NM{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function v2(t,e){return t.useProto3Json||Lp(e)?e:{value:e}}function Ld(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Y4(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function EM(t,e){return Ld(t,e.toTimestamp())}function zn(t){return Tt(!!t),jt.fromTimestamp(function(r){const n=Ho(r);return new Lt(n.seconds,n.nanos)}(t))}function Mb(t,e){return y2(t,e).canonicalString()}function y2(t,e){const r=function(s){return new pr(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function Z4(t){const e=pr.fromString(t);return Tt(AT(e)),e}function fp(t,e){return Mb(t.databaseId,e.path)}function To(t,e){const r=Z4(e);if(r.get(1)!==t.databaseId.projectId)throw new st(Oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new st(Oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new dt(rT(r))}function eT(t,e){return Mb(t.databaseId,e)}function tT(t){const e=Z4(t);return e.length===4?pr.emptyPath():rT(e)}function w2(t){return new pr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function rT(t){return Tt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function mN(t,e,r){return{name:fp(t,e),fields:r.value.mapValue.fields}}function _M(t,e,r){const n=To(t,e.name),s=zn(e.updateTime),i=e.createTime?zn(e.createTime):jt.min(),a=new as({mapValue:{fields:e.fields}}),A=Yr.newFoundDocument(n,s,i,a);return r&&A.setHasCommittedMutations(),r?A.setHasCommittedMutations():A}function IM(t,e){return"found"in e?function(n,s){Tt(!!s.found),s.found.name,s.found.updateTime;const i=To(n,s.found.name),a=zn(s.found.updateTime),A=s.found.createTime?zn(s.found.createTime):jt.min(),l=new as({mapValue:{fields:s.found.fields}});return Yr.newFoundDocument(i,a,A,l)}(t,e):"missing"in e?function(n,s){Tt(!!s.missing),Tt(!!s.readTime);const i=To(n,s.missing),a=zn(s.readTime);return Yr.newNoDocument(i,a)}(t,e):Bt()}function SM(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Bt()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(Tt(u===void 0||typeof u=="string"),Cn.fromBase64String(u||"")):(Tt(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Cn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,A=a&&function(c){const u=c.code===void 0?Oe.UNKNOWN:W4(c.code);return new st(u,c.message||"")}(a);r=new X4(n,s,i,A||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=To(t,n.document.name),i=zn(n.document.updateTime),a=n.document.createTime?zn(n.document.createTime):jt.min(),A=new as({mapValue:{fields:n.document.fields}}),l=Yr.newFoundDocument(s,i,a,A),c=n.targetIds||[],u=n.removedTargetIds||[];r=new Wg(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=To(t,n.document),i=n.readTime?zn(n.readTime):jt.min(),a=Yr.newNoDocument(s,i),A=n.removedTargetIds||[];r=new Wg([],A,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=To(t,n.document),i=n.removedTargetIds||[];r=new Wg([],i,s,null)}else{if(!("filter"in e))return Bt();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,a=new vM(s,i),A=n.targetId;r=new J4(A,a)}}return r}function pp(t,e){let r;if(e instanceof Wd)r={update:mN(t,e.key,e.value)};else if(e instanceof Jd)r={delete:fp(t,e.key)};else if(e instanceof Go)r={update:mN(t,e.key,e.data),updateMask:jM(e.fieldMask)};else{if(!(e instanceof Lb))return Bt();r={verify:fp(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,a){const A=a.transform;if(A instanceof dp)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(A instanceof Qd)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:A.elements}};if(A instanceof jd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:A.elements}};if(A instanceof hp)return{fieldPath:a.field.canonicalString(),increment:A.Pe};throw Bt()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:EM(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Bt()}(t,e.precondition)),r}function x2(t,e){const r=e.currentDocument?function(i){return i.updateTime!==void 0?en.updateTime(zn(i.updateTime)):i.exists!==void 0?en.exists(i.exists):en.none()}(e.currentDocument):en.none(),n=e.updateTransforms?e.updateTransforms.map(s=>function(a,A){let l=null;if("setToServerValue"in A)Tt(A.setToServerValue==="REQUEST_TIME"),l=new dp;else if("appendMissingElements"in A){const u=A.appendMissingElements.values||[];l=new Qd(u)}else if("removeAllFromArray"in A){const u=A.removeAllFromArray.values||[];l=new jd(u)}else"increment"in A?l=new hp(a,A.increment):Bt();const c=Zr.fromServerFormat(A.fieldPath);return new hM(c,l)}(t,s)):[];if(e.update){e.update.name;const s=To(t,e.update.name),i=new as({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(l){const c=l.fieldPaths||[];return new zs(c.map(u=>Zr.fromServerFormat(u)))}(e.updateMask);return new Go(s,i,a,r,n)}return new Wd(s,i,r,n)}if(e.delete){const s=To(t,e.delete);return new Jd(s,r)}if(e.verify){const s=To(t,e.verify);return new Lb(s,r)}return Bt()}function FM(t,e){return t&&t.length>0?(Tt(e!==void 0),t.map(r=>function(s,i){let a=s.updateTime?zn(s.updateTime):zn(i);return a.isEqual(jt.min())&&(a=zn(i)),new pM(a,s.transformResults||[])}(r,e))):[]}function nT(t,e){return{documents:[eT(t,e.path)]}}function sT(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=eT(t,s);const i=function(c){if(c.length!==0)return oT(_r.create(c,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const a=function(c){if(c.length!==0)return c.map(u=>function(m){return{field:Hu(m.field),direction:UM(m.dir)}}(u))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const A=v2(t,e.limit);return A!==null&&(r.structuredQuery.limit=A),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:r,parent:s}}function iT(t){let e=tT(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){Tt(n===1);const u=r.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];r.where&&(i=function(h){const m=aT(h);return m instanceof _r&&Qb(m)?m.getFilters():[m]}(r.where));let a=[];r.orderBy&&(a=function(h){return h.map(m=>function(b){return new up(Vu(b.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(r.orderBy));let A=null;r.limit&&(A=function(h){let m;return m=typeof h=="object"?h.value:h,Lp(m)?null:m}(r.limit));let l=null;r.startAt&&(l=function(h){const m=!!h.before,p=h.values||[];return new Ud(p,m)}(r.startAt));let c=null;return r.endAt&&(c=function(h){const m=!h.before,p=h.values||[];return new Ud(p,m)}(r.endAt)),tM(e,s,a,i,A,"F",l,c)}function TM(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Bt()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function aT(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Vu(r.unaryFilter.field);return lr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Vu(r.unaryFilter.field);return lr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Vu(r.unaryFilter.field);return lr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Vu(r.unaryFilter.field);return lr.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Bt()}}(t):t.fieldFilter!==void 0?function(r){return lr.create(Vu(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Bt()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return _r.create(r.compositeFilter.filters.map(n=>aT(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Bt()}}(r.compositeFilter.op))}(t):Bt()}function UM(t){return bM[t]}function PM(t){return BM[t]}function QM(t){return CM[t]}function Hu(t){return{fieldPath:t.canonicalString()}}function Vu(t){return Zr.fromServerFormat(t.fieldPath)}function oT(t){return t instanceof lr?function(r){if(r.op==="=="){if(Z5(r.value))return{unaryFilter:{field:Hu(r.field),op:"IS_NAN"}};if(Y5(r.value))return{unaryFilter:{field:Hu(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Z5(r.value))return{unaryFilter:{field:Hu(r.field),op:"IS_NOT_NAN"}};if(Y5(r.value))return{unaryFilter:{field:Hu(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hu(r.field),op:PM(r.op),value:r.value}}}(t):t instanceof _r?function(r){const n=r.getFilters().map(s=>oT(s));return n.length===1?n[0]:{compositeFilter:{op:QM(r.op),filters:n}}}(t):Bt()}function jM(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function AT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,r,n,s,i=jt.min(),a=jt.min(),A=Cn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=A,this.expectedCount=l}withSequenceNumber(e){return new Eo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Eo(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Eo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Eo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e){this.ct=e}}function LM(t,e){let r;if(e.document)r=_M(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=dt.fromSegments(e.noDocument.path),s=Rc(e.noDocument.readTime);r=Yr.newNoDocument(n,s),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Bt();{const n=dt.fromSegments(e.unknownDocument.path),s=Rc(e.unknownDocument.version);r=Yr.newUnknownDocument(n,s)}}return e.readTime&&r.setReadTime(function(s){const i=new Lt(s[0],s[1]);return jt.fromTimestamp(i)}(e.readTime)),r}function gN(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:D0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(i,a){return{name:fp(i,a.key),fields:a.data.value.mapValue.fields,updateTime:Ld(i,a.version.toTimestamp()),createTime:Ld(i,a.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:Dc(e.version)};else{if(!e.isUnknownDocument())return Bt();n.unknownDocument={path:r.path.toArray(),version:Dc(e.version)}}return n}function D0(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Dc(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Rc(t){const e=new Lt(t.seconds,t.nanoseconds);return jt.fromTimestamp(e)}function Ac(t,e){const r=(e.baseMutations||[]).map(i=>x2(t.ct,i));for(let i=0;i<e.mutations.length-1;++i){const a=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const A=e.mutations[i+1];a.updateTransforms=A.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const n=e.mutations.map(i=>x2(t.ct,i)),s=Lt.fromMillis(e.localWriteTimeMs);return new kb(e.batchId,s,r,n)}function rf(t){const e=Rc(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?Rc(t.lastLimboFreeSnapshotVersion):jt.min();let n;return n=function(i){return i.documents!==void 0}(t.query)?function(i){return Tt(i.documents.length===1),Li(Dp(tT(i.documents[0])))}(t.query):function(i){return Li(iT(i))}(t.query),new Eo(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,Cn.fromBase64String(t.resumeToken))}function cT(t,e){const r=Dc(e.snapshotVersion),n=Dc(e.lastLimboFreeSnapshotVersion);let s;s=j0(e.target)?nT(t.ct,e.target):sT(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:kc(e.target),readTime:r,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function uT(t){const e=iT({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?k0(e,e.limit,"L"):e}function gw(t,e){return new Rb(e.largestBatchId,x2(t.ct,e.overlayMutation))}function vN(t,e){const r=e.path.lastSegment();return[t,Qs(e.path.popLast()),r]}function yN(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:Dc(n.readTime),documentKey:Qs(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{getBundleMetadata(e,r){return wN(e).get(r).next(n=>{if(n)return function(i){return{id:i.bundleId,createTime:Rc(i.createTime),version:i.version}}(n)})}saveBundleMetadata(e,r){return wN(e).put(function(s){return{bundleId:s.id,createTime:Dc(zn(s.createTime)),version:s.version}}(r))}getNamedQuery(e,r){return xN(e).get(r).next(n=>{if(n)return function(i){return{name:i.name,query:uT(i.bundledQuery),readTime:Rc(i.readTime)}}(n)})}saveNamedQuery(e,r){return xN(e).put(function(s){return{name:s.name,readTime:Dc(zn(s.readTime)),bundledQuery:s.bundledQuery}}(r))}}function wN(t){return Dn(t,"bundles")}function xN(t){return Dn(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new Lv(e,n)}getOverlay(e,r){return Th(e).get(vN(this.userId,r)).next(n=>n?gw(this.serializer,n):null)}getOverlays(e,r){const n=La();return Se.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){const s=[];return n.forEach((i,a)=>{const A=new Rb(r,a);s.push(this.ht(e,A))}),Se.waitFor(s)}removeOverlaysForBatchId(e,r,n){const s=new Set;r.forEach(a=>s.add(Qs(a.getCollectionPath())));const i=[];return s.forEach(a=>{const A=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,n+1],!1,!0);i.push(Th(e).j("collectionPathOverlayIndex",A))}),Se.waitFor(i)}getOverlaysForCollection(e,r,n){const s=La(),i=Qs(r),a=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Th(e).U("collectionPathOverlayIndex",a).next(A=>{for(const l of A){const c=gw(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,r,n,s){const i=La();let a;const A=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Th(e).J({index:"collectionGroupOverlayIndex",range:A},(l,c,u)=>{const h=gw(this.serializer,c);i.size()<s||h.largestBatchId===a?(i.set(h.getKey(),h),a=h.largestBatchId):u.done()}).next(()=>i)}ht(e,r){return Th(e).put(function(s,i,a){const[A,l,c]=vN(i,a.mutation.key);return{userId:i,collectionPath:l,documentId:c,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:pp(s.ct,a.mutation)}}(this.serializer,this.userId,r))}}function Th(t){return Dn(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{Pt(e){return Dn(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?Cn.fromUint8Array(n):Cn.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(Jr(e.integerValue));else if("doubleValue"in e){const n=Jr(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),ap(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=Ho(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(pl(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?N4(e)?this.dt(r,Number.MAX_SAFE_INTEGER):Tv(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):Bt()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const s of Object.keys(n))this.Vt(s,r),this.Tt(n[s],r)}wt(e,r){var n,s;const i=e.fields||{};this.dt(r,53);const a="value",A=((s=(n=i[a].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.length)||0;this.dt(r,15),r.At(Jr(A)),this.Vt(a,r),this.Tt(i[a],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const s of n)this.Tt(s,r)}yt(e,r){this.dt(r,37),dt.fromName(e).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}lc.vt=new lc;function RM(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function bN(t){const e=64-function(n){let s=0;for(let i=0;i<8;++i){const a=RM(255&n[i]);if(s+=a,a!==8)break}return s}(t);return Math.ceil(e/8)}class OM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const s=r.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const s=r.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const r=this.qt(e),n=bN(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=255&r[s]}Kt(e){const r=this.qt(e),n=bN(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=~(255&r[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let s=1;s<r.length;++s)r[s]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class MM{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class HM{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Uh{constructor(){this.jt=new OM,this.Ht=new MM(this.jt),this.Jt=new HM(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,r,n,s){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=s}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new cc(this.indexId,this.documentKey,this.arrayValue,n)}}function CA(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=BN(t.arrayValue,e.arrayValue),r!==0?r:(r=BN(t.directionalValue,e.directionalValue),r!==0?r:dt.comparator(t.documentKey,e.documentKey)))}function BN(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e){this.Xt=new Ur((r,n)=>Zr.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(Tt(e.collectionGroup===this.collectionId),this.nn)return!1;const r=c2(e);if(r!==void 0&&!this.sn(r))return!1;const n=sc(e);let s=new Set,i=0,a=0;for(;i<n.length&&this.sn(n[i]);++i)s=s.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Xt.size>0){const A=this.Xt.getIterator().getNext();if(!s.has(A.field.canonicalString())){const l=n[i];if(!this.on(A,l)||!this._n(this.en[a++],l))return!1}++i}for(;i<n.length;++i){const A=n[i];if(a>=this.en.length||!this._n(this.en[a++],A))return!1}return!0}an(){if(this.nn)return null;let e=new Ur(Zr.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new Kg(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new Kg(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new Kg(n.field,n.dir==="asc"?0:1)));return new Q0(Q0.UNKNOWN_ID,this.collectionId,r,ip.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(t){var e,r;if(Tt(t instanceof lr||t instanceof _r),t instanceof lr){if(t instanceof Q4){const s=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(i=>lr.create(t.field,"==",i)))||[];return _r.create(s,"or")}return t}const n=t.filters.map(s=>dT(s));return _r.create(n,t.op)}function VM(t){if(t.getFilters().length===0)return[];const e=C2(dT(t));return Tt(hT(e)),b2(e)||B2(e)?[e]:e.getFilters()}function b2(t){return t instanceof lr}function B2(t){return t instanceof _r&&Qb(t)}function hT(t){return b2(t)||B2(t)||function(r){if(r instanceof _r&&f2(r)){for(const n of r.getFilters())if(!b2(n)&&!B2(n))return!1;return!0}return!1}(t)}function C2(t){if(Tt(t instanceof lr||t instanceof _r),t instanceof lr)return t;if(t.filters.length===1)return C2(t.filters[0]);const e=t.filters.map(n=>C2(n));let r=_r.create(e,t.op);return r=R0(r),hT(r)?r:(Tt(r instanceof _r),Tt(Pd(r)),Tt(r.filters.length>1),r.filters.reduce((n,s)=>Hb(n,s)))}function Hb(t,e){let r;return Tt(t instanceof lr||t instanceof _r),Tt(e instanceof lr||e instanceof _r),r=t instanceof lr?e instanceof lr?function(s,i){return _r.create([s,i],"and")}(t,e):NN(t,e):e instanceof lr?NN(e,t):function(s,i){if(Tt(s.filters.length>0&&i.filters.length>0),Pd(s)&&Pd(i))return T4(s,i.getFilters());const a=f2(s)?s:i,A=f2(s)?i:s,l=a.filters.map(c=>Hb(c,A));return _r.create(l,"or")}(t,e),R0(r)}function NN(t,e){if(Pd(e))return T4(e,t.getFilters());{const r=e.filters.map(n=>Hb(t,n));return _r.create(r,"or")}}function R0(t){if(Tt(t instanceof lr||t instanceof _r),t instanceof lr)return t;const e=t.getFilters();if(e.length===1)return R0(e[0]);if(S4(t))return t;const r=e.map(s=>R0(s)),n=[];return r.forEach(s=>{s instanceof lr?n.push(s):s instanceof _r&&(s.op===t.op?n.push(...s.filters):n.push(s))}),n.length===1?n[0]:_r.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(){this.un=new Vb}addToCollectionParentIndex(e,r){return this.un.add(r),Se.resolve()}getCollectionParents(e,r){return Se.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Se.resolve()}deleteFieldIndex(e,r){return Se.resolve()}deleteAllFieldIndexes(e){return Se.resolve()}createTargetIndexes(e,r){return Se.resolve()}getDocumentsMatchingTarget(e,r){return Se.resolve(null)}getIndexType(e,r){return Se.resolve(0)}getFieldIndexes(e,r){return Se.resolve([])}getNextCollectionGroupToUpdate(e){return Se.resolve(null)}getMinOffset(e,r){return Se.resolve(hi.min())}getMinOffsetFromCollectionGroup(e,r){return Se.resolve(hi.min())}updateCollectionGroup(e,r,n){return Se.resolve()}updateIndexEntries(e,r){return Se.resolve()}}class Vb{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new Ur(pr.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Ur(pr.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm=new Uint8Array(0);class qM{constructor(e,r){this.databaseId=r,this.cn=new Vb,this.ln=new Fl(n=>kc(n),(n,s)=>kp(n,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),s=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const i={collectionId:n,parent:Qs(s)};return EN(e).put(i)}return Se.resolve()}getCollectionParents(e,r){const n=[],s=IDBKeyRange.bound([r,""],[f4(r),""],!1,!0);return EN(e).U(s).next(i=>{for(const a of i){if(a.collectionId!==r)break;n.push(ja(a.parent))}return n})}addFieldIndex(e,r){const n=Ph(e),s=function(A){return{indexId:A.indexId,collectionGroup:A.collectionGroup,fields:A.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(r);delete s.indexId;const i=n.add(s);if(r.indexState){const a=Cu(e);return i.next(A=>{a.put(yN(A,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return i.next()}deleteFieldIndex(e,r){const n=Ph(e),s=Cu(e),i=Bu(e);return n.delete(r.indexId).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=Ph(e),n=Bu(e),s=Cu(e);return r.j().next(()=>n.j()).next(()=>s.j())}createTargetIndexes(e,r){return Se.forEach(this.hn(r),n=>this.getIndexType(e,n).next(s=>{if(s===0||s===1){const i=new CN(n).an();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,r){const n=Bu(e);let s=!0;const i=new Map;return Se.forEach(this.hn(r),a=>this.Pn(e,a).next(A=>{s&&(s=!!A),i.set(a,A)})).next(()=>{if(s){let a=tr();const A=[];return Se.forEach(i,(l,c)=>{Xe("IndexedDbIndexManager",`Using index ${function(S){return`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(M=>`${M.fieldPath}:${M.kind}`).join(",")}`}(l)} to execute ${kc(r)}`);const u=function(S,M){const R=c2(M);if(R===void 0)return null;for(const O of L0(S,R.fieldPath))switch(O.op){case"array-contains-any":return O.value.arrayValue.values||[];case"array-contains":return[O.value]}return null}(c,l),h=function(S,M){const R=new Map;for(const O of sc(M))for(const I of L0(S,O.fieldPath))switch(I.op){case"==":case"in":R.set(O.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return R.set(O.fieldPath.canonicalString(),I.value),Array.from(R.values())}return null}(c,l),m=function(S,M){const R=[];let O=!0;for(const I of sc(M)){const N=I.kind===0?sN(S,I.fieldPath,S.startAt):iN(S,I.fieldPath,S.startAt);R.push(N.value),O&&(O=N.inclusive)}return new Ud(R,O)}(c,l),p=function(S,M){const R=[];let O=!0;for(const I of sc(M)){const N=I.kind===0?iN(S,I.fieldPath,S.endAt):sN(S,I.fieldPath,S.endAt);R.push(N.value),O&&(O=N.inclusive)}return new Ud(R,O)}(c,l),b=this.In(l,c,m),B=this.In(l,c,p),E=this.Tn(l,c,h),y=this.En(l.indexId,u,b,m.inclusive,B,p.inclusive,E);return Se.forEach(y,w=>n.G(w,r.limit).next(S=>{S.forEach(M=>{const R=dt.fromSegments(M.documentKey);a.has(R)||(a=a.add(R),A.push(R))})}))}).next(()=>A)}return Se.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=VM(_r.create(e.filters,"and")).map(n=>m2(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,n,s,i,a,A){const l=(r!=null?r.length:1)*Math.max(n.length,i.length),c=l/(r!=null?r.length:1),u=[];for(let h=0;h<l;++h){const m=r?this.dn(r[h/c]):Rm,p=this.An(e,m,n[h%c],s),b=this.Rn(e,m,i[h%c],a),B=A.map(E=>this.An(e,m,E,!0));u.push(...this.createRange(p,b,B))}return u}An(e,r,n,s){const i=new cc(e,dt.empty(),r,n);return s?i:i.Zt()}Rn(e,r,n,s){const i=new cc(e,dt.empty(),r,n);return s?i.Zt():i}Pn(e,r){const n=new CN(r),s=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let a=null;for(const A of i)n.rn(A)&&(!a||A.fields.length>a.fields.length)&&(a=A);return a})}getIndexType(e,r){let n=2;const s=this.hn(r);return Se.forEach(s,i=>this.Pn(e,i).next(a=>{a?n!==0&&a.fields.length<function(l){let c=new Ur(Zr.comparator),u=!1;for(const h of l.filters)for(const m of h.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?u=!0:c=c.add(m.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(u?1:0)}(i)&&(n=1):n=0})).next(()=>function(a){return a.limit!==null}(r)&&s.length>1&&n===2?1:n)}Vn(e,r){const n=new Uh;for(const s of sc(e)){const i=r.data.field(s.fieldPath);if(i==null)return null;const a=n.Yt(s.kind);lc.vt.It(i,a)}return n.zt()}dn(e){const r=new Uh;return lc.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new Uh;return lc.vt.It(lp(this.databaseId,r),n.Yt(function(i){const a=sc(i);return a.length===0?0:a[a.length-1].kind}(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let s=[];s.push(new Uh);let i=0;for(const a of sc(e)){const A=n[i++];for(const l of s)if(this.fn(r,a.fieldPath)&&cp(A))s=this.gn(s,a,A);else{const c=l.Yt(a.kind);lc.vt.It(A,c)}}return this.pn(s)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const s=[...e],i=[];for(const a of n.arrayValue.values||[])for(const A of s){const l=new Uh;l.seed(A.zt()),lc.vt.It(a,l.Yt(r.kind)),i.push(l)}return i}fn(e,r){return!!e.filters.find(n=>n instanceof lr&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=Ph(e),s=Cu(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(i=>{const a=[];return Se.forEach(i,A=>s.get([A.indexId,this.uid]).next(l=>{a.push(function(u,h){const m=h?new ip(h.sequenceNumber,new hi(Rc(h.readTime),new dt(ja(h.documentKey)),h.largestBatchId)):ip.empty(),p=u.fields.map(([b,B])=>new Kg(Zr.fromServerFormat(b),B));return new Q0(u.indexId,u.collectionGroup,p,m)}(A,l))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,s)=>{const i=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:Jt(n.collectionGroup,s.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const s=Ph(e),i=Cu(e);return this.yn(e).next(a=>s.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(A=>Se.forEach(A,l=>i.put(yN(l.indexId,this.uid,a,n)))))}updateIndexEntries(e,r){const n=new Map;return Se.forEach(r,(s,i)=>{const a=n.get(s.collectionGroup);return(a?Se.resolve(a):this.getFieldIndexes(e,s.collectionGroup)).next(A=>(n.set(s.collectionGroup,A),Se.forEach(A,l=>this.wn(e,s,l).next(c=>{const u=this.Sn(i,l);return c.isEqual(u)?Se.resolve():this.bn(e,i,l,c,u)}))))})}Dn(e,r,n,s){return Bu(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,s){return Bu(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const s=Bu(e);let i=new Ur(CA);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(a,A)=>{i=i.add(new cc(n.indexId,r,A.arrayValue,A.directionalValue))}).next(()=>i)}Sn(e,r){let n=new Ur(CA);const s=this.Vn(r,e);if(s==null)return n;const i=c2(r);if(i!=null){const a=e.data.field(i.fieldPath);if(cp(a))for(const A of a.arrayValue.values||[])n=n.add(new cc(r.indexId,e.key,this.dn(A),s))}else n=n.add(new cc(r.indexId,e.key,Rm,s));return n}bn(e,r,n,s,i){Xe("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const a=[];return function(l,c,u,h,m){const p=l.getIterator(),b=c.getIterator();let B=bu(p),E=bu(b);for(;B||E;){let y=!1,w=!1;if(B&&E){const S=u(B,E);S<0?w=!0:S>0&&(y=!0)}else B!=null?w=!0:y=!0;y?(h(E),E=bu(b)):w?(m(B),B=bu(p)):(B=bu(p),E=bu(b))}}(s,i,CA,A=>{a.push(this.Dn(e,r,n,A))},A=>{a.push(this.vn(e,r,n,A))}),Se.waitFor(a)}yn(e){let r=1;return Cu(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,s,i)=>{i.done(),r=s.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((a,A)=>CA(a,A)).filter((a,A,l)=>!A||CA(a,l[A-1])!==0);const s=[];s.push(e);for(const a of n){const A=CA(a,e),l=CA(a,r);if(A===0)s[0]=e.Zt();else if(A>0&&l<0)s.push(a),s.push(a.Zt());else if(l>0)break}s.push(r);const i=[];for(let a=0;a<s.length;a+=2){if(this.Cn(s[a],s[a+1]))return[];const A=[s[a].indexId,this.uid,s[a].arrayValue,s[a].directionalValue,Rm,[]],l=[s[a+1].indexId,this.uid,s[a+1].arrayValue,s[a+1].directionalValue,Rm,[]];i.push(IDBKeyRange.bound(A,l))}return i}Cn(e,r){return CA(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(_N)}getMinOffset(e,r){return Se.mapArray(this.hn(r),n=>this.Pn(e,n).next(s=>s||Bt())).next(_N)}}function EN(t){return Dn(t,"collectionParents")}function Bu(t){return Dn(t,"indexEntries")}function Ph(t){return Dn(t,"indexConfiguration")}function Cu(t){return Dn(t,"indexState")}function _N(t){Tt(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const s=t[n].indexState.offset;Sb(s,e)<0&&(e=s),r<s.largestBatchId&&(r=s.largestBatchId)}return new hi(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Vs{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Vs(e,Vs.DEFAULT_COLLECTION_PERCENTILE,Vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(t,e,r){const n=t.store("mutations"),s=t.store("documentMutations"),i=[],a=IDBKeyRange.only(r.batchId);let A=0;const l=n.J({range:a},(u,h,m)=>(A++,m.delete()));i.push(l.next(()=>{Tt(A===1)}));const c=[];for(const u of r.mutations){const h=y4(e,u.key.path,r.batchId);i.push(s.delete(h)),c.push(u.key)}return Se.waitFor(i).next(()=>c)}function O0(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Bt();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vs.DEFAULT_COLLECTION_PERCENTILE=10,Vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vs.DEFAULT=new Vs(41943040,Vs.DEFAULT_COLLECTION_PERCENTILE,Vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vs.DISABLED=new Vs(-1,0,0);class kv{constructor(e,r,n,s){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=s,this.Fn={}}static lt(e,r,n,s){Tt(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new kv(i,r,n,s)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return NA(e).J({index:"userMutationsIndex",range:n},(s,i,a)=>{r=!1,a.done()}).next(()=>r)}addMutationBatch(e,r,n,s){const i=Ku(e),a=NA(e);return a.add({}).next(A=>{Tt(typeof A=="number");const l=new kb(A,r,n,s),c=function(p,b,B){const E=B.baseMutations.map(w=>pp(p.ct,w)),y=B.mutations.map(w=>pp(p.ct,w));return{userId:b,batchId:B.batchId,localWriteTimeMs:B.localWriteTime.toMillis(),baseMutations:E,mutations:y}}(this.serializer,this.userId,l),u=[];let h=new Ur((m,p)=>Jt(m.canonicalString(),p.canonicalString()));for(const m of s){const p=y4(this.userId,m.key.path,A);h=h.add(m.key.path.popLast()),u.push(a.put(c)),u.push(i.put(p,NO))}return h.forEach(m=>{u.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[A]=l.keys()}),Se.waitFor(u).next(()=>l)})}lookupMutationBatch(e,r){return NA(e).get(r).next(n=>n?(Tt(n.userId===this.userId),Ac(this.serializer,n)):null)}Mn(e,r){return this.Fn[r]?Se.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const s=n.keys();return this.Fn[r]=s,s}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return NA(e).J({index:"userMutationsIndex",range:s},(a,A,l)=>{A.userId===this.userId&&(Tt(A.batchId>=n),i=Ac(this.serializer,A)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return NA(e).J({index:"userMutationsIndex",range:r,reverse:!0},(s,i,a)=>{n=i.batchId,a.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return NA(e).U("userMutationsIndex",r).next(n=>n.map(s=>Ac(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=qg(this.userId,r.path),s=IDBKeyRange.lowerBound(n),i=[];return Ku(e).J({range:s},(a,A,l)=>{const[c,u,h]=a,m=ja(u);if(c===this.userId&&r.path.isEqual(m))return NA(e).get(h).next(p=>{if(!p)throw Bt();Tt(p.userId===this.userId),i.push(Ac(this.serializer,p))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Ur(Jt);const s=[];return r.forEach(i=>{const a=qg(this.userId,i.path),A=IDBKeyRange.lowerBound(a),l=Ku(e).J({range:A},(c,u,h)=>{const[m,p,b]=c,B=ja(p);m===this.userId&&i.path.isEqual(B)?n=n.add(b):h.done()});s.push(l)}),Se.waitFor(s).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1,i=qg(this.userId,n),a=IDBKeyRange.lowerBound(i);let A=new Ur(Jt);return Ku(e).J({range:a},(l,c,u)=>{const[h,m,p]=l,b=ja(m);h===this.userId&&n.isPrefixOf(b)?b.length===s&&(A=A.add(p)):u.done()}).next(()=>this.xn(e,A))}xn(e,r){const n=[],s=[];return r.forEach(i=>{s.push(NA(e).get(i).next(a=>{if(a===null)throw Bt();Tt(a.userId===this.userId),n.push(Ac(this.serializer,a))}))}),Se.waitFor(s).next(()=>n)}removeMutationBatch(e,r){return fT(e._e,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),Se.forEach(n,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return Se.resolve();const n=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),s=[];return Ku(e).J({range:n},(i,a,A)=>{if(i[0]===this.userId){const l=ja(i[1]);s.push(l)}else A.done()}).next(()=>{Tt(s.length===0)})})}containsKey(e,r){return pT(e,this.userId,r)}Nn(e){return mT(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function pT(t,e,r){const n=qg(e,r.path),s=n[1],i=IDBKeyRange.lowerBound(n);let a=!1;return Ku(t).J({range:i,H:!0},(A,l,c)=>{const[u,h,m]=A;u===e&&h===s&&(a=!0),c.done()}).next(()=>a)}function NA(t){return Dn(t,"mutations")}function Ku(t){return Dn(t,"documentMutations")}function mT(t){return Dn(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Oc(0)}static kn(){return new Oc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const n=new Oc(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>jt.fromTimestamp(new Lt(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.qn(e).next(s=>(s.highestListenSequenceNumber=r,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),r>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=r),this.Qn(e,s)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>Nu(e).delete(r.targetId)).next(()=>this.qn(e)).next(n=>(Tt(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,r,n){let s=0;const i=[];return Nu(e).J((a,A)=>{const l=rf(A);l.sequenceNumber<=r&&n.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>Se.waitFor(i)).next(()=>s)}forEachTarget(e,r){return Nu(e).J((n,s)=>{const i=rf(s);r(i)})}qn(e){return SN(e).get("targetGlobalKey").next(r=>(Tt(r!==null),r))}Qn(e,r){return SN(e).put("targetGlobalKey",r)}Kn(e,r){return Nu(e).put(cT(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=kc(r),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Nu(e).J({range:s,index:"queryTargetsIndex"},(a,A,l)=>{const c=rf(A);kp(r,c.target)&&(i=c,l.done())}).next(()=>i)}addMatchingKeys(e,r,n){const s=[],i=OA(e);return r.forEach(a=>{const A=Qs(a.path);s.push(i.put({targetId:n,path:A})),s.push(this.referenceDelegate.addReference(e,n,a))}),Se.waitFor(s)}removeMatchingKeys(e,r,n){const s=OA(e);return Se.forEach(r,i=>{const a=Qs(i.path);return Se.waitFor([s.delete([n,a]),this.referenceDelegate.removeReference(e,n,i)])})}removeMatchingKeysForTargetId(e,r){const n=OA(e),s=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),s=OA(e);let i=tr();return s.J({range:n,H:!0},(a,A,l)=>{const c=ja(a[1]),u=new dt(c);i=i.add(u)}).next(()=>i)}containsKey(e,r){const n=Qs(r.path),s=IDBKeyRange.bound([n],[f4(n)],!1,!0);let i=0;return OA(e).J({index:"documentTargetsIndex",H:!0,range:s},([a,A],l,c)=>{a!==0&&(i++,c.done())}).next(()=>i>0)}ot(e,r){return Nu(e).get(r).next(n=>n?rf(n):null)}}function Nu(t){return Dn(t,"targets")}function SN(t){return Dn(t,"targetGlobal")}function OA(t){return Dn(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN([t,e],[r,n]){const s=Jt(t,r);return s===0?Jt(e,n):s}class zM{constructor(e){this.Un=e,this.buffer=new Ur(FN),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();FN(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class $M{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Xe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Sl(r)?Xe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await Kc(r)}await this.Hn(3e5)})}}class WM{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return Se.resolve(Ui.oe);const n=new zM(r);return this.Jn.forEachTarget(e,s=>n.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>n.zn(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Xe("LruGarbageCollector","Garbage collection skipped; disabled"),Se.resolve(IN)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),IN):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,s,i,a,A,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,a=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(n=h,A=Date.now(),this.removeTargets(e,n,r))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(h=>(c=Date.now(),Ou()<=Ar.DEBUG&&Xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-u}ms
	Determined least recently used ${s} in `+(A-a)+`ms
	Removed ${i} targets in `+(l-A)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),Se.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function JM(t,e){return new WM(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e,r){this.db=e,this.garbageCollector=JM(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(n,s)=>r(s))}addReference(e,r,n){return Om(e,n)}removeReference(e,r,n){return Om(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return Om(e,r)}nr(e,r){return function(s,i){let a=!1;return mT(s).Y(A=>pT(s,A,i).next(l=>(l&&(a=!0),Se.resolve(!l)))).next(()=>a)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.tr(e,(a,A)=>{if(A<=r){const l=this.nr(e,a).next(c=>{if(!c)return i++,n.getEntry(e,a).next(()=>(n.removeEntry(a,jt.min()),OA(e).delete(function(h){return[0,Qs(h.path)]}(a))))});s.push(l)}}).next(()=>Se.waitFor(s)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return Om(e,r)}tr(e,r){const n=OA(e);let s,i=Ui.oe;return n.J({index:"documentTargetsIndex"},([a,A],{path:l,sequenceNumber:c})=>{a===0?(i!==Ui.oe&&r(new dt(ja(s)),i),i=c,s=l):i=Ui.oe}).next(()=>{i!==Ui.oe&&r(new dt(ja(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Om(t,e){return OA(t).put(function(n,s){return{targetId:0,path:Qs(n.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(){this.changes=new Fl(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Yr.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Se.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return Xl(e).put(n)}removeEntry(e,r,n){return Xl(e).delete(function(i,a){const A=i.path.toArray();return[A.slice(0,A.length-2),A[A.length-2],D0(a),A[A.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.rr(e,n)))}getEntry(e,r){let n=Yr.newInvalidDocument(r);return Xl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Qh(r))},(s,i)=>{n=this.ir(r,i)}).next(()=>n)}sr(e,r){let n={size:0,document:Yr.newInvalidDocument(r)};return Xl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Qh(r))},(s,i)=>{n={document:this.ir(r,i),size:O0(i)}}).next(()=>n)}getEntries(e,r){let n=li();return this._r(e,r,(s,i)=>{const a=this.ir(s,i);n=n.insert(s,a)}).next(()=>n)}ar(e,r){let n=li(),s=new rn(dt.comparator);return this._r(e,r,(i,a)=>{const A=this.ir(i,a);n=n.insert(i,A),s=s.insert(i,O0(a))}).next(()=>({documents:n,ur:s}))}_r(e,r,n){if(r.isEmpty())return Se.resolve();let s=new Ur(PN);r.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(Qh(s.first()),Qh(s.last())),a=s.getIterator();let A=a.getNext();return Xl(e).J({index:"documentKeyIndex",range:i},(l,c,u)=>{const h=dt.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;A&&PN(A,h)<0;)n(A,null),A=a.getNext();A&&A.isEqual(h)&&(n(A,c),A=a.hasNext()?a.getNext():null),A?u.$(Qh(A)):u.done()}).next(()=>{for(;A;)n(A,null),A=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,r,n,s,i){const a=r.path,A=[a.popLast().toArray(),a.lastSegment(),D0(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],l=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Xl(e).U(IDBKeyRange.bound(A,l,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let u=li();for(const h of c){const m=this.ir(dt.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);m.isFoundDocument()&&(Rp(r,m)||s.has(m.key))&&(u=u.insert(m.key,m))}return u})}getAllFromCollectionGroup(e,r,n,s){let i=li();const a=UN(r,n),A=UN(r,hi.max());return Xl(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,A,!0)},(l,c,u)=>{const h=this.ir(dt.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(h.key,h),i.size===s&&u.done()}).next(()=>i)}newChangeBuffer(e){return new ZM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return TN(e).get("remoteDocumentGlobalKey").next(r=>(Tt(!!r),r))}rr(e,r){return TN(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=LM(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(jt.min())))return n}return Yr.newInvalidDocument(e)}}function vT(t){return new YM(t)}class ZM extends gT{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new Fl(n=>n.toString(),(n,s)=>n.isEqual(s))}applyChanges(e){const r=[];let n=0,s=new Ur((i,a)=>Jt(i.canonicalString(),a.canonicalString()));return this.changes.forEach((i,a)=>{const A=this.lr.get(i);if(r.push(this.cr.removeEntry(e,i,A.readTime)),a.isValidDocument()){const l=gN(this.cr.serializer,a);s=s.add(i.path.popLast());const c=O0(l);n+=c-A.size,r.push(this.cr.addEntry(e,i,l))}else if(n-=A.size,this.trackRemovals){const l=gN(this.cr.serializer,a.convertToNoDocument(jt.min()));r.push(this.cr.addEntry(e,i,l))}}),s.forEach(i=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,i))}),r.push(this.cr.updateMetadata(e,n)),Se.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:n,ur:s})=>(s.forEach((i,a)=>{this.lr.set(i,{size:a,readTime:n.get(i).readTime})}),n))}}function TN(t){return Dn(t,"remoteDocumentGlobal")}function Xl(t){return Dn(t,"remoteDocumentsV14")}function Qh(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function UN(t,e){const r=e.documentKey.path.toArray();return[t,D0(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function PN(t,e){const r=t.path.toArray(),n=e.path.toArray();let s=0;for(let i=0;i<r.length-2&&i<n.length-2;++i)if(s=Jt(r[i],n[i]),s)return s;return s=Jt(r.length,n.length),s||(s=Jt(r[r.length-2],n[n.length-2]),s||Jt(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&Nf(n.mutation,s,zs.empty(),Lt.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,tr()).next(()=>n))}getLocalViewOfDocuments(e,r,n=tr()){const s=La();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let a=ef();return i.forEach((A,l)=>{a=a.insert(A,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=La();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,tr()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,A)=>{r.set(a,A)})})}computeViews(e,r,n,s){let i=li();const a=Cf(),A=function(){return Cf()}();return r.forEach((l,c)=>{const u=n.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof Go)?i=i.insert(c.key,c):u!==void 0?(a.set(c.key,u.mutation.getFieldMask()),Nf(u.mutation,c,u.mutation.getFieldMask(),Lt.now())):a.set(c.key,zs.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>a.set(c,u)),r.forEach((c,u)=>{var h;return A.set(c,new e8(u,(h=a.get(c))!==null&&h!==void 0?h:null))}),A))}recalculateAndSaveOverlays(e,r){const n=Cf();let s=new rn((a,A)=>a-A),i=tr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const A of a)A.keys().forEach(l=>{const c=r.get(l);if(c===null)return;let u=n.get(l)||zs.empty();u=A.applyToLocalView(c,u),n.set(l,u);const h=(s.get(A.batchId)||tr()).add(l);s=s.insert(A.batchId,h)})}).next(()=>{const a=[],A=s.getReverseIterator();for(;A.hasNext();){const l=A.getNext(),c=l.key,u=l.value,h=O4();u.forEach(m=>{if(!i.has(m)){const p=G4(r.get(m),n.get(m));p!==null&&h.set(m,p),i=i.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,h))}return Se.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(a){return dt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):j4(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):Se.resolve(La());let A=-1,l=i;return a.next(c=>Se.forEach(c,(u,h)=>(A<h.largestBatchId&&(A=h.largestBatchId),i.get(u)?Se.resolve():this.remoteDocumentCache.getEntry(e,u).next(m=>{l=l.insert(u,m)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,tr())).next(u=>({batchId:A,changes:R4(u)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new dt(r)).next(n=>{let s=ef();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let a=ef();return this.indexManager.getCollectionParents(e,i).next(A=>Se.forEach(A,l=>{const c=function(h,m){return new $d(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,n,s).next(u=>{u.forEach((h,m)=>{a=a.insert(h,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(a=>{i.forEach((l,c)=>{const u=c.getKey();a.get(u)===null&&(a=a.insert(u,Yr.newInvalidDocument(u)))});let A=ef();return a.forEach((l,c)=>{const u=i.get(l);u!==void 0&&Nf(u.mutation,c,zs.empty(),Lt.now()),Rp(r,c)&&(A=A.insert(l,c))}),A})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Se.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:zn(s.createTime)}}(r)),Se.resolve()}getNamedQuery(e,r){return Se.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:uT(s.bundledQuery),readTime:zn(s.readTime)}}(r)),Se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(){this.overlays=new rn(dt.comparator),this.Ir=new Map}getOverlay(e,r){return Se.resolve(this.overlays.get(r))}getOverlays(e,r){const n=La();return Se.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.ht(e,r,i)}),Se.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(n)),Se.resolve()}getOverlaysForCollection(e,r,n){const s=La(),i=r.length+1,a=new dt(r.child("")),A=this.overlays.getIteratorFrom(a);for(;A.hasNext();){const l=A.getNext().value,c=l.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>n&&s.set(l.getKey(),l)}return Se.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new rn((c,u)=>c-u);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let u=i.get(c.largestBatchId);u===null&&(u=La(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const A=La(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>A.set(c,u)),!(A.size()>=s)););return Se.resolve(A)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new Rb(r,n));let i=this.Ir.get(r);i===void 0&&(i=tr(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(){this.sessionToken=Cn.EMPTY_BYTE_STRING}getSessionToken(e){return Se.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(){this.Tr=new Ur(Kn.Er),this.dr=new Ur(Kn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Kn(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new Kn(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new dt(new pr([])),n=new Kn(r,e),s=new Kn(r,e+1),i=[];return this.dr.forEachInRange([n,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new dt(new pr([])),n=new Kn(r,e),s=new Kn(r,e+1);let i=tr();return this.dr.forEachInRange([n,s],a=>{i=i.add(a.key)}),i}containsKey(e){const r=new Kn(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Kn{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return dt.comparator(e.key,r.key)||Jt(e.wr,r.wr)}static Ar(e,r){return Jt(e.wr,r.wr)||dt.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Ur(Kn.Er)}checkEmpty(e){return Se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new kb(i,r,n,s);this.mutationQueue.push(a);for(const A of s)this.br=this.br.add(new Kn(A.key,i)),this.indexManager.addToCollectionParentIndex(e,A.key.path.popLast());return Se.resolve(a)}lookupMutationBatch(e,r){return Se.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),i=s<0?0:s;return Se.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Se.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Kn(r,0),s=new Kn(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,s],a=>{const A=this.Dr(a.wr);i.push(A)}),Se.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Ur(Jt);return r.forEach(s=>{const i=new Kn(s,0),a=new Kn(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],A=>{n=n.add(A.wr)})}),Se.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;dt.isDocumentKey(i)||(i=i.child(""));const a=new Kn(new dt(i),0);let A=new Ur(Jt);return this.br.forEachWhile(l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===s&&(A=A.add(l.wr)),!0)},a),Se.resolve(this.Cr(A))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){Tt(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Se.forEach(r.mutations,s=>{const i=new Kn(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new Kn(r,0),s=this.br.firstAfterOrEqual(n);return Se.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Se.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(e){this.Mr=e,this.docs=function(){return new rn(dt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,a=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Se.resolve(n?n.document.mutableCopy():Yr.newInvalidDocument(r))}getEntries(e,r){let n=li();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():Yr.newInvalidDocument(s))}),Se.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=li();const a=r.path,A=new dt(a.child("")),l=this.docs.getIteratorFrom(A);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Sb(p4(u),n)<=0||(s.has(u.key)||Rp(r,u))&&(i=i.insert(u.key,u.mutableCopy()))}return Se.resolve(i)}getAllFromCollectionGroup(e,r,n,s){Bt()}Or(e,r){return Se.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new a8(this)}getSize(e){return Se.resolve(this.size)}}class a8 extends gT{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),Se.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8{constructor(e){this.persistence=e,this.Nr=new Fl(r=>kc(r),kp),this.lastRemoteSnapshotVersion=jt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Kb,this.targetCount=0,this.kr=Oc.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),Se.resolve()}getLastRemoteSnapshotVersion(e){return Se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Se.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Se.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Se.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Oc(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Se.resolve()}updateTargetData(e,r){return this.Kn(r),Se.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Se.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.Nr.forEach((a,A)=>{A.sequenceNumber<=r&&n.get(A.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,A.targetId)),s++)}),Se.waitFor(i).next(()=>s)}getTargetCount(e){return Se.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Se.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Se.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),Se.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Se.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Se.resolve(n)}containsKey(e,r){return Se.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Ui(0),this.Kr=!1,this.Kr=!0,this.$r=new n8,this.referenceDelegate=e(this),this.Ur=new o8(this),this.indexManager=new KM,this.remoteDocumentCache=function(s){return new i8(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new lT(r),this.Gr=new t8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new r8,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new s8(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){Xe("MemoryPersistence","Starting transaction:",e);const s=new A8(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,r){return Se.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class A8 extends g4{constructor(e){super(),this.currentSequenceNumber=e}}class Dv{constructor(e){this.persistence=e,this.Jr=new Kb,this.Yr=null}static Zr(e){return new Dv(e)}get Xr(){if(this.Yr)return this.Yr;throw Bt()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Se.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Se.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Se.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Se.forEach(this.Xr,n=>{const s=dt.fromPath(n);return this.ei(e,s).next(i=>{i||r.removeEntry(s,jt.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return Se.or([()=>Se.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8{constructor(e){this.serializer=e}O(e,r,n,s){const i=new Fv("createOrUpgrade",r);n<1&&s>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",z5,{unique:!0}),l.createObjectStore("documentMutations")}(e),QN(e),function(l){l.createObjectStore("remoteDocuments")}(e));let a=Se.resolve();return n<3&&s>=3&&(n!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),QN(e)),a=a.next(()=>function(l){const c=l.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:jt.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(i))),n<4&&s>=4&&(n!==0&&(a=a.next(()=>function(l,c){return c.store("mutations").U().next(u=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",z5,{unique:!0});const h=c.store("mutations"),m=u.map(p=>h.put(p));return Se.waitFor(m)})}(e,i))),a=a.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&s>=5&&(a=a.next(()=>this.ni(i))),n<6&&s>=6&&(a=a.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(i)))),n<7&&s>=7&&(a=a.next(()=>this.ii(i))),n<8&&s>=8&&(a=a.next(()=>this.si(e,i))),n<9&&s>=9&&(a=a.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&s>=10&&(a=a.next(()=>this.oi(i))),n<11&&s>=11&&(a=a.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&s>=12&&(a=a.next(()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:kO});c.createIndex("collectionPathOverlayIndex",DO,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",RO,{unique:!1})})(e)})),n<13&&s>=13&&(a=a.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:EO});c.createIndex("documentKeyIndex",_O),c.createIndex("collectionGroupIndex",IO)}(e)).next(()=>this._i(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&s>=14&&(a=a.next(()=>this.ai(e,i))),n<15&&s>=15&&(a=a.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:PO}).createIndex("sequenceNumberIndex",QO,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:jO}).createIndex("documentKeyIndex",LO,{unique:!1})}(e))),n<16&&s>=16&&(a=a.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&s>=17&&(a=a.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),a}ri(e){let r=0;return e.store("remoteDocuments").J((n,s)=>{r+=O0(s)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next(s=>Se.forEach(s,i=>{const a=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",a).next(A=>Se.forEach(A,l=>{Tt(l.userId===i.userId);const c=Ac(this.serializer,l);return fT(e,i.userId,c).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return n.J((a,A)=>{const l=new pr(a),c=function(h){return[0,Qs(h)]}(l);i.push(r.get(c).next(u=>u?Se.resolve():(h=>r.put({targetId:0,path:Qs(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>Se.waitFor(i))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:UO});const n=r.store("collectionParents"),s=new Vb,i=a=>{if(s.add(a)){const A=a.lastSegment(),l=a.popLast();return n.put({collectionId:A,parent:Qs(l)})}};return r.store("remoteDocuments").J({H:!0},(a,A)=>{const l=new pr(a);return i(l.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([a,A,l],c)=>{const u=ja(A);return i(u.popLast())}))}oi(e){const r=e.store("targets");return r.J((n,s)=>{const i=rf(s),a=cT(this.serializer,i);return r.put(a)})}_i(e,r){const n=r.store("remoteDocuments"),s=[];return n.J((i,a)=>{const A=r.store("remoteDocumentsV14"),l=function(h){return h.document?new dt(pr.fromString(h.document.name).popFirst(5)):h.noDocument?dt.fromSegments(h.noDocument.path):h.unknownDocument?dt.fromSegments(h.unknownDocument.path):Bt()}(a).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};s.push(A.put(c))}).next(()=>Se.waitFor(s))}ai(e,r){const n=r.store("mutations"),s=vT(this.serializer),i=new wT(Dv.Zr,this.serializer.ct);return n.U().next(a=>{const A=new Map;return a.forEach(l=>{var c;let u=(c=A.get(l.userId))!==null&&c!==void 0?c:tr();Ac(this.serializer,l).keys().forEach(h=>u=u.add(h)),A.set(l.userId,u)}),Se.forEach(A,(l,c)=>{const u=new ns(c),h=Lv.lt(this.serializer,u),m=i.getIndexManager(u),p=kv.lt(u,this.serializer,m,i.referenceDelegate);return new yT(s,p,h,m).recalculateAndSaveOverlaysForDocumentKeys(new u2(r,Ui.oe),l).next()})})}}function QN(t){t.createObjectStore("targetDocuments",{keyPath:FO}).createIndex("documentTargetsIndex",TO,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",SO,{unique:!0}),t.createObjectStore("targetGlobal")}const vw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class qb{constructor(e,r,n,s,i,a,A,l,c,u,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=i,this.window=a,this.document=A,this.ci=c,this.li=u,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!qb.D())throw new st(Oe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new XM(this,s),this.Ai=r+"main",this.serializer=new lT(l),this.Ri=new ol(this.Ai,this.hi,new l8(this.serializer)),this.$r=new DM,this.Ur=new GM(this.referenceDelegate,this.serializer),this.remoteDocumentCache=vT(this.serializer),this.Gr=new kM,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,u===!1&&Us("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new st(Oe.FAILED_PRECONDITION,vw);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Ui(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Mm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(Sl(e))return Xe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Xe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return jh(e).get("owner").next(r=>Se.resolve(this.vi(r)))}Ci(e){return Mm(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=Dn(r,"clientMetadata");return n.U().next(s=>{const i=this.xi(s,18e5),a=s.filter(A=>i.indexOf(A)===-1);return Se.forEach(a,A=>n.delete(A.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Se.resolve(!0):jh(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new st(Oe.FAILED_PRECONDITION,vw);return!1}}return!(!this.networkEnabled||!this.inForeground)||Mm(e).U().next(n=>this.xi(n,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,a=!this.inForeground&&s.inForeground,A=this.networkEnabled===s.networkEnabled;if(i||a&&A)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&Xe("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new u2(e,Ui.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(e,r){return e.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Mm(e).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return kv.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new qM(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Lv.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){Xe("IndexedDbPersistence","Starting transaction:",e);const s=r==="readonly"?"readonly":"readwrite",i=function(l){return l===17?HO:l===16?MO:l===15?Tb:l===14?b4:l===13?x4:l===12?OO:l===11?w4:void Bt()}(this.hi);let a;return this.Ri.runTransaction(e,s,i,A=>(a=new u2(A,this.Qr?this.Qr.next():Ui.oe),r==="readwrite-primary"?this.wi(a).next(l=>!!l||this.Si(a)).next(l=>{if(!l)throw Us(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new st(Oe.FAILED_PRECONDITION,m4);return n(a)}).next(l=>this.Di(a).next(()=>l)):this.Ki(a).next(()=>n(a)))).then(A=>(a.raiseOnCommittedEvent(),A))}Ki(e){return jh(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new st(Oe.FAILED_PRECONDITION,vw)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return jh(e).put("owner",r)}static D(){return ol.D()}bi(e){const r=jh(e);return r.get("owner").next(n=>this.vi(n)?(Xe("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Se.resolve())}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(Us(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;gF()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return Xe("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Us("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Us("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function jh(t){return Dn(t,"owner")}function Mm(t){return Dn(t,"clientMetadata")}function c8(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=tr(),s=tr();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Gb(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return gF()?8:v4(kn())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.Yi(e,r).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,r,s,n).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new u8;return this.Xi(e,r,a).next(A=>{if(i.result=A,this.zi)return this.es(e,r,a,A.size)})}).next(()=>i.result)}es(e,r,n,s){return n.documentReadCount<this.ji?(Ou()<=Ar.DEBUG&&Xe("QueryEngine","SDK will not create cache indexes for query:",Mu(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Se.resolve()):(Ou()<=Ar.DEBUG&&Xe("QueryEngine","Query:",Mu(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(Ou()<=Ar.DEBUG&&Xe("QueryEngine","The SDK decides to create cache indexes for query:",Mu(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Li(r))):Se.resolve())}Yi(e,r){if(aN(r))return Se.resolve(null);let n=Li(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=k0(r,null,"F"),n=Li(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const a=tr(...i);return this.Ji.getDocuments(e,a).next(A=>this.indexManager.getMinOffset(e,n).next(l=>{const c=this.ts(r,A);return this.ns(r,c,a,l.readTime)?this.Yi(e,k0(r,null,"F")):this.rs(e,c,r,l)}))})))}Zi(e,r,n,s){return aN(r)||s.isEqual(jt.min())?Se.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const a=this.ts(r,i);return this.ns(r,a,n,s)?Se.resolve(null):(Ou()<=Ar.DEBUG&&Xe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Mu(r)),this.rs(e,a,r,vO(s,-1)).next(A=>A))})}ts(e,r){let n=new Ur(k4(e));return r.forEach((s,i)=>{Rp(e,i)&&(n=n.add(i))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,r,n){return Ou()<=Ar.DEBUG&&Xe("QueryEngine","Using full collection scan to execute query:",Mu(r)),this.Ji.getDocumentsMatchingQuery(e,r,hi.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d8{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new rn(Jt),this._s=new Fl(i=>kc(i),kp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yT(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function bT(t,e,r,n){return new d8(t,e,r,n)}async function BT(t,e){const r=qt(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const a=[],A=[];let l=tr();for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){A.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return r.localDocuments.getDocuments(n,l).next(c=>({hs:c,removedBatchIds:a,addedBatchIds:A}))})})}function h8(t,e){const r=qt(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return function(A,l,c,u){const h=c.batch,m=h.keys();let p=Se.resolve();return m.forEach(b=>{p=p.next(()=>u.getEntry(l,b)).next(B=>{const E=c.docVersions.get(b);Tt(E!==null),B.version.compareTo(E)<0&&(h.applyToRemoteDocument(B,c),B.isValidDocument()&&(B.setReadTime(c.commitVersion),u.addEntry(B)))})}),p.next(()=>A.mutationQueue.removeMutationBatch(l,h))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(A){let l=tr();for(let c=0;c<A.mutationResults.length;++c)A.mutationResults[c].transformResults.length>0&&(l=l.add(A.batch.mutations[c].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function CT(t){const e=qt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function f8(t,e){const r=qt(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const A=[];e.targetChanges.forEach((u,h)=>{const m=s.get(h);if(!m)return;A.push(r.Ur.removeMatchingKeys(i,u.removedDocuments,h).next(()=>r.Ur.addMatchingKeys(i,u.addedDocuments,h)));let p=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(Cn.EMPTY_BYTE_STRING,jt.min()).withLastLimboFreeSnapshotVersion(jt.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,n)),s=s.insert(h,p),function(B,E,y){return B.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(m,p,u)&&A.push(r.Ur.updateTargetData(i,p))});let l=li(),c=tr();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&A.push(r.persistence.referenceDelegate.updateLimboDocument(i,u))}),A.push(p8(i,a,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!n.isEqual(jt.min())){const u=r.Ur.getLastRemoteSnapshotVersion(i).next(h=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n));A.push(u)}return Se.waitFor(A).next(()=>a.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(r.os=s,i))}function p8(t,e,r){let n=tr(),s=tr();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let a=li();return r.forEach((A,l)=>{const c=i.get(A);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(A)),l.isNoDocument()&&l.version.isEqual(jt.min())?(e.removeEntry(A,l.readTime),a=a.insert(A,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(A,l)):Xe("LocalStore","Ignoring outdated watch update for ",A,". Current version:",c.version," Watch version:",l.version)}),{Ps:a,Is:s}})}function m8(t,e){const r=qt(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function g8(t,e){const r=qt(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(i=>i?(s=i,Se.resolve(s)):r.Ur.allocateTargetId(n).next(a=>(s=new Eo(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function N2(t,e,r){const n=qt(t),s=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,a=>n.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Sl(a))throw a;Xe("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function jN(t,e,r){const n=qt(t);let s=jt.min(),i=tr();return n.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,u){const h=qt(l),m=h._s.get(u);return m!==void 0?Se.resolve(h.os.get(m)):h.Ur.getTargetData(c,u)}(n,a,Li(e)).next(A=>{if(A)return s=A.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(a,A.targetId).next(l=>{i=l})}).next(()=>n.ss.getDocumentsMatchingQuery(a,e,r?s:jt.min(),r?i:tr())).next(A=>(v8(n,nM(e),A),{documents:A,Ts:i})))}function v8(t,e,r){let n=t.us.get(e)||jt.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.us.set(e,n)}class LN{constructor(){this.activeTargetIds=lM()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class NT{constructor(){this.so=new LN,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new LN,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Xe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Xe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hm=null;function yw(){return Hm===null?Hm=function(){return 268435456+Math.round(2147483648*Math.random())}():Hm++,"0x"+Hm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="WebChannelConnection";class b8 extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(r,n,s,i,a){const A=yw(),l=this.xo(r,n.toUriEncodedString());Xe("RestConnection",`Sending RPC '${r}' ${A}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,a),this.No(r,l,c,s).then(u=>(Xe("RestConnection",`Received RPC '${r}' ${A}: `,u),u),u=>{throw fl("RestConnection",`RPC '${r}' ${A} failed with error: `,u,"url: ",l,"request:",s),u})}Lo(r,n,s,i,a,A){return this.Mo(r,n,s,i,a)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zd}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>r[a]=i),s&&s.headers.forEach((i,a)=>r[a]=i)}xo(r,n){const s=w8[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const i=yw();return new Promise((a,A)=>{const l=new o4;l.setWithCredentials(!0),l.listenOnce(A4.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Vg.NO_ERROR:const u=l.getResponseJson();Xe(ps,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(u)),a(u);break;case Vg.TIMEOUT:Xe(ps,`RPC '${e}' ${i} timed out`),A(new st(Oe.DEADLINE_EXCEEDED,"Request time out"));break;case Vg.HTTP_ERROR:const h=l.getStatus();if(Xe(ps,`RPC '${e}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const p=m==null?void 0:m.error;if(p&&p.status&&p.message){const b=function(E){const y=E.toLowerCase().replace(/_/g,"-");return Object.values(Oe).indexOf(y)>=0?y:Oe.UNKNOWN}(p.status);A(new st(b,p.message))}else A(new st(Oe.UNKNOWN,"Server responded with status "+l.getStatus()))}else A(new st(Oe.UNAVAILABLE,"Connection failed."));break;default:Bt()}}finally{Xe(ps,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);Xe(ps,`RPC '${e}' ${i} sending request:`,s),l.send(r,"POST",c,n,15)})}Bo(e,r,n){const s=yw(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=u4(),A=c4(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const u=i.join("");Xe(ps,`Creating RPC '${e}' stream ${s}: ${u}`,l);const h=a.createWebChannel(u,l);let m=!1,p=!1;const b=new x8({Io:E=>{p?Xe(ps,`Not sending because RPC '${e}' stream ${s} is closed:`,E):(m||(Xe(ps,`Opening RPC '${e}' stream ${s} transport.`),h.open(),m=!0),Xe(ps,`RPC '${e}' stream ${s} sending:`,E),h.send(E))},To:()=>h.close()}),B=(E,y,w)=>{E.listen(y,S=>{try{w(S)}catch(M){setTimeout(()=>{throw M},0)}})};return B(h,Zh.EventType.OPEN,()=>{p||(Xe(ps,`RPC '${e}' stream ${s} transport opened.`),b.yo())}),B(h,Zh.EventType.CLOSE,()=>{p||(p=!0,Xe(ps,`RPC '${e}' stream ${s} transport closed`),b.So())}),B(h,Zh.EventType.ERROR,E=>{p||(p=!0,fl(ps,`RPC '${e}' stream ${s} transport errored:`,E),b.So(new st(Oe.UNAVAILABLE,"The operation could not be completed")))}),B(h,Zh.EventType.MESSAGE,E=>{var y;if(!p){const w=E.data[0];Tt(!!w);const S=w,M=S.error||((y=S[0])===null||y===void 0?void 0:y.error);if(M){Xe(ps,`RPC '${e}' stream ${s} received error:`,M);const R=M.status;let O=function(j){const D=_n[j];if(D!==void 0)return W4(D)}(R),I=M.message;O===void 0&&(O=Oe.INTERNAL,I="Unknown error status: "+R+" with message "+M.message),p=!0,b.So(new st(O,I)),h.close()}else Xe(ps,`RPC '${e}' stream ${s} received:`,w),b.bo(w)}}),B(A,l4.STAT_EVENT,E=>{E.stat===l2.PROXY?Xe(ps,`RPC '${e}' stream ${s} detected buffering proxy`):E.stat===l2.NOPROXY&&Xe(ps,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B8(){return typeof window<"u"?window:null}function Jg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(t){return new NM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e,r,n=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&Xe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,r,n,s,i,a,A,l){this.ui=e,this.Ho=n,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=A,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new zb(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Oe.RESOURCE_EXHAUSTED?(Us(r.toString()),Us("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new st(Oe.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Xe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(Xe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class C8 extends ET{constructor(e,r,n,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=SM(this.serializer,e),n=function(i){if(!("targetChange"in i))return jt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?jt.min():a.readTime?zn(a.readTime):jt.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=w2(this.serializer),r.addTarget=function(i,a){let A;const l=a.target;if(A=j0(l)?{documents:nT(i,l)}:{query:sT(i,l)._t},A.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){A.resumeToken=Y4(i,a.resumeToken);const c=v2(i,a.expectedCount);c!==null&&(A.expectedCount=c)}else if(a.snapshotVersion.compareTo(jt.min())>0){A.readTime=Ld(i,a.snapshotVersion.toTimestamp());const c=v2(i,a.expectedCount);c!==null&&(A.expectedCount=c)}return A}(this.serializer,e);const n=TM(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=w2(this.serializer),r.removeTarget=e,this.a_(r)}}class N8 extends ET{constructor(e,r,n,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Tt(!!e.streamToken),this.lastStreamToken=e.streamToken,Tt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=FM(e.writeResults,e.commitTime),n=zn(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=w2(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>pp(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8 extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new st(Oe.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,y2(r,n),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new st(Oe.UNKNOWN,i.toString())})}Lo(e,r,n,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,A])=>this.connection.Lo(e,y2(r,n),s,a,A,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new st(Oe.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class _8{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Us(r),this.D_=!1):Xe("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I8{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{n.enqueueAndForget(async()=>{Gc(this)&&(Xe("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=qt(l);c.L_.add(4),await Mp(c),c.q_.set("Unknown"),c.L_.delete(4),await Ov(c)}(this))})}),this.q_=new _8(n,s)}}async function Ov(t){if(Gc(t))for(const e of t.B_)await e(!0)}async function Mp(t){for(const e of t.B_)await e(!1)}function _T(t,e){const r=qt(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),Xb(r)?Jb(r):Xd(r).r_()&&Wb(r,e))}function $b(t,e){const r=qt(t),n=Xd(r);r.N_.delete(e),n.r_()&&IT(r,e),r.N_.size===0&&(n.r_()?n.o_():Gc(r)&&r.q_.set("Unknown"))}function Wb(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(jt.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Xd(t).A_(e)}function IT(t,e){t.Q_.xe(e),Xd(t).R_(e)}function Jb(t){t.Q_=new xM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Xd(t).start(),t.q_.v_()}function Xb(t){return Gc(t)&&!Xd(t).n_()&&t.N_.size>0}function Gc(t){return qt(t).L_.size===0}function ST(t){t.Q_=void 0}async function S8(t){t.q_.set("Online")}async function F8(t){t.N_.forEach((e,r)=>{Wb(t,e)})}async function T8(t,e){ST(t),Xb(t)?(t.q_.M_(e),Jb(t)):t.q_.set("Unknown")}async function U8(t,e,r){if(t.q_.set("Online"),e instanceof X4&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const A of i.targetIds)s.N_.has(A)&&(await s.remoteSyncer.rejectListen(A,a),s.N_.delete(A),s.Q_.removeTarget(A))}(t,e)}catch(n){Xe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await M0(t,n)}else if(e instanceof Wg?t.Q_.Ke(e):e instanceof J4?t.Q_.He(e):t.Q_.We(e),!r.isEqual(jt.min()))try{const n=await CT(t.localStore);r.compareTo(n)>=0&&await function(i,a){const A=i.Q_.rt(a);return A.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.N_.get(c);u&&i.N_.set(c,u.withResumeToken(l.resumeToken,a))}}),A.targetMismatches.forEach((l,c)=>{const u=i.N_.get(l);if(!u)return;i.N_.set(l,u.withResumeToken(Cn.EMPTY_BYTE_STRING,u.snapshotVersion)),IT(i,l);const h=new Eo(u.target,l,c,u.sequenceNumber);Wb(i,h)}),i.remoteSyncer.applyRemoteEvent(A)}(t,r)}catch(n){Xe("RemoteStore","Failed to raise snapshot:",n),await M0(t,n)}}async function M0(t,e,r){if(!Sl(e))throw e;t.L_.add(1),await Mp(t),t.q_.set("Offline"),r||(r=()=>CT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Xe("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await Ov(t)})}function FT(t,e){return e().catch(r=>M0(t,r,e))}async function Hp(t){const e=qt(t),r=vl(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;P8(e);)try{const s=await m8(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,Q8(e,s)}catch(s){await M0(e,s)}TT(e)&&UT(e)}function P8(t){return Gc(t)&&t.O_.length<10}function Q8(t,e){t.O_.push(e);const r=vl(t);r.r_()&&r.V_&&r.m_(e.mutations)}function TT(t){return Gc(t)&&!vl(t).n_()&&t.O_.length>0}function UT(t){vl(t).start()}async function j8(t){vl(t).p_()}async function L8(t){const e=vl(t);for(const r of t.O_)e.m_(r.mutations)}async function k8(t,e,r){const n=t.O_.shift(),s=Db.from(n,e,r);await FT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Hp(t)}async function D8(t,e){e&&vl(t).V_&&await async function(n,s){if(function(a){return $4(a)&&a!==Oe.ABORTED}(s.code)){const i=n.O_.shift();vl(n).s_(),await FT(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Hp(n)}}(t,e),TT(t)&&UT(t)}async function DN(t,e){const r=qt(t);r.asyncQueue.verifyOperationInProgress(),Xe("RemoteStore","RemoteStore received new credentials");const n=Gc(r);r.L_.add(3),await Mp(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await Ov(r)}async function R8(t,e){const r=qt(t);e?(r.L_.delete(2),await Ov(r)):e||(r.L_.add(2),await Mp(r),r.q_.set("Unknown"))}function Xd(t){return t.K_||(t.K_=function(r,n,s){const i=qt(r);return i.w_(),new C8(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:S8.bind(null,t),Ro:F8.bind(null,t),mo:T8.bind(null,t),d_:U8.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Xb(t)?Jb(t):t.q_.set("Unknown")):(await t.K_.stop(),ST(t))})),t.K_}function vl(t){return t.U_||(t.U_=function(r,n,s){const i=qt(r);return i.w_(),new N8(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:j8.bind(null,t),mo:D8.bind(null,t),f_:L8.bind(null,t),g_:k8.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Hp(t)):(await t.U_.stop(),t.O_.length>0&&(Xe("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new aa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const a=Date.now()+n,A=new Yb(e,r,a,s,i);return A.start(n),A}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new st(Oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zb(t,e){if(Us("AsyncQueue",`${e}: ${t}`),Sl(t))return new st(Oe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e){this.comparator=e?(r,n)=>e(r,n)||dt.comparator(r.key,n.key):(r,n)=>dt.comparator(r.key,n.key),this.keyedMap=ef(),this.sortedSet=new rn(this.comparator)}static emptySet(e){return new vd(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof vd)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new vd;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(){this.W_=new rn(dt.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Bt():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class kd{constructor(e,r,n,s,i,a,A,l,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=A,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,s,i){const a=[];return r.forEach(A=>{a.push({type:0,doc:A})}),new kd(e,r,vd.emptySet(r),a,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O8{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class M8{constructor(){this.queries=ON(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=qt(r),i=s.queries;s.queries=ON(),i.forEach((a,A)=>{for(const l of A.j_)l.onError(n)})})(this,new st(Oe.ABORTED,"Firestore shutting down"))}}function ON(){return new Fl(t=>L4(t),Uv)}async function eB(t,e){const r=qt(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.H_()&&e.J_()&&(n=2):(i=new O8,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(s,!0);break;case 1:i.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const A=Zb(a,`Initialization of query '${Mu(e.query)}' failed`);return void e.onError(A)}r.queries.set(s,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&rB(r)}async function tB(t,e){const r=qt(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function H8(t,e){const r=qt(t);let n=!1;for(const s of e){const i=s.query,a=r.queries.get(i);if(a){for(const A of a.j_)A.X_(s)&&(n=!0);a.z_=s}}n&&rB(r)}function V8(t,e,r){const n=qt(t),s=n.queries.get(e);if(s)for(const i of s.j_)i.onError(r);n.queries.delete(e)}function rB(t){t.Y_.forEach(e=>{e.next()})}var E2,MN;(MN=E2||(E2={})).ea="default",MN.Cache="cache";class nB{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new kd(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=kd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==E2.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e){this.key=e}}class QT{constructor(e){this.key=e}}class K8{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=tr(),this.mutatedKeys=tr(),this.Aa=k4(e),this.Ra=new vd(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new RN,s=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,a=s,A=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,h)=>{const m=s.get(u),p=Rp(this.query,h)?h:null,b=!!m&&this.mutatedKeys.has(m.key),B=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let E=!1;m&&p?m.data.isEqual(p.data)?b!==B&&(n.track({type:3,doc:p}),E=!0):this.ga(m,p)||(n.track({type:2,doc:p}),E=!0,(l&&this.Aa(p,l)>0||c&&this.Aa(p,c)<0)&&(A=!0)):!m&&p?(n.track({type:0,doc:p}),E=!0):m&&!p&&(n.track({type:1,doc:m}),E=!0,(l||c)&&(A=!0)),E&&(p?(a=a.add(p),i=B?i.add(u):i.delete(u)):(a=a.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const u=this.query.limitType==="F"?a.last():a.first();a=a.delete(u.key),i=i.delete(u.key),n.track({type:1,doc:u})}return{Ra:a,fa:n,ns:A,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((u,h)=>function(p,b){const B=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Bt()}};return B(p)-B(b)}(u.type,h.type)||this.Aa(u.doc,h.doc)),this.pa(n),s=s!=null&&s;const A=r&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,a.length!==0||c?{snapshot:new kd(this.query,e.Ra,i,a,e.mutatedKeys,l===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:A}:{wa:A}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new RN,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=tr(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new QT(n))}),this.da.forEach(n=>{e.has(n)||r.push(new PT(n))}),r}ba(e){this.Ta=e.Ts,this.da=tr();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return kd.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class q8{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class G8{constructor(e){this.key=e,this.va=!1}}class z8{constructor(e,r,n,s,i,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Fl(A=>L4(A),Uv),this.Ma=new Map,this.xa=new Set,this.Oa=new rn(dt.comparator),this.Na=new Map,this.La=new Kb,this.Ba={},this.ka=new Map,this.qa=Oc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function $8(t,e,r=!0){const n=OT(t);let s;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await jT(n,e,r,!0),s}async function W8(t,e){const r=OT(t);await jT(r,e,!0,!1)}async function jT(t,e,r,n){const s=await g8(t.localStore,Li(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,r);let A;return n&&(A=await J8(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&r&&_T(t.remoteStore,s),A}async function J8(t,e,r,n,s){t.Ka=(h,m,p)=>async function(B,E,y,w){let S=E.view.ma(y);S.ns&&(S=await jN(B.localStore,E.query,!1).then(({documents:I})=>E.view.ma(I,S)));const M=w&&w.targetChanges.get(E.targetId),R=w&&w.targetMismatches.get(E.targetId)!=null,O=E.view.applyChanges(S,B.isPrimaryClient,M,R);return VN(B,E.targetId,O.wa),O.snapshot}(t,h,m,p);const i=await jN(t.localStore,e,!0),a=new K8(e,i.Ts),A=a.ma(i.documents),l=Op.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),c=a.applyChanges(A,t.isPrimaryClient,l);VN(t,r,c.wa);const u=new q8(e,r,a);return t.Fa.set(e,u),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function X8(t,e,r){const n=qt(t),s=n.Fa.get(e),i=n.Ma.get(s.targetId);if(i.length>1)return n.Ma.set(s.targetId,i.filter(a=>!Uv(a,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await N2(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&$b(n.remoteStore,s.targetId),_2(n,s.targetId)}).catch(Kc)):(_2(n,s.targetId),await N2(n.localStore,s.targetId,!0))}async function Y8(t,e){const r=qt(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),$b(r.remoteStore,n.targetId))}async function Z8(t,e,r){const n=MT(t);try{const s=await function(a,A){const l=qt(a),c=Lt.now(),u=A.reduce((p,b)=>p.add(b.key),tr());let h,m;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let b=li(),B=tr();return l.cs.getEntries(p,u).next(E=>{b=E,b.forEach((y,w)=>{w.isValidDocument()||(B=B.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,b)).next(E=>{h=E;const y=[];for(const w of A){const S=gM(w,h.get(w.key).overlayedDocument);S!=null&&y.push(new Go(w.key,S,_4(S.value.mapValue),en.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,y,A)}).next(E=>{m=E;const y=E.applyToLocalDocumentSet(h,B);return l.documentOverlayCache.saveOverlays(p,E.batchId,y)})}).then(()=>({batchId:m.batchId,changes:R4(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(a,A,l){let c=a.Ba[a.currentUser.toKey()];c||(c=new rn(Jt)),c=c.insert(A,l),a.Ba[a.currentUser.toKey()]=c}(n,s.batchId,r),await Vp(n,s.changes),await Hp(n.remoteStore)}catch(s){const i=Zb(s,"Failed to persist write");r.reject(i)}}async function LT(t,e){const r=qt(t);try{const n=await f8(r.localStore,e);e.targetChanges.forEach((s,i)=>{const a=r.Na.get(i);a&&(Tt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?Tt(a.va):s.removedDocuments.size>0&&(Tt(a.va),a.va=!1))}),await Vp(r,n,e)}catch(n){await Kc(n)}}function HN(t,e,r){const n=qt(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((i,a)=>{const A=a.view.Z_(e);A.snapshot&&s.push(A.snapshot)}),function(a,A){const l=qt(a);l.onlineState=A;let c=!1;l.queries.forEach((u,h)=>{for(const m of h.j_)m.Z_(A)&&(c=!0)}),c&&rB(l)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function eH(t,e,r){const n=qt(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),i=s&&s.key;if(i){let a=new rn(dt.comparator);a=a.insert(i,Yr.newNoDocument(i,jt.min()));const A=tr().add(i),l=new jv(jt.min(),new Map,new rn(Jt),a,A);await LT(n,l),n.Oa=n.Oa.remove(i),n.Na.delete(e),sB(n)}else await N2(n.localStore,e,!1).then(()=>_2(n,e,r)).catch(Kc)}async function tH(t,e){const r=qt(t),n=e.batch.batchId;try{const s=await h8(r.localStore,e);DT(r,n,null),kT(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Vp(r,s)}catch(s){await Kc(s)}}async function rH(t,e,r){const n=qt(t);try{const s=await function(a,A){const l=qt(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,A).next(h=>(Tt(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,A)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(n.localStore,e);DT(n,e,r),kT(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Vp(n,s)}catch(s){await Kc(s)}}function kT(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function DT(t,e,r){const n=qt(t);let s=n.Ba[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function _2(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||RT(t,n)})}function RT(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&($b(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),sB(t))}function VN(t,e,r){for(const n of r)n instanceof PT?(t.La.addReference(n.key,e),nH(t,n)):n instanceof QT?(Xe("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||RT(t,n.key)):Bt()}function nH(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(Xe("SyncEngine","New document in limbo: "+r),t.xa.add(n),sB(t))}function sB(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new dt(pr.fromString(e)),n=t.qa.next();t.Na.set(n,new G8(r)),t.Oa=t.Oa.insert(r,n),_T(t.remoteStore,new Eo(Li(Dp(r.path)),n,"TargetPurposeLimboResolution",Ui.oe))}}async function Vp(t,e,r){const n=qt(t),s=[],i=[],a=[];n.Fa.isEmpty()||(n.Fa.forEach((A,l)=>{a.push(n.Ka(l,e,r).then(c=>{var u;if((c||r)&&n.isPrimaryClient){const h=c?!c.fromCache:(u=r==null?void 0:r.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;n.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=Gb.Wi(l.targetId,c);i.push(h)}}))}),await Promise.all(a),n.Ca.d_(s),await async function(l,c){const u=qt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>Se.forEach(c,m=>Se.forEach(m.$i,p=>u.persistence.referenceDelegate.addReference(h,m.targetId,p)).next(()=>Se.forEach(m.Ui,p=>u.persistence.referenceDelegate.removeReference(h,m.targetId,p)))))}catch(h){if(!Sl(h))throw h;Xe("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const m=h.targetId;if(!h.fromCache){const p=u.os.get(m),b=p.snapshotVersion,B=p.withLastLimboFreeSnapshotVersion(b);u.os=u.os.insert(m,B)}}}(n.localStore,i))}async function sH(t,e){const r=qt(t);if(!r.currentUser.isEqual(e)){Xe("SyncEngine","User change. New user:",e.toKey());const n=await BT(r.localStore,e);r.currentUser=e,function(i,a){i.ka.forEach(A=>{A.forEach(l=>{l.reject(new st(Oe.CANCELLED,a))})}),i.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Vp(r,n.hs)}}function iH(t,e){const r=qt(t),n=r.Na.get(e);if(n&&n.va)return tr().add(n.key);{let s=tr();const i=r.Ma.get(e);if(!i)return s;for(const a of i){const A=r.Fa.get(a);s=s.unionWith(A.view.Va)}return s}}function OT(t){const e=qt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=LT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=iH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eH.bind(null,e),e.Ca.d_=H8.bind(null,e.eventManager),e.Ca.$a=V8.bind(null,e.eventManager),e}function MT(t){const e=qt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rH.bind(null,e),e}class mp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rv(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return bT(this.persistence,new xT,e.initialUser,this.serializer)}Ga(e){return new wT(Dv.Zr,this.serializer)}Wa(e){return new NT}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mp.provider={build:()=>new mp};class aH extends mp{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await MT(this.Ja.syncEngine),await Hp(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return bT(this.persistence,new xT,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new $M(n,e.asyncQueue,r)}Ha(e,r){const n=new bO(r,this.persistence);return new xO(e.asyncQueue,n)}Ga(e){const r=c8(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Vs.withCacheSize(this.cacheSizeBytes):Vs.DEFAULT;return new qb(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,B8(),Jg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new NT}}class H0{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>HN(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=sH.bind(null,this.syncEngine),await R8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new M8}()}createDatastore(e){const r=Rv(e.databaseInfo.databaseId),n=function(i){return new b8(i)}(e.databaseInfo);return function(i,a,A,l){return new E8(i,a,A,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,a,A){return new I8(n,s,i,a,A)}(this.localStore,this.datastore,e.asyncQueue,r=>HN(this.syncEngine,r,0),function(){return kN.D()?new kN:new y8}())}createSyncEngine(e,r){return function(s,i,a,A,l,c,u){const h=new z8(s,i,a,A,l,c);return u&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=qt(s);Xe("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Mp(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}H0.provider={build:()=>new H0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Us("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oH{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new st(Oe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(s,i){const a=qt(s),A={documents:i.map(h=>fp(a.serializer,h))},l=await a.Lo("BatchGetDocuments",a.serializer.databaseId,pr.emptyPath(),A,i.length),c=new Map;l.forEach(h=>{const m=IM(a.serializer,h);c.set(m.key.toString(),m)});const u=[];return i.forEach(h=>{const m=c.get(h.toString());Tt(!!m),u.push(m)}),u}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Jd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const s=dt.fromPath(n);this.mutations.push(new Lb(s,this.precondition(s)))}),await async function(n,s){const i=qt(n),a={writes:s.map(A=>pp(i.serializer,A))};await i.Mo("Commit",i.serializer.databaseId,pr.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Bt();r=jt.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new st(Oe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(jt.min())?en.exists(!1):en.updateTime(r):en.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(jt.min()))throw new st(Oe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return en.updateTime(r)}return en.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AH{constructor(e,r,n,s,i){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=s,this.deferred=i,this._u=n.maxAttempts,this.t_=new zb(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new oH(this.datastore),r=this.cu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(s=>{this.lu(s)}))}).catch(n=>{this.lu(n)})})}cu(e){try{const r=this.updateFunction(e);return!Lp(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!$4(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lH{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=ns.UNAUTHENTICATED,this.clientId=Ib.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async a=>{Xe("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(Xe("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new aa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=Zb(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function ww(t,e){t.asyncQueue.verifyOperationInProgress(),Xe("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await BT(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function KN(t,e){t.asyncQueue.verifyOperationInProgress();const r=await cH(t);Xe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>DN(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>DN(e.remoteStore,s)),t._onlineComponents=e}async function cH(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Xe("FirestoreClient","Using user provided OfflineComponentProvider");try{await ww(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===Oe.FAILED_PRECONDITION||s.code===Oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;fl("Error using user provided cache. Falling back to memory cache: "+r),await ww(t,new mp)}}else Xe("FirestoreClient","Using default OfflineComponentProvider"),await ww(t,new mp);return t._offlineComponents}async function aB(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Xe("FirestoreClient","Using user provided OnlineComponentProvider"),await KN(t,t._uninitializedComponentsProvider._online)):(Xe("FirestoreClient","Using default OnlineComponentProvider"),await KN(t,new H0))),t._onlineComponents}function uH(t){return aB(t).then(e=>e.syncEngine)}function dH(t){return aB(t).then(e=>e.datastore)}async function V0(t){const e=await aB(t),r=e.eventManager;return r.onListen=$8.bind(null,e.syncEngine),r.onUnlisten=X8.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=W8.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=Y8.bind(null,e.syncEngine),r}function hH(t,e,r={}){const n=new aa;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,A,l,c){const u=new iB({next:m=>{u.Za(),a.enqueueAndForget(()=>tB(i,h));const p=m.docs.has(A);!p&&m.fromCache?c.reject(new st(Oe.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&m.fromCache&&l&&l.source==="server"?c.reject(new st(Oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new nB(Dp(A.path),u,{includeMetadataChanges:!0,_a:!0});return eB(i,h)}(await V0(t),t.asyncQueue,e,r,n)),n.promise}function fH(t,e,r={}){const n=new aa;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,A,l,c){const u=new iB({next:m=>{u.Za(),a.enqueueAndForget(()=>tB(i,h)),m.fromCache&&l.source==="server"?c.reject(new st(Oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new nB(A,u,{includeMetadataChanges:!0,_a:!0});return eB(i,h)}(await V0(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(t,e,r){if(!r)throw new st(Oe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function KT(t,e,r,n){if(e===!0&&n===!0)throw new st(Oe.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function GN(t){if(!dt.isDocumentKey(t))throw new st(Oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function zN(t){if(dt.isDocumentKey(t))throw new st(Oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Mv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Bt()}function $n(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new st(Oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Mv(t);throw new st(Oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new st(Oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new st(Oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=HT((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new st(Oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new st(Oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new st(Oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hv{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $N({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new st(Oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new st(Oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $N(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new h4;switch(n.type){case"firstParty":return new hO(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new st(Oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=qN.get(r);n&&(Xe("ComponentProvider","Removing Datastore"),qN.delete(r),n.terminate())}(this),Promise.resolve()}}function qT(t,e,r,n={}){var s;const i=(t=$n(t,Hv))._getSettings(),a=`${e}:${r}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&fl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),n.mockUserToken){let A,l;if(typeof n.mockUserToken=="string")A=n.mockUserToken,l=ns.MOCK_USER;else{A=Fk(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new st(Oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ns(c)}t._authCredentials=new cO(new d4(A,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ka(this.firestore,e,this._query)}}class Wn{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wn(this.firestore,e,this._key)}}class Uo extends Ka{constructor(e,r,n){super(e,r,Dp(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wn(this.firestore,null,new dt(e))}withConverter(e){return new Uo(this.firestore,e,this._path)}}function at(t,e,...r){if(t=hn(t),VT("collection","path",e),t instanceof Hv){const n=pr.fromString(e,...r);return zN(n),new Uo(t,null,n)}{if(!(t instanceof Wn||t instanceof Uo))throw new st(Oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(pr.fromString(e,...r));return zN(n),new Uo(t.firestore,null,n)}}function Qt(t,e,...r){if(t=hn(t),arguments.length===1&&(e=Ib.newId()),VT("doc","path",e),t instanceof Hv){const n=pr.fromString(e,...r);return GN(n),new Wn(t,null,new dt(n))}{if(!(t instanceof Wn||t instanceof Uo))throw new st(Oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(pr.fromString(e,...r));return GN(n),new Wn(t.firestore,t instanceof Uo?t.converter:null,new dt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new zb(this,"async_queue_retry"),this.Vu=()=>{const n=Jg();n&&Xe("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Jg();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Jg();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new aa;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Sl(e))throw e;Xe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(a){let A=a.message||"";return a.stack&&(A=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),A}(n);throw Us("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=Yb.createAndSchedule(this,e,r,n,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Bt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function JN(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const i of n)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class fi extends Hv{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new WN,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new WN(e),this._firestoreClient=void 0,await e}}}function GT(t,e){const r=typeof t=="object"?t:gb(),n=typeof t=="string"?t:"(default)",s=pb(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=Ik("firestore");i&&qT(s,...i)}return s}function zc(t){if(t._terminated)throw new st(Oe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||zT(t),t._firestoreClient}function zT(t){var e,r,n;const s=t._freezeSettings(),i=function(A,l,c,u){return new KO(A,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,HT(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new lH(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(A){const l=A==null?void 0:A._online.build();return{_offline:A==null?void 0:A._offline.build(l),_online:l}}(t._componentsProvider))}function $T(t,e){fl("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return pH(t,H0.provider,{build:n=>new aH(n,r.cacheSizeBytes,void 0)}),Promise.resolve()}function pH(t,e,r){if((t=$n(t,fi))._firestoreClient||t._terminated)throw new st(Oe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new st(Oe.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},zT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yl(Cn.fromBase64String(e))}catch(r){throw new st(Oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new yl(Cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new st(Oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new st(Oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new st(Oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Jt(this._lat,e._lat)||Jt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mH=/^__.*__$/;class gH{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Go(e,this.data,this.fieldMask,r,this.fieldTransforms):new Wd(e,this.data,r,this.fieldTransforms)}}class WT{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Go(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function JT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Bt()}}class oB{constructor(e,r,n,s,i,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new oB(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return K0(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(JT(this.Cu)&&mH.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class vH{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Rv(e)}Qu(e,r,n,s=!1){return new oB({Cu:e,methodName:r,qu:n,path:Zr.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yd(t){const e=t._freezeSettings(),r=Rv(t._databaseId);return new vH(t._databaseId,!!e.ignoreUndefinedProperties,r)}function Gv(t,e,r,n,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,r,s);cB("Data must be an object, but it was:",a,n);const A=XT(n,a);let l,c;if(i.merge)l=new zs(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const u=[];for(const h of i.mergeFields){const m=I2(e,h,r);if(!a.contains(m))throw new st(Oe.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);ZT(u,m)||u.push(m)}l=new zs(u),c=a.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=a.fieldTransforms;return new gH(new as(A),l,c)}class zv extends Vv{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zv}}function AB(t,e,r,n){const s=t.Qu(1,e,r);cB("Data must be an object, but it was:",s,n);const i=[],a=as.empty();qc(n,(l,c)=>{const u=uB(e,l,r);c=hn(c);const h=s.Nu(u);if(c instanceof zv)i.push(u);else{const m=Kp(c,h);m!=null&&(i.push(u),a.set(u,m))}});const A=new zs(i);return new WT(a,A,s.fieldTransforms)}function lB(t,e,r,n,s,i){const a=t.Qu(1,e,r),A=[I2(e,n,r)],l=[s];if(i.length%2!=0)throw new st(Oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)A.push(I2(e,i[m])),l.push(i[m+1]);const c=[],u=as.empty();for(let m=A.length-1;m>=0;--m)if(!ZT(c,A[m])){const p=A[m];let b=l[m];b=hn(b);const B=a.Nu(p);if(b instanceof zv)c.push(p);else{const E=Kp(b,B);E!=null&&(c.push(p),u.set(p,E))}}const h=new zs(c);return new WT(u,h,a.fieldTransforms)}function yH(t,e,r,n=!1){return Kp(r,t.Qu(n?4:3,e))}function Kp(t,e){if(YT(t=hn(t)))return cB("Unsupported field value:",e,t),XT(t,e);if(t instanceof Vv)return function(n,s){if(!JT(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const i=[];let a=0;for(const A of n){let l=Kp(A,s.Lu(a));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),a++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=hn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return cM(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Lt.fromDate(n);return{timestampValue:Ld(s.serializer,i)}}if(n instanceof Lt){const i=new Lt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Ld(s.serializer,i)}}if(n instanceof Kv)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof yl)return{bytesValue:Y4(s.serializer,n._byteString)};if(n instanceof Wn){const i=s.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Mb(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof qv)return function(a,A){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(l=>{if(typeof l!="number")throw A.Bu("VectorValues must only contain numeric values.");return jb(A.serializer,l)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${Mv(n)}`)}(t,e)}function XT(t,e){const r={};return B4(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qc(t,(n,s)=>{const i=Kp(s,e.Mu(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function YT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Lt||t instanceof Kv||t instanceof yl||t instanceof Wn||t instanceof Vv||t instanceof qv)}function cB(t,e,r){if(!YT(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=Mv(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function I2(t,e,r){if((e=hn(e))instanceof $c)return e._internalPath;if(typeof e=="string")return uB(t,e);throw K0("Field path arguments must be of type string or ",t,!1,void 0,r)}const wH=new RegExp("[~\\*/\\[\\]]");function uB(t,e,r){if(e.search(wH)>=0)throw K0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new $c(...e.split("."))._internalPath}catch{throw K0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function K0(t,e,r,n,s){const i=n&&!n.isEmpty(),a=s!==void 0;let A=`Function ${e}() called with invalid data`;r&&(A+=" (via `toFirestore()`)"),A+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${n}`),a&&(l+=` in document ${s}`),l+=")"),new st(Oe.INVALID_ARGUMENT,A+t+l)}function ZT(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field($v("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class xH extends q0{data(){return super.data()}}function $v(t,e){return typeof e=="string"?uB(t,e):e instanceof $c?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new st(Oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dB{}class Wv extends dB{}function Wt(t,e,...r){let n=[];e instanceof dB&&n.push(e),n=n.concat(r),function(i){const a=i.filter(l=>l instanceof Jv).length,A=i.filter(l=>l instanceof qp).length;if(a>1||a>0&&A>0)throw new st(Oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class qp extends Wv{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new qp(e,r,n)}_apply(e){const r=this._parse(e);return rU(e._query,r),new Ka(e.firestore,e.converter,g2(e._query,r))}_parse(e){const r=Yd(e.firestore);return function(i,a,A,l,c,u,h){let m;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new st(Oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){YN(h,u);const p=[];for(const b of h)p.push(XN(l,i,b));m={arrayValue:{values:p}}}else m=XN(l,i,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||YN(h,u),m=yH(A,a,h,u==="in"||u==="not-in");return lr.create(c,u,m)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function rr(t,e,r){const n=e,s=$v("where",t);return qp._create(s,n,r)}class Jv extends dB{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Jv(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:_r.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let a=s;const A=i.getFlattenedFilters();for(const l of A)rU(a,l),a=g2(a,l)}(e._query,r),new Ka(e.firestore,e.converter,g2(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Xv extends Wv{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Xv(e,r)}_apply(e){const r=function(s,i,a){if(s.startAt!==null)throw new st(Oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new st(Oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new up(i,a)}(e._query,this._field,this._direction);return new Ka(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new $d(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function Xs(t,e="asc"){const r=e,n=$v("orderBy",t);return Xv._create(n,r)}class Yv extends Wv{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new Yv(e,r,n)}_apply(e){return new Ka(e.firestore,e.converter,k0(e._query,this._limit,this._limitType))}}function tU(t){return Yv._create("limit",t,"F")}function XN(t,e,r){if(typeof(r=hn(r))=="string"){if(r==="")throw new st(Oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!j4(e)&&r.indexOf("/")!==-1)throw new st(Oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(pr.fromString(r));if(!dt.isDocumentKey(n))throw new st(Oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return lp(t,new dt(n))}if(r instanceof Wn)return lp(t,r._key);throw new st(Oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mv(r)}.`)}function YN(t,e){if(!Array.isArray(t)||t.length===0)throw new st(Oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rU(t,e){const r=function(s,i){for(const a of s)for(const A of a.getFlattenedFilters())if(i.indexOf(A.op)>=0)return A.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new st(Oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new st(Oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class hB{convertValue(e,r="none"){switch(Lc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(pl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Bt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return qc(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var r,n,s;const i=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(a=>Jr(a.doubleValue));return new qv(i)}convertGeoPoint(e){return new Kv(Jr(e.latitude),Jr(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Pb(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(op(e));default:return null}}convertTimestamp(e){const r=Ho(e);return new Lt(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=pr.fromString(e);Tt(AT(n));const s=new ml(n.get(1),n.get(3)),i=new dt(n.popFirst(5));return s.isEqual(r)||Us(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class bH extends hB{constructor(e){super(),this.firestore=e}convertBytes(e){return new yl(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ey extends q0{constructor(e,r,n,s,i,a){super(e,r,n,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Ef(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field($v("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Ef extends ey{data(e={}){return super.data(e)}}class fB{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new pc(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Ef(this._firestore,this._userDataWriter,n.key,n,new pc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new st(Oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(A=>{const l=new Ef(s._firestore,s._userDataWriter,A.doc.key,A.doc,new pc(s._snapshot.mutatedKeys.has(A.doc.key),s._snapshot.fromCache),s.query.converter);return A.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(A=>i||A.type!==3).map(A=>{const l=new Ef(s._firestore,s._userDataWriter,A.doc.key,A.doc,new pc(s._snapshot.mutatedKeys.has(A.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return A.type!==0&&(c=a.indexOf(A.doc.key),a=a.delete(A.doc.key)),A.type!==1&&(a=a.add(A.doc),u=a.indexOf(A.doc.key)),{type:BH(A.type),doc:l,oldIndex:c,newIndex:u}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function BH(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Bt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(t){t=$n(t,Wn);const e=$n(t.firestore,fi);return hH(zc(e),t._key).then(r=>sU(e,t,r))}class ty extends hB{constructor(e){super(),this.firestore=e}convertBytes(e){return new yl(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,r)}}function Pt(t){t=$n(t,Ka);const e=$n(t.firestore,fi),r=zc(e),n=new ty(e);return eU(t._query),fH(r,t._query).then(s=>new fB(e,n,t,s))}function nU(t,e,r){t=$n(t,Wn);const n=$n(t.firestore,fi),s=Zv(t.converter,e,r);return Zd(n,[Gv(Yd(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,en.none())])}function nn(t,e,r,...n){t=$n(t,Wn);const s=$n(t.firestore,fi),i=Yd(s);let a;return a=typeof(e=hn(e))=="string"||e instanceof $c?lB(i,"updateDoc",t._key,e,r,n):AB(i,"updateDoc",t._key,e),Zd(s,[a.toMutation(t._key,en.exists(!0))])}function os(t){return Zd($n(t.firestore,fi),[new Jd(t._key,en.none())])}function Bn(t,e){const r=$n(t.firestore,fi),n=Qt(t),s=Zv(t.converter,e);return Zd(r,[Gv(Yd(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,en.exists(!1))]).then(()=>n)}function S2(t,...e){var r,n,s;t=hn(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||JN(e[a])||(i=e[a],a++);const A={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(JN(e[a])){const h=e[a];e[a]=(r=h.next)===null||r===void 0?void 0:r.bind(h),e[a+1]=(n=h.error)===null||n===void 0?void 0:n.bind(h),e[a+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let l,c,u;if(t instanceof Wn)c=$n(t.firestore,fi),u=Dp(t._key.path),l={next:h=>{e[a]&&e[a](sU(c,t,h))},error:e[a+1],complete:e[a+2]};else{const h=$n(t,Ka);c=$n(h.firestore,fi),u=h._query;const m=new ty(c);l={next:p=>{e[a]&&e[a](new fB(c,m,h,p))},error:e[a+1],complete:e[a+2]},eU(t._query)}return function(m,p,b,B){const E=new iB(B),y=new nB(p,E,b);return m.asyncQueue.enqueueAndForget(async()=>eB(await V0(m),y)),()=>{E.Za(),m.asyncQueue.enqueueAndForget(async()=>tB(await V0(m),y))}}(zc(c),u,A,l)}function Zd(t,e){return function(n,s){const i=new aa;return n.asyncQueue.enqueueAndForget(async()=>Z8(await uH(n),s,i)),i.promise}(zc(t),e)}function sU(t,e,r){const n=r.docs.get(e._key),s=new ty(t);return new ey(t,s,e._key,n,new pc(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CH={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Yd(e)}set(e,r,n){this._verifyNotCommitted();const s=MA(e,this._firestore),i=Zv(s.converter,r,n),a=Gv(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,n);return this._mutations.push(a.toMutation(s._key,en.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const i=MA(e,this._firestore);let a;return a=typeof(r=hn(r))=="string"||r instanceof $c?lB(this._dataReader,"WriteBatch.update",i._key,r,n,s):AB(this._dataReader,"WriteBatch.update",i._key,r),this._mutations.push(a.toMutation(i._key,en.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=MA(e,this._firestore);return this._mutations=this._mutations.concat(new Jd(r._key,en.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new st(Oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function MA(t,e){if((t=hn(t)).firestore!==e)throw new st(Oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=Yd(r)}get(r){const n=MA(r,this._firestore),s=new bH(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return Bt();const a=i[0];if(a.isFoundDocument())return new q0(this._firestore,s,a.key,a,n.converter);if(a.isNoDocument())return new q0(this._firestore,s,n._key,null,n.converter);throw Bt()})}set(r,n,s){const i=MA(r,this._firestore),a=Zv(i.converter,n,s),A=Gv(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,s);return this._transaction.set(i._key,A),this}update(r,n,s,...i){const a=MA(r,this._firestore);let A;return A=typeof(n=hn(n))=="string"||n instanceof $c?lB(this._dataReader,"Transaction.update",a._key,n,s,i):AB(this._dataReader,"Transaction.update",a._key,n),this._transaction.update(a._key,A),this}delete(r){const n=MA(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=MA(e,this._firestore),n=new ty(this._firestore);return super.get(e).then(s=>new ey(this._firestore,n,r._key,s._document,new pc(!1,!1),r.converter))}}function Al(t,e,r){t=$n(t,fi);const n=Object.assign(Object.assign({},CH),r);return function(i){if(i.maxAttempts<1)throw new st(Oe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(i,a,A){const l=new aa;return i.asyncQueue.enqueueAndForget(async()=>{const c=await dH(i);new AH(i.asyncQueue,c,A,a,l).au()}),l.promise}(zc(t),s=>e(new aU(t,s)),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(t){return zc(t=$n(t,fi)),new iU(t,e=>Zd(t,e))}(function(e,r=!0){(function(s){zd=s})(qd),Sd(new Uc("firestore",(n,{instanceIdentifier:s,options:i})=>{const a=n.getProvider("app").getImmediate(),A=new fi(new uO(n.getProvider("auth-internal")),new pO(n.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new st(Oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ml(c.options.projectId,u)}(a,s),a);return i=Object.assign({useFetchStreams:r},i),A._setSettings(i),A},"PUBLIC").setMultipleInstances(!0)),al(K5,"4.7.3",e),al(K5,"4.7.3","esm2017")})();const NH=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:hB,Bytes:yl,CollectionReference:Uo,DocumentReference:Wn,DocumentSnapshot:ey,FieldPath:$c,FieldValue:Vv,Firestore:fi,FirestoreError:st,GeoPoint:Kv,Query:Ka,QueryCompositeFilterConstraint:Jv,QueryConstraint:Wv,QueryDocumentSnapshot:Ef,QueryFieldFilterConstraint:qp,QueryLimitConstraint:Yv,QueryOrderByConstraint:Xv,QuerySnapshot:fB,SnapshotMetadata:pc,Timestamp:Lt,Transaction:aU,VectorValue:qv,WriteBatch:iU,_AutoId:Ib,_ByteString:Cn,_DatabaseId:ml,_DocumentKey:dt,_EmptyAuthCredentialsProvider:h4,_FieldPath:Zr,_cast:$n,_logWarn:fl,_validateIsNotUsedTogether:KT,addDoc:Bn,collection:at,connectFirestoreEmulator:qT,deleteDoc:os,doc:Qt,enableIndexedDbPersistence:$T,ensureFirestoreConfigured:zc,executeWrite:Zd,getDoc:zo,getDocs:Pt,getFirestore:GT,limit:tU,onSnapshot:S2,orderBy:Xs,query:Wt,runTransaction:Al,setDoc:nU,updateDoc:nn,where:rr,writeBatch:ry},Symbol.toStringTag,{value:"Module"})),EH={apiKey:"AIzaSyA_ZzeP_DAoXeRuallrOaJ4xFaxjnuhw-8",authDomain:"posys-103de.firebaseapp.com",projectId:"posys-103de",storageBucket:"posys-103de.firebasestorage.app",messagingSenderId:"401054148688",appId:"1:401054148688:web:1c2aea9e8b40958b514955",measurementId:"G-Q2GWQXMFLX"},oU=mb(EH),je=GT(oU),ny=i4(oU);$T(je).catch(t=>{t.code==="failed-precondition"?console.warn(" Ya hay otra pestaa usando persistencia."):t.code==="unimplemented"?console.warn(" El navegador no soporta persistencia offline."):console.error(" Error en persistencia offline:",t)});function _H(){const[t,e]=U.useState(""),[r,n]=U.useState(""),[s,i]=U.useState(!1),[a,A]=U.useState(""),[l,c]=U.useState(!1),u=Cv(),h=p=>{if(localStorage.setItem("role",p),p==="admin")return u("/admin");if(p==="vendedor_pollo")return u("/admin/salesV2");if(p==="vendedor_ropa")return u("/admin/salesClothes")},m=async p=>{if(p.preventDefault(),A(""),!t.trim()){A("Ingresa el correo.");return}if(r.length<6){A("La contrasea debe tener al menos 6 caracteres.");return}try{c(!0);const b=await $R(ny,t,r),B=b.user.uid,E=await zo(Qt(je,"users",B));if(!E.exists()){A("Tu usuario no tiene perfil en la base de datos.");return}const y=E.data(),w=y.role||"",S=y.name||"";if(!["admin","vendedor_pollo","vendedor_ropa"].includes(w)){A("Rol no vlido. Consulta al administrador.");return}localStorage.setItem("user_email",b.user.email||""),S&&localStorage.setItem("user_name",S),h(w)}catch(b){const B=String((b==null?void 0:b.code)||"");A(B==="auth/invalid-credential"||B==="auth/wrong-password"?"Credenciales incorrectas.":B==="auth/user-not-found"?"Usuario no encontrado.":B==="auth/too-many-requests"?"Demasiados intentos. Intenta ms tarde.":(b==null?void 0:b.message)||"Error al iniciar sesin.")}finally{c(!1)}};return o.jsx("div",{className:"min-h-screen grid place-items-center ",children:o.jsxs("form",{onSubmit:m,className:"w-[92%] max-w-md bg-white p-6 rounded-2xl shadow-2xl",children:[o.jsx("h2",{className:"text-2xl font-bold text-center mb-4",children:"Iniciar Sesin"}),o.jsx("label",{className:"block text-sm font-semibold",children:"Correo electrnico"}),o.jsx("input",{type:"email",className:"w-full border rounded-2xl px-3 py-2 mb-3 shadow-2xl",value:t,onChange:p=>e(p.target.value),autoComplete:"username"}),o.jsx("label",{className:"block text-sm font-semibold",children:"Contrasea"}),o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsx("input",{type:s?"text":"password",className:"flex-1 border rounded-2xl px-3 py-2 shadow-2xl",value:r,onChange:p=>n(p.target.value),minLength:6,autoComplete:"current-password"}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded-2xl shadow-2xl bg-gray-200 hover:bg-gray-300",onClick:()=>i(p=>!p),children:s?"Ocultar":"Mostrar"})]}),o.jsx("div",{className:"text-xs text-gray-600 mb-3",children:"Mnimo 6 caracteres (requisito de Firebase)."}),o.jsx("button",{className:"w-full bg-blue-600 text-white px-4 py-2 rounded-2xl shadow-2xl hover:bg-blue-700 disabled:opacity-60",disabled:l,children:l?"Entrando...":"Entrar"}),a&&o.jsx("p",{className:`mt-3 text-sm ${a.startsWith("Error")||a.includes("no vlido")?"text-red-600":"text-gray-700"}`,children:a})]})})}function cn({children:t,allowedRoles:e}){const[r,n]=U.useState(!0),[s,i]=U.useState(!1);return U.useEffect(()=>{const a=zF(ny,async A=>{if(A){const l=Qt(je,"users",A.uid),c=await zo(l);if(c.exists()){const u=c.data().role;i(e.includes(u))}}n(!1)});return()=>a()},[e]),r?o.jsx("div",{className:"p-4",children:"Cargando..."}):s?t:o.jsx(Ru,{to:"/"})}function IH({role:t}){const e="/admin",r=({isActive:H})=>`block rounded px-3 py-2 text-sm ${H?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,n=Cv(),[s,i]=U.useState(!1),[a,A]=U.useState(!1),[l,c]=U.useState(!1),[u,h]=U.useState(!1),[m,p]=U.useState(!1),[b,B]=U.useState(!1),[E,y]=U.useState(!1),[w,S]=U.useState(!1),[M,R]=U.useState(!1),[O,I]=U.useState(!1),[N,j]=U.useState(!1),[D,_]=U.useState(!1),[T,P]=U.useState(!1),[ee,Ae]=U.useState(!1),[ue,he]=U.useState(!1),[te,se]=U.useState(!1),ne=async()=>{await $F(ny),n("/")},ye=({open:H,onClick:re,children:$})=>o.jsxs("button",{type:"button",onClick:re,className:"w-full flex items-center justify-between px-3 py-2 text-left text-sm font-semibold rounded hover:bg-gray-100",children:[o.jsx("span",{children:$}),o.jsx("span",{className:"text-xs",children:H?"":""})]}),F=({open:H,onClick:re,title:$})=>o.jsxs("button",{type:"button",onClick:re,className:"ml-2 w-[calc(100%-0.5rem)] flex items-center justify-between px-3 py-2 text-left text-sm rounded hover:bg-gray-100",children:[o.jsx("span",{className:"text-blue-500 font-medium ",children:$}),o.jsx("span",{className:"text-xs",children:H?"":""})]}),L=t==="admin",W=t==="vendedor_pollo"||t==="vendedor",q=t==="vendedor_ropa";return o.jsxs("div",{className:"min-h-screen flex",children:[o.jsxs("aside",{className:`${s?"w-15 bg-gray-50 border-r p-3 transition-all duration-300 flex flex-col items-center":"w-55"} bg-gray-50 border-r p-3 transition-all duration-300 flex flex-col`,children:[o.jsx("button",{onClick:()=>i(!s),className:"mb-2 p-2 rounded bg-gray-200 hover:bg-gray-300","aria-label":s?"Expandir men":"Colapsar men",children:s?o.jsx("span",{title:"Expandir men",children:""}):o.jsx("span",{title:"Colapsar men",children:""})}),!s&&o.jsxs(o.Fragment,{children:[o.jsxs("nav",{className:"space-y-1",children:[L&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"border rounded mb-1",children:[o.jsx(ye,{open:a,onClick:()=>A(H=>!H),children:"Operaciones Pollo"}),a&&o.jsxs("div",{className:"pb-2",children:[o.jsx(F,{open:l,onClick:()=>c(H=>!H),title:"Inventarios"}),l&&o.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[o.jsx(Nr,{to:`${e}/batches`,className:r,children:"Inventario Pollo"}),o.jsx(Nr,{to:`${e}/paidBatches`,className:r,children:"Inventarios Pagados"})]}),o.jsx(F,{open:u,onClick:()=>h(H=>!H),title:"Finanzas"}),u&&o.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[o.jsx(Nr,{to:`${e}/financialDashboard`,className:r,children:"Dashboard"}),o.jsx(Nr,{to:`${e}/billing`,className:r,children:"Facturacion"}),o.jsx(Nr,{to:`${e}/expenses`,className:r,children:"Gastos"})]}),o.jsx(F,{open:m,onClick:()=>p(H=>!H),title:"Productos"}),m&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Nr,{to:`${e}/products`,className:r,children:"Productos"})})]})]}),o.jsxs("div",{className:"border rounded mb-1",children:[o.jsx(ye,{open:b,onClick:()=>B(H=>!H),children:"Operaciones Ropa"}),b&&o.jsxs("div",{className:"pb-2",children:[o.jsx(F,{open:E,onClick:()=>y(H=>!H),title:"Inventario"}),E&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Nr,{to:`${e}/InventoryClothesBatches`,className:r,children:"Inventario Ropa"})}),o.jsx(F,{open:w,onClick:()=>S(H=>!H),title:"Productos"}),w&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Nr,{to:`${e}/productsClothes`,className:r,children:"Agregar Productos"})}),o.jsx(F,{open:M,onClick:()=>R(H=>!H),title:"Clientes"}),M&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Nr,{to:`${e}/CustomersClothes`,className:r,children:"Listado de Clientes"})}),o.jsx(F,{open:O,onClick:()=>I(H=>!H),title:"Finanzas"}),O&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Nr,{to:`${e}/salesClothes`,className:r,children:"Venta Ropa"})}),O&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Nr,{to:`${e}/financialDashboardClothes`,className:r,children:"Dashboard Financiero"})}),O&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Nr,{to:`${e}/TransactionsReportClothes`,className:r,children:"Transacciones"})}),O&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Nr,{to:`${e}/ExpensesClothes`,className:r,children:"Gastos Ropa"})})]})]}),o.jsxs("div",{className:"border rounded mb-1",children:[o.jsx(ye,{open:D,onClick:()=>_(H=>!H),children:"Operaciones Dulces"}),D&&o.jsxs("div",{className:"pb-2",children:[o.jsx(F,{open:T,onClick:()=>P(H=>!H),title:"Inventario"}),T&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Nr,{to:`${e}/CandiesProducts`,className:r,children:"Inventario/Productos"})}),o.jsx(F,{open:ee,onClick:()=>Ae(H=>!H),title:"Productos"}),ee&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Nr,{to:`${e}/productsDulces`,className:r,children:"Agregar Productos"})}),o.jsx(F,{open:ue,onClick:()=>he(H=>!H),title:"Finanzas"}),ue&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Nr,{to:`${e}/salesDulces`,className:r,children:"Venta Dulces"})}),O&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Nr,{to:`${e}/financialDashboardClothes`,className:r,children:"Dashboard Financiero"})}),O&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Nr,{to:`${e}/TransactionsReportClothes`,className:r,children:"Transacciones"})}),O&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Nr,{to:`${e}/ExpensesClothes`,className:r,children:"Gastos Ropa"})})]})]}),o.jsxs("div",{className:"border rounded",children:[o.jsx(ye,{open:te,onClick:()=>se(H=>!H),children:"Operaciones Otras"}),te&&o.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[o.jsx(Nr,{to:`${e}/users`,className:r,children:"Usuarios"}),o.jsx(Nr,{to:`${e}/fix`,className:r,children:"Fix de lotes"}),o.jsx(Nr,{to:`${e}/transactionclose`,className:r,children:"Liquidaciones"})]})]})]}),W&&o.jsxs("div",{className:"border rounded",children:[o.jsx(ye,{open:u,onClick:()=>h(H=>!H),children:"Finanzas (Pollo)"}),u&&o.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[o.jsx(Nr,{to:`${e}/salesV2`,className:r,children:"Venta"}),o.jsx(Nr,{to:`${e}/bills`,className:r,children:"Cierre"})]})]}),q&&o.jsxs("div",{className:"border rounded",children:[o.jsx(ye,{open:b,onClick:()=>B(H=>!H),children:"Operaciones Ropa"}),b&&o.jsxs("div",{className:"pb-2",children:[o.jsx(F,{open:O,onClick:()=>I(H=>!H),title:"Ventas"}),O&&o.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[o.jsx(Nr,{to:`${e}/salesClothes`,className:r,children:"Venta Ropa"}),o.jsx(Nr,{to:`${e}/TransactionsReportClothes`,className:r,children:"Transacciones"})]}),o.jsx(F,{open:w,onClick:()=>S(H=>!H),title:"Productos"}),w&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Nr,{to:`${e}/productsClothes`,className:r,children:"Agregar Productos"})}),o.jsx(F,{open:M,onClick:()=>R(H=>!H),title:"Clientes"}),M&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Nr,{to:`${e}/CustomersClothes`,className:r,children:"Listado de Clientes"})})]})]})]}),o.jsx("button",{onClick:ne,className:"mt-4 bg-red-500 text-white px-3 py-2 rounded hover:bg-red-600",children:"Cerrar sesin"})]})]}),o.jsx("main",{className:"flex-1 p-6",children:o.jsx(ML,{})})]})}const AU=6048e5,SH=864e5,ZN=Symbol.for("constructDateFrom");function ca(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&ZN in t?t[ZN](e):t instanceof Date?new t.constructor(e):new Date(e)}function ks(t,e){return ca(e||t,t)}function FH(t,e,r){const n=ks(t,r==null?void 0:r.in);return isNaN(e)?ca(t,NaN):(n.setDate(n.getDate()+e),n)}function TH(t,e,r){const n=ks(t,r==null?void 0:r.in);if(isNaN(e))return ca(t,NaN);const s=n.getDate(),i=ca(t,n.getTime());i.setMonth(n.getMonth()+e+1,0);const a=i.getDate();return s>=a?i:(n.setFullYear(i.getFullYear(),i.getMonth(),s),n)}let UH={};function sy(){return UH}function gp(t,e){var A,l,c,u;const r=sy(),n=(e==null?void 0:e.weekStartsOn)??((l=(A=e==null?void 0:e.locale)==null?void 0:A.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((u=(c=r.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,s=ks(t,e==null?void 0:e.in),i=s.getDay(),a=(i<n?7:0)+i-n;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function G0(t,e){return gp(t,{...e,weekStartsOn:1})}function lU(t,e){const r=ks(t,e==null?void 0:e.in),n=r.getFullYear(),s=ca(r,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const i=G0(s),a=ca(r,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const A=G0(a);return r.getTime()>=i.getTime()?n+1:r.getTime()>=A.getTime()?n:n-1}function eE(t){const e=ks(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function PH(t,...e){const r=ca.bind(null,e.find(n=>typeof n=="object"));return e.map(r)}function tE(t,e){const r=ks(t,e==null?void 0:e.in);return r.setHours(0,0,0,0),r}function QH(t,e,r){const[n,s]=PH(r==null?void 0:r.in,t,e),i=tE(n),a=tE(s),A=+i-eE(i),l=+a-eE(a);return Math.round((A-l)/SH)}function jH(t,e){const r=lU(t,e),n=ca(t,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),G0(n)}function LH(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function kH(t){return!(!LH(t)&&typeof t!="number"||isNaN(+ks(t)))}function eh(t,e){const r=ks(t,e==null?void 0:e.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function th(t,e){const r=ks(t,e==null?void 0:e.in);return r.setDate(1),r.setHours(0,0,0,0),r}function DH(t,e){const r=ks(t,e==null?void 0:e.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const RH={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},OH=(t,e,r)=>{let n;const s=RH[t];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function xw(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const MH={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},HH={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},VH={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},KH={date:xw({formats:MH,defaultWidth:"full"}),time:xw({formats:HH,defaultWidth:"full"}),dateTime:xw({formats:VH,defaultWidth:"full"})},qH={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},GH=(t,e,r,n)=>qH[t];function Lh(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,A=r!=null&&r.width?String(r.width):a;s=t.formattingValues[A]||t.formattingValues[a]}else{const a=t.defaultWidth,A=r!=null&&r.width?String(r.width):t.defaultWidth;s=t.values[A]||t.values[a]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const zH={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},$H={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},WH={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},JH={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},XH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},YH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ZH=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},eV={ordinalNumber:ZH,era:Lh({values:zH,defaultWidth:"wide"}),quarter:Lh({values:$H,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Lh({values:WH,defaultWidth:"wide"}),day:Lh({values:JH,defaultWidth:"wide"}),dayPeriod:Lh({values:XH,defaultWidth:"wide",formattingValues:YH,defaultFormattingWidth:"wide"})};function kh(t){return(e,r={})=>{const n=r.width,s=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],A=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(A)?rV(A,h=>h.test(a)):tV(A,h=>h.test(a));let c;c=t.valueCallback?t.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c;const u=e.slice(a.length);return{value:c,rest:u}}}function tV(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function rV(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function nV(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const s=n[0],i=e.match(t.parsePattern);if(!i)return null;let a=t.valueCallback?t.valueCallback(i[0]):i[0];a=r.valueCallback?r.valueCallback(a):a;const A=e.slice(s.length);return{value:a,rest:A}}}const sV=/^(\d+)(th|st|nd|rd)?/i,iV=/\d+/i,aV={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},oV={any:[/^b/i,/^(a|c)/i]},AV={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},lV={any:[/1/i,/2/i,/3/i,/4/i]},cV={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},uV={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},dV={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},hV={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},fV={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},pV={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},mV={ordinalNumber:nV({matchPattern:sV,parsePattern:iV,valueCallback:t=>parseInt(t,10)}),era:kh({matchPatterns:aV,defaultMatchWidth:"wide",parsePatterns:oV,defaultParseWidth:"any"}),quarter:kh({matchPatterns:AV,defaultMatchWidth:"wide",parsePatterns:lV,defaultParseWidth:"any",valueCallback:t=>t+1}),month:kh({matchPatterns:cV,defaultMatchWidth:"wide",parsePatterns:uV,defaultParseWidth:"any"}),day:kh({matchPatterns:dV,defaultMatchWidth:"wide",parsePatterns:hV,defaultParseWidth:"any"}),dayPeriod:kh({matchPatterns:fV,defaultMatchWidth:"any",parsePatterns:pV,defaultParseWidth:"any"})},gV={code:"en-US",formatDistance:OH,formatLong:KH,formatRelative:GH,localize:eV,match:mV,options:{weekStartsOn:0,firstWeekContainsDate:1}};function vV(t,e){const r=ks(t,e==null?void 0:e.in);return QH(r,DH(r))+1}function yV(t,e){const r=ks(t,e==null?void 0:e.in),n=+G0(r)-+jH(r);return Math.round(n/AU)+1}function cU(t,e){var u,h,m,p;const r=ks(t,e==null?void 0:e.in),n=r.getFullYear(),s=sy(),i=(e==null?void 0:e.firstWeekContainsDate)??((h=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((p=(m=s.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,a=ca((e==null?void 0:e.in)||t,0);a.setFullYear(n+1,0,i),a.setHours(0,0,0,0);const A=gp(a,e),l=ca((e==null?void 0:e.in)||t,0);l.setFullYear(n,0,i),l.setHours(0,0,0,0);const c=gp(l,e);return+r>=+A?n+1:+r>=+c?n:n-1}function wV(t,e){var A,l,c,u;const r=sy(),n=(e==null?void 0:e.firstWeekContainsDate)??((l=(A=e==null?void 0:e.locale)==null?void 0:A.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((u=(c=r.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,s=cU(t,e),i=ca((e==null?void 0:e.in)||t,0);return i.setFullYear(s,0,n),i.setHours(0,0,0,0),gp(i,e)}function xV(t,e){const r=ks(t,e==null?void 0:e.in),n=+gp(r,e)-+wV(r,e);return Math.round(n/AU)+1}function Er(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const EA={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return Er(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Er(r+1,2)},d(t,e){return Er(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Er(t.getHours()%12||12,e.length)},H(t,e){return Er(t.getHours(),e.length)},m(t,e){return Er(t.getMinutes(),e.length)},s(t,e){return Er(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return Er(s,e.length)}},Eu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},rE={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return EA.y(t,e)},Y:function(t,e,r,n){const s=cU(t,n),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return Er(a,2)}return e==="Yo"?r.ordinalNumber(i,{unit:"year"}):Er(i,e.length)},R:function(t,e){const r=lU(t);return Er(r,e.length)},u:function(t,e){const r=t.getFullYear();return Er(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Er(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Er(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return EA.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Er(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const s=xV(t,n);return e==="wo"?r.ordinalNumber(s,{unit:"week"}):Er(s,e.length)},I:function(t,e,r){const n=yV(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):Er(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):EA.d(t,e)},D:function(t,e,r){const n=vV(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Er(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const s=t.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Er(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const s=t.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Er(i,e.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return Er(s,e.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let s;switch(n===12?s=Eu.noon:n===0?s=Eu.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let s;switch(n>=17?s=Eu.evening:n>=12?s=Eu.afternoon:n>=4?s=Eu.morning:s=Eu.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return EA.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):EA.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Er(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):Er(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):EA.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):EA.s(t,e)},S:function(t,e){return EA.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return sE(n);case"XXXX":case"XX":return ic(n);case"XXXXX":case"XXX":default:return ic(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return sE(n);case"xxxx":case"xx":return ic(n);case"xxxxx":case"xxx":default:return ic(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+nE(n,":");case"OOOO":default:return"GMT"+ic(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+nE(n,":");case"zzzz":default:return"GMT"+ic(n,":")}},t:function(t,e,r){const n=Math.trunc(+t/1e3);return Er(n,e.length)},T:function(t,e,r){return Er(+t,e.length)}};function nE(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Math.trunc(n/60),i=n%60;return i===0?r+String(s):r+String(s)+e+Er(i,2)}function sE(t,e){return t%60===0?(t>0?"-":"+")+Er(Math.abs(t)/60,2):ic(t,e)}function ic(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Er(Math.trunc(n/60),2),i=Er(n%60,2);return r+s+e+i}const iE=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},uU=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},bV=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return iE(t,e);let i;switch(n){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",iE(n,e)).replace("{{time}}",uU(s,e))},BV={p:uU,P:bV},CV=/^D+$/,NV=/^Y+$/,EV=["D","DD","YY","YYYY"];function _V(t){return CV.test(t)}function IV(t){return NV.test(t)}function SV(t,e,r){const n=FV(t,e,r);if(console.warn(n),EV.includes(t))throw new RangeError(n)}function FV(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const TV=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,UV=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,PV=/^'([^]*?)'?$/,QV=/''/g,jV=/[a-zA-Z]/;function er(t,e,r){var u,h,m,p;const n=sy(),s=n.locale??gV,i=n.firstWeekContainsDate??((h=(u=n.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??1,a=n.weekStartsOn??((p=(m=n.locale)==null?void 0:m.options)==null?void 0:p.weekStartsOn)??0,A=ks(t,r==null?void 0:r.in);if(!kH(A))throw new RangeError("Invalid time value");let l=e.match(UV).map(b=>{const B=b[0];if(B==="p"||B==="P"){const E=BV[B];return E(b,s.formatLong)}return b}).join("").match(TV).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const B=b[0];if(B==="'")return{isToken:!1,value:LV(b)};if(rE[B])return{isToken:!0,value:b};if(B.match(jV))throw new RangeError("Format string contains an unescaped latin alphabet character `"+B+"`");return{isToken:!1,value:b}});s.localize.preprocessor&&(l=s.localize.preprocessor(A,l));const c={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return l.map(b=>{if(!b.isToken)return b.value;const B=b.value;(IV(B)||_V(B))&&SV(B,e,String(t));const E=rE[B[0]];return E(A,B,s.localize,c)}).join("")}function LV(t){const e=t.match(PV);return e?e[1].replace(QV,"'"):t}function kV(t,e,r){return FH(t,-14,r)}function DV(t,e,r){return TH(t,-1,r)}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var F2=function(t,e){return F2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},F2(t,e)};function ha(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");F2(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var T2=function(){return T2=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},T2.apply(this,arguments)};function Fs(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function A(u){try{c(n.next(u))}catch(h){a(h)}}function l(u){try{c(n.throw(u))}catch(h){a(h)}}function c(u){u.done?i(u.value):s(u.value).then(A,l)}c((n=n.apply(t,[])).next())})}function ws(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,a;return a={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function A(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],s=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Vm(t,e,r){if(arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||e)}var Vo=function(){function t(e,r,n,s){this.left=e,this.top=r,this.width=n,this.height=s}return t.prototype.add=function(e,r,n,s){return new t(this.left+e,this.top+r,this.width+n,this.height+s)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(s){return s.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),iy=function(t,e){return Vo.fromClientRect(t,e.getBoundingClientRect())},RV=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),s=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new Vo(0,0,n,s)},ay=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var i=t.charCodeAt(r++);(i&64512)===56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},vn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,i="";++s<r;){var a=t[s];a<=65535?n.push(a):(a-=65536,n.push((a>>10)+55296,a%1024+56320)),(s+1===r||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},aE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",OV=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Km=0;Km<aE.length;Km++)OV[aE.charCodeAt(Km)]=Km;var oE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",nf=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var qm=0;qm<oE.length;qm++)nf[oE.charCodeAt(qm)]=qm;var MV=function(t){var e=t.length*.75,r=t.length,n,s=0,i,a,A,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)i=nf[t.charCodeAt(n)],a=nf[t.charCodeAt(n+1)],A=nf[t.charCodeAt(n+2)],l=nf[t.charCodeAt(n+3)],u[s++]=i<<2|a>>4,u[s++]=(a&15)<<4|A>>2,u[s++]=(A&3)<<6|l&63;return c},HV=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},VV=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},xc=5,pB=11,bw=2,KV=pB-xc,dU=65536>>xc,qV=1<<xc,Bw=qV-1,GV=1024>>xc,zV=dU+GV,$V=zV,WV=32,JV=$V+WV,XV=65536>>pB,YV=1<<KV,ZV=YV-1,AE=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},e7=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},t7=function(t,e){var r=MV(t),n=Array.isArray(r)?VV(r):new Uint32Array(r),s=Array.isArray(r)?HV(r):new Uint16Array(r),i=24,a=AE(s,i/2,n[4]/2),A=n[5]===2?AE(s,(i+n[4])/2):e7(n,Math.ceil((i+n[4])/4));return new r7(n[0],n[1],n[2],n[3],a,A)},r7=function(){function t(e,r,n,s,i,a){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=i,this.data=a}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>xc],r=(r<<bw)+(e&Bw),this.data[r];if(e<=65535)return r=this.index[dU+(e-55296>>xc)],r=(r<<bw)+(e&Bw),this.data[r];if(e<this.highStart)return r=JV-XV+(e>>pB),r=this.index[r],r+=e>>xc&ZV,r=this.index[r],r=(r<<bw)+(e&Bw),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),lE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n7=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Gm=0;Gm<lE.length;Gm++)n7[lE.charCodeAt(Gm)]=Gm;var s7="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",cE=50,i7=1,hU=2,fU=3,a7=4,o7=5,uE=7,pU=8,dE=9,GA=10,U2=11,hE=12,P2=13,A7=14,sf=15,Q2=16,zm=17,Dh=18,l7=19,fE=20,j2=21,Rh=22,Cw=23,_u=24,ai=25,af=26,of=27,Iu=28,c7=29,uc=30,u7=31,$m=32,Wm=33,L2=34,k2=35,D2=36,vp=37,R2=38,Xg=39,Yg=40,Nw=41,mU=42,d7=43,h7=[9001,65288],gU="!",or="",Jm="",O2=t7(s7),ho=[uc,D2],M2=[i7,hU,fU,o7],vU=[GA,pU],pE=[of,af],f7=M2.concat(vU),mE=[R2,Xg,Yg,L2,k2],p7=[sf,P2],m7=function(t,e){e===void 0&&(e="strict");var r=[],n=[],s=[];return t.forEach(function(i,a){var A=O2.get(i);if(A>cE?(s.push(!0),A-=cE):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(i)!==-1)return n.push(a),r.push(Q2);if(A===a7||A===U2){if(a===0)return n.push(a),r.push(uc);var l=r[a-1];return f7.indexOf(l)===-1?(n.push(n[a-1]),r.push(l)):(n.push(a),r.push(uc))}if(n.push(a),A===u7)return r.push(e==="strict"?j2:vp);if(A===mU||A===c7)return r.push(uc);if(A===d7)return i>=131072&&i<=196605||i>=196608&&i<=262141?r.push(vp):r.push(uc);r.push(A)}),[n,r,s]},Ew=function(t,e,r,n){var s=n[r];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var i=r;i<=n.length;){i++;var a=n[i];if(a===e)return!0;if(a!==GA)break}if(s===GA)for(var i=r;i>0;){i--;var A=n[i];if(Array.isArray(t)?t.indexOf(A)!==-1:t===A)for(var l=r;l<=n.length;){l++;var a=n[l];if(a===e)return!0;if(a!==GA)break}if(A!==GA)break}return!1},gE=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===GA)r--;else return n}return 0},g7=function(t,e,r,n,s){if(r[n]===0)return or;var i=n-1;if(Array.isArray(s)&&s[i]===!0)return or;var a=i-1,A=i+1,l=e[i],c=a>=0?e[a]:0,u=e[A];if(l===hU&&u===fU)return or;if(M2.indexOf(l)!==-1)return gU;if(M2.indexOf(u)!==-1||vU.indexOf(u)!==-1)return or;if(gE(i,e)===pU)return Jm;if(O2.get(t[i])===U2||(l===$m||l===Wm)&&O2.get(t[A])===U2||l===uE||u===uE||l===dE||[GA,P2,sf].indexOf(l)===-1&&u===dE||[zm,Dh,l7,_u,Iu].indexOf(u)!==-1||gE(i,e)===Rh||Ew(Cw,Rh,i,e)||Ew([zm,Dh],j2,i,e)||Ew(hE,hE,i,e))return or;if(l===GA)return Jm;if(l===Cw||u===Cw)return or;if(u===Q2||l===Q2)return Jm;if([P2,sf,j2].indexOf(u)!==-1||l===A7||c===D2&&p7.indexOf(l)!==-1||l===Iu&&u===D2||u===fE||ho.indexOf(u)!==-1&&l===ai||ho.indexOf(l)!==-1&&u===ai||l===of&&[vp,$m,Wm].indexOf(u)!==-1||[vp,$m,Wm].indexOf(l)!==-1&&u===af||ho.indexOf(l)!==-1&&pE.indexOf(u)!==-1||pE.indexOf(l)!==-1&&ho.indexOf(u)!==-1||[of,af].indexOf(l)!==-1&&(u===ai||[Rh,sf].indexOf(u)!==-1&&e[A+1]===ai)||[Rh,sf].indexOf(l)!==-1&&u===ai||l===ai&&[ai,Iu,_u].indexOf(u)!==-1)return or;if([ai,Iu,_u,zm,Dh].indexOf(u)!==-1)for(var h=i;h>=0;){var m=e[h];if(m===ai)return or;if([Iu,_u].indexOf(m)!==-1)h--;else break}if([of,af].indexOf(u)!==-1)for(var h=[zm,Dh].indexOf(l)!==-1?a:i;h>=0;){var m=e[h];if(m===ai)return or;if([Iu,_u].indexOf(m)!==-1)h--;else break}if(R2===l&&[R2,Xg,L2,k2].indexOf(u)!==-1||[Xg,L2].indexOf(l)!==-1&&[Xg,Yg].indexOf(u)!==-1||[Yg,k2].indexOf(l)!==-1&&u===Yg||mE.indexOf(l)!==-1&&[fE,af].indexOf(u)!==-1||mE.indexOf(u)!==-1&&l===of||ho.indexOf(l)!==-1&&ho.indexOf(u)!==-1||l===_u&&ho.indexOf(u)!==-1||ho.concat(ai).indexOf(l)!==-1&&u===Rh&&h7.indexOf(t[A])===-1||ho.concat(ai).indexOf(u)!==-1&&l===Dh)return or;if(l===Nw&&u===Nw){for(var p=r[i],b=1;p>0&&(p--,e[p]===Nw);)b++;if(b%2!==0)return or}return l===$m&&u===Wm?or:Jm},v7=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=m7(t,e.lineBreak),n=r[0],s=r[1],i=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(A){return[ai,uc,mU].indexOf(A)!==-1?vp:A}));var a=e.wordBreak==="keep-all"?i.map(function(A,l){return A&&t[l]>=19968&&t[l]<=40959}):void 0;return[n,s,a]},y7=function(){function t(e,r,n,s){this.codePoints=e,this.required=r===gU,this.start=n,this.end=s}return t.prototype.slice=function(){return vn.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),w7=function(t,e){var r=ay(t),n=v7(r,e),s=n[0],i=n[1],a=n[2],A=r.length,l=0,c=0;return{next:function(){if(c>=A)return{done:!0,value:null};for(var u=or;c<A&&(u=g7(r,i,s,++c,a))===or;);if(u!==or||c===A){var h=new y7(r,u,l,c);return l=c,{value:h,done:!1}}return{done:!0,value:null}}}},x7=1,b7=2,Gp=4,vE=8,z0=10,yE=47,_f=92,B7=9,C7=32,Xm=34,Oh=61,N7=35,E7=36,_7=37,Ym=39,Zm=40,Mh=41,I7=95,Ks=45,S7=33,F7=60,T7=62,U7=64,P7=91,Q7=93,j7=61,L7=123,eg=63,k7=125,wE=124,D7=126,R7=128,xE=65533,_w=42,mc=43,O7=44,M7=58,H7=59,yp=46,V7=0,K7=8,q7=11,G7=14,z7=31,$7=127,Fa=-1,yU=48,wU=97,xU=101,W7=102,J7=117,X7=122,bU=65,BU=69,CU=70,Y7=85,Z7=90,xs=function(t){return t>=yU&&t<=57},e9=function(t){return t>=55296&&t<=57343},Su=function(t){return xs(t)||t>=bU&&t<=CU||t>=wU&&t<=W7},t9=function(t){return t>=wU&&t<=X7},r9=function(t){return t>=bU&&t<=Z7},n9=function(t){return t9(t)||r9(t)},s9=function(t){return t>=R7},tg=function(t){return t===z0||t===B7||t===C7},$0=function(t){return n9(t)||s9(t)||t===I7},bE=function(t){return $0(t)||xs(t)||t===Ks},i9=function(t){return t>=V7&&t<=K7||t===q7||t>=G7&&t<=z7||t===$7},PA=function(t,e){return t!==_f?!1:e!==z0},rg=function(t,e,r){return t===Ks?$0(e)||PA(e,r):$0(t)?!0:!!(t===_f&&PA(t,e))},Iw=function(t,e,r){return t===mc||t===Ks?xs(e)?!0:e===yp&&xs(r):xs(t===yp?e:t)},a9=function(t){var e=0,r=1;(t[e]===mc||t[e]===Ks)&&(t[e]===Ks&&(r=-1),e++);for(var n=[];xs(t[e]);)n.push(t[e++]);var s=n.length?parseInt(vn.apply(void 0,n),10):0;t[e]===yp&&e++;for(var i=[];xs(t[e]);)i.push(t[e++]);var a=i.length,A=a?parseInt(vn.apply(void 0,i),10):0;(t[e]===BU||t[e]===xU)&&e++;var l=1;(t[e]===mc||t[e]===Ks)&&(t[e]===Ks&&(l=-1),e++);for(var c=[];xs(t[e]);)c.push(t[e++]);var u=c.length?parseInt(vn.apply(void 0,c),10):0;return r*(s+A*Math.pow(10,-a))*Math.pow(10,l*u)},o9={type:2},A9={type:3},l9={type:4},c9={type:13},u9={type:8},d9={type:21},h9={type:9},f9={type:10},p9={type:11},m9={type:12},g9={type:14},ng={type:23},v9={type:1},y9={type:25},w9={type:24},x9={type:26},b9={type:27},B9={type:28},C9={type:29},N9={type:31},H2={type:32},NU=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(ay(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==H2;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Xm:return this.consumeStringToken(Xm);case N7:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),s=this.peekCodePoint(2);if(bE(r)||PA(n,s)){var i=rg(r,n,s)?b7:x7,a=this.consumeName();return{type:5,value:a,flags:i}}break;case E7:if(this.peekCodePoint(0)===Oh)return this.consumeCodePoint(),c9;break;case Ym:return this.consumeStringToken(Ym);case Zm:return o9;case Mh:return A9;case _w:if(this.peekCodePoint(0)===Oh)return this.consumeCodePoint(),g9;break;case mc:if(Iw(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case O7:return l9;case Ks:var A=e,l=this.peekCodePoint(0),c=this.peekCodePoint(1);if(Iw(A,l,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(rg(A,l,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(l===Ks&&c===T7)return this.consumeCodePoint(),this.consumeCodePoint(),w9;break;case yp:if(Iw(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case yE:if(this.peekCodePoint(0)===_w)for(this.consumeCodePoint();;){var u=this.consumeCodePoint();if(u===_w&&(u=this.consumeCodePoint(),u===yE))return this.consumeToken();if(u===Fa)return this.consumeToken()}break;case M7:return x9;case H7:return b9;case F7:if(this.peekCodePoint(0)===S7&&this.peekCodePoint(1)===Ks&&this.peekCodePoint(2)===Ks)return this.consumeCodePoint(),this.consumeCodePoint(),y9;break;case U7:var h=this.peekCodePoint(0),m=this.peekCodePoint(1),p=this.peekCodePoint(2);if(rg(h,m,p)){var a=this.consumeName();return{type:7,value:a}}break;case P7:return B9;case _f:if(PA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case Q7:return C9;case j7:if(this.peekCodePoint(0)===Oh)return this.consumeCodePoint(),u9;break;case L7:return p9;case k7:return m9;case J7:case Y7:var b=this.peekCodePoint(0),B=this.peekCodePoint(1);return b===mc&&(Su(B)||B===eg)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case wE:if(this.peekCodePoint(0)===Oh)return this.consumeCodePoint(),h9;if(this.peekCodePoint(0)===wE)return this.consumeCodePoint(),d9;break;case D7:if(this.peekCodePoint(0)===Oh)return this.consumeCodePoint(),f9;break;case Fa:return H2}return tg(e)?(this.consumeWhiteSpace(),N9):xs(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):$0(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:vn(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();Su(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===eg&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var s=parseInt(vn.apply(void 0,e.map(function(l){return l===eg?yU:l})),16),i=parseInt(vn.apply(void 0,e.map(function(l){return l===eg?CU:l})),16);return{type:30,start:s,end:i}}var a=parseInt(vn.apply(void 0,e),16);if(this.peekCodePoint(0)===Ks&&Su(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var A=[];Su(r)&&A.length<6;)A.push(r),r=this.consumeCodePoint();var i=parseInt(vn.apply(void 0,A),16);return{type:30,start:a,end:i}}else return{type:30,start:a,end:a}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Zm?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Zm?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Fa)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===Ym||r===Xm){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Fa||this.peekCodePoint(0)===Mh)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),ng)}for(;;){var s=this.consumeCodePoint();if(s===Fa||s===Mh)return{type:22,value:vn.apply(void 0,e)};if(tg(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Fa||this.peekCodePoint(0)===Mh?(this.consumeCodePoint(),{type:22,value:vn.apply(void 0,e)}):(this.consumeBadUrlRemnants(),ng);if(s===Xm||s===Ym||s===Zm||i9(s))return this.consumeBadUrlRemnants(),ng;if(s===_f)if(PA(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),ng;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;tg(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Mh||e===Fa)return;PA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var s=Math.min(r,e);n+=vn.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var s=this._value[n];if(s===Fa||s===void 0||s===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(s===z0)return this._value.splice(0,n),v9;if(s===_f){var i=this._value[n+1];i!==Fa&&i!==void 0&&(i===z0?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):PA(s,i)&&(r+=this.consumeStringSlice(n),r+=vn(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=Gp,n=this.peekCodePoint(0);for((n===mc||n===Ks)&&e.push(this.consumeCodePoint());xs(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(n===yp&&xs(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=vE;xs(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),s=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((n===BU||n===xU)&&((s===mc||s===Ks)&&xs(i)||xs(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=vE;xs(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[a9(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],s=this.peekCodePoint(0),i=this.peekCodePoint(1),a=this.peekCodePoint(2);if(rg(s,i,a)){var A=this.consumeName();return{type:15,number:r,flags:n,unit:A}}return s===_7?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Su(e)){for(var r=vn(e);Su(this.peekCodePoint(0))&&r.length<6;)r+=vn(this.consumeCodePoint());tg(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||e9(n)||n>1114111?xE:n}return e===Fa?xE:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(bE(r))e+=vn(r);else if(PA(r,this.peekCodePoint(0)))e+=vn(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),EU=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new NU;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||_9(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?H2:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),zp=function(t){return t.type===15},rh=function(t){return t.type===17},Tr=function(t){return t.type===20},E9=function(t){return t.type===0},V2=function(t,e){return Tr(t)&&t.value===e},_U=function(t){return t.type!==31},Dd=function(t){return t.type!==31&&t.type!==4},qa=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},_9=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},wl=function(t){return t.type===17||t.type===15},In=function(t){return t.type===16||wl(t)},IU=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},As={type:17,number:0,flags:Gp},mB={type:16,number:50,flags:Gp},zA={type:16,number:100,flags:Gp},Af=function(t,e,r){var n=t[0],s=t[1];return[Or(n,e),Or(typeof s<"u"?s:n,r)]},Or=function(t,e){if(t.type===16)return t.number/100*e;if(zp(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},SU="deg",FU="grad",TU="rad",UU="turn",oy={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case SU:return Math.PI*e.number/180;case FU:return Math.PI/200*e.number;case TU:return e.number;case UU:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},PU=function(t){return t.type===15&&(t.unit===SU||t.unit===FU||t.unit===TU||t.unit===UU)},QU=function(t){var e=t.filter(Tr).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[As,As];case"to top":case"bottom":return Pi(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[As,zA];case"to right":case"left":return Pi(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[zA,zA];case"to bottom":case"top":return Pi(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[zA,As];case"to left":case"right":return Pi(270)}return 0},Pi=function(t){return Math.PI*t/180},ll={name:"color",parse:function(t,e){if(e.type===18){var r=I9[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),s=e.value.substring(1,2),i=e.value.substring(2,3);return $A(parseInt(n+n,16),parseInt(s+s,16),parseInt(i+i,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),s=e.value.substring(1,2),i=e.value.substring(2,3),a=e.value.substring(3,4);return $A(parseInt(n+n,16),parseInt(s+s,16),parseInt(i+i,16),parseInt(a+a,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),s=e.value.substring(2,4),i=e.value.substring(4,6);return $A(parseInt(n,16),parseInt(s,16),parseInt(i,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),s=e.value.substring(2,4),i=e.value.substring(4,6),a=e.value.substring(6,8);return $A(parseInt(n,16),parseInt(s,16),parseInt(i,16),parseInt(a,16)/255)}}if(e.type===20){var A=Po[e.value.toUpperCase()];if(typeof A<"u")return A}return Po.TRANSPARENT}},cl=function(t){return(255&t)===0},Vn=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+n+","+r+","+e/255+")":"rgb("+s+","+n+","+r+")"},$A=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},BE=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},CE=function(t,e){var r=e.filter(Dd);if(r.length===3){var n=r.map(BE),s=n[0],i=n[1],a=n[2];return $A(s,i,a,1)}if(r.length===4){var A=r.map(BE),s=A[0],i=A[1],a=A[2],l=A[3];return $A(s,i,a,l)}return 0};function Sw(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var NE=function(t,e){var r=e.filter(Dd),n=r[0],s=r[1],i=r[2],a=r[3],A=(n.type===17?Pi(n.number):oy.parse(t,n))/(Math.PI*2),l=In(s)?s.number/100:0,c=In(i)?i.number/100:0,u=typeof a<"u"&&In(a)?Or(a,1):1;if(l===0)return $A(c*255,c*255,c*255,1);var h=c<=.5?c*(l+1):c+l-c*l,m=c*2-h,p=Sw(m,h,A+1/3),b=Sw(m,h,A),B=Sw(m,h,A-1/3);return $A(p*255,b*255,B*255,u)},I9={hsl:NE,hsla:NE,rgb:CE,rgba:CE},If=function(t,e){return ll.parse(t,EU.create(e).parseComponentValue())},Po={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},S9={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Tr(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},F9={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ay=function(t,e){var r=ll.parse(t,e[0]),n=e[1];return n&&In(n)?{color:r,stop:n}:{color:r,stop:null}},EE=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=As),n.stop===null&&(n.stop=zA);for(var s=[],i=0,a=0;a<t.length;a++){var A=t[a].stop;if(A!==null){var l=Or(A,e);l>i?s.push(l):s.push(i),i=l}else s.push(null)}for(var c=null,a=0;a<s.length;a++){var u=s[a];if(u===null)c===null&&(c=a);else if(c!==null){for(var h=a-c,m=s[c-1],p=(u-m)/(h+1),b=1;b<=h;b++)s[c+b-1]=p*b;c=null}}return t.map(function(B,E){var y=B.color;return{color:y,stop:Math.max(Math.min(1,s[E]/e),0)}})},T9=function(t,e,r){var n=e/2,s=r/2,i=Or(t[0],e)-n,a=s-Or(t[1],r);return(Math.atan2(a,i)+Math.PI*2)%(Math.PI*2)},U9=function(t,e,r){var n=typeof t=="number"?t:T9(t,e,r),s=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),i=e/2,a=r/2,A=s/2,l=Math.sin(n-Math.PI/2)*A,c=Math.cos(n-Math.PI/2)*A;return[s,i-c,i+c,a-l,a+l]},Zi=function(t,e){return Math.sqrt(t*t+e*e)},_E=function(t,e,r,n,s){var i=[[0,0],[0,e],[t,0],[t,e]];return i.reduce(function(a,A){var l=A[0],c=A[1],u=Zi(r-l,n-c);return(s?u<a.optimumDistance:u>a.optimumDistance)?{optimumCorner:A,optimumDistance:u}:a},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},P9=function(t,e,r,n,s){var i=0,a=0;switch(t.size){case 0:t.shape===0?i=a=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(i=Math.min(Math.abs(e),Math.abs(e-n)),a=Math.min(Math.abs(r),Math.abs(r-s)));break;case 2:if(t.shape===0)i=a=Math.min(Zi(e,r),Zi(e,r-s),Zi(e-n,r),Zi(e-n,r-s));else if(t.shape===1){var A=Math.min(Math.abs(r),Math.abs(r-s))/Math.min(Math.abs(e),Math.abs(e-n)),l=_E(n,s,e,r,!0),c=l[0],u=l[1];i=Zi(c-e,(u-r)/A),a=A*i}break;case 1:t.shape===0?i=a=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(i=Math.max(Math.abs(e),Math.abs(e-n)),a=Math.max(Math.abs(r),Math.abs(r-s)));break;case 3:if(t.shape===0)i=a=Math.max(Zi(e,r),Zi(e,r-s),Zi(e-n,r),Zi(e-n,r-s));else if(t.shape===1){var A=Math.max(Math.abs(r),Math.abs(r-s))/Math.max(Math.abs(e),Math.abs(e-n)),h=_E(n,s,e,r,!1),c=h[0],u=h[1];i=Zi(c-e,(u-r)/A),a=A*i}break}return Array.isArray(t.size)&&(i=Or(t.size[0],n),a=t.size.length===2?Or(t.size[1],s):i),[i,a]},Q9=function(t,e){var r=Pi(180),n=[];return qa(e).forEach(function(s,i){if(i===0){var a=s[0];if(a.type===20&&a.value==="to"){r=QU(s);return}else if(PU(a)){r=oy.parse(t,a);return}}var A=Ay(t,s);n.push(A)}),{angle:r,stops:n,type:1}},sg=function(t,e){var r=Pi(180),n=[];return qa(e).forEach(function(s,i){if(i===0){var a=s[0];if(a.type===20&&["top","left","right","bottom"].indexOf(a.value)!==-1){r=QU(s);return}else if(PU(a)){r=(oy.parse(t,a)+Pi(270))%Pi(360);return}}var A=Ay(t,s);n.push(A)}),{angle:r,stops:n,type:1}},j9=function(t,e){var r=Pi(180),n=[],s=1,i=0,a=3,A=[];return qa(e).forEach(function(l,c){var u=l[0];if(c===0){if(Tr(u)&&u.value==="linear"){s=1;return}else if(Tr(u)&&u.value==="radial"){s=2;return}}if(u.type===18){if(u.name==="from"){var h=ll.parse(t,u.values[0]);n.push({stop:As,color:h})}else if(u.name==="to"){var h=ll.parse(t,u.values[0]);n.push({stop:zA,color:h})}else if(u.name==="color-stop"){var m=u.values.filter(Dd);if(m.length===2){var h=ll.parse(t,m[1]),p=m[0];rh(p)&&n.push({stop:{type:16,number:p.number*100,flags:p.flags},color:h})}}}}),s===1?{angle:(r+Pi(180))%Pi(360),stops:n,type:s}:{size:a,shape:i,stops:n,position:A,type:s}},jU="closest-side",LU="farthest-side",kU="closest-corner",DU="farthest-corner",RU="circle",OU="ellipse",MU="cover",HU="contain",L9=function(t,e){var r=0,n=3,s=[],i=[];return qa(e).forEach(function(a,A){var l=!0;if(A===0){var c=!1;l=a.reduce(function(h,m){if(c)if(Tr(m))switch(m.value){case"center":return i.push(mB),h;case"top":case"left":return i.push(As),h;case"right":case"bottom":return i.push(zA),h}else(In(m)||wl(m))&&i.push(m);else if(Tr(m))switch(m.value){case RU:return r=0,!1;case OU:return r=1,!1;case"at":return c=!0,!1;case jU:return n=0,!1;case MU:case LU:return n=1,!1;case HU:case kU:return n=2,!1;case DU:return n=3,!1}else if(wl(m)||In(m))return Array.isArray(n)||(n=[]),n.push(m),!1;return h},l)}if(l){var u=Ay(t,a);s.push(u)}}),{size:n,shape:r,stops:s,position:i,type:2}},ig=function(t,e){var r=0,n=3,s=[],i=[];return qa(e).forEach(function(a,A){var l=!0;if(A===0?l=a.reduce(function(u,h){if(Tr(h))switch(h.value){case"center":return i.push(mB),!1;case"top":case"left":return i.push(As),!1;case"right":case"bottom":return i.push(zA),!1}else if(In(h)||wl(h))return i.push(h),!1;return u},l):A===1&&(l=a.reduce(function(u,h){if(Tr(h))switch(h.value){case RU:return r=0,!1;case OU:return r=1,!1;case HU:case jU:return n=0,!1;case LU:return n=1,!1;case kU:return n=2,!1;case MU:case DU:return n=3,!1}else if(wl(h)||In(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return u},l)),l){var c=Ay(t,a);s.push(c)}}),{size:n,shape:r,stops:s,position:i,type:2}},k9=function(t){return t.type===1},D9=function(t){return t.type===2},gB={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=VU[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function R9(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!VU[t.name])}var VU={"linear-gradient":Q9,"-moz-linear-gradient":sg,"-ms-linear-gradient":sg,"-o-linear-gradient":sg,"-webkit-linear-gradient":sg,"radial-gradient":L9,"-moz-radial-gradient":ig,"-ms-radial-gradient":ig,"-o-radial-gradient":ig,"-webkit-radial-gradient":ig,"-webkit-gradient":j9},O9={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return Dd(n)&&R9(n)}).map(function(n){return gB.parse(t,n)})}},M9={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Tr(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},H9={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return qa(e).map(function(r){return r.filter(In)}).map(IU)}},V9={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return qa(e).map(function(r){return r.filter(Tr).map(function(n){return n.value}).join(" ")}).map(K9)}},K9=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},yd;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(yd||(yd={}));var q9={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return qa(e).map(function(r){return r.filter(G9)})}},G9=function(t){return Tr(t)||In(t)},ly=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},z9=ly("top"),$9=ly("right"),W9=ly("bottom"),J9=ly("left"),cy=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return IU(r.filter(In))}}},X9=cy("top-left"),Y9=cy("top-right"),Z9=cy("bottom-right"),eK=cy("bottom-left"),uy=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},tK=uy("top"),rK=uy("right"),nK=uy("bottom"),sK=uy("left"),dy=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return zp(r)?r.number:0}}},iK=dy("top"),aK=dy("right"),oK=dy("bottom"),AK=dy("left"),lK={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},cK={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},uK={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Tr).reduce(function(r,n){return r|dK(n.value)},0)}},dK=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},hK={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},fK={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},W0;(function(t){t.NORMAL="normal",t.STRICT="strict"})(W0||(W0={}));var pK={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return W0.STRICT;case"normal":default:return W0.NORMAL}}},mK={name:"line-height",initialValue:"normal",prefix:!1,type:4},IE=function(t,e){return Tr(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:In(t)?Or(t,e):e},gK={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:gB.parse(t,e)}},vK={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},K2={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},hy=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},yK=hy("top"),wK=hy("right"),xK=hy("bottom"),bK=hy("left"),BK={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Tr).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},CK={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},fy=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},NK=fy("top"),EK=fy("right"),_K=fy("bottom"),IK=fy("left"),SK={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},FK={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},TK={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&V2(e[0],"none")?[]:qa(e).map(function(r){for(var n={color:Po.TRANSPARENT,offsetX:As,offsetY:As,blur:As},s=0,i=0;i<r.length;i++){var a=r[i];wl(a)?(s===0?n.offsetX=a:s===1?n.offsetY=a:n.blur=a,s++):n.color=ll.parse(t,a)}return n})}},UK={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},PK={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=LK[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},QK=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},jK=function(t){var e=t.filter(function(l){return l.type===17}).map(function(l){return l.number}),r=e[0],n=e[1];e[2],e[3];var s=e[4],i=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var a=e[12],A=e[13];return e[14],e[15],e.length===16?[r,n,s,i,a,A]:null},LK={matrix:QK,matrix3d:jK},SE={type:16,number:50,flags:Gp},kK=[SE,SE],DK={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(In);return r.length!==2?kK:[r[0],r[1]]}},RK={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Sf;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Sf||(Sf={}));var OK={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Sf.BREAK_ALL;case"keep-all":return Sf.KEEP_ALL;case"normal":default:return Sf.NORMAL}}},MK={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(rh(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},KU={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},HK={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return rh(e)?e.number:1}},VK={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},KK={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Tr).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},qK={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(s){switch(s.type){case 20:case 0:r.push(s.value);break;case 17:r.push(s.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},GK={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},zK={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(rh(e))return e.number;if(Tr(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},$K={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Tr).map(function(r){return r.value})}},WK={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},jn=function(t,e){return(t&e)!==0},JK={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},XK={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],s=e.filter(_U),i=0;i<s.length;i++){var a=s[i],A=s[i+1];if(a.type===20){var l=A&&rh(A)?A.number:1;n.push({counter:a.value,increment:l})}}return n}},YK={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(_U),s=0;s<n.length;s++){var i=n[s],a=n[s+1];if(Tr(i)&&i.value!=="none"){var A=a&&rh(a)?a.number:0;r.push({counter:i.value,reset:A})}}return r}},ZK={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(zp).map(function(r){return KU.parse(t,r)})}},eq={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],s=e.filter(E9);if(s.length%2!==0)return null;for(var i=0;i<s.length;i+=2){var a=s[i].value,A=s[i+1].value;n.push({open:a,close:A})}return n}},FE=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},tq={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&V2(e[0],"none")?[]:qa(e).map(function(r){for(var n={color:255,offsetX:As,offsetY:As,blur:As,spread:As,inset:!1},s=0,i=0;i<r.length;i++){var a=r[i];V2(a,"inset")?n.inset=!0:wl(a)?(s===0?n.offsetX=a:s===1?n.offsetY=a:s===2?n.blur=a:n.spread=a,s++):n.color=ll.parse(t,a)}return n})}},rq={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(Tr).forEach(function(s){switch(s.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(s){n.indexOf(s)===-1&&n.push(s)}),n}},nq={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},sq={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return zp(e)?e.number:0}},iq=function(){function t(e,r){var n,s;this.animationDuration=wt(e,ZK,r.animationDuration),this.backgroundClip=wt(e,S9,r.backgroundClip),this.backgroundColor=wt(e,F9,r.backgroundColor),this.backgroundImage=wt(e,O9,r.backgroundImage),this.backgroundOrigin=wt(e,M9,r.backgroundOrigin),this.backgroundPosition=wt(e,H9,r.backgroundPosition),this.backgroundRepeat=wt(e,V9,r.backgroundRepeat),this.backgroundSize=wt(e,q9,r.backgroundSize),this.borderTopColor=wt(e,z9,r.borderTopColor),this.borderRightColor=wt(e,$9,r.borderRightColor),this.borderBottomColor=wt(e,W9,r.borderBottomColor),this.borderLeftColor=wt(e,J9,r.borderLeftColor),this.borderTopLeftRadius=wt(e,X9,r.borderTopLeftRadius),this.borderTopRightRadius=wt(e,Y9,r.borderTopRightRadius),this.borderBottomRightRadius=wt(e,Z9,r.borderBottomRightRadius),this.borderBottomLeftRadius=wt(e,eK,r.borderBottomLeftRadius),this.borderTopStyle=wt(e,tK,r.borderTopStyle),this.borderRightStyle=wt(e,rK,r.borderRightStyle),this.borderBottomStyle=wt(e,nK,r.borderBottomStyle),this.borderLeftStyle=wt(e,sK,r.borderLeftStyle),this.borderTopWidth=wt(e,iK,r.borderTopWidth),this.borderRightWidth=wt(e,aK,r.borderRightWidth),this.borderBottomWidth=wt(e,oK,r.borderBottomWidth),this.borderLeftWidth=wt(e,AK,r.borderLeftWidth),this.boxShadow=wt(e,tq,r.boxShadow),this.color=wt(e,lK,r.color),this.direction=wt(e,cK,r.direction),this.display=wt(e,uK,r.display),this.float=wt(e,hK,r.cssFloat),this.fontFamily=wt(e,qK,r.fontFamily),this.fontSize=wt(e,GK,r.fontSize),this.fontStyle=wt(e,WK,r.fontStyle),this.fontVariant=wt(e,$K,r.fontVariant),this.fontWeight=wt(e,zK,r.fontWeight),this.letterSpacing=wt(e,fK,r.letterSpacing),this.lineBreak=wt(e,pK,r.lineBreak),this.lineHeight=wt(e,mK,r.lineHeight),this.listStyleImage=wt(e,gK,r.listStyleImage),this.listStylePosition=wt(e,vK,r.listStylePosition),this.listStyleType=wt(e,K2,r.listStyleType),this.marginTop=wt(e,yK,r.marginTop),this.marginRight=wt(e,wK,r.marginRight),this.marginBottom=wt(e,xK,r.marginBottom),this.marginLeft=wt(e,bK,r.marginLeft),this.opacity=wt(e,HK,r.opacity);var i=wt(e,BK,r.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=wt(e,CK,r.overflowWrap),this.paddingTop=wt(e,NK,r.paddingTop),this.paddingRight=wt(e,EK,r.paddingRight),this.paddingBottom=wt(e,_K,r.paddingBottom),this.paddingLeft=wt(e,IK,r.paddingLeft),this.paintOrder=wt(e,rq,r.paintOrder),this.position=wt(e,FK,r.position),this.textAlign=wt(e,SK,r.textAlign),this.textDecorationColor=wt(e,VK,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=wt(e,KK,(s=r.textDecorationLine)!==null&&s!==void 0?s:r.textDecoration),this.textShadow=wt(e,TK,r.textShadow),this.textTransform=wt(e,UK,r.textTransform),this.transform=wt(e,PK,r.transform),this.transformOrigin=wt(e,DK,r.transformOrigin),this.visibility=wt(e,RK,r.visibility),this.webkitTextStrokeColor=wt(e,nq,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=wt(e,sq,r.webkitTextStrokeWidth),this.wordBreak=wt(e,OK,r.wordBreak),this.zIndex=wt(e,MK,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return cl(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return jn(this.display,4)||jn(this.display,33554432)||jn(this.display,268435456)||jn(this.display,536870912)||jn(this.display,67108864)||jn(this.display,134217728)},t}(),aq=function(){function t(e,r){this.content=wt(e,JK,r.content),this.quotes=wt(e,eq,r.quotes)}return t}(),TE=function(){function t(e,r){this.counterIncrement=wt(e,XK,r.counterIncrement),this.counterReset=wt(e,YK,r.counterReset)}return t}(),wt=function(t,e,r){var n=new NU,s=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(s);var i=new EU(n.read());switch(e.type){case 2:var a=i.parseComponentValue();return e.parse(t,Tr(a)?a.value:e.initialValue);case 0:return e.parse(t,i.parseComponentValue());case 1:return e.parse(t,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(e.format){case"angle":return oy.parse(t,i.parseComponentValue());case"color":return ll.parse(t,i.parseComponentValue());case"image":return gB.parse(t,i.parseComponentValue());case"length":var A=i.parseComponentValue();return wl(A)?A:As;case"length-percentage":var l=i.parseComponentValue();return In(l)?l:As;case"time":return KU.parse(t,i.parseComponentValue())}break}},oq="data-html2canvas-debug",Aq=function(t){var e=t.getAttribute(oq);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},q2=function(t,e){var r=Aq(t);return r===1||e===r},Ga=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,q2(r,3))debugger;this.styles=new iq(e,window.getComputedStyle(r,null)),$2(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=iy(this.context,r),q2(r,4)&&(this.flags|=16)}return t}(),lq="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",UE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lf=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ag=0;ag<UE.length;ag++)lf[UE.charCodeAt(ag)]=ag;var cq=function(t){var e=t.length*.75,r=t.length,n,s=0,i,a,A,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)i=lf[t.charCodeAt(n)],a=lf[t.charCodeAt(n+1)],A=lf[t.charCodeAt(n+2)],l=lf[t.charCodeAt(n+3)],u[s++]=i<<2|a>>4,u[s++]=(a&15)<<4|A>>2,u[s++]=(A&3)<<6|l&63;return c},uq=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},dq=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},bc=5,vB=11,Fw=2,hq=vB-bc,qU=65536>>bc,fq=1<<bc,Tw=fq-1,pq=1024>>bc,mq=qU+pq,gq=mq,vq=32,yq=gq+vq,wq=65536>>vB,xq=1<<hq,bq=xq-1,PE=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},Bq=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},Cq=function(t,e){var r=cq(t),n=Array.isArray(r)?dq(r):new Uint32Array(r),s=Array.isArray(r)?uq(r):new Uint16Array(r),i=24,a=PE(s,i/2,n[4]/2),A=n[5]===2?PE(s,(i+n[4])/2):Bq(n,Math.ceil((i+n[4])/4));return new Nq(n[0],n[1],n[2],n[3],a,A)},Nq=function(){function t(e,r,n,s,i,a){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=i,this.data=a}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>bc],r=(r<<Fw)+(e&Tw),this.data[r];if(e<=65535)return r=this.index[qU+(e-55296>>bc)],r=(r<<Fw)+(e&Tw),this.data[r];if(e<this.highStart)return r=yq-wq+(e>>vB),r=this.index[r],r+=e>>bc&bq,r=this.index[r],r=(r<<Fw)+(e&Tw),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),QE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Eq=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var og=0;og<QE.length;og++)Eq[QE.charCodeAt(og)]=og;var _q=1,Uw=2,Pw=3,jE=4,LE=5,Iq=7,kE=8,Qw=9,jw=10,DE=11,RE=12,OE=13,ME=14,Lw=15,Sq=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var i=t.charCodeAt(r++);(i&64512)===56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},Fq=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,i="";++s<r;){var a=t[s];a<=65535?n.push(a):(a-=65536,n.push((a>>10)+55296,a%1024+56320)),(s+1===r||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},Tq=Cq(lq),_i="",kw="",Uq=function(t){return Tq.get(t)},Pq=function(t,e,r){var n=r-2,s=e[n],i=e[r-1],a=e[r];if(i===Uw&&a===Pw)return _i;if(i===Uw||i===Pw||i===jE||a===Uw||a===Pw||a===jE)return kw;if(i===kE&&[kE,Qw,DE,RE].indexOf(a)!==-1||(i===DE||i===Qw)&&(a===Qw||a===jw)||(i===RE||i===jw)&&a===jw||a===OE||a===LE||a===Iq||i===_q)return _i;if(i===OE&&a===ME){for(;s===LE;)s=e[--n];if(s===ME)return _i}if(i===Lw&&a===Lw){for(var A=0;s===Lw;)A++,s=e[--n];if(A%2===0)return _i}return kw},Qq=function(t){var e=Sq(t),r=e.length,n=0,s=0,i=e.map(Uq);return{next:function(){if(n>=r)return{done:!0,value:null};for(var a=_i;n<r&&(a=Pq(e,i,++n))===_i;);if(a!==_i||n===r){var A=Fq.apply(null,e.slice(s,n));return s=n,{value:A,done:!1}}return{done:!0,value:null}}}},jq=function(t){for(var e=Qq(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},Lq=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var s=r.getBoundingClientRect(),i=Math.round(s.height);if(t.body.removeChild(n),i===e)return!0}}return!1},kq=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,s=ay(n.data).map(function(l){return vn(l)}),i=0,a={},A=s.every(function(l,c){r.setStart(n,i),r.setEnd(n,i+l.length);var u=r.getBoundingClientRect();i+=l.length;var h=u.x>a.x||u.y>a.y;return a=u,c===0?!0:h});return t.body.removeChild(e),A},Dq=function(){return typeof new Image().crossOrigin<"u"},Rq=function(){return typeof new XMLHttpRequest().responseType=="string"},Oq=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},HE=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},Mq=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var s=new Image,i=e.toDataURL();s.src=i;var a=G2(r,r,0,0,s);return n.fillStyle="red",n.fillRect(0,0,r,r),VE(a).then(function(A){n.drawImage(A,0,0);var l=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var c=t.createElement("div");return c.style.backgroundImage="url("+i+")",c.style.height=r+"px",HE(l)?VE(G2(r,r,0,0,c)):Promise.reject(!1)}).then(function(A){return n.drawImage(A,0,0),HE(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},G2=function(t,e,r,n,s){var i="http://www.w3.org/2000/svg",a=document.createElementNS(i,"svg"),A=document.createElementNS(i,"foreignObject");return a.setAttributeNS(null,"width",t.toString()),a.setAttributeNS(null,"height",e.toString()),A.setAttributeNS(null,"width","100%"),A.setAttributeNS(null,"height","100%"),A.setAttributeNS(null,"x",r.toString()),A.setAttributeNS(null,"y",n.toString()),A.setAttributeNS(null,"externalResourcesRequired","true"),a.appendChild(A),A.appendChild(s),a},VE=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},rs={get SUPPORT_RANGE_BOUNDS(){var t=Lq(document);return Object.defineProperty(rs,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=rs.SUPPORT_RANGE_BOUNDS&&kq(document);return Object.defineProperty(rs,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=Oq(document);return Object.defineProperty(rs,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?Mq(document):Promise.resolve(!1);return Object.defineProperty(rs,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=Dq();return Object.defineProperty(rs,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=Rq();return Object.defineProperty(rs,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(rs,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(rs,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Ff=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),Hq=function(t,e,r,n){var s=qq(e,r),i=[],a=0;return s.forEach(function(A){if(r.textDecorationLine.length||A.trim().length>0)if(rs.SUPPORT_RANGE_BOUNDS){var l=KE(n,a,A.length).getClientRects();if(l.length>1){var c=yB(A),u=0;c.forEach(function(m){i.push(new Ff(m,Vo.fromDOMRectList(t,KE(n,u+a,m.length).getClientRects()))),u+=m.length})}else i.push(new Ff(A,Vo.fromDOMRectList(t,l)))}else{var h=n.splitText(A.length);i.push(new Ff(A,Vq(t,n))),n=h}else rs.SUPPORT_RANGE_BOUNDS||(n=n.splitText(A.length));a+=A.length}),i},Vq=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(n,e);var i=iy(t,n);return n.firstChild&&s.replaceChild(n.firstChild,n),i}}return Vo.EMPTY},KE=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var s=n.createRange();return s.setStart(t,e),s.setEnd(t,e+r),s},yB=function(t){if(rs.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return jq(t)},Kq=function(t,e){if(rs.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return zq(t,e)},qq=function(t,e){return e.letterSpacing!==0?yB(t):Kq(t,e)},Gq=[32,160,4961,65792,65793,4153,4241],zq=function(t,e){for(var r=w7(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],s,i=function(){if(s.value){var a=s.value.slice(),A=ay(a),l="";A.forEach(function(c){Gq.indexOf(c)===-1?l+=vn(c):(l.length&&n.push(l),n.push(vn(c)),l="")}),l.length&&n.push(l)}};!(s=r.next()).done;)i();return n},$q=function(){function t(e,r,n){this.text=Wq(r.data,n.textTransform),this.textBounds=Hq(e,this.text,n,r)}return t}(),Wq=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(Jq,Xq);case 2:return t.toUpperCase();default:return t}},Jq=/(^|\s|:|-|\(|\))([a-z])/g,Xq=function(t,e,r){return t.length>0?e+r.toUpperCase():t},GU=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.src=n.currentSrc||n.src,s.intrinsicWidth=n.naturalWidth,s.intrinsicHeight=n.naturalHeight,s.context.cache.addImage(s.src),s}return e}(Ga),zU=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n,s.intrinsicWidth=n.width,s.intrinsicHeight=n.height,s}return e}(Ga),$U=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this,i=new XMLSerializer,a=iy(r,n);return n.setAttribute("width",a.width+"px"),n.setAttribute("height",a.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(n)),s.intrinsicWidth=n.width.baseVal.value,s.intrinsicHeight=n.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(Ga),WU=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(Ga),z2=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.start=n.start,s.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,s}return e}(Ga),Yq=[{type:15,flags:0,unit:"px",number:3}],Zq=[{type:16,flags:0,number:50}],eG=function(t){return t.width>t.height?new Vo(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new Vo(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},tG=function(t){var e=t.type===rG?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},J0="checkbox",X0="radio",rG="password",qE=707406591,wB=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this;switch(s.type=n.type.toLowerCase(),s.checked=n.checked,s.value=tG(n),(s.type===J0||s.type===X0)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=eG(s.bounds)),s.type){case J0:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=Yq;break;case X0:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=Zq;break}return s}return e}(Ga),JU=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this,i=n.options[n.selectedIndex||0];return s.value=i&&i.text||"",s}return e}(Ga),XU=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(Ga),YU=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this;s.src=n.src,s.width=parseInt(n.width,10)||0,s.height=parseInt(n.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){s.tree=e3(r,n.contentWindow.document.documentElement);var i=n.contentWindow.document.documentElement?If(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):Po.TRANSPARENT,a=n.contentWindow.document.body?If(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):Po.TRANSPARENT;s.backgroundColor=cl(i)?cl(a)?s.styles.backgroundColor:a:i}}catch{}return s}return e}(Ga),nG=["OL","UL","MENU"],Zg=function(t,e,r,n){for(var s=e.firstChild,i=void 0;s;s=i)if(i=s.nextSibling,t3(s)&&s.data.trim().length>0)r.textNodes.push(new $q(t,s,r.styles));else if(Ad(s))if(i3(s)&&s.assignedNodes)s.assignedNodes().forEach(function(A){return Zg(t,A,r,n)});else{var a=ZU(t,s);a.styles.isVisible()&&(sG(s,a,n)?a.flags|=4:iG(a.styles)&&(a.flags|=2),nG.indexOf(s.tagName)!==-1&&(a.flags|=8),r.elements.push(a),s.slot,s.shadowRoot?Zg(t,s.shadowRoot,a,n):!Y0(s)&&!r3(s)&&!Z0(s)&&Zg(t,s,a,n))}},ZU=function(t,e){return W2(e)?new GU(t,e):n3(e)?new zU(t,e):r3(e)?new $U(t,e):aG(e)?new WU(t,e):oG(e)?new z2(t,e):AG(e)?new wB(t,e):Z0(e)?new JU(t,e):Y0(e)?new XU(t,e):s3(e)?new YU(t,e):new Ga(t,e)},e3=function(t,e){var r=ZU(t,e);return r.flags|=4,Zg(t,e,r,r),r},sG=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||xB(t)&&r.styles.isTransparent()},iG=function(t){return t.isPositioned()||t.isFloating()},t3=function(t){return t.nodeType===Node.TEXT_NODE},Ad=function(t){return t.nodeType===Node.ELEMENT_NODE},$2=function(t){return Ad(t)&&typeof t.style<"u"&&!e0(t)},e0=function(t){return typeof t.className=="object"},aG=function(t){return t.tagName==="LI"},oG=function(t){return t.tagName==="OL"},AG=function(t){return t.tagName==="INPUT"},lG=function(t){return t.tagName==="HTML"},r3=function(t){return t.tagName==="svg"},xB=function(t){return t.tagName==="BODY"},n3=function(t){return t.tagName==="CANVAS"},GE=function(t){return t.tagName==="VIDEO"},W2=function(t){return t.tagName==="IMG"},s3=function(t){return t.tagName==="IFRAME"},zE=function(t){return t.tagName==="STYLE"},cG=function(t){return t.tagName==="SCRIPT"},Y0=function(t){return t.tagName==="TEXTAREA"},Z0=function(t){return t.tagName==="SELECT"},i3=function(t){return t.tagName==="SLOT"},$E=function(t){return t.tagName.indexOf("-")>0},uG=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,s=e.counterReset,i=!0;n!==null&&n.forEach(function(A){var l=r.counters[A.counter];l&&A.increment!==0&&(i=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=A.increment)});var a=[];return i&&s.forEach(function(A){var l=r.counters[A.counter];a.push(A.counter),l||(l=r.counters[A.counter]=[]),l.push(A.reset)}),a},t}(),WE={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},JE={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},dG={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},hG={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Fu=function(t,e,r,n,s,i){return t<e||t>r?wp(t,s,i.length>0):n.integers.reduce(function(a,A,l){for(;t>=A;)t-=A,a+=n.values[l];return a},"")+i},a3=function(t,e,r,n){var s="";do r||t--,s=n(t)+s,t/=e;while(t*e>=e);return s},gn=function(t,e,r,n,s){var i=r-e+1;return(t<0?"-":"")+(a3(Math.abs(t),i,n,function(a){return vn(Math.floor(a%i)+e)})+s)},Yl=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return a3(Math.abs(t),n,!1,function(s){return e[Math.floor(s%n)]})+r},qu=1,SA=2,FA=4,cf=8,fo=function(t,e,r,n,s,i){if(t<-9999||t>9999)return wp(t,4,s.length>0);var a=Math.abs(t),A=s;if(a===0)return e[0]+A;for(var l=0;a>0&&l<=4;l++){var c=a%10;c===0&&jn(i,qu)&&A!==""?A=e[c]+A:c>1||c===1&&l===0||c===1&&l===1&&jn(i,SA)||c===1&&l===1&&jn(i,FA)&&t>100||c===1&&l>1&&jn(i,cf)?A=e[c]+(l>0?r[l-1]:"")+A:c===1&&l>0&&(A=r[l-1]+A),a=Math.floor(a/10)}return(t<0?n:"")+A},XE="",YE="",ZE="",Dw="",wp=function(t,e,r){var n=r?". ":"",s=r?"":"",i=r?", ":"",a=r?" ":"";switch(e){case 0:return""+a;case 1:return""+a;case 2:return""+a;case 5:var A=gn(t,48,57,!0,n);return A.length<4?"0"+A:A;case 4:return Yl(t,"",s);case 6:return Fu(t,1,3999,WE,3,n).toLowerCase();case 7:return Fu(t,1,3999,WE,3,n);case 8:return gn(t,945,969,!1,n);case 9:return gn(t,97,122,!1,n);case 10:return gn(t,65,90,!1,n);case 11:return gn(t,1632,1641,!0,n);case 12:case 49:return Fu(t,1,9999,JE,3,n);case 35:return Fu(t,1,9999,JE,3,n).toLowerCase();case 13:return gn(t,2534,2543,!0,n);case 14:case 30:return gn(t,6112,6121,!0,n);case 15:return Yl(t,"",s);case 16:return Yl(t,"",s);case 17:case 48:return fo(t,"",XE,"",s,SA|FA|cf);case 47:return fo(t,"",YE,"",s,qu|SA|FA|cf);case 42:return fo(t,"",XE,"",s,SA|FA|cf);case 41:return fo(t,"",YE,"",s,qu|SA|FA|cf);case 26:return fo(t,"","",ZE,s,0);case 25:return fo(t,"","",ZE,s,qu|SA|FA);case 31:return fo(t,"","",Dw,i,qu|SA|FA);case 33:return fo(t,"","",Dw,i,0);case 32:return fo(t,"","",Dw,i,qu|SA|FA);case 18:return gn(t,2406,2415,!0,n);case 20:return Fu(t,1,19999,hG,3,n);case 21:return gn(t,2790,2799,!0,n);case 22:return gn(t,2662,2671,!0,n);case 22:return Fu(t,1,10999,dG,3,n);case 23:return Yl(t,"");case 24:return Yl(t,"");case 27:return gn(t,3302,3311,!0,n);case 28:return Yl(t,"",s);case 29:return Yl(t,"",s);case 34:return gn(t,3792,3801,!0,n);case 37:return gn(t,6160,6169,!0,n);case 38:return gn(t,4160,4169,!0,n);case 39:return gn(t,2918,2927,!0,n);case 40:return gn(t,1776,1785,!0,n);case 43:return gn(t,3046,3055,!0,n);case 44:return gn(t,3174,3183,!0,n);case 45:return gn(t,3664,3673,!0,n);case 46:return gn(t,3872,3881,!0,n);case 3:default:return gn(t,48,57,!0,n)}},o3="data-html2canvas-ignore",e_=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new uG,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,s=fG(e,r);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var i=e.defaultView.pageXOffset,a=e.defaultView.pageYOffset,A=s.contentWindow,l=A.document,c=gG(s).then(function(){return Fs(n,void 0,void 0,function(){var u,h;return ws(this,function(m){switch(m.label){case 0:return this.scrolledElements.forEach(xG),A&&(A.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(A.scrollY!==r.top||A.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(A.scrollX-r.left,A.scrollY-r.top,0,0))),u=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:m.sent(),m.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,mG(l)]:[3,4];case 3:m.sent(),m.label=4;case 4:return typeof u=="function"?[2,Promise.resolve().then(function(){return u(l,h)}).then(function(){return s})]:[2,s]}})})});return l.open(),l.write(yG(document.doctype)+"<html></html>"),wG(this.referenceElement.ownerDocument,i,a),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),c},t.prototype.createElementClone=function(e){if(q2(e,2))debugger;if(n3(e))return this.createCanvasClone(e);if(GE(e))return this.createVideoClone(e);if(zE(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return W2(r)&&(W2(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),$E(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return Rw(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(i,a){return a&&typeof a.cssText=="string"?i+a.cssText:i},""),s=e.cloneNode(!1);return s.textContent=n,s}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),i.name!=="SecurityError")throw i}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var i=e.getContext("2d"),a=s.getContext("2d");if(a)if(!this.options.allowTaint&&i)a.putImageData(i.getImageData(0,0,e.width,e.height),0,0);else{var A=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(A){var l=A.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}a.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,r,n){(!Ad(r)||!cG(r)&&!r.hasAttribute(o3)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Ad(r)||!zE(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var s=this,i=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;i;i=i.nextSibling)if(Ad(i)&&i3(i)&&typeof i.assignedNodes=="function"){var a=i.assignedNodes();a.length&&a.forEach(function(A){return s.appendChildNode(r,A,n)})}else this.appendChildNode(r,i,n)},t.prototype.cloneNode=function(e,r){if(t3(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&Ad(e)&&($2(e)||e0(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var i=n.getComputedStyle(e),a=n.getComputedStyle(e,":before"),A=n.getComputedStyle(e,":after");this.referenceElement===e&&$2(s)&&(this.clonedReferenceElement=s),xB(s)&&CG(s);var l=this.counters.parse(new TE(this.context,i)),c=this.resolvePseudoContent(e,s,a,Tf.BEFORE);$E(e)&&(r=!0),GE(e)||this.cloneChildNodes(e,s,r),c&&s.insertBefore(c,s.firstChild);var u=this.resolvePseudoContent(e,s,A,Tf.AFTER);return u&&s.appendChild(u),this.counters.pop(l),(i&&(this.options.copyStyles||e0(e))&&!s3(e)||r)&&Rw(i,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(Y0(e)||Z0(e))&&(Y0(s)||Z0(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,s){var i=this;if(n){var a=n.content,A=r.ownerDocument;if(!(!A||!a||a==="none"||a==="-moz-alt-content"||n.display==="none")){this.counters.parse(new TE(this.context,n));var l=new aq(this.context,n),c=A.createElement("html2canvaspseudoelement");Rw(n,c),l.content.forEach(function(h){if(h.type===0)c.appendChild(A.createTextNode(h.value));else if(h.type===22){var m=A.createElement("img");m.src=h.value,m.style.opacity="1",c.appendChild(m)}else if(h.type===18){if(h.name==="attr"){var p=h.values.filter(Tr);p.length&&c.appendChild(A.createTextNode(e.getAttribute(p[0].value)||""))}else if(h.name==="counter"){var b=h.values.filter(Dd),B=b[0],E=b[1];if(B&&Tr(B)){var y=i.counters.getCounterValue(B.value),w=E&&Tr(E)?K2.parse(i.context,E.value):3;c.appendChild(A.createTextNode(wp(y,w,!1)))}}else if(h.name==="counters"){var S=h.values.filter(Dd),B=S[0],M=S[1],E=S[2];if(B&&Tr(B)){var R=i.counters.getCounterValues(B.value),O=E&&Tr(E)?K2.parse(i.context,E.value):3,I=M&&M.type===0?M.value:"",N=R.map(function(_){return wp(_,O,!1)}).join(I);c.appendChild(A.createTextNode(N))}}}else if(h.type===20)switch(h.value){case"open-quote":c.appendChild(A.createTextNode(FE(l.quotes,i.quoteDepth++,!0)));break;case"close-quote":c.appendChild(A.createTextNode(FE(l.quotes,--i.quoteDepth,!1)));break;default:c.appendChild(A.createTextNode(h.value))}}),c.className=J2+" "+X2;var u=s===Tf.BEFORE?" "+J2:" "+X2;return e0(r)?r.className.baseValue+=u:r.className+=u,c}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Tf;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Tf||(Tf={}));var fG=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(o3,"true"),t.body.appendChild(r),r},pG=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},mG=function(t){return Promise.all([].slice.call(t.images,0).map(pG))},gG=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var s=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var i=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(i),e(t))},50)}})},vG=["all","d","content"],Rw=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);vG.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},yG=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},wG=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},xG=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},bG=":before",BG=":after",J2="___html2canvas___pseudoelement_before",X2="___html2canvas___pseudoelement_after",t_=`{
    content: "" !important;
    display: none !important;
}`,CG=function(t){NG(t,"."+J2+bG+t_+`
         .`+X2+BG+t_)},NG=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},A3=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),EG=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(Mw(e)||FG(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Fs(this,void 0,void 0,function(){var r,n,s,i,a=this;return ws(this,function(A){switch(A.label){case 0:return r=A3.isSameOrigin(e),n=!Ow(e)&&this._options.useCORS===!0&&rs.SUPPORT_CORS_IMAGES&&!r,s=!Ow(e)&&!r&&!Mw(e)&&typeof this._options.proxy=="string"&&rs.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!Ow(e)&&!Mw(e)&&!s&&!n?[2]:(i=e,s?[4,this.proxy(i)]:[3,2]);case 1:i=A.sent(),A.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(l,c){var u=new Image;u.onload=function(){return l(u)},u.onerror=c,(TG(i)||n)&&(u.crossOrigin="anonymous"),u.src=i,u.complete===!0&&setTimeout(function(){return l(u)},500),a._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+a._options.imageTimeout+"ms) loading image")},a._options.imageTimeout)})];case 3:return[2,A.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(i,a){var A=rs.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(A==="text")i(l.response);else{var h=new FileReader;h.addEventListener("load",function(){return i(h.result)},!1),h.addEventListener("error",function(m){return a(m)},!1),h.readAsDataURL(l.response)}else a("Failed to proxy resource "+s+" with status code "+l.status)},l.onerror=a;var c=n.indexOf("?")>-1?"&":"?";if(l.open("GET",""+n+c+"url="+encodeURIComponent(e)+"&responseType="+A),A!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=A),r._options.imageTimeout){var u=r._options.imageTimeout;l.timeout=u,l.ontimeout=function(){return a("Timed out ("+u+"ms) proxying "+s)}}l.send()})},t}(),_G=/^data:image\/svg\+xml/i,IG=/^data:image\/.*;base64,/i,SG=/^data:image\/.*/i,FG=function(t){return rs.SUPPORT_SVG_DRAWING||!UG(t)},Ow=function(t){return SG.test(t)},TG=function(t){return IG.test(t)},Mw=function(t){return t.substr(0,4)==="blob"},UG=function(t){return t.substr(-3).toLowerCase()==="svg"||_G.test(t)},pt=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),Tu=function(t,e,r){return new pt(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},Ag=function(){function t(e,r,n,s){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=s}return t.prototype.subdivide=function(e,r){var n=Tu(this.start,this.startControl,e),s=Tu(this.startControl,this.endControl,e),i=Tu(this.endControl,this.end,e),a=Tu(n,s,e),A=Tu(s,i,e),l=Tu(a,A,e);return r?new t(this.start,n,a,l):new t(l,A,i,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Fi=function(t){return t.type===1},PG=function(){function t(e){var r=e.styles,n=e.bounds,s=Af(r.borderTopLeftRadius,n.width,n.height),i=s[0],a=s[1],A=Af(r.borderTopRightRadius,n.width,n.height),l=A[0],c=A[1],u=Af(r.borderBottomRightRadius,n.width,n.height),h=u[0],m=u[1],p=Af(r.borderBottomLeftRadius,n.width,n.height),b=p[0],B=p[1],E=[];E.push((i+l)/n.width),E.push((b+h)/n.width),E.push((a+B)/n.height),E.push((c+m)/n.height);var y=Math.max.apply(Math,E);y>1&&(i/=y,a/=y,l/=y,c/=y,h/=y,m/=y,b/=y,B/=y);var w=n.width-l,S=n.height-m,M=n.width-h,R=n.height-B,O=r.borderTopWidth,I=r.borderRightWidth,N=r.borderBottomWidth,j=r.borderLeftWidth,D=Or(r.paddingTop,e.bounds.width),_=Or(r.paddingRight,e.bounds.width),T=Or(r.paddingBottom,e.bounds.width),P=Or(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||a>0?Wr(n.left+j/3,n.top+O/3,i-j/3,a-O/3,xr.TOP_LEFT):new pt(n.left+j/3,n.top+O/3),this.topRightBorderDoubleOuterBox=i>0||a>0?Wr(n.left+w,n.top+O/3,l-I/3,c-O/3,xr.TOP_RIGHT):new pt(n.left+n.width-I/3,n.top+O/3),this.bottomRightBorderDoubleOuterBox=h>0||m>0?Wr(n.left+M,n.top+S,h-I/3,m-N/3,xr.BOTTOM_RIGHT):new pt(n.left+n.width-I/3,n.top+n.height-N/3),this.bottomLeftBorderDoubleOuterBox=b>0||B>0?Wr(n.left+j/3,n.top+R,b-j/3,B-N/3,xr.BOTTOM_LEFT):new pt(n.left+j/3,n.top+n.height-N/3),this.topLeftBorderDoubleInnerBox=i>0||a>0?Wr(n.left+j*2/3,n.top+O*2/3,i-j*2/3,a-O*2/3,xr.TOP_LEFT):new pt(n.left+j*2/3,n.top+O*2/3),this.topRightBorderDoubleInnerBox=i>0||a>0?Wr(n.left+w,n.top+O*2/3,l-I*2/3,c-O*2/3,xr.TOP_RIGHT):new pt(n.left+n.width-I*2/3,n.top+O*2/3),this.bottomRightBorderDoubleInnerBox=h>0||m>0?Wr(n.left+M,n.top+S,h-I*2/3,m-N*2/3,xr.BOTTOM_RIGHT):new pt(n.left+n.width-I*2/3,n.top+n.height-N*2/3),this.bottomLeftBorderDoubleInnerBox=b>0||B>0?Wr(n.left+j*2/3,n.top+R,b-j*2/3,B-N*2/3,xr.BOTTOM_LEFT):new pt(n.left+j*2/3,n.top+n.height-N*2/3),this.topLeftBorderStroke=i>0||a>0?Wr(n.left+j/2,n.top+O/2,i-j/2,a-O/2,xr.TOP_LEFT):new pt(n.left+j/2,n.top+O/2),this.topRightBorderStroke=i>0||a>0?Wr(n.left+w,n.top+O/2,l-I/2,c-O/2,xr.TOP_RIGHT):new pt(n.left+n.width-I/2,n.top+O/2),this.bottomRightBorderStroke=h>0||m>0?Wr(n.left+M,n.top+S,h-I/2,m-N/2,xr.BOTTOM_RIGHT):new pt(n.left+n.width-I/2,n.top+n.height-N/2),this.bottomLeftBorderStroke=b>0||B>0?Wr(n.left+j/2,n.top+R,b-j/2,B-N/2,xr.BOTTOM_LEFT):new pt(n.left+j/2,n.top+n.height-N/2),this.topLeftBorderBox=i>0||a>0?Wr(n.left,n.top,i,a,xr.TOP_LEFT):new pt(n.left,n.top),this.topRightBorderBox=l>0||c>0?Wr(n.left+w,n.top,l,c,xr.TOP_RIGHT):new pt(n.left+n.width,n.top),this.bottomRightBorderBox=h>0||m>0?Wr(n.left+M,n.top+S,h,m,xr.BOTTOM_RIGHT):new pt(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=b>0||B>0?Wr(n.left,n.top+R,b,B,xr.BOTTOM_LEFT):new pt(n.left,n.top+n.height),this.topLeftPaddingBox=i>0||a>0?Wr(n.left+j,n.top+O,Math.max(0,i-j),Math.max(0,a-O),xr.TOP_LEFT):new pt(n.left+j,n.top+O),this.topRightPaddingBox=l>0||c>0?Wr(n.left+Math.min(w,n.width-I),n.top+O,w>n.width+I?0:Math.max(0,l-I),Math.max(0,c-O),xr.TOP_RIGHT):new pt(n.left+n.width-I,n.top+O),this.bottomRightPaddingBox=h>0||m>0?Wr(n.left+Math.min(M,n.width-j),n.top+Math.min(S,n.height-N),Math.max(0,h-I),Math.max(0,m-N),xr.BOTTOM_RIGHT):new pt(n.left+n.width-I,n.top+n.height-N),this.bottomLeftPaddingBox=b>0||B>0?Wr(n.left+j,n.top+Math.min(R,n.height-N),Math.max(0,b-j),Math.max(0,B-N),xr.BOTTOM_LEFT):new pt(n.left+j,n.top+n.height-N),this.topLeftContentBox=i>0||a>0?Wr(n.left+j+P,n.top+O+D,Math.max(0,i-(j+P)),Math.max(0,a-(O+D)),xr.TOP_LEFT):new pt(n.left+j+P,n.top+O+D),this.topRightContentBox=l>0||c>0?Wr(n.left+Math.min(w,n.width+j+P),n.top+O+D,w>n.width+j+P?0:l-j+P,c-(O+D),xr.TOP_RIGHT):new pt(n.left+n.width-(I+_),n.top+O+D),this.bottomRightContentBox=h>0||m>0?Wr(n.left+Math.min(M,n.width-(j+P)),n.top+Math.min(S,n.height+O+D),Math.max(0,h-(I+_)),m-(N+T),xr.BOTTOM_RIGHT):new pt(n.left+n.width-(I+_),n.top+n.height-(N+T)),this.bottomLeftContentBox=b>0||B>0?Wr(n.left+j+P,n.top+R,Math.max(0,b-(j+P)),B-(N+T),xr.BOTTOM_LEFT):new pt(n.left+j+P,n.top+n.height-(N+T))}return t}(),xr;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(xr||(xr={}));var Wr=function(t,e,r,n,s){var i=4*((Math.sqrt(2)-1)/3),a=r*i,A=n*i,l=t+r,c=e+n;switch(s){case xr.TOP_LEFT:return new Ag(new pt(t,c),new pt(t,c-A),new pt(l-a,e),new pt(l,e));case xr.TOP_RIGHT:return new Ag(new pt(t,e),new pt(t+a,e),new pt(l,c-A),new pt(l,c));case xr.BOTTOM_RIGHT:return new Ag(new pt(l,e),new pt(l,e+A),new pt(t+a,c),new pt(t,c));case xr.BOTTOM_LEFT:default:return new Ag(new pt(l,c),new pt(l-a,c),new pt(t,e+A),new pt(t,e))}},ev=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},QG=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},tv=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},jG=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),lg=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),LG=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),kG=function(t){return t.type===0},l3=function(t){return t.type===1},DG=function(t){return t.type===2},r_=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},RG=function(t,e,r,n,s){return t.map(function(i,a){switch(a){case 0:return i.add(e,r);case 1:return i.add(e+n,r);case 2:return i.add(e+n,r+s);case 3:return i.add(e,r+s)}return i})},c3=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),u3=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new PG(this.container),this.container.styles.opacity<1&&this.effects.push(new LG(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new jG(n,s,i))}if(this.container.styles.overflowX!==0){var a=ev(this.curves),A=tv(this.curves);r_(a,A)?this.effects.push(new lg(a,6)):(this.effects.push(new lg(a,2)),this.effects.push(new lg(A,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,s=this.effects.slice(0);n;){var i=n.effects.filter(function(l){return!l3(l)});if(r||n.container.styles.position!==0||!n.parent){if(s.unshift.apply(s,i),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var a=ev(n.curves),A=tv(n.curves);r_(a,A)||s.unshift(new lg(A,6))}}else s.unshift.apply(s,i);n=n.parent}return s.filter(function(l){return jn(l.target,e)})},t}(),Y2=function(t,e,r,n){t.container.elements.forEach(function(s){var i=jn(s.flags,4),a=jn(s.flags,2),A=new u3(s,t);jn(s.styles.display,2048)&&n.push(A);var l=jn(s.flags,8)?[]:n;if(i||a){var c=i||s.styles.isPositioned()?r:e,u=new c3(A);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var h=s.styles.zIndex.order;if(h<0){var m=0;c.negativeZIndex.some(function(b,B){return h>b.element.container.styles.zIndex.order?(m=B,!1):m>0}),c.negativeZIndex.splice(m,0,u)}else if(h>0){var p=0;c.positiveZIndex.some(function(b,B){return h>=b.element.container.styles.zIndex.order?(p=B+1,!1):p>0}),c.positiveZIndex.splice(p,0,u)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else s.styles.isFloating()?c.nonPositionedFloats.push(u):c.nonPositionedInlineLevel.push(u);Y2(A,u,i?u:r,l)}else s.styles.isInlineLevel()?e.inlineLevel.push(A):e.nonInlineLevel.push(A),Y2(A,e,r,l);jn(s.flags,8)&&d3(s,l)})},d3=function(t,e){for(var r=t instanceof z2?t.start:1,n=t instanceof z2?t.reversed:!1,s=0;s<e.length;s++){var i=e[s];i.container instanceof WU&&typeof i.container.value=="number"&&i.container.value!==0&&(r=i.container.value),i.listValue=wp(r,i.container.styles.listStyleType,!0),r+=n?-1:1}},OG=function(t){var e=new u3(t,null),r=new c3(e),n=[];return Y2(e,r,r,n),d3(e.container,n),r},n_=function(t,e){switch(e){case 0:return Qi(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Qi(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Qi(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Qi(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},MG=function(t,e){switch(e){case 0:return Qi(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Qi(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Qi(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Qi(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},HG=function(t,e){switch(e){case 0:return Qi(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Qi(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Qi(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Qi(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},VG=function(t,e){switch(e){case 0:return cg(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return cg(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return cg(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return cg(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},cg=function(t,e){var r=[];return Fi(t)?r.push(t.subdivide(.5,!1)):r.push(t),Fi(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Qi=function(t,e,r,n){var s=[];return Fi(t)?s.push(t.subdivide(.5,!1)):s.push(t),Fi(r)?s.push(r.subdivide(.5,!0)):s.push(r),Fi(n)?s.push(n.subdivide(.5,!0).reverse()):s.push(n),Fi(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},h3=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},rv=function(t){var e=t.styles,r=t.bounds,n=Or(e.paddingLeft,r.width),s=Or(e.paddingRight,r.width),i=Or(e.paddingTop,r.width),a=Or(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,i+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+s),-(e.borderTopWidth+e.borderBottomWidth+i+a))},KG=function(t,e){return t===0?e.bounds:t===2?rv(e):h3(e)},qG=function(t,e){return t===0?e.bounds:t===2?rv(e):h3(e)},Hw=function(t,e,r){var n=KG(Gu(t.styles.backgroundOrigin,e),t),s=qG(Gu(t.styles.backgroundClip,e),t),i=GG(Gu(t.styles.backgroundSize,e),r,n),a=i[0],A=i[1],l=Af(Gu(t.styles.backgroundPosition,e),n.width-a,n.height-A),c=zG(Gu(t.styles.backgroundRepeat,e),l,i,n,s),u=Math.round(n.left+l[0]),h=Math.round(n.top+l[1]);return[c,u,h,a,A]},Uu=function(t){return Tr(t)&&t.value===yd.AUTO},ug=function(t){return typeof t=="number"},GG=function(t,e,r){var n=e[0],s=e[1],i=e[2],a=t[0],A=t[1];if(!a)return[0,0];if(In(a)&&A&&In(A))return[Or(a,r.width),Or(A,r.height)];var l=ug(i);if(Tr(a)&&(a.value===yd.CONTAIN||a.value===yd.COVER)){if(ug(i)){var c=r.width/r.height;return c<i!=(a.value===yd.COVER)?[r.width,r.width/i]:[r.height*i,r.height]}return[r.width,r.height]}var u=ug(n),h=ug(s),m=u||h;if(Uu(a)&&(!A||Uu(A))){if(u&&h)return[n,s];if(!l&&!m)return[r.width,r.height];if(m&&l){var p=u?n:s*i,b=h?s:n/i;return[p,b]}var B=u?n:r.width,E=h?s:r.height;return[B,E]}if(l){var y=0,w=0;return In(a)?y=Or(a,r.width):In(A)&&(w=Or(A,r.height)),Uu(a)?y=w*i:(!A||Uu(A))&&(w=y/i),[y,w]}var S=null,M=null;if(In(a)?S=Or(a,r.width):A&&In(A)&&(M=Or(A,r.height)),S!==null&&(!A||Uu(A))&&(M=u&&h?S/n*s:r.height),M!==null&&Uu(a)&&(S=u&&h?M/s*n:r.width),S!==null&&M!==null)return[S,M];throw new Error("Unable to calculate background-size for element")},Gu=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},zG=function(t,e,r,n,s){var i=e[0],a=e[1],A=r[0],l=r[1];switch(t){case 2:return[new pt(Math.round(n.left),Math.round(n.top+a)),new pt(Math.round(n.left+n.width),Math.round(n.top+a)),new pt(Math.round(n.left+n.width),Math.round(l+n.top+a)),new pt(Math.round(n.left),Math.round(l+n.top+a))];case 3:return[new pt(Math.round(n.left+i),Math.round(n.top)),new pt(Math.round(n.left+i+A),Math.round(n.top)),new pt(Math.round(n.left+i+A),Math.round(n.height+n.top)),new pt(Math.round(n.left+i),Math.round(n.height+n.top))];case 1:return[new pt(Math.round(n.left+i),Math.round(n.top+a)),new pt(Math.round(n.left+i+A),Math.round(n.top+a)),new pt(Math.round(n.left+i+A),Math.round(n.top+a+l)),new pt(Math.round(n.left+i),Math.round(n.top+a+l))];default:return[new pt(Math.round(s.left),Math.round(s.top)),new pt(Math.round(s.left+s.width),Math.round(s.top)),new pt(Math.round(s.left+s.width),Math.round(s.height+s.top)),new pt(Math.round(s.left),Math.round(s.height+s.top))]}},$G="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",s_="Hidden Text",WG=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),s=this._document.createElement("img"),i=this._document.createElement("span"),a=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",a.appendChild(n),s.src=$G,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",i.style.fontFamily=e,i.style.fontSize=r,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(s_)),n.appendChild(i),n.appendChild(s);var A=s.offsetTop-i.offsetTop+2;n.removeChild(i),n.appendChild(this._document.createTextNode(s_)),n.style.lineHeight="normal",s.style.verticalAlign="super";var l=s.offsetTop-n.offsetTop+2;return a.removeChild(n),{baseline:A,middle:l}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),f3=function(){function t(e,r){this.context=e,this.options=r}return t}(),JG=1e4,XG=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s._activeEffects=[],s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),n.canvas||(s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px"),s.fontMetrics=new WG(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),s}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(s){return n.applyEffect(s)})},e.prototype.applyEffect=function(r){this.ctx.save(),DG(r)&&(this.ctx.globalAlpha=r.opacity),kG(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),l3(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return Fs(this,void 0,void 0,function(){var n;return ws(this,function(s){switch(s.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return Fs(this,void 0,void 0,function(){return ws(this,function(n){switch(n.label){case 0:if(jn(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,s){var i=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+s);else{var a=yB(r.text);a.reduce(function(A,l){return i.ctx.fillText(l,A,r.bounds.top+s),A+i.ctx.measureText(l).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(a){return a==="normal"||a==="small-caps"}).join(""),s=rz(r.fontFamily).join(", "),i=zp(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,i,s].join(" "),s,i]},e.prototype.renderTextNode=function(r,n){return Fs(this,void 0,void 0,function(){var s,i,a,A,l,c,u,h,m=this;return ws(this,function(p){return s=this.createFontStyle(n),i=s[0],a=s[1],A=s[2],this.ctx.font=i,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(a,A),c=l.baseline,u=l.middle,h=n.paintOrder,r.textBounds.forEach(function(b){h.forEach(function(B){switch(B){case 0:m.ctx.fillStyle=Vn(n.color),m.renderTextWithLetterSpacing(b,n.letterSpacing,c);var E=n.textShadow;E.length&&b.text.trim().length&&(E.slice(0).reverse().forEach(function(y){m.ctx.shadowColor=Vn(y.color),m.ctx.shadowOffsetX=y.offsetX.number*m.options.scale,m.ctx.shadowOffsetY=y.offsetY.number*m.options.scale,m.ctx.shadowBlur=y.blur.number,m.renderTextWithLetterSpacing(b,n.letterSpacing,c)}),m.ctx.shadowColor="",m.ctx.shadowOffsetX=0,m.ctx.shadowOffsetY=0,m.ctx.shadowBlur=0),n.textDecorationLine.length&&(m.ctx.fillStyle=Vn(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(y){switch(y){case 1:m.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top+c),b.bounds.width,1);break;case 2:m.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top),b.bounds.width,1);break;case 3:m.ctx.fillRect(b.bounds.left,Math.ceil(b.bounds.top+u),b.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&b.text.trim().length&&(m.ctx.strokeStyle=Vn(n.webkitTextStrokeColor),m.ctx.lineWidth=n.webkitTextStrokeWidth,m.ctx.lineJoin=window.chrome?"miter":"round",m.ctx.strokeText(b.text,b.bounds.left,b.bounds.top+c)),m.ctx.strokeStyle="",m.ctx.lineWidth=0,m.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,s){if(s&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var i=rv(r),a=tv(n);this.path(a),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,r.intrinsicWidth,r.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return Fs(this,void 0,void 0,function(){var n,s,i,a,A,l,w,w,c,u,h,m,M,p,b,R,B,E,y,w,S,M,R;return ws(this,function(O){switch(O.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,s=r.curves,i=n.styles,a=0,A=n.textNodes,O.label=1;case 1:return a<A.length?(l=A[a],[4,this.renderTextNode(l,i)]):[3,4];case 2:O.sent(),O.label=3;case 3:return a++,[3,1];case 4:if(!(n instanceof GU))return[3,8];O.label=5;case 5:return O.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return w=O.sent(),this.renderReplacedElement(n,s,w),[3,8];case 7:return O.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof zU&&this.renderReplacedElement(n,s,n.canvas),!(n instanceof $U))return[3,12];O.label=9;case 9:return O.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return w=O.sent(),this.renderReplacedElement(n,s,w),[3,12];case 11:return O.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof YU&&n.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,c.render(n.tree)]):[3,14];case 13:u=O.sent(),n.width&&n.height&&this.ctx.drawImage(u,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),O.label=14;case 14:if(n instanceof wB&&(h=Math.min(n.bounds.width,n.bounds.height),n.type===J0?n.checked&&(this.ctx.save(),this.path([new pt(n.bounds.left+h*.39363,n.bounds.top+h*.79),new pt(n.bounds.left+h*.16,n.bounds.top+h*.5549),new pt(n.bounds.left+h*.27347,n.bounds.top+h*.44071),new pt(n.bounds.left+h*.39694,n.bounds.top+h*.5649),new pt(n.bounds.left+h*.72983,n.bounds.top+h*.23),new pt(n.bounds.left+h*.84,n.bounds.top+h*.34085),new pt(n.bounds.left+h*.39363,n.bounds.top+h*.79)]),this.ctx.fillStyle=Vn(qE),this.ctx.fill(),this.ctx.restore()):n.type===X0&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+h/2,n.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=Vn(qE),this.ctx.fill(),this.ctx.restore())),YG(n)&&n.value.length){switch(m=this.createFontStyle(i),M=m[0],p=m[1],b=this.fontMetrics.getMetrics(M,p).baseline,this.ctx.font=M,this.ctx.fillStyle=Vn(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=ez(n.styles.textAlign),R=rv(n),B=0,n.styles.textAlign){case 1:B+=R.width/2;break;case 2:B+=R.width;break}E=R.add(B,0,0,-R.height/2+1),this.ctx.save(),this.path([new pt(R.left,R.top),new pt(R.left+R.width,R.top),new pt(R.left+R.width,R.top+R.height),new pt(R.left,R.top+R.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Ff(n.value,E),i.letterSpacing,b),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!jn(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(y=n.styles.listStyleImage,y.type!==0)return[3,18];w=void 0,S=y.url,O.label=15;case 15:return O.trys.push([15,17,,18]),[4,this.context.cache.match(S)];case 16:return w=O.sent(),this.ctx.drawImage(w,n.bounds.left-(w.width+10),n.bounds.top),[3,18];case 17:return O.sent(),this.context.logger.error("Error loading list-style-image "+S),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(M=this.createFontStyle(i)[0],this.ctx.font=M,this.ctx.fillStyle=Vn(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",R=new Vo(n.bounds.left,n.bounds.top+Or(n.styles.paddingTop,n.bounds.width),n.bounds.width,IE(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Ff(r.listValue,R),i.letterSpacing,IE(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),O.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return Fs(this,void 0,void 0,function(){var n,s,y,i,a,y,A,l,y,c,u,y,h,m,y,p,b,y,B,E,y;return ws(this,function(w){switch(w.label){case 0:if(jn(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:w.sent(),n=0,s=r.negativeZIndex,w.label=2;case 2:return n<s.length?(y=s[n],[4,this.renderStack(y)]):[3,5];case 3:w.sent(),w.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:w.sent(),i=0,a=r.nonInlineLevel,w.label=7;case 7:return i<a.length?(y=a[i],[4,this.renderNode(y)]):[3,10];case 8:w.sent(),w.label=9;case 9:return i++,[3,7];case 10:A=0,l=r.nonPositionedFloats,w.label=11;case 11:return A<l.length?(y=l[A],[4,this.renderStack(y)]):[3,14];case 12:w.sent(),w.label=13;case 13:return A++,[3,11];case 14:c=0,u=r.nonPositionedInlineLevel,w.label=15;case 15:return c<u.length?(y=u[c],[4,this.renderStack(y)]):[3,18];case 16:w.sent(),w.label=17;case 17:return c++,[3,15];case 18:h=0,m=r.inlineLevel,w.label=19;case 19:return h<m.length?(y=m[h],[4,this.renderNode(y)]):[3,22];case 20:w.sent(),w.label=21;case 21:return h++,[3,19];case 22:p=0,b=r.zeroOrAutoZIndexOrTransformedOrOpacity,w.label=23;case 23:return p<b.length?(y=b[p],[4,this.renderStack(y)]):[3,26];case 24:w.sent(),w.label=25;case 25:return p++,[3,23];case 26:B=0,E=r.positiveZIndex,w.label=27;case 27:return B<E.length?(y=E[B],[4,this.renderStack(y)]):[3,30];case 28:w.sent(),w.label=29;case 29:return B++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(s,i){var a=Fi(s)?s.start:s;i===0?n.ctx.moveTo(a.x,a.y):n.ctx.lineTo(a.x,a.y),Fi(s)&&n.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(r,n,s,i){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(s,i),this.ctx.fill(),this.ctx.translate(-s,-i)},e.prototype.resizeImage=function(r,n,s){var i;if(r.width===n&&r.height===s)return r;var a=(i=this.canvas.ownerDocument)!==null&&i!==void 0?i:document,A=a.createElement("canvas");A.width=Math.max(1,n),A.height=Math.max(1,s);var l=A.getContext("2d");return l.drawImage(r,0,0,r.width,r.height,0,0,n,s),A},e.prototype.renderBackgroundImage=function(r){return Fs(this,void 0,void 0,function(){var n,s,i,a,A,l;return ws(this,function(c){switch(c.label){case 0:n=r.styles.backgroundImage.length-1,s=function(u){var h,m,p,D,ue,he,P,ee,N,b,D,ue,he,P,ee,B,E,y,w,S,M,R,O,I,N,j,D,_,T,P,ee,Ae,ue,he,te,se,ne,ye,F,L,W,q;return ws(this,function(H){switch(H.label){case 0:if(u.type!==0)return[3,5];h=void 0,m=u.url,H.label=1;case 1:return H.trys.push([1,3,,4]),[4,i.context.cache.match(m)];case 2:return h=H.sent(),[3,4];case 3:return H.sent(),i.context.logger.error("Error loading background-image "+m),[3,4];case 4:return h&&(p=Hw(r,n,[h.width,h.height,h.width/h.height]),D=p[0],ue=p[1],he=p[2],P=p[3],ee=p[4],N=i.ctx.createPattern(i.resizeImage(h,P,ee),"repeat"),i.renderRepeat(D,N,ue,he)),[3,6];case 5:k9(u)?(b=Hw(r,n,[null,null,null]),D=b[0],ue=b[1],he=b[2],P=b[3],ee=b[4],B=U9(u.angle,P,ee),E=B[0],y=B[1],w=B[2],S=B[3],M=B[4],R=document.createElement("canvas"),R.width=P,R.height=ee,O=R.getContext("2d"),I=O.createLinearGradient(y,S,w,M),EE(u.stops,E).forEach(function(re){return I.addColorStop(re.stop,Vn(re.color))}),O.fillStyle=I,O.fillRect(0,0,P,ee),P>0&&ee>0&&(N=i.ctx.createPattern(R,"repeat"),i.renderRepeat(D,N,ue,he))):D9(u)&&(j=Hw(r,n,[null,null,null]),D=j[0],_=j[1],T=j[2],P=j[3],ee=j[4],Ae=u.position.length===0?[mB]:u.position,ue=Or(Ae[0],P),he=Or(Ae[Ae.length-1],ee),te=P9(u,ue,he,P,ee),se=te[0],ne=te[1],se>0&&ne>0&&(ye=i.ctx.createRadialGradient(_+ue,T+he,0,_+ue,T+he,se),EE(u.stops,se*2).forEach(function(re){return ye.addColorStop(re.stop,Vn(re.color))}),i.path(D),i.ctx.fillStyle=ye,se!==ne?(F=r.bounds.left+.5*r.bounds.width,L=r.bounds.top+.5*r.bounds.height,W=ne/se,q=1/W,i.ctx.save(),i.ctx.translate(F,L),i.ctx.transform(1,0,0,W,0,0),i.ctx.translate(-F,-L),i.ctx.fillRect(_,q*(T-L)+L,P,ee*q),i.ctx.restore()):i.ctx.fill())),H.label=6;case 6:return n--,[2]}})},i=this,a=0,A=r.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return a<A.length?(l=A[a],[5,s(l)]):[3,4];case 2:c.sent(),c.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,s){return Fs(this,void 0,void 0,function(){return ws(this,function(i){return this.path(n_(s,n)),this.ctx.fillStyle=Vn(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,s,i){return Fs(this,void 0,void 0,function(){var a,A;return ws(this,function(l){switch(l.label){case 0:return n<3?[4,this.renderSolidBorder(r,s,i)]:[3,2];case 1:return l.sent(),[2];case 2:return a=MG(i,s),this.path(a),this.ctx.fillStyle=Vn(r),this.ctx.fill(),A=HG(i,s),this.path(A),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return Fs(this,void 0,void 0,function(){var n,s,i,a,A,l,c,u,h=this;return ws(this,function(m){switch(m.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,s=!cl(n.backgroundColor)||n.backgroundImage.length,i=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],a=ZG(Gu(n.backgroundClip,0),r.curves),s||n.boxShadow.length?(this.ctx.save(),this.path(a),this.ctx.clip(),cl(n.backgroundColor)||(this.ctx.fillStyle=Vn(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:m.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(p){h.ctx.save();var b=ev(r.curves),B=p.inset?0:JG,E=RG(b,-B+(p.inset?1:-1)*p.spread.number,(p.inset?1:-1)*p.spread.number,p.spread.number*(p.inset?-2:2),p.spread.number*(p.inset?-2:2));p.inset?(h.path(b),h.ctx.clip(),h.mask(E)):(h.mask(b),h.ctx.clip(),h.path(E)),h.ctx.shadowOffsetX=p.offsetX.number+B,h.ctx.shadowOffsetY=p.offsetY.number,h.ctx.shadowColor=Vn(p.color),h.ctx.shadowBlur=p.blur.number,h.ctx.fillStyle=p.inset?Vn(p.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),m.label=2;case 2:A=0,l=0,c=i,m.label=3;case 3:return l<c.length?(u=c[l],u.style!==0&&!cl(u.color)&&u.width>0?u.style!==2?[3,5]:[4,this.renderDashedDottedBorder(u.color,u.width,A,r.curves,2)]:[3,11]):[3,13];case 4:return m.sent(),[3,11];case 5:return u.style!==3?[3,7]:[4,this.renderDashedDottedBorder(u.color,u.width,A,r.curves,3)];case 6:return m.sent(),[3,11];case 7:return u.style!==4?[3,9]:[4,this.renderDoubleBorder(u.color,u.width,A,r.curves)];case 8:return m.sent(),[3,11];case 9:return[4,this.renderSolidBorder(u.color,A,r.curves)];case 10:m.sent(),m.label=11;case 11:A++,m.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,s,i,a){return Fs(this,void 0,void 0,function(){var A,l,c,u,h,m,p,b,B,E,y,w,S,M,R,O,R,O;return ws(this,function(I){return this.ctx.save(),A=VG(i,s),l=n_(i,s),a===2&&(this.path(l),this.ctx.clip()),Fi(l[0])?(c=l[0].start.x,u=l[0].start.y):(c=l[0].x,u=l[0].y),Fi(l[1])?(h=l[1].end.x,m=l[1].end.y):(h=l[1].x,m=l[1].y),s===0||s===2?p=Math.abs(c-h):p=Math.abs(u-m),this.ctx.beginPath(),a===3?this.formatPath(A):this.formatPath(l.slice(0,2)),b=n<3?n*3:n*2,B=n<3?n*2:n,a===3&&(b=n,B=n),E=!0,p<=b*2?E=!1:p<=b*2+B?(y=p/(2*b+B),b*=y,B*=y):(w=Math.floor((p+B)/(b+B)),S=(p-w*b)/(w-1),M=(p-(w+1)*b)/w,B=M<=0||Math.abs(B-S)<Math.abs(B-M)?S:M),E&&(a===3?this.ctx.setLineDash([0,b+B]):this.ctx.setLineDash([b,B])),a===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Vn(r),this.ctx.stroke(),this.ctx.setLineDash([]),a===2&&(Fi(l[0])&&(R=l[3],O=l[0],this.ctx.beginPath(),this.formatPath([new pt(R.end.x,R.end.y),new pt(O.start.x,O.start.y)]),this.ctx.stroke()),Fi(l[1])&&(R=l[1],O=l[2],this.ctx.beginPath(),this.formatPath([new pt(R.end.x,R.end.y),new pt(O.start.x,O.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return Fs(this,void 0,void 0,function(){var n;return ws(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Vn(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=OG(r),[4,this.renderStack(n)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(f3),YG=function(t){return t instanceof XU||t instanceof JU?!0:t instanceof wB&&t.type!==X0&&t.type!==J0},ZG=function(t,e){switch(t){case 0:return ev(e);case 2:return QG(e);case 1:default:return tv(e)}},ez=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},tz=["-apple-system","system-ui"],rz=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return tz.indexOf(e)===-1}):t},nz=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=n,s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),s}return e.prototype.render=function(r){return Fs(this,void 0,void 0,function(){var n,s;return ws(this,function(i){switch(i.label){case 0:return n=G2(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,sz(n)];case 1:return s=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Vn(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(f3),sz=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},iz=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Vm([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Vm([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Vm([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Vm([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),az=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new iz({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new EG(this,e)}return t.instanceCount=1,t}(),bB=function(t,e){return e===void 0&&(e={}),oz(t,e)};typeof window<"u"&&A3.setContext(window);var oz=function(t,e){return Fs(void 0,void 0,void 0,function(){var r,n,s,i,a,A,l,c,u,h,m,p,b,B,E,y,w,S,M,R,I,O,I,N,j,D,_,T,P,ee,Ae,ue,he,te,se,ne,ye,F,L,W;return ws(this,function(q){switch(q.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return s={allowTaint:(N=e.allowTaint)!==null&&N!==void 0?N:!1,imageTimeout:(j=e.imageTimeout)!==null&&j!==void 0?j:15e3,proxy:e.proxy,useCORS:(D=e.useCORS)!==null&&D!==void 0?D:!1},i=T2({logging:(_=e.logging)!==null&&_!==void 0?_:!0,cache:e.cache},s),a={windowWidth:(T=e.windowWidth)!==null&&T!==void 0?T:n.innerWidth,windowHeight:(P=e.windowHeight)!==null&&P!==void 0?P:n.innerHeight,scrollX:(ee=e.scrollX)!==null&&ee!==void 0?ee:n.pageXOffset,scrollY:(Ae=e.scrollY)!==null&&Ae!==void 0?Ae:n.pageYOffset},A=new Vo(a.scrollX,a.scrollY,a.windowWidth,a.windowHeight),l=new az(i,A),c=(ue=e.foreignObjectRendering)!==null&&ue!==void 0?ue:!1,u={allowTaint:(he=e.allowTaint)!==null&&he!==void 0?he:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},l.logger.debug("Starting document clone with size "+A.width+"x"+A.height+" scrolled to "+-A.left+","+-A.top),h=new e_(l,t,u),m=h.clonedReferenceElement,m?[4,h.toIFrame(r,A)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return p=q.sent(),b=xB(m)||lG(m)?RV(m.ownerDocument):iy(l,m),B=b.width,E=b.height,y=b.left,w=b.top,S=Az(l,m,e.backgroundColor),M={canvas:e.canvas,backgroundColor:S,scale:(se=(te=e.scale)!==null&&te!==void 0?te:n.devicePixelRatio)!==null&&se!==void 0?se:1,x:((ne=e.x)!==null&&ne!==void 0?ne:0)+y,y:((ye=e.y)!==null&&ye!==void 0?ye:0)+w,width:(F=e.width)!==null&&F!==void 0?F:Math.ceil(B),height:(L=e.height)!==null&&L!==void 0?L:Math.ceil(E)},c?(l.logger.debug("Document cloned, using foreign object rendering"),I=new nz(l,M),[4,I.render(m)]):[3,3];case 2:return R=q.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+y+","+w+" with size "+B+"x"+E+" using computed rendering"),l.logger.debug("Starting DOM parsing"),O=e3(l,m),S===O.styles.backgroundColor&&(O.styles.backgroundColor=Po.TRANSPARENT),l.logger.debug("Starting renderer for element at "+M.x+","+M.y+" with size "+M.width+"x"+M.height),I=new XG(l,M),[4,I.render(O)];case 4:R=q.sent(),q.label=5;case 5:return(!((W=e.removeContainer)!==null&&W!==void 0)||W)&&(e_.destroy(p)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,R]}})})},Az=function(t,e,r){var n=e.ownerDocument,s=n.documentElement?If(t,getComputedStyle(n.documentElement).backgroundColor):Po.TRANSPARENT,i=n.body?If(t,getComputedStyle(n.body).backgroundColor):Po.TRANSPARENT,a=typeof r=="string"?If(t,r):r===null?Po.TRANSPARENT:4294967295;return e===n.documentElement?cl(s)?cl(i)?a:i:s:a};const BB=Object.freeze(Object.defineProperty({__proto__:null,default:bB},Symbol.toStringTag,{value:"Module"})),lz="modulepreload",cz=function(t){return"/"+t},i_={},Qo=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),A=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(l=>{if(l=cz(l),l in i_)return;i_[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":lz,c||(h.as="script"),h.crossOrigin="",h.href=l,A&&h.setAttribute("nonce",A),document.head.appendChild(h),c)return new Promise((m,p)=>{h.addEventListener("load",m),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const A=new Event("vite:preloadError",{cancelable:!0});if(A.payload=a,window.dispatchEvent(A),!A.defaultPrevented)throw a}return s.then(a=>{for(const A of a||[])A.status==="rejected"&&i(A.reason);return e().catch(i)})};function Ir(t){"@babel/helpers - typeof";return Ir=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ir(t)}var Bs=Uint8Array,ci=Uint16Array,CB=Int32Array,py=new Bs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),my=new Bs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Z2=new Bs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),p3=function(t,e){for(var r=new ci(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var s=new CB(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)s[i]=i-r[n]<<5|n;return{b:r,r:s}},m3=p3(py,2),g3=m3.b,ex=m3.r;g3[28]=258,ex[258]=28;var v3=p3(my,0),uz=v3.b,a_=v3.r,tx=new ci(32768);for(var Gr=0;Gr<32768;++Gr){var _A=(Gr&43690)>>1|(Gr&21845)<<1;_A=(_A&52428)>>2|(_A&13107)<<2,_A=(_A&61680)>>4|(_A&3855)<<4,tx[Gr]=((_A&65280)>>8|(_A&255)<<8)>>1}var Ha=function(t,e,r){for(var n=t.length,s=0,i=new ci(e);s<n;++s)t[s]&&++i[t[s]-1];var a=new ci(e);for(s=1;s<e;++s)a[s]=a[s-1]+i[s-1]<<1;var A;if(r){A=new ci(1<<e);var l=15-e;for(s=0;s<n;++s)if(t[s])for(var c=s<<4|t[s],u=e-t[s],h=a[t[s]-1]++<<u,m=h|(1<<u)-1;h<=m;++h)A[tx[h]>>l]=c}else for(A=new ci(n),s=0;s<n;++s)t[s]&&(A[s]=tx[a[t[s]-1]++]>>15-t[s]);return A},xl=new Bs(288);for(var Gr=0;Gr<144;++Gr)xl[Gr]=8;for(var Gr=144;Gr<256;++Gr)xl[Gr]=9;for(var Gr=256;Gr<280;++Gr)xl[Gr]=7;for(var Gr=280;Gr<288;++Gr)xl[Gr]=8;var xp=new Bs(32);for(var Gr=0;Gr<32;++Gr)xp[Gr]=5;var dz=Ha(xl,9,0),hz=Ha(xl,9,1),fz=Ha(xp,5,0),pz=Ha(xp,5,1),Vw=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},Ji=function(t,e,r){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&r},Kw=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},NB=function(t){return(t+7)/8|0},y3=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new Bs(t.subarray(e,r))},mz=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ta=function(t,e,r){var n=new Error(e||mz[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,ta),!r)throw n;return n},gz=function(t,e,r,n){var s=t.length,i=0;if(!s||e.f&&!e.l)return r||new Bs(0);var a=!r,A=a||e.i!=2,l=e.i;a&&(r=new Bs(s*3));var c=function(Ne){var Te=r.length;if(Ne>Te){var Fe=new Bs(Math.max(Te*2,Ne));Fe.set(r),r=Fe}},u=e.f||0,h=e.p||0,m=e.b||0,p=e.l,b=e.d,B=e.m,E=e.n,y=s*8;do{if(!p){u=Ji(t,h,1);var w=Ji(t,h+1,3);if(h+=3,w)if(w==1)p=hz,b=pz,B=9,E=5;else if(w==2){var O=Ji(t,h,31)+257,I=Ji(t,h+10,15)+4,N=O+Ji(t,h+5,31)+1;h+=14;for(var j=new Bs(N),D=new Bs(19),_=0;_<I;++_)D[Z2[_]]=Ji(t,h+_*3,7);h+=I*3;for(var T=Vw(D),P=(1<<T)-1,ee=Ha(D,T,1),_=0;_<N;){var Ae=ee[Ji(t,h,P)];h+=Ae&15;var S=Ae>>4;if(S<16)j[_++]=S;else{var ue=0,he=0;for(S==16?(he=3+Ji(t,h,3),h+=2,ue=j[_-1]):S==17?(he=3+Ji(t,h,7),h+=3):S==18&&(he=11+Ji(t,h,127),h+=7);he--;)j[_++]=ue}}var te=j.subarray(0,O),se=j.subarray(O);B=Vw(te),E=Vw(se),p=Ha(te,B,1),b=Ha(se,E,1)}else ta(1);else{var S=NB(h)+4,M=t[S-4]|t[S-3]<<8,R=S+M;if(R>s){l&&ta(0);break}A&&c(m+M),r.set(t.subarray(S,R),m),e.b=m+=M,e.p=h=R*8,e.f=u;continue}if(h>y){l&&ta(0);break}}A&&c(m+131072);for(var ne=(1<<B)-1,ye=(1<<E)-1,F=h;;F=h){var ue=p[Kw(t,h)&ne],L=ue>>4;if(h+=ue&15,h>y){l&&ta(0);break}if(ue||ta(2),L<256)r[m++]=L;else if(L==256){F=h,p=null;break}else{var W=L-254;if(L>264){var _=L-257,q=py[_];W=Ji(t,h,(1<<q)-1)+g3[_],h+=q}var H=b[Kw(t,h)&ye],re=H>>4;H||ta(3),h+=H&15;var se=uz[re];if(re>3){var q=my[re];se+=Kw(t,h)&(1<<q)-1,h+=q}if(h>y){l&&ta(0);break}A&&c(m+131072);var $=m+W;if(m<se){var de=i-se,pe=Math.min(se,$);for(de+m<0&&ta(3);m<pe;++m)r[m]=n[de+m]}for(;m<$;++m)r[m]=r[m-se]}}e.l=p,e.p=F,e.b=m,e.f=u,p&&(u=1,e.m=B,e.d=b,e.n=E)}while(!u);return m!=r.length&&a?y3(r,0,m):r.subarray(0,m)},po=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},Hh=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},qw=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var s=r.length,i=r.slice();if(!s)return{t:x3,l:0};if(s==1){var a=new Bs(r[0].s+1);return a[r[0].s]=1,{t:a,l:1}}r.sort(function(R,O){return R.f-O.f}),r.push({s:-1,f:25001});var A=r[0],l=r[1],c=0,u=1,h=2;for(r[0]={s:-1,f:A.f+l.f,l:A,r:l};u!=s-1;)A=r[r[c].f<r[h].f?c++:h++],l=r[c!=u&&r[c].f<r[h].f?c++:h++],r[u++]={s:-1,f:A.f+l.f,l:A,r:l};for(var m=i[0].s,n=1;n<s;++n)i[n].s>m&&(m=i[n].s);var p=new ci(m+1),b=rx(r[u-1],p,0);if(b>e){var n=0,B=0,E=b-e,y=1<<E;for(i.sort(function(O,I){return p[I.s]-p[O.s]||O.f-I.f});n<s;++n){var w=i[n].s;if(p[w]>e)B+=y-(1<<b-p[w]),p[w]=e;else break}for(B>>=E;B>0;){var S=i[n].s;p[S]<e?B-=1<<e-p[S]++-1:++n}for(;n>=0&&B;--n){var M=i[n].s;p[M]==e&&(--p[M],++B)}b=e}return{t:new Bs(p),l:b}},rx=function(t,e,r){return t.s==-1?Math.max(rx(t.l,e,r+1),rx(t.r,e,r+1)):e[t.s]=r},o_=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new ci(++e),n=0,s=t[0],i=1,a=function(l){r[n++]=l},A=1;A<=e;++A)if(t[A]==s&&A!=e)++i;else{if(!s&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(s),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(s);i=1,s=t[A]}return{c:r.subarray(0,n),n:e}},Vh=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},w3=function(t,e,r){var n=r.length,s=NB(e+2);t[s]=n&255,t[s+1]=n>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var i=0;i<n;++i)t[s+i+4]=r[i];return(s+4+n)*8},A_=function(t,e,r,n,s,i,a,A,l,c,u){po(e,u++,r),++s[256];for(var h=qw(s,15),m=h.t,p=h.l,b=qw(i,15),B=b.t,E=b.l,y=o_(m),w=y.c,S=y.n,M=o_(B),R=M.c,O=M.n,I=new ci(19),N=0;N<w.length;++N)++I[w[N]&31];for(var N=0;N<R.length;++N)++I[R[N]&31];for(var j=qw(I,7),D=j.t,_=j.l,T=19;T>4&&!D[Z2[T-1]];--T);var P=c+5<<3,ee=Vh(s,xl)+Vh(i,xp)+a,Ae=Vh(s,m)+Vh(i,B)+a+14+3*T+Vh(I,D)+2*I[16]+3*I[17]+7*I[18];if(l>=0&&P<=ee&&P<=Ae)return w3(e,u,t.subarray(l,l+c));var ue,he,te,se;if(po(e,u,1+(Ae<ee)),u+=2,Ae<ee){ue=Ha(m,p,0),he=m,te=Ha(B,E,0),se=B;var ne=Ha(D,_,0);po(e,u,S-257),po(e,u+5,O-1),po(e,u+10,T-4),u+=14;for(var N=0;N<T;++N)po(e,u+3*N,D[Z2[N]]);u+=3*T;for(var ye=[w,R],F=0;F<2;++F)for(var L=ye[F],N=0;N<L.length;++N){var W=L[N]&31;po(e,u,ne[W]),u+=D[W],W>15&&(po(e,u,L[N]>>5&127),u+=L[N]>>12)}}else ue=dz,he=xl,te=fz,se=xp;for(var N=0;N<A;++N){var q=n[N];if(q>255){var W=q>>18&31;Hh(e,u,ue[W+257]),u+=he[W+257],W>7&&(po(e,u,q>>23&31),u+=py[W]);var H=q&31;Hh(e,u,te[H]),u+=se[H],H>3&&(Hh(e,u,q>>5&8191),u+=my[H])}else Hh(e,u,ue[q]),u+=he[q]}return Hh(e,u,ue[256]),u+he[256]},vz=new CB([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),x3=new Bs(0),yz=function(t,e,r,n,s,i){var a=i.z||t.length,A=new Bs(n+a+5*(1+Math.ceil(a/7e3))+s),l=A.subarray(n,A.length-s),c=i.l,u=(i.r||0)&7;if(e){u&&(l[0]=i.r>>3);for(var h=vz[e-1],m=h>>13,p=h&8191,b=(1<<r)-1,B=i.p||new ci(32768),E=i.h||new ci(b+1),y=Math.ceil(r/3),w=2*y,S=function(oe){return(t[oe]^t[oe+1]<<y^t[oe+2]<<w)&b},M=new CB(25e3),R=new ci(288),O=new ci(32),I=0,N=0,j=i.i||0,D=0,_=i.w||0,T=0;j+2<a;++j){var P=S(j),ee=j&32767,Ae=E[P];if(B[ee]=Ae,E[P]=ee,_<=j){var ue=a-j;if((I>7e3||D>24576)&&(ue>423||!c)){u=A_(t,l,0,M,R,O,N,D,T,j-T,u),D=I=N=0,T=j;for(var he=0;he<286;++he)R[he]=0;for(var he=0;he<30;++he)O[he]=0}var te=2,se=0,ne=p,ye=ee-Ae&32767;if(ue>2&&P==S(j-ye))for(var F=Math.min(m,ue)-1,L=Math.min(32767,j),W=Math.min(258,ue);ye<=L&&--ne&&ee!=Ae;){if(t[j+te]==t[j+te-ye]){for(var q=0;q<W&&t[j+q]==t[j+q-ye];++q);if(q>te){if(te=q,se=ye,q>F)break;for(var H=Math.min(ye,q-2),re=0,he=0;he<H;++he){var $=j-ye+he&32767,de=B[$],pe=$-de&32767;pe>re&&(re=pe,Ae=$)}}}ee=Ae,Ae=B[ee],ye+=ee-Ae&32767}if(se){M[D++]=268435456|ex[te]<<18|a_[se];var Ne=ex[te]&31,Te=a_[se]&31;N+=py[Ne]+my[Te],++R[257+Ne],++O[Te],_=j+te,++I}else M[D++]=t[j],++R[t[j]]}}for(j=Math.max(j,_);j<a;++j)M[D++]=t[j],++R[t[j]];u=A_(t,l,c,M,R,O,N,D,T,j-T,u),c||(i.r=u&7|l[u/8|0]<<3,u-=7,i.h=E,i.p=B,i.i=j,i.w=_)}else{for(var j=i.w||0;j<a+c;j+=65535){var Fe=j+65535;Fe>=a&&(l[u/8|0]=c,Fe=a),u=w3(l,u+1,t.subarray(j,Fe))}i.i=a}return y3(A,0,n+NB(u)+s)},b3=function(){var t=1,e=0;return{p:function(r){for(var n=t,s=e,i=r.length|0,a=0;a!=i;){for(var A=Math.min(a+2655,i);a<A;++a)s+=n+=r[a];n=(n&65535)+15*(n>>16),s=(s&65535)+15*(s>>16)}t=n,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},wz=function(t,e,r,n,s){if(!s&&(s={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),a=new Bs(i.length+t.length);a.set(i),a.set(t,i.length),t=a,s.w=i.length}return yz(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,s)},B3=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},xz=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=b3();s.p(e.dictionary),B3(t,2,s.d())}},bz=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&ta(6,"invalid zlib data"),(t[1]>>5&1)==1&&ta(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function nx(t,e){e||(e={});var r=b3();r.p(t);var n=wz(t,e,e.dictionary?6:2,4);return xz(n,e),B3(n,n.length-4,r.d()),n}function Bz(t,e){return gz(t.subarray(bz(t),-4),{i:2},e,e)}var Cz=typeof TextDecoder<"u"&&new TextDecoder,Nz=0;try{Cz.decode(x3,{stream:!0}),Nz=1}catch{}var Mt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Gw(){Mt.console&&typeof Mt.console.log=="function"&&Mt.console.log.apply(Mt.console,arguments)}var Lr={log:Gw,warn:function(t){Mt.console&&(typeof Mt.console.warn=="function"?Mt.console.warn.apply(Mt.console,arguments):Gw.call(null,arguments))},error:function(t){Mt.console&&(typeof Mt.console.error=="function"?Mt.console.error.apply(Mt.console,arguments):Gw(t))}};function zw(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){ac(n.response,e,r)},n.onerror=function(){Lr.error("could not download file")},n.send()}function l_(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function dg(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Uf,sx,ac=Mt.saveAs||((typeof window>"u"?"undefined":Ir(window))!=="object"||window!==Mt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=Mt.URL||Mt.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?l_(s.href)?zw(t,e,r):dg(s,s.target="_blank"):dg(s)):(s.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){dg(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(l_(t))zw(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){dg(n)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:Ir(i)!=="object"&&(Lr.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return zw(t,e,r);var s=t.type==="application/octet-stream",i=/constructor/i.test(Mt.HTMLElement)||Mt.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||s&&i)&&(typeof FileReader>"u"?"undefined":Ir(FileReader))==="object"){var A=new FileReader;A.onloadend=function(){var u=A.result;u=a?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=u:location=u,n=null},A.readAsDataURL(t)}else{var l=Mt.URL||Mt.webkitURL,c=l.createObjectURL(t);n?n.location=c:location.href=c,n=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function C3(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(A){return[parseInt(A[1]),parseInt(A[2]),parseInt(A[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(A){return[parseInt(A[1],16),parseInt(A[2],16),parseInt(A[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(A){return[parseInt(A[1]+A[1],16),parseInt(A[2]+A[2],16),parseInt(A[3]+A[3],16)]}}],n=0;n<r.length;n++){var s=r[n].re,i=r[n].process,a=s.exec(t);a&&(e=i(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var A=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return A.length==1&&(A="0"+A),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+A+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function $w(t,e){var r=t[0],n=t[1],s=t[2],i=t[3];r=ms(r,n,s,i,e[0],7,-680876936),i=ms(i,r,n,s,e[1],12,-389564586),s=ms(s,i,r,n,e[2],17,606105819),n=ms(n,s,i,r,e[3],22,-1044525330),r=ms(r,n,s,i,e[4],7,-176418897),i=ms(i,r,n,s,e[5],12,1200080426),s=ms(s,i,r,n,e[6],17,-1473231341),n=ms(n,s,i,r,e[7],22,-45705983),r=ms(r,n,s,i,e[8],7,1770035416),i=ms(i,r,n,s,e[9],12,-1958414417),s=ms(s,i,r,n,e[10],17,-42063),n=ms(n,s,i,r,e[11],22,-1990404162),r=ms(r,n,s,i,e[12],7,1804603682),i=ms(i,r,n,s,e[13],12,-40341101),s=ms(s,i,r,n,e[14],17,-1502002290),r=gs(r,n=ms(n,s,i,r,e[15],22,1236535329),s,i,e[1],5,-165796510),i=gs(i,r,n,s,e[6],9,-1069501632),s=gs(s,i,r,n,e[11],14,643717713),n=gs(n,s,i,r,e[0],20,-373897302),r=gs(r,n,s,i,e[5],5,-701558691),i=gs(i,r,n,s,e[10],9,38016083),s=gs(s,i,r,n,e[15],14,-660478335),n=gs(n,s,i,r,e[4],20,-405537848),r=gs(r,n,s,i,e[9],5,568446438),i=gs(i,r,n,s,e[14],9,-1019803690),s=gs(s,i,r,n,e[3],14,-187363961),n=gs(n,s,i,r,e[8],20,1163531501),r=gs(r,n,s,i,e[13],5,-1444681467),i=gs(i,r,n,s,e[2],9,-51403784),s=gs(s,i,r,n,e[7],14,1735328473),r=vs(r,n=gs(n,s,i,r,e[12],20,-1926607734),s,i,e[5],4,-378558),i=vs(i,r,n,s,e[8],11,-2022574463),s=vs(s,i,r,n,e[11],16,1839030562),n=vs(n,s,i,r,e[14],23,-35309556),r=vs(r,n,s,i,e[1],4,-1530992060),i=vs(i,r,n,s,e[4],11,1272893353),s=vs(s,i,r,n,e[7],16,-155497632),n=vs(n,s,i,r,e[10],23,-1094730640),r=vs(r,n,s,i,e[13],4,681279174),i=vs(i,r,n,s,e[0],11,-358537222),s=vs(s,i,r,n,e[3],16,-722521979),n=vs(n,s,i,r,e[6],23,76029189),r=vs(r,n,s,i,e[9],4,-640364487),i=vs(i,r,n,s,e[12],11,-421815835),s=vs(s,i,r,n,e[15],16,530742520),r=ys(r,n=vs(n,s,i,r,e[2],23,-995338651),s,i,e[0],6,-198630844),i=ys(i,r,n,s,e[7],10,1126891415),s=ys(s,i,r,n,e[14],15,-1416354905),n=ys(n,s,i,r,e[5],21,-57434055),r=ys(r,n,s,i,e[12],6,1700485571),i=ys(i,r,n,s,e[3],10,-1894986606),s=ys(s,i,r,n,e[10],15,-1051523),n=ys(n,s,i,r,e[1],21,-2054922799),r=ys(r,n,s,i,e[8],6,1873313359),i=ys(i,r,n,s,e[15],10,-30611744),s=ys(s,i,r,n,e[6],15,-1560198380),n=ys(n,s,i,r,e[13],21,1309151649),r=ys(r,n,s,i,e[4],6,-145523070),i=ys(i,r,n,s,e[11],10,-1120210379),s=ys(s,i,r,n,e[2],15,718787259),n=ys(n,s,i,r,e[9],21,-343485551),t[0]=WA(r,t[0]),t[1]=WA(n,t[1]),t[2]=WA(s,t[2]),t[3]=WA(i,t[3])}function gy(t,e,r,n,s,i){return e=WA(WA(e,t),WA(n,i)),WA(e<<s|e>>>32-s,r)}function ms(t,e,r,n,s,i,a){return gy(e&r|~e&n,t,e,s,i,a)}function gs(t,e,r,n,s,i,a){return gy(e&n|r&~n,t,e,s,i,a)}function vs(t,e,r,n,s,i,a){return gy(e^r^n,t,e,s,i,a)}function ys(t,e,r,n,s,i,a){return gy(r^(e|~n),t,e,s,i,a)}function N3(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)$w(n,Ez(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for($w(n,s),e=0;e<16;e++)s[e]=0;return s[14]=8*r,$w(n,s),n}function Ez(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}Uf=Mt.atob.bind(Mt),sx=Mt.btoa.bind(Mt);var c_="0123456789abcdef".split("");function _z(t){for(var e="",r=0;r<4;r++)e+=c_[t>>8*r+4&15]+c_[t>>8*r&15];return e}function Iz(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function ix(t){return N3(t).map(Iz).join("")}var Sz=function(t){for(var e=0;e<t.length;e++)t[e]=_z(t[e]);return t.join("")}(N3("hello"))!="5d41402abc4b2a76b9719d911017c592";function WA(t,e){if(Sz){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function ax(t,e){var r,n,s,i;if(t!==r){for(var a=(s=t,i=1+(256/t.length>>0),new Array(i+1).join(s)),A=[],l=0;l<256;l++)A[l]=l;var c=0;for(l=0;l<256;l++){var u=A[l];c=(c+u+a.charCodeAt(l))%256,A[l]=A[c],A[c]=u}r=t,n=A}else A=n;var h=e.length,m=0,p=0,b="";for(l=0;l<h;l++)p=(p+(u=A[m=(m+1)%256]))%256,A[m]=A[p],A[p]=u,a=A[(A[m]+A[p])%256],b+=String.fromCharCode(e.charCodeAt(l)^a);return b}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var u_={print:4,modify:8,copy:16,"annot-forms":32};function zu(t,e,r,n){this.v=1,this.r=2;var s=192;t.forEach(function(A){if(u_.perm!==void 0)throw new Error("Invalid permission: "+A);s+=u_[A]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(e+this.padding).substr(0,32),a=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,a),this.P=-(1+(255^s)),this.encryptionKey=ix(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=ax(this.encryptionKey,this.padding)}function $u(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var s=t.charCodeAt(n);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=t[n]}return e}function d_(t){if(Ir(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,s){if(s=s||!1,typeof r!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var i=Math.random().toString(35);return e[r][i]=[n,!!s],i},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var i in e[r]){var a=e[r][i];try{a[0].apply(t,n)}catch(A){Mt.console&&Lr.error("jsPDF PubSub Error",A.message,A)}a[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function bp(t){if(!(this instanceof bp))return new bp(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function E3(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function HA(t,e,r,n,s){if(!(this instanceof HA))return new HA(t,e,r,n,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,E3.call(this,n,s)}function gc(t,e,r,n,s){if(!(this instanceof gc))return new gc(t,e,r,n,s);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,E3.call(this,n,s)}function Dt(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],i=arguments[3],a=[],A=1,l=16,c="S",u=null;Ir(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,s=t.format||s,i=t.compress||t.compressPdf||i,(u=t.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),A=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),a=t.filters||(i===!0?["FlateEncode"]:a),n=n||"mm",r=(""+(r||"P")).toLowerCase();var h=t.putOnlyUsedFonts||!1,m={},p={internal:{},__private__:{}};p.__private__.PubSub=d_;var b="1.3",B=p.__private__.getPdfVersion=function(){return b};p.__private__.setPdfVersion=function(v){b=v};var E={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return E};var y=p.__private__.getPageFormat=function(v){return E[v]};s=s||"a4";var w={COMPAT:"compat",ADVANCED:"advanced"},S=w.COMPAT;function M(){this.saveGraphicsState(),J(new Me(ve,0,0,-ve,0,ds()*ve).toString()+" cm"),this.setFontSize(this.getFontSize()/ve),c="n",S=w.ADVANCED}function R(){this.restoreGraphicsState(),c="S",S=w.COMPAT}var O=p.__private__.combineFontStyleAndFontWeight=function(v,V){if(v=="bold"&&V=="normal"||v=="bold"&&V==400||v=="normal"&&V=="italic"||v=="bold"&&V=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return V&&(v=V==400||V==="normal"?v==="italic"?"italic":"normal":V!=700&&V!=="bold"||v!=="normal"?(V==700?"bold":V)+""+v:"bold"),v};p.advancedAPI=function(v){var V=S===w.COMPAT;return V&&M.call(this),typeof v!="function"||(v(this),V&&R.call(this)),this},p.compatAPI=function(v){var V=S===w.ADVANCED;return V&&R.call(this),typeof v!="function"||(v(this),V&&M.call(this)),this},p.isAdvancedAPI=function(){return S===w.ADVANCED};var I,N=function(v){if(S!==w.ADVANCED)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},j=p.roundToPrecision=p.__private__.roundToPrecision=function(v,V){var le=e||V;if(isNaN(v)||isNaN(le))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(le).replace(/0+$/,"")};I=p.hpf=p.__private__.hpf=typeof l=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return j(v,l)}:l==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return j(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return j(v,16)};var D=p.f2=p.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return j(v,2)},_=p.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return j(v,3)},T=p.scale=p.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return S===w.COMPAT?v*ve:S===w.ADVANCED?v:void 0},P=function(v){return S===w.COMPAT?ds()-v:S===w.ADVANCED?v:void 0},ee=function(v){return T(P(v))};p.__private__.setPrecision=p.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(e=parseInt(v,10))};var Ae,ue="00000000000000000000000000000000",he=p.__private__.getFileId=function(){return ue},te=p.__private__.setFileId=function(v){return ue=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():ue.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Vr=new zu(u.userPermissions,u.userPassword,u.ownerPassword,ue)),ue};p.setFileId=function(v){return te(v),this},p.getFileId=function(){return he()};var se=p.__private__.convertDateToPDFDate=function(v){var V=v.getTimezoneOffset(),le=V<0?"+":"-",fe=Math.floor(Math.abs(V/60)),be=Math.abs(V%60),De=[le,W(fe),"'",W(be),"'"].join("");return["D:",v.getFullYear(),W(v.getMonth()+1),W(v.getDate()),W(v.getHours()),W(v.getMinutes()),W(v.getSeconds()),De].join("")},ne=p.__private__.convertPDFDateToDate=function(v){var V=parseInt(v.substr(2,4),10),le=parseInt(v.substr(6,2),10)-1,fe=parseInt(v.substr(8,2),10),be=parseInt(v.substr(10,2),10),De=parseInt(v.substr(12,2),10),$e=parseInt(v.substr(14,2),10);return new Date(V,le,fe,be,De,$e,0)},ye=p.__private__.setCreationDate=function(v){var V;if(v===void 0&&(v=new Date),v instanceof Date)V=se(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");V=v}return Ae=V},F=p.__private__.getCreationDate=function(v){var V=Ae;return v==="jsDate"&&(V=ne(Ae)),V};p.setCreationDate=function(v){return ye(v),this},p.getCreationDate=function(v){return F(v)};var L,W=p.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},q=p.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},H=0,re=[],$=[],de=0,pe=[],Ne=[],Te=!1,Fe=$,oe=function(){H=0,de=0,$=[],re=[],pe=[],et=it(),nt=it()};p.__private__.setCustomOutputDestination=function(v){Te=!0,Fe=v};var ce=function(v){Te||(Fe=v)};p.__private__.resetCustomOutputDestination=function(){Te=!1,Fe=$};var J=p.__private__.out=function(v){return v=v.toString(),de+=v.length+1,Fe.push(v),Fe},Re=p.__private__.write=function(v){return J(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},Le=p.__private__.getArrayBuffer=function(v){for(var V=v.length,le=new ArrayBuffer(V),fe=new Uint8Array(le);V--;)fe[V]=v.charCodeAt(V);return le},Ue=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Ue};var Pe=t.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(v){return Pe=S===w.ADVANCED?v/ve:v,this};var Ge,qe=p.__private__.getFontSize=p.getFontSize=function(){return S===w.COMPAT?Pe:Pe*ve},tt=t.R2L||!1;p.__private__.setR2L=p.setR2L=function(v){return tt=v,this},p.__private__.getR2L=p.getR2L=function(){return tt};var Ze,vt=p.__private__.setZoomMode=function(v){var V=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))Ge=v;else if(isNaN(v)){if(V.indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');Ge=v}else Ge=parseInt(v,10)};p.__private__.getZoomMode=function(){return Ge};var ht,Ct=p.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');Ze=v};p.__private__.getPageMode=function(){return Ze};var Ht=p.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');ht=v};p.__private__.getLayoutMode=function(){return ht},p.__private__.setDisplayMode=p.setDisplayMode=function(v,V,le){return vt(v),Ht(V),Ct(le),this};var Nt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(v){if(Object.keys(Nt).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Nt[v]},p.__private__.getDocumentProperties=function(){return Nt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(v){for(var V in Nt)Nt.hasOwnProperty(V)&&v[V]&&(Nt[V]=v[V]);return this},p.__private__.setDocumentProperty=function(v,V){if(Object.keys(Nt).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Nt[v]=V};var ie,ve,We,ot,yt,Et={},rt={},ur=[],St={},Pr={},sr={},fr={},fn=null,vr=0,kt=[],Yt=new d_(p),us=t.hotfixes||[],$r={},mr={},Qe=[],Me=function v(V,le,fe,be,De,$e){if(!(this instanceof v))return new v(V,le,fe,be,De,$e);isNaN(V)&&(V=1),isNaN(le)&&(le=0),isNaN(fe)&&(fe=0),isNaN(be)&&(be=1),isNaN(De)&&(De=0),isNaN($e)&&($e=0),this._matrix=[V,le,fe,be,De,$e]};Object.defineProperty(Me.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(Me.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(Me.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(Me.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(Me.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(Me.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(Me.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(Me.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(Me.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(Me.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(Me.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(Me.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(Me.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Me.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Me.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Me.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Me.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(I).join(v)},Me.prototype.multiply=function(v){var V=v.sx*this.sx+v.shy*this.shx,le=v.sx*this.shy+v.shy*this.sy,fe=v.shx*this.sx+v.sy*this.shx,be=v.shx*this.shy+v.sy*this.sy,De=v.tx*this.sx+v.ty*this.shx+this.tx,$e=v.tx*this.shy+v.ty*this.sy+this.ty;return new Me(V,le,fe,be,De,$e)},Me.prototype.decompose=function(){var v=this.sx,V=this.shy,le=this.shx,fe=this.sy,be=this.tx,De=this.ty,$e=Math.sqrt(v*v+V*V),lt=(v/=$e)*le+(V/=$e)*fe;le-=v*lt,fe-=V*lt;var f=Math.sqrt(le*le+fe*fe);return lt/=f,v*(fe/=f)<V*(le/=f)&&(v=-v,V=-V,lt=-lt,$e=-$e),{scale:new Me($e,0,0,f,0,0),translate:new Me(1,0,0,1,be,De),rotate:new Me(v,V,-V,v,0,0),skew:new Me(1,0,lt,1,0,0)}},Me.prototype.toString=function(v){return this.join(" ")},Me.prototype.inversed=function(){var v=this.sx,V=this.shy,le=this.shx,fe=this.sy,be=this.tx,De=this.ty,$e=1/(v*fe-V*le),lt=fe*$e,f=-V*$e,C=-le*$e,k=v*$e;return new Me(lt,f,C,k,-lt*be-C*De,-f*be-k*De)},Me.prototype.applyToPoint=function(v){var V=v.x*this.sx+v.y*this.shx+this.tx,le=v.x*this.shy+v.y*this.sy+this.ty;return new no(V,le)},Me.prototype.applyToRectangle=function(v){var V=this.applyToPoint(v),le=this.applyToPoint(new no(v.x+v.w,v.y+v.h));return new oA(V.x,V.y,le.x-V.x,le.y-V.y)},Me.prototype.clone=function(){var v=this.sx,V=this.shy,le=this.shx,fe=this.sy,be=this.tx,De=this.ty;return new Me(v,V,le,fe,be,De)},p.Matrix=Me;var Ft=p.matrixMult=function(v,V){return V.multiply(v)},ft=new Me(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=ft;var ct=function(v,V){if(!Pr[v]){var le=(V instanceof HA?"Sh":"P")+(Object.keys(St).length+1).toString(10);V.id=le,Pr[v]=le,St[le]=V,Yt.publish("addPattern",V)}};p.ShadingPattern=HA,p.TilingPattern=gc,p.addShadingPattern=function(v,V){return N("addShadingPattern()"),ct(v,V),this},p.beginTilingPattern=function(v){N("beginTilingPattern()"),AA(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},p.endTilingPattern=function(v,V){N("endTilingPattern()"),V.stream=Ne[L].join(`
`),ct(v,V),Yt.publish("endTilingPattern",V),Qe.pop().restore()};var Ut=p.__private__.newObject=function(){var v=it();return _t(v,!0),v},it=p.__private__.newObjectDeferred=function(){return H++,re[H]=function(){return de},H},_t=function(v,V){return V=typeof V=="boolean"&&V,re[v]=de,V&&J(v+" 0 obj"),v},Be=p.__private__.newAdditionalObject=function(){var v={objId:it(),content:""};return pe.push(v),v},et=it(),nt=it(),Ot=p.__private__.decodeColorString=function(v){var V=v.split(" ");if(V.length!==2||V[1]!=="g"&&V[1]!=="G")V.length===5&&(V[4]==="k"||V[4]==="K")&&(V=[(1-V[0])*(1-V[3]),(1-V[1])*(1-V[3]),(1-V[2])*(1-V[3]),"r"]);else{var le=parseFloat(V[0]);V=[le,le,le,"r"]}for(var fe="#",be=0;be<3;be++)fe+=("0"+Math.floor(255*parseFloat(V[be])).toString(16)).slice(-2);return fe},Zt=p.__private__.encodeColorString=function(v){var V;typeof v=="string"&&(v={ch1:v});var le=v.ch1,fe=v.ch2,be=v.ch3,De=v.ch4,$e=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof le=="string"&&le.charAt(0)!=="#"){var lt=new C3(le);if(lt.ok)le=lt.toHex();else if(!/^\d*\.?\d*$/.test(le))throw new Error('Invalid color "'+le+'" passed to jsPDF.encodeColorString.')}if(typeof le=="string"&&/^#[0-9A-Fa-f]{3}$/.test(le)&&(le="#"+le[1]+le[1]+le[2]+le[2]+le[3]+le[3]),typeof le=="string"&&/^#[0-9A-Fa-f]{6}$/.test(le)){var f=parseInt(le.substr(1),16);le=f>>16&255,fe=f>>8&255,be=255&f}if(fe===void 0||De===void 0&&le===fe&&fe===be)if(typeof le=="string")V=le+" "+$e[0];else switch(v.precision){case 2:V=D(le/255)+" "+$e[0];break;case 3:default:V=_(le/255)+" "+$e[0]}else if(De===void 0||Ir(De)==="object"){if(De&&!isNaN(De.a)&&De.a===0)return V=["1.","1.","1.",$e[1]].join(" ");if(typeof le=="string")V=[le,fe,be,$e[1]].join(" ");else switch(v.precision){case 2:V=[D(le/255),D(fe/255),D(be/255),$e[1]].join(" ");break;default:case 3:V=[_(le/255),_(fe/255),_(be/255),$e[1]].join(" ")}}else if(typeof le=="string")V=[le,fe,be,De,$e[2]].join(" ");else switch(v.precision){case 2:V=[D(le),D(fe),D(be),D(De),$e[2]].join(" ");break;case 3:default:V=[_(le),_(fe),_(be),_(De),$e[2]].join(" ")}return V},It=p.__private__.getFilters=function(){return a},mt=p.__private__.putStream=function(v){var V=(v=v||{}).data||"",le=v.filters||It(),fe=v.alreadyAppliedFilters||[],be=v.addLength1||!1,De=V.length,$e=v.objectId,lt=function(Gt){return Gt};if(u!==null&&$e===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(lt=Vr.encryptor($e,0));var f={};le===!0&&(le=["FlateEncode"]);var C=v.additionalKeyValues||[],k=(f=Dt.API.processDataByFilters!==void 0?Dt.API.processDataByFilters(V,le):{data:V,reverseChain:[]}).reverseChain+(Array.isArray(fe)?fe.join(" "):fe.toString());if(f.data.length!==0&&(C.push({key:"Length",value:f.data.length}),be===!0&&C.push({key:"Length1",value:De})),k.length!=0)if(k.split("/").length-1==1)C.push({key:"Filter",value:k});else{C.push({key:"Filter",value:"["+k+"]"});for(var X=0;X<C.length;X+=1)if(C[X].key==="DecodeParms"){for(var xe=[],Ie=0;Ie<f.reverseChain.split("/").length-1;Ie+=1)xe.push("null");xe.push(C[X].value),C[X].value="["+xe.join(" ")+"]"}}J("<<");for(var Je=0;Je<C.length;Je++)J("/"+C[Je].key+" "+C[Je].value);J(">>"),f.data.length!==0&&(J("stream"),J(lt(f.data)),J("endstream"))},Ns=p.__private__.putPage=function(v){var V=v.number,le=v.data,fe=v.objId,be=v.contentsObjId;_t(fe,!0),J("<</Type /Page"),J("/Parent "+v.rootDictionaryObjId+" 0 R"),J("/Resources "+v.resourceDictionaryObjId+" 0 R"),J("/MediaBox ["+parseFloat(I(v.mediaBox.bottomLeftX))+" "+parseFloat(I(v.mediaBox.bottomLeftY))+" "+I(v.mediaBox.topRightX)+" "+I(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&J("/CropBox ["+I(v.cropBox.bottomLeftX)+" "+I(v.cropBox.bottomLeftY)+" "+I(v.cropBox.topRightX)+" "+I(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&J("/BleedBox ["+I(v.bleedBox.bottomLeftX)+" "+I(v.bleedBox.bottomLeftY)+" "+I(v.bleedBox.topRightX)+" "+I(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&J("/TrimBox ["+I(v.trimBox.bottomLeftX)+" "+I(v.trimBox.bottomLeftY)+" "+I(v.trimBox.topRightX)+" "+I(v.trimBox.topRightY)+"]"),v.artBox!==null&&J("/ArtBox ["+I(v.artBox.bottomLeftX)+" "+I(v.artBox.bottomLeftY)+" "+I(v.artBox.topRightX)+" "+I(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&J("/UserUnit "+v.userUnit),Yt.publish("putPage",{objId:fe,pageContext:kt[V],pageNumber:V,page:le}),J("/Contents "+be+" 0 R"),J(">>"),J("endobj");var De=le.join(`
`);return S===w.ADVANCED&&(De+=`
Q`),_t(be,!0),mt({data:De,filters:It(),objectId:be}),J("endobj"),fe},ma=p.__private__.putPages=function(){var v,V,le=[];for(v=1;v<=vr;v++)kt[v].objId=it(),kt[v].contentsObjId=it();for(v=1;v<=vr;v++)le.push(Ns({number:v,data:Ne[v],objId:kt[v].objId,contentsObjId:kt[v].contentsObjId,mediaBox:kt[v].mediaBox,cropBox:kt[v].cropBox,bleedBox:kt[v].bleedBox,trimBox:kt[v].trimBox,artBox:kt[v].artBox,userUnit:kt[v].userUnit,rootDictionaryObjId:et,resourceDictionaryObjId:nt}));_t(et,!0),J("<</Type /Pages");var fe="/Kids [";for(V=0;V<vr;V++)fe+=le[V]+" 0 R ";J(fe+"]"),J("/Count "+vr),J(">>"),J("endobj"),Yt.publish("postPutPages")},ga=function(v){Yt.publish("putFont",{font:v,out:J,newObject:Ut,putStream:mt}),v.isAlreadyPutted!==!0&&(v.objectNumber=Ut(),J("<<"),J("/Type /Font"),J("/BaseFont /"+$u(v.postScriptName)),J("/Subtype /Type1"),typeof v.encoding=="string"&&J("/Encoding /"+v.encoding),J("/FirstChar 32"),J("/LastChar 255"),J(">>"),J("endobj"))},va=function(){for(var v in Et)Et.hasOwnProperty(v)&&(h===!1||h===!0&&m.hasOwnProperty(v))&&ga(Et[v])},$a=function(v){v.objectNumber=Ut();var V=[];V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Form"}),V.push({key:"BBox",value:"["+[I(v.x),I(v.y),I(v.x+v.width),I(v.y+v.height)].join(" ")+"]"}),V.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var le=v.pages[1].join(`
`);mt({data:le,additionalKeyValues:V,objectId:v.objectNumber}),J("endobj")},Wa=function(){for(var v in $r)$r.hasOwnProperty(v)&&$a($r[v])},Xc=function(v,V){var le,fe=[],be=1/(V-1);for(le=0;le<1;le+=be)fe.push(le);if(fe.push(1),v[0].offset!=0){var De={offset:0,color:v[0].color};v.unshift(De)}if(v[v.length-1].offset!=1){var $e={offset:1,color:v[v.length-1].color};v.push($e)}for(var lt="",f=0,C=0;C<fe.length;C++){for(le=fe[C];le>v[f+1].offset;)f++;var k=v[f].offset,X=(le-k)/(v[f+1].offset-k),xe=v[f].color,Ie=v[f+1].color;lt+=q(Math.round((1-X)*xe[0]+X*Ie[0]).toString(16))+q(Math.round((1-X)*xe[1]+X*Ie[1]).toString(16))+q(Math.round((1-X)*xe[2]+X*Ie[2]).toString(16))}return lt.trim()},$o=function(v,V){V||(V=21);var le=Ut(),fe=Xc(v.colors,V),be=[];be.push({key:"FunctionType",value:"0"}),be.push({key:"Domain",value:"[0.0 1.0]"}),be.push({key:"Size",value:"["+V+"]"}),be.push({key:"BitsPerSample",value:"8"}),be.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),be.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),mt({data:fe,additionalKeyValues:be,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:le}),J("endobj"),v.objectNumber=Ut(),J("<< /ShadingType "+v.type),J("/ColorSpace /DeviceRGB");var De="/Coords ["+I(parseFloat(v.coords[0]))+" "+I(parseFloat(v.coords[1]))+" ";v.type===2?De+=I(parseFloat(v.coords[2]))+" "+I(parseFloat(v.coords[3])):De+=I(parseFloat(v.coords[2]))+" "+I(parseFloat(v.coords[3]))+" "+I(parseFloat(v.coords[4]))+" "+I(parseFloat(v.coords[5])),J(De+="]"),v.matrix&&J("/Matrix ["+v.matrix.toString()+"]"),J("/Function "+le+" 0 R"),J("/Extend [true true]"),J(">>"),J("endobj")},Yc=function(v,V){var le=it(),fe=Ut();V.push({resourcesOid:le,objectOid:fe}),v.objectNumber=fe;var be=[];be.push({key:"Type",value:"/Pattern"}),be.push({key:"PatternType",value:"1"}),be.push({key:"PaintType",value:"1"}),be.push({key:"TilingType",value:"1"}),be.push({key:"BBox",value:"["+v.boundingBox.map(I).join(" ")+"]"}),be.push({key:"XStep",value:I(v.xStep)}),be.push({key:"YStep",value:I(v.yStep)}),be.push({key:"Resources",value:le+" 0 R"}),v.matrix&&be.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),mt({data:v.stream,additionalKeyValues:be,objectId:v.objectNumber}),J("endobj")},ya=function(v){var V;for(V in St)St.hasOwnProperty(V)&&(St[V]instanceof HA?$o(St[V]):St[V]instanceof gc&&Yc(St[V],v))},wa=function(v){for(var V in v.objectNumber=Ut(),J("<<"),v)switch(V){case"opacity":J("/ca "+D(v[V]));break;case"stroke-opacity":J("/CA "+D(v[V]))}J(">>"),J("endobj")},Ri=function(){var v;for(v in sr)sr.hasOwnProperty(v)&&wa(sr[v])},Ja=function(){for(var v in J("/XObject <<"),$r)$r.hasOwnProperty(v)&&$r[v].objectNumber>=0&&J("/"+v+" "+$r[v].objectNumber+" 0 R");Yt.publish("putXobjectDict"),J(">>")},sh=function(){Vr.oid=Ut(),J("<<"),J("/Filter /Standard"),J("/V "+Vr.v),J("/R "+Vr.r),J("/U <"+Vr.toHexString(Vr.U)+">"),J("/O <"+Vr.toHexString(Vr.O)+">"),J("/P "+Vr.P),J(">>"),J("endobj")},Tl=function(){for(var v in J("/Font <<"),Et)Et.hasOwnProperty(v)&&(h===!1||h===!0&&m.hasOwnProperty(v))&&J("/"+v+" "+Et[v].objectNumber+" 0 R");J(">>")},Zc=function(){if(Object.keys(St).length>0){for(var v in J("/Shading <<"),St)St.hasOwnProperty(v)&&St[v]instanceof HA&&St[v].objectNumber>=0&&J("/"+v+" "+St[v].objectNumber+" 0 R");Yt.publish("putShadingPatternDict"),J(">>")}},Xa=function(v){if(Object.keys(St).length>0){for(var V in J("/Pattern <<"),St)St.hasOwnProperty(V)&&St[V]instanceof p.TilingPattern&&St[V].objectNumber>=0&&St[V].objectNumber<v&&J("/"+V+" "+St[V].objectNumber+" 0 R");Yt.publish("putTilingPatternDict"),J(">>")}},Ul=function(){if(Object.keys(sr).length>0){var v;for(v in J("/ExtGState <<"),sr)sr.hasOwnProperty(v)&&sr[v].objectNumber>=0&&J("/"+v+" "+sr[v].objectNumber+" 0 R");Yt.publish("putGStateDict"),J(">>")}},Hr=function(v){_t(v.resourcesOid,!0),J("<<"),J("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Tl(),Zc(),Xa(v.objectOid),Ul(),Ja(),J(">>"),J("endobj")},Pl=function(){var v=[];va(),Ri(),Wa(),ya(v),Yt.publish("putResources"),v.forEach(Hr),Hr({resourcesOid:nt,objectOid:Number.MAX_SAFE_INTEGER}),Yt.publish("postPutResources")},Ql=function(){Yt.publish("putAdditionalObjects");for(var v=0;v<pe.length;v++){var V=pe[v];_t(V.objId,!0),J(V.content),J("endobj")}Yt.publish("postPutAdditionalObjects")},eu=function(v){rt[v.fontName]=rt[v.fontName]||{},rt[v.fontName][v.fontStyle]=v.id},jl=function(v,V,le,fe,be){var De={id:"F"+(Object.keys(Et).length+1).toString(10),postScriptName:v,fontName:V,fontStyle:le,encoding:fe,isStandardFont:be||!1,metadata:{}};return Yt.publish("addFont",{font:De,instance:this}),Et[De.id]=De,eu(De),De.id},tu=function(v){for(var V=0,le=Ue.length;V<le;V++){var fe=jl.call(this,v[V][0],v[V][1],v[V][2],Ue[V][3],!0);h===!1&&(m[fe]=!0);var be=v[V][0].split("-");eu({id:fe,fontName:be[0],fontStyle:be[1]||""})}Yt.publish("addFonts",{fonts:Et,dictionary:rt})},Ds=function(v){return v.foo=function(){try{return v.apply(this,arguments)}catch(fe){var V=fe.stack||"";~V.indexOf(" at ")&&(V=V.split(" at ")[1]);var le="Error in function "+V.split(`
`)[0].split("<")[0]+": "+fe.message;if(!Mt.console)throw new Error(le);Mt.console.error(le,fe),Mt.alert&&alert(le)}},v.foo.bar=v,v.foo},Wo=function(v,V){var le,fe,be,De,$e,lt,f,C,k;if(be=(V=V||{}).sourceEncoding||"Unicode",$e=V.outputEncoding,(V.autoencode||$e)&&Et[ie].metadata&&Et[ie].metadata[be]&&Et[ie].metadata[be].encoding&&(De=Et[ie].metadata[be].encoding,!$e&&Et[ie].encoding&&($e=Et[ie].encoding),!$e&&De.codePages&&($e=De.codePages[0]),typeof $e=="string"&&($e=De[$e]),$e)){for(f=!1,lt=[],le=0,fe=v.length;le<fe;le++)(C=$e[v.charCodeAt(le)])?lt.push(String.fromCharCode(C)):lt.push(v[le]),lt[le].charCodeAt(0)>>8&&(f=!0);v=lt.join("")}for(le=v.length;f===void 0&&le!==0;)v.charCodeAt(le-1)>>8&&(f=!0),le--;if(!f)return v;for(lt=V.noBOM?[]:[254,255],le=0,fe=v.length;le<fe;le++){if((k=(C=v.charCodeAt(le))>>8)>>8)throw new Error("Character at position "+le+" of string '"+v+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");lt.push(k),lt.push(C-(k<<8))}return String.fromCharCode.apply(void 0,lt)},An=p.__private__.pdfEscape=p.pdfEscape=function(v,V){return Wo(v,V).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Es=p.__private__.beginPage=function(v){Ne[++vr]=[],kt[vr]={objId:0,contentsObjId:0,userUnit:Number(A),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},Ll(vr),ce(Ne[L])},Ya=function(v,V){var le,fe,be;switch(r=V||r,typeof v=="string"&&(le=y(v.toLowerCase()),Array.isArray(le)&&(fe=le[0],be=le[1])),Array.isArray(v)&&(fe=v[0]*ve,be=v[1]*ve),isNaN(fe)&&(fe=s[0],be=s[1]),(fe>14400||be>14400)&&(Lr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),fe=Math.min(14400,fe),be=Math.min(14400,be)),s=[fe,be],r.substr(0,1)){case"l":be>fe&&(s=[be,fe]);break;case"p":fe>be&&(s=[be,fe])}Es(s),Ml(Ol),J(Jn),Kl!==0&&J(Kl+" J"),aA!==0&&J(aA+" j"),Yt.publish("addPage",{pageNumber:vr})},Jo=function(v){v>0&&v<=vr&&(Ne.splice(v,1),kt.splice(v,1),vr--,L>vr&&(L=vr),this.setPage(L))},Ll=function(v){v>0&&v<=vr&&(L=v)},br=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Ne.length-1},Za=function(v,V,le){var fe,be=void 0;return le=le||{},v=v!==void 0?v:Et[ie].fontName,V=V!==void 0?V:Et[ie].fontStyle,fe=v.toLowerCase(),rt[fe]!==void 0&&rt[fe][V]!==void 0?be=rt[fe][V]:rt[v]!==void 0&&rt[v][V]!==void 0?be=rt[v][V]:le.disableWarning===!1&&Lr.warn("Unable to look up font label for font '"+v+"', '"+V+"'. Refer to getFontList() for available fonts."),be||le.noFallback||(be=rt.times[V])==null&&(be=rt.times.normal),be},eo=p.__private__.putInfo=function(){var v=Ut(),V=function(fe){return fe};for(var le in u!==null&&(V=Vr.encryptor(v,0)),J("<<"),J("/Producer ("+An(V("jsPDF "+Dt.version))+")"),Nt)Nt.hasOwnProperty(le)&&Nt[le]&&J("/"+le.substr(0,1).toUpperCase()+le.substr(1)+" ("+An(V(Nt[le]))+")");J("/CreationDate ("+An(V(Ae))+")"),J(">>"),J("endobj")},Oi=p.__private__.putCatalog=function(v){var V=(v=v||{}).rootDictionaryObjId||et;switch(Ut(),J("<<"),J("/Type /Catalog"),J("/Pages "+V+" 0 R"),Ge||(Ge="fullwidth"),Ge){case"fullwidth":J("/OpenAction [3 0 R /FitH null]");break;case"fullheight":J("/OpenAction [3 0 R /FitV null]");break;case"fullpage":J("/OpenAction [3 0 R /Fit]");break;case"original":J("/OpenAction [3 0 R /XYZ null null 1]");break;default:var le=""+Ge;le.substr(le.length-1)==="%"&&(Ge=parseInt(Ge)/100),typeof Ge=="number"&&J("/OpenAction [3 0 R /XYZ null null "+D(Ge)+"]")}switch(ht||(ht="continuous"),ht){case"continuous":J("/PageLayout /OneColumn");break;case"single":J("/PageLayout /SinglePage");break;case"two":case"twoleft":J("/PageLayout /TwoColumnLeft");break;case"tworight":J("/PageLayout /TwoColumnRight")}Ze&&J("/PageMode /"+Ze),Yt.publish("putCatalog"),J(">>"),J("endobj")},ih=p.__private__.putTrailer=function(){J("trailer"),J("<<"),J("/Size "+(H+1)),J("/Root "+H+" 0 R"),J("/Info "+(H-1)+" 0 R"),u!==null&&J("/Encrypt "+Vr.oid+" 0 R"),J("/ID [ <"+ue+"> <"+ue+"> ]"),J(">>")},ru=p.__private__.putHeader=function(){J("%PDF-"+b),J("%")},ah=p.__private__.putXRef=function(){var v="0000000000";J("xref"),J("0 "+(H+1)),J("0000000000 65535 f ");for(var V=1;V<=H;V++)typeof re[V]=="function"?J((v+re[V]()).slice(-10)+" 00000 n "):re[V]!==void 0?J((v+re[V]).slice(-10)+" 00000 n "):J("0000000000 00000 n ")},Mi=p.__private__.buildDocument=function(){oe(),ce($),Yt.publish("buildDocument"),ru(),ma(),Ql(),Pl(),u!==null&&sh(),eo(),Oi();var v=de;return ah(),ih(),J("startxref"),J(""+v),J("%%EOF"),ce(Ne[L]),$.join(`
`)},Xo=p.__private__.getBlob=function(v){return new Blob([Le(v)],{type:"application/pdf"})},Yo=p.output=p.__private__.output=Ds(function(v,V){switch(typeof(V=V||{})=="string"?V={filename:V}:V.filename=V.filename||"generated.pdf",v){case void 0:return Mi();case"save":p.save(V.filename);break;case"arraybuffer":return Le(Mi());case"blob":return Xo(Mi());case"bloburi":case"bloburl":if(Mt.URL!==void 0&&typeof Mt.URL.createObjectURL=="function")return Mt.URL&&Mt.URL.createObjectURL(Xo(Mi()))||void 0;Lr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var le="",fe=Mi();try{le=sx(fe)}catch{le=sx(unescape(encodeURIComponent(fe)))}return"data:application/pdf;filename="+V.filename+";base64,"+le;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Mt)==="[object Window]"){var be="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",De=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';V.pdfObjectUrl&&(be=V.pdfObjectUrl,De="");var $e='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+be+'"'+De+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(V)+");<\/script></body></html>",lt=Mt.open();return lt!==null&&lt.document.write($e),lt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Mt)==="[object Window]"){var f='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(V.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+V.filename+'" width="500px" height="400px" /></body></html>',C=Mt.open();if(C!==null){C.document.write(f);var k=this;C.document.documentElement.querySelector("#pdfViewer").onload=function(){C.document.title=V.filename,C.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(k.output("bloburl"))}}return C}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Mt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var X='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",V)+'"></iframe></body></html>',xe=Mt.open();if(xe!==null&&(xe.document.write(X),xe.document.title=V.filename),xe||typeof safari>"u")return xe;break;case"datauri":case"dataurl":return Mt.document.location.href=this.output("datauristring",V);default:return null}}),xa=function(v){return Array.isArray(us)===!0&&us.indexOf(v)>-1};switch(n){case"pt":ve=1;break;case"mm":ve=72/25.4;break;case"cm":ve=72/2.54;break;case"in":ve=72;break;case"px":ve=xa("px_scaling")==1?.75:96/72;break;case"pc":case"em":ve=12;break;case"ex":ve=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);ve=n}var Vr=null;ye(),te();var nu=function(v){return u!==null?Vr.encryptor(v,0):function(V){return V}},kl=p.__private__.getPageInfo=p.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:kt[v].objId,pageNumber:v,pageContext:kt[v]}},Vt=p.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var V in kt)if(kt[V].objId===v)break;return kl(V)},ba=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:kt[L].objId,pageNumber:L,pageContext:kt[L]}};p.addPage=function(){return Ya.apply(this,arguments),this},p.setPage=function(){return Ll.apply(this,arguments),ce.call(this,Ne[L]),this},p.insertPage=function(v){return this.addPage(),this.movePage(L,v),this},p.movePage=function(v,V){var le,fe;if(v>V){le=Ne[v],fe=kt[v];for(var be=v;be>V;be--)Ne[be]=Ne[be-1],kt[be]=kt[be-1];Ne[V]=le,kt[V]=fe,this.setPage(V)}else if(v<V){le=Ne[v],fe=kt[v];for(var De=v;De<V;De++)Ne[De]=Ne[De+1],kt[De]=kt[De+1];Ne[V]=le,kt[V]=fe,this.setPage(V)}return this},p.deletePage=function(){return Jo.apply(this,arguments),this},p.__private__.text=p.text=function(v,V,le,fe,be){var De,$e,lt,f,C,k,X,xe,Ie,Je=(fe=fe||{}).scope||this;if(typeof v=="number"&&typeof V=="number"&&(typeof le=="string"||Array.isArray(le))){var Gt=le;le=V,V=v,v=Gt}if(arguments[3]instanceof Me?(N("The transform parameter of text() with a Matrix value"),Ie=be):(lt=arguments[4],f=arguments[5],Ir(X=arguments[3])==="object"&&X!==null||(typeof lt=="string"&&(f=lt,lt=null),typeof X=="string"&&(f=X,X=null),typeof X=="number"&&(lt=X,X=null),fe={flags:X,angle:lt,align:f})),isNaN(V)||isNaN(le)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return Je;var ir="",zt=!1,wr=typeof fe.lineHeightFactor=="number"?fe.lineHeightFactor:yr,Qr=Je.internal.scaleFactor;function Gi(kr){return kr=kr.split("	").join(Array(fe.TabLen||9).join(" ")),An(kr,X)}function Xn(kr){for(var Dr,mn=kr.concat(),Tn=[],Ao=mn.length;Ao--;)typeof(Dr=mn.shift())=="string"?Tn.push(Dr):Array.isArray(kr)&&(Dr.length===1||Dr[1]===void 0&&Dr[2]===void 0)?Tn.push(Dr[0]):Tn.push([Dr[0],Dr[1],Dr[2]]);return Tn}function Ea(kr,Dr){var mn;if(typeof kr=="string")mn=Dr(kr)[0];else if(Array.isArray(kr)){for(var Tn,Ao,ph=kr.concat(),mu=[],Yp=ph.length;Yp--;)typeof(Tn=ph.shift())=="string"?mu.push(Dr(Tn)[0]):Array.isArray(Tn)&&typeof Tn[0]=="string"&&(Ao=Dr(Tn[0],Tn[1],Tn[2]),mu.push([Ao[0],Ao[1],Ao[2]]));mn=mu}return mn}var _a=!1,Ah=!0;if(typeof v=="string")_a=!0;else if(Array.isArray(v)){var lh=v.concat();$e=[];for(var Au,Yn=lh.length;Yn--;)(typeof(Au=lh.shift())!="string"||Array.isArray(Au)&&typeof Au[0]!="string")&&(Ah=!1);_a=Ah}if(_a===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var lu=Pe/Je.internal.scaleFactor,cu=lu*(wr-1);switch(fe.baseline){case"bottom":le-=cu;break;case"top":le+=lu-cu;break;case"hanging":le+=lu-2*cu;break;case"middle":le+=lu/2-cu}if((k=fe.maxWidth||0)>0&&(typeof v=="string"?v=Je.splitTextToSize(v,k):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(kr,Dr){return kr.concat(Je.splitTextToSize(Dr,k))},[]))),De={text:v,x:V,y:le,options:fe,mutex:{pdfEscape:An,activeFontKey:ie,fonts:Et,activeFontSize:Pe}},Yt.publish("preProcessText",De),v=De.text,lt=(fe=De.options).angle,!(Ie instanceof Me)&&lt&&typeof lt=="number"){lt*=Math.PI/180,fe.rotationDirection===0&&(lt=-lt),S===w.ADVANCED&&(lt=-lt);var uu=Math.cos(lt),ch=Math.sin(lt);Ie=new Me(uu,ch,-ch,uu,0,0)}else lt&&lt instanceof Me&&(Ie=lt);S!==w.ADVANCED||Ie||(Ie=ft),(C=fe.charSpace||ro)!==void 0&&(ir+=I(T(C))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(xe=fe.horizontalScale)!==void 0&&(ir+=I(100*xe)+` Tz
`),fe.lang;var Rs=-1,vy=fe.renderingMode!==void 0?fe.renderingMode:fe.stroke,uh=Je.internal.getCurrentPageInfo().pageContext;switch(vy){case 0:case!1:case"fill":Rs=0;break;case 1:case!0:case"stroke":Rs=1;break;case 2:case"fillThenStroke":Rs=2;break;case 3:case"invisible":Rs=3;break;case 4:case"fillAndAddForClipping":Rs=4;break;case 5:case"strokeAndAddPathForClipping":Rs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Rs=6;break;case 7:case"addToPathForClipping":Rs=7}var $p=uh.usedRenderingMode!==void 0?uh.usedRenderingMode:-1;Rs!==-1?ir+=Rs+` Tr
`:$p!==-1&&(ir+=`0 Tr
`),Rs!==-1&&(uh.usedRenderingMode=Rs),f=fe.align||"left";var vi,du=Pe*wr,Wp=Je.internal.pageSize.getWidth(),Jp=Et[ie];C=fe.charSpace||ro,k=fe.maxWidth||0,X=Object.assign({autoencode:!0,noBOM:!0},fe.flags);var uA=[],ql=function(kr){return Je.getStringUnitWidth(kr,{font:Jp,charSpace:C,fontSize:Pe,doKerning:!1})*Pe/Qr};if(Object.prototype.toString.call(v)==="[object Array]"){var Os;$e=Xn(v),f!=="left"&&(vi=$e.map(ql));var _s,dA=0;if(f==="right"){V-=vi[0],v=[],Yn=$e.length;for(var io=0;io<Yn;io++)io===0?(_s=ti(V),Os=Fn(le)):(_s=T(dA-vi[io]),Os=-du),v.push([$e[io],_s,Os]),dA=vi[io]}else if(f==="center"){V-=vi[0]/2,v=[],Yn=$e.length;for(var ao=0;ao<Yn;ao++)ao===0?(_s=ti(V),Os=Fn(le)):(_s=T((dA-vi[ao])/2),Os=-du),v.push([$e[ao],_s,Os]),dA=vi[ao]}else if(f==="left"){v=[],Yn=$e.length;for(var hu=0;hu<Yn;hu++)v.push($e[hu])}else if(f==="justify"&&Jp.encoding==="Identity-H"){v=[],Yn=$e.length,k=k!==0?k:Wp;for(var oo=0,pn=0;pn<Yn;pn++)if(Os=pn===0?Fn(le):-du,_s=pn===0?ti(V):oo,pn<Yn-1){var dh=T((k-vi[pn])/($e[pn].split(" ").length-1)),Is=$e[pn].split(" ");v.push([Is[0]+" ",_s,Os]),oo=0;for(var yi=1;yi<Is.length;yi++){var fu=(ql(Is[yi-1]+" "+Is[yi])-ql(Is[yi]))*Qr+dh;yi==Is.length-1?v.push([Is[yi],fu,0]):v.push([Is[yi]+" ",fu,0]),oo-=fu}}else v.push([$e[pn],_s,Os]);v.push(["",oo,0])}else{if(f!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],Yn=$e.length,k=k!==0?k:Wp,pn=0;pn<Yn;pn++)Os=pn===0?Fn(le):-du,_s=pn===0?ti(V):0,pn<Yn-1?uA.push(I(T((k-vi[pn])/($e[pn].split(" ").length-1)))):uA.push(0),v.push([$e[pn],_s,Os])}}var Xp=typeof fe.R2L=="boolean"?fe.R2L:tt;Xp===!0&&(v=Ea(v,function(kr,Dr,mn){return[kr.split("").reverse().join(""),Dr,mn]})),De={text:v,x:V,y:le,options:fe,mutex:{pdfEscape:An,activeFontKey:ie,fonts:Et,activeFontSize:Pe}},Yt.publish("postProcessText",De),v=De.text,zt=De.mutex.isHex||!1;var hh=Et[ie].encoding;hh!=="WinAnsiEncoding"&&hh!=="StandardEncoding"||(v=Ea(v,function(kr,Dr,mn){return[Gi(kr),Dr,mn]})),$e=Xn(v),v=[];for(var Gl,zl,hA,$l=0,pu=1,Wl=Array.isArray($e[0])?pu:$l,fA="",fh=function(kr,Dr,mn){var Tn="";return mn instanceof Me?(mn=typeof fe.angle=="number"?Ft(mn,new Me(1,0,0,1,kr,Dr)):Ft(new Me(1,0,0,1,kr,Dr),mn),S===w.ADVANCED&&(mn=Ft(new Me(1,0,0,-1,0,0),mn)),Tn=mn.join(" ")+` Tm
`):Tn=I(kr)+" "+I(Dr)+` Td
`,Tn},wi=0;wi<$e.length;wi++){switch(fA="",Wl){case pu:hA=(zt?"<":"(")+$e[wi][0]+(zt?">":")"),Gl=parseFloat($e[wi][1]),zl=parseFloat($e[wi][2]);break;case $l:hA=(zt?"<":"(")+$e[wi]+(zt?">":")"),Gl=ti(V),zl=Fn(le)}uA!==void 0&&uA[wi]!==void 0&&(fA=uA[wi]+` Tw
`),wi===0?v.push(fA+fh(Gl,zl,Ie)+hA):Wl===$l?v.push(fA+hA):Wl===pu&&v.push(fA+fh(Gl,zl,Ie)+hA)}v=Wl===$l?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var xi=`BT
/`;return xi+=ie+" "+Pe+` Tf
`,xi+=I(Pe*wr)+` TL
`,xi+=Ki+`
`,xi+=ir,xi+=v,J(xi+="ET"),m[ie]=!0,Je};var oh=p.__private__.clip=p.clip=function(v){return J(v==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return oh("evenodd")},p.__private__.discardPath=p.discardPath=function(){return J("n"),this};var gi=p.__private__.isValidStyle=function(v){var V=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(V=!0),V};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(v){return gi(v)&&(c=v),this};var su=p.__private__.getStyle=p.getStyle=function(v){var V=c;switch(v){case"D":case"S":V="S";break;case"F":V="f";break;case"FD":case"DF":V="B";break;case"f":case"f*":case"B":case"B*":V=v}return V},Zs=p.close=function(){return J("h"),this};p.stroke=function(){return J("S"),this},p.fill=function(v){return Zo("f",v),this},p.fillEvenOdd=function(v){return Zo("f*",v),this},p.fillStroke=function(v){return Zo("B",v),this},p.fillStrokeEvenOdd=function(v){return Zo("B*",v),this};var Zo=function(v,V){Ir(V)==="object"?tA(V,v):J(v)},Dl=function(v){v===null||S===w.ADVANCED&&v===void 0||(v=su(v),J(v))};function eA(v,V,le,fe,be){var De=new gc(V||this.boundingBox,le||this.xStep,fe||this.yStep,this.gState,be||this.matrix);De.stream=this.stream;var $e=v+"$$"+this.cloneIndex+++"$$";return ct($e,De),De}var tA=function(v,V){var le=Pr[v.key],fe=St[le];if(fe instanceof HA)J("q"),J(iu(V)),fe.gState&&p.setGState(fe.gState),J(v.matrix.toString()+" cm"),J("/"+le+" sh"),J("Q");else if(fe instanceof gc){var be=new Me(1,0,0,-1,0,ds());v.matrix&&(be=be.multiply(v.matrix||ft),le=eA.call(fe,v.key,v.boundingBox,v.xStep,v.yStep,be).id),J("q"),J("/Pattern cs"),J("/"+le+" scn"),fe.gState&&p.setGState(fe.gState),J(V),J("Q")}},iu=function(v){switch(v){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Hi=p.moveTo=function(v,V){return J(I(T(v))+" "+I(ee(V))+" m"),this},ei=p.lineTo=function(v,V){return J(I(T(v))+" "+I(ee(V))+" l"),this},Vi=p.curveTo=function(v,V,le,fe,be,De){return J([I(T(v)),I(ee(V)),I(T(le)),I(ee(fe)),I(T(be)),I(ee(De)),"c"].join(" ")),this};p.__private__.line=p.line=function(v,V,le,fe,be){if(isNaN(v)||isNaN(V)||isNaN(le)||isNaN(fe)||!gi(be))throw new Error("Invalid arguments passed to jsPDF.line");return S===w.COMPAT?this.lines([[le-v,fe-V]],v,V,[1,1],be||"S"):this.lines([[le-v,fe-V]],v,V,[1,1]).stroke()},p.__private__.lines=p.lines=function(v,V,le,fe,be,De){var $e,lt,f,C,k,X,xe,Ie,Je,Gt,ir,zt;if(typeof v=="number"&&(zt=le,le=V,V=v,v=zt),fe=fe||[1,1],De=De||!1,isNaN(V)||isNaN(le)||!Array.isArray(v)||!Array.isArray(fe)||!gi(be)||typeof De!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Hi(V,le),$e=fe[0],lt=fe[1],C=v.length,Gt=V,ir=le,f=0;f<C;f++)(k=v[f]).length===2?(Gt=k[0]*$e+Gt,ir=k[1]*lt+ir,ei(Gt,ir)):(X=k[0]*$e+Gt,xe=k[1]*lt+ir,Ie=k[2]*$e+Gt,Je=k[3]*lt+ir,Gt=k[4]*$e+Gt,ir=k[5]*lt+ir,Vi(X,xe,Ie,Je,Gt,ir));return De&&Zs(),Dl(be),this},p.path=function(v){for(var V=0;V<v.length;V++){var le=v[V],fe=le.c;switch(le.op){case"m":Hi(fe[0],fe[1]);break;case"l":ei(fe[0],fe[1]);break;case"c":Vi.apply(this,fe);break;case"h":Zs()}}return this},p.__private__.rect=p.rect=function(v,V,le,fe,be){if(isNaN(v)||isNaN(V)||isNaN(le)||isNaN(fe)||!gi(be))throw new Error("Invalid arguments passed to jsPDF.rect");return S===w.COMPAT&&(fe=-fe),J([I(T(v)),I(ee(V)),I(T(le)),I(T(fe)),"re"].join(" ")),Dl(be),this},p.__private__.triangle=p.triangle=function(v,V,le,fe,be,De,$e){if(isNaN(v)||isNaN(V)||isNaN(le)||isNaN(fe)||isNaN(be)||isNaN(De)||!gi($e))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[le-v,fe-V],[be-le,De-fe],[v-be,V-De]],v,V,[1,1],$e,!0),this},p.__private__.roundedRect=p.roundedRect=function(v,V,le,fe,be,De,$e){if(isNaN(v)||isNaN(V)||isNaN(le)||isNaN(fe)||isNaN(be)||isNaN(De)||!gi($e))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var lt=4/3*(Math.SQRT2-1);return be=Math.min(be,.5*le),De=Math.min(De,.5*fe),this.lines([[le-2*be,0],[be*lt,0,be,De-De*lt,be,De],[0,fe-2*De],[0,De*lt,-be*lt,De,-be,De],[2*be-le,0],[-be*lt,0,-be,-De*lt,-be,-De],[0,2*De-fe],[0,-De*lt,be*lt,-De,be,-De]],v+be,V,[1,1],$e,!0),this},p.__private__.ellipse=p.ellipse=function(v,V,le,fe,be){if(isNaN(v)||isNaN(V)||isNaN(le)||isNaN(fe)||!gi(be))throw new Error("Invalid arguments passed to jsPDF.ellipse");var De=4/3*(Math.SQRT2-1)*le,$e=4/3*(Math.SQRT2-1)*fe;return Hi(v+le,V),Vi(v+le,V-$e,v+De,V-fe,v,V-fe),Vi(v-De,V-fe,v-le,V-$e,v-le,V),Vi(v-le,V+$e,v-De,V+fe,v,V+fe),Vi(v+De,V+fe,v+le,V+$e,v+le,V),Dl(be),this},p.__private__.circle=p.circle=function(v,V,le,fe){if(isNaN(v)||isNaN(V)||isNaN(le)||!gi(fe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,V,le,le,fe)},p.setFont=function(v,V,le){return le&&(V=O(V,le)),ie=Za(v,V,{disableWarning:!1}),this};var Rl=p.__private__.getFont=p.getFont=function(){return Et[Za.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var v,V,le={};for(v in rt)if(rt.hasOwnProperty(v))for(V in le[v]=[],rt[v])rt[v].hasOwnProperty(V)&&le[v].push(V);return le},p.addFont=function(v,V,le,fe,be){var De=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&De.indexOf(arguments[3])!==-1?be=arguments[3]:arguments[3]&&De.indexOf(arguments[3])==-1&&(le=O(le,fe)),be=be||"Identity-H",jl.call(this,v,V,le,be)};var yr,Ol=t.lineWidth||.200025,rA=p.__private__.getLineWidth=p.getLineWidth=function(){return Ol},Ml=p.__private__.setLineWidth=p.setLineWidth=function(v){return Ol=v,J(I(T(v))+" w"),this};p.__private__.setLineDash=Dt.API.setLineDash=Dt.API.setLineDashPattern=function(v,V){if(v=v||[],V=V||0,isNaN(V)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(le){return I(T(le))}).join(" "),V=I(T(V)),J("["+v+"] "+V+" d"),this};var Hl=p.__private__.getLineHeight=p.getLineHeight=function(){return Pe*yr};p.__private__.getLineHeight=p.getLineHeight=function(){return Pe*yr};var Vl=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(yr=v),this},to=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return yr};Vl(t.lineHeight);var ti=p.__private__.getHorizontalCoordinate=function(v){return T(v)},Fn=p.__private__.getVerticalCoordinate=function(v){return S===w.ADVANCED?v:kt[L].mediaBox.topRightY-kt[L].mediaBox.bottomLeftY-T(v)},au=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(v){return I(ti(v))},Ba=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(v){return I(Fn(v))},Jn=t.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Ot(Jn)},p.__private__.setStrokeColor=p.setDrawColor=function(v,V,le,fe){return Jn=Zt({ch1:v,ch2:V,ch3:le,ch4:fe,pdfColorType:"draw",precision:2}),J(Jn),this};var nA=t.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Ot(nA)},p.__private__.setFillColor=p.setFillColor=function(v,V,le,fe){return nA=Zt({ch1:v,ch2:V,ch3:le,ch4:fe,pdfColorType:"fill",precision:2}),J(nA),this};var Ki=t.textColor||"0 g",sA=p.__private__.getTextColor=p.getTextColor=function(){return Ot(Ki)};p.__private__.setTextColor=p.setTextColor=function(v,V,le,fe){return Ki=Zt({ch1:v,ch2:V,ch3:le,ch4:fe,pdfColorType:"text",precision:3}),this};var ro=t.charSpace,iA=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(ro||0)};p.__private__.setCharSpace=p.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ro=v,this};var Kl=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(v){var V=p.CapJoinStyles[v];if(V===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Kl=V,J(V+" J"),this};var aA=0;p.__private__.setLineJoin=p.setLineJoin=function(v){var V=p.CapJoinStyles[v];if(V===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return aA=V,J(V+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return J(I(T(v))+" M"),this},p.GState=bp,p.setGState=function(v){(v=typeof v=="string"?sr[fr[v]]:Ca(null,v)).equals(fn)||(J("/"+v.id+" gs"),fn=v)};var Ca=function(v,V){if(!v||!fr[v]){var le=!1;for(var fe in sr)if(sr.hasOwnProperty(fe)&&sr[fe].equals(V)){le=!0;break}if(le)V=sr[fe];else{var be="GS"+(Object.keys(sr).length+1).toString(10);sr[be]=V,V.id=be}return v&&(fr[v]=V.id),Yt.publish("addGState",V),V}};p.addGState=function(v,V){return Ca(v,V),this},p.saveGraphicsState=function(){return J("q"),ur.push({key:ie,size:Pe,color:Ki}),this},p.restoreGraphicsState=function(){J("Q");var v=ur.pop();return ie=v.key,Pe=v.size,Ki=v.color,fn=null,this},p.setCurrentTransformationMatrix=function(v){return J(v.toString()+" cm"),this},p.comment=function(v){return J("#"+v),this};var no=function(v,V){var le=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return le},set:function(De){isNaN(De)||(le=parseFloat(De))}});var fe=V||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return fe},set:function(De){isNaN(De)||(fe=parseFloat(De))}});var be="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return be},set:function(De){be=De.toString()}}),this},oA=function(v,V,le,fe){no.call(this,v,V),this.type="rect";var be=le||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return be},set:function($e){isNaN($e)||(be=parseFloat($e))}});var De=fe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return De},set:function($e){isNaN($e)||(De=parseFloat($e))}}),this},so=function(){this.page=vr,this.currentPage=L,this.pages=Ne.slice(0),this.pagesContext=kt.slice(0),this.x=We,this.y=ot,this.matrix=yt,this.width=Na(L),this.height=ds(L),this.outputDestination=Fe,this.id="",this.objectNumber=-1};so.prototype.restore=function(){vr=this.page,L=this.currentPage,kt=this.pagesContext,Ne=this.pages,We=this.x,ot=this.y,yt=this.matrix,lA(L,this.width),cA(L,this.height),Fe=this.outputDestination};var AA=function(v,V,le,fe,be){Qe.push(new so),vr=L=0,Ne=[],We=v,ot=V,yt=be,Es([le,fe])},ou=function(v){if(mr[v])Qe.pop().restore();else{var V=new so,le="Xo"+(Object.keys($r).length+1).toString(10);V.id=le,mr[v]=le,$r[le]=V,Yt.publish("addFormObject",V),Qe.pop().restore()}};for(var qi in p.beginFormObject=function(v,V,le,fe,be){return AA(v,V,le,fe,be),this},p.endFormObject=function(v){return ou(v),this},p.doFormObject=function(v,V){var le=$r[mr[v]];return J("q"),J(V.toString()+" cm"),J("/"+le.id+" Do"),J("Q"),this},p.getFormObject=function(v){var V=$r[mr[v]];return{x:V.x,y:V.y,width:V.width,height:V.height,matrix:V.matrix}},p.save=function(v,V){return v=v||"generated.pdf",(V=V||{}).returnPromise=V.returnPromise||!1,V.returnPromise===!1?(ac(Xo(Mi()),v),typeof ac.unload=="function"&&Mt.setTimeout&&setTimeout(ac.unload,911),this):new Promise(function(le,fe){try{var be=ac(Xo(Mi()),v);typeof ac.unload=="function"&&Mt.setTimeout&&setTimeout(ac.unload,911),le(be)}catch(De){fe(De.message)}})},Dt.API)Dt.API.hasOwnProperty(qi)&&(qi==="events"&&Dt.API.events.length?function(v,V){var le,fe,be;for(be=V.length-1;be!==-1;be--)le=V[be][0],fe=V[be][1],v.subscribe.apply(v,[le].concat(typeof fe=="function"?[fe]:fe))}(Yt,Dt.API.events):p[qi]=Dt.API[qi]);var Na=p.getPageWidth=function(v){return(kt[v=v||L].mediaBox.topRightX-kt[v].mediaBox.bottomLeftX)/ve},lA=p.setPageWidth=function(v,V){kt[v].mediaBox.topRightX=V*ve+kt[v].mediaBox.bottomLeftX},ds=p.getPageHeight=function(v){return(kt[v=v||L].mediaBox.topRightY-kt[v].mediaBox.bottomLeftY)/ve},cA=p.setPageHeight=function(v,V){kt[v].mediaBox.topRightY=V*ve+kt[v].mediaBox.bottomLeftY};return p.internal={pdfEscape:An,getStyle:su,getFont:Rl,getFontSize:qe,getCharSpace:iA,getTextColor:sA,getLineHeight:Hl,getLineHeightFactor:to,getLineWidth:rA,write:Re,getHorizontalCoordinate:ti,getVerticalCoordinate:Fn,getCoordinateString:au,getVerticalCoordinateString:Ba,collections:{},newObject:Ut,newAdditionalObject:Be,newObjectDeferred:it,newObjectDeferredBegin:_t,getFilters:It,putStream:mt,events:Yt,scaleFactor:ve,pageSize:{getWidth:function(){return Na(L)},setWidth:function(v){lA(L,v)},getHeight:function(){return ds(L)},setHeight:function(v){cA(L,v)}},encryptionOptions:u,encryption:Vr,getEncryptor:nu,output:Yo,getNumberOfPages:br,pages:Ne,out:J,f2:D,f3:_,getPageInfo:kl,getPageInfoByObjId:Vt,getCurrentPageInfo:ba,getPDFVersion:B,Point:no,Rectangle:oA,Matrix:Me,hasHotfix:xa},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Na(L)},set:function(v){lA(L,v)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return ds(L)},set:function(v){cA(L,v)},enumerable:!0,configurable:!0}),tu.call(p,Ue),ie="F1",Ya(s,r),Yt.publish("initialized"),p}zu.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},zu.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},zu.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},zu.prototype.processOwnerPassword=function(t,e){return ax(ix(e).substr(0,5),t)},zu.prototype.encryptor=function(t,e){var r=ix(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return ax(r,n)}},bp.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||Ir(t)!==Ir(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},Dt.API={events:[]},Dt.version="3.0.1";var un=Dt.API,EB=1,Wc=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Pu=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},$t=function(t){return t.toFixed(2)},IA=function(t){return t.toFixed(5)};un.__acroform__={};var Ys=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},h_=function(t){return t*EB},Ta=function(t){var e=new I3,r=bt.internal.getHeight(t)||0,n=bt.internal.getWidth(t)||0;return e.BBox=[0,0,Number($t(n)),Number($t(r))],e},Fz=un.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},Tz=un.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},Uz=un.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},wn=un.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Uz(t,e-1)},xn=un.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Fz(t,e-1)},bn=un.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Tz(t,e-1)},Pz=un.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,s=t[0],i=t[1],a=t[2],A=t[3],l={};return l.lowerLeft_X=r(s)||0,l.lowerLeft_Y=n(i+A)||0,l.upperRight_X=r(s+a)||0,l.upperRight_Y=n(i)||0,[Number($t(l.lowerLeft_X)),Number($t(l.lowerLeft_Y)),Number($t(l.upperRight_X)),Number($t(l.upperRight_Y))]},Qz=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=ox(t,r),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+$t(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=Ta(t);return i.scope=t.scope,i.stream=e.join(`
`),i}},ox=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(_){return _.split(`
`)}):s.map(function(_){return[_]});var i=r,a=bt.internal.getHeight(t)||0;a=a<0?-a:a;var A=bt.internal.getWidth(t)||0;A=A<0?-A:A;var l=function(_,T,P){if(_+1<s.length){var ee=T+" "+s[_+1][0];return hg(ee,t,P).width<=A-4}return!1};i++;e:for(;i>0;){e="",i--;var c,u,h=hg("3",t,i).height,m=t.multiline?a-i:(a-h)/2,p=m+=2,b=0,B=0,E=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+hg(e,t,i=12).width+", FieldWidth:"+A+`
`;break}for(var y="",w=0,S=0;S<s.length;S++)if(s.hasOwnProperty(S)){var M=!1;if(s[S].length!==1&&E!==s[S].length-1){if((h+2)*(w+2)+2>a)continue e;y+=s[S][E],M=!0,B=S,S--}else{y=(y+=s[S][E]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var R=parseInt(S),O=l(R,y,i),I=S>=s.length-1;if(O&&!I){y+=" ",E=0;continue}if(O||I){if(I)B=R;else if(t.multiline&&(h+2)*(w+2)+2>a)continue e}else{if(!t.multiline||(h+2)*(w+2)+2>a)continue e;B=R}}for(var N="",j=b;j<=B;j++){var D=s[j];if(t.multiline){if(j===B){N+=D[E]+" ",E=(E+1)%D.length;continue}if(j===b){N+=D[D.length-1]+" ";continue}}N+=D[0]+" "}switch(N=N.substr(N.length-1)==" "?N.substr(0,N.length-1):N,u=hg(N,t,i).width,t.textAlign){case"right":c=A-u-2;break;case"center":c=(A-u)/2;break;case"left":default:c=2}e+=$t(c)+" "+$t(p)+` Td
`,e+="("+Wc(N)+`) Tj
`,e+=-$t(c)+` 0 Td
`,p=-(i+2),u=0,b=M?B:B+1,w++,y=""}break}return n.text=e,n.fontSize=i,n},hg=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},jz={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Lz=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},kz=function(t,e){for(var r in t)if(t.hasOwnProperty(r)){var n=r,s=t[r];e.internal.newObjectDeferredBegin(s.objId,!0),Ir(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete t[n]}},Dz=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(fa.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(jz)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");EB=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new S3,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var i=n[s];i.objId=void 0,i.hasAnnotation&&Lz(i,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,s){var i=!n;for(var a in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(a)){var A=n[a],l=[],c=A.Rect;if(A.Rect&&(A.Rect=Pz(A.Rect,s)),s.internal.newObjectDeferredBegin(A.objId,!0),A.DA=bt.createDefaultAppearanceStream(A),Ir(A)==="object"&&typeof A.getKeyValueListForStream=="function"&&(l=A.getKeyValueListForStream()),A.Rect=c,A.hasAppearanceStream&&!A.appearanceStreamContent){var u=Qz(A);l.push({key:"AP",value:"<</N "+u+">>"}),s.internal.acroformPlugin.xForms.push(u)}if(A.appearanceStreamContent){var h="";for(var m in A.appearanceStreamContent)if(A.appearanceStreamContent.hasOwnProperty(m)){var p=A.appearanceStreamContent[m];if(h+="/"+m+" ",h+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var a in p)if(p.hasOwnProperty(a)){var b=p[a];typeof b=="function"&&(b=b.call(s,A)),h+="/"+a+" "+b+" ",s.internal.acroformPlugin.xForms.indexOf(b)>=0||s.internal.acroformPlugin.xForms.push(b)}}else typeof(b=p)=="function"&&(b=b.call(s,A)),h+="/"+a+" "+b,s.internal.acroformPlugin.xForms.indexOf(b)>=0||s.internal.acroformPlugin.xForms.push(b);h+=">>"}l.push({key:"AP",value:`<<
`+h+">>"})}s.internal.putStream({additionalKeyValues:l,objectId:A.objId}),s.internal.out("endobj")}i&&kz(s.internal.acroformPlugin.xForms,s)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},_3=un.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(a){return a};if(Array.isArray(t)){for(var s="[",i=0;i<t.length;i++)switch(i!==0&&(s+=" "),Ir(t[i])){case"boolean":case"number":case"object":s+=t[i].toString();break;case"string":t[i].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),s+="("+Wc(n(t[i].toString()))+")"):s+=t[i].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Ww=function(t,e,r){var n=function(s){return s};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Wc(n(t))+")"},ka=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ka.prototype.toString=function(){return this.objId+" 0 R"},ka.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},ka.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],s=this[n];s&&(Array.isArray(s)?t.push({key:n,value:_3(s,this.objId,this.scope)}):s instanceof ka?(s.scope=this.scope,t.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:n,value:s}))}return t};var I3=function(){ka.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};Ys(I3,ka);var S3=function(){ka.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Wc(r(t))+")"}},set:function(r){t=r}})};Ys(S3,ka);var fa=function t(){ka.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');e=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!wn(e,3)},set:function(y){y?this.F=xn(e,3):this.F=bn(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof nv)return;i="FieldObject"+t.FieldNum++}var y=function(w){return w};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+Wc(y(i))+")"},set:function(y){i=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(y){i=y}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(y){a=y}});var A="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return A},set:function(y){A=y}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/EB:c},set:function(y){c=y}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(y){u=y}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof nv||this instanceof ul))return Ww(h,this.objId,this.scope)},set:function(y){y=y.toString(),h=y}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Qn?m:Ww(m,this.objId,this.scope)},set:function(y){y=y.toString(),m=this instanceof Qn?y:y.substr(0,1)==="("?Pu(y.substr(1,y.length-2)):Pu(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Qn?Pu(m.substr(1,m.length-1)):m},set:function(y){y=y.toString(),m=this instanceof Qn?"/"+y:y}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Qn?p:Ww(p,this.objId,this.scope)},set:function(y){y=y.toString(),p=this instanceof Qn?y:y.substr(0,1)==="("?Pu(y.substr(1,y.length-2)):Pu(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Qn?Pu(p.substr(1,p.length-1)):p},set:function(y){y=y.toString(),p=this instanceof Qn?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,B=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return B},set:function(y){y=!!y,B=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(y){b=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,1)},set:function(y){y?this.Ff=xn(this.Ff,1):this.Ff=bn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,2)},set:function(y){y?this.Ff=xn(this.Ff,2):this.Ff=bn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,3)},set:function(y){y?this.Ff=xn(this.Ff,3):this.Ff=bn(this.Ff,3)}});var E=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(E!==null)return E},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');E=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(E){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:E=2;break;case"center":case 1:E=1;break;case"left":case 0:default:E=0}}})};Ys(fa,ka);var Bc=function(){fa.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return _3(e,this.objId,this.scope)},set:function(r){var n,s;s=[],typeof(n=r)=="string"&&(s=function(i,a,A){A||(A=1);for(var l,c=[];l=a.exec(i);)c.push(l[A]);return c}(n,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,18)},set:function(r){r?this.Ff=xn(this.Ff,18):this.Ff=bn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=xn(this.Ff,19):this.Ff=bn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,20)},set:function(r){r?(this.Ff=xn(this.Ff,20),e.sort()):this.Ff=bn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,22)},set:function(r){r?this.Ff=xn(this.Ff,22):this.Ff=bn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,23)},set:function(r){r?this.Ff=xn(this.Ff,23):this.Ff=bn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,27)},set:function(r){r?this.Ff=xn(this.Ff,27):this.Ff=bn(this.Ff,27)}}),this.hasAppearanceStream=!1};Ys(Bc,fa);var Cc=function(){Bc.call(this),this.fontName="helvetica",this.combo=!1};Ys(Cc,Bc);var Nc=function(){Cc.call(this),this.combo=!0};Ys(Nc,Cc);var Pf=function(){Nc.call(this),this.edit=!0};Ys(Pf,Nc);var Qn=function(){fa.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,15)},set:function(r){r?this.Ff=xn(this.Ff,15):this.Ff=bn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,16)},set:function(r){r?this.Ff=xn(this.Ff,16):this.Ff=bn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,17)},set:function(r){r?this.Ff=xn(this.Ff,17):this.Ff=bn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,26)},set:function(r){r?this.Ff=xn(this.Ff,26):this.Ff=bn(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,s=[];for(n in s.push("<<"),e)s.push("/"+n+" ("+Wc(r(e[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){Ir(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};Ys(Qn,fa);var Qf=function(){Qn.call(this),this.pushButton=!0};Ys(Qf,Qn);var Ec=function(){Qn.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Ys(Ec,Qn);var nv=function(){var t,e;fa.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(A){return A};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,a=[];for(i in a.push("<<"),n)a.push("/"+i+" ("+Wc(s(n[i]))+")");return a.push(">>"),a.join(`
`)},set:function(s){Ir(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=bt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ys(nv,fa),Ec.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},Ec.prototype.createOption=function(t){var e=new nv;return e.Parent=this,e.optionName=t,this.Kids.push(e),Rz.call(this.scope,e),e};var jf=function(){Qn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=bt.CheckBox.createAppearanceStream()};Ys(jf,Qn);var ul=function(){fa.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,13)},set:function(e){e?this.Ff=xn(this.Ff,13):this.Ff=bn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,21)},set:function(e){e?this.Ff=xn(this.Ff,21):this.Ff=bn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,23)},set:function(e){e?this.Ff=xn(this.Ff,23):this.Ff=bn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,24)},set:function(e){e?this.Ff=xn(this.Ff,24):this.Ff=bn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,25)},set:function(e){e?this.Ff=xn(this.Ff,25):this.Ff=bn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,26)},set:function(e){e?this.Ff=xn(this.Ff,26):this.Ff=bn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ys(ul,fa);var Lf=function(){ul.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!wn(this.Ff,14)},set:function(t){t?this.Ff=xn(this.Ff,14):this.Ff=bn(this.Ff,14)}}),this.password=!0};Ys(Lf,ul);var bt={CheckBox:{createAppearanceStream:function(){return{N:{On:bt.CheckBox.YesNormal},D:{On:bt.CheckBox.YesPushDown,Off:bt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Ta(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),i=ox(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+$t(bt.internal.getWidth(t))+" "+$t(bt.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+$t(i.fontSize)+" Tf "+s),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=Ta(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),s=[],i=bt.internal.getHeight(t),a=bt.internal.getWidth(t),A=ox(t,t.caption);return s.push("1 g"),s.push("0 0 "+$t(a)+" "+$t(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+$t(a-1)+" "+$t(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+$t(A.fontSize)+" Tf "+n),s.push(A.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=Ta(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+$t(bt.internal.getWidth(t))+" "+$t(bt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:bt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=bt.RadioButton.Circle.YesNormal,e.D[t]=bt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Ta(t);e.scope=t.scope;var r=[],n=bt.internal.getWidth(t)<=bt.internal.getHeight(t)?bt.internal.getWidth(t)/4:bt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=bt.internal.Bezier_C,i=Number((n*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+IA(bt.internal.getWidth(t)/2)+" "+IA(bt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Ta(t);e.scope=t.scope;var r=[],n=bt.internal.getWidth(t)<=bt.internal.getHeight(t)?bt.internal.getWidth(t)/4:bt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*bt.internal.Bezier_C).toFixed(5)),a=Number((n*bt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+IA(bt.internal.getWidth(t)/2)+" "+IA(bt.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+IA(bt.internal.getWidth(t)/2)+" "+IA(bt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Ta(t);e.scope=t.scope;var r=[],n=bt.internal.getWidth(t)<=bt.internal.getHeight(t)?bt.internal.getWidth(t)/4:bt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*bt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+IA(bt.internal.getWidth(t)/2)+" "+IA(bt.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:bt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=bt.RadioButton.Cross.YesNormal,e.D[t]=bt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Ta(t);e.scope=t.scope;var r=[],n=bt.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+$t(bt.internal.getWidth(t)-2)+" "+$t(bt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push($t(n.x1.x)+" "+$t(n.x1.y)+" m"),r.push($t(n.x2.x)+" "+$t(n.x2.y)+" l"),r.push($t(n.x4.x)+" "+$t(n.x4.y)+" m"),r.push($t(n.x3.x)+" "+$t(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Ta(t);e.scope=t.scope;var r=bt.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+$t(bt.internal.getWidth(t))+" "+$t(bt.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+$t(bt.internal.getWidth(t)-2)+" "+$t(bt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push($t(r.x1.x)+" "+$t(r.x1.y)+" m"),n.push($t(r.x2.x)+" "+$t(r.x2.y)+" l"),n.push($t(r.x4.x)+" "+$t(r.x4.y)+" m"),n.push($t(r.x3.x)+" "+$t(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Ta(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+$t(bt.internal.getWidth(t))+" "+$t(bt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};bt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=bt.internal.getWidth(t),r=bt.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},bt.internal.getWidth=function(t){var e=0;return Ir(t)==="object"&&(e=h_(t.Rect[2])),e},bt.internal.getHeight=function(t){var e=0;return Ir(t)==="object"&&(e=h_(t.Rect[3])),e};var Rz=un.addField=function(t){if(Dz(this,t),!(t instanceof fa))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};un.AcroFormChoiceField=Bc,un.AcroFormListBox=Cc,un.AcroFormComboBox=Nc,un.AcroFormEditBox=Pf,un.AcroFormButton=Qn,un.AcroFormPushButton=Qf,un.AcroFormRadioButton=Ec,un.AcroFormCheckBox=jf,un.AcroFormTextField=ul,un.AcroFormPasswordField=Lf,un.AcroFormAppearance=bt,un.AcroForm={ChoiceField:Bc,ListBox:Cc,ComboBox:Nc,EditBox:Pf,Button:Qn,PushButton:Qf,RadioButton:Ec,CheckBox:jf,TextField:ul,PasswordField:Lf,Appearance:bt},Dt.AcroForm={ChoiceField:Bc,ListBox:Cc,ComboBox:Nc,EditBox:Pf,Button:Qn,PushButton:Qf,RadioButton:Ec,CheckBox:jf,TextField:ul,PasswordField:Lf,Appearance:bt};var Oz=Dt.AcroForm;function F3(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=t.__addimage__.getImageFileTypeByImageData=function(_,T){var P,ee,Ae,ue,he,te=e;if((T=T||e)==="RGBA"||_.data!==void 0&&_.data instanceof Uint8ClampedArray&&"height"in _&&"width"in _)return"RGBA";if(O(_))for(he in r)for(Ae=r[he],P=0;P<Ae.length;P+=1){for(ue=!0,ee=0;ee<Ae[P].length;ee+=1)if(Ae[P][ee]!==void 0&&Ae[P][ee]!==_[ee]){ue=!1;break}if(ue===!0){te=he;break}}else for(he in r)for(Ae=r[he],P=0;P<Ae.length;P+=1){for(ue=!0,ee=0;ee<Ae[P].length;ee+=1)if(Ae[P][ee]!==void 0&&Ae[P][ee]!==_.charCodeAt(ee)){ue=!1;break}if(ue===!0){te=he;break}}return te===e&&T!==e&&(te=T),te},s=function _(T){for(var P=this.internal.write,ee=this.internal.putStream,Ae=(0,this.internal.getFilters)();Ae.indexOf("FlateEncode")!==-1;)Ae.splice(Ae.indexOf("FlateEncode"),1);T.objectId=this.internal.newObject();var ue=[];if(ue.push({key:"Type",value:"/XObject"}),ue.push({key:"Subtype",value:"/Image"}),ue.push({key:"Width",value:T.width}),ue.push({key:"Height",value:T.height}),T.colorSpace===E.INDEXED?ue.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(T.palette.length/3-1)+" "+("sMask"in T&&T.sMask!==void 0?T.objectId+2:T.objectId+1)+" 0 R]"}):(ue.push({key:"ColorSpace",value:"/"+T.colorSpace}),T.colorSpace===E.DEVICE_CMYK&&ue.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ue.push({key:"BitsPerComponent",value:T.bitsPerComponent}),"decodeParameters"in T&&T.decodeParameters!==void 0&&ue.push({key:"DecodeParms",value:"<<"+T.decodeParameters+">>"}),"transparency"in T&&Array.isArray(T.transparency)){for(var he="",te=0,se=T.transparency.length;te<se;te++)he+=T.transparency[te]+" "+T.transparency[te]+" ";ue.push({key:"Mask",value:"["+he+"]"})}T.sMask!==void 0&&ue.push({key:"SMask",value:T.objectId+1+" 0 R"});var ne=T.filter!==void 0?["/"+T.filter]:void 0;if(ee({data:T.data,additionalKeyValues:ue,alreadyAppliedFilters:ne,objectId:T.objectId}),P("endobj"),"sMask"in T&&T.sMask!==void 0){var ye="/Predictor "+T.predictor+" /Colors 1 /BitsPerComponent "+T.bitsPerComponent+" /Columns "+T.width,F={width:T.width,height:T.height,colorSpace:"DeviceGray",bitsPerComponent:T.bitsPerComponent,decodeParameters:ye,data:T.sMask};"filter"in T&&(F.filter=T.filter),_.call(this,F)}if(T.colorSpace===E.INDEXED){var L=this.internal.newObject();ee({data:N(new Uint8Array(T.palette)),objectId:L}),P("endobj")}},i=function(){var _=this.internal.collections.addImage_images;for(var T in _)s.call(this,_[T])},a=function(){var _,T=this.internal.collections.addImage_images,P=this.internal.write;for(var ee in T)P("/I"+(_=T[ee]).index,_.objectId,"0","R")},A=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var _=this.internal.collections.addImage_images;return A.call(this),_},c=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(_){return typeof t["process"+_.toUpperCase()]=="function"},h=function(_){return Ir(_)==="object"&&_.nodeType===1},m=function(_,T){if(_.nodeName==="IMG"&&_.hasAttribute("src")){var P=""+_.getAttribute("src");if(P.indexOf("data:image/")===0)return Uf(unescape(P).split("base64,").pop());var ee=t.loadFile(P,!0);if(ee!==void 0)return ee}if(_.nodeName==="CANVAS"){if(_.width===0||_.height===0)throw new Error("Given canvas must have data. Canvas width: "+_.width+", height: "+_.height);var Ae;switch(T){case"PNG":Ae="image/png";break;case"WEBP":Ae="image/webp";break;case"JPEG":case"JPG":default:Ae="image/jpeg"}return Uf(_.toDataURL(Ae,1).split("base64,").pop())}},p=function(_){var T=this.internal.collections.addImage_images;if(T){for(var P in T)if(_===T[P].alias)return T[P]}},b=function(_,T,P){return _||T||(_=-96,T=-96),_<0&&(_=-1*P.width*72/_/this.internal.scaleFactor),T<0&&(T=-1*P.height*72/T/this.internal.scaleFactor),_===0&&(_=T*P.width/P.height),T===0&&(T=_*P.height/P.width),[_,T]},B=function(_,T,P,ee,Ae,ue){var he=b.call(this,P,ee,Ae),te=this.internal.getCoordinateString,se=this.internal.getVerticalCoordinateString,ne=l.call(this);if(P=he[0],ee=he[1],ne[Ae.index]=Ae,ue){ue*=Math.PI/180;var ye=Math.cos(ue),F=Math.sin(ue),L=function(q){return q.toFixed(4)},W=[L(ye),L(F),L(-1*F),L(ye),0,0,"cm"]}this.internal.write("q"),ue?(this.internal.write([1,"0","0",1,te(_),se(T+ee),"cm"].join(" ")),this.internal.write(W.join(" ")),this.internal.write([te(P),"0","0",te(ee),"0","0","cm"].join(" "))):this.internal.write([te(P),"0","0",te(ee),te(_),se(T+ee),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Ae.index+" Do"),this.internal.write("Q")},E=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=t.__addimage__.sHashCode=function(_){var T,P,ee=0;if(typeof _=="string")for(P=_.length,T=0;T<P;T++)ee=(ee<<5)-ee+_.charCodeAt(T),ee|=0;else if(O(_))for(P=_.byteLength/2,T=0;T<P;T++)ee=(ee<<5)-ee+_[T],ee|=0;return ee},S=t.__addimage__.validateStringAsBase64=function(_){(_=_||"").toString().trim();var T=!0;return _.length===0&&(T=!1),_.length%4!=0&&(T=!1),/^[A-Za-z0-9+/]+$/.test(_.substr(0,_.length-2))===!1&&(T=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(_.substr(-2))===!1&&(T=!1),T},M=t.__addimage__.extractImageFromDataUrl=function(_){if(_==null||!(_=_.trim()).startsWith("data:"))return null;var T=_.indexOf(",");return T<0?null:_.substring(0,T).trim().endsWith("base64")?_.substring(T+1):null},R=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(_){return R()&&_ instanceof ArrayBuffer};var O=t.__addimage__.isArrayBufferView=function(_){return R()&&typeof Uint32Array<"u"&&(_ instanceof Int8Array||_ instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&_ instanceof Uint8ClampedArray||_ instanceof Int16Array||_ instanceof Uint16Array||_ instanceof Int32Array||_ instanceof Uint32Array||_ instanceof Float32Array||_ instanceof Float64Array)},I=t.__addimage__.binaryStringToUint8Array=function(_){for(var T=_.length,P=new Uint8Array(T),ee=0;ee<T;ee++)P[ee]=_.charCodeAt(ee);return P},N=t.__addimage__.arrayBufferToBinaryString=function(_){for(var T="",P=O(_)?_:new Uint8Array(_),ee=0;ee<P.length;ee+=8192)T+=String.fromCharCode.apply(null,P.subarray(ee,ee+8192));return T};t.addImage=function(){var _,T,P,ee,Ae,ue,he,te,se;if(typeof arguments[1]=="number"?(T=e,P=arguments[1],ee=arguments[2],Ae=arguments[3],ue=arguments[4],he=arguments[5],te=arguments[6],se=arguments[7]):(T=arguments[1],P=arguments[2],ee=arguments[3],Ae=arguments[4],ue=arguments[5],he=arguments[6],te=arguments[7],se=arguments[8]),Ir(_=arguments[0])==="object"&&!h(_)&&"imageData"in _){var ne=_;_=ne.imageData,T=ne.format||T||e,P=ne.x||P||0,ee=ne.y||ee||0,Ae=ne.w||ne.width||Ae,ue=ne.h||ne.height||ue,he=ne.alias||he,te=ne.compression||te,se=ne.rotation||ne.angle||se}var ye=this.internal.getFilters();if(te===void 0&&ye.indexOf("FlateEncode")!==-1&&(te="SLOW"),isNaN(P)||isNaN(ee))throw new Error("Invalid coordinates passed to jsPDF.addImage");A.call(this);var F=j.call(this,_,T,he,te);return B.call(this,P,ee,Ae,ue,F,se),this};var j=function(_,T,P,ee){var Ae,ue,he;if(typeof _=="string"&&n(_)===e){_=unescape(_);var te=D(_,!1);(te!==""||(te=t.loadFile(_,!0))!==void 0)&&(_=te)}if(h(_)&&(_=m(_,T)),T=n(_,T),!u(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(((he=P)==null||he.length===0)&&(P=function(se){return typeof se=="string"||O(se)?w(se):O(se.data)?w(se.data):null}(_)),(Ae=p.call(this,P))||(R()&&(_ instanceof Uint8Array||T==="RGBA"||(ue=_,_=I(_))),Ae=this["process"+T.toUpperCase()](_,c.call(this),P,function(se){return se&&typeof se=="string"&&(se=se.toUpperCase()),se in t.image_compression?se:y.NONE}(ee),ue)),!Ae)throw new Error("An unknown error occurred whilst processing the image.");return Ae},D=t.__addimage__.convertBase64ToBinaryString=function(_,T){T=typeof T!="boolean"||T;var P,ee="";if(typeof _=="string"){var Ae;P=(Ae=M(_))!==null&&Ae!==void 0?Ae:_;try{ee=Uf(P)}catch(ue){if(T)throw S(P)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ue.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ee};t.getImageProperties=function(_){var T,P,ee="";if(h(_)&&(_=m(_)),typeof _=="string"&&n(_)===e&&((ee=D(_,!1))===""&&(ee=t.loadFile(_)||""),_=ee),P=n(_),!u(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if(!R()||_ instanceof Uint8Array||(_=I(_)),!(T=this["process"+P.toUpperCase()](_)))throw new Error("An unknown error occurred whilst processing the image");return T.fileType=P,T}})(Dt.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};Dt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,s,i,a=this.internal.getCoordinateString,A=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(r.objId),c=r.pageContext.annotations,u=!1,h=0;h<c.length&&!u;h++)switch((n=c[h]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var m=0;m<c.length;m++){n=c[m];var p=this.internal.pdfEscape,b=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var B=this.internal.newAdditionalObject(),E=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(B.objId),w=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+a(n.bounds.x)+" "+A(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w)+" "+A(n.bounds.y)+"] ")+"/Contents ("+p(y(n.contents))+")",i+=" /Popup "+E.objId+" 0 R",i+=" /P "+l.objId+" 0 R",i+=" /T ("+p(y(w))+") >>",B.content=i;var S=B.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+a(n.bounds.x+30)+" "+A(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w+30)+" "+A(n.bounds.y)+"] ")+" /Parent "+S,n.open&&(i+=" /Open true"),i+=" >>",E.content=i,this.internal.write(B.objId,"0 R",E.objId,"0 R");break;case"freetext":s="/Rect ["+a(n.bounds.x)+" "+A(n.bounds.y)+" "+a(n.bounds.x+n.bounds.w)+" "+A(n.bounds.y+n.bounds.h)+"] ";var M=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+p(b(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+M+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var R=this.annotations._nameMap[n.options.name];n.options.pageNumber=R.page,n.options.top=R.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+p(b(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var O=A(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+O+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,s,i,a){var A=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;A.pageContext.annotations.push({finalBounds:{x:l(r),y:c(n),w:l(r+s),h:c(n+i)},options:a,type:"link"})},t.textWithLink=function(r,n,s,i){var a,A,l=this.getTextWidth(r),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){A=i.maxWidth;var u=this.splitTextToSize(r,A).length;a=Math.ceil(c*u)}else A=l,a=c;return this.text(r,n,s,i),s+=.2*c,i.align==="center"&&(n-=l/2),i.align==="right"&&(n-=l),this.link(n,s-c,A,a,i),l},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Dt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var i=t.__arabicParser__.isInArabicSubstitutionA=function(B){return e[B.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(B){return typeof B=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(B)},A=t.__arabicParser__.isArabicEndLetter=function(B){return a(B)&&i(B)&&e[B.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(B){return a(B)&&s.indexOf(B.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(B){return a(B)&&i(B)&&e[B.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(B){return a(B)&&i(B)&&e[B.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(B){return a(B)&&i(B)&&e[B.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(B){return a(B)&&i(B)&&e[B.charCodeAt(0)].length==4},h=t.__arabicParser__.resolveLigatures=function(B){var E=0,y=r,w="",S=0;for(E=0;E<B.length;E+=1)y[B.charCodeAt(E)]!==void 0?(S++,typeof(y=y[B.charCodeAt(E)])=="number"&&(w+=String.fromCharCode(y),y=r,S=0),E===B.length-1&&(y=r,w+=B.charAt(E-(S-1)),E-=S-1,S=0)):(y=r,w+=B.charAt(E-S),E-=S,S=0);return w};t.__arabicParser__.isArabicDiacritic=function(B){return B!==void 0&&n[B.charCodeAt(0)]!==void 0};var m=t.__arabicParser__.getCorrectForm=function(B,E,y){return a(B)?i(B)===!1?-1:!c(B)||!a(E)&&!a(y)||!a(y)&&A(E)||A(B)&&!a(E)||A(B)&&l(E)||A(B)&&A(E)?0:u(B)&&a(E)&&!A(E)&&a(y)&&c(y)?3:A(B)||!a(y)?1:2:-1},p=function(B){var E=0,y=0,w=0,S="",M="",R="",O=(B=B||"").split("\\s+"),I=[];for(E=0;E<O.length;E+=1){for(I.push(""),y=0;y<O[E].length;y+=1)S=O[E][y],M=O[E][y-1],R=O[E][y+1],a(S)?(w=m(S,M,R),I[E]+=w!==-1?String.fromCharCode(e[S.charCodeAt(0)][w]):S):I[E]+=S;I[E]=h(I[E])}return I.join(" ")},b=t.__arabicParser__.processArabic=t.processArabic=function(){var B,E=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(E)){var w=0;for(y=[],w=0;w<E.length;w+=1)Array.isArray(E[w])?y.push([p(E[w][0]),E[w][1],E[w][2]]):y.push([p(E[w])]);B=y}else B=p(E);return typeof arguments[0]=="string"?B:(arguments[0].text=B,arguments[0])};t.events.push(["preProcessText",b])}(Dt.API),Dt.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(A){r=A}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(A){n=isNaN(A)||Number.isInteger(A)===!1||A<0?150:A,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(A){s=isNaN(A)||Number.isInteger(A)===!1||A<0?300:A,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(A){i=A}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(A){a=A}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var s;if((r=r||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Dt.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(B){l=B}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(B){c=B}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(B){u=B}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(B){h=B}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(B){m=B}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(B){p=B}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(B){b=B}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){n.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),h=c.font||this.getFont(),m=c.scaleFactor||this.internal.scaleFactor,p=0,b=0,B=0,E=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var y=c.maxWidth;y>0?typeof l=="string"?l=this.splitTextToSize(l,y):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(S,M){return S.concat(E.splitTextToSize(M,y))},[])):l=Array.isArray(l)?l:[l];for(var w=0;w<l.length;w++)p<(B=this.getStringUnitWidth(l[w],{font:h})*u)&&(p=B);return p!==0&&(b=l.length),{w:p/=m,h:Math.max((b*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/m,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var l;l=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=h.top,p&&m&&(this.printHeaderRow(l.lineNumber,!0),l.y+=m[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,r===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,u,h,m){if(n.call(this),!u)throw new Error("No data for PDF table.");var p,b,B,E,y=[],w=[],S=[],M={},R={},O=[],I=[],N=(m=m||{}).autoSize||!1,j=m.printHeaders!==!1,D=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,_=m.margins||Object.assign({width:this.getPageWidth()},e),T=typeof m.padding=="number"?m.padding:3,P=m.headerBackgroundColor||"#c8c8c8",ee=m.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=j,this.internal.__cell__.margins=_,this.internal.__cell__.table_font_size=D,this.internal.__cell__.padding=T,this.internal.__cell__.headerBackgroundColor=P,this.internal.__cell__.headerTextColor=ee,this.setFontSize(D),h==null)w=y=Object.keys(u[0]),S=y.map(function(){return"left"});else if(Array.isArray(h)&&Ir(h[0])==="object")for(y=h.map(function(ne){return ne.name}),w=h.map(function(ne){return ne.prompt||ne.name||""}),S=h.map(function(ne){return ne.align||"left"}),p=0;p<h.length;p+=1)R[h[p].name]=h[p].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(w=y=h,S=y.map(function(){return"left"}));if(N||Array.isArray(h)&&typeof h[0]=="string")for(p=0;p<y.length;p+=1){for(M[E=y[p]]=u.map(function(ne){return ne[E]}),this.setFont(void 0,"bold"),O.push(this.getTextDimensions(w[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=M[E],this.setFont(void 0,"normal"),B=0;B<b.length;B+=1)O.push(this.getTextDimensions(b[B],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);R[E]=Math.max.apply(null,O)+T+T,O=[]}if(j){var Ae={};for(p=0;p<y.length;p+=1)Ae[y[p]]={},Ae[y[p]].text=w[p],Ae[y[p]].align=S[p];var ue=A.call(this,Ae,R);I=y.map(function(ne){return new i(l,c,R[ne],ue,Ae[ne].text,void 0,Ae[ne].align)}),this.setTableHeaderRow(I),this.printHeaderRow(1,!1)}var he=h.reduce(function(ne,ye){return ne[ye.name]=ye.align,ne},{});for(p=0;p<u.length;p+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:p,data:u[p]},this);var te=A.call(this,u[p],R);for(B=0;B<y.length;B+=1){var se=u[p][y[B]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:p,col:B,data:se},this),a.call(this,new i(l,c,R[y[B]],te,se,p+2,he[y[B]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var A=function(l,c){var u=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(l).map(function(p){var b=l[p];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,c[p]-u-u)},this).map(function(p){return this.getLineHeightFactor()*p.length*h/m+u+u},this).reduce(function(p,b){return Math.max(p,b)},0)};t.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){u=this.internal.__cell__.tableHeaderRow[p].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,m.push(u)),u.lineNumber=l;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,u),this.setTextColor(b)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),r=!1}}(Dt.API);var T3={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},U3=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ax=F3(U3),P3=[100,200,300,400,500,600,700,800,900],Mz=F3(P3);function lx(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return T3[i=i||"normal"]?i:"normal"}(t.style),n=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(t.weight),s=function(i){return typeof Ax[i=i||"normal"]=="number"?i:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,r,n].join(" ")}}}function f_(t,e,r,n){var s;for(s=r;s>=0&&s<e.length;s+=n)if(t[e[s]])return t[e[s]];for(s=r;s>=0&&s<e.length;s-=n)if(t[e[s]])return t[e[s]]}var Hz={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},p_={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function m_(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Vz(t,e,r){for(var n=(r=r||{}).defaultFontFamily||"times",s=Object.assign({},Hz,r.genericFontFamilies||{}),i=null,a=null,A=0;A<e.length;++A)if(s[(i=lx(e[A])).family]&&(i.family=s[i.family]),t.hasOwnProperty(i.family)){a=t[i.family];break}if(!(a=a||t[n]))throw new Error("Could not find a font-family for the rule '"+m_(i)+"' and default family '"+n+"'.");if(a=function(l,c){if(c[l])return c[l];var u=Ax[l],h=u<=Ax.normal?-1:1,m=f_(c,U3,u,h);if(!m)throw new Error("Could not find a matching font-stretch value for "+l);return m}(i.stretch,a),a=function(l,c){if(c[l])return c[l];for(var u=T3[l],h=0;h<u.length;++h)if(c[u[h]])return c[u[h]];throw new Error("Could not find a matching font-style for "+l)}(i.style,a),!(a=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var u=Mz[l],h=f_(c,P3,u,l<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+l);return h}(i.weight,a)))throw new Error("Failed to resolve a font for the rule '"+m_(i)+"'.");return a}function g_(t){return t.trimLeft()}function Kz(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function qz(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var fg,v_,y_,Jw=["times"];(function(t){var e,r,n,s,i,a,A,l,c,u=function(F){return F=F||{},this.isStrokeTransparent=F.isStrokeTransparent||!1,this.strokeOpacity=F.strokeOpacity||1,this.strokeStyle=F.strokeStyle||"#000000",this.fillStyle=F.fillStyle||"#000000",this.isFillTransparent=F.isFillTransparent||!1,this.fillOpacity=F.fillOpacity||1,this.font=F.font||"10px sans-serif",this.textBaseline=F.textBaseline||"alphabetic",this.textAlign=F.textAlign||"left",this.lineWidth=F.lineWidth||1,this.lineJoin=F.lineJoin||"miter",this.lineCap=F.lineCap||"butt",this.path=F.path||[],this.transform=F.transform!==void 0?F.transform.clone():new l,this.globalCompositeOperation=F.globalCompositeOperation||"normal",this.globalAlpha=F.globalAlpha||1,this.clip_path=F.clip_path||[],this.currentPoint=F.currentPoint||new a,this.miterLimit=F.miterLimit||10,this.lastPoint=F.lastPoint||new a,this.lineDashOffset=F.lineDashOffset||0,this.lineDash=F.lineDash||[],this.margin=F.margin||[0,0,0,0],this.prevPageLastElemOffset=F.prevPageLastElemOffset||0,this.ignoreClearRect=typeof F.ignoreClearRect!="boolean"||F.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,a=this.internal.Point,A=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var h=function(F){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var L=F;Object.defineProperty(this,"pdf",{get:function(){return L}});var W=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return W},set:function(ce){W=!!ce}});var q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return q},set:function(ce){q=!!ce}});var H=0;Object.defineProperty(this,"posX",{get:function(){return H},set:function(ce){isNaN(ce)||(H=ce)}});var re=0;Object.defineProperty(this,"posY",{get:function(){return re},set:function(ce){isNaN(ce)||(re=ce)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(ce){var J;typeof ce=="number"?J=[ce,ce,ce,ce]:((J=new Array(4))[0]=ce[0],J[1]=ce.length>=2?ce[1]:J[0],J[2]=ce.length>=3?ce[2]:J[0],J[3]=ce.length>=4?ce[3]:J[1]),c.margin=J}});var $=!1;Object.defineProperty(this,"autoPaging",{get:function(){return $},set:function(ce){$=ce}});var de=0;Object.defineProperty(this,"lastBreak",{get:function(){return de},set:function(ce){de=ce}});var pe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return pe},set:function(ce){pe=ce}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(ce){ce instanceof u&&(c=ce)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(ce){c.path=ce}});var Ne=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ne},set:function(ce){Ne=ce}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ce){var J;J=m(ce),this.ctx.fillStyle=J.style,this.ctx.isFillTransparent=J.a===0,this.ctx.fillOpacity=J.a,this.pdf.setFillColor(J.r,J.g,J.b,{a:J.a}),this.pdf.setTextColor(J.r,J.g,J.b,{a:J.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ce){var J=m(ce);this.ctx.strokeStyle=J.style,this.ctx.isStrokeTransparent=J.a===0,this.ctx.strokeOpacity=J.a,J.a===0?this.pdf.setDrawColor(255,255,255):(J.a,this.pdf.setDrawColor(J.r,J.g,J.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ce){["butt","round","square"].indexOf(ce)!==-1&&(this.ctx.lineCap=ce,this.pdf.setLineCap(ce))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ce){isNaN(ce)||(this.ctx.lineWidth=ce,this.pdf.setLineWidth(ce))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ce){["bevel","round","miter"].indexOf(ce)!==-1&&(this.ctx.lineJoin=ce,this.pdf.setLineJoin(ce))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ce){isNaN(ce)||(this.ctx.miterLimit=ce,this.pdf.setMiterLimit(ce))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ce){this.ctx.textBaseline=ce}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ce){["right","end","center","left","start"].indexOf(ce)!==-1&&(this.ctx.textAlign=ce)}});var Te=null;function Fe(ce,J){if(Te===null){var Re=function(Le){var Ue=[];return Object.keys(Le).forEach(function(Pe){Le[Pe].forEach(function(Ge){var qe=null;switch(Ge){case"bold":qe={family:Pe,weight:"bold"};break;case"italic":qe={family:Pe,style:"italic"};break;case"bolditalic":qe={family:Pe,weight:"bold",style:"italic"};break;case"":case"normal":qe={family:Pe}}qe!==null&&(qe.ref={name:Pe,style:Ge},Ue.push(qe))})}),Ue}(ce.getFontList());Te=function(Le){for(var Ue={},Pe=0;Pe<Le.length;++Pe){var Ge=lx(Le[Pe]),qe=Ge.family,tt=Ge.stretch,Ze=Ge.style,vt=Ge.weight;Ue[qe]=Ue[qe]||{},Ue[qe][tt]=Ue[qe][tt]||{},Ue[qe][tt][Ze]=Ue[qe][tt][Ze]||{},Ue[qe][tt][Ze][vt]=Ge}return Ue}(Re.concat(J))}return Te}var oe=null;Object.defineProperty(this,"fontFaces",{get:function(){return oe},set:function(ce){Te=null,oe=ce}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ce){var J;if(this.ctx.font=ce,(J=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ce))!==null){var Re=J[1];J[2];var Le=J[3],Ue=J[4];J[5];var Pe=J[6],Ge=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ue)[2];Ue=Math.floor(Ge==="px"?parseFloat(Ue)*this.pdf.internal.scaleFactor:Ge==="em"?parseFloat(Ue)*this.pdf.getFontSize():parseFloat(Ue)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ue);var qe=function(Nt){var ie,ve,We=[],ot=Nt.trim();if(ot==="")return Jw;if(ot in p_)return[p_[ot]];for(;ot!=="";){switch(ve=null,ie=(ot=g_(ot)).charAt(0)){case'"':case"'":ve=Kz(ot.substring(1),ie);break;default:ve=qz(ot)}if(ve===null||(We.push(ve[0]),(ot=g_(ve[1]))!==""&&ot.charAt(0)!==","))return Jw;ot=ot.replace(/^,/,"")}return We}(Pe);if(this.fontFaces){var tt=Vz(Fe(this.pdf,this.fontFaces),qe.map(function(Nt){return{family:Nt,stretch:"normal",weight:Le,style:Re}}));this.pdf.setFont(tt.ref.name,tt.ref.style)}else{var Ze="";(Le==="bold"||parseInt(Le,10)>=700||Re==="bold")&&(Ze="bold"),Re==="italic"&&(Ze+="italic"),Ze.length===0&&(Ze="normal");for(var vt="",ht={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ct=0;Ct<qe.length;Ct++){if(this.pdf.internal.getFont(qe[Ct],Ze,{noFallback:!0,disableWarning:!0})!==void 0){vt=qe[Ct];break}if(Ze==="bolditalic"&&this.pdf.internal.getFont(qe[Ct],"bold",{noFallback:!0,disableWarning:!0})!==void 0)vt=qe[Ct],Ze="bold";else if(this.pdf.internal.getFont(qe[Ct],"normal",{noFallback:!0,disableWarning:!0})!==void 0){vt=qe[Ct],Ze="normal";break}}if(vt===""){for(var Ht=0;Ht<qe.length;Ht++)if(ht[qe[Ht]]){vt=ht[qe[Ht]];break}}vt=vt===""?"Times":vt,this.pdf.setFont(vt,Ze)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ce){this.ctx.globalCompositeOperation=ce}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ce){this.ctx.globalAlpha=ce}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ce){this.ctx.lineDashOffset=ce,ye.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ce){this.ctx.lineDash=ce,ye.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ce){this.ctx.ignoreClearRect=!!ce}})};h.prototype.setLineDash=function(F){this.lineDash=F},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){M.call(this,"fill",!1)},h.prototype.stroke=function(){M.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(F,L){if(isNaN(F)||isNaN(L))throw Lr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var W=this.ctx.transform.applyToPoint(new a(F,L));this.path.push({type:"mt",x:W.x,y:W.y}),this.ctx.lastPoint=new a(F,L)},h.prototype.closePath=function(){var F=new a(0,0),L=0;for(L=this.path.length-1;L!==-1;L--)if(this.path[L].type==="begin"&&Ir(this.path[L+1])==="object"&&typeof this.path[L+1].x=="number"){F=new a(this.path[L+1].x,this.path[L+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(F.x,F.y)},h.prototype.lineTo=function(F,L){if(isNaN(F)||isNaN(L))throw Lr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var W=this.ctx.transform.applyToPoint(new a(F,L));this.path.push({type:"lt",x:W.x,y:W.y}),this.ctx.lastPoint=new a(W.x,W.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),M.call(this,null,!0)},h.prototype.quadraticCurveTo=function(F,L,W,q){if(isNaN(W)||isNaN(q)||isNaN(F)||isNaN(L))throw Lr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var H=this.ctx.transform.applyToPoint(new a(W,q)),re=this.ctx.transform.applyToPoint(new a(F,L));this.path.push({type:"qct",x1:re.x,y1:re.y,x:H.x,y:H.y}),this.ctx.lastPoint=new a(H.x,H.y)},h.prototype.bezierCurveTo=function(F,L,W,q,H,re){if(isNaN(H)||isNaN(re)||isNaN(F)||isNaN(L)||isNaN(W)||isNaN(q))throw Lr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var $=this.ctx.transform.applyToPoint(new a(H,re)),de=this.ctx.transform.applyToPoint(new a(F,L)),pe=this.ctx.transform.applyToPoint(new a(W,q));this.path.push({type:"bct",x1:de.x,y1:de.y,x2:pe.x,y2:pe.y,x:$.x,y:$.y}),this.ctx.lastPoint=new a($.x,$.y)},h.prototype.arc=function(F,L,W,q,H,re){if(isNaN(F)||isNaN(L)||isNaN(W)||isNaN(q)||isNaN(H))throw Lr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(re=!!re,!this.ctx.transform.isIdentity){var $=this.ctx.transform.applyToPoint(new a(F,L));F=$.x,L=$.y;var de=this.ctx.transform.applyToPoint(new a(0,W)),pe=this.ctx.transform.applyToPoint(new a(0,0));W=Math.sqrt(Math.pow(de.x-pe.x,2)+Math.pow(de.y-pe.y,2))}Math.abs(H-q)>=2*Math.PI&&(q=0,H=2*Math.PI),this.path.push({type:"arc",x:F,y:L,radius:W,startAngle:q,endAngle:H,counterclockwise:re})},h.prototype.arcTo=function(F,L,W,q,H){throw new Error("arcTo not implemented.")},h.prototype.rect=function(F,L,W,q){if(isNaN(F)||isNaN(L)||isNaN(W)||isNaN(q))throw Lr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(F,L),this.lineTo(F+W,L),this.lineTo(F+W,L+q),this.lineTo(F,L+q),this.lineTo(F,L),this.lineTo(F+W,L),this.lineTo(F,L)},h.prototype.fillRect=function(F,L,W,q){if(isNaN(F)||isNaN(L)||isNaN(W)||isNaN(q))throw Lr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var H={};this.lineCap!=="butt"&&(H.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(H.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(F,L,W,q),this.fill(),H.hasOwnProperty("lineCap")&&(this.lineCap=H.lineCap),H.hasOwnProperty("lineJoin")&&(this.lineJoin=H.lineJoin)}},h.prototype.strokeRect=function(F,L,W,q){if(isNaN(F)||isNaN(L)||isNaN(W)||isNaN(q))throw Lr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(F,L,W,q),this.stroke())},h.prototype.clearRect=function(F,L,W,q){if(isNaN(F)||isNaN(L)||isNaN(W)||isNaN(q))throw Lr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(F,L,W,q))},h.prototype.save=function(F){F=typeof F!="boolean"||F;for(var L=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("q");if(this.pdf.setPage(L),F){this.ctx.fontSize=this.pdf.internal.getFontSize();var q=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=q}},h.prototype.restore=function(F){F=typeof F!="boolean"||F;for(var L=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("Q");this.pdf.setPage(L),F&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(F){var L,W,q,H;if(F.isCanvasGradient===!0&&(F=F.getColor()),!F)return{r:0,g:0,b:0,a:0,style:F};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(F))L=0,W=0,q=0,H=0;else{var re=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(F);if(re!==null)L=parseInt(re[1]),W=parseInt(re[2]),q=parseInt(re[3]),H=1;else if((re=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(F))!==null)L=parseInt(re[1]),W=parseInt(re[2]),q=parseInt(re[3]),H=parseFloat(re[4]);else{if(H=1,typeof F=="string"&&F.charAt(0)!=="#"){var $=new C3(F);F=$.ok?$.toHex():"#000000"}F.length===4?(L=F.substring(1,2),L+=L,W=F.substring(2,3),W+=W,q=F.substring(3,4),q+=q):(L=F.substring(1,3),W=F.substring(3,5),q=F.substring(5,7)),L=parseInt(L,16),W=parseInt(W,16),q=parseInt(q,16)}}return{r:L,g:W,b:q,a:H,style:F}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(F,L,W,q){if(isNaN(L)||isNaN(W)||typeof F!="string")throw Lr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(q=isNaN(q)?void 0:q,!p.call(this)){var H=te(this.ctx.transform.rotation),re=this.ctx.transform.scaleX;T.call(this,{text:F,x:L,y:W,scale:re,angle:H,align:this.textAlign,maxWidth:q})}},h.prototype.strokeText=function(F,L,W,q){if(isNaN(L)||isNaN(W)||typeof F!="string")throw Lr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){q=isNaN(q)?void 0:q;var H=te(this.ctx.transform.rotation),re=this.ctx.transform.scaleX;T.call(this,{text:F,x:L,y:W,scale:re,renderingMode:"stroke",angle:H,align:this.textAlign,maxWidth:q})}},h.prototype.measureText=function(F){if(typeof F!="string")throw Lr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var L=this.pdf,W=this.pdf.internal.scaleFactor,q=L.internal.getFontSize(),H=L.getStringUnitWidth(F)*q/L.internal.scaleFactor,re=function($){var de=($=$||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return de}}),this};return new re({width:H*=Math.round(96*W/72*1e4)/1e4})},h.prototype.scale=function(F,L){if(isNaN(F)||isNaN(L))throw Lr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var W=new l(F,0,0,L,0,0);this.ctx.transform=this.ctx.transform.multiply(W)},h.prototype.rotate=function(F){if(isNaN(F))throw Lr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var L=new l(Math.cos(F),Math.sin(F),-Math.sin(F),Math.cos(F),0,0);this.ctx.transform=this.ctx.transform.multiply(L)},h.prototype.translate=function(F,L){if(isNaN(F)||isNaN(L))throw Lr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var W=new l(1,0,0,1,F,L);this.ctx.transform=this.ctx.transform.multiply(W)},h.prototype.transform=function(F,L,W,q,H,re){if(isNaN(F)||isNaN(L)||isNaN(W)||isNaN(q)||isNaN(H)||isNaN(re))throw Lr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var $=new l(F,L,W,q,H,re);this.ctx.transform=this.ctx.transform.multiply($)},h.prototype.setTransform=function(F,L,W,q,H,re){F=isNaN(F)?1:F,L=isNaN(L)?0:L,W=isNaN(W)?0:W,q=isNaN(q)?1:q,H=isNaN(H)?0:H,re=isNaN(re)?0:re,this.ctx.transform=new l(F,L,W,q,H,re)};var B=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(F,L,W,q,H,re,$,de,pe){var Ne=this.pdf.getImageProperties(F),Te=1,Fe=1,oe=1,ce=1;q!==void 0&&de!==void 0&&(oe=de/q,ce=pe/H,Te=Ne.width/q*de/q,Fe=Ne.height/H*pe/H),re===void 0&&(re=L,$=W,L=0,W=0),q!==void 0&&de===void 0&&(de=q,pe=H),q===void 0&&de===void 0&&(de=Ne.width,pe=Ne.height);for(var J,Re=this.ctx.transform.decompose(),Le=te(Re.rotate.shx),Ue=new l,Pe=(Ue=(Ue=(Ue=Ue.multiply(Re.translate)).multiply(Re.skew)).multiply(Re.scale)).applyToRectangle(new A(re-L*oe,$-W*ce,q*Te,H*Fe)),Ge=E.call(this,Pe),qe=[],tt=0;tt<Ge.length;tt+=1)qe.indexOf(Ge[tt])===-1&&qe.push(Ge[tt]);if(S(qe),this.autoPaging)for(var Ze=qe[0],vt=qe[qe.length-1],ht=Ze;ht<vt+1;ht++){this.pdf.setPage(ht);var Ct=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ht=ht===1?this.posY+this.margin[0]:this.margin[0],Nt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ie=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ve=ht===1?0:Nt+(ht-2)*ie;if(this.ctx.clip_path.length!==0){var We=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(J,this.posX+this.margin[3],-ve+Ht+this.ctx.prevPageLastElemOffset),R.call(this,"fill",!0),this.path=We}var ot=JSON.parse(JSON.stringify(Pe));ot=w([ot],this.posX+this.margin[3],-ve+Ht+this.ctx.prevPageLastElemOffset)[0];var yt=(ht>Ze||ht<vt)&&B.call(this);yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ct,ie,null).clip().discardPath()),this.pdf.addImage(F,"JPEG",ot.x,ot.y,ot.w,ot.h,null,null,Le),yt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(F,"JPEG",Pe.x,Pe.y,Pe.w,Pe.h,null,null,Le)};var E=function(F,L,W){var q=[];L=L||this.pdf.internal.pageSize.width,W=W||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var H=this.posY+this.ctx.prevPageLastElemOffset;switch(F.type){default:case"mt":case"lt":q.push(Math.floor((F.y+H)/W)+1);break;case"arc":q.push(Math.floor((F.y+H-F.radius)/W)+1),q.push(Math.floor((F.y+H+F.radius)/W)+1);break;case"qct":var re=se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x,F.y);q.push(Math.floor((re.y+H)/W)+1),q.push(Math.floor((re.y+re.h+H)/W)+1);break;case"bct":var $=ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x2,F.y2,F.x,F.y);q.push(Math.floor(($.y+H)/W)+1),q.push(Math.floor(($.y+$.h+H)/W)+1);break;case"rect":q.push(Math.floor((F.y+H)/W)+1),q.push(Math.floor((F.y+F.h+H)/W)+1)}for(var de=0;de<q.length;de+=1)for(;this.pdf.internal.getNumberOfPages()<q[de];)y.call(this);return q},y=function(){var F=this.fillStyle,L=this.strokeStyle,W=this.font,q=this.lineCap,H=this.lineWidth,re=this.lineJoin;this.pdf.addPage(),this.fillStyle=F,this.strokeStyle=L,this.font=W,this.lineCap=q,this.lineWidth=H,this.lineJoin=re},w=function(F,L,W){for(var q=0;q<F.length;q++)switch(F[q].type){case"bct":F[q].x2+=L,F[q].y2+=W;case"qct":F[q].x1+=L,F[q].y1+=W;case"mt":case"lt":case"arc":default:F[q].x+=L,F[q].y+=W}return F},S=function(F){return F.sort(function(L,W){return L-W})},M=function(F,L){for(var W,q,H=this.fillStyle,re=this.strokeStyle,$=this.lineCap,de=this.lineWidth,pe=Math.abs(de*this.ctx.transform.scaleX),Ne=this.lineJoin,Te=JSON.parse(JSON.stringify(this.path)),Fe=JSON.parse(JSON.stringify(this.path)),oe=[],ce=0;ce<Fe.length;ce++)if(Fe[ce].x!==void 0)for(var J=E.call(this,Fe[ce]),Re=0;Re<J.length;Re+=1)oe.indexOf(J[Re])===-1&&oe.push(J[Re]);for(var Le=0;Le<oe.length;Le++)for(;this.pdf.internal.getNumberOfPages()<oe[Le];)y.call(this);if(S(oe),this.autoPaging)for(var Ue=oe[0],Pe=oe[oe.length-1],Ge=Ue;Ge<Pe+1;Ge++){this.pdf.setPage(Ge),this.fillStyle=H,this.strokeStyle=re,this.lineCap=$,this.lineWidth=pe,this.lineJoin=Ne;var qe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],tt=Ge===1?this.posY+this.margin[0]:this.margin[0],Ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],vt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ht=Ge===1?0:Ze+(Ge-2)*vt;if(this.ctx.clip_path.length!==0){var Ct=this.path;W=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(W,this.posX+this.margin[3],-ht+tt+this.ctx.prevPageLastElemOffset),R.call(this,F,!0),this.path=Ct}if(q=JSON.parse(JSON.stringify(Te)),this.path=w(q,this.posX+this.margin[3],-ht+tt+this.ctx.prevPageLastElemOffset),L===!1||Ge===0){var Ht=(Ge>Ue||Ge<Pe)&&B.call(this);Ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qe,vt,null).clip().discardPath()),R.call(this,F,L),Ht&&this.pdf.restoreGraphicsState()}this.lineWidth=de}else this.lineWidth=pe,R.call(this,F,L),this.lineWidth=de;this.path=Te},R=function(F,L){if((F!=="stroke"||L||!b.call(this))&&(F==="stroke"||L||!p.call(this))){for(var W,q,H=[],re=this.path,$=0;$<re.length;$++){var de=re[$];switch(de.type){case"begin":H.push({begin:!0});break;case"close":H.push({close:!0});break;case"mt":H.push({start:de,deltas:[],abs:[]});break;case"lt":var pe=H.length;if(re[$-1]&&!isNaN(re[$-1].x)&&(W=[de.x-re[$-1].x,de.y-re[$-1].y],pe>0)){for(;pe>=0;pe--)if(H[pe-1].close!==!0&&H[pe-1].begin!==!0){H[pe-1].deltas.push(W),H[pe-1].abs.push(de);break}}break;case"bct":W=[de.x1-re[$-1].x,de.y1-re[$-1].y,de.x2-re[$-1].x,de.y2-re[$-1].y,de.x-re[$-1].x,de.y-re[$-1].y],H[H.length-1].deltas.push(W);break;case"qct":var Ne=re[$-1].x+2/3*(de.x1-re[$-1].x),Te=re[$-1].y+2/3*(de.y1-re[$-1].y),Fe=de.x+2/3*(de.x1-de.x),oe=de.y+2/3*(de.y1-de.y),ce=de.x,J=de.y;W=[Ne-re[$-1].x,Te-re[$-1].y,Fe-re[$-1].x,oe-re[$-1].y,ce-re[$-1].x,J-re[$-1].y],H[H.length-1].deltas.push(W);break;case"arc":H.push({deltas:[],abs:[],arc:!0}),Array.isArray(H[H.length-1].abs)&&H[H.length-1].abs.push(de)}}q=L?null:F==="stroke"?"stroke":"fill";for(var Re=!1,Le=0;Le<H.length;Le++)if(H[Le].arc)for(var Ue=H[Le].abs,Pe=0;Pe<Ue.length;Pe++){var Ge=Ue[Pe];Ge.type==="arc"?N.call(this,Ge.x,Ge.y,Ge.radius,Ge.startAngle,Ge.endAngle,Ge.counterclockwise,void 0,L,!Re):P.call(this,Ge.x,Ge.y),Re=!0}else if(H[Le].close===!0)this.pdf.internal.out("h"),Re=!1;else if(H[Le].begin!==!0){var qe=H[Le].start.x,tt=H[Le].start.y;ee.call(this,H[Le].deltas,qe,tt),Re=!0}q&&j.call(this,q),L&&D.call(this)}},O=function(F){var L=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,W=L*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return F-W;case"top":return F+L-W;case"hanging":return F+L-2*W;case"middle":return F+L/2-W;case"ideographic":return F;case"alphabetic":default:return F}},I=function(F){return F+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var F=function(){};return F.colorStops=[],F.addColorStop=function(L,W){this.colorStops.push([L,W])},F.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},F.isCanvasGradient=!0,F},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function(F,L,W,q,H,re,$,de,pe){for(var Ne=ue.call(this,W,q,H,re),Te=0;Te<Ne.length;Te++){var Fe=Ne[Te];Te===0&&(pe?_.call(this,Fe.x1+F,Fe.y1+L):P.call(this,Fe.x1+F,Fe.y1+L)),Ae.call(this,F,L,Fe.x2,Fe.y2,Fe.x3,Fe.y3,Fe.x4,Fe.y4)}de?D.call(this):j.call(this,$)},j=function(F){switch(F){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},D=function(){this.pdf.clip(),this.pdf.discardPath()},_=function(F,L){this.pdf.internal.out(r(F)+" "+n(L)+" m")},T=function(F){var L;switch(F.align){case"right":case"end":L="right";break;case"center":L="center";break;case"left":case"start":default:L="left"}var W=this.pdf.getTextDimensions(F.text),q=O.call(this,F.y),H=I.call(this,q)-W.h,re=this.ctx.transform.applyToPoint(new a(F.x,q)),$=this.ctx.transform.decompose(),de=new l;de=(de=(de=de.multiply($.translate)).multiply($.skew)).multiply($.scale);for(var pe,Ne,Te,Fe=this.ctx.transform.applyToRectangle(new A(F.x,q,W.w,W.h)),oe=de.applyToRectangle(new A(F.x,H,W.w,W.h)),ce=E.call(this,oe),J=[],Re=0;Re<ce.length;Re+=1)J.indexOf(ce[Re])===-1&&J.push(ce[Re]);if(S(J),this.autoPaging)for(var Le=J[0],Ue=J[J.length-1],Pe=Le;Pe<Ue+1;Pe++){this.pdf.setPage(Pe);var Ge=Pe===1?this.posY+this.margin[0]:this.margin[0],qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],tt=this.pdf.internal.pageSize.height-this.margin[2],Ze=tt-this.margin[0],vt=this.pdf.internal.pageSize.width-this.margin[1],ht=vt-this.margin[3],Ct=Pe===1?0:qe+(Pe-2)*Ze;if(this.ctx.clip_path.length!==0){var Ht=this.path;pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(pe,this.posX+this.margin[3],-1*Ct+Ge),R.call(this,"fill",!0),this.path=Ht}var Nt=w([JSON.parse(JSON.stringify(oe))],this.posX+this.margin[3],-Ct+Ge+this.ctx.prevPageLastElemOffset)[0];F.scale>=.01&&(Ne=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ne*F.scale),Te=this.lineWidth,this.lineWidth=Te*F.scale);var ie=this.autoPaging!=="text";if(ie||Nt.y+Nt.h<=tt){if(ie||Nt.y>=Ge&&Nt.x<=vt){var ve=ie?F.text:this.pdf.splitTextToSize(F.text,F.maxWidth||vt-Nt.x)[0],We=w([JSON.parse(JSON.stringify(Fe))],this.posX+this.margin[3],-Ct+Ge+this.ctx.prevPageLastElemOffset)[0],ot=ie&&(Pe>Le||Pe<Ue)&&B.call(this);ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ht,Ze,null).clip().discardPath()),this.pdf.text(ve,We.x,We.y,{angle:F.angle,align:L,renderingMode:F.renderingMode}),ot&&this.pdf.restoreGraphicsState()}}else Nt.y<tt&&(this.ctx.prevPageLastElemOffset+=tt-Nt.y);F.scale>=.01&&(this.pdf.setFontSize(Ne),this.lineWidth=Te)}else F.scale>=.01&&(Ne=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ne*F.scale),Te=this.lineWidth,this.lineWidth=Te*F.scale),this.pdf.text(F.text,re.x+this.posX,re.y+this.posY,{angle:F.angle,align:L,renderingMode:F.renderingMode,maxWidth:F.maxWidth}),F.scale>=.01&&(this.pdf.setFontSize(Ne),this.lineWidth=Te)},P=function(F,L,W,q){W=W||0,q=q||0,this.pdf.internal.out(r(F+W)+" "+n(L+q)+" l")},ee=function(F,L,W){return this.pdf.lines(F,L,W,null,null)},Ae=function(F,L,W,q,H,re,$,de){this.pdf.internal.out([e(s(W+F)),e(i(q+L)),e(s(H+F)),e(i(re+L)),e(s($+F)),e(i(de+L)),"c"].join(" "))},ue=function(F,L,W,q){for(var H=2*Math.PI,re=Math.PI/2;L>W;)L-=H;var $=Math.abs(W-L);$<H&&q&&($=H-$);for(var de=[],pe=q?-1:1,Ne=L;$>1e-5;){var Te=Ne+pe*Math.min($,re);de.push(he.call(this,F,Ne,Te)),$-=Math.abs(Te-Ne),Ne=Te}return de},he=function(F,L,W){var q=(W-L)/2,H=F*Math.cos(q),re=F*Math.sin(q),$=H,de=-re,pe=$*$+de*de,Ne=pe+$*H+de*re,Te=4/3*(Math.sqrt(2*pe*Ne)-Ne)/($*re-de*H),Fe=$-Te*de,oe=de+Te*$,ce=Fe,J=-oe,Re=q+L,Le=Math.cos(Re),Ue=Math.sin(Re);return{x1:F*Math.cos(L),y1:F*Math.sin(L),x2:Fe*Le-oe*Ue,y2:Fe*Ue+oe*Le,x3:ce*Le-J*Ue,y3:ce*Ue+J*Le,x4:F*Math.cos(W),y4:F*Math.sin(W)}},te=function(F){return 180*F/Math.PI},se=function(F,L,W,q,H,re){var $=F+.5*(W-F),de=L+.5*(q-L),pe=H+.5*(W-H),Ne=re+.5*(q-re),Te=Math.min(F,H,$,pe),Fe=Math.max(F,H,$,pe),oe=Math.min(L,re,de,Ne),ce=Math.max(L,re,de,Ne);return new A(Te,oe,Fe-Te,ce-oe)},ne=function(F,L,W,q,H,re,$,de){var pe,Ne,Te,Fe,oe,ce,J,Re,Le,Ue,Pe,Ge,qe,tt,Ze=W-F,vt=q-L,ht=H-W,Ct=re-q,Ht=$-H,Nt=de-re;for(Ne=0;Ne<41;Ne++)Le=(J=(Te=F+(pe=Ne/40)*Ze)+pe*((oe=W+pe*ht)-Te))+pe*(oe+pe*(H+pe*Ht-oe)-J),Ue=(Re=(Fe=L+pe*vt)+pe*((ce=q+pe*Ct)-Fe))+pe*(ce+pe*(re+pe*Nt-ce)-Re),Ne==0?(Pe=Le,Ge=Ue,qe=Le,tt=Ue):(Pe=Math.min(Pe,Le),Ge=Math.min(Ge,Ue),qe=Math.max(qe,Le),tt=Math.max(tt,Ue));return new A(Math.round(Pe),Math.round(Ge),Math.round(qe-Pe),Math.round(tt-Ge))},ye=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var F,L,W=(F=this.ctx.lineDash,L=this.ctx.lineDashOffset,JSON.stringify({lineDash:F,lineDashOffset:L}));this.prevLineDash!==W&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=W)}}})(Dt.API),function(t){var e=function(i){var a,A,l,c,u,h,m,p,b,B;for(A=[],l=0,c=(i+=a="\0\0\0\0".slice(i.length%4||4)).length;c>l;l+=4)(u=(i.charCodeAt(l)<<24)+(i.charCodeAt(l+1)<<16)+(i.charCodeAt(l+2)<<8)+i.charCodeAt(l+3))!==0?(h=(u=((u=((u=((u=(u-(B=u%85))/85)-(b=u%85))/85)-(p=u%85))/85)-(m=u%85))/85)%85,A.push(h+33,m+33,p+33,b+33,B+33)):A.push(122);return function(E,y){for(var w=y;w>0;w--)E.pop()}(A,a.length),String.fromCharCode.apply(String,A)+"~>"},r=function(i){var a,A,l,c,u,h=String,m="length",p=255,b="charCodeAt",B="slice",E="replace";for(i[B](-2),i=i[B](0,-2)[E](/\s/g,"")[E]("z","!!!!!"),l=[],c=0,u=(i+=a="uuuuu"[B](i[m]%5||5))[m];u>c;c+=5)A=52200625*(i[b](c)-33)+614125*(i[b](c+1)-33)+7225*(i[b](c+2)-33)+85*(i[b](c+3)-33)+(i[b](c+4)-33),l.push(p&A>>24,p&A>>16,p&A>>8,p&A);return function(y,w){for(var S=w;S>0;S--)y.pop()}(l,a[m]),h.fromCharCode.apply(h,l)},n=function(i){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),a.test(i)===!1)return"";for(var A="",l=0;l<i.length;l+=2)A+=String.fromCharCode("0x"+(i[l]+i[l+1]));return A},s=function(i){for(var a=new Uint8Array(i.length),A=i.length;A--;)a[A]=i.charCodeAt(A);return i=(a=nx(a)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(i,a){var A=0,l=i||"",c=[];for(typeof(a=a||[])=="string"&&(a=[a]),A=0;A<a.length;A+=1)switch(a[A]){case"ASCII85Decode":case"/ASCII85Decode":l=r(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=n(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=s(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[A]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(Dt.API),function(t){t.loadFile=function(e,r,n){return function(s,i,a){i=i!==!1,a=typeof a=="function"?a:function(){};var A=void 0;try{A=function(l,c,u){var h=new XMLHttpRequest,m=0,p=function(b){var B=b.length,E=[],y=String.fromCharCode;for(m=0;m<B;m+=1)E.push(y(255&b.charCodeAt(m)));return E.join("")};if(h.open("GET",l,!c),h.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(h.onload=function(){h.status===200?u(p(this.responseText)):u(void 0)}),h.send(null),c&&h.status===200)return p(h.responseText)}(s,i,a)}catch{}return A}(e,r,n)},t.loadImageFile=t.loadFile}(Dt.API),function(t){function e(){return(Mt.html2canvas?Promise.resolve(Mt.html2canvas):Qo(()=>Promise.resolve().then(()=>BB),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function r(){return(Mt.DOMPurify?Promise.resolve(Mt.DOMPurify):Qo(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var n=function(a){var A=Ir(a);return A==="undefined"?"undefined":A==="string"||a instanceof String?"string":A==="number"||a instanceof Number?"number":A==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":A==="object"?"object":"unknown"},s=function(a,A){var l=document.createElement(a);for(var c in A.className&&(l.className=A.className),A.innerHTML&&A.dompurify&&(l.innerHTML=A.dompurify.sanitize(A.innerHTML)),A.style)l.style[c]=A.style[c];return l},i=function a(A){var l=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),c=a.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,a,1,[a])).set(A)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(a,A){return a.__proto__=A||i.prototype,a},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(a,A){return this.then(function(){switch(A=A||function(l){switch(n(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(r).then(function(l){return this.set({src:s("div",{innerHTML:a,dompurify:l})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},i.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},A=function l(c,u){for(var h=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),m=c.firstChild;m;m=m.nextSibling)u!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||h.appendChild(l(m,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(h.width=c.width,h.height=c.height,h.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(h.value=c.value),h.addEventListener("load",function(){h.scrollTop=c.scrollTop,h.scrollLeft=c.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);A.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(A),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(A){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,A(this.prop.container,l)}).then(function(A){(this.opt.html2canvas.onrendered||function(){})(A),this.prop.canvas=A,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(A){var l=this.opt.jsPDF,c=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var m=0;m<c.length;++m){var p=c[m],b=p.src.find(function(B){return B.format==="truetype"});b&&l.addFont(b.url,p.ref.name,p.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,l.context2d.save(!0),A(this.prop.container,h)}).then(function(A){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(A),this.prop.canvas=A,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(a,A,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(a,A):this.outputPdf(a,A)},i.prototype.outputPdf=function(a,A){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,A)})},i.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},i.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(a){if(n(a)!=="object")return this;var A=Object.keys(a||{}).map(function(l){if(l in i.template.prop)return function(){this.prop[l]=a[l]};switch(l){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[l]=a[l]}}},this);return this.then(function(){return this.thenList(A)})},i.prototype.get=function(a,A){return this.then(function(){var l=a in i.template.prop?this.prop[a]:this.opt[a];return A?A(l):l})},i.prototype.setMargin=function(a){return this.then(function(){switch(n(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},i.prototype.setPageSize=function(a){function A(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(a=a||Dt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:A(a.inner.width,a.k),height:A(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},i.prototype.setProgress=function(a,A,l,c){return a!=null&&(this.progress.val=a),A!=null&&(this.progress.state=A),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(a,A,l,c){return this.setProgress(a?this.progress.val+a:null,A||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},i.prototype.then=function(a,A){var l=this;return this.thenCore(a,A,function(c,u){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(h){return l.updateProgress(null,c),h}).then(c,u).then(function(h){return l.updateProgress(1),h})})},i.prototype.thenCore=function(a,A,l){l=l||Promise.prototype.then,a&&(a=a.bind(this)),A&&(A=A.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),u=l.call(c,a,A);return i.convert(u,this.__proto__)},i.prototype.thenExternal=function(a,A){return Promise.prototype.then.call(this,a,A)},i.prototype.thenList=function(a){var A=this;return a.forEach(function(l){A=A.thenCore(l)}),A},i.prototype.catch=function(a){a&&(a=a.bind(this));var A=Promise.prototype.catch.call(this,a);return i.convert(A,this)},i.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},i.prototype.error=function(a){return this.then(function(){throw new Error(a)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Dt.getPageSize=function(a,A,l){if(Ir(a)==="object"){var c=a;a=c.orientation,A=c.unit||A,l=c.format||l}A=A||"mm",l=l||"a4",a=(""+(a||"P")).toLowerCase();var u,h=(""+l).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(A){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+A}var p,b=0,B=0;if(m.hasOwnProperty(h))b=m[h][1]/u,B=m[h][0]/u;else try{b=l[1],B=l[0]}catch{throw new Error("Invalid format: "+l)}if(a==="p"||a==="portrait")a="p",B>b&&(p=B,B=b,b=p);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",b>B&&(p=B,B=b,b=p)}return{width:B,height:b,unit:A,k:u,orientation:a}},t.html=function(a,A){(A=A||{}).callback=A.callback||function(){},A.html2canvas=A.html2canvas||{},A.html2canvas.canvas=A.html2canvas.canvas||this.canvas,A.jsPDF=A.jsPDF||this,A.fontFaces=A.fontFaces?A.fontFaces.map(lx):null;var l=new i(A);return A.worker?l:l.from(a).doCallback()}}(Dt.API),Dt.API.addJS=function(t){return y_=t,this.internal.events.subscribe("postPutResources",function(){fg=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(fg+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),v_=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+y_+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){fg!==void 0&&v_!==void 0&&this.internal.out("/Names <</JavaScript "+fg+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),i=0;i<s.length;i++){var a=s[i],A=n.exec(a);if(A!=null){var l=A[1];r.internal.newObjectDeferredBegin(l,!1)}r.internal.write(a)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(i=0;i<c;i++){var h=r.internal.newObject();u.push(h);var m=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var p=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<u.length;i++)r.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+p+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,s,i){var a={title:s,options:i,children:[]};return n==null&&(n=this.root),n.children.push(a),a},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var a=n.children[i];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var A=this.count=this.count_r({count:0},a);if(A>0&&this.line("/Count "+A),a.options&&a.options.pageNumber){var l=r.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var c=0;c<n.children.length;c++)this.renderItems(n.children[c])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,s){for(var i=0;i<s.children.length;i++)n.count++,this.count_r(n,s.children[i]);return n.count}}])}(Dt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,s,i,a,A){var l,c=this.decode.DCT_DECODE,u=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=a||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(l=function(h){for(var m,p=256*h.charCodeAt(4)+h.charCodeAt(5),b=h.length,B={width:0,height:0,numcomponents:1},E=4;E<b;E+=2){if(E+=p,e.indexOf(h.charCodeAt(E+1))!==-1){m=256*h.charCodeAt(E+5)+h.charCodeAt(E+6),B={width:256*h.charCodeAt(E+7)+h.charCodeAt(E+8),height:m,numcomponents:h.charCodeAt(E+9)};break}p=256*h.charCodeAt(E+2)+h.charCodeAt(E+3)}return B}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:A=this.color_spaces.DEVICE_GRAY;break;case 4:A=this.color_spaces.DEVICE_CMYK;break;case 3:A=this.color_spaces.DEVICE_RGB}u={data:r,width:l.width,height:l.height,colorSpace:A,bitsPerComponent:8,filter:c,index:n,alias:s}}return u}}(Dt.API);var Qu,pg,w_,x_,b_,Gz=function(){var t,e,r;function n(i){var a,A,l,c,u,h,m,p,b,B,E,y,w,S;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(a=this.readUInt32(),b=(function(){var M,R;for(R=[],M=0;M<4;++M)R.push(String.fromCharCode(this.data[this.pos++]));return R}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),c=this.readUInt16()||100,h.delay=1e3*u/c,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(b==="fdAT"&&(this.pos+=4,a-=4),i=(h!=null?h.data:void 0)||this.imgData,y=0;0<=a?y<a:y>a;0<=a?++y:--y)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((B=l-this.transparency.indexed.length)>0)for(w=0;0<=B?w<B:w>B;0<=B?++w:--w)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":m=(E=this.read(a)).indexOf(0),p=String.fromCharCode.apply(String,E.slice(0,m)),this.text[p]=String.fromCharCode.apply(String,E.slice(m+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(S=this.colorType)===4||S===6,A=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*A,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(i){var a,A;for(A=[],a=0;0<=i?a<i:a>i;0<=i?++a:--a)A.push(this.data[this.pos++]);return A},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(i){var a=this.pixelBitlength/8,A=new Uint8Array(this.width*this.height*a),l=0,c=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function u(h,m,p,b){var B,E,y,w,S,M,R,O,I,N,j,D,_,T,P,ee,Ae,ue,he,te,se,ne=Math.ceil((c.width-h)/p),ye=Math.ceil((c.height-m)/b),F=c.width==ne&&c.height==ye;for(T=a*ne,D=F?A:new Uint8Array(T*ye),M=i.length,_=0,E=0;_<ye&&l<M;){switch(i[l++]){case 0:for(w=Ae=0;Ae<T;w=Ae+=1)D[E++]=i[l++];break;case 1:for(w=ue=0;ue<T;w=ue+=1)B=i[l++],S=w<a?0:D[E-a],D[E++]=(B+S)%256;break;case 2:for(w=he=0;he<T;w=he+=1)B=i[l++],y=(w-w%a)/a,P=_&&D[(_-1)*T+y*a+w%a],D[E++]=(P+B)%256;break;case 3:for(w=te=0;te<T;w=te+=1)B=i[l++],y=(w-w%a)/a,S=w<a?0:D[E-a],P=_&&D[(_-1)*T+y*a+w%a],D[E++]=(B+Math.floor((S+P)/2))%256;break;case 4:for(w=se=0;se<T;w=se+=1)B=i[l++],y=(w-w%a)/a,S=w<a?0:D[E-a],_===0?P=ee=0:(P=D[(_-1)*T+y*a+w%a],ee=y&&D[(_-1)*T+(y-1)*a+w%a]),R=S+P-ee,O=Math.abs(R-S),N=Math.abs(R-P),j=Math.abs(R-ee),I=O<=N&&O<=j?S:N<=j?P:ee,D[E++]=(B+I)%256;break;default:throw new Error("Invalid filter algorithm: "+i[l-1])}if(!F){var L=((m+_*b)*c.width+h)*a,W=_*T;for(w=0;w<ne;w+=1){for(var q=0;q<a;q+=1)A[L++]=D[W++];L+=(p-1)*a}}_++}}return i=Bz(i),c.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),A},n.prototype.decodePalette=function(){var i,a,A,l,c,u,h,m,p;for(A=this.palette,u=this.transparency.indexed||[],c=new Uint8Array((u.length||0)+A.length),l=0,i=0,a=h=0,m=A.length;h<m;a=h+=3)c[l++]=A[a],c[l++]=A[a+1],c[l++]=A[a+2],c[l++]=(p=u[i++])!=null?p:255;return c},n.prototype.copyToImageData=function(i,a){var A,l,c,u,h,m,p,b,B,E,y;if(l=this.colors,B=null,A=this.hasAlphaChannel,this.palette.length&&(B=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),l=4,A=!0),b=(c=i.data||i).length,h=B||a,u=m=0,l===1)for(;u<b;)p=B?4*a[u/4]:m,E=h[p++],c[u++]=E,c[u++]=E,c[u++]=E,c[u++]=A?h[p++]:255,m=p;else for(;u<b;)p=B?4*a[u/4]:m,c[u++]=h[p++],c[u++]=h[p++],c[u++]=h[p++],c[u++]=A?h[p++]:255,m=p},n.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var s=function(){if(Object.prototype.toString.call(Mt)==="[object Window]"){try{e=Mt.document.createElement("canvas"),r=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),t=function(i){var a;if(s()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(i){var a,A,l,c,u,h,m,p;if(this.animation){for(p=[],A=u=0,h=(m=this.animation.frames).length;u<h;A=++u)a=m[A],l=i.createImageData(a.width,a.height),c=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(l,c),a.imageData=l,p.push(a.image=t(l));return p}},n.prototype.renderFrame=function(i,a){var A,l,c;return A=(l=this.animation.frames)[a],c=l[a-1],a===0&&i.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?i.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&i.putImageData(c.imageData,c.xOffset,c.yOffset),A.blendOp===0&&i.clearRect(A.xOffset,A.yOffset,A.width,A.height),i.drawImage(A.image,A.xOffset,A.yOffset)},n.prototype.animate=function(i){var a,A,l,c,u,h,m=this;return A=0,h=this.animation,c=h.numFrames,l=h.frames,u=h.numPlays,(a=function(){var p,b;if(p=A++%c,b=l[p],m.renderFrame(i,p),c>1&&A/c<u)return m.animation._timeout=setTimeout(a,b.delay)})()},n.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},n.prototype.render=function(i){var a,A;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,a=i.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(A=a.createImageData(this.width,this.height),this.copyToImageData(A,this.decodePixels()),a.putImageData(A,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function zz(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,s=t[e++],i=s>>7,a=1<<(7&s)+1;t[e++],t[e++];var A=null,l=null;i&&(A=e,l=a,e+=3*a);var c=!0,u=[],h=0,m=null,p=0,b=null;for(this.width=r,this.height=n;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,b=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((_=t[e++])>=0))throw Error("Invalid block size");if(_===0)break;e+=_}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var B=t[e++];h=t[e++]|t[e++]<<8,m=t[e++],!(1&B)&&(m=null),p=B>>2&7,e++;break;case 254:for(;;){if(!((_=t[e++])>=0))throw Error("Invalid block size");if(_===0)break;e+=_}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var E=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,S=t[e++]|t[e++]<<8,M=t[e++],R=M>>6&1,O=1<<(7&M)+1,I=A,N=l,j=!1;M>>7&&(j=!0,I=e,N=O,e+=3*O);var D=e;for(e++;;){var _;if(!((_=t[e++])>=0))throw Error("Invalid block size");if(_===0)break;e+=_}u.push({x:E,y,width:w,height:S,has_local_palette:j,palette_offset:I,palette_size:N,data_offset:D,data_length:e-D,transparent_index:m,interlaced:!!R,delay:h,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return b},this.frameInfo=function(T){if(T<0||T>=u.length)throw new Error("Frame index out of range.");return u[T]},this.decodeAndBlitFrameBGRA=function(T,P){var ee=this.frameInfo(T),Ae=ee.width*ee.height,ue=new Uint8Array(Ae);B_(t,ee.data_offset,ue,Ae);var he=ee.palette_offset,te=ee.transparent_index;te===null&&(te=256);var se=ee.width,ne=r-se,ye=se,F=4*(ee.y*r+ee.x),L=4*((ee.y+ee.height)*r+ee.x),W=F,q=4*ne;ee.interlaced===!0&&(q+=4*r*7);for(var H=8,re=0,$=ue.length;re<$;++re){var de=ue[re];if(ye===0&&(ye=se,(W+=q)>=L&&(q=4*ne+4*r*(H-1),W=F+(se+ne)*(H<<1),H>>=1)),de===te)W+=4;else{var pe=t[he+3*de],Ne=t[he+3*de+1],Te=t[he+3*de+2];P[W++]=Te,P[W++]=Ne,P[W++]=pe,P[W++]=255}--ye}},this.decodeAndBlitFrameRGBA=function(T,P){var ee=this.frameInfo(T),Ae=ee.width*ee.height,ue=new Uint8Array(Ae);B_(t,ee.data_offset,ue,Ae);var he=ee.palette_offset,te=ee.transparent_index;te===null&&(te=256);var se=ee.width,ne=r-se,ye=se,F=4*(ee.y*r+ee.x),L=4*((ee.y+ee.height)*r+ee.x),W=F,q=4*ne;ee.interlaced===!0&&(q+=4*r*7);for(var H=8,re=0,$=ue.length;re<$;++re){var de=ue[re];if(ye===0&&(ye=se,(W+=q)>=L&&(q=4*ne+4*r*(H-1),W=F+(se+ne)*(H<<1),H>>=1)),de===te)W+=4;else{var pe=t[he+3*de],Ne=t[he+3*de+1],Te=t[he+3*de+2];P[W++]=pe,P[W++]=Ne,P[W++]=Te,P[W++]=255}--ye}}}function B_(t,e,r,n){for(var s=t[e++],i=1<<s,a=i+1,A=a+1,l=s+1,c=(1<<l)-1,u=0,h=0,m=0,p=t[e++],b=new Int32Array(4096),B=null;;){for(;u<16&&p!==0;)h|=t[e++]<<u,u+=8,p===1?p=t[e++]:--p;if(u<l)break;var E=h&c;if(h>>=l,u-=l,E!==i){if(E===a)break;for(var y=E<A?E:B,w=0,S=y;S>i;)S=b[S]>>8,++w;var M=S;if(m+w+(y!==E?1:0)>n)return void Lr.log("Warning, gif stream longer than expected.");r[m++]=M;var R=m+=w;for(y!==E&&(r[m++]=M),S=y;w--;)S=b[S],r[--R]=255&S,S>>=8;B!==null&&A<4096&&(b[A++]=B<<8|M,A>=c+1&&l<12&&(++l,c=c<<1|1)),B=E}else A=a+1,c=(1<<(l=s+1))-1,B=null}return m!==n&&Lr.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Xw(t){var e,r,n,s,i,a=Math.floor,A=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),h=new Array(65535),m=new Array(65535),p=new Array(64),b=new Array(64),B=[],E=0,y=7,w=new Array(64),S=new Array(64),M=new Array(64),R=new Array(256),O=new Array(2048),I=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],_=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],T=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],P=[0,1,2,3,4,5,6,7,8,9,10,11],ee=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Ae=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ue(F,L){for(var W=0,q=0,H=new Array,re=1;re<=16;re++){for(var $=1;$<=F[re];$++)H[L[q]]=[],H[L[q]][0]=W,H[L[q]][1]=re,q++,W++;W*=2}return H}function he(F){for(var L=F[0],W=F[1]-1;W>=0;)L&1<<W&&(E|=1<<y),W--,--y<0&&(E==255?(te(255),te(0)):te(E),y=7,E=0)}function te(F){B.push(F)}function se(F){te(F>>8&255),te(255&F)}function ne(F,L,W,q,H){for(var re,$=H[0],de=H[240],pe=function(Ue,Pe){var Ge,qe,tt,Ze,vt,ht,Ct,Ht,Nt,ie,ve=0;for(Nt=0;Nt<8;++Nt){Ge=Ue[ve],qe=Ue[ve+1],tt=Ue[ve+2],Ze=Ue[ve+3],vt=Ue[ve+4],ht=Ue[ve+5],Ct=Ue[ve+6];var We=Ge+(Ht=Ue[ve+7]),ot=Ge-Ht,yt=qe+Ct,Et=qe-Ct,rt=tt+ht,ur=tt-ht,St=Ze+vt,Pr=Ze-vt,sr=We+St,fr=We-St,fn=yt+rt,vr=yt-rt;Ue[ve]=sr+fn,Ue[ve+4]=sr-fn;var kt=.707106781*(vr+fr);Ue[ve+2]=fr+kt,Ue[ve+6]=fr-kt;var Yt=.382683433*((sr=Pr+ur)-(vr=Et+ot)),us=.5411961*sr+Yt,$r=1.306562965*vr+Yt,mr=.707106781*(fn=ur+Et),Qe=ot+mr,Me=ot-mr;Ue[ve+5]=Me+us,Ue[ve+3]=Me-us,Ue[ve+1]=Qe+$r,Ue[ve+7]=Qe-$r,ve+=8}for(ve=0,Nt=0;Nt<8;++Nt){Ge=Ue[ve],qe=Ue[ve+8],tt=Ue[ve+16],Ze=Ue[ve+24],vt=Ue[ve+32],ht=Ue[ve+40],Ct=Ue[ve+48];var Ft=Ge+(Ht=Ue[ve+56]),ft=Ge-Ht,ct=qe+Ct,Ut=qe-Ct,it=tt+ht,_t=tt-ht,Be=Ze+vt,et=Ze-vt,nt=Ft+Be,Ot=Ft-Be,Zt=ct+it,It=ct-it;Ue[ve]=nt+Zt,Ue[ve+32]=nt-Zt;var mt=.707106781*(It+Ot);Ue[ve+16]=Ot+mt,Ue[ve+48]=Ot-mt;var Ns=.382683433*((nt=et+_t)-(It=Ut+ft)),ma=.5411961*nt+Ns,ga=1.306562965*It+Ns,va=.707106781*(Zt=_t+Ut),$a=ft+va,Wa=ft-va;Ue[ve+40]=Wa+ma,Ue[ve+24]=Wa-ma,Ue[ve+8]=$a+ga,Ue[ve+56]=$a-ga,ve++}for(Nt=0;Nt<64;++Nt)ie=Ue[Nt]*Pe[Nt],p[Nt]=ie>0?ie+.5|0:ie-.5|0;return p}(F,L),Ne=0;Ne<64;++Ne)b[I[Ne]]=pe[Ne];var Te=b[0]-W;W=b[0],Te==0?he(q[0]):(he(q[m[re=32767+Te]]),he(h[re]));for(var Fe=63;Fe>0&&b[Fe]==0;)Fe--;if(Fe==0)return he($),W;for(var oe,ce=1;ce<=Fe;){for(var J=ce;b[ce]==0&&ce<=Fe;)++ce;var Re=ce-J;if(Re>=16){oe=Re>>4;for(var Le=1;Le<=oe;++Le)he(de);Re&=15}re=32767+b[ce],he(H[(Re<<4)+m[re]]),he(h[re]),ce++}return Fe!=63&&he($),W}function ye(F){F=Math.min(Math.max(F,1),100),i!=F&&(function(L){for(var W=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],q=0;q<64;q++){var H=a((W[q]*L+50)/100);H=Math.min(Math.max(H,1),255),A[I[q]]=H}for(var re=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],$=0;$<64;$++){var de=a((re[$]*L+50)/100);de=Math.min(Math.max(de,1),255),l[I[$]]=de}for(var pe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ne=0,Te=0;Te<8;Te++)for(var Fe=0;Fe<8;Fe++)c[Ne]=1/(A[I[Ne]]*pe[Te]*pe[Fe]*8),u[Ne]=1/(l[I[Ne]]*pe[Te]*pe[Fe]*8),Ne++}(F<50?Math.floor(5e3/F):Math.floor(200-2*F)),i=F)}this.encode=function(F,L){L&&ye(L),B=new Array,E=0,y=7,se(65496),se(65504),se(16),te(74),te(70),te(73),te(70),te(0),te(1),te(1),te(0),se(1),se(1),te(0),te(0),function(){se(65499),se(132),te(0);for(var qe=0;qe<64;qe++)te(A[qe]);te(1);for(var tt=0;tt<64;tt++)te(l[tt])}(),function(qe,tt){se(65472),se(17),te(8),se(tt),se(qe),te(3),te(1),te(17),te(0),te(2),te(17),te(1),te(3),te(17),te(1)}(F.width,F.height),function(){se(65476),se(418),te(0);for(var qe=0;qe<16;qe++)te(N[qe+1]);for(var tt=0;tt<=11;tt++)te(j[tt]);te(16);for(var Ze=0;Ze<16;Ze++)te(D[Ze+1]);for(var vt=0;vt<=161;vt++)te(_[vt]);te(1);for(var ht=0;ht<16;ht++)te(T[ht+1]);for(var Ct=0;Ct<=11;Ct++)te(P[Ct]);te(17);for(var Ht=0;Ht<16;Ht++)te(ee[Ht+1]);for(var Nt=0;Nt<=161;Nt++)te(Ae[Nt])}(),se(65498),se(12),te(3),te(1),te(0),te(2),te(17),te(3),te(17),te(0),te(63),te(0);var W=0,q=0,H=0;E=0,y=7,this.encode.displayName="_encode_";for(var re,$,de,pe,Ne,Te,Fe,oe,ce,J=F.data,Re=F.width,Le=F.height,Ue=4*Re,Pe=0;Pe<Le;){for(re=0;re<Ue;){for(Ne=Ue*Pe+re,Fe=-1,oe=0,ce=0;ce<64;ce++)Te=Ne+(oe=ce>>3)*Ue+(Fe=4*(7&ce)),Pe+oe>=Le&&(Te-=Ue*(Pe+1+oe-Le)),re+Fe>=Ue&&(Te-=re+Fe-Ue+4),$=J[Te++],de=J[Te++],pe=J[Te++],w[ce]=(O[$]+O[de+256>>0]+O[pe+512>>0]>>16)-128,S[ce]=(O[$+768>>0]+O[de+1024>>0]+O[pe+1280>>0]>>16)-128,M[ce]=(O[$+1280>>0]+O[de+1536>>0]+O[pe+1792>>0]>>16)-128;W=ne(w,c,W,e,n),q=ne(S,u,q,r,s),H=ne(M,u,H,r,s),re+=32}Pe+=8}if(y>=0){var Ge=[];Ge[1]=y+1,Ge[0]=(1<<y+1)-1,he(Ge)}return se(65497),new Uint8Array(B)},t=t||50,function(){for(var F=String.fromCharCode,L=0;L<256;L++)R[L]=F(L)}(),e=ue(N,j),r=ue(T,P),n=ue(D,_),s=ue(ee,Ae),function(){for(var F=1,L=2,W=1;W<=15;W++){for(var q=F;q<L;q++)m[32767+q]=W,h[32767+q]=[],h[32767+q][1]=W,h[32767+q][0]=q;for(var H=-(L-1);H<=-F;H++)m[32767+H]=W,h[32767+H]=[],h[32767+H][1]=W,h[32767+H][0]=L-1+H;F<<=1,L<<=1}}(),function(){for(var F=0;F<256;F++)O[F]=19595*F,O[F+256>>0]=38470*F,O[F+512>>0]=7471*F+32768,O[F+768>>0]=-11059*F,O[F+1024>>0]=-21709*F,O[F+1280>>0]=32768*F+8421375,O[F+1536>>0]=-27439*F,O[F+1792>>0]=-5329*F}(),ye(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Xi(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function C_(t){function e(N){if(!N)throw Error("assert :P")}function r(N,j,D){for(var _=0;4>_;_++)if(N[j+_]!=D.charCodeAt(_))return!0;return!1}function n(N,j,D,_,T){for(var P=0;P<T;P++)N[j+P]=D[_+P]}function s(N,j,D,_){for(var T=0;T<_;T++)N[j+T]=D}function i(N){return new Int32Array(N)}function a(N,j){for(var D=[],_=0;_<N;_++)D.push(new j);return D}function A(N,j){var D=[];return function _(T,P,ee){for(var Ae=ee[P],ue=0;ue<Ae&&(T.push(ee.length>P+1?[]:new j),!(ee.length<P+1));ue++)_(T[ue],P+1,ee)}(D,0,N),D}var l=function(){var N=this;function j(d,g){for(var x=1<<g-1>>>0;d&x;)x>>>=1;return x?(d&x-1)+x:d}function D(d,g,x,Q,K){e(!(Q%x));do d[g+(Q-=x)]=K;while(0<Q)}function _(d,g,x,Q,K){if(e(2328>=K),512>=K)var G=i(512);else if((G=i(K))==null)return 0;return function(z,Y,Z,ae,me,Ee){var _e,Ce,Ke=Y,ke=1<<Z,ge=i(16),we=i(16);for(e(me!=0),e(ae!=null),e(z!=null),e(0<Z),Ce=0;Ce<me;++Ce){if(15<ae[Ce])return 0;++ge[ae[Ce]]}if(ge[0]==me)return 0;for(we[1]=0,_e=1;15>_e;++_e){if(ge[_e]>1<<_e)return 0;we[_e+1]=we[_e]+ge[_e]}for(Ce=0;Ce<me;++Ce)_e=ae[Ce],0<ae[Ce]&&(Ee[we[_e]++]=Ce);if(we[15]==1)return(ae=new T).g=0,ae.value=Ee[0],D(z,Ke,1,ke,ae),ke;var He,ze=-1,Ve=ke-1,gt=0,At=1,Rt=1,ut=1<<Z;for(Ce=0,_e=1,me=2;_e<=Z;++_e,me<<=1){if(At+=Rt<<=1,0>(Rt-=ge[_e]))return 0;for(;0<ge[_e];--ge[_e])(ae=new T).g=_e,ae.value=Ee[Ce++],D(z,Ke+gt,me,ut,ae),gt=j(gt,_e)}for(_e=Z+1,me=2;15>=_e;++_e,me<<=1){if(At+=Rt<<=1,0>(Rt-=ge[_e]))return 0;for(;0<ge[_e];--ge[_e]){if(ae=new T,(gt&Ve)!=ze){for(Ke+=ut,He=1<<(ze=_e)-Z;15>ze&&!(0>=(He-=ge[ze]));)++ze,He<<=1;ke+=ut=1<<(He=ze-Z),z[Y+(ze=gt&Ve)].g=He+Z,z[Y+ze].value=Ke-Y-ze}ae.g=_e-Z,ae.value=Ee[Ce++],D(z,Ke+(gt>>Z),me,ut,ae),gt=j(gt,_e)}}return At!=2*we[15]-1?0:ke}(d,g,x,Q,K,G)}function T(){this.value=this.g=0}function P(){this.value=this.g=0}function ee(){this.G=a(5,T),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Yn,P)}function Ae(d,g,x,Q){e(d!=null),e(g!=null),e(2147483648>Q),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=g,d.pa=x,d.Jd=g,d.Yc=x+Q,d.Zc=4<=Q?x+Q-4+1:x,re(d)}function ue(d,g){for(var x=0;0<g--;)x|=de(d,128)<<g;return x}function he(d,g){var x=ue(d,g);return $(d)?-x:x}function te(d,g,x,Q){var K,G=0;for(e(d!=null),e(g!=null),e(4294967288>Q),d.Sb=Q,d.Ra=0,d.u=0,d.h=0,4<Q&&(Q=4),K=0;K<Q;++K)G+=g[x+K]<<8*K;d.Ra=G,d.bb=Q,d.oa=g,d.pa=x}function se(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<uu-8>>>0,++d.bb,d.u-=8;W(d)&&(d.h=1,d.u=0)}function ne(d,g){if(e(0<=g),!d.h&&g<=cu){var x=L(d)&lu[g];return d.u+=g,se(d),x}return d.h=1,d.u=0}function ye(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function F(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function L(d){return d.Ra>>>(d.u&uu-1)>>>0}function W(d){return e(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>uu}function q(d,g){d.u=g,d.h=W(d)}function H(d){d.u>=ch&&(e(d.u>=ch),se(d))}function re(d){e(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(e(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function $(d){return ue(d,1)}function de(d,g){var x=d.Ca;0>d.b&&re(d);var Q=d.b,K=x*g>>>8,G=(d.I>>>Q>K)+0;for(G?(x-=K,d.I-=K+1<<Q>>>0):x=K+1,Q=x,K=0;256<=Q;)K+=8,Q>>=8;return Q=7^K+Rs[Q],d.b-=Q,d.Ca=(x<<Q)-1,G}function pe(d,g,x){d[g+0]=x>>24&255,d[g+1]=x>>16&255,d[g+2]=x>>8&255,d[g+3]=x>>0&255}function Ne(d,g){return d[g+0]<<0|d[g+1]<<8}function Te(d,g){return Ne(d,g)|d[g+2]<<16}function Fe(d,g){return Ne(d,g)|Ne(d,g+2)<<16}function oe(d,g){var x=1<<g;return e(d!=null),e(0<g),d.X=i(x),d.X==null?0:(d.Mb=32-g,d.Xa=g,1)}function ce(d,g){e(d!=null),e(g!=null),e(d.Xa==g.Xa),n(g.X,0,d.X,0,1<<g.Xa)}function J(){this.X=[],this.Xa=this.Mb=0}function Re(d,g,x,Q){e(x!=null),e(Q!=null);var K=x[0],G=Q[0];return K==0&&(K=(d*G+g/2)/g),G==0&&(G=(g*K+d/2)/d),0>=K||0>=G?0:(x[0]=K,Q[0]=G,1)}function Le(d,g){return d+(1<<g)-1>>>g}function Ue(d,g){return((4278255360&d)+(4278255360&g)>>>0&4278255360)+((16711935&d)+(16711935&g)>>>0&16711935)>>>0}function Pe(d,g){N[g]=function(x,Q,K,G,z,Y,Z){var ae;for(ae=0;ae<z;++ae){var me=N[d](Y[Z+ae-1],K,G+ae);Y[Z+ae]=Ue(x[Q+ae],me)}}}function Ge(){this.ud=this.hd=this.jd=0}function qe(d,g){return((4278124286&(d^g))>>>1)+(d&g)>>>0}function tt(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function Ze(d,g){return tt(d+(d-g+.5>>1))}function vt(d,g,x){return Math.abs(g-x)-Math.abs(d-x)}function ht(d,g,x,Q,K,G,z){for(Q=G[z-1],x=0;x<K;++x)G[z+x]=Q=Ue(d[g+x],Q)}function Ct(d,g,x,Q,K){var G;for(G=0;G<x;++G){var z=d[g+G],Y=z>>8&255,Z=16711935&(Z=(Z=16711935&z)+((Y<<16)+Y));Q[K+G]=(4278255360&z)+Z>>>0}}function Ht(d,g){g.jd=d>>0&255,g.hd=d>>8&255,g.ud=d>>16&255}function Nt(d,g,x,Q,K,G){var z;for(z=0;z<Q;++z){var Y=g[x+z],Z=Y>>>8,ae=Y,me=255&(me=(me=Y>>>16)+((d.jd<<24>>24)*(Z<<24>>24)>>>5));ae=255&(ae=(ae=ae+((d.hd<<24>>24)*(Z<<24>>24)>>>5))+((d.ud<<24>>24)*(me<<24>>24)>>>5)),K[G+z]=(4278255360&Y)+(me<<16)+ae}}function ie(d,g,x,Q,K){N[g]=function(G,z,Y,Z,ae,me,Ee,_e,Ce){for(Z=Ee;Z<_e;++Z)for(Ee=0;Ee<Ce;++Ee)ae[me++]=K(Y[Q(G[z++])])},N[d]=function(G,z,Y,Z,ae,me,Ee){var _e=8>>G.b,Ce=G.Ea,Ke=G.K[0],ke=G.w;if(8>_e)for(G=(1<<G.b)-1,ke=(1<<_e)-1;z<Y;++z){var ge,we=0;for(ge=0;ge<Ce;++ge)ge&G||(we=Q(Z[ae++])),me[Ee++]=K(Ke[we&ke]),we>>=_e}else N["VP8LMapColor"+x](Z,ae,Ke,ke,me,Ee,z,Y,Ce)}}function ve(d,g,x,Q,K){for(x=g+x;g<x;){var G=d[g++];Q[K++]=G>>16&255,Q[K++]=G>>8&255,Q[K++]=G>>0&255}}function We(d,g,x,Q,K){for(x=g+x;g<x;){var G=d[g++];Q[K++]=G>>16&255,Q[K++]=G>>8&255,Q[K++]=G>>0&255,Q[K++]=G>>24&255}}function ot(d,g,x,Q,K){for(x=g+x;g<x;){var G=(z=d[g++])>>16&240|z>>12&15,z=z>>0&240|z>>28&15;Q[K++]=G,Q[K++]=z}}function yt(d,g,x,Q,K){for(x=g+x;g<x;){var G=(z=d[g++])>>16&248|z>>13&7,z=z>>5&224|z>>3&31;Q[K++]=G,Q[K++]=z}}function Et(d,g,x,Q,K){for(x=g+x;g<x;){var G=d[g++];Q[K++]=G>>0&255,Q[K++]=G>>8&255,Q[K++]=G>>16&255}}function rt(d,g,x,Q,K,G){if(G==0)for(x=g+x;g<x;)pe(Q,((G=d[g++])[0]>>24|G[1]>>8&65280|G[2]<<8&16711680|G[3]<<24)>>>0),K+=32;else n(Q,K,d,g,x)}function ur(d,g){N[g][0]=N[d+"0"],N[g][1]=N[d+"1"],N[g][2]=N[d+"2"],N[g][3]=N[d+"3"],N[g][4]=N[d+"4"],N[g][5]=N[d+"5"],N[g][6]=N[d+"6"],N[g][7]=N[d+"7"],N[g][8]=N[d+"8"],N[g][9]=N[d+"9"],N[g][10]=N[d+"10"],N[g][11]=N[d+"11"],N[g][12]=N[d+"12"],N[g][13]=N[d+"13"],N[g][14]=N[d+"0"],N[g][15]=N[d+"0"]}function St(d){return d==xy||d==by||d==sm||d==By}function Pr(){this.eb=[],this.size=this.A=this.fb=0}function sr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function fr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Pr,this.f.kb=new sr,this.sd=null}function fn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function vr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function kt(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function Yt(d,g){var x=d.T,Q=g.ba.f.RGBA,K=Q.eb,G=Q.fb+d.ka*Q.A,z=Bi[g.ba.S],Y=d.y,Z=d.O,ae=d.f,me=d.N,Ee=d.ea,_e=d.W,Ce=g.cc,Ke=g.dc,ke=g.Mc,ge=g.Nc,we=d.ka,He=d.ka+d.T,ze=d.U,Ve=ze+1>>1;for(we==0?z(Y,Z,null,null,ae,me,Ee,_e,ae,me,Ee,_e,K,G,null,null,ze):(z(g.ec,g.fc,Y,Z,Ce,Ke,ke,ge,ae,me,Ee,_e,K,G-Q.A,K,G,ze),++x);we+2<He;we+=2)Ce=ae,Ke=me,ke=Ee,ge=_e,me+=d.Rc,_e+=d.Rc,G+=2*Q.A,z(Y,(Z+=2*d.fa)-d.fa,Y,Z,Ce,Ke,ke,ge,ae,me,Ee,_e,K,G-Q.A,K,G,ze);return Z+=d.fa,d.j+He<d.o?(n(g.ec,g.fc,Y,Z,ze),n(g.cc,g.dc,ae,me,Ve),n(g.Mc,g.Nc,Ee,_e,Ve),x--):1&He||z(Y,Z,null,null,ae,me,Ee,_e,ae,me,Ee,_e,K,G+Q.A,null,null,ze),x}function us(d,g,x){var Q=d.F,K=[d.J];if(Q!=null){var G=d.U,z=g.ba.S,Y=z==nm||z==sm;g=g.ba.f.RGBA;var Z=[0],ae=d.ka;Z[0]=d.T,d.Kb&&(ae==0?--Z[0]:(--ae,K[0]-=d.width),d.j+d.ka+d.T==d.o&&(Z[0]=d.o-d.j-ae));var me=g.eb;ae=g.fb+ae*g.A,d=Dr(Q,K[0],d.width,G,Z,me,ae+(Y?0:3),g.A),e(x==Z),d&&St(z)&&xi(me,ae,Y,G,Z,g.A)}return 0}function $r(d){var g=d.ma,x=g.ba.S,Q=11>x,K=x==tm||x==rm||x==nm||x==wy||x==12||St(x);if(g.memory=null,g.Ib=null,g.Jb=null,g.Nd=null,!Ah(g.Oa,d,K?11:12))return 0;if(K&&St(x)&&$e(),d.da)alert("todo:use_scaling");else{if(Q){if(g.Ib=kt,d.Kb){if(x=d.U+1>>1,g.memory=i(d.U+2*x),g.memory==null)return 0;g.ec=g.memory,g.fc=0,g.cc=g.ec,g.dc=g.fc+d.U,g.Mc=g.cc,g.Nc=g.dc+x,g.Ib=Yt,$e()}}else alert("todo:EmitYUV");K&&(g.Jb=us,Q&&be())}if(Q&&!LB){for(d=0;256>d;++d)aP[d]=89858*(d-128)+am>>im,lP[d]=-22014*(d-128)+am,AP[d]=-45773*(d-128),oP[d]=113618*(d-128)+am>>im;for(d=gh;d<Ey;++d)g=76283*(d-16)+am>>im,cP[d-gh]=wr(g,255),uP[d-gh]=wr(g+8>>4,15);LB=1}return 1}function mr(d){var g=d.ma,x=d.U,Q=d.T;return e(!(1&d.ka)),0>=x||0>=Q?0:(x=g.Ib(d,g),g.Jb!=null&&g.Jb(d,g,x),g.Dc+=x,1)}function Qe(d){d.ma.memory=null}function Me(d,g,x,Q){return ne(d,8)!=47?0:(g[0]=ne(d,14)+1,x[0]=ne(d,14)+1,Q[0]=ne(d,1),ne(d,3)!=0?0:!d.h)}function Ft(d,g){if(4>d)return d+1;var x=d-2>>1;return(2+(1&d)<<x)+ne(g,x)+1}function ft(d,g){return 120<g?g-120:1<=(x=((x=G3[g-1])>>4)*d+(8-(15&x)))?x:1;var x}function ct(d,g,x){var Q=L(x),K=d[g+=255&Q].g-8;return 0<K&&(q(x,x.u+8),Q=L(x),g+=d[g].value,g+=Q&(1<<K)-1),q(x,x.u+d[g].g),d[g].value}function Ut(d,g,x){return x.g+=d.g,x.value+=d.value<<g>>>0,e(8>=x.g),d.g}function it(d,g,x){var Q=d.xc;return e((g=Q==0?0:d.vc[d.md*(x>>Q)+(g>>Q)])<d.Wb),d.Ya[g]}function _t(d,g,x,Q){var K=d.ab,G=d.c*g,z=d.C;g=z+g;var Y=x,Z=Q;for(Q=d.Ta,x=d.Ua;0<K--;){var ae=d.gc[K],me=z,Ee=g,_e=Y,Ce=Z,Ke=(Z=Q,Y=x,ae.Ea);switch(e(me<Ee),e(Ee<=ae.nc),ae.hc){case 2:$p(_e,Ce,(Ee-me)*Ke,Z,Y);break;case 0:var ke=me,ge=Ee,we=Z,He=Y,ze=(ut=ae).Ea;ke==0&&(vy(_e,Ce,null,null,1,we,He),ht(_e,Ce+1,0,0,ze-1,we,He+1),Ce+=ze,He+=ze,++ke);for(var Ve=1<<ut.b,gt=Ve-1,At=Le(ze,ut.b),Rt=ut.K,ut=ut.w+(ke>>ut.b)*At;ke<ge;){var gr=Rt,Br=ut,dr=1;for(uh(_e,Ce,we,He-ze,1,we,He);dr<ze;){var ar=(dr&~gt)+Ve;ar>ze&&(ar=ze),(0,uA[gr[Br++]>>8&15])(_e,Ce+ +dr,we,He+dr-ze,ar-dr,we,He+dr),dr=ar}Ce+=ze,He+=ze,++ke&gt||(ut+=At)}Ee!=ae.nc&&n(Z,Y-Ke,Z,Y+(Ee-me-1)*Ke,Ke);break;case 1:for(Ke=_e,ge=Ce,ze=(_e=ae.Ea)-(He=_e&~(we=(Ce=1<<ae.b)-1)),ke=Le(_e,ae.b),Ve=ae.K,ae=ae.w+(me>>ae.b)*ke;me<Ee;){for(gt=Ve,At=ae,Rt=new Ge,ut=ge+He,gr=ge+_e;ge<ut;)Ht(gt[At++],Rt),ql(Rt,Ke,ge,Ce,Z,Y),ge+=Ce,Y+=Ce;ge<gr&&(Ht(gt[At++],Rt),ql(Rt,Ke,ge,ze,Z,Y),ge+=ze,Y+=ze),++me&we||(ae+=ke)}break;case 3:if(_e==Z&&Ce==Y&&0<ae.b){for(ge=Z,_e=Ke=Y+(Ee-me)*Ke-(He=(Ee-me)*Le(ae.Ea,ae.b)),Ce=Z,we=Y,ke=[],He=(ze=He)-1;0<=He;--He)ke[He]=Ce[we+He];for(He=ze-1;0<=He;--He)ge[_e+He]=ke[He];vi(ae,me,Ee,Z,Ke,Z,Y)}else vi(ae,me,Ee,_e,Ce,Z,Y)}Y=Q,Z=x}Z!=x&&n(Q,x,Y,Z,G)}function Be(d,g){var x=d.V,Q=d.Ba+d.c*d.C,K=g-d.C;if(e(g<=d.l.o),e(16>=K),0<K){var G=d.l,z=d.Ta,Y=d.Ua,Z=G.width;if(_t(d,K,x,Q),K=Y=[Y],e((x=d.C)<(Q=g)),e(G.v<G.va),Q>G.o&&(Q=G.o),x<G.j){var ae=G.j-x;x=G.j,K[0]+=ae*Z}if(x>=Q?x=0:(K[0]+=4*G.v,G.ka=x-G.j,G.U=G.va-G.v,G.T=Q-x,x=1),x){if(Y=Y[0],11>(x=d.ca).S){var me=x.f.RGBA,Ee=(Q=x.S,K=G.U,G=G.T,ae=me.eb,me.A),_e=G;for(me=me.fb+d.Ma*me.A;0<_e--;){var Ce=z,Ke=Y,ke=K,ge=ae,we=me;switch(Q){case em:Os(Ce,Ke,ke,ge,we);break;case tm:_s(Ce,Ke,ke,ge,we);break;case xy:_s(Ce,Ke,ke,ge,we),xi(ge,we,0,ke,1,0);break;case _B:ao(Ce,Ke,ke,ge,we);break;case rm:rt(Ce,Ke,ke,ge,we,1);break;case by:rt(Ce,Ke,ke,ge,we,1),xi(ge,we,0,ke,1,0);break;case nm:rt(Ce,Ke,ke,ge,we,0);break;case sm:rt(Ce,Ke,ke,ge,we,0),xi(ge,we,1,ke,1,0);break;case wy:dA(Ce,Ke,ke,ge,we);break;case By:dA(Ce,Ke,ke,ge,we),kr(ge,we,ke,1,0);break;case IB:io(Ce,Ke,ke,ge,we);break;default:e(0)}Y+=Z,me+=Ee}d.Ma+=G}else alert("todo:EmitRescaledRowsYUVA");e(d.Ma<=x.height)}}d.C=g,e(d.C<=d.i)}function et(d){var g;if(0<d.ua)return 0;for(g=0;g<d.Wb;++g){var x=d.Ya[g].G,Q=d.Ya[g].H;if(0<x[1][Q[1]+0].g||0<x[2][Q[2]+0].g||0<x[3][Q[3]+0].g)return 0}return 1}function nt(d,g,x,Q,K,G){if(d.Z!=0){var z=d.qd,Y=d.rd;for(e(mA[d.Z]!=null);g<x;++g)mA[d.Z](z,Y,Q,K,Q,K,G),z=Q,Y=K,K+=G;d.qd=z,d.rd=Y}}function Ot(d,g){var x=d.l.ma,Q=x.Z==0||x.Z==1?d.l.j:d.C;if(Q=d.C<Q?Q:d.C,e(g<=d.l.o),g>Q){var K=d.l.width,G=x.ca,z=x.tb+K*Q,Y=d.V,Z=d.Ba+d.c*Q,ae=d.gc;e(d.ab==1),e(ae[0].hc==3),Wp(ae[0],Q,g,Y,Z,G,z),nt(x,Q,g,G,z,K)}d.C=d.Ma=g}function Zt(d,g,x,Q,K,G,z){var Y=d.$/Q,Z=d.$%Q,ae=d.m,me=d.s,Ee=x+d.$,_e=Ee;K=x+Q*K;var Ce=x+Q*G,Ke=280+me.ua,ke=d.Pb?Y:16777216,ge=0<me.ua?me.Wa:null,we=me.wc,He=Ee<Ce?it(me,Z,Y):null;e(d.C<G),e(Ce<=K);var ze=!1;e:for(;;){for(;ze||Ee<Ce;){var Ve=0;if(Y>=ke){var gt=Ee-x;e((ke=d).Pb),ke.wd=ke.m,ke.xd=gt,0<ke.s.ua&&ce(ke.s.Wa,ke.s.vb),ke=Y+$3}if(Z&we||(He=it(me,Z,Y)),e(He!=null),He.Qb&&(g[Ee]=He.qb,ze=!0),!ze)if(H(ae),He.jc){Ve=ae,gt=g;var At=Ee,Rt=He.pd[L(Ve)&Yn-1];e(He.jc),256>Rt.g?(q(Ve,Ve.u+Rt.g),gt[At]=Rt.value,Ve=0):(q(Ve,Ve.u+Rt.g-256),e(256<=Rt.value),Ve=Rt.value),Ve==0&&(ze=!0)}else Ve=ct(He.G[0],He.H[0],ae);if(ae.h)break;if(ze||256>Ve){if(!ze)if(He.nd)g[Ee]=(He.qb|Ve<<8)>>>0;else{if(H(ae),ze=ct(He.G[1],He.H[1],ae),H(ae),gt=ct(He.G[2],He.H[2],ae),At=ct(He.G[3],He.H[3],ae),ae.h)break;g[Ee]=(At<<24|ze<<16|Ve<<8|gt)>>>0}if(ze=!1,++Ee,++Z>=Q&&(Z=0,++Y,z!=null&&Y<=G&&!(Y%16)&&z(d,Y),ge!=null))for(;_e<Ee;)Ve=g[_e++],ge.X[(506832829*Ve&4294967295)>>>ge.Mb]=Ve}else if(280>Ve){if(Ve=Ft(Ve-256,ae),gt=ct(He.G[4],He.H[4],ae),H(ae),gt=ft(Q,gt=Ft(gt,ae)),ae.h)break;if(Ee-x<gt||K-Ee<Ve)break e;for(At=0;At<Ve;++At)g[Ee+At]=g[Ee+At-gt];for(Ee+=Ve,Z+=Ve;Z>=Q;)Z-=Q,++Y,z!=null&&Y<=G&&!(Y%16)&&z(d,Y);if(e(Ee<=K),Z&we&&(He=it(me,Z,Y)),ge!=null)for(;_e<Ee;)Ve=g[_e++],ge.X[(506832829*Ve&4294967295)>>>ge.Mb]=Ve}else{if(!(Ve<Ke))break e;for(ze=Ve-280,e(ge!=null);_e<Ee;)Ve=g[_e++],ge.X[(506832829*Ve&4294967295)>>>ge.Mb]=Ve;Ve=Ee,e(!(ze>>>(gt=ge).Xa)),g[Ve]=gt.X[ze],ze=!0}ze||e(ae.h==W(ae))}if(d.Pb&&ae.h&&Ee<K)e(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&ce(d.s.vb,d.s.Wa);else{if(ae.h)break e;z!=null&&z(d,Y>G?G:Y),d.a=0,d.$=Ee-x}return 1}return d.a=3,0}function It(d){e(d!=null),d.vc=null,d.yc=null,d.Ya=null;var g=d.Wa;g!=null&&(g.X=null),d.vb=null,e(d!=null)}function mt(){var d=new ou;return d==null?null:(d.a=0,d.xb=TB,ur("Predictor","VP8LPredictors"),ur("Predictor","VP8LPredictors_C"),ur("PredictorAdd","VP8LPredictorsAdd"),ur("PredictorAdd","VP8LPredictorsAdd_C"),$p=Ct,ql=Nt,Os=ve,_s=We,dA=ot,io=yt,ao=Et,N.VP8LMapColor32b=du,N.VP8LMapColor8b=Jp,d)}function Ns(d,g,x,Q,K){var G=1,z=[d],Y=[g],Z=Q.m,ae=Q.s,me=null,Ee=0;e:for(;;){if(x)for(;G&&ne(Z,1);){var _e=z,Ce=Y,Ke=Q,ke=1,ge=Ke.m,we=Ke.gc[Ke.ab],He=ne(ge,2);if(Ke.Oc&1<<He)G=0;else{switch(Ke.Oc|=1<<He,we.hc=He,we.Ea=_e[0],we.nc=Ce[0],we.K=[null],++Ke.ab,e(4>=Ke.ab),He){case 0:case 1:we.b=ne(ge,3)+2,ke=Ns(Le(we.Ea,we.b),Le(we.nc,we.b),0,Ke,we.K),we.K=we.K[0];break;case 3:var ze,Ve=ne(ge,8)+1,gt=16<Ve?0:4<Ve?1:2<Ve?2:3;if(_e[0]=Le(we.Ea,gt),we.b=gt,ze=ke=Ns(Ve,1,0,Ke,we.K)){var At,Rt=Ve,ut=we,gr=1<<(8>>ut.b),Br=i(gr);if(Br==null)ze=0;else{var dr=ut.K[0],ar=ut.w;for(Br[0]=ut.K[0][0],At=1;At<1*Rt;++At)Br[At]=Ue(dr[ar+At],Br[At-1]);for(;At<4*gr;++At)Br[At]=0;ut.K[0]=null,ut.K[0]=Br,ze=1}}ke=ze;break;case 2:break;default:e(0)}G=ke}}if(z=z[0],Y=Y[0],G&&ne(Z,1)&&!(G=1<=(Ee=ne(Z,4))&&11>=Ee)){Q.a=3;break e}var jr;if(jr=G)t:{var Fr,Xt,Nn,Ms=Q,En=z,Hs=Y,Cr=Ee,ni=x,si=Ms.m,Rn=Ms.s,Zn=[null],Ss=1,Ci=0,Ia=z3[Cr];r:for(;;){if(ni&&ne(si,1)){var On=ne(si,3)+2,co=Le(En,On),Jl=Le(Hs,On),gu=co*Jl;if(!Ns(co,Jl,0,Ms,Zn))break r;for(Zn=Zn[0],Rn.xc=On,Fr=0;Fr<gu;++Fr){var gA=Zn[Fr]>>8&65535;Zn[Fr]=gA,gA>=Ss&&(Ss=gA+1)}}if(si.h)break r;for(Xt=0;5>Xt;++Xt){var ln=SB[Xt];!Xt&&0<Cr&&(ln+=1<<Cr),Ci<ln&&(Ci=ln)}var _y=a(Ss*Ia,T),RB=Ss,OB=a(RB,ee);if(OB==null)var Am=null;else e(65536>=RB),Am=OB;var vh=i(Ci);if(Am==null||vh==null||_y==null){Ms.a=1;break r}var lm=_y;for(Fr=Nn=0;Fr<Ss;++Fr){var $i=Am[Fr],vu=$i.G,yu=$i.H,MB=0,cm=1,HB=0;for(Xt=0;5>Xt;++Xt){ln=SB[Xt],vu[Xt]=lm,yu[Xt]=Nn,!Xt&&0<Cr&&(ln+=1<<Cr);s:{var um,Iy=ln,dm=Ms,yh=vh,fP=lm,pP=Nn,Sy=0,vA=dm.m,mP=ne(vA,1);if(s(yh,0,0,Iy),mP){var gP=ne(vA,1)+1,vP=ne(vA,1),VB=ne(vA,vP==0?1:8);yh[VB]=1,gP==2&&(yh[VB=ne(vA,8)]=1);var hm=1}else{var KB=i(19),qB=ne(vA,4)+4;if(19<qB){dm.a=3;var fm=0;break s}for(um=0;um<qB;++um)KB[q3[um]]=ne(vA,3);var Fy=void 0,wh=void 0,GB=dm,yP=KB,pm=Iy,zB=yh,Ty=0,yA=GB.m,$B=8,WB=a(128,T);n:for(;_(WB,0,7,yP,19);){if(ne(yA,1)){var wP=2+2*ne(yA,3);if((Fy=2+ne(yA,wP))>pm)break n}else Fy=pm;for(wh=0;wh<pm&&Fy--;){H(yA);var JB=WB[0+(127&L(yA))];q(yA,yA.u+JB.g);var wu=JB.value;if(16>wu)zB[wh++]=wu,wu!=0&&($B=wu);else{var xP=wu==16,XB=wu-16,bP=V3[XB],YB=ne(yA,H3[XB])+bP;if(wh+YB>pm)break n;for(var BP=xP?$B:0;0<YB--;)zB[wh++]=BP}}Ty=1;break n}Ty||(GB.a=3),hm=Ty}(hm=hm&&!vA.h)&&(Sy=_(fP,pP,8,yh,Iy)),hm&&Sy!=0?fm=Sy:(dm.a=3,fm=0)}if(fm==0)break r;if(cm&&K3[Xt]==1&&(cm=lm[Nn].g==0),MB+=lm[Nn].g,Nn+=fm,3>=Xt){var xh,Uy=vh[0];for(xh=1;xh<ln;++xh)vh[xh]>Uy&&(Uy=vh[xh]);HB+=Uy}}if($i.nd=cm,$i.Qb=0,cm&&($i.qb=(vu[3][yu[3]+0].value<<24|vu[1][yu[1]+0].value<<16|vu[2][yu[2]+0].value)>>>0,MB==0&&256>vu[0][yu[0]+0].value&&($i.Qb=1,$i.qb+=vu[0][yu[0]+0].value<<8)),$i.jc=!$i.Qb&&6>HB,$i.jc){var mm,uo=$i;for(mm=0;mm<Yn;++mm){var wA=mm,xA=uo.pd[wA],gm=uo.G[0][uo.H[0]+wA];256<=gm.value?(xA.g=gm.g+256,xA.value=gm.value):(xA.g=0,xA.value=0,wA>>=Ut(gm,8,xA),wA>>=Ut(uo.G[1][uo.H[1]+wA],16,xA),wA>>=Ut(uo.G[2][uo.H[2]+wA],0,xA),Ut(uo.G[3][uo.H[3]+wA],24,xA))}}}Rn.vc=Zn,Rn.Wb=Ss,Rn.Ya=Am,Rn.yc=_y,jr=1;break t}jr=0}if(!(G=jr)){Q.a=3;break e}if(0<Ee){if(ae.ua=1<<Ee,!oe(ae.Wa,Ee)){Q.a=1,G=0;break e}}else ae.ua=0;var Py=Q,ZB=z,CP=Y,Qy=Py.s,jy=Qy.xc;if(Py.c=ZB,Py.i=CP,Qy.md=Le(ZB,jy),Qy.wc=jy==0?-1:(1<<jy)-1,x){Q.xb=tP;break e}if((me=i(z*Y))==null){Q.a=1,G=0;break e}G=(G=Zt(Q,me,0,z,Y,Y,null))&&!Z.h;break e}return G?(K!=null?K[0]=me:(e(me==null),e(x)),Q.$=0,x||It(ae)):It(ae),G}function ma(d,g){var x=d.c*d.i,Q=x+g+16*g;return e(d.c<=g),d.V=i(Q),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+x+g,1)}function ga(d,g){var x=d.C,Q=g-x,K=d.V,G=d.Ba+d.c*x;for(e(g<=d.l.o);0<Q;){var z=16<Q?16:Q,Y=d.l.ma,Z=d.l.width,ae=Z*z,me=Y.ca,Ee=Y.tb+Z*x,_e=d.Ta,Ce=d.Ua;_t(d,z,K,G),mn(_e,Ce,me,Ee,ae),nt(Y,x,x+z,me,Ee,Z),Q-=z,K+=z*d.c,x+=z}e(x==g),d.C=d.Ma=g}function va(){this.ub=this.yd=this.td=this.Rb=0}function $a(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Wa(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Xc(){this.Yb=function(){var d=[];return function g(x,Q,K){for(var G=K[Q],z=0;z<G&&(x.push(K.length>Q+1?[]:0),!(K.length<Q+1));z++)g(x[z],Q+1,K)}(d,0,[3,11]),d}()}function $o(){this.jb=i(3),this.Wc=A([4,8],Xc),this.Xc=A([4,17],Xc)}function Yc(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function ya(){this.ld=this.La=this.dd=this.tc=0}function wa(){this.Na=this.la=0}function Ri(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ja(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function sh(){this.uc=this.M=this.Nb=0,this.wa=Array(new ya),this.Y=0,this.ya=Array(new Ja),this.aa=0,this.l=new Xa}function Tl(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Zc(){this.cb=this.a=0,this.sc="",this.m=new ye,this.Od=new va,this.Kc=new $a,this.ed=new Yc,this.Qa=new Wa,this.Ic=this.$c=this.Aa=0,this.D=new sh,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,ye),this.ia=0,this.pb=a(4,Ri),this.Pa=new $o,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Tl),this.Hd=0,this.rb=Array(new wa),this.sb=0,this.wa=Array(new ya),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ja),this.L=this.aa=0,this.gd=A([4,2],ya),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Xa(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ul(){var d=new Zc;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,mh||(mh=eu)),d}function Hr(d,g,x){return d.a==0&&(d.a=g,d.sc=x,d.cb=0),0}function Pl(d,g,x){return 3<=x&&d[g+0]==157&&d[g+1]==1&&d[g+2]==42}function Ql(d,g){if(d==null)return 0;if(d.a=0,d.sc="OK",g==null)return Hr(d,2,"null VP8Io passed to VP8GetHeaders()");var x=g.data,Q=g.w,K=g.ha;if(4>K)return Hr(d,7,"Truncated header.");var G=x[Q+0]|x[Q+1]<<8|x[Q+2]<<16,z=d.Od;if(z.Rb=!(1&G),z.td=G>>1&7,z.yd=G>>4&1,z.ub=G>>5,3<z.td)return Hr(d,3,"Incorrect keyframe parameters.");if(!z.yd)return Hr(d,4,"Frame not displayable.");Q+=3,K-=3;var Y=d.Kc;if(z.Rb){if(7>K)return Hr(d,7,"cannot parse picture header");if(!Pl(x,Q,K))return Hr(d,3,"Bad code word");Y.c=16383&(x[Q+4]<<8|x[Q+3]),Y.Td=x[Q+4]>>6,Y.i=16383&(x[Q+6]<<8|x[Q+5]),Y.Ud=x[Q+6]>>6,Q+=7,K-=7,d.za=Y.c+15>>4,d.Ub=Y.i+15>>4,g.width=Y.c,g.height=Y.i,g.Da=0,g.j=0,g.v=0,g.va=g.width,g.o=g.height,g.da=0,g.ib=g.width,g.hb=g.height,g.U=g.width,g.T=g.height,s((G=d.Pa).jb,0,255,G.jb.length),e((G=d.Qa)!=null),G.Cb=0,G.Bb=0,G.Fb=1,s(G.Zb,0,0,G.Zb.length),s(G.Lb,0,0,G.Lb)}if(z.ub>K)return Hr(d,7,"bad partition length");Ae(G=d.m,x,Q,z.ub),Q+=z.ub,K-=z.ub,z.Rb&&(Y.Ld=$(G),Y.Kd=$(G)),Y=d.Qa;var Z,ae=d.Pa;if(e(G!=null),e(Y!=null),Y.Cb=$(G),Y.Cb){if(Y.Bb=$(G),$(G)){for(Y.Fb=$(G),Z=0;4>Z;++Z)Y.Zb[Z]=$(G)?he(G,7):0;for(Z=0;4>Z;++Z)Y.Lb[Z]=$(G)?he(G,6):0}if(Y.Bb)for(Z=0;3>Z;++Z)ae.jb[Z]=$(G)?ue(G,8):255}else Y.Bb=0;if(G.Ka)return Hr(d,3,"cannot parse segment header");if((Y=d.ed).zd=$(G),Y.Tb=ue(G,6),Y.wb=ue(G,3),Y.Pc=$(G),Y.Pc&&$(G)){for(ae=0;4>ae;++ae)$(G)&&(Y.vd[ae]=he(G,6));for(ae=0;4>ae;++ae)$(G)&&(Y.od[ae]=he(G,6))}if(d.L=Y.Tb==0?0:Y.zd?1:2,G.Ka)return Hr(d,3,"cannot parse filter header");var me=K;if(K=Z=Q,Q=Z+me,Y=me,d.Xb=(1<<ue(d.m,2))-1,me<3*(ae=d.Xb))x=7;else{for(Z+=3*ae,Y-=3*ae,me=0;me<ae;++me){var Ee=x[K+0]|x[K+1]<<8|x[K+2]<<16;Ee>Y&&(Ee=Y),Ae(d.Jc[+me],x,Z,Ee),Z+=Ee,Y-=Ee,K+=3}Ae(d.Jc[+ae],x,Z,Y),x=Z<Q?0:5}if(x!=0)return Hr(d,x,"cannot parse partitions");for(x=ue(Z=d.m,7),K=$(Z)?he(Z,4):0,Q=$(Z)?he(Z,4):0,Y=$(Z)?he(Z,4):0,ae=$(Z)?he(Z,4):0,Z=$(Z)?he(Z,4):0,me=d.Qa,Ee=0;4>Ee;++Ee){if(me.Cb){var _e=me.Zb[Ee];me.Fb||(_e+=x)}else{if(0<Ee){d.pb[Ee]=d.pb[0];continue}_e=x}var Ce=d.pb[Ee];Ce.Sc[0]=Cy[wr(_e+K,127)],Ce.Sc[1]=Ny[wr(_e+0,127)],Ce.Eb[0]=2*Cy[wr(_e+Q,127)],Ce.Eb[1]=101581*Ny[wr(_e+Y,127)]>>16,8>Ce.Eb[1]&&(Ce.Eb[1]=8),Ce.Qc[0]=Cy[wr(_e+ae,117)],Ce.Qc[1]=Ny[wr(_e+Z,127)],Ce.lc=_e+Z}if(!z.Rb)return Hr(d,4,"Not a key frame.");for($(G),z=d.Pa,x=0;4>x;++x){for(K=0;8>K;++K)for(Q=0;3>Q;++Q)for(Y=0;11>Y;++Y)ae=de(G,Z3[x][K][Q][Y])?ue(G,8):X3[x][K][Q][Y],z.Wc[x][K].Yb[Q][Y]=ae;for(K=0;17>K;++K)z.Xc[x][K]=z.Wc[x][eP[K]]}return d.kc=$(G),d.kc&&(d.Bd=ue(G,8)),d.cb=1}function eu(d,g,x,Q,K,G,z){var Y=g[K].Yb[x];for(x=0;16>K;++K){if(!de(d,Y[x+0]))return K;for(;!de(d,Y[x+1]);)if(Y=g[++K].Yb[0],x=0,K==16)return 16;var Z=g[K+1].Yb;if(de(d,Y[x+2])){var ae=d,me=0;if(de(ae,(_e=Y)[(Ee=x)+3]))if(de(ae,_e[Ee+6])){for(Y=0,Ee=2*(me=de(ae,_e[Ee+8]))+(_e=de(ae,_e[Ee+9+me])),me=0,_e=W3[Ee];_e[Y];++Y)me+=me+de(ae,_e[Y]);me+=3+(8<<Ee)}else de(ae,_e[Ee+7])?(me=7+2*de(ae,165),me+=de(ae,145)):me=5+de(ae,159);else me=de(ae,_e[Ee+4])?3+de(ae,_e[Ee+5]):2;Y=Z[2]}else me=1,Y=Z[1];Z=z+J3[K],0>(ae=d).b&&re(ae);var Ee,_e=ae.b,Ce=(Ee=ae.Ca>>1)-(ae.I>>_e)>>31;--ae.b,ae.Ca+=Ce,ae.Ca|=1,ae.I-=(Ee+1&Ce)<<_e,G[Z]=((me^Ce)-Ce)*Q[(0<K)+0]}return 16}function jl(d){var g=d.rb[d.sb-1];g.la=0,g.Na=0,s(d.zc,0,0,d.zc.length),d.ja=0}function tu(d,g){if(d==null)return 0;if(g==null)return Hr(d,2,"NULL VP8Io parameter in VP8Decode().");if(!d.cb&&!Ql(d,g))return 0;if(e(d.cb),g.ac==null||g.ac(g)){g.ob&&(d.L=0);var x=om[d.L];if(d.L==2?(d.yb=0,d.zb=0):(d.yb=g.v-x>>4,d.zb=g.j-x>>4,0>d.yb&&(d.yb=0),0>d.zb&&(d.zb=0)),d.Va=g.o+15+x>>4,d.Hb=g.va+15+x>>4,d.Hb>d.za&&(d.Hb=d.za),d.Va>d.Ub&&(d.Va=d.Ub),0<d.L){var Q=d.ed;for(x=0;4>x;++x){var K;if(d.Qa.Cb){var G=d.Qa.Lb[x];d.Qa.Fb||(G+=Q.Tb)}else G=Q.Tb;for(K=0;1>=K;++K){var z=d.gd[x][K],Y=G;if(Q.Pc&&(Y+=Q.vd[0],K&&(Y+=Q.od[0])),0<(Y=0>Y?0:63<Y?63:Y)){var Z=Y;0<Q.wb&&(Z=4<Q.wb?Z>>2:Z>>1)>9-Q.wb&&(Z=9-Q.wb),1>Z&&(Z=1),z.dd=Z,z.tc=2*Y+Z,z.ld=40<=Y?2:15<=Y?1:0}else z.tc=0;z.La=K}}}x=0}else Hr(d,6,"Frame setup failed"),x=d.a;if(x=x==0){if(x){d.$c=0,0<d.Aa||(d.Ic=hP);e:{x=d.Ic,Q=4*(Z=d.za);var ae=32*Z,me=Z+1,Ee=0<d.L?Z*(0<d.Aa?2:1):0,_e=(d.Aa==2?2:1)*Z;if((z=Q+832+(K=3*(16*x+om[d.L])/2*ae)+(G=d.Fa!=null&&0<d.Fa.length?d.Kc.c*d.Kc.i:0))!=z)x=0;else{if(z>d.Vb){if(d.Vb=0,d.Ec=i(z),d.Fc=0,d.Ec==null){x=Hr(d,1,"no memory during frame initialization.");break e}d.Vb=z}z=d.Ec,Y=d.Fc,d.Ac=z,d.Bc=Y,Y+=Q,d.Gd=a(ae,Tl),d.Hd=0,d.rb=a(me+1,wa),d.sb=1,d.wa=Ee?a(Ee,ya):null,d.Y=0,d.D.Nb=0,d.D.wa=d.wa,d.D.Y=d.Y,0<d.Aa&&(d.D.Y+=Z),e(!0),d.oc=z,d.pc=Y,Y+=832,d.ya=a(_e,Ja),d.aa=0,d.D.ya=d.ya,d.D.aa=d.aa,d.Aa==2&&(d.D.aa+=Z),d.R=16*Z,d.B=8*Z,Z=(ae=om[d.L])*d.R,ae=ae/2*d.B,d.sa=z,d.ta=Y+Z,d.qa=d.sa,d.ra=d.ta+16*x*d.R+ae,d.Ha=d.qa,d.Ia=d.ra+8*x*d.B+ae,d.$c=0,Y+=K,d.mb=G?z:null,d.nb=G?Y:null,e(Y+G<=d.Fc+d.Vb),jl(d),s(d.Ac,d.Bc,0,Q),x=1}}if(x){if(g.ka=0,g.y=d.sa,g.O=d.ta,g.f=d.qa,g.N=d.ra,g.ea=d.Ha,g.Vd=d.Ia,g.fa=d.R,g.Rc=d.B,g.F=null,g.J=0,!Yp){for(x=-255;255>=x;++x)Tn[255+x]=0>x?-x:x;for(x=-1020;1020>=x;++x)Ao[1020+x]=-128>x?-128:127<x?127:x;for(x=-112;112>=x;++x)ph[112+x]=-16>x?-16:15<x?15:x;for(x=-255;510>=x;++x)mu[255+x]=0>x?0:255<x?255:x;Yp=1}hu=eo,oo=Jo,dh=Ll,Is=br,yi=Za,pn=Ya,fu=nA,Xp=Ki,hh=iA,Gl=Kl,zl=sA,hA=ro,$l=aA,pu=Ca,Wl=to,fA=ti,fh=Fn,wi=au,zi[0]=gi,zi[1]=ih,zi[2]=ba,zi[3]=oh,zi[4]=su,zi[5]=Zo,zi[6]=Zs,zi[7]=Dl,zi[8]=tA,zi[9]=eA,pA[0]=xa,pA[1]=ah,pA[2]=Mi,pA[3]=Xo,pA[4]=Vr,pA[5]=nu,pA[6]=kl,lo[0]=Vi,lo[1]=ru,lo[2]=iu,lo[3]=Hi,lo[4]=yr,lo[5]=Rl,lo[6]=Ol,x=1}else x=0}x&&(x=function(Ce,Ke){for(Ce.M=0;Ce.M<Ce.Va;++Ce.M){var ke,ge=Ce.Jc[Ce.M&Ce.Xb],we=Ce.m,He=Ce;for(ke=0;ke<He.za;++ke){var ze=we,Ve=He,gt=Ve.Ac,At=Ve.Bc+4*ke,Rt=Ve.zc,ut=Ve.ya[Ve.aa+ke];if(Ve.Qa.Bb?ut.$b=de(ze,Ve.Pa.jb[0])?2+de(ze,Ve.Pa.jb[2]):de(ze,Ve.Pa.jb[1]):ut.$b=0,Ve.kc&&(ut.Ad=de(ze,Ve.Bd)),ut.Za=!de(ze,145)+0,ut.Za){var gr=ut.Ob,Br=0;for(Ve=0;4>Ve;++Ve){var dr,ar=Rt[0+Ve];for(dr=0;4>dr;++dr){ar=Y3[gt[At+dr]][ar];for(var jr=FB[de(ze,ar[0])];0<jr;)jr=FB[2*jr+de(ze,ar[jr])];ar=-jr,gt[At+dr]=ar}n(gr,Br,gt,At,4),Br+=4,Rt[0+Ve]=ar}}else ar=de(ze,156)?de(ze,128)?1:3:de(ze,163)?2:0,ut.Ob[0]=ar,s(gt,At,ar,4),s(Rt,0,ar,4);ut.Dd=de(ze,142)?de(ze,114)?de(ze,183)?1:3:2:0}if(He.m.Ka)return Hr(Ce,7,"Premature end-of-partition0 encountered.");for(;Ce.ja<Ce.za;++Ce.ja){if(He=ge,ze=(we=Ce).rb[we.sb-1],gt=we.rb[we.sb+we.ja],ke=we.ya[we.aa+we.ja],At=we.kc?ke.Ad:0)ze.la=gt.la=0,ke.Za||(ze.Na=gt.Na=0),ke.Hc=0,ke.Gc=0,ke.ia=0;else{var Fr,Xt;if(ze=gt,gt=He,At=we.Pa.Xc,Rt=we.ya[we.aa+we.ja],ut=we.pb[Rt.$b],Ve=Rt.ad,gr=0,Br=we.rb[we.sb-1],ar=dr=0,s(Ve,gr,0,384),Rt.Za)var Nn=0,Ms=At[3];else{jr=i(16);var En=ze.Na+Br.Na;if(En=mh(gt,At[1],En,ut.Eb,0,jr,0),ze.Na=Br.Na=(0<En)+0,1<En)hu(jr,0,Ve,gr);else{var Hs=jr[0]+3>>3;for(jr=0;256>jr;jr+=16)Ve[gr+jr]=Hs}Nn=1,Ms=At[0]}var Cr=15&ze.la,ni=15&Br.la;for(jr=0;4>jr;++jr){var si=1&ni;for(Hs=Xt=0;4>Hs;++Hs)Cr=Cr>>1|(si=(En=mh(gt,Ms,En=si+(1&Cr),ut.Sc,Nn,Ve,gr))>Nn)<<7,Xt=Xt<<2|(3<En?3:1<En?2:Ve[gr+0]!=0),gr+=16;Cr>>=4,ni=ni>>1|si<<7,dr=(dr<<8|Xt)>>>0}for(Ms=Cr,Nn=ni>>4,Fr=0;4>Fr;Fr+=2){for(Xt=0,Cr=ze.la>>4+Fr,ni=Br.la>>4+Fr,jr=0;2>jr;++jr){for(si=1&ni,Hs=0;2>Hs;++Hs)En=si+(1&Cr),Cr=Cr>>1|(si=0<(En=mh(gt,At[2],En,ut.Qc,0,Ve,gr)))<<3,Xt=Xt<<2|(3<En?3:1<En?2:Ve[gr+0]!=0),gr+=16;Cr>>=2,ni=ni>>1|si<<5}ar|=Xt<<4*Fr,Ms|=Cr<<4<<Fr,Nn|=(240&ni)<<Fr}ze.la=Ms,Br.la=Nn,Rt.Hc=dr,Rt.Gc=ar,Rt.ia=43690&ar?0:ut.ia,At=!(dr|ar)}if(0<we.L&&(we.wa[we.Y+we.ja]=we.gd[ke.$b][ke.Za],we.wa[we.Y+we.ja].La|=!At),He.Ka)return Hr(Ce,7,"Premature end-of-file encountered.")}if(jl(Ce),we=Ke,He=1,ke=(ge=Ce).D,ze=0<ge.L&&ge.M>=ge.zb&&ge.M<=ge.Va,ge.Aa==0)e:{if(ke.M=ge.M,ke.uc=ze,Ea(ge,ke),He=1,ke=(Xt=ge.D).Nb,ze=(ar=om[ge.L])*ge.R,gt=ar/2*ge.B,jr=16*ke*ge.R,Hs=8*ke*ge.B,At=ge.sa,Rt=ge.ta-ze+jr,ut=ge.qa,Ve=ge.ra-gt+Hs,gr=ge.Ha,Br=ge.Ia-gt+Hs,ni=(Cr=Xt.M)==0,dr=Cr>=ge.Va-1,ge.Aa==2&&Ea(ge,Xt),Xt.uc)for(si=(En=ge).D.M,e(En.D.uc),Xt=En.yb;Xt<En.Hb;++Xt){Nn=Xt,Ms=si;var Rn=(Zn=(ln=En).D).Nb;Fr=ln.R;var Zn=Zn.wa[Zn.Y+Nn],Ss=ln.sa,Ci=ln.ta+16*Rn*Fr+16*Nn,Ia=Zn.dd,On=Zn.tc;if(On!=0)if(e(3<=On),ln.L==1)0<Nn&&fA(Ss,Ci,Fr,On+4),Zn.La&&wi(Ss,Ci,Fr,On),0<Ms&&Wl(Ss,Ci,Fr,On+4),Zn.La&&fh(Ss,Ci,Fr,On);else{var co=ln.B,Jl=ln.qa,gu=ln.ra+8*Rn*co+8*Nn,gA=ln.Ha,ln=ln.Ia+8*Rn*co+8*Nn;Rn=Zn.ld,0<Nn&&(Xp(Ss,Ci,Fr,On+4,Ia,Rn),Gl(Jl,gu,gA,ln,co,On+4,Ia,Rn)),Zn.La&&(hA(Ss,Ci,Fr,On,Ia,Rn),pu(Jl,gu,gA,ln,co,On,Ia,Rn)),0<Ms&&(fu(Ss,Ci,Fr,On+4,Ia,Rn),hh(Jl,gu,gA,ln,co,On+4,Ia,Rn)),Zn.La&&(zl(Ss,Ci,Fr,On,Ia,Rn),$l(Jl,gu,gA,ln,co,On,Ia,Rn))}}if(ge.ia&&alert("todo:DitherRow"),we.put!=null){if(Xt=16*Cr,Cr=16*(Cr+1),ni?(we.y=ge.sa,we.O=ge.ta+jr,we.f=ge.qa,we.N=ge.ra+Hs,we.ea=ge.Ha,we.W=ge.Ia+Hs):(Xt-=ar,we.y=At,we.O=Rt,we.f=ut,we.N=Ve,we.ea=gr,we.W=Br),dr||(Cr-=ar),Cr>we.o&&(Cr=we.o),we.F=null,we.J=null,ge.Fa!=null&&0<ge.Fa.length&&Xt<Cr&&(we.J=cA(ge,we,Xt,Cr-Xt),we.F=ge.mb,we.F==null&&we.F.length==0)){He=Hr(ge,3,"Could not decode alpha data.");break e}Xt<we.j&&(ar=we.j-Xt,Xt=we.j,e(!(1&ar)),we.O+=ge.R*ar,we.N+=ge.B*(ar>>1),we.W+=ge.B*(ar>>1),we.F!=null&&(we.J+=we.width*ar)),Xt<Cr&&(we.O+=we.v,we.N+=we.v>>1,we.W+=we.v>>1,we.F!=null&&(we.J+=we.v),we.ka=Xt-we.j,we.U=we.va-we.v,we.T=Cr-Xt,He=we.put(we))}ke+1!=ge.Ic||dr||(n(ge.sa,ge.ta-ze,At,Rt+16*ge.R,ze),n(ge.qa,ge.ra-gt,ut,Ve+8*ge.B,gt),n(ge.Ha,ge.Ia-gt,gr,Br+8*ge.B,gt))}if(!He)return Hr(Ce,6,"Output aborted.")}return 1}(d,g)),g.bc!=null&&g.bc(g),x&=1}return x?(d.cb=0,x):0}function Ds(d,g,x,Q,K){K=d[g+x+32*Q]+(K>>3),d[g+x+32*Q]=-256&K?0>K?0:255:K}function Wo(d,g,x,Q,K,G){Ds(d,g,0,x,Q+K),Ds(d,g,1,x,Q+G),Ds(d,g,2,x,Q-G),Ds(d,g,3,x,Q-K)}function An(d){return(20091*d>>16)+d}function Es(d,g,x,Q){var K,G=0,z=i(16);for(K=0;4>K;++K){var Y=d[g+0]+d[g+8],Z=d[g+0]-d[g+8],ae=(35468*d[g+4]>>16)-An(d[g+12]),me=An(d[g+4])+(35468*d[g+12]>>16);z[G+0]=Y+me,z[G+1]=Z+ae,z[G+2]=Z-ae,z[G+3]=Y-me,G+=4,g++}for(K=G=0;4>K;++K)Y=(d=z[G+0]+4)+z[G+8],Z=d-z[G+8],ae=(35468*z[G+4]>>16)-An(z[G+12]),Ds(x,Q,0,0,Y+(me=An(z[G+4])+(35468*z[G+12]>>16))),Ds(x,Q,1,0,Z+ae),Ds(x,Q,2,0,Z-ae),Ds(x,Q,3,0,Y-me),G++,Q+=32}function Ya(d,g,x,Q){var K=d[g+0]+4,G=35468*d[g+4]>>16,z=An(d[g+4]),Y=35468*d[g+1]>>16;Wo(x,Q,0,K+z,d=An(d[g+1]),Y),Wo(x,Q,1,K+G,d,Y),Wo(x,Q,2,K-G,d,Y),Wo(x,Q,3,K-z,d,Y)}function Jo(d,g,x,Q,K){Es(d,g,x,Q),K&&Es(d,g+16,x,Q+4)}function Ll(d,g,x,Q){oo(d,g+0,x,Q,1),oo(d,g+32,x,Q+128,1)}function br(d,g,x,Q){var K;for(d=d[g+0]+4,K=0;4>K;++K)for(g=0;4>g;++g)Ds(x,Q,g,K,d)}function Za(d,g,x,Q){d[g+0]&&Is(d,g+0,x,Q),d[g+16]&&Is(d,g+16,x,Q+4),d[g+32]&&Is(d,g+32,x,Q+128),d[g+48]&&Is(d,g+48,x,Q+128+4)}function eo(d,g,x,Q){var K,G=i(16);for(K=0;4>K;++K){var z=d[g+0+K]+d[g+12+K],Y=d[g+4+K]+d[g+8+K],Z=d[g+4+K]-d[g+8+K],ae=d[g+0+K]-d[g+12+K];G[0+K]=z+Y,G[8+K]=z-Y,G[4+K]=ae+Z,G[12+K]=ae-Z}for(K=0;4>K;++K)z=(d=G[0+4*K]+3)+G[3+4*K],Y=G[1+4*K]+G[2+4*K],Z=G[1+4*K]-G[2+4*K],ae=d-G[3+4*K],x[Q+0]=z+Y>>3,x[Q+16]=ae+Z>>3,x[Q+32]=z-Y>>3,x[Q+48]=ae-Z>>3,Q+=64}function Oi(d,g,x){var Q,K=g-32,G=ri,z=255-d[K-1];for(Q=0;Q<x;++Q){var Y,Z=G,ae=z+d[g-1];for(Y=0;Y<x;++Y)d[g+Y]=Z[ae+d[K+Y]];g+=32}}function ih(d,g){Oi(d,g,4)}function ru(d,g){Oi(d,g,8)}function ah(d,g){Oi(d,g,16)}function Mi(d,g){var x;for(x=0;16>x;++x)n(d,g+32*x,d,g-32,16)}function Xo(d,g){var x;for(x=16;0<x;--x)s(d,g,d[g-1],16),g+=32}function Yo(d,g,x){var Q;for(Q=0;16>Q;++Q)s(g,x+32*Q,d,16)}function xa(d,g){var x,Q=16;for(x=0;16>x;++x)Q+=d[g-1+32*x]+d[g+x-32];Yo(Q>>5,d,g)}function Vr(d,g){var x,Q=8;for(x=0;16>x;++x)Q+=d[g-1+32*x];Yo(Q>>4,d,g)}function nu(d,g){var x,Q=8;for(x=0;16>x;++x)Q+=d[g+x-32];Yo(Q>>4,d,g)}function kl(d,g){Yo(128,d,g)}function Vt(d,g,x){return d+2*g+x+2>>2}function ba(d,g){var x,Q=g-32;for(Q=new Uint8Array([Vt(d[Q-1],d[Q+0],d[Q+1]),Vt(d[Q+0],d[Q+1],d[Q+2]),Vt(d[Q+1],d[Q+2],d[Q+3]),Vt(d[Q+2],d[Q+3],d[Q+4])]),x=0;4>x;++x)n(d,g+32*x,Q,0,Q.length)}function oh(d,g){var x=d[g-1],Q=d[g-1+32],K=d[g-1+64],G=d[g-1+96];pe(d,g+0,16843009*Vt(d[g-1-32],x,Q)),pe(d,g+32,16843009*Vt(x,Q,K)),pe(d,g+64,16843009*Vt(Q,K,G)),pe(d,g+96,16843009*Vt(K,G,G))}function gi(d,g){var x,Q=4;for(x=0;4>x;++x)Q+=d[g+x-32]+d[g-1+32*x];for(Q>>=3,x=0;4>x;++x)s(d,g+32*x,Q,4)}function su(d,g){var x=d[g-1+0],Q=d[g-1+32],K=d[g-1+64],G=d[g-1-32],z=d[g+0-32],Y=d[g+1-32],Z=d[g+2-32],ae=d[g+3-32];d[g+0+96]=Vt(Q,K,d[g-1+96]),d[g+1+96]=d[g+0+64]=Vt(x,Q,K),d[g+2+96]=d[g+1+64]=d[g+0+32]=Vt(G,x,Q),d[g+3+96]=d[g+2+64]=d[g+1+32]=d[g+0+0]=Vt(z,G,x),d[g+3+64]=d[g+2+32]=d[g+1+0]=Vt(Y,z,G),d[g+3+32]=d[g+2+0]=Vt(Z,Y,z),d[g+3+0]=Vt(ae,Z,Y)}function Zs(d,g){var x=d[g+1-32],Q=d[g+2-32],K=d[g+3-32],G=d[g+4-32],z=d[g+5-32],Y=d[g+6-32],Z=d[g+7-32];d[g+0+0]=Vt(d[g+0-32],x,Q),d[g+1+0]=d[g+0+32]=Vt(x,Q,K),d[g+2+0]=d[g+1+32]=d[g+0+64]=Vt(Q,K,G),d[g+3+0]=d[g+2+32]=d[g+1+64]=d[g+0+96]=Vt(K,G,z),d[g+3+32]=d[g+2+64]=d[g+1+96]=Vt(G,z,Y),d[g+3+64]=d[g+2+96]=Vt(z,Y,Z),d[g+3+96]=Vt(Y,Z,Z)}function Zo(d,g){var x=d[g-1+0],Q=d[g-1+32],K=d[g-1+64],G=d[g-1-32],z=d[g+0-32],Y=d[g+1-32],Z=d[g+2-32],ae=d[g+3-32];d[g+0+0]=d[g+1+64]=G+z+1>>1,d[g+1+0]=d[g+2+64]=z+Y+1>>1,d[g+2+0]=d[g+3+64]=Y+Z+1>>1,d[g+3+0]=Z+ae+1>>1,d[g+0+96]=Vt(K,Q,x),d[g+0+64]=Vt(Q,x,G),d[g+0+32]=d[g+1+96]=Vt(x,G,z),d[g+1+32]=d[g+2+96]=Vt(G,z,Y),d[g+2+32]=d[g+3+96]=Vt(z,Y,Z),d[g+3+32]=Vt(Y,Z,ae)}function Dl(d,g){var x=d[g+0-32],Q=d[g+1-32],K=d[g+2-32],G=d[g+3-32],z=d[g+4-32],Y=d[g+5-32],Z=d[g+6-32],ae=d[g+7-32];d[g+0+0]=x+Q+1>>1,d[g+1+0]=d[g+0+64]=Q+K+1>>1,d[g+2+0]=d[g+1+64]=K+G+1>>1,d[g+3+0]=d[g+2+64]=G+z+1>>1,d[g+0+32]=Vt(x,Q,K),d[g+1+32]=d[g+0+96]=Vt(Q,K,G),d[g+2+32]=d[g+1+96]=Vt(K,G,z),d[g+3+32]=d[g+2+96]=Vt(G,z,Y),d[g+3+64]=Vt(z,Y,Z),d[g+3+96]=Vt(Y,Z,ae)}function eA(d,g){var x=d[g-1+0],Q=d[g-1+32],K=d[g-1+64],G=d[g-1+96];d[g+0+0]=x+Q+1>>1,d[g+2+0]=d[g+0+32]=Q+K+1>>1,d[g+2+32]=d[g+0+64]=K+G+1>>1,d[g+1+0]=Vt(x,Q,K),d[g+3+0]=d[g+1+32]=Vt(Q,K,G),d[g+3+32]=d[g+1+64]=Vt(K,G,G),d[g+3+64]=d[g+2+64]=d[g+0+96]=d[g+1+96]=d[g+2+96]=d[g+3+96]=G}function tA(d,g){var x=d[g-1+0],Q=d[g-1+32],K=d[g-1+64],G=d[g-1+96],z=d[g-1-32],Y=d[g+0-32],Z=d[g+1-32],ae=d[g+2-32];d[g+0+0]=d[g+2+32]=x+z+1>>1,d[g+0+32]=d[g+2+64]=Q+x+1>>1,d[g+0+64]=d[g+2+96]=K+Q+1>>1,d[g+0+96]=G+K+1>>1,d[g+3+0]=Vt(Y,Z,ae),d[g+2+0]=Vt(z,Y,Z),d[g+1+0]=d[g+3+32]=Vt(x,z,Y),d[g+1+32]=d[g+3+64]=Vt(Q,x,z),d[g+1+64]=d[g+3+96]=Vt(K,Q,x),d[g+1+96]=Vt(G,K,Q)}function iu(d,g){var x;for(x=0;8>x;++x)n(d,g+32*x,d,g-32,8)}function Hi(d,g){var x;for(x=0;8>x;++x)s(d,g,d[g-1],8),g+=32}function ei(d,g,x){var Q;for(Q=0;8>Q;++Q)s(g,x+32*Q,d,8)}function Vi(d,g){var x,Q=8;for(x=0;8>x;++x)Q+=d[g+x-32]+d[g-1+32*x];ei(Q>>4,d,g)}function Rl(d,g){var x,Q=4;for(x=0;8>x;++x)Q+=d[g+x-32];ei(Q>>3,d,g)}function yr(d,g){var x,Q=4;for(x=0;8>x;++x)Q+=d[g-1+32*x];ei(Q>>3,d,g)}function Ol(d,g){ei(128,d,g)}function rA(d,g,x){var Q=d[g-x],K=d[g+0],G=3*(K-Q)+yy[1020+d[g-2*x]-d[g+x]],z=Zp[112+(G+4>>3)];d[g-x]=ri[255+Q+Zp[112+(G+3>>3)]],d[g+0]=ri[255+K-z]}function Ml(d,g,x,Q){var K=d[g+0],G=d[g+x];return bi[255+d[g-2*x]-d[g-x]]>Q||bi[255+G-K]>Q}function Hl(d,g,x,Q){return 4*bi[255+d[g-x]-d[g+0]]+bi[255+d[g-2*x]-d[g+x]]<=Q}function Vl(d,g,x,Q,K){var G=d[g-3*x],z=d[g-2*x],Y=d[g-x],Z=d[g+0],ae=d[g+x],me=d[g+2*x],Ee=d[g+3*x];return 4*bi[255+Y-Z]+bi[255+z-ae]>Q?0:bi[255+d[g-4*x]-G]<=K&&bi[255+G-z]<=K&&bi[255+z-Y]<=K&&bi[255+Ee-me]<=K&&bi[255+me-ae]<=K&&bi[255+ae-Z]<=K}function to(d,g,x,Q){var K=2*Q+1;for(Q=0;16>Q;++Q)Hl(d,g+Q,x,K)&&rA(d,g+Q,x)}function ti(d,g,x,Q){var K=2*Q+1;for(Q=0;16>Q;++Q)Hl(d,g+Q*x,1,K)&&rA(d,g+Q*x,1)}function Fn(d,g,x,Q){var K;for(K=3;0<K;--K)to(d,g+=4*x,x,Q)}function au(d,g,x,Q){var K;for(K=3;0<K;--K)ti(d,g+=4,x,Q)}function Ba(d,g,x,Q,K,G,z,Y){for(G=2*G+1;0<K--;){if(Vl(d,g,x,G,z))if(Ml(d,g,x,Y))rA(d,g,x);else{var Z=d,ae=g,me=x,Ee=Z[ae-2*me],_e=Z[ae-me],Ce=Z[ae+0],Ke=Z[ae+me],ke=Z[ae+2*me],ge=27*(He=yy[1020+3*(Ce-_e)+yy[1020+Ee-Ke]])+63>>7,we=18*He+63>>7,He=9*He+63>>7;Z[ae-3*me]=ri[255+Z[ae-3*me]+He],Z[ae-2*me]=ri[255+Ee+we],Z[ae-me]=ri[255+_e+ge],Z[ae+0]=ri[255+Ce-ge],Z[ae+me]=ri[255+Ke-we],Z[ae+2*me]=ri[255+ke-He]}g+=Q}}function Jn(d,g,x,Q,K,G,z,Y){for(G=2*G+1;0<K--;){if(Vl(d,g,x,G,z))if(Ml(d,g,x,Y))rA(d,g,x);else{var Z=d,ae=g,me=x,Ee=Z[ae-me],_e=Z[ae+0],Ce=Z[ae+me],Ke=Zp[112+((ke=3*(_e-Ee))+4>>3)],ke=Zp[112+(ke+3>>3)],ge=Ke+1>>1;Z[ae-2*me]=ri[255+Z[ae-2*me]+ge],Z[ae-me]=ri[255+Ee+ke],Z[ae+0]=ri[255+_e-Ke],Z[ae+me]=ri[255+Ce-ge]}g+=Q}}function nA(d,g,x,Q,K,G){Ba(d,g,x,1,16,Q,K,G)}function Ki(d,g,x,Q,K,G){Ba(d,g,1,x,16,Q,K,G)}function sA(d,g,x,Q,K,G){var z;for(z=3;0<z;--z)Jn(d,g+=4*x,x,1,16,Q,K,G)}function ro(d,g,x,Q,K,G){var z;for(z=3;0<z;--z)Jn(d,g+=4,1,x,16,Q,K,G)}function iA(d,g,x,Q,K,G,z,Y){Ba(d,g,K,1,8,G,z,Y),Ba(x,Q,K,1,8,G,z,Y)}function Kl(d,g,x,Q,K,G,z,Y){Ba(d,g,1,K,8,G,z,Y),Ba(x,Q,1,K,8,G,z,Y)}function aA(d,g,x,Q,K,G,z,Y){Jn(d,g+4*K,K,1,8,G,z,Y),Jn(x,Q+4*K,K,1,8,G,z,Y)}function Ca(d,g,x,Q,K,G,z,Y){Jn(d,g+4,1,K,8,G,z,Y),Jn(x,Q+4,1,K,8,G,z,Y)}function no(){this.ba=new fr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new vr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function oA(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function so(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function AA(){this.ua=0,this.Wa=new J,this.vb=new J,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ee,this.yc=new T}function ou(){this.xb=this.a=0,this.l=new Xa,this.ca=new fr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new F,this.Pb=0,this.wd=new F,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new AA,this.ab=0,this.gc=a(4,so),this.Oc=0}function qi(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Xa,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Na(d,g,x,Q,K,G,z){for(d=d==null?0:d[g+0],g=0;g<z;++g)K[G+g]=d+x[Q+g]&255,d=K[G+g]}function lA(d,g,x,Q,K,G,z){var Y;if(d==null)Na(null,null,x,Q,K,G,z);else for(Y=0;Y<z;++Y)K[G+Y]=d[g+Y]+x[Q+Y]&255}function ds(d,g,x,Q,K,G,z){if(d==null)Na(null,null,x,Q,K,G,z);else{var Y,Z=d[g+0],ae=Z,me=Z;for(Y=0;Y<z;++Y)ae=me+(Z=d[g+Y])-ae,me=x[Q+Y]+(-256&ae?0>ae?0:255:ae)&255,ae=Z,K[G+Y]=me}}function cA(d,g,x,Q){var K=g.width,G=g.o;if(e(d!=null&&g!=null),0>x||0>=Q||x+Q>G)return null;if(!d.Cc){if(d.ga==null){var z;if(d.ga=new qi,(z=d.ga==null)||(z=g.width*g.o,e(d.Gb.length==0),d.Gb=i(z),d.Uc=0,d.Gb==null?z=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,z=1),z=!z),!z){z=d.ga;var Y=d.Fa,Z=d.P,ae=d.qc,me=d.mb,Ee=d.nb,_e=Z+1,Ce=ae-1,Ke=z.l;if(e(Y!=null&&me!=null&&g!=null),mA[0]=null,mA[1]=Na,mA[2]=lA,mA[3]=ds,z.ca=me,z.tb=Ee,z.c=g.width,z.i=g.height,e(0<z.c&&0<z.i),1>=ae)g=0;else if(z.$a=Y[Z+0]>>0&3,z.Z=Y[Z+0]>>2&3,z.Lc=Y[Z+0]>>4&3,Z=Y[Z+0]>>6&3,0>z.$a||1<z.$a||4<=z.Z||1<z.Lc||Z)g=0;else if(Ke.put=mr,Ke.ac=$r,Ke.bc=Qe,Ke.ma=z,Ke.width=g.width,Ke.height=g.height,Ke.Da=g.Da,Ke.v=g.v,Ke.va=g.va,Ke.j=g.j,Ke.o=g.o,z.$a)e:{e(z.$a==1),g=mt();t:for(;;){if(g==null){g=0;break e}if(e(z!=null),z.mc=g,g.c=z.c,g.i=z.i,g.l=z.l,g.l.ma=z,g.l.width=z.c,g.l.height=z.i,g.a=0,te(g.m,Y,_e,Ce),!Ns(z.c,z.i,1,g,null)||(g.ab==1&&g.gc[0].hc==3&&et(g.s)?(z.ic=1,Y=g.c*g.i,g.Ta=null,g.Ua=0,g.V=i(Y),g.Ba=0,g.V==null?(g.a=1,g=0):g=1):(z.ic=0,g=ma(g,z.c)),!g))break t;g=1;break e}z.mc=null,g=0}else g=Ce>=z.c*z.i;z=!g}if(z)return null;d.ga.Lc!=1?d.Ga=0:Q=G-x}e(d.ga!=null),e(x+Q<=G);e:{if(g=(Y=d.ga).c,G=Y.l.o,Y.$a==0){if(_e=d.rc,Ce=d.Vc,Ke=d.Fa,Z=d.P+1+x*g,ae=d.mb,me=d.nb+x*g,e(Z<=d.P+d.qc),Y.Z!=0)for(e(mA[Y.Z]!=null),z=0;z<Q;++z)mA[Y.Z](_e,Ce,Ke,Z,ae,me,g),_e=ae,Ce=me,me+=g,Z+=g;else for(z=0;z<Q;++z)n(ae,me,Ke,Z,g),_e=ae,Ce=me,me+=g,Z+=g;d.rc=_e,d.Vc=Ce}else{if(e(Y.mc!=null),g=x+Q,e((z=Y.mc)!=null),e(g<=z.i),z.C>=g)g=1;else if(Y.ic||be(),Y.ic){Y=z.V,_e=z.Ba,Ce=z.c;var ke=z.i,ge=(Ke=1,Z=z.$/Ce,ae=z.$%Ce,me=z.m,Ee=z.s,z.$),we=Ce*ke,He=Ce*g,ze=Ee.wc,Ve=ge<He?it(Ee,ae,Z):null;e(ge<=we),e(g<=ke),e(et(Ee));t:for(;;){for(;!me.h&&ge<He;){if(ae&ze||(Ve=it(Ee,ae,Z)),e(Ve!=null),H(me),256>(ke=ct(Ve.G[0],Ve.H[0],me)))Y[_e+ge]=ke,++ge,++ae>=Ce&&(ae=0,++Z<=g&&!(Z%16)&&Ot(z,Z));else{if(!(280>ke)){Ke=0;break t}ke=Ft(ke-256,me);var gt,At=ct(Ve.G[4],Ve.H[4],me);if(H(me),!(ge>=(At=ft(Ce,At=Ft(At,me)))&&we-ge>=ke)){Ke=0;break t}for(gt=0;gt<ke;++gt)Y[_e+ge+gt]=Y[_e+ge+gt-At];for(ge+=ke,ae+=ke;ae>=Ce;)ae-=Ce,++Z<=g&&!(Z%16)&&Ot(z,Z);ge<He&&ae&ze&&(Ve=it(Ee,ae,Z))}e(me.h==W(me))}Ot(z,Z>g?g:Z);break t}!Ke||me.h&&ge<we?(Ke=0,z.a=me.h?5:3):z.$=ge,g=Ke}else g=Zt(z,z.V,z.Ba,z.c,z.i,g,ga);if(!g){Q=0;break e}}x+Q>=G&&(d.Cc=1),Q=1}if(!Q)return null;if(d.Cc&&((Q=d.ga)!=null&&(Q.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+x*K}function v(d,g,x,Q,K,G){for(;0<K--;){var z,Y=d,Z=g+(x?1:0),ae=d,me=g+(x?0:3);for(z=0;z<Q;++z){var Ee=ae[me+4*z];Ee!=255&&(Ee*=32897,Y[Z+4*z+0]=Y[Z+4*z+0]*Ee>>23,Y[Z+4*z+1]=Y[Z+4*z+1]*Ee>>23,Y[Z+4*z+2]=Y[Z+4*z+2]*Ee>>23)}g+=G}}function V(d,g,x,Q,K){for(;0<Q--;){var G;for(G=0;G<x;++G){var z=d[g+2*G+0],Y=15&(ae=d[g+2*G+1]),Z=4369*Y,ae=(240&ae|ae>>4)*Z>>16;d[g+2*G+0]=(240&z|z>>4)*Z>>16&240|(15&z|z<<4)*Z>>16>>4&15,d[g+2*G+1]=240&ae|Y}g+=K}}function le(d,g,x,Q,K,G,z,Y){var Z,ae,me=255;for(ae=0;ae<K;++ae){for(Z=0;Z<Q;++Z){var Ee=d[g+Z];G[z+4*Z]=Ee,me&=Ee}g+=x,z+=Y}return me!=255}function fe(d,g,x,Q,K){var G;for(G=0;G<K;++G)x[Q+G]=d[g+G]>>8}function be(){xi=v,kr=V,Dr=le,mn=fe}function De(d,g,x){N[d]=function(Q,K,G,z,Y,Z,ae,me,Ee,_e,Ce,Ke,ke,ge,we,He,ze){var Ve,gt=ze-1>>1,At=Y[Z+0]|ae[me+0]<<16,Rt=Ee[_e+0]|Ce[Ke+0]<<16;e(Q!=null);var ut=3*At+Rt+131074>>2;for(g(Q[K+0],255&ut,ut>>16,ke,ge),G!=null&&(ut=3*Rt+At+131074>>2,g(G[z+0],255&ut,ut>>16,we,He)),Ve=1;Ve<=gt;++Ve){var gr=Y[Z+Ve]|ae[me+Ve]<<16,Br=Ee[_e+Ve]|Ce[Ke+Ve]<<16,dr=At+gr+Rt+Br+524296,ar=dr+2*(gr+Rt)>>3;ut=ar+At>>1,At=(dr=dr+2*(At+Br)>>3)+gr>>1,g(Q[K+2*Ve-1],255&ut,ut>>16,ke,ge+(2*Ve-1)*x),g(Q[K+2*Ve-0],255&At,At>>16,ke,ge+(2*Ve-0)*x),G!=null&&(ut=dr+Rt>>1,At=ar+Br>>1,g(G[z+2*Ve-1],255&ut,ut>>16,we,He+(2*Ve-1)*x),g(G[z+2*Ve+0],255&At,At>>16,we,He+(2*Ve+0)*x)),At=gr,Rt=Br}1&ze||(ut=3*At+Rt+131074>>2,g(Q[K+ze-1],255&ut,ut>>16,ke,ge+(ze-1)*x),G!=null&&(ut=3*Rt+At+131074>>2,g(G[z+ze-1],255&ut,ut>>16,we,He+(ze-1)*x)))}}function $e(){Bi[em]=rP,Bi[tm]=UB,Bi[_B]=nP,Bi[rm]=PB,Bi[nm]=QB,Bi[wy]=jB,Bi[IB]=sP,Bi[xy]=UB,Bi[by]=PB,Bi[sm]=QB,Bi[By]=jB}function lt(d){return d&-16384?0>d?0:255:d>>iP}function f(d,g){return lt((19077*d>>8)+(26149*g>>8)-14234)}function C(d,g,x){return lt((19077*d>>8)-(6419*g>>8)-(13320*x>>8)+8708)}function k(d,g){return lt((19077*d>>8)+(33050*g>>8)-17685)}function X(d,g,x,Q,K){Q[K+0]=f(d,x),Q[K+1]=C(d,g,x),Q[K+2]=k(d,g)}function xe(d,g,x,Q,K){Q[K+0]=k(d,g),Q[K+1]=C(d,g,x),Q[K+2]=f(d,x)}function Ie(d,g,x,Q,K){var G=C(d,g,x);g=G<<3&224|k(d,g)>>3,Q[K+0]=248&f(d,x)|G>>5,Q[K+1]=g}function Je(d,g,x,Q,K){var G=240&k(d,g)|15;Q[K+0]=240&f(d,x)|C(d,g,x)>>4,Q[K+1]=G}function Gt(d,g,x,Q,K){Q[K+0]=255,X(d,g,x,Q,K+1)}function ir(d,g,x,Q,K){xe(d,g,x,Q,K),Q[K+3]=255}function zt(d,g,x,Q,K){X(d,g,x,Q,K),Q[K+3]=255}function wr(d,g){return 0>d?0:d>g?g:d}function Qr(d,g,x){N[d]=function(Q,K,G,z,Y,Z,ae,me,Ee){for(var _e=me+(-2&Ee)*x;me!=_e;)g(Q[K+0],G[z+0],Y[Z+0],ae,me),g(Q[K+1],G[z+0],Y[Z+0],ae,me+x),K+=2,++z,++Z,me+=2*x;1&Ee&&g(Q[K+0],G[z+0],Y[Z+0],ae,me)}}function Gi(d,g,x){return x==0?d==0?g==0?6:5:g==0?4:0:x}function Xn(d,g,x,Q,K){switch(d>>>30){case 3:oo(g,x,Q,K,0);break;case 2:pn(g,x,Q,K);break;case 1:Is(g,x,Q,K)}}function Ea(d,g){var x,Q,K=g.M,G=g.Nb,z=d.oc,Y=d.pc+40,Z=d.oc,ae=d.pc+584,me=d.oc,Ee=d.pc+600;for(x=0;16>x;++x)z[Y+32*x-1]=129;for(x=0;8>x;++x)Z[ae+32*x-1]=129,me[Ee+32*x-1]=129;for(0<K?z[Y-1-32]=Z[ae-1-32]=me[Ee-1-32]=129:(s(z,Y-32-1,127,21),s(Z,ae-32-1,127,9),s(me,Ee-32-1,127,9)),Q=0;Q<d.za;++Q){var _e=g.ya[g.aa+Q];if(0<Q){for(x=-1;16>x;++x)n(z,Y+32*x-4,z,Y+32*x+12,4);for(x=-1;8>x;++x)n(Z,ae+32*x-4,Z,ae+32*x+4,4),n(me,Ee+32*x-4,me,Ee+32*x+4,4)}var Ce=d.Gd,Ke=d.Hd+Q,ke=_e.ad,ge=_e.Hc;if(0<K&&(n(z,Y-32,Ce[Ke].y,0,16),n(Z,ae-32,Ce[Ke].f,0,8),n(me,Ee-32,Ce[Ke].ea,0,8)),_e.Za){var we=z,He=Y-32+16;for(0<K&&(Q>=d.za-1?s(we,He,Ce[Ke].y[15],4):n(we,He,Ce[Ke+1].y,0,4)),x=0;4>x;x++)we[He+128+x]=we[He+256+x]=we[He+384+x]=we[He+0+x];for(x=0;16>x;++x,ge<<=2)we=z,He=Y+kB[x],zi[_e.Ob[x]](we,He),Xn(ge,ke,16*+x,we,He)}else if(we=Gi(Q,K,_e.Ob[0]),pA[we](z,Y),ge!=0)for(x=0;16>x;++x,ge<<=2)Xn(ge,ke,16*+x,z,Y+kB[x]);for(x=_e.Gc,we=Gi(Q,K,_e.Dd),lo[we](Z,ae),lo[we](me,Ee),ge=ke,we=Z,He=ae,255&(_e=x>>0)&&(170&_e?dh(ge,256,we,He):yi(ge,256,we,He)),_e=me,ge=Ee,255&(x>>=8)&&(170&x?dh(ke,320,_e,ge):yi(ke,320,_e,ge)),K<d.Ub-1&&(n(Ce[Ke].y,0,z,Y+480,16),n(Ce[Ke].f,0,Z,ae+224,8),n(Ce[Ke].ea,0,me,Ee+224,8)),x=8*G*d.B,Ce=d.sa,Ke=d.ta+16*Q+16*G*d.R,ke=d.qa,_e=d.ra+8*Q+x,ge=d.Ha,we=d.Ia+8*Q+x,x=0;16>x;++x)n(Ce,Ke+x*d.R,z,Y+32*x,16);for(x=0;8>x;++x)n(ke,_e+x*d.B,Z,ae+32*x,8),n(ge,we+x*d.B,me,Ee+32*x,8)}}function _a(d,g,x,Q,K,G,z,Y,Z){var ae=[0],me=[0],Ee=0,_e=Z!=null?Z.kd:0,Ce=Z??new oA;if(d==null||12>x)return 7;Ce.data=d,Ce.w=g,Ce.ha=x,g=[g],x=[x],Ce.gb=[Ce.gb];e:{var Ke=g,ke=x,ge=Ce.gb;if(e(d!=null),e(ke!=null),e(ge!=null),ge[0]=0,12<=ke[0]&&!r(d,Ke[0],"RIFF")){if(r(d,Ke[0]+8,"WEBP")){ge=3;break e}var we=Fe(d,Ke[0]+4);if(12>we||4294967286<we){ge=3;break e}if(_e&&we>ke[0]-8){ge=7;break e}ge[0]=we,Ke[0]+=12,ke[0]-=12}ge=0}if(ge!=0)return ge;for(we=0<Ce.gb[0],x=x[0];;){e:{var He=d;ke=g,ge=x;var ze=ae,Ve=me,gt=Ke=[0];if((ut=Ee=[Ee])[0]=0,8>ge[0])ge=7;else{if(!r(He,ke[0],"VP8X")){if(Fe(He,ke[0]+4)!=10){ge=3;break e}if(18>ge[0]){ge=7;break e}var At=Fe(He,ke[0]+8),Rt=1+Te(He,ke[0]+12);if(2147483648<=Rt*(He=1+Te(He,ke[0]+15))){ge=3;break e}gt!=null&&(gt[0]=At),ze!=null&&(ze[0]=Rt),Ve!=null&&(Ve[0]=He),ke[0]+=18,ge[0]-=18,ut[0]=1}ge=0}}if(Ee=Ee[0],Ke=Ke[0],ge!=0)return ge;if(ke=!!(2&Ke),!we&&Ee)return 3;if(G!=null&&(G[0]=!!(16&Ke)),z!=null&&(z[0]=ke),Y!=null&&(Y[0]=0),z=ae[0],Ke=me[0],Ee&&ke&&Z==null){ge=0;break}if(4>x){ge=7;break}if(we&&Ee||!we&&!Ee&&!r(d,g[0],"ALPH")){x=[x],Ce.na=[Ce.na],Ce.P=[Ce.P],Ce.Sa=[Ce.Sa];e:{At=d,ge=g,we=x;var ut=Ce.gb;ze=Ce.na,Ve=Ce.P,gt=Ce.Sa,Rt=22,e(At!=null),e(we!=null),He=ge[0];var gr=we[0];for(e(ze!=null),e(gt!=null),ze[0]=null,Ve[0]=null,gt[0]=0;;){if(ge[0]=He,we[0]=gr,8>gr){ge=7;break e}var Br=Fe(At,He+4);if(4294967286<Br){ge=3;break e}var dr=8+Br+1&-2;if(Rt+=dr,0<ut&&Rt>ut){ge=3;break e}if(!r(At,He,"VP8 ")||!r(At,He,"VP8L")){ge=0;break e}if(gr[0]<dr){ge=7;break e}r(At,He,"ALPH")||(ze[0]=At,Ve[0]=He+8,gt[0]=Br),He+=dr,gr-=dr}}if(x=x[0],Ce.na=Ce.na[0],Ce.P=Ce.P[0],Ce.Sa=Ce.Sa[0],ge!=0)break}x=[x],Ce.Ja=[Ce.Ja],Ce.xa=[Ce.xa];e:if(ut=d,ge=g,we=x,ze=Ce.gb[0],Ve=Ce.Ja,gt=Ce.xa,At=ge[0],He=!r(ut,At,"VP8 "),Rt=!r(ut,At,"VP8L"),e(ut!=null),e(we!=null),e(Ve!=null),e(gt!=null),8>we[0])ge=7;else{if(He||Rt){if(ut=Fe(ut,At+4),12<=ze&&ut>ze-12){ge=3;break e}if(_e&&ut>we[0]-8){ge=7;break e}Ve[0]=ut,ge[0]+=8,we[0]-=8,gt[0]=Rt}else gt[0]=5<=we[0]&&ut[At+0]==47&&!(ut[At+4]>>5),Ve[0]=we[0];ge=0}if(x=x[0],Ce.Ja=Ce.Ja[0],Ce.xa=Ce.xa[0],g=g[0],ge!=0)break;if(4294967286<Ce.Ja)return 3;if(Y==null||ke||(Y[0]=Ce.xa?2:1),z=[z],Ke=[Ke],Ce.xa){if(5>x){ge=7;break}Y=z,_e=Ke,ke=G,d==null||5>x?d=0:5<=x&&d[g+0]==47&&!(d[g+4]>>5)?(we=[0],ut=[0],ze=[0],te(Ve=new F,d,g,x),Me(Ve,we,ut,ze)?(Y!=null&&(Y[0]=we[0]),_e!=null&&(_e[0]=ut[0]),ke!=null&&(ke[0]=ze[0]),d=1):d=0):d=0}else{if(10>x){ge=7;break}Y=Ke,d==null||10>x||!Pl(d,g+3,x-3)?d=0:(_e=d[g+0]|d[g+1]<<8|d[g+2]<<16,ke=16383&(d[g+7]<<8|d[g+6]),d=16383&(d[g+9]<<8|d[g+8]),1&_e||3<(_e>>1&7)||!(_e>>4&1)||_e>>5>=Ce.Ja||!ke||!d?d=0:(z&&(z[0]=ke),Y&&(Y[0]=d),d=1))}if(!d||(z=z[0],Ke=Ke[0],Ee&&(ae[0]!=z||me[0]!=Ke)))return 3;Z!=null&&(Z[0]=Ce,Z.offset=g-Z.w,e(4294967286>g-Z.w),e(Z.offset==Z.ha-x));break}return ge==0||ge==7&&Ee&&Z==null?(G!=null&&(G[0]|=Ce.na!=null&&0<Ce.na.length),Q!=null&&(Q[0]=z),K!=null&&(K[0]=Ke),0):ge}function Ah(d,g,x){var Q=g.width,K=g.height,G=0,z=0,Y=Q,Z=K;if(g.Da=d!=null&&0<d.Da,g.Da&&(Y=d.cd,Z=d.bd,G=d.v,z=d.j,11>x||(G&=-2,z&=-2),0>G||0>z||0>=Y||0>=Z||G+Y>Q||z+Z>K))return 0;if(g.v=G,g.j=z,g.va=G+Y,g.o=z+Z,g.U=Y,g.T=Z,g.da=d!=null&&0<d.da,g.da){if(!Re(Y,Z,x=[d.ib],G=[d.hb]))return 0;g.ib=x[0],g.hb=G[0]}return g.ob=d!=null&&d.ob,g.Kb=d==null||!d.Sd,g.da&&(g.ob=g.ib<3*Q/4&&g.hb<3*K/4,g.Kb=0),1}function lh(d){if(d==null)return 2;if(11>d.S){var g=d.f.RGBA;g.fb+=(d.height-1)*g.A,g.A=-g.A}else g=d.f.kb,d=d.height,g.O+=(d-1)*g.fa,g.fa=-g.fa,g.N+=(d-1>>1)*g.Ab,g.Ab=-g.Ab,g.W+=(d-1>>1)*g.Db,g.Db=-g.Db,g.F!=null&&(g.J+=(d-1)*g.lb,g.lb=-g.lb);return 0}function Au(d,g,x,Q){if(Q==null||0>=d||0>=g)return 2;if(x!=null){if(x.Da){var K=x.cd,G=x.bd,z=-2&x.v,Y=-2&x.j;if(0>z||0>Y||0>=K||0>=G||z+K>d||Y+G>g)return 2;d=K,g=G}if(x.da){if(!Re(d,g,K=[x.ib],G=[x.hb]))return 2;d=K[0],g=G[0]}}Q.width=d,Q.height=g;e:{var Z=Q.width,ae=Q.height;if(d=Q.S,0>=Z||0>=ae||!(d>=em&&13>d))d=2;else{if(0>=Q.Rd&&Q.sd==null){z=G=K=g=0;var me=(Y=Z*DB[d])*ae;if(11>d||(G=(ae+1)/2*(g=(Z+1)/2),d==12&&(z=(K=Z)*ae)),(ae=i(me+2*G+z))==null){d=1;break e}Q.sd=ae,11>d?((Z=Q.f.RGBA).eb=ae,Z.fb=0,Z.A=Y,Z.size=me):((Z=Q.f.kb).y=ae,Z.O=0,Z.fa=Y,Z.Fd=me,Z.f=ae,Z.N=0+me,Z.Ab=g,Z.Cd=G,Z.ea=ae,Z.W=0+me+G,Z.Db=g,Z.Ed=G,d==12&&(Z.F=ae,Z.J=0+me+2*G),Z.Tc=z,Z.lb=K)}if(g=1,K=Q.S,G=Q.width,z=Q.height,K>=em&&13>K)if(11>K)d=Q.f.RGBA,g&=(Y=Math.abs(d.A))*(z-1)+G<=d.size,g&=Y>=G*DB[K],g&=d.eb!=null;else{d=Q.f.kb,Y=(G+1)/2,me=(z+1)/2,Z=Math.abs(d.fa),ae=Math.abs(d.Ab);var Ee=Math.abs(d.Db),_e=Math.abs(d.lb),Ce=_e*(z-1)+G;g&=Z*(z-1)+G<=d.Fd,g&=ae*(me-1)+Y<=d.Cd,g=(g&=Ee*(me-1)+Y<=d.Ed)&Z>=G&ae>=Y&Ee>=Y,g&=d.y!=null,g&=d.f!=null,g&=d.ea!=null,K==12&&(g&=_e>=G,g&=Ce<=d.Tc,g&=d.F!=null)}else g=0;d=g?0:2}}return d!=0||x!=null&&x.fd&&(d=lh(Q)),d}var Yn=64,lu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],cu=24,uu=32,ch=8,Rs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Pe("Predictor0","PredictorAdd0"),N.Predictor0=function(){return 4278190080},N.Predictor1=function(d){return d},N.Predictor2=function(d,g,x){return g[x+0]},N.Predictor3=function(d,g,x){return g[x+1]},N.Predictor4=function(d,g,x){return g[x-1]},N.Predictor5=function(d,g,x){return qe(qe(d,g[x+1]),g[x+0])},N.Predictor6=function(d,g,x){return qe(d,g[x-1])},N.Predictor7=function(d,g,x){return qe(d,g[x+0])},N.Predictor8=function(d,g,x){return qe(g[x-1],g[x+0])},N.Predictor9=function(d,g,x){return qe(g[x+0],g[x+1])},N.Predictor10=function(d,g,x){return qe(qe(d,g[x-1]),qe(g[x+0],g[x+1]))},N.Predictor11=function(d,g,x){var Q=g[x+0];return 0>=vt(Q>>24&255,d>>24&255,(g=g[x-1])>>24&255)+vt(Q>>16&255,d>>16&255,g>>16&255)+vt(Q>>8&255,d>>8&255,g>>8&255)+vt(255&Q,255&d,255&g)?Q:d},N.Predictor12=function(d,g,x){var Q=g[x+0];return(tt((d>>24&255)+(Q>>24&255)-((g=g[x-1])>>24&255))<<24|tt((d>>16&255)+(Q>>16&255)-(g>>16&255))<<16|tt((d>>8&255)+(Q>>8&255)-(g>>8&255))<<8|tt((255&d)+(255&Q)-(255&g)))>>>0},N.Predictor13=function(d,g,x){var Q=g[x-1];return(Ze((d=qe(d,g[x+0]))>>24&255,Q>>24&255)<<24|Ze(d>>16&255,Q>>16&255)<<16|Ze(d>>8&255,Q>>8&255)<<8|Ze(d>>0&255,Q>>0&255))>>>0};var vy=N.PredictorAdd0;N.PredictorAdd1=ht,Pe("Predictor2","PredictorAdd2"),Pe("Predictor3","PredictorAdd3"),Pe("Predictor4","PredictorAdd4"),Pe("Predictor5","PredictorAdd5"),Pe("Predictor6","PredictorAdd6"),Pe("Predictor7","PredictorAdd7"),Pe("Predictor8","PredictorAdd8"),Pe("Predictor9","PredictorAdd9"),Pe("Predictor10","PredictorAdd10"),Pe("Predictor11","PredictorAdd11"),Pe("Predictor12","PredictorAdd12"),Pe("Predictor13","PredictorAdd13");var uh=N.PredictorAdd2;ie("ColorIndexInverseTransform","MapARGB","32b",function(d){return d>>8&255},function(d){return d}),ie("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(d){return d},function(d){return d>>8&255});var $p,vi=N.ColorIndexInverseTransform,du=N.MapARGB,Wp=N.VP8LColorIndexInverseTransformAlpha,Jp=N.MapAlpha,uA=N.VP8LPredictorsAdd=[];uA.length=16,(N.VP8LPredictors=[]).length=16,(N.VP8LPredictorsAdd_C=[]).length=16,(N.VP8LPredictors_C=[]).length=16;var ql,Os,_s,dA,io,ao,hu,oo,pn,dh,Is,yi,fu,Xp,hh,Gl,zl,hA,$l,pu,Wl,fA,fh,wi,xi,kr,Dr,mn,Tn=i(511),Ao=i(2041),ph=i(225),mu=i(767),Yp=0,yy=Ao,Zp=ph,ri=mu,bi=Tn,em=0,tm=1,_B=2,rm=3,nm=4,wy=5,IB=6,xy=7,by=8,sm=9,By=10,H3=[2,3,7],V3=[3,3,11],SB=[280,256,256,256,40],K3=[0,1,1,1,0],q3=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],G3=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],z3=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],$3=8,Cy=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ny=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],mh=null,W3=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],J3=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],FB=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],X3=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Y3=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Z3=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],eP=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],pA=[],zi=[],lo=[],tP=1,TB=2,mA=[],Bi=[];De("UpsampleRgbLinePair",X,3),De("UpsampleBgrLinePair",xe,3),De("UpsampleRgbaLinePair",zt,4),De("UpsampleBgraLinePair",ir,4),De("UpsampleArgbLinePair",Gt,4),De("UpsampleRgba4444LinePair",Je,2),De("UpsampleRgb565LinePair",Ie,2);var rP=N.UpsampleRgbLinePair,nP=N.UpsampleBgrLinePair,UB=N.UpsampleRgbaLinePair,PB=N.UpsampleBgraLinePair,QB=N.UpsampleArgbLinePair,jB=N.UpsampleRgba4444LinePair,sP=N.UpsampleRgb565LinePair,im=16,am=1<<im-1,gh=-227,Ey=482,iP=6,LB=0,aP=i(256),oP=i(256),AP=i(256),lP=i(256),cP=i(Ey-gh),uP=i(Ey-gh);Qr("YuvToRgbRow",X,3),Qr("YuvToBgrRow",xe,3),Qr("YuvToRgbaRow",zt,4),Qr("YuvToBgraRow",ir,4),Qr("YuvToArgbRow",Gt,4),Qr("YuvToRgba4444Row",Je,2),Qr("YuvToRgb565Row",Ie,2);var kB=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],om=[0,2,8],dP=[8,7,6,4,4,2,2,2,1,1,1,1],hP=1;this.WebPDecodeRGBA=function(d,g,x,Q,K){var G=tm,z=new no,Y=new fr;z.ba=Y,Y.S=G,Y.width=[Y.width],Y.height=[Y.height];var Z=Y.width,ae=Y.height,me=new fn;if(me==null||d==null)var Ee=2;else e(me!=null),Ee=_a(d,g,x,me.width,me.height,me.Pd,me.Qd,me.format,null);if(Ee!=0?Z=0:(Z!=null&&(Z[0]=me.width[0]),ae!=null&&(ae[0]=me.height[0]),Z=1),Z){Y.width=Y.width[0],Y.height=Y.height[0],Q!=null&&(Q[0]=Y.width),K!=null&&(K[0]=Y.height);e:{if(Q=new Xa,(K=new oA).data=d,K.w=g,K.ha=x,K.kd=1,g=[0],e(K!=null),((d=_a(K.data,K.w,K.ha,null,null,null,g,null,K))==0||d==7)&&g[0]&&(d=4),(g=d)==0){if(e(z!=null),Q.data=K.data,Q.w=K.w+K.offset,Q.ha=K.ha-K.offset,Q.put=mr,Q.ac=$r,Q.bc=Qe,Q.ma=z,K.xa){if((d=mt())==null){z=1;break e}if(function(_e,Ce){var Ke=[0],ke=[0],ge=[0];t:for(;;){if(_e==null)return 0;if(Ce==null)return _e.a=2,0;if(_e.l=Ce,_e.a=0,te(_e.m,Ce.data,Ce.w,Ce.ha),!Me(_e.m,Ke,ke,ge)){_e.a=3;break t}if(_e.xb=TB,Ce.width=Ke[0],Ce.height=ke[0],!Ns(Ke[0],ke[0],1,_e,null))break t;return 1}return e(_e.a!=0),0}(d,Q)){if(Q=(g=Au(Q.width,Q.height,z.Oa,z.ba))==0){t:{Q=d;r:for(;;){if(Q==null){Q=0;break t}if(e(Q.s.yc!=null),e(Q.s.Ya!=null),e(0<Q.s.Wb),e((x=Q.l)!=null),e((K=x.ma)!=null),Q.xb!=0){if(Q.ca=K.ba,Q.tb=K.tb,e(Q.ca!=null),!Ah(K.Oa,x,rm)){Q.a=2;break r}if(!ma(Q,x.width)||x.da)break r;if((x.da||St(Q.ca.S))&&be(),11>Q.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Q.ca.f.kb.F!=null&&be()),Q.Pb&&0<Q.s.ua&&Q.s.vb.X==null&&!oe(Q.s.vb,Q.s.Wa.Xa)){Q.a=1;break r}Q.xb=0}if(!Zt(Q,Q.V,Q.Ba,Q.c,Q.i,x.o,Be))break r;K.Dc=Q.Ma,Q=1;break t}e(Q.a!=0),Q=0}Q=!Q}Q&&(g=d.a)}else g=d.a}else{if((d=new Ul)==null){z=1;break e}if(d.Fa=K.na,d.P=K.P,d.qc=K.Sa,Ql(d,Q)){if((g=Au(Q.width,Q.height,z.Oa,z.ba))==0){if(d.Aa=0,x=z.Oa,e((K=d)!=null),x!=null){if(0<(Z=0>(Z=x.Md)?0:100<Z?255:255*Z/100)){for(ae=me=0;4>ae;++ae)12>(Ee=K.pb[ae]).lc&&(Ee.ia=Z*dP[0>Ee.lc?0:Ee.lc]>>3),me|=Ee.ia;me&&(alert("todo:VP8InitRandom"),K.ia=1)}K.Ga=x.Id,100<K.Ga?K.Ga=100:0>K.Ga&&(K.Ga=0)}tu(d,Q)||(g=d.a)}}else g=d.a}g==0&&z.Oa!=null&&z.Oa.fd&&(g=lh(z.ba))}z=g}G=z!=0?null:11>G?Y.f.RGBA.eb:Y.f.kb.y}else G=null;return G};var DB=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(N,j){for(var D="",_=0;_<4;_++)D+=String.fromCharCode(N[j++]);return D}function u(N,j){return(N[j+0]<<0|N[j+1]<<8|N[j+2]<<16)>>>0}function h(N,j){return(N[j+0]<<0|N[j+1]<<8|N[j+2]<<16|N[j+3]<<24)>>>0}new l;var m=[0],p=[0],b=[],B=new l,E=t,y=function(N,j){var D={},_=0,T=!1,P=0,ee=0;if(D.frames=[],!function(L,W,q,H){for(var re=0;re<H;re++)if(L[W+re]!=q.charCodeAt(re))return!0;return!1}(N,j,"RIFF",4)){for(h(N,j+=4),j+=8;j<N.length;){var Ae=c(N,j),ue=h(N,j+=4);j+=4;var he=ue+(1&ue);switch(Ae){case"VP8 ":case"VP8L":D.frames[_]===void 0&&(D.frames[_]={}),(ne=D.frames[_]).src_off=T?ee:j-8,ne.src_size=P+ue+8,_++,T&&(T=!1,P=0,ee=0);break;case"VP8X":(ne=D.header={}).feature_flags=N[j];var te=j+4;ne.canvas_width=1+u(N,te),te+=3,ne.canvas_height=1+u(N,te),te+=3;break;case"ALPH":T=!0,P=he+8,ee=j-8;break;case"ANIM":(ne=D.header).bgcolor=h(N,j),te=j+4,ne.loop_count=(ye=N)[(F=te)+0]<<0|ye[F+1]<<8,te+=2;break;case"ANMF":var se,ne;(ne=D.frames[_]={}).offset_x=2*u(N,j),j+=3,ne.offset_y=2*u(N,j),j+=3,ne.width=1+u(N,j),j+=3,ne.height=1+u(N,j),j+=3,ne.duration=u(N,j),j+=3,se=N[j++],ne.dispose=1&se,ne.blend=se>>1&1}Ae!="ANMF"&&(j+=he)}var ye,F;return D}}(E,0);y.response=E,y.rgbaoutput=!0,y.dataurl=!1;var w=y.header?y.header:null,S=y.frames?y.frames:null;if(w){w.loop_counter=w.loop_count,m=[w.canvas_height],p=[w.canvas_width];for(var M=0;M<S.length&&S[M].blend!=0;M++);}var R=S[0],O=B.WebPDecodeRGBA(E,R.src_off,R.src_size,p,m);R.rgba=O,R.imgwidth=p[0],R.imgheight=m[0];for(var I=0;I<p[0]*m[0]*4;I++)b[I]=O[I];return this.width=p,this.height=m,this.data=b,this}(function(t){var e=function(){return typeof nx=="function"},r=function(m,p,b,B){var E=4,y=a;switch(B){case t.image_compression.FAST:E=1,y=i;break;case t.image_compression.MEDIUM:E=6,y=A;break;case t.image_compression.SLOW:E=9,y=l}m=n(m,p,b,y);var w=nx(m,{level:E});return t.__addimage__.arrayBufferToBinaryString(w)},n=function(m,p,b,B){for(var E,y,w,S=m.length/p,M=new Uint8Array(m.length+S),R=u(),O=0;O<S;O+=1){if(w=O*p,E=m.subarray(w,w+p),B)M.set(B(E,b,y),w+O);else{for(var I,N=R.length,j=[];I<N;I+=1)j[I]=R[I](E,b,y);var D=h(j.concat());M.set(j[D],w+O)}y=E}return M},s=function(m){var p=Array.apply([],m);return p.unshift(0),p},i=function(m,p){var b,B=[],E=m.length;B[0]=1;for(var y=0;y<E;y+=1)b=m[y-p]||0,B[y+1]=m[y]-b+256&255;return B},a=function(m,p,b){var B,E=[],y=m.length;E[0]=2;for(var w=0;w<y;w+=1)B=b&&b[w]||0,E[w+1]=m[w]-B+256&255;return E},A=function(m,p,b){var B,E,y=[],w=m.length;y[0]=3;for(var S=0;S<w;S+=1)B=m[S-p]||0,E=b&&b[S]||0,y[S+1]=m[S]+256-(B+E>>>1)&255;return y},l=function(m,p,b){var B,E,y,w,S=[],M=m.length;S[0]=4;for(var R=0;R<M;R+=1)B=m[R-p]||0,E=b&&b[R]||0,y=b&&b[R-p]||0,w=c(B,E,y),S[R+1]=m[R]-w+256&255;return S},c=function(m,p,b){if(m===p&&p===b)return m;var B=Math.abs(p-b),E=Math.abs(m-b),y=Math.abs(m+p-b-b);return B<=E&&B<=y?m:E<=y?p:b},u=function(){return[s,i,a,A,l]},h=function(m){var p=m.map(function(b){return b.reduce(function(B,E){return B+Math.abs(E)},0)});return p.indexOf(Math.min.apply(null,p))};t.processPNG=function(m,p,b,B){var E,y,w,S,M,R,O,I,N,j,D,_,T,P,ee,Ae=this.decode.FLATE_DECODE,ue="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(w=new Gz(m)).imgData,y=w.bits,E=w.colorSpace,M=w.colors,[4,6].indexOf(w.colorType)!==-1){if(w.bits===8){N=(I=w.pixelBitlength==32?new Uint32Array(w.decodePixels().buffer):w.pixelBitlength==16?new Uint16Array(w.decodePixels().buffer):new Uint8Array(w.decodePixels().buffer)).length,D=new Uint8Array(N*w.colors),j=new Uint8Array(N);var he,te=w.pixelBitlength-w.bits;for(P=0,ee=0;P<N;P++){for(T=I[P],he=0;he<te;)D[ee++]=T>>>he&255,he+=w.bits;j[P]=T>>>he&255}}if(w.bits===16){N=(I=new Uint32Array(w.decodePixels().buffer)).length,D=new Uint8Array(N*(32/w.pixelBitlength)*w.colors),j=new Uint8Array(N*(32/w.pixelBitlength)),_=w.colors>1,P=0,ee=0;for(var se=0;P<N;)T=I[P++],D[ee++]=T>>>0&255,_&&(D[ee++]=T>>>16&255,T=I[P++],D[ee++]=T>>>0&255),j[se++]=T>>>16&255;y=8}B!==t.image_compression.NONE&&e()?(m=r(D,w.width*w.colors,w.colors,B),O=r(j,w.width,1,B)):(m=D,O=j,Ae=void 0)}if(w.colorType===3&&(E=this.color_spaces.INDEXED,R=w.palette,w.transparency.indexed)){var ne=w.transparency.indexed,ye=0;for(P=0,N=ne.length;P<N;++P)ye+=ne[P];if((ye/=255)===N-1&&ne.indexOf(0)!==-1)S=[ne.indexOf(0)];else if(ye!==N){for(I=w.decodePixels(),j=new Uint8Array(I.length),P=0,N=I.length;P<N;P++)j[P]=ne[I[P]];O=r(j,w.width,1)}}var F=function(L){var W;switch(L){case t.image_compression.FAST:W=11;break;case t.image_compression.MEDIUM:W=13;break;case t.image_compression.SLOW:W=14;break;default:W=12}return W}(B);return Ae===this.decode.FLATE_DECODE&&(ue="/Predictor "+F+" "),ue+="/Colors "+M+" /BitsPerComponent "+y+" /Columns "+w.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(O&&this.__addimage__.isArrayBuffer(O)||this.__addimage__.isArrayBufferView(O))&&(O=this.__addimage__.arrayBufferToBinaryString(O)),{alias:b,data:m,index:p,filter:Ae,decodeParameters:ue,transparency:S,palette:R,sMask:O,predictor:F,width:w.width,height:w.height,bitsPerComponent:y,colorSpace:E}}}})(Dt.API),function(t){t.processGIF89A=function(e,r,n,s){var i=new zz(e),a=i.width,A=i.height,l=[];i.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:a,height:A},u=new Xw(100).encode(c,100);return t.processJPEG.call(this,u,r,n,s)},t.processGIF87A=t.processGIF89A}(Dt.API),Xi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Xi.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){Lr.log("bit decode error:"+r)}},Xi.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+8*s*4,A=0;A<8&&8*s+A<this.width;A++){var l=this.palette[i>>7-A&1];this.data[a+4*A]=l.blue,this.data[a+4*A+1]=l.green,this.data[a+4*A+2]=l.red,this.data[a+4*A+3]=255}r!==0&&(this.pos+=4-r)}},Xi.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<t;s++){var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+2*s*4,A=i>>4,l=15&i,c=this.palette[A];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*s+1>=this.width)break;c=this.palette[l],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},Xi.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(s<this.palette.length){var a=this.palette[s];this.data[i]=a.red,this.data[i+1]=a.green,this.data[i+2]=a.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}t!==0&&(this.pos+=4-t)}},Xi.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(i&e)/e*255|0,A=(i>>5&e)/e*255|0,l=(i>>10&e)/e*255|0,c=i>>15?255:0,u=n*this.width*4+4*s;this.data[u]=l,this.data[u+1]=A,this.data[u+2]=a,this.data[u+3]=c}this.pos+=t}},Xi.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var A=(a&e)/e*255|0,l=(a>>5&r)/r*255|0,c=(a>>11)/e*255|0,u=s*this.width*4+4*i;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=A,this.data[u+3]=255}this.pos+=t}},Xi.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*r;this.data[a]=i,this.data[a+1]=s,this.data[a+2]=n,this.data[a+3]=255}this.pos+=this.width%4}},Xi.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),A=e*this.width*4+4*r;this.data[A]=i,this.data[A+1]=s,this.data[A+2]=n,this.data[A+3]=a}},Xi.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,s){var i=new Xi(e,!1),a=i.width,A=i.height,l={data:i.getData(),width:a,height:A},c=new Xw(100).encode(l,100);return t.processJPEG.call(this,c,r,n,s)}}(Dt.API),C_.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,s){var i=new C_(e),a=i.width,A=i.height,l={data:i.getData(),width:a,height:A},c=new Xw(100).encode(l,100);return t.processJPEG.call(this,c,r,n,s)}}(Dt.API),Dt.API.processRGBA=function(t,e,r){for(var n=t.data,s=n.length,i=new Uint8Array(s/4*3),a=new Uint8Array(s/4),A=0,l=0,c=0;c<s;c+=4){var u=n[c],h=n[c+1],m=n[c+2],p=n[c+3];i[A++]=u,i[A++]=h,i[A++]=m,a[l++]=p}var b=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:b,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Dt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Qu=Dt.API,pg=Qu.getCharWidthsArray=function(t,e){var r,n,s=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),A=e.widths?e.widths:s.metadata.Unicode.widths,l=A.fof?A.fof:1,c=e.kerning?e.kerning:s.metadata.Unicode.kerning,u=c.fof?c.fof:1,h=e.doKerning!==!1,m=0,p=t.length,b=0,B=A[0]||l,E=[];for(r=0;r<p;r++)n=t.charCodeAt(r),typeof s.metadata.widthOfString=="function"?E.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+a*(1e3/i)||0)/1e3):(m=h&&Ir(c[n])==="object"&&!isNaN(parseInt(c[n][b],10))?c[n][b]/u:0,E.push((A[n]||B)/l+m)),b=n;return E},w_=Qu.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return Qu.processArabic&&(t=Qu.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,s)/r:pg.apply(this,arguments).reduce(function(i,a){return i+a},0)},x_=function(t,e,r,n){for(var s=[],i=0,a=t.length,A=0;i!==a&&A+e[i]<r;)A+=e[i],i++;s.push(t.slice(0,i));var l=i;for(A=0;i!==a;)A+e[i]>n&&(s.push(t.slice(l,i)),A=0,l=i),A+=e[i],i++;return l!==i&&s.push(t.slice(l,i)),s},b_=function(t,e,r){r||(r={});var n,s,i,a,A,l,c,u=[],h=[u],m=r.textIndent||0,p=0,b=0,B=t.split(" "),E=pg.apply(this,[" ",r])[0];if(l=r.lineIndent===-1?B[0].length+2:r.lineIndent||0){var y=Array(l).join(" "),w=[];B.map(function(M){(M=M.split(/\s*\n/)).length>1?w=w.concat(M.map(function(R,O){return(O&&R.length?`
`:"")+R})):w.push(M[0])}),B=w,l=w_.apply(this,[y,r])}for(i=0,a=B.length;i<a;i++){var S=0;if(n=B[i],l&&n[0]==`
`&&(n=n.substr(1),S=1),m+p+(b=(s=pg.apply(this,[n,r])).reduce(function(M,R){return M+R},0))>e||S){if(b>e){for(A=x_.apply(this,[n,s,e-(m+p),e]),u.push(A.shift()),u=[A.pop()];A.length;)h.push([A.shift()]);b=s.slice(n.length-(u[0]?u[0].length:0)).reduce(function(M,R){return M+R},0)}else u=[n];h.push(u),m=b+l,p=E}else u.push(n),m+=p+b,p=E}return c=l?function(M,R){return(R?y:"")+M.join(" ")}:function(M){return M.join(" ")},h.map(c)},Qu.splitTextToSize=function(t,e,r){var n,s=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var h=this.internal.getFont(u.fontName,u.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/s;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=r.lineIndent;var A,l,c=[];for(A=0,l=n.length;A<l;A++)c=c.concat(b_.apply(this,[n[A],a,i]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",r={},n={},s=0;s<e.length;s++)r[e[s]]="0123456789abcdef"[s],n["0123456789abcdef"[s]]=e[s];var i=function(h){return"0x"+parseInt(h,10).toString(16)},a=t.__fontmetrics__.compress=function(h){var m,p,b,B,E=["{"];for(var y in h){if(m=h[y],isNaN(parseInt(y,10))?p="'"+y+"'":(y=parseInt(y,10),p=(p=i(y).slice(2)).slice(0,-1)+n[p.slice(-1)]),typeof m=="number")m<0?(b=i(m).slice(3),B="-"):(b=i(m).slice(2),B=""),b=B+b.slice(0,-1)+n[b.slice(-1)];else{if(Ir(m)!=="object")throw new Error("Don't know what to do with value type "+Ir(m)+".");b=a(m)}E.push(p+b)}return E.push("}"),E.join("")},A=t.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,p,b,B,E={},y=1,w=E,S=[],M="",R="",O=h.length-1,I=1;I<O;I+=1)(B=h[I])=="'"?m?(b=m.join(""),m=void 0):m=[]:m?m.push(B):B=="{"?(S.push([w,b]),w={},b=void 0):B=="}"?((p=S.pop())[0][p[1]]=w,b=void 0,w=p[0]):B=="-"?y=-1:b===void 0?r.hasOwnProperty(B)?(M+=r[B],b=parseInt(M,16)*y,y=1,M=""):M+=B:r.hasOwnProperty(B)?(R+=r[B],w[b]=parseInt(R,16)*y,y=1,b=void 0,R=""):R+=B;return E},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:A("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":A("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":A("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":A("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:A("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:A("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":A("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:A("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":A("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":A("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":A("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(h){var m=h.font,p=u.Unicode[m.postScriptName];p&&(m.metadata.Unicode={},m.metadata.Unicode.widths=p.widths,m.metadata.Unicode.kerning=p.kerning);var b=c.Unicode[m.postScriptName];b&&(m.metadata.Unicode.encoding=b,m.encoding=b.codePages[0])}])}(Dt.API),function(t){var e=function(r){for(var n=r.length,s=new Uint8Array(n),i=0;i<n;i++)s[i]=r.charCodeAt(i);return s};t.API.events.push(["addFont",function(r){var n=void 0,s=r.font,i=r.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(a,A){A=/^\x00\x01\x00\x00/.test(A)?e(A):e(Uf(A)),a.metadata=t.API.TTFFont.open(A),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(s,n)}}])}(Dt),function(t){function e(){return(Mt.canvg?Promise.resolve(Mt.canvg):Qo(()=>import("./index.es-BnTmtgel.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}Dt.API.addSvgAsImage=function(r,n,s,i,a,A,l,c){if(isNaN(n)||isNaN(s))throw Lr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(a))throw Lr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=a;var h=u.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,u.width,u.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return e().then(function(b){return b.fromString(h,r,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(b){return b.render(m)}).then(function(){p.addImage(u.toDataURL("image/jpeg",1),n,s,i,a,l,c)})}}(),Dt.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(e,r);return this},Dt.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,s,i,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},A=Object.keys(a),l=[],c=0,u=0,h=0;function m(b,B){var E,y=!1;for(E=0;E<b.length;E+=1)b[E]===B&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var p=A.length;for(h=0;h<p;h+=1)r[A[h]].value=r[A[h]].defaultValue,r[A[h]].explicitSet=!1}if(Ir(t)==="object"){for(s in t)if(i=t[s],m(A,s)&&i!==void 0){if(r[s].type==="boolean"&&typeof i=="boolean")r[s].value=i;else if(r[s].type==="name"&&m(r[s].valueSet,i))r[s].value=i;else if(r[s].type==="integer"&&Number.isInteger(i))r[s].value=i;else if(r[s].type==="array"){for(c=0;c<i.length;c+=1)if(n=!0,i[c].length===1&&typeof i[c][0]=="number")l.push(String(i[c]-1));else if(i[c].length>1){for(u=0;u<i[c].length;u+=1)typeof i[c][u]!="number"&&(n=!1);n===!0&&l.push([i[c][0]-1,i[c][1]-1].join(" "))}r[s].value="["+l.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,B=[];for(b in r)r[b].explicitSet===!0&&(r[b].type==="name"?B.push("/"+b+" /"+r[b].value):B.push("/"+b+" "+r[b].value));B.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+B.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),A=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=i.length+a.length+A.length+s.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(s+i+a+A+l),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(Dt.API),function(t){var e=t.API,r=e.pdfEscape16=function(i,a){for(var A,l=a.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],h=0,m=i.length;h<m;++h){if(A=a.metadata.characterToGlyph(i.charCodeAt(h)),a.metadata.glyIdsUsed.push(A),a.metadata.toUnicode[A]=i.charCodeAt(h),l.indexOf(A)==-1&&(l.push(A),l.push([parseInt(a.metadata.widthOfGlyph(A),10)])),A=="0")return u.join("");A=A.toString(16),u.push(c[4-A.length],A)}return u.join("")},n=function(i){var a,A,l,c,u,h,m;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],h=0,m=(A=Object.keys(i).sort(function(p,b){return p-b})).length;h<m;h++)a=A[h],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),i[a]!==void 0&&i[a]!==null&&typeof i[a].toString=="function"&&(c=("0000"+i[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+c+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(a){var A=a.font,l=a.out,c=a.newObject,u=a.putStream;if(A.metadata instanceof t.API.TTFFont&&A.encoding==="Identity-H"){for(var h=A.metadata.Unicode.widths,m=A.metadata.subset.encode(A.metadata.glyIdsUsed,1),p="",b=0;b<m.length;b++)p+=String.fromCharCode(m[b]);var B=c();u({data:p,addLength1:!0,objectId:B}),l("endobj");var E=c();u({data:n(A.metadata.toUnicode),addLength1:!0,objectId:E}),l("endobj");var y=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+$u(A.fontName)),l("/FontFile2 "+B+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(A.metadata.bbox)),l("/Flags "+A.metadata.flags),l("/StemV "+A.metadata.stemV),l("/ItalicAngle "+A.metadata.italicAngle),l("/Ascent "+A.metadata.ascender),l("/Descent "+A.metadata.decender),l("/CapHeight "+A.metadata.capHeight),l(">>"),l("endobj");var w=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+$u(A.fontName)),l("/FontDescriptor "+y+" 0 R"),l("/W "+t.API.PDFObject.convert(h)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+A.encoding+")"),l(">>"),l(">>"),l("endobj"),A.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+E+" 0 R"),l("/BaseFont /"+$u(A.fontName)),l("/Encoding /"+A.encoding),l("/DescendantFonts ["+w+" 0 R]"),l(">>"),l("endobj"),A.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(a){var A=a.font,l=a.out,c=a.newObject,u=a.putStream;if(A.metadata instanceof t.API.TTFFont&&A.encoding==="WinAnsiEncoding"){for(var h=A.metadata.rawData,m="",p=0;p<h.length;p++)m+=String.fromCharCode(h[p]);var b=c();u({data:m,addLength1:!0,objectId:b}),l("endobj");var B=c();u({data:n(A.metadata.toUnicode),addLength1:!0,objectId:B}),l("endobj");var E=c();l("<<"),l("/Descent "+A.metadata.decender),l("/CapHeight "+A.metadata.capHeight),l("/StemV "+A.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+b+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(A.metadata.bbox)),l("/FontName /"+$u(A.fontName)),l("/ItalicAngle "+A.metadata.italicAngle),l("/Ascent "+A.metadata.ascender),l(">>"),l("endobj"),A.objectNumber=c();for(var y=0;y<A.metadata.hmtx.widths.length;y++)A.metadata.hmtx.widths[y]=parseInt(A.metadata.hmtx.widths[y]*(1e3/A.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+B+" 0 R/BaseFont/"+$u(A.fontName)+"/FontDescriptor "+E+" 0 R/Encoding/"+A.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(A.metadata.hmtx.widths)+">>"),l("endobj"),A.isAlreadyPutted=!0}})(i)}]);var s=function(i){var a,A=i.text||"",l=i.x,c=i.y,u=i.options||{},h=i.mutex||{},m=h.pdfEscape,p=h.activeFontKey,b=h.fonts,B=p,E="",y=0,w="",S=b[B].encoding;if(b[B].encoding!=="Identity-H")return{text:A,x:l,y:c,options:u,mutex:h};for(w=A,B=p,Array.isArray(A)&&(w=A[0]),y=0;y<w.length;y+=1)b[B].metadata.hasOwnProperty("cmap")&&(a=b[B].metadata.cmap.unicode.codeMap[w[y].charCodeAt(0)]),a||w[y].charCodeAt(0)<256&&b[B].metadata.hasOwnProperty("Unicode")?E+=w[y]:E+="";var M="";return parseInt(B.slice(1))<14||S==="WinAnsiEncoding"?M=m(E,B).split("").map(function(R){return R.charCodeAt(0).toString(16)}).join(""):S==="Identity-H"&&(M=r(E,b[B])),h.isHex=!0,{text:M,x:l,y:c,options:u,mutex:h}};e.events.push(["postProcessText",function(i){var a=i.text||"",A=[],l={text:a,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(a)){var c=0;for(c=0;c<a.length;c+=1)Array.isArray(a[c])&&a[c].length===3?A.push([s(Object.assign({},l,{text:a[c][0]})).text,a[c][1],a[c][2]]):A.push(s(Object.assign({},l,{text:a[c]})).text);i.text=A}else i.text=s(Object.assign({},l,{text:a})).text}])}(Dt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Dt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var s,i,a,A,l,c,u,h=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},B={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},E=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),w=!1,S=0;this.__bidiEngine__={};var M=function(_){var T=_.charCodeAt(),P=T>>8,ee=B[P];return ee!==void 0?h[256*ee+(255&T)]:P===252||P===253?"AL":y.test(P)?"L":P===8?"R":"N"},R=function(_){for(var T,P=0;P<_.length;P++){if((T=M(_.charAt(P)))==="L")return!1;if(T==="R")return!0}return!1},O=function(_,T,P,ee){var Ae,ue,he,te,se=T[ee];switch(se){case"L":case"R":w=!1;break;case"N":case"AN":break;case"EN":w&&(se="AN");break;case"AL":w=!0,se="R";break;case"WS":se="N";break;case"CS":ee<1||ee+1>=T.length||(Ae=P[ee-1])!=="EN"&&Ae!=="AN"||(ue=T[ee+1])!=="EN"&&ue!=="AN"?se="N":w&&(ue="AN"),se=ue===Ae?ue:"N";break;case"ES":se=(Ae=ee>0?P[ee-1]:"B")==="EN"&&ee+1<T.length&&T[ee+1]==="EN"?"EN":"N";break;case"ET":if(ee>0&&P[ee-1]==="EN"){se="EN";break}if(w){se="N";break}for(he=ee+1,te=T.length;he<te&&T[he]==="ET";)he++;se=he<te&&T[he]==="EN"?"EN":"N";break;case"NSM":if(a&&!A){for(te=T.length,he=ee+1;he<te&&T[he]==="NSM";)he++;if(he<te){var ne=_[ee],ye=ne>=1425&&ne<=2303||ne===64286;if(Ae=T[he],ye&&(Ae==="R"||Ae==="AL")){se="R";break}}}se=ee<1||(Ae=T[ee-1])==="B"?"N":P[ee-1];break;case"B":w=!1,s=!0,se=S;break;case"S":i=!0,se="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":w=!1;break;case"BN":se="N"}return se},I=function(_,T,P){var ee=_.split("");return P&&N(ee,P,{hiLevel:S}),ee.reverse(),T&&T.reverse(),ee.join("")},N=function(_,T,P){var ee,Ae,ue,he,te,se=-1,ne=_.length,ye=0,F=[],L=S?p:m,W=[];for(w=!1,s=!1,i=!1,Ae=0;Ae<ne;Ae++)W[Ae]=M(_[Ae]);for(ue=0;ue<ne;ue++){if(te=ye,F[ue]=O(_,W,F,ue),ee=240&(ye=L[te][b[F[ue]]]),ye&=15,T[ue]=he=L[ye][5],ee>0)if(ee===16){for(Ae=se;Ae<ue;Ae++)T[Ae]=1;se=-1}else se=-1;if(L[ye][6])se===-1&&(se=ue);else if(se>-1){for(Ae=se;Ae<ue;Ae++)T[Ae]=he;se=-1}W[ue]==="B"&&(T[ue]=0),P.hiLevel|=he}i&&function(q,H,re){for(var $=0;$<re;$++)if(q[$]==="S"){H[$]=S;for(var de=$-1;de>=0&&q[de]==="WS";de--)H[de]=S}}(W,T,ne)},j=function(_,T,P,ee,Ae){if(!(Ae.hiLevel<_)){if(_===1&&S===1&&!s)return T.reverse(),void(P&&P.reverse());for(var ue,he,te,se,ne=T.length,ye=0;ye<ne;){if(ee[ye]>=_){for(te=ye+1;te<ne&&ee[te]>=_;)te++;for(se=ye,he=te-1;se<he;se++,he--)ue=T[se],T[se]=T[he],T[he]=ue,P&&(ue=P[se],P[se]=P[he],P[he]=ue);ye=te}ye++}}},D=function(_,T,P){var ee=_.split(""),Ae={hiLevel:S};return P||(P=[]),N(ee,P,Ae),function(ue,he,te){if(te.hiLevel!==0&&u)for(var se,ne=0;ne<ue.length;ne++)he[ne]===1&&(se=E.indexOf(ue[ne]))>=0&&(ue[ne]=E[se+1])}(ee,P,Ae),j(2,ee,T,P,Ae),j(1,ee,T,P,Ae),ee.join("")};return this.__bidiEngine__.doBidiReorder=function(_,T,P){if(function(Ae,ue){if(ue)for(var he=0;he<Ae.length;he++)ue[he]=he;A===void 0&&(A=R(Ae)),c===void 0&&(c=R(Ae))}(_,T),a||!l||c)if(a&&l&&A^c)S=A?1:0,_=I(_,T,P);else if(!a&&l&&c)S=A?1:0,_=D(_,T,P),_=I(_,T);else if(!a||A||l||c){if(a&&!l&&A^c)_=I(_,T),A?(S=0,_=D(_,T,P)):(S=1,_=D(_,T,P),_=I(_,T));else if(a&&A&&!l&&c)S=1,_=D(_,T,P),_=I(_,T);else if(!a&&!l&&A^c){var ee=u;A?(S=1,_=D(_,T,P),S=0,u=!1,_=D(_,T,P),u=ee):(S=0,_=D(_,T,P),_=I(_,T),S=1,u=!1,_=D(_,T,P),u=ee,_=I(_,T))}}else S=0,_=D(_,T,P);else S=A?1:0,_=D(_,T,P);return _},this.__bidiEngine__.setOptions=function(_){_&&(a=_.isInputVisual,l=_.isOutputVisual,A=_.isInputRtl,c=_.isOutputRtl,u=_.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var s=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var a=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var A=0;for(a=[],A=0;A<s.length;A+=1)Object.prototype.toString.call(s[A])==="[object Array]"?a.push([r.doBidiReorder(s[A][0]),s[A][1],s[A][2]]):a.push([r.doBidiReorder(s[A])]);n.text=a}else n.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])}(Dt),Dt.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new bl(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new A$(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new $z(this.contents),this.head=new Jz(this),this.name=new t$(this),this.cmap=new Q3(this),this.toUnicode={},this.hhea=new Xz(this),this.maxp=new r$(this),this.hmtx=new n$(this),this.post=new Zz(this),this.os2=new Yz(this),this.loca=new o$(this),this.glyf=new s$(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,A,l,c;for(c=[],a=0,A=(l=this.bbox).length;a<A;a++)e=l[a],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),32768&(r=s>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var s,i,a,A;for(a=0,i=0,A=(e=""+e).length;0<=A?i<A:i>A;i=0<=A?++i:--i)s=e.charCodeAt(i),a+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/r)||0;return a*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var pa,bl=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,s;for(s=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)s.push(this.writeByte(e.charCodeAt(r)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,s,i,a,A,l;return e=this.readByte(),r=this.readByte(),n=this.readByte(),s=this.readByte(),i=this.readByte(),a=this.readByte(),A=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^i)+65536*(255^a)+256*(255^A)+(255^l)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*s+16777216*i+65536*a+256*A+l},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,s,i;for(i=[],n=0,s=e.length;n<s;n++)r=e[n],i.push(this.writeByte(r));return i},t}(),$z=function(){var t;function e(r){var n,s,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,s,i,a,A,l,c,u,h,m,p,b,B;for(B in p=Object.keys(r).length,l=Math.log(2),h=16*Math.floor(Math.log(p)/l),a=Math.floor(h/l),u=16*p-h,(s=new bl).writeInt(this.scalarType),s.writeShort(p),s.writeShort(h),s.writeShort(a),s.writeShort(u),i=16*p,c=s.pos+i,A=null,b=[],r)for(m=r[B],s.writeString(B),s.writeInt(t(m)),s.writeInt(c),s.writeInt(m.length),b=b.concat(m),B==="head"&&(A=c),c+=m.length;c%4;)b.push(0),c++;return s.write(b),n=2981146554-t(s.data),s.pos=A+8,s.writeUInt32(n),s.data},t=function(r){var n,s,i,a;for(r=j3.call(r);r.length%4;)r.push(0);for(i=new bl(r),s=0,n=0,a=r.length;n<a;n=n+=4)s+=i.readUInt32();return 4294967295&s},e}(),Wz={}.hasOwnProperty,za=function(t,e){for(var r in e)Wz.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};pa=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var Jz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return za(e,pa),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var n;return(n=new bl).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},e}(),N_=function(){function t(e,r){var n,s,i,a,A,l,c,u,h,m,p,b,B,E,y,w,S;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(p=e.readUInt16(),m=p/2,e.pos+=6,i=function(){var M,R;for(R=[],l=M=0;0<=m?M<m:M>m;l=0<=m?++M:--M)R.push(e.readUInt16());return R}(),e.pos+=2,B=function(){var M,R;for(R=[],l=M=0;0<=m?M<m:M>m;l=0<=m?++M:--M)R.push(e.readUInt16());return R}(),c=function(){var M,R;for(R=[],l=M=0;0<=m?M<m:M>m;l=0<=m?++M:--M)R.push(e.readUInt16());return R}(),u=function(){var M,R;for(R=[],l=M=0;0<=m?M<m:M>m;l=0<=m?++M:--M)R.push(e.readUInt16());return R}(),s=(this.length-e.pos+this.offset)/2,A=function(){var M,R;for(R=[],l=M=0;0<=s?M<s:M>s;l=0<=s?++M:--M)R.push(e.readUInt16());return R}(),l=y=0,S=i.length;y<S;l=++y)for(E=i[l],n=w=b=B[l];b<=E?w<=E:w>=E;n=b<=E?++w:--w)u[l]===0?a=n+c[l]:(a=A[u[l]/2+(n-b)-(m-l)]||0)!==0&&(a+=c[l]),this.codeMap[n]=65535&a}e.pos=h}return t.encode=function(e,r){var n,s,i,a,A,l,c,u,h,m,p,b,B,E,y,w,S,M,R,O,I,N,j,D,_,T,P,ee,Ae,ue,he,te,se,ne,ye,F,L,W,q,H,re,$,de,pe,Ne,Te;switch(ee=new bl,a=Object.keys(e).sort(function(Fe,oe){return Fe-oe}),r){case"macroman":for(B=0,E=function(){var Fe=[];for(b=0;b<256;++b)Fe.push(0);return Fe}(),w={0:0},i={},Ae=0,se=a.length;Ae<se;Ae++)w[de=e[s=a[Ae]]]==null&&(w[de]=++B),i[s]={old:e[s],new:w[e[s]]},E[s]=w[e[s]];return ee.writeUInt16(1),ee.writeUInt16(0),ee.writeUInt32(12),ee.writeUInt16(0),ee.writeUInt16(262),ee.writeUInt16(0),ee.write(E),{charMap:i,subtable:ee.data,maxGlyphID:B+1};case"unicode":for(T=[],h=[],S=0,w={},n={},y=c=null,ue=0,ne=a.length;ue<ne;ue++)w[R=e[s=a[ue]]]==null&&(w[R]=++S),n[s]={old:R,new:w[R]},A=w[R]-s,y!=null&&A===c||(y&&h.push(y),T.push(s),c=A),y=s;for(y&&h.push(y),h.push(65535),T.push(65535),D=2*(j=T.length),N=2*Math.pow(Math.log(j)/Math.LN2,2),m=Math.log(N/2)/Math.LN2,I=2*j-N,l=[],O=[],p=[],b=he=0,ye=T.length;he<ye;b=++he){if(_=T[b],u=h[b],_===65535){l.push(0),O.push(0);break}if(_-(P=n[_].new)>=32768)for(l.push(0),O.push(2*(p.length+j-b)),s=te=_;_<=u?te<=u:te>=u;s=_<=u?++te:--te)p.push(n[s].new);else l.push(P-_),O.push(0)}for(ee.writeUInt16(3),ee.writeUInt16(1),ee.writeUInt32(12),ee.writeUInt16(4),ee.writeUInt16(16+8*j+2*p.length),ee.writeUInt16(0),ee.writeUInt16(D),ee.writeUInt16(N),ee.writeUInt16(m),ee.writeUInt16(I),re=0,F=h.length;re<F;re++)s=h[re],ee.writeUInt16(s);for(ee.writeUInt16(0),$=0,L=T.length;$<L;$++)s=T[$],ee.writeUInt16(s);for(pe=0,W=l.length;pe<W;pe++)A=l[pe],ee.writeUInt16(A);for(Ne=0,q=O.length;Ne<q;Ne++)M=O[Ne],ee.writeUInt16(M);for(Te=0,H=p.length;Te<H;Te++)B=p[Te],ee.writeUInt16(B);return{charMap:n,subtable:ee.data,maxGlyphID:S+1}}},t}(),Q3=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return za(e,pa),e.prototype.tag="cmap",e.prototype.parse=function(r){var n,s,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)n=new N_(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(r,n){var s,i;return n==null&&(n="macroman"),s=N_.encode(r,n),(i=new bl).writeUInt16(0),i.writeUInt16(1),s.table=i.data.concat(s.subtable),s},e}(),Xz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return za(e,pa),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e}(),Yz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return za(e,pa),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,s;for(s=[],n=0;n<10;++n)s.push(r.readByte());return s}(),this.charRange=function(){var n,s;for(s=[],n=0;n<4;++n)s.push(r.readInt());return s}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,s;for(s=[],n=0;n<2;n=++n)s.push(r.readInt());return s}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e}(),Zz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return za(e,pa),e.prototype.tag="post",e.prototype.parse=function(r){var n,s,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var a;for(s=r.readUInt16(),this.glyphNameIndex=[],a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)n=r.readByte(),i.push(this.names.push(r.readString(n)));return i;case 151552:return s=r.readUInt16(),this.offsets=r.read(s);case 196608:break;case 262144:return this.map=(function(){var A,l,c;for(c=[],a=A=0,l=this.file.maxp.numGlyphs;0<=l?A<l:A>l;a=0<=l?++A:--A)c.push(r.readUInt32());return c}).call(this)}},e}(),e$=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},t$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return za(e,pa),e.prototype.tag="name",e.prototype.parse=function(r){var n,s,i,a,A,l,c,u,h,m,p;for(r.pos=this.offset,r.readShort(),n=r.readShort(),l=r.readShort(),s=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)s.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+l+r.readShort()});for(c={},a=h=0,m=s.length;h<m;a=++h)i=s[a],r.pos=i.offset,u=r.readString(i.length),A=new e$(u,i),c[p=i.nameID]==null&&(c[p]=[]),c[i.nameID].push(A);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),r$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return za(e,pa),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e}(),n$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return za(e,pa),e.prototype.tag="hmtx",e.prototype.parse=function(r){var n,s,i,a,A,l,c;for(r.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,h;for(h=[],n=u=0;0<=i?u<i:u>i;n=0<=i?++u:--u)h.push(r.readInt16());return h}(),this.widths=(function(){var u,h,m,p;for(p=[],u=0,h=(m=this.metrics).length;u<h;u++)a=m[u],p.push(a.advance);return p}).call(this),s=this.widths[this.widths.length-1],c=[],n=A=0;0<=i?A<i:A>i;n=0<=i?++A:--A)c.push(this.widths.push(s));return c},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e}(),j3=[].slice,s$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return za(e,pa),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var n,s,i,a,A,l,c,u,h,m;return r in this.cache?this.cache[r]:(a=this.file.loca,n=this.file.contents,s=a.indexOf(r),(i=a.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+s,A=(l=new bl(n.read(i))).readShort(),u=l.readShort(),m=l.readShort(),c=l.readShort(),h=l.readShort(),this.cache[r]=A===-1?new a$(l,u,m,c,h):new i$(l,A,u,m,c,h),this.cache[r]))},e.prototype.encode=function(r,n,s){var i,a,A,l,c;for(A=[],a=[],l=0,c=n.length;l<c;l++)i=r[n[l]],a.push(A.length),i&&(A=A.concat(i.encode(s)));return a.push(A.length),{table:A,offsets:a}},e}(),i$=function(){function t(e,r,n,s,i,a){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=s,this.xMax=i,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),a$=function(){function t(e,r,n,s,i){var a,A;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;A=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&A;)a.pos+=1&A?4:2,128&A?a.pos+=8:64&A?a.pos+=4:8&A&&(a.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new bl(j3.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),o$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return za(e,pa),e.prototype.tag="loca",e.prototype.parse=function(r){var n,s;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,a;for(a=[],s=0,i=this.length;s<i;s+=2)a.push(2*r.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],s=0,i=this.length;s<i;s+=4)a.push(r.readUInt32());return a}).call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,n){for(var s=new Uint32Array(this.offsets.length),i=0,a=0,A=0;A<s.length;++A)if(s[A]=i,a<n.length&&n[a]==A){++a,s[A]=i;var l=this.offsets[A],c=this.offsets[A+1]-l;c>0&&(i+=c)}for(var u=new Array(4*s.length),h=0;h<s.length;++h)u[4*h+3]=255&s[h],u[4*h+2]=(65280&s[h])>>8,u[4*h+1]=(16711680&s[h])>>16,u[4*h]=(4278190080&s[h])>>24;return u},e}(),A$=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,s,i;for(r in s=this.font.cmap.tables[0].codeMap,e={},i=this.subset)n=i[r],e[r]=s[n];return e},t.prototype.glyphsFor=function(e){var r,n,s,i,a,A,l;for(s={},a=0,A=e.length;a<A;a++)s[i=e[a]]=this.font.glyf.glyphFor(i);for(i in r=[],s)(n=s[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in l=this.glyphsFor(r))n=l[i],s[i]=n;return s},t.prototype.encode=function(e,r){var n,s,i,a,A,l,c,u,h,m,p,b,B,E,y;for(s in n=Q3.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),p={0:0},y=n.charMap)p[(l=y[s]).old]=l.new;for(b in m=n.maxGlyphID,a)b in p||(p[b]=m++);return u=function(w){var S,M;for(S in M={},w)M[w[S]]=S;return M}(p),h=Object.keys(u).sort(function(w,S){return w-S}),B=function(){var w,S,M;for(M=[],w=0,S=h.length;w<S;w++)A=h[w],M.push(u[A]);return M}(),i=this.font.glyf.encode(a,B,p),c=this.font.loca.encode(i.offsets,B),E={cmap:this.font.cmap.raw(),glyf:i.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(E["OS/2"]=this.font.os2.raw()),this.font.directory.encode(E)},t}();Dt.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,s,i,a;if(Array.isArray(r))return"["+function(){var A,l,c;for(c=[],A=0,l=r.length;A<l;A++)n=r[A],c.push(e.convert(n));return c}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in i=["<<"],r)a=r[s],i.push("/"+s+" "+e.convert(a));return i.push(">>"),i.join(`
`)}return""+r},e}();const cx=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:Oz,AcroFormAppearance:bt,AcroFormButton:Qn,AcroFormCheckBox:jf,AcroFormChoiceField:Bc,AcroFormComboBox:Nc,AcroFormEditBox:Pf,AcroFormListBox:Cc,AcroFormPasswordField:Lf,AcroFormPushButton:Qf,AcroFormRadioButton:Ec,AcroFormTextField:ul,GState:bp,ShadingPattern:HA,TilingPattern:gc,default:Dt,jsPDF:Dt},Symbol.toStringTag,{value:"Module"}));async function l$(t){const e={...t,remaining:t.quantity,status:"PENDIENTE",createdAt:Lt.now()};return Bn(at(je,"inventory_batches"),e)}async function L3(t,e){await nn(Qt(je,"inventory_batches",t),{status:"PAGADO",paidAmount:null,paidAt:Lt.now()})}async function c$(t,e){const r=Wt(at(je,"batch_allocations"),rr("saleDate",">=",t),rr("saleDate","<=",e)),n=await Pt(r),s={};return n.forEach(i=>{const a=i.data(),A=a.batchId;s[A]||(s[A]={batchId:a.batchId,batchDate:a.batchDate,productName:a.productName,quantity:0,amountCharged:0}),s[A].quantity+=Number(a.quantity||0),s[A].amountCharged+=Number(a.amountCharged||0)}),Object.values(s)}async function u$(t){const e=Qt(je,"salesV2",t),r=await zo(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),s=[];if(Array.isArray(n.items)){for(const A of n.items)if(Array.isArray(A==null?void 0:A.allocations))for(const l of A.allocations){const c=String((l==null?void 0:l.batchId)||"").trim(),u=Number((l==null?void 0:l.qty)||0);c&&u&&s.push({batchId:c,qty:u})}}if(Array.isArray(n.allocations))for(const A of n.allocations){const l=String((A==null?void 0:A.batchId)||"").trim(),c=Number((A==null?void 0:A.qty)||0);l&&c&&s.push({batchId:l,qty:c})}if(s.length===0)return await Al(je,async A=>{A.delete(e)}),{restored:0};const i=new Map;for(const A of s)i.set(A.batchId,Number((i.get(A.batchId)||0)+A.qty));let a=0;return await Al(je,async A=>{const l=Array.from(i.entries()),c=l.map(([h])=>Qt(je,"inventory_batches",h)),u=await Promise.all(c.map(h=>A.get(h)));l.forEach(([h,m],p)=>{const b=u[p];if(!b.exists())return;const B=b.data(),E=Number((B==null?void 0:B.remaining)??0),y=Number((E+Number(m||0)).toFixed(3));A.update(c[p],{remaining:y}),a+=Number(m||0)}),A.delete(e)}),{restored:a}}function Jc(){const[t,e]=U.useState(0),r=U.useCallback(()=>e(n=>n+1),[]);return{refreshKey:t,refresh:r}}const Ei=t=>Math.round((Number(t)||0)*100)/100,mg=t=>Math.round((Number(t)||0)*1e3)/1e3,Kh=t=>Number(t??0).toFixed(2),Yw=t=>Number(t??0).toFixed(3),E_=(t,e)=>{var n;const r=t.date??((n=t.timestamp)!=null&&n.toDate?er(t.timestamp.toDate(),"yyyy-MM-dd"):"");return r?Array.isArray(t.items)&&t.items.length>0?t.items.map((s,i)=>{const a=Number((s==null?void 0:s.qty)??0),A=Number((s==null?void 0:s.lineFinal)??0)||Math.max(0,Number((s==null?void 0:s.unitPrice)||0)*a-Number((s==null?void 0:s.discount)||0));return{id:`${e}#${i}`,productName:String((s==null?void 0:s.productName)??"(sin nombre)"),quantity:a,amount:Ei(A),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:Array.isArray(s==null?void 0:s.allocations)?s.allocations:t.allocations,avgUnitCost:Number((s==null?void 0:s.avgUnitCost)??t.avgUnitCost??0),cogsAmount:Number((s==null?void 0:s.cogsAmount)??0)}}):[{id:e,productName:t.productName??"(sin nombre)",quantity:Number(t.quantity??0),amount:Number(t.amount??t.amountCharged??0),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:t.allocations,avgUnitCost:t.avgUnitCost,cogsAmount:t.cogsAmount}]:[]};function d$({role:t}){const[e,r]=U.useState([]),[n,s]=U.useState([]),[i,a]=U.useState(null),[A,l]=U.useState(!0),[c,u]=U.useState(""),[h,m]=U.useState("ALL"),[p,b]=U.useState(null),[B,E]=U.useState(0),[y,w]=U.useState(0),[S,M]=U.useState(""),[R,O]=U.useState(0),[I,N]=U.useState("0"),j=er(new Date,"yyyy-MM-dd"),D=U.useRef(null),{refreshKey:_}=Jc();U.useEffect(()=>{const H=Wt(at(je,"salesV2"),rr("date","==",j)),re=S2(H,$=>{const de=[];$.forEach(pe=>{const Ne=E_(pe.data(),pe.id);de.push(...Ne)}),r(de),l(!1)});return()=>re()},[j,_]),U.useEffect(()=>{const H=Wt(at(je,"salesV2"),rr("status","==","FLOTANTE")),re=S2(H,$=>{const de=[];$.forEach(pe=>{const Ne=E_(pe.data(),pe.id);de.push(...Ne)}),s(de)});return()=>re()},[_]),U.useEffect(()=>{(async()=>{const re=Wt(at(je,"daily_closures"),rr("date","==",j)),$=await Pt(re);if($.empty)a(null);else{const de=$.docs[0];a({id:de.id,...de.data()})}})()},[j,_]);const T=_o.useMemo(()=>{if(h==="FLOTANTE"){const H=[...e,...n],re=new Map;for(const $ of H)$.status==="FLOTANTE"&&re.set($.id,$);return Array.from(re.values())}if(h==="ALL"){const H=[...e,...n],re=new Map;for(const $ of H)re.set($.id,$);return Array.from(re.values())}return e.filter(H=>H.status==="PROCESADA")},[h,e,n]);Ei(T.reduce((H,re)=>H+(re.amountSuggested||0),0));const P=Ei(T.reduce((H,re)=>H+(re.amount||0),0)),ee=mg(T.reduce((H,re)=>H+(re.quantity||0),0)),Ae=Ei(T.reduce((H,re)=>H+Number(re.cogsAmount??0),0)),ue=Ei(P-Ae),he={};T.forEach(H=>{const re=H.productName||"(sin nombre)";he[re]||(he[re]={totalQuantity:0,totalAmount:0}),he[re].totalQuantity=mg(he[re].totalQuantity+(H.quantity||0)),he[re].totalAmount=Ei(he[re].totalAmount+(H.amount||0))});const te=Object.entries(he).map(([H,re])=>({productName:H,totalQuantity:re.totalQuantity,totalAmount:re.totalAmount})),se=async()=>{try{const H=T.filter(Fe=>Fe.status==="FLOTANTE"),re=H.length>0?H:e.filter(Fe=>Fe.status!=="PROCESADA");if(re.length===0){u("No hay ventas para procesar.");return}const $={totalCharged:Ei(re.reduce((Fe,oe)=>Fe+(oe.amount||0),0)),totalSuggested:Ei(re.reduce((Fe,oe)=>Fe+(oe.amountSuggested||0),0)),totalUnits:mg(re.reduce((Fe,oe)=>Fe+(oe.quantity||0),0)),totalCOGS:Ei(re.reduce((Fe,oe)=>Fe+Number(oe.cogsAmount??0),0))},de=Ei($.totalCharged-$.totalSuggested),pe=Ei($.totalCharged-$.totalCOGS),Ne=await Bn(at(je,"daily_closures"),{date:j,createdAt:Lt.now(),totalCharged:$.totalCharged,totalSuggested:$.totalSuggested,totalDifference:de,totalUnits:$.totalUnits,totalCOGS:$.totalCOGS,grossProfit:pe,products:re.map(Fe=>({productName:Fe.productName,quantity:Fe.quantity,amount:Fe.amount})),salesV2:re.map(Fe=>({id:Fe.id,productName:Fe.productName,quantity:Fe.quantity,amount:Fe.amount,amountSuggested:Fe.amountSuggested,userEmail:Fe.userEmail,clientName:Fe.clientName,amountReceived:Fe.amountReceived,change:Fe.change,status:Fe.status,cogsAmount:Fe.cogsAmount??0,avgUnitCost:Fe.avgUnitCost??null,allocations:Fe.allocations??[],date:Fe.date})),productSummary:Object.entries(re.reduce((Fe,oe)=>{const ce=oe.productName||"(sin nombre)";return Fe[ce]||(Fe[ce]={totalQuantity:0,totalAmount:0}),Fe[ce].totalQuantity=mg(Fe[ce].totalQuantity+(oe.quantity||0)),Fe[ce].totalAmount=Ei(Fe[ce].totalAmount+(oe.amount||0)),Fe},{})).map(([Fe,oe])=>({productName:Fe,totalQuantity:oe.totalQuantity,totalAmount:oe.totalAmount}))}),Te=ry(je);re.forEach(Fe=>{Te.update(Qt(je,"salesV2",Fe.id.split("#")[0]),{status:"PROCESADA",closureId:Ne.id,closureDate:j})}),await Te.commit(),u(` Cierre guardado. Ventas procesadas: ${re.length}.`)}catch(H){console.error(H),u(" Error al guardar el cierre.")}},ne=async H=>{if(window.confirm("Revertir esta venta? Esta accin no se puede deshacer."))try{await nn(Qt(je,"salesV2",H.split("#")[0]),{status:"FLOTANTE",closureId:null,closureDate:null}),u(" Venta revertida a FLOTANTE.")}catch(re){console.error(re),u(" No se pudo revertir la venta.")}},ye=H=>{b(H),E(H.quantity),w(H.amount),M(H.clientName),O(H.amountReceived),N(H.change)},F=async()=>{if(p)try{await nn(Qt(je,"salesV2",p.id.split("#")[0]),{quantity:B,amount:y,amountCharged:y,clientName:S,amountReceived:R,change:I}),b(null),u(" Venta actualizada.")}catch(H){console.error(H),u(" No se pudo actualizar la venta.")}},L=async H=>{if(window.confirm("Eliminar esta venta? Se restaurar el stock en los lotes asignados."))try{const{restored:re}=await u$(H.split("#")[0]);u(` Venta eliminada. Stock restaurado: ${Number(re).toFixed(2)}.`)}catch(re){console.error(re),u(" No se pudo eliminar la venta.")}},W=async()=>{if(D.current){D.current.classList.add("force-pdf-colors");try{const re=(await bB(D.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),$=new Dt;$.addImage(re,"PNG",10,10,190,0),$.save(`cierre_${j}.pdf`)}finally{D.current.classList.remove("force-pdf-colors")}}},q=!t||t==="admin";return o.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[o.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Cierre de Ventas - ",j]}),o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx("label",{className:"text-sm",children:"Filtrar:"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:h,onChange:H=>m(H.target.value),children:[o.jsx("option",{value:"ALL",children:"Todas"}),o.jsx("option",{value:"FLOTANTE",children:"Venta Flotante"}),o.jsx("option",{value:"PROCESADA",children:"Venta Procesada"})]})]}),A?o.jsx("p",{children:"Cargando ventas..."}):o.jsxs("div",{ref:D,children:[o.jsxs("table",{className:"min-w-full border text-sm mb-4  shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Estado"}),o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Libras - Unidad"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Fecha venta"}),o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Acciones"})]})}),o.jsxs("tbody",{children:[T.map(H=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${H.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:H.status})}),o.jsx("td",{className:"border p-1",children:H.productName}),o.jsx("td",{className:"border p-1",children:Yw(H.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",Kh(H.amount)]}),o.jsx("td",{className:"border p-1",children:H.date}),o.jsx("td",{className:"border p-1",children:H.userEmail}),o.jsx("td",{className:"border p-1",children:H.status==="FLOTANTE"?o.jsxs("div",{className:"flex gap-2 justify-center",children:[q&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>ye(H),className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",children:"Editar"}),o.jsx("button",{onClick:()=>L(H.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]}),!q&&o.jsx("span",{className:"text-gray-400 text-xs",children:""})]}):H.status==="PROCESADA"?o.jsx("div",{className:"flex gap-2 justify-center",children:q?o.jsx("button",{onClick:()=>ne(H.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Revertir"}):o.jsx("span",{className:"text-gray-400 text-xs",children:""})}):o.jsx("span",{className:"text-gray-400 text-xs",children:"No options"})})]},H.id)),T.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-3 text-center text-gray-500",children:"Sin ventas para mostrar."})})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm mb-2",children:[o.jsxs("div",{children:[" ","Total Libras/Unidades: ",o.jsx("strong",{children:Yw(ee)})]}),o.jsxs("div",{children:[" ","Total cobrado: ",o.jsxs("strong",{children:["C$",Kh(P)]})]})]}),(Ae>0||ue!==P)&&o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm mb-6",children:[o.jsxs("div",{children:[" ","Calculo a Precio compra:"," ",o.jsxs("strong",{children:["C$",Kh(Ae)]})]}),o.jsxs("div",{children:[" ","Ganancia antes de gasto:"," ",o.jsxs("strong",{children:["C$",Kh(ue)]})]})]}),o.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),o.jsxs("table",{className:"min-w-full border text-sm mb-2 shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),o.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),o.jsxs("tbody",{children:[te.map(H=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:H.productName}),o.jsx("td",{className:"border p-1",children:Yw(H.totalQuantity)}),o.jsxs("td",{className:"border p-1",children:["C$",Kh(H.totalAmount)]})]},H.productName)),te.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500",children:"Sin datos para consolidar."})})]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:se,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Cerrar ventas del da"}),o.jsx("button",{onClick:W,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Descargar PDF"})]}),c&&o.jsx("p",{className:"mt-2 text-sm",children:c}),p&&o.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-4 space-y-3",children:[o.jsx("h4",{className:"font-semibold text-lg",children:"Editar venta"}),o.jsxs("div",{className:"text-sm text-gray-500",children:[p.productName,"  ",p.userEmail]}),o.jsx("label",{className:"text-sm",children:"Cantidad"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:B,onChange:H=>E(parseFloat(H.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Monto cobrado"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:y,onChange:H=>w(parseFloat(H.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Cliente"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:S,onChange:H=>M(H.target.value)}),o.jsx("label",{className:"text-sm",children:"Paga con"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:R,onChange:H=>O(parseFloat(H.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Vuelto"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:I,onChange:H=>N(H.target.value)}),o.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[o.jsx("button",{onClick:()=>b(null),className:"px-3 py-1 border rounded",children:"Cancelar"}),o.jsx("button",{onClick:F,className:"px-3 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",children:"Guardar cambios"})]})]})})]})}const Ni=t=>Number(t??0).toFixed(2),ju=t=>Number(t??0).toFixed(3);function h$(){var w,S,M,R;const t=async O=>{if(!window.confirm(`Eliminar el cierre del ${O.date}?`))return;const I=window.confirm("Tambin quieres reabrir (revertir a FLOTANTE) las ventas vinculadas a este cierre?");try{if(I){const N=await Pt(Wt(at(je,"salesV2"),rr("closureId","==",O.id)));if(!N.empty){const j=ry(je);N.forEach(D=>{j.update(Qt(je,"salesV2",D.id),{status:"FLOTANTE",closureId:null,closureDate:null})}),await j.commit()}}await os(Qt(je,"daily_closures",O.id)),(c==null?void 0:c.id)===O.id&&u(null),await b(),m(` Cierre eliminado${I?" y ventas reabiertas.":"."}`)}catch(N){console.error(N),m(" No se pudo eliminar el cierre.")}},[e,r]=U.useState(er(kV(new Date),"yyyy-MM-dd")),[n,s]=U.useState(er(new Date,"yyyy-MM-dd")),[i,a]=U.useState(!0),[A,l]=U.useState([]),[c,u]=U.useState(null),[h,m]=U.useState(""),p=U.useRef(null),b=async()=>{try{a(!0);const O=Wt(at(je,"daily_closures"),rr("date",">=",e),rr("date","<=",n)),I=await Pt(O),N=[];I.forEach(j=>N.push({id:j.id,...j.data()})),N.sort((j,D)=>j.date<D.date?1:j.date>D.date?-1:0),l(N)}catch(O){console.error(O),m(" Error cargando el historial.")}finally{a(!1)}};U.useEffect(()=>{b()},[]);const B=async O=>{O.preventDefault(),b()},E=U.useMemo(()=>{if(!c)return{units:0,sug:0,chg:0,diff:0,cogs:0,profit:0};const O=Number(c.totalUnits??0),I=Number(c.totalSuggested??0),N=Number(c.totalCharged??0),j=Number(c.totalDifference??(isFinite(N-I)?N-I:0)),D=Number(c.totalCOGS??0),_=Number(c.grossProfit??(isFinite(N-D)?N-D:0));return{units:O,sug:I,chg:N,diff:j,cogs:D,profit:_}},[c]),y=async()=>{if(!p.current||!c)return;const O=p.current;O.classList.add("force-pdf-colors");try{const[{default:I},{jsPDF:N}]=await Promise.all([Qo(()=>Promise.resolve().then(()=>BB),void 0),Qo(()=>Promise.resolve().then(()=>cx),void 0)]),D=(await I(O,{backgroundColor:"#ffffff",onclone:P=>{const ee=P.defaultView;P.body.querySelectorAll("*").forEach(ue=>{const he=ee.getComputedStyle(ue);he.color&&(ue.style.color=he.color),he.backgroundColor&&he.backgroundColor!=="rgba(0, 0, 0, 0)"&&(ue.style.backgroundColor=he.backgroundColor),he.borderColor&&(ue.style.borderColor=he.borderColor)})}})).toDataURL("image/png"),{jsPDF:_}=await Qo(async()=>{const{jsPDF:P}=await Promise.resolve().then(()=>cx);return{jsPDF:P}},void 0),T=new _;T.addImage(D,"PNG",10,10,190,0),T.save(`cierre_${c.date}.pdf`)}finally{O.classList.remove("force-pdf-colors")}};return o.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Histrico de cierres"}),o.jsxs("form",{onSubmit:B,className:"flex flex-wrap items-end gap-3 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:e,onChange:O=>r(O.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:n,onChange:O=>s(O.target.value)})]}),o.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Aplicar"})]}),i?o.jsx("p",{children:"Cargando..."}):A.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"Sin cierres en el rango seleccionado."}):o.jsxs("table",{className:"min-w-full text-sm mb-6  shadow-lg p-4 bg-white border-gray-100",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Fecha"}),o.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),o.jsx("th",{className:"border p-2",children:"Monto de venta"}),o.jsx("th",{className:"border p-2",children:"Monto al costo"}),o.jsx("th",{className:"border p-2",children:"Ganancia sin gastos"}),o.jsx("th",{className:"border p-2",children:"Acciones"})]})}),o.jsx("tbody",{children:A.map(O=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:O.date}),o.jsx("td",{className:"border p-1",children:ju(O.totalUnits)}),o.jsxs("td",{className:"border p-1",children:["C$",Ni(O.totalCharged)]}),o.jsxs("td",{className:"border p-1",children:["C$",Ni(O.totalCOGS)]}),o.jsxs("td",{className:"border p-1",children:["C$",Ni(O.grossProfit??Number(O.totalCharged??0)-Number(O.totalCOGS??0))]}),o.jsx("td",{className:"border p-1",children:o.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[o.jsx("button",{className:"text-xs bg-gray-800 text-white px-2 py-1 rounded hover:bg-black",onClick:()=>u(O),children:"Ver detalle"}),o.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>t(O),children:"Eliminar"})]})})]},O.id))})]}),c&&o.jsxs("div",{className:"mt-6 rounded-2xl shadow-lg p-4 bg-white border-solid border-2 border-gray-100",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2 ",children:[o.jsxs("h2",{className:"text-xl font-semibold",children:["Detalle ",c.date]}),o.jsx("button",{onClick:()=>u(null),className:"text-sm px-2 py-1 border rounded",children:"Cerrar"}),o.jsx("button",{onClick:y,className:"ml-auto bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Descargar PDF"})]}),o.jsxs("div",{ref:p,className:"space-y-4",children:[o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:o.jsxs("div",{children:["Total Libras/Unidades: ",o.jsx("strong",{children:ju(E.units)})]})}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm",children:[o.jsxs("div",{children:["Monto al costo:"," ",o.jsxs("strong",{children:["C$",Ni(E.cogs)]})]}),o.jsxs("div",{children:["Ganancia sin gastos:"," ",o.jsxs("strong",{children:["C$",Ni(E.profit)]})]})]}),(w=c.salesV2)!=null&&w.length?o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Cantidad"}),o.jsx("th",{className:"border p-2",children:"Monto de ventas"}),o.jsx("th",{className:"border p-2",children:"Monto al costo"}),o.jsx("th",{className:"border p-2",children:"Fecha venta"}),o.jsx("th",{className:"border p-2",children:"Vendedor"})]})}),o.jsx("tbody",{children:c.salesV2.map((O,I)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:O.productName??"(sin nombre)"}),o.jsx("td",{className:"border p-1",children:ju(O.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",Ni(O.amount)]}),o.jsxs("td",{className:"border p-1",children:["C$",Ni(O.cogsAmount)]}),o.jsx("td",{className:"border p-1",children:O.date??""}),o.jsx("td",{className:"border p-1",children:O.userEmail??""})]},I))})]})]}):(S=c.sales)!=null&&S.length?o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Cantidad"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Cliente"}),o.jsx("th",{className:"border p-2",children:"Paga con"}),o.jsx("th",{className:"border p-2",children:"Vuelto"})]})}),o.jsx("tbody",{children:c.sales.map((O,I)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:O.productName??"(sin nombre)"}),o.jsx("td",{className:"border p-1",children:ju(O.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",Ni(O.amount)]}),o.jsx("td",{className:"border p-1",children:O.userEmail??""}),o.jsx("td",{className:"border p-1",children:O.clientName??""}),o.jsxs("td",{className:"border p-1",children:["C$",Ni(O.amountReceived)]}),o.jsx("td",{className:"border p-1",children:typeof O.change=="number"?Ni(O.change):O.change??"0"})]},I))})]})]}):(M=c.products)!=null&&M.length?o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"font-semibold",children:"Productos en el cierre"}),o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Cantidad"}),o.jsx("th",{className:"border p-2",children:"Monto"})]})}),o.jsx("tbody",{children:c.products.map((O,I)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:O.productName}),o.jsx("td",{className:"border p-1",children:ju(O.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",Ni(O.amount)]})]},I))})]})]}):o.jsx("p",{className:"text-sm text-gray-500",children:"Sin detalle de ventas en este cierre."}),(R=c.productSummary)!=null&&R.length?o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"font-semibold",children:"Consolidado por producto"}),o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),o.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),o.jsx("tbody",{children:c.productSummary.map((O,I)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:O.productName}),o.jsx("td",{className:"border p-1",children:ju(O.totalQuantity)}),o.jsxs("td",{className:"border p-1",children:["C$",Ni(O.totalAmount)]})]},I))})]})]}):null]})]}),h&&o.jsx("p",{className:"mt-3 text-sm",children:h})]})}function f$(){const[t,e]=U.useState(""),[r,n]=U.useState(""),[s,i]=U.useState(""),[a,A]=U.useState(!1),[l,c]=U.useState("vendedor_pollo"),[u,h]=U.useState(""),[m,p]=U.useState([]),[b,B]=U.useState(!0),[E,y]=U.useState(null),[w,S]=U.useState("vendedor_pollo"),[M,R]=U.useState(!1),O=Ae=>!Ae||Ae==="vendedor"?"vendedor_pollo":Ae==="admin"||Ae==="vendedor_pollo"||Ae==="vendedor_ropa"?Ae:"vendedor_pollo",I=async()=>{B(!0);const Ae=await Pt(at(je,"users")),ue=[];Ae.forEach(he=>{const te=he.data();ue.push({id:he.id,email:te.email??"",name:te.name??"",role:O(te.role)})}),p(ue),B(!1)};U.useEffect(()=>{I()},[]);const N=()=>{e(""),n(""),i(""),c("vendedor_pollo")},j=async Ae=>{if(Ae.preventDefault(),h(""),s.length<4){h(" La contrasea debe tener al menos 4 caracteres.");return}if(!t.trim()){h(" El nombre es obligatorio.");return}try{const ue=gb(),he=mb(ue.options,"Secondary"),te=i4(he),se=await zR(te,r,s);await nU(Qt(at(je,"users"),se.user.uid),{email:r,name:t.trim(),role:O(l)}),await $F(te),await HD(he);const ne=O(l);p(ye=>[{id:se.user.uid,email:r,name:t.trim(),role:ne},...ye]),h(" Usuario creado correctamente."),N(),R(!1)}catch(ue){console.error(ue),h(" Error al crear el usuario: "+ue.message)}},D=Ae=>{y(Ae.id),S(O(Ae.role))},_=()=>{y(null),S("vendedor_pollo")},T=async()=>{if(!E)return;const Ae=Qt(je,"users",E),ue=O(w);await nn(Ae,{role:ue}),p(he=>he.map(te=>te.id===E?{...te,role:ue}:te)),_()},P=async Ae=>{confirm("Eliminar este usuario del listado?")&&(await os(Qt(je,"users",Ae)),p(he=>he.filter(te=>te.id!==Ae)))},ee=Ae=>{const ue=Ae==="admin"?"admin":Ae==="vendedor_ropa"?"vendedor_ropa":Ae==="vendedor_pollo"||Ae==="vendedor"?"vendedor_pollo":Ae,he=ue==="admin"?"bg-blue-100 text-blue-700":ue==="vendedor_ropa"?"bg-indigo-100 text-indigo-700":"bg-green-100 text-green-700";return o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${he}`,children:ue})};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Usuarios"}),o.jsx("button",{className:"px-3 py-2 rounded bg-purple-600 text-white hover:bg-purple-700",onClick:()=>R(!0),type:"button",children:"Crear usuario"})]}),o.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Email"}),o.jsx("th",{className:"p-2 border",children:"Rol"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:b?o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Cargando"})}):m.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Sin usuarios"})}):m.map(Ae=>{const ue=E===Ae.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:Ae.name||""}),o.jsx("td",{className:"p-2 border",children:Ae.email}),o.jsx("td",{className:"p-2 border",children:ue?o.jsxs("select",{className:"w-full border p-1 rounded",value:w,onChange:he=>S(he.target.value),children:[o.jsx("option",{value:"admin",children:"Admin"}),o.jsx("option",{value:"vendedor_pollo",children:"Vendedor Pollo"}),o.jsx("option",{value:"vendedor_ropa",children:"Vendedor Ropa"})]}):ee(Ae.role)}),o.jsx("td",{className:"p-2 border space-x-2",children:ue?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:T,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:_,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>D(Ae),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>P(Ae.id),children:"Eliminar"})]})})]},Ae.id)})})]})}),u&&o.jsx("p",{className:"text-sm mt-2",children:u}),M&&o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>R(!1)}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-lg max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:"Registrar nuevo usuario"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>R(!1),type:"button",children:"Cerrar"})]}),o.jsxs("form",{onSubmit:j,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre completo"}),o.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:t,onChange:Ae=>e(Ae.target.value),required:!0})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Correo electrnico"}),o.jsx("input",{type:"email",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:r,onChange:Ae=>n(Ae.target.value),required:!0})]}),o.jsxs("div",{className:"space-y-1 relative",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Contrasea (mnimo 6 caracteres)"}),o.jsx("input",{type:a?"text":"password",minLength:6,className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400 pr-10",value:s,onChange:Ae=>i(Ae.target.value),required:!0}),o.jsx("button",{type:"button",className:"absolute right-2 top-8 text-sm text-gray-600 hover:text-gray-800",onClick:()=>A(Ae=>!Ae),children:a?"":""})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Rol"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:l,onChange:Ae=>c(Ae.target.value),children:[o.jsx("option",{value:"admin",children:"Admin"}),o.jsx("option",{value:"vendedor_pollo",children:"Vendedor Pollo"}),o.jsx("option",{value:"vendedor_ropa",children:"Vendedor Ropa"})]})]}),o.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>R(!1),children:"Cancelar"}),o.jsx("button",{className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Crear usuario"})]})]}),u&&o.jsx("p",{className:"text-sm mt-2",children:u})]})]})]})}const p$=t=>`C$${(Number(t)||0).toFixed(2)}`;function m$(){const[t,e]=U.useState(""),[r,n]=U.useState(0),[s,i]=U.useState(""),[a,A]=U.useState(""),[l,c]=U.useState(""),[u,h]=U.useState([]),[m,p]=U.useState(!0),[b,B]=U.useState(!1),[E,y]=U.useState(null),[w,S]=U.useState(""),[M,R]=U.useState(""),[O,I]=U.useState(""),[N,j]=U.useState(0),[D,_]=U.useState(!1),T=async()=>{p(!0);const ne=await Pt(at(je,"products")),ye=[];ne.forEach(F=>{const L=F.data();ye.push({id:F.id,name:L.name??"",price:Number(L.price??0),category:L.category??"",measurement:L.measurement??"",active:L.active!==!1})}),h(ye),p(!1)};U.useEffect(()=>{T()},[]);const P=async ne=>{if(ne.preventDefault(),i(""),!t||r<=0||!l){i(" Completa nombre, precio vlido y unidad de medida");return}try{const ye={name:t,price:parseFloat(r.toFixed(2)),category:a,measurement:l,active:!0},F=await Bn(at(je,"products"),ye);h(L=>[{id:F.id,...ye},...L]),i(" Producto registrado con exito."),e(""),n(0),c(""),A(""),_(!1)}catch(ye){i(" Error: "+ye.message)}},ee=ne=>{y(ne.id),S(ne.name),R(ne.category),I(ne.measurement),j(ne.price)},Ae=()=>{y(null),S(""),R(""),I(""),j(0)},ue=async()=>{if(!E)return;const ne=Qt(je,"products",E);await nn(ne,{name:w,category:M,measurement:O,price:parseFloat((N||0).toFixed(2))}),h(ye=>ye.map(F=>F.id===E?{...F,name:w,category:M,measurement:O,price:parseFloat((N||0).toFixed(2))}:F)),Ae()},he=async ne=>{const ye=Qt(je,"products",ne.id),F=ne.active===!1;await nn(ye,{active:F}),h(L=>L.map(W=>W.id===ne.id?{...W,active:F}:W))},te=async ne=>{const ye=Wt(at(je,"inventory_batches"),rr("productId","==",ne),tU(1));if(!(await Pt(ye)).empty){alert(`No se puede eliminar: hay lotes asociados a este producto.
Sugerencia: desactvalo para ocultarlo.`);return}confirm("Eliminar este producto definitivamente?")&&(await os(Qt(je,"products",ne)),h(W=>W.filter(q=>q.id!==ne)))},se=b?u:u.filter(ne=>ne.active!==!1);return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Productos"}),o.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{i(""),_(!0)},children:[o.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]}),D&&o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>_(!1)}),o.jsxs("div",{className:"relative z-10 w-[95%] max-w-lg bg-white rounded-lg shadow-2xl border p-5",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("h3",{className:"text-lg font-bold text-green-700 flex items-center gap-2",children:[o.jsx("span",{className:"inline-block bg-green-100 text-green-700 rounded-full p-2",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Registrar producto"]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>_(!1),children:"Cerrar"})]}),o.jsxs("form",{onSubmit:P,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Categora"}),o.jsxs("select",{value:a,onChange:ne=>A(ne.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[o.jsx("option",{value:"",children:"Selecciona"}),o.jsx("option",{value:"pollo",children:"Pollo"}),o.jsx("option",{value:"cerdo",children:"Cerdo"}),o.jsx("option",{value:"huevo",children:"Huevos"}),o.jsx("option",{value:"ropa",children:"Ropa"}),o.jsx("option",{value:"otros",children:"Otros"})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre del producto"}),o.jsx("input",{type:"text",className:"w-full border p-2 rounded",value:t,onChange:ne=>e(ne.target.value)})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Tipo de unidad de medida"}),o.jsxs("select",{value:l,onChange:ne=>c(ne.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[o.jsx("option",{value:"",children:"Selecciona"}),o.jsx("option",{value:"lb",children:"Libra"}),o.jsx("option",{value:"kg",children:"Kilogramo"}),o.jsx("option",{value:"unidad",children:"Unidad"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Precio por unidad (ej: 55.50)"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border p-2 rounded",value:Number.isNaN(r)?"":r,onChange:ne=>n(parseFloat(ne.target.value)),onFocus:ne=>ne.target.value==="0"?n(NaN):null})]}),o.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",children:"Agregar producto"}),s&&o.jsx("p",{className:"text-sm mt-2",children:s})]})]})]}),o.jsxs("div",{className:"flex items-center justify-between mt-6 mb-2",children:[o.jsx("h3",{className:"text-lg font-semibold p-2",children:"Productos"}),o.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[o.jsx("input",{type:"checkbox",checked:b,onChange:ne=>B(ne.target.checked)}),"Mostrar inactivos"]})]}),o.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Unidad"}),o.jsx("th",{className:"p-2 border",children:"Precio"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:m?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):se.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin productos"})}):se.map(ne=>{const ye=E===ne.id,F=ne.active!==!1;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:ye?o.jsx("input",{className:"w-full border p-1 rounded",value:w,onChange:L=>S(L.target.value)}):ne.name}),o.jsx("td",{className:"p-2 border",children:ye?o.jsxs("select",{className:"w-full border p-1 rounded",value:M,onChange:L=>R(L.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),o.jsx("option",{value:"pollo",children:"Pollo"}),o.jsx("option",{value:"cerdo",children:"Cerdo"}),o.jsx("option",{value:"huevo",children:"Huevos"}),o.jsx("option",{value:"ropa",children:"Ropa"}),o.jsx("option",{value:"otros",children:"Otros"})]}):ne.category}),o.jsx("td",{className:"p-2 border",children:ye?o.jsxs("select",{className:"w-full border p-1 rounded",value:O,onChange:L=>I(L.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),o.jsx("option",{value:"lb",children:"Libra"}),o.jsx("option",{value:"kg",children:"Kilogramo"}),o.jsx("option",{value:"unidad",children:"Unidad"})]}):ne.measurement}),o.jsx("td",{className:"p-2 border",children:ye?o.jsx("input",{type:"number",step:"0.01",className:"w-full border p-1 rounded text-right",value:Number.isNaN(N)?"":N,onChange:L=>j(parseFloat(L.target.value))}):p$(ne.price)}),o.jsx("td",{className:"p-2 border",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${F?"bg-green-100 text-green-700":"bg-gray-200 text-gray-700"}`,children:F?"Activo":"Inactivo"})}),o.jsx("td",{className:"p-2 border space-x-2",children:ye?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:ue,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Ae,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>ee(ne),children:"Editar"}),o.jsx("button",{className:`px-2 py-1 rounded ${F?"bg-gray-600 hover:bg-gray-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,onClick:()=>he(ne),children:F?"Desactivar":"Activar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>te(ne.id),children:"Eliminar"})]})})]},ne.id)})})]})})]})}const es=[];for(let t=0;t<256;++t)es.push((t+256).toString(16).slice(1));function g$(t,e=0){return(es[t[e+0]]+es[t[e+1]]+es[t[e+2]]+es[t[e+3]]+"-"+es[t[e+4]]+es[t[e+5]]+"-"+es[t[e+6]]+es[t[e+7]]+"-"+es[t[e+8]]+es[t[e+9]]+"-"+es[t[e+10]]+es[t[e+11]]+es[t[e+12]]+es[t[e+13]]+es[t[e+14]]+es[t[e+15]]).toLowerCase()}let Zw;const v$=new Uint8Array(16);function y$(){if(!Zw){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Zw=crypto.getRandomValues.bind(crypto)}return Zw(v$)}const w$=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),__={randomUUID:w$};function x$(t,e,r){var s;if(__.randomUUID&&!t)return __.randomUUID();t=t||{};const n=t.random??((s=t.rng)==null?void 0:s.call(t))??y$();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,g$(n)}async function b$(t,e,r,n=!1){if(r<=0)return{allocations:[],avgUnitCost:0,cogsAmount:0};const s=at(t,"inventory_batches"),i=Wt(s,rr("productName","==",e)),l=(await Pt(i)).docs.map(c=>({id:c.id,data:c.data()})).sort((c,u)=>{var B,E;const h=c.data.date??"",m=u.data.date??"";if(h!==m)return h<m?-1:1;const p=((B=c.data.createdAt)==null?void 0:B.seconds)??0,b=((E=u.data.createdAt)==null?void 0:E.seconds)??0;return p-b}).map(c=>Qt(t,"inventory_batches",c.id));return Al(t,async c=>{let u=Number(r);const h=[],m=await Promise.all(l.map(E=>c.get(E)));for(let E=0;E<l.length&&u>0;E++){const y=l[E],w=m[E];if(!w.exists())continue;const S=w.data(),M=Number(S.quantity??0),R=Number(S.remaining??M??0),O=Number(S.purchasePrice??0);if(R<=0)continue;const I=Math.min(R,u),N=Number((R-I).toFixed(3));c.update(y,{remaining:N}),h.push({batchId:y.id,qty:I,unitCost:O,lineCost:Number((I*O).toFixed(2))}),u=Number((u-I).toFixed(3))}if(u>0&&!n)throw new Error(`Stock insuficiente para "${e}". Faltan ${u} unidades.`);const p=Number(h.reduce((E,y)=>E+y.lineCost,0).toFixed(2)),b=h.reduce((E,y)=>E+y.qty,0),B=b>0?Number((p/b).toFixed(4)):0;return{allocations:h,avgUnitCost:B,cogsAmount:p}})}const k3=3,B$=.5*10**-k3;function is(t){const e=Number(t??0);return Number(e.toFixed(k3))}function e1(t,e){return is((t??0)+(e??0))}function gg(t,e){return is(t)+B$>=is(e)}async function C$(t,e){const r=await Pt(at(je,"inventory_batches")),n=t.trim().toLowerCase();let s=0;for(const i of r.docs){const a=i.data();(a.productName||"").trim().toLowerCase()===n&&a.productId!==e&&(await nn(Qt(je,"inventory_batches",i.id),{productId:e}),s++)}return s}function I_({user:t}){const[e,r]=U.useState([]),[n,s]=U.useState([]),[i,a]=U.useState(""),[A,l]=U.useState(er(new Date,"yyyy-MM-dd")),[c,u]=U.useState(""),[h,m]=U.useState([]),[p,b]=U.useState(0),[B,E]=U.useState(0),[y,w]=U.useState("0"),[S,M]=U.useState(""),[R,O]=U.useState(!1),[I,N]=U.useState({}),j=L=>Math.round(L*100)/100,D=L=>is(L).toFixed(3),_=async L=>{if(!L)return 0;const W=Wt(at(je,"inventory_batches"),rr("productId","==",L)),q=await Pt(W);let H=0;return q.forEach(re=>{const $=re.data();H=e1(H,Number($.remaining||0))}),is(H)},T=async L=>{if(!L)return 0;const W=await Pt(at(je,"inventory_batches"));let q=0;return W.forEach(H=>{const re=H.data();(re.productName||"").trim().toLowerCase()===L.trim().toLowerCase()&&(q=e1(q,Number(re.remaining||0)))}),is(q)};U.useEffect(()=>{(async()=>{const L=await Pt(at(je,"products")),W=[];L.forEach(q=>{const H=q.data();(H==null?void 0:H.active)!==!1&&W.push({id:q.id,productName:H.name??H.productName??"(sin nombre)",price:Number(H.price??0),measurement:H.measurement??"(sin unidad)",category:H.category??"(sin categora)"})}),r(W)})()},[]),U.useEffect(()=>{(async()=>{const L=await Pt(at(je,"inventory_batches")),W={};L.forEach(q=>{const H=q.data(),re=H.productId,$=Number(H.remaining||0);re&&(W[re]=e1(W[re]||0,$))}),Object.keys(W).forEach(q=>W[q]=is(W[q])),N(W)})()},[]),U.useEffect(()=>{(async()=>{const L=await Pt(at(je,"users")),W=[];L.forEach(q=>{const H=q.data();W.push({id:q.id,email:H.email??"(sin email)",role:H.role??"USER"})}),s(W)})()},[]);const P=async()=>{if(!i)return;const L=e.find(q=>q.id===i);if(!L)return;if(h.some(q=>q.productId===L.id)){a("");return}const W=await _(L.id);m(q=>[...q,{productId:L.id,productName:L.productName,measurement:L.measurement,price:Number(L.price||0),stock:W,qty:0,discount:0}]),a("")},ee=L=>{m(W=>W.filter(q=>q.productId!==L))},Ae=async(L,W)=>{m(q=>q.map(H=>{if(H.productId!==L)return H;const re=(H.measurement||"").toLowerCase()!=="lb",$=W===""?0:Number(W),de=re?Math.max(0,Math.round($)):is($);return{...H,qty:de}}))},ue=(L,W)=>{m(q=>q.map(H=>{if(H.productId!==L)return H;const re=Math.max(0,Math.floor(Number(W||0)));return{...H,discount:re}}))},he=U.useMemo(()=>{let L=0;for(const W of h){const q=Number(W.price||0)*Number(W.qty||0),H=Math.max(0,q-Math.max(0,Number(W.discount||0)));L+=H}return j(L)},[h]);U.useEffect(()=>{b(he)},[he]),U.useEffect(()=>{const L=Number(B)||0,W=Number(p)||0;w((L-W).toFixed(2))},[B,p]);const te=L=>{L.key===","&&(L.preventDefault(),L.target.value+=".")},se=async()=>{if(h.length===0)return"Agrega al menos un producto.";for(const L of h){if(!L.qty||L.qty<=0)return`Cantidad invlida para "${L.productName}".`;const W=await _(L.productId);if(!gg(W,L.qty)){const q=await T(L.productName);if(gg(q,0)&&!gg(W,0)){const H=await C$(L.productName,L.productId),re=await _(L.productId);if(!gg(re,L.qty))return`Stock insuficiente tras corregir ${H} lote(s) para "${L.productName}".`}else return`Stock insuficiente para "${L.productName}". Disponible: ${W}`}}return null},ne=async L=>{var q,H;L.preventDefault(),M("");const W=await se();if(W){M(" "+W);return}try{O(!0);const re=[];for(const pe of h){const Ne=pe.qty,{allocations:Te,avgUnitCost:Fe,cogsAmount:oe}=await b$(je,pe.productName,Ne,!1),ce=Number(pe.price||0)*Number(Ne||0),J=Math.max(0,Number(pe.discount||0)),Re=Math.max(0,ce-J);re.push({productId:pe.productId,productName:pe.productName,measurement:pe.measurement,unitPrice:Number(pe.price||0),qty:Ne,discount:J,lineTotal:j(ce),lineFinal:j(Re),allocations:Te,avgUnitCost:Fe,cogsAmount:oe})}const $=re.reduce((pe,Ne)=>pe+Ne.lineFinal,0),de=re.reduce((pe,Ne)=>pe+Number(Ne.qty||0),0);await Bn(at(je,"salesV2"),{id:x$(),quantity:de,amount:$,amountCharged:$,amountReceived:Number(B)||0,change:y,clientName:c.trim(),timestamp:Lt.now(),date:A,userEmail:((q=n[0])==null?void 0:q.email)??"sin usuario",vendor:((H=n[0])==null?void 0:H.role)??"sin usuario",status:"FLOTANTE",items:re,itemsTotal:$}),M(" Venta registrada y asignada a inventario (FIFO)."),m([]),a(""),b(0),E(0),w("0"),u(""),l(er(new Date,"yyyy-MM-dd"))}catch(re){console.error(re),M(` ${(re==null?void 0:re.message)||"Error al registrar la venta."}`)}finally{O(!1)}},ye=U.useMemo(()=>new Set(h.map(L=>L.productId)),[h]),F=U.useMemo(()=>e.filter(L=>(I[L.id]||0)>0),[e,I]);return o.jsxs("div",{className:"relative",children:[o.jsxs("form",{onSubmit:ne,className:`w-full mx-auto bg-white rounded-2xl shadow-2xl\r
                 p-4 sm:p-6 md:p-8\r
                 max-w-5xl space-y-4`,children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-blue-700 whitespace-nowrap",children:"Registrar venta (Pollo)"})}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Producto | Precio por Libra/Unidad"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("select",{className:"flex-1 border border-gray-300 p-2 rounded-2xl shadow-2xl focus:ring-2 focus:ring-blue-400",value:i,onChange:L=>a(L.target.value),children:[o.jsx("option",{value:"",disabled:!0,children:"Selecciona un producto"}),F.map(L=>o.jsxs("option",{value:L.id,disabled:ye.has(L.id),title:ye.has(L.id)?"Ya est en la lista":`Disponible: ${D(I[L.id]||0)}`,children:[L.productName,"  ",L.measurement,"  C$ ",L.price," (disp:"," ",D(I[L.id]||0),")"]},L.id))]}),o.jsx("button",{type:"button",onClick:P,disabled:!i||ye.has(i),className:"px-3 py-2 rounded-2xl shadow-2xl bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:"Agregar"})]})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Fecha de la venta"}),o.jsx("input",{type:"date",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl focus:ring-2 focus:ring-blue-400",value:A,onChange:L=>l(L.target.value)})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cliente"}),o.jsx("input",{className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:c,onChange:L=>u(L.target.value),placeholder:"Opcional"})]})]}),o.jsx("div",{className:"rounded border overflow-x-auto shadow-2xl",children:o.jsxs("table",{className:"min-w-full text-sm r",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"text-center",children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Producto"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Existencias"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cantidad"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descuento"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:""})]})}),o.jsx("tbody",{children:h.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"p-4 text-center text-gray-500",children:"Agrega productos al carrito."})}):h.map(L=>{const W=Number(L.price||0)*Number(L.qty||0),q=Math.max(0,W-Math.max(0,Number(L.discount||0))),H=(L.measurement||"").toLowerCase()!=="lb",re=is(Number(L.stock)-Number(L.qty||0));return o.jsxs("tr",{className:"text-center",children:[o.jsxs("td",{className:"p-2 border whitespace-nowrap",children:[L.productName,"  ",L.measurement]}),o.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",j(L.price).toFixed(2)]}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:re.toFixed(3)}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",step:H?1:.01,inputMode:H?"numeric":"decimal",className:"w-28 border p-1 rounded text-right",value:L.qty===0?"":L.qty,onKeyDown:te,onChange:$=>Ae(L.productId,$.target.value),placeholder:"0",title:"Cantidad"})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",step:1,min:0,className:"w-24 border p-1 rounded text-right",value:L.discount===0?"":L.discount,onChange:$=>ue(L.productId,$.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento (entero C$)"})}),o.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",j(q).toFixed(2)]}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 text-red-600 hover:bg-red-200",onClick:()=>ee(L.productId),title:"Quitar",children:""})})]},L.productId)})})]})}),o.jsxs("div",{className:"space-y-1 ",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 ",children:" Monto total"}),o.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl bg-gray-100",value:`C$ ${p.toFixed(2)}`,readOnly:!0,title:"Suma de (precio  cantidad  descuento) de cada producto."})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-x-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Monto recibido"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:B===0?"":B,onChange:L=>E(Number(L.target.value||0))})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cambio"}),o.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl bg-gray-100",value:`C$ ${y}`,readOnly:!0})]})]}),o.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white px-4 py-3 sm:py-2 rounded-2xl shadow-2xl font-semibold shadow hover:bg-blue-700 transition disabled:opacity-50",disabled:h.length===0||R,children:R?"Guardando...":"Guardar venta"}),S&&o.jsx("p",{className:`text-sm mt-2 ${S.startsWith("")?"text-green-600":S.startsWith("")?"text-yellow-600":"text-red-600"}`,children:S})]}),R&&o.jsx("div",{className:"fixed inset-0 bg-black/40 z-[60] flex items-center justify-center",children:o.jsx("div",{className:"bg-white rounded-lg shadow-xl border px-6 py-5",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",fill:"none",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),o.jsx("span",{className:"font-semibold",children:"Guardando venta"})]})})})]})}var D3={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},S_=_o.createContext&&_o.createContext(D3),N$=["attr","size","title"];function E$(t,e){if(t==null)return{};var r=_$(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function _$(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function sv(){return sv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sv.apply(this,arguments)}function F_(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function iv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?F_(Object(r),!0).forEach(function(n){I$(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F_(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function I$(t,e,r){return e=S$(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function S$(t){var e=F$(t,"string");return typeof e=="symbol"?e:e+""}function F$(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function R3(t){return t&&t.map((e,r)=>_o.createElement(e.tag,iv({key:r},e.attr),R3(e.child)))}function T$(t){return e=>_o.createElement(U$,sv({attr:iv({},t.attr)},e),R3(t.child))}function U$(t){var e=r=>{var{attr:n,size:s,title:i}=t,a=E$(t,N$),A=s||r.size||"1em",l;return r.className&&(l=r.className),t.className&&(l=(l?l+" ":"")+t.className),_o.createElement("svg",sv({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,a,{className:l,style:iv(iv({color:t.color||r.color},r.style),t.style),height:A,width:A,xmlns:"http://www.w3.org/2000/svg"}),i&&_o.createElement("title",null,i),t.children)};return S_!==void 0?_o.createElement(S_.Consumer,null,r=>e(r)):e(D3)}function P$(t){return T$({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(t)}function nh({onClick:t,loading:e,className:r=""}){return o.jsxs("button",{onClick:t,disabled:e,className:`flex items-center gap-2 px-3 py-1.5 rounded-2xl  border 
        bg-white hover:bg-gray-100 text-sm font-medium shadow-2xl
        disabled:opacity-50 disabled:cursor-not-allowed ${r}`,title:"Refrescar datos",children:[o.jsx(P$,{className:`w-4 h-4 ${e?"animate-spin text-blue-500":""}`}),e?"Actualizando...":"Refrescar"]})}const Mn=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Q$(){const[t,e]=U.useState([]),[r,n]=U.useState([]),[s,i]=U.useState(!0),[a,A]=U.useState(""),{refreshKey:l,refresh:c}=Jc(),[u,h]=U.useState(er(th(new Date),"yyyy-MM-dd")),[m,p]=U.useState(er(eh(new Date),"yyyy-MM-dd")),[b,B]=U.useState(""),[E,y]=U.useState(!1),[w,S]=U.useState(""),[M,R]=U.useState(0),[O,I]=U.useState(0),[N,j]=U.useState(0),[D,_]=U.useState(er(new Date,"yyyy-MM-dd")),[T,P]=U.useState(0),[ee,Ae]=U.useState(0),[ue,he]=U.useState(""),[te,se]=U.useState(null),[ne,ye]=U.useState(""),[F,L]=U.useState(0),[W,q]=U.useState(0),[H,re]=U.useState(0),[$,de]=U.useState(""),[pe,Ne]=U.useState(0),[Te,Fe]=U.useState(0),[oe,ce]=U.useState(!1),[J,Re]=U.useState(null);U.useEffect(()=>{(async()=>{i(!0),console.log("Refrescando...",l);const ie=await Pt(at(je,"products")),ve=[];ie.forEach(Et=>{const rt=Et.data();ve.push({id:Et.id,name:rt.name??rt.productName??"(sin nombre)",category:rt.category??"(sin categora)",measurement:rt.measurement??"lb",price:Number(rt.price??0)})}),e(ve);const We=Wt(at(je,"inventory_batches"),Xs("date","desc")),ot=await Pt(We),yt=[];ot.forEach(Et=>{const rt=Et.data(),ur=is(Number(rt.quantity||0)),St=Number(rt.purchasePrice||0),Pr=Number(rt.salePrice||0),sr=Number((ur*St).toFixed(2)),fr=Number((ur*Pr).toFixed(2));yt.push({id:Et.id,productId:rt.productId,productName:rt.productName,category:rt.category,unit:rt.unit,quantity:ur,remaining:is(Number(rt.remaining||0)),purchasePrice:St,salePrice:Pr,invoiceTotal:rt.invoiceTotal!=null?Number(rt.invoiceTotal):sr,expectedTotal:rt.expectedTotal!=null?Number(rt.expectedTotal):fr,date:rt.date,createdAt:rt.createdAt,status:rt.status,notes:rt.notes,paidAmount:Number(rt.paidAmount||0),paidAt:rt.paidAt})}),n(yt),i(!1)})()},[l]),U.useEffect(()=>{const ie=t.find(ve=>ve.id===w);ie&&j(Number(ie.price||0))},[w,t,l]),U.useEffect(()=>{P(Math.floor(M*O*100)/100)},[M,O,l]),U.useEffect(()=>{Ae(Math.floor(M*N*100)/100)},[M,N,l]);const Le=ie=>{const ve=(ie||"").toLowerCase();return/(^|\s)(lb|lbs|libra|libras)(\s|$)/.test(ve)||ve==="lb"},Ue=U.useMemo(()=>r.filter(ie=>!(u&&ie.date<u||m&&ie.date>m||b&&ie.productId!==b)),[r,u,m,b]),Pe=U.useMemo(()=>{const ie=Ue.reduce((St,Pr)=>St+Number(Pr.invoiceTotal||0),0),ve=Ue.reduce((St,Pr)=>St+Number(Pr.expectedTotal||0),0);let We=0,ot=0,yt=0,Et=0;for(const St of Ue)Le(St.unit)?(We+=St.quantity,ot+=St.remaining):(yt+=St.quantity,Et+=St.remaining);const rt=Ue.reduce((St,Pr)=>St+Pr.quantity,0),ur=Ue.reduce((St,Pr)=>St+Pr.remaining,0);return{lbsIng:We,lbsRem:ot,udsIng:yt,udsRem:Et,qty:rt,rem:ur,totalFacturado:ie,totalEsperado:ve}},[Ue]),Ge=async ie=>{ie.preventDefault();const ve=t.find(We=>We.id===w);if(!ve||M<=0||O<=0){A("Completa producto, cantidad y costo.");return}try{const We=is(M),ot=await l$({productId:ve.id,productName:ve.name,category:ve.category,unit:ve.measurement,quantity:We,purchasePrice:O,salePrice:N,invoiceTotal:T,expectedTotal:ee,date:D,notes:ue});n(yt=>[{id:ot.id,productId:ve.id,productName:ve.name,category:ve.category,unit:ve.measurement,quantity:We,remaining:We,purchasePrice:O,salePrice:N,invoiceTotal:T,expectedTotal:ee,date:D,createdAt:Lt.now(),status:"PENDIENTE",notes:ue},...yt]),A(" Lote creado"),S(""),R(0),I(0),j(ve.price||0),P(0),Ae(0),he(""),y(!1)}catch(We){console.error(We),A(" Error al crear lote")}},qe=ie=>{se(ie.id),ye(ie.date),L(is(ie.quantity)),q(ie.purchasePrice),re(ie.salePrice),de(ie.notes||""),Ne(Number((ie.quantity*ie.purchasePrice).toFixed(2))),Fe(Number((ie.quantity*ie.salePrice).toFixed(2)))},tt=()=>{se(null),ye(""),L(0),q(0),re(0),de(""),Ne(0),Fe(0)};U.useEffect(()=>{te&&Ne(Math.floor(F*W*100)/100)},[te,F,W,l]),U.useEffect(()=>{te&&Fe(Math.floor(F*H*100)/100)},[te,F,H,l]);const Ze=async()=>{if(!te)return;const ie=r.find(yt=>yt.id===te);if(!ie)return;const ve=is(ie.quantity-ie.remaining),We=Math.max(0,is(F-ve)),ot=Qt(je,"inventory_batches",te);await nn(ot,{date:ne,quantity:is(F),purchasePrice:W,salePrice:H,invoiceTotal:pe,expectedTotal:Te,notes:$,remaining:We}),n(yt=>yt.map(Et=>Et.id===te?{...Et,date:ne,quantity:is(F),purchasePrice:W,salePrice:H,invoiceTotal:pe,expectedTotal:Te,notes:$,remaining:We}:Et)),tt(),A(" Lote actualizado")},vt=async ie=>{confirm(`Eliminar el lote del ${ie.date} (${ie.productName})?`)&&(await os(Qt(je,"inventory_batches",ie.id)),n(We=>We.filter(ot=>ot.id!==ie.id)),A(" Lote eliminado"))},ht=()=>{const ie=(u?`Desde ${u}`:"Desde inicio")+"  "+(m?`Hasta ${m}`:"Hasta hoy"),ve=Ue.map(yt=>{const Et=Number(yt.invoiceTotal||0),rt=Number(yt.expectedTotal||0);return`
      <tr>
        <td>${yt.date}</td>
        <td>${(yt.category||"").toUpperCase()}</td>
        <td>${yt.productName}</td>
        <td>${(yt.unit||"").toUpperCase()}</td>
        <td style="text-align:right">${yt.quantity.toFixed(3)}</td>
        <td style="text-align:right">${yt.remaining.toFixed(3)}</td>
        <td style="text-align:right">${Mn(yt.purchasePrice)}</td>
        <td style="text-align:right">${Mn(yt.salePrice)}</td>
        <td style="text-align:right">${Mn(Et)}</td>
        <td style="text-align:right">${Mn(rt)}</td>
        <td>${yt.status}</td>
      </tr>`}).join(""),We=`
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Inventario por Lotes</title>
 <style>
  * { font-family: Arial, sans-serif; }
  h1 { margin: 0 0 4px; }
  .muted { color: #555; font-size: 12px; margin-bottom: 12px; }

  table { width: 100%; border-collapse: collapse; font-size: 12px; }
  th, td { border: 1px solid #ddd; padding: 6px; }
  th { background: #f5f5f5; text-align: left; }

  .totals {
    margin: 10px 0 16px;
    font-size: 12px;
    display: grid;
    grid-template-columns: repeat(2, max-content);
    column-gap: 32px;
    row-gap: 6px;
    align-items: center;
  }
  .totals span {
    margin: 0;
    white-space: nowrap;
  }

  @media print {
    @page { size: A4 landscape; margin: 15mm; }
    button { display: none; }
  }
</style>

</head>

<body>
  <button onclick="window.print()">Imprimir</button>
  <h1>Inventario por Lotes</h1>
<div class="muted">${ie}</div>
<div class="totals">
  <span><strong>Libras ingresadas:</strong> ${Pe.lbsIng.toFixed(3)}</span>
  <span><strong>Libras restantes:</strong> ${Pe.lbsRem.toFixed(3)}</span>

  <span><strong>Unidades ingresadas:</strong> ${Pe.udsIng.toFixed(3)}</span>
  <span><strong>Unidades restantes:</strong> ${Pe.udsRem.toFixed(3)}</span>

  <span><strong>Total esperado a ganar:</strong> ${Mn(Pe.totalEsperado)}</span>
  <span><strong>Total facturado:</strong> ${Mn(Pe.totalFacturado)}</span>
  <span><strong>Ganancia sin gastos:</strong> ${Mn(Number((Pe.totalEsperado-Pe.totalFacturado).toFixed(2)))}</span>
</div>

  <table>
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Tipo</th>
        <th>Producto</th>
        <th>Unidad</th>
        <th>Ingresado</th>
        <th>Restantes</th>
        <th>Precio Compra</th>
        <th>Precio Venta</th>
        <th>Total factura</th>
        <th>Total esperado</th>
        <th>Estado</th>
      </tr>
    </thead>
    <tbody>
      ${ve||'<tr><td colspan="11" style="text-align:center">Sin lotes</td></tr>'}
    </tbody>
  </table>
</body>
</html>`,ot=window.open("","_blank");ot&&(ot.document.open(),ot.document.write(We),ot.document.close())},Ct=async ie=>{Re(ie),ce(!0)},Ht=async()=>{if(!J)return;const ie=J;try{await L3(ie.id);const ve=Qt(je,"inventory_batches",ie.id);await nn(ve,{remaining:0});const We={date:ie.date,productName:ie.productName,quantity:ie.quantity,amount:Number((ie.expectedTotal??ie.salePrice*ie.quantity).toFixed(2)),allocations:[{batchId:ie.id,qty:ie.quantity,unitCost:ie.purchasePrice,lineCost:Number((ie.purchasePrice*ie.quantity).toFixed(2))}],avgUnitCost:ie.purchasePrice,measurement:ie.unit,createdAt:Lt.now(),autoGeneratedFromInventory:!0};await Bn(at(je,"salesV2"),We),n(ot=>ot.map(yt=>yt.id===ie.id?{...yt,status:"PAGADO",remaining:0}:yt)),A(" Inventario pagado y reflejado como venta")}catch(ve){console.error(ve),A(" Error al pagar inventario")}finally{ce(!1),Re(null)}},Nt=()=>{ce(!1),Re(null)};return o.jsxs("div",{className:"max-w-6xl mx-auto shadows-2xl",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Inventario (Pollo)"}),o.jsx("button",{className:"px-3 py-2 rounded-2xl bg-blue-600 text-white hover:bg-blue-700",type:"button",onClick:()=>y(!0),children:"Crear Lote"})]}),o.jsxs("div",{className:"bg-white p-3 rounded shadow-2xl border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:ie=>h(ie.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:m,onChange:ie=>p(ie.target.value)})]}),o.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[o.jsx("label",{className:"font-semibold",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:b,onChange:ie=>B(ie.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),t.map(ie=>o.jsxs("option",{value:ie.id,children:[ie.name,"  ",ie.category]},ie.id))]})]}),o.jsx("button",{className:"px-3 rounded-2xl shadow-2xl py-1 bg-gray-200 hover:bg-gray-300",onClick:()=>{h(""),p(""),B("")},children:"Quitar filtro"}),o.jsx("button",{className:"px-3 py-1 rounded-2xl shadow-2xl bg-blue-600 text-white hover:bg-blue-700",onClick:ht,children:"Imprimir PDF"}),o.jsx("div",{className:"ml-auto",children:o.jsx(nh,{onClick:()=>c(),loading:s})})]}),o.jsx("div",{className:"bg-gray-50 p-3 rounded-2xl shadow-2xl border mb-3 text-base",children:o.jsxs("div",{className:"grid grid-cols-3 gap-y-2 gap-x-8",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",Pe.lbsIng.toFixed(3)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",Pe.udsIng.toFixed(3)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," C$"," ",Pe.totalEsperado.toFixed(2)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",Pe.lbsRem.toFixed(3)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",Pe.udsRem.toFixed(3)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total facturado:"})," C$"," ",Pe.totalFacturado.toFixed(2)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," C$"," ",(Pe.totalEsperado-Pe.totalFacturado).toFixed(2)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes (por filtro):"})," ",Ue.length.toLocaleString()]})]})}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Unidad"}),o.jsx("th",{className:"p-2 border",children:"Ingresado"}),o.jsx("th",{className:"p-2 border",children:"Restantes"}),o.jsx("th",{className:"p-2 border",children:"Precio Compra"}),o.jsx("th",{className:"p-2 border",children:"Precio Venta"}),o.jsx("th",{className:"p-2 border",children:"Total factura"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"Total ganancia"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:s?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):Ue.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin lotes"})}):Ue.map(ie=>{const ve=te===ie.id,We=Number(ie.invoiceTotal||0),ot=Number(ie.expectedTotal||0);return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:ve?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:ne,onChange:yt=>ye(yt.target.value)}):ie.date}),o.jsx("td",{className:"p-2 border",children:ie.category.toUpperCase()}),o.jsx("td",{className:"p-2 border",children:ie.productName}),o.jsx("td",{className:"p-2 border",children:ie.unit.toUpperCase()}),o.jsx("td",{className:"p-2 border",children:ve?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(F)?"":F,onChange:yt=>{const Et=yt.target.value.replace(",","."),rt=parseFloat(Et),ur=Number.isFinite(rt)?parseFloat(rt.toFixed(3)):0;L(Math.max(0,ur))}}):ie.quantity.toFixed(3)}),o.jsx("td",{className:"p-2 border",children:ve?ie.remaining:ie.remaining.toFixed(3)}),o.jsx("td",{className:"p-2 border",children:ve?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(W)?"":W,onChange:yt=>{const Et=yt.target.value.replace(",","."),rt=parseFloat(Et),ur=Number.isFinite(rt)?parseFloat(rt.toFixed(2)):0;q(Math.max(0,ur))}}):Mn(ie.purchasePrice)}),o.jsx("td",{className:"p-2 border",children:ve?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(H)?"":H,onChange:yt=>{const Et=yt.target.value.replace(",","."),rt=parseFloat(Et),ur=Number.isFinite(rt)?parseFloat(rt.toFixed(2)):0;re(Math.max(0,ur))}}):Mn(ie.salePrice)}),o.jsx("td",{className:"p-2 border",children:Mn(ve?pe:We)}),o.jsx("td",{className:"p-2 border",children:Mn(ve?Te:ot)}),o.jsx("td",{className:"p-2 border",children:Mn(ve?Te-pe:ot-We)}),o.jsx("td",{className:"p-2 border",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ie.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:ie.status})}),o.jsx("td",{className:"flex space-x-2 justify-center",children:ve?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Ze,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:tt,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[ie.status==="PENDIENTE"&&o.jsx("button",{onClick:()=>Ct(ie),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Pagar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>qe(ie),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>vt(ie),children:"Borrar"})]})})]},ie.id)})})]})}),a&&o.jsx("p",{className:"mt-2 text-sm",children:a}),E&&_d.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>y(!1)}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-4xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:"Crear Lote"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>y(!1),type:"button",children:"Cerrar"})]}),o.jsxs("form",{onSubmit:Ge,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:w,onChange:ie=>S(ie.target.value),children:[o.jsx("option",{value:"",children:"Selecciona un producto"}),t.map(ie=>o.jsxs("option",{value:ie.id,children:[ie.name,"  ",ie.category,"  ",ie.measurement,"  Precio:"," ",Mn(ie.price)]},ie.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del lote"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:D,onChange:ie=>_(ie.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (Lo que esta ingresando)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:M===0?"":M,onChange:ie=>{const ve=ie.target.value.replace(",","."),We=parseFloat(ve),ot=Number.isFinite(We)?parseFloat(We.toFixed(3)):0;R(ot)},disabled:!w,placeholder:w?"":"Selecciona un producto primero",title:w?"":"Selecciona un producto para habilitar"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio de compra (compra)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:O===0?"":O,onChange:ie=>{const ve=ie.target.value.replace(",","."),We=parseFloat(ve),ot=Number.isFinite(We)?parseFloat(We.toFixed(2)):0;I(ot)},disabled:!w,placeholder:w?"":"Selecciona un producto primero",title:w?"":"Selecciona un producto para habilitar"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (venta)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:N===0?"":N,onChange:ie=>{const ve=ie.target.value.replace(",","."),We=parseFloat(ve),ot=Number.isFinite(We)?parseFloat(We.toFixed(2)):0;j(ot)},disabled:!w,placeholder:w?"":"Selecciona un producto primero",title:w?"":"Selecciona un producto para habilitar"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Total factura (auto)"}),o.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:Mn(T),readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Total esperado (auto)"}),o.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:Mn(ee),readOnly:!0})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Notas"}),o.jsx("input",{className:"w-full border p-2 rounded",value:ue,onChange:ie=>he(ie.target.value)})]}),o.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>y(!1),children:"Cancelar"}),o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar lote"})]})]})]})]}),document.body),oe&&J&&_d.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[80] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:Nt}),o.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl border w-[90%] max-w-md p-6",children:[o.jsx("h3",{className:"text-lg font-bold mb-3 text-center",children:"Confirmar pago de inventario"}),o.jsxs("p",{className:"text-sm text-gray-700 mb-5 text-center",children:["Seguro que quieres pagar este inventario?",o.jsx("br",{}),o.jsx("strong",{children:J.productName})," "," ",J.quantity," ",J.unit,o.jsx("br",{}),"Ya no habrn libras disponibles al pagar este inventario."]}),o.jsxs("div",{className:"flex justify-center gap-4",children:[o.jsx("button",{onClick:Ht,className:"px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700",children:"Confirmar"}),o.jsx("button",{onClick:Nt,className:"px-4 py-2 rounded-lg bg-gray-300 hover:bg-gray-400",children:"Cancelar"})]})]})]}),document.body)]})}const mo=t=>`C$${(Number(t)||0).toFixed(2)}`;function j$(){const t=DV(new Date),[e,r]=U.useState(er(t,"yyyy-MM")),[n,s]=U.useState([]),[i,a]=U.useState(!1),[A,l]=U.useState(""),c=U.useRef(null),u=U.useMemo(()=>{const[E,y]=e.split("-").map(M=>parseInt(M,10)),w=er(th(new Date(E,y-1,1)),"yyyy-MM-dd"),S=er(eh(new Date(E,y-1,1)),"yyyy-MM-dd");return{from:w,to:S}},[e]),h=async()=>{a(!0);try{const E=await c$(u.from,u.to),y=[];for(const w of E){const S=Qt(je,"inventory_batches",w.batchId),M=await zo(S);if(!M.exists())continue;const R=M.data();y.push({batchId:w.batchId,batchDate:w.batchDate,productName:w.productName,soldQty:Number(w.quantity||0),soldAmount:Number(w.amountCharged||0),status:R.status??"PENDIENTE",purchasePrice:Number(R.purchasePrice||0),salePrice:Number(R.salePrice||0),supplier:R.supplier})}s(y)}catch(E){console.error(E),l(" Error al cargar liquidaciones")}finally{a(!1)}};U.useEffect(()=>{h()},[e]);const m=async E=>{confirm("Marcar este lote como PAGADO?")&&(await L3(E),s(w=>w.map(S=>S.batchId===E?{...S,status:"PAGADO"}:S)))},p=U.useMemo(()=>{const E=n.reduce((M,R)=>M+R.soldQty,0),y=n.reduce((M,R)=>M+R.soldAmount,0),w=n.reduce((M,R)=>M+R.soldQty*R.purchasePrice,0),S=y-w;return{q:E,amt:y,cogs:w,profit:S}},[n]),b=U.useMemo(()=>{const E=new Map;for(const y of n){const w=y.productName||"(sin nombre)";E.has(w)||E.set(w,{productName:w,qty:0,revenue:0,cogs:0,profit:0});const S=E.get(w);S.qty+=y.soldQty,S.revenue+=y.soldAmount;const M=y.soldQty*y.purchasePrice;S.cogs+=M,S.profit=S.revenue-S.cogs}return Array.from(E.values()).sort((y,w)=>y.productName.localeCompare(w.productName))},[n]),B=async()=>{if(!c.current)return;const E=c.current;E.classList.add("force-pdf-colors");try{const[{default:y},{jsPDF:w}]=await Promise.all([Qo(()=>Promise.resolve().then(()=>BB),void 0),Qo(()=>Promise.resolve().then(()=>cx),void 0)]),M=(await y(E,{backgroundColor:"#ffffff",scale:2})).toDataURL("image/png"),R=new w("p","mm","a4"),O=190,I=R.getImageProperties(M),N=O,j=I.height*N/I.width;R.addImage(M,"PNG",10,10,N,j),R.save(`liquidaciones_${e}.pdf`)}catch(y){console.error(y),alert("No se pudo generar el PDF")}finally{E.classList.remove("force-pdf-colors")}};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Liquidaciones por lote"}),o.jsx("button",{onClick:B,className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:"Descargar PDF"})]}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-center gap-3",children:[o.jsx("label",{className:"text-sm font-semibold",children:"Mes:"}),o.jsx("input",{type:"month",className:"border rounded px-2 py-1",value:e,onChange:E=>r(E.target.value)}),o.jsx("button",{onClick:h,className:"bg-gray-800 text-white px-3 py-1 rounded",children:"Aplicar"})]}),o.jsxs("div",{ref:c,children:[o.jsx("div",{className:"bg-white p-3 rounded shadow border mb-3 text-sm",children:o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total vendido (cantidad):"})," ",p.q]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Monto vendido:"})," ",mo(p.amt)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Costo (COGS):"})," ",mo(p.cogs)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Utilidad:"})," ",mo(p.profit)]})]})}),o.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto mb-6",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Lote (fecha)"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Proveedor"}),o.jsx("th",{className:"p-2 border",children:"Vendido"}),o.jsx("th",{className:"p-2 border",children:"Monto vendido"}),o.jsx("th",{className:"p-2 border",children:"COGS"}),o.jsx("th",{className:"p-2 border",children:"Utilidad"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:i?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando"})}):n.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin datos"})}):n.map(E=>{const y=E.soldQty*E.purchasePrice,w=E.soldAmount-y;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:E.batchDate}),o.jsx("td",{className:"p-2 border",children:E.productName}),o.jsx("td",{className:"p-2 border",children:E.supplier||"-"}),o.jsx("td",{className:"p-2 border",children:E.soldQty}),o.jsx("td",{className:"p-2 border",children:mo(E.soldAmount)}),o.jsx("td",{className:"p-2 border",children:mo(y)}),o.jsx("td",{className:`p-2 border ${w>=0?"text-green-700":"text-red-700"}`,children:mo(w)}),o.jsx("td",{className:"p-2 border",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${E.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:E.status})}),o.jsx("td",{className:"p-2 border",children:E.status==="PENDIENTE"&&o.jsx("button",{onClick:()=>m(E.batchId),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Marcar pagado"})})]},E.batchId)})})]})}),o.jsx("h3",{className:"font-semibold mb-2",children:"Utilidad por producto"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Cantidad vendida"}),o.jsx("th",{className:"p-2 border",children:"Ingreso"}),o.jsx("th",{className:"p-2 border",children:"COGS"}),o.jsx("th",{className:"p-2 border",children:"Utilidad"})]})}),o.jsx("tbody",{children:b.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin datos"})}):b.map(E=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:E.productName}),o.jsx("td",{className:"p-2 border",children:E.qty}),o.jsx("td",{className:"p-2 border",children:mo(E.revenue)}),o.jsx("td",{className:"p-2 border",children:mo(E.cogs)}),o.jsx("td",{className:`p-2 border ${E.profit>=0?"text-green-700":"text-red-700"}`,children:mo(E.profit)})]},E.productName))})]})})]}),A&&o.jsx("p",{className:"mt-2 text-sm",children:A})]})}const go=t=>`C$${Number(t??0).toFixed(2)}`,L$=()=>er(new Date,"yyyy-MM-dd"),vg=t=>Number(t||0).toFixed(3);function k$(){const[t,e]=U.useState(()=>{const R=new Date,O=new Date(R.getFullYear(),R.getMonth(),1);return er(O,"yyyy-MM-dd")}),[r,n]=U.useState(L$()),[s,i]=U.useState(!0),[a,A]=U.useState([]),[l,c]=U.useState([]),{refreshKey:u,refresh:h}=Jc();U.useEffect(()=>{(async()=>{i(!0);const O=Wt(at(je,"salesV2"),rr("date",">=",t),rr("date","<=",r)),I=await Pt(O),N=[];I.forEach(T=>{const P=T.data(),ee=P.date??"";if(Array.isArray(P.items)&&P.items.length>0){P.items.forEach((Ae,ue)=>{const he=String(Ae.productName??"(sin nombre)"),te=Number(Ae.qty??0),se=Number(Ae.lineFinal??0)||Math.max(0,Number(Ae.unitPrice||0)*te-Number(Ae.discount||0));N.push({id:`${T.id}#${ue}`,date:ee,productName:he,quantity:te,amount:se,allocations:Array.isArray(Ae.allocations)?Ae.allocations:P.allocations,avgUnitCost:Number(Ae.avgUnitCost??P.avgUnitCost??0),measurement:Ae.measurement??P.measurement??""})});return}N.push({id:T.id,date:ee,productName:P.productName??"(sin nombre)",quantity:Number(P.quantity??0),amount:Number(P.amount??P.amountCharged??0),allocations:Array.isArray(P.allocations)?P.allocations:[],avgUnitCost:Number(P.avgUnitCost??0),measurement:P.measurement??""})}),A(N);const j=Wt(at(je,"expenses"),rr("date",">=",t),rr("date","<=",r)),D=await Pt(j),_=[];D.forEach(T=>{const P=T.data();_.push({id:T.id,date:P.date??"",category:P.category??"(sin categora)",description:P.description??"",amount:Number(P.amount??0),status:P.status??"PAGADO",createdAt:P.createdAt})}),c(_),i(!1)})()},[t,r,u]);const m=U.useMemo(()=>{const R=a.reduce((D,_)=>D+(_.amount||0),0);let O=0;a.forEach(D=>{var _;(_=D.allocations)!=null&&_.length?O+=D.allocations.reduce((T,P)=>T+Number(P.lineCost||0),0):D.avgUnitCost&&D.quantity&&(O+=Number(D.avgUnitCost)*Number(D.quantity))});const I=R-O,N=l.reduce((D,_)=>D+(_.amount||0),0),j=I-N;return{revenue:R,cogsReal:O,grossProfit:I,expensesSum:N,netProfit:j}},[a,l]),p=R=>String(R??"").toLowerCase().trim(),b=R=>Number(R.qty??R.quantity??0),B=R=>["lb","lbs","libra","libras"].includes(p(R)),E=R=>["unidad","unidades","ud","uds","pieza","piezas"].includes(p(R)),y=U.useMemo(()=>a.reduce((R,O)=>B(O.measurement)?R+b(O):R,0),[a]),w=U.useMemo(()=>a.reduce((R,O)=>E(O.measurement)?R+b(O):R,0),[a]),S=U.useMemo(()=>{var O;const R=new Map;for(const I of a){const N=I.productName||"(sin nombre)";R.has(N)||R.set(N,{productName:N,units:0,revenue:0,cogs:0,profit:0,firstDate:I.date||"",lastDate:I.date||""});const j=R.get(N);j.units+=Number(I.quantity||0),j.revenue+=Number(I.amount||0),(!j.firstDate||I.date<(j.firstDate||I.date))&&(j.firstDate=I.date),(!j.lastDate||I.date>(j.lastDate||I.date))&&(j.lastDate=I.date);let D=0;(O=I.allocations)!=null&&O.length?D=I.allocations.reduce((_,T)=>_+Number(T.lineCost||0),0):I.avgUnitCost&&(D=Number(I.avgUnitCost)*Number(I.quantity||0)),j.cogs+=D,j.profit=j.revenue-j.cogs}return Array.from(R.values()).sort((I,N)=>I.productName.localeCompare(N.productName))},[a]),M=U.useMemo(()=>[...S].sort((R,O)=>O.units-R.units).slice(0,3).map((R,O)=>({idx:O+1,name:R.productName,units:R.units})),[S]);return o.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl ",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas: Ingresos y Egresos"}),o.jsx(nh,{onClick:h,loading:s})]}),o.jsxs("div",{className:"flex flex-wrap items-end gap-2 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-3 py-2",value:t,onChange:R=>e(R.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-3 py-2",value:r,onChange:R=>n(R.target.value)})]})]}),s?o.jsx("p",{children:"Cargando"}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 mb-3 rounded-2xl shadow-lg p-4 bg-gray-50",children:[o.jsx(qh,{title:"Ventas",value:go(m.revenue)}),o.jsx(qh,{title:"Costo",value:go(m.cogsReal)}),o.jsx(qh,{title:"Ganancia Bruta",value:go(m.grossProfit),positive:!0}),o.jsx(qh,{title:"Gastos",value:go(m.expensesSum)}),o.jsx(qh,{title:"Ganancia Neta",value:go(m.netProfit),positive:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mb-6 rounded-lg shadow-2xl p-4 bg-gray-50",children:[o.jsx(T_,{title:"Libras Vendidas",value:vg(y)}),o.jsx(T_,{title:"Unidades Vendidas",value:vg(w)}),o.jsx(D$,{title:"Productos ms vendidos",items:M.map(R=>({key:`${R.idx}`,label:`${R.idx}. ${R.name}`,value:`(${vg(R.units)})`}))})]}),o.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),o.jsxs("table",{className:"min-w-full border text-sm mb-6",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Fechas"}),o.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),o.jsx("th",{className:"border p-2",children:"Ingreso"}),o.jsx("th",{className:"border p-2",children:"Costo"}),o.jsx("th",{className:"border p-2",children:"Utilidad"})]})}),o.jsxs("tbody",{children:[S.map(R=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:R.productName}),o.jsx("td",{className:"border p-1",children:R.firstDate&&R.lastDate?R.firstDate===R.lastDate?R.firstDate:`${R.firstDate}  ${R.lastDate}`:""}),o.jsx("td",{className:"border p-1",children:vg(R.units)}),o.jsx("td",{className:"border p-1",children:go(R.revenue)}),o.jsx("td",{className:"border p-1",children:go(R.cogs)}),o.jsx("td",{className:`border p-1 ${R.profit>=0?"text-green-700":"text-red-700"}`,children:go(R.profit)})]},R.productName)),S.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Sin datos en el rango seleccionado."})})]})]}),o.jsx("h3",{className:"font-semibold mb-2",children:"Gastos del periodo"}),o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Fecha"}),o.jsx("th",{className:"border p-2",children:"Categora"}),o.jsx("th",{className:"border p-2",children:"Descripcin"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Estado"})]})}),o.jsxs("tbody",{children:[l.map(R=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:R.date}),o.jsx("td",{className:"border p-1",children:R.category}),o.jsx("td",{className:"border p-1",children:R.description}),o.jsx("td",{className:"border p-1",children:go(R.amount)}),o.jsx("td",{className:"border p-1",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${R.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:R.status})})]},R.id)),l.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-3 text-center text-gray-500",children:"Sin gastos en el rango seleccionado."})})]})]})]})]})}function qh({title:t,value:e,positive:r}){return o.jsxs("div",{className:"border rounded-2xl p-3",children:[o.jsx("div",{className:"text-[17px] text-gray-500",children:t}),o.jsx("div",{className:`text-[30px] font-bold ${r?"text-green-700":""}`,children:e})]})}function T_({title:t,value:e}){return o.jsxs("div",{className:"border rounded-lg p-3",children:[o.jsx("div",{className:"text-[17px] text-gray-500",children:t}),o.jsx("div",{className:"text-[20px] font-semibold",children:e})]})}function D$({title:t,items:e}){return o.jsxs("div",{className:"border rounded-lg p-3",children:[o.jsx("div",{className:"text-[11px] text-gray-500 mb-1",children:t}),o.jsx("ul",{className:"text-sm leading-snug list-none pl-0 m-0 space-y-0.5",children:e.length===0?o.jsx("li",{className:"text-gray-500",children:""}):e.map(r=>o.jsxs("li",{children:[r.label," ",r.value??""]},r.key))})]})}const U_=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal","Varios"],yg=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function R$(){const[t,e]=U.useState(er(th(new Date),"yyyy-MM-dd")),[r,n]=U.useState(er(eh(new Date),"yyyy-MM-dd")),[s,i]=U.useState(er(new Date,"yyyy-MM-dd")),[a,A]=U.useState(""),[l,c]=U.useState(""),[u,h]=U.useState(0),[m,p]=U.useState("PENDIENTE"),[b,B]=U.useState(""),[E,y]=U.useState([]),[w,S]=U.useState(!0),[M,R]=U.useState(""),[O,I]=U.useState(null),[N,j]=U.useState(""),[D,_]=U.useState(""),[T,P]=U.useState(""),[ee,Ae]=U.useState(0),[ue,he]=U.useState("PENDIENTE"),[te,se]=U.useState("");U.useEffect(()=>{(async()=>{S(!0);try{const $=Wt(at(je,"expenses"),Xs("date","desc")),de=await Pt($),pe=[];de.forEach(Ne=>{const Te=Ne.data();pe.push({id:Ne.id,date:Te.date||er(new Date,"yyyy-MM-dd"),category:Te.category||"",description:Te.description||"",amount:Number(Te.amount||0),status:Te.status||"PENDIENTE",notes:Te.notes||"",createdAt:Te.createdAt??Lt.now()})}),y(pe)}catch($){console.error($),R(" Error al cargar gastos")}finally{S(!1)}})()},[]);const ne=U.useMemo(()=>E.filter($=>!(t&&$.date<t||r&&$.date>r)),[E,t,r]),ye=U.useMemo(()=>{const $=ne.reduce((Ne,Te)=>Ne+(Te.amount||0),0),de=ne.filter(Ne=>Ne.status==="PAGADO").reduce((Ne,Te)=>Ne+(Te.amount||0),0),pe=$-de;return{total:$,pagado:de,pendiente:pe}},[ne]),F=()=>{i(er(new Date,"yyyy-MM-dd")),A(""),c(""),h(0),p("PENDIENTE"),B("")},L=async $=>{if($.preventDefault(),R(""),!a){R("Selecciona una categora.");return}if(!l.trim()){R("Ingresa una descripcin.");return}if(!u||u<=0){R("Ingresa un monto vlido.");return}try{const de=await Bn(at(je,"expenses"),{date:s,category:a,description:l.trim(),amount:Number(u.toFixed(2)),status:m,notes:b||"",createdAt:Lt.now()});y(pe=>[{id:de.id,date:s,category:a,description:l.trim(),amount:Number(u.toFixed(2)),status:m,notes:b||"",createdAt:Lt.now()},...pe]),F(),R(" Gasto registrado")}catch(de){console.error(de),R(" Error al guardar gasto")}},W=$=>{I($.id),j($.date),_($.category||""),P($.description||""),Ae(Number($.amount||0)),he($.status||"PENDIENTE"),se($.notes||"")},q=()=>{I(null),j(""),_(""),P(""),Ae(0),he("PENDIENTE"),se("")},H=async()=>{if(O){if(!D){R("Selecciona una categora.");return}if(!T.trim()){R("Ingresa una descripcin.");return}if(!ee||ee<=0){R("Ingresa un monto vlido.");return}try{await nn(Qt(je,"expenses",O),{date:N,category:D,description:T.trim(),amount:Number(ee.toFixed(2)),status:ue,notes:te||""}),y($=>$.map(de=>de.id===O?{...de,date:N,category:D,description:T.trim(),amount:Number(ee.toFixed(2)),status:ue,notes:te||""}:de)),q(),R(" Gasto actualizado")}catch($){console.error($),R(" Error al actualizar gasto")}}},re=async $=>{confirm(`Eliminar el gasto "${$.description}"?`)&&(await os(Qt(je,"expenses",$.id)),y(pe=>pe.filter(Ne=>Ne.id!==$.id)),R(" Gasto borrado"))};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Pollo)"}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:$=>e($.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:$=>n($.target.value)})]}),o.jsxs("div",{className:"ml-auto text-sm",children:[o.jsx("div",{className:"font-semibold",children:"Totales del rango"}),o.jsxs("div",{children:["Total: ",yg(ye.total)]}),o.jsxs("div",{children:["Pagado: ",yg(ye.pagado)]}),o.jsxs("div",{children:["Pendiente: ",yg(ye.pendiente)]})]})]}),o.jsxs("form",{onSubmit:L,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:s,onChange:$=>i($.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:$=>A($.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),U_.map($=>o.jsx("option",{value:$,children:$},$))]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:l,onChange:$=>c($.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:u===0?"":u,onChange:$=>h(Math.max(0,Number($.target.value||0))),placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:$=>p($.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:b,onChange:$=>B($.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[b.length,"/500"]})]}),o.jsx("div",{className:"md:col-span-2",children:o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:w?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):ne.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):ne.slice().sort(($,de)=>$.date.localeCompare(de.date)).map($=>{const de=O===$.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:de?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:N,onChange:pe=>j(pe.target.value)}):$.date}),o.jsx("td",{className:"p-2 border",children:de?o.jsxs("select",{className:"w-full border p-1 rounded",value:D,onChange:pe=>_(pe.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),U_.map(pe=>o.jsx("option",{value:pe,children:pe},pe))]}):$.category||""}),o.jsx("td",{className:"p-2 border",children:de?o.jsx("input",{className:"w-full border p-1 rounded",value:T,onChange:pe=>P(pe.target.value)}):o.jsx("span",{title:$.description,children:$.description.length>40?$.description.slice(0,40)+"":$.description})}),o.jsx("td",{className:"p-2 border",children:de?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(ee)?"":ee,onChange:pe=>Ae(Math.max(0,Number(pe.target.value||0)))}):yg($.amount)}),o.jsx("td",{className:"p-2 border",children:de?o.jsxs("select",{className:"w-full border p-1 rounded",value:ue,onChange:pe=>he(pe.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${$.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:$.status})}),o.jsx("td",{className:"p-2 border",children:de?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:te,onChange:pe=>se(pe.target.value),maxLength:500}):o.jsx("span",{title:$.notes||"",children:($.notes||"").length>40?($.notes||"").slice(0,40)+"":$.notes||""})}),o.jsx("td",{className:"p-2 border",children:o.jsx("div",{className:"flex gap-2 justify-center",children:de?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:H,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:q,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>W($),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>re($),children:"Borrar"})]})})})]},$.id)})})]})}),M&&o.jsx("p",{className:"mt-2 text-sm",children:M})]})}function av(t){return(t||"").trim().toLowerCase()}async function O3(){const t=await Pt(at(je,"products")),e=new Map;return t.forEach(r=>{const n=r.data(),s=av(n.name??n.productName);s&&e.set(s,r.id)}),e}async function O$(t=!1){const e=await O3(),r=await Pt(at(je,"inventory_batches")),n={checked:0,fixed:0,alreadyOk:0,missingName:0,withoutMatch:0,details:[]};for(const s of r.docs){n.checked++;const i=s.data(),a=av(i.productName);if(!a){n.missingName++,n.details.push({batchId:s.id,productName:i.productName??"",oldProductId:i.productId,status:"missingName"});continue}const A=e.get(a);if(!A){n.withoutMatch++,n.details.push({batchId:s.id,productName:i.productName??"",oldProductId:i.productId,status:"withoutMatch"});continue}if(i.productId===A){n.alreadyOk++,n.details.push({batchId:s.id,productName:i.productName??"",oldProductId:i.productId,newProductId:A,status:"alreadyOk"});continue}t||await nn(Qt(je,"inventory_batches",s.id),{productId:A}),n.fixed++,n.details.push({batchId:s.id,productName:i.productName??"",oldProductId:i.productId,newProductId:A,status:"fixed"})}return console.group("[fixAllBatchProductIds] Resultado"),console.log("checked:",n.checked),console.log("fixed:",n.fixed),console.log("alreadyOk:",n.alreadyOk),console.log("missingName:",n.missingName),console.log("withoutMatch:",n.withoutMatch),console.groupEnd(),n}async function M$(t,e=!1){const r=av(t),s=(await O3()).get(r);if(!s)throw new Error(`No existe un producto activo con nombre "${t}".`);const i=await Pt(at(je,"inventory_batches"));let a=0;for(const A of i.docs){const l=A.data();av(l.productName)===r&&l.productId!==s&&(e||await nn(Qt(je,"inventory_batches",A.id),{productId:s}),a++)}return console.log(`[fixBatchesByProductName] "${t}" fixed: ${a} lote(s)`),a}function H$(){const[t,e]=U.useState(!1),[r,n]=U.useState(""),s=async()=>{try{e(!0),n("");const l=await O$(!1);n(` Hecho. Revisados: ${l.checked}, Corregidos: ${l.fixed}, Ok: ${l.alreadyOk}, Sin nombre: ${l.missingName}, Sin match: ${l.withoutMatch}. (Mira consola para detalles)`)}catch(l){n(" Error: "+((l==null?void 0:l.message)||l))}finally{e(!1)}},[i,a]=U.useState(""),A=async()=>{if(!i.trim()){n(" Escribe el nombre del producto.");return}try{e(!0),n("");const l=await M$(i.trim(),!1);n(` Hecho. Corregidos ${l} lote(s) para "${i}".`)}catch(l){n(" Error: "+((l==null?void 0:l.message)||l))}finally{e(!1)}};return o.jsxs("div",{className:"max-w-xl mx-auto bg-white p-6 rounded shadow border space-y-4",children:[o.jsx("h1",{className:"text-xl font-bold",children:"Herramienta de Migracin de Lotes"}),o.jsxs("p",{className:"text-sm text-gray-600",children:["Corrige los ",o.jsx("code",{children:"inventory_batches.productId"})," basndose en el nombre del producto. salo una sola vez para limpiar datos viejos. Revisa la consola para un log detallado."]}),o.jsx("div",{className:"space-y-2",children:o.jsx("button",{onClick:s,disabled:t,className:"bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo":"Corregir TODOS los lotes"})}),o.jsx("hr",{}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Corregir por nombre:"}),o.jsx("input",{className:"border p-2 rounded w-full",placeholder:'Ej: "Pierna Entera"',value:i,onChange:l=>a(l.target.value)}),o.jsx("button",{onClick:A,disabled:t,className:"bg-indigo-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo":"Corregir lotes de ese producto"})]}),r&&o.jsx("p",{className:"text-sm",children:r})]})}const Kr=t=>`C$ ${Number(t??0).toFixed(2)}`,Zl=t=>Number(t??0).toFixed(3);async function V$(t){const e=new Set;for(const n of t)for(const s of n.batches||[]){const i=(s.batchId||s.id||"").trim();if(!i)continue;(s.purchasePrice===void 0||s.purchasePrice===null)&&(s.invoiceTotal===void 0||s.invoiceTotal===null)&&e.add(i)}if(e.size===0)return t;const r=new Map;return await Promise.all(Array.from(e).map(async n=>{try{const s=await zo(Qt(je,"inventory_batches",n));if(s.exists()){const i=s.data();r.set(n,Number(i.purchasePrice||0))}}catch{}})),t.map(n=>({...n,batches:(n.batches||[]).map(s=>{if((s.purchasePrice===void 0||s.purchasePrice===null)&&(s.invoiceTotal===void 0||s.invoiceTotal===null)){const i=(s.batchId||s.id||"").trim(),a=i?r.get(i):void 0;if(a!==void 0)return{...s,purchasePrice:a}}return s})}))}function t1(t){var B,E;const e=t.batches||[],r=t.expenses||[],n=t.adjustments||[],s=Number(((B=t.totals)==null?void 0:B.lbs)??t.totalLbs??0),i=Number(((E=t.totals)==null?void 0:E.units)??t.totalUnits??0);let a=0,A=0;for(const y of e){const w=Number(y.quantity??0);let S=y.expectedTotal!==void 0&&y.expectedTotal!==null?Number(y.expectedTotal):w*Number(y.salePrice??0);isFinite(S)||(S=0);let M=w*Number(y.purchasePrice??Number.NaN);isFinite(M)||(M=y.invoiceTotal!==void 0&&y.invoiceTotal!==null?Number(y.invoiceTotal):0),a+=S,A+=M}const l=r.reduce((y,w)=>y+Number(w.amount||0),0),c=n.filter(y=>y.type==="DEBITO").reduce((y,w)=>y+Number(w.amount||0),0),u=n.filter(y=>y.type==="CREDITO").reduce((y,w)=>y+Number(w.amount||0),0),h=t.totalDebits!==void 0?Number(t.totalDebits):c,m=t.totalCredits!==void 0?Number(t.totalCredits):u,p=a-A,b=a-l-h+m;return{lbs:s,units:i,expectedSum:a,invoicedSum:A,expenses:l,debits:h,credits:m,grossProfit:p,finalAmount:b}}function K$(){const[t,e]=U.useState([]),[r,n]=U.useState(!0),[s,i]=U.useState(null),a=U.useRef(null);U.useEffect(()=>{(async()=>{n(!0);const u=Wt(at(je,"invoices"),Xs("date","desc")),h=await Pt(u),m=[];h.forEach(b=>{const B=b.data();m.push({id:b.id,...B,batches:B.batches||[],expenses:B.expenses||[],adjustments:B.adjustments||[],totals:B.totals||{lbs:B.totalLbs||0,units:B.totalUnits||0,amount:B.totalAmount||0,expenses:B.totalExpenses||0,finalAmount:B.finalAmount||0,invoiceTotal:B.invoiceTotal||0},totalDebits:B.totalDebits||0,totalCredits:B.totalCredits||0})});const p=await V$(m);e(p),n(!1)})()},[]);const A=async u=>{const h=u.status==="PAGADA"?"PENDIENTE":"PAGADA";await nn(Qt(je,"invoices",u.id),{status:h}),e(m=>m.map(p=>p.id===u.id?{...p,status:h}:p)),(s==null?void 0:s.id)===u.id&&i({...u,status:h})},l=async u=>{if(window.confirm(`Eliminar factura del ${u.date}?`))try{const h=Qt(je,"invoices",u.id),m=await zo(h),p=m.exists()?m.data():null,b=ry(je),B=(p==null?void 0:p.batches)||[];for(const E of B){const y=E.batchId||E.id;if(!y)continue;const w=Qt(je,"inventory_batches",y);b.update(w,{invoiceId:null,invoiceNumber:null,invoiceTotal:null})}b.delete(h),await b.commit(),e(E=>E.filter(y=>y.id!==u.id)),(s==null?void 0:s.id)===u.id&&i(null)}catch(h){console.error(h),alert("No se pudo eliminar la factura por completo.")}},c=async()=>{if(!a.current||!s)return;const u=a.current,h=await bB(u,{backgroundColor:"#ffffff",onclone:E=>{const y=E.body;y.style.background="#ffffff",y.querySelectorAll("*").forEach(w=>{const S=E.defaultView.getComputedStyle(w);S.boxShadow&&S.boxShadow!=="none"&&(w.style.boxShadow="none")})},scale:2}),m=h.toDataURL("image/png"),p=new Dt("p","mm","a4"),b=p.internal.pageSize.getWidth(),B=h.height*b/h.width;p.addImage(m,"PNG",0,0,b,B),p.save(`factura_${s.number||s.date}.pdf`)};return o.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded shadow",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Facturacin"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-4",children:o.jsxs("table",{className:"min-w-full w-full- text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"N factura"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Libras"}),o.jsx("th",{className:"p-2 border",children:"Unidades"}),o.jsx("th",{className:"p-2 border",children:"Facturado"}),o.jsx("th",{className:"p-2 border",children:"Ventas"}),o.jsx("th",{className:"p-2 border",children:"Gastos"}),o.jsx("th",{className:"p-2 border",children:"Dbitos"}),o.jsx("th",{className:"p-2 border",children:"Crditos"}),o.jsx("th",{className:"p-2 border",children:"Monto final"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{colSpan:13,className:"p-4 text-center",children:"Cargando"})}):t.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:13,className:"p-4 text-center",children:"Sin facturas"})}):t.map(u=>{const h=t1(u);return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:u.date}),o.jsx("td",{className:"p-2 border",children:u.number||""}),o.jsx("td",{className:"p-2 border",children:u.description||""}),o.jsx("td",{className:"p-2 border",children:Zl(h.lbs)}),o.jsx("td",{className:"p-2 border",children:Zl(h.units)}),o.jsx("td",{className:"p-2 border",children:Kr(h.invoicedSum)}),o.jsx("td",{className:"p-2 border",children:Kr(h.expectedSum)}),o.jsx("td",{className:"p-2 border",children:Kr(h.expenses)}),o.jsx("td",{className:"p-2 border",children:Kr(h.debits)}),o.jsx("td",{className:"p-2 border",children:Kr(h.credits)}),o.jsx("td",{className:"p-2 border",children:Kr(h.finalAmount)}),o.jsx("td",{className:"p-2 border",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${u.status==="PAGADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:u.status})}),o.jsx("td",{className:"p-2 border",children:o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",onClick:()=>i(u),children:"Ver"}),o.jsx("button",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",onClick:()=>A(u),children:u.status==="PAGADA"?"Marcar PENDIENTE":"Marcar PAGADA"}),o.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>l(u),children:"Eliminar"})]})})]},u.id)})})]})}),s&&o.jsxs("div",{ref:a,className:"bg-white p-4 rounded shadow-2xl",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsxs("h3",{className:"text-lg font-semibold",children:["Detalle ",s.date," ",s.number?` ${s.number}`:""]}),o.jsx("button",{className:"ml-auto px-3 py-1 border rounded",onClick:()=>i(null),children:"Cerrar"}),o.jsx("button",{onClick:c,className:"bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Imprimir PDF"})]}),(()=>{const u=t1(s);return o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm mb-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Estado:"})," ",s.status]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras:"})," ",Zl(u.lbs)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades:"})," ",Zl(u.units)]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Monto Facturado:"})," ",Kr(u.invoicedSum)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Monto Ventas (Esperado):"})," ",Kr(u.expectedSum)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Ganancia Bruta:"})," ",Kr(u.grossProfit)]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Gastos:"})," ",Kr(u.expenses)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Dbitos:"})," ",Kr(u.debits)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Crditos:"})," ",Kr(u.credits)]})]})]})})(),o.jsx("h4",{className:"font-semibold mb-1",children:"Lotes"}),o.jsxs("table",{className:"min-w-full text-sm mb-4 shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Unidad"}),o.jsx("th",{className:"p-2 border",children:"Cantidad"}),o.jsx("th",{className:"p-2 border",children:"Precio venta"}),o.jsx("th",{className:"p-2 border",children:"Total facturado"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"Ganancia bruta"})]})}),o.jsx("tbody",{children:(s.batches||[]).map((u,h)=>{const m=Number(u.quantity??0),p=u.expectedTotal!==void 0&&u.expectedTotal!==null?Number(u.expectedTotal):m*Number(u.salePrice??0);let b=m*Number(u.purchasePrice??Number.NaN);isFinite(b)||(b=u.invoiceTotal!==void 0&&u.invoiceTotal!==null?Number(u.invoiceTotal):0);const B=p-b;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:u.productName||"(sin nombre)"}),o.jsx("td",{className:"p-2 border",children:(u.unit||"").toUpperCase()}),o.jsx("td",{className:"p-2 border",children:Zl(u.quantity)}),o.jsx("td",{className:"p-2 border",children:Kr(u.salePrice)}),o.jsx("td",{className:"p-2 border",children:Kr(b)}),o.jsx("td",{className:"p-2 border",children:Kr(p)}),o.jsx("td",{className:"p-2 border",children:Kr(B)})]},h)})})]}),o.jsx("h4",{className:"font-semibold mb-1",children:"Gastos"}),o.jsxs("table",{className:"min-w-full text-sm shadow-xl mb-4",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"})]})}),o.jsx("tbody",{children:(s.expenses||[]).length>0?(s.expenses||[]).map((u,h)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:u.date}),o.jsx("td",{className:"p-2 border",children:u.description}),o.jsx("td",{className:"p-2 border",children:Kr(u.amount)})]},h)):o.jsx("tr",{children:o.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500",children:"Sin gastos"})})})]}),o.jsx("h4",{className:"font-semibold mb-1",children:"Cargos extras (Notas crdito/dbito)"}),o.jsxs("table",{className:"min-w-full text-sm shadow-xl mb-4",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Tipo de cargo"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Fecha"})]})}),o.jsx("tbody",{children:(s.adjustments||[]).length>0?(s.adjustments||[]).map((u,h)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:u.description}),o.jsx("td",{className:"p-2 border",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${u.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:u.type})}),o.jsx("td",{className:"p-2 border",children:Kr(u.amount)}),o.jsx("td",{className:"p-2 border",children:s.date})]},h)):o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"Sin cargos extras"})})})]}),(()=>{const u=t1(s);return o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-2 justify-between",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:["Total libras: ",o.jsx("strong",{children:Zl(u.lbs)})]}),o.jsxs("div",{children:["Total unidades: ",o.jsx("strong",{children:Zl(u.units)})]})]}),o.jsxs("div",{className:"space-y-1 text-center",children:[o.jsxs("div",{children:["Total facturado (costo):"," ",o.jsx("strong",{children:Kr(u.invoicedSum)})]}),o.jsxs("div",{children:["Total esperado (ventas):"," ",o.jsx("strong",{children:Kr(u.expectedSum)})]}),o.jsxs("div",{children:["Ganancia bruta (esperado  facturado):"," ",o.jsx("strong",{children:Kr(u.grossProfit)})]})]}),o.jsxs("div",{className:"space-y-1 text-right",children:[o.jsxs("div",{children:["Gastos: ",o.jsx("strong",{children:Kr(u.expenses)})]}),o.jsxs("div",{children:["Dbitos: ",o.jsx("strong",{children:Kr(u.debits)})]}),o.jsxs("div",{children:["Crditos: ",o.jsx("strong",{children:Kr(u.credits)})]})]}),o.jsx("div",{className:"md:col-span-3 mt-3",children:o.jsxs("div",{className:"bg-blue-50 border border-blue-300 rounded-lg p-4 text-center",children:[o.jsx("span",{className:"block text-lg font-semibold text-gray-800",children:"Monto final (esperado  gastos  dbitos + crditos):"}),o.jsx("span",{className:"block text-2xl font-bold text-blue-700 mt-1",children:Kr(u.finalAmount)})]})})]})})()]})]})}const ii=t=>`C$${Number(t||0).toFixed(2)}`,Lu=t=>Number(t||0).toFixed(3),q$=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase()),r1=()=>{const t=new Date;return er(new Date(t.getFullYear(),t.getMonth(),1),"yyyy-MM-dd")},wg=()=>er(new Date,"yyyy-MM-dd");function G$({paidBatches:t=[],onClose:e,onCreated:r}){const n=Array.isArray(t)?t:[],[s,i]=U.useState(r1()),[a,A]=U.useState(wg()),[l,c]=U.useState(""),u=U.useMemo(()=>{const ie=new Map;return n.forEach(ve=>ie.set(ve.productId,{id:ve.productId,name:ve.productName})),Array.from(ie.values()).sort((ve,We)=>ve.name.localeCompare(We.name))},[n]),h=U.useMemo(()=>n.filter(ie=>!(s&&ie.date<s||a&&ie.date>a||l&&ie.productId!==l)),[n,s,a,l]),[m,p]=U.useState(wg()),[b,B]=U.useState(()=>`FAC-${Date.now().toString().slice(-6)}`),[E,y]=U.useState(""),[w,S]=U.useState(()=>h.map(ie=>ie.id));U.useEffect(()=>{S(ie=>ie.filter(ve=>h.some(We=>We.id===ve)))},[h]);const[M,R]=U.useState([]),[O,I]=U.useState([]),[N,j]=U.useState(!1),[D,_]=U.useState(r1()),[T,P]=U.useState(wg());U.useEffect(()=>{(async()=>{try{j(!0);const ie=Wt(at(je,"expenses"),Xs("date","desc")),ve=await Pt(ie),We=[];ve.forEach(ot=>{const yt=ot.data();We.push({id:ot.id,date:yt.date,description:yt.description,amount:Number(yt.amount||0)})}),R(We)}catch(ie){console.error(ie)}finally{j(!1)}})()},[]);const ee=U.useMemo(()=>M.filter(ie=>!(!ie.date||D&&ie.date<D||T&&ie.date>T)),[M,D,T]),[Ae,ue]=U.useState([]),[he,te]=U.useState(!1),[se,ne]=U.useState(""),[ye,F]=U.useState("DEBITO"),[L,W]=U.useState(""),q=()=>{const ie=Number(L);!se.trim()||!isFinite(ie)||ie<=0||(ue(ve=>[...ve,{id:`${Date.now()}_${ve.length+1}`,description:se.trim(),type:ye,amount:Number(ie.toFixed(2))}]),ne(""),W(""))},[H,re]=U.useState(null),[$,de]=U.useState(""),[pe,Ne]=U.useState("DEBITO"),[Te,Fe]=U.useState(""),oe=ie=>{re(ie.id),de(ie.description),Ne(ie.type),Fe(ie.amount.toFixed(2))},ce=()=>{re(null),de(""),Ne("DEBITO"),Fe("")},J=()=>{if(!H)return;const ie=Number(Te);!isFinite(ie)||ie<=0||(ue(ve=>ve.map(We=>We.id===H?{...We,description:$.trim(),type:pe,amount:Number(ie.toFixed(2))}:We)),ce())},Re=ie=>{ue(ve=>ve.filter(We=>We.id!==ie)),H===ie&&ce()},Le=(ie,ve)=>{S(We=>ve?[...new Set([...We,ie])]:We.filter(ot=>ot!==ie))},Ue=ie=>{S(ie?h.map(ve=>ve.id):[])},Pe=(ie,ve)=>{I(We=>ve?[...new Set([...We,ie])]:We.filter(ot=>ot!==ie))},Ge=U.useMemo(()=>h.filter(ie=>w.includes(ie.id)),[h,w]),qe=U.useMemo(()=>Ae.filter(ie=>ie.type==="DEBITO").reduce((ie,ve)=>ie+ve.amount,0),[Ae]),tt=U.useMemo(()=>Ae.filter(ie=>ie.type==="CREDITO").reduce((ie,ve)=>ie+ve.amount,0),[Ae]),Ze=U.useMemo(()=>{let ie=0,ve=0,We=0,ot=0;for(const rt of Ge){q$(rt.unit)?ie+=Number(rt.quantity||0):ve+=Number(rt.quantity||0);const ur=rt.expectedTotal??Number((Number(rt.quantity||0)*Number(rt.salePrice||0)).toFixed(2)),St=rt.invoiceTotal!==void 0&&rt.invoiceTotal!==null?Number(rt.invoiceTotal):Number((Number(rt.quantity||0)*Number(rt.purchasePrice||0)).toFixed(2));We+=Number(ur||0),ot+=Number(St||0)}const yt=ee.filter(rt=>O.includes(rt.id)).reduce((rt,ur)=>rt+Number(ur.amount||0),0),Et=We-yt-qe+tt;return{totalLbs:ie,totalUnits:ve,totalExpected:Number(We.toFixed(2)),totalInvoiced:Number(ot.toFixed(2)),totalGastos:Number(yt.toFixed(2)),debits:Number(qe.toFixed(2)),credits:Number(tt.toFixed(2)),finalAmount:Number(Et.toFixed(2)),grossProfit:Number((We-ot).toFixed(2))}},[Ge,ee,O,qe,tt]),[vt,ht]=U.useState(!1),[Ct,Ht]=U.useState(""),Nt=async()=>{if(Ht(""),Ge.length===0){Ht("Selecciona al menos 1 lote pagado.");return}try{ht(!0);const ie={number:b.trim(),date:m,description:E.trim(),status:"PENDIENTE",createdAt:Lt.now(),totalLbs:Number(Lu(Ze.totalLbs)),totalUnits:Number(Lu(Ze.totalUnits)),totalAmount:Ze.totalExpected,invoiceTotal:Ze.totalInvoiced,totalExpenses:Ze.totalGastos,totalDebits:Ze.debits,totalCredits:Ze.credits,finalAmount:Ze.finalAmount,batches:Ge.map(ve=>{var We;return{id:ve.id,productId:ve.productId,productName:ve.productName,unit:ve.unit,quantity:Number(Lu(ve.quantity)),salePrice:Number(Number(ve.salePrice||0).toFixed(2)),purchasePrice:Number(Number(ve.purchasePrice||0).toFixed(2)),expectedTotal:Number((Number(ve.quantity||0)*Number(ve.salePrice||0)).toFixed(2)),invoiceTotal:ve.invoiceTotal!==void 0&&ve.invoiceTotal!==null?Number(ve.invoiceTotal):Number((Number(ve.quantity||0)*Number(ve.purchasePrice||0)).toFixed(2)),batchDate:ve.date,paidAt:(We=ve.paidAt)!=null&&We.toDate?er(ve.paidAt.toDate(),"yyyy-MM-dd"):null}}),expenses:ee.filter(ve=>O.includes(ve.id)).map(ve=>({id:ve.id,date:ve.date||null,description:ve.description||"",amount:Number(Number(ve.amount||0).toFixed(2))})),adjustments:Ae.map(ve=>({id:ve.id,description:ve.description,type:ve.type,amount:Number(ve.amount.toFixed(2))}))};await Bn(at(je,"invoices"),ie),Ht(" Factura creada."),r()}catch(ie){console.error(ie),Ht(` Error al crear factura: ${(ie==null?void 0:ie.message)||"desconocido"}`)}finally{ht(!1)}};return o.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/40 flex items-center justify-center p-3",children:[o.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-xl shadow-xl p-4 md:p-6 max-h-[90vh] overflow-auto relative",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Crear factura"}),o.jsx("button",{onClick:e,className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:m,onChange:ie=>p(ie.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Nmero"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:b,onChange:ie=>B(ie.target.value),placeholder:"FAC-001"})]}),o.jsxs("div",{className:"md:col-span-1",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Descripcin"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:E,onChange:ie=>y(ie.target.value),placeholder:"Comentarios de la factura"})]})]}),o.jsx("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:o.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Desde (lote)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:s,onChange:ie=>i(ie.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Hasta (lote)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:ie=>A(ie.target.value)})]}),o.jsxs("div",{className:"min-w-[220px]",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:l,onChange:ie=>c(ie.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),u.map(ie=>o.jsx("option",{value:ie.id,children:ie.name},ie.id))]})]}),o.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{i(r1()),A(wg()),c("")},children:"Quitar filtro"})]})}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Lotes pagados"}),o.jsxs("label",{className:"text-sm flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:h.length>0&&w.length===h.length,onChange:ie=>Ue(ie.target.checked)}),"Seleccionar todos (sobre el filtro)"]})]}),h.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No hay lotes pagados disponibles en el filtro actual."}):o.jsx("div",{className:"border rounded max-h-80 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Sel"}),o.jsx("th",{className:"p-2 border",children:"Fecha lote"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Unidad"}),o.jsx("th",{className:"p-2 border",children:"Cantidad"}),o.jsx("th",{className:"p-2 border",children:"Precio venta"}),o.jsx("th",{className:"p-2 border",children:"Total facturado"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"Ganancia bruta"}),o.jsx("th",{className:"p-2 border",children:"Fecha pago"})]})}),o.jsx("tbody",{children:h.map(ie=>{var Et;const ve=w.includes(ie.id),We=ie.expectedTotal??Number((Number(ie.quantity||0)*Number(ie.salePrice||0)).toFixed(2)),ot=ie.invoiceTotal!==void 0&&ie.invoiceTotal!==null?Number(ie.invoiceTotal):Number((Number(ie.quantity||0)*Number(ie.purchasePrice||0)).toFixed(2)),yt=We-ot;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"checkbox",checked:ve,onChange:rt=>Le(ie.id,rt.target.checked)})}),o.jsx("td",{className:"p-2 border",children:ie.date}),o.jsx("td",{className:"p-2 border",children:ie.productName}),o.jsx("td",{className:"p-2 border",children:(ie.unit||"").toUpperCase()}),o.jsx("td",{className:"p-2 border",children:Lu(ie.quantity)}),o.jsx("td",{className:"p-2 border",children:ii(ie.salePrice)}),o.jsx("td",{className:"p-2 border",children:ii(ot)}),o.jsx("td",{className:"p-2 border",children:ii(We)}),o.jsx("td",{className:"p-2 border",children:ii(yt)}),o.jsx("td",{className:"p-2 border",children:(Et=ie.paidAt)!=null&&Et.toDate?er(ie.paidAt.toDate(),"yyyy-MM-dd"):""})]},ie.id)})})]})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Gastos a incluir (opcional)"}),N&&o.jsx("span",{className:"text-xs text-gray-500",children:"Cargando"}),o.jsxs("div",{className:"ml-auto flex items-end gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Desde (gasto)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:D,onChange:ie=>_(ie.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta (gasto)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:T,onChange:ie=>P(ie.target.value)})]})]})]}),ee.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No hay gastos en el rango seleccionado."}):o.jsx("div",{className:"border rounded max-h-48 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Sel"}),o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"})]})}),o.jsx("tbody",{children:ee.map(ie=>{const ve=O.includes(ie.id);return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"checkbox",checked:ve,onChange:We=>Pe(ie.id,We.target.checked)})}),o.jsx("td",{className:"p-2 border",children:ie.date||""}),o.jsx("td",{className:"p-2 border",children:ie.description||""}),o.jsx("td",{className:"p-2 border",children:ii(Number(ie.amount||0))})]},ie.id)})})]})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Notas Crdito/Dbito (Cargos extras)"}),o.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>te(!0),children:"Crear Cargo"})]}),Ae.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"Sin cargos agregados."}):o.jsx("div",{className:"border rounded max-h-40 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:Ae.map(ie=>{const ve=H===ie.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:ve?o.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[70px]",value:$,onChange:We=>de(We.target.value)}):o.jsx("span",{title:ie.description,children:ie.description.length>60?`${ie.description.slice(0,60)}`:ie.description})}),o.jsx("td",{className:"p-2 border",children:ve?o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:pe,onChange:We=>Ne(We.target.value),children:[o.jsx("option",{value:"DEBITO",children:"Dbito"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ie.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:ie.type})}),o.jsx("td",{className:"p-2 border",children:ve?o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1 text-right",value:Te,onChange:We=>Fe(We.target.value)}):ii(ie.amount)}),o.jsx("td",{className:"p-2 border",children:ve?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:J,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:ce,children:"Cancelar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Re(ie.id),children:"Eliminar"})]}):o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-indigo-600 text-white hover:bg-indigo-700 text-xs",onClick:()=>oe(ie),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Re(ie.id),children:"Eliminar"})]})})]},ie.id)})})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-4 justify-between",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:["Total libras: ",o.jsx("strong",{children:Lu(Ze.totalLbs)})]}),o.jsxs("div",{children:["Total unidades: ",o.jsx("strong",{children:Lu(Ze.totalUnits)})]})]}),o.jsxs("div",{className:"space-y-1 text-center",children:[o.jsxs("div",{children:["Total facturado (costo):"," ",o.jsx("strong",{children:ii(Ze.totalInvoiced)})]}),o.jsxs("div",{children:["Total esperado (ventas):"," ",o.jsx("strong",{children:ii(Ze.totalExpected)})]}),o.jsxs("div",{children:["Ganancia bruta (esperado  facturado):"," ",o.jsx("strong",{children:ii(Ze.grossProfit)})]})]}),o.jsxs("div",{className:"space-y-1 text-right",children:[o.jsxs("div",{children:["Gastos: ",o.jsx("strong",{children:ii(Ze.totalGastos)})]}),o.jsxs("div",{children:["Dbitos: ",o.jsx("strong",{children:ii(Ze.debits)})]}),o.jsxs("div",{children:["Crditos: ",o.jsx("strong",{children:ii(Ze.credits)})]})]}),o.jsx("div",{className:"md:col-span-3 mt-3",children:o.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-center font-semibold text-lg",children:["Monto final (esperado  gastos  dbitos + crditos):"," ",o.jsx("span",{className:"text-blue-700",children:ii(Ze.finalAmount)})]})})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{disabled:vt,onClick:Nt,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",children:vt?"Creando":"Crear factura"}),o.jsx("button",{onClick:e,className:"px-4 py-2 border rounded",children:"Cancelar"}),Ct&&o.jsx("span",{className:"text-sm ml-2",children:Ct})]}),vt&&o.jsxs("div",{className:"absolute inset-0 z-[11000] bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center gap-3",children:[o.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),o.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Creando factura"})]})]}),he&&o.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/50 flex items-center justify-center p-3",children:o.jsxs("div",{className:"bg-white w-full max-w-lg rounded-xl shadow-xl p-4",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx("h4",{className:"font-semibold",children:"Nuevo cargo"}),o.jsx("button",{className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",onClick:()=>te(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripcin"}),o.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[90px]",value:se,onChange:ie=>ne(ie.target.value),placeholder:"Detalle del cargo"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Tipo de cargo"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:ye,onChange:ie=>F(ie.target.value),children:[o.jsx("option",{value:"DEBITO",children:"Dbito"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:L,onChange:ie=>W(ie.target.value),placeholder:"0.00"})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:q,children:"Agregar"})})]})]})})]})}const ec=t=>`C$ ${Number(t||0).toFixed(2)}`,ku=t=>Number(t||0).toFixed(3),z$=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase());function $$(){const[t,e]=U.useState([]),[r,n]=U.useState(!0),[s,i]=U.useState(!1),[a,A]=U.useState(null),[l,c]=U.useState(er(new Date(new Date().getFullYear(),new Date().getMonth(),1),"yyyy-MM-dd")),[u,h]=U.useState(er(new Date,"yyyy-MM-dd")),[m,p]=U.useState(""),[b,B]=U.useState(!1),{refreshKey:E,refresh:y}=Jc();U.useEffect(()=>{(async()=>{n(!0);const I=Wt(at(je,"inventory_batches"),rr("status","==","PAGADO"),Xs("date","desc")),N=await Pt(I),j=[];N.forEach(D=>{const _=D.data(),T=Number(_.quantity||0),P=Number(_.remaining||0),ee=Number(_.purchasePrice||0),Ae=Number(_.salePrice||0),ue=Number((T*ee).toFixed(2)),he=Number((T*Ae).toFixed(2));j.push({id:D.id,productId:_.productId,productName:_.productName,category:_.category,unit:_.unit,quantity:T,remaining:P,purchasePrice:ee,salePrice:Ae,invoiceTotal:_.invoiceTotal!=null?Number(_.invoiceTotal):ue,expectedTotal:_.expectedTotal!=null?Number(_.expectedTotal):he,date:_.date,status:_.status,paidAt:_.paidAt})}),e(j),n(!1)})()},[E]);const w=U.useMemo(()=>t.filter(I=>!(l&&I.date<l||u&&I.date>u||m&&I.productId!==m)),[t,l,u,m]),S=U.useMemo(()=>{let I=0,N=0,j=0,D=0,_=0,T=0;for(const P of w)z$(P.unit)?(I+=P.quantity,N+=P.remaining):(j+=P.quantity,D+=P.remaining),_+=Number(P.expectedTotal||0),T+=Number(P.invoiceTotal||0);return{lbsIng:I,lbsRem:N,udsIng:j,udsRem:D,totalEsperado:_,totalFact:T,gross:_-T}},[w]),M=I=>{A(I),i(!0)},R=async()=>{if(a)try{const I=Qt(je,"inventory_batches",a.id);await nn(I,{status:"PENDIENTE",remaining:a.quantity});const N=at(je,"salesV2"),j=await Pt(Wt(N,rr("batchId","==",a.id))),D=await Pt(Wt(N,rr("productName","==",a.productName),rr("date","==",a.date))),_=[...j.docs,...D.docs];for(const T of _)await os(Qt(je,"salesV2",T.id));e(T=>T.map(P=>P.id===a.id?{...P,status:"PENDIENTE",remaining:a.quantity}:P)),i(!1),A(null),y()}catch(I){console.error("Error al marcar pendiente:",I)}},O=U.useMemo(()=>{const I=new Map;return t.forEach(N=>I.set(N.productId,{id:N.productId,name:N.productName})),Array.from(I.values())},[t]);return o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Pagados"}),o.jsx(nh,{onClick:y,loading:r})]}),o.jsxs("div",{className:"bg-white p-3 rounded shadow-2xl border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:l,onChange:I=>c(I.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:I=>h(I.target.value)})]}),o.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[o.jsx("label",{className:"font-semibold",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:m,onChange:I=>p(I.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),O.map(I=>o.jsx("option",{value:I.id,children:I.name},I.id))]})]}),o.jsx("button",{className:"px-3 py-1 rounded-2xl bg-gray-200 hover:bg-gray-300",onClick:()=>{c(""),h(""),p("")},children:"Quitar filtro"}),o.jsx("button",{className:"ml-auto px-3 py-1 rounded-2xl bg-blue-600 text-white hover:bg-blue-700",onClick:()=>B(!0),children:"Crear factura"})]}),o.jsx("div",{className:"bg-gray-50 p-3 rounded-2xl shadow-2xl border mb-3 text-base",children:o.jsxs("div",{className:"grid grid-cols-2 gap-y-2 gap-x-8",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",ku(S.lbsIng)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",ku(S.udsIng)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",ec(S.totalEsperado)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",ku(S.lbsRem)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",ku(S.udsRem)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",ec(S.totalFact)]}),o.jsxs("div",{className:"col-span-3",children:[o.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",ec(S.gross)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes (por filtro):"})," ",w.length.toLocaleString()]})]})}),o.jsx("div",{className:"bg-white p-2 rounded shadow-2xl border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Unidad"}),o.jsx("th",{className:"p-2 border",children:"Ingresado"}),o.jsx("th",{className:"p-2 border",children:"Restantes"}),o.jsx("th",{className:"p-2 border",children:"Precio Compra"}),o.jsx("th",{className:"p-2 border",children:"Precio Venta"}),o.jsx("th",{className:"p-2 border",children:"Total factura"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"Fecha pago"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):w.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin lotes pagados"})}):w.map(I=>{var N;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:I.date}),o.jsx("td",{className:"p-2 border",children:(I.category||"").toUpperCase()}),o.jsx("td",{className:"p-2 border",children:I.productName}),o.jsx("td",{className:"p-2 border",children:(I.unit||"").toUpperCase()}),o.jsx("td",{className:"p-2 border",children:ku(I.quantity)}),o.jsx("td",{className:"p-2 border",children:ku(I.remaining)}),o.jsx("td",{className:"p-2 border",children:ec(I.purchasePrice)}),o.jsx("td",{className:"p-2 border",children:ec(I.salePrice)}),o.jsx("td",{className:"p-2 border",children:ec(I.invoiceTotal||0)}),o.jsx("td",{className:"p-2 border",children:ec(I.expectedTotal||0)}),o.jsx("td",{className:"p-2 border",children:(N=I.paidAt)!=null&&N.toDate?er(I.paidAt.toDate(),"yyyy-MM-dd"):""}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>M(I),children:"Marcar PENDIENTE"})})]},I.id)})})]})}),b&&o.jsx(G$,{paidBatches:w,onClose:()=>B(!1),onCreated:()=>B(!1)}),s&&a&&o.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-2xl p-6 w-[90%] max-w-md",children:[o.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Confirmar accin"}),o.jsxs("p",{className:"text-gray-700 mb-4",children:["Seguro que quieres marcar pendiente este inventario?",o.jsx("br",{}),"Al hacerlo, las libras se restaurarn y se eliminarn las ventas generadas del dashboard."]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{onClick:()=>i(!1),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded",children:"Cancelar"}),o.jsx("button",{onClick:R,className:"px-4 py-2 bg-yellow-600 text-white hover:bg-yellow-700 rounded",children:"Confirmar"})]})]})})]})}const Hn=t=>`C$ ${(Number(t)||0).toFixed(2)}`,W$=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function xg(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function J$(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function X$(t){const e="ROP",r=xg(t.subcat).slice(0,3)||"GEN",n=J$(t.gender),s=xg(t.color).slice(0,3)||"COL",i=xg(t.size)||"TLL",a=xg(t.brand).slice(0,4)||"BRD",A=Date.now().toString(36).toUpperCase().slice(-4);return`${e}-${r}-${n}-${s}-${i}-${a}-${A}`}const Gh=/^[A-Za-z0-9._-]{0,32}$/;function Y$(){const[t,e]=U.useState([]),[r,n]=U.useState([]),[s,i]=U.useState(!0),[a,A]=U.useState(""),[l,c]=U.useState(er(th(new Date),"yyyy-MM-dd")),[u,h]=U.useState(er(eh(new Date),"yyyy-MM-dd")),[m,p]=U.useState(""),[b,B]=U.useState(""),[E,y]=U.useState(er(new Date,"yyyy-MM-dd")),[w,S]=U.useState(0),[M,R]=U.useState(0),[O,I]=U.useState(0),[N,j]=U.useState(0),[D,_]=U.useState(0),[T,P]=U.useState(""),[ee,Ae]=U.useState(""),[ue,he]=U.useState(""),[te,se]=U.useState(""),[ne,ye]=U.useState(""),[F,L]=U.useState(""),[W,q]=U.useState(""),[H,re]=U.useState(!1),[$,de]=U.useState(""),[pe,Ne]=U.useState("Camisa"),[Te,Fe]=U.useState(null),[oe,ce]=U.useState(""),[J,Re]=U.useState(0),[Le,Ue]=U.useState(0),[Pe,Ge]=U.useState(0),[qe,tt]=U.useState(0),[Ze,vt]=U.useState(0),[ht,Ct]=U.useState(""),[Ht,Nt]=U.useState(""),[ie,ve]=U.useState(""),[We,ot]=U.useState(""),[yt,Et]=U.useState(""),[rt,ur]=U.useState(""),[St,Pr]=U.useState(""),[sr,fr]=U.useState(null),[fn,vr]=U.useState({x:0,y:0}),[kt,Yt]=U.useState(!1);U.useEffect(()=>{const Be=()=>fr(null),et=nt=>nt.key==="Escape"&&fr(null);return document.addEventListener("click",Be),document.addEventListener("keydown",et),()=>{document.removeEventListener("click",Be),document.removeEventListener("keydown",et)}},[]);const us=(Be,et,nt=192,Ot=160)=>{let It=Be;Be+nt+8>window.innerWidth&&(It=Be-nt),It=Math.max(8,Math.min(It,window.innerWidth-nt-8));let mt=et;return et+Ot+8>window.innerHeight&&(mt=window.innerHeight-Ot-8),mt=Math.max(8,Math.min(mt,window.innerHeight-Ot-8)),{x:It,y:mt}},$r=(Be,et)=>{Be.stopPropagation();const nt=Be.currentTarget.getBoundingClientRect(),Ot=nt.right,Zt=nt.bottom,It=us(Ot,Zt);vr(It),fr(mt=>mt===et?null:et)};U.useEffect(()=>{const Be=()=>fr(null),et=nt=>{nt.key==="Escape"&&fr(null)};return document.addEventListener("click",Be),document.addEventListener("keydown",et),()=>{document.removeEventListener("click",Be),document.removeEventListener("keydown",et)}},[]),U.useEffect(()=>{if(!sr)return;const Be=()=>fr(null);return window.addEventListener("scroll",Be,!0),window.addEventListener("resize",Be),()=>{window.removeEventListener("scroll",Be,!0),window.removeEventListener("resize",Be)}},[sr]),U.useEffect(()=>{(async()=>{const Be=await Pt(at(je,"products_clothes")),et=[];Be.forEach(It=>{const mt=It.data();et.push({id:It.id,name:mt.name??"(sin nombre)",category:mt.category??"(sin categora)",measurement:mt.measurement??"unidad",price:Number(mt.price??0),sku:mt.sku||"",size:mt.size||"",color:mt.color||"",gender:mt.gender||"",brand:mt.brand||""})}),e(et);const nt=Wt(at(je,"inventory_clothes_batches"),Xs("date","desc")),Ot=await Pt(nt),Zt=[];Ot.forEach(It=>{const mt=It.data();Zt.push({id:It.id,productId:mt.productId,productName:mt.productName,category:mt.category,unit:mt.unit,quantity:Number(mt.quantity||0),remaining:Number(mt.remaining??mt.quantity??0),purchasePrice:Number(mt.purchasePrice||0),salePrice:Number(mt.salePrice||0),invoiceTotal:Number(mt.invoiceTotal??Number(mt.quantity||0)*Number(mt.purchasePrice||0)),expectedTotal:Number(mt.expectedTotal??Number(mt.quantity||0)*Number(mt.salePrice||0)),date:mt.date,createdAt:mt.createdAt,status:mt.status,notes:mt.notes||"",sku:mt.sku||"",size:mt.size||"",color:mt.color||"",gender:mt.gender||"",brand:mt.brand||"",clientCode:mt.clientCode||""})}),n(Zt),i(!1)})()},[]),U.useEffect(()=>{const Be=t.find(et=>et.id===b);Be&&(I(Number(Be.price||0)),Be.sku&&Ae(Be.sku),Be.size&&he(et=>et||Be.size),Be.color&&se(et=>et||Be.color),Be.gender&&ye(et=>et||Be.gender),Be.brand&&L(et=>et||Be.brand))},[b,t]),U.useEffect(()=>{j(Math.floor(w*M*100)/100)},[w,M]),U.useEffect(()=>{_(Math.floor(w*O*100)/100)},[w,O]),U.useEffect(()=>{const Be=t.find(Ot=>Ot.id===b);if(Be!=null&&Be.sku){Ae(Be.sku);return}const et=H&&pe?pe:(Be==null?void 0:Be.category)||"";if(!et&&!ne&&!te&&!ue&&!F){Ae("");return}const nt=X$({subcat:et,gender:ne||"",color:te||"",size:ue||"",brand:F||""});Ae(nt)},[H,pe,b,ne,te,ue,F,t]);const mr=U.useMemo(()=>r.filter(Be=>!(l&&Be.date<l||u&&Be.date>u||m&&Be.productId!==m)),[r,l,u,m]),Qe=U.useMemo(()=>{const Be=mr.reduce((Zt,It)=>Zt+(It.invoiceTotal||0),0),et=mr.reduce((Zt,It)=>Zt+(It.expectedTotal||0),0),nt=mr.reduce((Zt,It)=>Zt+It.quantity,0),Ot=mr.reduce((Zt,It)=>Zt+It.remaining,0);return{udsIng:nt,udsRem:Ot,totalFacturado:Be,totalEsperado:et}},[mr]),Me=async Be=>{Be.preventDefault(),A("");const et=!!b&&!H,nt=t.find(mt=>mt.id===b),Ot=et?(nt==null?void 0:nt.name)||"":$||"",Zt=et?(nt==null?void 0:nt.category)||"":pe||"General",It=et&&(nt==null?void 0:nt.measurement)||"unidad";if(!Ot||w<=0||M<=0){A("Completa nombre/cantidad/costo.");return}if(W&&!Gh.test(W)){A("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}try{const mt=await Bn(at(je,"inventory_clothes_batches"),{productId:et?nt.id:"",productName:Ot,category:Zt,unit:It,quantity:w,remaining:w,purchasePrice:M,salePrice:O,invoiceTotal:N,expectedTotal:D,date:E,createdAt:Lt.now(),status:"PENDIENTE",notes:T||"",sku:ee||"",size:ue||"",color:te||"",gender:ne||"",brand:F||"",clientCode:W||""});n(Ns=>[{id:mt.id,productId:et?nt.id:"",productName:Ot,category:Zt,unit:It,quantity:w,remaining:w,purchasePrice:M,salePrice:O,invoiceTotal:N,expectedTotal:D,date:E,createdAt:Lt.now(),status:"PENDIENTE",notes:T||"",sku:ee||"",size:ue||"",color:te||"",gender:ne||"",brand:F||"",clientCode:W||""},...Ns]),A(" Lote de ropa creado"),B(""),y(er(new Date,"yyyy-MM-dd")),S(0),R(0),I(0),j(0),_(0),P(""),Ae(""),he(""),se(""),ye(""),L(""),q(""),re(!1),de(""),Ne("Camisa")}catch(mt){console.error(mt),A(" Error al crear lote")}},Ft=async Be=>{confirm(`Marcar PAGADO el lote del ${Be.date} (${Be.productName})?`)&&(await nn(Qt(je,"inventory_clothes_batches",Be.id),{status:"PAGADO"}),n(nt=>nt.map(Ot=>Ot.id===Be.id?{...Ot,status:"PAGADO"}:Ot)))},ft=Be=>{Fe(Be.id),ce(Be.date),Re(Be.quantity),Ue(Be.purchasePrice),Ge(Be.salePrice),tt(Number((Be.quantity*Be.purchasePrice).toFixed(2))),vt(Number((Be.quantity*Be.salePrice).toFixed(2))),Ct(Be.notes||""),Nt(Be.sku||""),ve(Be.size||""),ot(Be.color||""),Et(Be.gender||""),ur(Be.brand||""),Pr(Be.clientCode||"")},ct=()=>{Fe(null),ce(""),Re(0),Ue(0),Ge(0),tt(0),vt(0),Ct(""),Nt(""),ve(""),ot(""),Et(""),ur(""),Pr("")};U.useEffect(()=>{Te&&tt(Math.floor(J*Le*100)/100)},[Te,J,Le]),U.useEffect(()=>{Te&&vt(Math.floor(J*Pe*100)/100)},[Te,J,Pe]);const Ut=async()=>{if(!Te)return;const Be=r.find(Zt=>Zt.id===Te);if(!Be)return;const et=Math.max(0,Be.quantity-Be.remaining),nt=Math.max(0,J-et);if(St&&!Gh.test(St)){A("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}const Ot=Qt(je,"inventory_clothes_batches",Te);await nn(Ot,{date:oe,quantity:J,purchasePrice:Le,salePrice:Pe,invoiceTotal:qe,expectedTotal:Ze,notes:ht,remaining:nt,sku:Ht,size:ie,color:We,gender:yt||"",brand:rt||"",clientCode:St||""}),n(Zt=>Zt.map(It=>It.id===Te?{...It,date:oe,quantity:J,purchasePrice:Le,salePrice:Pe,invoiceTotal:qe,expectedTotal:Ze,notes:ht,remaining:nt,sku:Ht,size:ie,color:We,gender:yt||"",brand:rt||"",clientCode:St||""}:It)),ct(),A(" Lote actualizado")},it=async Be=>{confirm(`Eliminar el lote del ${Be.date} (${Be.productName})?`)&&(await os(Qt(je,"inventory_clothes_batches",Be.id)),n(nt=>nt.filter(Ot=>Ot.id!==Be.id)),A(" Lote eliminado"))},_t=()=>{const Be=(l?`Desde ${l}`:"Desde inicio")+"  "+(u?`Hasta ${u}`:"Hasta hoy"),et=It=>(It||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),nt=mr.map(It=>`
      <tr>
        <td>${It.date}</td>
        <td>${(It.category||"").toUpperCase()}</td>
        <td>${et(It.productName)}</td>
        <td>${et(It.sku||"")}</td>
        <td>${et(It.size||"")}</td>
        <td>${et(It.color||"")}</td>
        <td>${et(It.clientCode||"")}</td>
        <td>${et(It.gender||"")}</td>
        <td>${(It.unit||"").toUpperCase()}</td>
        <td style="text-align:right">${It.quantity.toFixed(0)}</td>
        <td style="text-align:right">${It.remaining.toFixed(0)}</td>
        <td style="text-align:right">${Hn(It.purchasePrice)}</td>
        <td style="text-align:right">${Hn(It.salePrice)}</td>
        <td style="text-align:right">${Hn(It.invoiceTotal||0)}</td>
        <td style="text-align:right">${Hn(It.expectedTotal||0)}</td>
        <td>${et((It.notes||"").slice(0,120))}</td>
        <td>${It.status}</td>
      </tr>`).join(""),Ot=`
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Inventario de Ropa por Lotes</title>
  <style>
    * { font-family: Arial, sans-serif; }
    h1 { margin: 0 0 4px; }
    .muted { color: #555; font-size: 12px; margin-bottom: 12px; }
    table { width: 100%; border-collapse: collapse; font-size: 11px; }
    th, td { border: 1px solid #ddd; padding: 6px; }
    th { background: #f5f5f5; text-align: left; }
    .totals { margin: 10px 0 16px; font-size: 12px; display: grid; grid-template-columns: repeat(2, max-content); column-gap: 32px; row-gap: 6px; align-items: center; }
    @media print { @page { size: A4 landscape; margin: 12mm; } button { display: none; } }
  </style>
</head>
<body>
  <button onclick="window.print()">Imprimir</button>
  <h1>Inventario de Ropa por Lotes</h1>
  <div class="muted">${Be}</div>
  <div class="totals">
    <span><strong>Unidades ingresadas:</strong> ${Qe.udsIng.toFixed(0)}</span>
    <span><strong>Unidades restantes:</strong> ${Qe.udsRem.toFixed(0)}</span>
    <span><strong>Total esperado a ganar:</strong> ${Hn(Qe.totalEsperado)}</span>
    <span><strong>Total facturado:</strong> ${Hn(Qe.totalFacturado)}</span>
    <span><strong>Ganancia sin gastos:</strong> ${Hn(Number((Qe.totalEsperado-Qe.totalFacturado).toFixed(2)))}</span>
  </div>
  <table>
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Subcat.</th>
        <th>Producto</th>
        <th>SKU</th>
        <th>Talla</th>
        <th>Color</th>
        <th>Cdigo Cliente</th>
        <th>Gnero</th>
        <th>Unidad</th>
        <th>Ingresado</th>
        <th>Restantes</th>
        <th>Precio Compra</th>
        <th>Precio Venta</th>
        <th>Total factura</th>
        <th>Total esperado</th>
        <th>Comentario</th>
        <th>Estado</th>
      </tr>
    </thead>
    <tbody>${nt||'<tr><td colspan="17" style="text-align:center">Sin lotes</td></tr>'}</tbody>
  </table>
</body>
</html>`,Zt=window.open("","_blank");Zt&&(Zt.document.open(),Zt.document.write(Ot),Zt.document.close())};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Inventario de Ropa"}),o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>Yt(!0),type:"button",children:"Crear Inventario"})]}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:l,onChange:Be=>c(Be.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:Be=>h(Be.target.value)})]}),o.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[o.jsx("label",{className:"font-semibold",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:m,onChange:Be=>p(Be.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),t.map(Be=>o.jsxs("option",{value:Be.id,children:[Be.name,"  ",Be.category]},Be.id))]})]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{c(""),h(""),p("")},children:"Quitar filtro"}),o.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:_t,children:"Imprimir PDF"})]}),o.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-base",children:o.jsxs("div",{className:"grid grid-cols-3 gap-y-2 gap-x-8",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",Qe.udsIng.toFixed(0)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",Qe.udsRem.toFixed(0)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",Hn(Qe.totalEsperado)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",Hn(Qe.totalFacturado)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",Hn(Number((Qe.totalEsperado-Qe.totalFacturado).toFixed(2)))]})]})}),o.jsx("div",{className:"bg-white rounded shadow border",children:o.jsx("div",{className:"w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Fecha"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden sm:table-cell",children:"Subcat."}),o.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"SKU"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Talla"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Color"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Cdigo Cliente"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Gnero"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Unidad"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Ingresado"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Restantes"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Compra"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Venta"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total factura"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total esperado"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Comentario"}),o.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Estado"}),o.jsx("th",{className:"p-2 md:p-3 border text-center",children:"Acciones"})]})}),o.jsx("tbody",{className:"whitespace-nowrap",children:s?o.jsx("tr",{children:o.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Cargando"})}):mr.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Sin lotes"})}):mr.map(Be=>{const et=Te===Be.id;return o.jsxs("tr",{className:"text-left",children:[o.jsx("td",{className:"p-2 md:p-3 border align-top",children:et?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:oe,onChange:nt=>ce(nt.target.value)}):Be.date}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden sm:table-cell",children:(Be.category||"").toUpperCase()}),o.jsx("td",{className:"p-2 md:p-3 border align-top max-w-[220px] md:max-w-[320px]",children:o.jsx("span",{className:"block truncate",title:Be.productName,children:Be.productName})}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell max-w-[220px]",children:et?o.jsx("input",{className:"w-full border p-1 rounded",value:Ht,onChange:nt=>Nt(nt.target.value)}):o.jsx("span",{className:"block truncate",title:Be.sku||"",children:Be.sku||""})}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:et?o.jsx("input",{className:"w-full border p-1 rounded",value:ie,onChange:nt=>ve(nt.target.value)}):Be.size||""}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:et?o.jsx("input",{className:"w-full border p-1 rounded",value:We,onChange:nt=>ot(nt.target.value)}):Be.color||""}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[200px]",children:et?o.jsx("input",{className:"w-full border p-1 rounded",value:St,onChange:nt=>{const Ot=nt.target.value;Gh.test(Ot)&&Pr(Ot)},placeholder:"Ej: LOTE-SHEIN-SEP-01",title:"AZ 09 . _ - (mx 32)"}):o.jsx("span",{className:"block truncate",title:Be.clientCode||"",children:Be.clientCode||""})}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:et?o.jsx("select",{className:"w-full border p-1 rounded",value:yt,onChange:nt=>Et(nt.target.value),children:W$.map(nt=>o.jsx("option",{value:nt,children:nt||""},nt))}):Be.gender||""}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:(Be.unit||"").toUpperCase()}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:et?o.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-20 border p-1 rounded text-right",value:Number.isNaN(J)?"":J,onChange:nt=>Re(Math.max(0,parseInt(nt.target.value||"0",10)))}):Be.quantity.toFixed(0)}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:et?Be.remaining:Be.remaining.toFixed(0)}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:et?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(Le)?"":Le,onChange:nt=>Ue(Math.max(0,parseFloat(nt.target.value||"0")))}):Hn(Be.purchasePrice)}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:et?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(Pe)?"":Pe,onChange:nt=>Ge(Math.max(0,parseFloat(nt.target.value||"0")))}):Hn(Be.salePrice)}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:Hn(et?qe:Be.invoiceTotal||0)}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:Hn(et?Ze:Be.expectedTotal||0)}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[280px]",children:et?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:ht,onChange:nt=>Ct(nt.target.value),maxLength:500}):o.jsx("span",{className:"block truncate",title:Be.notes||"",children:Be.notes||""})}),o.jsx("td",{className:"p-2 md:p-3 border align-top",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] md:text-xs ${Be.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:Be.status})}),o.jsx("td",{className:"p-2 md:p-3 border align-top",children:et?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Ut,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:ct,children:"Cancelar"})]}):o.jsx("button",{type:"button",className:"inline-flex items-center justify-center w-8 h-8 rounded border border-gray-200 hover:bg-gray-100",title:"Acciones",onClick:nt=>$r(nt,Be.id),children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor",children:[o.jsx("circle",{cx:"12",cy:"5",r:"1.6"}),o.jsx("circle",{cx:"12",cy:"12",r:"1.6"}),o.jsx("circle",{cx:"12",cy:"19",r:"1.6"})]})})})]},Be.id)})})]})})}),sr&&_d.createPortal(o.jsxs(o.Fragment,{children:[o.jsx("div",{onClick:()=>fr(null),className:"fixed inset-0 z-[60]"}),o.jsx("div",{className:"fixed z-[61] w-44 rounded-md border border-gray-200 bg-white shadow-xl",style:{left:fn.x,top:fn.y},onClick:Be=>Be.stopPropagation(),role:"menu","aria-orientation":"vertical",children:o.jsxs("div",{className:"py-1 text-sm",children:[(()=>{const Be=mr.find(et=>et.id===sr);return(Be==null?void 0:Be.status)==="PENDIENTE"?o.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-green-50",onClick:()=>{fr(null),Ft(Be)},children:" Pagar"}):null})(),o.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-yellow-50",onClick:()=>{const Be=mr.find(et=>et.id===sr);Be&&(fr(null),ft(Be))},children:" Editar"}),o.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-red-50 text-red-600",onClick:()=>{const Be=mr.find(et=>et.id===sr);Be&&(fr(null),it(Be))},children:" Borrar"})]})})]}),document.body),kt&&_d.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>Yt(!1)}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-4xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:"Crear Inventario (Lote)"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Yt(!1),type:"button",children:"Cerrar"})]}),o.jsxs("form",{onSubmit:Me,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto de ropa"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:b,onChange:Be=>B(Be.target.value),children:[o.jsx("option",{value:"",children:"(Opcional) Selecciona un producto"}),t.map(Be=>o.jsxs("option",{value:Be.id,children:[Be.name,"  ",Be.category,"  ",Be.sku?`SKU: ${Be.sku}`:""]},Be.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del lote"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:E,onChange:Be=>y(Be.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (pzas)"}),o.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-full border p-2 rounded",value:w===0?"":w,onChange:Be=>S(Math.max(0,parseInt(Be.target.value||"0",10))),placeholder:""})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio de compra (pza)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:M===0?"":M,onChange:Be=>R(Math.max(0,parseFloat(Be.target.value||"0")))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (pza)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:O===0?"":O,onChange:Be=>I(Math.max(0,parseFloat(Be.target.value||"0")))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:ee,readOnly:!0,placeholder:"Se genera automticamente o se carga del producto",title:"Si el producto tiene SKU, se usa tal cual; si no, se genera por subcat/gnero/talla/color/marca."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:ue,readOnly:!0,onChange:Be=>he(Be.target.value),placeholder:"XS/S/M/L/XL/10/12"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:te,readOnly:!0,onChange:Be=>se(Be.target.value),placeholder:"Negro, Azul, Rojo"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:ne,readOnly:!0,onChange:Be=>ye(Be.target.value),placeholder:"Masculino, Femenino, Otro"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Marca / Origen (opcional)"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:F,onChange:Be=>L(Be.target.value),placeholder:"Shein, Usado, Otro"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo del cliente (opcional)"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: LOTE-SHEIN-SEP-01",value:W,onChange:Be=>{const et=Be.target.value;Gh.test(et)&&q(et)},title:"Solo letras, nmeros, punto, guion y guion_bajo (mx 32)"}),!Gh.test(W)&&W.length>0&&o.jsx("div",{className:"text-xs text-red-600 mt-1",children:"Formato invlido"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:T,onChange:Be=>P(Be.target.value),maxLength:500,placeholder:"Ej: Camisita veranera, tela delgada, tirantes"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[T.length,"/500"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Total factura (auto)"}),o.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:Hn(N),readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Total esperado (auto)"}),o.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:Hn(D),readOnly:!0})]}),o.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Yt(!1),children:"Cancelar"}),o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar lote"})]})]})]})]}),document.body),a&&o.jsx("p",{className:"mt-2 text-sm",children:a})]})}const Z$=["Camisa","Blusa","Vestido","Jean","Pantaln","Short","Falda","Conjunto","Abrigo","Suter","Accesorio"],eW=["Negro","Blanco","Azul","Rojo","Verde","Gris","Beige","Rosa","Amarillo","Marrn","Morado","Naranja"],tW=["XS","S","M","L","XL","2XL"],rW=["2","4","6","8","10","12","14"],nW=["26","28","30","32","34","36","38"],sW=["Shein","Usado","Otro"],iW=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function bg(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function aW(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function oW(t){const e="ROP",r=bg(t.subcat).slice(0,3)||"GEN",n=aW(t.gender),s=bg(t.color).slice(0,3)||"COL",i=bg(t.size)||"TLL",a=bg(t.brand).slice(0,4)||"BRD";return`${e}-${r}-${n}-${s}-${i}-${a}`}const AW=/^[A-Za-z0-9._-]{0,32}$/;function lW(){const[t,e]=U.useState(""),[r,n]=U.useState("Camisa"),[s,i]=U.useState(""),[a,A]=U.useState(""),[l,c]=U.useState("Shein"),[u,h]=U.useState(""),[m,p]=U.useState(""),[b,B]=U.useState(""),[E,y]=U.useState(""),[w,S]=U.useState(""),[M,R]=U.useState("0"),[O,I]=U.useState(""),[N,j]=U.useState(""),D=U.useMemo(()=>{const q=Number(M||0),H=Number(w||0);return Math.floor(q*H*100)/100},[M,w]),[_,T]=U.useState([]),[P,ee]=U.useState(!0),[Ae,ue]=U.useState(""),{refreshKey:he,refresh:te}=Jc(),[se,ne]=U.useState(!1),ye=U.useMemo(()=>r.toLowerCase()==="jean"?nW:u==="NINO"||u==="NINA"?rW:tW,[r,u]);U.useEffect(()=>{B(oW({subcat:r,gender:u,color:a,size:s,brand:l}))},[r,u,a,s,l]),U.useEffect(()=>{(async()=>{ee(!0);const q=Wt(at(je,"products_clothes"),Xs("createdAt","desc")),H=await Pt(q),re=[];H.forEach($=>{const de=$.data();re.push({id:$.id,name:de.name??"(sin nombre)",category:de.category??"",measurement:de.measurement??"unidad",sku:de.sku??"",size:de.size||"",color:de.color||"",brand:de.brand||"",gender:de.gender||"",clientCode:de.clientCode||"",notes:de.notes||"",createdAt:de.createdAt??Lt.now()})}),T(re),ee(!1)})()},[he]);const F=()=>{e(""),n("Camisa"),i(""),A(""),c("Shein"),h(""),p(""),y(""),S(""),R("0"),I(""),j("")},L=async q=>{if(q.preventDefault(),ue(""),!t.trim()){ue("Ingresa el nombre del producto.");return}if(m&&!AW.test(m)){ue("Cdigo del cliente invlido");return}const H=Number(M||0),re=Number(w||0);if(H<0){ue("La cantidad de piezas debe ser 0 o mayor.");return}if(re<0){ue("El precio de venta no puede ser negativo.");return}try{const $=await Bn(at(je,"products_clothes"),{name:t.trim(),category:r,measurement:"unidad",sku:b,size:s||"",color:a||"",brand:l||"",gender:u||"",clientCode:m||"",notes:E||"",createdAt:Lt.now(),price:re||0});if(T(de=>[{id:$.id,name:t.trim(),category:r,measurement:"unidad",sku:b,size:s||"",color:a||"",brand:l||"",gender:u||"",clientCode:m||"",notes:E||"",createdAt:Lt.now()},...de]),H>0){const de=new Date().toISOString().slice(0,10),pe=O||de;await Bn(at(je,"inventory_clothes_batches"),{productId:$.id,productName:t.trim(),category:r,unit:"unidad",quantity:H,remaining:H,purchasePrice:0,salePrice:re||0,invoiceTotal:0,expectedTotal:D||0,date:pe,createdAt:Lt.now(),status:"PENDIENTE",notes:N||"",sku:b||"",size:s||"",color:a||"",gender:u||"",brand:l||"",clientCode:m||""})}ue(H>0?" Producto creado y lote de inventario registrado":" Producto de ropa creado"),F()}catch($){console.error($),ue(" Error al crear producto")}},W=async q=>{confirm(`Eliminar el producto "${q.name}"?`)&&(await os(Qt(je,"products_clothes",q.id)),T(re=>re.filter($=>$.id!==q.id)))};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Productos de Ropa"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(nh,{onClick:te,loading:P}),o.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{ne(!0)},children:[o.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]})]}),se&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[o.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo producto de ropa"}),o.jsxs("form",{onSubmit:L,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded",value:t,onChange:q=>e(q.target.value),placeholder:"Ej: Blusa floral"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Subcategora"}),o.jsx("select",{className:"w-full border p-2 rounded",value:r,onChange:q=>n(q.target.value),children:Z$.map(q=>o.jsx("option",{value:q,children:q},q))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Gnero"}),o.jsx("select",{className:"w-full border p-2 rounded",value:u,onChange:q=>h(q.target.value),children:iW.map(q=>o.jsx("option",{value:q,children:q||""},q))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:s,onChange:q=>i(q.target.value),children:[o.jsx("option",{value:"",children:""}),ye.map(q=>o.jsx("option",{value:q,children:q},q))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:q=>A(q.target.value),children:[o.jsx("option",{value:"",children:""}),eW.map(q=>o.jsx("option",{value:q,children:q},q))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Marca"}),o.jsx("select",{className:"w-full border p-2 rounded",value:l,onChange:q=>c(q.target.value),children:sW.map(q=>o.jsx("option",{value:q,children:q},q))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:b,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo cliente"}),o.jsx("input",{className:"w-full border p-2 rounded",value:m,onChange:q=>p(q.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (pza)"}),o.jsx("input",{className:"w-full border p-2 rounded",type:"number",step:"0.01",min:0,value:w,onChange:q=>S(q.target.value),placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad de piezas (crea lote si > 0)"}),o.jsx("input",{className:"w-full border p-2 rounded",type:"number",min:0,value:M,onChange:q=>R(q.target.value),placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de lote"}),o.jsx("input",{className:"w-full border p-2 rounded",type:"date",value:O,onChange:q=>I(q.target.value)})]}),o.jsxs("div",{className:"md:col-span-2 flex items-center justify-between border-t pt-3 mt-2 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Medicin:"})," unidad"]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total esperado (auto): "}),isNaN(D)?"":D.toFixed(2)]})]}),o.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2 mt-2",children:[o.jsx("button",{type:"button",onClick:F,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Limpiar"}),o.jsx("button",{type:"button",onClick:()=>ne(!1),className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Guardar"})]})]})]})}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Subcat."}),o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"SKU"}),o.jsx("th",{className:"p-2 border",children:"Talla"}),o.jsx("th",{className:"p-2 border",children:"Color"}),o.jsx("th",{className:"p-2 border",children:"Marca"}),o.jsx("th",{className:"p-2 border",children:"Gnero"}),o.jsx("th",{className:"p-2 border",children:"Cdigo Cliente"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:P?o.jsx("tr",{children:o.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Cargando"})}):_.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Sin productos"})}):_.map(q=>{var H;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:(H=q.createdAt)!=null&&H.toDate?q.createdAt.toDate().toISOString().slice(0,10):""}),o.jsx("td",{className:"p-2 border",children:q.category}),o.jsx("td",{className:"p-2 border",children:q.name}),o.jsx("td",{className:"p-2 border",children:q.sku}),o.jsx("td",{className:"p-2 border",children:q.size||""}),o.jsx("td",{className:"p-2 border",children:q.color||""}),o.jsx("td",{className:"p-2 border",children:q.brand||""}),o.jsx("td",{className:"p-2 border",children:q.gender||""}),o.jsx("td",{className:"p-2 border",children:q.clientCode||""}),o.jsx("td",{className:"p-2 border",children:q.notes||""}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>W(q),children:"Borrar"})})]},q.id)})})]})}),Ae&&o.jsx("p",{className:"mt-2 text-sm",children:Ae})]})}async function cW(t){const{productId:e,quantity:r,saleDate:n,saleId:s}=t,i=Math.max(0,Math.floor(Number(r||0)));if(!e||i<=0)throw new Error("Parmetros invlidos para allocateSaleFIFOClothes");const a=Wt(at(je,"inventory_clothes_batches"),rr("productId","==",e)),c=(await Pt(a)).docs.map(h=>({id:h.id,data:h.data()})).sort((h,m)=>{var y,w;const p=String(h.data.date||""),b=String(m.data.date||"");if(p!==b)return p<b?-1:1;const B=((y=h.data.createdAt)==null?void 0:y.seconds)??0,E=((w=m.data.createdAt)==null?void 0:w.seconds)??0;return B-E}).map(h=>Qt(je,"inventory_clothes_batches",h.id)),u=[];return await Al(je,async h=>{const m=await Promise.all(c.map(b=>h.get(b)));let p=i;for(let b=0;b<c.length&&p>0;b++){const B=c[b],E=m[b];if(!E.exists())continue;const y=E.data(),w=Math.max(0,Math.floor(Number(y.quantity||0))),S=Number.isFinite(Number(y.remaining))?Math.max(0,Math.floor(Number(y.remaining||0))):w;if(S<=0)continue;const M=Math.min(S,p),R=Math.max(0,S-M);h.update(B,{remaining:R}),u.push({batchId:B.id,qty:M,batchDate:String(y.date||""),productName:String(y.productName||"")}),p-=M}if(p>0)throw new Error(`Inventario insuficiente. Faltan ${p} unidades.`);if(s)for(const b of u)await Bn(at(je,"batch_clothes_allocations"),{saleId:s,saleDate:n,productId:e,productName:b.productName??"",batchId:b.batchId,batchDate:b.batchDate??"",quantity:b.qty,createdAt:Lt.now()})}),{allocations:u}}async function ux(t){const e=Qt(je,"sales_clothes",t),r=await zo(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),s=[];if(Array.isArray(n.items)&&n.items.length>0){const A={};if(n.allocationsByItem&&typeof n.allocationsByItem=="object")for(const l of Object.keys(n.allocationsByItem)){const c=n.allocationsByItem[l],u=String((c==null?void 0:c.productId)||l||"");if(!u)continue;const h=Array.isArray(c==null?void 0:c.allocations)?c.allocations:[];A[u]=h.map(m=>({batchId:String(m.batchId),qty:Math.max(0,Math.floor(Number(m.qty||m.quantity||0)))}))}if(Array.isArray(n.allocationsByItem))for(const l of n.allocationsByItem){const c=String((l==null?void 0:l.productId)||"");if(!c)continue;const u=Array.isArray(l==null?void 0:l.allocations)?l.allocations:[];A[c]=u.map(h=>({batchId:String(h.batchId),qty:Math.max(0,Math.floor(Number(h.qty||h.quantity||0)))}))}for(const l of n.items){const c=String((l==null?void 0:l.productId)||"");if(!c)continue;const u=Math.max(0,Math.floor(Number((l==null?void 0:l.qty)||(l==null?void 0:l.quantity)||0))),h=Array.isArray(l==null?void 0:l.allocations)?l.allocations.map(m=>({batchId:String(m.batchId),qty:Math.max(0,Math.floor(Number(m.qty||m.quantity||0)))})):A[c]||[];s.push({productId:c,productName:String((l==null?void 0:l.productName)||""),qty:u,allocations:h.length?h:void 0})}}else{const A=n.item||{},l=String(A.productId||n.productId||""),c=Math.max(0,Math.floor(Number(A.qty??n.quantity??0))),u=Array.isArray(n.allocations)?n.allocations.map(h=>({batchId:String(h.batchId),qty:Math.max(0,Math.floor(Number(h.qty||h.quantity||0)))})):[];l&&c>0&&s.push({productId:l,productName:String(A.productName||n.productName||""),qty:c,allocations:u.length?u:void 0})}return s.length===0?(await Al(je,async A=>{A.delete(e)}),{restored:0}):s.every(A=>Array.isArray(A.allocations)&&A.allocations.length>0)?(await Al(je,async l=>{const c=[];for(const h of s)for(const m of h.allocations||[])c.push({ref:Qt(je,"inventory_clothes_batches",m.batchId),addBack:Math.max(0,Math.floor(Number(m.qty||0)))});const u=await Promise.all(c.map(h=>l.get(h.ref)));for(let h=0;h<c.length;h++){const m=u[h];if(!m.exists())continue;const p=m.data(),b=Math.max(0,Math.floor(Number(p.remaining||0)));l.update(c[h].ref,{remaining:b+c[h].addBack})}l.delete(e)}),{restored:s.reduce((l,c)=>l+(c.allocations||[]).reduce((u,h)=>u+h.qty,0),0)}):(await Al(je,async A=>{const l={};for(const p of s){if(!p.productId||p.qty<=0)continue;const b=Wt(at(je,"inventory_clothes_batches"),rr("productId","==",p.productId)),E=(await Pt(b)).docs.map(y=>{const w=y.data(),S=Math.max(0,Math.floor(Number(w.quantity||0))),M=Number.isFinite(Number(w.remaining))?Math.max(0,Math.floor(Number(w.remaining||0))):S;return{id:y.id,date:String(w.date||""),quantity:S,remaining:M}}).sort((y,w)=>y.date.localeCompare(w.date));l[p.productId]=E}const c=[];for(const p of s){if(!p.productId||p.qty<=0)continue;if(Array.isArray(p.allocations)&&p.allocations.length>0){for(const E of p.allocations)c.push({id:E.batchId,addBack:Math.max(0,Math.floor(Number(E.qty||0)))});continue}const b=l[p.productId]||[];let B=p.qty;for(const E of b){if(B<=0)break;const y=Math.max(0,E.quantity-E.remaining);if(y<=0)continue;const w=Math.min(y,B);c.push({id:E.id,addBack:w}),B-=w}for(const E of b){if(B<=0)break;const y=Math.min(B,p.qty);c.push({id:E.id,addBack:y}),B-=y}}const u={};for(const p of c)u[p.id]=(u[p.id]||0)+Math.max(0,Math.floor(Number(p.addBack||0)));const h=Object.keys(u).map(p=>Qt(je,"inventory_clothes_batches",p)),m=await Promise.all(h.map(p=>A.get(p)));for(let p=0;p<h.length;p++){const b=m[p];if(!b.exists())continue;const B=b.data(),E=Math.max(0,Math.floor(Number(B.remaining||0))),y=Math.max(0,Math.floor(Number(u[h[p].id]||0)));A.update(h[p],{remaining:E+y})}A.delete(e)}),{restored:s.reduce((A,l)=>A+l.qty,0)})}const P_=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],vo=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Bg(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function Q_(t){const e=Wt(at(je,"ar_movements"),rr("ref.saleId","==",t)),r=await Pt(e);await Promise.all(r.docs.map(n=>os(Qt(je,"ar_movements",n.id))))}function uW(){const[t,e]=U.useState(!1),[r,n]=U.useState(!1),[s,i]=U.useState(null),[a,A]=U.useState([]),l=async Qe=>{e(!0),n(!0),i(Qe),A([]);try{const Ft=(await Pt(Wt(at(je,"sales_clothes"),rr("__name__","==",Qe)))).docs[0],ft=Ft==null?void 0:Ft.data(),Ut=(Array.isArray(ft==null?void 0:ft.items)?ft.items:ft!=null&&ft.item?[ft.item]:[]).map(it=>({productName:String(it.productName||""),qty:Number(it.qty||0),unitPrice:Number(it.unitPrice||0),discount:Number(it.discount||0),total:Number(it.total||0)}));A(Ut)}catch(Me){console.error(Me)}finally{n(!1)}},[c,u]=U.useState(""),[h,m]=U.useState("+505 "),[p,b]=U.useState(""),[B,E]=U.useState(""),[y,w]=U.useState("ACTIVO"),[S,M]=U.useState(0),[R,O]=U.useState([]),[I,N]=U.useState(!0),[j,D]=U.useState(""),[_,T]=U.useState(null),[P,ee]=U.useState(""),[Ae,ue]=U.useState("+505 "),[he,te]=U.useState(""),[se,ne]=U.useState(""),[ye,F]=U.useState("ACTIVO"),[L,W]=U.useState(0),[q,H]=U.useState(!1),[re,$]=U.useState(null),[de,pe]=U.useState(!1),[Ne,Te]=U.useState([]),[Fe,oe]=U.useState({saldoActual:0,totalAbonado:0,totalCargos:0}),[ce,J]=U.useState(!1),[Re,Le]=U.useState(0),[Ue,Pe]=U.useState(new Date().toISOString().slice(0,10)),[Ge,qe]=U.useState(""),[tt,Ze]=U.useState(!1),[vt,ht]=U.useState(null),[Ct,Ht]=U.useState(""),[Nt,ie]=U.useState(0),[ve,We]=U.useState(""),[ot,yt]=U.useState(!1);U.useEffect(()=>{(async()=>{const Qe=Wt(at(je,"customers_clothes"),Xs("createdAt","desc")),Me=await Pt(Qe),Ft=[];Me.forEach(ft=>{const ct=ft.data();Ft.push({id:ft.id,name:ct.name??"",phone:ct.phone??"+505 ",place:ct.place??"",notes:ct.notes??"",status:ct.status??"ACTIVO",creditLimit:Number(ct.creditLimit??0),createdAt:ct.createdAt??Lt.now(),balance:0})});for(const ft of Ft)try{const ct=Wt(at(je,"ar_movements"),rr("customerId","==",ft.id)),Ut=await Pt(ct);let it=0;Ut.forEach(_t=>it+=Number(_t.data().amount||0)),ft.balance=it}catch{ft.balance=0}O(Ft),N(!1)})()},[]);const Et=()=>{u(""),m("+505 "),b(""),E(""),w("ACTIVO"),M(0)},rt=async Qe=>{if(Qe.preventDefault(),D(""),!c.trim()){D("Ingresa el nombre.");return}const Me=Bg(h);if(Me.length<6){D("Telfono incompleto.");return}try{const Ft=await Bn(at(je,"customers_clothes"),{name:c.trim(),phone:Me,place:p||"",notes:B||"",status:y,creditLimit:Number(S||0),createdAt:Lt.now()});O(ft=>[{id:Ft.id,name:c.trim(),phone:Me,place:p||"",notes:B||"",status:y,creditLimit:Number(S||0),createdAt:Lt.now(),balance:0},...ft]),Et(),yt(!1),D(" Cliente creado")}catch(Ft){console.error(Ft),D(" Error al crear cliente")}},ur=Qe=>{T(Qe.id),ee(Qe.name),ue(Qe.phone||"+505 "),te(Qe.place||""),ne(Qe.notes||""),F(Qe.status||"ACTIVO"),W(Number(Qe.creditLimit||0))},St=()=>{T(null),ee(""),ue("+505 "),te(""),ne(""),F("ACTIVO"),W(0)},Pr=async()=>{if(!_)return;const Qe=Bg(Ae);if(!P.trim()){D("Ingresa el nombre.");return}try{await nn(Qt(je,"customers_clothes",_),{name:P.trim(),phone:Qe,place:he||"",notes:se||"",status:ye,creditLimit:Number(L||0)}),O(Me=>Me.map(Ft=>Ft.id===_?{...Ft,name:P.trim(),phone:Qe,place:he||"",notes:se||"",status:ye,creditLimit:Number(L||0)}:Ft)),St(),D(" Cliente actualizado")}catch(Me){console.error(Me),D(" Error al actualizar")}},sr=async Qe=>{if(confirm(`Eliminar al cliente "${Qe.name}"?
Se devolvern al inventario todas las prendas de sus compras y se borrarn sus movimientos.`))try{N(!0);const Ft=Wt(at(je,"sales_clothes"),rr("customerId","==",Qe.id)),ft=await Pt(Ft);for(const it of ft.docs){const _t=it.id;try{await ux(_t)}catch(Be){console.warn("restoreSaleAndDeleteClothes error",Be);try{await os(Qt(je,"sales_clothes",_t))}catch{}}await Q_(_t)}const ct=Wt(at(je,"ar_movements"),rr("customerId","==",Qe.id)),Ut=await Pt(ct);await Promise.all(Ut.docs.map(it=>os(Qt(je,"ar_movements",it.id)))),await os(Qt(je,"customers_clothes",Qe.id)),O(it=>it.filter(_t=>_t.id!==Qe.id)),D(" Cliente eliminado y prendas devueltas al inventario")}catch(Ft){console.error(Ft),D(" No se pudo eliminar el cliente.")}finally{N(!1)}},fr=async Qe=>{$(Qe),Te([]),oe({saldoActual:0,totalAbonado:0,totalCargos:0}),H(!0),J(!1),Le(0),Pe(new Date().toISOString().slice(0,10)),qe(""),ht(null),pe(!0);try{const Me=Wt(at(je,"ar_movements"),rr("customerId","==",Qe.id)),Ft=await Pt(Me),ft=[];Ft.forEach(ct=>{var it,_t;const Ut=ct.data();ft.push({id:ct.id,date:Ut.date??((_t=(it=Ut.createdAt)==null?void 0:it.toDate)!=null&&_t.call(it)?Ut.createdAt.toDate().toISOString().slice(0,10):""),type:Ut.type??"CARGO",amount:Number(Ut.amount||0),ref:Ut.ref||{},comment:Ut.comment||"",createdAt:Ut.createdAt})}),ft.sort((ct,Ut)=>{var Be,et;if(ct.date!==Ut.date)return ct.date.localeCompare(Ut.date);const it=((Be=ct.createdAt)==null?void 0:Be.seconds)||0,_t=((et=Ut.createdAt)==null?void 0:et.seconds)||0;return it-_t}),Te(ft),fn(ft)}catch(Me){console.error(Me),D(" No se pudo cargar el estado de cuenta")}finally{pe(!1)}},fn=Qe=>{const Me=Qe.reduce((ct,Ut)=>ct+(Number(Ut.amount)||0),0),Ft=Qe.filter(ct=>Number(ct.amount)<0).reduce((ct,Ut)=>ct+Math.abs(Number(Ut.amount)||0),0),ft=Qe.filter(ct=>Number(ct.amount)>0).reduce((ct,Ut)=>ct+Number(Ut.amount)||0,0);oe({saldoActual:Me,totalAbonado:Ft,totalCargos:ft})},vr=async()=>{if(!re)return;D("");const Qe=Number(Re||0);if(!(Qe>0)){D("Ingresa un monto de abono mayor a 0.");return}const Me=parseFloat(Qe.toFixed(2));if(!Ue){D("Selecciona la fecha del abono.");return}try{Ze(!0);const Ft={customerId:re.id,type:"ABONO",amount:-Me,date:Ue,comment:Ge||"",createdAt:Lt.now()},ct={id:(await Bn(at(je,"ar_movements"),Ft)).id,date:Ue,type:"ABONO",amount:-Me,comment:Ge||"",createdAt:Lt.now()},Ut=[...Ne,ct].sort((it,_t)=>{var nt,Ot;if(it.date!==_t.date)return it.date.localeCompare(_t.date);const Be=((nt=it.createdAt)==null?void 0:nt.seconds)||0,et=((Ot=_t.createdAt)==null?void 0:Ot.seconds)||0;return Be-et});Te(Ut),fn(Ut),O(it=>it.map(_t=>_t.id===re.id?{..._t,balance:(_t.balance||0)-Me}:_t)),$(it=>it&&{...it,balance:(it.balance||0)-Me}),Le(0),qe(""),Pe(new Date().toISOString().slice(0,10)),J(!1),D(" Abono registrado")}catch(Ft){console.error(Ft),D(" Error al registrar el abono")}finally{Ze(!1)}},kt=Qe=>{ht(Qe.id),Ht(Qe.date||new Date().toISOString().slice(0,10)),ie(Math.abs(Number(Qe.amount||0))),We(Qe.comment||"")},Yt=()=>{ht(null),Ht(""),ie(0),We("")},us=async()=>{if(!vt)return;const Qe=Ne.findIndex(ct=>ct.id===vt);if(Qe===-1)return;const Me=Ne[Qe],Ft=Number(Nt||0);if(!(Ft>0)){D("El monto debe ser mayor a 0.");return}const ft=Me.type==="ABONO"?-parseFloat(Ft.toFixed(2)):+parseFloat(Ft.toFixed(2));try{await nn(Qt(je,"ar_movements",vt),{date:Ct,amount:ft,comment:ve||""});const ct=[...Ne];ct[Qe]={...Me,date:Ct,amount:ft,comment:ve||""},ct.sort((it,_t)=>{var nt,Ot;if(it.date!==_t.date)return it.date.localeCompare(_t.date);const Be=((nt=it.createdAt)==null?void 0:nt.seconds)||0,et=((Ot=_t.createdAt)==null?void 0:Ot.seconds)||0;return Be-et}),Te(ct),fn(ct);const Ut=ct.reduce((it,_t)=>it+(Number(_t.amount)||0),0);O(it=>it.map(_t=>_t.id===(re==null?void 0:re.id)?{..._t,balance:Ut}:_t)),$(it=>it&&{...it,balance:Ut}),Yt(),D(" Movimiento actualizado")}catch(ct){console.error(ct),D(" Error al actualizar movimiento")}},$r=async Qe=>{var Ft,ft;if(confirm(`Eliminar este movimiento (${Qe.type==="ABONO"?"Abono":"Compra"}) del ${Qe.date}?${Qe.type==="CARGO"&&((Ft=Qe.ref)!=null&&Ft.saleId)?`
Se devolvern al inventario las prendas de esa venta.`:""}`))try{if(N(!0),Qe.type==="CARGO"&&((ft=Qe.ref)!=null&&ft.saleId)){try{await ux(Qe.ref.saleId)}catch(it){console.warn("restoreSaleAndDeleteClothes error",it),N(!1),D(" No se pudo devolver inventario de la venta.");return}await Q_(Qe.ref.saleId)}else await os(Qt(je,"ar_movements",Qe.id));const ct=Ne.filter(it=>{var _t,Be;return Qe.type==="CARGO"&&((_t=Qe.ref)!=null&&_t.saleId)?((Be=it.ref)==null?void 0:Be.saleId)!==Qe.ref.saleId:it.id!==Qe.id});Te(ct),fn(ct);const Ut=ct.reduce((it,_t)=>it+(Number(_t.amount)||0),0);O(it=>it.map(_t=>_t.id===(re==null?void 0:re.id)?{..._t,balance:Ut}:_t)),$(it=>it&&{...it,balance:Ut}),D(" Movimiento eliminado")}catch(ct){console.error(ct),D(" Error al eliminar movimiento")}finally{N(!1)}},mr=U.useMemo(()=>[...R].sort((Qe,Me)=>{var Ft,ft;return Qe.status!==Me.status?Qe.status==="BLOQUEADO"?1:-1:(((Ft=Me.createdAt)==null?void 0:Ft.seconds)||0)-(((ft=Qe.createdAt)==null?void 0:ft.seconds)||0)}),[R]);return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Ropa)"}),o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>yt(!0),type:"button",children:"Crear Cliente"})]}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Telfono"}),o.jsx("th",{className:"p-2 border",children:"Lugar"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Lmite"}),o.jsx("th",{className:"p-2 border",children:"Saldo"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:I?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):mr.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin clientes"})}):mr.map(Qe=>{var Ft;const Me=_===Qe.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:(Ft=Qe.createdAt)!=null&&Ft.toDate?Qe.createdAt.toDate().toISOString().slice(0,10):""}),o.jsx("td",{className:"p-2 border",children:Me?o.jsx("input",{className:"w-full border p-1 rounded",value:P,onChange:ft=>ee(ft.target.value)}):Qe.name}),o.jsx("td",{className:"p-2 border",children:Me?o.jsx("input",{className:"w-full border p-1 rounded",value:Ae,onChange:ft=>ue(Bg(ft.target.value))}):Qe.phone}),o.jsx("td",{className:"p-2 border",children:Me?o.jsxs("select",{className:"w-full border p-1 rounded",value:he,onChange:ft=>te(ft.target.value),children:[o.jsx("option",{value:"",children:""}),P_.map(ft=>o.jsx("option",{value:ft,children:ft},ft))]}):Qe.place||""}),o.jsx("td",{className:"p-2 border",children:Me?o.jsxs("select",{className:"w-full border p-1 rounded",value:ye,onChange:ft=>F(ft.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Qe.status==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:Qe.status})}),o.jsx("td",{className:"p-2 border",children:Me?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(L)?"":L,onChange:ft=>W(Math.max(0,Number(ft.target.value||0)))}):vo(Qe.creditLimit||0)}),o.jsx("td",{className:"p-2 border font-semibold",children:vo(Qe.balance||0)}),o.jsx("td",{className:"p-2 border",children:Me?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:se,onChange:ft=>ne(ft.target.value),maxLength:500}):o.jsx("span",{title:Qe.notes||"",children:(Qe.notes||"").length>40?(Qe.notes||"").slice(0,40)+"":Qe.notes||""})}),o.jsx("td",{className:"p-2 border",children:o.jsx("div",{className:"flex gap-2 justify-center",children:Me?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Pr,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:St,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>ur(Qe),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>sr(Qe),children:"Borrar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>fr(Qe),title:"Ver compras y abonos",children:"Estado de cuenta"})]})})})]},Qe.id)})})]})}),j&&o.jsx("p",{className:"mt-2 text-sm",children:j}),ot&&_d.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>yt(!1)}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>yt(!1),type:"button",children:"Cerrar"})]}),o.jsxs("form",{onSubmit:rt,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:c,onChange:Qe=>u(Qe.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),o.jsx("input",{className:"w-full border p-2 rounded",value:h,onChange:Qe=>m(Bg(Qe.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:p,onChange:Qe=>b(Qe.target.value),children:[o.jsx("option",{value:"",children:""}),P_.map(Qe=>o.jsx("option",{value:Qe,children:Qe},Qe))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:y,onChange:Qe=>w(Qe.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:S===0?"":S,onChange:Qe=>M(Math.max(0,Number(Qe.target.value||0))),placeholder:"Ej: 2000"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:B,onChange:Qe=>E(Qe.target.value),maxLength:500,placeholder:"Notas del cliente"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[B.length,"/500"]})]}),o.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>yt(!1),children:"Cancelar"}),o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),q&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(re==null?void 0:re.name)||""]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{Le(0),Pe(new Date().toISOString().slice(0,10)),qe(""),J(!0)},children:"Abonar"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>H(!1),children:"Cerrar"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-xl font-semibold",children:vo(Fe.saldoActual)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),o.jsx("div",{className:"text-xl font-semibold",children:vo(Fe.totalAbonado)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),o.jsx("div",{className:"text-xl font-semibold",children:vo(Fe.saldoActual)})]})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Referencia"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:de?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):Ne.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):Ne.map(Qe=>{var Ft,ft;const Me=vt===Qe.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:Me?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:Ct,onChange:ct=>Ht(ct.target.value)}):Qe.date||""}),o.jsx("td",{className:"p-2 border",children:Qe.amount>=0?(Ft=Qe.ref)!=null&&Ft.saleId?o.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",title:"Ver piezas de esta compra",onClick:()=>l(Qe.ref.saleId),children:"COMPRA (CARGO)"}):o.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (CARGO)"}):o.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),o.jsx("td",{className:"p-2 border",children:(ft=Qe.ref)!=null&&ft.saleId?`Venta #${Qe.ref.saleId}`:""}),o.jsx("td",{className:"p-2 border",children:Me?o.jsx("input",{className:"w-full border p-1 rounded",value:ve,onChange:ct=>We(ct.target.value),placeholder:"Comentario"}):o.jsx("span",{title:Qe.comment||"",children:(Qe.comment||"").length>40?(Qe.comment||"").slice(0,40)+"":Qe.comment||""})}),o.jsx("td",{className:"p-2 border font-semibold",children:Me?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Nt)?"":Nt,onChange:ct=>{const Ut=Number(ct.target.value||0),it=Number.isFinite(Ut)?Math.max(0,parseFloat(Ut.toFixed(2))):0;ie(it)},placeholder:"0.00",title:Qe.type==="ABONO"?"Se guardar como negativo":"Se guardar como positivo"}):vo(Qe.amount)}),o.jsx("td",{className:"p-2 border",children:Me?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:us,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Yt,children:"Cancelar"})]}):o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>kt(Qe),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>$r(Qe),children:"Borrar"})]})})]},Qe.id)})})]})})]})}),ce&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(re==null?void 0:re.name)||""]}),o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:Ue,onChange:Qe=>Pe(Qe.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Monto del abono"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Re===0?"":Re,onChange:Qe=>{const Me=Number(Qe.target.value||0),Ft=Number.isFinite(Me)?Math.max(0,parseFloat(Me.toFixed(2))):0;Le(Ft)},placeholder:"0.00"}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se guarda con 2 decimales (se registrar como ABONO negativo)."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Ge,onChange:Qe=>qe(Qe.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[Ge.length,"/250"]})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>J(!1),disabled:tt,children:"Cancelar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:vr,disabled:tt,children:tt?"Guardando...":"Guardar abono"})]})]})}),t&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[65]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Piezas vendidas"," ",s?` #${s}`:""]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>e(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio"}),o.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),o.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):a.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):a.map((Qe,Me)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border text-left",children:Qe.productName}),o.jsx("td",{className:"p-2 border text-right",children:Qe.qty}),o.jsx("td",{className:"p-2 border text-right",children:vo(Qe.unitPrice)}),o.jsx("td",{className:"p-2 border text-right",children:vo(Qe.discount||0)}),o.jsx("td",{className:"p-2 border text-right",children:vo(Qe.total)})]},Me))})]})})]})})]})}const Du=t=>`C$ ${(Number(t)||0).toFixed(2)}`,dW=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"];async function hW(t){if(!t)return 0;const e=Wt(at(je,"inventory_clothes_batches"),rr("productId","==",t)),r=await Pt(e);let n="0000-00-00",s=-1,i=0;return r.forEach(a=>{const A=a.data(),l=String(A.date||"0000-00-00"),c=Number(A.salePrice||0),u=A.createdAt,h=((u==null?void 0:u.seconds)??0)*1e3+((u==null?void 0:u.nanoseconds)??0)/1e6;l>n?(n=l,s=h,i=c):l===n&&h>s&&(s=h,i=c)}),Number(i||0)}async function j_(t){if(!t)return 0;const e=Wt(at(je,"inventory_clothes_batches"),rr("productId","==",t)),r=await Pt(e);let n=0;return r.forEach(s=>n+=Number(s.data().remaining||0)),n}function L_(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}function fW(){const[t,e]=U.useState([]),[r,n]=U.useState([]),[s,i]=U.useState({}),[a,A]=U.useState("CONTADO"),[l,c]=U.useState(""),[u,h]=U.useState(""),[m,p]=U.useState(new Date().toISOString().slice(0,10)),[b,B]=U.useState(""),[E,y]=U.useState([]),w=U.useMemo(()=>E.reduce((oe,ce)=>oe+(ce.qty||0),0),[E]),S=U.useMemo(()=>{const oe=E.reduce((ce,J)=>{const Re=Math.max(0,(Number(J.unitPrice)||0)*(J.qty||0)-(Number(J.discount)||0));return ce+Re},0);return Math.floor(oe*100)/100},[E]),[M,R]=U.useState(0),[O,I]=U.useState(""),[N,j]=U.useState(!1),[D,_]=U.useState(!1),[T,P]=U.useState(""),[ee,Ae]=U.useState("+505 "),[ue,he]=U.useState(""),[te,se]=U.useState(""),[ne,ye]=U.useState("ACTIVO"),[F,L]=U.useState(0),W=()=>{P(""),Ae("+505 "),he(""),se(""),ye("ACTIVO"),L(0)};U.useEffect(()=>{(async()=>{const oe=Wt(at(je,"customers_clothes"),Xs("createdAt","desc")),ce=await Pt(oe),J=[];ce.forEach(tt=>{const Ze=tt.data();J.push({id:tt.id,name:Ze.name??"",phone:Ze.phone??"+505 ",place:Ze.place??"",status:Ze.status??"ACTIVO",creditLimit:Number(Ze.creditLimit??0),balance:0})});for(const tt of J)try{const Ze=Wt(at(je,"ar_movements"),rr("customerId","==",tt.id)),vt=await Pt(Ze);let ht=0;vt.forEach(Ct=>ht+=Number(Ct.data().amount||0)),tt.balance=ht}catch{tt.balance=0}e(J);const Re=Wt(at(je,"products_clothes"),Xs("createdAt","desc")),Le=await Pt(Re),Ue=[];Le.forEach(tt=>{const Ze=tt.data();Ue.push({id:tt.id,name:Ze.name??"(sin nombre)",sku:Ze.sku??""})}),n(Ue);const Pe=Wt(at(je,"inventory_clothes_batches"),rr("remaining",">",0)),Ge=await Pt(Pe),qe={};Ge.forEach(tt=>{const Ze=tt.data(),vt=Ze.productId||"",ht=Number(Ze.remaining||0);vt&&(qe[vt]=(qe[vt]||0)+ht)}),i(qe)})()},[]);const q=U.useMemo(()=>t.find(oe=>oe.id===l),[t,l]),H=(q==null?void 0:q.balance)||0,re=a==="CREDITO"?H+Math.max(0,Number(S||0))-Math.max(0,Number(M||0)):0,$=async oe=>{if(!oe)return;if(E.some(Ue=>Ue.productId===oe)){B("");return}const ce=r.find(Ue=>Ue.id===oe);if(!ce){B("");return}let J=await hW(oe);J||(J=Number((ce==null?void 0:ce.price)||0));const Re=await j_(oe),Le={productId:oe,productName:ce.name||"",sku:ce.sku||"",unitPrice:Number(J)||0,available:Number(Re)||0,qty:0,discount:0};y(Ue=>[...Ue,Le]),B("")},de=(oe,ce)=>{y(J=>J.map(Re=>{if(Re.productId!==oe)return Re;if(ce==="")return{...Re,qty:0};const Le=Math.max(0,Math.floor(Number(ce)));return{...Re,qty:Le}}))},pe=(oe,ce)=>{y(J=>J.map(Re=>{if(Re.productId!==oe)return Re;if(ce==="")return{...Re,discount:0};const Le=Math.max(0,Math.floor(Number(ce)));return{...Re,discount:Le}}))},Ne=oe=>y(ce=>ce.filter(J=>J.productId!==oe)),Te=async()=>{if(!m)return"Selecciona la fecha.";if(E.length===0)return"Agrega al menos un producto.";const oe=E.filter(ce=>(ce.qty||0)>0);if(oe.length===0)return"Debes ingresar cantidades (> 0) en al menos un producto.";if(!(S>0))return"El total debe ser mayor a cero.";if(a==="CONTADO"){if(!u.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!l)return"Selecciona un cliente (crdito).";if(M<0)return"El pago inicial no puede ser negativo.";if(M>S)return"El pago inicial no puede superar el total.";if((q==null?void 0:q.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede facturar a crdito."}for(const ce of oe){const J=await j_(ce.productId);if(ce.qty>J)return`Inventario insuficiente para "${ce.productName}". Disponible: ${J} unidades.`;const Re=(Number(ce.unitPrice)||0)*(ce.qty||0),Le=Number(ce.discount)||0;if(!Number.isInteger(Le)||Le<0)return`El descuento en "${ce.productName}" debe ser entero y  0.`;if(Le>Re)return`El descuento en "${ce.productName}" no puede exceder C$ ${Re.toFixed(2)}.`}return null},Fe=async oe=>{oe.preventDefault(),I("");const ce=await Te();if(ce){I(" "+ce);return}try{j(!0);const J=E.filter(Pe=>(Pe.qty||0)>0).map(Pe=>{const Ge=(Number(Pe.unitPrice)||0)*(Pe.qty||0),qe=Math.max(0,Math.floor(Number(Pe.discount)||0)),tt=Math.max(0,Ge-qe);return{productId:Pe.productId,productName:Pe.productName,sku:Pe.sku||"",qty:Pe.qty,unitPrice:Number(Pe.unitPrice)||0,discount:qe,total:Math.floor(tt*100)/100}}),Re={type:a,date:m,createdAt:Lt.now(),itemsTotal:Number(S)||0,total:Number(S)||0,quantity:Number(w)||0,items:J};a==="CONTADO"?Re.customerName=u.trim():(Re.customerId=l,Re.downPayment=Number(M)||0);const Le=await Bn(at(je,"sales_clothes"),Re);if(a==="CREDITO"&&l){const Pe={customerId:l,date:m,createdAt:Lt.now(),ref:{saleId:Le.id}};await Bn(at(je,"ar_movements"),{...Pe,type:"CARGO",amount:Number(S)||0}),Number(M)>0&&await Bn(at(je,"ar_movements"),{...Pe,type:"ABONO",amount:-Number(M)})}const Ue={};for(const Pe of J)if(Pe.qty>0){const{allocations:Ge}=await cW({productId:Pe.productId,quantity:Pe.qty,saleDate:m,saleId:Le.id});Ue[Pe.productId]={productId:Pe.productId,allocations:Ge}}await nn(Qt(je,"sales_clothes",Le.id),{allocationsByItem:Ue}),A("CONTADO"),c(""),h(""),p(new Date().toISOString().slice(0,10)),y([]),R(0),a==="CREDITO"&&l&&e(Pe=>Pe.map(Ge=>Ge.id===l?{...Ge,balance:(Ge.balance||0)+(Number(S)||0)-(Number(M)||0)}:Ge)),I(" Venta registrada"),(async()=>{const Pe=Wt(at(je,"inventory_clothes_batches"),rr("remaining",">",0)),Ge=await Pt(Pe),qe={};Ge.forEach(tt=>{const Ze=tt.data(),vt=Ze.productId||"",ht=Number(Ze.remaining||0);vt&&(qe[vt]=(qe[vt]||0)+ht)}),i(qe)})()}catch(J){console.error(J),I(" Error al guardar la venta")}finally{j(!1)}};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas (Ropa)"}),o.jsxs("form",{onSubmit:Fe,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:oe=>A(oe.target.value),children:[o.jsx("option",{value:"CONTADO",children:"Contado"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),a==="CONTADO"?o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del cliente (contado)"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Cliente Mostrador",value:u,onChange:oe=>h(oe.target.value)})]}):o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("select",{className:"flex-1 border p-2 rounded",value:l,onChange:oe=>c(oe.target.value),children:[o.jsx("option",{value:"",children:"Selecciona un cliente"}),t.map(oe=>o.jsxs("option",{value:oe.status==="ACTIVO"?oe.id:"",disabled:oe.status==="BLOQUEADO",children:[oe.name," | ",oe.phone," | Saldo: ",Du(oe.balance||0)]},oe.id))]}),o.jsx("button",{type:"button",className:"px-20 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>_(!0),children:"Crear Cliente"})]}),o.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-lg font-semibold",children:Du(H)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:M===0?"":M,onChange:oe=>R(Math.max(0,Number(oe.target.value||0))),placeholder:"0.00"})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),o.jsx("div",{className:"text-lg font-semibold",children:Du(re)})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:m,onChange:oe=>p(oe.target.value)})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:b,onChange:async oe=>{const ce=oe.target.value;B(ce),await $(ce)},children:[o.jsx("option",{value:"",children:"Selecciona un producto"}),r.map(oe=>{const ce=E.some(Le=>Le.productId===oe.id),J=s[oe.id]||0,Re=ce||J<=0;return o.jsxs("option",{value:Re?"":oe.id,disabled:Re,children:[oe.name," ",oe.sku?` ${oe.sku}`:""," ",J>0?`(disp: ${J})`:"(sin stock)",ce?" (seleccionado)":""]},oe.id)})]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Productos sin existencias se muestran en gris y no se pueden seleccionar."})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsxs("div",{className:"border rounded overflow-hidden",children:[o.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 px-3 py-2 text-xs font-semibold border-b",children:[o.jsx("div",{className:"col-span-4",children:"Producto"}),o.jsx("div",{className:"col-span-2 text-right",children:"Precio"}),o.jsx("div",{className:"col-span-2 text-right",children:"Existencias"}),o.jsx("div",{className:"col-span-1 text-right",children:"Cantidad"}),o.jsx("div",{className:"col-span-1 text-right",children:"Descuento"}),o.jsx("div",{className:"col-span-1 text-right",children:"Monto"}),o.jsx("div",{className:"col-span-1 text-center",children:"Quitar"})]}),E.length===0?o.jsx("div",{className:"px-3 py-4 text-sm text-gray-500",children:"No hay productos agregados."}):E.map(oe=>{const ce=Math.max(0,(oe.available||0)-(oe.qty||0)),J=(Number(oe.unitPrice)||0)*(oe.qty||0),Re=Math.max(0,J-(Number(oe.discount)||0));return o.jsxs("div",{className:"grid grid-cols-12 items-center px-3 py-2 border-b text-sm gap-x-2",children:[o.jsx("div",{className:"col-span-4",children:o.jsxs("div",{className:"font-medium",children:[oe.productName,oe.sku?`  ${oe.sku}`:""]})}),o.jsx("div",{className:"col-span-2 text-right",children:Du(oe.unitPrice)}),o.jsx("div",{className:"col-span-2 text-right",children:ce}),o.jsx("div",{className:"col-span-1",children:o.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(oe.qty)||oe.qty===0?"":oe.qty,onChange:Le=>de(oe.productId,Le.target.value),inputMode:"numeric",placeholder:"0",title:"Cantidad de piezas"})}),o.jsx("div",{className:"col-span-1",children:o.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(oe.discount)||oe.discount===0?"":oe.discount,onChange:Le=>pe(oe.productId,Le.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento entero (C$)"})}),o.jsx("div",{className:"col-span-1 text-right",children:Du(Re)}),o.jsx("div",{className:"col-span-1 text-center",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 hover:bg-red-200",onClick:()=>Ne(oe.productId),title:"Quitar producto",children:""})})]},oe.productId)})]}),E.length>0&&o.jsxs("div",{className:"flex justify-end gap-6 mt-3 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Piezas totales: "}),o.jsx("span",{className:"font-semibold",children:w})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Total: "}),o.jsx("span",{className:"font-semibold",children:Du(S)})]})]})]}),o.jsx("div",{className:"md:col-span-2",children:o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",disabled:N,children:N?"Guardando...":"Registrar venta"})})]}),O&&o.jsx("p",{className:"mt-2 text-sm",children:O}),D&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-xl p-4",children:[o.jsx("h3",{className:"text-lg font-bold mb-3",children:"Nuevo cliente"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded",value:T,onChange:oe=>P(oe.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),o.jsx("input",{className:"w-full border p-2 rounded",value:ee,onChange:oe=>Ae(L_(oe.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:ue,onChange:oe=>he(oe.target.value),children:[o.jsx("option",{value:"",children:""}),dW.map(oe=>o.jsx("option",{value:oe,children:oe},oe))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:ne,onChange:oe=>ye(oe.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:F===0?"":F,onChange:oe=>L(Math.max(0,Number(oe.target.value||0))),placeholder:"Ej: 2000"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:te,onChange:oe=>se(oe.target.value),maxLength:500})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{W(),_(!1)},children:"Cancelar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:async()=>{if(I(""),!T.trim()){I("Ingresa el nombre del nuevo cliente.");return}const oe=L_(ee);try{const ce=await Bn(at(je,"customers_clothes"),{name:T.trim(),phone:oe,place:ue||"",notes:te||"",status:ne,creditLimit:Number(F||0),createdAt:Lt.now()}),J={id:ce.id,name:T.trim(),phone:oe,place:ue||"",status:ne,creditLimit:Number(F||0),balance:0};e(Re=>[J,...Re]),c(ce.id),W(),_(!1),I(" Cliente creado")}catch(ce){console.error(ce),I(" Error al crear cliente")}},children:"Guardar cliente"})]})]})}),N&&o.jsx("div",{className:"fixed inset-0 z-[70] bg-black/40 flex items-center justify-center",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border px-4 py-3 flex items-center gap-3",children:[o.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),o.jsx("span",{className:"font-medium",children:"Guardando venta"})]})})]})}const Un=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function t0(t){var r;const e=t==null?void 0:t.date;return e||((r=t==null?void 0:t.createdAt)!=null&&r.toDate?er(t.createdAt.toDate(),"yyyy-MM-dd"):"")}function pW(t,e){const r=t0(t);if(!r)return null;if(Array.isArray(t.items))return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??0),items:t.items.map(a=>({productId:String(a.productId||""),productName:String(a.productName||""),sku:a.sku||"",qty:Number(a.qty||0),unitPrice:Number(a.unitPrice??(Number(a.total||0)/Math.max(1,Number(a.qty||0))||0)),discount:Number(a.discount||0)})),customerId:t.customerId||void 0,customerName:t.customerName||void 0};const n=t.item||{},s=Number(t.quantity??n.qty??0),i=Number(t.total??t.itemsTotal??n.total??0);return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??i??0),items:[{productId:String(n.productId||t.productId||""),productName:String(n.productName||t.productName||""),sku:n.sku||t.sku||"",qty:s,unitPrice:Number(n.unitPrice??(i&&s?i/s:0)),discount:Number(n.discount||0)}],customerId:t.customerId||void 0,customerName:t.customerName||void 0}}function mW(t,e,r,n){const s={};for(const A of t)s[A.productId]||(s[A.productId]={productName:A.productName,lots:[]}),s[A.productId].lots.push({date:A.date,qtyLeft:Number(A.quantity||0),cost:Number(A.purchasePrice||0)});for(const A of Object.keys(s))s[A].lots.sort((l,c)=>l.date.localeCompare(c.date));const i=[...e].sort((A,l)=>A.date.localeCompare(l.date));let a=0;for(const A of i)for(const l of A.items||[]){const c=s[l.productId];if(!c)continue;let u=Number(l.qty||0);if(!(u<=0))for(const h of c.lots){if(u<=0)break;if(h.qtyLeft<=0)continue;const m=Math.min(h.qtyLeft,u);A.date>=r&&A.date<=n&&(a+=m*h.cost),h.qtyLeft-=m,u-=m}}return a}function gW(){const{refreshKey:t,refresh:e}=Jc(),[r,n]=U.useState(er(th(new Date),"yyyy-MM-dd")),[s,i]=U.useState(er(eh(new Date),"yyyy-MM-dd")),[a,A]=U.useState([]),[l,c]=U.useState([]),[u,h]=U.useState([]),[m,p]=U.useState([]),[b,B]=U.useState([]),[E,y]=U.useState([]),[w,S]=U.useState(!0),[M,R]=U.useState(""),[O,I]=U.useState(!1),[N,j]=U.useState(null),[D,_]=U.useState([]),[T,P]=U.useState(!1),[ee,Ae]=U.useState({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});U.useEffect(()=>{(async()=>{S(!0),R("");try{const F=await Pt(at(je,"sales_clothes")),L=[],W=[];F.forEach(oe=>{const ce=oe.data(),J=pW(ce,oe.id);J&&(J.date<=s&&L.push(J),J.date>=r&&J.date<=s&&W.push(J))}),c(L),A(W);const q=await Pt(at(je,"inventory_clothes_batches")),H=[];q.forEach(oe=>{const ce=oe.data(),J=t0(ce);!J||J>s||H.push({id:oe.id,productId:ce.productId,productName:ce.productName||"",date:J,quantity:Number(ce.quantity||0),remaining:Number(ce.remaining||0),purchasePrice:Number(ce.purchasePrice||0)})}),h(H);const re=await Pt(at(je,"expenses_clothes")),$=[];re.forEach(oe=>{const ce=oe.data(),J=t0(ce);J&&J>=r&&J<=s&&$.push({id:oe.id,date:J,category:ce.category||"",description:ce.description||"",amount:Number(ce.amount||0),status:ce.status||""})}),p($);const de=await Pt(at(je,"ar_movements")),pe=[],Ne={};de.forEach(oe=>{const ce=oe.data(),J=t0(ce);if(!J)return;const Re=ce.customerId,Le=Number(ce.amount||0);Re&&(Ne[Re]=(Ne[Re]||0)+Le),ce.type==="ABONO"&&J>=r&&J<=s&&pe.push({id:oe.id,customerId:Re,type:"ABONO",amount:Le,date:J})}),B(pe);const Te=await Pt(at(je,"customers_clothes")),Fe=[];Te.forEach(oe=>{const ce=oe.data();Fe.push({id:oe.id,name:ce.name||"",balance:Ne[oe.id]||0})}),y(Fe)}catch(F){console.error(F),R(" Error cargando datos del dashboard.")}finally{S(!1)}})()},[r,s,t]);const ue=U.useMemo(()=>{try{return mW(u,l,r,s)}catch(F){return console.error(F),0}},[u,l,r,s]),he=U.useMemo(()=>{const F=a.reduce((Ne,Te)=>Ne+(Te.total||0),0),L=m.reduce((Ne,Te)=>Ne+(Te.amount||0),0),W=F-ue,q=W-L,H=b.reduce((Ne,Te)=>Ne+Math.abs(Te.amount||0),0),re=E.filter(Ne=>(Ne.balance||0)>0),$=re.reduce((Ne,Te)=>Ne+(Te.balance||0),0);let de=0,pe=0;for(const Ne of a){const Te=(Ne.items||[]).reduce((Fe,oe)=>Fe+(Number(oe.qty)||0),0);Ne.type==="CONTADO"?de+=Te:pe+=Te}return{ventasTotales:F,costoMercaderia:ue,gastosPeriodo:L,gananciaAntes:W,gananciaDespues:q,abonosRecibidos:H,saldosPendientes:$,clientesConSaldo:re.length,prendasCash:de,prendasCredito:pe}},[a,m,b,E,ue]),te=U.useMemo(()=>{const F={};for(const L of a){if(L.type!=="CREDITO"||!L.customerId)continue;const W=(L.items||[]).reduce((q,H)=>q+(Number(H.qty)||0),0);F[L.customerId]=(F[L.customerId]||0)+W}return E.filter(L=>(L.balance||0)>0).map(L=>({customerId:L.id,name:L.name,prendasCredito:F[L.id]||0,saldo:L.balance||0})).sort((L,W)=>W.saldo-L.saldo)},[E,a]),se=U.useMemo(()=>{const F={};return E.forEach(L=>F[L.id]=L.name),F},[E]),ne=U.useMemo(()=>[...a].sort((F,L)=>L.date.localeCompare(F.date)).map(F=>{var q;const L=(F.items||[]).reduce((H,re)=>H+(Number(re.qty)||0),0);let W="Cash";return F.type==="CREDITO"&&F.customerId?W=se[F.customerId]||"":F.type==="CONTADO"&&(W=((q=F.customerName)==null?void 0:q.trim())||"Cash"),{id:F.id,date:F.date,type:F.type==="CREDITO"?"Crdito":"Cash",customer:W,piezas:L,total:Number(F.total||0)}}),[a,se]),ye=async F=>{I(!0),j({id:F.customerId,name:F.name}),_([]),P(!0),Ae({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});try{const L=[];let W=0,q=0,H=0;for(const pe of a)if(!(pe.type!=="CREDITO"||pe.customerId!==F.customerId))for(const Ne of pe.items||[]){const Te=Number(Ne.qty||0),Fe=Number(Ne.unitPrice||0),oe=Te*Fe,ce=Math.max(0,Number(Ne.discount||0)),J=Math.max(0,oe-ce);L.push({saleId:pe.id,date:pe.date,productName:Ne.productName,sku:Ne.sku||"",qty:Te,unitPrice:Fe,lineTotal:oe,discount:ce,lineFinal:J}),W+=oe,q+=ce,H+=J}let re=0;for(const pe of b)pe.customerId===F.customerId&&(re+=Math.abs(pe.amount||0));const $=E.find(pe=>pe.id===F.customerId),de=($==null?void 0:$.balance)||0;_(L),Ae({totalBruto:W,totalDescuento:q,totalFiado:H,saldoActual:de,abonadoPeriodo:re})}catch(L){console.error(L),R(" No se pudo cargar el detalle del cliente.")}finally{P(!1)}};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas (Ropa)"}),o.jsx(nh,{onClick:e,loading:w})]}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:F=>n(F.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:s,onChange:F=>i(F.target.value)})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),o.jsx("div",{className:"text-xl font-semibold",children:Un(he.ventasTotales)}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Cash + Crdito del periodo."})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),o.jsx("div",{className:"text-xl font-semibold",children:Un(he.costoMercaderia)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia antes de Gastos"}),o.jsx("div",{className:"text-xl font-semibold text-green-600",children:Un(he.gananciaAntes)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Gastos del Negocio"}),o.jsx("div",{className:"text-xl font-semibold",children:Un(he.gastosPeriodo)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia despus de Gastos"}),o.jsx("div",{className:"text-xl font-semibold text-green-600",children:Un(he.gananciaDespues)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),o.jsx("div",{className:"text-xl font-semibold",children:Un(he.abonosRecibidos)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),o.jsx("div",{className:"text-xl font-semibold",children:Un(he.saldosPendientes)}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),o.jsx("div",{className:"text-xl font-semibold",children:he.clientesConSaldo})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:he.prendasCash})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Crdito (vendidas)"}),o.jsx("div",{className:"text-xl font-semibold",children:he.prendasCredito})]})]}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado por cliente"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Cliente"}),o.jsx("th",{className:"p-2 border",children:"Prendas Crdito (periodo)"}),o.jsx("th",{className:"p-2 border",children:"Saldo actual"})]})}),o.jsx("tbody",{children:w?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Cargando"})}):te.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Sin clientes con saldo"})}):te.map(F=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:F.name}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>ye({customerId:F.customerId,name:F.name}),title:"Ver piezas fiadas del periodo",children:F.prendasCredito})}),o.jsx("td",{className:"p-2 border font-semibold",children:Un(F.saldo)})]},F.customerId))})]})}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Transacciones del periodo"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Cliente"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Piezas"}),o.jsx("th",{className:"p-2 border",children:"Monto"})]})}),o.jsx("tbody",{children:w?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):ne.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin transacciones en el rango seleccionado."})}):ne.map(F=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:F.date}),o.jsx("td",{className:"p-2 border",children:F.customer}),o.jsx("td",{className:"p-2 border",children:F.type}),o.jsx("td",{className:"p-2 border",children:F.piezas}),o.jsx("td",{className:"p-2 border",children:Un(F.total)})]},F.id))})]})}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Gastos del periodo"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Estado"})]})}),o.jsx("tbody",{children:w?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):m.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):m.sort((F,L)=>F.date.localeCompare(L.date)).map(F=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:F.date}),o.jsx("td",{className:"p-2 border",children:F.category||""}),o.jsx("td",{className:"p-2 border",children:F.description?o.jsx("span",{title:F.description,children:F.description.length>40?F.description.slice(0,40)+"":F.description}):""}),o.jsx("td",{className:"p-2 border",children:Un(F.amount)}),o.jsx("td",{className:"p-2 border",children:F.status||""})]},F.id))})]})}),M&&o.jsx("p",{className:"mt-2 text-sm",children:M}),O&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Detalle del cliente  ",(N==null?void 0:N.name)||""]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>I(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total Bruto (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:Un(ee.totalBruto)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Descuento (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:Un(ee.totalDescuento)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto Total Fiado (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:Un(ee.totalFiado)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-xl font-semibold",children:Un(ee.saldoActual)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Abonado (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:Un(ee.abonadoPeriodo)})]})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha compra"}),o.jsx("th",{className:"p-2 border",children:"Pieza"}),o.jsx("th",{className:"p-2 border",children:"SKU"}),o.jsx("th",{className:"p-2 border",children:"Cant."}),o.jsx("th",{className:"p-2 border",children:"P. Unit"}),o.jsx("th",{className:"p-2 border",children:"Monto"})," ",o.jsx("th",{className:"p-2 border",children:"Descuento"})," ",o.jsx("th",{className:"p-2 border",children:"Monto final"})," "]})}),o.jsx("tbody",{children:T?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Cargando"})}):D.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Sin piezas fiadas en el periodo."})}):D.sort((F,L)=>F.date.localeCompare(L.date)).map((F,L)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:F.date}),o.jsx("td",{className:"p-2 border",children:F.productName}),o.jsx("td",{className:"p-2 border",children:F.sku||""}),o.jsx("td",{className:"p-2 border",children:F.qty}),o.jsx("td",{className:"p-2 border",children:Un(F.unitPrice)}),o.jsx("td",{className:"p-2 border",children:Un(F.lineTotal)}),o.jsx("td",{className:"p-2 border",children:Un(F.discount)}),o.jsx("td",{className:"p-2 border",children:Un(F.lineFinal)})]},`${F.saleId}-${L}`))})]})})]})})]})}const k_=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal"],Cg=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function vW(){const[t,e]=U.useState(er(th(new Date),"yyyy-MM-dd")),[r,n]=U.useState(er(eh(new Date),"yyyy-MM-dd")),[s,i]=U.useState(er(new Date,"yyyy-MM-dd")),[a,A]=U.useState(""),[l,c]=U.useState(""),[u,h]=U.useState(0),[m,p]=U.useState("PENDIENTE"),[b,B]=U.useState(""),[E,y]=U.useState([]),[w,S]=U.useState(!0),[M,R]=U.useState(""),[O,I]=U.useState(null),[N,j]=U.useState(""),[D,_]=U.useState(""),[T,P]=U.useState(""),[ee,Ae]=U.useState(0),[ue,he]=U.useState("PENDIENTE"),[te,se]=U.useState("");U.useEffect(()=>{(async()=>{S(!0);try{const $=Wt(at(je,"expenses_clothes"),Xs("date","desc")),de=await Pt($),pe=[];de.forEach(Ne=>{const Te=Ne.data();pe.push({id:Ne.id,date:Te.date||er(new Date,"yyyy-MM-dd"),category:Te.category||"",description:Te.description||"",amount:Number(Te.amount||0),status:Te.status||"PENDIENTE",notes:Te.notes||"",createdAt:Te.createdAt??Lt.now()})}),y(pe)}catch($){console.error($),R(" Error al cargar gastos")}finally{S(!1)}})()},[]);const ne=U.useMemo(()=>E.filter($=>!(t&&$.date<t||r&&$.date>r)),[E,t,r]),ye=U.useMemo(()=>{const $=ne.reduce((Ne,Te)=>Ne+(Te.amount||0),0),de=ne.filter(Ne=>Ne.status==="PAGADO").reduce((Ne,Te)=>Ne+(Te.amount||0),0),pe=$-de;return{total:$,pagado:de,pendiente:pe}},[ne]),F=()=>{i(er(new Date,"yyyy-MM-dd")),A(""),c(""),h(0),p("PENDIENTE"),B("")},L=async $=>{if($.preventDefault(),R(""),!a){R("Selecciona una categora.");return}if(!l.trim()){R("Ingresa una descripcin.");return}if(!u||u<=0){R("Ingresa un monto vlido.");return}try{const de=await Bn(at(je,"expenses_clothes"),{date:s,category:a,description:l.trim(),amount:Number(u.toFixed(2)),status:m,notes:b||"",createdAt:Lt.now()});y(pe=>[{id:de.id,date:s,category:a,description:l.trim(),amount:Number(u.toFixed(2)),status:m,notes:b||"",createdAt:Lt.now()},...pe]),F(),R(" Gasto registrado")}catch(de){console.error(de),R(" Error al guardar gasto")}},W=$=>{I($.id),j($.date),_($.category||""),P($.description||""),Ae(Number($.amount||0)),he($.status||"PENDIENTE"),se($.notes||"")},q=()=>{I(null),j(""),_(""),P(""),Ae(0),he("PENDIENTE"),se("")},H=async()=>{if(O){if(!D){R("Selecciona una categora.");return}if(!T.trim()){R("Ingresa una descripcin.");return}if(!ee||ee<=0){R("Ingresa un monto vlido.");return}try{await nn(Qt(je,"expenses_clothes",O),{date:N,category:D,description:T.trim(),amount:Number(ee.toFixed(2)),status:ue,notes:te||""}),y($=>$.map(de=>de.id===O?{...de,date:N,category:D,description:T.trim(),amount:Number(ee.toFixed(2)),status:ue,notes:te||""}:de)),q(),R(" Gasto actualizado")}catch($){console.error($),R(" Error al actualizar gasto")}}},re=async $=>{confirm(`Eliminar el gasto "${$.description}"?`)&&(await os(Qt(je,"expenses_clothes",$.id)),y(pe=>pe.filter(Ne=>Ne.id!==$.id)),R(" Gasto borrado"))};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Ropa)"}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:$=>e($.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:$=>n($.target.value)})]}),o.jsxs("div",{className:"ml-auto text-sm",children:[o.jsx("div",{className:"font-semibold",children:"Totales del rango"}),o.jsxs("div",{children:["Total: ",Cg(ye.total)]}),o.jsxs("div",{children:["Pagado: ",Cg(ye.pagado)]}),o.jsxs("div",{children:["Pendiente: ",Cg(ye.pendiente)]})]})]}),o.jsxs("form",{onSubmit:L,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:s,onChange:$=>i($.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:$=>A($.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),k_.map($=>o.jsx("option",{value:$,children:$},$))]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:l,onChange:$=>c($.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:u===0?"":u,onChange:$=>h(Math.max(0,Number($.target.value||0))),placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:$=>p($.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:b,onChange:$=>B($.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[b.length,"/500"]})]}),o.jsx("div",{className:"md:col-span-2",children:o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:w?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):ne.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):ne.slice().sort(($,de)=>$.date.localeCompare(de.date)).map($=>{const de=O===$.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:de?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:N,onChange:pe=>j(pe.target.value)}):$.date}),o.jsx("td",{className:"p-2 border",children:de?o.jsxs("select",{className:"w-full border p-1 rounded",value:D,onChange:pe=>_(pe.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),k_.map(pe=>o.jsx("option",{value:pe,children:pe},pe))]}):$.category||""}),o.jsx("td",{className:"p-2 border",children:de?o.jsx("input",{className:"w-full border p-1 rounded",value:T,onChange:pe=>P(pe.target.value)}):o.jsx("span",{title:$.description,children:$.description.length>40?$.description.slice(0,40)+"":$.description})}),o.jsx("td",{className:"p-2 border",children:de?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(ee)?"":ee,onChange:pe=>Ae(Math.max(0,Number(pe.target.value||0)))}):Cg($.amount)}),o.jsx("td",{className:"p-2 border",children:de?o.jsxs("select",{className:"w-full border p-1 rounded",value:ue,onChange:pe=>he(pe.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${$.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:$.status})}),o.jsx("td",{className:"p-2 border",children:de?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:te,onChange:pe=>se(pe.target.value),maxLength:500}):o.jsx("span",{title:$.notes||"",children:($.notes||"").length>40?($.notes||"").slice(0,40)+"":$.notes||""})}),o.jsx("td",{className:"p-2 border",children:o.jsx("div",{className:"flex gap-2 justify-center",children:de?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:H,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:q,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>W($),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>re($),children:"Borrar"})]})})})]},$.id)})})]})}),M&&o.jsx("p",{className:"mt-2 text-sm",children:M})]})}const Yi=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function yW(t){var e;return t!=null&&t.date?t.date:(e=t==null?void 0:t.createdAt)!=null&&e.toDate?er(t.createdAt.toDate(),"yyyy-MM-dd"):""}function wW(t,e){const r=yW(t);if(!r)return null;const n=t.item||{},s=Number((n==null?void 0:n.qty)??t.quantity??0)||0,i=Number((n==null?void 0:n.total)??t.total??0)||0,a=Number((n==null?void 0:n.unitPrice)??(s>0?i/s:0))||0;return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total||0),quantity:Number(t.quantity||s||0),customerId:t.customerId||void 0,customerName:t.customerName||void 0,downPayment:Number(t.downPayment||0),item:{productId:String((n==null?void 0:n.productId)||t.productId||""),productName:String((n==null?void 0:n.productName)||t.productName||""),sku:(n==null?void 0:n.sku)||t.sku||"",qty:s,unitPrice:a,total:s*a}}}async function xW(t,e){if(e<=0)return;const r=Wt(at(je,"inventory_clothes_batches"),rr("productId","==",t)),n=await Pt(r),s=[];n.forEach(a=>{const A=a.data();s.push({id:a.id,productId:A.productId,date:A.date||"",quantity:Number(A.quantity||0),remaining:Number(A.remaining||0)})}),s.sort((a,A)=>a.date.localeCompare(A.date));let i=e;for(const a of s){if(i<=0)break;if(a.remaining<=0)continue;const A=Math.min(a.remaining,i);i-=A,await nn(Qt(je,"inventory_clothes_batches",a.id),{remaining:Math.max(0,Number((a.remaining-A).toFixed(0)))})}i>0&&console.warn("consumeFIFO: falt inventario",i)}async function bW(t,e){if(e<=0)return;const r=Wt(at(je,"inventory_clothes_batches"),rr("productId","==",t)),n=await Pt(r),s=[];n.forEach(a=>{const A=a.data();s.push({id:a.id,productId:A.productId,date:A.date||"",quantity:Number(A.quantity||0),remaining:Number(A.remaining||0)})}),s.sort((a,A)=>a.date.localeCompare(A.date));let i=e;for(const a of s){if(i<=0)break;const A=Math.max(0,a.quantity-a.remaining);if(A<=0)continue;const l=Math.min(A,i);i-=l,await nn(Qt(je,"inventory_clothes_batches",a.id),{remaining:Number((a.remaining+l).toFixed(0))})}i>0&&console.warn("restoreFIFO: no se devolvi todo",i)}async function M3(t){const e=Wt(at(je,"ar_movements"),rr("ref.saleId","==",t)),r=await Pt(e);await Promise.all(r.docs.map(n=>os(Qt(je,"ar_movements",n.id))))}async function BW(t,e,r){if(await M3(t.id),t.type!=="CREDITO"||!t.customerId)return;const n={customerId:t.customerId,date:t.date,createdAt:Lt.now(),ref:{saleId:t.id}},{addDoc:s}=await Qo(async()=>{const{addDoc:a}=await Promise.resolve().then(()=>NH);return{addDoc:a}},void 0);await s(at(je,"ar_movements"),{...n,type:"CARGO",amount:Number(e)||0});const i=Math.max(0,Number(r??t.downPayment??0));i>0&&await s(at(je,"ar_movements"),{...n,type:"ABONO",amount:-i})}function CW(){const[t,e]=U.useState(!1),[r,n]=U.useState(!1),[s,i]=U.useState(null),[a,A]=U.useState([]),l=async oe=>{e(!0),n(!0),i(oe),A([]);try{const J=(await Pt(Wt(at(je,"sales_clothes"),rr("__name__","==",oe)))).docs[0],Re=J==null?void 0:J.data(),Ue=(Array.isArray(Re==null?void 0:Re.items)?Re.items:Re!=null&&Re.item?[Re.item]:[]).map(Pe=>({productName:String(Pe.productName||""),qty:Number(Pe.qty||0),unitPrice:Number(Pe.unitPrice||0),discount:Number(Pe.discount||0),total:Number(Pe.total||0)}));A(Ue)}catch(ce){console.error(ce)}finally{n(!1)}},[c,u]=U.useState(er(new Date,"yyyy-MM-01")),[h,m]=U.useState(er(new Date,"yyyy-MM-dd")),[p,b]=U.useState([]),[B,E]=U.useState([]),[y,w]=U.useState(!0),[S,M]=U.useState(""),[R,O]=U.useState(""),[I,N]=U.useState(""),[j,D]=U.useState(null),[_,T]=U.useState(!1),[P,ee]=U.useState(null),[Ae,ue]=U.useState(0),he=15,[te,se]=U.useState(1),ne=U.useMemo(()=>{const oe={};return p.forEach(ce=>oe[ce.id]=ce.name),oe},[p]);U.useEffect(()=>{(async()=>{w(!0),M("");try{const oe=await Pt(at(je,"customers_clothes")),ce=[];oe.forEach(Le=>ce.push({id:Le.id,name:Le.data().name||""})),b(ce);const J=await Pt(Wt(at(je,"sales_clothes"),Xs("createdAt","desc"))),Re=[];J.forEach(Le=>{const Ue=wW(Le.data(),Le.id);Ue&&Ue.date>=c&&Ue.date<=h&&Re.push(Ue)}),E(Re.sort((Le,Ue)=>Ue.date.localeCompare(Le.date))),se(1)}catch(oe){console.error(oe),M(" Error cargando transacciones.")}finally{w(!1)}})()},[c,h]);const ye=U.useMemo(()=>B.filter(oe=>!(R&&oe.customerId!==R||I&&oe.type!==I)),[B,R,I]),F=U.useMemo(()=>{let oe=0,ce=0,J=0,Re=0;for(const Le of ye)Le.type==="CONTADO"?(oe+=Le.item.qty,J+=Le.total):(ce+=Le.item.qty,Re+=Le.total);return{piezasCash:oe,piezasCredito:ce,montoCash:J,montoCredito:Re}},[ye]),L=Math.max(1,Math.ceil(ye.length/he)),W=U.useMemo(()=>{const oe=(te-1)*he;return ye.slice(oe,oe+he)},[ye,te]),q=oe=>{D(null),ee(oe),ue(oe.item.qty||0),T(!0)},H=async oe=>{if(D(null),!!window.confirm("Eliminar esta venta? Esta accin no se puede deshacer."))try{w(!0),await ux(oe.id),await M3(oe.id),E(ce=>ce.filter(J=>J.id!==oe.id)),M(" Venta eliminada")}catch(ce){console.error(ce),M(" No se pudo eliminar la venta.")}finally{w(!1)}},re=async()=>{if(!P)return;const oe=Number(P.item.qty||0),ce=Math.max(1,Math.floor(Number(Ae)||0));if(ce===oe){T(!1);return}const J=Number(P.item.unitPrice||0),Re=Number((J*ce).toFixed(2));try{w(!0);const Le=ce-oe;Le>0?await xW(P.item.productId,Le):Le<0&&await bW(P.item.productId,-Le);const Ue=Qt(je,"sales_clothes",P.id);await nn(Ue,{quantity:ce,total:Re,itemsTotal:Re,"item.qty":ce,"item.total":Re,updatedAt:Lt.now()});const Pe=Math.min(Number(P.downPayment||0),Re);await BW(P,Re,Pe),E(Ge=>Ge.map(qe=>qe.id===P.id?{...qe,quantity:ce,total:Re,item:{...qe.item,qty:ce,total:Re},downPayment:Pe}:qe)),M(" Venta actualizada"),T(!1)}catch(Le){console.error(Le),M(" No se pudo actualizar la venta.")}finally{w(!1)}},$=()=>{const oe=`Reporte de transacciones (Ropa)  ${c} a ${h}`,ce=Ue=>(Ue||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),J=ye.map(Ue=>{const Pe=Ue.customerName||(Ue.customerId?ne[Ue.customerId]:"")||"Nombre cliente";return`<tr>
          <td>${Ue.date}</td>
          <td>${ce(Pe)}</td>
          <td>${Ue.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${Ue.item.qty}</td>
          <td style="text-align:right">${Yi(Ue.total)}</td>
        </tr>`}).join(""),Re=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${ce(oe)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${ce(oe)}</h1>
      <div class="kpis">
        <div><b>Piezas Cash:</b> ${F.piezasCash}</div>
        <div><b>Piezas Crdito:</b> ${F.piezasCredito}</div>
        <div><b>Monto Cash:</b> ${Yi(F.montoCash)}</div>
        <div><b>Monto Crdito:</b> ${Yi(F.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Piezas</th><th>Monto</th>
      </tr></thead><tbody>
      ${J||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,Le=window.open("","_blank");Le&&(Le.document.open(),Le.document.write(Re),Le.document.close())},de=()=>se(1),pe=()=>se(oe=>Math.max(1,oe-1)),Ne=()=>se(oe=>Math.min(L,oe+1)),Te=()=>se(L),Fe=()=>{const oe=[];if(L<=7)for(let J=1;J<=L;J++)oe.push(J);else{const J=Math.max(1,te-2),Re=Math.min(L,te+2);oe.push(1),J>2&&oe.push(-1);for(let Le=J;Le<=Re;Le++)Le!==1&&Le!==L&&oe.push(Le);Re<L-1&&oe.push(-2),oe.push(L)}return o.jsxs("div",{className:"flex items-center gap-1 justify-between mt-3",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:de,disabled:te===1,children:" Primero"}),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:pe,disabled:te===1,children:" Anterior"}),oe.map((J,Re)=>typeof J=="number"?o.jsx("button",{className:`px-3 py-1 border rounded ${J===te?"bg-blue-600 text-white":""}`,onClick:()=>se(J),children:J},Re):o.jsx("span",{className:"px-2",children:""},Re)),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Ne,disabled:te===L,children:"Siguiente "}),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Te,disabled:te===L,children:"ltimo "})]}),o.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",te," de ",L,"  ",ye.length," transaccin(es)"]})]})};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Reporte de transacciones (Ropa)"}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap gap-3 items-end text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:oe=>{u(oe.target.value),se(1)}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:h,onChange:oe=>{m(oe.target.value),se(1)}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),o.jsxs("select",{className:"border rounded px-2 py-1 min-w-[220px]",value:R,onChange:oe=>{O(oe.target.value),se(1)},children:[o.jsx("option",{value:"",children:"Todos"}),p.map(oe=>o.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Tipo"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:I,onChange:oe=>{N(oe.target.value),se(1)},children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"CONTADO",children:"Cash"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),o.jsx("button",{className:"ml-auto px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:$,children:"Exportar PDF"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:F.piezasCash})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:F.piezasCredito})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:Yi(F.montoCash)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:Yi(F.montoCredito)})]})]}),o.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Cliente"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Piezas"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Cargando"})}):W.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Sin transacciones en el rango."})}):W.map(oe=>{const ce=oe.customerName||(oe.customerId?ne[oe.customerId]:"")||"Nombre cliente";return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:oe.date}),o.jsx("td",{className:"p-2 border",children:ce}),o.jsx("td",{className:"p-2 border",children:oe.type==="CREDITO"?"Crdito":"Cash"}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver piezas de esta transaccin",onClick:()=>l(oe.id),children:oe.item.qty})}),o.jsx("td",{className:"p-2 border",children:Yi(oe.total)}),o.jsxs("td",{className:"p-2 border relative",children:[o.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>D(J=>J===oe.id?null:oe.id),title:"Acciones",children:""}),j===oe.id&&o.jsxs("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:[o.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100",onClick:()=>q(oe),children:"Editar"}),o.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>H(oe),children:"Eliminar"})]})]})]},oe.id)})})]}),Fe()]}),S&&o.jsx("p",{className:"mt-2 text-sm",children:S}),_&&P&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-md p-4",children:[o.jsx("h3",{className:"text-lg font-bold mb-2",children:"Editar venta"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Producto"}),o.jsxs("div",{className:"font-semibold",children:[P.item.productName," ",P.item.sku?` ${P.item.sku}`:""]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (piezas)"}),o.jsx("input",{type:"number",step:"1",min:1,className:"w-full border p-2 rounded",value:Ae,onChange:oe=>ue(Math.max(1,Math.floor(Number(oe.target.value||0))))})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"P. Unit"}),o.jsx("div",{className:"text-lg font-semibold",children:Yi(P.item.unitPrice)})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Nuevo total"}),o.jsx("div",{className:"text-lg font-semibold",children:Yi(Number(P.item.unitPrice)*Number(Ae||0))})]})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{T(!1),ee(null)},children:"Cancelar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:re,children:"Guardar cambios"})]})]})}),t&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Piezas vendidas"," ",s?` #${s}`:""]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>e(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio"}),o.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),o.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):a.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):a.map((oe,ce)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border text-left",children:oe.productName}),o.jsx("td",{className:"p-2 border text-right",children:oe.qty}),o.jsx("td",{className:"p-2 border text-right",children:Yi(oe.unitPrice)}),o.jsx("td",{className:"p-2 border text-right",children:Yi(oe.discount||0)}),o.jsx("td",{className:"p-2 border text-right",children:Yi(oe.total)})]},ce))})]})})]})})]})}const NW=["Caramelo","Meneito","Chicles","Jalea","Bombones","Chocolate","Galleta"];function n1(t){return isFinite(t)?Math.round(t):0}function EW(){const[t,e]=U.useState("Caramelo"),[r,n]=U.useState(""),[s,i]=U.useState(""),[a,A]=U.useState("0"),[l,c]=U.useState("1"),[u,h]=U.useState(""),[m,p]=U.useState(""),[b,B]=U.useState(!0),{refreshKey:E,refresh:y}=Jc(),[w,S]=U.useState([]),[M,R]=U.useState(!1),{subtotal:O,totalRivas:I,totalSanJorge:N,totalIsla:j,gainRivas:D,gainSanJorge:_,gainIsla:T,unitPriceRivas:P,unitPriceSanJorge:ee,unitPriceIsla:Ae}=U.useMemo(()=>{const se=Number(s||0),ne=Number(a||0),ye=se*ne,F=ne>0?ye/.8:0,L=ne>0?ye/.85:0,W=ne>0?ye/.7:0,q=F-ye,H=L-ye,re=W-ye,$=ne>0?n1(F/ne):0,de=ne>0?n1(L/ne):0,pe=ne>0?n1(W/ne):0;return{subtotal:ye,totalRivas:F,totalSanJorge:L,totalIsla:W,gainRivas:q,gainSanJorge:H,gainIsla:re,unitPriceRivas:$,unitPriceSanJorge:de,unitPriceIsla:pe}},[s,a]);U.useEffect(()=>{(async()=>{B(!0);const se=Wt(at(je,"products_candies"),Xs("createdAt","desc")),ne=await Pt(se),ye=[];ne.forEach(F=>{const L=F.data();ye.push({id:F.id,name:L.name??"",category:L.category??"Caramelo",providerPrice:Number(L.providerPrice??0),packages:Number(L.packages??0),unitsPerPackage:Number(L.unitsPerPackage??0),subtotal:Number(L.subtotal??0),totalRivas:Number(L.totalRivas??0),totalSanJorge:Number(L.totalSanJorge??0),totalIsla:Number(L.totalIsla??0),gainRivas:Number(L.gainRivas??0),gainSanJorge:Number(L.gainSanJorge??0),gainIsla:Number(L.gainIsla??0),unitPriceRivas:Number(L.unitPriceRivas??0),unitPriceSanJorge:Number(L.unitPriceSanJorge??0),unitPriceIsla:Number(L.unitPriceIsla??0),inventoryDate:L.inventoryDate??"",createdAt:L.createdAt??Lt.now()})}),S(ye),B(!1)})()},[E]);const ue=()=>{e("Caramelo"),n(""),i(""),A("0"),c("1"),h("")},he=async se=>{if(se.preventDefault(),p(""),!r.trim()){p("Ingresa el nombre del producto.");return}const ne=Number(s||0),ye=Number(a||0),F=Number(l||0);if(ne<0){p("El precio proveedor no puede ser negativo.");return}if(ye<0){p("Los paquetes deben ser 0 o ms.");return}if(F<=0){p("Las unidades por paquete deben ser mayor que 0.");return}try{const L=new Date().toISOString().slice(0,10),W=u||L,q={name:r.trim(),category:t,providerPrice:ne,packages:ye,unitsPerPackage:F,subtotal:O,totalRivas:I,totalSanJorge:N,totalIsla:j,gainRivas:D,gainSanJorge:_,gainIsla:T,unitPriceRivas:P,unitPriceSanJorge:ee,unitPriceIsla:Ae,inventoryDate:W,createdAt:Lt.now()},H=await Bn(at(je,"products_candies"),q);if(S(re=>[{id:H.id,...q},...re]),ye>0){const re=ye*F;await Bn(at(je,"inventory_candies"),{productId:H.id,productName:r.trim(),category:t,measurement:"unidad",quantity:re,remaining:re,packages:ye,unitsPerPackage:F,totalUnits:re,providerPrice:ne,subtotal:O,totalRivas:I,totalSanJorge:N,totalIsla:j,gainRivas:D,gainSanJorge:_,gainIsla:T,unitPriceRivas:P,unitPriceSanJorge:ee,unitPriceIsla:Ae,date:W,createdAt:Lt.now(),status:"PENDIENTE"})}p(ye>0?" Producto de dulces creado y lote de inventario registrado.":" Producto de dulces creado (sin inventario, paquetes = 0)."),ue()}catch(L){console.error(L),p(" Error al crear producto de dulces")}},te=async se=>{confirm(`Eliminar el producto "${se.name}"?`)&&(await os(Qt(je,"products_candies",se.id)),S(ye=>ye.filter(F=>F.id!==se.id)))};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Productos de Dulces"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(nh,{onClick:y,loading:b}),o.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>R(!0),children:[o.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]})]}),M&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[o.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo producto de dulces"}),o.jsxs("form",{onSubmit:he,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),o.jsx("select",{className:"w-full border p-2 rounded",value:t,onChange:se=>e(se.target.value),children:NW.map(se=>o.jsx("option",{value:se,children:se},se))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),o.jsx("input",{className:"w-full border p-2 rounded",value:r,onChange:se=>n(se.target.value),placeholder:"Ej: Chicles menta"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio Proveedor"}),o.jsx("input",{className:"w-full border p-2 rounded",type:"number",step:"0.01",min:0,value:s,onChange:se=>i(se.target.value),placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Paquetes"}),o.jsx("input",{className:"w-full border p-2 rounded",type:"number",min:0,value:a,onChange:se=>A(se.target.value),placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Unidades por paquete"}),o.jsx("input",{className:"w-full border p-2 rounded",type:"number",min:1,value:l,onChange:se=>c(se.target.value),placeholder:"Ej: 10"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha inventario"}),o.jsx("input",{className:"w-full border p-2 rounded",type:"date",value:u,onChange:se=>h(se.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Subtotal (auto)"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",readOnly:!0,value:isNaN(O)?"":O.toFixed(2)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Total Rivas (auto)"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",readOnly:!0,value:isNaN(I)?"":I.toFixed(2)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Total San Jorge (auto)"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",readOnly:!0,value:isNaN(N)?"":N.toFixed(2)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Total Isla (auto)"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",readOnly:!0,value:isNaN(j)?"":j.toFixed(2)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"G. Paquete R (auto)"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",readOnly:!0,value:isNaN(D)?"":D.toFixed(2)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"G. Paquete SJ (auto)"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",readOnly:!0,value:isNaN(_)?"":_.toFixed(2)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"G. Paquete IO (auto)"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",readOnly:!0,value:isNaN(T)?"":T.toFixed(2)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"P. Unidad R (auto)"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",readOnly:!0,value:P||P===0?P:""})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"P. Unidad SJ (auto)"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",readOnly:!0,value:ee||ee===0?ee:""})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"P. Unidad IO (auto)"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",readOnly:!0,value:Ae||Ae===0?Ae:""})]}),o.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2 mt-2",children:[o.jsx("button",{type:"button",onClick:ue,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Limpiar"}),o.jsx("button",{type:"button",onClick:()=>R(!1),className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Guardar"})]})]})]})}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Precio Prov."}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"Und x Paq."}),o.jsx("th",{className:"p-2 border",children:"Subtotal"}),o.jsx("th",{className:"p-2 border",children:"Total Rivas"}),o.jsx("th",{className:"p-2 border",children:"Total SJ"}),o.jsx("th",{className:"p-2 border",children:"Total Isla"}),o.jsx("th",{className:"p-2 border",children:"G. R"}),o.jsx("th",{className:"p-2 border",children:"G. SJ"}),o.jsx("th",{className:"p-2 border",children:"G. IO"}),o.jsx("th",{className:"p-2 border",children:"P. U R"}),o.jsx("th",{className:"p-2 border",children:"P. U SJ"}),o.jsx("th",{className:"p-2 border",children:"P. U IO"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:b?o.jsx("tr",{children:o.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Cargando"})}):w.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Sin productos"})}):w.map(se=>{var ne;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:se.inventoryDate||((ne=se.createdAt)!=null&&ne.toDate?se.createdAt.toDate().toISOString().slice(0,10):"")}),o.jsx("td",{className:"p-2 border",children:se.category}),o.jsx("td",{className:"p-2 border",children:se.name}),o.jsx("td",{className:"p-2 border",children:se.providerPrice.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:se.packages}),o.jsx("td",{className:"p-2 border",children:se.unitsPerPackage}),o.jsx("td",{className:"p-2 border",children:se.subtotal.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:se.totalRivas.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:se.totalSanJorge.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:se.totalIsla.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:se.gainRivas.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:se.gainSanJorge.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:se.gainIsla.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:se.unitPriceRivas}),o.jsx("td",{className:"p-2 border",children:se.unitPriceSanJorge}),o.jsx("td",{className:"p-2 border",children:se.unitPriceIsla}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>te(se),children:"Borrar"})})]},se.id)})})]})}),m&&o.jsx("p",{className:"mt-2 text-sm",children:m})]})}function _W(){const[t,e]=U.useState(null),[r,n]=U.useState(""),[s,i]=U.useState(!0);if(U.useEffect(()=>{const A=zF(ny,async l=>{if(i(!0),l){e(l);try{const c=Qt(je,"users",l.uid),u=await zo(c),h=u.exists()?u.data().role:"";n(h||"")}catch{n("")}}else e(null),n("");i(!1)});return()=>A()},[]),s)return o.jsx("div",{className:"p-6 text-center",children:"Cargando..."});const a=()=>r==="admin"?o.jsx(Ru,{to:"FinancialDashboard",replace:!0}):r==="vendedor_pollo"?o.jsx(Ru,{to:"salesV2",replace:!0}):r==="vendedor_ropa"?o.jsx(Ru,{to:"salesClothes",replace:!0}):o.jsx(Ru,{to:"/",replace:!0});return o.jsx(dk,{children:o.jsxs(VL,{children:[o.jsx(Rr,{path:"/",element:o.jsx(_H,{})}),o.jsxs(Rr,{path:"/admin",element:o.jsx(cn,{allowedRoles:["admin","vendedor_pollo","vendedor_ropa"],children:o.jsx(IH,{role:r})}),children:[o.jsx(Rr,{index:!0,element:o.jsx(a,{})}),o.jsx(Rr,{path:"bills",element:o.jsx(cn,{allowedRoles:["admin","vendedor_pollo"],children:o.jsx(d$,{})})}),o.jsx(Rr,{path:"salesV2",element:o.jsx(cn,{allowedRoles:["admin","vendedor_pollo"],children:o.jsx(I_,{user:t})})}),o.jsx(Rr,{path:"financialDashboard",element:o.jsx(cn,{allowedRoles:["admin"],children:o.jsx(k$,{})})}),o.jsx(Rr,{path:"expenses",element:o.jsx(cn,{allowedRoles:["admin"],children:o.jsx(R$,{})})}),o.jsx(Rr,{path:"billing",element:o.jsx(cn,{allowedRoles:["admin"],children:o.jsx(K$,{})})}),o.jsx(Rr,{path:"batches",element:o.jsx(cn,{allowedRoles:["admin"],children:o.jsx(Q$,{})})}),o.jsx(Rr,{path:"paidBatches",element:o.jsx(cn,{allowedRoles:["admin"],children:o.jsx($$,{})})}),o.jsx(Rr,{path:"fix",element:o.jsx(cn,{allowedRoles:["admin"],children:o.jsx(H$,{})})}),o.jsx(Rr,{path:"transactionclose",element:o.jsx(cn,{allowedRoles:["admin"],children:o.jsx(j$,{})})}),o.jsx(Rr,{path:"billhistoric",element:o.jsx(cn,{allowedRoles:["admin"],children:o.jsx(h$,{})})}),o.jsx(Rr,{path:"users",element:o.jsx(cn,{allowedRoles:["admin"],children:o.jsx(f$,{})})}),o.jsx(Rr,{path:"products",element:o.jsx(cn,{allowedRoles:["admin"],children:o.jsx(m$,{})})}),o.jsx(Rr,{path:"CandiesProducts",element:o.jsx(cn,{allowedRoles:["admin"],children:o.jsx(EW,{})})}),o.jsx(Rr,{path:"salesClothes",element:o.jsx(cn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(fW,{})})}),o.jsx(Rr,{path:"TransactionsReportClothes",element:o.jsx(cn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(CW,{})})}),o.jsx(Rr,{path:"financialDashboardClothes",element:o.jsx(cn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(gW,{})})}),o.jsx(Rr,{path:"ExpensesClothes",element:o.jsx(cn,{allowedRoles:["admin"],children:o.jsx(vW,{})})}),o.jsx(Rr,{path:"inventoryClothesBatches",element:o.jsx(cn,{allowedRoles:["admin"],children:o.jsx(Y$,{})})}),o.jsx(Rr,{path:"productsClothes",element:o.jsx(cn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(lW,{})})}),o.jsx(Rr,{path:"CustomersClothes",element:o.jsx(cn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(uW,{})})})]}),o.jsx(Rr,{path:"/salesV2",element:o.jsx(cn,{allowedRoles:["admin","vendedor_pollo"],children:o.jsx(I_,{user:t})})}),o.jsx(Rr,{path:"*",element:o.jsx(Ru,{to:"/"})})]})})}s1.createRoot(document.getElementById("root")).render(o.jsx(_o.StrictMode,{children:o.jsx(_W,{})}));export{Ir as _,IW as c,NP as g};
