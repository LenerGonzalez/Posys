(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var g$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gQ(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var SI={exports:{}},Z0={},FI={exports:{}},Yt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mp=Symbol.for("react.element"),wQ=Symbol.for("react.portal"),vQ=Symbol.for("react.fragment"),yQ=Symbol.for("react.strict_mode"),BQ=Symbol.for("react.profiler"),xQ=Symbol.for("react.provider"),bQ=Symbol.for("react.context"),CQ=Symbol.for("react.forward_ref"),EQ=Symbol.for("react.suspense"),_Q=Symbol.for("react.memo"),IQ=Symbol.for("react.lazy"),Kb=Symbol.iterator;function NQ(t){return t===null||typeof t!="object"?null:(t=Kb&&t[Kb]||t["@@iterator"],typeof t=="function"?t:null)}var TI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},UI=Object.assign,QI={};function Pd(t,e,n){this.props=t,this.context=e,this.refs=QI,this.updater=n||TI}Pd.prototype.isReactComponent={};Pd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Pd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function PI(){}PI.prototype=Pd.prototype;function nB(t,e,n){this.props=t,this.context=e,this.refs=QI,this.updater=n||TI}var rB=nB.prototype=new PI;rB.constructor=nB;UI(rB,Pd.prototype);rB.isPureReactComponent=!0;var Gb=Array.isArray,LI=Object.prototype.hasOwnProperty,sB={current:null},RI={key:!0,ref:!0,__self:!0,__source:!0};function kI(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)LI.call(e,r)&&!RI.hasOwnProperty(r)&&(s[r]=e[r]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var A=Array(o),c=0;c<o;c++)A[c]=arguments[c+2];s.children=A}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:mp,type:t,key:i,ref:a,props:s,_owner:sB.current}}function SQ(t,e){return{$$typeof:mp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function iB(t){return typeof t=="object"&&t!==null&&t.$$typeof===mp}function FQ(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var qb=/\/+/g;function Nv(t,e){return typeof t=="object"&&t!==null&&t.key!=null?FQ(""+t.key):e.toString(36)}function gg(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case mp:case wQ:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Nv(a,0):r,Gb(s)?(n="",t!=null&&(n=t.replace(qb,"$&/")+"/"),gg(s,e,n,"",function(c){return c})):s!=null&&(iB(s)&&(s=SQ(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(qb,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Gb(t))for(var o=0;o<t.length;o++){i=t[o];var A=r+Nv(i,o);a+=gg(i,e,n,A,s)}else if(A=NQ(t),typeof A=="function")for(t=A.call(t),o=0;!(i=t.next()).done;)i=i.value,A=r+Nv(i,o++),a+=gg(i,e,n,A,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function hm(t,e,n){if(t==null)return t;var r=[],s=0;return gg(t,r,"","",function(i){return e.call(n,i,s++)}),r}function TQ(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Qs={current:null},wg={transition:null},UQ={ReactCurrentDispatcher:Qs,ReactCurrentBatchConfig:wg,ReactCurrentOwner:sB};function DI(){throw Error("act(...) is not supported in production builds of React.")}Yt.Children={map:hm,forEach:function(t,e,n){hm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return hm(t,function(){e++}),e},toArray:function(t){return hm(t,function(e){return e})||[]},only:function(t){if(!iB(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Yt.Component=Pd;Yt.Fragment=vQ;Yt.Profiler=BQ;Yt.PureComponent=nB;Yt.StrictMode=yQ;Yt.Suspense=EQ;Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UQ;Yt.act=DI;Yt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=UI({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=sB.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(A in e)LI.call(e,A)&&!RI.hasOwnProperty(A)&&(r[A]=e[A]===void 0&&o!==void 0?o[A]:e[A])}var A=arguments.length-2;if(A===1)r.children=n;else if(1<A){o=Array(A);for(var c=0;c<A;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:mp,type:t.type,key:s,ref:i,props:r,_owner:a}};Yt.createContext=function(t){return t={$$typeof:bQ,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:xQ,_context:t},t.Consumer=t};Yt.createElement=kI;Yt.createFactory=function(t){var e=kI.bind(null,t);return e.type=t,e};Yt.createRef=function(){return{current:null}};Yt.forwardRef=function(t){return{$$typeof:CQ,render:t}};Yt.isValidElement=iB;Yt.lazy=function(t){return{$$typeof:IQ,_payload:{_status:-1,_result:t},_init:TQ}};Yt.memo=function(t,e){return{$$typeof:_Q,type:t,compare:e===void 0?null:e}};Yt.startTransition=function(t){var e=wg.transition;wg.transition={};try{t()}finally{wg.transition=e}};Yt.unstable_act=DI;Yt.useCallback=function(t,e){return Qs.current.useCallback(t,e)};Yt.useContext=function(t){return Qs.current.useContext(t)};Yt.useDebugValue=function(){};Yt.useDeferredValue=function(t){return Qs.current.useDeferredValue(t)};Yt.useEffect=function(t,e){return Qs.current.useEffect(t,e)};Yt.useId=function(){return Qs.current.useId()};Yt.useImperativeHandle=function(t,e,n){return Qs.current.useImperativeHandle(t,e,n)};Yt.useInsertionEffect=function(t,e){return Qs.current.useInsertionEffect(t,e)};Yt.useLayoutEffect=function(t,e){return Qs.current.useLayoutEffect(t,e)};Yt.useMemo=function(t,e){return Qs.current.useMemo(t,e)};Yt.useReducer=function(t,e,n){return Qs.current.useReducer(t,e,n)};Yt.useRef=function(t){return Qs.current.useRef(t)};Yt.useState=function(t){return Qs.current.useState(t)};Yt.useSyncExternalStore=function(t,e,n){return Qs.current.useSyncExternalStore(t,e,n)};Yt.useTransition=function(){return Qs.current.useTransition()};Yt.version="18.3.1";FI.exports=Yt;var L=FI.exports;const Co=gQ(L);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QQ=L,PQ=Symbol.for("react.element"),LQ=Symbol.for("react.fragment"),RQ=Object.prototype.hasOwnProperty,kQ=QQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,DQ={key:!0,ref:!0,__self:!0,__source:!0};function jI(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)RQ.call(e,r)&&!DQ.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:PQ,type:t,key:i,ref:a,props:s,_owner:kQ.current}}Z0.Fragment=LQ;Z0.jsx=jI;Z0.jsxs=jI;SI.exports=Z0;var l=SI.exports,Wy={},OI={exports:{}},hi={},MI={exports:{}},HI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,Ae){var ee=z.length;z.push(Ae);e:for(;0<ee;){var we=ee-1>>>1,k=z[we];if(0<s(k,Ae))z[we]=Ae,z[ee]=k,ee=we;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var Ae=z[0],ee=z.pop();if(ee!==Ae){z[0]=ee;e:for(var we=0,k=z.length,X=k>>>1;we<X;){var Z=2*(we+1)-1,H=z[Z],Y=Z+1,ue=z[Y];if(0>s(H,ee))Y<k&&0>s(ue,H)?(z[we]=ue,z[Y]=ee,we=Y):(z[we]=H,z[Z]=ee,we=Z);else if(Y<k&&0>s(ue,ee))z[we]=ue,z[Y]=ee,we=Y;else break e}}return Ae}function s(z,Ae){var ee=z.sortIndex-Ae.sortIndex;return ee!==0?ee:z.id-Ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var A=[],c=[],d=1,f=null,p=3,g=!1,B=!1,b=!1,C=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(z){for(var Ae=n(c);Ae!==null;){if(Ae.callback===null)r(c);else if(Ae.startTime<=z)r(c),Ae.sortIndex=Ae.expirationTime,e(A,Ae);else break;Ae=n(c)}}function R(z){if(b=!1,N(z),!B)if(n(A)!==null)B=!0,le(V);else{var Ae=n(c);Ae!==null&&se(R,Ae.startTime-z)}}function V(z,Ae){B=!1,b&&(b=!1,w(I),I=-1),g=!0;var ee=p;try{for(N(Ae),f=n(A);f!==null&&(!(f.expirationTime>Ae)||z&&!S());){var we=f.callback;if(typeof we=="function"){f.callback=null,p=f.priorityLevel;var k=we(f.expirationTime<=Ae);Ae=t.unstable_now(),typeof k=="function"?f.callback=k:f===n(A)&&r(A),N(Ae)}else r(A);f=n(A)}if(f!==null)var X=!0;else{var Z=n(c);Z!==null&&se(R,Z.startTime-Ae),X=!1}return X}finally{f=null,p=ee,g=!1}}var j=!1,U=null,I=-1,Q=5,D=-1;function S(){return!(t.unstable_now()-D<Q)}function _(){if(U!==null){var z=t.unstable_now();D=z;var Ae=!0;try{Ae=U(!0,z)}finally{Ae?T():(j=!1,U=null)}}else j=!1}var T;if(typeof y=="function")T=function(){y(_)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,oe=K.port2;K.port1.onmessage=_,T=function(){oe.postMessage(null)}}else T=function(){C(_,0)};function le(z){U=z,j||(j=!0,T())}function se(z,Ae){I=C(function(){z(t.unstable_now())},Ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){B||g||(B=!0,le(V))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(A)},t.unstable_next=function(z){switch(p){case 1:case 2:case 3:var Ae=3;break;default:Ae=p}var ee=p;p=Ae;try{return z()}finally{p=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,Ae){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ee=p;p=z;try{return Ae()}finally{p=ee}},t.unstable_scheduleCallback=function(z,Ae,ee){var we=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?we+ee:we):ee=we,z){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=ee+k,z={id:d++,callback:Ae,priorityLevel:z,startTime:ee,expirationTime:k,sortIndex:-1},ee>we?(z.sortIndex=ee,e(c,z),n(A)===null&&z===n(c)&&(b?(w(I),I=-1):b=!0,se(R,ee-we))):(z.sortIndex=k,e(A,z),B||g||(B=!0,le(V))),z},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(z){var Ae=p;return function(){var ee=p;p=Ae;try{return z.apply(this,arguments)}finally{p=ee}}}})(HI);MI.exports=HI;var jQ=MI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OQ=L,li=jQ;function Xe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var VI=new Set,Ff={};function Dc(t,e){md(t,e),md(t+"Capture",e)}function md(t,e){for(Ff[t]=e,t=0;t<e.length;t++)VI.add(e[t])}var Uo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$y=Object.prototype.hasOwnProperty,MQ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zb={},Wb={};function HQ(t){return $y.call(Wb,t)?!0:$y.call(zb,t)?!1:MQ.test(t)?Wb[t]=!0:(zb[t]=!0,!1)}function VQ(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function KQ(t,e,n,r){if(e===null||typeof e>"u"||VQ(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ps(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var As={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){As[t]=new Ps(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];As[e]=new Ps(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){As[t]=new Ps(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){As[t]=new Ps(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){As[t]=new Ps(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){As[t]=new Ps(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){As[t]=new Ps(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){As[t]=new Ps(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){As[t]=new Ps(t,5,!1,t.toLowerCase(),null,!1,!1)});var aB=/[\-:]([a-z])/g;function oB(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(aB,oB);As[e]=new Ps(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(aB,oB);As[e]=new Ps(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(aB,oB);As[e]=new Ps(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){As[t]=new Ps(t,1,!1,t.toLowerCase(),null,!1,!1)});As.xlinkHref=new Ps("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){As[t]=new Ps(t,1,!1,t.toLowerCase(),null,!0,!0)});function AB(t,e,n,r){var s=As.hasOwnProperty(e)?As[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(KQ(e,n,s,r)&&(n=null),r||s===null?HQ(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Mo=OQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fm=Symbol.for("react.element"),Gu=Symbol.for("react.portal"),qu=Symbol.for("react.fragment"),lB=Symbol.for("react.strict_mode"),Xy=Symbol.for("react.profiler"),KI=Symbol.for("react.provider"),GI=Symbol.for("react.context"),cB=Symbol.for("react.forward_ref"),Jy=Symbol.for("react.suspense"),Yy=Symbol.for("react.suspense_list"),uB=Symbol.for("react.memo"),NA=Symbol.for("react.lazy"),qI=Symbol.for("react.offscreen"),$b=Symbol.iterator;function fh(t){return t===null||typeof t!="object"?null:(t=$b&&t[$b]||t["@@iterator"],typeof t=="function"?t:null)}var Zn=Object.assign,Sv;function Oh(t){if(Sv===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Sv=e&&e[1]||""}return`
`+Sv+t}var Fv=!1;function Tv(t,e){if(!t||Fv)return"";Fv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var A=`
`+s[a].replace(" at new "," at ");return t.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",t.displayName)),A}while(1<=a&&0<=o);break}}}finally{Fv=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Oh(t):""}function GQ(t){switch(t.tag){case 5:return Oh(t.type);case 16:return Oh("Lazy");case 13:return Oh("Suspense");case 19:return Oh("SuspenseList");case 0:case 2:case 15:return t=Tv(t.type,!1),t;case 11:return t=Tv(t.type.render,!1),t;case 1:return t=Tv(t.type,!0),t;default:return""}}function Zy(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case qu:return"Fragment";case Gu:return"Portal";case Xy:return"Profiler";case lB:return"StrictMode";case Jy:return"Suspense";case Yy:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case GI:return(t.displayName||"Context")+".Consumer";case KI:return(t._context.displayName||"Context")+".Provider";case cB:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case uB:return e=t.displayName||null,e!==null?e:Zy(t.type)||"Memo";case NA:e=t._payload,t=t._init;try{return Zy(t(e))}catch{}}return null}function qQ(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zy(e);case 8:return e===lB?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Al(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function zI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zQ(t){var e=zI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function pm(t){t._valueTracker||(t._valueTracker=zQ(t))}function WI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=zI(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Wg(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function e1(t,e){var n=e.checked;return Zn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Xb(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Al(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function $I(t,e){e=e.checked,e!=null&&AB(t,"checked",e,!1)}function t1(t,e){$I(t,e);var n=Al(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?n1(t,e.type,n):e.hasOwnProperty("defaultValue")&&n1(t,e.type,Al(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Jb(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function n1(t,e,n){(e!=="number"||Wg(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Mh=Array.isArray;function id(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Al(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function r1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Xe(91));return Zn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yb(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Xe(92));if(Mh(n)){if(1<n.length)throw Error(Xe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Al(n)}}function XI(t,e){var n=Al(e.value),r=Al(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Zb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function JI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function s1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?JI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var mm,YI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(mm=mm||document.createElement("div"),mm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Tf(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var rf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},WQ=["Webkit","ms","Moz","O"];Object.keys(rf).forEach(function(t){WQ.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),rf[e]=rf[t]})});function ZI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||rf.hasOwnProperty(t)&&rf[t]?(""+e).trim():e+"px"}function eN(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=ZI(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var $Q=Zn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function i1(t,e){if(e){if($Q[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Xe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Xe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Xe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Xe(62))}}function a1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var o1=null;function dB(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var A1=null,ad=null,od=null;function eC(t){if(t=vp(t)){if(typeof A1!="function")throw Error(Xe(280));var e=t.stateNode;e&&(e=sw(e),A1(t.stateNode,t.type,e))}}function tN(t){ad?od?od.push(t):od=[t]:ad=t}function nN(){if(ad){var t=ad,e=od;if(od=ad=null,eC(t),e)for(t=0;t<e.length;t++)eC(e[t])}}function rN(t,e){return t(e)}function sN(){}var Uv=!1;function iN(t,e,n){if(Uv)return t(e,n);Uv=!0;try{return rN(t,e,n)}finally{Uv=!1,(ad!==null||od!==null)&&(sN(),nN())}}function Uf(t,e){var n=t.stateNode;if(n===null)return null;var r=sw(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Xe(231,e,typeof n));return n}var l1=!1;if(Uo)try{var ph={};Object.defineProperty(ph,"passive",{get:function(){l1=!0}}),window.addEventListener("test",ph,ph),window.removeEventListener("test",ph,ph)}catch{l1=!1}function XQ(t,e,n,r,s,i,a,o,A){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var sf=!1,$g=null,Xg=!1,c1=null,JQ={onError:function(t){sf=!0,$g=t}};function YQ(t,e,n,r,s,i,a,o,A){sf=!1,$g=null,XQ.apply(JQ,arguments)}function ZQ(t,e,n,r,s,i,a,o,A){if(YQ.apply(this,arguments),sf){if(sf){var c=$g;sf=!1,$g=null}else throw Error(Xe(198));Xg||(Xg=!0,c1=c)}}function jc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function aN(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function tC(t){if(jc(t)!==t)throw Error(Xe(188))}function eP(t){var e=t.alternate;if(!e){if(e=jc(t),e===null)throw Error(Xe(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return tC(s),t;if(i===r)return tC(s),e;i=i.sibling}throw Error(Xe(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a)throw Error(Xe(189))}}if(n.alternate!==r)throw Error(Xe(190))}if(n.tag!==3)throw Error(Xe(188));return n.stateNode.current===n?t:e}function oN(t){return t=eP(t),t!==null?AN(t):null}function AN(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=AN(t);if(e!==null)return e;t=t.sibling}return null}var lN=li.unstable_scheduleCallback,nC=li.unstable_cancelCallback,tP=li.unstable_shouldYield,nP=li.unstable_requestPaint,pr=li.unstable_now,rP=li.unstable_getCurrentPriorityLevel,hB=li.unstable_ImmediatePriority,cN=li.unstable_UserBlockingPriority,Jg=li.unstable_NormalPriority,sP=li.unstable_LowPriority,uN=li.unstable_IdlePriority,ew=null,La=null;function iP(t){if(La&&typeof La.onCommitFiberRoot=="function")try{La.onCommitFiberRoot(ew,t,void 0,(t.current.flags&128)===128)}catch{}}var ta=Math.clz32?Math.clz32:AP,aP=Math.log,oP=Math.LN2;function AP(t){return t>>>=0,t===0?32:31-(aP(t)/oP|0)|0}var gm=64,wm=4194304;function Hh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yg(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~s;o!==0?r=Hh(o):(i&=a,i!==0&&(r=Hh(i)))}else a=n&~s,a!==0?r=Hh(a):i!==0&&(r=Hh(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ta(e),s=1<<n,r|=t[n],e&=~s;return r}function lP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cP(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-ta(i),o=1<<a,A=s[a];A===-1?(!(o&n)||o&r)&&(s[a]=lP(o,e)):A<=e&&(t.expiredLanes|=o),i&=~o}}function u1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function dN(){var t=gm;return gm<<=1,!(gm&4194240)&&(gm=64),t}function Qv(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function gp(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ta(e),t[e]=n}function uP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ta(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function fB(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ta(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var xn=0;function hN(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var fN,pB,pN,mN,gN,d1=!1,vm=[],zA=null,WA=null,$A=null,Qf=new Map,Pf=new Map,TA=[],dP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rC(t,e){switch(t){case"focusin":case"focusout":zA=null;break;case"dragenter":case"dragleave":WA=null;break;case"mouseover":case"mouseout":$A=null;break;case"pointerover":case"pointerout":Qf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pf.delete(e.pointerId)}}function mh(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=vp(e),e!==null&&pB(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function hP(t,e,n,r,s){switch(e){case"focusin":return zA=mh(zA,t,e,n,r,s),!0;case"dragenter":return WA=mh(WA,t,e,n,r,s),!0;case"mouseover":return $A=mh($A,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Qf.set(i,mh(Qf.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Pf.set(i,mh(Pf.get(i)||null,t,e,n,r,s)),!0}return!1}function wN(t){var e=Ac(t.target);if(e!==null){var n=jc(e);if(n!==null){if(e=n.tag,e===13){if(e=aN(n),e!==null){t.blockedOn=e,gN(t.priority,function(){pN(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=h1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);o1=r,n.target.dispatchEvent(r),o1=null}else return e=vp(n),e!==null&&pB(e),t.blockedOn=n,!1;e.shift()}return!0}function sC(t,e,n){vg(t)&&n.delete(e)}function fP(){d1=!1,zA!==null&&vg(zA)&&(zA=null),WA!==null&&vg(WA)&&(WA=null),$A!==null&&vg($A)&&($A=null),Qf.forEach(sC),Pf.forEach(sC)}function gh(t,e){t.blockedOn===e&&(t.blockedOn=null,d1||(d1=!0,li.unstable_scheduleCallback(li.unstable_NormalPriority,fP)))}function Lf(t){function e(s){return gh(s,t)}if(0<vm.length){gh(vm[0],t);for(var n=1;n<vm.length;n++){var r=vm[n];r.blockedOn===t&&(r.blockedOn=null)}}for(zA!==null&&gh(zA,t),WA!==null&&gh(WA,t),$A!==null&&gh($A,t),Qf.forEach(e),Pf.forEach(e),n=0;n<TA.length;n++)r=TA[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<TA.length&&(n=TA[0],n.blockedOn===null);)wN(n),n.blockedOn===null&&TA.shift()}var Ad=Mo.ReactCurrentBatchConfig,Zg=!0;function pP(t,e,n,r){var s=xn,i=Ad.transition;Ad.transition=null;try{xn=1,mB(t,e,n,r)}finally{xn=s,Ad.transition=i}}function mP(t,e,n,r){var s=xn,i=Ad.transition;Ad.transition=null;try{xn=4,mB(t,e,n,r)}finally{xn=s,Ad.transition=i}}function mB(t,e,n,r){if(Zg){var s=h1(t,e,n,r);if(s===null)Vv(t,e,r,e0,n),rC(t,r);else if(hP(s,t,e,n,r))r.stopPropagation();else if(rC(t,r),e&4&&-1<dP.indexOf(t)){for(;s!==null;){var i=vp(s);if(i!==null&&fN(i),i=h1(t,e,n,r),i===null&&Vv(t,e,r,e0,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Vv(t,e,r,null,n)}}var e0=null;function h1(t,e,n,r){if(e0=null,t=dB(r),t=Ac(t),t!==null)if(e=jc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=aN(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return e0=t,null}function vN(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rP()){case hB:return 1;case cN:return 4;case Jg:case sP:return 16;case uN:return 536870912;default:return 16}default:return 16}}var OA=null,gB=null,yg=null;function yN(){if(yg)return yg;var t,e=gB,n=e.length,r,s="value"in OA?OA.value:OA.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return yg=s.slice(t,1<r?1-r:void 0)}function Bg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ym(){return!0}function iC(){return!1}function fi(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ym:iC,this.isPropagationStopped=iC,this}return Zn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ym)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ym)},persist:function(){},isPersistent:ym}),e}var Ld={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wB=fi(Ld),wp=Zn({},Ld,{view:0,detail:0}),gP=fi(wp),Pv,Lv,wh,tw=Zn({},wp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vB,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wh&&(wh&&t.type==="mousemove"?(Pv=t.screenX-wh.screenX,Lv=t.screenY-wh.screenY):Lv=Pv=0,wh=t),Pv)},movementY:function(t){return"movementY"in t?t.movementY:Lv}}),aC=fi(tw),wP=Zn({},tw,{dataTransfer:0}),vP=fi(wP),yP=Zn({},wp,{relatedTarget:0}),Rv=fi(yP),BP=Zn({},Ld,{animationName:0,elapsedTime:0,pseudoElement:0}),xP=fi(BP),bP=Zn({},Ld,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),CP=fi(bP),EP=Zn({},Ld,{data:0}),oC=fi(EP),_P={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function SP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=NP[t])?!!e[t]:!1}function vB(){return SP}var FP=Zn({},wp,{key:function(t){if(t.key){var e=_P[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Bg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?IP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vB,charCode:function(t){return t.type==="keypress"?Bg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Bg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),TP=fi(FP),UP=Zn({},tw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),AC=fi(UP),QP=Zn({},wp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vB}),PP=fi(QP),LP=Zn({},Ld,{propertyName:0,elapsedTime:0,pseudoElement:0}),RP=fi(LP),kP=Zn({},tw,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),DP=fi(kP),jP=[9,13,27,32],yB=Uo&&"CompositionEvent"in window,af=null;Uo&&"documentMode"in document&&(af=document.documentMode);var OP=Uo&&"TextEvent"in window&&!af,BN=Uo&&(!yB||af&&8<af&&11>=af),lC=" ",cC=!1;function xN(t,e){switch(t){case"keyup":return jP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bN(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zu=!1;function MP(t,e){switch(t){case"compositionend":return bN(e);case"keypress":return e.which!==32?null:(cC=!0,lC);case"textInput":return t=e.data,t===lC&&cC?null:t;default:return null}}function HP(t,e){if(zu)return t==="compositionend"||!yB&&xN(t,e)?(t=yN(),yg=gB=OA=null,zu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return BN&&e.locale!=="ko"?null:e.data;default:return null}}var VP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!VP[t.type]:e==="textarea"}function CN(t,e,n,r){tN(r),e=t0(e,"onChange"),0<e.length&&(n=new wB("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var of=null,Rf=null;function KP(t){LN(t,0)}function nw(t){var e=Xu(t);if(WI(e))return t}function GP(t,e){if(t==="change")return e}var EN=!1;if(Uo){var kv;if(Uo){var Dv="oninput"in document;if(!Dv){var dC=document.createElement("div");dC.setAttribute("oninput","return;"),Dv=typeof dC.oninput=="function"}kv=Dv}else kv=!1;EN=kv&&(!document.documentMode||9<document.documentMode)}function hC(){of&&(of.detachEvent("onpropertychange",_N),Rf=of=null)}function _N(t){if(t.propertyName==="value"&&nw(Rf)){var e=[];CN(e,Rf,t,dB(t)),iN(KP,e)}}function qP(t,e,n){t==="focusin"?(hC(),of=e,Rf=n,of.attachEvent("onpropertychange",_N)):t==="focusout"&&hC()}function zP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nw(Rf)}function WP(t,e){if(t==="click")return nw(e)}function $P(t,e){if(t==="input"||t==="change")return nw(e)}function XP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sa=typeof Object.is=="function"?Object.is:XP;function kf(t,e){if(sa(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!$y.call(e,s)||!sa(t[s],e[s]))return!1}return!0}function fC(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function pC(t,e){var n=fC(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fC(n)}}function IN(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?IN(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function NN(){for(var t=window,e=Wg();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Wg(t.document)}return e}function BB(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function JP(t){var e=NN(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&IN(n.ownerDocument.documentElement,n)){if(r!==null&&BB(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=pC(n,i);var a=pC(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var YP=Uo&&"documentMode"in document&&11>=document.documentMode,Wu=null,f1=null,Af=null,p1=!1;function mC(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;p1||Wu==null||Wu!==Wg(r)||(r=Wu,"selectionStart"in r&&BB(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Af&&kf(Af,r)||(Af=r,r=t0(f1,"onSelect"),0<r.length&&(e=new wB("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Wu)))}function Bm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $u={animationend:Bm("Animation","AnimationEnd"),animationiteration:Bm("Animation","AnimationIteration"),animationstart:Bm("Animation","AnimationStart"),transitionend:Bm("Transition","TransitionEnd")},jv={},SN={};Uo&&(SN=document.createElement("div").style,"AnimationEvent"in window||(delete $u.animationend.animation,delete $u.animationiteration.animation,delete $u.animationstart.animation),"TransitionEvent"in window||delete $u.transitionend.transition);function rw(t){if(jv[t])return jv[t];if(!$u[t])return t;var e=$u[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in SN)return jv[t]=e[n];return t}var FN=rw("animationend"),TN=rw("animationiteration"),UN=rw("animationstart"),QN=rw("transitionend"),PN=new Map,gC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vl(t,e){PN.set(t,e),Dc(e,[t])}for(var Ov=0;Ov<gC.length;Ov++){var Mv=gC[Ov],ZP=Mv.toLowerCase(),eL=Mv[0].toUpperCase()+Mv.slice(1);vl(ZP,"on"+eL)}vl(FN,"onAnimationEnd");vl(TN,"onAnimationIteration");vl(UN,"onAnimationStart");vl("dblclick","onDoubleClick");vl("focusin","onFocus");vl("focusout","onBlur");vl(QN,"onTransitionEnd");md("onMouseEnter",["mouseout","mouseover"]);md("onMouseLeave",["mouseout","mouseover"]);md("onPointerEnter",["pointerout","pointerover"]);md("onPointerLeave",["pointerout","pointerover"]);Dc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tL=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vh));function wC(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ZQ(r,e,void 0,t),t.currentTarget=null}function LN(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],A=o.instance,c=o.currentTarget;if(o=o.listener,A!==i&&s.isPropagationStopped())break e;wC(s,o,c),i=A}else for(a=0;a<r.length;a++){if(o=r[a],A=o.instance,c=o.currentTarget,o=o.listener,A!==i&&s.isPropagationStopped())break e;wC(s,o,c),i=A}}}if(Xg)throw t=c1,Xg=!1,c1=null,t}function Rn(t,e){var n=e[y1];n===void 0&&(n=e[y1]=new Set);var r=t+"__bubble";n.has(r)||(RN(e,t,2,!1),n.add(r))}function Hv(t,e,n){var r=0;e&&(r|=4),RN(n,t,r,e)}var xm="_reactListening"+Math.random().toString(36).slice(2);function Df(t){if(!t[xm]){t[xm]=!0,VI.forEach(function(n){n!=="selectionchange"&&(tL.has(n)||Hv(n,!1,t),Hv(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[xm]||(e[xm]=!0,Hv("selectionchange",!1,e))}}function RN(t,e,n,r){switch(vN(e)){case 1:var s=pP;break;case 4:s=mP;break;default:s=mB}n=s.bind(null,e,n,t),s=void 0,!l1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Vv(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var A=a.tag;if((A===3||A===4)&&(A=a.stateNode.containerInfo,A===s||A.nodeType===8&&A.parentNode===s))return;a=a.return}for(;o!==null;){if(a=Ac(o),a===null)return;if(A=a.tag,A===5||A===6){r=i=a;continue e}o=o.parentNode}}r=r.return}iN(function(){var c=i,d=dB(n),f=[];e:{var p=PN.get(t);if(p!==void 0){var g=wB,B=t;switch(t){case"keypress":if(Bg(n)===0)break e;case"keydown":case"keyup":g=TP;break;case"focusin":B="focus",g=Rv;break;case"focusout":B="blur",g=Rv;break;case"beforeblur":case"afterblur":g=Rv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=aC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=vP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=PP;break;case FN:case TN:case UN:g=xP;break;case QN:g=RP;break;case"scroll":g=gP;break;case"wheel":g=DP;break;case"copy":case"cut":case"paste":g=CP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=AC}var b=(e&4)!==0,C=!b&&t==="scroll",w=b?p!==null?p+"Capture":null:p;b=[];for(var y=c,N;y!==null;){N=y;var R=N.stateNode;if(N.tag===5&&R!==null&&(N=R,w!==null&&(R=Uf(y,w),R!=null&&b.push(jf(y,R,N)))),C)break;y=y.return}0<b.length&&(p=new g(p,B,null,n,d),f.push({event:p,listeners:b}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==o1&&(B=n.relatedTarget||n.fromElement)&&(Ac(B)||B[Qo]))break e;if((g||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,g?(B=n.relatedTarget||n.toElement,g=c,B=B?Ac(B):null,B!==null&&(C=jc(B),B!==C||B.tag!==5&&B.tag!==6)&&(B=null)):(g=null,B=c),g!==B)){if(b=aC,R="onMouseLeave",w="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(b=AC,R="onPointerLeave",w="onPointerEnter",y="pointer"),C=g==null?p:Xu(g),N=B==null?p:Xu(B),p=new b(R,y+"leave",g,n,d),p.target=C,p.relatedTarget=N,R=null,Ac(d)===c&&(b=new b(w,y+"enter",B,n,d),b.target=N,b.relatedTarget=C,R=b),C=R,g&&B)t:{for(b=g,w=B,y=0,N=b;N;N=gu(N))y++;for(N=0,R=w;R;R=gu(R))N++;for(;0<y-N;)b=gu(b),y--;for(;0<N-y;)w=gu(w),N--;for(;y--;){if(b===w||w!==null&&b===w.alternate)break t;b=gu(b),w=gu(w)}b=null}else b=null;g!==null&&vC(f,p,g,b,!1),B!==null&&C!==null&&vC(f,C,B,b,!0)}}e:{if(p=c?Xu(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var V=GP;else if(uC(p))if(EN)V=$P;else{V=zP;var j=qP}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(V=WP);if(V&&(V=V(t,c))){CN(f,V,n,d);break e}j&&j(t,p,c),t==="focusout"&&(j=p._wrapperState)&&j.controlled&&p.type==="number"&&n1(p,"number",p.value)}switch(j=c?Xu(c):window,t){case"focusin":(uC(j)||j.contentEditable==="true")&&(Wu=j,f1=c,Af=null);break;case"focusout":Af=f1=Wu=null;break;case"mousedown":p1=!0;break;case"contextmenu":case"mouseup":case"dragend":p1=!1,mC(f,n,d);break;case"selectionchange":if(YP)break;case"keydown":case"keyup":mC(f,n,d)}var U;if(yB)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else zu?xN(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(BN&&n.locale!=="ko"&&(zu||I!=="onCompositionStart"?I==="onCompositionEnd"&&zu&&(U=yN()):(OA=d,gB="value"in OA?OA.value:OA.textContent,zu=!0)),j=t0(c,I),0<j.length&&(I=new oC(I,t,null,n,d),f.push({event:I,listeners:j}),U?I.data=U:(U=bN(n),U!==null&&(I.data=U)))),(U=OP?MP(t,n):HP(t,n))&&(c=t0(c,"onBeforeInput"),0<c.length&&(d=new oC("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=U))}LN(f,e)})}function jf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function t0(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Uf(t,n),i!=null&&r.unshift(jf(t,i,s)),i=Uf(t,e),i!=null&&r.push(jf(t,i,s))),t=t.return}return r}function gu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function vC(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var o=n,A=o.alternate,c=o.stateNode;if(A!==null&&A===r)break;o.tag===5&&c!==null&&(o=c,s?(A=Uf(n,i),A!=null&&a.unshift(jf(n,A,o))):s||(A=Uf(n,i),A!=null&&a.push(jf(n,A,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var nL=/\r\n?/g,rL=/\u0000|\uFFFD/g;function yC(t){return(typeof t=="string"?t:""+t).replace(nL,`
`).replace(rL,"")}function bm(t,e,n){if(e=yC(e),yC(t)!==e&&n)throw Error(Xe(425))}function n0(){}var m1=null,g1=null;function w1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var v1=typeof setTimeout=="function"?setTimeout:void 0,sL=typeof clearTimeout=="function"?clearTimeout:void 0,BC=typeof Promise=="function"?Promise:void 0,iL=typeof queueMicrotask=="function"?queueMicrotask:typeof BC<"u"?function(t){return BC.resolve(null).then(t).catch(aL)}:v1;function aL(t){setTimeout(function(){throw t})}function Kv(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Lf(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Lf(e)}function XA(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function xC(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Rd=Math.random().toString(36).slice(2),Fa="__reactFiber$"+Rd,Of="__reactProps$"+Rd,Qo="__reactContainer$"+Rd,y1="__reactEvents$"+Rd,oL="__reactListeners$"+Rd,AL="__reactHandles$"+Rd;function Ac(t){var e=t[Fa];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Qo]||n[Fa]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=xC(t);t!==null;){if(n=t[Fa])return n;t=xC(t)}return e}t=n,n=t.parentNode}return null}function vp(t){return t=t[Fa]||t[Qo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Xu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Xe(33))}function sw(t){return t[Of]||null}var B1=[],Ju=-1;function yl(t){return{current:t}}function jn(t){0>Ju||(t.current=B1[Ju],B1[Ju]=null,Ju--)}function Qn(t,e){Ju++,B1[Ju]=t.current,t.current=e}var ll={},bs=yl(ll),qs=yl(!1),Cc=ll;function gd(t,e){var n=t.type.contextTypes;if(!n)return ll;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function zs(t){return t=t.childContextTypes,t!=null}function r0(){jn(qs),jn(bs)}function bC(t,e,n){if(bs.current!==ll)throw Error(Xe(168));Qn(bs,e),Qn(qs,n)}function kN(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Xe(108,qQ(t)||"Unknown",s));return Zn({},n,r)}function s0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ll,Cc=bs.current,Qn(bs,t),Qn(qs,qs.current),!0}function CC(t,e,n){var r=t.stateNode;if(!r)throw Error(Xe(169));n?(t=kN(t,e,Cc),r.__reactInternalMemoizedMergedChildContext=t,jn(qs),jn(bs),Qn(bs,t)):jn(qs),Qn(qs,n)}var go=null,iw=!1,Gv=!1;function DN(t){go===null?go=[t]:go.push(t)}function lL(t){iw=!0,DN(t)}function Bl(){if(!Gv&&go!==null){Gv=!0;var t=0,e=xn;try{var n=go;for(xn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}go=null,iw=!1}catch(s){throw go!==null&&(go=go.slice(t+1)),lN(hB,Bl),s}finally{xn=e,Gv=!1}}return null}var Yu=[],Zu=0,i0=null,a0=0,Ei=[],_i=0,Ec=null,wo=1,vo="";function Jl(t,e){Yu[Zu++]=a0,Yu[Zu++]=i0,i0=t,a0=e}function jN(t,e,n){Ei[_i++]=wo,Ei[_i++]=vo,Ei[_i++]=Ec,Ec=t;var r=wo;t=vo;var s=32-ta(r)-1;r&=~(1<<s),n+=1;var i=32-ta(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,wo=1<<32-ta(e)+s|n<<s|r,vo=i+t}else wo=1<<i|n<<s|r,vo=t}function xB(t){t.return!==null&&(Jl(t,1),jN(t,1,0))}function bB(t){for(;t===i0;)i0=Yu[--Zu],Yu[Zu]=null,a0=Yu[--Zu],Yu[Zu]=null;for(;t===Ec;)Ec=Ei[--_i],Ei[_i]=null,vo=Ei[--_i],Ei[_i]=null,wo=Ei[--_i],Ei[_i]=null}var Ai=null,ii=null,Vn=!1,ea=null;function ON(t,e){var n=Ni(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function EC(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ai=t,ii=XA(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ai=t,ii=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ec!==null?{id:wo,overflow:vo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ni(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ai=t,ii=null,!0):!1;default:return!1}}function x1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function b1(t){if(Vn){var e=ii;if(e){var n=e;if(!EC(t,e)){if(x1(t))throw Error(Xe(418));e=XA(n.nextSibling);var r=Ai;e&&EC(t,e)?ON(r,n):(t.flags=t.flags&-4097|2,Vn=!1,Ai=t)}}else{if(x1(t))throw Error(Xe(418));t.flags=t.flags&-4097|2,Vn=!1,Ai=t}}}function _C(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ai=t}function Cm(t){if(t!==Ai)return!1;if(!Vn)return _C(t),Vn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!w1(t.type,t.memoizedProps)),e&&(e=ii)){if(x1(t))throw MN(),Error(Xe(418));for(;e;)ON(t,e),e=XA(e.nextSibling)}if(_C(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Xe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ii=XA(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ii=null}}else ii=Ai?XA(t.stateNode.nextSibling):null;return!0}function MN(){for(var t=ii;t;)t=XA(t.nextSibling)}function wd(){ii=Ai=null,Vn=!1}function CB(t){ea===null?ea=[t]:ea.push(t)}var cL=Mo.ReactCurrentBatchConfig;function vh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Xe(309));var r=n.stateNode}if(!r)throw Error(Xe(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(Xe(284));if(!n._owner)throw Error(Xe(290,t))}return t}function Em(t,e){throw t=Object.prototype.toString.call(e),Error(Xe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function IC(t){var e=t._init;return e(t._payload)}function HN(t){function e(w,y){if(t){var N=w.deletions;N===null?(w.deletions=[y],w.flags|=16):N.push(y)}}function n(w,y){if(!t)return null;for(;y!==null;)e(w,y),y=y.sibling;return null}function r(w,y){for(w=new Map;y!==null;)y.key!==null?w.set(y.key,y):w.set(y.index,y),y=y.sibling;return w}function s(w,y){return w=el(w,y),w.index=0,w.sibling=null,w}function i(w,y,N){return w.index=N,t?(N=w.alternate,N!==null?(N=N.index,N<y?(w.flags|=2,y):N):(w.flags|=2,y)):(w.flags|=1048576,y)}function a(w){return t&&w.alternate===null&&(w.flags|=2),w}function o(w,y,N,R){return y===null||y.tag!==6?(y=Yv(N,w.mode,R),y.return=w,y):(y=s(y,N),y.return=w,y)}function A(w,y,N,R){var V=N.type;return V===qu?d(w,y,N.props.children,R,N.key):y!==null&&(y.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===NA&&IC(V)===y.type)?(R=s(y,N.props),R.ref=vh(w,y,N),R.return=w,R):(R=Ng(N.type,N.key,N.props,null,w.mode,R),R.ref=vh(w,y,N),R.return=w,R)}function c(w,y,N,R){return y===null||y.tag!==4||y.stateNode.containerInfo!==N.containerInfo||y.stateNode.implementation!==N.implementation?(y=Zv(N,w.mode,R),y.return=w,y):(y=s(y,N.children||[]),y.return=w,y)}function d(w,y,N,R,V){return y===null||y.tag!==7?(y=pc(N,w.mode,R,V),y.return=w,y):(y=s(y,N),y.return=w,y)}function f(w,y,N){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Yv(""+y,w.mode,N),y.return=w,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case fm:return N=Ng(y.type,y.key,y.props,null,w.mode,N),N.ref=vh(w,null,y),N.return=w,N;case Gu:return y=Zv(y,w.mode,N),y.return=w,y;case NA:var R=y._init;return f(w,R(y._payload),N)}if(Mh(y)||fh(y))return y=pc(y,w.mode,N,null),y.return=w,y;Em(w,y)}return null}function p(w,y,N,R){var V=y!==null?y.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return V!==null?null:o(w,y,""+N,R);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case fm:return N.key===V?A(w,y,N,R):null;case Gu:return N.key===V?c(w,y,N,R):null;case NA:return V=N._init,p(w,y,V(N._payload),R)}if(Mh(N)||fh(N))return V!==null?null:d(w,y,N,R,null);Em(w,N)}return null}function g(w,y,N,R,V){if(typeof R=="string"&&R!==""||typeof R=="number")return w=w.get(N)||null,o(y,w,""+R,V);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case fm:return w=w.get(R.key===null?N:R.key)||null,A(y,w,R,V);case Gu:return w=w.get(R.key===null?N:R.key)||null,c(y,w,R,V);case NA:var j=R._init;return g(w,y,N,j(R._payload),V)}if(Mh(R)||fh(R))return w=w.get(N)||null,d(y,w,R,V,null);Em(y,R)}return null}function B(w,y,N,R){for(var V=null,j=null,U=y,I=y=0,Q=null;U!==null&&I<N.length;I++){U.index>I?(Q=U,U=null):Q=U.sibling;var D=p(w,U,N[I],R);if(D===null){U===null&&(U=Q);break}t&&U&&D.alternate===null&&e(w,U),y=i(D,y,I),j===null?V=D:j.sibling=D,j=D,U=Q}if(I===N.length)return n(w,U),Vn&&Jl(w,I),V;if(U===null){for(;I<N.length;I++)U=f(w,N[I],R),U!==null&&(y=i(U,y,I),j===null?V=U:j.sibling=U,j=U);return Vn&&Jl(w,I),V}for(U=r(w,U);I<N.length;I++)Q=g(U,w,I,N[I],R),Q!==null&&(t&&Q.alternate!==null&&U.delete(Q.key===null?I:Q.key),y=i(Q,y,I),j===null?V=Q:j.sibling=Q,j=Q);return t&&U.forEach(function(S){return e(w,S)}),Vn&&Jl(w,I),V}function b(w,y,N,R){var V=fh(N);if(typeof V!="function")throw Error(Xe(150));if(N=V.call(N),N==null)throw Error(Xe(151));for(var j=V=null,U=y,I=y=0,Q=null,D=N.next();U!==null&&!D.done;I++,D=N.next()){U.index>I?(Q=U,U=null):Q=U.sibling;var S=p(w,U,D.value,R);if(S===null){U===null&&(U=Q);break}t&&U&&S.alternate===null&&e(w,U),y=i(S,y,I),j===null?V=S:j.sibling=S,j=S,U=Q}if(D.done)return n(w,U),Vn&&Jl(w,I),V;if(U===null){for(;!D.done;I++,D=N.next())D=f(w,D.value,R),D!==null&&(y=i(D,y,I),j===null?V=D:j.sibling=D,j=D);return Vn&&Jl(w,I),V}for(U=r(w,U);!D.done;I++,D=N.next())D=g(U,w,I,D.value,R),D!==null&&(t&&D.alternate!==null&&U.delete(D.key===null?I:D.key),y=i(D,y,I),j===null?V=D:j.sibling=D,j=D);return t&&U.forEach(function(_){return e(w,_)}),Vn&&Jl(w,I),V}function C(w,y,N,R){if(typeof N=="object"&&N!==null&&N.type===qu&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case fm:e:{for(var V=N.key,j=y;j!==null;){if(j.key===V){if(V=N.type,V===qu){if(j.tag===7){n(w,j.sibling),y=s(j,N.props.children),y.return=w,w=y;break e}}else if(j.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===NA&&IC(V)===j.type){n(w,j.sibling),y=s(j,N.props),y.ref=vh(w,j,N),y.return=w,w=y;break e}n(w,j);break}else e(w,j);j=j.sibling}N.type===qu?(y=pc(N.props.children,w.mode,R,N.key),y.return=w,w=y):(R=Ng(N.type,N.key,N.props,null,w.mode,R),R.ref=vh(w,y,N),R.return=w,w=R)}return a(w);case Gu:e:{for(j=N.key;y!==null;){if(y.key===j)if(y.tag===4&&y.stateNode.containerInfo===N.containerInfo&&y.stateNode.implementation===N.implementation){n(w,y.sibling),y=s(y,N.children||[]),y.return=w,w=y;break e}else{n(w,y);break}else e(w,y);y=y.sibling}y=Zv(N,w.mode,R),y.return=w,w=y}return a(w);case NA:return j=N._init,C(w,y,j(N._payload),R)}if(Mh(N))return B(w,y,N,R);if(fh(N))return b(w,y,N,R);Em(w,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,y!==null&&y.tag===6?(n(w,y.sibling),y=s(y,N),y.return=w,w=y):(n(w,y),y=Yv(N,w.mode,R),y.return=w,w=y),a(w)):n(w,y)}return C}var vd=HN(!0),VN=HN(!1),o0=yl(null),A0=null,ed=null,EB=null;function _B(){EB=ed=A0=null}function IB(t){var e=o0.current;jn(o0),t._currentValue=e}function C1(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ld(t,e){A0=t,EB=ed=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ks=!0),t.firstContext=null)}function Pi(t){var e=t._currentValue;if(EB!==t)if(t={context:t,memoizedValue:e,next:null},ed===null){if(A0===null)throw Error(Xe(308));ed=t,A0.dependencies={lanes:0,firstContext:t}}else ed=ed.next=t;return e}var lc=null;function NB(t){lc===null?lc=[t]:lc.push(t)}function KN(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,NB(e)):(n.next=s.next,s.next=n),e.interleaved=n,Po(t,r)}function Po(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var SA=!1;function SB(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function GN(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Eo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function JA(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,An&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Po(t,n)}return s=r.interleaved,s===null?(e.next=e,NB(r)):(e.next=s.next,s.next=e),r.interleaved=e,Po(t,n)}function xg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fB(t,n)}}function NC(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function l0(t,e,n,r){var s=t.updateQueue;SA=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var A=o,c=A.next;A.next=null,a===null?i=c:a.next=c,a=A;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=A))}if(i!==null){var f=s.baseState;a=0,d=c=A=null,o=i;do{var p=o.lane,g=o.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var B=t,b=o;switch(p=e,g=n,b.tag){case 1:if(B=b.payload,typeof B=="function"){f=B.call(g,f,p);break e}f=B;break e;case 3:B.flags=B.flags&-65537|128;case 0:if(B=b.payload,p=typeof B=="function"?B.call(g,f,p):B,p==null)break e;f=Zn({},f,p);break e;case 2:SA=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[o]:p.push(o))}else g={eventTime:g,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(c=d=g,A=f):d=d.next=g,a|=p;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;p=o,o=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(d===null&&(A=f),s.baseState=A,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ic|=a,t.lanes=a,t.memoizedState=f}}function SC(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Xe(191,s));s.call(r)}}}var yp={},Ra=yl(yp),Mf=yl(yp),Hf=yl(yp);function cc(t){if(t===yp)throw Error(Xe(174));return t}function FB(t,e){switch(Qn(Hf,e),Qn(Mf,t),Qn(Ra,yp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:s1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=s1(e,t)}jn(Ra),Qn(Ra,e)}function yd(){jn(Ra),jn(Mf),jn(Hf)}function qN(t){cc(Hf.current);var e=cc(Ra.current),n=s1(e,t.type);e!==n&&(Qn(Mf,t),Qn(Ra,n))}function TB(t){Mf.current===t&&(jn(Ra),jn(Mf))}var Jn=yl(0);function c0(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qv=[];function UB(){for(var t=0;t<qv.length;t++)qv[t]._workInProgressVersionPrimary=null;qv.length=0}var bg=Mo.ReactCurrentDispatcher,zv=Mo.ReactCurrentBatchConfig,_c=0,Yn=null,Ir=null,Hr=null,u0=!1,lf=!1,Vf=0,uL=0;function cs(){throw Error(Xe(321))}function QB(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sa(t[n],e[n]))return!1;return!0}function PB(t,e,n,r,s,i){if(_c=i,Yn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,bg.current=t===null||t.memoizedState===null?pL:mL,t=n(r,s),lf){i=0;do{if(lf=!1,Vf=0,25<=i)throw Error(Xe(301));i+=1,Hr=Ir=null,e.updateQueue=null,bg.current=gL,t=n(r,s)}while(lf)}if(bg.current=d0,e=Ir!==null&&Ir.next!==null,_c=0,Hr=Ir=Yn=null,u0=!1,e)throw Error(Xe(300));return t}function LB(){var t=Vf!==0;return Vf=0,t}function Sa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hr===null?Yn.memoizedState=Hr=t:Hr=Hr.next=t,Hr}function Li(){if(Ir===null){var t=Yn.alternate;t=t!==null?t.memoizedState:null}else t=Ir.next;var e=Hr===null?Yn.memoizedState:Hr.next;if(e!==null)Hr=e,Ir=t;else{if(t===null)throw Error(Xe(310));Ir=t,t={memoizedState:Ir.memoizedState,baseState:Ir.baseState,baseQueue:Ir.baseQueue,queue:Ir.queue,next:null},Hr===null?Yn.memoizedState=Hr=t:Hr=Hr.next=t}return Hr}function Kf(t,e){return typeof e=="function"?e(t):e}function Wv(t){var e=Li(),n=e.queue;if(n===null)throw Error(Xe(311));n.lastRenderedReducer=t;var r=Ir,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var o=a=null,A=null,c=i;do{var d=c.lane;if((_c&d)===d)A!==null&&(A=A.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};A===null?(o=A=f,a=r):A=A.next=f,Yn.lanes|=d,Ic|=d}c=c.next}while(c!==null&&c!==i);A===null?a=r:A.next=o,sa(r,e.memoizedState)||(Ks=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=A,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Yn.lanes|=i,Ic|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function $v(t){var e=Li(),n=e.queue;if(n===null)throw Error(Xe(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);sa(i,e.memoizedState)||(Ks=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function zN(){}function WN(t,e){var n=Yn,r=Li(),s=e(),i=!sa(r.memoizedState,s);if(i&&(r.memoizedState=s,Ks=!0),r=r.queue,RB(JN.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Hr!==null&&Hr.memoizedState.tag&1){if(n.flags|=2048,Gf(9,XN.bind(null,n,r,s,e),void 0,null),Vr===null)throw Error(Xe(349));_c&30||$N(n,e,s)}return s}function $N(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Yn.updateQueue,e===null?(e={lastEffect:null,stores:null},Yn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function XN(t,e,n,r){e.value=n,e.getSnapshot=r,YN(e)&&ZN(t)}function JN(t,e,n){return n(function(){YN(e)&&ZN(t)})}function YN(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sa(t,n)}catch{return!0}}function ZN(t){var e=Po(t,1);e!==null&&na(e,t,1,-1)}function FC(t){var e=Sa();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kf,lastRenderedState:t},e.queue=t,t=t.dispatch=fL.bind(null,Yn,t),[e.memoizedState,t]}function Gf(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Yn.updateQueue,e===null?(e={lastEffect:null,stores:null},Yn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function eS(){return Li().memoizedState}function Cg(t,e,n,r){var s=Sa();Yn.flags|=t,s.memoizedState=Gf(1|e,n,void 0,r===void 0?null:r)}function aw(t,e,n,r){var s=Li();r=r===void 0?null:r;var i=void 0;if(Ir!==null){var a=Ir.memoizedState;if(i=a.destroy,r!==null&&QB(r,a.deps)){s.memoizedState=Gf(e,n,i,r);return}}Yn.flags|=t,s.memoizedState=Gf(1|e,n,i,r)}function TC(t,e){return Cg(8390656,8,t,e)}function RB(t,e){return aw(2048,8,t,e)}function tS(t,e){return aw(4,2,t,e)}function nS(t,e){return aw(4,4,t,e)}function rS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function sS(t,e,n){return n=n!=null?n.concat([t]):null,aw(4,4,rS.bind(null,e,t),n)}function kB(){}function iS(t,e){var n=Li();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&QB(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function aS(t,e){var n=Li();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&QB(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function oS(t,e,n){return _c&21?(sa(n,e)||(n=dN(),Yn.lanes|=n,Ic|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ks=!0),t.memoizedState=n)}function dL(t,e){var n=xn;xn=n!==0&&4>n?n:4,t(!0);var r=zv.transition;zv.transition={};try{t(!1),e()}finally{xn=n,zv.transition=r}}function AS(){return Li().memoizedState}function hL(t,e,n){var r=ZA(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},lS(t))cS(e,n);else if(n=KN(t,e,n,r),n!==null){var s=Ts();na(n,t,r,s),uS(n,e,r)}}function fL(t,e,n){var r=ZA(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(lS(t))cS(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,sa(o,a)){var A=e.interleaved;A===null?(s.next=s,NB(e)):(s.next=A.next,A.next=s),e.interleaved=s;return}}catch{}finally{}n=KN(t,e,s,r),n!==null&&(s=Ts(),na(n,t,r,s),uS(n,e,r))}}function lS(t){var e=t.alternate;return t===Yn||e!==null&&e===Yn}function cS(t,e){lf=u0=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function uS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fB(t,n)}}var d0={readContext:Pi,useCallback:cs,useContext:cs,useEffect:cs,useImperativeHandle:cs,useInsertionEffect:cs,useLayoutEffect:cs,useMemo:cs,useReducer:cs,useRef:cs,useState:cs,useDebugValue:cs,useDeferredValue:cs,useTransition:cs,useMutableSource:cs,useSyncExternalStore:cs,useId:cs,unstable_isNewReconciler:!1},pL={readContext:Pi,useCallback:function(t,e){return Sa().memoizedState=[t,e===void 0?null:e],t},useContext:Pi,useEffect:TC,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Cg(4194308,4,rS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Cg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Cg(4,2,t,e)},useMemo:function(t,e){var n=Sa();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Sa();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=hL.bind(null,Yn,t),[r.memoizedState,t]},useRef:function(t){var e=Sa();return t={current:t},e.memoizedState=t},useState:FC,useDebugValue:kB,useDeferredValue:function(t){return Sa().memoizedState=t},useTransition:function(){var t=FC(!1),e=t[0];return t=dL.bind(null,t[1]),Sa().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Yn,s=Sa();if(Vn){if(n===void 0)throw Error(Xe(407));n=n()}else{if(n=e(),Vr===null)throw Error(Xe(349));_c&30||$N(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,TC(JN.bind(null,r,i,t),[t]),r.flags|=2048,Gf(9,XN.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Sa(),e=Vr.identifierPrefix;if(Vn){var n=vo,r=wo;n=(r&~(1<<32-ta(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Vf++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=uL++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mL={readContext:Pi,useCallback:iS,useContext:Pi,useEffect:RB,useImperativeHandle:sS,useInsertionEffect:tS,useLayoutEffect:nS,useMemo:aS,useReducer:Wv,useRef:eS,useState:function(){return Wv(Kf)},useDebugValue:kB,useDeferredValue:function(t){var e=Li();return oS(e,Ir.memoizedState,t)},useTransition:function(){var t=Wv(Kf)[0],e=Li().memoizedState;return[t,e]},useMutableSource:zN,useSyncExternalStore:WN,useId:AS,unstable_isNewReconciler:!1},gL={readContext:Pi,useCallback:iS,useContext:Pi,useEffect:RB,useImperativeHandle:sS,useInsertionEffect:tS,useLayoutEffect:nS,useMemo:aS,useReducer:$v,useRef:eS,useState:function(){return $v(Kf)},useDebugValue:kB,useDeferredValue:function(t){var e=Li();return Ir===null?e.memoizedState=t:oS(e,Ir.memoizedState,t)},useTransition:function(){var t=$v(Kf)[0],e=Li().memoizedState;return[t,e]},useMutableSource:zN,useSyncExternalStore:WN,useId:AS,unstable_isNewReconciler:!1};function Ji(t,e){if(t&&t.defaultProps){e=Zn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function E1(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Zn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ow={isMounted:function(t){return(t=t._reactInternals)?jc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ts(),s=ZA(t),i=Eo(r,s);i.payload=e,n!=null&&(i.callback=n),e=JA(t,i,s),e!==null&&(na(e,t,s,r),xg(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ts(),s=ZA(t),i=Eo(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=JA(t,i,s),e!==null&&(na(e,t,s,r),xg(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ts(),r=ZA(t),s=Eo(n,r);s.tag=2,e!=null&&(s.callback=e),e=JA(t,s,r),e!==null&&(na(e,t,r,n),xg(e,t,r))}};function UC(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!kf(n,r)||!kf(s,i):!0}function dS(t,e,n){var r=!1,s=ll,i=e.contextType;return typeof i=="object"&&i!==null?i=Pi(i):(s=zs(e)?Cc:bs.current,r=e.contextTypes,i=(r=r!=null)?gd(t,s):ll),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ow,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function QC(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ow.enqueueReplaceState(e,e.state,null)}function _1(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},SB(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Pi(i):(i=zs(e)?Cc:bs.current,s.context=gd(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(E1(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ow.enqueueReplaceState(s,s.state,null),l0(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Bd(t,e){try{var n="",r=e;do n+=GQ(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Xv(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function I1(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var wL=typeof WeakMap=="function"?WeakMap:Map;function hS(t,e,n){n=Eo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){f0||(f0=!0,k1=r),I1(t,e)},n}function fS(t,e,n){n=Eo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){I1(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){I1(t,e),typeof r!="function"&&(YA===null?YA=new Set([this]):YA.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function PC(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new wL;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=UL.bind(null,t,e,n),e.then(t,t))}function LC(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function RC(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Eo(-1,1),e.tag=2,JA(n,e,1))),n.lanes|=1),t)}var vL=Mo.ReactCurrentOwner,Ks=!1;function Ss(t,e,n,r){e.child=t===null?VN(e,null,n,r):vd(e,t.child,n,r)}function kC(t,e,n,r,s){n=n.render;var i=e.ref;return ld(e,s),r=PB(t,e,n,r,i,s),n=LB(),t!==null&&!Ks?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Lo(t,e,s)):(Vn&&n&&xB(e),e.flags|=1,Ss(t,e,r,s),e.child)}function DC(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!GB(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,pS(t,e,i,r,s)):(t=Ng(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:kf,n(a,r)&&t.ref===e.ref)return Lo(t,e,s)}return e.flags|=1,t=el(i,r),t.ref=e.ref,t.return=e,e.child=t}function pS(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(kf(i,r)&&t.ref===e.ref)if(Ks=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ks=!0);else return e.lanes=t.lanes,Lo(t,e,s)}return N1(t,e,n,r,s)}function mS(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qn(nd,si),si|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Qn(nd,si),si|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Qn(nd,si),si|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Qn(nd,si),si|=r;return Ss(t,e,s,n),e.child}function gS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function N1(t,e,n,r,s){var i=zs(n)?Cc:bs.current;return i=gd(e,i),ld(e,s),n=PB(t,e,n,r,i,s),r=LB(),t!==null&&!Ks?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Lo(t,e,s)):(Vn&&r&&xB(e),e.flags|=1,Ss(t,e,n,s),e.child)}function jC(t,e,n,r,s){if(zs(n)){var i=!0;s0(e)}else i=!1;if(ld(e,s),e.stateNode===null)Eg(t,e),dS(e,n,r),_1(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var A=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=Pi(c):(c=zs(n)?Cc:bs.current,c=gd(e,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||A!==c)&&QC(e,a,r,c),SA=!1;var p=e.memoizedState;a.state=p,l0(e,r,a,s),A=e.memoizedState,o!==r||p!==A||qs.current||SA?(typeof d=="function"&&(E1(e,n,d,r),A=e.memoizedState),(o=SA||UC(e,n,o,r,p,A,c))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=A),a.props=r,a.state=A,a.context=c,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,GN(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:Ji(e.type,o),a.props=c,f=e.pendingProps,p=a.context,A=n.contextType,typeof A=="object"&&A!==null?A=Pi(A):(A=zs(n)?Cc:bs.current,A=gd(e,A));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==f||p!==A)&&QC(e,a,r,A),SA=!1,p=e.memoizedState,a.state=p,l0(e,r,a,s);var B=e.memoizedState;o!==f||p!==B||qs.current||SA?(typeof g=="function"&&(E1(e,n,g,r),B=e.memoizedState),(c=SA||UC(e,n,c,r,p,B,A)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,B,A),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,B,A)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=B),a.props=r,a.state=B,a.context=A,r=c):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return S1(t,e,n,r,i,s)}function S1(t,e,n,r,s,i){gS(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&CC(e,n,!1),Lo(t,e,i);r=e.stateNode,vL.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=vd(e,t.child,null,i),e.child=vd(e,null,o,i)):Ss(t,e,o,i),e.memoizedState=r.state,s&&CC(e,n,!0),e.child}function wS(t){var e=t.stateNode;e.pendingContext?bC(t,e.pendingContext,e.pendingContext!==e.context):e.context&&bC(t,e.context,!1),FB(t,e.containerInfo)}function OC(t,e,n,r,s){return wd(),CB(s),e.flags|=256,Ss(t,e,n,r),e.child}var F1={dehydrated:null,treeContext:null,retryLane:0};function T1(t){return{baseLanes:t,cachePool:null,transitions:null}}function vS(t,e,n){var r=e.pendingProps,s=Jn.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Qn(Jn,s&1),t===null)return b1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=cw(a,r,0,null),t=pc(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=T1(n),e.memoizedState=F1,t):DB(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return yL(t,e,a,r,o,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,o=s.sibling;var A={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=A,e.deletions=null):(r=el(s,A),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=el(o,i):(i=pc(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?T1(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=F1,r}return i=t.child,t=i.sibling,r=el(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function DB(t,e){return e=cw({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function _m(t,e,n,r){return r!==null&&CB(r),vd(e,t.child,null,n),t=DB(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function yL(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Xv(Error(Xe(422))),_m(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=cw({mode:"visible",children:r.children},s,0,null),i=pc(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&vd(e,t.child,null,a),e.child.memoizedState=T1(a),e.memoizedState=F1,i);if(!(e.mode&1))return _m(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(Xe(419)),r=Xv(i,r,void 0),_m(t,e,a,r)}if(o=(a&t.childLanes)!==0,Ks||o){if(r=Vr,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Po(t,s),na(r,t,s,-1))}return KB(),r=Xv(Error(Xe(421))),_m(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=QL.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,ii=XA(s.nextSibling),Ai=e,Vn=!0,ea=null,t!==null&&(Ei[_i++]=wo,Ei[_i++]=vo,Ei[_i++]=Ec,wo=t.id,vo=t.overflow,Ec=e),e=DB(e,r.children),e.flags|=4096,e)}function MC(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),C1(t.return,e,n)}function Jv(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function yS(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ss(t,e,r.children,n),r=Jn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&MC(t,n,e);else if(t.tag===19)MC(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Qn(Jn,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&c0(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Jv(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&c0(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Jv(e,!0,n,null,i);break;case"together":Jv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Eg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Lo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ic|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Xe(153));if(e.child!==null){for(t=e.child,n=el(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=el(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function BL(t,e,n){switch(e.tag){case 3:wS(e),wd();break;case 5:qN(e);break;case 1:zs(e.type)&&s0(e);break;case 4:FB(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Qn(o0,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Qn(Jn,Jn.current&1),e.flags|=128,null):n&e.child.childLanes?vS(t,e,n):(Qn(Jn,Jn.current&1),t=Lo(t,e,n),t!==null?t.sibling:null);Qn(Jn,Jn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return yS(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Qn(Jn,Jn.current),r)break;return null;case 22:case 23:return e.lanes=0,mS(t,e,n)}return Lo(t,e,n)}var BS,U1,xS,bS;BS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};U1=function(){};xS=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,cc(Ra.current);var i=null;switch(n){case"input":s=e1(t,s),r=e1(t,r),i=[];break;case"select":s=Zn({},s,{value:void 0}),r=Zn({},r,{value:void 0}),i=[];break;case"textarea":s=r1(t,s),r=r1(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=n0)}i1(n,r);var a;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ff.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var A=r[c];if(o=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&A!==o&&(A!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||A&&A.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in A)A.hasOwnProperty(a)&&o[a]!==A[a]&&(n||(n={}),n[a]=A[a])}else n||(i||(i=[]),i.push(c,n)),n=A;else c==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,o=o?o.__html:void 0,A!=null&&o!==A&&(i=i||[]).push(c,A)):c==="children"?typeof A!="string"&&typeof A!="number"||(i=i||[]).push(c,""+A):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ff.hasOwnProperty(c)?(A!=null&&c==="onScroll"&&Rn("scroll",t),i||o===A||(i=[])):(i=i||[]).push(c,A))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};bS=function(t,e,n,r){n!==r&&(e.flags|=4)};function yh(t,e){if(!Vn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function us(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function xL(t,e,n){var r=e.pendingProps;switch(bB(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return us(e),null;case 1:return zs(e.type)&&r0(),us(e),null;case 3:return r=e.stateNode,yd(),jn(qs),jn(bs),UB(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Cm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ea!==null&&(O1(ea),ea=null))),U1(t,e),us(e),null;case 5:TB(e);var s=cc(Hf.current);if(n=e.type,t!==null&&e.stateNode!=null)xS(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Xe(166));return us(e),null}if(t=cc(Ra.current),Cm(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Fa]=e,r[Of]=i,t=(e.mode&1)!==0,n){case"dialog":Rn("cancel",r),Rn("close",r);break;case"iframe":case"object":case"embed":Rn("load",r);break;case"video":case"audio":for(s=0;s<Vh.length;s++)Rn(Vh[s],r);break;case"source":Rn("error",r);break;case"img":case"image":case"link":Rn("error",r),Rn("load",r);break;case"details":Rn("toggle",r);break;case"input":Xb(r,i),Rn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Rn("invalid",r);break;case"textarea":Yb(r,i),Rn("invalid",r)}i1(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&bm(r.textContent,o,t),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&bm(r.textContent,o,t),s=["children",""+o]):Ff.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Rn("scroll",r)}switch(n){case"input":pm(r),Jb(r,i,!0);break;case"textarea":pm(r),Zb(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=n0)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=JI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Fa]=e,t[Of]=r,BS(t,e,!1,!1),e.stateNode=t;e:{switch(a=a1(n,r),n){case"dialog":Rn("cancel",t),Rn("close",t),s=r;break;case"iframe":case"object":case"embed":Rn("load",t),s=r;break;case"video":case"audio":for(s=0;s<Vh.length;s++)Rn(Vh[s],t);s=r;break;case"source":Rn("error",t),s=r;break;case"img":case"image":case"link":Rn("error",t),Rn("load",t),s=r;break;case"details":Rn("toggle",t),s=r;break;case"input":Xb(t,r),s=e1(t,r),Rn("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Zn({},r,{value:void 0}),Rn("invalid",t);break;case"textarea":Yb(t,r),s=r1(t,r),Rn("invalid",t);break;default:s=r}i1(n,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var A=o[i];i==="style"?eN(t,A):i==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&YI(t,A)):i==="children"?typeof A=="string"?(n!=="textarea"||A!=="")&&Tf(t,A):typeof A=="number"&&Tf(t,""+A):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ff.hasOwnProperty(i)?A!=null&&i==="onScroll"&&Rn("scroll",t):A!=null&&AB(t,i,A,a))}switch(n){case"input":pm(t),Jb(t,r,!1);break;case"textarea":pm(t),Zb(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Al(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?id(t,!!r.multiple,i,!1):r.defaultValue!=null&&id(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=n0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return us(e),null;case 6:if(t&&e.stateNode!=null)bS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Xe(166));if(n=cc(Hf.current),cc(Ra.current),Cm(e)){if(r=e.stateNode,n=e.memoizedProps,r[Fa]=e,(i=r.nodeValue!==n)&&(t=Ai,t!==null))switch(t.tag){case 3:bm(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&bm(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Fa]=e,e.stateNode=r}return us(e),null;case 13:if(jn(Jn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Vn&&ii!==null&&e.mode&1&&!(e.flags&128))MN(),wd(),e.flags|=98560,i=!1;else if(i=Cm(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Xe(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Xe(317));i[Fa]=e}else wd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;us(e),i=!1}else ea!==null&&(O1(ea),ea=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Jn.current&1?Fr===0&&(Fr=3):KB())),e.updateQueue!==null&&(e.flags|=4),us(e),null);case 4:return yd(),U1(t,e),t===null&&Df(e.stateNode.containerInfo),us(e),null;case 10:return IB(e.type._context),us(e),null;case 17:return zs(e.type)&&r0(),us(e),null;case 19:if(jn(Jn),i=e.memoizedState,i===null)return us(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)yh(i,!1);else{if(Fr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=c0(t),a!==null){for(e.flags|=128,yh(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Qn(Jn,Jn.current&1|2),e.child}t=t.sibling}i.tail!==null&&pr()>xd&&(e.flags|=128,r=!0,yh(i,!1),e.lanes=4194304)}else{if(!r)if(t=c0(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),yh(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Vn)return us(e),null}else 2*pr()-i.renderingStartTime>xd&&n!==1073741824&&(e.flags|=128,r=!0,yh(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=pr(),e.sibling=null,n=Jn.current,Qn(Jn,r?n&1|2:n&1),e):(us(e),null);case 22:case 23:return VB(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?si&1073741824&&(us(e),e.subtreeFlags&6&&(e.flags|=8192)):us(e),null;case 24:return null;case 25:return null}throw Error(Xe(156,e.tag))}function bL(t,e){switch(bB(e),e.tag){case 1:return zs(e.type)&&r0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return yd(),jn(qs),jn(bs),UB(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return TB(e),null;case 13:if(jn(Jn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Xe(340));wd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return jn(Jn),null;case 4:return yd(),null;case 10:return IB(e.type._context),null;case 22:case 23:return VB(),null;case 24:return null;default:return null}}var Im=!1,ys=!1,CL=typeof WeakSet=="function"?WeakSet:Set,gt=null;function td(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ir(t,e,r)}else n.current=null}function Q1(t,e,n){try{n()}catch(r){ir(t,e,r)}}var HC=!1;function EL(t,e){if(m1=Zg,t=NN(),BB(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,o=-1,A=-1,c=0,d=0,f=t,p=null;t:for(;;){for(var g;f!==n||s!==0&&f.nodeType!==3||(o=a+s),f!==i||r!==0&&f.nodeType!==3||(A=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===t)break t;if(p===n&&++c===s&&(o=a),p===i&&++d===r&&(A=a),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}n=o===-1||A===-1?null:{start:o,end:A}}else n=null}n=n||{start:0,end:0}}else n=null;for(g1={focusedElem:t,selectionRange:n},Zg=!1,gt=e;gt!==null;)if(e=gt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,gt=t;else for(;gt!==null;){e=gt;try{var B=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(B!==null){var b=B.memoizedProps,C=B.memoizedState,w=e.stateNode,y=w.getSnapshotBeforeUpdate(e.elementType===e.type?b:Ji(e.type,b),C);w.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Xe(163))}}catch(R){ir(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,gt=t;break}gt=e.return}return B=HC,HC=!1,B}function cf(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Q1(e,n,i)}s=s.next}while(s!==r)}}function Aw(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function P1(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function CS(t){var e=t.alternate;e!==null&&(t.alternate=null,CS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Fa],delete e[Of],delete e[y1],delete e[oL],delete e[AL])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ES(t){return t.tag===5||t.tag===3||t.tag===4}function VC(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ES(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function L1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=n0));else if(r!==4&&(t=t.child,t!==null))for(L1(t,e,n),t=t.sibling;t!==null;)L1(t,e,n),t=t.sibling}function R1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(R1(t,e,n),t=t.sibling;t!==null;)R1(t,e,n),t=t.sibling}var es=null,Zi=!1;function wA(t,e,n){for(n=n.child;n!==null;)_S(t,e,n),n=n.sibling}function _S(t,e,n){if(La&&typeof La.onCommitFiberUnmount=="function")try{La.onCommitFiberUnmount(ew,n)}catch{}switch(n.tag){case 5:ys||td(n,e);case 6:var r=es,s=Zi;es=null,wA(t,e,n),es=r,Zi=s,es!==null&&(Zi?(t=es,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):es.removeChild(n.stateNode));break;case 18:es!==null&&(Zi?(t=es,n=n.stateNode,t.nodeType===8?Kv(t.parentNode,n):t.nodeType===1&&Kv(t,n),Lf(t)):Kv(es,n.stateNode));break;case 4:r=es,s=Zi,es=n.stateNode.containerInfo,Zi=!0,wA(t,e,n),es=r,Zi=s;break;case 0:case 11:case 14:case 15:if(!ys&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Q1(n,e,a),s=s.next}while(s!==r)}wA(t,e,n);break;case 1:if(!ys&&(td(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){ir(n,e,o)}wA(t,e,n);break;case 21:wA(t,e,n);break;case 22:n.mode&1?(ys=(r=ys)||n.memoizedState!==null,wA(t,e,n),ys=r):wA(t,e,n);break;default:wA(t,e,n)}}function KC(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new CL),e.forEach(function(r){var s=PL.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function qi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:es=o.stateNode,Zi=!1;break e;case 3:es=o.stateNode.containerInfo,Zi=!0;break e;case 4:es=o.stateNode.containerInfo,Zi=!0;break e}o=o.return}if(es===null)throw Error(Xe(160));_S(i,a,s),es=null,Zi=!1;var A=s.alternate;A!==null&&(A.return=null),s.return=null}catch(c){ir(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)IS(e,t),e=e.sibling}function IS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qi(e,t),_a(t),r&4){try{cf(3,t,t.return),Aw(3,t)}catch(b){ir(t,t.return,b)}try{cf(5,t,t.return)}catch(b){ir(t,t.return,b)}}break;case 1:qi(e,t),_a(t),r&512&&n!==null&&td(n,n.return);break;case 5:if(qi(e,t),_a(t),r&512&&n!==null&&td(n,n.return),t.flags&32){var s=t.stateNode;try{Tf(s,"")}catch(b){ir(t,t.return,b)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,o=t.type,A=t.updateQueue;if(t.updateQueue=null,A!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&$I(s,i),a1(o,a);var c=a1(o,i);for(a=0;a<A.length;a+=2){var d=A[a],f=A[a+1];d==="style"?eN(s,f):d==="dangerouslySetInnerHTML"?YI(s,f):d==="children"?Tf(s,f):AB(s,d,f,c)}switch(o){case"input":t1(s,i);break;case"textarea":XI(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?id(s,!!i.multiple,g,!1):p!==!!i.multiple&&(i.defaultValue!=null?id(s,!!i.multiple,i.defaultValue,!0):id(s,!!i.multiple,i.multiple?[]:"",!1))}s[Of]=i}catch(b){ir(t,t.return,b)}}break;case 6:if(qi(e,t),_a(t),r&4){if(t.stateNode===null)throw Error(Xe(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(b){ir(t,t.return,b)}}break;case 3:if(qi(e,t),_a(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Lf(e.containerInfo)}catch(b){ir(t,t.return,b)}break;case 4:qi(e,t),_a(t);break;case 13:qi(e,t),_a(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(MB=pr())),r&4&&KC(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(ys=(c=ys)||d,qi(e,t),ys=c):qi(e,t),_a(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(gt=t,d=t.child;d!==null;){for(f=gt=d;gt!==null;){switch(p=gt,g=p.child,p.tag){case 0:case 11:case 14:case 15:cf(4,p,p.return);break;case 1:td(p,p.return);var B=p.stateNode;if(typeof B.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,B.props=e.memoizedProps,B.state=e.memoizedState,B.componentWillUnmount()}catch(b){ir(r,n,b)}}break;case 5:td(p,p.return);break;case 22:if(p.memoizedState!==null){qC(f);continue}}g!==null?(g.return=p,gt=g):qC(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=f.stateNode,A=f.memoizedProps.style,a=A!=null&&A.hasOwnProperty("display")?A.display:null,o.style.display=ZI("display",a))}catch(b){ir(t,t.return,b)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(b){ir(t,t.return,b)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:qi(e,t),_a(t),r&4&&KC(t);break;case 21:break;default:qi(e,t),_a(t)}}function _a(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ES(n)){var r=n;break e}n=n.return}throw Error(Xe(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Tf(s,""),r.flags&=-33);var i=VC(t);R1(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,o=VC(t);L1(t,o,a);break;default:throw Error(Xe(161))}}catch(A){ir(t,t.return,A)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _L(t,e,n){gt=t,NS(t)}function NS(t,e,n){for(var r=(t.mode&1)!==0;gt!==null;){var s=gt,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Im;if(!a){var o=s.alternate,A=o!==null&&o.memoizedState!==null||ys;o=Im;var c=ys;if(Im=a,(ys=A)&&!c)for(gt=s;gt!==null;)a=gt,A=a.child,a.tag===22&&a.memoizedState!==null?zC(s):A!==null?(A.return=a,gt=A):zC(s);for(;i!==null;)gt=i,NS(i),i=i.sibling;gt=s,Im=o,ys=c}GC(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,gt=i):GC(t)}}function GC(t){for(;gt!==null;){var e=gt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ys||Aw(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ys)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ji(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&SC(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}SC(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var A=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&n.focus();break;case"img":A.src&&(n.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Lf(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Xe(163))}ys||e.flags&512&&P1(e)}catch(p){ir(e,e.return,p)}}if(e===t){gt=null;break}if(n=e.sibling,n!==null){n.return=e.return,gt=n;break}gt=e.return}}function qC(t){for(;gt!==null;){var e=gt;if(e===t){gt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,gt=n;break}gt=e.return}}function zC(t){for(;gt!==null;){var e=gt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Aw(4,e)}catch(A){ir(e,n,A)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(A){ir(e,s,A)}}var i=e.return;try{P1(e)}catch(A){ir(e,i,A)}break;case 5:var a=e.return;try{P1(e)}catch(A){ir(e,a,A)}}}catch(A){ir(e,e.return,A)}if(e===t){gt=null;break}var o=e.sibling;if(o!==null){o.return=e.return,gt=o;break}gt=e.return}}var IL=Math.ceil,h0=Mo.ReactCurrentDispatcher,jB=Mo.ReactCurrentOwner,Ui=Mo.ReactCurrentBatchConfig,An=0,Vr=null,Cr=null,os=0,si=0,nd=yl(0),Fr=0,qf=null,Ic=0,lw=0,OB=0,uf=null,Vs=null,MB=0,xd=1/0,mo=null,f0=!1,k1=null,YA=null,Nm=!1,MA=null,p0=0,df=0,D1=null,_g=-1,Ig=0;function Ts(){return An&6?pr():_g!==-1?_g:_g=pr()}function ZA(t){return t.mode&1?An&2&&os!==0?os&-os:cL.transition!==null?(Ig===0&&(Ig=dN()),Ig):(t=xn,t!==0||(t=window.event,t=t===void 0?16:vN(t.type)),t):1}function na(t,e,n,r){if(50<df)throw df=0,D1=null,Error(Xe(185));gp(t,n,r),(!(An&2)||t!==Vr)&&(t===Vr&&(!(An&2)&&(lw|=n),Fr===4&&UA(t,os)),Ws(t,r),n===1&&An===0&&!(e.mode&1)&&(xd=pr()+500,iw&&Bl()))}function Ws(t,e){var n=t.callbackNode;cP(t,e);var r=Yg(t,t===Vr?os:0);if(r===0)n!==null&&nC(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&nC(n),e===1)t.tag===0?lL(WC.bind(null,t)):DN(WC.bind(null,t)),iL(function(){!(An&6)&&Bl()}),n=null;else{switch(hN(r)){case 1:n=hB;break;case 4:n=cN;break;case 16:n=Jg;break;case 536870912:n=uN;break;default:n=Jg}n=RS(n,SS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function SS(t,e){if(_g=-1,Ig=0,An&6)throw Error(Xe(327));var n=t.callbackNode;if(cd()&&t.callbackNode!==n)return null;var r=Yg(t,t===Vr?os:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=m0(t,r);else{e=r;var s=An;An|=2;var i=TS();(Vr!==t||os!==e)&&(mo=null,xd=pr()+500,fc(t,e));do try{FL();break}catch(o){FS(t,o)}while(!0);_B(),h0.current=i,An=s,Cr!==null?e=0:(Vr=null,os=0,e=Fr)}if(e!==0){if(e===2&&(s=u1(t),s!==0&&(r=s,e=j1(t,s))),e===1)throw n=qf,fc(t,0),UA(t,r),Ws(t,pr()),n;if(e===6)UA(t,r);else{if(s=t.current.alternate,!(r&30)&&!NL(s)&&(e=m0(t,r),e===2&&(i=u1(t),i!==0&&(r=i,e=j1(t,i))),e===1))throw n=qf,fc(t,0),UA(t,r),Ws(t,pr()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Xe(345));case 2:Yl(t,Vs,mo);break;case 3:if(UA(t,r),(r&130023424)===r&&(e=MB+500-pr(),10<e)){if(Yg(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ts(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=v1(Yl.bind(null,t,Vs,mo),e);break}Yl(t,Vs,mo);break;case 4:if(UA(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-ta(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=pr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*IL(r/1960))-r,10<r){t.timeoutHandle=v1(Yl.bind(null,t,Vs,mo),r);break}Yl(t,Vs,mo);break;case 5:Yl(t,Vs,mo);break;default:throw Error(Xe(329))}}}return Ws(t,pr()),t.callbackNode===n?SS.bind(null,t):null}function j1(t,e){var n=uf;return t.current.memoizedState.isDehydrated&&(fc(t,e).flags|=256),t=m0(t,e),t!==2&&(e=Vs,Vs=n,e!==null&&O1(e)),t}function O1(t){Vs===null?Vs=t:Vs.push.apply(Vs,t)}function NL(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!sa(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function UA(t,e){for(e&=~OB,e&=~lw,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ta(e),r=1<<n;t[n]=-1,e&=~r}}function WC(t){if(An&6)throw Error(Xe(327));cd();var e=Yg(t,0);if(!(e&1))return Ws(t,pr()),null;var n=m0(t,e);if(t.tag!==0&&n===2){var r=u1(t);r!==0&&(e=r,n=j1(t,r))}if(n===1)throw n=qf,fc(t,0),UA(t,e),Ws(t,pr()),n;if(n===6)throw Error(Xe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Yl(t,Vs,mo),Ws(t,pr()),null}function HB(t,e){var n=An;An|=1;try{return t(e)}finally{An=n,An===0&&(xd=pr()+500,iw&&Bl())}}function Nc(t){MA!==null&&MA.tag===0&&!(An&6)&&cd();var e=An;An|=1;var n=Ui.transition,r=xn;try{if(Ui.transition=null,xn=1,t)return t()}finally{xn=r,Ui.transition=n,An=e,!(An&6)&&Bl()}}function VB(){si=nd.current,jn(nd)}function fc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,sL(n)),Cr!==null)for(n=Cr.return;n!==null;){var r=n;switch(bB(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&r0();break;case 3:yd(),jn(qs),jn(bs),UB();break;case 5:TB(r);break;case 4:yd();break;case 13:jn(Jn);break;case 19:jn(Jn);break;case 10:IB(r.type._context);break;case 22:case 23:VB()}n=n.return}if(Vr=t,Cr=t=el(t.current,null),os=si=e,Fr=0,qf=null,OB=lw=Ic=0,Vs=uf=null,lc!==null){for(e=0;e<lc.length;e++)if(n=lc[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}lc=null}return t}function FS(t,e){do{var n=Cr;try{if(_B(),bg.current=d0,u0){for(var r=Yn.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}u0=!1}if(_c=0,Hr=Ir=Yn=null,lf=!1,Vf=0,jB.current=null,n===null||n.return===null){Fr=1,qf=e,Cr=null;break}e:{var i=t,a=n.return,o=n,A=e;if(e=os,o.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var c=A,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=LC(a);if(g!==null){g.flags&=-257,RC(g,a,o,i,e),g.mode&1&&PC(i,c,e),e=g,A=c;var B=e.updateQueue;if(B===null){var b=new Set;b.add(A),e.updateQueue=b}else B.add(A);break e}else{if(!(e&1)){PC(i,c,e),KB();break e}A=Error(Xe(426))}}else if(Vn&&o.mode&1){var C=LC(a);if(C!==null){!(C.flags&65536)&&(C.flags|=256),RC(C,a,o,i,e),CB(Bd(A,o));break e}}i=A=Bd(A,o),Fr!==4&&(Fr=2),uf===null?uf=[i]:uf.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=hS(i,A,e);NC(i,w);break e;case 1:o=A;var y=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(YA===null||!YA.has(N)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=fS(i,o,e);NC(i,R);break e}}i=i.return}while(i!==null)}QS(n)}catch(V){e=V,Cr===n&&n!==null&&(Cr=n=n.return);continue}break}while(!0)}function TS(){var t=h0.current;return h0.current=d0,t===null?d0:t}function KB(){(Fr===0||Fr===3||Fr===2)&&(Fr=4),Vr===null||!(Ic&268435455)&&!(lw&268435455)||UA(Vr,os)}function m0(t,e){var n=An;An|=2;var r=TS();(Vr!==t||os!==e)&&(mo=null,fc(t,e));do try{SL();break}catch(s){FS(t,s)}while(!0);if(_B(),An=n,h0.current=r,Cr!==null)throw Error(Xe(261));return Vr=null,os=0,Fr}function SL(){for(;Cr!==null;)US(Cr)}function FL(){for(;Cr!==null&&!tP();)US(Cr)}function US(t){var e=LS(t.alternate,t,si);t.memoizedProps=t.pendingProps,e===null?QS(t):Cr=e,jB.current=null}function QS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=bL(n,e),n!==null){n.flags&=32767,Cr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fr=6,Cr=null;return}}else if(n=xL(n,e,si),n!==null){Cr=n;return}if(e=e.sibling,e!==null){Cr=e;return}Cr=e=t}while(e!==null);Fr===0&&(Fr=5)}function Yl(t,e,n){var r=xn,s=Ui.transition;try{Ui.transition=null,xn=1,TL(t,e,n,r)}finally{Ui.transition=s,xn=r}return null}function TL(t,e,n,r){do cd();while(MA!==null);if(An&6)throw Error(Xe(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Xe(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(uP(t,i),t===Vr&&(Cr=Vr=null,os=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Nm||(Nm=!0,RS(Jg,function(){return cd(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ui.transition,Ui.transition=null;var a=xn;xn=1;var o=An;An|=4,jB.current=null,EL(t,n),IS(n,t),JP(g1),Zg=!!m1,g1=m1=null,t.current=n,_L(n),nP(),An=o,xn=a,Ui.transition=i}else t.current=n;if(Nm&&(Nm=!1,MA=t,p0=s),i=t.pendingLanes,i===0&&(YA=null),iP(n.stateNode),Ws(t,pr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(f0)throw f0=!1,t=k1,k1=null,t;return p0&1&&t.tag!==0&&cd(),i=t.pendingLanes,i&1?t===D1?df++:(df=0,D1=t):df=0,Bl(),null}function cd(){if(MA!==null){var t=hN(p0),e=Ui.transition,n=xn;try{if(Ui.transition=null,xn=16>t?16:t,MA===null)var r=!1;else{if(t=MA,MA=null,p0=0,An&6)throw Error(Xe(331));var s=An;for(An|=4,gt=t.current;gt!==null;){var i=gt,a=i.child;if(gt.flags&16){var o=i.deletions;if(o!==null){for(var A=0;A<o.length;A++){var c=o[A];for(gt=c;gt!==null;){var d=gt;switch(d.tag){case 0:case 11:case 15:cf(8,d,i)}var f=d.child;if(f!==null)f.return=d,gt=f;else for(;gt!==null;){d=gt;var p=d.sibling,g=d.return;if(CS(d),d===c){gt=null;break}if(p!==null){p.return=g,gt=p;break}gt=g}}}var B=i.alternate;if(B!==null){var b=B.child;if(b!==null){B.child=null;do{var C=b.sibling;b.sibling=null,b=C}while(b!==null)}}gt=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,gt=a;else e:for(;gt!==null;){if(i=gt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:cf(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,gt=w;break e}gt=i.return}}var y=t.current;for(gt=y;gt!==null;){a=gt;var N=a.child;if(a.subtreeFlags&2064&&N!==null)N.return=a,gt=N;else e:for(a=y;gt!==null;){if(o=gt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Aw(9,o)}}catch(V){ir(o,o.return,V)}if(o===a){gt=null;break e}var R=o.sibling;if(R!==null){R.return=o.return,gt=R;break e}gt=o.return}}if(An=s,Bl(),La&&typeof La.onPostCommitFiberRoot=="function")try{La.onPostCommitFiberRoot(ew,t)}catch{}r=!0}return r}finally{xn=n,Ui.transition=e}}return!1}function $C(t,e,n){e=Bd(n,e),e=hS(t,e,1),t=JA(t,e,1),e=Ts(),t!==null&&(gp(t,1,e),Ws(t,e))}function ir(t,e,n){if(t.tag===3)$C(t,t,n);else for(;e!==null;){if(e.tag===3){$C(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(YA===null||!YA.has(r))){t=Bd(n,t),t=fS(e,t,1),e=JA(e,t,1),t=Ts(),e!==null&&(gp(e,1,t),Ws(e,t));break}}e=e.return}}function UL(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ts(),t.pingedLanes|=t.suspendedLanes&n,Vr===t&&(os&n)===n&&(Fr===4||Fr===3&&(os&130023424)===os&&500>pr()-MB?fc(t,0):OB|=n),Ws(t,e)}function PS(t,e){e===0&&(t.mode&1?(e=wm,wm<<=1,!(wm&130023424)&&(wm=4194304)):e=1);var n=Ts();t=Po(t,e),t!==null&&(gp(t,e,n),Ws(t,n))}function QL(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),PS(t,n)}function PL(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Xe(314))}r!==null&&r.delete(e),PS(t,n)}var LS;LS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||qs.current)Ks=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ks=!1,BL(t,e,n);Ks=!!(t.flags&131072)}else Ks=!1,Vn&&e.flags&1048576&&jN(e,a0,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Eg(t,e),t=e.pendingProps;var s=gd(e,bs.current);ld(e,n),s=PB(null,e,r,t,s,n);var i=LB();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zs(r)?(i=!0,s0(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,SB(e),s.updater=ow,e.stateNode=s,s._reactInternals=e,_1(e,r,t,n),e=S1(null,e,r,!0,i,n)):(e.tag=0,Vn&&i&&xB(e),Ss(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Eg(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=RL(r),t=Ji(r,t),s){case 0:e=N1(null,e,r,t,n);break e;case 1:e=jC(null,e,r,t,n);break e;case 11:e=kC(null,e,r,t,n);break e;case 14:e=DC(null,e,r,Ji(r.type,t),n);break e}throw Error(Xe(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ji(r,s),N1(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ji(r,s),jC(t,e,r,s,n);case 3:e:{if(wS(e),t===null)throw Error(Xe(387));r=e.pendingProps,i=e.memoizedState,s=i.element,GN(t,e),l0(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Bd(Error(Xe(423)),e),e=OC(t,e,r,n,s);break e}else if(r!==s){s=Bd(Error(Xe(424)),e),e=OC(t,e,r,n,s);break e}else for(ii=XA(e.stateNode.containerInfo.firstChild),Ai=e,Vn=!0,ea=null,n=VN(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wd(),r===s){e=Lo(t,e,n);break e}Ss(t,e,r,n)}e=e.child}return e;case 5:return qN(e),t===null&&b1(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,w1(r,s)?a=null:i!==null&&w1(r,i)&&(e.flags|=32),gS(t,e),Ss(t,e,a,n),e.child;case 6:return t===null&&b1(e),null;case 13:return vS(t,e,n);case 4:return FB(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=vd(e,null,r,n):Ss(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ji(r,s),kC(t,e,r,s,n);case 7:return Ss(t,e,e.pendingProps,n),e.child;case 8:return Ss(t,e,e.pendingProps.children,n),e.child;case 12:return Ss(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Qn(o0,r._currentValue),r._currentValue=a,i!==null)if(sa(i.value,a)){if(i.children===s.children&&!qs.current){e=Lo(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var A=o.firstContext;A!==null;){if(A.context===r){if(i.tag===1){A=Eo(-1,n&-n),A.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?A.next=A:(A.next=d.next,d.next=A),c.pending=A}}i.lanes|=n,A=i.alternate,A!==null&&(A.lanes|=n),C1(i.return,n,e),o.lanes|=n;break}A=A.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(Xe(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),C1(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Ss(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ld(e,n),s=Pi(s),r=r(s),e.flags|=1,Ss(t,e,r,n),e.child;case 14:return r=e.type,s=Ji(r,e.pendingProps),s=Ji(r.type,s),DC(t,e,r,s,n);case 15:return pS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ji(r,s),Eg(t,e),e.tag=1,zs(r)?(t=!0,s0(e)):t=!1,ld(e,n),dS(e,r,s),_1(e,r,s,n),S1(null,e,r,!0,t,n);case 19:return yS(t,e,n);case 22:return mS(t,e,n)}throw Error(Xe(156,e.tag))};function RS(t,e){return lN(t,e)}function LL(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ni(t,e,n,r){return new LL(t,e,n,r)}function GB(t){return t=t.prototype,!(!t||!t.isReactComponent)}function RL(t){if(typeof t=="function")return GB(t)?1:0;if(t!=null){if(t=t.$$typeof,t===cB)return 11;if(t===uB)return 14}return 2}function el(t,e){var n=t.alternate;return n===null?(n=Ni(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ng(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")GB(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case qu:return pc(n.children,s,i,e);case lB:a=8,s|=8;break;case Xy:return t=Ni(12,n,e,s|2),t.elementType=Xy,t.lanes=i,t;case Jy:return t=Ni(13,n,e,s),t.elementType=Jy,t.lanes=i,t;case Yy:return t=Ni(19,n,e,s),t.elementType=Yy,t.lanes=i,t;case qI:return cw(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case KI:a=10;break e;case GI:a=9;break e;case cB:a=11;break e;case uB:a=14;break e;case NA:a=16,r=null;break e}throw Error(Xe(130,t==null?t:typeof t,""))}return e=Ni(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function pc(t,e,n,r){return t=Ni(7,t,r,e),t.lanes=n,t}function cw(t,e,n,r){return t=Ni(22,t,r,e),t.elementType=qI,t.lanes=n,t.stateNode={isHidden:!1},t}function Yv(t,e,n){return t=Ni(6,t,null,e),t.lanes=n,t}function Zv(t,e,n){return e=Ni(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function kL(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qv(0),this.expirationTimes=Qv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qv(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function qB(t,e,n,r,s,i,a,o,A){return t=new kL(t,e,n,o,A),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ni(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},SB(i),t}function DL(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gu,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function kS(t){if(!t)return ll;t=t._reactInternals;e:{if(jc(t)!==t||t.tag!==1)throw Error(Xe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(zs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Xe(171))}if(t.tag===1){var n=t.type;if(zs(n))return kN(t,n,e)}return e}function DS(t,e,n,r,s,i,a,o,A){return t=qB(n,r,!0,t,s,i,a,o,A),t.context=kS(null),n=t.current,r=Ts(),s=ZA(n),i=Eo(r,s),i.callback=e??null,JA(n,i,s),t.current.lanes=s,gp(t,s,r),Ws(t,r),t}function uw(t,e,n,r){var s=e.current,i=Ts(),a=ZA(s);return n=kS(n),e.context===null?e.context=n:e.pendingContext=n,e=Eo(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=JA(s,e,a),t!==null&&(na(t,s,a,i),xg(t,s,a)),a}function g0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function XC(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function zB(t,e){XC(t,e),(t=t.alternate)&&XC(t,e)}function jL(){return null}var jS=typeof reportError=="function"?reportError:function(t){console.error(t)};function WB(t){this._internalRoot=t}dw.prototype.render=WB.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Xe(409));uw(t,e,null,null)};dw.prototype.unmount=WB.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Nc(function(){uw(null,t,null,null)}),e[Qo]=null}};function dw(t){this._internalRoot=t}dw.prototype.unstable_scheduleHydration=function(t){if(t){var e=mN();t={blockedOn:null,target:t,priority:e};for(var n=0;n<TA.length&&e!==0&&e<TA[n].priority;n++);TA.splice(n,0,t),n===0&&wN(t)}};function $B(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function hw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function JC(){}function OL(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=g0(a);i.call(c)}}var a=DS(e,r,t,0,null,!1,!1,"",JC);return t._reactRootContainer=a,t[Qo]=a.current,Df(t.nodeType===8?t.parentNode:t),Nc(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var c=g0(A);o.call(c)}}var A=qB(t,0,!1,null,null,!1,!1,"",JC);return t._reactRootContainer=A,t[Qo]=A.current,Df(t.nodeType===8?t.parentNode:t),Nc(function(){uw(e,A,n,r)}),A}function fw(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var A=g0(a);o.call(A)}}uw(e,a,t,s)}else a=OL(n,e,t,s,r);return g0(a)}fN=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Hh(e.pendingLanes);n!==0&&(fB(e,n|1),Ws(e,pr()),!(An&6)&&(xd=pr()+500,Bl()))}break;case 13:Nc(function(){var r=Po(t,1);if(r!==null){var s=Ts();na(r,t,1,s)}}),zB(t,1)}};pB=function(t){if(t.tag===13){var e=Po(t,134217728);if(e!==null){var n=Ts();na(e,t,134217728,n)}zB(t,134217728)}};pN=function(t){if(t.tag===13){var e=ZA(t),n=Po(t,e);if(n!==null){var r=Ts();na(n,t,e,r)}zB(t,e)}};mN=function(){return xn};gN=function(t,e){var n=xn;try{return xn=t,e()}finally{xn=n}};A1=function(t,e,n){switch(e){case"input":if(t1(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=sw(r);if(!s)throw Error(Xe(90));WI(r),t1(r,s)}}}break;case"textarea":XI(t,n);break;case"select":e=n.value,e!=null&&id(t,!!n.multiple,e,!1)}};rN=HB;sN=Nc;var ML={usingClientEntryPoint:!1,Events:[vp,Xu,sw,tN,nN,HB]},Bh={findFiberByHostInstance:Ac,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},HL={bundleType:Bh.bundleType,version:Bh.version,rendererPackageName:Bh.rendererPackageName,rendererConfig:Bh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=oN(t),t===null?null:t.stateNode},findFiberByHostInstance:Bh.findFiberByHostInstance||jL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sm.isDisabled&&Sm.supportsFiber)try{ew=Sm.inject(HL),La=Sm}catch{}}hi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ML;hi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$B(e))throw Error(Xe(200));return DL(t,e,null,n)};hi.createRoot=function(t,e){if(!$B(t))throw Error(Xe(299));var n=!1,r="",s=jS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=qB(t,1,!1,null,null,n,!1,r,s),t[Qo]=e.current,Df(t.nodeType===8?t.parentNode:t),new WB(e)};hi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Xe(188)):(t=Object.keys(t).join(","),Error(Xe(268,t)));return t=oN(e),t=t===null?null:t.stateNode,t};hi.flushSync=function(t){return Nc(t)};hi.hydrate=function(t,e,n){if(!hw(e))throw Error(Xe(200));return fw(null,t,e,!0,n)};hi.hydrateRoot=function(t,e,n){if(!$B(t))throw Error(Xe(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=jS;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=DS(e,null,t,1,n??null,s,!1,i,a),t[Qo]=e.current,Df(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new dw(e)};hi.render=function(t,e,n){if(!hw(e))throw Error(Xe(200));return fw(null,t,e,!1,n)};hi.unmountComponentAtNode=function(t){if(!hw(t))throw Error(Xe(40));return t._reactRootContainer?(Nc(function(){fw(null,null,t,!1,function(){t._reactRootContainer=null,t[Qo]=null})}),!0):!1};hi.unstable_batchedUpdates=HB;hi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!hw(n))throw Error(Xe(200));if(t==null||t._reactInternals===void 0)throw Error(Xe(38));return fw(t,e,n,!1,r)};hi.version="18.3.1-next-f1338f8080-20240426";function OS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(OS)}catch(t){console.error(t)}}OS(),OI.exports=hi;var MS=OI.exports,YC=MS;Wy.createRoot=YC.createRoot,Wy.hydrateRoot=YC.hydrateRoot;/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ZC="popstate";function VL(t={}){function e(r,s){let{pathname:i,search:a,hash:o}=r.location;return M1("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:zf(s)}return GL(e,n,null,t)}function zn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ia(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function KL(){return Math.random().toString(36).substring(2,10)}function e5(t,e){return{usr:t.state,key:t.key,idx:e}}function M1(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?kd(e):e,state:n,key:e&&e.key||r||KL()}}function zf({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function kd(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function GL(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,o="POP",A=null,c=d();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function d(){return(a.state||{idx:null}).idx}function f(){o="POP";let C=d(),w=C==null?null:C-c;c=C,A&&A({action:o,location:b.location,delta:w})}function p(C,w){o="PUSH";let y=M1(b.location,C,w);c=d()+1;let N=e5(y,c),R=b.createHref(y);try{a.pushState(N,"",R)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;s.location.assign(R)}i&&A&&A({action:o,location:b.location,delta:1})}function g(C,w){o="REPLACE";let y=M1(b.location,C,w);c=d();let N=e5(y,c),R=b.createHref(y);a.replaceState(N,"",R),i&&A&&A({action:o,location:b.location,delta:0})}function B(C){return qL(C)}let b={get action(){return o},get location(){return t(s,a)},listen(C){if(A)throw new Error("A history only accepts one active listener");return s.addEventListener(ZC,f),A=C,()=>{s.removeEventListener(ZC,f),A=null}},createHref(C){return e(s,C)},createURL:B,encodeLocation(C){let w=B(C);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:g,go(C){return a.go(C)}};return b}function qL(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),zn(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:zf(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function HS(t,e,n="/"){return zL(t,e,n,!1)}function zL(t,e,n,r){let s=typeof e=="string"?kd(e):e,i=Ro(s.pathname||"/",n);if(i==null)return null;let a=VS(t);WL(a);let o=null;for(let A=0;o==null&&A<a.length;++A){let c=iR(i);o=rR(a[A],c,r)}return o}function VS(t,e=[],n=[],r="",s=!1){let i=(a,o,A=s,c)=>{let d={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(r)&&A)return;zn(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length)}let f=_o([r,d.relativePath]),p=n.concat(d);a.children&&a.children.length>0&&(zn(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),VS(a.children,e,p,f,A)),!(a.path==null&&!a.index)&&e.push({path:f,score:tR(f,a.index),routesMeta:p})};return t.forEach((a,o)=>{var A;if(a.path===""||!((A=a.path)!=null&&A.includes("?")))i(a,o);else for(let c of KS(a.path))i(a,o,!0,c)}),e}function KS(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=KS(r.join("/")),o=[];return o.push(...a.map(A=>A===""?i:[i,A].join("/"))),s&&o.push(...a),o.map(A=>t.startsWith("/")&&A===""?"/":A)}function WL(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:nR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var $L=/^:[\w-]+$/,XL=3,JL=2,YL=1,ZL=10,eR=-2,t5=t=>t==="*";function tR(t,e){let n=t.split("/"),r=n.length;return n.some(t5)&&(r+=eR),e&&(r+=JL),n.filter(s=>!t5(s)).reduce((s,i)=>s+($L.test(i)?XL:i===""?YL:ZL),r)}function nR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function rR(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",a=[];for(let o=0;o<r.length;++o){let A=r[o],c=o===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",f=w0({path:A.relativePath,caseSensitive:A.caseSensitive,end:c},d),p=A.route;if(!f&&c&&n&&!r[r.length-1].route.index&&(f=w0({path:A.relativePath,caseSensitive:A.caseSensitive,end:!1},d)),!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:_o([i,f.pathname]),pathnameBase:lR(_o([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=_o([i,f.pathnameBase]))}return a}function w0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=sR(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((c,{paramName:d,isOptional:f},p)=>{if(d==="*"){let B=o[p]||"";a=i.slice(0,i.length-B.length).replace(/(.)\/+$/,"$1")}const g=o[p];return f&&!g?c[d]=void 0:c[d]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:a,pattern:t}}function sR(t,e=!1,n=!0){ia(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,A)=>(r.push({paramName:o,isOptional:A!=null}),A?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function iR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ia(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ro(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function aR(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?kd(t):t;return{pathname:n?n.startsWith("/")?n:oR(n,e):e,search:cR(r),hash:uR(s)}}function oR(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function ey(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function AR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function XB(t){let e=AR(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function JB(t,e,n,r=!1){let s;typeof t=="string"?s=kd(t):(s={...t},zn(!s.pathname||!s.pathname.includes("?"),ey("?","pathname","search",s)),zn(!s.pathname||!s.pathname.includes("#"),ey("#","pathname","hash",s)),zn(!s.search||!s.search.includes("#"),ey("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=n;else{let f=e.length-1;if(!r&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}o=f>=0?e[f]:"/"}let A=aR(s,o),c=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&n.endsWith("/");return!A.pathname.endsWith("/")&&(c||d)&&(A.pathname+="/"),A}var _o=t=>t.join("/").replace(/\/\/+/g,"/"),lR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),cR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,uR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function dR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var GS=["POST","PUT","PATCH","DELETE"];new Set(GS);var hR=["GET",...GS];new Set(hR);var Dd=L.createContext(null);Dd.displayName="DataRouter";var pw=L.createContext(null);pw.displayName="DataRouterState";L.createContext(!1);var qS=L.createContext({isTransitioning:!1});qS.displayName="ViewTransition";var fR=L.createContext(new Map);fR.displayName="Fetchers";var pR=L.createContext(null);pR.displayName="Await";var Aa=L.createContext(null);Aa.displayName="Navigation";var Bp=L.createContext(null);Bp.displayName="Location";var la=L.createContext({outlet:null,matches:[],isDataRoute:!1});la.displayName="Route";var YB=L.createContext(null);YB.displayName="RouteError";function mR(t,{relative:e}={}){zn(jd(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=L.useContext(Aa),{hash:s,pathname:i,search:a}=xp(t,{relative:e}),o=i;return n!=="/"&&(o=i==="/"?n:_o([n,i])),r.createHref({pathname:o,search:a,hash:s})}function jd(){return L.useContext(Bp)!=null}function xl(){return zn(jd(),"useLocation() may be used only in the context of a <Router> component."),L.useContext(Bp).location}var zS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function WS(t){L.useContext(Aa).static||L.useLayoutEffect(t)}function mw(){let{isDataRoute:t}=L.useContext(la);return t?TR():gR()}function gR(){zn(jd(),"useNavigate() may be used only in the context of a <Router> component.");let t=L.useContext(Dd),{basename:e,navigator:n}=L.useContext(Aa),{matches:r}=L.useContext(la),{pathname:s}=xl(),i=JSON.stringify(XB(r)),a=L.useRef(!1);return WS(()=>{a.current=!0}),L.useCallback((A,c={})=>{if(ia(a.current,zS),!a.current)return;if(typeof A=="number"){n.go(A);return}let d=JB(A,JSON.parse(i),s,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:_o([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,i,s,t])}var wR=L.createContext(null);function vR(t){let e=L.useContext(la).outlet;return e&&L.createElement(wR.Provider,{value:t},e)}function xp(t,{relative:e}={}){let{matches:n}=L.useContext(la),{pathname:r}=xl(),s=JSON.stringify(XB(n));return L.useMemo(()=>JB(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function yR(t,e){return $S(t,e)}function $S(t,e,n,r){var w;zn(jd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=L.useContext(Aa),{matches:i}=L.useContext(la),a=i[i.length-1],o=a?a.params:{},A=a?a.pathname:"/",c=a?a.pathnameBase:"/",d=a&&a.route;{let y=d&&d.path||"";XS(A,!d||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${A}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let f=xl(),p;if(e){let y=typeof e=="string"?kd(e):e;zn(c==="/"||((w=y.pathname)==null?void 0:w.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${y.pathname}" was given in the \`location\` prop.`),p=y}else p=f;let g=p.pathname||"/",B=g;if(c!=="/"){let y=c.replace(/^\//,"").split("/");B="/"+g.replace(/^\//,"").split("/").slice(y.length).join("/")}let b=HS(t,{pathname:B});ia(d||b!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),ia(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=ER(b&&b.map(y=>Object.assign({},y,{params:Object.assign({},o,y.params),pathname:_o([c,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:_o([c,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,r);return e&&C?L.createElement(Bp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},C):C}function BR(){let t=FR(),e=dR(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=L.createElement(L.Fragment,null,L.createElement("p",null," Hey developer "),L.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",L.createElement("code",{style:i},"ErrorBoundary")," or"," ",L.createElement("code",{style:i},"errorElement")," prop on your route.")),L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),n?L.createElement("pre",{style:s},n):null,a)}var xR=L.createElement(BR,null),bR=class extends L.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?L.createElement(la.Provider,{value:this.props.routeContext},L.createElement(YB.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function CR({routeContext:t,match:e,children:n}){let r=L.useContext(Dd);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),L.createElement(la.Provider,{value:t},n)}function ER(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,i=n==null?void 0:n.errors;if(i!=null){let A=s.findIndex(c=>c.route.id&&(i==null?void 0:i[c.route.id])!==void 0);zn(A>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,A+1))}let a=!1,o=-1;if(n)for(let A=0;A<s.length;A++){let c=s[A];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(o=A),c.route.id){let{loaderData:d,errors:f}=n,p=c.route.loader&&!d.hasOwnProperty(c.route.id)&&(!f||f[c.route.id]===void 0);if(c.route.lazy||p){a=!0,o>=0?s=s.slice(0,o+1):s=[s[0]];break}}}return s.reduceRight((A,c,d)=>{let f,p=!1,g=null,B=null;n&&(f=i&&c.route.id?i[c.route.id]:void 0,g=c.route.errorElement||xR,a&&(o<0&&d===0?(XS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,B=null):o===d&&(p=!0,B=c.route.hydrateFallbackElement||null)));let b=e.concat(s.slice(0,d+1)),C=()=>{let w;return f?w=g:p?w=B:c.route.Component?w=L.createElement(c.route.Component,null):c.route.element?w=c.route.element:w=A,L.createElement(CR,{match:c,routeContext:{outlet:A,matches:b,isDataRoute:n!=null},children:w})};return n&&(c.route.ErrorBoundary||c.route.errorElement||d===0)?L.createElement(bR,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:C(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):C()},null)}function ZB(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _R(t){let e=L.useContext(Dd);return zn(e,ZB(t)),e}function IR(t){let e=L.useContext(pw);return zn(e,ZB(t)),e}function NR(t){let e=L.useContext(la);return zn(e,ZB(t)),e}function ex(t){let e=NR(t),n=e.matches[e.matches.length-1];return zn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function SR(){return ex("useRouteId")}function FR(){var r;let t=L.useContext(YB),e=IR("useRouteError"),n=ex("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function TR(){let{router:t}=_R("useNavigate"),e=ex("useNavigate"),n=L.useRef(!1);return WS(()=>{n.current=!0}),L.useCallback(async(s,i={})=>{ia(n.current,zS),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var n5={};function XS(t,e,n){!e&&!n5[t]&&(n5[t]=!0,ia(!1,n))}L.memo(UR);function UR({routes:t,future:e,state:n}){return $S(t,void 0,n,e)}function H1({to:t,replace:e,state:n,relative:r}){zn(jd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=L.useContext(Aa);ia(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=L.useContext(la),{pathname:a}=xl(),o=mw(),A=JB(t,XB(i),a,r==="path"),c=JSON.stringify(A);return L.useEffect(()=>{o(JSON.parse(c),{replace:e,state:n,relative:r})},[o,c,r,e,n]),null}function QR(t){return vR(t.context)}function kn(t){zn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function PR({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){zn(!jd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),o=L.useMemo(()=>({basename:a,navigator:s,static:i,future:{}}),[a,s,i]);typeof n=="string"&&(n=kd(n));let{pathname:A="/",search:c="",hash:d="",state:f=null,key:p="default"}=n,g=L.useMemo(()=>{let B=Ro(A,a);return B==null?null:{location:{pathname:B,search:c,hash:d,state:f,key:p},navigationType:r}},[a,A,c,d,f,p,r]);return ia(g!=null,`<Router basename="${a}"> is not able to match the URL "${A}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:L.createElement(Aa.Provider,{value:o},L.createElement(Bp.Provider,{children:e,value:g}))}function LR({children:t,location:e}){return yR(V1(t),e)}function V1(t,e=[]){let n=[];return L.Children.forEach(t,(r,s)=>{if(!L.isValidElement(r))return;let i=[...e,s];if(r.type===L.Fragment){n.push.apply(n,V1(r.props.children,i));return}zn(r.type===kn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),zn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=V1(r.props.children,i)),n.push(a)}),n}var Sg="get",Fg="application/x-www-form-urlencoded";function gw(t){return t!=null&&typeof t.tagName=="string"}function RR(t){return gw(t)&&t.tagName.toLowerCase()==="button"}function kR(t){return gw(t)&&t.tagName.toLowerCase()==="form"}function DR(t){return gw(t)&&t.tagName.toLowerCase()==="input"}function jR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function OR(t,e){return t.button===0&&(!e||e==="_self")&&!jR(t)}var Fm=null;function MR(){if(Fm===null)try{new FormData(document.createElement("form"),0),Fm=!1}catch{Fm=!0}return Fm}var HR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ty(t){return t!=null&&!HR.has(t)?(ia(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Fg}"`),null):t}function VR(t,e){let n,r,s,i,a;if(kR(t)){let o=t.getAttribute("action");r=o?Ro(o,e):null,n=t.getAttribute("method")||Sg,s=ty(t.getAttribute("enctype"))||Fg,i=new FormData(t)}else if(RR(t)||DR(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let A=t.getAttribute("formaction")||o.getAttribute("action");if(r=A?Ro(A,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||Sg,s=ty(t.getAttribute("formenctype"))||ty(o.getAttribute("enctype"))||Fg,i=new FormData(o,t),!MR()){let{name:c,type:d,value:f}=t;if(d==="image"){let p=c?`${c}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else c&&i.append(c,f)}}else{if(gw(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Sg,r=null,s=Fg,a=t}return i&&s==="text/plain"&&(a=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function tx(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function KR(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Ro(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function GR(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function qR(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function zR(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let a=await GR(i,n);return a.links?a.links():[]}return[]}));return JR(r.flat(1).filter(qR).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function r5(t,e,n,r,s,i){let a=(A,c)=>n[c]?A.route.id!==n[c].route.id:!0,o=(A,c)=>{var d;return n[c].pathname!==A.pathname||((d=n[c].route.path)==null?void 0:d.endsWith("*"))&&n[c].params["*"]!==A.params["*"]};return i==="assets"?e.filter((A,c)=>a(A,c)||o(A,c)):i==="data"?e.filter((A,c)=>{var f;let d=r.routes[A.route.id];if(!d||!d.hasLoader)return!1;if(a(A,c)||o(A,c))return!0;if(A.route.shouldRevalidate){let p=A.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:A.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function WR(t,e,{includeHydrateFallback:n}={}){return $R(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function $R(t){return[...new Set(t)]}function XR(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function JR(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(XR(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function JS(){let t=L.useContext(Dd);return tx(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function YR(){let t=L.useContext(pw);return tx(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var nx=L.createContext(void 0);nx.displayName="FrameworkContext";function YS(){let t=L.useContext(nx);return tx(t,"You must render this element inside a <HydratedRouter> element"),t}function ZR(t,e){let n=L.useContext(nx),[r,s]=L.useState(!1),[i,a]=L.useState(!1),{onFocus:o,onBlur:A,onMouseEnter:c,onMouseLeave:d,onTouchStart:f}=e,p=L.useRef(null);L.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let b=w=>{w.forEach(y=>{a(y.isIntersecting)})},C=new IntersectionObserver(b,{threshold:.5});return p.current&&C.observe(p.current),()=>{C.disconnect()}}},[t]),L.useEffect(()=>{if(r){let b=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(b)}}},[r]);let g=()=>{s(!0)},B=()=>{s(!1),a(!1)};return n?t!=="intent"?[i,p,{}]:[i,p,{onFocus:xh(o,g),onBlur:xh(A,B),onMouseEnter:xh(c,g),onMouseLeave:xh(d,B),onTouchStart:xh(f,g)}]:[!1,p,{}]}function xh(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function ek({page:t,...e}){let{router:n}=JS(),r=L.useMemo(()=>HS(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?L.createElement(nk,{page:t,matches:r,...e}):null}function tk(t){let{manifest:e,routeModules:n}=YS(),[r,s]=L.useState([]);return L.useEffect(()=>{let i=!1;return zR(t,e,n).then(a=>{i||s(a)}),()=>{i=!0}},[t,e,n]),r}function nk({page:t,matches:e,...n}){let r=xl(),{manifest:s,routeModules:i}=YS(),{basename:a}=JS(),{loaderData:o,matches:A}=YR(),c=L.useMemo(()=>r5(t,e,A,s,r,"data"),[t,e,A,s,r]),d=L.useMemo(()=>r5(t,e,A,s,r,"assets"),[t,e,A,s,r]),f=L.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let B=new Set,b=!1;if(e.forEach(w=>{var N;let y=s.routes[w.route.id];!y||!y.hasLoader||(!c.some(R=>R.route.id===w.route.id)&&w.route.id in o&&((N=i[w.route.id])!=null&&N.shouldRevalidate)||y.hasClientLoader?b=!0:B.add(w.route.id))}),B.size===0)return[];let C=KR(t,a,"data");return b&&B.size>0&&C.searchParams.set("_routes",e.filter(w=>B.has(w.route.id)).map(w=>w.route.id).join(",")),[C.pathname+C.search]},[a,o,r,s,c,e,t,i]),p=L.useMemo(()=>WR(d,s),[d,s]),g=tk(d);return L.createElement(L.Fragment,null,f.map(B=>L.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...n})),p.map(B=>L.createElement("link",{key:B,rel:"modulepreload",href:B,...n})),g.map(({key:B,link:b})=>L.createElement("link",{key:B,nonce:n.nonce,...b})))}function rk(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var ZS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ZS&&(window.__reactRouterVersion="7.8.1")}catch{}function sk({basename:t,children:e,window:n}){let r=L.useRef();r.current==null&&(r.current=VL({window:n,v5Compat:!0}));let s=r.current,[i,a]=L.useState({action:s.action,location:s.location}),o=L.useCallback(A=>{L.startTransition(()=>a(A))},[a]);return L.useLayoutEffect(()=>s.listen(o),[s,o]),L.createElement(PR,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var eF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tF=L.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:a,state:o,target:A,to:c,preventScrollReset:d,viewTransition:f,...p},g){let{basename:B}=L.useContext(Aa),b=typeof c=="string"&&eF.test(c),C,w=!1;if(typeof c=="string"&&b&&(C=c,ZS))try{let Q=new URL(window.location.href),D=c.startsWith("//")?new URL(Q.protocol+c):new URL(c),S=Ro(D.pathname,B);D.origin===Q.origin&&S!=null?c=S+D.search+D.hash:w=!0}catch{ia(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=mR(c,{relative:s}),[N,R,V]=ZR(r,p),j=ok(c,{replace:a,state:o,target:A,preventScrollReset:d,relative:s,viewTransition:f});function U(Q){e&&e(Q),Q.defaultPrevented||j(Q)}let I=L.createElement("a",{...p,...V,href:C||y,onClick:w||i?e:U,ref:rk(g,R),target:A,"data-discover":!b&&n==="render"?"true":void 0});return N&&!b?L.createElement(L.Fragment,null,I,L.createElement(ek,{page:y})):I});tF.displayName="Link";var rr=L.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:a,viewTransition:o,children:A,...c},d){let f=xp(a,{relative:c.relative}),p=xl(),g=L.useContext(pw),{navigator:B,basename:b}=L.useContext(Aa),C=g!=null&&dk(f)&&o===!0,w=B.encodeLocation?B.encodeLocation(f).pathname:f.pathname,y=p.pathname,N=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(y=y.toLowerCase(),N=N?N.toLowerCase():null,w=w.toLowerCase()),N&&b&&(N=Ro(N,b)||N);const R=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let V=y===w||!s&&y.startsWith(w)&&y.charAt(R)==="/",j=N!=null&&(N===w||!s&&N.startsWith(w)&&N.charAt(w.length)==="/"),U={isActive:V,isPending:j,isTransitioning:C},I=V?e:void 0,Q;typeof r=="function"?Q=r(U):Q=[r,V?"active":null,j?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let D=typeof i=="function"?i(U):i;return L.createElement(tF,{...c,"aria-current":I,className:Q,ref:d,style:D,to:a,viewTransition:o},typeof A=="function"?A(U):A)});rr.displayName="NavLink";var ik=L.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:a=Sg,action:o,onSubmit:A,relative:c,preventScrollReset:d,viewTransition:f,...p},g)=>{let B=ck(),b=uk(o,{relative:c}),C=a.toLowerCase()==="get"?"get":"post",w=typeof o=="string"&&eF.test(o),y=N=>{if(A&&A(N),N.defaultPrevented)return;N.preventDefault();let R=N.nativeEvent.submitter,V=(R==null?void 0:R.getAttribute("formmethod"))||a;B(R||N.currentTarget,{fetcherKey:e,method:V,navigate:n,replace:s,state:i,relative:c,preventScrollReset:d,viewTransition:f})};return L.createElement("form",{ref:g,method:C,action:b,onSubmit:r?A:y,...p,"data-discover":!w&&t==="render"?"true":void 0})});ik.displayName="Form";function ak(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nF(t){let e=L.useContext(Dd);return zn(e,ak(t)),e}function ok(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:a}={}){let o=mw(),A=xl(),c=xp(t,{relative:i});return L.useCallback(d=>{if(OR(d,e)){d.preventDefault();let f=n!==void 0?n:zf(A)===zf(c);o(t,{replace:f,state:r,preventScrollReset:s,relative:i,viewTransition:a})}},[A,o,c,n,r,e,t,s,i,a])}var Ak=0,lk=()=>`__${String(++Ak)}__`;function ck(){let{router:t}=nF("useSubmit"),{basename:e}=L.useContext(Aa),n=SR();return L.useCallback(async(r,s={})=>{let{action:i,method:a,encType:o,formData:A,body:c}=VR(r,e);if(s.navigate===!1){let d=s.fetcherKey||lk();await t.fetch(d,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:A,body:c,formMethod:s.method||a,formEncType:s.encType||o,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:A,body:c,formMethod:s.method||a,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function uk(t,{relative:e}={}){let{basename:n}=L.useContext(Aa),r=L.useContext(la);zn(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...xp(t||".",{relative:e})},a=xl();if(t==null){i.search=a.search;let o=new URLSearchParams(i.search),A=o.getAll("index");if(A.some(d=>d==="")){o.delete("index"),A.filter(f=>f).forEach(f=>o.append("index",f));let d=o.toString();i.search=d?`?${d}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:_o([n,i.pathname])),zf(i)}function dk(t,{relative:e}={}){let n=L.useContext(qS);zn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=nF("useViewTransitionState"),s=xp(t,{relative:e});if(!n.isTransitioning)return!1;let i=Ro(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Ro(n.nextLocation.pathname,r)||n.nextLocation.pathname;return w0(s.pathname,a)!=null||w0(s.pathname,i)!=null}var s5={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},hk=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],o=t[n++],A=((s&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(A>>10)),e[r++]=String.fromCharCode(56320+(A&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},sF={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,o=a?t[s+1]:0,A=s+2<t.length,c=A?t[s+2]:0,d=i>>2,f=(i&3)<<4|o>>4;let p=(o&15)<<2|c>>6,g=c&63;A||(g=64,a||(p=64)),r.push(n[d],n[f],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(rF(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):hk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],o=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||o==null||c==null||f==null)throw new fk;const p=i<<2|o>>4;if(r.push(p),c!==64){const g=o<<4&240|c>>2;if(r.push(g),f!==64){const B=c<<6&192|f;r.push(B)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class fk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pk=function(t){const e=rF(t);return sF.encodeByteArray(e,!0)},v0=function(t){return pk(t).replace(/\./g,"")},iF=function(t){try{return sF.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk=()=>mk().__FIREBASE_DEFAULTS__,wk=()=>{if(typeof process>"u"||typeof s5>"u")return;const t=s5.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&iF(t[1]);return e&&JSON.parse(e)},ww=()=>{try{return gk()||wk()||vk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},aF=t=>{var e,n;return(n=(e=ww())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},yk=t=>{const e=aF(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},oF=()=>{var t;return(t=ww())===null||t===void 0?void 0:t.config},AF=t=>{var e;return(e=ww())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[v0(JSON.stringify(n)),v0(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tr())}function Ck(){var t;const e=(t=ww())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ek(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _k(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ik(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Nk(){const t=Tr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lF(){return!Ck()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cF(){try{return typeof indexedDB=="object"}catch{return!1}}function Sk(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk="FirebaseError";class Ho extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Fk,Object.setPrototypeOf(this,Ho.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bp.prototype.create)}}class bp{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?Tk(i,r):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new Ho(s,o,r)}}function Tk(t,e){return t.replace(Uk,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Uk=/\{\$([^}]+)}/g;function Qk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function y0(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(i5(i)&&i5(a)){if(!y0(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function i5(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Kh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Gh(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Pk(t,e){const n=new Lk(t,e);return n.subscribe.bind(n)}class Lk{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Rk(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=ny),s.error===void 0&&(s.error=ny),s.complete===void 0&&(s.complete=ny);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Rk(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ny(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(t){return t&&t._delegate?t._delegate:t}class Sc{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Bk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jk(e))try{this.getOrInitializeService({instanceIdentifier:Zl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Zl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zl){return this.instances.has(e)}getOptions(e=Zl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);r===o&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Dk(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Zl){return this.component?this.component.multipleInstances?e:Zl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Dk(t){return t===Zl?void 0:t}function jk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new kk(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(rn||(rn={}));const Mk={debug:rn.DEBUG,verbose:rn.VERBOSE,info:rn.INFO,warn:rn.WARN,error:rn.ERROR,silent:rn.SILENT},Hk=rn.INFO,Vk={[rn.DEBUG]:"log",[rn.VERBOSE]:"log",[rn.INFO]:"info",[rn.WARN]:"warn",[rn.ERROR]:"error"},Kk=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Vk[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let rx=class{constructor(e){this.name=e,this._logLevel=Hk,this._logHandler=Kk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Mk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,rn.DEBUG,...e),this._logHandler(this,rn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,rn.VERBOSE,...e),this._logHandler(this,rn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,rn.INFO,...e),this._logHandler(this,rn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,rn.WARN,...e),this._logHandler(this,rn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,rn.ERROR,...e),this._logHandler(this,rn.ERROR,...e)}};const Gk=(t,e)=>e.some(n=>t instanceof n);let a5,o5;function qk(){return a5||(a5=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zk(){return o5||(o5=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uF=new WeakMap,K1=new WeakMap,dF=new WeakMap,ry=new WeakMap,sx=new WeakMap;function Wk(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(tl(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&uF.set(n,t)}).catch(()=>{}),sx.set(e,t),e}function $k(t){if(K1.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});K1.set(t,e)}let G1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return K1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dF.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return tl(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Xk(t){G1=t(G1)}function Jk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(sy(this),e,...n);return dF.set(r,e.sort?e.sort():[e]),tl(r)}:zk().includes(t)?function(...e){return t.apply(sy(this),e),tl(uF.get(this))}:function(...e){return tl(t.apply(sy(this),e))}}function Yk(t){return typeof t=="function"?Jk(t):(t instanceof IDBTransaction&&$k(t),Gk(t,qk())?new Proxy(t,G1):t)}function tl(t){if(t instanceof IDBRequest)return Wk(t);if(ry.has(t))return ry.get(t);const e=Yk(t);return e!==t&&(ry.set(t,e),sx.set(e,t)),e}const sy=t=>sx.get(t);function Zk(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=tl(a);return r&&a.addEventListener("upgradeneeded",A=>{r(tl(a.result),A.oldVersion,A.newVersion,tl(a.transaction),A)}),n&&a.addEventListener("blocked",A=>n(A.oldVersion,A.newVersion,A)),o.then(A=>{i&&A.addEventListener("close",()=>i()),s&&A.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const eD=["get","getKey","getAll","getAllKeys","count"],tD=["put","add","delete","clear"],iy=new Map;function A5(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(iy.get(e))return iy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=tD.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||eD.includes(n)))return;const i=async function(a,...o){const A=this.transaction(a,s?"readwrite":"readonly");let c=A.store;return r&&(c=c.index(o.shift())),(await Promise.all([c[n](...o),s&&A.done]))[0]};return iy.set(e,i),i}Xk(t=>({...t,get:(e,n,r)=>A5(e,n)||t.get(e,n,r),has:(e,n)=>!!A5(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rD(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function rD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const q1="@firebase/app",l5="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko=new rx("@firebase/app"),sD="@firebase/app-compat",iD="@firebase/analytics-compat",aD="@firebase/analytics",oD="@firebase/app-check-compat",AD="@firebase/app-check",lD="@firebase/auth",cD="@firebase/auth-compat",uD="@firebase/database",dD="@firebase/data-connect",hD="@firebase/database-compat",fD="@firebase/functions",pD="@firebase/functions-compat",mD="@firebase/installations",gD="@firebase/installations-compat",wD="@firebase/messaging",vD="@firebase/messaging-compat",yD="@firebase/performance",BD="@firebase/performance-compat",xD="@firebase/remote-config",bD="@firebase/remote-config-compat",CD="@firebase/storage",ED="@firebase/storage-compat",_D="@firebase/firestore",ID="@firebase/vertexai-preview",ND="@firebase/firestore-compat",SD="firebase",FD="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1="[DEFAULT]",TD={[q1]:"fire-core",[sD]:"fire-core-compat",[aD]:"fire-analytics",[iD]:"fire-analytics-compat",[AD]:"fire-app-check",[oD]:"fire-app-check-compat",[lD]:"fire-auth",[cD]:"fire-auth-compat",[uD]:"fire-rtdb",[dD]:"fire-data-connect",[hD]:"fire-rtdb-compat",[fD]:"fire-fn",[pD]:"fire-fn-compat",[mD]:"fire-iid",[gD]:"fire-iid-compat",[wD]:"fire-fcm",[vD]:"fire-fcm-compat",[yD]:"fire-perf",[BD]:"fire-perf-compat",[xD]:"fire-rc",[bD]:"fire-rc-compat",[CD]:"fire-gcs",[ED]:"fire-gcs-compat",[_D]:"fire-fst",[ND]:"fire-fst-compat",[ID]:"fire-vertex","fire-js":"fire-js",[SD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd=new Map,W1=new Map,$1=new Map;function c5(t,e){try{t.container.addComponent(e)}catch(n){ko.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Cd(t){const e=t.name;if($1.has(e))return ko.debug(`There were multiple attempts to register component ${e}.`),!1;$1.set(e,t);for(const n of bd.values())c5(n,t);for(const n of W1.values())c5(n,t);return!0}function ix(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ta(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},nl=new bp("app","Firebase",UD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Sc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw nl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od=FD;function ax(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:z1,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw nl.create("bad-app-name",{appName:String(s)});if(n||(n=oF()),!n)throw nl.create("no-options");const i=bd.get(s);if(i){if(y0(n,i.options)&&y0(r,i.config))return i;throw nl.create("duplicate-app",{appName:s})}const a=new Ok(s);for(const A of $1.values())a.addComponent(A);const o=new QD(n,r,a);return bd.set(s,o),o}function ox(t=z1){const e=bd.get(t);if(!e&&t===z1&&oF())return ax();if(!e)throw nl.create("no-app",{appName:t});return e}async function PD(t){let e=!1;const n=t.name;bd.has(n)?(e=!0,bd.delete(n)):W1.has(n)&&t.decRefCount()<=0&&(W1.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function rl(t,e,n){var r;let s=(r=TD[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ko.warn(o.join(" "));return}Cd(new Sc(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD="firebase-heartbeat-database",RD=1,Wf="firebase-heartbeat-store";let ay=null;function hF(){return ay||(ay=Zk(LD,RD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Wf)}catch(n){console.warn(n)}}}}).catch(t=>{throw nl.create("idb-open",{originalErrorMessage:t.message})})),ay}async function kD(t){try{const n=(await hF()).transaction(Wf),r=await n.objectStore(Wf).get(fF(t));return await n.done,r}catch(e){if(e instanceof Ho)ko.warn(e.message);else{const n=nl.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ko.warn(n.message)}}}async function u5(t,e){try{const r=(await hF()).transaction(Wf,"readwrite");await r.objectStore(Wf).put(e,fF(t)),await r.done}catch(n){if(n instanceof Ho)ko.warn(n.message);else{const r=nl.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ko.warn(r.message)}}}function fF(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD=1024,jD=30*24*60*60*1e3;class OD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=d5();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=jD}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ko.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=d5(),{heartbeatsToSend:r,unsentEntries:s}=MD(this._heartbeatsCache.heartbeats),i=v0(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ko.warn(n),""}}}function d5(){return new Date().toISOString().substring(0,10)}function MD(t,e=DD){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),h5(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),h5(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class HD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cF()?Sk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await kD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return u5(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return u5(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function h5(t){return v0(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(t){Cd(new Sc("platform-logger",e=>new nD(e),"PRIVATE")),Cd(new Sc("heartbeat",e=>new OD(e),"PRIVATE")),rl(q1,l5,t),rl(q1,l5,"esm2017"),rl("fire-js","")}VD("");function Ax(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function pF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KD=pF,mF=new bp("auth","Firebase",pF());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0=new rx("@firebase/auth");function GD(t,...e){B0.logLevel<=rn.WARN&&B0.warn(`Auth (${Od}): ${t}`,...e)}function Tg(t,...e){B0.logLevel<=rn.ERROR&&B0.error(`Auth (${Od}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(t,...e){throw lx(t,...e)}function ka(t,...e){return lx(t,...e)}function gF(t,e,n){const r=Object.assign(Object.assign({},KD()),{[e]:n});return new bp("auth","Firebase",r).create(e,{appName:t.name})}function Io(t){return gF(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return mF.create(t,...e)}function Rt(t,e,...n){if(!t)throw lx(e,...n)}function yo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Tg(e),new Error(e)}function Do(t,e){t||yo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function qD(){return f5()==="http:"||f5()==="https:"}function f5(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qD()||_k()||"connection"in navigator)?navigator.onLine:!0}function WD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,n){this.shortDelay=e,this.longDelay=n,Do(n>e,"Short delay should be less than long delay!"),this.isMobile=bk()||Ik()}get(){return zD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(t,e){Do(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD=new Ep(3e4,6e4);function bl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Cl(t,e,n,r,s={}){return vF(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const o=Cp(Object.assign({key:t.config.apiKey},a)).slice(1),A=await t._getAdditionalHeaders();A["Content-Type"]="application/json",t.languageCode&&(A["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:A},i);return Ek()||(c.referrerPolicy="no-referrer"),wF.fetch()(yF(t,t.config.apiHost,n,o),c)})}async function vF(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},$D),e);try{const s=new YD(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Tm(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const o=i.ok?a.errorMessage:a.error.message,[A,c]=o.split(" : ");if(A==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tm(t,"credential-already-in-use",a);if(A==="EMAIL_EXISTS")throw Tm(t,"email-already-in-use",a);if(A==="USER_DISABLED")throw Tm(t,"user-disabled",a);const d=r[A]||A.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw gF(t,d,c);aa(t,d)}}catch(s){if(s instanceof Ho)throw s;aa(t,"network-request-failed",{message:String(s)})}}async function _p(t,e,n,r,s={}){const i=await Cl(t,e,n,r,s);return"mfaPendingCredential"in i&&aa(t,"multi-factor-auth-required",{_serverResponse:i}),i}function yF(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?cx(t.config,s):`${t.config.apiScheme}://${s}`}function JD(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class YD{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ka(this.auth,"network-request-failed")),XD.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Tm(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ka(t,e,r);return s.customData._tokenResponse=n,s}function p5(t){return t!==void 0&&t.enterprise!==void 0}class ZD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return JD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function ej(t,e){return Cl(t,"GET","/v2/recaptchaConfig",bl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tj(t,e){return Cl(t,"POST","/v1/accounts:delete",e)}async function BF(t,e){return Cl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function nj(t,e=!1){const n=ar(t),r=await n.getIdToken(e),s=ux(r);Rt(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:hf(oy(s.auth_time)),issuedAtTime:hf(oy(s.iat)),expirationTime:hf(oy(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function oy(t){return Number(t)*1e3}function ux(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Tg("JWT malformed, contained fewer than 3 sections"),null;try{const s=iF(n);return s?JSON.parse(s):(Tg("Failed to decode base64 JWT payload"),null)}catch(s){return Tg("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function m5(t){const e=ux(t);return Rt(e,"internal-error"),Rt(typeof e.exp<"u","internal-error"),Rt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $f(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ho&&rj(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function rj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=hf(this.lastLoginAt),this.creationTime=hf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x0(t){var e;const n=t.auth,r=await t.getIdToken(),s=await $f(t,BF(n,{idToken:r}));Rt(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?xF(i.providerUserInfo):[],o=aj(t.providerData,a),A=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),d=A?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new J1(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function ij(t){const e=ar(t);await x0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function aj(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function xF(t){return t.map(e=>{var{providerId:n}=e,r=Ax(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oj(t,e){const n=await vF(t,{},async()=>{const r=Cp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=yF(t,s,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",wF.fetch()(a,{method:"POST",headers:o,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Aj(t,e){return Cl(t,"POST","/v2/accounts:revokeToken",bl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Rt(e.idToken,"internal-error"),Rt(typeof e.idToken<"u","internal-error"),Rt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):m5(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Rt(e.length!==0,"internal-error");const n=m5(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Rt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await oj(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new ud;return r&&(Rt(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(Rt(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(Rt(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ud,this.toJSON())}_performRefresh(){return yo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(t,e){Rt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Bo{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Ax(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new J1(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await $f(this,this.stsTokenManager.getToken(this.auth,e));return Rt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return nj(this,e)}reload(){return ij(this)}_assign(e){this!==e&&(Rt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Bo(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Rt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await x0(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ta(this.auth.app))return Promise.reject(Io(this.auth));const e=await this.getIdToken();return await $f(this,tj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,a,o,A,c,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,g=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,B=(a=n.photoURL)!==null&&a!==void 0?a:void 0,b=(o=n.tenantId)!==null&&o!==void 0?o:void 0,C=(A=n._redirectEventId)!==null&&A!==void 0?A:void 0,w=(c=n.createdAt)!==null&&c!==void 0?c:void 0,y=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:N,emailVerified:R,isAnonymous:V,providerData:j,stsTokenManager:U}=n;Rt(N&&U,e,"internal-error");const I=ud.fromJSON(this.name,U);Rt(typeof N=="string",e,"internal-error"),vA(f,e.name),vA(p,e.name),Rt(typeof R=="boolean",e,"internal-error"),Rt(typeof V=="boolean",e,"internal-error"),vA(g,e.name),vA(B,e.name),vA(b,e.name),vA(C,e.name),vA(w,e.name),vA(y,e.name);const Q=new Bo({uid:N,auth:e,email:p,emailVerified:R,displayName:f,isAnonymous:V,photoURL:B,phoneNumber:g,tenantId:b,stsTokenManager:I,createdAt:w,lastLoginAt:y});return j&&Array.isArray(j)&&(Q.providerData=j.map(D=>Object.assign({},D))),C&&(Q._redirectEventId=C),Q}static async _fromIdTokenResponse(e,n,r=!1){const s=new ud;s.updateFromServerResponse(n);const i=new Bo({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await x0(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Rt(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?xF(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),o=new ud;o.updateFromIdToken(r);const A=new Bo({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new J1(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(A,c),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g5=new Map;function xo(t){Do(t instanceof Function,"Expected a class definition");let e=g5.get(t);return e?(Do(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,g5.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bF{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}bF.type="NONE";const w5=bF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(t,e,n){return`firebase:${t}:${e}:${n}`}class dd{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ug(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ug("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Bo._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new dd(xo(w5),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||xo(w5);const a=Ug(r,e.config.apiKey,e.name);let o=null;for(const c of n)try{const d=await c._get(a);if(d){const f=Bo._fromJSON(e,d);c!==i&&(o=f),i=c;break}}catch{}const A=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!A.length?new dd(i,e,r):(i=A[0],o&&await i._set(a,o.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(a)}catch{}})),new dd(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v5(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(IF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(CF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(SF(e))return"Blackberry";if(FF(e))return"Webos";if(EF(e))return"Safari";if((e.includes("chrome/")||_F(e))&&!e.includes("edge/"))return"Chrome";if(NF(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function CF(t=Tr()){return/firefox\//i.test(t)}function EF(t=Tr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _F(t=Tr()){return/crios\//i.test(t)}function IF(t=Tr()){return/iemobile/i.test(t)}function NF(t=Tr()){return/android/i.test(t)}function SF(t=Tr()){return/blackberry/i.test(t)}function FF(t=Tr()){return/webos/i.test(t)}function dx(t=Tr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function lj(t=Tr()){var e;return dx(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function cj(){return Nk()&&document.documentMode===10}function TF(t=Tr()){return dx(t)||NF(t)||FF(t)||SF(t)||/windows phone/i.test(t)||IF(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UF(t,e=[]){let n;switch(t){case"Browser":n=v5(Tr());break;case"Worker":n=`${v5(Tr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Od}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,o)=>{try{const A=e(i);a(A)}catch(A){o(A)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dj(t,e={}){return Cl(t,"GET","/v2/passwordPolicy",bl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj=6;class fj{constructor(e){var n,r,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:hj,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,a,o;const A={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,A),this.validatePasswordCharacterOptions(e,A),A.isValid&&(A.isValid=(n=A.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),A.isValid&&(A.isValid=(r=A.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),A.isValid&&(A.isValid=(s=A.containsLowercaseLetter)!==null&&s!==void 0?s:!0),A.isValid&&(A.isValid=(i=A.containsUppercaseLetter)!==null&&i!==void 0?i:!0),A.isValid&&(A.isValid=(a=A.containsNumericCharacter)!==null&&a!==void 0?a:!0),A.isValid&&(A.isValid=(o=A.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),A}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new y5(this),this.idTokenSubscription=new y5(this),this.beforeStateQueue=new uj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=xo(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await dd.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await BF(this,{idToken:e}),r=await Bo._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ta(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=s==null?void 0:s._redirectEventId,A=await this.tryRedirectSignIn(e);(!a||a===o)&&(A!=null&&A.user)&&(s=A.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Rt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await x0(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=WD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ta(this.app))return Promise.reject(Io(this));const n=e?ar(e):null;return n&&Rt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Rt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ta(this.app)?Promise.reject(Io(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ta(this.app)?Promise.reject(Io(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dj(this),n=new fj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new bp("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Aj(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&xo(e)||this._popupRedirectResolver;Rt(n,this,"argument-error"),this.redirectPersistenceManager=await dd.create(this,[xo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Rt(o,this,"internal-error"),o.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const A=e.addObserver(n,r,s);return()=>{a=!0,A()}}else{const A=e.addObserver(n);return()=>{a=!0,A()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Rt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=UF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&GD(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Oc(t){return ar(t)}class y5{constructor(e){this.auth=e,this.observer=null,this.addObserver=Pk(n=>this.observer=n)}get next(){return Rt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vw={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mj(t){vw=t}function QF(t){return vw.loadJS(t)}function gj(){return vw.recaptchaEnterpriseScript}function wj(){return vw.gapiScript}function vj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const yj="recaptcha-enterprise",Bj="NO_RECAPTCHA";class xj{constructor(e){this.type=yj,this.auth=Oc(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,o)=>{ej(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(A=>{if(A.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new ZD(A);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,a(c.siteKey)}}).catch(A=>{o(A)})})}function s(i,a,o){const A=window.grecaptcha;p5(A)?A.enterprise.ready(()=>{A.enterprise.execute(i,{action:e}).then(c=>{a(c)}).catch(()=>{a(Bj)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,a)=>{r(this.auth).then(o=>{if(!n&&p5(window.grecaptcha))s(o,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let A=gj();A.length!==0&&(A+=o),QF(A).then(()=>{s(o,i,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function B5(t,e,n,r=!1){const s=new xj(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Y1(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await B5(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await B5(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bj(t,e){const n=ix(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(y0(i,e??{}))return s;aa(s,"already-initialized")}return n.initialize({options:e})}function Cj(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(xo);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Ej(t,e,n){const r=Oc(t);Rt(r._canInitEmulator,r,"emulator-config-failed"),Rt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=PF(e),{host:a,port:o}=_j(e),A=o===null?"":`:${o}`;r.config.emulator={url:`${i}//${a}${A}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),Ij()}function PF(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _j(t){const e=PF(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:x5(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:x5(a)}}}function x5(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Ij(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return yo("not implemented")}_getIdTokenResponse(e){return yo("not implemented")}_linkToIdToken(e,n){return yo("not implemented")}_getReauthenticationResolver(e){return yo("not implemented")}}async function Nj(t,e){return Cl(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sj(t,e){return _p(t,"POST","/v1/accounts:signInWithPassword",bl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fj(t,e){return _p(t,"POST","/v1/accounts:signInWithEmailLink",bl(t,e))}async function Tj(t,e){return _p(t,"POST","/v1/accounts:signInWithEmailLink",bl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf extends hx{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Xf(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Xf(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Y1(e,n,"signInWithPassword",Sj);case"emailLink":return Fj(e,{email:this._email,oobCode:this._password});default:aa(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Y1(e,r,"signUpPassword",Nj);case"emailLink":return Tj(e,{idToken:n,email:this._email,oobCode:this._password});default:aa(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hd(t,e){return _p(t,"POST","/v1/accounts:signInWithIdp",bl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uj="http://localhost";class Fc extends hx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Fc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):aa("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Ax(n,["providerId","signInMethod"]);if(!r||!s)return null;const a=new Fc(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return hd(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,hd(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,hd(e,n)}buildRequest(){const e={requestUri:Uj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Cp(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Pj(t){const e=Kh(Gh(t)).link,n=e?Kh(Gh(e)).deep_link_id:null,r=Kh(Gh(t)).deep_link_id;return(r?Kh(Gh(r)).link:null)||r||n||e||t}class fx{constructor(e){var n,r,s,i,a,o;const A=Kh(Gh(e)),c=(n=A.apiKey)!==null&&n!==void 0?n:null,d=(r=A.oobCode)!==null&&r!==void 0?r:null,f=Qj((s=A.mode)!==null&&s!==void 0?s:null);Rt(c&&d&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=d,this.continueUrl=(i=A.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=A.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=A.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const n=Pj(e);try{return new fx(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(){this.providerId=Md.PROVIDER_ID}static credential(e,n){return Xf._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=fx.parseLink(n);return Rt(r,"argument-error"),Xf._fromEmailAndCode(e,r.code,r.tenantId)}}Md.PROVIDER_ID="password";Md.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Md.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip extends LF{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA extends Ip{constructor(){super("facebook.com")}static credential(e){return Fc._fromParams({providerId:QA.PROVIDER_ID,signInMethod:QA.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return QA.credentialFromTaggedObject(e)}static credentialFromError(e){return QA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return QA.credential(e.oauthAccessToken)}catch{return null}}}QA.FACEBOOK_SIGN_IN_METHOD="facebook.com";QA.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA extends Ip{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Fc._fromParams({providerId:PA.PROVIDER_ID,signInMethod:PA.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return PA.credentialFromTaggedObject(e)}static credentialFromError(e){return PA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return PA.credential(n,r)}catch{return null}}}PA.GOOGLE_SIGN_IN_METHOD="google.com";PA.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA extends Ip{constructor(){super("github.com")}static credential(e){return Fc._fromParams({providerId:LA.PROVIDER_ID,signInMethod:LA.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return LA.credentialFromTaggedObject(e)}static credentialFromError(e){return LA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return LA.credential(e.oauthAccessToken)}catch{return null}}}LA.GITHUB_SIGN_IN_METHOD="github.com";LA.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA extends Ip{constructor(){super("twitter.com")}static credential(e,n){return Fc._fromParams({providerId:RA.PROVIDER_ID,signInMethod:RA.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return RA.credentialFromTaggedObject(e)}static credentialFromError(e){return RA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return RA.credential(n,r)}catch{return null}}}RA.TWITTER_SIGN_IN_METHOD="twitter.com";RA.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lj(t,e){return _p(t,"POST","/v1/accounts:signUp",bl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Bo._fromIdTokenResponse(e,r,s),a=b5(r);return new Tc({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=b5(r);return new Tc({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function b5(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0 extends Ho{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,b0.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new b0(e,n,r,s)}}function RF(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?b0._fromErrorAndOperation(t,i,e,r):i})}async function Rj(t,e,n=!1){const r=await $f(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Tc._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kj(t,e,n=!1){const{auth:r}=t;if(Ta(r.app))return Promise.reject(Io(r));const s="reauthenticate";try{const i=await $f(t,RF(r,s,e,t),n);Rt(i.idToken,r,"internal-error");const a=ux(i.idToken);Rt(a,r,"internal-error");const{sub:o}=a;return Rt(t.uid===o,r,"user-mismatch"),Tc._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&aa(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kF(t,e,n=!1){if(Ta(t.app))return Promise.reject(Io(t));const r="signIn",s=await RF(t,r,e),i=await Tc._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Dj(t,e){return kF(Oc(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DF(t){const e=Oc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function jj(t,e,n){if(Ta(t.app))return Promise.reject(Io(t));const r=Oc(t),a=await Y1(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Lj).catch(A=>{throw A.code==="auth/password-does-not-meet-requirements"&&DF(t),A}),o=await Tc._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(o.user),o}function Oj(t,e,n){return Ta(t.app)?Promise.reject(Io(t)):Dj(ar(t),Md.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&DF(t),r})}function Mj(t,e,n,r){return ar(t).onIdTokenChanged(e,n,r)}function Hj(t,e,n){return ar(t).beforeAuthStateChanged(e,n)}function jF(t,e,n,r){return ar(t).onAuthStateChanged(e,n,r)}function OF(t){return ar(t).signOut()}const C0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(C0,"1"),this.storage.removeItem(C0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj=1e3,Kj=10;class HF extends MF{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TF(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,A)=>{this.notifyListeners(a,A)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);cj()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Kj):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Vj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}HF.type="LOCAL";const Gj=HF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF extends MF{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}VF.type="SESSION";const KF=VF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new yw(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const o=Array.from(a).map(async c=>c(n.origin,i)),A=await qj(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:A})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yw.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((o,A)=>{const c=px("",20);s.port1.start();const d=setTimeout(()=>{A(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{A(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(p.data.response);break;default:clearTimeout(d),clearTimeout(i),A(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(){return window}function Wj(t){Da().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GF(){return typeof Da().WorkerGlobalScope<"u"&&typeof Da().importScripts=="function"}async function $j(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Xj(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Jj(){return GF()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qF="firebaseLocalStorageDb",Yj=1,E0="firebaseLocalStorage",zF="fbase_key";class Np{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Bw(t,e){return t.transaction([E0],e?"readwrite":"readonly").objectStore(E0)}function Zj(){const t=indexedDB.deleteDatabase(qF);return new Np(t).toPromise()}function Z1(){const t=indexedDB.open(qF,Yj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(E0,{keyPath:zF})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(E0)?e(r):(r.close(),await Zj(),e(await Z1()))})})}async function C5(t,e,n){const r=Bw(t,!0).put({[zF]:e,value:n});return new Np(r).toPromise()}async function e6(t,e){const n=Bw(t,!1).get(e),r=await new Np(n).toPromise();return r===void 0?null:r.value}function E5(t,e){const n=Bw(t,!0).delete(e);return new Np(n).toPromise()}const t6=800,n6=3;class WF{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Z1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>n6)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return GF()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yw._getInstance(Jj()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await $j(),!this.activeServiceWorker)return;this.sender=new zj(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Xj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Z1();return await C5(e,C0,"1"),await E5(e,C0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>C5(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>e6(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>E5(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Bw(s,!1).getAll();return new Np(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),t6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WF.type="LOCAL";const r6=WF;new Ep(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s6(t,e){return e?xo(e):(Rt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx extends hx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hd(e,this._buildIdpRequest())}_linkToIdToken(e,n){return hd(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return hd(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function i6(t){return kF(t.auth,new mx(t),t.bypassAuthState)}function a6(t){const{auth:e,user:n}=t;return Rt(n,e,"internal-error"),kj(n,new mx(t),t.bypassAuthState)}async function o6(t){const{auth:e,user:n}=t;return Rt(n,e,"internal-error"),Rj(n,new mx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}const A={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(A))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return i6;case"linkViaPopup":case"linkViaRedirect":return o6;case"reauthViaPopup":case"reauthViaRedirect":return a6;default:aa(this.auth,"internal-error")}}resolve(e){Do(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Do(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A6=new Ep(2e3,1e4);class rd extends $F{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,rd.currentPopupAction&&rd.currentPopupAction.cancel(),rd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Rt(e,this.auth,"internal-error"),e}async onExecution(){Do(this.filter.length===1,"Popup operations only handle one event");const e=px();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ka(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ka(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ka(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,A6.get())};e()}}rd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l6="pendingRedirect",Qg=new Map;class c6 extends $F{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Qg.get(this.auth._key());if(!e){try{const r=await u6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Qg.set(this.auth._key(),e)}return this.bypassAuthState||Qg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function u6(t,e){const n=f6(e),r=h6(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function d6(t,e){Qg.set(t._key(),e)}function h6(t){return xo(t._redirectPersistence)}function f6(t){return Ug(l6,t.config.apiKey,t.name)}async function p6(t,e,n=!1){if(Ta(t.app))return Promise.reject(Io(t));const r=Oc(t),s=s6(r,e),a=await new c6(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6=10*60*1e3;class g6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!w6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!XF(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ka(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=m6&&this.cachedEventUids.clear(),this.cachedEventUids.has(_5(e))}saveEventToCache(e){this.cachedEventUids.add(_5(e)),this.lastProcessedEventTime=Date.now()}}function _5(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function XF({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function w6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XF(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v6(t,e={}){return Cl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,B6=/^https?/;async function x6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await v6(t);for(const n of e)try{if(b6(n))return}catch{}aa(t,"unauthorized-domain")}function b6(t){const e=X1(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!B6.test(n))return!1;if(y6.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6=new Ep(3e4,6e4);function I5(){const t=Da().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function E6(t){return new Promise((e,n)=>{var r,s,i;function a(){I5(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{I5(),n(ka(t,"network-request-failed"))},timeout:C6.get()})}if(!((s=(r=Da().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Da().gapi)===null||i===void 0)&&i.load)a();else{const o=vj("iframefcb");return Da()[o]=()=>{gapi.load?a():n(ka(t,"network-request-failed"))},QF(`${wj()}?onload=${o}`).catch(A=>n(A))}}).catch(e=>{throw Pg=null,e})}let Pg=null;function _6(t){return Pg=Pg||E6(t),Pg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6=new Ep(5e3,15e3),N6="__/auth/iframe",S6="emulator/auth/iframe",F6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},T6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function U6(t){const e=t.config;Rt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?cx(e,S6):`https://${t.config.authDomain}/${N6}`,r={apiKey:e.apiKey,appName:t.name,v:Od},s=T6.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Cp(r).slice(1)}`}async function Q6(t){const e=await _6(t),n=Da().gapi;return Rt(n,t,"internal-error"),e.open({where:document.body,url:U6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:F6,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=ka(t,"network-request-failed"),o=Da().setTimeout(()=>{i(a)},I6.get());function A(){Da().clearTimeout(o),s(r)}r.ping(A).then(A,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},L6=500,R6=600,k6="_blank",D6="http://localhost";class N5{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function j6(t,e,n,r=L6,s=R6){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const A=Object.assign(Object.assign({},P6),{width:r.toString(),height:s.toString(),top:i,left:a}),c=Tr().toLowerCase();n&&(o=_F(c)?k6:n),CF(c)&&(e=e||D6,A.scrollbars="yes");const d=Object.entries(A).reduce((p,[g,B])=>`${p}${g}=${B},`,"");if(lj(c)&&o!=="_self")return O6(e||"",o),new N5(null);const f=window.open(e||"",o,d);Rt(f,t,"popup-blocked");try{f.focus()}catch{}return new N5(f)}function O6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M6="__/auth/handler",H6="emulator/auth/handler",V6=encodeURIComponent("fac");async function S5(t,e,n,r,s,i){Rt(t.config.authDomain,t,"auth-domain-config-required"),Rt(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Od,eventId:s};if(e instanceof LF){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",Qk(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))a[d]=f}if(e instanceof Ip){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(a.scopes=d.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const A=await t._getAppCheckToken(),c=A?`#${V6}=${encodeURIComponent(A)}`:"";return`${K6(t)}?${Cp(o).slice(1)}${c}`}function K6({config:t}){return t.emulator?cx(t,H6):`https://${t.authDomain}/${M6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay="webStorageSupport";class G6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=KF,this._completeRedirectFn=p6,this._overrideRedirectResult=d6}async _openPopup(e,n,r,s){var i;Do((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await S5(e,n,r,X1(),s);return j6(e,a,px())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await S5(e,n,r,X1(),s);return Wj(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Do(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Q6(e),r=new g6(e);return n.register("authEvent",s=>(Rt(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ay,{type:Ay},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Ay];a!==void 0&&n(!!a),aa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=x6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return TF()||EF()||dx()}}const q6=G6;var F5="@firebase/auth",T5="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Rt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $6(t){Cd(new Sc("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Rt(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const A={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:UF(t)},c=new pj(r,s,i,A);return Cj(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Cd(new Sc("auth-internal",e=>{const n=Oc(e.getProvider("auth").getImmediate());return(r=>new z6(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),rl(F5,T5,W6(t)),rl(F5,T5,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6=5*60,J6=AF("authIdTokenMaxAge")||X6;let U5=null;const Y6=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>J6)return;const s=n==null?void 0:n.token;U5!==s&&(U5=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function JF(t=ox()){const e=ix(t,"auth");if(e.isInitialized())return e.getImmediate();const n=bj(t,{popupRedirectResolver:q6,persistence:[r6,Gj,KF]}),r=AF("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=Y6(i.toString());Hj(n,a,()=>a(n.currentUser)),Mj(n,o=>a(o))}}const s=aF("auth");return s&&Ej(n,`http://${s}`),n}function Z6(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}mj({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=ka("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",Z6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$6("Browser");var eO="firebase",tO="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rl(eO,tO,"app");var Q5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mc,YF;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(U,I){function Q(){}Q.prototype=I.prototype,U.D=I.prototype,U.prototype=new Q,U.prototype.constructor=U,U.C=function(D,S,_){for(var T=Array(arguments.length-2),K=2;K<arguments.length;K++)T[K-2]=arguments[K];return I.prototype[S].apply(D,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(U,I,Q){Q||(Q=0);var D=Array(16);if(typeof I=="string")for(var S=0;16>S;++S)D[S]=I.charCodeAt(Q++)|I.charCodeAt(Q++)<<8|I.charCodeAt(Q++)<<16|I.charCodeAt(Q++)<<24;else for(S=0;16>S;++S)D[S]=I[Q++]|I[Q++]<<8|I[Q++]<<16|I[Q++]<<24;I=U.g[0],Q=U.g[1],S=U.g[2];var _=U.g[3],T=I+(_^Q&(S^_))+D[0]+3614090360&4294967295;I=Q+(T<<7&4294967295|T>>>25),T=_+(S^I&(Q^S))+D[1]+3905402710&4294967295,_=I+(T<<12&4294967295|T>>>20),T=S+(Q^_&(I^Q))+D[2]+606105819&4294967295,S=_+(T<<17&4294967295|T>>>15),T=Q+(I^S&(_^I))+D[3]+3250441966&4294967295,Q=S+(T<<22&4294967295|T>>>10),T=I+(_^Q&(S^_))+D[4]+4118548399&4294967295,I=Q+(T<<7&4294967295|T>>>25),T=_+(S^I&(Q^S))+D[5]+1200080426&4294967295,_=I+(T<<12&4294967295|T>>>20),T=S+(Q^_&(I^Q))+D[6]+2821735955&4294967295,S=_+(T<<17&4294967295|T>>>15),T=Q+(I^S&(_^I))+D[7]+4249261313&4294967295,Q=S+(T<<22&4294967295|T>>>10),T=I+(_^Q&(S^_))+D[8]+1770035416&4294967295,I=Q+(T<<7&4294967295|T>>>25),T=_+(S^I&(Q^S))+D[9]+2336552879&4294967295,_=I+(T<<12&4294967295|T>>>20),T=S+(Q^_&(I^Q))+D[10]+4294925233&4294967295,S=_+(T<<17&4294967295|T>>>15),T=Q+(I^S&(_^I))+D[11]+2304563134&4294967295,Q=S+(T<<22&4294967295|T>>>10),T=I+(_^Q&(S^_))+D[12]+1804603682&4294967295,I=Q+(T<<7&4294967295|T>>>25),T=_+(S^I&(Q^S))+D[13]+4254626195&4294967295,_=I+(T<<12&4294967295|T>>>20),T=S+(Q^_&(I^Q))+D[14]+2792965006&4294967295,S=_+(T<<17&4294967295|T>>>15),T=Q+(I^S&(_^I))+D[15]+1236535329&4294967295,Q=S+(T<<22&4294967295|T>>>10),T=I+(S^_&(Q^S))+D[1]+4129170786&4294967295,I=Q+(T<<5&4294967295|T>>>27),T=_+(Q^S&(I^Q))+D[6]+3225465664&4294967295,_=I+(T<<9&4294967295|T>>>23),T=S+(I^Q&(_^I))+D[11]+643717713&4294967295,S=_+(T<<14&4294967295|T>>>18),T=Q+(_^I&(S^_))+D[0]+3921069994&4294967295,Q=S+(T<<20&4294967295|T>>>12),T=I+(S^_&(Q^S))+D[5]+3593408605&4294967295,I=Q+(T<<5&4294967295|T>>>27),T=_+(Q^S&(I^Q))+D[10]+38016083&4294967295,_=I+(T<<9&4294967295|T>>>23),T=S+(I^Q&(_^I))+D[15]+3634488961&4294967295,S=_+(T<<14&4294967295|T>>>18),T=Q+(_^I&(S^_))+D[4]+3889429448&4294967295,Q=S+(T<<20&4294967295|T>>>12),T=I+(S^_&(Q^S))+D[9]+568446438&4294967295,I=Q+(T<<5&4294967295|T>>>27),T=_+(Q^S&(I^Q))+D[14]+3275163606&4294967295,_=I+(T<<9&4294967295|T>>>23),T=S+(I^Q&(_^I))+D[3]+4107603335&4294967295,S=_+(T<<14&4294967295|T>>>18),T=Q+(_^I&(S^_))+D[8]+1163531501&4294967295,Q=S+(T<<20&4294967295|T>>>12),T=I+(S^_&(Q^S))+D[13]+2850285829&4294967295,I=Q+(T<<5&4294967295|T>>>27),T=_+(Q^S&(I^Q))+D[2]+4243563512&4294967295,_=I+(T<<9&4294967295|T>>>23),T=S+(I^Q&(_^I))+D[7]+1735328473&4294967295,S=_+(T<<14&4294967295|T>>>18),T=Q+(_^I&(S^_))+D[12]+2368359562&4294967295,Q=S+(T<<20&4294967295|T>>>12),T=I+(Q^S^_)+D[5]+4294588738&4294967295,I=Q+(T<<4&4294967295|T>>>28),T=_+(I^Q^S)+D[8]+2272392833&4294967295,_=I+(T<<11&4294967295|T>>>21),T=S+(_^I^Q)+D[11]+1839030562&4294967295,S=_+(T<<16&4294967295|T>>>16),T=Q+(S^_^I)+D[14]+4259657740&4294967295,Q=S+(T<<23&4294967295|T>>>9),T=I+(Q^S^_)+D[1]+2763975236&4294967295,I=Q+(T<<4&4294967295|T>>>28),T=_+(I^Q^S)+D[4]+1272893353&4294967295,_=I+(T<<11&4294967295|T>>>21),T=S+(_^I^Q)+D[7]+4139469664&4294967295,S=_+(T<<16&4294967295|T>>>16),T=Q+(S^_^I)+D[10]+3200236656&4294967295,Q=S+(T<<23&4294967295|T>>>9),T=I+(Q^S^_)+D[13]+681279174&4294967295,I=Q+(T<<4&4294967295|T>>>28),T=_+(I^Q^S)+D[0]+3936430074&4294967295,_=I+(T<<11&4294967295|T>>>21),T=S+(_^I^Q)+D[3]+3572445317&4294967295,S=_+(T<<16&4294967295|T>>>16),T=Q+(S^_^I)+D[6]+76029189&4294967295,Q=S+(T<<23&4294967295|T>>>9),T=I+(Q^S^_)+D[9]+3654602809&4294967295,I=Q+(T<<4&4294967295|T>>>28),T=_+(I^Q^S)+D[12]+3873151461&4294967295,_=I+(T<<11&4294967295|T>>>21),T=S+(_^I^Q)+D[15]+530742520&4294967295,S=_+(T<<16&4294967295|T>>>16),T=Q+(S^_^I)+D[2]+3299628645&4294967295,Q=S+(T<<23&4294967295|T>>>9),T=I+(S^(Q|~_))+D[0]+4096336452&4294967295,I=Q+(T<<6&4294967295|T>>>26),T=_+(Q^(I|~S))+D[7]+1126891415&4294967295,_=I+(T<<10&4294967295|T>>>22),T=S+(I^(_|~Q))+D[14]+2878612391&4294967295,S=_+(T<<15&4294967295|T>>>17),T=Q+(_^(S|~I))+D[5]+4237533241&4294967295,Q=S+(T<<21&4294967295|T>>>11),T=I+(S^(Q|~_))+D[12]+1700485571&4294967295,I=Q+(T<<6&4294967295|T>>>26),T=_+(Q^(I|~S))+D[3]+2399980690&4294967295,_=I+(T<<10&4294967295|T>>>22),T=S+(I^(_|~Q))+D[10]+4293915773&4294967295,S=_+(T<<15&4294967295|T>>>17),T=Q+(_^(S|~I))+D[1]+2240044497&4294967295,Q=S+(T<<21&4294967295|T>>>11),T=I+(S^(Q|~_))+D[8]+1873313359&4294967295,I=Q+(T<<6&4294967295|T>>>26),T=_+(Q^(I|~S))+D[15]+4264355552&4294967295,_=I+(T<<10&4294967295|T>>>22),T=S+(I^(_|~Q))+D[6]+2734768916&4294967295,S=_+(T<<15&4294967295|T>>>17),T=Q+(_^(S|~I))+D[13]+1309151649&4294967295,Q=S+(T<<21&4294967295|T>>>11),T=I+(S^(Q|~_))+D[4]+4149444226&4294967295,I=Q+(T<<6&4294967295|T>>>26),T=_+(Q^(I|~S))+D[11]+3174756917&4294967295,_=I+(T<<10&4294967295|T>>>22),T=S+(I^(_|~Q))+D[2]+718787259&4294967295,S=_+(T<<15&4294967295|T>>>17),T=Q+(_^(S|~I))+D[9]+3951481745&4294967295,U.g[0]=U.g[0]+I&4294967295,U.g[1]=U.g[1]+(S+(T<<21&4294967295|T>>>11))&4294967295,U.g[2]=U.g[2]+S&4294967295,U.g[3]=U.g[3]+_&4294967295}r.prototype.u=function(U,I){I===void 0&&(I=U.length);for(var Q=I-this.blockSize,D=this.B,S=this.h,_=0;_<I;){if(S==0)for(;_<=Q;)s(this,U,_),_+=this.blockSize;if(typeof U=="string"){for(;_<I;)if(D[S++]=U.charCodeAt(_++),S==this.blockSize){s(this,D),S=0;break}}else for(;_<I;)if(D[S++]=U[_++],S==this.blockSize){s(this,D),S=0;break}}this.h=S,this.o+=I},r.prototype.v=function(){var U=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);U[0]=128;for(var I=1;I<U.length-8;++I)U[I]=0;var Q=8*this.o;for(I=U.length-8;I<U.length;++I)U[I]=Q&255,Q/=256;for(this.u(U),U=Array(16),I=Q=0;4>I;++I)for(var D=0;32>D;D+=8)U[Q++]=this.g[I]>>>D&255;return U};function i(U,I){var Q=o;return Object.prototype.hasOwnProperty.call(Q,U)?Q[U]:Q[U]=I(U)}function a(U,I){this.h=I;for(var Q=[],D=!0,S=U.length-1;0<=S;S--){var _=U[S]|0;D&&_==I||(Q[S]=_,D=!1)}this.g=Q}var o={};function A(U){return-128<=U&&128>U?i(U,function(I){return new a([I|0],0>I?-1:0)}):new a([U|0],0>U?-1:0)}function c(U){if(isNaN(U)||!isFinite(U))return f;if(0>U)return C(c(-U));for(var I=[],Q=1,D=0;U>=Q;D++)I[D]=U/Q|0,Q*=4294967296;return new a(I,0)}function d(U,I){if(U.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(U.charAt(0)=="-")return C(d(U.substring(1),I));if(0<=U.indexOf("-"))throw Error('number format error: interior "-" character');for(var Q=c(Math.pow(I,8)),D=f,S=0;S<U.length;S+=8){var _=Math.min(8,U.length-S),T=parseInt(U.substring(S,S+_),I);8>_?(_=c(Math.pow(I,_)),D=D.j(_).add(c(T))):(D=D.j(Q),D=D.add(c(T)))}return D}var f=A(0),p=A(1),g=A(16777216);t=a.prototype,t.m=function(){if(b(this))return-C(this).m();for(var U=0,I=1,Q=0;Q<this.g.length;Q++){var D=this.i(Q);U+=(0<=D?D:4294967296+D)*I,I*=4294967296}return U},t.toString=function(U){if(U=U||10,2>U||36<U)throw Error("radix out of range: "+U);if(B(this))return"0";if(b(this))return"-"+C(this).toString(U);for(var I=c(Math.pow(U,6)),Q=this,D="";;){var S=R(Q,I).g;Q=w(Q,S.j(I));var _=((0<Q.g.length?Q.g[0]:Q.h)>>>0).toString(U);if(Q=S,B(Q))return _+D;for(;6>_.length;)_="0"+_;D=_+D}},t.i=function(U){return 0>U?0:U<this.g.length?this.g[U]:this.h};function B(U){if(U.h!=0)return!1;for(var I=0;I<U.g.length;I++)if(U.g[I]!=0)return!1;return!0}function b(U){return U.h==-1}t.l=function(U){return U=w(this,U),b(U)?-1:B(U)?0:1};function C(U){for(var I=U.g.length,Q=[],D=0;D<I;D++)Q[D]=~U.g[D];return new a(Q,~U.h).add(p)}t.abs=function(){return b(this)?C(this):this},t.add=function(U){for(var I=Math.max(this.g.length,U.g.length),Q=[],D=0,S=0;S<=I;S++){var _=D+(this.i(S)&65535)+(U.i(S)&65535),T=(_>>>16)+(this.i(S)>>>16)+(U.i(S)>>>16);D=T>>>16,_&=65535,T&=65535,Q[S]=T<<16|_}return new a(Q,Q[Q.length-1]&-2147483648?-1:0)};function w(U,I){return U.add(C(I))}t.j=function(U){if(B(this)||B(U))return f;if(b(this))return b(U)?C(this).j(C(U)):C(C(this).j(U));if(b(U))return C(this.j(C(U)));if(0>this.l(g)&&0>U.l(g))return c(this.m()*U.m());for(var I=this.g.length+U.g.length,Q=[],D=0;D<2*I;D++)Q[D]=0;for(D=0;D<this.g.length;D++)for(var S=0;S<U.g.length;S++){var _=this.i(D)>>>16,T=this.i(D)&65535,K=U.i(S)>>>16,oe=U.i(S)&65535;Q[2*D+2*S]+=T*oe,y(Q,2*D+2*S),Q[2*D+2*S+1]+=_*oe,y(Q,2*D+2*S+1),Q[2*D+2*S+1]+=T*K,y(Q,2*D+2*S+1),Q[2*D+2*S+2]+=_*K,y(Q,2*D+2*S+2)}for(D=0;D<I;D++)Q[D]=Q[2*D+1]<<16|Q[2*D];for(D=I;D<2*I;D++)Q[D]=0;return new a(Q,0)};function y(U,I){for(;(U[I]&65535)!=U[I];)U[I+1]+=U[I]>>>16,U[I]&=65535,I++}function N(U,I){this.g=U,this.h=I}function R(U,I){if(B(I))throw Error("division by zero");if(B(U))return new N(f,f);if(b(U))return I=R(C(U),I),new N(C(I.g),C(I.h));if(b(I))return I=R(U,C(I)),new N(C(I.g),I.h);if(30<U.g.length){if(b(U)||b(I))throw Error("slowDivide_ only works with positive integers.");for(var Q=p,D=I;0>=D.l(U);)Q=V(Q),D=V(D);var S=j(Q,1),_=j(D,1);for(D=j(D,2),Q=j(Q,2);!B(D);){var T=_.add(D);0>=T.l(U)&&(S=S.add(Q),_=T),D=j(D,1),Q=j(Q,1)}return I=w(U,S.j(I)),new N(S,I)}for(S=f;0<=U.l(I);){for(Q=Math.max(1,Math.floor(U.m()/I.m())),D=Math.ceil(Math.log(Q)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),_=c(Q),T=_.j(I);b(T)||0<T.l(U);)Q-=D,_=c(Q),T=_.j(I);B(_)&&(_=p),S=S.add(_),U=w(U,T)}return new N(S,U)}t.A=function(U){return R(this,U).h},t.and=function(U){for(var I=Math.max(this.g.length,U.g.length),Q=[],D=0;D<I;D++)Q[D]=this.i(D)&U.i(D);return new a(Q,this.h&U.h)},t.or=function(U){for(var I=Math.max(this.g.length,U.g.length),Q=[],D=0;D<I;D++)Q[D]=this.i(D)|U.i(D);return new a(Q,this.h|U.h)},t.xor=function(U){for(var I=Math.max(this.g.length,U.g.length),Q=[],D=0;D<I;D++)Q[D]=this.i(D)^U.i(D);return new a(Q,this.h^U.h)};function V(U){for(var I=U.g.length+1,Q=[],D=0;D<I;D++)Q[D]=U.i(D)<<1|U.i(D-1)>>>31;return new a(Q,U.h)}function j(U,I){var Q=I>>5;I%=32;for(var D=U.g.length-Q,S=[],_=0;_<D;_++)S[_]=0<I?U.i(_+Q)>>>I|U.i(_+Q+1)<<32-I:U.i(_+Q);return new a(S,U.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,YF=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=d,mc=a}).apply(typeof Q5<"u"?Q5:typeof self<"u"?self:typeof window<"u"?window:{});var Um=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ZF,qh,e4,Lg,e2,t4,n4,r4;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,E,P){return h==Array.prototype||h==Object.prototype||(h[E]=P.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Um=="object"&&Um];for(var E=0;E<h.length;++E){var P=h[E];if(P&&P.Math==Math)return P}throw Error("Cannot find global object")}var r=n(this);function s(h,E){if(E)e:{var P=r;h=h.split(".");for(var W=0;W<h.length-1;W++){var ge=h[W];if(!(ge in P))break e;P=P[ge]}h=h[h.length-1],W=P[h],E=E(W),E!=W&&E!=null&&e(P,h,{configurable:!0,writable:!0,value:E})}}function i(h,E){h instanceof String&&(h+="");var P=0,W=!1,ge={next:function(){if(!W&&P<h.length){var Ie=P++;return{value:E(Ie,h[Ie]),done:!1}}return W=!0,{done:!0,value:void 0}}};return ge[Symbol.iterator]=function(){return ge},ge}s("Array.prototype.values",function(h){return h||function(){return i(this,function(E,P){return P})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function A(h){var E=typeof h;return E=E!="object"?E:h?Array.isArray(h)?"array":E:"null",E=="array"||E=="object"&&typeof h.length=="number"}function c(h){var E=typeof h;return E=="object"&&h!=null||E=="function"}function d(h,E,P){return h.call.apply(h.bind,arguments)}function f(h,E,P){if(!h)throw Error();if(2<arguments.length){var W=Array.prototype.slice.call(arguments,2);return function(){var ge=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ge,W),h.apply(E,ge)}}return function(){return h.apply(E,arguments)}}function p(h,E,P){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,p.apply(null,arguments)}function g(h,E){var P=Array.prototype.slice.call(arguments,1);return function(){var W=P.slice();return W.push.apply(W,arguments),h.apply(this,W)}}function B(h,E){function P(){}P.prototype=E.prototype,h.aa=E.prototype,h.prototype=new P,h.prototype.constructor=h,h.Qb=function(W,ge,Ie){for(var qe=Array(arguments.length-2),jt=2;jt<arguments.length;jt++)qe[jt-2]=arguments[jt];return E.prototype[ge].apply(W,qe)}}function b(h){const E=h.length;if(0<E){const P=Array(E);for(let W=0;W<E;W++)P[W]=h[W];return P}return[]}function C(h,E){for(let P=1;P<arguments.length;P++){const W=arguments[P];if(A(W)){const ge=h.length||0,Ie=W.length||0;h.length=ge+Ie;for(let qe=0;qe<Ie;qe++)h[ge+qe]=W[qe]}else h.push(W)}}class w{constructor(E,P){this.i=E,this.j=P,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function y(h){return/^[\s\xa0]*$/.test(h)}function N(){var h=o.navigator;return h&&(h=h.userAgent)?h:""}function R(h){return R[" "](h),h}R[" "]=function(){};var V=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function j(h,E,P){for(const W in h)E.call(P,h[W],W,h)}function U(h,E){for(const P in h)E.call(void 0,h[P],P,h)}function I(h){const E={};for(const P in h)E[P]=h[P];return E}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(h,E){let P,W;for(let ge=1;ge<arguments.length;ge++){W=arguments[ge];for(P in W)h[P]=W[P];for(let Ie=0;Ie<Q.length;Ie++)P=Q[Ie],Object.prototype.hasOwnProperty.call(W,P)&&(h[P]=W[P])}}function S(h){var E=1;h=h.split(":");const P=[];for(;0<E&&h.length;)P.push(h.shift()),E--;return h.length&&P.push(h.join(":")),P}function _(h){o.setTimeout(()=>{throw h},0)}function T(){var h=Ae;let E=null;return h.g&&(E=h.g,h.g=h.g.next,h.g||(h.h=null),E.next=null),E}class K{constructor(){this.h=this.g=null}add(E,P){const W=oe.get();W.set(E,P),this.h?this.h.next=W:this.g=W,this.h=W}}var oe=new w(()=>new le,h=>h.reset());class le{constructor(){this.next=this.g=this.h=null}set(E,P){this.h=E,this.g=P,this.next=null}reset(){this.next=this.g=this.h=null}}let se,z=!1,Ae=new K,ee=()=>{const h=o.Promise.resolve(void 0);se=()=>{h.then(we)}};var we=()=>{for(var h;h=T();){try{h.h.call(h.g)}catch(P){_(P)}var E=oe;E.j(h),100>E.h&&(E.h++,h.next=E.g,E.g=h)}z=!1};function k(){this.s=this.s,this.C=this.C}k.prototype.s=!1,k.prototype.ma=function(){this.s||(this.s=!0,this.N())},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function X(h,E){this.type=h,this.g=this.target=E,this.defaultPrevented=!1}X.prototype.h=function(){this.defaultPrevented=!0};var Z=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var h=!1,E=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const P=()=>{};o.addEventListener("test",P,E),o.removeEventListener("test",P,E)}catch{}return h}();function H(h,E){if(X.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var P=this.type=h.type,W=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=E,E=h.relatedTarget){if(V){e:{try{R(E.nodeName);var ge=!0;break e}catch{}ge=!1}ge||(E=null)}}else P=="mouseover"?E=h.fromElement:P=="mouseout"&&(E=h.toElement);this.relatedTarget=E,W?(this.clientX=W.clientX!==void 0?W.clientX:W.pageX,this.clientY=W.clientY!==void 0?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Y[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&H.aa.h.call(this)}}B(H,X);var Y={2:"touch",3:"pen",4:"mouse"};H.prototype.h=function(){H.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ue="closure_listenable_"+(1e6*Math.random()|0),ie=0;function ce(h,E,P,W,ge){this.listener=h,this.proxy=null,this.src=E,this.type=P,this.capture=!!W,this.ha=ge,this.key=++ie,this.da=this.fa=!1}function be(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Fe(h){this.src=h,this.g={},this.h=0}Fe.prototype.add=function(h,E,P,W,ge){var Ie=h.toString();h=this.g[Ie],h||(h=this.g[Ie]=[],this.h++);var qe=ve(h,E,W,ge);return-1<qe?(E=h[qe],P||(E.fa=!1)):(E=new ce(E,this.src,Ie,!!W,ge),E.fa=P,h.push(E)),E};function ne(h,E){var P=E.type;if(P in h.g){var W=h.g[P],ge=Array.prototype.indexOf.call(W,E,void 0),Ie;(Ie=0<=ge)&&Array.prototype.splice.call(W,ge,1),Ie&&(be(E),h.g[P].length==0&&(delete h.g[P],h.h--))}}function ve(h,E,P,W){for(var ge=0;ge<h.length;++ge){var Ie=h[ge];if(!Ie.da&&Ie.listener==E&&Ie.capture==!!P&&Ie.ha==W)return ge}return-1}var Re="closure_lm_"+(1e6*Math.random()|0),Ce={};function re(h,E,P,W,ge){if(Array.isArray(E)){for(var Ie=0;Ie<E.length;Ie++)re(h,E[Ie],P,W,ge);return null}return P=dt(P),h&&h[ue]?h.K(E,P,c(W)?!!W.capture:!1,ge):pt(h,E,P,!1,W,ge)}function pt(h,E,P,W,ge,Ie){if(!E)throw Error("Invalid event type");var qe=c(ge)?!!ge.capture:!!ge,jt=ze(h);if(jt||(h[Re]=jt=new Fe(h)),P=jt.add(E,P,W,qe,Ie),P.proxy)return P;if(W=He(),P.proxy=W,W.src=h,W.listener=P,h.addEventListener)Z||(ge=qe),ge===void 0&&(ge=!1),h.addEventListener(E.toString(),W,ge);else if(h.attachEvent)h.attachEvent(Pe(E.toString()),W);else if(h.addListener&&h.removeListener)h.addListener(W);else throw Error("addEventListener and attachEvent are unavailable.");return P}function He(){function h(P){return E.call(h.src,h.listener,P)}const E=De;return h}function ke(h,E,P,W,ge){if(Array.isArray(E))for(var Ie=0;Ie<E.length;Ie++)ke(h,E[Ie],P,W,ge);else W=c(W)?!!W.capture:!!W,P=dt(P),h&&h[ue]?(h=h.i,E=String(E).toString(),E in h.g&&(Ie=h.g[E],P=ve(Ie,P,W,ge),-1<P&&(be(Ie[P]),Array.prototype.splice.call(Ie,P,1),Ie.length==0&&(delete h.g[E],h.h--)))):h&&(h=ze(h))&&(E=h.g[E.toString()],h=-1,E&&(h=ve(E,P,W,ge)),(P=-1<h?E[h]:null)&&pe(P))}function pe(h){if(typeof h!="number"&&h&&!h.da){var E=h.src;if(E&&E[ue])ne(E.i,h);else{var P=h.type,W=h.proxy;E.removeEventListener?E.removeEventListener(P,W,h.capture):E.detachEvent?E.detachEvent(Pe(P),W):E.addListener&&E.removeListener&&E.removeListener(W),(P=ze(E))?(ne(P,h),P.h==0&&(P.src=null,E[Re]=null)):be(h)}}}function Pe(h){return h in Ce?Ce[h]:Ce[h]="on"+h}function De(h,E){if(h.da)h=!0;else{E=new H(E,this);var P=h.listener,W=h.ha||h.src;h.fa&&pe(h),h=P.call(W,E)}return h}function ze(h){return h=h[Re],h instanceof Fe?h:null}var Ye="__closure_events_fn_"+(1e9*Math.random()>>>0);function dt(h){return typeof h=="function"?h:(h[Ye]||(h[Ye]=function(E){return h.handleEvent(E)}),h[Ye])}function Je(){k.call(this),this.i=new Fe(this),this.M=this,this.F=null}B(Je,k),Je.prototype[ue]=!0,Je.prototype.removeEventListener=function(h,E,P,W){ke(this,h,E,P,W)};function _t(h,E){var P,W=h.F;if(W)for(P=[];W;W=W.F)P.push(W);if(h=h.M,W=E.type||E,typeof E=="string")E=new X(E,h);else if(E instanceof X)E.target=E.target||h;else{var ge=E;E=new X(W,h),D(E,ge)}if(ge=!0,P)for(var Ie=P.length-1;0<=Ie;Ie--){var qe=E.g=P[Ie];ge=St(qe,W,!0,E)&&ge}if(qe=E.g=h,ge=St(qe,W,!0,E)&&ge,ge=St(qe,W,!1,E)&&ge,P)for(Ie=0;Ie<P.length;Ie++)qe=E.g=P[Ie],ge=St(qe,W,!1,E)&&ge}Je.prototype.N=function(){if(Je.aa.N.call(this),this.i){var h=this.i,E;for(E in h.g){for(var P=h.g[E],W=0;W<P.length;W++)be(P[W]);delete h.g[E],h.h--}}this.F=null},Je.prototype.K=function(h,E,P,W){return this.i.add(String(h),E,!1,P,W)},Je.prototype.L=function(h,E,P,W){return this.i.add(String(h),E,!0,P,W)};function St(h,E,P,W){if(E=h.i.g[String(E)],!E)return!0;E=E.concat();for(var ge=!0,Ie=0;Ie<E.length;++Ie){var qe=E[Ie];if(qe&&!qe.da&&qe.capture==P){var jt=qe.listener,en=qe.ha||qe.src;qe.fa&&ne(h.i,qe),ge=jt.call(en,W)!==!1&&ge}}return ge&&!W.defaultPrevented}function yt(h,E,P){if(typeof h=="function")P&&(h=p(h,P));else if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:o.setTimeout(h,E||0)}function Dt(h){h.g=yt(()=>{h.g=null,h.i&&(h.i=!1,Dt(h))},h.l);const E=h.h;h.h=null,h.m.apply(null,E)}class et extends k{constructor(E,P){super(),this.m=E,this.l=P,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Dt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bn(h){k.call(this),this.h=h,this.g={}}B(bn,k);var Gt=[];function or(h){j(h.g,function(E,P){this.g.hasOwnProperty(P)&&pe(E)},h),h.g={}}bn.prototype.N=function(){bn.aa.N.call(this),or(this)},bn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $t=o.JSON.stringify,cn=o.JSON.parse,Qr=class{stringify(h){return o.JSON.stringify(h,void 0)}parse(h){return o.JSON.parse(h,void 0)}};function Se(){}Se.prototype.h=null;function Et(h){return h.h||(h.h=h.i())}function ot(){}var nt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function mt(){X.call(this,"d")}B(mt,X);function xt(){X.call(this,"c")}B(xt,X);var Ve={},st=null;function Zt(){return st=st||new Je}Ve.La="serverreachability";function qt(h){X.call(this,Ve.La,h)}B(qt,X);function On(h){const E=Zt();_t(E,new qt(E))}Ve.STAT_EVENT="statevent";function Ar(h,E){X.call(this,Ve.STAT_EVENT,h),this.stat=E}B(Ar,X);function ft(h){const E=Zt();_t(E,new Ar(E,h))}Ve.Ma="timingevent";function zr(h,E){X.call(this,Ve.Ma,h),this.size=E}B(zr,X);function Pr(h,E){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){h()},E)}function er(){this.g=!0}er.prototype.xa=function(){this.g=!1};function Xn(h,E,P,W,ge,Ie){h.info(function(){if(h.g)if(Ie)for(var qe="",jt=Ie.split("&"),en=0;en<jt.length;en++){var Ot=jt[en].split("=");if(1<Ot.length){var hn=Ot[0];Ot=Ot[1];var In=hn.split("_");qe=2<=In.length&&In[1]=="type"?qe+(hn+"="+Ot+"&"):qe+(hn+"=redacted&")}}else qe=null;else qe=Ie;return"XMLHTTP REQ ("+W+") [attempt "+ge+"]: "+E+`
`+P+`
`+qe})}function ye(h,E,P,W,ge,Ie,qe){h.info(function(){return"XMLHTTP RESP ("+W+") [ attempt "+ge+"]: "+E+`
`+P+`
`+Ie+" "+qe})}function $e(h,E,P,W){h.info(function(){return"XMLHTTP TEXT ("+E+"): "+zt(h,P)+(W?" "+W:"")})}function lt(h,E){h.info(function(){return"TIMEOUT: "+E})}er.prototype.info=function(){};function zt(h,E){if(!h.g)return E;if(!E)return null;try{var P=JSON.parse(E);if(P){for(h=0;h<P.length;h++)if(Array.isArray(P[h])){var W=P[h];if(!(2>W.length)){var ge=W[1];if(Array.isArray(ge)&&!(1>ge.length)){var Ie=ge[0];if(Ie!="noop"&&Ie!="stop"&&Ie!="close")for(var qe=1;qe<ge.length;qe++)ge[qe]=""}}}}return $t(P)}catch{return E}}var Vt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},bt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Bt;function Wr(){}B(Wr,Se),Wr.prototype.g=function(){return new XMLHttpRequest},Wr.prototype.i=function(){return{}},Bt=new Wr;function lr(h,E,P,W){this.j=h,this.i=E,this.l=P,this.R=W||1,this.U=new bn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xs}function Xs(){this.i=null,this.g="",this.h=!1}var ha={},fa={};function pa(h,E,P){h.L=1,h.v=Xa(Cs(E)),h.m=P,h.P=!0,Ga(h,null)}function Ga(h,E){h.F=Date.now(),Ko(h),h.A=Cs(h.v);var P=h.A,W=h.R;Array.isArray(W)||(W=[String(W)]),Lt(P.i,"t",W),h.C=0,P=h.j.J,h.h=new Xs,h.g=O(h.j,P?E:null,!h.m),0<h.O&&(h.M=new et(p(h.Y,h,h.g),h.O)),E=h.U,P=h.g,W=h.ca;var ge="readystatechange";Array.isArray(ge)||(ge&&(Gt[0]=ge.toString()),ge=Gt);for(var Ie=0;Ie<ge.length;Ie++){var qe=re(P,ge[Ie],W||E.handleEvent,!1,E.h||E);if(!qe)break;E.g[qe.key]=qe}E=h.H?I(h.H):{},h.m?(h.u||(h.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,E)):(h.u="GET",h.g.ea(h.A,h.u,null,E)),On(),Xn(h.i,h.u,h.A,h.l,h.R,h.m)}lr.prototype.ca=function(h){h=h.target;const E=this.M;E&&Er(h)==3?E.j():this.Y(h)},lr.prototype.Y=function(h){try{if(h==this.g)e:{const In=Er(this.g);var E=this.g.Ba();const Vi=this.g.Z();if(!(3>In)&&(In!=3||this.g&&(this.h.h||this.g.oa()||nu(this.g)))){this.J||In!=4||E==7||(E==8||0>=Vi?On(3):On(2)),ma(this);var P=this.g.Z();this.X=P;t:if(qa(this)){var W=nu(this.g);h="";var ge=W.length,Ie=Er(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ri(this),ga(this);var qe="";break t}this.h.i=new o.TextDecoder}for(E=0;E<ge;E++)this.h.h=!0,h+=this.h.i.decode(W[E],{stream:!(Ie&&E==ge-1)});W.length=0,this.h.g+=h,this.C=0,qe=this.h.g}else qe=this.g.oa();if(this.o=P==200,ye(this.i,this.u,this.A,this.l,this.R,In,P),this.o){if(this.T&&!this.K){t:{if(this.g){var jt,en=this.g;if((jt=en.g?en.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(jt)){var Ot=jt;break t}}Ot=null}if(P=Ot)$e(this.i,this.l,P,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,za(this,P);else{this.o=!1,this.s=3,ft(12),Ri(this),ga(this);break e}}if(this.P){P=!0;let Xr;for(;!this.J&&this.C<qe.length;)if(Xr=zc(this,qe),Xr==fa){In==4&&(this.s=4,ft(14),P=!1),$e(this.i,this.l,null,"[Incomplete Response]");break}else if(Xr==ha){this.s=4,ft(15),$e(this.i,this.l,qe,"[Invalid Chunk]"),P=!1;break}else $e(this.i,this.l,Xr,null),za(this,Xr);if(qa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),In!=4||qe.length!=0||this.h.h||(this.s=1,ft(16),P=!1),this.o=this.o&&P,!P)$e(this.i,this.l,qe,"[Invalid Chunked Response]"),Ri(this),ga(this);else if(0<qe.length&&!this.W){this.W=!0;var hn=this.j;hn.g==this&&hn.ba&&!hn.M&&(hn.j.info("Great, no buffering proxy detected. Bytes received: "+qe.length),sA(hn),hn.M=!0,ft(11))}}else $e(this.i,this.l,qe,null),za(this,qe);In==4&&Ri(this),this.o&&!this.J&&(In==4?xa(this.j,this):(this.o=!1,Ko(this)))}else ya(this.g),P==400&&0<qe.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),Ri(this),ga(this)}}}catch{}finally{}};function qa(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function zc(h,E){var P=h.C,W=E.indexOf(`
`,P);return W==-1?fa:(P=Number(E.substring(P,W)),isNaN(P)?ha:(W+=1,W+P>E.length?fa:(E=E.slice(W,W+P),h.C=W+P,E)))}lr.prototype.cancel=function(){this.J=!0,Ri(this)};function Ko(h){h.S=Date.now()+h.I,Wc(h,h.I)}function Wc(h,E){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Pr(p(h.ba,h),E)}function ma(h){h.B&&(o.clearTimeout(h.B),h.B=null)}lr.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(lt(this.i,this.A),this.L!=2&&(On(),ft(17)),Ri(this),this.s=2,ga(this)):Wc(this,this.S-h)};function ga(h){h.j.G==0||h.J||xa(h.j,h)}function Ri(h){ma(h);var E=h.M;E&&typeof E.ma=="function"&&E.ma(),h.M=null,or(h.U),h.g&&(E=h.g,h.g=null,E.abort(),E.ma())}function za(h,E){try{var P=h.j;if(P.G!=0&&(P.g==h||Sl(P.h,h))){if(!h.K&&Sl(P.h,h)&&P.G==3){try{var W=P.Da.g.parse(E)}catch{W=null}if(Array.isArray(W)&&W.length==3){var ge=W;if(ge[0]==0){e:if(!P.u){if(P.g)if(P.g.F+3e3<h.F)Hi(P),eA(P);else break e;to(P),ft(18)}}else P.za=ge[1],0<P.za-P.T&&37500>ge[2]&&P.F&&P.v==0&&!P.C&&(P.C=Pr(p(P.Za,P),6e3));if(1>=Wa(P.h)&&P.ca){try{P.ca()}catch{}P.ca=void 0}}else ls(P,11)}else if((h.K||P.g==h)&&Hi(P),!y(E))for(ge=P.Da.g.parse(E),E=0;E<ge.length;E++){let Ot=ge[E];if(P.T=Ot[0],Ot=Ot[1],P.G==2)if(Ot[0]=="c"){P.K=Ot[1],P.ia=Ot[2];const hn=Ot[3];hn!=null&&(P.la=hn,P.j.info("VER="+P.la));const In=Ot[4];In!=null&&(P.Aa=In,P.j.info("SVER="+P.Aa));const Vi=Ot[5];Vi!=null&&typeof Vi=="number"&&0<Vi&&(W=1.5*Vi,P.L=W,P.j.info("backChannelRequestTimeoutMs_="+W)),W=P;const Xr=h.g;if(Xr){const ba=Xr.g?Xr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ba){var Ie=W.h;Ie.g||ba.indexOf("spdy")==-1&&ba.indexOf("quic")==-1&&ba.indexOf("h2")==-1||(Ie.j=Ie.l,Ie.g=new Set,Ie.h&&(Pn(Ie,Ie.h),Ie.h=null))}if(W.D){const Ca=Xr.g?Xr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ca&&(W.ya=Ca,mn(W.I,W.D,Ca))}}P.G=3,P.l&&P.l.ua(),P.ba&&(P.R=Date.now()-h.F,P.j.info("Handshake RTT: "+P.R+"ms")),W=P;var qe=h;if(W.qa=v(W,W.J?W.ia:null,W.W),qe.K){Fl(W.h,qe);var jt=qe,en=W.L;en&&(jt.I=en),jt.B&&(ma(jt),Ko(jt)),W.g=qe}else rA(W);0<P.i.length&&tA(P)}else Ot[0]!="stop"&&Ot[0]!="close"||ls(P,7);else P.G==3&&(Ot[0]=="stop"||Ot[0]=="close"?Ot[0]=="stop"?ls(P,7):Mi(P):Ot[0]!="noop"&&P.l&&P.l.ta(Ot),P.v=0)}}On(4)}catch{}}var Xd=class{constructor(h,E){this.g=h,this.map=E}};function Nl(h){this.l=h||10,o.PerformanceNavigationTiming?(h=o.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $c(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Wa(h){return h.h?1:h.g?h.g.size:0}function Sl(h,E){return h.h?h.h==E:h.g?h.g.has(E):!1}function Pn(h,E){h.g?h.g.add(E):h.h=E}function Fl(h,E){h.h&&h.h==E?h.h=null:h.g&&h.g.has(E)&&h.g.delete(E)}Nl.prototype.cancel=function(){if(this.i=Tl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Tl(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let E=h.i;for(const P of h.g.values())E=E.concat(P.D);return E}return b(h.i)}function Xc(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(A(h)){for(var E=[],P=h.length,W=0;W<P;W++)E.push(h[W]);return E}E=[],P=0;for(W in h)E[P++]=h[W];return E}function Ul(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(A(h)||typeof h=="string"){var E=[];h=h.length;for(var P=0;P<h;P++)E.push(P);return E}E=[],P=0;for(const W in h)E[P++]=W;return E}}}function Jc(h,E){if(h.forEach&&typeof h.forEach=="function")h.forEach(E,void 0);else if(A(h)||typeof h=="string")Array.prototype.forEach.call(h,E,void 0);else for(var P=Ul(h),W=Xc(h),ge=W.length,Ie=0;Ie<ge;Ie++)E.call(void 0,W[Ie],P&&P[Ie],h)}var Rs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Go(h,E){if(h){h=h.split("&");for(var P=0;P<h.length;P++){var W=h[P].indexOf("="),ge=null;if(0<=W){var Ie=h[P].substring(0,W);ge=h[P].substring(W+1)}else Ie=h[P];E(Ie,ge?decodeURIComponent(ge.replace(/\+/g," ")):"")}}}function tr(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof tr){this.h=h.h,$a(this,h.j),this.o=h.o,this.g=h.g,qo(this,h.s),this.l=h.l;var E=h.i,P=new wa;P.i=E.i,E.g&&(P.g=new Map(E.g),P.h=E.h),Ql(this,P),this.m=h.m}else h&&(E=String(h).match(Rs))?(this.h=!1,$a(this,E[1]||"",!0),this.o=Ja(E[2]||""),this.g=Ja(E[3]||"",!0),qo(this,E[4]),this.l=Ja(E[5]||"",!0),Ql(this,E[6]||"",!0),this.m=Ja(E[7]||"")):(this.h=!1,this.i=new wa(null,this.h))}tr.prototype.toString=function(){var h=[],E=this.j;E&&h.push(ki(E,Yc,!0),":");var P=this.g;return(P||E=="file")&&(h.push("//"),(E=this.o)&&h.push(ki(E,Yc,!0),"@"),h.push(encodeURIComponent(String(P)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P=this.s,P!=null&&h.push(":",String(P))),(P=this.l)&&(this.g&&P.charAt(0)!="/"&&h.push("/"),h.push(ki(P,P.charAt(0)=="/"?Di:Yd,!0))),(P=this.i.toString())&&h.push("?",P),(P=this.m)&&h.push("#",ki(P,Wo)),h.join("")};function Cs(h){return new tr(h)}function $a(h,E,P){h.j=P?Ja(E,!0):E,h.j&&(h.j=h.j.replace(/:$/,""))}function qo(h,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);h.s=E}else h.s=null}function Ql(h,E,P){E instanceof wa?(h.i=E,Zd(h.i,h.h)):(P||(E=ki(E,zo)),h.i=new wa(E,h.h))}function mn(h,E,P){h.i.set(E,P)}function Xa(h){return mn(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Ja(h,E){return h?E?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ki(h,E,P){return typeof h=="string"?(h=encodeURI(h).replace(E,Jd),P&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Jd(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Yc=/[#\/\?@]/g,Yd=/[#\?:]/g,Di=/[#\?]/g,zo=/[#\?@]/g,Wo=/#/g;function wa(h,E){this.h=this.g=null,this.i=h||null,this.j=!!E}function Ln(h){h.g||(h.g=new Map,h.h=0,h.i&&Go(h.i,function(E,P){h.add(decodeURIComponent(E.replace(/\+/g," ")),P)}))}t=wa.prototype,t.add=function(h,E){Ln(this),this.i=null,h=va(this,h);var P=this.g.get(h);return P||this.g.set(h,P=[]),P.push(E),this.h+=1,this};function Zc(h,E){Ln(h),E=va(h,E),h.g.has(E)&&(h.i=null,h.h-=h.g.get(E).length,h.g.delete(E))}function Pl(h,E){return Ln(h),E=va(h,E),h.g.has(E)}t.forEach=function(h,E){Ln(this),this.g.forEach(function(P,W){P.forEach(function(ge){h.call(E,ge,W,this)},this)},this)},t.na=function(){Ln(this);const h=Array.from(this.g.values()),E=Array.from(this.g.keys()),P=[];for(let W=0;W<E.length;W++){const ge=h[W];for(let Ie=0;Ie<ge.length;Ie++)P.push(E[W])}return P},t.V=function(h){Ln(this);let E=[];if(typeof h=="string")Pl(this,h)&&(E=E.concat(this.g.get(va(this,h))));else{h=Array.from(this.g.values());for(let P=0;P<h.length;P++)E=E.concat(h[P])}return E},t.set=function(h,E){return Ln(this),this.i=null,h=va(this,h),Pl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[E]),this.h+=1,this},t.get=function(h,E){return h?(h=this.V(h),0<h.length?String(h[0]):E):E};function Lt(h,E,P){Zc(h,E),0<P.length&&(h.i=null,h.g.set(va(h,E),b(P)),h.h+=P.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],E=Array.from(this.g.keys());for(var P=0;P<E.length;P++){var W=E[P];const Ie=encodeURIComponent(String(W)),qe=this.V(W);for(W=0;W<qe.length;W++){var ge=Ie;qe[W]!==""&&(ge+="="+encodeURIComponent(String(qe[W]))),h.push(ge)}}return this.i=h.join("&")};function va(h,E){return E=String(E),h.j&&(E=E.toLowerCase()),E}function Zd(h,E){E&&!h.j&&(Ln(h),h.i=null,h.g.forEach(function(P,W){var ge=W.toLowerCase();W!=ge&&(Zc(this,W),Lt(this,ge,P))},h)),h.j=E}function pi(h,E){const P=new er;if(o.Image){const W=new Image;W.onload=g(Js,P,"TestLoadImage: loaded",!0,E,W),W.onerror=g(Js,P,"TestLoadImage: error",!1,E,W),W.onabort=g(Js,P,"TestLoadImage: abort",!1,E,W),W.ontimeout=g(Js,P,"TestLoadImage: timeout",!1,E,W),o.setTimeout(function(){W.ontimeout&&W.ontimeout()},1e4),W.src=h}else E(!1)}function eu(h,E){const P=new er,W=new AbortController,ge=setTimeout(()=>{W.abort(),Js(P,"TestPingServer: timeout",!1,E)},1e4);fetch(h,{signal:W.signal}).then(Ie=>{clearTimeout(ge),Ie.ok?Js(P,"TestPingServer: ok",!0,E):Js(P,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(ge),Js(P,"TestPingServer: error",!1,E)})}function Js(h,E,P,W,ge){try{ge&&(ge.onload=null,ge.onerror=null,ge.onabort=null,ge.ontimeout=null),W(P)}catch{}}function $o(){this.g=new Qr}function Ll(h,E,P){const W=P||"";try{Jc(h,function(ge,Ie){let qe=ge;c(ge)&&(qe=$t(ge)),E.push(W+Ie+"="+encodeURIComponent(qe))})}catch(ge){throw E.push(W+"type="+encodeURIComponent("_badmap")),ge}}function Xo(h){this.l=h.Ub||null,this.j=h.eb||!1}B(Xo,Se),Xo.prototype.g=function(){return new Jo(this.l,this.j)},Xo.prototype.i=function(h){return function(){return h}}({});function Jo(h,E){Je.call(this),this.D=h,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}B(Jo,Je),t=Jo.prototype,t.open=function(h,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=E,this.readyState=1,Ys(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(E.body=h),(this.D||o).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ji(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ys(this)),this.g&&(this.readyState=3,Ys(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;tu(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function tu(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var E=h.value?h.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!h.done}))&&(this.response=this.responseText+=E)}h.done?ji(this):Ys(this),this.readyState==3&&tu(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,ji(this))},t.Qa=function(h){this.g&&(this.response=h,ji(this))},t.ga=function(){this.g&&ji(this)};function ji(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Ys(h)}t.setRequestHeader=function(h,E){this.u.append(h,E)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],E=this.h.entries();for(var P=E.next();!P.done;)P=P.value,h.push(P[0]+": "+P[1]),P=E.next();return h.join(`\r
`)};function Ys(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Jo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Oi(h){let E="";return j(h,function(P,W){E+=W,E+=":",E+=P,E+=`\r
`}),E}function Rl(h,E,P){e:{for(W in P){var W=!1;break e}W=!0}W||(P=Oi(P),typeof h=="string"?P!=null&&encodeURIComponent(String(P)):mn(h,E,P))}function dn(h){Je.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}B(dn,Je);var kl=/^https?$/i,Yo=["POST","PUT"];t=dn.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,E,P,W){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);E=E?E.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Bt.g(),this.v=this.o?Et(this.o):Et(Bt),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(E,String(h),!0),this.B=!1}catch(Ie){Dl(this,Ie);return}if(h=P||"",P=new Map(this.headers),W)if(Object.getPrototypeOf(W)===Object.prototype)for(var ge in W)P.set(ge,W[ge]);else if(typeof W.keys=="function"&&typeof W.get=="function")for(const Ie of W.keys())P.set(Ie,W.get(Ie));else throw Error("Unknown input type for opt_headers: "+String(W));W=Array.from(P.keys()).find(Ie=>Ie.toLowerCase()=="content-type"),ge=o.FormData&&h instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Yo,E,void 0))||W||ge||P.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ie,qe]of P)this.g.setRequestHeader(Ie,qe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zs(this),this.u=!0,this.g.send(h),this.u=!1}catch(Ie){Dl(this,Ie)}};function Dl(h,E){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=E,h.m=5,jl(h),Ya(h)}function jl(h){h.A||(h.A=!0,_t(h,"complete"),_t(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,_t(this,"complete"),_t(this,"abort"),Ya(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ya(this,!0)),dn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ol(this):this.bb())},t.bb=function(){Ol(this)};function Ol(h){if(h.h&&typeof a<"u"&&(!h.v[1]||Er(h)!=4||h.Z()!=2)){if(h.u&&Er(h)==4)yt(h.Ea,0,h);else if(_t(h,"readystatechange"),Er(h)==4){h.h=!1;try{const qe=h.Z();e:switch(qe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var P;if(!(P=E)){var W;if(W=qe===0){var ge=String(h.D).match(Rs)[1]||null;!ge&&o.self&&o.self.location&&(ge=o.self.location.protocol.slice(0,-1)),W=!kl.test(ge?ge.toLowerCase():"")}P=W}if(P)_t(h,"complete"),_t(h,"success");else{h.m=6;try{var Ie=2<Er(h)?h.g.statusText:""}catch{Ie=""}h.l=Ie+" ["+h.Z()+"]",jl(h)}}finally{Ya(h)}}}}function Ya(h,E){if(h.g){Zs(h);const P=h.g,W=h.v[0]?()=>{}:null;h.g=null,h.v=null,E||_t(h,"ready");try{P.onreadystatechange=W}catch{}}}function Zs(h){h.I&&(o.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function Er(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<Er(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var E=this.g.responseText;return h&&E.indexOf(h)==0&&(E=E.substring(h.length)),cn(E)}};function nu(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ya(h){const E={};h=(h.g&&2<=Er(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let W=0;W<h.length;W++){if(y(h[W]))continue;var P=S(h[W]);const ge=P[0];if(P=P[1],typeof P!="string")continue;P=P.trim();const Ie=E[ge]||[];E[ge]=Ie,Ie.push(P)}U(E,function(W){return W.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $r(h,E,P){return P&&P.internalChannelParams&&P.internalChannelParams[h]||E}function Zo(h){this.Aa=0,this.i=[],this.j=new er,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$r("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$r("baseRetryDelayMs",5e3,h),this.cb=$r("retryDelaySeedMs",1e4,h),this.Wa=$r("forwardChannelMaxRetries",2,h),this.wa=$r("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Nl(h&&h.concurrentRequestLimit),this.Da=new $o,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Zo.prototype,t.la=8,t.G=1,t.connect=function(h,E,P,W){ft(0),this.W=h,this.H=E||{},P&&W!==void 0&&(this.H.OSID=P,this.H.OAID=W),this.F=this.X,this.I=v(this,null,this.W),tA(this)};function Mi(h){if(Za(h),h.G==3){var E=h.U++,P=Cs(h.I);if(mn(P,"SID",h.K),mn(P,"RID",E),mn(P,"TYPE","terminate"),Ba(h,P),E=new lr(h,h.j,E),E.L=2,E.v=Xa(Cs(P)),P=!1,o.navigator&&o.navigator.sendBeacon)try{P=o.navigator.sendBeacon(E.v.toString(),"")}catch{}!P&&o.Image&&(new Image().src=E.v,P=!0),P||(E.g=O(E.j,null),E.g.ea(E.v)),E.F=Date.now(),Ko(E)}aA(h)}function eA(h){h.g&&(sA(h),h.g.cancel(),h.g=null)}function Za(h){eA(h),h.u&&(o.clearTimeout(h.u),h.u=null),Hi(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&o.clearTimeout(h.s),h.s=null)}function tA(h){if(!$c(h.h)&&!h.s){h.s=!0;var E=h.Ga;se||ee(),z||(se(),z=!0),Ae.add(E,h),h.B=0}}function Ml(h,E){return Wa(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=E.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Pr(p(h.Ga,h,E),iA(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const ge=new lr(this,this.j,h);let Ie=this.o;if(this.S&&(Ie?(Ie=I(Ie),D(Ie,this.S)):Ie=this.S),this.m!==null||this.O||(ge.H=Ie,Ie=null),this.P)e:{for(var E=0,P=0;P<this.i.length;P++){t:{var W=this.i[P];if("__data__"in W.map&&(W=W.map.__data__,typeof W=="string")){W=W.length;break t}W=void 0}if(W===void 0)break;if(E+=W,4096<E){E=P;break e}if(E===4096||P===this.i.length-1){E=P+1;break e}}E=1e3}else E=1e3;E=eo(this,ge,E),P=Cs(this.I),mn(P,"RID",h),mn(P,"CVER",22),this.D&&mn(P,"X-HTTP-Session-Id",this.D),Ba(this,P),Ie&&(this.O?E="headers="+encodeURIComponent(String(Oi(Ie)))+"&"+E:this.m&&Rl(P,this.m,Ie)),Pn(this.h,ge),this.Ua&&mn(P,"TYPE","init"),this.P?(mn(P,"$req",E),mn(P,"SID","null"),ge.T=!0,pa(ge,P,null)):pa(ge,P,E),this.G=2}}else this.G==3&&(h?nA(this,h):this.i.length==0||$c(this.h)||nA(this))};function nA(h,E){var P;E?P=E.l:P=h.U++;const W=Cs(h.I);mn(W,"SID",h.K),mn(W,"RID",P),mn(W,"AID",h.T),Ba(h,W),h.m&&h.o&&Rl(W,h.m,h.o),P=new lr(h,h.j,P,h.B+1),h.m===null&&(P.H=h.o),E&&(h.i=E.D.concat(h.i)),E=eo(h,P,1e3),P.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Pn(h.h,P),pa(P,W,E)}function Ba(h,E){h.H&&j(h.H,function(P,W){mn(E,W,P)}),h.l&&Jc({},function(P,W){mn(E,W,P)})}function eo(h,E,P){P=Math.min(h.i.length,P);var W=h.l?p(h.l.Na,h.l,h):null;e:{var ge=h.i;let Ie=-1;for(;;){const qe=["count="+P];Ie==-1?0<P?(Ie=ge[0].g,qe.push("ofs="+Ie)):Ie=0:qe.push("ofs="+Ie);let jt=!0;for(let en=0;en<P;en++){let Ot=ge[en].g;const hn=ge[en].map;if(Ot-=Ie,0>Ot)Ie=Math.max(0,ge[en].g-100),jt=!1;else try{Ll(hn,qe,"req"+Ot+"_")}catch{W&&W(hn)}}if(jt){W=qe.join("&");break e}}}return h=h.i.splice(0,P),E.D=h,W}function rA(h){if(!h.g&&!h.u){h.Y=1;var E=h.Fa;se||ee(),z||(se(),z=!0),Ae.add(E,h),h.v=0}}function to(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Pr(p(h.Fa,h),iA(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,ru(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Pr(p(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),eA(this),ru(this))};function sA(h){h.A!=null&&(o.clearTimeout(h.A),h.A=null)}function ru(h){h.g=new lr(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var E=Cs(h.qa);mn(E,"RID","rpc"),mn(E,"SID",h.K),mn(E,"AID",h.T),mn(E,"CI",h.F?"0":"1"),!h.F&&h.ja&&mn(E,"TO",h.ja),mn(E,"TYPE","xmlhttp"),Ba(h,E),h.m&&h.o&&Rl(E,h.m,h.o),h.L&&(h.g.I=h.L);var P=h.g;h=h.ia,P.L=1,P.v=Xa(Cs(E)),P.m=null,P.P=!0,Ga(P,h)}t.Za=function(){this.C!=null&&(this.C=null,eA(this),to(this),ft(19))};function Hi(h){h.C!=null&&(o.clearTimeout(h.C),h.C=null)}function xa(h,E){var P=null;if(h.g==E){Hi(h),sA(h),h.g=null;var W=2}else if(Sl(h.h,E))P=E.D,Fl(h.h,E),W=1;else return;if(h.G!=0){if(E.o)if(W==1){P=E.m?E.m.length:0,E=Date.now()-E.F;var ge=h.B;W=Zt(),_t(W,new zr(W,P)),tA(h)}else rA(h);else if(ge=E.s,ge==3||ge==0&&0<E.X||!(W==1&&Ml(h,E)||W==2&&to(h)))switch(P&&0<P.length&&(E=h.h,E.i=E.i.concat(P)),ge){case 1:ls(h,5);break;case 4:ls(h,10);break;case 3:ls(h,6);break;default:ls(h,2)}}}function iA(h,E){let P=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(P*=2),P*E}function ls(h,E){if(h.j.info("Error code "+E),E==2){var P=p(h.fb,h),W=h.Xa;const ge=!W;W=new tr(W||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||$a(W,"https"),Xa(W),ge?pi(W.toString(),P):eu(W.toString(),P)}else ft(2);h.G=0,h.l&&h.l.sa(E),aA(h),Za(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function aA(h){if(h.G=0,h.ka=[],h.l){const E=Tl(h.h);(E.length!=0||h.i.length!=0)&&(C(h.ka,E),C(h.ka,h.i),h.h.i.length=0,b(h.i),h.i.length=0),h.l.ra()}}function v(h,E,P){var W=P instanceof tr?Cs(P):new tr(P);if(W.g!="")E&&(W.g=E+"."+W.g),qo(W,W.s);else{var ge=o.location;W=ge.protocol,E=E?E+"."+ge.hostname:ge.hostname,ge=+ge.port;var Ie=new tr(null);W&&$a(Ie,W),E&&(Ie.g=E),ge&&qo(Ie,ge),P&&(Ie.l=P),W=Ie}return P=h.D,E=h.ya,P&&E&&mn(W,P,E),mn(W,"VER",h.la),Ba(h,W),W}function O(h,E,P){if(E&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=h.Ca&&!h.pa?new dn(new Xo({eb:P})):new dn(h.pa),E.Ha(h.J),E}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ae(){}t=ae.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function de(){}de.prototype.g=function(h,E){return new Be(h,E)};function Be(h,E){Je.call(this),this.g=new Zo(E),this.l=h,this.h=E&&E.messageUrlParams||null,h=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(h?h["X-WebChannel-Content-Type"]=E.messageContentType:h={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(h?h["X-WebChannel-Client-Profile"]=E.va:h={"X-WebChannel-Client-Profile":E.va}),this.g.S=h,(h=E&&E.Sb)&&!y(h)&&(this.g.m=h),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!y(E)&&(this.g.D=E,h=this.h,h!==null&&E in h&&(h=this.h,E in h&&delete h[E])),this.j=new rt(this)}B(Be,Je),Be.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Be.prototype.close=function(){Mi(this.g)},Be.prototype.o=function(h){var E=this.g;if(typeof h=="string"){var P={};P.__data__=h,h=P}else this.u&&(P={},P.__data__=$t(h),h=P);E.i.push(new Xd(E.Ya++,h)),E.G==3&&tA(E)},Be.prototype.N=function(){this.g.l=null,delete this.j,Mi(this.g),delete this.g,Be.aa.N.call(this)};function Qe(h){mt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var E=h.__sm__;if(E){e:{for(const P in E){h=P;break e}h=void 0}(this.i=h)&&(h=this.i,E=E!==null&&h in E?E[h]:void 0),this.data=E}else this.data=h}B(Qe,mt);function Ge(){xt.call(this),this.status=1}B(Ge,xt);function rt(h){this.g=h}B(rt,ae),rt.prototype.ua=function(){_t(this.g,"a")},rt.prototype.ta=function(h){_t(this.g,new Qe(h))},rt.prototype.sa=function(h){_t(this.g,new Ge)},rt.prototype.ra=function(){_t(this.g,"b")},de.prototype.createWebChannel=de.prototype.g,Be.prototype.send=Be.prototype.o,Be.prototype.open=Be.prototype.m,Be.prototype.close=Be.prototype.close,r4=function(){return new de},n4=function(){return Zt()},t4=Ve,e2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vt.NO_ERROR=0,Vt.TIMEOUT=8,Vt.HTTP_ERROR=6,Lg=Vt,bt.COMPLETE="complete",e4=bt,ot.EventType=nt,nt.OPEN="a",nt.CLOSE="b",nt.ERROR="c",nt.MESSAGE="d",Je.prototype.listen=Je.prototype.K,qh=ot,dn.prototype.listenOnce=dn.prototype.L,dn.prototype.getLastError=dn.prototype.Ka,dn.prototype.getLastErrorCode=dn.prototype.Ba,dn.prototype.getStatus=dn.prototype.Z,dn.prototype.getResponseJson=dn.prototype.Oa,dn.prototype.getResponseText=dn.prototype.oa,dn.prototype.send=dn.prototype.ea,dn.prototype.setWithCredentials=dn.prototype.Ha,ZF=dn}).apply(typeof Um<"u"?Um:typeof self<"u"?self:typeof window<"u"?window:{});const P5="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ns.UNAUTHENTICATED=new ns(null),ns.GOOGLE_CREDENTIALS=new ns("google-credentials-uid"),ns.FIRST_PARTY=new ns("first-party-uid"),ns.MOCK_USER=new ns("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hd="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc=new rx("@firebase/firestore");function Ru(){return Uc.logLevel}function We(t,...e){if(Uc.logLevel<=rn.DEBUG){const n=e.map(gx);Uc.debug(`Firestore (${Hd}): ${t}`,...n)}}function Fs(t,...e){if(Uc.logLevel<=rn.ERROR){const n=e.map(gx);Uc.error(`Firestore (${Hd}): ${t}`,...n)}}function cl(t,...e){if(Uc.logLevel<=rn.WARN){const n=e.map(gx);Uc.warn(`Firestore (${Hd}): ${t}`,...n)}}function gx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(t="Unexpected state"){const e=`FIRESTORE (${Hd}) INTERNAL ASSERTION FAILED: `+t;throw Fs(e),new Error(e)}function Ct(t,e){t||vt()}function kt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ze extends Ho{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class i4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ns.UNAUTHENTICATED))}shutdown(){}}class nO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class rO{constructor(e){this.t=e,this.currentUser=ns.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ct(this.o===void 0);let r=this.i;const s=A=>this.i!==r?(r=this.i,n(A)):Promise.resolve();let i=new ra;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ra,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const A=i;e.enqueueRetryable(async()=>{await A.promise,await s(this.currentUser)})},o=A=>{We("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=A,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(A=>o(A)),setTimeout(()=>{if(!this.auth){const A=this.t.getImmediate({optional:!0});A?o(A):(We("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ra)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(We("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct(typeof r.accessToken=="string"),new s4(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ct(e===null||typeof e=="string"),new ns(e)}}class sO{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ns.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class iO{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new sO(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ns.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class aO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oO{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ct(this.o===void 0);const r=i=>{i.error!=null&&We("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,We("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{We("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):We("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ct(typeof n.token=="string"),this.R=n.token,new aO(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=AO(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Ht(t,e){return t<e?-1:t>e?1:0}function Ed(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function a4(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ze(Le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ze(Le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Ze(Le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ze(Le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ut.fromMillis(Date.now())}static fromDate(e){return Ut.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ut(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.timestamp=e}static fromTimestamp(e){return new It(e)}static min(){return new It(new Ut(0,0))}static max(){return new It(new Ut(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,n,r){n===void 0?n=0:n>e.length&&vt(),r===void 0?r=e.length-n:r>e.length-n&&vt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Jf.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Jf?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),a=n.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ln extends Jf{construct(e,n,r){return new ln(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ze(Le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ln(n)}static emptyPath(){return new ln([])}}const lO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gn extends Jf{construct(e,n,r){return new Gn(e,n,r)}static isValidIdentifier(e){return lO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Gn(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Ze(Le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new Ze(Le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const A=e[s+1];if(A!=="\\"&&A!=="."&&A!=="`")throw new Ze(Le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=A,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(r+=o,s++):(i(),s++)}if(i(),a)throw new Ze(Le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gn(n)}static emptyPath(){return new Gn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.path=e}static fromPath(e){return new at(ln.fromString(e))}static fromName(e){return new at(ln.fromString(e).popFirst(5))}static empty(){return new at(ln.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ln.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ln.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new at(new ln(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function t2(t){return t.fields.find(e=>e.kind===2)}function ec(t){return t.fields.filter(e=>e.kind!==2)}_0.UNKNOWN_ID=-1;class Rg{constructor(e,n){this.fieldPath=e,this.kind=n}}class Yf{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Yf(0,ci.min())}}function cO(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=It.fromTimestamp(r===1e9?new Ut(n+1,0):new Ut(n,r));return new ci(s,at.empty(),e)}function o4(t){return new ci(t.readTime,t.key,-1)}class ci{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ci(It.min(),at.empty(),-1)}static max(){return new ci(It.max(),at.empty(),-1)}}function vx(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=at.comparator(t.documentKey,e.documentKey),n!==0?n:Ht(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class l4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mc(t){if(t.code!==Le.FAILED_PRECONDITION||t.message!==A4)throw t;We("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&vt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ne((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Ne?n:Ne.resolve(n)}catch(n){return Ne.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Ne.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Ne.reject(n)}static resolve(e){return new Ne((n,r)=>{n(e)})}static reject(e){return new Ne((n,r)=>{r(e)})}static waitFor(e){return new Ne((n,r)=>{let s=0,i=0,a=!1;e.forEach(o=>{++s,o.next(()=>{++i,a&&i===s&&n()},A=>r(A))}),a=!0,i===s&&n()})}static or(e){let n=Ne.resolve(!1);for(const r of e)n=n.next(s=>s?Ne.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new Ne((r,s)=>{const i=e.length,a=new Array(i);let o=0;for(let A=0;A<i;A++){const c=A;n(e[c]).next(d=>{a[c]=d,++o,o===i&&r(a)},d=>s(d))}})}static doWhile(e,n){return new Ne((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new ra,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new ff(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=yx(r.target.error);this.V.reject(new ff(e,s))}}static open(e,n,r,s){try{return new xw(n,e.transaction(s,r))}catch(i){throw new ff(n,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(We("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new dO(n)}}class sl{constructor(e,n,r){this.name=e,this.version=n,this.p=r,sl.S(Tr())===12.2&&Fs("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return We("SimpleDb","Removing database:",e),rc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!cF())return!1;if(sl.v())return!0;const e=Tr(),n=sl.S(e),r=0<n&&n<10,s=c4(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(We("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const a=i.target.result;n(a)},s.onblocked=()=>{r(new ff(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const a=i.target.error;a.name==="VersionError"?r(new Ze(Le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new Ze(Le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new ff(e,a))},s.onupgradeneeded=i=>{We("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const a=i.target.result;this.p.O(a,s.transaction,i.oldVersion,this.version).next(()=>{We("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let a=0;for(;;){++a;try{this.db=await this.M(e);const o=xw.open(this.db,e,i?"readonly":"readwrite",r),A=s(o).next(c=>(o.g(),c)).catch(c=>(o.abort(c),Ne.reject(c))).toPromise();return A.catch(()=>{}),await o.m,A}catch(o){const A=o,c=A.name!=="FirebaseError"&&a<3;if(We("SimpleDb","Transaction failed with error:",A.message,"Retrying:",c),this.close(),!c)return Promise.reject(A)}}}close(){this.db&&this.db.close(),this.db=void 0}}function c4(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class uO{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return rc(this.B.delete())}}class ff extends Ze{constructor(e,n){super(Le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function El(t){return t.name==="IndexedDbTransactionError"}class dO{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(We("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(We("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),rc(r)}add(e){return We("SimpleDb","ADD",this.store.name,e,e),rc(this.store.add(e))}get(e){return rc(this.store.get(e)).next(n=>(n===void 0&&(n=null),We("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return We("SimpleDb","DELETE",this.store.name,e),rc(this.store.delete(e))}count(){return We("SimpleDb","COUNT",this.store.name),rc(this.store.count())}U(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new Ne((a,o)=>{i.onerror=A=>{o(A.target.error)},i.onsuccess=A=>{a(A.target.result)}})}{const i=this.cursor(r),a=[];return this.W(i,(o,A)=>{a.push(A)}).next(()=>a)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new Ne((s,i)=>{r.onerror=a=>{i(a.target.error)},r.onsuccess=a=>{s(a.target.result)}})}j(e,n){We("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const s=this.cursor(r);return this.W(s,(i,a,o)=>o.delete())}J(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.W(s,n)}Y(e){const n=this.cursor({});return new Ne((r,s)=>{n.onerror=i=>{const a=yx(i.target.error);s(a)},n.onsuccess=i=>{const a=i.target.result;a?e(a.primaryKey,a.value).next(o=>{o?a.continue():r()}):r()}})}W(e,n){const r=[];return new Ne((s,i)=>{e.onerror=a=>{i(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void s();const A=new uO(o),c=n(o.primaryKey,o.value,A);if(c instanceof Ne){const d=c.catch(f=>(A.done(),Ne.reject(f)));r.push(d)}A.isDone?s():A.K===null?o.continue():o.continue(A.K)}}).next(()=>Ne.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function rc(t){return new Ne((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=yx(r.target.error);n(s)}})}let L5=!1;function yx(t){const e=sl.S(Tr());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Ze("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return L5||(L5=!0,setTimeout(()=>{throw r},0)),r}}return t}class hO{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){We("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{We("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){El(n)?We("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await Mc(n)}await this.X(6e4)})}}class fO{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let s=n,i=!0;return Ne.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!r.has(a))return We("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,s).next(o=>{s-=o,r.add(a)});i=!1})).next(()=>n-s)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const a=i.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.re(s,i)).next(o=>(We("IndexBackfiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,n,o))).next(()=>a.size)}))}re(e,n){let r=e;return n.changes.forEach((s,i)=>{const a=o4(i);vx(a,r)>0&&(r=a)}),new ci(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Si.oe=-1;function Sp(t){return t==null}function Zf(t){return t===0&&1/t==-1/0}function pO(t){return typeof t=="number"&&Number.isInteger(t)&&!Zf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=R5(e)),e=mO(t.get(n),e);return R5(e)}function mO(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function R5(t){return t+""}function Ua(t){const e=t.length;if(Ct(e>=2),e===2)return Ct(t.charAt(0)===""&&t.charAt(1)===""),ln.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const a=t.indexOf("",i);switch((a<0||a>n)&&vt(),t.charAt(a+1)){case"":const o=t.substring(i,a);let A;s.length===0?A=o:(s+=o,A=s,s=""),r.push(A);break;case"":s+=t.substring(i,a),s+="\0";break;case"":s+=t.substring(i,a+1);break;default:vt()}i=a+2}return new ln(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(t,e){return[t,Us(e)]}function u4(t,e,n){return[t,Us(e),n]}const gO={},wO=["prefixPath","collectionGroup","readTime","documentId"],vO=["prefixPath","collectionGroup","documentId"],yO=["collectionGroup","readTime","prefixPath","documentId"],BO=["canonicalId","targetId"],xO=["targetId","path"],bO=["path","targetId"],CO=["collectionId","parent"],EO=["indexId","uid"],_O=["uid","sequenceNumber"],IO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],NO=["indexId","uid","orderedDocumentKey"],SO=["userId","collectionPath","documentId"],FO=["userId","collectionPath","largestBatchId"],TO=["userId","collectionGroup","largestBatchId"],d4=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],UO=[...d4,"documentOverlays"],h4=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],f4=h4,Bx=[...f4,"indexConfiguration","indexState","indexEntries"],QO=Bx,PO=[...Bx,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2 extends l4{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function Ur(t,e){const n=kt(t);return sl.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D5(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Hc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function p4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,n){this.comparator=e,this.root=n||rs.EMPTY}insert(e,n){return new Wn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rs.BLACK,null,null))}remove(e){return new Wn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rs.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qm(this.root,e,this.comparator,!0)}}class Qm{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rs{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??rs.RED,this.left=s??rs.EMPTY,this.right=i??rs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new rs(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return rs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return rs.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw vt();const e=this.left.check();if(e!==this.right.check())throw vt();return e+(this.isRed()?0:1)}}rs.EMPTY=null,rs.RED=!0,rs.BLACK=!1;rs.EMPTY=new class{constructor(){this.size=0}get key(){throw vt()}get value(){throw vt()}get color(){throw vt()}get left(){throw vt()}get right(){throw vt()}copy(e,n,r,s,i){return this}insert(e,n,r){return new rs(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.comparator=e,this.data=new Wn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new j5(this.data.getIterator())}getIteratorFrom(e){return new j5(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof _n)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new _n(this.comparator);return n.data=e,n}}class j5{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function wu(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e){this.fields=e,e.sort(Gn.comparator)}static empty(){return new Gs([])}unionWith(e){let n=new _n(Gn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Gs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ed(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new m4("Invalid base64 string: "+i):i}}(e);return new vr(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new vr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vr.EMPTY_BYTE_STRING=new vr("");const LO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jo(t){if(Ct(!!t),typeof t=="string"){let e=0;const n=LO.exec(t);if(Ct(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Hn(t.seconds),nanos:Hn(t.nanos)}}function Hn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ul(t){return typeof t=="string"?vr.fromBase64String(t):vr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function bx(t){const e=t.mapValue.fields.__previous_value__;return xx(e)?bx(e):e}function ep(t){const e=jo(t.mapValue.fields.__local_write_time__.timestampValue);return new Ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e,n,r,s,i,a,o,A,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=A,this.useFetchStreams=c}}class dl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new dl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof dl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Dg={nullValue:"NULL_VALUE"};function Qc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?xx(t)?4:g4(t)?9007199254740991:bw(t)?10:11:vt()}function Oa(t,e){if(t===e)return!0;const n=Qc(t);if(n!==Qc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ep(t).isEqual(ep(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=jo(s.timestampValue),o=jo(i.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ul(s.bytesValue).isEqual(ul(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Hn(s.geoPointValue.latitude)===Hn(i.geoPointValue.latitude)&&Hn(s.geoPointValue.longitude)===Hn(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Hn(s.integerValue)===Hn(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Hn(s.doubleValue),o=Hn(i.doubleValue);return a===o?Zf(a)===Zf(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return Ed(t.arrayValue.values||[],e.arrayValue.values||[],Oa);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},o=i.mapValue.fields||{};if(D5(a)!==D5(o))return!1;for(const A in a)if(a.hasOwnProperty(A)&&(o[A]===void 0||!Oa(a[A],o[A])))return!1;return!0}(t,e);default:return vt()}}function tp(t,e){return(t.values||[]).find(n=>Oa(n,e))!==void 0}function hl(t,e){if(t===e)return 0;const n=Qc(t),r=Qc(e);if(n!==r)return Ht(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ht(t.booleanValue,e.booleanValue);case 2:return function(i,a){const o=Hn(i.integerValue||i.doubleValue),A=Hn(a.integerValue||a.doubleValue);return o<A?-1:o>A?1:o===A?0:isNaN(o)?isNaN(A)?0:-1:1}(t,e);case 3:return O5(t.timestampValue,e.timestampValue);case 4:return O5(ep(t),ep(e));case 5:return Ht(t.stringValue,e.stringValue);case 6:return function(i,a){const o=ul(i),A=ul(a);return o.compareTo(A)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const o=i.split("/"),A=a.split("/");for(let c=0;c<o.length&&c<A.length;c++){const d=Ht(o[c],A[c]);if(d!==0)return d}return Ht(o.length,A.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const o=Ht(Hn(i.latitude),Hn(a.latitude));return o!==0?o:Ht(Hn(i.longitude),Hn(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return M5(t.arrayValue,e.arrayValue);case 10:return function(i,a){var o,A,c,d;const f=i.fields||{},p=a.fields||{},g=(o=f.value)===null||o===void 0?void 0:o.arrayValue,B=(A=p.value)===null||A===void 0?void 0:A.arrayValue,b=Ht(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((d=B==null?void 0:B.values)===null||d===void 0?void 0:d.length)||0);return b!==0?b:M5(g,B)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===HA.mapValue&&a===HA.mapValue)return 0;if(i===HA.mapValue)return 1;if(a===HA.mapValue)return-1;const o=i.fields||{},A=Object.keys(o),c=a.fields||{},d=Object.keys(c);A.sort(),d.sort();for(let f=0;f<A.length&&f<d.length;++f){const p=Ht(A[f],d[f]);if(p!==0)return p;const g=hl(o[A[f]],c[d[f]]);if(g!==0)return g}return Ht(A.length,d.length)}(t.mapValue,e.mapValue);default:throw vt()}}function O5(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ht(t,e);const n=jo(t),r=jo(e),s=Ht(n.seconds,r.seconds);return s!==0?s:Ht(n.nanos,r.nanos)}function M5(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=hl(n[s],r[s]);if(i)return i}return Ht(n.length,r.length)}function _d(t){return r2(t)}function r2(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=jo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ul(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return at.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=r2(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${r2(n.fields[a])}`;return s+"}"}(t.mapValue):vt()}function np(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function s2(t){return!!t&&"integerValue"in t}function rp(t){return!!t&&"arrayValue"in t}function H5(t){return!!t&&"nullValue"in t}function V5(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jg(t){return!!t&&"mapValue"in t}function bw(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function pf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Hc(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=pf(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=pf(t.arrayValue.values[n]);return e}return Object.assign({},t)}function g4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const w4={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function kO(t){return"nullValue"in t?Dg:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?np(dl.empty(),at.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?bw(t)?w4:{mapValue:{}}:vt()}function DO(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?np(dl.empty(),at.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?w4:"mapValue"in t?bw(t)?{mapValue:{}}:HA:vt()}function K5(t,e){const n=hl(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function G5(t,e){const n=hl(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e){this.value=e}static empty(){return new ss({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!jg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=pf(n)}setAll(e){let n=Gn.emptyPath(),r={},s=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const A=this.getFieldsMap(n);this.applyChanges(A,r,s),r={},s=[],n=o.popLast()}a?r[o.lastSegment()]=pf(a):s.push(o.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());jg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Oa(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];jg(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Hc(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new ss(pf(this.value))}}function v4(t){const e=[];return Hc(t.fields,(n,r)=>{const s=new Gn([n]);if(jg(r)){const i=v4(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new Gs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,n,r,s,i,a,o){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Kn(e,0,It.min(),It.min(),It.min(),ss.empty(),0)}static newFoundDocument(e,n,r,s){return new Kn(e,1,n,It.min(),r,s,0)}static newNoDocument(e,n){return new Kn(e,2,n,It.min(),It.min(),ss.empty(),0)}static newUnknownDocument(e,n){return new Kn(e,3,n,It.min(),It.min(),ss.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(It.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ss.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ss.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=It.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Kn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,n){this.position=e,this.inclusive=n}}function q5(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=at.comparator(at.fromName(a.referenceValue),n.key):r=hl(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function z5(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Oa(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,n="asc"){this.field=e,this.dir=n}}function jO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{}class sn extends y4{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new OO(e,n,r):n==="array-contains"?new VO(e,r):n==="in"?new _4(e,r):n==="not-in"?new KO(e,r):n==="array-contains-any"?new GO(e,r):new sn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new MO(e,r):new HO(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(hl(n,this.value)):n!==null&&Qc(this.value)===Qc(n)&&this.matchesComparison(hl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return vt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yn extends y4{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new yn(e,n)}matches(e){return Nd(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Nd(t){return t.op==="and"}function i2(t){return t.op==="or"}function Cx(t){return B4(t)&&Nd(t)}function B4(t){for(const e of t.filters)if(e instanceof yn)return!1;return!0}function a2(t){if(t instanceof sn)return t.field.canonicalString()+t.op.toString()+_d(t.value);if(Cx(t))return t.filters.map(e=>a2(e)).join(",");{const e=t.filters.map(n=>a2(n)).join(",");return`${t.op}(${e})`}}function x4(t,e){return t instanceof sn?function(r,s){return s instanceof sn&&r.op===s.op&&r.field.isEqual(s.field)&&Oa(r.value,s.value)}(t,e):t instanceof yn?function(r,s){return s instanceof yn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,o)=>i&&x4(a,s.filters[o]),!0):!1}(t,e):void vt()}function b4(t,e){const n=t.filters.concat(e);return yn.create(n,t.op)}function C4(t){return t instanceof sn?function(n){return`${n.field.canonicalString()} ${n.op} ${_d(n.value)}`}(t):t instanceof yn?function(n){return n.op.toString()+" {"+n.getFilters().map(C4).join(" ,")+"}"}(t):"Filter"}class OO extends sn{constructor(e,n,r){super(e,n,r),this.key=at.fromName(r.referenceValue)}matches(e){const n=at.comparator(e.key,this.key);return this.matchesComparison(n)}}class MO extends sn{constructor(e,n){super(e,"in",n),this.keys=E4("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class HO extends sn{constructor(e,n){super(e,"not-in",n),this.keys=E4("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function E4(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>at.fromName(r.referenceValue))}class VO extends sn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return rp(n)&&tp(n.arrayValue,this.value)}}class _4 extends sn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&tp(this.value.arrayValue,n)}}class KO extends sn{constructor(e,n){super(e,"not-in",n)}matches(e){if(tp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!tp(this.value.arrayValue,n)}}class GO extends sn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!rp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>tp(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e,n=null,r=[],s=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=o,this.ue=null}}function o2(t,e=null,n=[],r=[],s=null,i=null,a=null){return new qO(t,e,n,r,s,i,a)}function Pc(t){const e=kt(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>a2(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Sp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>_d(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>_d(r)).join(",")),e.ue=n}return e.ue}function Fp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!jO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!x4(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!z5(t.startAt,e.startAt)&&z5(t.endAt,e.endAt)}function I0(t){return at.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function N0(t,e){return t.filters.filter(n=>n instanceof sn&&n.field.isEqual(e))}function W5(t,e,n){let r=Dg,s=!0;for(const i of N0(t,e)){let a=Dg,o=!0;switch(i.op){case"<":case"<=":a=kO(i.value);break;case"==":case"in":case">=":a=i.value;break;case">":a=i.value,o=!1;break;case"!=":case"not-in":a=Dg}K5({value:r,inclusive:s},{value:a,inclusive:o})<0&&(r=a,s=o)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=n.position[i];K5({value:r,inclusive:s},{value:a,inclusive:n.inclusive})<0&&(r=a,s=n.inclusive);break}}return{value:r,inclusive:s}}function $5(t,e,n){let r=HA,s=!0;for(const i of N0(t,e)){let a=HA,o=!0;switch(i.op){case">=":case">":a=DO(i.value),o=!1;break;case"==":case"in":case"<=":a=i.value;break;case"<":a=i.value,o=!1;break;case"!=":case"not-in":a=HA}G5({value:r,inclusive:s},{value:a,inclusive:o})>0&&(r=a,s=o)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=n.position[i];G5({value:r,inclusive:s},{value:a,inclusive:n.inclusive})>0&&(r=a,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,n=null,r=[],s=[],i=null,a="F",o=null,A=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=A,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function zO(t,e,n,r,s,i,a,o){return new Vd(t,e,n,r,s,i,a,o)}function Tp(t){return new Vd(t)}function X5(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function I4(t){return t.collectionGroup!==null}function mf(t){const e=kt(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new _n(Gn.comparator);return a.filters.forEach(A=>{A.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new sp(i,r))}),n.has(Gn.keyField().canonicalString())||e.ce.push(new sp(Gn.keyField(),r))}return e.ce}function Qi(t){const e=kt(t);return e.le||(e.le=WO(e,mf(t))),e.le}function WO(t,e){if(t.limitType==="F")return o2(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new sp(s.field,i)});const n=t.endAt?new Id(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Id(t.startAt.position,t.startAt.inclusive):null;return o2(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function A2(t,e){const n=t.filters.concat([e]);return new Vd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function S0(t,e,n){return new Vd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Cw(t,e){return Fp(Qi(t),Qi(e))&&t.limitType===e.limitType}function N4(t){return`${Pc(Qi(t))}|lt:${t.limitType}`}function ku(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>C4(s)).join(", ")}]`),Sp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>_d(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>_d(s)).join(",")),`Target(${r})`}(Qi(t))}; limitType=${t.limitType})`}function Up(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):at.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of mf(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,o,A){const c=q5(a,o,A);return a.inclusive?c<=0:c<0}(r.startAt,mf(r),s)||r.endAt&&!function(a,o,A){const c=q5(a,o,A);return a.inclusive?c>=0:c>0}(r.endAt,mf(r),s))}(t,e)}function $O(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function S4(t){return(e,n)=>{let r=!1;for(const s of mf(t)){const i=XO(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function XO(t,e,n){const r=t.field.isKeyField()?at.comparator(e.key,n.key):function(i,a,o){const A=a.data.field(i),c=o.data.field(i);return A!==null&&c!==null?hl(A,c):vt()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return vt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Hc(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return p4(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO=new Wn(at.comparator);function ai(){return JO}const F4=new Wn(at.comparator);function zh(...t){let e=F4;for(const n of t)e=e.insert(n.key,n);return e}function T4(t){let e=F4;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Qa(){return gf()}function U4(){return gf()}function gf(){return new _l(t=>t.toString(),(t,e)=>t.isEqual(e))}const YO=new Wn(at.comparator),ZO=new _n(at.comparator);function Wt(...t){let e=ZO;for(const n of t)e=e.add(n);return e}const eM=new _n(Ht);function tM(){return eM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zf(e)?"-0":e}}function Q4(t){return{integerValue:""+t}}function nM(t,e){return pO(e)?Q4(e):Ex(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(){this._=void 0}}function rM(t,e,n){return t instanceof ip?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&xx(i)&&(i=bx(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(n,e):t instanceof Sd?L4(t,e):t instanceof Fd?R4(t,e):function(s,i){const a=P4(s,i),o=J5(a)+J5(s.Pe);return s2(a)&&s2(s.Pe)?Q4(o):Ex(s.serializer,o)}(t,e)}function sM(t,e,n){return t instanceof Sd?L4(t,e):t instanceof Fd?R4(t,e):n}function P4(t,e){return t instanceof ap?function(r){return s2(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ip extends Ew{}class Sd extends Ew{constructor(e){super(),this.elements=e}}function L4(t,e){const n=k4(e);for(const r of t.elements)n.some(s=>Oa(s,r))||n.push(r);return{arrayValue:{values:n}}}class Fd extends Ew{constructor(e){super(),this.elements=e}}function R4(t,e){let n=k4(e);for(const r of t.elements)n=n.filter(s=>!Oa(s,r));return{arrayValue:{values:n}}}class ap extends Ew{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function J5(t){return Hn(t.integerValue||t.doubleValue)}function k4(t){return rp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,n){this.field=e,this.transform=n}}function aM(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Sd&&s instanceof Sd||r instanceof Fd&&s instanceof Fd?Ed(r.elements,s.elements,Oa):r instanceof ap&&s instanceof ap?Oa(r.Pe,s.Pe):r instanceof ip&&s instanceof ip}(t.transform,e.transform)}class oM{constructor(e,n){this.version=e,this.transformResults=n}}class qn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new qn}static exists(e){return new qn(void 0,e)}static updateTime(e){return new qn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Og(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class _w{}function D4(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Gd(t.key,qn.none()):new Kd(t.key,t.data,qn.none());{const n=t.data,r=ss.empty();let s=new _n(Gn.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Vo(t.key,r,new Gs(s.toArray()),qn.none())}}function AM(t,e,n){t instanceof Kd?function(s,i,a){const o=s.value.clone(),A=Z5(s.fieldTransforms,i,a.transformResults);o.setAll(A),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Vo?function(s,i,a){if(!Og(s.precondition,i))return void i.convertToUnknownDocument(a.version);const o=Z5(s.fieldTransforms,i,a.transformResults),A=i.data;A.setAll(j4(s)),A.setAll(o),i.convertToFoundDocument(a.version,A).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function wf(t,e,n,r){return t instanceof Kd?function(i,a,o,A){if(!Og(i.precondition,a))return o;const c=i.value.clone(),d=eE(i.fieldTransforms,A,a);return c.setAll(d),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Vo?function(i,a,o,A){if(!Og(i.precondition,a))return o;const c=eE(i.fieldTransforms,A,a),d=a.data;return d.setAll(j4(i)),d.setAll(c),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,a,o){return Og(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,n)}function lM(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=P4(r.transform,s||null);i!=null&&(n===null&&(n=ss.empty()),n.set(r.field,i))}return n||null}function Y5(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ed(r,s,(i,a)=>aM(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Kd extends _w{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Vo extends _w{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function j4(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Z5(t,e,n){const r=new Map;Ct(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,o=e.data.field(i.field);r.set(i.field,sM(a,o,n[s]))}return r}function eE(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,rM(i,a,e))}return r}class Gd extends _w{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _x extends _w{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&AM(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=wf(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=wf(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=U4();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=n.has(s.key)?null:o;const A=D4(a,o);A!==null&&r.set(s.key,A),a.isValidDocument()||a.convertToNoDocument(It.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Wt())}isEqual(e){return this.batchId===e.batchId&&Ed(this.mutations,e.mutations,(n,r)=>Y5(n,r))&&Ed(this.baseMutations,e.baseMutations,(n,r)=>Y5(n,r))}}class Nx{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ct(e.mutations.length===r.length);let s=function(){return YO}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Nx(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xr,an;function O4(t){switch(t){default:return vt();case Le.CANCELLED:case Le.UNKNOWN:case Le.DEADLINE_EXCEEDED:case Le.RESOURCE_EXHAUSTED:case Le.INTERNAL:case Le.UNAVAILABLE:case Le.UNAUTHENTICATED:return!1;case Le.INVALID_ARGUMENT:case Le.NOT_FOUND:case Le.ALREADY_EXISTS:case Le.PERMISSION_DENIED:case Le.FAILED_PRECONDITION:case Le.ABORTED:case Le.OUT_OF_RANGE:case Le.UNIMPLEMENTED:case Le.DATA_LOSS:return!0}}function M4(t){if(t===void 0)return Fs("GRPC error has no .code"),Le.UNKNOWN;switch(t){case xr.OK:return Le.OK;case xr.CANCELLED:return Le.CANCELLED;case xr.UNKNOWN:return Le.UNKNOWN;case xr.DEADLINE_EXCEEDED:return Le.DEADLINE_EXCEEDED;case xr.RESOURCE_EXHAUSTED:return Le.RESOURCE_EXHAUSTED;case xr.INTERNAL:return Le.INTERNAL;case xr.UNAVAILABLE:return Le.UNAVAILABLE;case xr.UNAUTHENTICATED:return Le.UNAUTHENTICATED;case xr.INVALID_ARGUMENT:return Le.INVALID_ARGUMENT;case xr.NOT_FOUND:return Le.NOT_FOUND;case xr.ALREADY_EXISTS:return Le.ALREADY_EXISTS;case xr.PERMISSION_DENIED:return Le.PERMISSION_DENIED;case xr.FAILED_PRECONDITION:return Le.FAILED_PRECONDITION;case xr.ABORTED:return Le.ABORTED;case xr.OUT_OF_RANGE:return Le.OUT_OF_RANGE;case xr.UNIMPLEMENTED:return Le.UNIMPLEMENTED;case xr.DATA_LOSS:return Le.DATA_LOSS;default:return vt()}}(an=xr||(xr={}))[an.OK=0]="OK",an[an.CANCELLED=1]="CANCELLED",an[an.UNKNOWN=2]="UNKNOWN",an[an.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",an[an.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",an[an.NOT_FOUND=5]="NOT_FOUND",an[an.ALREADY_EXISTS=6]="ALREADY_EXISTS",an[an.PERMISSION_DENIED=7]="PERMISSION_DENIED",an[an.UNAUTHENTICATED=16]="UNAUTHENTICATED",an[an.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",an[an.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",an[an.ABORTED=10]="ABORTED",an[an.OUT_OF_RANGE=11]="OUT_OF_RANGE",an[an.UNIMPLEMENTED=12]="UNIMPLEMENTED",an[an.INTERNAL=13]="INTERNAL",an[an.UNAVAILABLE=14]="UNAVAILABLE",an[an.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM=new mc([4294967295,4294967295],0);function tE(t){const e=uM().encode(t),n=new YF;return n.update(e),new Uint8Array(n.digest())}function nE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new mc([n,r],0),new mc([s,i],0)]}class Fx{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Wh(`Invalid padding: ${n}`);if(r<0)throw new Wh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Wh(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=mc.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(mc.fromNumber(r)));return s.compare(dM)===1&&(s=new mc([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=tE(e),[r,s]=nE(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);if(!this.de(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Fx(i,s,n);return r.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const n=tE(e),[r,s]=nE(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Wh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Qp.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Iw(It.min(),s,new Wn(Ht),ai(),Wt())}}class Qp{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Qp(r,n,Wt(),Wt(),Wt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class H4{constructor(e,n){this.targetId=e,this.me=n}}class V4{constructor(e,n,r=vr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class rE{constructor(){this.fe=0,this.ge=iE(),this.pe=vr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Wt(),n=Wt(),r=Wt();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:vt()}}),new Qp(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=iE()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ct(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class hM{constructor(e){this.Le=e,this.Be=new Map,this.ke=ai(),this.qe=sE(),this.Qe=new Wn(Ht)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:vt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(I0(i))if(r===0){const a=new at(i.path);this.Ue(n,a,Kn.newNoDocument(a,It.min()))}else Ct(r===1);else{const a=this.Ye(n);if(a!==r){const o=this.Ze(e),A=o?this.Xe(o,e,a):1;if(A!==0){this.je(n);const c=A===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,o;try{a=ul(r).toUint8Array()}catch(A){if(A instanceof m4)return cl("Decoding the base64 bloom filter in existence filter failed ("+A.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw A}try{o=new Fx(a,s,i)}catch(A){return cl(A instanceof Wh?"BloomFilter error: ":"Applying bloom filter failed: ",A),null}return o.Ie===0?null:o}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(o)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,a)=>{const o=this.Je(a);if(o){if(i.current&&I0(o.target)){const A=new at(o.target.path);this.ke.get(A)!==null||this.it(a,A)||this.Ue(a,A,Kn.newNoDocument(A,e))}i.be&&(n.set(a,i.ve()),i.Ce())}});let r=Wt();this.qe.forEach((i,a)=>{let o=!0;a.forEachWhile(A=>{const c=this.Je(A);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new Iw(e,n,this.Qe,this.ke,r);return this.ke=ai(),this.qe=sE(),this.Qe=new Wn(Ht),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new rE,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new _n(Ht),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||We("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new rE),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function sE(){return new Wn(at.comparator)}function iE(){return new Wn(at.comparator)}const fM={asc:"ASCENDING",desc:"DESCENDING"},pM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mM={and:"AND",or:"OR"};class gM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function l2(t,e){return t.useProto3Json||Sp(e)?e:{value:e}}function Td(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function K4(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function wM(t,e){return Td(t,e.toTimestamp())}function Kr(t){return Ct(!!t),It.fromTimestamp(function(n){const r=jo(n);return new Ut(r.seconds,r.nanos)}(t))}function Tx(t,e){return c2(t,e).canonicalString()}function c2(t,e){const n=function(s){return new ln(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function G4(t){const e=ln.fromString(t);return Ct(eT(e)),e}function op(t,e){return Tx(t.databaseId,e.path)}function No(t,e){const n=G4(e);if(n.get(1)!==t.databaseId.projectId)throw new Ze(Le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ze(Le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new at(W4(n))}function q4(t,e){return Tx(t.databaseId,e)}function z4(t){const e=G4(t);return e.length===4?ln.emptyPath():W4(e)}function u2(t){return new ln(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function W4(t){return Ct(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function aE(t,e,n){return{name:op(t,e),fields:n.value.mapValue.fields}}function vM(t,e,n){const r=No(t,e.name),s=Kr(e.updateTime),i=e.createTime?Kr(e.createTime):It.min(),a=new ss({mapValue:{fields:e.fields}}),o=Kn.newFoundDocument(r,s,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function yM(t,e){return"found"in e?function(r,s){Ct(!!s.found),s.found.name,s.found.updateTime;const i=No(r,s.found.name),a=Kr(s.found.updateTime),o=s.found.createTime?Kr(s.found.createTime):It.min(),A=new ss({mapValue:{fields:s.found.fields}});return Kn.newFoundDocument(i,a,o,A)}(t,e):"missing"in e?function(r,s){Ct(!!s.missing),Ct(!!s.readTime);const i=No(r,s.missing),a=Kr(s.readTime);return Kn.newNoDocument(i,a)}(t,e):vt()}function BM(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:vt()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(Ct(d===void 0||typeof d=="string"),vr.fromBase64String(d||"")):(Ct(d===void 0||d instanceof Buffer||d instanceof Uint8Array),vr.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const d=c.code===void 0?Le.UNKNOWN:M4(c.code);return new Ze(d,c.message||"")}(a);n=new V4(r,s,i,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=No(t,r.document.name),i=Kr(r.document.updateTime),a=r.document.createTime?Kr(r.document.createTime):It.min(),o=new ss({mapValue:{fields:r.document.fields}}),A=Kn.newFoundDocument(s,i,a,o),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Mg(c,d,A.key,A)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=No(t,r.document),i=r.readTime?Kr(r.readTime):It.min(),a=Kn.newNoDocument(s,i),o=r.removedTargetIds||[];n=new Mg([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=No(t,r.document),i=r.removedTargetIds||[];n=new Mg([],i,s,null)}else{if(!("filter"in e))return vt();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new cM(s,i),o=r.targetId;n=new H4(o,a)}}return n}function Ap(t,e){let n;if(e instanceof Kd)n={update:aE(t,e.key,e.value)};else if(e instanceof Gd)n={delete:op(t,e.key)};else if(e instanceof Vo)n={update:aE(t,e.key,e.data),updateMask:IM(e.fieldMask)};else{if(!(e instanceof _x))return vt();n={verify:op(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const o=a.transform;if(o instanceof ip)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Sd)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Fd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof ap)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw vt()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:wM(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:vt()}(t,e.precondition)),n}function d2(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?qn.updateTime(Kr(i.updateTime)):i.exists!==void 0?qn.exists(i.exists):qn.none()}(e.currentDocument):qn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(a,o){let A=null;if("setToServerValue"in o)Ct(o.setToServerValue==="REQUEST_TIME"),A=new ip;else if("appendMissingElements"in o){const d=o.appendMissingElements.values||[];A=new Sd(d)}else if("removeAllFromArray"in o){const d=o.removeAllFromArray.values||[];A=new Fd(d)}else"increment"in o?A=new ap(a,o.increment):vt();const c=Gn.fromServerFormat(o.fieldPath);return new iM(c,A)}(t,s)):[];if(e.update){e.update.name;const s=No(t,e.update.name),i=new ss({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(A){const c=A.fieldPaths||[];return new Gs(c.map(d=>Gn.fromServerFormat(d)))}(e.updateMask);return new Vo(s,i,a,n,r)}return new Kd(s,i,n,r)}if(e.delete){const s=No(t,e.delete);return new Gd(s,n)}if(e.verify){const s=No(t,e.verify);return new _x(s,n)}return vt()}function xM(t,e){return t&&t.length>0?(Ct(e!==void 0),t.map(n=>function(s,i){let a=s.updateTime?Kr(s.updateTime):Kr(i);return a.isEqual(It.min())&&(a=Kr(i)),new oM(a,s.transformResults||[])}(n,e))):[]}function $4(t,e){return{documents:[q4(t,e.path)]}}function X4(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=q4(t,s);const i=function(c){if(c.length!==0)return Z4(yn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(c){if(c.length!==0)return c.map(d=>function(p){return{field:Du(p.field),direction:CM(p.dir)}}(d))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=l2(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function J4(t){let e=z4(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ct(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(f){const p=Y4(f);return p instanceof yn&&Cx(p)?p.getFilters():[p]}(n.where));let a=[];n.orderBy&&(a=function(f){return f.map(p=>function(B){return new sp(ju(B.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(B.direction))}(p))}(n.orderBy));let o=null;n.limit&&(o=function(f){let p;return p=typeof f=="object"?f.value:f,Sp(p)?null:p}(n.limit));let A=null;n.startAt&&(A=function(f){const p=!!f.before,g=f.values||[];return new Id(g,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,g=f.values||[];return new Id(g,p)}(n.endAt)),zO(e,s,a,i,o,"F",A,c)}function bM(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vt()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Y4(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ju(n.unaryFilter.field);return sn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ju(n.unaryFilter.field);return sn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ju(n.unaryFilter.field);return sn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ju(n.unaryFilter.field);return sn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return vt()}}(t):t.fieldFilter!==void 0?function(n){return sn.create(ju(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return vt()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return yn.create(n.compositeFilter.filters.map(r=>Y4(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return vt()}}(n.compositeFilter.op))}(t):vt()}function CM(t){return fM[t]}function EM(t){return pM[t]}function _M(t){return mM[t]}function Du(t){return{fieldPath:t.canonicalString()}}function ju(t){return Gn.fromServerFormat(t.fieldPath)}function Z4(t){return t instanceof sn?function(n){if(n.op==="=="){if(V5(n.value))return{unaryFilter:{field:Du(n.field),op:"IS_NAN"}};if(H5(n.value))return{unaryFilter:{field:Du(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(V5(n.value))return{unaryFilter:{field:Du(n.field),op:"IS_NOT_NAN"}};if(H5(n.value))return{unaryFilter:{field:Du(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Du(n.field),op:EM(n.op),value:n.value}}}(t):t instanceof yn?function(n){const r=n.getFilters().map(s=>Z4(s));return r.length===1?r[0]:{compositeFilter:{op:_M(n.op),filters:r}}}(t):vt()}function IM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function eT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,n,r,s,i=It.min(),a=It.min(),o=vr.EMPTY_BYTE_STRING,A=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=A}withSequenceNumber(e){return new bo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new bo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e){this.ct=e}}function NM(t,e){let n;if(e.document)n=vM(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=at.fromSegments(e.noDocument.path),s=Rc(e.noDocument.readTime);n=Kn.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return vt();{const r=at.fromSegments(e.unknownDocument.path),s=Rc(e.unknownDocument.version);n=Kn.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new Ut(s[0],s[1]);return It.fromTimestamp(i)}(e.readTime)),n}function oE(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:F0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,a){return{name:op(i,a.key),fields:a.data.value.mapValue.fields,updateTime:Td(i,a.version.toTimestamp()),createTime:Td(i,a.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Lc(e.version)};else{if(!e.isUnknownDocument())return vt();r.unknownDocument={path:n.path.toArray(),version:Lc(e.version)}}return r}function F0(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Lc(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Rc(t){const e=new Ut(t.seconds,t.nanoseconds);return It.fromTimestamp(e)}function sc(t,e){const n=(e.baseMutations||[]).map(i=>d2(t.ct,i));for(let i=0;i<e.mutations.length-1;++i){const a=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const o=e.mutations[i+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>d2(t.ct,i)),s=Ut.fromMillis(e.localWriteTimeMs);return new Ix(e.batchId,s,n,r)}function $h(t){const e=Rc(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Rc(t.lastLimboFreeSnapshotVersion):It.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){return Ct(i.documents.length===1),Qi(Tp(z4(i.documents[0])))}(t.query):function(i){return Qi(J4(i))}(t.query),new bo(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,vr.fromBase64String(t.resumeToken))}function nT(t,e){const n=Lc(e.snapshotVersion),r=Lc(e.lastLimboFreeSnapshotVersion);let s;s=I0(e.target)?$4(t.ct,e.target):X4(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Pc(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function rT(t){const e=J4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?S0(e,e.limit,"L"):e}function ly(t,e){return new Sx(e.largestBatchId,d2(t.ct,e.overlayMutation))}function AE(t,e){const n=e.path.lastSegment();return[t,Us(e.path.popLast()),n]}function lE(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Lc(r.readTime),documentKey:Us(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{getBundleMetadata(e,n){return cE(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:Rc(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return cE(e).put(function(s){return{bundleId:s.id,createTime:Lc(Kr(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return uE(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:rT(i.bundledQuery),readTime:Rc(i.readTime)}}(r)})}saveNamedQuery(e,n){return uE(e).put(function(s){return{name:s.name,readTime:Lc(Kr(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function cE(t){return Ur(t,"bundles")}function uE(t){return Ur(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new Nw(e,r)}getOverlay(e,n){return bh(e).get(AE(this.userId,n)).next(r=>r?ly(this.serializer,r):null)}getOverlays(e,n){const r=Qa();return Ne.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,a)=>{const o=new Sx(n,a);s.push(this.ht(e,o))}),Ne.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(a=>s.add(Us(a.getCollectionPath())));const i=[];return s.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);i.push(bh(e).j("collectionPathOverlayIndex",o))}),Ne.waitFor(i)}getOverlaysForCollection(e,n,r){const s=Qa(),i=Us(n),a=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return bh(e).U("collectionPathOverlayIndex",a).next(o=>{for(const A of o){const c=ly(this.serializer,A);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=Qa();let a;const o=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return bh(e).J({index:"collectionGroupOverlayIndex",range:o},(A,c,d)=>{const f=ly(this.serializer,c);i.size()<s||f.largestBatchId===a?(i.set(f.getKey(),f),a=f.largestBatchId):d.done()}).next(()=>i)}ht(e,n){return bh(e).put(function(s,i,a){const[o,A,c]=AE(i,a.mutation.key);return{userId:i,collectionPath:A,documentId:c,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Ap(s.ct,a.mutation)}}(this.serializer,this.userId,n))}}function bh(t){return Ur(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{Pt(e){return Ur(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?vr.fromUint8Array(r):vr.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Hn(e.integerValue));else if("doubleValue"in e){const r=Hn(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Zf(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=jo(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(ul(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?g4(e)?this.dt(n,Number.MAX_SAFE_INTEGER):bw(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):vt()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const s of Object.keys(r))this.Vt(s,n),this.Tt(r[s],n)}wt(e,n){var r,s;const i=e.fields||{};this.dt(n,53);const a="value",o=((s=(r=i[a].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.dt(n,15),n.At(Hn(o)),this.Vt(a,n),this.Tt(i[a],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const s of r)this.Tt(s,n)}yt(e,n){this.dt(n,37),at.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}ic.vt=new ic;function TM(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function dE(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const a=TM(255&r[i]);if(s+=a,a!==8)break}return s}(t);return Math.ceil(e/8)}class UM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const s=n.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const s=n.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const n=this.qt(e),r=dE(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}Kt(e){const n=this.qt(e),r=dE(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class QM{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class PM{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Ch{constructor(){this.jt=new UM,this.Ht=new QM(this.jt),this.Jt=new PM(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,n,r,s){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=s}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ac(this.indexId,this.documentKey,this.arrayValue,r)}}function yA(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=hE(t.arrayValue,e.arrayValue),n!==0?n:(n=hE(t.directionalValue,e.directionalValue),n!==0?n:at.comparator(t.documentKey,e.documentKey)))}function hE(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e){this.Xt=new _n((n,r)=>Gn.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Ct(e.collectionGroup===this.collectionId),this.nn)return!1;const n=t2(e);if(n!==void 0&&!this.sn(n))return!1;const r=ec(e);let s=new Set,i=0,a=0;for(;i<r.length&&this.sn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.Xt.size>0){const o=this.Xt.getIterator().getNext();if(!s.has(o.field.canonicalString())){const A=r[i];if(!this.on(o,A)||!this._n(this.en[a++],A))return!1}++i}for(;i<r.length;++i){const o=r[i];if(a>=this.en.length||!this._n(this.en[a++],o))return!1}return!0}an(){if(this.nn)return null;let e=new _n(Gn.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Rg(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Rg(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Rg(r.field,r.dir==="asc"?0:1)));return new _0(_0.UNKNOWN_ID,this.collectionId,n,Yf.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(t){var e,n;if(Ct(t instanceof sn||t instanceof yn),t instanceof sn){if(t instanceof _4){const s=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(i=>sn.create(t.field,"==",i)))||[];return yn.create(s,"or")}return t}const r=t.filters.map(s=>sT(s));return yn.create(r,t.op)}function LM(t){if(t.getFilters().length===0)return[];const e=p2(sT(t));return Ct(iT(e)),h2(e)||f2(e)?[e]:e.getFilters()}function h2(t){return t instanceof sn}function f2(t){return t instanceof yn&&Cx(t)}function iT(t){return h2(t)||f2(t)||function(n){if(n instanceof yn&&i2(n)){for(const r of n.getFilters())if(!h2(r)&&!f2(r))return!1;return!0}return!1}(t)}function p2(t){if(Ct(t instanceof sn||t instanceof yn),t instanceof sn)return t;if(t.filters.length===1)return p2(t.filters[0]);const e=t.filters.map(r=>p2(r));let n=yn.create(e,t.op);return n=T0(n),iT(n)?n:(Ct(n instanceof yn),Ct(Nd(n)),Ct(n.filters.length>1),n.filters.reduce((r,s)=>Ux(r,s)))}function Ux(t,e){let n;return Ct(t instanceof sn||t instanceof yn),Ct(e instanceof sn||e instanceof yn),n=t instanceof sn?e instanceof sn?function(s,i){return yn.create([s,i],"and")}(t,e):pE(t,e):e instanceof sn?pE(e,t):function(s,i){if(Ct(s.filters.length>0&&i.filters.length>0),Nd(s)&&Nd(i))return b4(s,i.getFilters());const a=i2(s)?s:i,o=i2(s)?i:s,A=a.filters.map(c=>Ux(c,o));return yn.create(A,"or")}(t,e),T0(n)}function pE(t,e){if(Nd(e))return b4(e,t.getFilters());{const n=e.filters.map(r=>Ux(t,r));return yn.create(n,"or")}}function T0(t){if(Ct(t instanceof sn||t instanceof yn),t instanceof sn)return t;const e=t.getFilters();if(e.length===1)return T0(e[0]);if(B4(t))return t;const n=e.map(s=>T0(s)),r=[];return n.forEach(s=>{s instanceof sn?r.push(s):s instanceof yn&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:yn.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(){this.un=new Qx}addToCollectionParentIndex(e,n){return this.un.add(n),Ne.resolve()}getCollectionParents(e,n){return Ne.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Ne.resolve()}deleteFieldIndex(e,n){return Ne.resolve()}deleteAllFieldIndexes(e){return Ne.resolve()}createTargetIndexes(e,n){return Ne.resolve()}getDocumentsMatchingTarget(e,n){return Ne.resolve(null)}getIndexType(e,n){return Ne.resolve(0)}getFieldIndexes(e,n){return Ne.resolve([])}getNextCollectionGroupToUpdate(e){return Ne.resolve(null)}getMinOffset(e,n){return Ne.resolve(ci.min())}getMinOffsetFromCollectionGroup(e,n){return Ne.resolve(ci.min())}updateCollectionGroup(e,n,r){return Ne.resolve()}updateIndexEntries(e,n){return Ne.resolve()}}class Qx{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new _n(ln.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new _n(ln.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm=new Uint8Array(0);class kM{constructor(e,n){this.databaseId=n,this.cn=new Qx,this.ln=new _l(r=>Pc(r),(r,s)=>Fp(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const i={collectionId:r,parent:Us(s)};return mE(e).put(i)}return Ne.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[a4(n),""],!1,!0);return mE(e).U(s).next(i=>{for(const a of i){if(a.collectionId!==n)break;r.push(Ua(a.parent))}return r})}addFieldIndex(e,n){const r=Eh(e),s=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(A=>[A.fieldPath.canonicalString(),A.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const a=yu(e);return i.next(o=>{a.put(lE(o,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=Eh(e),s=yu(e),i=vu(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Eh(e),r=vu(e),s=yu(e);return n.j().next(()=>r.j()).next(()=>s.j())}createTargetIndexes(e,n){return Ne.forEach(this.hn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new fE(r).an();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=vu(e);let s=!0;const i=new Map;return Ne.forEach(this.hn(n),a=>this.Pn(e,a).next(o=>{s&&(s=!!o),i.set(a,o)})).next(()=>{if(s){let a=Wt();const o=[];return Ne.forEach(i,(A,c)=>{We("IndexedDbIndexManager",`Using index ${function(N){return`id=${N.indexId}|cg=${N.collectionGroup}|f=${N.fields.map(R=>`${R.fieldPath}:${R.kind}`).join(",")}`}(A)} to execute ${Pc(n)}`);const d=function(N,R){const V=t2(R);if(V===void 0)return null;for(const j of N0(N,V.fieldPath))switch(j.op){case"array-contains-any":return j.value.arrayValue.values||[];case"array-contains":return[j.value]}return null}(c,A),f=function(N,R){const V=new Map;for(const j of ec(R))for(const U of N0(N,j.fieldPath))switch(U.op){case"==":case"in":V.set(j.fieldPath.canonicalString(),U.value);break;case"not-in":case"!=":return V.set(j.fieldPath.canonicalString(),U.value),Array.from(V.values())}return null}(c,A),p=function(N,R){const V=[];let j=!0;for(const U of ec(R)){const I=U.kind===0?W5(N,U.fieldPath,N.startAt):$5(N,U.fieldPath,N.startAt);V.push(I.value),j&&(j=I.inclusive)}return new Id(V,j)}(c,A),g=function(N,R){const V=[];let j=!0;for(const U of ec(R)){const I=U.kind===0?$5(N,U.fieldPath,N.endAt):W5(N,U.fieldPath,N.endAt);V.push(I.value),j&&(j=I.inclusive)}return new Id(V,j)}(c,A),B=this.In(A,c,p),b=this.In(A,c,g),C=this.Tn(A,c,f),w=this.En(A.indexId,d,B,p.inclusive,b,g.inclusive,C);return Ne.forEach(w,y=>r.G(y,n.limit).next(N=>{N.forEach(R=>{const V=at.fromSegments(R.documentKey);a.has(V)||(a=a.add(V),o.push(V))})}))}).next(()=>o)}return Ne.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=LM(yn.create(e.filters,"and")).map(r=>o2(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,s,i,a,o){const A=(n!=null?n.length:1)*Math.max(r.length,i.length),c=A/(n!=null?n.length:1),d=[];for(let f=0;f<A;++f){const p=n?this.dn(n[f/c]):Pm,g=this.An(e,p,r[f%c],s),B=this.Rn(e,p,i[f%c],a),b=o.map(C=>this.An(e,p,C,!0));d.push(...this.createRange(g,B,b))}return d}An(e,n,r,s){const i=new ac(e,at.empty(),n,r);return s?i:i.Zt()}Rn(e,n,r,s){const i=new ac(e,at.empty(),n,r);return s?i.Zt():i}Pn(e,n){const r=new fE(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let a=null;for(const o of i)r.rn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(e,n){let r=2;const s=this.hn(n);return Ne.forEach(s,i=>this.Pn(e,i).next(a=>{a?r!==0&&a.fields.length<function(A){let c=new _n(Gn.comparator),d=!1;for(const f of A.filters)for(const p of f.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:c=c.add(p.field));for(const f of A.orderBy)f.field.isKeyField()||(c=c.add(f.field));return c.size+(d?1:0)}(i)&&(r=1):r=0})).next(()=>function(a){return a.limit!==null}(n)&&s.length>1&&r===2?1:r)}Vn(e,n){const r=new Ch;for(const s of ec(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const a=r.Yt(s.kind);ic.vt.It(i,a)}return r.zt()}dn(e){const n=new Ch;return ic.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new Ch;return ic.vt.It(np(this.databaseId,n),r.Yt(function(i){const a=ec(i);return a.length===0?0:a[a.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let s=[];s.push(new Ch);let i=0;for(const a of ec(e)){const o=r[i++];for(const A of s)if(this.fn(n,a.fieldPath)&&rp(o))s=this.gn(s,a,o);else{const c=A.Yt(a.kind);ic.vt.It(o,c)}}return this.pn(s)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const s=[...e],i=[];for(const a of r.arrayValue.values||[])for(const o of s){const A=new Ch;A.seed(o.zt()),ic.vt.It(a,A.Yt(n.kind)),i.push(A)}return i}fn(e,n){return!!e.filters.find(r=>r instanceof sn&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Eh(e),s=yu(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(i=>{const a=[];return Ne.forEach(i,o=>s.get([o.indexId,this.uid]).next(A=>{a.push(function(d,f){const p=f?new Yf(f.sequenceNumber,new ci(Rc(f.readTime),new at(Ua(f.documentKey)),f.largestBatchId)):Yf.empty(),g=d.fields.map(([B,b])=>new Rg(Gn.fromServerFormat(B),b));return new _0(d.indexId,d.collectionGroup,g,p)}(o,A))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:Ht(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=Eh(e),i=yu(e);return this.yn(e).next(a=>s.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(o=>Ne.forEach(o,A=>i.put(lE(A.indexId,this.uid,a,r)))))}updateIndexEntries(e,n){const r=new Map;return Ne.forEach(n,(s,i)=>{const a=r.get(s.collectionGroup);return(a?Ne.resolve(a):this.getFieldIndexes(e,s.collectionGroup)).next(o=>(r.set(s.collectionGroup,o),Ne.forEach(o,A=>this.wn(e,s,A).next(c=>{const d=this.Sn(i,A);return c.isEqual(d)?Ne.resolve():this.bn(e,i,A,c,d)}))))})}Dn(e,n,r,s){return vu(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,s){return vu(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const s=vu(e);let i=new _n(yA);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(a,o)=>{i=i.add(new ac(r.indexId,n,o.arrayValue,o.directionalValue))}).next(()=>i)}Sn(e,n){let r=new _n(yA);const s=this.Vn(n,e);if(s==null)return r;const i=t2(n);if(i!=null){const a=e.data.field(i.fieldPath);if(rp(a))for(const o of a.arrayValue.values||[])r=r.add(new ac(n.indexId,e.key,this.dn(o),s))}else r=r.add(new ac(n.indexId,e.key,Pm,s));return r}bn(e,n,r,s,i){We("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const a=[];return function(A,c,d,f,p){const g=A.getIterator(),B=c.getIterator();let b=wu(g),C=wu(B);for(;b||C;){let w=!1,y=!1;if(b&&C){const N=d(b,C);N<0?y=!0:N>0&&(w=!0)}else b!=null?y=!0:w=!0;w?(f(C),C=wu(B)):y?(p(b),b=wu(g)):(b=wu(g),C=wu(B))}}(s,i,yA,o=>{a.push(this.Dn(e,n,r,o))},o=>{a.push(this.vn(e,n,r,o))}),Ne.waitFor(a)}yn(e){let n=1;return yu(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((a,o)=>yA(a,o)).filter((a,o,A)=>!o||yA(a,A[o-1])!==0);const s=[];s.push(e);for(const a of r){const o=yA(a,e),A=yA(a,n);if(o===0)s[0]=e.Zt();else if(o>0&&A<0)s.push(a),s.push(a.Zt());else if(A>0)break}s.push(n);const i=[];for(let a=0;a<s.length;a+=2){if(this.Cn(s[a],s[a+1]))return[];const o=[s[a].indexId,this.uid,s[a].arrayValue,s[a].directionalValue,Pm,[]],A=[s[a+1].indexId,this.uid,s[a+1].arrayValue,s[a+1].directionalValue,Pm,[]];i.push(IDBKeyRange.bound(o,A))}return i}Cn(e,n){return yA(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(gE)}getMinOffset(e,n){return Ne.mapArray(this.hn(n),r=>this.Pn(e,r).next(s=>s||vt())).next(gE)}}function mE(t){return Ur(t,"collectionParents")}function vu(t){return Ur(t,"indexEntries")}function Eh(t){return Ur(t,"indexConfiguration")}function yu(t){return Ur(t,"indexState")}function gE(t){Ct(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;vx(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new ci(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ms{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ms(e,Ms.DEFAULT_COLLECTION_PERCENTILE,Ms.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(t,e,n){const r=t.store("mutations"),s=t.store("documentMutations"),i=[],a=IDBKeyRange.only(n.batchId);let o=0;const A=r.J({range:a},(d,f,p)=>(o++,p.delete()));i.push(A.next(()=>{Ct(o===1)}));const c=[];for(const d of n.mutations){const f=u4(e,d.key.path,n.batchId);i.push(s.delete(f)),c.push(d.key)}return Ne.waitFor(i).next(()=>c)}function U0(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw vt();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ms.DEFAULT_COLLECTION_PERCENTILE=10,Ms.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ms.DEFAULT=new Ms(41943040,Ms.DEFAULT_COLLECTION_PERCENTILE,Ms.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ms.DISABLED=new Ms(-1,0,0);class Sw{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Fn={}}static lt(e,n,r,s){Ct(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new Sw(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return BA(e).J({index:"userMutationsIndex",range:r},(s,i,a)=>{n=!1,a.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=Ou(e),a=BA(e);return a.add({}).next(o=>{Ct(typeof o=="number");const A=new Ix(o,n,r,s),c=function(g,B,b){const C=b.baseMutations.map(y=>Ap(g.ct,y)),w=b.mutations.map(y=>Ap(g.ct,y));return{userId:B,batchId:b.batchId,localWriteTimeMs:b.localWriteTime.toMillis(),baseMutations:C,mutations:w}}(this.serializer,this.userId,A),d=[];let f=new _n((p,g)=>Ht(p.canonicalString(),g.canonicalString()));for(const p of s){const g=u4(this.userId,p.key.path,o);f=f.add(p.key.path.popLast()),d.push(a.put(c)),d.push(i.put(g,gO))}return f.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Fn[o]=A.keys()}),Ne.waitFor(d).next(()=>A)})}lookupMutationBatch(e,n){return BA(e).get(n).next(r=>r?(Ct(r.userId===this.userId),sc(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?Ne.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Fn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return BA(e).J({index:"userMutationsIndex",range:s},(a,o,A)=>{o.userId===this.userId&&(Ct(o.batchId>=r),i=sc(this.serializer,o)),A.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return BA(e).J({index:"userMutationsIndex",range:n,reverse:!0},(s,i,a)=>{r=i.batchId,a.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return BA(e).U("userMutationsIndex",n).next(r=>r.map(s=>sc(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=kg(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return Ou(e).J({range:s},(a,o,A)=>{const[c,d,f]=a,p=Ua(d);if(c===this.userId&&n.path.isEqual(p))return BA(e).get(f).next(g=>{if(!g)throw vt();Ct(g.userId===this.userId),i.push(sc(this.serializer,g))});A.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new _n(Ht);const s=[];return n.forEach(i=>{const a=kg(this.userId,i.path),o=IDBKeyRange.lowerBound(a),A=Ou(e).J({range:o},(c,d,f)=>{const[p,g,B]=c,b=Ua(g);p===this.userId&&i.path.isEqual(b)?r=r.add(B):f.done()});s.push(A)}),Ne.waitFor(s).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=kg(this.userId,r),a=IDBKeyRange.lowerBound(i);let o=new _n(Ht);return Ou(e).J({range:a},(A,c,d)=>{const[f,p,g]=A,B=Ua(p);f===this.userId&&r.isPrefixOf(B)?B.length===s&&(o=o.add(g)):d.done()}).next(()=>this.xn(e,o))}xn(e,n){const r=[],s=[];return n.forEach(i=>{s.push(BA(e).get(i).next(a=>{if(a===null)throw vt();Ct(a.userId===this.userId),r.push(sc(this.serializer,a))}))}),Ne.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return aT(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),Ne.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return Ne.resolve();const r=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),s=[];return Ou(e).J({range:r},(i,a,o)=>{if(i[0]===this.userId){const A=Ua(i[1]);s.push(A)}else o.done()}).next(()=>{Ct(s.length===0)})})}containsKey(e,n){return oT(e,this.userId,n)}Nn(e){return AT(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function oT(t,e,n){const r=kg(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let a=!1;return Ou(t).J({range:i,H:!0},(o,A,c)=>{const[d,f,p]=o;d===e&&f===s&&(a=!0),c.done()}).next(()=>a)}function BA(t){return Ur(t,"mutations")}function Ou(t){return Ur(t,"documentMutations")}function AT(t){return Ur(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new kc(0)}static kn(){return new kc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new kc(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>It.fromTimestamp(new Ut(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.Qn(e,s)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Bu(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(Ct(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return Bu(e).J((a,o)=>{const A=$h(o);A.sequenceNumber<=n&&r.get(A.targetId)===null&&(s++,i.push(this.removeTargetData(e,A)))}).next(()=>Ne.waitFor(i)).next(()=>s)}forEachTarget(e,n){return Bu(e).J((r,s)=>{const i=$h(s);n(i)})}qn(e){return vE(e).get("targetGlobalKey").next(n=>(Ct(n!==null),n))}Qn(e,n){return vE(e).put("targetGlobalKey",n)}Kn(e,n){return Bu(e).put(nT(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Pc(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return Bu(e).J({range:s,index:"queryTargetsIndex"},(a,o,A)=>{const c=$h(o);Fp(n,c.target)&&(i=c,A.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=kA(e);return n.forEach(a=>{const o=Us(a.path);s.push(i.put({targetId:r,path:o})),s.push(this.referenceDelegate.addReference(e,r,a))}),Ne.waitFor(s)}removeMatchingKeys(e,n,r){const s=kA(e);return Ne.forEach(n,i=>{const a=Us(i.path);return Ne.waitFor([s.delete([r,a]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=kA(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=kA(e);let i=Wt();return s.J({range:r,H:!0},(a,o,A)=>{const c=Ua(a[1]),d=new at(c);i=i.add(d)}).next(()=>i)}containsKey(e,n){const r=Us(n.path),s=IDBKeyRange.bound([r],[a4(r)],!1,!0);let i=0;return kA(e).J({index:"documentTargetsIndex",H:!0,range:s},([a,o],A,c)=>{a!==0&&(i++,c.done())}).next(()=>i>0)}ot(e,n){return Bu(e).get(n).next(r=>r?$h(r):null)}}function Bu(t){return Ur(t,"targets")}function vE(t){return Ur(t,"targetGlobal")}function kA(t){return Ur(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE([t,e],[n,r]){const s=Ht(t,n);return s===0?Ht(e,r):s}class jM{constructor(e){this.Un=e,this.buffer=new _n(yE),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();yE(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class OM{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){We("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){El(n)?We("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Mc(n)}await this.Hn(3e5)})}}class MM{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Ne.resolve(Si.oe);const r=new jM(n);return this.Jn.forEachTarget(e,s=>r.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>r.zn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(We("LruGarbageCollector","Garbage collection skipped; disabled"),Ne.resolve(wE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(We("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wE):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,s,i,a,o,A,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(We("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,a=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,o=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,A=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),Ru()<=rn.DEBUG&&We("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(o-a)+`ms
	Removed ${i} targets in `+(A-o)+`ms
	Removed ${f} documents in `+(c-A)+`ms
Total Duration: ${c-d}ms`),Ne.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function HM(t,e){return new MM(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e,n){this.db=e,this.garbageCollector=HM(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,s)=>n(s))}addReference(e,n,r){return Lm(e,r)}removeReference(e,n,r){return Lm(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Lm(e,n)}nr(e,n){return function(s,i){let a=!1;return AT(s).Y(o=>oT(s,o,i).next(A=>(A&&(a=!0),Ne.resolve(!A)))).next(()=>a)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.tr(e,(a,o)=>{if(o<=n){const A=this.nr(e,a).next(c=>{if(!c)return i++,r.getEntry(e,a).next(()=>(r.removeEntry(a,It.min()),kA(e).delete(function(f){return[0,Us(f.path)]}(a))))});s.push(A)}}).next(()=>Ne.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Lm(e,n)}tr(e,n){const r=kA(e);let s,i=Si.oe;return r.J({index:"documentTargetsIndex"},([a,o],{path:A,sequenceNumber:c})=>{a===0?(i!==Si.oe&&n(new at(Ua(s)),i),i=c,s=A):i=Si.oe}).next(()=>{i!==Si.oe&&n(new at(Ua(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Lm(t,e){return kA(t).put(function(r,s){return{targetId:0,path:Us(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(){this.changes=new _l(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Kn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ne.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Wl(e).put(r)}removeEntry(e,n,r){return Wl(e).delete(function(i,a){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],F0(a),o[o.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=Kn.newInvalidDocument(n);return Wl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(_h(n))},(s,i)=>{r=this.ir(n,i)}).next(()=>r)}sr(e,n){let r={size:0,document:Kn.newInvalidDocument(n)};return Wl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(_h(n))},(s,i)=>{r={document:this.ir(n,i),size:U0(i)}}).next(()=>r)}getEntries(e,n){let r=ai();return this._r(e,n,(s,i)=>{const a=this.ir(s,i);r=r.insert(s,a)}).next(()=>r)}ar(e,n){let r=ai(),s=new Wn(at.comparator);return this._r(e,n,(i,a)=>{const o=this.ir(i,a);r=r.insert(i,o),s=s.insert(i,U0(a))}).next(()=>({documents:r,ur:s}))}_r(e,n,r){if(n.isEmpty())return Ne.resolve();let s=new _n(bE);n.forEach(A=>s=s.add(A));const i=IDBKeyRange.bound(_h(s.first()),_h(s.last())),a=s.getIterator();let o=a.getNext();return Wl(e).J({index:"documentKeyIndex",range:i},(A,c,d)=>{const f=at.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;o&&bE(o,f)<0;)r(o,null),o=a.getNext();o&&o.isEqual(f)&&(r(o,c),o=a.hasNext()?a.getNext():null),o?d.$(_h(o)):d.done()}).next(()=>{for(;o;)r(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const a=n.path,o=[a.popLast().toArray(),a.lastSegment(),F0(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],A=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wl(e).U(IDBKeyRange.bound(o,A,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let d=ai();for(const f of c){const p=this.ir(at.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);p.isFoundDocument()&&(Up(n,p)||s.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,n,r,s){let i=ai();const a=xE(n,r),o=xE(n,ci.max());return Wl(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,o,!0)},(A,c,d)=>{const f=this.ir(at.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(f.key,f),i.size===s&&d.done()}).next(()=>i)}newChangeBuffer(e){return new GM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return BE(e).get("remoteDocumentGlobalKey").next(n=>(Ct(!!n),n))}rr(e,n){return BE(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=NM(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(It.min())))return r}return Kn.newInvalidDocument(e)}}function cT(t){return new KM(t)}class GM extends lT{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new _l(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new _n((i,a)=>Ht(i.canonicalString(),a.canonicalString()));return this.changes.forEach((i,a)=>{const o=this.lr.get(i);if(n.push(this.cr.removeEntry(e,i,o.readTime)),a.isValidDocument()){const A=oE(this.cr.serializer,a);s=s.add(i.path.popLast());const c=U0(A);r+=c-o.size,n.push(this.cr.addEntry(e,i,A))}else if(r-=o.size,this.trackRemovals){const A=oE(this.cr.serializer,a.convertToNoDocument(It.min()));n.push(this.cr.addEntry(e,i,A))}}),s.forEach(i=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.cr.updateMetadata(e,r)),Ne.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:s})=>(s.forEach((i,a)=>{this.lr.set(i,{size:a,readTime:r.get(i).readTime})}),r))}}function BE(t){return Ur(t,"remoteDocumentGlobal")}function Wl(t){return Ur(t,"remoteDocumentsV14")}function _h(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function xE(t,e){const n=e.documentKey.path.toArray();return[t,F0(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function bE(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=Ht(n[i],r[i]),s)return s;return s=Ht(n.length,r.length),s||(s=Ht(n[n.length-2],r[r.length-2]),s||Ht(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&wf(r.mutation,s,Gs.empty(),Ut.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Wt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Wt()){const s=Qa();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=zh();return i.forEach((o,A)=>{a=a.insert(o,A.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Qa();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Wt()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,r,s){let i=ai();const a=gf(),o=function(){return gf()}();return n.forEach((A,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Vo)?i=i.insert(c.key,c):d!==void 0?(a.set(c.key,d.mutation.getFieldMask()),wf(d.mutation,c,d.mutation.getFieldMask(),Ut.now())):a.set(c.key,Gs.empty())}),this.recalculateAndSaveOverlays(e,i).next(A=>(A.forEach((c,d)=>a.set(c,d)),n.forEach((c,d)=>{var f;return o.set(c,new qM(d,(f=a.get(c))!==null&&f!==void 0?f:null))}),o))}recalculateAndSaveOverlays(e,n){const r=gf();let s=new Wn((a,o)=>a-o),i=Wt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(A=>{const c=n.get(A);if(c===null)return;let d=r.get(A)||Gs.empty();d=o.applyToLocalView(c,d),r.set(A,d);const f=(s.get(o.batchId)||Wt()).add(A);s=s.insert(o.batchId,f)})}).next(()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const A=o.getNext(),c=A.key,d=A.value,f=U4();d.forEach(p=>{if(!i.has(p)){const g=D4(n.get(p),r.get(p));g!==null&&f.set(p,g),i=i.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,f))}return Ne.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return at.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):I4(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):Ne.resolve(Qa());let o=-1,A=i;return a.next(c=>Ne.forEach(c,(d,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),i.get(d)?Ne.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{A=A.insert(d,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,A,c,Wt())).next(d=>({batchId:o,changes:T4(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new at(n)).next(r=>{let s=zh();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=zh();return this.indexManager.getCollectionParents(e,i).next(o=>Ne.forEach(o,A=>{const c=function(f,p){return new Vd(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,A.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((f,p)=>{a=a.insert(f,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((A,c)=>{const d=c.getKey();a.get(d)===null&&(a=a.insert(d,Kn.newInvalidDocument(d)))});let o=zh();return a.forEach((A,c)=>{const d=i.get(A);d!==void 0&&wf(d.mutation,c,Gs.empty(),Ut.now()),Up(n,c)&&(o=o.insert(A,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Ne.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Kr(s.createTime)}}(n)),Ne.resolve()}getNamedQuery(e,n){return Ne.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:rT(s.bundledQuery),readTime:Kr(s.readTime)}}(n)),Ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(){this.overlays=new Wn(at.comparator),this.Ir=new Map}getOverlay(e,n){return Ne.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Qa();return Ne.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),Ne.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),Ne.resolve()}getOverlaysForCollection(e,n,r){const s=Qa(),i=n.length+1,a=new at(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const A=o.getNext().value,c=A.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&A.largestBatchId>r&&s.set(A.getKey(),A)}return Ne.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Wn((c,d)=>c-d);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Qa(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const o=Qa(),A=i.getIterator();for(;A.hasNext()&&(A.getNext().value.forEach((c,d)=>o.set(c,d)),!(o.size()>=s)););return Ne.resolve(o)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new Sx(n,r));let i=this.Ir.get(n);i===void 0&&(i=Wt(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(){this.sessionToken=vr.EMPTY_BYTE_STRING}getSessionToken(e){return Ne.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(){this.Tr=new _n(Mr.Er),this.dr=new _n(Mr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Mr(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Mr(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new at(new ln([])),r=new Mr(n,e),s=new Mr(n,e+1),i=[];return this.dr.forEachInRange([r,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new at(new ln([])),r=new Mr(n,e),s=new Mr(n,e+1);let i=Wt();return this.dr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new Mr(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Mr{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return at.comparator(e.key,n.key)||Ht(e.wr,n.wr)}static Ar(e,n){return Ht(e.wr,n.wr)||at.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new _n(Mr.Er)}checkEmpty(e){return Ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Ix(i,n,r,s);this.mutationQueue.push(a);for(const o of s)this.br=this.br.add(new Mr(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ne.resolve(a)}lookupMutationBatch(e,n){return Ne.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return Ne.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ne.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Mr(n,0),s=new Mr(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],a=>{const o=this.Dr(a.wr);i.push(o)}),Ne.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new _n(Ht);return n.forEach(s=>{const i=new Mr(s,0),a=new Mr(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],o=>{r=r.add(o.wr)})}),Ne.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;at.isDocumentKey(i)||(i=i.child(""));const a=new Mr(new at(i),0);let o=new _n(Ht);return this.br.forEachWhile(A=>{const c=A.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(o=o.add(A.wr)),!0)},a),Ne.resolve(this.Cr(o))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ct(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Ne.forEach(n.mutations,s=>{const i=new Mr(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Mr(n,0),s=this.br.firstAfterOrEqual(r);return Ne.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ne.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e){this.Mr=e,this.docs=function(){return new Wn(at.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Ne.resolve(r?r.document.mutableCopy():Kn.newInvalidDocument(n))}getEntries(e,n){let r=ai();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Kn.newInvalidDocument(s))}),Ne.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=ai();const a=n.path,o=new at(a.child("")),A=this.docs.getIteratorFrom(o);for(;A.hasNext();){const{key:c,value:{document:d}}=A.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||vx(o4(d),r)<=0||(s.has(d.key)||Up(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return Ne.resolve(i)}getAllFromCollectionGroup(e,n,r,s){vt()}Or(e,n){return Ne.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new YM(this)}getSize(e){return Ne.resolve(this.size)}}class YM extends lT{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),Ne.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e){this.persistence=e,this.Nr=new _l(n=>Pc(n),Fp),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Px,this.targetCount=0,this.kr=kc.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),Ne.resolve()}getLastRemoteSnapshotVersion(e){return Ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ne.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ne.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Ne.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new kc(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Ne.resolve()}updateTargetData(e,n){return this.Kn(n),Ne.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Ne.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),Ne.waitFor(i).next(()=>s)}getTargetCount(e){return Ne.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Ne.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Ne.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),Ne.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Ne.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Ne.resolve(r)}containsKey(e,n){return Ne.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Si(0),this.Kr=!1,this.Kr=!0,this.$r=new $M,this.referenceDelegate=e(this),this.Ur=new ZM(this),this.indexManager=new RM,this.remoteDocumentCache=function(s){return new JM(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new tT(n),this.Gr=new zM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new WM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new XM(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){We("MemoryPersistence","Starting transaction:",e);const s=new e8(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return Ne.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class e8 extends l4{constructor(e){super(),this.currentSequenceNumber=e}}class Fw{constructor(e){this.persistence=e,this.Jr=new Px,this.Yr=null}static Zr(e){return new Fw(e)}get Xr(){if(this.Yr)return this.Yr;throw vt()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Ne.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Ne.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Ne.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ne.forEach(this.Xr,r=>{const s=at.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,It.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Ne.or([()=>Ne.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8{constructor(e){this.serializer=e}O(e,n,r,s){const i=new xw("createOrUpgrade",n);r<1&&s>=1&&(function(A){A.createObjectStore("owner")}(e),function(A){A.createObjectStore("mutationQueues",{keyPath:"userId"}),A.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",k5,{unique:!0}),A.createObjectStore("documentMutations")}(e),CE(e),function(A){A.createObjectStore("remoteDocuments")}(e));let a=Ne.resolve();return r<3&&s>=3&&(r!==0&&(function(A){A.deleteObjectStore("targetDocuments"),A.deleteObjectStore("targets"),A.deleteObjectStore("targetGlobal")}(e),CE(e)),a=a.next(()=>function(A){const c=A.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:It.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(i))),r<4&&s>=4&&(r!==0&&(a=a.next(()=>function(A,c){return c.store("mutations").U().next(d=>{A.deleteObjectStore("mutations"),A.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",k5,{unique:!0});const f=c.store("mutations"),p=d.map(g=>f.put(g));return Ne.waitFor(p)})}(e,i))),a=a.next(()=>{(function(A){A.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&s>=5&&(a=a.next(()=>this.ni(i))),r<6&&s>=6&&(a=a.next(()=>(function(A){A.createObjectStore("remoteDocumentGlobal")}(e),this.ri(i)))),r<7&&s>=7&&(a=a.next(()=>this.ii(i))),r<8&&s>=8&&(a=a.next(()=>this.si(e,i))),r<9&&s>=9&&(a=a.next(()=>{(function(A){A.objectStoreNames.contains("remoteDocumentChanges")&&A.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(a=a.next(()=>this.oi(i))),r<11&&s>=11&&(a=a.next(()=>{(function(A){A.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(A){A.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(a=a.next(()=>{(function(A){const c=A.createObjectStore("documentOverlays",{keyPath:SO});c.createIndex("collectionPathOverlayIndex",FO,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",TO,{unique:!1})})(e)})),r<13&&s>=13&&(a=a.next(()=>function(A){const c=A.createObjectStore("remoteDocumentsV14",{keyPath:wO});c.createIndex("documentKeyIndex",vO),c.createIndex("collectionGroupIndex",yO)}(e)).next(()=>this._i(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(a=a.next(()=>this.ai(e,i))),r<15&&s>=15&&(a=a.next(()=>function(A){A.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),A.createObjectStore("indexState",{keyPath:EO}).createIndex("sequenceNumberIndex",_O,{unique:!1}),A.createObjectStore("indexEntries",{keyPath:IO}).createIndex("documentKeyIndex",NO,{unique:!1})}(e))),r<16&&s>=16&&(a=a.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&s>=17&&(a=a.next(()=>{(function(A){A.createObjectStore("globals",{keyPath:"name"})})(e)})),a}ri(e){let n=0;return e.store("remoteDocuments").J((r,s)=>{n+=U0(s)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(s=>Ne.forEach(s,i=>{const a=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",a).next(o=>Ne.forEach(o,A=>{Ct(A.userId===i.userId);const c=sc(this.serializer,A);return aT(e,i.userId,c).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return r.J((a,o)=>{const A=new ln(a),c=function(f){return[0,Us(f)]}(A);i.push(n.get(c).next(d=>d?Ne.resolve():(f=>n.put({targetId:0,path:Us(f),sequenceNumber:s.highestListenSequenceNumber}))(A)))}).next(()=>Ne.waitFor(i))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:CO});const r=n.store("collectionParents"),s=new Qx,i=a=>{if(s.add(a)){const o=a.lastSegment(),A=a.popLast();return r.put({collectionId:o,parent:Us(A)})}};return n.store("remoteDocuments").J({H:!0},(a,o)=>{const A=new ln(a);return i(A.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([a,o,A],c)=>{const d=Ua(o);return i(d.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,s)=>{const i=$h(s),a=nT(this.serializer,i);return n.put(a)})}_i(e,n){const r=n.store("remoteDocuments"),s=[];return r.J((i,a)=>{const o=n.store("remoteDocumentsV14"),A=function(f){return f.document?new at(ln.fromString(f.document.name).popFirst(5)):f.noDocument?at.fromSegments(f.noDocument.path):f.unknownDocument?at.fromSegments(f.unknownDocument.path):vt()}(a).path.toArray(),c={prefixPath:A.slice(0,A.length-2),collectionGroup:A[A.length-2],documentId:A[A.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};s.push(o.put(c))}).next(()=>Ne.waitFor(s))}ai(e,n){const r=n.store("mutations"),s=cT(this.serializer),i=new dT(Fw.Zr,this.serializer.ct);return r.U().next(a=>{const o=new Map;return a.forEach(A=>{var c;let d=(c=o.get(A.userId))!==null&&c!==void 0?c:Wt();sc(this.serializer,A).keys().forEach(f=>d=d.add(f)),o.set(A.userId,d)}),Ne.forEach(o,(A,c)=>{const d=new ns(c),f=Nw.lt(this.serializer,d),p=i.getIndexManager(d),g=Sw.lt(d,this.serializer,p,i.referenceDelegate);return new uT(s,g,f,p).recalculateAndSaveOverlaysForDocumentKeys(new n2(n,Si.oe),A).next()})})}}function CE(t){t.createObjectStore("targetDocuments",{keyPath:xO}).createIndex("documentTargetsIndex",bO,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",BO,{unique:!0}),t.createObjectStore("targetGlobal")}const cy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Lx{constructor(e,n,r,s,i,a,o,A,c,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=i,this.window=a,this.document=o,this.ci=c,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=p=>Promise.resolve(),!Lx.D())throw new Ze(Le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new VM(this,s),this.Ai=n+"main",this.serializer=new tT(A),this.Ri=new sl(this.Ai,this.hi,new t8(this.serializer)),this.$r=new FM,this.Ur=new DM(this.referenceDelegate,this.serializer),this.remoteDocumentCache=cT(this.serializer),this.Gr=new SM,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&Fs("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ze(Le.FAILED_PRECONDITION,cy);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Si(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Rm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(El(e))return We("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return We("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Ih(e).get("owner").next(n=>Ne.resolve(this.vi(n)))}Ci(e){return Rm(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Ur(n,"clientMetadata");return r.U().next(s=>{const i=this.xi(s,18e5),a=s.filter(o=>i.indexOf(o)===-1);return Ne.forEach(a,o=>r.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Ne.resolve(!0):Ih(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new Ze(Le.FAILED_PRECONDITION,cy);return!1}}return!(!this.networkEnabled||!this.inForeground)||Rm(e).U().next(r=>this.xi(r,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,a=!this.inForeground&&s.inForeground,o=this.networkEnabled===s.networkEnabled;if(i||a&&o)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&We("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new n2(e,Si.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Rm(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return Sw.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new kM(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Nw.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){We("IndexedDbPersistence","Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(A){return A===17?PO:A===16?QO:A===15?Bx:A===14?f4:A===13?h4:A===12?UO:A===11?d4:void vt()}(this.hi);let a;return this.Ri.runTransaction(e,s,i,o=>(a=new n2(o,this.Qr?this.Qr.next():Si.oe),n==="readwrite-primary"?this.wi(a).next(A=>!!A||this.Si(a)).next(A=>{if(!A)throw Fs(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Ze(Le.FAILED_PRECONDITION,A4);return r(a)}).next(A=>this.Di(a).next(()=>A)):this.Ki(a).next(()=>r(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Ki(e){return Ih(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Ze(Le.FAILED_PRECONDITION,cy)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ih(e).put("owner",n)}static D(){return sl.D()}bi(e){const n=Ih(e);return n.get("owner").next(r=>this.vi(r)?(We("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Ne.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Fs(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;lF()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return We("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Fs("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Fs("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ih(t){return Ur(t,"owner")}function Rm(t){return Ur(t,"clientMetadata")}function n8(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Wt(),s=Wt();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Rx(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return lF()?8:c4(Tr())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new r8;return this.Xi(e,n,a).next(o=>{if(i.result=o,this.zi)return this.es(e,n,a,o.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Ru()<=rn.DEBUG&&We("QueryEngine","SDK will not create cache indexes for query:",ku(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ne.resolve()):(Ru()<=rn.DEBUG&&We("QueryEngine","Query:",ku(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Ru()<=rn.DEBUG&&We("QueryEngine","The SDK decides to create cache indexes for query:",ku(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qi(n))):Ne.resolve())}Yi(e,n){if(X5(n))return Ne.resolve(null);let r=Qi(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=S0(n,null,"F"),r=Qi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=Wt(...i);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,r).next(A=>{const c=this.ts(n,o);return this.ns(n,c,a,A.readTime)?this.Yi(e,S0(n,null,"F")):this.rs(e,c,n,A)}))})))}Zi(e,n,r,s){return X5(n)||s.isEqual(It.min())?Ne.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const a=this.ts(n,i);return this.ns(n,a,r,s)?Ne.resolve(null):(Ru()<=rn.DEBUG&&We("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ku(n)),this.rs(e,a,n,cO(s,-1)).next(o=>o))})}ts(e,n){let r=new _n(S4(e));return n.forEach((s,i)=>{Up(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Ru()<=rn.DEBUG&&We("QueryEngine","Using full collection scan to execute query:",ku(n)),this.Ji.getDocumentsMatchingQuery(e,n,ci.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Wn(Ht),this._s=new _l(i=>Pc(i),Fp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uT(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function fT(t,e,n,r){return new s8(t,e,n,r)}async function pT(t,e){const n=kt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],o=[];let A=Wt();for(const c of s){a.push(c.batchId);for(const d of c.mutations)A=A.add(d.key)}for(const c of i){o.push(c.batchId);for(const d of c.mutations)A=A.add(d.key)}return n.localDocuments.getDocuments(r,A).next(c=>({hs:c,removedBatchIds:a,addedBatchIds:o}))})})}function i8(t,e){const n=kt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(o,A,c,d){const f=c.batch,p=f.keys();let g=Ne.resolve();return p.forEach(B=>{g=g.next(()=>d.getEntry(A,B)).next(b=>{const C=c.docVersions.get(B);Ct(C!==null),b.version.compareTo(C)<0&&(f.applyToRemoteDocument(b,c),b.isValidDocument()&&(b.setReadTime(c.commitVersion),d.addEntry(b)))})}),g.next(()=>o.mutationQueue.removeMutationBatch(A,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let A=Wt();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(A=A.add(o.batch.mutations[c].key));return A}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function mT(t){const e=kt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function a8(t,e){const n=kt(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const o=[];e.targetChanges.forEach((d,f)=>{const p=s.get(f);if(!p)return;o.push(n.Ur.removeMatchingKeys(i,d.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(i,d.addedDocuments,f)));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(vr.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),s=s.insert(f,g),function(b,C,w){return b.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,g,d)&&o.push(n.Ur.updateTargetData(i,g))});let A=ai(),c=Wt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),o.push(o8(i,a,e.documentUpdates).next(d=>{A=d.Ps,c=d.Is})),!r.isEqual(It.min())){const d=n.Ur.getLastRemoteSnapshotVersion(i).next(f=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));o.push(d)}return Ne.waitFor(o).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,A,c)).next(()=>A)}).then(i=>(n.os=s,i))}function o8(t,e,n){let r=Wt(),s=Wt();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=ai();return n.forEach((o,A)=>{const c=i.get(o);A.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),A.isNoDocument()&&A.version.isEqual(It.min())?(e.removeEntry(o,A.readTime),a=a.insert(o,A)):!c.isValidDocument()||A.version.compareTo(c.version)>0||A.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(A),a=a.insert(o,A)):We("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",A.version)}),{Ps:a,Is:s}})}function A8(t,e){const n=kt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function l8(t,e){const n=kt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,Ne.resolve(s)):n.Ur.allocateTargetId(r).next(a=>(s=new bo(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function m2(t,e,n){const r=kt(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!El(a))throw a;We("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function EE(t,e,n){const r=kt(t);let s=It.min(),i=Wt();return r.persistence.runTransaction("Execute query","readwrite",a=>function(A,c,d){const f=kt(A),p=f._s.get(d);return p!==void 0?Ne.resolve(f.os.get(p)):f.Ur.getTargetData(c,d)}(r,a,Qi(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,o.targetId).next(A=>{i=A})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?s:It.min(),n?i:Wt())).next(o=>(c8(r,$O(e),o),{documents:o,Ts:i})))}function c8(t,e,n){let r=t.us.get(e)||It.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class _E{constructor(){this.activeTargetIds=tM()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gT{constructor(){this.so=new _E,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new _E,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){We("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){We("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let km=null;function uy(){return km===null?km=function(){return 268435456+Math.round(2147483648*Math.random())}():km++,"0x"+km.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h8{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="WebChannelConnection";class f8 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,a){const o=uy(),A=this.xo(n,r.toUriEncodedString());We("RestConnection",`Sending RPC '${n}' ${o}:`,A,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,a),this.No(n,A,c,s).then(d=>(We("RestConnection",`Received RPC '${n}' ${o}: `,d),d),d=>{throw cl("RestConnection",`RPC '${n}' ${o} failed with error: `,d,"url: ",A,"request:",s),d})}Lo(n,r,s,i,a,o){return this.Mo(n,r,s,i,a)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Hd}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>n[a]=i),s&&s.headers.forEach((i,a)=>n[a]=i)}xo(n,r){const s=d8[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=uy();return new Promise((a,o)=>{const A=new ZF;A.setWithCredentials(!0),A.listenOnce(e4.COMPLETE,()=>{try{switch(A.getLastErrorCode()){case Lg.NO_ERROR:const d=A.getResponseJson();We(ds,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),a(d);break;case Lg.TIMEOUT:We(ds,`RPC '${e}' ${i} timed out`),o(new Ze(Le.DEADLINE_EXCEEDED,"Request time out"));break;case Lg.HTTP_ERROR:const f=A.getStatus();if(We(ds,`RPC '${e}' ${i} failed with status:`,f,"response text:",A.getResponseText()),f>0){let p=A.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const B=function(C){const w=C.toLowerCase().replace(/_/g,"-");return Object.values(Le).indexOf(w)>=0?w:Le.UNKNOWN}(g.status);o(new Ze(B,g.message))}else o(new Ze(Le.UNKNOWN,"Server responded with status "+A.getStatus()))}else o(new Ze(Le.UNAVAILABLE,"Connection failed."));break;default:vt()}}finally{We(ds,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);We(ds,`RPC '${e}' ${i} sending request:`,s),A.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=uy(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=r4(),o=n4(),A={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(A.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(A.useFetchStreams=!0),this.Oo(A.initMessageHeaders,n,r),A.encodeInitMessageHeaders=!0;const d=i.join("");We(ds,`Creating RPC '${e}' stream ${s}: ${d}`,A);const f=a.createWebChannel(d,A);let p=!1,g=!1;const B=new h8({Io:C=>{g?We(ds,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(p||(We(ds,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),We(ds,`RPC '${e}' stream ${s} sending:`,C),f.send(C))},To:()=>f.close()}),b=(C,w,y)=>{C.listen(w,N=>{try{y(N)}catch(R){setTimeout(()=>{throw R},0)}})};return b(f,qh.EventType.OPEN,()=>{g||(We(ds,`RPC '${e}' stream ${s} transport opened.`),B.yo())}),b(f,qh.EventType.CLOSE,()=>{g||(g=!0,We(ds,`RPC '${e}' stream ${s} transport closed`),B.So())}),b(f,qh.EventType.ERROR,C=>{g||(g=!0,cl(ds,`RPC '${e}' stream ${s} transport errored:`,C),B.So(new Ze(Le.UNAVAILABLE,"The operation could not be completed")))}),b(f,qh.EventType.MESSAGE,C=>{var w;if(!g){const y=C.data[0];Ct(!!y);const N=y,R=N.error||((w=N[0])===null||w===void 0?void 0:w.error);if(R){We(ds,`RPC '${e}' stream ${s} received error:`,R);const V=R.status;let j=function(Q){const D=xr[Q];if(D!==void 0)return M4(D)}(V),U=R.message;j===void 0&&(j=Le.INTERNAL,U="Unknown error status: "+V+" with message "+R.message),g=!0,B.So(new Ze(j,U)),f.close()}else We(ds,`RPC '${e}' stream ${s} received:`,y),B.bo(y)}}),b(o,t4.STAT_EVENT,C=>{C.stat===e2.PROXY?We(ds,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===e2.NOPROXY&&We(ds,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{B.wo()},0),B}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p8(){return typeof window<"u"?window:null}function Hg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(t){return new gM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&We("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,n,r,s,i,a,o,A){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=A,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new kx(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Le.RESOURCE_EXHAUSTED?(Fs(n.toString()),Fs("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Ze(Le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return We("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(We("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class m8 extends wT{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=BM(this.serializer,e),r=function(i){if(!("targetChange"in i))return It.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?It.min():a.readTime?Kr(a.readTime):It.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=u2(this.serializer),n.addTarget=function(i,a){let o;const A=a.target;if(o=I0(A)?{documents:$4(i,A)}:{query:X4(i,A)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=K4(i,a.resumeToken);const c=l2(i,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(It.min())>0){o.readTime=Td(i,a.snapshotVersion.toTimestamp());const c=l2(i,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const r=bM(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=u2(this.serializer),n.removeTarget=e,this.a_(n)}}class g8 extends wT{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ct(!!e.streamToken),this.lastStreamToken=e.streamToken,Ct(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=xM(e.writeResults,e.commitTime),r=Kr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=u2(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Ap(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Ze(Le.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,c2(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ze(Le.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,c2(n,r),s,a,o,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ze(Le.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class v8{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Fs(n),this.D_=!1):We("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{r.enqueueAndForget(async()=>{Vc(this)&&(We("RemoteStore","Restarting streams for network reachability change."),await async function(A){const c=kt(A);c.L_.add(4),await Pp(c),c.q_.set("Unknown"),c.L_.delete(4),await Uw(c)}(this))})}),this.q_=new v8(r,s)}}async function Uw(t){if(Vc(t))for(const e of t.B_)await e(!0)}async function Pp(t){for(const e of t.B_)await e(!1)}function vT(t,e){const n=kt(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Mx(n)?Ox(n):qd(n).r_()&&jx(n,e))}function Dx(t,e){const n=kt(t),r=qd(n);n.N_.delete(e),r.r_()&&yT(n,e),n.N_.size===0&&(r.r_()?r.o_():Vc(n)&&n.q_.set("Unknown"))}function jx(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(It.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qd(t).A_(e)}function yT(t,e){t.Q_.xe(e),qd(t).R_(e)}function Ox(t){t.Q_=new hM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),qd(t).start(),t.q_.v_()}function Mx(t){return Vc(t)&&!qd(t).n_()&&t.N_.size>0}function Vc(t){return kt(t).L_.size===0}function BT(t){t.Q_=void 0}async function B8(t){t.q_.set("Online")}async function x8(t){t.N_.forEach((e,n)=>{jx(t,e)})}async function b8(t,e){BT(t),Mx(t)?(t.q_.M_(e),Ox(t)):t.q_.set("Unknown")}async function C8(t,e,n){if(t.q_.set("Online"),e instanceof V4&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const o of i.targetIds)s.N_.has(o)&&(await s.remoteSyncer.rejectListen(o,a),s.N_.delete(o),s.Q_.removeTarget(o))}(t,e)}catch(r){We("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Q0(t,r)}else if(e instanceof Mg?t.Q_.Ke(e):e instanceof H4?t.Q_.He(e):t.Q_.We(e),!n.isEqual(It.min()))try{const r=await mT(t.localStore);n.compareTo(r)>=0&&await function(i,a){const o=i.Q_.rt(a);return o.targetChanges.forEach((A,c)=>{if(A.resumeToken.approximateByteSize()>0){const d=i.N_.get(c);d&&i.N_.set(c,d.withResumeToken(A.resumeToken,a))}}),o.targetMismatches.forEach((A,c)=>{const d=i.N_.get(A);if(!d)return;i.N_.set(A,d.withResumeToken(vr.EMPTY_BYTE_STRING,d.snapshotVersion)),yT(i,A);const f=new bo(d.target,A,c,d.sequenceNumber);jx(i,f)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){We("RemoteStore","Failed to raise snapshot:",r),await Q0(t,r)}}async function Q0(t,e,n){if(!El(e))throw e;t.L_.add(1),await Pp(t),t.q_.set("Offline"),n||(n=()=>mT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{We("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Uw(t)})}function xT(t,e){return e().catch(n=>Q0(t,n,e))}async function Lp(t){const e=kt(t),n=fl(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;E8(e);)try{const s=await A8(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,_8(e,s)}catch(s){await Q0(e,s)}bT(e)&&CT(e)}function E8(t){return Vc(t)&&t.O_.length<10}function _8(t,e){t.O_.push(e);const n=fl(t);n.r_()&&n.V_&&n.m_(e.mutations)}function bT(t){return Vc(t)&&!fl(t).n_()&&t.O_.length>0}function CT(t){fl(t).start()}async function I8(t){fl(t).p_()}async function N8(t){const e=fl(t);for(const n of t.O_)e.m_(n.mutations)}async function S8(t,e,n){const r=t.O_.shift(),s=Nx.from(r,e,n);await xT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Lp(t)}async function F8(t,e){e&&fl(t).V_&&await async function(r,s){if(function(a){return O4(a)&&a!==Le.ABORTED}(s.code)){const i=r.O_.shift();fl(r).s_(),await xT(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Lp(r)}}(t,e),bT(t)&&CT(t)}async function NE(t,e){const n=kt(t);n.asyncQueue.verifyOperationInProgress(),We("RemoteStore","RemoteStore received new credentials");const r=Vc(n);n.L_.add(3),await Pp(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Uw(n)}async function T8(t,e){const n=kt(t);e?(n.L_.delete(2),await Uw(n)):e||(n.L_.add(2),await Pp(n),n.q_.set("Unknown"))}function qd(t){return t.K_||(t.K_=function(n,r,s){const i=kt(n);return i.w_(),new m8(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:B8.bind(null,t),Ro:x8.bind(null,t),mo:b8.bind(null,t),d_:C8.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Mx(t)?Ox(t):t.q_.set("Unknown")):(await t.K_.stop(),BT(t))})),t.K_}function fl(t){return t.U_||(t.U_=function(n,r,s){const i=kt(n);return i.w_(),new g8(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:I8.bind(null,t),mo:F8.bind(null,t),f_:N8.bind(null,t),g_:S8.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Lp(t)):(await t.U_.stop(),t.O_.length>0&&(We("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new ra,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,o=new Hx(e,n,a,s,i);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ze(Le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vx(t,e){if(Fs("AsyncQueue",`${e}: ${t}`),El(t))return new Ze(Le.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e){this.comparator=e?(n,r)=>e(n,r)||at.comparator(n.key,r.key):(n,r)=>at.comparator(n.key,r.key),this.keyedMap=zh(),this.sortedSet=new Wn(this.comparator)}static emptySet(e){return new fd(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof fd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new fd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(){this.W_=new Wn(at.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):vt():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ud{constructor(e,n,r,s,i,a,o,A,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=A,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new Ud(e,n,fd.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Q8{constructor(){this.queries=FE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=kt(n),i=s.queries;s.queries=FE(),i.forEach((a,o)=>{for(const A of o.j_)A.onError(r)})})(this,new Ze(Le.ABORTED,"Firestore shutting down"))}}function FE(){return new _l(t=>N4(t),Cw)}async function Kx(t,e){const n=kt(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new U8,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const o=Vx(a,`Initialization of query '${ku(e.query)}' failed`);return void e.onError(o)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&qx(n)}async function Gx(t,e){const n=kt(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function P8(t,e){const n=kt(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const o of a.j_)o.X_(s)&&(r=!0);a.z_=s}}r&&qx(n)}function L8(t,e,n){const r=kt(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function qx(t){t.Y_.forEach(e=>{e.next()})}var g2,TE;(TE=g2||(g2={})).ea="default",TE.Cache="cache";class zx{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ud(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ud.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==g2.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e){this.key=e}}class _T{constructor(e){this.key=e}}class R8{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Wt(),this.mutatedKeys=Wt(),this.Aa=S4(e),this.Ra=new fd(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new SE,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,o=!1;const A=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,f)=>{const p=s.get(d),g=Up(this.query,f)?f:null,B=!!p&&this.mutatedKeys.has(p.key),b=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let C=!1;p&&g?p.data.isEqual(g.data)?B!==b&&(r.track({type:3,doc:g}),C=!0):this.ga(p,g)||(r.track({type:2,doc:g}),C=!0,(A&&this.Aa(g,A)>0||c&&this.Aa(g,c)<0)&&(o=!0)):!p&&g?(r.track({type:0,doc:g}),C=!0):p&&!g&&(r.track({type:1,doc:p}),C=!0,(A||c)&&(o=!0)),C&&(g?(a=a.add(g),i=b?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ra:a,fa:r,ns:o,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((d,f)=>function(g,B){const b=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vt()}};return b(g)-b(B)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),s=s!=null&&s;const o=n&&!s?this.ya():[],A=this.da.size===0&&this.current&&!s?1:0,c=A!==this.Ea;return this.Ea=A,a.length!==0||c?{snapshot:new Ud(this.query,e.Ra,i,a,e.mutatedKeys,A===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new SE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Wt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new _T(r))}),this.da.forEach(r=>{e.has(r)||n.push(new ET(r))}),n}ba(e){this.Ta=e.Ts,this.da=Wt();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ud.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class k8{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class D8{constructor(e){this.key=e,this.va=!1}}class j8{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new _l(o=>N4(o),Cw),this.Ma=new Map,this.xa=new Set,this.Oa=new Wn(at.comparator),this.Na=new Map,this.La=new Px,this.Ba={},this.ka=new Map,this.qa=kc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function O8(t,e,n=!0){const r=UT(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await IT(r,e,n,!0),s}async function M8(t,e){const n=UT(t);await IT(n,e,!0,!1)}async function IT(t,e,n,r){const s=await l8(t.localStore,Qi(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await H8(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&vT(t.remoteStore,s),o}async function H8(t,e,n,r,s){t.Ka=(f,p,g)=>async function(b,C,w,y){let N=C.view.ma(w);N.ns&&(N=await EE(b.localStore,C.query,!1).then(({documents:U})=>C.view.ma(U,N)));const R=y&&y.targetChanges.get(C.targetId),V=y&&y.targetMismatches.get(C.targetId)!=null,j=C.view.applyChanges(N,b.isPrimaryClient,R,V);return QE(b,C.targetId,j.wa),j.snapshot}(t,f,p,g);const i=await EE(t.localStore,e,!0),a=new R8(e,i.Ts),o=a.ma(i.documents),A=Qp.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=a.applyChanges(o,t.isPrimaryClient,A);QE(t,n,c.wa);const d=new k8(e,n,a);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function V8(t,e,n){const r=kt(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(a=>!Cw(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await m2(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Dx(r.remoteStore,s.targetId),w2(r,s.targetId)}).catch(Mc)):(w2(r,s.targetId),await m2(r.localStore,s.targetId,!0))}async function K8(t,e){const n=kt(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Dx(n.remoteStore,r.targetId))}async function G8(t,e,n){const r=QT(t);try{const s=await function(a,o){const A=kt(a),c=Ut.now(),d=o.reduce((g,B)=>g.add(B.key),Wt());let f,p;return A.persistence.runTransaction("Locally write mutations","readwrite",g=>{let B=ai(),b=Wt();return A.cs.getEntries(g,d).next(C=>{B=C,B.forEach((w,y)=>{y.isValidDocument()||(b=b.add(w))})}).next(()=>A.localDocuments.getOverlayedDocuments(g,B)).next(C=>{f=C;const w=[];for(const y of o){const N=lM(y,f.get(y.key).overlayedDocument);N!=null&&w.push(new Vo(y.key,N,v4(N.value.mapValue),qn.exists(!0)))}return A.mutationQueue.addMutationBatch(g,c,w,o)}).next(C=>{p=C;const w=C.applyToLocalDocumentSet(f,b);return A.documentOverlayCache.saveOverlays(g,C.batchId,w)})}).then(()=>({batchId:p.batchId,changes:T4(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,o,A){let c=a.Ba[a.currentUser.toKey()];c||(c=new Wn(Ht)),c=c.insert(o,A),a.Ba[a.currentUser.toKey()]=c}(r,s.batchId,n),await Rp(r,s.changes),await Lp(r.remoteStore)}catch(s){const i=Vx(s,"Failed to persist write");n.reject(i)}}async function NT(t,e){const n=kt(t);try{const r=await a8(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Na.get(i);a&&(Ct(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?Ct(a.va):s.removedDocuments.size>0&&(Ct(a.va),a.va=!1))}),await Rp(n,r,e)}catch(r){await Mc(r)}}function UE(t,e,n){const r=kt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,a)=>{const o=a.view.Z_(e);o.snapshot&&s.push(o.snapshot)}),function(a,o){const A=kt(a);A.onlineState=o;let c=!1;A.queries.forEach((d,f)=>{for(const p of f.j_)p.Z_(o)&&(c=!0)}),c&&qx(A)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function q8(t,e,n){const r=kt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let a=new Wn(at.comparator);a=a.insert(i,Kn.newNoDocument(i,It.min()));const o=Wt().add(i),A=new Iw(It.min(),new Map,new Wn(Ht),a,o);await NT(r,A),r.Oa=r.Oa.remove(i),r.Na.delete(e),Wx(r)}else await m2(r.localStore,e,!1).then(()=>w2(r,e,n)).catch(Mc)}async function z8(t,e){const n=kt(t),r=e.batch.batchId;try{const s=await i8(n.localStore,e);FT(n,r,null),ST(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Rp(n,s)}catch(s){await Mc(s)}}async function W8(t,e,n){const r=kt(t);try{const s=await function(a,o){const A=kt(a);return A.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return A.mutationQueue.lookupMutationBatch(c,o).next(f=>(Ct(f!==null),d=f.keys(),A.mutationQueue.removeMutationBatch(c,f))).next(()=>A.mutationQueue.performConsistencyCheck(c)).next(()=>A.documentOverlayCache.removeOverlaysForBatchId(c,d,o)).next(()=>A.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>A.localDocuments.getDocuments(c,d))})}(r.localStore,e);FT(r,e,n),ST(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Rp(r,s)}catch(s){await Mc(s)}}function ST(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function FT(t,e,n){const r=kt(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function w2(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||TT(t,r)})}function TT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Dx(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Wx(t))}function QE(t,e,n){for(const r of n)r instanceof ET?(t.La.addReference(r.key,e),$8(t,r)):r instanceof _T?(We("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||TT(t,r.key)):vt()}function $8(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(We("SyncEngine","New document in limbo: "+n),t.xa.add(r),Wx(t))}function Wx(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new at(ln.fromString(e)),r=t.qa.next();t.Na.set(r,new D8(n)),t.Oa=t.Oa.insert(n,r),vT(t.remoteStore,new bo(Qi(Tp(n.path)),r,"TargetPurposeLimboResolution",Si.oe))}}async function Rp(t,e,n){const r=kt(t),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((o,A)=>{a.push(r.Ka(A,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(A.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(A.targetId,f?"current":"not-current")}if(c){s.push(c);const f=Rx.Wi(A.targetId,c);i.push(f)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(A,c){const d=kt(A);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Ne.forEach(c,p=>Ne.forEach(p.$i,g=>d.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>Ne.forEach(p.Ui,g=>d.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!El(f))throw f;We("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const g=d.os.get(p),B=g.snapshotVersion,b=g.withLastLimboFreeSnapshotVersion(B);d.os=d.os.insert(p,b)}}}(r.localStore,i))}async function X8(t,e){const n=kt(t);if(!n.currentUser.isEqual(e)){We("SyncEngine","User change. New user:",e.toKey());const r=await pT(n.localStore,e);n.currentUser=e,function(i,a){i.ka.forEach(o=>{o.forEach(A=>{A.reject(new Ze(Le.CANCELLED,a))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Rp(n,r.hs)}}function J8(t,e){const n=kt(t),r=n.Na.get(e);if(r&&r.va)return Wt().add(r.key);{let s=Wt();const i=n.Ma.get(e);if(!i)return s;for(const a of i){const o=n.Fa.get(a);s=s.unionWith(o.view.Va)}return s}}function UT(t){const e=kt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=NT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=J8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=q8.bind(null,e),e.Ca.d_=P8.bind(null,e.eventManager),e.Ca.$a=L8.bind(null,e.eventManager),e}function QT(t){const e=kt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=z8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=W8.bind(null,e),e}class lp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tw(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return fT(this.persistence,new hT,e.initialUser,this.serializer)}Ga(e){return new dT(Fw.Zr,this.serializer)}Wa(e){return new gT}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lp.provider={build:()=>new lp};class Y8 extends lp{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await QT(this.Ja.syncEngine),await Lp(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return fT(this.persistence,new hT,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new OM(r,e.asyncQueue,n)}Ha(e,n){const r=new fO(n,this.persistence);return new hO(e.asyncQueue,r)}Ga(e){const n=n8(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Ms.withCacheSize(this.cacheSizeBytes):Ms.DEFAULT;return new Lx(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,p8(),Hg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new gT}}class P0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>UE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=X8.bind(null,this.syncEngine),await T8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Q8}()}createDatastore(e){const n=Tw(e.databaseInfo.databaseId),r=function(i){return new f8(i)}(e.databaseInfo);return function(i,a,o,A){return new w8(i,a,o,A)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,o){return new y8(r,s,i,a,o)}(this.localStore,this.datastore,e.asyncQueue,n=>UE(this.syncEngine,n,0),function(){return IE.D()?new IE:new u8}())}createSyncEngine(e,n){return function(s,i,a,o,A,c,d){const f=new j8(s,i,a,o,A,c);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=kt(s);We("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Pp(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}P0.provider={build:()=>new P0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Fs("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z8{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Ze(Le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,i){const a=kt(s),o={documents:i.map(f=>op(a.serializer,f))},A=await a.Lo("BatchGetDocuments",a.serializer.databaseId,ln.emptyPath(),o,i.length),c=new Map;A.forEach(f=>{const p=yM(a.serializer,f);c.set(p.key.toString(),p)});const d=[];return i.forEach(f=>{const p=c.get(f.toString());Ct(!!p),d.push(p)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Gd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=at.fromPath(r);this.mutations.push(new _x(s,this.precondition(s)))}),await async function(r,s){const i=kt(r),a={writes:s.map(o=>Ap(i.serializer,o))};await i.Mo("Commit",i.serializer.databaseId,ln.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw vt();n=It.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new Ze(Le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(It.min())?qn.exists(!1):qn.updateTime(n):qn.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(It.min()))throw new Ze(Le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qn.updateTime(n)}return qn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eH{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this._u=r.maxAttempts,this.t_=new kx(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new Z8(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.lu(s)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!Sp(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!O4(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tH{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ns.UNAUTHENTICATED,this.clientId=wx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{We("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(We("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ra;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Vx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function dy(t,e){t.asyncQueue.verifyOperationInProgress(),We("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await pT(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function PE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await nH(t);We("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>NE(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>NE(e.remoteStore,s)),t._onlineComponents=e}async function nH(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){We("FirestoreClient","Using user provided OfflineComponentProvider");try{await dy(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===Le.FAILED_PRECONDITION||s.code===Le.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;cl("Error using user provided cache. Falling back to memory cache: "+n),await dy(t,new lp)}}else We("FirestoreClient","Using default OfflineComponentProvider"),await dy(t,new lp);return t._offlineComponents}async function Xx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(We("FirestoreClient","Using user provided OnlineComponentProvider"),await PE(t,t._uninitializedComponentsProvider._online)):(We("FirestoreClient","Using default OnlineComponentProvider"),await PE(t,new P0))),t._onlineComponents}function rH(t){return Xx(t).then(e=>e.syncEngine)}function sH(t){return Xx(t).then(e=>e.datastore)}async function L0(t){const e=await Xx(t),n=e.eventManager;return n.onListen=O8.bind(null,e.syncEngine),n.onUnlisten=V8.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=M8.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=K8.bind(null,e.syncEngine),n}function iH(t,e,n={}){const r=new ra;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,A,c){const d=new $x({next:p=>{d.Za(),a.enqueueAndForget(()=>Gx(i,f));const g=p.docs.has(o);!g&&p.fromCache?c.reject(new Ze(Le.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&A&&A.source==="server"?c.reject(new Ze(Le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new zx(Tp(o.path),d,{includeMetadataChanges:!0,_a:!0});return Kx(i,f)}(await L0(t),t.asyncQueue,e,n,r)),r.promise}function aH(t,e,n={}){const r=new ra;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,A,c){const d=new $x({next:p=>{d.Za(),a.enqueueAndForget(()=>Gx(i,f)),p.fromCache&&A.source==="server"?c.reject(new Ze(Le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new zx(o,d,{includeMetadataChanges:!0,_a:!0});return Kx(i,f)}(await L0(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(t,e,n){if(!n)throw new Ze(Le.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function RT(t,e,n,r){if(e===!0&&r===!0)throw new Ze(Le.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function RE(t){if(!at.isDocumentKey(t))throw new Ze(Le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function kE(t){if(at.isDocumentKey(t))throw new Ze(Le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Qw(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":vt()}function Gr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ze(Le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Qw(t);throw new Ze(Le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ze(Le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ze(Le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=PT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ze(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ze(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ze(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pw{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new DE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ze(Le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ze(Le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new DE(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new i4;switch(r.type){case"firstParty":return new iO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ze(Le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=LE.get(n);r&&(We("ComponentProvider","Removing Datastore"),LE.delete(n),r.terminate())}(this),Promise.resolve()}}function kT(t,e,n,r={}){var s;const i=(t=Gr(t,Pw))._getSettings(),a=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&cl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let o,A;if(typeof r.mockUserToken=="string")o=r.mockUserToken,A=ns.MOCK_USER;else{o=xk(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Ze(Le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new ns(c)}t._authCredentials=new nO(new s4(o,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ma(this.firestore,e,this._query)}}class qr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new So(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qr(this.firestore,e,this._key)}}class So extends Ma{constructor(e,n,r){super(e,n,Tp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qr(this.firestore,null,new at(e))}withConverter(e){return new So(this.firestore,e,this._path)}}function At(t,e,...n){if(t=ar(t),LT("collection","path",e),t instanceof Pw){const r=ln.fromString(e,...n);return kE(r),new So(t,null,r)}{if(!(t instanceof qr||t instanceof So))throw new Ze(Le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ln.fromString(e,...n));return kE(r),new So(t.firestore,null,r)}}function Nt(t,e,...n){if(t=ar(t),arguments.length===1&&(e=wx.newId()),LT("doc","path",e),t instanceof Pw){const r=ln.fromString(e,...n);return RE(r),new qr(t,null,new at(r))}{if(!(t instanceof qr||t instanceof So))throw new Ze(Le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ln.fromString(e,...n));return RE(r),new qr(t.firestore,t instanceof So?t.converter:null,new at(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new kx(this,"async_queue_retry"),this.Vu=()=>{const r=Hg();r&&We("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Hg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Hg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new ra;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!El(e))throw e;We("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(r);throw Fs("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Hx.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&vt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function OE(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class ui extends Pw{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new jE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jE(e),this._firestoreClient=void 0,await e}}}function DT(t,e){const n=typeof t=="object"?t:ox(),r=typeof t=="string"?t:"(default)",s=ix(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=yk("firestore");i&&kT(s,...i)}return s}function Kc(t){if(t._terminated)throw new Ze(Le.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||jT(t),t._firestoreClient}function jT(t){var e,n,r;const s=t._freezeSettings(),i=function(o,A,c,d){return new RO(o,A,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,PT(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new tH(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(o){const A=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(A),_online:A}}(t._componentsProvider))}function OT(t,e){cl("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return oH(t,P0.provider,{build:r=>new Y8(r,n.cacheSizeBytes,void 0)}),Promise.resolve()}function oH(t,e,n){if((t=Gr(t,ui))._firestoreClient||t._terminated)throw new Ze(Le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Ze(Le.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},jT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pl(vr.fromBase64String(e))}catch(n){throw new Ze(Le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new pl(vr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ze(Le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ze(Le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ze(Le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AH=/^__.*__$/;class lH{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Vo(e,this.data,this.fieldMask,n,this.fieldTransforms):new Kd(e,this.data,n,this.fieldTransforms)}}class MT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Vo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function HT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vt()}}class Jx{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Jx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return R0(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(HT(this.Cu)&&AH.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class cH{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Tw(e)}Qu(e,n,r,s=!1){return new Jx({Cu:e,methodName:n,qu:r,path:Gn.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zd(t){const e=t._freezeSettings(),n=Tw(t._databaseId);return new cH(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Dw(t,e,n,r,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);eb("Data must be an object, but it was:",a,r);const o=VT(r,a);let A,c;if(i.merge)A=new Gs(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const f of i.mergeFields){const p=v2(e,f,n);if(!a.contains(p))throw new Ze(Le.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);GT(d,p)||d.push(p)}A=new Gs(d),c=a.fieldTransforms.filter(f=>A.covers(f.field))}else A=null,c=a.fieldTransforms;return new lH(new ss(o),A,c)}class jw extends Lw{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jw}}function Yx(t,e,n,r){const s=t.Qu(1,e,n);eb("Data must be an object, but it was:",s,r);const i=[],a=ss.empty();Hc(r,(A,c)=>{const d=tb(e,A,n);c=ar(c);const f=s.Nu(d);if(c instanceof jw)i.push(d);else{const p=kp(c,f);p!=null&&(i.push(d),a.set(d,p))}});const o=new Gs(i);return new MT(a,o,s.fieldTransforms)}function Zx(t,e,n,r,s,i){const a=t.Qu(1,e,n),o=[v2(e,r,n)],A=[s];if(i.length%2!=0)throw new Ze(Le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)o.push(v2(e,i[p])),A.push(i[p+1]);const c=[],d=ss.empty();for(let p=o.length-1;p>=0;--p)if(!GT(c,o[p])){const g=o[p];let B=A[p];B=ar(B);const b=a.Nu(g);if(B instanceof jw)c.push(g);else{const C=kp(B,b);C!=null&&(c.push(g),d.set(g,C))}}const f=new Gs(c);return new MT(d,f,a.fieldTransforms)}function uH(t,e,n,r=!1){return kp(n,t.Qu(r?4:3,e))}function kp(t,e){if(KT(t=ar(t)))return eb("Unsupported field value:",e,t),VT(t,e);if(t instanceof Lw)return function(r,s){if(!HT(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const o of r){let A=kp(o,s.Lu(a));A==null&&(A={nullValue:"NULL_VALUE"}),i.push(A),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=ar(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nM(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ut.fromDate(r);return{timestampValue:Td(s.serializer,i)}}if(r instanceof Ut){const i=new Ut(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Td(s.serializer,i)}}if(r instanceof Rw)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof pl)return{bytesValue:K4(s.serializer,r._byteString)};if(r instanceof qr){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Tx(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof kw)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(A=>{if(typeof A!="number")throw o.Bu("VectorValues must only contain numeric values.");return Ex(o.serializer,A)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Qw(r)}`)}(t,e)}function VT(t,e){const n={};return p4(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hc(t,(r,s)=>{const i=kp(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function KT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ut||t instanceof Rw||t instanceof pl||t instanceof qr||t instanceof Lw||t instanceof kw)}function eb(t,e,n){if(!KT(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Qw(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function v2(t,e,n){if((e=ar(e))instanceof Gc)return e._internalPath;if(typeof e=="string")return tb(t,e);throw R0("Field path arguments must be of type string or ",t,!1,void 0,n)}const dH=new RegExp("[~\\*/\\[\\]]");function tb(t,e,n){if(e.search(dH)>=0)throw R0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Gc(...e.split("."))._internalPath}catch{throw R0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function R0(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let A="";return(i||a)&&(A+=" (found",i&&(A+=` in field ${r}`),a&&(A+=` in document ${s}`),A+=")"),new Ze(Le.INVALID_ARGUMENT,o+t+A)}function GT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new qr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new hH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ow("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class hH extends k0{data(){return super.data()}}function Ow(t,e){return typeof e=="string"?tb(t,e):e instanceof Gc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ze(Le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nb{}class Mw extends nb{}function Xt(t,e,...n){let r=[];e instanceof nb&&r.push(e),r=r.concat(n),function(i){const a=i.filter(A=>A instanceof Hw).length,o=i.filter(A=>A instanceof Dp).length;if(a>1||a>0&&o>0)throw new Ze(Le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Dp extends Mw{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Dp(e,n,r)}_apply(e){const n=this._parse(e);return WT(e._query,n),new Ma(e.firestore,e.converter,A2(e._query,n))}_parse(e){const n=zd(e.firestore);return function(i,a,o,A,c,d,f){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Ze(Le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){HE(f,d);const g=[];for(const B of f)g.push(ME(A,i,B));p={arrayValue:{values:g}}}else p=ME(A,i,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||HE(f,d),p=uH(o,a,f,d==="in"||d==="not-in");return sn.create(c,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function pn(t,e,n){const r=e,s=Ow("where",t);return Dp._create(s,r,n)}class Hw extends nb{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Hw(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:yn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const o=i.getFlattenedFilters();for(const A of o)WT(a,A),a=A2(a,A)}(e._query,n),new Ma(e.firestore,e.converter,A2(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vw extends Mw{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Vw(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new Ze(Le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Ze(Le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new sp(i,a)}(e._query,this._field,this._direction);return new Ma(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new Vd(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function di(t,e="asc"){const n=e,r=Ow("orderBy",t);return Vw._create(r,n)}class Kw extends Mw{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Kw(e,n,r)}_apply(e){return new Ma(e.firestore,e.converter,S0(e._query,this._limit,this._limitType))}}function zT(t){return Kw._create("limit",t,"F")}function ME(t,e,n){if(typeof(n=ar(n))=="string"){if(n==="")throw new Ze(Le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!I4(e)&&n.indexOf("/")!==-1)throw new Ze(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ln.fromString(n));if(!at.isDocumentKey(r))throw new Ze(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return np(t,new at(r))}if(n instanceof qr)return np(t,n._key);throw new Ze(Le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qw(n)}.`)}function HE(t,e){if(!Array.isArray(t)||t.length===0)throw new Ze(Le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function WT(t,e){const n=function(s,i){for(const a of s)for(const o of a.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ze(Le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ze(Le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class rb{convertValue(e,n="none"){switch(Qc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Hn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ul(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw vt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Hc(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>Hn(a.doubleValue));return new kw(i)}convertGeoPoint(e){return new Rw(Hn(e.latitude),Hn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=bx(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ep(e));default:return null}}convertTimestamp(e){const n=jo(e);return new Ut(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ln.fromString(e);Ct(eT(r));const s=new dl(r.get(1),r.get(3)),i=new at(r.popFirst(5));return s.isEqual(n)||Fs(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class fH extends rb{constructor(e){super(),this.firestore=e}convertBytes(e){return new pl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qr(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qw extends k0{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ow("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class vf extends qw{data(e={}){return super.data(e)}}class sb{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new uc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new vf(this._firestore,this._userDataWriter,r.key,r,new uc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ze(Le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(o=>{const A=new vf(s._firestore,s._userDataWriter,o.doc.key,o.doc,new uc(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:A,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const A=new vf(s._firestore,s._userDataWriter,o.doc.key,o.doc,new uc(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),d=a.indexOf(o.doc.key)),{type:pH(o.type),doc:A,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function pH(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(t){t=Gr(t,qr);const e=Gr(t.firestore,ui);return iH(Kc(e),t._key).then(n=>XT(e,t,n))}class zw extends rb{constructor(e){super(),this.firestore=e}convertBytes(e){return new pl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qr(this.firestore,null,n)}}function Qt(t){t=Gr(t,Ma);const e=Gr(t.firestore,ui),n=Kc(e),r=new zw(e);return qT(t._query),aH(n,t._query).then(s=>new sb(e,r,t,s))}function $T(t,e,n){t=Gr(t,qr);const r=Gr(t.firestore,ui),s=Gw(t.converter,e,n);return Wd(r,[Dw(zd(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,qn.none())])}function $n(t,e,n,...r){t=Gr(t,qr);const s=Gr(t.firestore,ui),i=zd(s);let a;return a=typeof(e=ar(e))=="string"||e instanceof Gc?Zx(i,"updateDoc",t._key,e,n,r):Yx(i,"updateDoc",t._key,e),Wd(s,[a.toMutation(t._key,qn.exists(!0))])}function xs(t){return Wd(Gr(t.firestore,ui),[new Gd(t._key,qn.none())])}function is(t,e){const n=Gr(t.firestore,ui),r=Nt(t),s=Gw(t.converter,e);return Wd(n,[Dw(zd(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,qn.exists(!1))]).then(()=>r)}function y2(t,...e){var n,r,s;t=ar(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||OE(e[a])||(i=e[a],a++);const o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(OE(e[a])){const f=e[a];e[a]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[a+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[a+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let A,c,d;if(t instanceof qr)c=Gr(t.firestore,ui),d=Tp(t._key.path),A={next:f=>{e[a]&&e[a](XT(c,t,f))},error:e[a+1],complete:e[a+2]};else{const f=Gr(t,Ma);c=Gr(f.firestore,ui),d=f._query;const p=new zw(c);A={next:g=>{e[a]&&e[a](new sb(c,p,f,g))},error:e[a+1],complete:e[a+2]},qT(t._query)}return function(p,g,B,b){const C=new $x(b),w=new zx(g,C,B);return p.asyncQueue.enqueueAndForget(async()=>Kx(await L0(p),w)),()=>{C.Za(),p.asyncQueue.enqueueAndForget(async()=>Gx(await L0(p),w))}}(Kc(c),d,o,A)}function Wd(t,e){return function(r,s){const i=new ra;return r.asyncQueue.enqueueAndForget(async()=>G8(await rH(r),s,i)),i.promise}(Kc(t),e)}function XT(t,e,n){const r=n.docs.get(e._key),s=new zw(t);return new qw(t,s,e._key,r,new uc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mH={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=zd(e)}set(e,n,r){this._verifyNotCommitted();const s=DA(e,this._firestore),i=Gw(s.converter,n,r),a=Dw(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(a.toMutation(s._key,qn.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=DA(e,this._firestore);let a;return a=typeof(n=ar(n))=="string"||n instanceof Gc?Zx(this._dataReader,"WriteBatch.update",i._key,n,r,s):Yx(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(a.toMutation(i._key,qn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=DA(e,this._firestore);return this._mutations=this._mutations.concat(new Gd(n._key,qn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ze(Le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function DA(t,e){if((t=ar(t)).firestore!==e)throw new Ze(Le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=zd(n)}get(n){const r=DA(n,this._firestore),s=new fH(this._firestore);return this._transaction.lookup([r._key]).then(i=>{if(!i||i.length!==1)return vt();const a=i[0];if(a.isFoundDocument())return new k0(this._firestore,s,a.key,a,r.converter);if(a.isNoDocument())return new k0(this._firestore,s,r._key,null,r.converter);throw vt()})}set(n,r,s){const i=DA(n,this._firestore),a=Gw(i.converter,r,s),o=Dw(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,s);return this._transaction.set(i._key,o),this}update(n,r,s,...i){const a=DA(n,this._firestore);let o;return o=typeof(r=ar(r))=="string"||r instanceof Gc?Zx(this._dataReader,"Transaction.update",a._key,r,s,i):Yx(this._dataReader,"Transaction.update",a._key,r),this._transaction.update(a._key,o),this}delete(n){const r=DA(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=DA(e,this._firestore),r=new zw(this._firestore);return super.get(e).then(s=>new qw(this._firestore,r,n._key,s._document,new uc(!1,!1),n.converter))}}function gc(t,e,n){t=Gr(t,ui);const r=Object.assign(Object.assign({},mH),n);return function(i){if(i.maxAttempts<1)throw new Ze(Le.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,o){const A=new ra;return i.asyncQueue.enqueueAndForget(async()=>{const c=await sH(i);new eH(i.asyncQueue,c,o,a,A).au()}),A.promise}(Kc(t),s=>e(new YT(t,s)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(t){return Kc(t=Gr(t,ui)),new JT(t,e=>Wd(t,e))}(function(e,n=!0){(function(s){Hd=s})(Od),Cd(new Sc("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),o=new ui(new rO(r.getProvider("auth-internal")),new oO(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ze(Le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dl(c.options.projectId,d)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),rl(P5,"4.7.3",e),rl(P5,"4.7.3","esm2017")})();const gH=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:rb,Bytes:pl,CollectionReference:So,DocumentReference:qr,DocumentSnapshot:qw,FieldPath:Gc,FieldValue:Lw,Firestore:ui,FirestoreError:Ze,GeoPoint:Rw,Query:Ma,QueryCompositeFilterConstraint:Hw,QueryConstraint:Mw,QueryDocumentSnapshot:vf,QueryFieldFilterConstraint:Dp,QueryLimitConstraint:Kw,QueryOrderByConstraint:Vw,QuerySnapshot:sb,SnapshotMetadata:uc,Timestamp:Ut,Transaction:YT,VectorValue:kw,WriteBatch:JT,_AutoId:wx,_ByteString:vr,_DatabaseId:dl,_DocumentKey:at,_EmptyAuthCredentialsProvider:i4,_FieldPath:Gn,_cast:Gr,_logWarn:cl,_validateIsNotUsedTogether:RT,addDoc:is,collection:At,connectFirestoreEmulator:kT,deleteDoc:xs,doc:Nt,enableIndexedDbPersistence:OT,ensureFirestoreConfigured:Kc,executeWrite:Wd,getDoc:Il,getDocs:Qt,getFirestore:DT,limit:zT,onSnapshot:y2,orderBy:di,query:Xt,runTransaction:gc,setDoc:$T,updateDoc:$n,where:pn,writeBatch:Ww},Symbol.toStringTag,{value:"Module"})),wH={apiKey:"AIzaSyA_ZzeP_DAoXeRuallrOaJ4xFaxjnuhw-8",authDomain:"posys-103de.firebaseapp.com",projectId:"posys-103de",storageBucket:"posys-103de.firebasestorage.app",messagingSenderId:"401054148688",appId:"1:401054148688:web:1c2aea9e8b40958b514955",measurementId:"G-Q2GWQXMFLX"},ZT=ax(wH),Ue=DT(ZT),$w=JF(ZT);OT(Ue).catch(t=>{t.code==="failed-precondition"?console.warn(" Ya hay otra pestaa usando persistencia."):t.code==="unimplemented"?console.warn(" El navegador no soporta persistencia offline."):console.error(" Error en persistencia offline:",t)});function vH(){const[t,e]=L.useState(""),[n,r]=L.useState(""),[s,i]=L.useState(!1),[a,o]=L.useState(""),A=mw(),c=async d=>{d.preventDefault();try{const p=(await Oj($w,t,n)).user.uid,g=Nt(Ue,"users",p),B=await Il(g);if(B.exists()){const C=B.data().role;C==="admin"?A("/admin"):C==="vendedor"?A("/admin/salesV2"):o("Rol no vlido")}else o("No se encontr el perfil de usuario")}catch(f){console.error(f),o("Credenciales incorrectas o error de conexin")}};return l.jsxs("div",{className:"flex flex-col items-center justify-center h-screen",children:[l.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Iniciar Sesin"}),l.jsxs("form",{onSubmit:c,className:"space-y-4 w-64",children:[l.jsx("input",{type:"email",placeholder:"Correo",value:t,onChange:d=>e(d.target.value),className:"w-full p-2 border rounded-[20px]",required:!0}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:s?"text":"password",placeholder:"Contrasea",value:n,onChange:d=>r(d.target.value),className:"w-full p-2 border rounded-[20px] pr-10",required:!0}),l.jsx("button",{type:"button",onClick:()=>i(d=>!d),className:"absolute inset-y-0 right-2 my-auto text-sm text-gray-600 hover:text-gray-800","aria-label":s?"Ocultar contrasea":"Mostrar contrasea",title:s?"Ocultar contrasea":"Mostrar contrasea",children:s?"Ocultar":"Ver"})]}),a&&l.jsx("p",{className:"text-red-600 text-sm",children:a}),l.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded-[20px] hover:bg-blue-700",children:"Entrar"})]})]})}function dr({children:t,allowedRoles:e}){const[n,r]=L.useState(!0),[s,i]=L.useState(!1);return L.useEffect(()=>{const a=jF($w,async o=>{if(o){const A=Nt(Ue,"users",o.uid),c=await Il(A);if(c.exists()){const d=c.data().role;i(e.includes(d))}}r(!1)});return()=>a()},[e]),n?l.jsx("div",{className:"p-4",children:"Cargando..."}):s?t:l.jsx(H1,{to:"/"})}function yH({role:t}){const e="/admin",n=({isActive:oe})=>`block rounded px-3 py-2 text-sm ${oe?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,r=mw(),[s,i]=L.useState(!1),[a,o]=L.useState(!1),[A,c]=L.useState(!1),[d,f]=L.useState(!1),[p,g]=L.useState(!1),[B,b]=L.useState(!1),[C,w]=L.useState(!1),[y,N]=L.useState(!1),[R,V]=L.useState(!1),[j,U]=L.useState(!1),[I,Q]=L.useState(!1),[D,S]=L.useState(!1),_=async()=>{await OF($w),r("/")},T=({open:oe,onClick:le,children:se})=>l.jsxs("button",{type:"button",onClick:le,className:"w-full flex items-center justify-between px-3 py-2 text-left text-sm font-semibold rounded hover:bg-gray-100",children:[l.jsx("span",{children:se}),l.jsx("span",{className:"text-xs",children:oe?"":""})]}),K=({open:oe,onClick:le,title:se})=>l.jsxs("button",{type:"button",onClick:le,className:"ml-2 w-[calc(100%-0.5rem)] flex items-center justify-between px-3 py-2 text-left text-sm rounded hover:bg-gray-100",children:[l.jsx("span",{className:"text-blue-500 font-medium ",children:se}),l.jsx("span",{className:"text-xs",children:oe?"":""})]});return l.jsxs("div",{className:"min-h-screen flex",children:[l.jsxs("aside",{className:`${s?"w-15 bg-gray-50 border-r p-3 transition-all duration-300 flex flex-col items-center":"w-55"} bg-gray-50 border-r p-3 transition-all duration-300 flex flex-col`,children:[l.jsx("button",{onClick:()=>i(!s),className:"mb-2 p-2 rounded bg-gray-200 hover:bg-gray-300","aria-label":s?"Expandir men":"Colapsar men",children:s?l.jsx("span",{title:"Expandir men",children:""}):l.jsx("span",{title:"Colapsar men",children:""})}),!s&&l.jsxs(l.Fragment,{children:[l.jsxs("nav",{className:"space-y-1",children:[t==="admin"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"border rounded mb-1",children:[l.jsx(T,{open:a,onClick:()=>o(oe=>!oe),children:"Operaciones Pollo"}),a&&l.jsxs("div",{className:"pb-2",children:[l.jsx(K,{open:A,onClick:()=>c(oe=>!oe),title:"Inventario"}),A&&l.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[l.jsx(rr,{to:`${e}/batches`,className:n,children:"Inventario Pollo"}),l.jsx(rr,{to:`${e}/paidBatches`,className:n,children:"Inventarios Pagados"})]}),l.jsx(K,{open:d,onClick:()=>f(oe=>!oe),title:"Finanzas"}),d&&l.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[l.jsx(rr,{to:`${e}/financialDashboard`,className:n,children:"Dashboard"}),l.jsx(rr,{to:`${e}/billing`,className:n,children:"Facturacion"}),l.jsx(rr,{to:`${e}/expenses`,className:n,children:"Gastos"}),l.jsx(rr,{to:`${e}/salesV2`,className:n,children:"Venta"}),l.jsx(rr,{to:`${e}/bills`,className:n,children:"Cierre"}),l.jsx(rr,{to:`${e}/billhistoric`,className:n,children:"Historial de Cierres"})]}),l.jsx(K,{open:p,onClick:()=>g(oe=>!oe),title:"Productos"}),p&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(rr,{to:`${e}/products`,className:n,children:"Productos"})})]})]}),l.jsxs("div",{className:"border rounded mb-1",children:[l.jsx(T,{open:B,onClick:()=>b(oe=>!oe),children:"Operaciones Ropa"}),B&&l.jsxs("div",{className:"pb-2",children:[l.jsx(K,{open:C,onClick:()=>w(oe=>!oe),title:"Inventario"}),C&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(rr,{to:`${e}/InventoryClothesBatches`,className:n,children:"Inventario Ropa"})}),l.jsx(K,{open:y,onClick:()=>N(oe=>!oe),title:"Productos"}),y&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(rr,{to:`${e}/productsClothes`,className:n,children:"Agregar Productos"})}),l.jsx(K,{open:R,onClick:()=>V(oe=>!oe),title:"Clientes"}),R&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(rr,{to:`${e}/CustomersClothes`,className:n,children:"Listado de Clientes"})}),l.jsx(K,{open:j,onClick:()=>U(oe=>!oe),title:"Finanzas"}),j&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(rr,{to:`${e}/salesClothes`,className:n,children:"Venta Ropa"})}),j&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(rr,{to:`${e}/financialDashboardClothes`,className:n,children:"Dashboard Financiero"})}),j&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(rr,{to:`${e}/TransactionsReportClothes`,className:n,children:"Transacciones"})}),j&&l.jsx("div",{className:"ml-4 mt-1 space-y-1",children:l.jsx(rr,{to:`${e}/ExpensesClothes`,className:n,children:"Gastos Ropa"})})]})]}),l.jsxs("div",{className:"border rounded",children:[l.jsx(T,{open:D,onClick:()=>S(oe=>!oe),children:"Operaciones Otras"}),D&&l.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[l.jsx(rr,{to:`${e}/users`,className:n,children:"Usuarios"}),l.jsx(rr,{to:`${e}/fix`,className:n,children:"Fix de lotes"}),l.jsx(rr,{to:`${e}/transactionclose`,className:n,children:"Liquidaciones"})]})]})]}),t==="vendedor"&&l.jsxs("div",{className:"border rounded",children:[l.jsx(T,{open:d,onClick:()=>f(oe=>!oe),children:"Finanzas"}),d&&l.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[l.jsx(rr,{to:`${e}/salesV2`,className:n,children:"Venta"}),l.jsx(rr,{to:`${e}/bills`,className:n,children:"Cierre"})]})]})]}),l.jsx("button",{onClick:_,className:"mt-4 bg-red-500 text-white px-3 py-2 rounded hover:bg-red-600",children:"Cerrar sesin"})]})]}),l.jsx("main",{className:"flex-1 p-6",children:l.jsx(QR,{})})]})}const eU=6048e5,BH=864e5,VE=Symbol.for("constructDateFrom");function oa(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&VE in t?t[VE](e):t instanceof Date?new t.constructor(e):new Date(e)}function Ls(t,e){return oa(e||t,t)}function xH(t,e,n){const r=Ls(t,n==null?void 0:n.in);return isNaN(e)?oa(t,NaN):(r.setDate(r.getDate()+e),r)}function bH(t,e,n){const r=Ls(t,n==null?void 0:n.in);if(isNaN(e))return oa(t,NaN);const s=r.getDate(),i=oa(t,r.getTime());i.setMonth(r.getMonth()+e+1,0);const a=i.getDate();return s>=a?i:(r.setFullYear(i.getFullYear(),i.getMonth(),s),r)}let CH={};function Xw(){return CH}function cp(t,e){var o,A,c,d;const n=Xw(),r=(e==null?void 0:e.weekStartsOn)??((A=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:A.weekStartsOn)??n.weekStartsOn??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,s=Ls(t,e==null?void 0:e.in),i=s.getDay(),a=(i<r?7:0)+i-r;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function D0(t,e){return cp(t,{...e,weekStartsOn:1})}function tU(t,e){const n=Ls(t,e==null?void 0:e.in),r=n.getFullYear(),s=oa(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const i=D0(s),a=oa(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=D0(a);return n.getTime()>=i.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function KE(t){const e=Ls(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function EH(t,...e){const n=oa.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function GE(t,e){const n=Ls(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function _H(t,e,n){const[r,s]=EH(n==null?void 0:n.in,t,e),i=GE(r),a=GE(s),o=+i-KE(i),A=+a-KE(a);return Math.round((o-A)/BH)}function IH(t,e){const n=tU(t,e),r=oa(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),D0(r)}function NH(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function SH(t){return!(!NH(t)&&typeof t!="number"||isNaN(+Ls(t)))}function jp(t,e){const n=Ls(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Op(t,e){const n=Ls(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function FH(t,e){const n=Ls(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const TH={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},UH=(t,e,n)=>{let r;const s=TH[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function hy(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const QH={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},PH={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},LH={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},RH={date:hy({formats:QH,defaultWidth:"full"}),time:hy({formats:PH,defaultWidth:"full"}),dateTime:hy({formats:LH,defaultWidth:"full"})},kH={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},DH=(t,e,n,r)=>kH[t];function Nh(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):a;s=t.formattingValues[o]||t.formattingValues[a]}else{const a=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[o]||t.values[a]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const jH={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},OH={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},MH={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},HH={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},VH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},KH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},GH=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},qH={ordinalNumber:GH,era:Nh({values:jH,defaultWidth:"wide"}),quarter:Nh({values:OH,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Nh({values:MH,defaultWidth:"wide"}),day:Nh({values:HH,defaultWidth:"wide"}),dayPeriod:Nh({values:VH,defaultWidth:"wide",formattingValues:KH,defaultFormattingWidth:"wide"})};function Sh(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],A=Array.isArray(o)?WH(o,f=>f.test(a)):zH(o,f=>f.test(a));let c;c=t.valueCallback?t.valueCallback(A):A,c=n.valueCallback?n.valueCallback(c):c;const d=e.slice(a.length);return{value:c,rest:d}}}function zH(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function WH(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function $H(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let a=t.valueCallback?t.valueCallback(i[0]):i[0];a=n.valueCallback?n.valueCallback(a):a;const o=e.slice(s.length);return{value:a,rest:o}}}const XH=/^(\d+)(th|st|nd|rd)?/i,JH=/\d+/i,YH={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ZH={any:[/^b/i,/^(a|c)/i]},eV={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},tV={any:[/1/i,/2/i,/3/i,/4/i]},nV={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},rV={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},sV={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},iV={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},aV={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},oV={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},AV={ordinalNumber:$H({matchPattern:XH,parsePattern:JH,valueCallback:t=>parseInt(t,10)}),era:Sh({matchPatterns:YH,defaultMatchWidth:"wide",parsePatterns:ZH,defaultParseWidth:"any"}),quarter:Sh({matchPatterns:eV,defaultMatchWidth:"wide",parsePatterns:tV,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Sh({matchPatterns:nV,defaultMatchWidth:"wide",parsePatterns:rV,defaultParseWidth:"any"}),day:Sh({matchPatterns:sV,defaultMatchWidth:"wide",parsePatterns:iV,defaultParseWidth:"any"}),dayPeriod:Sh({matchPatterns:aV,defaultMatchWidth:"any",parsePatterns:oV,defaultParseWidth:"any"})},lV={code:"en-US",formatDistance:UH,formatLong:RH,formatRelative:DH,localize:qH,match:AV,options:{weekStartsOn:0,firstWeekContainsDate:1}};function cV(t,e){const n=Ls(t,e==null?void 0:e.in);return _H(n,FH(n))+1}function uV(t,e){const n=Ls(t,e==null?void 0:e.in),r=+D0(n)-+IH(n);return Math.round(r/eU)+1}function nU(t,e){var d,f,p,g;const n=Ls(t,e==null?void 0:e.in),r=n.getFullYear(),s=Xw(),i=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((g=(p=s.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,a=oa((e==null?void 0:e.in)||t,0);a.setFullYear(r+1,0,i),a.setHours(0,0,0,0);const o=cp(a,e),A=oa((e==null?void 0:e.in)||t,0);A.setFullYear(r,0,i),A.setHours(0,0,0,0);const c=cp(A,e);return+n>=+o?r+1:+n>=+c?r:r-1}function dV(t,e){var o,A,c,d;const n=Xw(),r=(e==null?void 0:e.firstWeekContainsDate)??((A=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:A.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,s=nU(t,e),i=oa((e==null?void 0:e.in)||t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),cp(i,e)}function hV(t,e){const n=Ls(t,e==null?void 0:e.in),r=+cp(n,e)-+dV(n,e);return Math.round(r/eU)+1}function vn(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const xA={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return vn(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):vn(n+1,2)},d(t,e){return vn(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return vn(t.getHours()%12||12,e.length)},H(t,e){return vn(t.getHours(),e.length)},m(t,e){return vn(t.getMinutes(),e.length)},s(t,e){return vn(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return vn(s,e.length)}},xu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},qE={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return xA.y(t,e)},Y:function(t,e,n,r){const s=nU(t,r),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return vn(a,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):vn(i,e.length)},R:function(t,e){const n=tU(t);return vn(n,e.length)},u:function(t,e){const n=t.getFullYear();return vn(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return vn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return vn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return xA.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return vn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=hV(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):vn(s,e.length)},I:function(t,e,n){const r=uV(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):vn(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):xA.d(t,e)},D:function(t,e,n){const r=cV(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):vn(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return vn(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return vn(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return vn(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=xu.noon:r===0?s=xu.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=xu.evening:r>=12?s=xu.afternoon:r>=4?s=xu.morning:s=xu.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return xA.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):xA.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):vn(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):vn(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):xA.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):xA.s(t,e)},S:function(t,e){return xA.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return WE(r);case"XXXX":case"XX":return tc(r);case"XXXXX":case"XXX":default:return tc(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return WE(r);case"xxxx":case"xx":return tc(r);case"xxxxx":case"xxx":default:return tc(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+zE(r,":");case"OOOO":default:return"GMT"+tc(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+zE(r,":");case"zzzz":default:return"GMT"+tc(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return vn(r,e.length)},T:function(t,e,n){return vn(+t,e.length)}};function zE(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+vn(i,2)}function WE(t,e){return t%60===0?(t>0?"-":"+")+vn(Math.abs(t)/60,2):tc(t,e)}function tc(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=vn(Math.trunc(r/60),2),i=vn(r%60,2);return n+s+e+i}const $E=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},rU=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},fV=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return $E(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",$E(r,e)).replace("{{time}}",rU(s,e))},pV={p:rU,P:fV},mV=/^D+$/,gV=/^Y+$/,wV=["D","DD","YY","YYYY"];function vV(t){return mV.test(t)}function yV(t){return gV.test(t)}function BV(t,e,n){const r=xV(t,e,n);if(console.warn(r),wV.includes(t))throw new RangeError(r)}function xV(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const bV=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,CV=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,EV=/^'([^]*?)'?$/,_V=/''/g,IV=/[a-zA-Z]/;function Jt(t,e,n){var d,f,p,g;const r=Xw(),s=r.locale??lV,i=r.firstWeekContainsDate??((f=(d=r.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,a=r.weekStartsOn??((g=(p=r.locale)==null?void 0:p.options)==null?void 0:g.weekStartsOn)??0,o=Ls(t,n==null?void 0:n.in);if(!SH(o))throw new RangeError("Invalid time value");let A=e.match(CV).map(B=>{const b=B[0];if(b==="p"||b==="P"){const C=pV[b];return C(B,s.formatLong)}return B}).join("").match(bV).map(B=>{if(B==="''")return{isToken:!1,value:"'"};const b=B[0];if(b==="'")return{isToken:!1,value:NV(B)};if(qE[b])return{isToken:!0,value:B};if(b.match(IV))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:B}});s.localize.preprocessor&&(A=s.localize.preprocessor(o,A));const c={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return A.map(B=>{if(!B.isToken)return B.value;const b=B.value;(yV(b)||vV(b))&&BV(b,e,String(t));const C=qE[b[0]];return C(o,b,s.localize,c)}).join("")}function NV(t){const e=t.match(EV);return e?e[1].replace(_V,"'"):t}function SV(t,e,n){return xH(t,-14,n)}function FV(t,e,n){return bH(t,-1,n)}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var B2=function(t,e){return B2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},B2(t,e)};function ca(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");B2(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var x2=function(){return x2=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},x2.apply(this,arguments)};function Ns(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(d){try{c(r.next(d))}catch(f){a(f)}}function A(d){try{c(r.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):s(d.value).then(o,A)}c((r=r.apply(t,[])).next())})}function gs(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(d){return A([c,d])}}function A(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Dm(t,e,n){if(arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||e)}var Oo=function(){function t(e,n,r,s){this.left=e,this.top=n,this.width=r,this.height=s}return t.prototype.add=function(e,n,r,s){return new t(this.left+e,this.top+n,this.width+r,this.height+s)},t.fromClientRect=function(e,n){return new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height)},t.fromDOMRectList=function(e,n){var r=Array.from(n).find(function(s){return s.width!==0});return r?new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),Jw=function(t,e){return Oo.fromClientRect(t,e.getBoundingClientRect())},TV=function(t){var e=t.body,n=t.documentElement;if(!e||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,n.scrollWidth),Math.max(e.offsetWidth,n.offsetWidth),Math.max(e.clientWidth,n.clientWidth)),s=Math.max(Math.max(e.scrollHeight,n.scrollHeight),Math.max(e.offsetHeight,n.offsetHeight),Math.max(e.clientHeight,n.clientHeight));return new Oo(0,0,r,s)},Yw=function(t){for(var e=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var i=t.charCodeAt(n++);(i&64512)===56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),n--)}else e.push(s)}return e},fr=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,i="";++s<n;){var a=t[s];a<=65535?r.push(a):(a-=65536,r.push((a>>10)+55296,a%1024+56320)),(s+1===n||r.length>16384)&&(i+=String.fromCharCode.apply(String,r),r.length=0)}return i},XE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",UV=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var jm=0;jm<XE.length;jm++)UV[XE.charCodeAt(jm)]=jm;var JE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xh=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Om=0;Om<JE.length;Om++)Xh[JE.charCodeAt(Om)]=Om;var QV=function(t){var e=t.length*.75,n=t.length,r,s=0,i,a,o,A;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(r=0;r<n;r+=4)i=Xh[t.charCodeAt(r)],a=Xh[t.charCodeAt(r+1)],o=Xh[t.charCodeAt(r+2)],A=Xh[t.charCodeAt(r+3)],d[s++]=i<<2|a>>4,d[s++]=(a&15)<<4|o>>2,d[s++]=(o&3)<<6|A&63;return c},PV=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},LV=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},wc=5,ib=11,fy=2,RV=ib-wc,sU=65536>>wc,kV=1<<wc,py=kV-1,DV=1024>>wc,jV=sU+DV,OV=jV,MV=32,HV=OV+MV,VV=65536>>ib,KV=1<<RV,GV=KV-1,YE=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},qV=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},zV=function(t,e){var n=QV(t),r=Array.isArray(n)?LV(n):new Uint32Array(n),s=Array.isArray(n)?PV(n):new Uint16Array(n),i=24,a=YE(s,i/2,r[4]/2),o=r[5]===2?YE(s,(i+r[4])/2):qV(r,Math.ceil((i+r[4])/4));return new WV(r[0],r[1],r[2],r[3],a,o)},WV=function(){function t(e,n,r,s,i,a){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=i,this.data=a}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>wc],n=(n<<fy)+(e&py),this.data[n];if(e<=65535)return n=this.index[sU+(e-55296>>wc)],n=(n<<fy)+(e&py),this.data[n];if(e<this.highStart)return n=HV-VV+(e>>ib),n=this.index[n],n+=e>>wc&GV,n=this.index[n],n=(n<<fy)+(e&py),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),ZE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$V=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Mm=0;Mm<ZE.length;Mm++)$V[ZE.charCodeAt(Mm)]=Mm;var XV="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",e_=50,JV=1,iU=2,aU=3,YV=4,ZV=5,t_=7,oU=8,n_=9,VA=10,b2=11,r_=12,C2=13,e7=14,Jh=15,E2=16,Hm=17,Fh=18,t7=19,s_=20,_2=21,Th=22,my=23,bu=24,ri=25,Yh=26,Zh=27,Cu=28,n7=29,oc=30,r7=31,Vm=32,Km=33,I2=34,N2=35,S2=36,up=37,F2=38,Vg=39,Kg=40,gy=41,AU=42,s7=43,i7=[9001,65288],lU="!",nn="",Gm="",T2=zV(XV),lo=[oc,S2],U2=[JV,iU,aU,ZV],cU=[VA,oU],i_=[Zh,Yh],a7=U2.concat(cU),a_=[F2,Vg,Kg,I2,N2],o7=[Jh,C2],A7=function(t,e){e===void 0&&(e="strict");var n=[],r=[],s=[];return t.forEach(function(i,a){var o=T2.get(i);if(o>e_?(s.push(!0),o-=e_):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(i)!==-1)return r.push(a),n.push(E2);if(o===YV||o===b2){if(a===0)return r.push(a),n.push(oc);var A=n[a-1];return a7.indexOf(A)===-1?(r.push(r[a-1]),n.push(A)):(r.push(a),n.push(oc))}if(r.push(a),o===r7)return n.push(e==="strict"?_2:up);if(o===AU||o===n7)return n.push(oc);if(o===s7)return i>=131072&&i<=196605||i>=196608&&i<=262141?n.push(up):n.push(oc);n.push(o)}),[r,n,s]},wy=function(t,e,n,r){var s=r[n];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var i=n;i<=r.length;){i++;var a=r[i];if(a===e)return!0;if(a!==VA)break}if(s===VA)for(var i=n;i>0;){i--;var o=r[i];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var A=n;A<=r.length;){A++;var a=r[A];if(a===e)return!0;if(a!==VA)break}if(o!==VA)break}return!1},o_=function(t,e){for(var n=t;n>=0;){var r=e[n];if(r===VA)n--;else return r}return 0},l7=function(t,e,n,r,s){if(n[r]===0)return nn;var i=r-1;if(Array.isArray(s)&&s[i]===!0)return nn;var a=i-1,o=i+1,A=e[i],c=a>=0?e[a]:0,d=e[o];if(A===iU&&d===aU)return nn;if(U2.indexOf(A)!==-1)return lU;if(U2.indexOf(d)!==-1||cU.indexOf(d)!==-1)return nn;if(o_(i,e)===oU)return Gm;if(T2.get(t[i])===b2||(A===Vm||A===Km)&&T2.get(t[o])===b2||A===t_||d===t_||A===n_||[VA,C2,Jh].indexOf(A)===-1&&d===n_||[Hm,Fh,t7,bu,Cu].indexOf(d)!==-1||o_(i,e)===Th||wy(my,Th,i,e)||wy([Hm,Fh],_2,i,e)||wy(r_,r_,i,e))return nn;if(A===VA)return Gm;if(A===my||d===my)return nn;if(d===E2||A===E2)return Gm;if([C2,Jh,_2].indexOf(d)!==-1||A===e7||c===S2&&o7.indexOf(A)!==-1||A===Cu&&d===S2||d===s_||lo.indexOf(d)!==-1&&A===ri||lo.indexOf(A)!==-1&&d===ri||A===Zh&&[up,Vm,Km].indexOf(d)!==-1||[up,Vm,Km].indexOf(A)!==-1&&d===Yh||lo.indexOf(A)!==-1&&i_.indexOf(d)!==-1||i_.indexOf(A)!==-1&&lo.indexOf(d)!==-1||[Zh,Yh].indexOf(A)!==-1&&(d===ri||[Th,Jh].indexOf(d)!==-1&&e[o+1]===ri)||[Th,Jh].indexOf(A)!==-1&&d===ri||A===ri&&[ri,Cu,bu].indexOf(d)!==-1)return nn;if([ri,Cu,bu,Hm,Fh].indexOf(d)!==-1)for(var f=i;f>=0;){var p=e[f];if(p===ri)return nn;if([Cu,bu].indexOf(p)!==-1)f--;else break}if([Zh,Yh].indexOf(d)!==-1)for(var f=[Hm,Fh].indexOf(A)!==-1?a:i;f>=0;){var p=e[f];if(p===ri)return nn;if([Cu,bu].indexOf(p)!==-1)f--;else break}if(F2===A&&[F2,Vg,I2,N2].indexOf(d)!==-1||[Vg,I2].indexOf(A)!==-1&&[Vg,Kg].indexOf(d)!==-1||[Kg,N2].indexOf(A)!==-1&&d===Kg||a_.indexOf(A)!==-1&&[s_,Yh].indexOf(d)!==-1||a_.indexOf(d)!==-1&&A===Zh||lo.indexOf(A)!==-1&&lo.indexOf(d)!==-1||A===bu&&lo.indexOf(d)!==-1||lo.concat(ri).indexOf(A)!==-1&&d===Th&&i7.indexOf(t[o])===-1||lo.concat(ri).indexOf(d)!==-1&&A===Fh)return nn;if(A===gy&&d===gy){for(var g=n[i],B=1;g>0&&(g--,e[g]===gy);)B++;if(B%2!==0)return nn}return A===Vm&&d===Km?nn:Gm},c7=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var n=A7(t,e.lineBreak),r=n[0],s=n[1],i=n[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(o){return[ri,oc,AU].indexOf(o)!==-1?up:o}));var a=e.wordBreak==="keep-all"?i.map(function(o,A){return o&&t[A]>=19968&&t[A]<=40959}):void 0;return[r,s,a]},u7=function(){function t(e,n,r,s){this.codePoints=e,this.required=n===lU,this.start=r,this.end=s}return t.prototype.slice=function(){return fr.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),d7=function(t,e){var n=Yw(t),r=c7(n,e),s=r[0],i=r[1],a=r[2],o=n.length,A=0,c=0;return{next:function(){if(c>=o)return{done:!0,value:null};for(var d=nn;c<o&&(d=l7(n,i,s,++c,a))===nn;);if(d!==nn||c===o){var f=new u7(n,d,A,c);return A=c,{value:f,done:!1}}return{done:!0,value:null}}}},h7=1,f7=2,Mp=4,A_=8,j0=10,l_=47,yf=92,p7=9,m7=32,qm=34,Uh=61,g7=35,w7=36,v7=37,zm=39,Wm=40,Qh=41,y7=95,Hs=45,B7=33,x7=60,b7=62,C7=64,E7=91,_7=93,I7=61,N7=123,$m=63,S7=125,c_=124,F7=126,T7=128,u_=65533,vy=42,dc=43,U7=44,Q7=58,P7=59,dp=46,L7=0,R7=8,k7=11,D7=14,j7=31,O7=127,Ia=-1,uU=48,dU=97,hU=101,M7=102,H7=117,V7=122,fU=65,pU=69,mU=70,K7=85,G7=90,vs=function(t){return t>=uU&&t<=57},q7=function(t){return t>=55296&&t<=57343},Eu=function(t){return vs(t)||t>=fU&&t<=mU||t>=dU&&t<=M7},z7=function(t){return t>=dU&&t<=V7},W7=function(t){return t>=fU&&t<=G7},$7=function(t){return z7(t)||W7(t)},X7=function(t){return t>=T7},Xm=function(t){return t===j0||t===p7||t===m7},O0=function(t){return $7(t)||X7(t)||t===y7},d_=function(t){return O0(t)||vs(t)||t===Hs},J7=function(t){return t>=L7&&t<=R7||t===k7||t>=D7&&t<=j7||t===O7},FA=function(t,e){return t!==yf?!1:e!==j0},Jm=function(t,e,n){return t===Hs?O0(e)||FA(e,n):O0(t)?!0:!!(t===yf&&FA(t,e))},yy=function(t,e,n){return t===dc||t===Hs?vs(e)?!0:e===dp&&vs(n):vs(t===dp?e:t)},Y7=function(t){var e=0,n=1;(t[e]===dc||t[e]===Hs)&&(t[e]===Hs&&(n=-1),e++);for(var r=[];vs(t[e]);)r.push(t[e++]);var s=r.length?parseInt(fr.apply(void 0,r),10):0;t[e]===dp&&e++;for(var i=[];vs(t[e]);)i.push(t[e++]);var a=i.length,o=a?parseInt(fr.apply(void 0,i),10):0;(t[e]===pU||t[e]===hU)&&e++;var A=1;(t[e]===dc||t[e]===Hs)&&(t[e]===Hs&&(A=-1),e++);for(var c=[];vs(t[e]);)c.push(t[e++]);var d=c.length?parseInt(fr.apply(void 0,c),10):0;return n*(s+o*Math.pow(10,-a))*Math.pow(10,A*d)},Z7={type:2},e9={type:3},t9={type:4},n9={type:13},r9={type:8},s9={type:21},i9={type:9},a9={type:10},o9={type:11},A9={type:12},l9={type:14},Ym={type:23},c9={type:1},u9={type:25},d9={type:24},h9={type:26},f9={type:27},p9={type:28},m9={type:29},g9={type:31},Q2={type:32},gU=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(Yw(e))},t.prototype.read=function(){for(var e=[],n=this.consumeToken();n!==Q2;)e.push(n),n=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case qm:return this.consumeStringToken(qm);case g7:var n=this.peekCodePoint(0),r=this.peekCodePoint(1),s=this.peekCodePoint(2);if(d_(n)||FA(r,s)){var i=Jm(n,r,s)?f7:h7,a=this.consumeName();return{type:5,value:a,flags:i}}break;case w7:if(this.peekCodePoint(0)===Uh)return this.consumeCodePoint(),n9;break;case zm:return this.consumeStringToken(zm);case Wm:return Z7;case Qh:return e9;case vy:if(this.peekCodePoint(0)===Uh)return this.consumeCodePoint(),l9;break;case dc:if(yy(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case U7:return t9;case Hs:var o=e,A=this.peekCodePoint(0),c=this.peekCodePoint(1);if(yy(o,A,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Jm(o,A,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(A===Hs&&c===b7)return this.consumeCodePoint(),this.consumeCodePoint(),d9;break;case dp:if(yy(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case l_:if(this.peekCodePoint(0)===vy)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===vy&&(d=this.consumeCodePoint(),d===l_))return this.consumeToken();if(d===Ia)return this.consumeToken()}break;case Q7:return h9;case P7:return f9;case x7:if(this.peekCodePoint(0)===B7&&this.peekCodePoint(1)===Hs&&this.peekCodePoint(2)===Hs)return this.consumeCodePoint(),this.consumeCodePoint(),u9;break;case C7:var f=this.peekCodePoint(0),p=this.peekCodePoint(1),g=this.peekCodePoint(2);if(Jm(f,p,g)){var a=this.consumeName();return{type:7,value:a}}break;case E7:return p9;case yf:if(FA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case _7:return m9;case I7:if(this.peekCodePoint(0)===Uh)return this.consumeCodePoint(),r9;break;case N7:return o9;case S7:return A9;case H7:case K7:var B=this.peekCodePoint(0),b=this.peekCodePoint(1);return B===dc&&(Eu(b)||b===$m)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case c_:if(this.peekCodePoint(0)===Uh)return this.consumeCodePoint(),i9;if(this.peekCodePoint(0)===c_)return this.consumeCodePoint(),s9;break;case F7:if(this.peekCodePoint(0)===Uh)return this.consumeCodePoint(),a9;break;case Ia:return Q2}return Xm(e)?(this.consumeWhiteSpace(),g9):vs(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):O0(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:fr(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],n=this.consumeCodePoint();Eu(n)&&e.length<6;)e.push(n),n=this.consumeCodePoint();for(var r=!1;n===$m&&e.length<6;)e.push(n),n=this.consumeCodePoint(),r=!0;if(r){var s=parseInt(fr.apply(void 0,e.map(function(A){return A===$m?uU:A})),16),i=parseInt(fr.apply(void 0,e.map(function(A){return A===$m?mU:A})),16);return{type:30,start:s,end:i}}var a=parseInt(fr.apply(void 0,e),16);if(this.peekCodePoint(0)===Hs&&Eu(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var o=[];Eu(n)&&o.length<6;)o.push(n),n=this.consumeCodePoint();var i=parseInt(fr.apply(void 0,o),16);return{type:30,start:a,end:i}}else return{type:30,start:a,end:a}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Wm?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Wm?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ia)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===zm||n===qm){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ia||this.peekCodePoint(0)===Qh)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),Ym)}for(;;){var s=this.consumeCodePoint();if(s===Ia||s===Qh)return{type:22,value:fr.apply(void 0,e)};if(Xm(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Ia||this.peekCodePoint(0)===Qh?(this.consumeCodePoint(),{type:22,value:fr.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Ym);if(s===qm||s===zm||s===Wm||J7(s))return this.consumeBadUrlRemnants(),Ym;if(s===yf)if(FA(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Ym;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;Xm(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Qh||e===Ia)return;FA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var n=5e4,r="";e>0;){var s=Math.min(n,e);r+=fr.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),r},t.prototype.consumeStringToken=function(e){var n="",r=0;do{var s=this._value[r];if(s===Ia||s===void 0||s===e)return n+=this.consumeStringSlice(r),{type:0,value:n};if(s===j0)return this._value.splice(0,r),c9;if(s===yf){var i=this._value[r+1];i!==Ia&&i!==void 0&&(i===j0?(n+=this.consumeStringSlice(r),r=-1,this._value.shift()):FA(s,i)&&(n+=this.consumeStringSlice(r),n+=fr(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},t.prototype.consumeNumber=function(){var e=[],n=Mp,r=this.peekCodePoint(0);for((r===dc||r===Hs)&&e.push(this.consumeCodePoint());vs(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(r===dp&&vs(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=A_;vs(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),s=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((r===pU||r===hU)&&((s===dc||s===Hs)&&vs(i)||vs(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=A_;vs(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[Y7(e),n]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),n=e[0],r=e[1],s=this.peekCodePoint(0),i=this.peekCodePoint(1),a=this.peekCodePoint(2);if(Jm(s,i,a)){var o=this.consumeName();return{type:15,number:n,flags:r,unit:o}}return s===v7?(this.consumeCodePoint(),{type:16,number:n,flags:r}):{type:17,number:n,flags:r}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Eu(e)){for(var n=fr(e);Eu(this.peekCodePoint(0))&&n.length<6;)n+=fr(this.consumeCodePoint());Xm(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(n,16);return r===0||q7(r)||r>1114111?u_:r}return e===Ia?u_:e},t.prototype.consumeName=function(){for(var e="";;){var n=this.consumeCodePoint();if(d_(n))e+=fr(n);else if(FA(n,this.peekCodePoint(0)))e+=fr(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(n),e}},t}(),wU=function(){function t(e){this._tokens=e}return t.create=function(e){var n=new gU;return n.write(e),new t(n.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var n=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var n=this.consumeComponentValue();if(n.type===32)return e;e.push(n),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var n={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||v9(r,e))return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue()),r=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var n={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?Q2:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),Hp=function(t){return t.type===15},$d=function(t){return t.type===17},En=function(t){return t.type===20},w9=function(t){return t.type===0},P2=function(t,e){return En(t)&&t.value===e},vU=function(t){return t.type!==31},Qd=function(t){return t.type!==31&&t.type!==4},Ha=function(t){var e=[],n=[];return t.forEach(function(r){if(r.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(n),n=[];return}r.type!==31&&n.push(r)}),n.length&&e.push(n),e},v9=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},ml=function(t){return t.type===17||t.type===15},br=function(t){return t.type===16||ml(t)},yU=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},as={type:17,number:0,flags:Mp},ab={type:16,number:50,flags:Mp},KA={type:16,number:100,flags:Mp},ef=function(t,e,n){var r=t[0],s=t[1];return[Un(r,e),Un(typeof s<"u"?s:r,n)]},Un=function(t,e){if(t.type===16)return t.number/100*e;if(Hp(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},BU="deg",xU="grad",bU="rad",CU="turn",Zw={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case BU:return Math.PI*e.number/180;case xU:return Math.PI/200*e.number;case bU:return e.number;case CU:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},EU=function(t){return t.type===15&&(t.unit===BU||t.unit===xU||t.unit===bU||t.unit===CU)},_U=function(t){var e=t.filter(En).map(function(n){return n.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[as,as];case"to top":case"bottom":return Fi(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[as,KA];case"to right":case"left":return Fi(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[KA,KA];case"to bottom":case"top":return Fi(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[KA,as];case"to left":case"right":return Fi(270)}return 0},Fi=function(t){return Math.PI*t/180},il={name:"color",parse:function(t,e){if(e.type===18){var n=y9[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return n(t,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),s=e.value.substring(1,2),i=e.value.substring(2,3);return GA(parseInt(r+r,16),parseInt(s+s,16),parseInt(i+i,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),s=e.value.substring(1,2),i=e.value.substring(2,3),a=e.value.substring(3,4);return GA(parseInt(r+r,16),parseInt(s+s,16),parseInt(i+i,16),parseInt(a+a,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),s=e.value.substring(2,4),i=e.value.substring(4,6);return GA(parseInt(r,16),parseInt(s,16),parseInt(i,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),s=e.value.substring(2,4),i=e.value.substring(4,6),a=e.value.substring(6,8);return GA(parseInt(r,16),parseInt(s,16),parseInt(i,16),parseInt(a,16)/255)}}if(e.type===20){var o=Fo[e.value.toUpperCase()];if(typeof o<"u")return o}return Fo.TRANSPARENT}},al=function(t){return(255&t)===0},Or=function(t){var e=255&t,n=255&t>>8,r=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+r+","+n+","+e/255+")":"rgb("+s+","+r+","+n+")"},GA=function(t,e,n,r){return(t<<24|e<<16|n<<8|Math.round(r*255)<<0)>>>0},h_=function(t,e){if(t.type===17)return t.number;if(t.type===16){var n=e===3?1:255;return e===3?t.number/100*n:Math.round(t.number/100*n)}return 0},f_=function(t,e){var n=e.filter(Qd);if(n.length===3){var r=n.map(h_),s=r[0],i=r[1],a=r[2];return GA(s,i,a,1)}if(n.length===4){var o=n.map(h_),s=o[0],i=o[1],a=o[2],A=o[3];return GA(s,i,a,A)}return 0};function By(t,e,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(e-t)*n*6+t:n<1/2?e:n<2/3?(e-t)*6*(2/3-n)+t:t}var p_=function(t,e){var n=e.filter(Qd),r=n[0],s=n[1],i=n[2],a=n[3],o=(r.type===17?Fi(r.number):Zw.parse(t,r))/(Math.PI*2),A=br(s)?s.number/100:0,c=br(i)?i.number/100:0,d=typeof a<"u"&&br(a)?Un(a,1):1;if(A===0)return GA(c*255,c*255,c*255,1);var f=c<=.5?c*(A+1):c+A-c*A,p=c*2-f,g=By(p,f,o+1/3),B=By(p,f,o),b=By(p,f,o-1/3);return GA(g*255,B*255,b*255,d)},y9={hsl:p_,hsla:p_,rgb:f_,rgba:f_},Bf=function(t,e){return il.parse(t,wU.create(e).parseComponentValue())},Fo={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},B9={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(En(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},x9={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},ev=function(t,e){var n=il.parse(t,e[0]),r=e[1];return r&&br(r)?{color:n,stop:r}:{color:n,stop:null}},m_=function(t,e){var n=t[0],r=t[t.length-1];n.stop===null&&(n.stop=as),r.stop===null&&(r.stop=KA);for(var s=[],i=0,a=0;a<t.length;a++){var o=t[a].stop;if(o!==null){var A=Un(o,e);A>i?s.push(A):s.push(i),i=A}else s.push(null)}for(var c=null,a=0;a<s.length;a++){var d=s[a];if(d===null)c===null&&(c=a);else if(c!==null){for(var f=a-c,p=s[c-1],g=(d-p)/(f+1),B=1;B<=f;B++)s[c+B-1]=g*B;c=null}}return t.map(function(b,C){var w=b.color;return{color:w,stop:Math.max(Math.min(1,s[C]/e),0)}})},b9=function(t,e,n){var r=e/2,s=n/2,i=Un(t[0],e)-r,a=s-Un(t[1],n);return(Math.atan2(a,i)+Math.PI*2)%(Math.PI*2)},C9=function(t,e,n){var r=typeof t=="number"?t:b9(t,e,n),s=Math.abs(e*Math.sin(r))+Math.abs(n*Math.cos(r)),i=e/2,a=n/2,o=s/2,A=Math.sin(r-Math.PI/2)*o,c=Math.cos(r-Math.PI/2)*o;return[s,i-c,i+c,a-A,a+A]},Xi=function(t,e){return Math.sqrt(t*t+e*e)},g_=function(t,e,n,r,s){var i=[[0,0],[0,e],[t,0],[t,e]];return i.reduce(function(a,o){var A=o[0],c=o[1],d=Xi(n-A,r-c);return(s?d<a.optimumDistance:d>a.optimumDistance)?{optimumCorner:o,optimumDistance:d}:a},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},E9=function(t,e,n,r,s){var i=0,a=0;switch(t.size){case 0:t.shape===0?i=a=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-s)):t.shape===1&&(i=Math.min(Math.abs(e),Math.abs(e-r)),a=Math.min(Math.abs(n),Math.abs(n-s)));break;case 2:if(t.shape===0)i=a=Math.min(Xi(e,n),Xi(e,n-s),Xi(e-r,n),Xi(e-r,n-s));else if(t.shape===1){var o=Math.min(Math.abs(n),Math.abs(n-s))/Math.min(Math.abs(e),Math.abs(e-r)),A=g_(r,s,e,n,!0),c=A[0],d=A[1];i=Xi(c-e,(d-n)/o),a=o*i}break;case 1:t.shape===0?i=a=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-s)):t.shape===1&&(i=Math.max(Math.abs(e),Math.abs(e-r)),a=Math.max(Math.abs(n),Math.abs(n-s)));break;case 3:if(t.shape===0)i=a=Math.max(Xi(e,n),Xi(e,n-s),Xi(e-r,n),Xi(e-r,n-s));else if(t.shape===1){var o=Math.max(Math.abs(n),Math.abs(n-s))/Math.max(Math.abs(e),Math.abs(e-r)),f=g_(r,s,e,n,!1),c=f[0],d=f[1];i=Xi(c-e,(d-n)/o),a=o*i}break}return Array.isArray(t.size)&&(i=Un(t.size[0],r),a=t.size.length===2?Un(t.size[1],s):i),[i,a]},_9=function(t,e){var n=Fi(180),r=[];return Ha(e).forEach(function(s,i){if(i===0){var a=s[0];if(a.type===20&&a.value==="to"){n=_U(s);return}else if(EU(a)){n=Zw.parse(t,a);return}}var o=ev(t,s);r.push(o)}),{angle:n,stops:r,type:1}},Zm=function(t,e){var n=Fi(180),r=[];return Ha(e).forEach(function(s,i){if(i===0){var a=s[0];if(a.type===20&&["top","left","right","bottom"].indexOf(a.value)!==-1){n=_U(s);return}else if(EU(a)){n=(Zw.parse(t,a)+Fi(270))%Fi(360);return}}var o=ev(t,s);r.push(o)}),{angle:n,stops:r,type:1}},I9=function(t,e){var n=Fi(180),r=[],s=1,i=0,a=3,o=[];return Ha(e).forEach(function(A,c){var d=A[0];if(c===0){if(En(d)&&d.value==="linear"){s=1;return}else if(En(d)&&d.value==="radial"){s=2;return}}if(d.type===18){if(d.name==="from"){var f=il.parse(t,d.values[0]);r.push({stop:as,color:f})}else if(d.name==="to"){var f=il.parse(t,d.values[0]);r.push({stop:KA,color:f})}else if(d.name==="color-stop"){var p=d.values.filter(Qd);if(p.length===2){var f=il.parse(t,p[1]),g=p[0];$d(g)&&r.push({stop:{type:16,number:g.number*100,flags:g.flags},color:f})}}}}),s===1?{angle:(n+Fi(180))%Fi(360),stops:r,type:s}:{size:a,shape:i,stops:r,position:o,type:s}},IU="closest-side",NU="farthest-side",SU="closest-corner",FU="farthest-corner",TU="circle",UU="ellipse",QU="cover",PU="contain",N9=function(t,e){var n=0,r=3,s=[],i=[];return Ha(e).forEach(function(a,o){var A=!0;if(o===0){var c=!1;A=a.reduce(function(f,p){if(c)if(En(p))switch(p.value){case"center":return i.push(ab),f;case"top":case"left":return i.push(as),f;case"right":case"bottom":return i.push(KA),f}else(br(p)||ml(p))&&i.push(p);else if(En(p))switch(p.value){case TU:return n=0,!1;case UU:return n=1,!1;case"at":return c=!0,!1;case IU:return r=0,!1;case QU:case NU:return r=1,!1;case PU:case SU:return r=2,!1;case FU:return r=3,!1}else if(ml(p)||br(p))return Array.isArray(r)||(r=[]),r.push(p),!1;return f},A)}if(A){var d=ev(t,a);s.push(d)}}),{size:r,shape:n,stops:s,position:i,type:2}},eg=function(t,e){var n=0,r=3,s=[],i=[];return Ha(e).forEach(function(a,o){var A=!0;if(o===0?A=a.reduce(function(d,f){if(En(f))switch(f.value){case"center":return i.push(ab),!1;case"top":case"left":return i.push(as),!1;case"right":case"bottom":return i.push(KA),!1}else if(br(f)||ml(f))return i.push(f),!1;return d},A):o===1&&(A=a.reduce(function(d,f){if(En(f))switch(f.value){case TU:return n=0,!1;case UU:return n=1,!1;case PU:case IU:return r=0,!1;case NU:return r=1,!1;case SU:return r=2,!1;case QU:case FU:return r=3,!1}else if(ml(f)||br(f))return Array.isArray(r)||(r=[]),r.push(f),!1;return d},A)),A){var c=ev(t,a);s.push(c)}}),{size:r,shape:n,stops:s,position:i,type:2}},S9=function(t){return t.type===1},F9=function(t){return t.type===2},ob={name:"image",parse:function(t,e){if(e.type===22){var n={url:e.value,type:0};return t.cache.addImage(e.value),n}if(e.type===18){var r=LU[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function T9(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!LU[t.name])}var LU={"linear-gradient":_9,"-moz-linear-gradient":Zm,"-ms-linear-gradient":Zm,"-o-linear-gradient":Zm,"-webkit-linear-gradient":Zm,"radial-gradient":N9,"-moz-radial-gradient":eg,"-ms-radial-gradient":eg,"-o-radial-gradient":eg,"-webkit-radial-gradient":eg,"-webkit-gradient":I9},U9={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e.filter(function(r){return Qd(r)&&T9(r)}).map(function(r){return ob.parse(t,r)})}},Q9={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(En(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},P9={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return Ha(e).map(function(n){return n.filter(br)}).map(yU)}},L9={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return Ha(e).map(function(n){return n.filter(En).map(function(r){return r.value}).join(" ")}).map(R9)}},R9=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},pd;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(pd||(pd={}));var k9={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return Ha(e).map(function(n){return n.filter(D9)})}},D9=function(t){return En(t)||br(t)},tv=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},j9=tv("top"),O9=tv("right"),M9=tv("bottom"),H9=tv("left"),nv=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,n){return yU(n.filter(br))}}},V9=nv("top-left"),K9=nv("top-right"),G9=nv("bottom-right"),q9=nv("bottom-left"),rv=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},z9=rv("top"),W9=rv("right"),$9=rv("bottom"),X9=rv("left"),sv=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,n){return Hp(n)?n.number:0}}},J9=sv("top"),Y9=sv("right"),Z9=sv("bottom"),eK=sv("left"),tK={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},nK={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},rK={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(En).reduce(function(n,r){return n|sK(r.value)},0)}},sK=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},iK={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},aK={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},M0;(function(t){t.NORMAL="normal",t.STRICT="strict"})(M0||(M0={}));var oK={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return M0.STRICT;case"normal":default:return M0.NORMAL}}},AK={name:"line-height",initialValue:"normal",prefix:!1,type:4},w_=function(t,e){return En(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:br(t)?Un(t,e):e},lK={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:ob.parse(t,e)}},cK={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},L2={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},iv=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},uK=iv("top"),dK=iv("right"),hK=iv("bottom"),fK=iv("left"),pK={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(En).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},mK={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},av=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},gK=av("top"),wK=av("right"),vK=av("bottom"),yK=av("left"),BK={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},xK={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},bK={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&P2(e[0],"none")?[]:Ha(e).map(function(n){for(var r={color:Fo.TRANSPARENT,offsetX:as,offsetY:as,blur:as},s=0,i=0;i<n.length;i++){var a=n[i];ml(a)?(s===0?r.offsetX=a:s===1?r.offsetY=a:r.blur=a,s++):r.color=il.parse(t,a)}return r})}},CK={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},EK={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var n=NK[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return n(e.values)}return null}},_K=function(t){var e=t.filter(function(n){return n.type===17}).map(function(n){return n.number});return e.length===6?e:null},IK=function(t){var e=t.filter(function(A){return A.type===17}).map(function(A){return A.number}),n=e[0],r=e[1];e[2],e[3];var s=e[4],i=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var a=e[12],o=e[13];return e[14],e[15],e.length===16?[n,r,s,i,a,o]:null},NK={matrix:_K,matrix3d:IK},v_={type:16,number:50,flags:Mp},SK=[v_,v_],FK={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var n=e.filter(br);return n.length!==2?SK:[n[0],n[1]]}},TK={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},xf;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(xf||(xf={}));var UK={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return xf.BREAK_ALL;case"keep-all":return xf.KEEP_ALL;case"normal":default:return xf.NORMAL}}},QK={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if($d(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},RU={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},PK={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return $d(e)?e.number:1}},LK={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},RK={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(En).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},kK={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var n=[],r=[];return e.forEach(function(s){switch(s.type){case 20:case 0:n.push(s.value);break;case 17:n.push(s.number.toString());break;case 4:r.push(n.join(" ")),n.length=0;break}}),n.length&&r.push(n.join(" ")),r.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},DK={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},jK={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if($d(e))return e.number;if(En(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},OK={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(En).map(function(n){return n.value})}},MK={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Sr=function(t,e){return(t&e)!==0},HK={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e}},VK={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;for(var r=[],s=e.filter(vU),i=0;i<s.length;i++){var a=s[i],o=s[i+1];if(a.type===20){var A=o&&$d(o)?o.number:1;r.push({counter:a.value,increment:A})}}return r}},KK={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var n=[],r=e.filter(vU),s=0;s<r.length;s++){var i=r[s],a=r[s+1];if(En(i)&&i.value!=="none"){var o=a&&$d(a)?a.number:0;n.push({counter:i.value,reset:o})}}return n}},GK={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Hp).map(function(n){return RU.parse(t,n)})}},qK={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;var r=[],s=e.filter(w9);if(s.length%2!==0)return null;for(var i=0;i<s.length;i+=2){var a=s[i].value,o=s[i+1].value;r.push({open:a,close:o})}return r}},y_=function(t,e,n){if(!t)return"";var r=t[Math.min(e,t.length-1)];return r?n?r.open:r.close:""},zK={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&P2(e[0],"none")?[]:Ha(e).map(function(n){for(var r={color:255,offsetX:as,offsetY:as,blur:as,spread:as,inset:!1},s=0,i=0;i<n.length;i++){var a=n[i];P2(a,"inset")?r.inset=!0:ml(a)?(s===0?r.offsetX=a:s===1?r.offsetY=a:s===2?r.blur=a:r.spread=a,s++):r.color=il.parse(t,a)}return r})}},WK={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var n=[0,1,2],r=[];return e.filter(En).forEach(function(s){switch(s.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),n.forEach(function(s){r.indexOf(s)===-1&&r.push(s)}),r}},$K={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},XK={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Hp(e)?e.number:0}},JK=function(){function t(e,n){var r,s;this.animationDuration=ht(e,GK,n.animationDuration),this.backgroundClip=ht(e,B9,n.backgroundClip),this.backgroundColor=ht(e,x9,n.backgroundColor),this.backgroundImage=ht(e,U9,n.backgroundImage),this.backgroundOrigin=ht(e,Q9,n.backgroundOrigin),this.backgroundPosition=ht(e,P9,n.backgroundPosition),this.backgroundRepeat=ht(e,L9,n.backgroundRepeat),this.backgroundSize=ht(e,k9,n.backgroundSize),this.borderTopColor=ht(e,j9,n.borderTopColor),this.borderRightColor=ht(e,O9,n.borderRightColor),this.borderBottomColor=ht(e,M9,n.borderBottomColor),this.borderLeftColor=ht(e,H9,n.borderLeftColor),this.borderTopLeftRadius=ht(e,V9,n.borderTopLeftRadius),this.borderTopRightRadius=ht(e,K9,n.borderTopRightRadius),this.borderBottomRightRadius=ht(e,G9,n.borderBottomRightRadius),this.borderBottomLeftRadius=ht(e,q9,n.borderBottomLeftRadius),this.borderTopStyle=ht(e,z9,n.borderTopStyle),this.borderRightStyle=ht(e,W9,n.borderRightStyle),this.borderBottomStyle=ht(e,$9,n.borderBottomStyle),this.borderLeftStyle=ht(e,X9,n.borderLeftStyle),this.borderTopWidth=ht(e,J9,n.borderTopWidth),this.borderRightWidth=ht(e,Y9,n.borderRightWidth),this.borderBottomWidth=ht(e,Z9,n.borderBottomWidth),this.borderLeftWidth=ht(e,eK,n.borderLeftWidth),this.boxShadow=ht(e,zK,n.boxShadow),this.color=ht(e,tK,n.color),this.direction=ht(e,nK,n.direction),this.display=ht(e,rK,n.display),this.float=ht(e,iK,n.cssFloat),this.fontFamily=ht(e,kK,n.fontFamily),this.fontSize=ht(e,DK,n.fontSize),this.fontStyle=ht(e,MK,n.fontStyle),this.fontVariant=ht(e,OK,n.fontVariant),this.fontWeight=ht(e,jK,n.fontWeight),this.letterSpacing=ht(e,aK,n.letterSpacing),this.lineBreak=ht(e,oK,n.lineBreak),this.lineHeight=ht(e,AK,n.lineHeight),this.listStyleImage=ht(e,lK,n.listStyleImage),this.listStylePosition=ht(e,cK,n.listStylePosition),this.listStyleType=ht(e,L2,n.listStyleType),this.marginTop=ht(e,uK,n.marginTop),this.marginRight=ht(e,dK,n.marginRight),this.marginBottom=ht(e,hK,n.marginBottom),this.marginLeft=ht(e,fK,n.marginLeft),this.opacity=ht(e,PK,n.opacity);var i=ht(e,pK,n.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=ht(e,mK,n.overflowWrap),this.paddingTop=ht(e,gK,n.paddingTop),this.paddingRight=ht(e,wK,n.paddingRight),this.paddingBottom=ht(e,vK,n.paddingBottom),this.paddingLeft=ht(e,yK,n.paddingLeft),this.paintOrder=ht(e,WK,n.paintOrder),this.position=ht(e,xK,n.position),this.textAlign=ht(e,BK,n.textAlign),this.textDecorationColor=ht(e,LK,(r=n.textDecorationColor)!==null&&r!==void 0?r:n.color),this.textDecorationLine=ht(e,RK,(s=n.textDecorationLine)!==null&&s!==void 0?s:n.textDecoration),this.textShadow=ht(e,bK,n.textShadow),this.textTransform=ht(e,CK,n.textTransform),this.transform=ht(e,EK,n.transform),this.transformOrigin=ht(e,FK,n.transformOrigin),this.visibility=ht(e,TK,n.visibility),this.webkitTextStrokeColor=ht(e,$K,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=ht(e,XK,n.webkitTextStrokeWidth),this.wordBreak=ht(e,UK,n.wordBreak),this.zIndex=ht(e,QK,n.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return al(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Sr(this.display,4)||Sr(this.display,33554432)||Sr(this.display,268435456)||Sr(this.display,536870912)||Sr(this.display,67108864)||Sr(this.display,134217728)},t}(),YK=function(){function t(e,n){this.content=ht(e,HK,n.content),this.quotes=ht(e,qK,n.quotes)}return t}(),B_=function(){function t(e,n){this.counterIncrement=ht(e,VK,n.counterIncrement),this.counterReset=ht(e,KK,n.counterReset)}return t}(),ht=function(t,e,n){var r=new gU,s=n!==null&&typeof n<"u"?n.toString():e.initialValue;r.write(s);var i=new wU(r.read());switch(e.type){case 2:var a=i.parseComponentValue();return e.parse(t,En(a)?a.value:e.initialValue);case 0:return e.parse(t,i.parseComponentValue());case 1:return e.parse(t,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(e.format){case"angle":return Zw.parse(t,i.parseComponentValue());case"color":return il.parse(t,i.parseComponentValue());case"image":return ob.parse(t,i.parseComponentValue());case"length":var o=i.parseComponentValue();return ml(o)?o:as;case"length-percentage":var A=i.parseComponentValue();return br(A)?A:as;case"time":return RU.parse(t,i.parseComponentValue())}break}},ZK="data-html2canvas-debug",eG=function(t){var e=t.getAttribute(ZK);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},R2=function(t,e){var n=eG(t);return n===1||e===n},Va=function(){function t(e,n){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,R2(n,3))debugger;this.styles=new JK(e,window.getComputedStyle(n,null)),j2(n)&&(this.styles.animationDuration.some(function(r){return r>0})&&(n.style.animationDuration="0s"),this.styles.transform!==null&&(n.style.transform="none")),this.bounds=Jw(this.context,n),R2(n,4)&&(this.flags|=16)}return t}(),tG="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",x_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",tf=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var tg=0;tg<x_.length;tg++)tf[x_.charCodeAt(tg)]=tg;var nG=function(t){var e=t.length*.75,n=t.length,r,s=0,i,a,o,A;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(r=0;r<n;r+=4)i=tf[t.charCodeAt(r)],a=tf[t.charCodeAt(r+1)],o=tf[t.charCodeAt(r+2)],A=tf[t.charCodeAt(r+3)],d[s++]=i<<2|a>>4,d[s++]=(a&15)<<4|o>>2,d[s++]=(o&3)<<6|A&63;return c},rG=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},sG=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},vc=5,Ab=11,xy=2,iG=Ab-vc,kU=65536>>vc,aG=1<<vc,by=aG-1,oG=1024>>vc,AG=kU+oG,lG=AG,cG=32,uG=lG+cG,dG=65536>>Ab,hG=1<<iG,fG=hG-1,b_=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},pG=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},mG=function(t,e){var n=nG(t),r=Array.isArray(n)?sG(n):new Uint32Array(n),s=Array.isArray(n)?rG(n):new Uint16Array(n),i=24,a=b_(s,i/2,r[4]/2),o=r[5]===2?b_(s,(i+r[4])/2):pG(r,Math.ceil((i+r[4])/4));return new gG(r[0],r[1],r[2],r[3],a,o)},gG=function(){function t(e,n,r,s,i,a){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=i,this.data=a}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>vc],n=(n<<xy)+(e&by),this.data[n];if(e<=65535)return n=this.index[kU+(e-55296>>vc)],n=(n<<xy)+(e&by),this.data[n];if(e<this.highStart)return n=uG-dG+(e>>Ab),n=this.index[n],n+=e>>vc&fG,n=this.index[n],n=(n<<xy)+(e&by),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),C_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wG=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ng=0;ng<C_.length;ng++)wG[C_.charCodeAt(ng)]=ng;var vG=1,Cy=2,Ey=3,E_=4,__=5,yG=7,I_=8,_y=9,Iy=10,N_=11,S_=12,F_=13,T_=14,Ny=15,BG=function(t){for(var e=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var i=t.charCodeAt(n++);(i&64512)===56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),n--)}else e.push(s)}return e},xG=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,i="";++s<n;){var a=t[s];a<=65535?r.push(a):(a-=65536,r.push((a>>10)+55296,a%1024+56320)),(s+1===n||r.length>16384)&&(i+=String.fromCharCode.apply(String,r),r.length=0)}return i},bG=mG(tG),Ci="",Sy="",CG=function(t){return bG.get(t)},EG=function(t,e,n){var r=n-2,s=e[r],i=e[n-1],a=e[n];if(i===Cy&&a===Ey)return Ci;if(i===Cy||i===Ey||i===E_||a===Cy||a===Ey||a===E_)return Sy;if(i===I_&&[I_,_y,N_,S_].indexOf(a)!==-1||(i===N_||i===_y)&&(a===_y||a===Iy)||(i===S_||i===Iy)&&a===Iy||a===F_||a===__||a===yG||i===vG)return Ci;if(i===F_&&a===T_){for(;s===__;)s=e[--r];if(s===T_)return Ci}if(i===Ny&&a===Ny){for(var o=0;s===Ny;)o++,s=e[--r];if(o%2===0)return Ci}return Sy},_G=function(t){var e=BG(t),n=e.length,r=0,s=0,i=e.map(CG);return{next:function(){if(r>=n)return{done:!0,value:null};for(var a=Ci;r<n&&(a=EG(e,i,++r))===Ci;);if(a!==Ci||r===n){var o=xG.apply(null,e.slice(s,r));return s=r,{value:o,done:!1}}return{done:!0,value:null}}}},IG=function(t){for(var e=_G(t),n=[],r;!(r=e.next()).done;)r.value&&n.push(r.value.slice());return n},NG=function(t){var e=123;if(t.createRange){var n=t.createRange();if(n.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=e+"px",r.style.display="block",t.body.appendChild(r),n.selectNode(r);var s=n.getBoundingClientRect(),i=Math.round(s.height);if(t.body.removeChild(r),i===e)return!0}}return!1},SG=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var n=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,s=Yw(r.data).map(function(A){return fr(A)}),i=0,a={},o=s.every(function(A,c){n.setStart(r,i),n.setEnd(r,i+A.length);var d=n.getBoundingClientRect();i+=A.length;var f=d.x>a.x||d.y>a.y;return a=d,c===0?!0:f});return t.body.removeChild(e),o},FG=function(){return typeof new Image().crossOrigin<"u"},TG=function(){return typeof new XMLHttpRequest().responseType=="string"},UG=function(t){var e=new Image,n=t.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),n.toDataURL()}catch{return!1}return!0},U_=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},QG=function(t){var e=t.createElement("canvas"),n=100;e.width=n,e.height=n;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var s=new Image,i=e.toDataURL();s.src=i;var a=k2(n,n,0,0,s);return r.fillStyle="red",r.fillRect(0,0,n,n),Q_(a).then(function(o){r.drawImage(o,0,0);var A=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var c=t.createElement("div");return c.style.backgroundImage="url("+i+")",c.style.height=n+"px",U_(A)?Q_(k2(n,n,0,0,c)):Promise.reject(!1)}).then(function(o){return r.drawImage(o,0,0),U_(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},k2=function(t,e,n,r,s){var i="http://www.w3.org/2000/svg",a=document.createElementNS(i,"svg"),o=document.createElementNS(i,"foreignObject");return a.setAttributeNS(null,"width",t.toString()),a.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",n.toString()),o.setAttributeNS(null,"y",r.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),a.appendChild(o),o.appendChild(s),a},Q_=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},ts={get SUPPORT_RANGE_BOUNDS(){var t=NG(document);return Object.defineProperty(ts,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=ts.SUPPORT_RANGE_BOUNDS&&SG(document);return Object.defineProperty(ts,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=UG(document);return Object.defineProperty(ts,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?QG(document):Promise.resolve(!1);return Object.defineProperty(ts,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=FG();return Object.defineProperty(ts,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=TG();return Object.defineProperty(ts,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ts,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(ts,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},bf=function(){function t(e,n){this.text=e,this.bounds=n}return t}(),PG=function(t,e,n,r){var s=kG(e,n),i=[],a=0;return s.forEach(function(o){if(n.textDecorationLine.length||o.trim().length>0)if(ts.SUPPORT_RANGE_BOUNDS){var A=P_(r,a,o.length).getClientRects();if(A.length>1){var c=lb(o),d=0;c.forEach(function(p){i.push(new bf(p,Oo.fromDOMRectList(t,P_(r,d+a,p.length).getClientRects()))),d+=p.length})}else i.push(new bf(o,Oo.fromDOMRectList(t,A)))}else{var f=r.splitText(o.length);i.push(new bf(o,LG(t,r))),r=f}else ts.SUPPORT_RANGE_BOUNDS||(r=r.splitText(o.length));a+=o.length}),i},LG=function(t,e){var n=e.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(r,e);var i=Jw(t,r);return r.firstChild&&s.replaceChild(r.firstChild,r),i}}return Oo.EMPTY},P_=function(t,e,n){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var s=r.createRange();return s.setStart(t,e),s.setEnd(t,e+n),s},lb=function(t){if(ts.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(n){return n.segment})}return IG(t)},RG=function(t,e){if(ts.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(t)).map(function(r){return r.segment})}return jG(t,e)},kG=function(t,e){return e.letterSpacing!==0?lb(t):RG(t,e)},DG=[32,160,4961,65792,65793,4153,4241],jG=function(t,e){for(var n=d7(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],s,i=function(){if(s.value){var a=s.value.slice(),o=Yw(a),A="";o.forEach(function(c){DG.indexOf(c)===-1?A+=fr(c):(A.length&&r.push(A),r.push(fr(c)),A="")}),A.length&&r.push(A)}};!(s=n.next()).done;)i();return r},OG=function(){function t(e,n,r){this.text=MG(n.data,r.textTransform),this.textBounds=PG(e,this.text,r,n)}return t}(),MG=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(HG,VG);case 2:return t.toUpperCase();default:return t}},HG=/(^|\s|:|-|\(|\))([a-z])/g,VG=function(t,e,n){return t.length>0?e+n.toUpperCase():t},DU=function(t){ca(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.src=r.currentSrc||r.src,s.intrinsicWidth=r.naturalWidth,s.intrinsicHeight=r.naturalHeight,s.context.cache.addImage(s.src),s}return e}(Va),jU=function(t){ca(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.canvas=r,s.intrinsicWidth=r.width,s.intrinsicHeight=r.height,s}return e}(Va),OU=function(t){ca(e,t);function e(n,r){var s=t.call(this,n,r)||this,i=new XMLSerializer,a=Jw(n,r);return r.setAttribute("width",a.width+"px"),r.setAttribute("height",a.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(r)),s.intrinsicWidth=r.width.baseVal.value,s.intrinsicHeight=r.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(Va),MU=function(t){ca(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.value=r.value,s}return e}(Va),D2=function(t){ca(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.start=r.start,s.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,s}return e}(Va),KG=[{type:15,flags:0,unit:"px",number:3}],GG=[{type:16,flags:0,number:50}],qG=function(t){return t.width>t.height?new Oo(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new Oo(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},zG=function(t){var e=t.type===WG?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},H0="checkbox",V0="radio",WG="password",L_=707406591,cb=function(t){ca(e,t);function e(n,r){var s=t.call(this,n,r)||this;switch(s.type=r.type.toLowerCase(),s.checked=r.checked,s.value=zG(r),(s.type===H0||s.type===V0)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=qG(s.bounds)),s.type){case H0:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=KG;break;case V0:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=GG;break}return s}return e}(Va),HU=function(t){ca(e,t);function e(n,r){var s=t.call(this,n,r)||this,i=r.options[r.selectedIndex||0];return s.value=i&&i.text||"",s}return e}(Va),VU=function(t){ca(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.value=r.value,s}return e}(Va),KU=function(t){ca(e,t);function e(n,r){var s=t.call(this,n,r)||this;s.src=r.src,s.width=parseInt(r.width,10)||0,s.height=parseInt(r.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){s.tree=qU(n,r.contentWindow.document.documentElement);var i=r.contentWindow.document.documentElement?Bf(n,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):Fo.TRANSPARENT,a=r.contentWindow.document.body?Bf(n,getComputedStyle(r.contentWindow.document.body).backgroundColor):Fo.TRANSPARENT;s.backgroundColor=al(i)?al(a)?s.styles.backgroundColor:a:i}}catch{}return s}return e}(Va),$G=["OL","UL","MENU"],Gg=function(t,e,n,r){for(var s=e.firstChild,i=void 0;s;s=i)if(i=s.nextSibling,zU(s)&&s.data.trim().length>0)n.textNodes.push(new OG(t,s,n.styles));else if(sd(s))if(JU(s)&&s.assignedNodes)s.assignedNodes().forEach(function(o){return Gg(t,o,n,r)});else{var a=GU(t,s);a.styles.isVisible()&&(XG(s,a,r)?a.flags|=4:JG(a.styles)&&(a.flags|=2),$G.indexOf(s.tagName)!==-1&&(a.flags|=8),n.elements.push(a),s.slot,s.shadowRoot?Gg(t,s.shadowRoot,a,r):!K0(s)&&!WU(s)&&!G0(s)&&Gg(t,s,a,r))}},GU=function(t,e){return O2(e)?new DU(t,e):$U(e)?new jU(t,e):WU(e)?new OU(t,e):YG(e)?new MU(t,e):ZG(e)?new D2(t,e):eq(e)?new cb(t,e):G0(e)?new HU(t,e):K0(e)?new VU(t,e):XU(e)?new KU(t,e):new Va(t,e)},qU=function(t,e){var n=GU(t,e);return n.flags|=4,Gg(t,e,n,n),n},XG=function(t,e,n){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||ub(t)&&n.styles.isTransparent()},JG=function(t){return t.isPositioned()||t.isFloating()},zU=function(t){return t.nodeType===Node.TEXT_NODE},sd=function(t){return t.nodeType===Node.ELEMENT_NODE},j2=function(t){return sd(t)&&typeof t.style<"u"&&!qg(t)},qg=function(t){return typeof t.className=="object"},YG=function(t){return t.tagName==="LI"},ZG=function(t){return t.tagName==="OL"},eq=function(t){return t.tagName==="INPUT"},tq=function(t){return t.tagName==="HTML"},WU=function(t){return t.tagName==="svg"},ub=function(t){return t.tagName==="BODY"},$U=function(t){return t.tagName==="CANVAS"},R_=function(t){return t.tagName==="VIDEO"},O2=function(t){return t.tagName==="IMG"},XU=function(t){return t.tagName==="IFRAME"},k_=function(t){return t.tagName==="STYLE"},nq=function(t){return t.tagName==="SCRIPT"},K0=function(t){return t.tagName==="TEXTAREA"},G0=function(t){return t.tagName==="SELECT"},JU=function(t){return t.tagName==="SLOT"},D_=function(t){return t.tagName.indexOf("-")>0},rq=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var n=this.counters[e];return n&&n.length?n[n.length-1]:1},t.prototype.getCounterValues=function(e){var n=this.counters[e];return n||[]},t.prototype.pop=function(e){var n=this;e.forEach(function(r){return n.counters[r].pop()})},t.prototype.parse=function(e){var n=this,r=e.counterIncrement,s=e.counterReset,i=!0;r!==null&&r.forEach(function(o){var A=n.counters[o.counter];A&&o.increment!==0&&(i=!1,A.length||A.push(1),A[Math.max(0,A.length-1)]+=o.increment)});var a=[];return i&&s.forEach(function(o){var A=n.counters[o.counter];a.push(o.counter),A||(A=n.counters[o.counter]=[]),A.push(o.reset)}),a},t}(),j_={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},O_={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},sq={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},iq={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},_u=function(t,e,n,r,s,i){return t<e||t>n?hp(t,s,i.length>0):r.integers.reduce(function(a,o,A){for(;t>=o;)t-=o,a+=r.values[A];return a},"")+i},YU=function(t,e,n,r){var s="";do n||t--,s=r(t)+s,t/=e;while(t*e>=e);return s},hr=function(t,e,n,r,s){var i=n-e+1;return(t<0?"-":"")+(YU(Math.abs(t),i,r,function(a){return fr(Math.floor(a%i)+e)})+s)},$l=function(t,e,n){n===void 0&&(n=". ");var r=e.length;return YU(Math.abs(t),r,!1,function(s){return e[Math.floor(s%r)]})+n},Mu=1,_A=2,IA=4,nf=8,co=function(t,e,n,r,s,i){if(t<-9999||t>9999)return hp(t,4,s.length>0);var a=Math.abs(t),o=s;if(a===0)return e[0]+o;for(var A=0;a>0&&A<=4;A++){var c=a%10;c===0&&Sr(i,Mu)&&o!==""?o=e[c]+o:c>1||c===1&&A===0||c===1&&A===1&&Sr(i,_A)||c===1&&A===1&&Sr(i,IA)&&t>100||c===1&&A>1&&Sr(i,nf)?o=e[c]+(A>0?n[A-1]:"")+o:c===1&&A>0&&(o=n[A-1]+o),a=Math.floor(a/10)}return(t<0?r:"")+o},M_="",H_="",V_="",Fy="",hp=function(t,e,n){var r=n?". ":"",s=n?"":"",i=n?", ":"",a=n?" ":"";switch(e){case 0:return""+a;case 1:return""+a;case 2:return""+a;case 5:var o=hr(t,48,57,!0,r);return o.length<4?"0"+o:o;case 4:return $l(t,"",s);case 6:return _u(t,1,3999,j_,3,r).toLowerCase();case 7:return _u(t,1,3999,j_,3,r);case 8:return hr(t,945,969,!1,r);case 9:return hr(t,97,122,!1,r);case 10:return hr(t,65,90,!1,r);case 11:return hr(t,1632,1641,!0,r);case 12:case 49:return _u(t,1,9999,O_,3,r);case 35:return _u(t,1,9999,O_,3,r).toLowerCase();case 13:return hr(t,2534,2543,!0,r);case 14:case 30:return hr(t,6112,6121,!0,r);case 15:return $l(t,"",s);case 16:return $l(t,"",s);case 17:case 48:return co(t,"",M_,"",s,_A|IA|nf);case 47:return co(t,"",H_,"",s,Mu|_A|IA|nf);case 42:return co(t,"",M_,"",s,_A|IA|nf);case 41:return co(t,"",H_,"",s,Mu|_A|IA|nf);case 26:return co(t,"","",V_,s,0);case 25:return co(t,"","",V_,s,Mu|_A|IA);case 31:return co(t,"","",Fy,i,Mu|_A|IA);case 33:return co(t,"","",Fy,i,0);case 32:return co(t,"","",Fy,i,Mu|_A|IA);case 18:return hr(t,2406,2415,!0,r);case 20:return _u(t,1,19999,iq,3,r);case 21:return hr(t,2790,2799,!0,r);case 22:return hr(t,2662,2671,!0,r);case 22:return _u(t,1,10999,sq,3,r);case 23:return $l(t,"");case 24:return $l(t,"");case 27:return hr(t,3302,3311,!0,r);case 28:return $l(t,"",s);case 29:return $l(t,"",s);case 34:return hr(t,3792,3801,!0,r);case 37:return hr(t,6160,6169,!0,r);case 38:return hr(t,4160,4169,!0,r);case 39:return hr(t,2918,2927,!0,r);case 40:return hr(t,1776,1785,!0,r);case 43:return hr(t,3046,3055,!0,r);case 44:return hr(t,3174,3183,!0,r);case 45:return hr(t,3664,3673,!0,r);case 46:return hr(t,3872,3881,!0,r);case 3:default:return hr(t,48,57,!0,r)}},ZU="data-html2canvas-ignore",K_=function(){function t(e,n,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=n,this.counters=new rq,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,n){var r=this,s=aq(e,n);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var i=e.defaultView.pageXOffset,a=e.defaultView.pageYOffset,o=s.contentWindow,A=o.document,c=lq(s).then(function(){return Ns(r,void 0,void 0,function(){var d,f;return gs(this,function(p){switch(p.label){case 0:return this.scrolledElements.forEach(hq),o&&(o.scrollTo(n.left,n.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==n.top||o.scrollX!==n.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-n.left,o.scrollY-n.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:A.fonts&&A.fonts.ready?[4,A.fonts.ready]:[3,2];case 1:p.sent(),p.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Aq(A)]:[3,4];case 3:p.sent(),p.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(A,f)}).then(function(){return s})]:[2,s]}})})});return A.open(),A.write(uq(document.doctype)+"<html></html>"),dq(this.referenceElement.ownerDocument,i,a),A.replaceChild(A.adoptNode(this.documentElement),A.documentElement),A.close(),c},t.prototype.createElementClone=function(e){if(R2(e,2))debugger;if($U(e))return this.createCanvasClone(e);if(R_(e))return this.createVideoClone(e);if(k_(e))return this.createStyleClone(e);var n=e.cloneNode(!1);return O2(n)&&(O2(e)&&e.currentSrc&&e.currentSrc!==e.src&&(n.src=e.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),D_(n)?this.createCustomElementClone(n):n},t.prototype.createCustomElementClone=function(e){var n=document.createElement("html2canvascustomelement");return Ty(e.style,n),n},t.prototype.createStyleClone=function(e){try{var n=e.sheet;if(n&&n.cssRules){var r=[].slice.call(n.cssRules,0).reduce(function(i,a){return a&&typeof a.cssText=="string"?i+a.cssText:i},""),s=e.cloneNode(!1);return s.textContent=r,s}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),i.name!=="SecurityError")throw i}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var n;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var i=e.getContext("2d"),a=s.getContext("2d");if(a)if(!this.options.allowTaint&&i)a.putImageData(i.getImageData(0,0,e.width,e.height),0,0);else{var o=(n=e.getContext("webgl2"))!==null&&n!==void 0?n:e.getContext("webgl");if(o){var A=o.getContextAttributes();(A==null?void 0:A.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}a.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var n=e.ownerDocument.createElement("canvas");n.width=e.offsetWidth,n.height=e.offsetHeight;var r=n.getContext("2d");try{return r&&(r.drawImage(e,0,0,n.width,n.height),this.options.allowTaint||r.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,n,r){(!sd(n)||!nq(n)&&!n.hasAttribute(ZU)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(n)))&&(!this.options.copyStyles||!sd(n)||!k_(n))&&e.appendChild(this.cloneNode(n,r))},t.prototype.cloneChildNodes=function(e,n,r){for(var s=this,i=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;i;i=i.nextSibling)if(sd(i)&&JU(i)&&typeof i.assignedNodes=="function"){var a=i.assignedNodes();a.length&&a.forEach(function(o){return s.appendChildNode(n,o,r)})}else this.appendChildNode(n,i,r)},t.prototype.cloneNode=function(e,n){if(zU(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&sd(e)&&(j2(e)||qg(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var i=r.getComputedStyle(e),a=r.getComputedStyle(e,":before"),o=r.getComputedStyle(e,":after");this.referenceElement===e&&j2(s)&&(this.clonedReferenceElement=s),ub(s)&&mq(s);var A=this.counters.parse(new B_(this.context,i)),c=this.resolvePseudoContent(e,s,a,Cf.BEFORE);D_(e)&&(n=!0),R_(e)||this.cloneChildNodes(e,s,n),c&&s.insertBefore(c,s.firstChild);var d=this.resolvePseudoContent(e,s,o,Cf.AFTER);return d&&s.appendChild(d),this.counters.pop(A),(i&&(this.options.copyStyles||qg(e))&&!XU(e)||n)&&Ty(i,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(K0(e)||G0(e))&&(K0(s)||G0(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,n,r,s){var i=this;if(r){var a=r.content,o=n.ownerDocument;if(!(!o||!a||a==="none"||a==="-moz-alt-content"||r.display==="none")){this.counters.parse(new B_(this.context,r));var A=new YK(this.context,r),c=o.createElement("html2canvaspseudoelement");Ty(r,c),A.content.forEach(function(f){if(f.type===0)c.appendChild(o.createTextNode(f.value));else if(f.type===22){var p=o.createElement("img");p.src=f.value,p.style.opacity="1",c.appendChild(p)}else if(f.type===18){if(f.name==="attr"){var g=f.values.filter(En);g.length&&c.appendChild(o.createTextNode(e.getAttribute(g[0].value)||""))}else if(f.name==="counter"){var B=f.values.filter(Qd),b=B[0],C=B[1];if(b&&En(b)){var w=i.counters.getCounterValue(b.value),y=C&&En(C)?L2.parse(i.context,C.value):3;c.appendChild(o.createTextNode(hp(w,y,!1)))}}else if(f.name==="counters"){var N=f.values.filter(Qd),b=N[0],R=N[1],C=N[2];if(b&&En(b)){var V=i.counters.getCounterValues(b.value),j=C&&En(C)?L2.parse(i.context,C.value):3,U=R&&R.type===0?R.value:"",I=V.map(function(S){return hp(S,j,!1)}).join(U);c.appendChild(o.createTextNode(I))}}}else if(f.type===20)switch(f.value){case"open-quote":c.appendChild(o.createTextNode(y_(A.quotes,i.quoteDepth++,!0)));break;case"close-quote":c.appendChild(o.createTextNode(y_(A.quotes,--i.quoteDepth,!1)));break;default:c.appendChild(o.createTextNode(f.value))}}),c.className=M2+" "+H2;var d=s===Cf.BEFORE?" "+M2:" "+H2;return qg(n)?n.className.baseValue+=d:n.className+=d,c}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Cf;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Cf||(Cf={}));var aq=function(t,e){var n=t.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=e.width.toString(),n.height=e.height.toString(),n.scrolling="no",n.setAttribute(ZU,"true"),t.body.appendChild(n),n},oq=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},Aq=function(t){return Promise.all([].slice.call(t.images,0).map(oq))},lq=function(t){return new Promise(function(e,n){var r=t.contentWindow;if(!r)return n("No window assigned for iframe");var s=r.document;r.onload=t.onload=function(){r.onload=t.onload=null;var i=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(i),e(t))},50)}})},cq=["all","d","content"],Ty=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t.item(n);cq.indexOf(r)===-1&&e.style.setProperty(r,t.getPropertyValue(r))}return e},uq=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},dq=function(t,e,n){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||n!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,n)},hq=function(t){var e=t[0],n=t[1],r=t[2];e.scrollLeft=n,e.scrollTop=r},fq=":before",pq=":after",M2="___html2canvas___pseudoelement_before",H2="___html2canvas___pseudoelement_after",G_=`{
    content: "" !important;
    display: none !important;
}`,mq=function(t){gq(t,"."+M2+fq+G_+`
         .`+H2+pq+G_)},gq=function(t,e){var n=t.ownerDocument;if(n){var r=n.createElement("style");r.textContent=e,t.appendChild(r)}},e3=function(){function t(){}return t.getOrigin=function(e){var n=t._link;return n?(n.href=e,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),wq=function(){function t(e,n){this.context=e,this._options=n,this._cache={}}return t.prototype.addImage=function(e){var n=Promise.resolve();return this.has(e)||(Qy(e)||xq(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),n},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Ns(this,void 0,void 0,function(){var n,r,s,i,a=this;return gs(this,function(o){switch(o.label){case 0:return n=e3.isSameOrigin(e),r=!Uy(e)&&this._options.useCORS===!0&&ts.SUPPORT_CORS_IMAGES&&!n,s=!Uy(e)&&!n&&!Qy(e)&&typeof this._options.proxy=="string"&&ts.SUPPORT_CORS_XHR&&!r,!n&&this._options.allowTaint===!1&&!Uy(e)&&!Qy(e)&&!s&&!r?[2]:(i=e,s?[4,this.proxy(i)]:[3,2]);case 1:i=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(A,c){var d=new Image;d.onload=function(){return A(d)},d.onerror=c,(bq(i)||r)&&(d.crossOrigin="anonymous"),d.src=i,d.complete===!0&&setTimeout(function(){return A(d)},500),a._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+a._options.imageTimeout+"ms) loading image")},a._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var n=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(i,a){var o=ts.SUPPORT_RESPONSE_TYPE?"blob":"text",A=new XMLHttpRequest;A.onload=function(){if(A.status===200)if(o==="text")i(A.response);else{var f=new FileReader;f.addEventListener("load",function(){return i(f.result)},!1),f.addEventListener("error",function(p){return a(p)},!1),f.readAsDataURL(A.response)}else a("Failed to proxy resource "+s+" with status code "+A.status)},A.onerror=a;var c=r.indexOf("?")>-1?"&":"?";if(A.open("GET",""+r+c+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&A instanceof XMLHttpRequest&&(A.responseType=o),n._options.imageTimeout){var d=n._options.imageTimeout;A.timeout=d,A.ontimeout=function(){return a("Timed out ("+d+"ms) proxying "+s)}}A.send()})},t}(),vq=/^data:image\/svg\+xml/i,yq=/^data:image\/.*;base64,/i,Bq=/^data:image\/.*/i,xq=function(t){return ts.SUPPORT_SVG_DRAWING||!Cq(t)},Uy=function(t){return Bq.test(t)},bq=function(t){return yq.test(t)},Qy=function(t){return t.substr(0,4)==="blob"},Cq=function(t){return t.substr(-3).toLowerCase()==="svg"||vq.test(t)},ct=function(){function t(e,n){this.type=0,this.x=e,this.y=n}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t}(),Iu=function(t,e,n){return new ct(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},rg=function(){function t(e,n,r,s){this.type=1,this.start=e,this.startControl=n,this.endControl=r,this.end=s}return t.prototype.subdivide=function(e,n){var r=Iu(this.start,this.startControl,e),s=Iu(this.startControl,this.endControl,e),i=Iu(this.endControl,this.end,e),a=Iu(r,s,e),o=Iu(s,i,e),A=Iu(a,o,e);return n?new t(this.start,r,a,A):new t(A,o,i,this.end)},t.prototype.add=function(e,n){return new t(this.start.add(e,n),this.startControl.add(e,n),this.endControl.add(e,n),this.end.add(e,n))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Ii=function(t){return t.type===1},Eq=function(){function t(e){var n=e.styles,r=e.bounds,s=ef(n.borderTopLeftRadius,r.width,r.height),i=s[0],a=s[1],o=ef(n.borderTopRightRadius,r.width,r.height),A=o[0],c=o[1],d=ef(n.borderBottomRightRadius,r.width,r.height),f=d[0],p=d[1],g=ef(n.borderBottomLeftRadius,r.width,r.height),B=g[0],b=g[1],C=[];C.push((i+A)/r.width),C.push((B+f)/r.width),C.push((a+b)/r.height),C.push((c+p)/r.height);var w=Math.max.apply(Math,C);w>1&&(i/=w,a/=w,A/=w,c/=w,f/=w,p/=w,B/=w,b/=w);var y=r.width-A,N=r.height-p,R=r.width-f,V=r.height-b,j=n.borderTopWidth,U=n.borderRightWidth,I=n.borderBottomWidth,Q=n.borderLeftWidth,D=Un(n.paddingTop,e.bounds.width),S=Un(n.paddingRight,e.bounds.width),_=Un(n.paddingBottom,e.bounds.width),T=Un(n.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||a>0?Mn(r.left+Q/3,r.top+j/3,i-Q/3,a-j/3,fn.TOP_LEFT):new ct(r.left+Q/3,r.top+j/3),this.topRightBorderDoubleOuterBox=i>0||a>0?Mn(r.left+y,r.top+j/3,A-U/3,c-j/3,fn.TOP_RIGHT):new ct(r.left+r.width-U/3,r.top+j/3),this.bottomRightBorderDoubleOuterBox=f>0||p>0?Mn(r.left+R,r.top+N,f-U/3,p-I/3,fn.BOTTOM_RIGHT):new ct(r.left+r.width-U/3,r.top+r.height-I/3),this.bottomLeftBorderDoubleOuterBox=B>0||b>0?Mn(r.left+Q/3,r.top+V,B-Q/3,b-I/3,fn.BOTTOM_LEFT):new ct(r.left+Q/3,r.top+r.height-I/3),this.topLeftBorderDoubleInnerBox=i>0||a>0?Mn(r.left+Q*2/3,r.top+j*2/3,i-Q*2/3,a-j*2/3,fn.TOP_LEFT):new ct(r.left+Q*2/3,r.top+j*2/3),this.topRightBorderDoubleInnerBox=i>0||a>0?Mn(r.left+y,r.top+j*2/3,A-U*2/3,c-j*2/3,fn.TOP_RIGHT):new ct(r.left+r.width-U*2/3,r.top+j*2/3),this.bottomRightBorderDoubleInnerBox=f>0||p>0?Mn(r.left+R,r.top+N,f-U*2/3,p-I*2/3,fn.BOTTOM_RIGHT):new ct(r.left+r.width-U*2/3,r.top+r.height-I*2/3),this.bottomLeftBorderDoubleInnerBox=B>0||b>0?Mn(r.left+Q*2/3,r.top+V,B-Q*2/3,b-I*2/3,fn.BOTTOM_LEFT):new ct(r.left+Q*2/3,r.top+r.height-I*2/3),this.topLeftBorderStroke=i>0||a>0?Mn(r.left+Q/2,r.top+j/2,i-Q/2,a-j/2,fn.TOP_LEFT):new ct(r.left+Q/2,r.top+j/2),this.topRightBorderStroke=i>0||a>0?Mn(r.left+y,r.top+j/2,A-U/2,c-j/2,fn.TOP_RIGHT):new ct(r.left+r.width-U/2,r.top+j/2),this.bottomRightBorderStroke=f>0||p>0?Mn(r.left+R,r.top+N,f-U/2,p-I/2,fn.BOTTOM_RIGHT):new ct(r.left+r.width-U/2,r.top+r.height-I/2),this.bottomLeftBorderStroke=B>0||b>0?Mn(r.left+Q/2,r.top+V,B-Q/2,b-I/2,fn.BOTTOM_LEFT):new ct(r.left+Q/2,r.top+r.height-I/2),this.topLeftBorderBox=i>0||a>0?Mn(r.left,r.top,i,a,fn.TOP_LEFT):new ct(r.left,r.top),this.topRightBorderBox=A>0||c>0?Mn(r.left+y,r.top,A,c,fn.TOP_RIGHT):new ct(r.left+r.width,r.top),this.bottomRightBorderBox=f>0||p>0?Mn(r.left+R,r.top+N,f,p,fn.BOTTOM_RIGHT):new ct(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=B>0||b>0?Mn(r.left,r.top+V,B,b,fn.BOTTOM_LEFT):new ct(r.left,r.top+r.height),this.topLeftPaddingBox=i>0||a>0?Mn(r.left+Q,r.top+j,Math.max(0,i-Q),Math.max(0,a-j),fn.TOP_LEFT):new ct(r.left+Q,r.top+j),this.topRightPaddingBox=A>0||c>0?Mn(r.left+Math.min(y,r.width-U),r.top+j,y>r.width+U?0:Math.max(0,A-U),Math.max(0,c-j),fn.TOP_RIGHT):new ct(r.left+r.width-U,r.top+j),this.bottomRightPaddingBox=f>0||p>0?Mn(r.left+Math.min(R,r.width-Q),r.top+Math.min(N,r.height-I),Math.max(0,f-U),Math.max(0,p-I),fn.BOTTOM_RIGHT):new ct(r.left+r.width-U,r.top+r.height-I),this.bottomLeftPaddingBox=B>0||b>0?Mn(r.left+Q,r.top+Math.min(V,r.height-I),Math.max(0,B-Q),Math.max(0,b-I),fn.BOTTOM_LEFT):new ct(r.left+Q,r.top+r.height-I),this.topLeftContentBox=i>0||a>0?Mn(r.left+Q+T,r.top+j+D,Math.max(0,i-(Q+T)),Math.max(0,a-(j+D)),fn.TOP_LEFT):new ct(r.left+Q+T,r.top+j+D),this.topRightContentBox=A>0||c>0?Mn(r.left+Math.min(y,r.width+Q+T),r.top+j+D,y>r.width+Q+T?0:A-Q+T,c-(j+D),fn.TOP_RIGHT):new ct(r.left+r.width-(U+S),r.top+j+D),this.bottomRightContentBox=f>0||p>0?Mn(r.left+Math.min(R,r.width-(Q+T)),r.top+Math.min(N,r.height+j+D),Math.max(0,f-(U+S)),p-(I+_),fn.BOTTOM_RIGHT):new ct(r.left+r.width-(U+S),r.top+r.height-(I+_)),this.bottomLeftContentBox=B>0||b>0?Mn(r.left+Q+T,r.top+V,Math.max(0,B-(Q+T)),b-(I+_),fn.BOTTOM_LEFT):new ct(r.left+Q+T,r.top+r.height-(I+_))}return t}(),fn;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(fn||(fn={}));var Mn=function(t,e,n,r,s){var i=4*((Math.sqrt(2)-1)/3),a=n*i,o=r*i,A=t+n,c=e+r;switch(s){case fn.TOP_LEFT:return new rg(new ct(t,c),new ct(t,c-o),new ct(A-a,e),new ct(A,e));case fn.TOP_RIGHT:return new rg(new ct(t,e),new ct(t+a,e),new ct(A,c-o),new ct(A,c));case fn.BOTTOM_RIGHT:return new rg(new ct(A,e),new ct(A,e+o),new ct(t+a,c),new ct(t,c));case fn.BOTTOM_LEFT:default:return new rg(new ct(A,c),new ct(A-a,c),new ct(t,e+o),new ct(t,e))}},q0=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},_q=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},z0=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},Iq=function(){function t(e,n,r){this.offsetX=e,this.offsetY=n,this.matrix=r,this.type=0,this.target=6}return t}(),sg=function(){function t(e,n){this.path=e,this.target=n,this.type=1}return t}(),Nq=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),Sq=function(t){return t.type===0},t3=function(t){return t.type===1},Fq=function(t){return t.type===2},q_=function(t,e){return t.length===e.length?t.some(function(n,r){return n===e[r]}):!1},Tq=function(t,e,n,r,s){return t.map(function(i,a){switch(a){case 0:return i.add(e,n);case 1:return i.add(e+r,n);case 2:return i.add(e+r,n+s);case 3:return i.add(e,n+s)}return i})},n3=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),r3=function(){function t(e,n){if(this.container=e,this.parent=n,this.effects=[],this.curves=new Eq(this.container),this.container.styles.opacity<1&&this.effects.push(new Nq(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new Iq(r,s,i))}if(this.container.styles.overflowX!==0){var a=q0(this.curves),o=z0(this.curves);q_(a,o)?this.effects.push(new sg(a,6)):(this.effects.push(new sg(a,2)),this.effects.push(new sg(o,4)))}}return t.prototype.getEffects=function(e){for(var n=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,s=this.effects.slice(0);r;){var i=r.effects.filter(function(A){return!t3(A)});if(n||r.container.styles.position!==0||!r.parent){if(s.unshift.apply(s,i),n=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var a=q0(r.curves),o=z0(r.curves);q_(a,o)||s.unshift(new sg(o,6))}}else s.unshift.apply(s,i);r=r.parent}return s.filter(function(A){return Sr(A.target,e)})},t}(),V2=function(t,e,n,r){t.container.elements.forEach(function(s){var i=Sr(s.flags,4),a=Sr(s.flags,2),o=new r3(s,t);Sr(s.styles.display,2048)&&r.push(o);var A=Sr(s.flags,8)?[]:r;if(i||a){var c=i||s.styles.isPositioned()?n:e,d=new n3(o);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var f=s.styles.zIndex.order;if(f<0){var p=0;c.negativeZIndex.some(function(B,b){return f>B.element.container.styles.zIndex.order?(p=b,!1):p>0}),c.negativeZIndex.splice(p,0,d)}else if(f>0){var g=0;c.positiveZIndex.some(function(B,b){return f>=B.element.container.styles.zIndex.order?(g=b+1,!1):g>0}),c.positiveZIndex.splice(g,0,d)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else s.styles.isFloating()?c.nonPositionedFloats.push(d):c.nonPositionedInlineLevel.push(d);V2(o,d,i?d:n,A)}else s.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),V2(o,e,n,A);Sr(s.flags,8)&&s3(s,A)})},s3=function(t,e){for(var n=t instanceof D2?t.start:1,r=t instanceof D2?t.reversed:!1,s=0;s<e.length;s++){var i=e[s];i.container instanceof MU&&typeof i.container.value=="number"&&i.container.value!==0&&(n=i.container.value),i.listValue=hp(n,i.container.styles.listStyleType,!0),n+=r?-1:1}},Uq=function(t){var e=new r3(t,null),n=new n3(e),r=[];return V2(e,n,n,r),s3(e.container,r),n},z_=function(t,e){switch(e){case 0:return Ti(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Ti(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Ti(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Ti(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},Qq=function(t,e){switch(e){case 0:return Ti(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Ti(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Ti(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Ti(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},Pq=function(t,e){switch(e){case 0:return Ti(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Ti(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Ti(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Ti(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},Lq=function(t,e){switch(e){case 0:return ig(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return ig(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return ig(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return ig(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},ig=function(t,e){var n=[];return Ii(t)?n.push(t.subdivide(.5,!1)):n.push(t),Ii(e)?n.push(e.subdivide(.5,!0)):n.push(e),n},Ti=function(t,e,n,r){var s=[];return Ii(t)?s.push(t.subdivide(.5,!1)):s.push(t),Ii(n)?s.push(n.subdivide(.5,!0)):s.push(n),Ii(r)?s.push(r.subdivide(.5,!0).reverse()):s.push(r),Ii(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},i3=function(t){var e=t.bounds,n=t.styles;return e.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},W0=function(t){var e=t.styles,n=t.bounds,r=Un(e.paddingLeft,n.width),s=Un(e.paddingRight,n.width),i=Un(e.paddingTop,n.width),a=Un(e.paddingBottom,n.width);return n.add(r+e.borderLeftWidth,i+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+s),-(e.borderTopWidth+e.borderBottomWidth+i+a))},Rq=function(t,e){return t===0?e.bounds:t===2?W0(e):i3(e)},kq=function(t,e){return t===0?e.bounds:t===2?W0(e):i3(e)},Py=function(t,e,n){var r=Rq(Hu(t.styles.backgroundOrigin,e),t),s=kq(Hu(t.styles.backgroundClip,e),t),i=Dq(Hu(t.styles.backgroundSize,e),n,r),a=i[0],o=i[1],A=ef(Hu(t.styles.backgroundPosition,e),r.width-a,r.height-o),c=jq(Hu(t.styles.backgroundRepeat,e),A,i,r,s),d=Math.round(r.left+A[0]),f=Math.round(r.top+A[1]);return[c,d,f,a,o]},Nu=function(t){return En(t)&&t.value===pd.AUTO},ag=function(t){return typeof t=="number"},Dq=function(t,e,n){var r=e[0],s=e[1],i=e[2],a=t[0],o=t[1];if(!a)return[0,0];if(br(a)&&o&&br(o))return[Un(a,n.width),Un(o,n.height)];var A=ag(i);if(En(a)&&(a.value===pd.CONTAIN||a.value===pd.COVER)){if(ag(i)){var c=n.width/n.height;return c<i!=(a.value===pd.COVER)?[n.width,n.width/i]:[n.height*i,n.height]}return[n.width,n.height]}var d=ag(r),f=ag(s),p=d||f;if(Nu(a)&&(!o||Nu(o))){if(d&&f)return[r,s];if(!A&&!p)return[n.width,n.height];if(p&&A){var g=d?r:s*i,B=f?s:r/i;return[g,B]}var b=d?r:n.width,C=f?s:n.height;return[b,C]}if(A){var w=0,y=0;return br(a)?w=Un(a,n.width):br(o)&&(y=Un(o,n.height)),Nu(a)?w=y*i:(!o||Nu(o))&&(y=w/i),[w,y]}var N=null,R=null;if(br(a)?N=Un(a,n.width):o&&br(o)&&(R=Un(o,n.height)),N!==null&&(!o||Nu(o))&&(R=d&&f?N/r*s:n.height),R!==null&&Nu(a)&&(N=d&&f?R/s*r:n.width),N!==null&&R!==null)return[N,R];throw new Error("Unable to calculate background-size for element")},Hu=function(t,e){var n=t[e];return typeof n>"u"?t[0]:n},jq=function(t,e,n,r,s){var i=e[0],a=e[1],o=n[0],A=n[1];switch(t){case 2:return[new ct(Math.round(r.left),Math.round(r.top+a)),new ct(Math.round(r.left+r.width),Math.round(r.top+a)),new ct(Math.round(r.left+r.width),Math.round(A+r.top+a)),new ct(Math.round(r.left),Math.round(A+r.top+a))];case 3:return[new ct(Math.round(r.left+i),Math.round(r.top)),new ct(Math.round(r.left+i+o),Math.round(r.top)),new ct(Math.round(r.left+i+o),Math.round(r.height+r.top)),new ct(Math.round(r.left+i),Math.round(r.height+r.top))];case 1:return[new ct(Math.round(r.left+i),Math.round(r.top+a)),new ct(Math.round(r.left+i+o),Math.round(r.top+a)),new ct(Math.round(r.left+i+o),Math.round(r.top+a+A)),new ct(Math.round(r.left+i),Math.round(r.top+a+A))];default:return[new ct(Math.round(s.left),Math.round(s.top)),new ct(Math.round(s.left+s.width),Math.round(s.top)),new ct(Math.round(s.left+s.width),Math.round(s.height+s.top)),new ct(Math.round(s.left),Math.round(s.height+s.top))]}},Oq="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",W_="Hidden Text",Mq=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,n){var r=this._document.createElement("div"),s=this._document.createElement("img"),i=this._document.createElement("span"),a=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=n,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",a.appendChild(r),s.src=Oq,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",i.style.fontFamily=e,i.style.fontSize=n,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(W_)),r.appendChild(i),r.appendChild(s);var o=s.offsetTop-i.offsetTop+2;r.removeChild(i),r.appendChild(this._document.createTextNode(W_)),r.style.lineHeight="normal",s.style.verticalAlign="super";var A=s.offsetTop-r.offsetTop+2;return a.removeChild(r),{baseline:o,middle:A}},t.prototype.getMetrics=function(e,n){var r=e+" "+n;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,n)),this._data[r]},t}(),a3=function(){function t(e,n){this.context=e,this.options=n}return t}(),Hq=1e4,Vq=function(t){ca(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s._activeEffects=[],s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),r.canvas||(s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px"),s.fontMetrics=new Mq(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),s}return e.prototype.applyEffects=function(n){for(var r=this;this._activeEffects.length;)this.popEffect();n.forEach(function(s){return r.applyEffect(s)})},e.prototype.applyEffect=function(n){this.ctx.save(),Fq(n)&&(this.ctx.globalAlpha=n.opacity),Sq(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),t3(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(n){return Ns(this,void 0,void 0,function(){var r;return gs(this,function(s){switch(s.label){case 0:return r=n.element.container.styles,r.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(n){return Ns(this,void 0,void 0,function(){return gs(this,function(r){switch(r.label){case 0:if(Sr(n.container.flags,16))debugger;return n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(n)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(n,r,s){var i=this;if(r===0)this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+s);else{var a=lb(n.text);a.reduce(function(o,A){return i.ctx.fillText(A,o,n.bounds.top+s),o+i.ctx.measureText(A).width},n.bounds.left)}},e.prototype.createFontStyle=function(n){var r=n.fontVariant.filter(function(a){return a==="normal"||a==="small-caps"}).join(""),s=Wq(n.fontFamily).join(", "),i=Hp(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,r,n.fontWeight,i,s].join(" "),s,i]},e.prototype.renderTextNode=function(n,r){return Ns(this,void 0,void 0,function(){var s,i,a,o,A,c,d,f,p=this;return gs(this,function(g){return s=this.createFontStyle(r),i=s[0],a=s[1],o=s[2],this.ctx.font=i,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",A=this.fontMetrics.getMetrics(a,o),c=A.baseline,d=A.middle,f=r.paintOrder,n.textBounds.forEach(function(B){f.forEach(function(b){switch(b){case 0:p.ctx.fillStyle=Or(r.color),p.renderTextWithLetterSpacing(B,r.letterSpacing,c);var C=r.textShadow;C.length&&B.text.trim().length&&(C.slice(0).reverse().forEach(function(w){p.ctx.shadowColor=Or(w.color),p.ctx.shadowOffsetX=w.offsetX.number*p.options.scale,p.ctx.shadowOffsetY=w.offsetY.number*p.options.scale,p.ctx.shadowBlur=w.blur.number,p.renderTextWithLetterSpacing(B,r.letterSpacing,c)}),p.ctx.shadowColor="",p.ctx.shadowOffsetX=0,p.ctx.shadowOffsetY=0,p.ctx.shadowBlur=0),r.textDecorationLine.length&&(p.ctx.fillStyle=Or(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(w){switch(w){case 1:p.ctx.fillRect(B.bounds.left,Math.round(B.bounds.top+c),B.bounds.width,1);break;case 2:p.ctx.fillRect(B.bounds.left,Math.round(B.bounds.top),B.bounds.width,1);break;case 3:p.ctx.fillRect(B.bounds.left,Math.ceil(B.bounds.top+d),B.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&B.text.trim().length&&(p.ctx.strokeStyle=Or(r.webkitTextStrokeColor),p.ctx.lineWidth=r.webkitTextStrokeWidth,p.ctx.lineJoin=window.chrome?"miter":"round",p.ctx.strokeText(B.text,B.bounds.left,B.bounds.top+c)),p.ctx.strokeStyle="",p.ctx.lineWidth=0,p.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(n,r,s){if(s&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var i=W0(n),a=z0(r);this.path(a),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,n.intrinsicWidth,n.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(n){return Ns(this,void 0,void 0,function(){var r,s,i,a,o,A,y,y,c,d,f,p,R,g,B,V,b,C,w,y,N,R,V;return gs(this,function(j){switch(j.label){case 0:this.applyEffects(n.getEffects(4)),r=n.container,s=n.curves,i=r.styles,a=0,o=r.textNodes,j.label=1;case 1:return a<o.length?(A=o[a],[4,this.renderTextNode(A,i)]):[3,4];case 2:j.sent(),j.label=3;case 3:return a++,[3,1];case 4:if(!(r instanceof DU))return[3,8];j.label=5;case 5:return j.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return y=j.sent(),this.renderReplacedElement(r,s,y),[3,8];case 7:return j.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof jU&&this.renderReplacedElement(r,s,r.canvas),!(r instanceof OU))return[3,12];j.label=9;case 9:return j.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return y=j.sent(),this.renderReplacedElement(r,s,y),[3,12];case 11:return j.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof KU&&r.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,c.render(r.tree)]):[3,14];case 13:d=j.sent(),r.width&&r.height&&this.ctx.drawImage(d,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),j.label=14;case 14:if(r instanceof cb&&(f=Math.min(r.bounds.width,r.bounds.height),r.type===H0?r.checked&&(this.ctx.save(),this.path([new ct(r.bounds.left+f*.39363,r.bounds.top+f*.79),new ct(r.bounds.left+f*.16,r.bounds.top+f*.5549),new ct(r.bounds.left+f*.27347,r.bounds.top+f*.44071),new ct(r.bounds.left+f*.39694,r.bounds.top+f*.5649),new ct(r.bounds.left+f*.72983,r.bounds.top+f*.23),new ct(r.bounds.left+f*.84,r.bounds.top+f*.34085),new ct(r.bounds.left+f*.39363,r.bounds.top+f*.79)]),this.ctx.fillStyle=Or(L_),this.ctx.fill(),this.ctx.restore()):r.type===V0&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+f/2,r.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=Or(L_),this.ctx.fill(),this.ctx.restore())),Kq(r)&&r.value.length){switch(p=this.createFontStyle(i),R=p[0],g=p[1],B=this.fontMetrics.getMetrics(R,g).baseline,this.ctx.font=R,this.ctx.fillStyle=Or(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=qq(r.styles.textAlign),V=W0(r),b=0,r.styles.textAlign){case 1:b+=V.width/2;break;case 2:b+=V.width;break}C=V.add(b,0,0,-V.height/2+1),this.ctx.save(),this.path([new ct(V.left,V.top),new ct(V.left+V.width,V.top),new ct(V.left+V.width,V.top+V.height),new ct(V.left,V.top+V.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new bf(r.value,C),i.letterSpacing,B),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Sr(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(w=r.styles.listStyleImage,w.type!==0)return[3,18];y=void 0,N=w.url,j.label=15;case 15:return j.trys.push([15,17,,18]),[4,this.context.cache.match(N)];case 16:return y=j.sent(),this.ctx.drawImage(y,r.bounds.left-(y.width+10),r.bounds.top),[3,18];case 17:return j.sent(),this.context.logger.error("Error loading list-style-image "+N),[3,18];case 18:return[3,20];case 19:n.listValue&&r.styles.listStyleType!==-1&&(R=this.createFontStyle(i)[0],this.ctx.font=R,this.ctx.fillStyle=Or(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",V=new Oo(r.bounds.left,r.bounds.top+Un(r.styles.paddingTop,r.bounds.width),r.bounds.width,w_(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new bf(n.listValue,V),i.letterSpacing,w_(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),j.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(n){return Ns(this,void 0,void 0,function(){var r,s,w,i,a,w,o,A,w,c,d,w,f,p,w,g,B,w,b,C,w;return gs(this,function(y){switch(y.label){case 0:if(Sr(n.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:y.sent(),r=0,s=n.negativeZIndex,y.label=2;case 2:return r<s.length?(w=s[r],[4,this.renderStack(w)]):[3,5];case 3:y.sent(),y.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:y.sent(),i=0,a=n.nonInlineLevel,y.label=7;case 7:return i<a.length?(w=a[i],[4,this.renderNode(w)]):[3,10];case 8:y.sent(),y.label=9;case 9:return i++,[3,7];case 10:o=0,A=n.nonPositionedFloats,y.label=11;case 11:return o<A.length?(w=A[o],[4,this.renderStack(w)]):[3,14];case 12:y.sent(),y.label=13;case 13:return o++,[3,11];case 14:c=0,d=n.nonPositionedInlineLevel,y.label=15;case 15:return c<d.length?(w=d[c],[4,this.renderStack(w)]):[3,18];case 16:y.sent(),y.label=17;case 17:return c++,[3,15];case 18:f=0,p=n.inlineLevel,y.label=19;case 19:return f<p.length?(w=p[f],[4,this.renderNode(w)]):[3,22];case 20:y.sent(),y.label=21;case 21:return f++,[3,19];case 22:g=0,B=n.zeroOrAutoZIndexOrTransformedOrOpacity,y.label=23;case 23:return g<B.length?(w=B[g],[4,this.renderStack(w)]):[3,26];case 24:y.sent(),y.label=25;case 25:return g++,[3,23];case 26:b=0,C=n.positiveZIndex,y.label=27;case 27:return b<C.length?(w=C[b],[4,this.renderStack(w)]):[3,30];case 28:y.sent(),y.label=29;case 29:return b++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},e.prototype.formatPath=function(n){var r=this;n.forEach(function(s,i){var a=Ii(s)?s.start:s;i===0?r.ctx.moveTo(a.x,a.y):r.ctx.lineTo(a.x,a.y),Ii(s)&&r.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(n,r,s,i){this.path(n),this.ctx.fillStyle=r,this.ctx.translate(s,i),this.ctx.fill(),this.ctx.translate(-s,-i)},e.prototype.resizeImage=function(n,r,s){var i;if(n.width===r&&n.height===s)return n;var a=(i=this.canvas.ownerDocument)!==null&&i!==void 0?i:document,o=a.createElement("canvas");o.width=Math.max(1,r),o.height=Math.max(1,s);var A=o.getContext("2d");return A.drawImage(n,0,0,n.width,n.height,0,0,r,s),o},e.prototype.renderBackgroundImage=function(n){return Ns(this,void 0,void 0,function(){var r,s,i,a,o,A;return gs(this,function(c){switch(c.label){case 0:r=n.styles.backgroundImage.length-1,s=function(d){var f,p,g,D,le,se,T,K,I,B,D,le,se,T,K,b,C,w,y,N,R,V,j,U,I,Q,D,S,_,T,K,oe,le,se,z,Ae,ee,we,k,X,Z,H;return gs(this,function(Y){switch(Y.label){case 0:if(d.type!==0)return[3,5];f=void 0,p=d.url,Y.label=1;case 1:return Y.trys.push([1,3,,4]),[4,i.context.cache.match(p)];case 2:return f=Y.sent(),[3,4];case 3:return Y.sent(),i.context.logger.error("Error loading background-image "+p),[3,4];case 4:return f&&(g=Py(n,r,[f.width,f.height,f.width/f.height]),D=g[0],le=g[1],se=g[2],T=g[3],K=g[4],I=i.ctx.createPattern(i.resizeImage(f,T,K),"repeat"),i.renderRepeat(D,I,le,se)),[3,6];case 5:S9(d)?(B=Py(n,r,[null,null,null]),D=B[0],le=B[1],se=B[2],T=B[3],K=B[4],b=C9(d.angle,T,K),C=b[0],w=b[1],y=b[2],N=b[3],R=b[4],V=document.createElement("canvas"),V.width=T,V.height=K,j=V.getContext("2d"),U=j.createLinearGradient(w,N,y,R),m_(d.stops,C).forEach(function(ue){return U.addColorStop(ue.stop,Or(ue.color))}),j.fillStyle=U,j.fillRect(0,0,T,K),T>0&&K>0&&(I=i.ctx.createPattern(V,"repeat"),i.renderRepeat(D,I,le,se))):F9(d)&&(Q=Py(n,r,[null,null,null]),D=Q[0],S=Q[1],_=Q[2],T=Q[3],K=Q[4],oe=d.position.length===0?[ab]:d.position,le=Un(oe[0],T),se=Un(oe[oe.length-1],K),z=E9(d,le,se,T,K),Ae=z[0],ee=z[1],Ae>0&&ee>0&&(we=i.ctx.createRadialGradient(S+le,_+se,0,S+le,_+se,Ae),m_(d.stops,Ae*2).forEach(function(ue){return we.addColorStop(ue.stop,Or(ue.color))}),i.path(D),i.ctx.fillStyle=we,Ae!==ee?(k=n.bounds.left+.5*n.bounds.width,X=n.bounds.top+.5*n.bounds.height,Z=ee/Ae,H=1/Z,i.ctx.save(),i.ctx.translate(k,X),i.ctx.transform(1,0,0,Z,0,0),i.ctx.translate(-k,-X),i.ctx.fillRect(S,H*(_-X)+X,T,K*H),i.ctx.restore()):i.ctx.fill())),Y.label=6;case 6:return r--,[2]}})},i=this,a=0,o=n.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return a<o.length?(A=o[a],[5,s(A)]):[3,4];case 2:c.sent(),c.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(n,r,s){return Ns(this,void 0,void 0,function(){return gs(this,function(i){return this.path(z_(s,r)),this.ctx.fillStyle=Or(n),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(n,r,s,i){return Ns(this,void 0,void 0,function(){var a,o;return gs(this,function(A){switch(A.label){case 0:return r<3?[4,this.renderSolidBorder(n,s,i)]:[3,2];case 1:return A.sent(),[2];case 2:return a=Qq(i,s),this.path(a),this.ctx.fillStyle=Or(n),this.ctx.fill(),o=Pq(i,s),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(n){return Ns(this,void 0,void 0,function(){var r,s,i,a,o,A,c,d,f=this;return gs(this,function(p){switch(p.label){case 0:return this.applyEffects(n.getEffects(2)),r=n.container.styles,s=!al(r.backgroundColor)||r.backgroundImage.length,i=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],a=Gq(Hu(r.backgroundClip,0),n.curves),s||r.boxShadow.length?(this.ctx.save(),this.path(a),this.ctx.clip(),al(r.backgroundColor)||(this.ctx.fillStyle=Or(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:p.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(g){f.ctx.save();var B=q0(n.curves),b=g.inset?0:Hq,C=Tq(B,-b+(g.inset?1:-1)*g.spread.number,(g.inset?1:-1)*g.spread.number,g.spread.number*(g.inset?-2:2),g.spread.number*(g.inset?-2:2));g.inset?(f.path(B),f.ctx.clip(),f.mask(C)):(f.mask(B),f.ctx.clip(),f.path(C)),f.ctx.shadowOffsetX=g.offsetX.number+b,f.ctx.shadowOffsetY=g.offsetY.number,f.ctx.shadowColor=Or(g.color),f.ctx.shadowBlur=g.blur.number,f.ctx.fillStyle=g.inset?Or(g.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),p.label=2;case 2:o=0,A=0,c=i,p.label=3;case 3:return A<c.length?(d=c[A],d.style!==0&&!al(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,n.curves,2)]:[3,11]):[3,13];case 4:return p.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,n.curves,3)];case 6:return p.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,n.curves)];case 8:return p.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,n.curves)];case 10:p.sent(),p.label=11;case 11:o++,p.label=12;case 12:return A++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(n,r,s,i,a){return Ns(this,void 0,void 0,function(){var o,A,c,d,f,p,g,B,b,C,w,y,N,R,V,j,V,j;return gs(this,function(U){return this.ctx.save(),o=Lq(i,s),A=z_(i,s),a===2&&(this.path(A),this.ctx.clip()),Ii(A[0])?(c=A[0].start.x,d=A[0].start.y):(c=A[0].x,d=A[0].y),Ii(A[1])?(f=A[1].end.x,p=A[1].end.y):(f=A[1].x,p=A[1].y),s===0||s===2?g=Math.abs(c-f):g=Math.abs(d-p),this.ctx.beginPath(),a===3?this.formatPath(o):this.formatPath(A.slice(0,2)),B=r<3?r*3:r*2,b=r<3?r*2:r,a===3&&(B=r,b=r),C=!0,g<=B*2?C=!1:g<=B*2+b?(w=g/(2*B+b),B*=w,b*=w):(y=Math.floor((g+b)/(B+b)),N=(g-y*B)/(y-1),R=(g-(y+1)*B)/y,b=R<=0||Math.abs(b-N)<Math.abs(b-R)?N:R),C&&(a===3?this.ctx.setLineDash([0,B+b]):this.ctx.setLineDash([B,b])),a===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=Or(n),this.ctx.stroke(),this.ctx.setLineDash([]),a===2&&(Ii(A[0])&&(V=A[3],j=A[0],this.ctx.beginPath(),this.formatPath([new ct(V.end.x,V.end.y),new ct(j.start.x,j.start.y)]),this.ctx.stroke()),Ii(A[1])&&(V=A[1],j=A[2],this.ctx.beginPath(),this.formatPath([new ct(V.end.x,V.end.y),new ct(j.start.x,j.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(n){return Ns(this,void 0,void 0,function(){var r;return gs(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Or(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=Uq(n),[4,this.renderStack(r)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(a3),Kq=function(t){return t instanceof VU||t instanceof HU?!0:t instanceof cb&&t.type!==V0&&t.type!==H0},Gq=function(t,e){switch(t){case 0:return q0(e);case 2:return _q(e);case 1:default:return z0(e)}},qq=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},zq=["-apple-system","system-ui"],Wq=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return zq.indexOf(e)===-1}):t},$q=function(t){ca(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=r,s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),s}return e.prototype.render=function(n){return Ns(this,void 0,void 0,function(){var r,s;return gs(this,function(i){switch(i.label){case 0:return r=k2(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,Xq(r)];case 1:return s=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Or(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(a3),Xq=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Jq=function(){function t(e){var n=e.id,r=e.enabled;this.id=n,this.enabled=r,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Dm([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Dm([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Dm([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Dm([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),Yq=function(){function t(e,n){var r;this.windowBounds=n,this.instanceName="#"+t.instanceCount++,this.logger=new Jq({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new wq(this,e)}return t.instanceCount=1,t}(),db=function(t,e){return e===void 0&&(e={}),Zq(t,e)};typeof window<"u"&&e3.setContext(window);var Zq=function(t,e){return Ns(void 0,void 0,void 0,function(){var n,r,s,i,a,o,A,c,d,f,p,g,B,b,C,w,y,N,R,V,U,j,U,I,Q,D,S,_,T,K,oe,le,se,z,Ae,ee,we,k,X,Z;return gs(this,function(H){switch(H.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(n=t.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(r=n.defaultView,!r)throw new Error("Document is not attached to a Window");return s={allowTaint:(I=e.allowTaint)!==null&&I!==void 0?I:!1,imageTimeout:(Q=e.imageTimeout)!==null&&Q!==void 0?Q:15e3,proxy:e.proxy,useCORS:(D=e.useCORS)!==null&&D!==void 0?D:!1},i=x2({logging:(S=e.logging)!==null&&S!==void 0?S:!0,cache:e.cache},s),a={windowWidth:(_=e.windowWidth)!==null&&_!==void 0?_:r.innerWidth,windowHeight:(T=e.windowHeight)!==null&&T!==void 0?T:r.innerHeight,scrollX:(K=e.scrollX)!==null&&K!==void 0?K:r.pageXOffset,scrollY:(oe=e.scrollY)!==null&&oe!==void 0?oe:r.pageYOffset},o=new Oo(a.scrollX,a.scrollY,a.windowWidth,a.windowHeight),A=new Yq(i,o),c=(le=e.foreignObjectRendering)!==null&&le!==void 0?le:!1,d={allowTaint:(se=e.allowTaint)!==null&&se!==void 0?se:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},A.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),f=new K_(A,t,d),p=f.clonedReferenceElement,p?[4,f.toIFrame(n,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return g=H.sent(),B=ub(p)||tq(p)?TV(p.ownerDocument):Jw(A,p),b=B.width,C=B.height,w=B.left,y=B.top,N=ez(A,p,e.backgroundColor),R={canvas:e.canvas,backgroundColor:N,scale:(Ae=(z=e.scale)!==null&&z!==void 0?z:r.devicePixelRatio)!==null&&Ae!==void 0?Ae:1,x:((ee=e.x)!==null&&ee!==void 0?ee:0)+w,y:((we=e.y)!==null&&we!==void 0?we:0)+y,width:(k=e.width)!==null&&k!==void 0?k:Math.ceil(b),height:(X=e.height)!==null&&X!==void 0?X:Math.ceil(C)},c?(A.logger.debug("Document cloned, using foreign object rendering"),U=new $q(A,R),[4,U.render(p)]):[3,3];case 2:return V=H.sent(),[3,5];case 3:return A.logger.debug("Document cloned, element located at "+w+","+y+" with size "+b+"x"+C+" using computed rendering"),A.logger.debug("Starting DOM parsing"),j=qU(A,p),N===j.styles.backgroundColor&&(j.styles.backgroundColor=Fo.TRANSPARENT),A.logger.debug("Starting renderer for element at "+R.x+","+R.y+" with size "+R.width+"x"+R.height),U=new Vq(A,R),[4,U.render(j)];case 4:V=H.sent(),H.label=5;case 5:return(!((Z=e.removeContainer)!==null&&Z!==void 0)||Z)&&(K_.destroy(g)||A.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),A.logger.debug("Finished rendering"),[2,V]}})})},ez=function(t,e,n){var r=e.ownerDocument,s=r.documentElement?Bf(t,getComputedStyle(r.documentElement).backgroundColor):Fo.TRANSPARENT,i=r.body?Bf(t,getComputedStyle(r.body).backgroundColor):Fo.TRANSPARENT,a=typeof n=="string"?Bf(t,n):n===null?Fo.TRANSPARENT:4294967295;return e===r.documentElement?al(s)?al(i)?a:i:s:a};const hb=Object.freeze(Object.defineProperty({__proto__:null,default:db},Symbol.toStringTag,{value:"Module"})),tz="modulepreload",nz=function(t){return"/"+t},$_={},To=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(A=>{if(A=nz(A),A in $_)return;$_[A]=!0;const c=A.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${A}"]${d}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":tz,c||(f.as="script"),f.crossOrigin="",f.href=A,o&&f.setAttribute("nonce",o),document.head.appendChild(f),c)return new Promise((p,g)=>{f.addEventListener("load",p),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${A}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})};function Bn(t){"@babel/helpers - typeof";return Bn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bn(t)}var Bs=Uint8Array,oi=Uint16Array,fb=Int32Array,ov=new Bs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Av=new Bs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),K2=new Bs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o3=function(t,e){for(var n=new oi(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var s=new fb(n[30]),r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)s[i]=i-n[r]<<5|r;return{b:n,r:s}},A3=o3(ov,2),l3=A3.b,G2=A3.r;l3[28]=258,G2[258]=28;var c3=o3(Av,0),rz=c3.b,X_=c3.r,q2=new oi(32768);for(var Dn=0;Dn<32768;++Dn){var bA=(Dn&43690)>>1|(Dn&21845)<<1;bA=(bA&52428)>>2|(bA&13107)<<2,bA=(bA&61680)>>4|(bA&3855)<<4,q2[Dn]=((bA&65280)>>8|(bA&255)<<8)>>1}var ja=function(t,e,n){for(var r=t.length,s=0,i=new oi(e);s<r;++s)t[s]&&++i[t[s]-1];var a=new oi(e);for(s=1;s<e;++s)a[s]=a[s-1]+i[s-1]<<1;var o;if(n){o=new oi(1<<e);var A=15-e;for(s=0;s<r;++s)if(t[s])for(var c=s<<4|t[s],d=e-t[s],f=a[t[s]-1]++<<d,p=f|(1<<d)-1;f<=p;++f)o[q2[f]>>A]=c}else for(o=new oi(r),s=0;s<r;++s)t[s]&&(o[s]=q2[a[t[s]-1]++]>>15-t[s]);return o},gl=new Bs(288);for(var Dn=0;Dn<144;++Dn)gl[Dn]=8;for(var Dn=144;Dn<256;++Dn)gl[Dn]=9;for(var Dn=256;Dn<280;++Dn)gl[Dn]=7;for(var Dn=280;Dn<288;++Dn)gl[Dn]=8;var fp=new Bs(32);for(var Dn=0;Dn<32;++Dn)fp[Dn]=5;var sz=ja(gl,9,0),iz=ja(gl,9,1),az=ja(fp,5,0),oz=ja(fp,5,1),Ly=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},zi=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},Ry=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},pb=function(t){return(t+7)/8|0},u3=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Bs(t.subarray(e,n))},Az=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Yi=function(t,e,n){var r=new Error(e||Az[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,Yi),!n)throw r;return r},lz=function(t,e,n,r){var s=t.length,i=0;if(!s||e.f&&!e.l)return n||new Bs(0);var a=!n,o=a||e.i!=2,A=e.i;a&&(n=new Bs(s*3));var c=function(Fe){var ne=n.length;if(Fe>ne){var ve=new Bs(Math.max(ne*2,Fe));ve.set(n),n=ve}},d=e.f||0,f=e.p||0,p=e.b||0,g=e.l,B=e.d,b=e.m,C=e.n,w=s*8;do{if(!g){d=zi(t,f,1);var y=zi(t,f+1,3);if(f+=3,y)if(y==1)g=iz,B=oz,b=9,C=5;else if(y==2){var j=zi(t,f,31)+257,U=zi(t,f+10,15)+4,I=j+zi(t,f+5,31)+1;f+=14;for(var Q=new Bs(I),D=new Bs(19),S=0;S<U;++S)D[K2[S]]=zi(t,f+S*3,7);f+=U*3;for(var _=Ly(D),T=(1<<_)-1,K=ja(D,_,1),S=0;S<I;){var oe=K[zi(t,f,T)];f+=oe&15;var N=oe>>4;if(N<16)Q[S++]=N;else{var le=0,se=0;for(N==16?(se=3+zi(t,f,3),f+=2,le=Q[S-1]):N==17?(se=3+zi(t,f,7),f+=3):N==18&&(se=11+zi(t,f,127),f+=7);se--;)Q[S++]=le}}var z=Q.subarray(0,j),Ae=Q.subarray(j);b=Ly(z),C=Ly(Ae),g=ja(z,b,1),B=ja(Ae,C,1)}else Yi(1);else{var N=pb(f)+4,R=t[N-4]|t[N-3]<<8,V=N+R;if(V>s){A&&Yi(0);break}o&&c(p+R),n.set(t.subarray(N,V),p),e.b=p+=R,e.p=f=V*8,e.f=d;continue}if(f>w){A&&Yi(0);break}}o&&c(p+131072);for(var ee=(1<<b)-1,we=(1<<C)-1,k=f;;k=f){var le=g[Ry(t,f)&ee],X=le>>4;if(f+=le&15,f>w){A&&Yi(0);break}if(le||Yi(2),X<256)n[p++]=X;else if(X==256){k=f,g=null;break}else{var Z=X-254;if(X>264){var S=X-257,H=ov[S];Z=zi(t,f,(1<<H)-1)+l3[S],f+=H}var Y=B[Ry(t,f)&we],ue=Y>>4;Y||Yi(3),f+=Y&15;var Ae=rz[ue];if(ue>3){var H=Av[ue];Ae+=Ry(t,f)&(1<<H)-1,f+=H}if(f>w){A&&Yi(0);break}o&&c(p+131072);var ie=p+Z;if(p<Ae){var ce=i-Ae,be=Math.min(Ae,ie);for(ce+p<0&&Yi(3);p<be;++p)n[p]=r[ce+p]}for(;p<ie;++p)n[p]=n[p-Ae]}}e.l=g,e.p=k,e.b=p,e.f=d,g&&(d=1,e.m=b,e.d=B,e.n=C)}while(!d);return p!=n.length&&a?u3(n,0,p):n.subarray(0,p)},uo=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Ph=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},ky=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var s=n.length,i=n.slice();if(!s)return{t:h3,l:0};if(s==1){var a=new Bs(n[0].s+1);return a[n[0].s]=1,{t:a,l:1}}n.sort(function(V,j){return V.f-j.f}),n.push({s:-1,f:25001});var o=n[0],A=n[1],c=0,d=1,f=2;for(n[0]={s:-1,f:o.f+A.f,l:o,r:A};d!=s-1;)o=n[n[c].f<n[f].f?c++:f++],A=n[c!=d&&n[c].f<n[f].f?c++:f++],n[d++]={s:-1,f:o.f+A.f,l:o,r:A};for(var p=i[0].s,r=1;r<s;++r)i[r].s>p&&(p=i[r].s);var g=new oi(p+1),B=z2(n[d-1],g,0);if(B>e){var r=0,b=0,C=B-e,w=1<<C;for(i.sort(function(j,U){return g[U.s]-g[j.s]||j.f-U.f});r<s;++r){var y=i[r].s;if(g[y]>e)b+=w-(1<<B-g[y]),g[y]=e;else break}for(b>>=C;b>0;){var N=i[r].s;g[N]<e?b-=1<<e-g[N]++-1:++r}for(;r>=0&&b;--r){var R=i[r].s;g[R]==e&&(--g[R],++b)}B=e}return{t:new Bs(g),l:B}},z2=function(t,e,n){return t.s==-1?Math.max(z2(t.l,e,n+1),z2(t.r,e,n+1)):e[t.s]=n},J_=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new oi(++e),r=0,s=t[0],i=1,a=function(A){n[r++]=A},o=1;o<=e;++o)if(t[o]==s&&o!=e)++i;else{if(!s&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(s),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(s);i=1,s=t[o]}return{c:n.subarray(0,r),n:e}},Lh=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},d3=function(t,e,n){var r=n.length,s=pb(e+2);t[s]=r&255,t[s+1]=r>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var i=0;i<r;++i)t[s+i+4]=n[i];return(s+4+r)*8},Y_=function(t,e,n,r,s,i,a,o,A,c,d){uo(e,d++,n),++s[256];for(var f=ky(s,15),p=f.t,g=f.l,B=ky(i,15),b=B.t,C=B.l,w=J_(p),y=w.c,N=w.n,R=J_(b),V=R.c,j=R.n,U=new oi(19),I=0;I<y.length;++I)++U[y[I]&31];for(var I=0;I<V.length;++I)++U[V[I]&31];for(var Q=ky(U,7),D=Q.t,S=Q.l,_=19;_>4&&!D[K2[_-1]];--_);var T=c+5<<3,K=Lh(s,gl)+Lh(i,fp)+a,oe=Lh(s,p)+Lh(i,b)+a+14+3*_+Lh(U,D)+2*U[16]+3*U[17]+7*U[18];if(A>=0&&T<=K&&T<=oe)return d3(e,d,t.subarray(A,A+c));var le,se,z,Ae;if(uo(e,d,1+(oe<K)),d+=2,oe<K){le=ja(p,g,0),se=p,z=ja(b,C,0),Ae=b;var ee=ja(D,S,0);uo(e,d,N-257),uo(e,d+5,j-1),uo(e,d+10,_-4),d+=14;for(var I=0;I<_;++I)uo(e,d+3*I,D[K2[I]]);d+=3*_;for(var we=[y,V],k=0;k<2;++k)for(var X=we[k],I=0;I<X.length;++I){var Z=X[I]&31;uo(e,d,ee[Z]),d+=D[Z],Z>15&&(uo(e,d,X[I]>>5&127),d+=X[I]>>12)}}else le=sz,se=gl,z=az,Ae=fp;for(var I=0;I<o;++I){var H=r[I];if(H>255){var Z=H>>18&31;Ph(e,d,le[Z+257]),d+=se[Z+257],Z>7&&(uo(e,d,H>>23&31),d+=ov[Z]);var Y=H&31;Ph(e,d,z[Y]),d+=Ae[Y],Y>3&&(Ph(e,d,H>>5&8191),d+=Av[Y])}else Ph(e,d,le[H]),d+=se[H]}return Ph(e,d,le[256]),d+se[256]},cz=new fb([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),h3=new Bs(0),uz=function(t,e,n,r,s,i){var a=i.z||t.length,o=new Bs(r+a+5*(1+Math.ceil(a/7e3))+s),A=o.subarray(r,o.length-s),c=i.l,d=(i.r||0)&7;if(e){d&&(A[0]=i.r>>3);for(var f=cz[e-1],p=f>>13,g=f&8191,B=(1<<n)-1,b=i.p||new oi(32768),C=i.h||new oi(B+1),w=Math.ceil(n/3),y=2*w,N=function(Re){return(t[Re]^t[Re+1]<<w^t[Re+2]<<y)&B},R=new fb(25e3),V=new oi(288),j=new oi(32),U=0,I=0,Q=i.i||0,D=0,S=i.w||0,_=0;Q+2<a;++Q){var T=N(Q),K=Q&32767,oe=C[T];if(b[K]=oe,C[T]=K,S<=Q){var le=a-Q;if((U>7e3||D>24576)&&(le>423||!c)){d=Y_(t,A,0,R,V,j,I,D,_,Q-_,d),D=U=I=0,_=Q;for(var se=0;se<286;++se)V[se]=0;for(var se=0;se<30;++se)j[se]=0}var z=2,Ae=0,ee=g,we=K-oe&32767;if(le>2&&T==N(Q-we))for(var k=Math.min(p,le)-1,X=Math.min(32767,Q),Z=Math.min(258,le);we<=X&&--ee&&K!=oe;){if(t[Q+z]==t[Q+z-we]){for(var H=0;H<Z&&t[Q+H]==t[Q+H-we];++H);if(H>z){if(z=H,Ae=we,H>k)break;for(var Y=Math.min(we,H-2),ue=0,se=0;se<Y;++se){var ie=Q-we+se&32767,ce=b[ie],be=ie-ce&32767;be>ue&&(ue=be,oe=ie)}}}K=oe,oe=b[K],we+=K-oe&32767}if(Ae){R[D++]=268435456|G2[z]<<18|X_[Ae];var Fe=G2[z]&31,ne=X_[Ae]&31;I+=ov[Fe]+Av[ne],++V[257+Fe],++j[ne],S=Q+z,++U}else R[D++]=t[Q],++V[t[Q]]}}for(Q=Math.max(Q,S);Q<a;++Q)R[D++]=t[Q],++V[t[Q]];d=Y_(t,A,c,R,V,j,I,D,_,Q-_,d),c||(i.r=d&7|A[d/8|0]<<3,d-=7,i.h=C,i.p=b,i.i=Q,i.w=S)}else{for(var Q=i.w||0;Q<a+c;Q+=65535){var ve=Q+65535;ve>=a&&(A[d/8|0]=c,ve=a),d=d3(A,d+1,t.subarray(Q,ve))}i.i=a}return u3(o,0,r+pb(d)+s)},f3=function(){var t=1,e=0;return{p:function(n){for(var r=t,s=e,i=n.length|0,a=0;a!=i;){for(var o=Math.min(a+2655,i);a<o;++a)s+=r+=n[a];r=(r&65535)+15*(r>>16),s=(s&65535)+15*(s>>16)}t=r,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},dz=function(t,e,n,r,s){if(!s&&(s={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),a=new Bs(i.length+t.length);a.set(i),a.set(t,i.length),t=a,s.w=i.length}return uz(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,s)},p3=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},hz=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=f3();s.p(e.dictionary),p3(t,2,s.d())}},fz=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Yi(6,"invalid zlib data"),(t[1]>>5&1)==1&&Yi(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function W2(t,e){e||(e={});var n=f3();n.p(t);var r=dz(t,e,e.dictionary?6:2,4);return hz(r,e),p3(r,r.length-4,n.d()),r}function pz(t,e){return lz(t.subarray(fz(t),-4),{i:2},e,e)}var mz=typeof TextDecoder<"u"&&new TextDecoder,gz=0;try{mz.decode(h3,{stream:!0}),gz=1}catch{}var Pt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Dy(){Pt.console&&typeof Pt.console.log=="function"&&Pt.console.log.apply(Pt.console,arguments)}var Sn={log:Dy,warn:function(t){Pt.console&&(typeof Pt.console.warn=="function"?Pt.console.warn.apply(Pt.console,arguments):Dy.call(null,arguments))},error:function(t){Pt.console&&(typeof Pt.console.error=="function"?Pt.console.error.apply(Pt.console,arguments):Dy(t))}};function jy(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){nc(r.response,e,n)},r.onerror=function(){Sn.error("could not download file")},r.send()}function Z_(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function og(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Ef,$2,nc=Pt.saveAs||((typeof window>"u"?"undefined":Bn(window))!=="object"||window!==Pt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Pt.URL||Pt.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?Z_(s.href)?jy(t,e,n):og(s,s.target="_blank"):og(s)):(s.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){og(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(Z_(t))jy(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){og(r)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:Bn(i)!=="object"&&(Sn.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return jy(t,e,n);var s=t.type==="application/octet-stream",i=/constructor/i.test(Pt.HTMLElement)||Pt.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||s&&i)&&(typeof FileReader>"u"?"undefined":Bn(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=a?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},o.readAsDataURL(t)}else{var A=Pt.URL||Pt.webkitURL,c=A.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){A.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function m3(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],r=0;r<n.length;r++){var s=n[r].re,i=n[r].process,a=s.exec(t);a&&(e=i(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),A=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),A.length==1&&(A="0"+A),c.length==1&&(c="0"+c),"#"+o+A+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Oy(t,e){var n=t[0],r=t[1],s=t[2],i=t[3];n=hs(n,r,s,i,e[0],7,-680876936),i=hs(i,n,r,s,e[1],12,-389564586),s=hs(s,i,n,r,e[2],17,606105819),r=hs(r,s,i,n,e[3],22,-1044525330),n=hs(n,r,s,i,e[4],7,-176418897),i=hs(i,n,r,s,e[5],12,1200080426),s=hs(s,i,n,r,e[6],17,-1473231341),r=hs(r,s,i,n,e[7],22,-45705983),n=hs(n,r,s,i,e[8],7,1770035416),i=hs(i,n,r,s,e[9],12,-1958414417),s=hs(s,i,n,r,e[10],17,-42063),r=hs(r,s,i,n,e[11],22,-1990404162),n=hs(n,r,s,i,e[12],7,1804603682),i=hs(i,n,r,s,e[13],12,-40341101),s=hs(s,i,n,r,e[14],17,-1502002290),n=fs(n,r=hs(r,s,i,n,e[15],22,1236535329),s,i,e[1],5,-165796510),i=fs(i,n,r,s,e[6],9,-1069501632),s=fs(s,i,n,r,e[11],14,643717713),r=fs(r,s,i,n,e[0],20,-373897302),n=fs(n,r,s,i,e[5],5,-701558691),i=fs(i,n,r,s,e[10],9,38016083),s=fs(s,i,n,r,e[15],14,-660478335),r=fs(r,s,i,n,e[4],20,-405537848),n=fs(n,r,s,i,e[9],5,568446438),i=fs(i,n,r,s,e[14],9,-1019803690),s=fs(s,i,n,r,e[3],14,-187363961),r=fs(r,s,i,n,e[8],20,1163531501),n=fs(n,r,s,i,e[13],5,-1444681467),i=fs(i,n,r,s,e[2],9,-51403784),s=fs(s,i,n,r,e[7],14,1735328473),n=ps(n,r=fs(r,s,i,n,e[12],20,-1926607734),s,i,e[5],4,-378558),i=ps(i,n,r,s,e[8],11,-2022574463),s=ps(s,i,n,r,e[11],16,1839030562),r=ps(r,s,i,n,e[14],23,-35309556),n=ps(n,r,s,i,e[1],4,-1530992060),i=ps(i,n,r,s,e[4],11,1272893353),s=ps(s,i,n,r,e[7],16,-155497632),r=ps(r,s,i,n,e[10],23,-1094730640),n=ps(n,r,s,i,e[13],4,681279174),i=ps(i,n,r,s,e[0],11,-358537222),s=ps(s,i,n,r,e[3],16,-722521979),r=ps(r,s,i,n,e[6],23,76029189),n=ps(n,r,s,i,e[9],4,-640364487),i=ps(i,n,r,s,e[12],11,-421815835),s=ps(s,i,n,r,e[15],16,530742520),n=ms(n,r=ps(r,s,i,n,e[2],23,-995338651),s,i,e[0],6,-198630844),i=ms(i,n,r,s,e[7],10,1126891415),s=ms(s,i,n,r,e[14],15,-1416354905),r=ms(r,s,i,n,e[5],21,-57434055),n=ms(n,r,s,i,e[12],6,1700485571),i=ms(i,n,r,s,e[3],10,-1894986606),s=ms(s,i,n,r,e[10],15,-1051523),r=ms(r,s,i,n,e[1],21,-2054922799),n=ms(n,r,s,i,e[8],6,1873313359),i=ms(i,n,r,s,e[15],10,-30611744),s=ms(s,i,n,r,e[6],15,-1560198380),r=ms(r,s,i,n,e[13],21,1309151649),n=ms(n,r,s,i,e[4],6,-145523070),i=ms(i,n,r,s,e[11],10,-1120210379),s=ms(s,i,n,r,e[2],15,718787259),r=ms(r,s,i,n,e[9],21,-343485551),t[0]=qA(n,t[0]),t[1]=qA(r,t[1]),t[2]=qA(s,t[2]),t[3]=qA(i,t[3])}function lv(t,e,n,r,s,i){return e=qA(qA(e,t),qA(r,i)),qA(e<<s|e>>>32-s,n)}function hs(t,e,n,r,s,i,a){return lv(e&n|~e&r,t,e,s,i,a)}function fs(t,e,n,r,s,i,a){return lv(e&r|n&~r,t,e,s,i,a)}function ps(t,e,n,r,s,i,a){return lv(e^n^r,t,e,s,i,a)}function ms(t,e,n,r,s,i,a){return lv(n^(e|~r),t,e,s,i,a)}function g3(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)Oy(r,wz(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(Oy(r,s),e=0;e<16;e++)s[e]=0;return s[14]=8*n,Oy(r,s),r}function wz(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}Ef=Pt.atob.bind(Pt),$2=Pt.btoa.bind(Pt);var eI="0123456789abcdef".split("");function vz(t){for(var e="",n=0;n<4;n++)e+=eI[t>>8*n+4&15]+eI[t>>8*n&15];return e}function yz(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function X2(t){return g3(t).map(yz).join("")}var Bz=function(t){for(var e=0;e<t.length;e++)t[e]=vz(t[e]);return t.join("")}(g3("hello"))!="5d41402abc4b2a76b9719d911017c592";function qA(t,e){if(Bz){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function J2(t,e){var n,r,s,i;if(t!==n){for(var a=(s=t,i=1+(256/t.length>>0),new Array(i+1).join(s)),o=[],A=0;A<256;A++)o[A]=A;var c=0;for(A=0;A<256;A++){var d=o[A];c=(c+d+a.charCodeAt(A))%256,o[A]=o[c],o[c]=d}n=t,r=o}else o=r;var f=e.length,p=0,g=0,B="";for(A=0;A<f;A++)g=(g+(d=o[p=(p+1)%256]))%256,o[p]=o[g],o[g]=d,a=o[(o[p]+o[g])%256],B+=String.fromCharCode(e.charCodeAt(A)^a);return B}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var tI={print:4,modify:8,copy:16,"annot-forms":32};function Vu(t,e,n,r){this.v=1,this.r=2;var s=192;t.forEach(function(o){if(tI.perm!==void 0)throw new Error("Invalid permission: "+o);s+=tI[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(e+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,a),this.P=-(1+(255^s)),this.encryptionKey=X2(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=J2(this.encryptionKey,this.padding)}function Ku(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var s=t.charCodeAt(r);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=t[r]}return e}function nI(t){if(Bn(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,s){if(s=s||!1,typeof n!="string"||typeof r!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var i=Math.random().toString(35);return e[n][i]=[r,!!s],i},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),s=[];for(var i in e[n]){var a=e[n][i];try{a[0].apply(t,r)}catch(o){Pt.console&&Sn.error("jsPDF PubSub Error",o.message,o)}a[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function pp(t){if(!(this instanceof pp))return new pp(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function w3(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function jA(t,e,n,r,s){if(!(this instanceof jA))return new jA(t,e,n,r,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,w3.call(this,r,s)}function hc(t,e,n,r,s){if(!(this instanceof hc))return new hc(t,e,n,r,s);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,w3.call(this,r,s)}function Ft(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],s=arguments[2],i=arguments[3],a=[],o=1,A=16,c="S",d=null;Bn(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,s=t.format||s,i=t.compress||t.compressPdf||i,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(A=t.floatPrecision),c=t.defaultPathOperation||"S"),a=t.filters||(i===!0?["FlateEncode"]:a),r=r||"mm",n=(""+(n||"P")).toLowerCase();var f=t.putOnlyUsedFonts||!1,p={},g={internal:{},__private__:{}};g.__private__.PubSub=nI;var B="1.3",b=g.__private__.getPdfVersion=function(){return B};g.__private__.setPdfVersion=function(v){B=v};var C={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return C};var w=g.__private__.getPageFormat=function(v){return C[v]};s=s||"a4";var y={COMPAT:"compat",ADVANCED:"advanced"},N=y.COMPAT;function R(){this.saveGraphicsState(),re(new ft(et,0,0,-et,0,ls()*et).toString()+" cm"),this.setFontSize(this.getFontSize()/et),c="n",N=y.ADVANCED}function V(){this.restoreGraphicsState(),c="S",N=y.COMPAT}var j=g.__private__.combineFontStyleAndFontWeight=function(v,O){if(v=="bold"&&O=="normal"||v=="bold"&&O==400||v=="normal"&&O=="italic"||v=="bold"&&O=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return O&&(v=O==400||O==="normal"?v==="italic"?"italic":"normal":O!=700&&O!=="bold"||v!=="normal"?(O==700?"bold":O)+""+v:"bold"),v};g.advancedAPI=function(v){var O=N===y.COMPAT;return O&&R.call(this),typeof v!="function"||(v(this),O&&V.call(this)),this},g.compatAPI=function(v){var O=N===y.ADVANCED;return O&&V.call(this),typeof v!="function"||(v(this),O&&R.call(this)),this},g.isAdvancedAPI=function(){return N===y.ADVANCED};var U,I=function(v){if(N!==y.ADVANCED)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Q=g.roundToPrecision=g.__private__.roundToPrecision=function(v,O){var ae=e||O;if(isNaN(v)||isNaN(ae))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(ae).replace(/0+$/,"")};U=g.hpf=g.__private__.hpf=typeof A=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return Q(v,A)}:A==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return Q(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return Q(v,16)};var D=g.f2=g.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return Q(v,2)},S=g.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return Q(v,3)},_=g.scale=g.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return N===y.COMPAT?v*et:N===y.ADVANCED?v:void 0},T=function(v){return N===y.COMPAT?ls()-v:N===y.ADVANCED?v:void 0},K=function(v){return _(T(v))};g.__private__.setPrecision=g.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(e=parseInt(v,10))};var oe,le="00000000000000000000000000000000",se=g.__private__.getFileId=function(){return le},z=g.__private__.setFileId=function(v){return le=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():le.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(Ln=new Vu(d.userPermissions,d.userPassword,d.ownerPassword,le)),le};g.setFileId=function(v){return z(v),this},g.getFileId=function(){return se()};var Ae=g.__private__.convertDateToPDFDate=function(v){var O=v.getTimezoneOffset(),ae=O<0?"+":"-",de=Math.floor(Math.abs(O/60)),Be=Math.abs(O%60),Qe=[ae,Z(de),"'",Z(Be),"'"].join("");return["D:",v.getFullYear(),Z(v.getMonth()+1),Z(v.getDate()),Z(v.getHours()),Z(v.getMinutes()),Z(v.getSeconds()),Qe].join("")},ee=g.__private__.convertPDFDateToDate=function(v){var O=parseInt(v.substr(2,4),10),ae=parseInt(v.substr(6,2),10)-1,de=parseInt(v.substr(8,2),10),Be=parseInt(v.substr(10,2),10),Qe=parseInt(v.substr(12,2),10),Ge=parseInt(v.substr(14,2),10);return new Date(O,ae,de,Be,Qe,Ge,0)},we=g.__private__.setCreationDate=function(v){var O;if(v===void 0&&(v=new Date),v instanceof Date)O=Ae(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");O=v}return oe=O},k=g.__private__.getCreationDate=function(v){var O=oe;return v==="jsDate"&&(O=ee(oe)),O};g.setCreationDate=function(v){return we(v),this},g.getCreationDate=function(v){return k(v)};var X,Z=g.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},H=g.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},Y=0,ue=[],ie=[],ce=0,be=[],Fe=[],ne=!1,ve=ie,Re=function(){Y=0,ce=0,ie=[],ue=[],be=[],zt=ye(),Vt=ye()};g.__private__.setCustomOutputDestination=function(v){ne=!0,ve=v};var Ce=function(v){ne||(ve=v)};g.__private__.resetCustomOutputDestination=function(){ne=!1,ve=ie};var re=g.__private__.out=function(v){return v=v.toString(),ce+=v.length+1,ve.push(v),ve},pt=g.__private__.write=function(v){return re(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},He=g.__private__.getArrayBuffer=function(v){for(var O=v.length,ae=new ArrayBuffer(O),de=new Uint8Array(ae);O--;)de[O]=v.charCodeAt(O);return ae},ke=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return ke};var pe=t.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(v){return pe=N===y.ADVANCED?v/et:v,this};var Pe,De=g.__private__.getFontSize=g.getFontSize=function(){return N===y.COMPAT?pe:pe*et},ze=t.R2L||!1;g.__private__.setR2L=g.setR2L=function(v){return ze=v,this},g.__private__.getR2L=g.getR2L=function(){return ze};var Ye,dt=g.__private__.setZoomMode=function(v){var O=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))Pe=v;else if(isNaN(v)){if(O.indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');Pe=v}else Pe=parseInt(v,10)};g.__private__.getZoomMode=function(){return Pe};var Je,_t=g.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');Ye=v};g.__private__.getPageMode=function(){return Ye};var St=g.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');Je=v};g.__private__.getLayoutMode=function(){return Je},g.__private__.setDisplayMode=g.setDisplayMode=function(v,O,ae){return dt(v),St(O),_t(ae),this};var yt={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(v){if(Object.keys(yt).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return yt[v]},g.__private__.getDocumentProperties=function(){return yt},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(v){for(var O in yt)yt.hasOwnProperty(O)&&v[O]&&(yt[O]=v[O]);return this},g.__private__.setDocumentProperty=function(v,O){if(Object.keys(yt).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return yt[v]=O};var Dt,et,bn,Gt,or,$t={},cn={},Qr=[],Se={},Et={},ot={},nt={},mt=null,xt=0,Ve=[],st=new nI(g),Zt=t.hotfixes||[],qt={},On={},Ar=[],ft=function v(O,ae,de,Be,Qe,Ge){if(!(this instanceof v))return new v(O,ae,de,Be,Qe,Ge);isNaN(O)&&(O=1),isNaN(ae)&&(ae=0),isNaN(de)&&(de=0),isNaN(Be)&&(Be=1),isNaN(Qe)&&(Qe=0),isNaN(Ge)&&(Ge=0),this._matrix=[O,ae,de,Be,Qe,Ge]};Object.defineProperty(ft.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(ft.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(ft.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(ft.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(ft.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(ft.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(ft.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(ft.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(ft.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(ft.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(ft.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(ft.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(ft.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ft.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ft.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ft.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ft.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(U).join(v)},ft.prototype.multiply=function(v){var O=v.sx*this.sx+v.shy*this.shx,ae=v.sx*this.shy+v.shy*this.sy,de=v.shx*this.sx+v.sy*this.shx,Be=v.shx*this.shy+v.sy*this.sy,Qe=v.tx*this.sx+v.ty*this.shx+this.tx,Ge=v.tx*this.shy+v.ty*this.sy+this.ty;return new ft(O,ae,de,Be,Qe,Ge)},ft.prototype.decompose=function(){var v=this.sx,O=this.shy,ae=this.shx,de=this.sy,Be=this.tx,Qe=this.ty,Ge=Math.sqrt(v*v+O*O),rt=(v/=Ge)*ae+(O/=Ge)*de;ae-=v*rt,de-=O*rt;var h=Math.sqrt(ae*ae+de*de);return rt/=h,v*(de/=h)<O*(ae/=h)&&(v=-v,O=-O,rt=-rt,Ge=-Ge),{scale:new ft(Ge,0,0,h,0,0),translate:new ft(1,0,0,1,Be,Qe),rotate:new ft(v,O,-O,v,0,0),skew:new ft(1,0,rt,1,0,0)}},ft.prototype.toString=function(v){return this.join(" ")},ft.prototype.inversed=function(){var v=this.sx,O=this.shy,ae=this.shx,de=this.sy,Be=this.tx,Qe=this.ty,Ge=1/(v*de-O*ae),rt=de*Ge,h=-O*Ge,E=-ae*Ge,P=v*Ge;return new ft(rt,h,E,P,-rt*Be-E*Qe,-h*Be-P*Qe)},ft.prototype.applyToPoint=function(v){var O=v.x*this.sx+v.y*this.shx+this.tx,ae=v.x*this.shy+v.y*this.sy+this.ty;return new eo(O,ae)},ft.prototype.applyToRectangle=function(v){var O=this.applyToPoint(v),ae=this.applyToPoint(new eo(v.x+v.w,v.y+v.h));return new rA(O.x,O.y,ae.x-O.x,ae.y-O.y)},ft.prototype.clone=function(){var v=this.sx,O=this.shy,ae=this.shx,de=this.sy,Be=this.tx,Qe=this.ty;return new ft(v,O,ae,de,Be,Qe)},g.Matrix=ft;var zr=g.matrixMult=function(v,O){return O.multiply(v)},Pr=new ft(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=Pr;var er=function(v,O){if(!Et[v]){var ae=(O instanceof jA?"Sh":"P")+(Object.keys(Se).length+1).toString(10);O.id=ae,Et[v]=ae,Se[ae]=O,st.publish("addPattern",O)}};g.ShadingPattern=jA,g.TilingPattern=hc,g.addShadingPattern=function(v,O){return I("addShadingPattern()"),er(v,O),this},g.beginTilingPattern=function(v){I("beginTilingPattern()"),sA(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},g.endTilingPattern=function(v,O){I("endTilingPattern()"),O.stream=Fe[X].join(`
`),er(v,O),st.publish("endTilingPattern",O),Ar.pop().restore()};var Xn=g.__private__.newObject=function(){var v=ye();return $e(v,!0),v},ye=g.__private__.newObjectDeferred=function(){return Y++,ue[Y]=function(){return ce},Y},$e=function(v,O){return O=typeof O=="boolean"&&O,ue[v]=ce,O&&re(v+" 0 obj"),v},lt=g.__private__.newAdditionalObject=function(){var v={objId:ye(),content:""};return be.push(v),v},zt=ye(),Vt=ye(),bt=g.__private__.decodeColorString=function(v){var O=v.split(" ");if(O.length!==2||O[1]!=="g"&&O[1]!=="G")O.length===5&&(O[4]==="k"||O[4]==="K")&&(O=[(1-O[0])*(1-O[3]),(1-O[1])*(1-O[3]),(1-O[2])*(1-O[3]),"r"]);else{var ae=parseFloat(O[0]);O=[ae,ae,ae,"r"]}for(var de="#",Be=0;Be<3;Be++)de+=("0"+Math.floor(255*parseFloat(O[Be])).toString(16)).slice(-2);return de},Bt=g.__private__.encodeColorString=function(v){var O;typeof v=="string"&&(v={ch1:v});var ae=v.ch1,de=v.ch2,Be=v.ch3,Qe=v.ch4,Ge=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ae=="string"&&ae.charAt(0)!=="#"){var rt=new m3(ae);if(rt.ok)ae=rt.toHex();else if(!/^\d*\.?\d*$/.test(ae))throw new Error('Invalid color "'+ae+'" passed to jsPDF.encodeColorString.')}if(typeof ae=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ae)&&(ae="#"+ae[1]+ae[1]+ae[2]+ae[2]+ae[3]+ae[3]),typeof ae=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ae)){var h=parseInt(ae.substr(1),16);ae=h>>16&255,de=h>>8&255,Be=255&h}if(de===void 0||Qe===void 0&&ae===de&&de===Be)if(typeof ae=="string")O=ae+" "+Ge[0];else switch(v.precision){case 2:O=D(ae/255)+" "+Ge[0];break;case 3:default:O=S(ae/255)+" "+Ge[0]}else if(Qe===void 0||Bn(Qe)==="object"){if(Qe&&!isNaN(Qe.a)&&Qe.a===0)return O=["1.","1.","1.",Ge[1]].join(" ");if(typeof ae=="string")O=[ae,de,Be,Ge[1]].join(" ");else switch(v.precision){case 2:O=[D(ae/255),D(de/255),D(Be/255),Ge[1]].join(" ");break;default:case 3:O=[S(ae/255),S(de/255),S(Be/255),Ge[1]].join(" ")}}else if(typeof ae=="string")O=[ae,de,Be,Qe,Ge[2]].join(" ");else switch(v.precision){case 2:O=[D(ae),D(de),D(Be),D(Qe),Ge[2]].join(" ");break;case 3:default:O=[S(ae),S(de),S(Be),S(Qe),Ge[2]].join(" ")}return O},Wr=g.__private__.getFilters=function(){return a},lr=g.__private__.putStream=function(v){var O=(v=v||{}).data||"",ae=v.filters||Wr(),de=v.alreadyAppliedFilters||[],Be=v.addLength1||!1,Qe=O.length,Ge=v.objectId,rt=function(jt){return jt};if(d!==null&&Ge===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(rt=Ln.encryptor(Ge,0));var h={};ae===!0&&(ae=["FlateEncode"]);var E=v.additionalKeyValues||[],P=(h=Ft.API.processDataByFilters!==void 0?Ft.API.processDataByFilters(O,ae):{data:O,reverseChain:[]}).reverseChain+(Array.isArray(de)?de.join(" "):de.toString());if(h.data.length!==0&&(E.push({key:"Length",value:h.data.length}),Be===!0&&E.push({key:"Length1",value:Qe})),P.length!=0)if(P.split("/").length-1==1)E.push({key:"Filter",value:P});else{E.push({key:"Filter",value:"["+P+"]"});for(var W=0;W<E.length;W+=1)if(E[W].key==="DecodeParms"){for(var ge=[],Ie=0;Ie<h.reverseChain.split("/").length-1;Ie+=1)ge.push("null");ge.push(E[W].value),E[W].value="["+ge.join(" ")+"]"}}re("<<");for(var qe=0;qe<E.length;qe++)re("/"+E[qe].key+" "+E[qe].value);re(">>"),h.data.length!==0&&(re("stream"),re(rt(h.data)),re("endstream"))},Xs=g.__private__.putPage=function(v){var O=v.number,ae=v.data,de=v.objId,Be=v.contentsObjId;$e(de,!0),re("<</Type /Page"),re("/Parent "+v.rootDictionaryObjId+" 0 R"),re("/Resources "+v.resourceDictionaryObjId+" 0 R"),re("/MediaBox ["+parseFloat(U(v.mediaBox.bottomLeftX))+" "+parseFloat(U(v.mediaBox.bottomLeftY))+" "+U(v.mediaBox.topRightX)+" "+U(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&re("/CropBox ["+U(v.cropBox.bottomLeftX)+" "+U(v.cropBox.bottomLeftY)+" "+U(v.cropBox.topRightX)+" "+U(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&re("/BleedBox ["+U(v.bleedBox.bottomLeftX)+" "+U(v.bleedBox.bottomLeftY)+" "+U(v.bleedBox.topRightX)+" "+U(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&re("/TrimBox ["+U(v.trimBox.bottomLeftX)+" "+U(v.trimBox.bottomLeftY)+" "+U(v.trimBox.topRightX)+" "+U(v.trimBox.topRightY)+"]"),v.artBox!==null&&re("/ArtBox ["+U(v.artBox.bottomLeftX)+" "+U(v.artBox.bottomLeftY)+" "+U(v.artBox.topRightX)+" "+U(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&re("/UserUnit "+v.userUnit),st.publish("putPage",{objId:de,pageContext:Ve[O],pageNumber:O,page:ae}),re("/Contents "+Be+" 0 R"),re(">>"),re("endobj");var Qe=ae.join(`
`);return N===y.ADVANCED&&(Qe+=`
Q`),$e(Be,!0),lr({data:Qe,filters:Wr(),objectId:Be}),re("endobj"),de},ha=g.__private__.putPages=function(){var v,O,ae=[];for(v=1;v<=xt;v++)Ve[v].objId=ye(),Ve[v].contentsObjId=ye();for(v=1;v<=xt;v++)ae.push(Xs({number:v,data:Fe[v],objId:Ve[v].objId,contentsObjId:Ve[v].contentsObjId,mediaBox:Ve[v].mediaBox,cropBox:Ve[v].cropBox,bleedBox:Ve[v].bleedBox,trimBox:Ve[v].trimBox,artBox:Ve[v].artBox,userUnit:Ve[v].userUnit,rootDictionaryObjId:zt,resourceDictionaryObjId:Vt}));$e(zt,!0),re("<</Type /Pages");var de="/Kids [";for(O=0;O<xt;O++)de+=ae[O]+" 0 R ";re(de+"]"),re("/Count "+xt),re(">>"),re("endobj"),st.publish("postPutPages")},fa=function(v){st.publish("putFont",{font:v,out:re,newObject:Xn,putStream:lr}),v.isAlreadyPutted!==!0&&(v.objectNumber=Xn(),re("<<"),re("/Type /Font"),re("/BaseFont /"+Ku(v.postScriptName)),re("/Subtype /Type1"),typeof v.encoding=="string"&&re("/Encoding /"+v.encoding),re("/FirstChar 32"),re("/LastChar 255"),re(">>"),re("endobj"))},pa=function(){for(var v in $t)$t.hasOwnProperty(v)&&(f===!1||f===!0&&p.hasOwnProperty(v))&&fa($t[v])},Ga=function(v){v.objectNumber=Xn();var O=[];O.push({key:"Type",value:"/XObject"}),O.push({key:"Subtype",value:"/Form"}),O.push({key:"BBox",value:"["+[U(v.x),U(v.y),U(v.x+v.width),U(v.y+v.height)].join(" ")+"]"}),O.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var ae=v.pages[1].join(`
`);lr({data:ae,additionalKeyValues:O,objectId:v.objectNumber}),re("endobj")},qa=function(){for(var v in qt)qt.hasOwnProperty(v)&&Ga(qt[v])},zc=function(v,O){var ae,de=[],Be=1/(O-1);for(ae=0;ae<1;ae+=Be)de.push(ae);if(de.push(1),v[0].offset!=0){var Qe={offset:0,color:v[0].color};v.unshift(Qe)}if(v[v.length-1].offset!=1){var Ge={offset:1,color:v[v.length-1].color};v.push(Ge)}for(var rt="",h=0,E=0;E<de.length;E++){for(ae=de[E];ae>v[h+1].offset;)h++;var P=v[h].offset,W=(ae-P)/(v[h+1].offset-P),ge=v[h].color,Ie=v[h+1].color;rt+=H(Math.round((1-W)*ge[0]+W*Ie[0]).toString(16))+H(Math.round((1-W)*ge[1]+W*Ie[1]).toString(16))+H(Math.round((1-W)*ge[2]+W*Ie[2]).toString(16))}return rt.trim()},Ko=function(v,O){O||(O=21);var ae=Xn(),de=zc(v.colors,O),Be=[];Be.push({key:"FunctionType",value:"0"}),Be.push({key:"Domain",value:"[0.0 1.0]"}),Be.push({key:"Size",value:"["+O+"]"}),Be.push({key:"BitsPerSample",value:"8"}),Be.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Be.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),lr({data:de,additionalKeyValues:Be,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ae}),re("endobj"),v.objectNumber=Xn(),re("<< /ShadingType "+v.type),re("/ColorSpace /DeviceRGB");var Qe="/Coords ["+U(parseFloat(v.coords[0]))+" "+U(parseFloat(v.coords[1]))+" ";v.type===2?Qe+=U(parseFloat(v.coords[2]))+" "+U(parseFloat(v.coords[3])):Qe+=U(parseFloat(v.coords[2]))+" "+U(parseFloat(v.coords[3]))+" "+U(parseFloat(v.coords[4]))+" "+U(parseFloat(v.coords[5])),re(Qe+="]"),v.matrix&&re("/Matrix ["+v.matrix.toString()+"]"),re("/Function "+ae+" 0 R"),re("/Extend [true true]"),re(">>"),re("endobj")},Wc=function(v,O){var ae=ye(),de=Xn();O.push({resourcesOid:ae,objectOid:de}),v.objectNumber=de;var Be=[];Be.push({key:"Type",value:"/Pattern"}),Be.push({key:"PatternType",value:"1"}),Be.push({key:"PaintType",value:"1"}),Be.push({key:"TilingType",value:"1"}),Be.push({key:"BBox",value:"["+v.boundingBox.map(U).join(" ")+"]"}),Be.push({key:"XStep",value:U(v.xStep)}),Be.push({key:"YStep",value:U(v.yStep)}),Be.push({key:"Resources",value:ae+" 0 R"}),v.matrix&&Be.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),lr({data:v.stream,additionalKeyValues:Be,objectId:v.objectNumber}),re("endobj")},ma=function(v){var O;for(O in Se)Se.hasOwnProperty(O)&&(Se[O]instanceof jA?Ko(Se[O]):Se[O]instanceof hc&&Wc(Se[O],v))},ga=function(v){for(var O in v.objectNumber=Xn(),re("<<"),v)switch(O){case"opacity":re("/ca "+D(v[O]));break;case"stroke-opacity":re("/CA "+D(v[O]))}re(">>"),re("endobj")},Ri=function(){var v;for(v in ot)ot.hasOwnProperty(v)&&ga(ot[v])},za=function(){for(var v in re("/XObject <<"),qt)qt.hasOwnProperty(v)&&qt[v].objectNumber>=0&&re("/"+v+" "+qt[v].objectNumber+" 0 R");st.publish("putXobjectDict"),re(">>")},Xd=function(){Ln.oid=Xn(),re("<<"),re("/Filter /Standard"),re("/V "+Ln.v),re("/R "+Ln.r),re("/U <"+Ln.toHexString(Ln.U)+">"),re("/O <"+Ln.toHexString(Ln.O)+">"),re("/P "+Ln.P),re(">>"),re("endobj")},Nl=function(){for(var v in re("/Font <<"),$t)$t.hasOwnProperty(v)&&(f===!1||f===!0&&p.hasOwnProperty(v))&&re("/"+v+" "+$t[v].objectNumber+" 0 R");re(">>")},$c=function(){if(Object.keys(Se).length>0){for(var v in re("/Shading <<"),Se)Se.hasOwnProperty(v)&&Se[v]instanceof jA&&Se[v].objectNumber>=0&&re("/"+v+" "+Se[v].objectNumber+" 0 R");st.publish("putShadingPatternDict"),re(">>")}},Wa=function(v){if(Object.keys(Se).length>0){for(var O in re("/Pattern <<"),Se)Se.hasOwnProperty(O)&&Se[O]instanceof g.TilingPattern&&Se[O].objectNumber>=0&&Se[O].objectNumber<v&&re("/"+O+" "+Se[O].objectNumber+" 0 R");st.publish("putTilingPatternDict"),re(">>")}},Sl=function(){if(Object.keys(ot).length>0){var v;for(v in re("/ExtGState <<"),ot)ot.hasOwnProperty(v)&&ot[v].objectNumber>=0&&re("/"+v+" "+ot[v].objectNumber+" 0 R");st.publish("putGStateDict"),re(">>")}},Pn=function(v){$e(v.resourcesOid,!0),re("<<"),re("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Nl(),$c(),Wa(v.objectOid),Sl(),za(),re(">>"),re("endobj")},Fl=function(){var v=[];pa(),Ri(),qa(),ma(v),st.publish("putResources"),v.forEach(Pn),Pn({resourcesOid:Vt,objectOid:Number.MAX_SAFE_INTEGER}),st.publish("postPutResources")},Tl=function(){st.publish("putAdditionalObjects");for(var v=0;v<be.length;v++){var O=be[v];$e(O.objId,!0),re(O.content),re("endobj")}st.publish("postPutAdditionalObjects")},Xc=function(v){cn[v.fontName]=cn[v.fontName]||{},cn[v.fontName][v.fontStyle]=v.id},Ul=function(v,O,ae,de,Be){var Qe={id:"F"+(Object.keys($t).length+1).toString(10),postScriptName:v,fontName:O,fontStyle:ae,encoding:de,isStandardFont:Be||!1,metadata:{}};return st.publish("addFont",{font:Qe,instance:this}),$t[Qe.id]=Qe,Xc(Qe),Qe.id},Jc=function(v){for(var O=0,ae=ke.length;O<ae;O++){var de=Ul.call(this,v[O][0],v[O][1],v[O][2],ke[O][3],!0);f===!1&&(p[de]=!0);var Be=v[O][0].split("-");Xc({id:de,fontName:Be[0],fontStyle:Be[1]||""})}st.publish("addFonts",{fonts:$t,dictionary:cn})},Rs=function(v){return v.foo=function(){try{return v.apply(this,arguments)}catch(de){var O=de.stack||"";~O.indexOf(" at ")&&(O=O.split(" at ")[1]);var ae="Error in function "+O.split(`
`)[0].split("<")[0]+": "+de.message;if(!Pt.console)throw new Error(ae);Pt.console.error(ae,de),Pt.alert&&alert(ae)}},v.foo.bar=v,v.foo},Go=function(v,O){var ae,de,Be,Qe,Ge,rt,h,E,P;if(Be=(O=O||{}).sourceEncoding||"Unicode",Ge=O.outputEncoding,(O.autoencode||Ge)&&$t[Dt].metadata&&$t[Dt].metadata[Be]&&$t[Dt].metadata[Be].encoding&&(Qe=$t[Dt].metadata[Be].encoding,!Ge&&$t[Dt].encoding&&(Ge=$t[Dt].encoding),!Ge&&Qe.codePages&&(Ge=Qe.codePages[0]),typeof Ge=="string"&&(Ge=Qe[Ge]),Ge)){for(h=!1,rt=[],ae=0,de=v.length;ae<de;ae++)(E=Ge[v.charCodeAt(ae)])?rt.push(String.fromCharCode(E)):rt.push(v[ae]),rt[ae].charCodeAt(0)>>8&&(h=!0);v=rt.join("")}for(ae=v.length;h===void 0&&ae!==0;)v.charCodeAt(ae-1)>>8&&(h=!0),ae--;if(!h)return v;for(rt=O.noBOM?[]:[254,255],ae=0,de=v.length;ae<de;ae++){if((P=(E=v.charCodeAt(ae))>>8)>>8)throw new Error("Character at position "+ae+" of string '"+v+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");rt.push(P),rt.push(E-(P<<8))}return String.fromCharCode.apply(void 0,rt)},tr=g.__private__.pdfEscape=g.pdfEscape=function(v,O){return Go(v,O).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Cs=g.__private__.beginPage=function(v){Fe[++xt]=[],Ve[xt]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},Ql(xt),Ce(Fe[X])},$a=function(v,O){var ae,de,Be;switch(n=O||n,typeof v=="string"&&(ae=w(v.toLowerCase()),Array.isArray(ae)&&(de=ae[0],Be=ae[1])),Array.isArray(v)&&(de=v[0]*et,Be=v[1]*et),isNaN(de)&&(de=s[0],Be=s[1]),(de>14400||Be>14400)&&(Sn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),de=Math.min(14400,de),Be=Math.min(14400,Be)),s=[de,Be],n.substr(0,1)){case"l":Be>de&&(s=[Be,de]);break;case"p":de>Be&&(s=[Be,de])}Cs(s),Dl(kl),re($r),Ml!==0&&re(Ml+" J"),nA!==0&&re(nA+" j"),st.publish("addPage",{pageNumber:xt})},qo=function(v){v>0&&v<=xt&&(Fe.splice(v,1),Ve.splice(v,1),xt--,X>xt&&(X=xt),this.setPage(X))},Ql=function(v){v>0&&v<=xt&&(X=v)},mn=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return Fe.length-1},Xa=function(v,O,ae){var de,Be=void 0;return ae=ae||{},v=v!==void 0?v:$t[Dt].fontName,O=O!==void 0?O:$t[Dt].fontStyle,de=v.toLowerCase(),cn[de]!==void 0&&cn[de][O]!==void 0?Be=cn[de][O]:cn[v]!==void 0&&cn[v][O]!==void 0?Be=cn[v][O]:ae.disableWarning===!1&&Sn.warn("Unable to look up font label for font '"+v+"', '"+O+"'. Refer to getFontList() for available fonts."),Be||ae.noFallback||(Be=cn.times[O])==null&&(Be=cn.times.normal),Be},Ja=g.__private__.putInfo=function(){var v=Xn(),O=function(de){return de};for(var ae in d!==null&&(O=Ln.encryptor(v,0)),re("<<"),re("/Producer ("+tr(O("jsPDF "+Ft.version))+")"),yt)yt.hasOwnProperty(ae)&&yt[ae]&&re("/"+ae.substr(0,1).toUpperCase()+ae.substr(1)+" ("+tr(O(yt[ae]))+")");re("/CreationDate ("+tr(O(oe))+")"),re(">>"),re("endobj")},ki=g.__private__.putCatalog=function(v){var O=(v=v||{}).rootDictionaryObjId||zt;switch(Xn(),re("<<"),re("/Type /Catalog"),re("/Pages "+O+" 0 R"),Pe||(Pe="fullwidth"),Pe){case"fullwidth":re("/OpenAction [3 0 R /FitH null]");break;case"fullheight":re("/OpenAction [3 0 R /FitV null]");break;case"fullpage":re("/OpenAction [3 0 R /Fit]");break;case"original":re("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ae=""+Pe;ae.substr(ae.length-1)==="%"&&(Pe=parseInt(Pe)/100),typeof Pe=="number"&&re("/OpenAction [3 0 R /XYZ null null "+D(Pe)+"]")}switch(Je||(Je="continuous"),Je){case"continuous":re("/PageLayout /OneColumn");break;case"single":re("/PageLayout /SinglePage");break;case"two":case"twoleft":re("/PageLayout /TwoColumnLeft");break;case"tworight":re("/PageLayout /TwoColumnRight")}Ye&&re("/PageMode /"+Ye),st.publish("putCatalog"),re(">>"),re("endobj")},Jd=g.__private__.putTrailer=function(){re("trailer"),re("<<"),re("/Size "+(Y+1)),re("/Root "+Y+" 0 R"),re("/Info "+(Y-1)+" 0 R"),d!==null&&re("/Encrypt "+Ln.oid+" 0 R"),re("/ID [ <"+le+"> <"+le+"> ]"),re(">>")},Yc=g.__private__.putHeader=function(){re("%PDF-"+B),re("%")},Yd=g.__private__.putXRef=function(){var v="0000000000";re("xref"),re("0 "+(Y+1)),re("0000000000 65535 f ");for(var O=1;O<=Y;O++)typeof ue[O]=="function"?re((v+ue[O]()).slice(-10)+" 00000 n "):ue[O]!==void 0?re((v+ue[O]).slice(-10)+" 00000 n "):re("0000000000 00000 n ")},Di=g.__private__.buildDocument=function(){Re(),Ce(ie),st.publish("buildDocument"),Yc(),ha(),Tl(),Fl(),d!==null&&Xd(),Ja(),ki();var v=ce;return Yd(),Jd(),re("startxref"),re(""+v),re("%%EOF"),Ce(Fe[X]),ie.join(`
`)},zo=g.__private__.getBlob=function(v){return new Blob([He(v)],{type:"application/pdf"})},Wo=g.output=g.__private__.output=Rs(function(v,O){switch(typeof(O=O||{})=="string"?O={filename:O}:O.filename=O.filename||"generated.pdf",v){case void 0:return Di();case"save":g.save(O.filename);break;case"arraybuffer":return He(Di());case"blob":return zo(Di());case"bloburi":case"bloburl":if(Pt.URL!==void 0&&typeof Pt.URL.createObjectURL=="function")return Pt.URL&&Pt.URL.createObjectURL(zo(Di()))||void 0;Sn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ae="",de=Di();try{ae=$2(de)}catch{ae=$2(unescape(encodeURIComponent(de)))}return"data:application/pdf;filename="+O.filename+";base64,"+ae;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Pt)==="[object Window]"){var Be="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Qe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';O.pdfObjectUrl&&(Be=O.pdfObjectUrl,Qe="");var Ge='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Be+'"'+Qe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(O)+");<\/script></body></html>",rt=Pt.open();return rt!==null&&rt.document.write(Ge),rt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Pt)==="[object Window]"){var h='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(O.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+O.filename+'" width="500px" height="400px" /></body></html>',E=Pt.open();if(E!==null){E.document.write(h);var P=this;E.document.documentElement.querySelector("#pdfViewer").onload=function(){E.document.title=O.filename,E.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(P.output("bloburl"))}}return E}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Pt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var W='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",O)+'"></iframe></body></html>',ge=Pt.open();if(ge!==null&&(ge.document.write(W),ge.document.title=O.filename),ge||typeof safari>"u")return ge;break;case"datauri":case"dataurl":return Pt.document.location.href=this.output("datauristring",O);default:return null}}),wa=function(v){return Array.isArray(Zt)===!0&&Zt.indexOf(v)>-1};switch(r){case"pt":et=1;break;case"mm":et=72/25.4;break;case"cm":et=72/2.54;break;case"in":et=72;break;case"px":et=wa("px_scaling")==1?.75:96/72;break;case"pc":case"em":et=12;break;case"ex":et=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);et=r}var Ln=null;we(),z();var Zc=function(v){return d!==null?Ln.encryptor(v,0):function(O){return O}},Pl=g.__private__.getPageInfo=g.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ve[v].objId,pageNumber:v,pageContext:Ve[v]}},Lt=g.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var O in Ve)if(Ve[O].objId===v)break;return Pl(O)},va=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:Ve[X].objId,pageNumber:X,pageContext:Ve[X]}};g.addPage=function(){return $a.apply(this,arguments),this},g.setPage=function(){return Ql.apply(this,arguments),Ce.call(this,Fe[X]),this},g.insertPage=function(v){return this.addPage(),this.movePage(X,v),this},g.movePage=function(v,O){var ae,de;if(v>O){ae=Fe[v],de=Ve[v];for(var Be=v;Be>O;Be--)Fe[Be]=Fe[Be-1],Ve[Be]=Ve[Be-1];Fe[O]=ae,Ve[O]=de,this.setPage(O)}else if(v<O){ae=Fe[v],de=Ve[v];for(var Qe=v;Qe<O;Qe++)Fe[Qe]=Fe[Qe+1],Ve[Qe]=Ve[Qe+1];Fe[O]=ae,Ve[O]=de,this.setPage(O)}return this},g.deletePage=function(){return qo.apply(this,arguments),this},g.__private__.text=g.text=function(v,O,ae,de,Be){var Qe,Ge,rt,h,E,P,W,ge,Ie,qe=(de=de||{}).scope||this;if(typeof v=="number"&&typeof O=="number"&&(typeof ae=="string"||Array.isArray(ae))){var jt=ae;ae=O,O=v,v=jt}if(arguments[3]instanceof ft?(I("The transform parameter of text() with a Matrix value"),Ie=Be):(rt=arguments[4],h=arguments[5],Bn(W=arguments[3])==="object"&&W!==null||(typeof rt=="string"&&(h=rt,rt=null),typeof W=="string"&&(h=W,W=null),typeof W=="number"&&(rt=W,W=null),de={flags:W,angle:rt,align:h})),isNaN(O)||isNaN(ae)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return qe;var en="",Ot=!1,hn=typeof de.lineHeightFactor=="number"?de.lineHeightFactor:dn,In=qe.internal.scaleFactor;function Vi(Fn){return Fn=Fn.split("	").join(Array(de.TabLen||9).join(" ")),tr(Fn,W)}function Xr(Fn){for(var Tn,ur=Fn.concat(),_r=[],io=ur.length;io--;)typeof(Tn=ur.shift())=="string"?_r.push(Tn):Array.isArray(Fn)&&(Tn.length===1||Tn[1]===void 0&&Tn[2]===void 0)?_r.push(Tn[0]):_r.push([Tn[0],Tn[1],Tn[2]]);return _r}function ba(Fn,Tn){var ur;if(typeof Fn=="string")ur=Tn(Fn)[0];else if(Array.isArray(Fn)){for(var _r,io,oh=Fn.concat(),du=[],zp=oh.length;zp--;)typeof(_r=oh.shift())=="string"?du.push(Tn(_r)[0]):Array.isArray(_r)&&typeof _r[0]=="string"&&(io=Tn(_r[0],_r[1],_r[2]),du.push([io[0],io[1],io[2]]));ur=du}return ur}var Ca=!1,eh=!0;if(typeof v=="string")Ca=!0;else if(Array.isArray(v)){var th=v.concat();Ge=[];for(var su,Jr=th.length;Jr--;)(typeof(su=th.shift())!="string"||Array.isArray(su)&&typeof su[0]!="string")&&(eh=!1);Ca=eh}if(Ca===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var iu=pe/qe.internal.scaleFactor,au=iu*(hn-1);switch(de.baseline){case"bottom":ae-=au;break;case"top":ae+=iu-au;break;case"hanging":ae+=iu-2*au;break;case"middle":ae+=iu/2-au}if((P=de.maxWidth||0)>0&&(typeof v=="string"?v=qe.splitTextToSize(v,P):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(Fn,Tn){return Fn.concat(qe.splitTextToSize(Tn,P))},[]))),Qe={text:v,x:O,y:ae,options:de,mutex:{pdfEscape:tr,activeFontKey:Dt,fonts:$t,activeFontSize:pe}},st.publish("preProcessText",Qe),v=Qe.text,rt=(de=Qe.options).angle,!(Ie instanceof ft)&&rt&&typeof rt=="number"){rt*=Math.PI/180,de.rotationDirection===0&&(rt=-rt),N===y.ADVANCED&&(rt=-rt);var ou=Math.cos(rt),nh=Math.sin(rt);Ie=new ft(ou,nh,-nh,ou,0,0)}else rt&&rt instanceof ft&&(Ie=rt);N!==y.ADVANCED||Ie||(Ie=Pr),(E=de.charSpace||Za)!==void 0&&(en+=U(_(E))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ge=de.horizontalScale)!==void 0&&(en+=U(100*ge)+` Tz
`),de.lang;var ks=-1,cv=de.renderingMode!==void 0?de.renderingMode:de.stroke,rh=qe.internal.getCurrentPageInfo().pageContext;switch(cv){case 0:case!1:case"fill":ks=0;break;case 1:case!0:case"stroke":ks=1;break;case 2:case"fillThenStroke":ks=2;break;case 3:case"invisible":ks=3;break;case 4:case"fillAndAddForClipping":ks=4;break;case 5:case"strokeAndAddPathForClipping":ks=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ks=6;break;case 7:case"addToPathForClipping":ks=7}var Vp=rh.usedRenderingMode!==void 0?rh.usedRenderingMode:-1;ks!==-1?en+=ks+` Tr
`:Vp!==-1&&(en+=`0 Tr
`),ks!==-1&&(rh.usedRenderingMode=ks),h=de.align||"left";var mi,Au=pe*hn,Kp=qe.internal.pageSize.getWidth(),Gp=$t[Dt];E=de.charSpace||Za,P=de.maxWidth||0,W=Object.assign({autoencode:!0,noBOM:!0},de.flags);var oA=[],Hl=function(Fn){return qe.getStringUnitWidth(Fn,{font:Gp,charSpace:E,fontSize:pe,doKerning:!1})*pe/In};if(Object.prototype.toString.call(v)==="[object Array]"){var Ds;Ge=Xr(v),h!=="left"&&(mi=Ge.map(Hl));var Es,AA=0;if(h==="right"){O-=mi[0],v=[],Jr=Ge.length;for(var no=0;no<Jr;no++)no===0?(Es=Zs(O),Ds=Er(ae)):(Es=_(AA-mi[no]),Ds=-Au),v.push([Ge[no],Es,Ds]),AA=mi[no]}else if(h==="center"){O-=mi[0]/2,v=[],Jr=Ge.length;for(var ro=0;ro<Jr;ro++)ro===0?(Es=Zs(O),Ds=Er(ae)):(Es=_((AA-mi[ro])/2),Ds=-Au),v.push([Ge[ro],Es,Ds]),AA=mi[ro]}else if(h==="left"){v=[],Jr=Ge.length;for(var lu=0;lu<Jr;lu++)v.push(Ge[lu])}else if(h==="justify"&&Gp.encoding==="Identity-H"){v=[],Jr=Ge.length,P=P!==0?P:Kp;for(var so=0,cr=0;cr<Jr;cr++)if(Ds=cr===0?Er(ae):-Au,Es=cr===0?Zs(O):so,cr<Jr-1){var sh=_((P-mi[cr])/(Ge[cr].split(" ").length-1)),_s=Ge[cr].split(" ");v.push([_s[0]+" ",Es,Ds]),so=0;for(var gi=1;gi<_s.length;gi++){var cu=(Hl(_s[gi-1]+" "+_s[gi])-Hl(_s[gi]))*In+sh;gi==_s.length-1?v.push([_s[gi],cu,0]):v.push([_s[gi]+" ",cu,0]),so-=cu}}else v.push([Ge[cr],Es,Ds]);v.push(["",so,0])}else{if(h!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],Jr=Ge.length,P=P!==0?P:Kp,cr=0;cr<Jr;cr++)Ds=cr===0?Er(ae):-Au,Es=cr===0?Zs(O):0,cr<Jr-1?oA.push(U(_((P-mi[cr])/(Ge[cr].split(" ").length-1)))):oA.push(0),v.push([Ge[cr],Es,Ds])}}var qp=typeof de.R2L=="boolean"?de.R2L:ze;qp===!0&&(v=ba(v,function(Fn,Tn,ur){return[Fn.split("").reverse().join(""),Tn,ur]})),Qe={text:v,x:O,y:ae,options:de,mutex:{pdfEscape:tr,activeFontKey:Dt,fonts:$t,activeFontSize:pe}},st.publish("postProcessText",Qe),v=Qe.text,Ot=Qe.mutex.isHex||!1;var ih=$t[Dt].encoding;ih!=="WinAnsiEncoding"&&ih!=="StandardEncoding"||(v=ba(v,function(Fn,Tn,ur){return[Vi(Fn),Tn,ur]})),Ge=Xr(v),v=[];for(var Vl,Kl,lA,Gl=0,uu=1,ql=Array.isArray(Ge[0])?uu:Gl,cA="",ah=function(Fn,Tn,ur){var _r="";return ur instanceof ft?(ur=typeof de.angle=="number"?zr(ur,new ft(1,0,0,1,Fn,Tn)):zr(new ft(1,0,0,1,Fn,Tn),ur),N===y.ADVANCED&&(ur=zr(new ft(1,0,0,-1,0,0),ur)),_r=ur.join(" ")+` Tm
`):_r=U(Fn)+" "+U(Tn)+` Td
`,_r},wi=0;wi<Ge.length;wi++){switch(cA="",ql){case uu:lA=(Ot?"<":"(")+Ge[wi][0]+(Ot?">":")"),Vl=parseFloat(Ge[wi][1]),Kl=parseFloat(Ge[wi][2]);break;case Gl:lA=(Ot?"<":"(")+Ge[wi]+(Ot?">":")"),Vl=Zs(O),Kl=Er(ae)}oA!==void 0&&oA[wi]!==void 0&&(cA=oA[wi]+` Tw
`),wi===0?v.push(cA+ah(Vl,Kl,Ie)+lA):ql===Gl?v.push(cA+lA):ql===uu&&v.push(cA+ah(Vl,Kl,Ie)+lA)}v=ql===Gl?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var vi=`BT
/`;return vi+=Dt+" "+pe+` Tf
`,vi+=U(pe*hn)+` TL
`,vi+=Mi+`
`,vi+=en,vi+=v,re(vi+="ET"),p[Dt]=!0,qe};var Zd=g.__private__.clip=g.clip=function(v){return re(v==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return Zd("evenodd")},g.__private__.discardPath=g.discardPath=function(){return re("n"),this};var pi=g.__private__.isValidStyle=function(v){var O=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(O=!0),O};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(v){return pi(v)&&(c=v),this};var eu=g.__private__.getStyle=g.getStyle=function(v){var O=c;switch(v){case"D":case"S":O="S";break;case"F":O="f";break;case"FD":case"DF":O="B";break;case"f":case"f*":case"B":case"B*":O=v}return O},Js=g.close=function(){return re("h"),this};g.stroke=function(){return re("S"),this},g.fill=function(v){return $o("f",v),this},g.fillEvenOdd=function(v){return $o("f*",v),this},g.fillStroke=function(v){return $o("B",v),this},g.fillStrokeEvenOdd=function(v){return $o("B*",v),this};var $o=function(v,O){Bn(O)==="object"?Jo(O,v):re(v)},Ll=function(v){v===null||N===y.ADVANCED&&v===void 0||(v=eu(v),re(v))};function Xo(v,O,ae,de,Be){var Qe=new hc(O||this.boundingBox,ae||this.xStep,de||this.yStep,this.gState,Be||this.matrix);Qe.stream=this.stream;var Ge=v+"$$"+this.cloneIndex+++"$$";return er(Ge,Qe),Qe}var Jo=function(v,O){var ae=Et[v.key],de=Se[ae];if(de instanceof jA)re("q"),re(tu(O)),de.gState&&g.setGState(de.gState),re(v.matrix.toString()+" cm"),re("/"+ae+" sh"),re("Q");else if(de instanceof hc){var Be=new ft(1,0,0,-1,0,ls());v.matrix&&(Be=Be.multiply(v.matrix||Pr),ae=Xo.call(de,v.key,v.boundingBox,v.xStep,v.yStep,Be).id),re("q"),re("/Pattern cs"),re("/"+ae+" scn"),de.gState&&g.setGState(de.gState),re(O),re("Q")}},tu=function(v){switch(v){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},ji=g.moveTo=function(v,O){return re(U(_(v))+" "+U(K(O))+" m"),this},Ys=g.lineTo=function(v,O){return re(U(_(v))+" "+U(K(O))+" l"),this},Oi=g.curveTo=function(v,O,ae,de,Be,Qe){return re([U(_(v)),U(K(O)),U(_(ae)),U(K(de)),U(_(Be)),U(K(Qe)),"c"].join(" ")),this};g.__private__.line=g.line=function(v,O,ae,de,Be){if(isNaN(v)||isNaN(O)||isNaN(ae)||isNaN(de)||!pi(Be))throw new Error("Invalid arguments passed to jsPDF.line");return N===y.COMPAT?this.lines([[ae-v,de-O]],v,O,[1,1],Be||"S"):this.lines([[ae-v,de-O]],v,O,[1,1]).stroke()},g.__private__.lines=g.lines=function(v,O,ae,de,Be,Qe){var Ge,rt,h,E,P,W,ge,Ie,qe,jt,en,Ot;if(typeof v=="number"&&(Ot=ae,ae=O,O=v,v=Ot),de=de||[1,1],Qe=Qe||!1,isNaN(O)||isNaN(ae)||!Array.isArray(v)||!Array.isArray(de)||!pi(Be)||typeof Qe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ji(O,ae),Ge=de[0],rt=de[1],E=v.length,jt=O,en=ae,h=0;h<E;h++)(P=v[h]).length===2?(jt=P[0]*Ge+jt,en=P[1]*rt+en,Ys(jt,en)):(W=P[0]*Ge+jt,ge=P[1]*rt+en,Ie=P[2]*Ge+jt,qe=P[3]*rt+en,jt=P[4]*Ge+jt,en=P[5]*rt+en,Oi(W,ge,Ie,qe,jt,en));return Qe&&Js(),Ll(Be),this},g.path=function(v){for(var O=0;O<v.length;O++){var ae=v[O],de=ae.c;switch(ae.op){case"m":ji(de[0],de[1]);break;case"l":Ys(de[0],de[1]);break;case"c":Oi.apply(this,de);break;case"h":Js()}}return this},g.__private__.rect=g.rect=function(v,O,ae,de,Be){if(isNaN(v)||isNaN(O)||isNaN(ae)||isNaN(de)||!pi(Be))throw new Error("Invalid arguments passed to jsPDF.rect");return N===y.COMPAT&&(de=-de),re([U(_(v)),U(K(O)),U(_(ae)),U(_(de)),"re"].join(" ")),Ll(Be),this},g.__private__.triangle=g.triangle=function(v,O,ae,de,Be,Qe,Ge){if(isNaN(v)||isNaN(O)||isNaN(ae)||isNaN(de)||isNaN(Be)||isNaN(Qe)||!pi(Ge))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ae-v,de-O],[Be-ae,Qe-de],[v-Be,O-Qe]],v,O,[1,1],Ge,!0),this},g.__private__.roundedRect=g.roundedRect=function(v,O,ae,de,Be,Qe,Ge){if(isNaN(v)||isNaN(O)||isNaN(ae)||isNaN(de)||isNaN(Be)||isNaN(Qe)||!pi(Ge))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var rt=4/3*(Math.SQRT2-1);return Be=Math.min(Be,.5*ae),Qe=Math.min(Qe,.5*de),this.lines([[ae-2*Be,0],[Be*rt,0,Be,Qe-Qe*rt,Be,Qe],[0,de-2*Qe],[0,Qe*rt,-Be*rt,Qe,-Be,Qe],[2*Be-ae,0],[-Be*rt,0,-Be,-Qe*rt,-Be,-Qe],[0,2*Qe-de],[0,-Qe*rt,Be*rt,-Qe,Be,-Qe]],v+Be,O,[1,1],Ge,!0),this},g.__private__.ellipse=g.ellipse=function(v,O,ae,de,Be){if(isNaN(v)||isNaN(O)||isNaN(ae)||isNaN(de)||!pi(Be))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Qe=4/3*(Math.SQRT2-1)*ae,Ge=4/3*(Math.SQRT2-1)*de;return ji(v+ae,O),Oi(v+ae,O-Ge,v+Qe,O-de,v,O-de),Oi(v-Qe,O-de,v-ae,O-Ge,v-ae,O),Oi(v-ae,O+Ge,v-Qe,O+de,v,O+de),Oi(v+Qe,O+de,v+ae,O+Ge,v+ae,O),Ll(Be),this},g.__private__.circle=g.circle=function(v,O,ae,de){if(isNaN(v)||isNaN(O)||isNaN(ae)||!pi(de))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,O,ae,ae,de)},g.setFont=function(v,O,ae){return ae&&(O=j(O,ae)),Dt=Xa(v,O,{disableWarning:!1}),this};var Rl=g.__private__.getFont=g.getFont=function(){return $t[Xa.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var v,O,ae={};for(v in cn)if(cn.hasOwnProperty(v))for(O in ae[v]=[],cn[v])cn[v].hasOwnProperty(O)&&ae[v].push(O);return ae},g.addFont=function(v,O,ae,de,Be){var Qe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Qe.indexOf(arguments[3])!==-1?Be=arguments[3]:arguments[3]&&Qe.indexOf(arguments[3])==-1&&(ae=j(ae,de)),Be=Be||"Identity-H",Ul.call(this,v,O,ae,Be)};var dn,kl=t.lineWidth||.200025,Yo=g.__private__.getLineWidth=g.getLineWidth=function(){return kl},Dl=g.__private__.setLineWidth=g.setLineWidth=function(v){return kl=v,re(U(_(v))+" w"),this};g.__private__.setLineDash=Ft.API.setLineDash=Ft.API.setLineDashPattern=function(v,O){if(v=v||[],O=O||0,isNaN(O)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(ae){return U(_(ae))}).join(" "),O=U(_(O)),re("["+v+"] "+O+" d"),this};var jl=g.__private__.getLineHeight=g.getLineHeight=function(){return pe*dn};g.__private__.getLineHeight=g.getLineHeight=function(){return pe*dn};var Ol=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(dn=v),this},Ya=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return dn};Ol(t.lineHeight);var Zs=g.__private__.getHorizontalCoordinate=function(v){return _(v)},Er=g.__private__.getVerticalCoordinate=function(v){return N===y.ADVANCED?v:Ve[X].mediaBox.topRightY-Ve[X].mediaBox.bottomLeftY-_(v)},nu=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(v){return U(Zs(v))},ya=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(v){return U(Er(v))},$r=t.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return bt($r)},g.__private__.setStrokeColor=g.setDrawColor=function(v,O,ae,de){return $r=Bt({ch1:v,ch2:O,ch3:ae,ch4:de,pdfColorType:"draw",precision:2}),re($r),this};var Zo=t.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return bt(Zo)},g.__private__.setFillColor=g.setFillColor=function(v,O,ae,de){return Zo=Bt({ch1:v,ch2:O,ch3:ae,ch4:de,pdfColorType:"fill",precision:2}),re(Zo),this};var Mi=t.textColor||"0 g",eA=g.__private__.getTextColor=g.getTextColor=function(){return bt(Mi)};g.__private__.setTextColor=g.setTextColor=function(v,O,ae,de){return Mi=Bt({ch1:v,ch2:O,ch3:ae,ch4:de,pdfColorType:"text",precision:3}),this};var Za=t.charSpace,tA=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(Za||0)};g.__private__.setCharSpace=g.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Za=v,this};var Ml=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(v){var O=g.CapJoinStyles[v];if(O===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ml=O,re(O+" J"),this};var nA=0;g.__private__.setLineJoin=g.setLineJoin=function(v){var O=g.CapJoinStyles[v];if(O===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return nA=O,re(O+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return re(U(_(v))+" M"),this},g.GState=pp,g.setGState=function(v){(v=typeof v=="string"?ot[nt[v]]:Ba(null,v)).equals(mt)||(re("/"+v.id+" gs"),mt=v)};var Ba=function(v,O){if(!v||!nt[v]){var ae=!1;for(var de in ot)if(ot.hasOwnProperty(de)&&ot[de].equals(O)){ae=!0;break}if(ae)O=ot[de];else{var Be="GS"+(Object.keys(ot).length+1).toString(10);ot[Be]=O,O.id=Be}return v&&(nt[v]=O.id),st.publish("addGState",O),O}};g.addGState=function(v,O){return Ba(v,O),this},g.saveGraphicsState=function(){return re("q"),Qr.push({key:Dt,size:pe,color:Mi}),this},g.restoreGraphicsState=function(){re("Q");var v=Qr.pop();return Dt=v.key,pe=v.size,Mi=v.color,mt=null,this},g.setCurrentTransformationMatrix=function(v){return re(v.toString()+" cm"),this},g.comment=function(v){return re("#"+v),this};var eo=function(v,O){var ae=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ae},set:function(Qe){isNaN(Qe)||(ae=parseFloat(Qe))}});var de=O||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return de},set:function(Qe){isNaN(Qe)||(de=parseFloat(Qe))}});var Be="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Be},set:function(Qe){Be=Qe.toString()}}),this},rA=function(v,O,ae,de){eo.call(this,v,O),this.type="rect";var Be=ae||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Be},set:function(Ge){isNaN(Ge)||(Be=parseFloat(Ge))}});var Qe=de||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Qe},set:function(Ge){isNaN(Ge)||(Qe=parseFloat(Ge))}}),this},to=function(){this.page=xt,this.currentPage=X,this.pages=Fe.slice(0),this.pagesContext=Ve.slice(0),this.x=bn,this.y=Gt,this.matrix=or,this.width=xa(X),this.height=ls(X),this.outputDestination=ve,this.id="",this.objectNumber=-1};to.prototype.restore=function(){xt=this.page,X=this.currentPage,Ve=this.pagesContext,Fe=this.pages,bn=this.x,Gt=this.y,or=this.matrix,iA(X,this.width),aA(X,this.height),ve=this.outputDestination};var sA=function(v,O,ae,de,Be){Ar.push(new to),xt=X=0,Fe=[],bn=v,Gt=O,or=Be,Cs([ae,de])},ru=function(v){if(On[v])Ar.pop().restore();else{var O=new to,ae="Xo"+(Object.keys(qt).length+1).toString(10);O.id=ae,On[v]=ae,qt[ae]=O,st.publish("addFormObject",O),Ar.pop().restore()}};for(var Hi in g.beginFormObject=function(v,O,ae,de,Be){return sA(v,O,ae,de,Be),this},g.endFormObject=function(v){return ru(v),this},g.doFormObject=function(v,O){var ae=qt[On[v]];return re("q"),re(O.toString()+" cm"),re("/"+ae.id+" Do"),re("Q"),this},g.getFormObject=function(v){var O=qt[On[v]];return{x:O.x,y:O.y,width:O.width,height:O.height,matrix:O.matrix}},g.save=function(v,O){return v=v||"generated.pdf",(O=O||{}).returnPromise=O.returnPromise||!1,O.returnPromise===!1?(nc(zo(Di()),v),typeof nc.unload=="function"&&Pt.setTimeout&&setTimeout(nc.unload,911),this):new Promise(function(ae,de){try{var Be=nc(zo(Di()),v);typeof nc.unload=="function"&&Pt.setTimeout&&setTimeout(nc.unload,911),ae(Be)}catch(Qe){de(Qe.message)}})},Ft.API)Ft.API.hasOwnProperty(Hi)&&(Hi==="events"&&Ft.API.events.length?function(v,O){var ae,de,Be;for(Be=O.length-1;Be!==-1;Be--)ae=O[Be][0],de=O[Be][1],v.subscribe.apply(v,[ae].concat(typeof de=="function"?[de]:de))}(st,Ft.API.events):g[Hi]=Ft.API[Hi]);var xa=g.getPageWidth=function(v){return(Ve[v=v||X].mediaBox.topRightX-Ve[v].mediaBox.bottomLeftX)/et},iA=g.setPageWidth=function(v,O){Ve[v].mediaBox.topRightX=O*et+Ve[v].mediaBox.bottomLeftX},ls=g.getPageHeight=function(v){return(Ve[v=v||X].mediaBox.topRightY-Ve[v].mediaBox.bottomLeftY)/et},aA=g.setPageHeight=function(v,O){Ve[v].mediaBox.topRightY=O*et+Ve[v].mediaBox.bottomLeftY};return g.internal={pdfEscape:tr,getStyle:eu,getFont:Rl,getFontSize:De,getCharSpace:tA,getTextColor:eA,getLineHeight:jl,getLineHeightFactor:Ya,getLineWidth:Yo,write:pt,getHorizontalCoordinate:Zs,getVerticalCoordinate:Er,getCoordinateString:nu,getVerticalCoordinateString:ya,collections:{},newObject:Xn,newAdditionalObject:lt,newObjectDeferred:ye,newObjectDeferredBegin:$e,getFilters:Wr,putStream:lr,events:st,scaleFactor:et,pageSize:{getWidth:function(){return xa(X)},setWidth:function(v){iA(X,v)},getHeight:function(){return ls(X)},setHeight:function(v){aA(X,v)}},encryptionOptions:d,encryption:Ln,getEncryptor:Zc,output:Wo,getNumberOfPages:mn,pages:Fe,out:re,f2:D,f3:S,getPageInfo:Pl,getPageInfoByObjId:Lt,getCurrentPageInfo:va,getPDFVersion:b,Point:eo,Rectangle:rA,Matrix:ft,hasHotfix:wa},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return xa(X)},set:function(v){iA(X,v)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return ls(X)},set:function(v){aA(X,v)},enumerable:!0,configurable:!0}),Jc.call(g,ke),Dt="F1",$a(s,n),st.publish("initialized"),g}Vu.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Vu.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Vu.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Vu.prototype.processOwnerPassword=function(t,e){return J2(X2(e).substr(0,5),t)},Vu.prototype.encryptor=function(t,e){var n=X2(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return J2(n,r)}},pp.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Bn(t)!==Bn(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},Ft.API={events:[]},Ft.version="3.0.1";var sr=Ft.API,mb=1,qc=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Su=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Mt=function(t){return t.toFixed(2)},CA=function(t){return t.toFixed(5)};sr.__acroform__={};var $s=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},rI=function(t){return t*mb},Na=function(t){var e=new y3,n=wt.internal.getHeight(t)||0,r=wt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Mt(r)),Number(Mt(n))],e},xz=sr.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},bz=sr.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},Cz=sr.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},mr=sr.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Cz(t,e-1)},gr=sr.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return xz(t,e-1)},wr=sr.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return bz(t,e-1)},Ez=sr.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,s=t[0],i=t[1],a=t[2],o=t[3],A={};return A.lowerLeft_X=n(s)||0,A.lowerLeft_Y=r(i+o)||0,A.upperRight_X=n(s+a)||0,A.upperRight_Y=r(i)||0,[Number(Mt(A.lowerLeft_X)),Number(Mt(A.lowerLeft_Y)),Number(Mt(A.upperRight_X)),Number(Mt(A.upperRight_Y))]},_z=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=Y2(t,n),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+Mt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=Na(t);return i.scope=t.scope,i.stream=e.join(`
`),i}},Y2=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(S){return S.split(`
`)}):s.map(function(S){return[S]});var i=n,a=wt.internal.getHeight(t)||0;a=a<0?-a:a;var o=wt.internal.getWidth(t)||0;o=o<0?-o:o;var A=function(S,_,T){if(S+1<s.length){var K=_+" "+s[S+1][0];return Ag(K,t,T).width<=o-4}return!1};i++;e:for(;i>0;){e="",i--;var c,d,f=Ag("3",t,i).height,p=t.multiline?a-i:(a-f)/2,g=p+=2,B=0,b=0,C=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+Ag(e,t,i=12).width+", FieldWidth:"+o+`
`;break}for(var w="",y=0,N=0;N<s.length;N++)if(s.hasOwnProperty(N)){var R=!1;if(s[N].length!==1&&C!==s[N].length-1){if((f+2)*(y+2)+2>a)continue e;w+=s[N][C],R=!0,b=N,N--}else{w=(w+=s[N][C]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var V=parseInt(N),j=A(V,w,i),U=N>=s.length-1;if(j&&!U){w+=" ",C=0;continue}if(j||U){if(U)b=V;else if(t.multiline&&(f+2)*(y+2)+2>a)continue e}else{if(!t.multiline||(f+2)*(y+2)+2>a)continue e;b=V}}for(var I="",Q=B;Q<=b;Q++){var D=s[Q];if(t.multiline){if(Q===b){I+=D[C]+" ",C=(C+1)%D.length;continue}if(Q===B){I+=D[D.length-1]+" ";continue}}I+=D[0]+" "}switch(I=I.substr(I.length-1)==" "?I.substr(0,I.length-1):I,d=Ag(I,t,i).width,t.textAlign){case"right":c=o-d-2;break;case"center":c=(o-d)/2;break;case"left":default:c=2}e+=Mt(c)+" "+Mt(g)+` Td
`,e+="("+qc(I)+`) Tj
`,e+=-Mt(c)+` 0 Td
`,g=-(i+2),d=0,B=R?b:b+1,y++,w=""}break}return r.text=e,r.fontSize=i,r},Ag=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:s}},Iz={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Nz=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},Sz=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,s=t[n];e.internal.newObjectDeferredBegin(s.objId,!0),Bn(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete t[r]}},Fz=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(ua.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Iz)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");mb=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new B3,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in r)if(r.hasOwnProperty(s)){var i=r[s];i.objId=void 0,i.hasAnnotation&&Nz(i,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,s){var i=!r;for(var a in r||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var o=r[a],A=[],c=o.Rect;if(o.Rect&&(o.Rect=Ez(o.Rect,s)),s.internal.newObjectDeferredBegin(o.objId,!0),o.DA=wt.createDefaultAppearanceStream(o),Bn(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(A=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=_z(o);A.push({key:"AP",value:"<</N "+d+">>"}),s.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var f="";for(var p in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(p)){var g=o.appearanceStreamContent[p];if(f+="/"+p+" ",f+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var a in g)if(g.hasOwnProperty(a)){var B=g[a];typeof B=="function"&&(B=B.call(s,o)),f+="/"+a+" "+B+" ",s.internal.acroformPlugin.xForms.indexOf(B)>=0||s.internal.acroformPlugin.xForms.push(B)}}else typeof(B=g)=="function"&&(B=B.call(s,o)),f+="/"+a+" "+B,s.internal.acroformPlugin.xForms.indexOf(B)>=0||s.internal.acroformPlugin.xForms.push(B);f+=">>"}A.push({key:"AP",value:`<<
`+f+">>"})}s.internal.putStream({additionalKeyValues:A,objectId:o.objId}),s.internal.out("endobj")}i&&Sz(s.internal.acroformPlugin.xForms,s)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},v3=sr.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(a){return a};if(Array.isArray(t)){for(var s="[",i=0;i<t.length;i++)switch(i!==0&&(s+=" "),Bn(t[i])){case"boolean":case"number":case"object":s+=t[i].toString();break;case"string":t[i].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),s+="("+qc(r(t[i].toString()))+")"):s+=t[i].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},My=function(t,e,n){var r=function(s){return s};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+qc(r(t))+")"},Pa=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Pa.prototype.toString=function(){return this.objId+" 0 R"},Pa.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Pa.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],s=this[r];s&&(Array.isArray(s)?t.push({key:r,value:v3(s,this.objId,this.scope)}):s instanceof Pa?(s.scope=this.scope,t.push({key:r,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:r,value:s}))}return t};var y3=function(){Pa.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};$s(y3,Pa);var B3=function(){Pa.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+qc(n(t))+")"}},set:function(n){t=n}})};$s(B3,Pa);var ua=function t(){Pa.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');e=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!mr(e,3)},set:function(w){w?this.F=gr(e,3):this.F=wr(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');n=w}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(w){r=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(w){r[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(w){r[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(w){r[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(w){r[3]=w}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof $0)return;i="FieldObject"+t.FieldNum++}var w=function(y){return y};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+qc(w(i))+")"},set:function(w){i=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(w){i=w}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(w){a=w}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(w){o=w}});var A=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return A},set:function(w){A=w}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/mb:c},set:function(w){c=w}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(w){d=w}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof $0||this instanceof ol))return My(f,this.objId,this.scope)},set:function(w){w=w.toString(),f=w}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Nr?p:My(p,this.objId,this.scope)},set:function(w){w=w.toString(),p=this instanceof Nr?w:w.substr(0,1)==="("?Su(w.substr(1,w.length-2)):Su(w)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Nr?Su(p.substr(1,p.length-1)):p},set:function(w){w=w.toString(),p=this instanceof Nr?"/"+w:w}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Nr?g:My(g,this.objId,this.scope)},set:function(w){w=w.toString(),g=this instanceof Nr?w:w.substr(0,1)==="("?Su(w.substr(1,w.length-2)):Su(w)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Nr?Su(g.substr(1,g.length-1)):g},set:function(w){w=w.toString(),g=this instanceof Nr?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var B,b=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return b},set:function(w){w=!!w,b=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(B)return B},set:function(w){B=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,1)},set:function(w){w?this.Ff=gr(this.Ff,1):this.Ff=wr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,2)},set:function(w){w?this.Ff=gr(this.Ff,2):this.Ff=wr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,3)},set:function(w){w?this.Ff=gr(this.Ff,3):this.Ff=wr(this.Ff,3)}});var C=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(C!==null)return C},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');C=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(C){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:C=2;break;case"center":case 1:C=1;break;case"left":case 0:default:C=0}}})};$s(ua,Pa);var yc=function(){ua.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return v3(e,this.objId,this.scope)},set:function(n){var r,s;s=[],typeof(r=n)=="string"&&(s=function(i,a,o){o||(o=1);for(var A,c=[];A=a.exec(i);)c.push(A[o]);return c}(r,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,18)},set:function(n){n?this.Ff=gr(this.Ff,18):this.Ff=wr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=gr(this.Ff,19):this.Ff=wr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,20)},set:function(n){n?(this.Ff=gr(this.Ff,20),e.sort()):this.Ff=wr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,22)},set:function(n){n?this.Ff=gr(this.Ff,22):this.Ff=wr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,23)},set:function(n){n?this.Ff=gr(this.Ff,23):this.Ff=wr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,27)},set:function(n){n?this.Ff=gr(this.Ff,27):this.Ff=wr(this.Ff,27)}}),this.hasAppearanceStream=!1};$s(yc,ua);var Bc=function(){yc.call(this),this.fontName="helvetica",this.combo=!1};$s(Bc,yc);var xc=function(){Bc.call(this),this.combo=!0};$s(xc,Bc);var _f=function(){xc.call(this),this.edit=!0};$s(_f,xc);var Nr=function(){ua.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,15)},set:function(n){n?this.Ff=gr(this.Ff,15):this.Ff=wr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,16)},set:function(n){n?this.Ff=gr(this.Ff,16):this.Ff=wr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,17)},set:function(n){n?this.Ff=gr(this.Ff,17):this.Ff=wr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,26)},set:function(n){n?this.Ff=gr(this.Ff,26):this.Ff=wr(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(i){return i};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,s=[];for(r in s.push("<<"),e)s.push("/"+r+" ("+qc(n(e[r]))+")");return s.push(">>"),s.join(`
`)}},set:function(n){Bn(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};$s(Nr,ua);var If=function(){Nr.call(this),this.pushButton=!0};$s(If,Nr);var bc=function(){Nr.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};$s(bc,Nr);var $0=function(){var t,e;ua.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(o){return o};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,a=[];for(i in a.push("<<"),r)a.push("/"+i+" ("+qc(s(r[i]))+")");return a.push(">>"),a.join(`
`)},set:function(s){Bn(s)==="object"&&(r=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(s){typeof s=="string"&&(r.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(s){n=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(s){n="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=wt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};$s($0,ua),bc.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},bc.prototype.createOption=function(t){var e=new $0;return e.Parent=this,e.optionName=t,this.Kids.push(e),Tz.call(this.scope,e),e};var Nf=function(){Nr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=wt.CheckBox.createAppearanceStream()};$s(Nf,Nr);var ol=function(){ua.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,13)},set:function(e){e?this.Ff=gr(this.Ff,13):this.Ff=wr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,21)},set:function(e){e?this.Ff=gr(this.Ff,21):this.Ff=wr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,23)},set:function(e){e?this.Ff=gr(this.Ff,23):this.Ff=wr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,24)},set:function(e){e?this.Ff=gr(this.Ff,24):this.Ff=wr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,25)},set:function(e){e?this.Ff=gr(this.Ff,25):this.Ff=wr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,26)},set:function(e){e?this.Ff=gr(this.Ff,26):this.Ff=wr(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};$s(ol,ua);var Sf=function(){ol.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!mr(this.Ff,14)},set:function(t){t?this.Ff=gr(this.Ff,14):this.Ff=wr(this.Ff,14)}}),this.password=!0};$s(Sf,ol);var wt={CheckBox:{createAppearanceStream:function(){return{N:{On:wt.CheckBox.YesNormal},D:{On:wt.CheckBox.YesPushDown,Off:wt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Na(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),i=Y2(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Mt(wt.internal.getWidth(t))+" "+Mt(wt.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Mt(i.fontSize)+" Tf "+s),n.push("BT"),n.push(i.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Na(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),s=[],i=wt.internal.getHeight(t),a=wt.internal.getWidth(t),o=Y2(t,t.caption);return s.push("1 g"),s.push("0 0 "+Mt(a)+" "+Mt(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Mt(a-1)+" "+Mt(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+n+" "+Mt(o.fontSize)+" Tf "+r),s.push(o.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=Na(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Mt(wt.internal.getWidth(t))+" "+Mt(wt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:wt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=wt.RadioButton.Circle.YesNormal,e.D[t]=wt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Na(t);e.scope=t.scope;var n=[],r=wt.internal.getWidth(t)<=wt.internal.getHeight(t)?wt.internal.getWidth(t)/4:wt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=wt.internal.Bezier_C,i=Number((r*s).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+CA(wt.internal.getWidth(t)/2)+" "+CA(wt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),n.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),n.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),n.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Na(t);e.scope=t.scope;var n=[],r=wt.internal.getWidth(t)<=wt.internal.getHeight(t)?wt.internal.getWidth(t)/4:wt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),i=Number((s*wt.internal.Bezier_C).toFixed(5)),a=Number((r*wt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+CA(wt.internal.getWidth(t)/2)+" "+CA(wt.internal.getHeight(t)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),n.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),n.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),n.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+CA(wt.internal.getWidth(t)/2)+" "+CA(wt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Na(t);e.scope=t.scope;var n=[],r=wt.internal.getWidth(t)<=wt.internal.getHeight(t)?wt.internal.getWidth(t)/4:wt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),i=Number((s*wt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+CA(wt.internal.getWidth(t)/2)+" "+CA(wt.internal.getHeight(t)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),n.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),n.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),n.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:wt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=wt.RadioButton.Cross.YesNormal,e.D[t]=wt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Na(t);e.scope=t.scope;var n=[],r=wt.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Mt(wt.internal.getWidth(t)-2)+" "+Mt(wt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Mt(r.x1.x)+" "+Mt(r.x1.y)+" m"),n.push(Mt(r.x2.x)+" "+Mt(r.x2.y)+" l"),n.push(Mt(r.x4.x)+" "+Mt(r.x4.y)+" m"),n.push(Mt(r.x3.x)+" "+Mt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Na(t);e.scope=t.scope;var n=wt.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Mt(wt.internal.getWidth(t))+" "+Mt(wt.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Mt(wt.internal.getWidth(t)-2)+" "+Mt(wt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Mt(n.x1.x)+" "+Mt(n.x1.y)+" m"),r.push(Mt(n.x2.x)+" "+Mt(n.x2.y)+" l"),r.push(Mt(n.x4.x)+" "+Mt(n.x4.y)+" m"),r.push(Mt(n.x3.x)+" "+Mt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Na(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Mt(wt.internal.getWidth(t))+" "+Mt(wt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};wt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=wt.internal.getWidth(t),n=wt.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},wt.internal.getWidth=function(t){var e=0;return Bn(t)==="object"&&(e=rI(t.Rect[2])),e},wt.internal.getHeight=function(t){var e=0;return Bn(t)==="object"&&(e=rI(t.Rect[3])),e};var Tz=sr.addField=function(t){if(Fz(this,t),!(t instanceof ua))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};sr.AcroFormChoiceField=yc,sr.AcroFormListBox=Bc,sr.AcroFormComboBox=xc,sr.AcroFormEditBox=_f,sr.AcroFormButton=Nr,sr.AcroFormPushButton=If,sr.AcroFormRadioButton=bc,sr.AcroFormCheckBox=Nf,sr.AcroFormTextField=ol,sr.AcroFormPasswordField=Sf,sr.AcroFormAppearance=wt,sr.AcroForm={ChoiceField:yc,ListBox:Bc,ComboBox:xc,EditBox:_f,Button:Nr,PushButton:If,RadioButton:bc,CheckBox:Nf,TextField:ol,PasswordField:Sf,Appearance:wt},Ft.AcroForm={ChoiceField:yc,ListBox:Bc,ComboBox:xc,EditBox:_f,Button:Nr,PushButton:If,RadioButton:bc,CheckBox:Nf,TextField:ol,PasswordField:Sf,Appearance:wt};var Uz=Ft.AcroForm;function x3(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(S,_){var T,K,oe,le,se,z=e;if((_=_||e)==="RGBA"||S.data!==void 0&&S.data instanceof Uint8ClampedArray&&"height"in S&&"width"in S)return"RGBA";if(j(S))for(se in n)for(oe=n[se],T=0;T<oe.length;T+=1){for(le=!0,K=0;K<oe[T].length;K+=1)if(oe[T][K]!==void 0&&oe[T][K]!==S[K]){le=!1;break}if(le===!0){z=se;break}}else for(se in n)for(oe=n[se],T=0;T<oe.length;T+=1){for(le=!0,K=0;K<oe[T].length;K+=1)if(oe[T][K]!==void 0&&oe[T][K]!==S.charCodeAt(K)){le=!1;break}if(le===!0){z=se;break}}return z===e&&_!==e&&(z=_),z},s=function S(_){for(var T=this.internal.write,K=this.internal.putStream,oe=(0,this.internal.getFilters)();oe.indexOf("FlateEncode")!==-1;)oe.splice(oe.indexOf("FlateEncode"),1);_.objectId=this.internal.newObject();var le=[];if(le.push({key:"Type",value:"/XObject"}),le.push({key:"Subtype",value:"/Image"}),le.push({key:"Width",value:_.width}),le.push({key:"Height",value:_.height}),_.colorSpace===C.INDEXED?le.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(_.palette.length/3-1)+" "+("sMask"in _&&_.sMask!==void 0?_.objectId+2:_.objectId+1)+" 0 R]"}):(le.push({key:"ColorSpace",value:"/"+_.colorSpace}),_.colorSpace===C.DEVICE_CMYK&&le.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),le.push({key:"BitsPerComponent",value:_.bitsPerComponent}),"decodeParameters"in _&&_.decodeParameters!==void 0&&le.push({key:"DecodeParms",value:"<<"+_.decodeParameters+">>"}),"transparency"in _&&Array.isArray(_.transparency)){for(var se="",z=0,Ae=_.transparency.length;z<Ae;z++)se+=_.transparency[z]+" "+_.transparency[z]+" ";le.push({key:"Mask",value:"["+se+"]"})}_.sMask!==void 0&&le.push({key:"SMask",value:_.objectId+1+" 0 R"});var ee=_.filter!==void 0?["/"+_.filter]:void 0;if(K({data:_.data,additionalKeyValues:le,alreadyAppliedFilters:ee,objectId:_.objectId}),T("endobj"),"sMask"in _&&_.sMask!==void 0){var we="/Predictor "+_.predictor+" /Colors 1 /BitsPerComponent "+_.bitsPerComponent+" /Columns "+_.width,k={width:_.width,height:_.height,colorSpace:"DeviceGray",bitsPerComponent:_.bitsPerComponent,decodeParameters:we,data:_.sMask};"filter"in _&&(k.filter=_.filter),S.call(this,k)}if(_.colorSpace===C.INDEXED){var X=this.internal.newObject();K({data:I(new Uint8Array(_.palette)),objectId:X}),T("endobj")}},i=function(){var S=this.internal.collections.addImage_images;for(var _ in S)s.call(this,S[_])},a=function(){var S,_=this.internal.collections.addImage_images,T=this.internal.write;for(var K in _)T("/I"+(S=_[K]).index,S.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",a))},A=function(){var S=this.internal.collections.addImage_images;return o.call(this),S},c=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(S){return typeof t["process"+S.toUpperCase()]=="function"},f=function(S){return Bn(S)==="object"&&S.nodeType===1},p=function(S,_){if(S.nodeName==="IMG"&&S.hasAttribute("src")){var T=""+S.getAttribute("src");if(T.indexOf("data:image/")===0)return Ef(unescape(T).split("base64,").pop());var K=t.loadFile(T,!0);if(K!==void 0)return K}if(S.nodeName==="CANVAS"){if(S.width===0||S.height===0)throw new Error("Given canvas must have data. Canvas width: "+S.width+", height: "+S.height);var oe;switch(_){case"PNG":oe="image/png";break;case"WEBP":oe="image/webp";break;case"JPEG":case"JPG":default:oe="image/jpeg"}return Ef(S.toDataURL(oe,1).split("base64,").pop())}},g=function(S){var _=this.internal.collections.addImage_images;if(_){for(var T in _)if(S===_[T].alias)return _[T]}},B=function(S,_,T){return S||_||(S=-96,_=-96),S<0&&(S=-1*T.width*72/S/this.internal.scaleFactor),_<0&&(_=-1*T.height*72/_/this.internal.scaleFactor),S===0&&(S=_*T.width/T.height),_===0&&(_=S*T.height/T.width),[S,_]},b=function(S,_,T,K,oe,le){var se=B.call(this,T,K,oe),z=this.internal.getCoordinateString,Ae=this.internal.getVerticalCoordinateString,ee=A.call(this);if(T=se[0],K=se[1],ee[oe.index]=oe,le){le*=Math.PI/180;var we=Math.cos(le),k=Math.sin(le),X=function(H){return H.toFixed(4)},Z=[X(we),X(k),X(-1*k),X(we),0,0,"cm"]}this.internal.write("q"),le?(this.internal.write([1,"0","0",1,z(S),Ae(_+K),"cm"].join(" ")),this.internal.write(Z.join(" ")),this.internal.write([z(T),"0","0",z(K),"0","0","cm"].join(" "))):this.internal.write([z(T),"0","0",z(K),z(S),Ae(_+K),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+oe.index+" Do"),this.internal.write("Q")},C=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},y=t.__addimage__.sHashCode=function(S){var _,T,K=0;if(typeof S=="string")for(T=S.length,_=0;_<T;_++)K=(K<<5)-K+S.charCodeAt(_),K|=0;else if(j(S))for(T=S.byteLength/2,_=0;_<T;_++)K=(K<<5)-K+S[_],K|=0;return K},N=t.__addimage__.validateStringAsBase64=function(S){(S=S||"").toString().trim();var _=!0;return S.length===0&&(_=!1),S.length%4!=0&&(_=!1),/^[A-Za-z0-9+/]+$/.test(S.substr(0,S.length-2))===!1&&(_=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(S.substr(-2))===!1&&(_=!1),_},R=t.__addimage__.extractImageFromDataUrl=function(S){if(S==null||!(S=S.trim()).startsWith("data:"))return null;var _=S.indexOf(",");return _<0?null:S.substring(0,_).trim().endsWith("base64")?S.substring(_+1):null},V=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(S){return V()&&S instanceof ArrayBuffer};var j=t.__addimage__.isArrayBufferView=function(S){return V()&&typeof Uint32Array<"u"&&(S instanceof Int8Array||S instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&S instanceof Uint8ClampedArray||S instanceof Int16Array||S instanceof Uint16Array||S instanceof Int32Array||S instanceof Uint32Array||S instanceof Float32Array||S instanceof Float64Array)},U=t.__addimage__.binaryStringToUint8Array=function(S){for(var _=S.length,T=new Uint8Array(_),K=0;K<_;K++)T[K]=S.charCodeAt(K);return T},I=t.__addimage__.arrayBufferToBinaryString=function(S){for(var _="",T=j(S)?S:new Uint8Array(S),K=0;K<T.length;K+=8192)_+=String.fromCharCode.apply(null,T.subarray(K,K+8192));return _};t.addImage=function(){var S,_,T,K,oe,le,se,z,Ae;if(typeof arguments[1]=="number"?(_=e,T=arguments[1],K=arguments[2],oe=arguments[3],le=arguments[4],se=arguments[5],z=arguments[6],Ae=arguments[7]):(_=arguments[1],T=arguments[2],K=arguments[3],oe=arguments[4],le=arguments[5],se=arguments[6],z=arguments[7],Ae=arguments[8]),Bn(S=arguments[0])==="object"&&!f(S)&&"imageData"in S){var ee=S;S=ee.imageData,_=ee.format||_||e,T=ee.x||T||0,K=ee.y||K||0,oe=ee.w||ee.width||oe,le=ee.h||ee.height||le,se=ee.alias||se,z=ee.compression||z,Ae=ee.rotation||ee.angle||Ae}var we=this.internal.getFilters();if(z===void 0&&we.indexOf("FlateEncode")!==-1&&(z="SLOW"),isNaN(T)||isNaN(K))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var k=Q.call(this,S,_,se,z);return b.call(this,T,K,oe,le,k,Ae),this};var Q=function(S,_,T,K){var oe,le,se;if(typeof S=="string"&&r(S)===e){S=unescape(S);var z=D(S,!1);(z!==""||(z=t.loadFile(S,!0))!==void 0)&&(S=z)}if(f(S)&&(S=p(S,_)),_=r(S,_),!d(_))throw new Error("addImage does not support files of type '"+_+"', please ensure that a plugin for '"+_+"' support is added.");if(((se=T)==null||se.length===0)&&(T=function(Ae){return typeof Ae=="string"||j(Ae)?y(Ae):j(Ae.data)?y(Ae.data):null}(S)),(oe=g.call(this,T))||(V()&&(S instanceof Uint8Array||_==="RGBA"||(le=S,S=U(S))),oe=this["process"+_.toUpperCase()](S,c.call(this),T,function(Ae){return Ae&&typeof Ae=="string"&&(Ae=Ae.toUpperCase()),Ae in t.image_compression?Ae:w.NONE}(K),le)),!oe)throw new Error("An unknown error occurred whilst processing the image.");return oe},D=t.__addimage__.convertBase64ToBinaryString=function(S,_){_=typeof _!="boolean"||_;var T,K="";if(typeof S=="string"){var oe;T=(oe=R(S))!==null&&oe!==void 0?oe:S;try{K=Ef(T)}catch(le){if(_)throw N(T)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+le.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return K};t.getImageProperties=function(S){var _,T,K="";if(f(S)&&(S=p(S)),typeof S=="string"&&r(S)===e&&((K=D(S,!1))===""&&(K=t.loadFile(S)||""),S=K),T=r(S),!d(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(!V()||S instanceof Uint8Array||(S=U(S)),!(_=this["process"+T.toUpperCase()](S)))throw new Error("An unknown error occurred whilst processing the image");return _.fileType=T,_}})(Ft.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};Ft.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,s,i,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,A=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,d=!1,f=0;f<c.length&&!d;f++)switch((r=c[f]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var p=0;p<c.length;p++){r=c[p];var g=this.internal.pdfEscape,B=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var b=this.internal.newAdditionalObject(),C=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(b.objId),y=r.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y)+"] ")+"/Contents ("+g(w(r.contents))+")",i+=" /Popup "+C.objId+" 0 R",i+=" /P "+A.objId+" 0 R",i+=" /T ("+g(w(y))+") >>",b.content=i;var N=b.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+a(r.bounds.x+30)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+o(r.bounds.y)+"] ")+" /Parent "+N,r.open&&(i+=" /Open true"),i+=" >>",C.content=i,this.internal.write(b.objId,"0 R",C.objId,"0 R");break;case"freetext":s="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y+r.bounds.h)+"] ";var R=r.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+g(B(r.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+R+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(r.options.name){var V=this.annotations._nameMap[r.options.name];r.options.pageNumber=V.page,r.options.top=V.y}else r.options.top||(r.options.top=0);if(s="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",i="",r.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+g(B(r.options.url))+") >>";else if(r.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,i+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var j=o(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),i+=" /XYZ "+r.options.left+" "+j+" "+r.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,s,i,a){var o=this.internal.getCurrentPageInfo(),A=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:A(n),y:c(r),w:A(n+s),h:c(r+i)},options:a,type:"link"})},t.textWithLink=function(n,r,s,i){var a,o,A=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){o=i.maxWidth;var d=this.splitTextToSize(n,o).length;a=Math.ceil(c*d)}else o=A,a=c;return this.text(n,r,s,i),s+=.2*c,i.align==="center"&&(r-=A/2),i.align==="right"&&(r-=A),this.link(r,s-c,o,a,i),A},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(Ft.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var i=t.__arabicParser__.isInArabicSubstitutionA=function(b){return e[b.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(b){return typeof b=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(b)},o=t.__arabicParser__.isArabicEndLetter=function(b){return a(b)&&i(b)&&e[b.charCodeAt(0)].length<=2},A=t.__arabicParser__.isArabicAlfLetter=function(b){return a(b)&&s.indexOf(b.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(b){return a(b)&&i(b)&&e[b.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(b){return a(b)&&i(b)&&e[b.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(b){return a(b)&&i(b)&&e[b.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(b){return a(b)&&i(b)&&e[b.charCodeAt(0)].length==4},f=t.__arabicParser__.resolveLigatures=function(b){var C=0,w=n,y="",N=0;for(C=0;C<b.length;C+=1)w[b.charCodeAt(C)]!==void 0?(N++,typeof(w=w[b.charCodeAt(C)])=="number"&&(y+=String.fromCharCode(w),w=n,N=0),C===b.length-1&&(w=n,y+=b.charAt(C-(N-1)),C-=N-1,N=0)):(w=n,y+=b.charAt(C-N),C-=N,N=0);return y};t.__arabicParser__.isArabicDiacritic=function(b){return b!==void 0&&r[b.charCodeAt(0)]!==void 0};var p=t.__arabicParser__.getCorrectForm=function(b,C,w){return a(b)?i(b)===!1?-1:!c(b)||!a(C)&&!a(w)||!a(w)&&o(C)||o(b)&&!a(C)||o(b)&&A(C)||o(b)&&o(C)?0:d(b)&&a(C)&&!o(C)&&a(w)&&c(w)?3:o(b)||!a(w)?1:2:-1},g=function(b){var C=0,w=0,y=0,N="",R="",V="",j=(b=b||"").split("\\s+"),U=[];for(C=0;C<j.length;C+=1){for(U.push(""),w=0;w<j[C].length;w+=1)N=j[C][w],R=j[C][w-1],V=j[C][w+1],a(N)?(y=p(N,R,V),U[C]+=y!==-1?String.fromCharCode(e[N.charCodeAt(0)][y]):N):U[C]+=N;U[C]=f(U[C])}return U.join(" ")},B=t.__arabicParser__.processArabic=t.processArabic=function(){var b,C=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(C)){var y=0;for(w=[],y=0;y<C.length;y+=1)Array.isArray(C[y])?w.push([g(C[y][0]),C[y][1],C[y][2]]):w.push([g(C[y])]);b=w}else b=g(C);return typeof arguments[0]=="string"?b:(arguments[0].text=b,arguments[0])};t.events.push(["preProcessText",B])}(Ft.API),Ft.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(o){n=o}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(o){i=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var s;if((n=n||"2d")!=="2d")return null;for(s in r)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=r[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Ft.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var A=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return A},set:function(b){A=b}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(b){c=b}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(b){d=b}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(b){f=b}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(b){p=b}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(b){g=b}});var B=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return B},set:function(b){B=b}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(A){return r.call(this),this.internal.__cell__.headerFunction=typeof A=="function"?A:void 0,this},t.getTextDimensions=function(A,c){r.call(this);var d=(c=c||{}).fontSize||this.getFontSize(),f=c.font||this.getFont(),p=c.scaleFactor||this.internal.scaleFactor,g=0,B=0,b=0,C=this;if(!Array.isArray(A)&&typeof A!="string"){if(typeof A!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");A=String(A)}var w=c.maxWidth;w>0?typeof A=="string"?A=this.splitTextToSize(A,w):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function(N,R){return N.concat(C.splitTextToSize(R,w))},[])):A=Array.isArray(A)?A:[A];for(var y=0;y<A.length;y++)g<(b=this.getStringUnitWidth(A[y],{font:f})*d)&&(g=b);return g!==0&&(B=A.length),{w:g/=p,h:Math.max((B*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/p,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var A=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(A.left,A.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var A;A=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,p=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===A.lineNumber?(A.x=(c.x||0)+(c.width||0),A.y=c.y||0):c.y+c.height+A.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),A.y=f.top,g&&p&&(this.printHeaderRow(A.lineNumber,!0),A.y+=p[0].height)):A.y=c.y+c.height||A.y),A.text[0]!==void 0&&(this.rect(A.x,A.y,A.width,A.height,n===!0?"FD":void 0),A.align==="right"?this.text(A.text,A.x+A.width-d,A.y+d,{align:"right",baseline:"top"}):A.align==="center"?this.text(A.text,A.x+A.width/2,A.y+d,{align:"center",baseline:"top",maxWidth:A.width-d-d}):this.text(A.text,A.x+d,A.y+d,{align:"left",baseline:"top",maxWidth:A.width-d-d})),this.internal.__cell__.lastCell=A,this};t.table=function(A,c,d,f,p){if(r.call(this),!d)throw new Error("No data for PDF table.");var g,B,b,C,w=[],y=[],N=[],R={},V={},j=[],U=[],I=(p=p||{}).autoSize||!1,Q=p.printHeaders!==!1,D=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,S=p.margins||Object.assign({width:this.getPageWidth()},e),_=typeof p.padding=="number"?p.padding:3,T=p.headerBackgroundColor||"#c8c8c8",K=p.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=Q,this.internal.__cell__.margins=S,this.internal.__cell__.table_font_size=D,this.internal.__cell__.padding=_,this.internal.__cell__.headerBackgroundColor=T,this.internal.__cell__.headerTextColor=K,this.setFontSize(D),f==null)y=w=Object.keys(d[0]),N=w.map(function(){return"left"});else if(Array.isArray(f)&&Bn(f[0])==="object")for(w=f.map(function(ee){return ee.name}),y=f.map(function(ee){return ee.prompt||ee.name||""}),N=f.map(function(ee){return ee.align||"left"}),g=0;g<f.length;g+=1)V[f[g].name]=f[g].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(y=w=f,N=w.map(function(){return"left"}));if(I||Array.isArray(f)&&typeof f[0]=="string")for(g=0;g<w.length;g+=1){for(R[C=w[g]]=d.map(function(ee){return ee[C]}),this.setFont(void 0,"bold"),j.push(this.getTextDimensions(y[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),B=R[C],this.setFont(void 0,"normal"),b=0;b<B.length;b+=1)j.push(this.getTextDimensions(B[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);V[C]=Math.max.apply(null,j)+_+_,j=[]}if(Q){var oe={};for(g=0;g<w.length;g+=1)oe[w[g]]={},oe[w[g]].text=y[g],oe[w[g]].align=N[g];var le=o.call(this,oe,V);U=w.map(function(ee){return new i(A,c,V[ee],le,oe[ee].text,void 0,oe[ee].align)}),this.setTableHeaderRow(U),this.printHeaderRow(1,!1)}var se=f.reduce(function(ee,we){return ee[we.name]=we.align,ee},{});for(g=0;g<d.length;g+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:g,data:d[g]},this);var z=o.call(this,d[g],V);for(b=0;b<w.length;b+=1){var Ae=d[g][w[b]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:g,col:b,data:Ae},this),a.call(this,new i(A,c,V[w[b]],z,Ae,g+2,se[w[b]]))}}return this.internal.__cell__.table_x=A,this.internal.__cell__.table_y=c,this};var o=function(A,c){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(A).map(function(g){var B=A[g];return this.splitTextToSize(B.hasOwnProperty("text")?B.text:B,c[g]-d-d)},this).map(function(g){return this.getLineHeightFactor()*g.length*f/p+d+d},this).reduce(function(g,B){return Math.max(g,B)},0)};t.setTableHeaderRow=function(A){r.call(this),this.internal.__cell__.tableHeaderRow=A},t.printHeaderRow=function(A,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){d=this.internal.__cell__.tableHeaderRow[g].clone(),c&&(d.y=this.internal.__cell__.margins.top||0,p.push(d)),d.lineNumber=A;var B=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,d),this.setTextColor(B)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),n=!1}}(Ft.API);var b3={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},C3=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Z2=x3(C3),E3=[100,200,300,400,500,600,700,800,900],Qz=x3(E3);function eB(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(i){return b3[i=i||"normal"]?i:"normal"}(t.style),r=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(t.weight),s=function(i){return typeof Z2[i=i||"normal"]=="number"?i:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,n,r].join(" ")}}}function sI(t,e,n,r){var s;for(s=n;s>=0&&s<e.length;s+=r)if(t[e[s]])return t[e[s]];for(s=n;s>=0&&s<e.length;s-=r)if(t[e[s]])return t[e[s]]}var Pz={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},iI={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function aI(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Lz(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",s=Object.assign({},Pz,n.genericFontFamilies||{}),i=null,a=null,o=0;o<e.length;++o)if(s[(i=eB(e[o])).family]&&(i.family=s[i.family]),t.hasOwnProperty(i.family)){a=t[i.family];break}if(!(a=a||t[r]))throw new Error("Could not find a font-family for the rule '"+aI(i)+"' and default family '"+r+"'.");if(a=function(A,c){if(c[A])return c[A];var d=Z2[A],f=d<=Z2.normal?-1:1,p=sI(c,C3,d,f);if(!p)throw new Error("Could not find a matching font-stretch value for "+A);return p}(i.stretch,a),a=function(A,c){if(c[A])return c[A];for(var d=b3[A],f=0;f<d.length;++f)if(c[d[f]])return c[d[f]];throw new Error("Could not find a matching font-style for "+A)}(i.style,a),!(a=function(A,c){if(c[A])return c[A];if(A===400&&c[500])return c[500];if(A===500&&c[400])return c[400];var d=Qz[A],f=sI(c,E3,d,A<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+A);return f}(i.weight,a)))throw new Error("Failed to resolve a font for the rule '"+aI(i)+"'.");return a}function oI(t){return t.trimLeft()}function Rz(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function kz(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var lg,AI,lI,Hy=["times"];(function(t){var e,n,r,s,i,a,o,A,c,d=function(k){return k=k||{},this.isStrokeTransparent=k.isStrokeTransparent||!1,this.strokeOpacity=k.strokeOpacity||1,this.strokeStyle=k.strokeStyle||"#000000",this.fillStyle=k.fillStyle||"#000000",this.isFillTransparent=k.isFillTransparent||!1,this.fillOpacity=k.fillOpacity||1,this.font=k.font||"10px sans-serif",this.textBaseline=k.textBaseline||"alphabetic",this.textAlign=k.textAlign||"left",this.lineWidth=k.lineWidth||1,this.lineJoin=k.lineJoin||"miter",this.lineCap=k.lineCap||"butt",this.path=k.path||[],this.transform=k.transform!==void 0?k.transform.clone():new A,this.globalCompositeOperation=k.globalCompositeOperation||"normal",this.globalAlpha=k.globalAlpha||1,this.clip_path=k.clip_path||[],this.currentPoint=k.currentPoint||new a,this.miterLimit=k.miterLimit||10,this.lastPoint=k.lastPoint||new a,this.lineDashOffset=k.lineDashOffset||0,this.lineDash=k.lineDash||[],this.margin=k.margin||[0,0,0,0],this.prevPageLastElemOffset=k.prevPageLastElemOffset||0,this.ignoreClearRect=typeof k.ignoreClearRect!="boolean"||k.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,A=this.internal.Matrix,c=new d}]);var f=function(k){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var X=k;Object.defineProperty(this,"pdf",{get:function(){return X}});var Z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Z},set:function(Ce){Z=!!Ce}});var H=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return H},set:function(Ce){H=!!Ce}});var Y=0;Object.defineProperty(this,"posX",{get:function(){return Y},set:function(Ce){isNaN(Ce)||(Y=Ce)}});var ue=0;Object.defineProperty(this,"posY",{get:function(){return ue},set:function(Ce){isNaN(Ce)||(ue=Ce)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(Ce){var re;typeof Ce=="number"?re=[Ce,Ce,Ce,Ce]:((re=new Array(4))[0]=Ce[0],re[1]=Ce.length>=2?Ce[1]:re[0],re[2]=Ce.length>=3?Ce[2]:re[0],re[3]=Ce.length>=4?Ce[3]:re[1]),c.margin=re}});var ie=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ie},set:function(Ce){ie=Ce}});var ce=0;Object.defineProperty(this,"lastBreak",{get:function(){return ce},set:function(Ce){ce=Ce}});var be=[];Object.defineProperty(this,"pageBreaks",{get:function(){return be},set:function(Ce){be=Ce}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(Ce){Ce instanceof d&&(c=Ce)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(Ce){c.path=Ce}});var Fe=[];Object.defineProperty(this,"ctxStack",{get:function(){return Fe},set:function(Ce){Fe=Ce}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ce){var re;re=p(Ce),this.ctx.fillStyle=re.style,this.ctx.isFillTransparent=re.a===0,this.ctx.fillOpacity=re.a,this.pdf.setFillColor(re.r,re.g,re.b,{a:re.a}),this.pdf.setTextColor(re.r,re.g,re.b,{a:re.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ce){var re=p(Ce);this.ctx.strokeStyle=re.style,this.ctx.isStrokeTransparent=re.a===0,this.ctx.strokeOpacity=re.a,re.a===0?this.pdf.setDrawColor(255,255,255):(re.a,this.pdf.setDrawColor(re.r,re.g,re.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ce){["butt","round","square"].indexOf(Ce)!==-1&&(this.ctx.lineCap=Ce,this.pdf.setLineCap(Ce))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ce){isNaN(Ce)||(this.ctx.lineWidth=Ce,this.pdf.setLineWidth(Ce))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ce){["bevel","round","miter"].indexOf(Ce)!==-1&&(this.ctx.lineJoin=Ce,this.pdf.setLineJoin(Ce))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ce){isNaN(Ce)||(this.ctx.miterLimit=Ce,this.pdf.setMiterLimit(Ce))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ce){this.ctx.textBaseline=Ce}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ce){["right","end","center","left","start"].indexOf(Ce)!==-1&&(this.ctx.textAlign=Ce)}});var ne=null;function ve(Ce,re){if(ne===null){var pt=function(He){var ke=[];return Object.keys(He).forEach(function(pe){He[pe].forEach(function(Pe){var De=null;switch(Pe){case"bold":De={family:pe,weight:"bold"};break;case"italic":De={family:pe,style:"italic"};break;case"bolditalic":De={family:pe,weight:"bold",style:"italic"};break;case"":case"normal":De={family:pe}}De!==null&&(De.ref={name:pe,style:Pe},ke.push(De))})}),ke}(Ce.getFontList());ne=function(He){for(var ke={},pe=0;pe<He.length;++pe){var Pe=eB(He[pe]),De=Pe.family,ze=Pe.stretch,Ye=Pe.style,dt=Pe.weight;ke[De]=ke[De]||{},ke[De][ze]=ke[De][ze]||{},ke[De][ze][Ye]=ke[De][ze][Ye]||{},ke[De][ze][Ye][dt]=Pe}return ke}(pt.concat(re))}return ne}var Re=null;Object.defineProperty(this,"fontFaces",{get:function(){return Re},set:function(Ce){ne=null,Re=Ce}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ce){var re;if(this.ctx.font=Ce,(re=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ce))!==null){var pt=re[1];re[2];var He=re[3],ke=re[4];re[5];var pe=re[6],Pe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ke)[2];ke=Math.floor(Pe==="px"?parseFloat(ke)*this.pdf.internal.scaleFactor:Pe==="em"?parseFloat(ke)*this.pdf.getFontSize():parseFloat(ke)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ke);var De=function(yt){var Dt,et,bn=[],Gt=yt.trim();if(Gt==="")return Hy;if(Gt in iI)return[iI[Gt]];for(;Gt!=="";){switch(et=null,Dt=(Gt=oI(Gt)).charAt(0)){case'"':case"'":et=Rz(Gt.substring(1),Dt);break;default:et=kz(Gt)}if(et===null||(bn.push(et[0]),(Gt=oI(et[1]))!==""&&Gt.charAt(0)!==","))return Hy;Gt=Gt.replace(/^,/,"")}return bn}(pe);if(this.fontFaces){var ze=Lz(ve(this.pdf,this.fontFaces),De.map(function(yt){return{family:yt,stretch:"normal",weight:He,style:pt}}));this.pdf.setFont(ze.ref.name,ze.ref.style)}else{var Ye="";(He==="bold"||parseInt(He,10)>=700||pt==="bold")&&(Ye="bold"),pt==="italic"&&(Ye+="italic"),Ye.length===0&&(Ye="normal");for(var dt="",Je={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},_t=0;_t<De.length;_t++){if(this.pdf.internal.getFont(De[_t],Ye,{noFallback:!0,disableWarning:!0})!==void 0){dt=De[_t];break}if(Ye==="bolditalic"&&this.pdf.internal.getFont(De[_t],"bold",{noFallback:!0,disableWarning:!0})!==void 0)dt=De[_t],Ye="bold";else if(this.pdf.internal.getFont(De[_t],"normal",{noFallback:!0,disableWarning:!0})!==void 0){dt=De[_t],Ye="normal";break}}if(dt===""){for(var St=0;St<De.length;St++)if(Je[De[St]]){dt=Je[De[St]];break}}dt=dt===""?"Times":dt,this.pdf.setFont(dt,Ye)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ce){this.ctx.globalCompositeOperation=Ce}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ce){this.ctx.globalAlpha=Ce}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ce){this.ctx.lineDashOffset=Ce,we.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ce){this.ctx.lineDash=Ce,we.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ce){this.ctx.ignoreClearRect=!!Ce}})};f.prototype.setLineDash=function(k){this.lineDash=k},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){R.call(this,"fill",!1)},f.prototype.stroke=function(){R.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(k,X){if(isNaN(k)||isNaN(X))throw Sn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Z=this.ctx.transform.applyToPoint(new a(k,X));this.path.push({type:"mt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new a(k,X)},f.prototype.closePath=function(){var k=new a(0,0),X=0;for(X=this.path.length-1;X!==-1;X--)if(this.path[X].type==="begin"&&Bn(this.path[X+1])==="object"&&typeof this.path[X+1].x=="number"){k=new a(this.path[X+1].x,this.path[X+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(k.x,k.y)},f.prototype.lineTo=function(k,X){if(isNaN(k)||isNaN(X))throw Sn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Z=this.ctx.transform.applyToPoint(new a(k,X));this.path.push({type:"lt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new a(Z.x,Z.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),R.call(this,null,!0)},f.prototype.quadraticCurveTo=function(k,X,Z,H){if(isNaN(Z)||isNaN(H)||isNaN(k)||isNaN(X))throw Sn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Y=this.ctx.transform.applyToPoint(new a(Z,H)),ue=this.ctx.transform.applyToPoint(new a(k,X));this.path.push({type:"qct",x1:ue.x,y1:ue.y,x:Y.x,y:Y.y}),this.ctx.lastPoint=new a(Y.x,Y.y)},f.prototype.bezierCurveTo=function(k,X,Z,H,Y,ue){if(isNaN(Y)||isNaN(ue)||isNaN(k)||isNaN(X)||isNaN(Z)||isNaN(H))throw Sn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ie=this.ctx.transform.applyToPoint(new a(Y,ue)),ce=this.ctx.transform.applyToPoint(new a(k,X)),be=this.ctx.transform.applyToPoint(new a(Z,H));this.path.push({type:"bct",x1:ce.x,y1:ce.y,x2:be.x,y2:be.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new a(ie.x,ie.y)},f.prototype.arc=function(k,X,Z,H,Y,ue){if(isNaN(k)||isNaN(X)||isNaN(Z)||isNaN(H)||isNaN(Y))throw Sn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ue=!!ue,!this.ctx.transform.isIdentity){var ie=this.ctx.transform.applyToPoint(new a(k,X));k=ie.x,X=ie.y;var ce=this.ctx.transform.applyToPoint(new a(0,Z)),be=this.ctx.transform.applyToPoint(new a(0,0));Z=Math.sqrt(Math.pow(ce.x-be.x,2)+Math.pow(ce.y-be.y,2))}Math.abs(Y-H)>=2*Math.PI&&(H=0,Y=2*Math.PI),this.path.push({type:"arc",x:k,y:X,radius:Z,startAngle:H,endAngle:Y,counterclockwise:ue})},f.prototype.arcTo=function(k,X,Z,H,Y){throw new Error("arcTo not implemented.")},f.prototype.rect=function(k,X,Z,H){if(isNaN(k)||isNaN(X)||isNaN(Z)||isNaN(H))throw Sn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(k,X),this.lineTo(k+Z,X),this.lineTo(k+Z,X+H),this.lineTo(k,X+H),this.lineTo(k,X),this.lineTo(k+Z,X),this.lineTo(k,X)},f.prototype.fillRect=function(k,X,Z,H){if(isNaN(k)||isNaN(X)||isNaN(Z)||isNaN(H))throw Sn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var Y={};this.lineCap!=="butt"&&(Y.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Y.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(k,X,Z,H),this.fill(),Y.hasOwnProperty("lineCap")&&(this.lineCap=Y.lineCap),Y.hasOwnProperty("lineJoin")&&(this.lineJoin=Y.lineJoin)}},f.prototype.strokeRect=function(k,X,Z,H){if(isNaN(k)||isNaN(X)||isNaN(Z)||isNaN(H))throw Sn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");B.call(this)||(this.beginPath(),this.rect(k,X,Z,H),this.stroke())},f.prototype.clearRect=function(k,X,Z,H){if(isNaN(k)||isNaN(X)||isNaN(Z)||isNaN(H))throw Sn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(k,X,Z,H))},f.prototype.save=function(k){k=typeof k!="boolean"||k;for(var X=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("q");if(this.pdf.setPage(X),k){this.ctx.fontSize=this.pdf.internal.getFontSize();var H=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=H}},f.prototype.restore=function(k){k=typeof k!="boolean"||k;for(var X=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("Q");this.pdf.setPage(X),k&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(k){var X,Z,H,Y;if(k.isCanvasGradient===!0&&(k=k.getColor()),!k)return{r:0,g:0,b:0,a:0,style:k};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(k))X=0,Z=0,H=0,Y=0;else{var ue=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(k);if(ue!==null)X=parseInt(ue[1]),Z=parseInt(ue[2]),H=parseInt(ue[3]),Y=1;else if((ue=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(k))!==null)X=parseInt(ue[1]),Z=parseInt(ue[2]),H=parseInt(ue[3]),Y=parseFloat(ue[4]);else{if(Y=1,typeof k=="string"&&k.charAt(0)!=="#"){var ie=new m3(k);k=ie.ok?ie.toHex():"#000000"}k.length===4?(X=k.substring(1,2),X+=X,Z=k.substring(2,3),Z+=Z,H=k.substring(3,4),H+=H):(X=k.substring(1,3),Z=k.substring(3,5),H=k.substring(5,7)),X=parseInt(X,16),Z=parseInt(Z,16),H=parseInt(H,16)}}return{r:X,g:Z,b:H,a:Y,style:k}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},B=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(k,X,Z,H){if(isNaN(X)||isNaN(Z)||typeof k!="string")throw Sn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(H=isNaN(H)?void 0:H,!g.call(this)){var Y=z(this.ctx.transform.rotation),ue=this.ctx.transform.scaleX;_.call(this,{text:k,x:X,y:Z,scale:ue,angle:Y,align:this.textAlign,maxWidth:H})}},f.prototype.strokeText=function(k,X,Z,H){if(isNaN(X)||isNaN(Z)||typeof k!="string")throw Sn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!B.call(this)){H=isNaN(H)?void 0:H;var Y=z(this.ctx.transform.rotation),ue=this.ctx.transform.scaleX;_.call(this,{text:k,x:X,y:Z,scale:ue,renderingMode:"stroke",angle:Y,align:this.textAlign,maxWidth:H})}},f.prototype.measureText=function(k){if(typeof k!="string")throw Sn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var X=this.pdf,Z=this.pdf.internal.scaleFactor,H=X.internal.getFontSize(),Y=X.getStringUnitWidth(k)*H/X.internal.scaleFactor,ue=function(ie){var ce=(ie=ie||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ce}}),this};return new ue({width:Y*=Math.round(96*Z/72*1e4)/1e4})},f.prototype.scale=function(k,X){if(isNaN(k)||isNaN(X))throw Sn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Z=new A(k,0,0,X,0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},f.prototype.rotate=function(k){if(isNaN(k))throw Sn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var X=new A(Math.cos(k),Math.sin(k),-Math.sin(k),Math.cos(k),0,0);this.ctx.transform=this.ctx.transform.multiply(X)},f.prototype.translate=function(k,X){if(isNaN(k)||isNaN(X))throw Sn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Z=new A(1,0,0,1,k,X);this.ctx.transform=this.ctx.transform.multiply(Z)},f.prototype.transform=function(k,X,Z,H,Y,ue){if(isNaN(k)||isNaN(X)||isNaN(Z)||isNaN(H)||isNaN(Y)||isNaN(ue))throw Sn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ie=new A(k,X,Z,H,Y,ue);this.ctx.transform=this.ctx.transform.multiply(ie)},f.prototype.setTransform=function(k,X,Z,H,Y,ue){k=isNaN(k)?1:k,X=isNaN(X)?0:X,Z=isNaN(Z)?0:Z,H=isNaN(H)?1:H,Y=isNaN(Y)?0:Y,ue=isNaN(ue)?0:ue,this.ctx.transform=new A(k,X,Z,H,Y,ue)};var b=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(k,X,Z,H,Y,ue,ie,ce,be){var Fe=this.pdf.getImageProperties(k),ne=1,ve=1,Re=1,Ce=1;H!==void 0&&ce!==void 0&&(Re=ce/H,Ce=be/Y,ne=Fe.width/H*ce/H,ve=Fe.height/Y*be/Y),ue===void 0&&(ue=X,ie=Z,X=0,Z=0),H!==void 0&&ce===void 0&&(ce=H,be=Y),H===void 0&&ce===void 0&&(ce=Fe.width,be=Fe.height);for(var re,pt=this.ctx.transform.decompose(),He=z(pt.rotate.shx),ke=new A,pe=(ke=(ke=(ke=ke.multiply(pt.translate)).multiply(pt.skew)).multiply(pt.scale)).applyToRectangle(new o(ue-X*Re,ie-Z*Ce,H*ne,Y*ve)),Pe=C.call(this,pe),De=[],ze=0;ze<Pe.length;ze+=1)De.indexOf(Pe[ze])===-1&&De.push(Pe[ze]);if(N(De),this.autoPaging)for(var Ye=De[0],dt=De[De.length-1],Je=Ye;Je<dt+1;Je++){this.pdf.setPage(Je);var _t=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],St=Je===1?this.posY+this.margin[0]:this.margin[0],yt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Dt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],et=Je===1?0:yt+(Je-2)*Dt;if(this.ctx.clip_path.length!==0){var bn=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(re,this.posX+this.margin[3],-et+St+this.ctx.prevPageLastElemOffset),V.call(this,"fill",!0),this.path=bn}var Gt=JSON.parse(JSON.stringify(pe));Gt=y([Gt],this.posX+this.margin[3],-et+St+this.ctx.prevPageLastElemOffset)[0];var or=(Je>Ye||Je<dt)&&b.call(this);or&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_t,Dt,null).clip().discardPath()),this.pdf.addImage(k,"JPEG",Gt.x,Gt.y,Gt.w,Gt.h,null,null,He),or&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(k,"JPEG",pe.x,pe.y,pe.w,pe.h,null,null,He)};var C=function(k,X,Z){var H=[];X=X||this.pdf.internal.pageSize.width,Z=Z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Y=this.posY+this.ctx.prevPageLastElemOffset;switch(k.type){default:case"mt":case"lt":H.push(Math.floor((k.y+Y)/Z)+1);break;case"arc":H.push(Math.floor((k.y+Y-k.radius)/Z)+1),H.push(Math.floor((k.y+Y+k.radius)/Z)+1);break;case"qct":var ue=Ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x,k.y);H.push(Math.floor((ue.y+Y)/Z)+1),H.push(Math.floor((ue.y+ue.h+Y)/Z)+1);break;case"bct":var ie=ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x2,k.y2,k.x,k.y);H.push(Math.floor((ie.y+Y)/Z)+1),H.push(Math.floor((ie.y+ie.h+Y)/Z)+1);break;case"rect":H.push(Math.floor((k.y+Y)/Z)+1),H.push(Math.floor((k.y+k.h+Y)/Z)+1)}for(var ce=0;ce<H.length;ce+=1)for(;this.pdf.internal.getNumberOfPages()<H[ce];)w.call(this);return H},w=function(){var k=this.fillStyle,X=this.strokeStyle,Z=this.font,H=this.lineCap,Y=this.lineWidth,ue=this.lineJoin;this.pdf.addPage(),this.fillStyle=k,this.strokeStyle=X,this.font=Z,this.lineCap=H,this.lineWidth=Y,this.lineJoin=ue},y=function(k,X,Z){for(var H=0;H<k.length;H++)switch(k[H].type){case"bct":k[H].x2+=X,k[H].y2+=Z;case"qct":k[H].x1+=X,k[H].y1+=Z;case"mt":case"lt":case"arc":default:k[H].x+=X,k[H].y+=Z}return k},N=function(k){return k.sort(function(X,Z){return X-Z})},R=function(k,X){for(var Z,H,Y=this.fillStyle,ue=this.strokeStyle,ie=this.lineCap,ce=this.lineWidth,be=Math.abs(ce*this.ctx.transform.scaleX),Fe=this.lineJoin,ne=JSON.parse(JSON.stringify(this.path)),ve=JSON.parse(JSON.stringify(this.path)),Re=[],Ce=0;Ce<ve.length;Ce++)if(ve[Ce].x!==void 0)for(var re=C.call(this,ve[Ce]),pt=0;pt<re.length;pt+=1)Re.indexOf(re[pt])===-1&&Re.push(re[pt]);for(var He=0;He<Re.length;He++)for(;this.pdf.internal.getNumberOfPages()<Re[He];)w.call(this);if(N(Re),this.autoPaging)for(var ke=Re[0],pe=Re[Re.length-1],Pe=ke;Pe<pe+1;Pe++){this.pdf.setPage(Pe),this.fillStyle=Y,this.strokeStyle=ue,this.lineCap=ie,this.lineWidth=be,this.lineJoin=Fe;var De=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ze=Pe===1?this.posY+this.margin[0]:this.margin[0],Ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],dt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Je=Pe===1?0:Ye+(Pe-2)*dt;if(this.ctx.clip_path.length!==0){var _t=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(Z,this.posX+this.margin[3],-Je+ze+this.ctx.prevPageLastElemOffset),V.call(this,k,!0),this.path=_t}if(H=JSON.parse(JSON.stringify(ne)),this.path=y(H,this.posX+this.margin[3],-Je+ze+this.ctx.prevPageLastElemOffset),X===!1||Pe===0){var St=(Pe>ke||Pe<pe)&&b.call(this);St&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],De,dt,null).clip().discardPath()),V.call(this,k,X),St&&this.pdf.restoreGraphicsState()}this.lineWidth=ce}else this.lineWidth=be,V.call(this,k,X),this.lineWidth=ce;this.path=ne},V=function(k,X){if((k!=="stroke"||X||!B.call(this))&&(k==="stroke"||X||!g.call(this))){for(var Z,H,Y=[],ue=this.path,ie=0;ie<ue.length;ie++){var ce=ue[ie];switch(ce.type){case"begin":Y.push({begin:!0});break;case"close":Y.push({close:!0});break;case"mt":Y.push({start:ce,deltas:[],abs:[]});break;case"lt":var be=Y.length;if(ue[ie-1]&&!isNaN(ue[ie-1].x)&&(Z=[ce.x-ue[ie-1].x,ce.y-ue[ie-1].y],be>0)){for(;be>=0;be--)if(Y[be-1].close!==!0&&Y[be-1].begin!==!0){Y[be-1].deltas.push(Z),Y[be-1].abs.push(ce);break}}break;case"bct":Z=[ce.x1-ue[ie-1].x,ce.y1-ue[ie-1].y,ce.x2-ue[ie-1].x,ce.y2-ue[ie-1].y,ce.x-ue[ie-1].x,ce.y-ue[ie-1].y],Y[Y.length-1].deltas.push(Z);break;case"qct":var Fe=ue[ie-1].x+2/3*(ce.x1-ue[ie-1].x),ne=ue[ie-1].y+2/3*(ce.y1-ue[ie-1].y),ve=ce.x+2/3*(ce.x1-ce.x),Re=ce.y+2/3*(ce.y1-ce.y),Ce=ce.x,re=ce.y;Z=[Fe-ue[ie-1].x,ne-ue[ie-1].y,ve-ue[ie-1].x,Re-ue[ie-1].y,Ce-ue[ie-1].x,re-ue[ie-1].y],Y[Y.length-1].deltas.push(Z);break;case"arc":Y.push({deltas:[],abs:[],arc:!0}),Array.isArray(Y[Y.length-1].abs)&&Y[Y.length-1].abs.push(ce)}}H=X?null:k==="stroke"?"stroke":"fill";for(var pt=!1,He=0;He<Y.length;He++)if(Y[He].arc)for(var ke=Y[He].abs,pe=0;pe<ke.length;pe++){var Pe=ke[pe];Pe.type==="arc"?I.call(this,Pe.x,Pe.y,Pe.radius,Pe.startAngle,Pe.endAngle,Pe.counterclockwise,void 0,X,!pt):T.call(this,Pe.x,Pe.y),pt=!0}else if(Y[He].close===!0)this.pdf.internal.out("h"),pt=!1;else if(Y[He].begin!==!0){var De=Y[He].start.x,ze=Y[He].start.y;K.call(this,Y[He].deltas,De,ze),pt=!0}H&&Q.call(this,H),X&&D.call(this)}},j=function(k){var X=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Z=X*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return k-Z;case"top":return k+X-Z;case"hanging":return k+X-2*Z;case"middle":return k+X/2-Z;case"ideographic":return k;case"alphabetic":default:return k}},U=function(k){return k+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var k=function(){};return k.colorStops=[],k.addColorStop=function(X,Z){this.colorStops.push([X,Z])},k.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},k.isCanvasGradient=!0,k},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var I=function(k,X,Z,H,Y,ue,ie,ce,be){for(var Fe=le.call(this,Z,H,Y,ue),ne=0;ne<Fe.length;ne++){var ve=Fe[ne];ne===0&&(be?S.call(this,ve.x1+k,ve.y1+X):T.call(this,ve.x1+k,ve.y1+X)),oe.call(this,k,X,ve.x2,ve.y2,ve.x3,ve.y3,ve.x4,ve.y4)}ce?D.call(this):Q.call(this,ie)},Q=function(k){switch(k){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},D=function(){this.pdf.clip(),this.pdf.discardPath()},S=function(k,X){this.pdf.internal.out(n(k)+" "+r(X)+" m")},_=function(k){var X;switch(k.align){case"right":case"end":X="right";break;case"center":X="center";break;case"left":case"start":default:X="left"}var Z=this.pdf.getTextDimensions(k.text),H=j.call(this,k.y),Y=U.call(this,H)-Z.h,ue=this.ctx.transform.applyToPoint(new a(k.x,H)),ie=this.ctx.transform.decompose(),ce=new A;ce=(ce=(ce=ce.multiply(ie.translate)).multiply(ie.skew)).multiply(ie.scale);for(var be,Fe,ne,ve=this.ctx.transform.applyToRectangle(new o(k.x,H,Z.w,Z.h)),Re=ce.applyToRectangle(new o(k.x,Y,Z.w,Z.h)),Ce=C.call(this,Re),re=[],pt=0;pt<Ce.length;pt+=1)re.indexOf(Ce[pt])===-1&&re.push(Ce[pt]);if(N(re),this.autoPaging)for(var He=re[0],ke=re[re.length-1],pe=He;pe<ke+1;pe++){this.pdf.setPage(pe);var Pe=pe===1?this.posY+this.margin[0]:this.margin[0],De=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ze=this.pdf.internal.pageSize.height-this.margin[2],Ye=ze-this.margin[0],dt=this.pdf.internal.pageSize.width-this.margin[1],Je=dt-this.margin[3],_t=pe===1?0:De+(pe-2)*Ye;if(this.ctx.clip_path.length!==0){var St=this.path;be=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(be,this.posX+this.margin[3],-1*_t+Pe),V.call(this,"fill",!0),this.path=St}var yt=y([JSON.parse(JSON.stringify(Re))],this.posX+this.margin[3],-_t+Pe+this.ctx.prevPageLastElemOffset)[0];k.scale>=.01&&(Fe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Fe*k.scale),ne=this.lineWidth,this.lineWidth=ne*k.scale);var Dt=this.autoPaging!=="text";if(Dt||yt.y+yt.h<=ze){if(Dt||yt.y>=Pe&&yt.x<=dt){var et=Dt?k.text:this.pdf.splitTextToSize(k.text,k.maxWidth||dt-yt.x)[0],bn=y([JSON.parse(JSON.stringify(ve))],this.posX+this.margin[3],-_t+Pe+this.ctx.prevPageLastElemOffset)[0],Gt=Dt&&(pe>He||pe<ke)&&b.call(this);Gt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Je,Ye,null).clip().discardPath()),this.pdf.text(et,bn.x,bn.y,{angle:k.angle,align:X,renderingMode:k.renderingMode}),Gt&&this.pdf.restoreGraphicsState()}}else yt.y<ze&&(this.ctx.prevPageLastElemOffset+=ze-yt.y);k.scale>=.01&&(this.pdf.setFontSize(Fe),this.lineWidth=ne)}else k.scale>=.01&&(Fe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Fe*k.scale),ne=this.lineWidth,this.lineWidth=ne*k.scale),this.pdf.text(k.text,ue.x+this.posX,ue.y+this.posY,{angle:k.angle,align:X,renderingMode:k.renderingMode,maxWidth:k.maxWidth}),k.scale>=.01&&(this.pdf.setFontSize(Fe),this.lineWidth=ne)},T=function(k,X,Z,H){Z=Z||0,H=H||0,this.pdf.internal.out(n(k+Z)+" "+r(X+H)+" l")},K=function(k,X,Z){return this.pdf.lines(k,X,Z,null,null)},oe=function(k,X,Z,H,Y,ue,ie,ce){this.pdf.internal.out([e(s(Z+k)),e(i(H+X)),e(s(Y+k)),e(i(ue+X)),e(s(ie+k)),e(i(ce+X)),"c"].join(" "))},le=function(k,X,Z,H){for(var Y=2*Math.PI,ue=Math.PI/2;X>Z;)X-=Y;var ie=Math.abs(Z-X);ie<Y&&H&&(ie=Y-ie);for(var ce=[],be=H?-1:1,Fe=X;ie>1e-5;){var ne=Fe+be*Math.min(ie,ue);ce.push(se.call(this,k,Fe,ne)),ie-=Math.abs(ne-Fe),Fe=ne}return ce},se=function(k,X,Z){var H=(Z-X)/2,Y=k*Math.cos(H),ue=k*Math.sin(H),ie=Y,ce=-ue,be=ie*ie+ce*ce,Fe=be+ie*Y+ce*ue,ne=4/3*(Math.sqrt(2*be*Fe)-Fe)/(ie*ue-ce*Y),ve=ie-ne*ce,Re=ce+ne*ie,Ce=ve,re=-Re,pt=H+X,He=Math.cos(pt),ke=Math.sin(pt);return{x1:k*Math.cos(X),y1:k*Math.sin(X),x2:ve*He-Re*ke,y2:ve*ke+Re*He,x3:Ce*He-re*ke,y3:Ce*ke+re*He,x4:k*Math.cos(Z),y4:k*Math.sin(Z)}},z=function(k){return 180*k/Math.PI},Ae=function(k,X,Z,H,Y,ue){var ie=k+.5*(Z-k),ce=X+.5*(H-X),be=Y+.5*(Z-Y),Fe=ue+.5*(H-ue),ne=Math.min(k,Y,ie,be),ve=Math.max(k,Y,ie,be),Re=Math.min(X,ue,ce,Fe),Ce=Math.max(X,ue,ce,Fe);return new o(ne,Re,ve-ne,Ce-Re)},ee=function(k,X,Z,H,Y,ue,ie,ce){var be,Fe,ne,ve,Re,Ce,re,pt,He,ke,pe,Pe,De,ze,Ye=Z-k,dt=H-X,Je=Y-Z,_t=ue-H,St=ie-Y,yt=ce-ue;for(Fe=0;Fe<41;Fe++)He=(re=(ne=k+(be=Fe/40)*Ye)+be*((Re=Z+be*Je)-ne))+be*(Re+be*(Y+be*St-Re)-re),ke=(pt=(ve=X+be*dt)+be*((Ce=H+be*_t)-ve))+be*(Ce+be*(ue+be*yt-Ce)-pt),Fe==0?(pe=He,Pe=ke,De=He,ze=ke):(pe=Math.min(pe,He),Pe=Math.min(Pe,ke),De=Math.max(De,He),ze=Math.max(ze,ke));return new o(Math.round(pe),Math.round(Pe),Math.round(De-pe),Math.round(ze-Pe))},we=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var k,X,Z=(k=this.ctx.lineDash,X=this.ctx.lineDashOffset,JSON.stringify({lineDash:k,lineDashOffset:X}));this.prevLineDash!==Z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Z)}}})(Ft.API),function(t){var e=function(i){var a,o,A,c,d,f,p,g,B,b;for(o=[],A=0,c=(i+=a="\0\0\0\0".slice(i.length%4||4)).length;c>A;A+=4)(d=(i.charCodeAt(A)<<24)+(i.charCodeAt(A+1)<<16)+(i.charCodeAt(A+2)<<8)+i.charCodeAt(A+3))!==0?(f=(d=((d=((d=((d=(d-(b=d%85))/85)-(B=d%85))/85)-(g=d%85))/85)-(p=d%85))/85)%85,o.push(f+33,p+33,g+33,B+33,b+33)):o.push(122);return function(C,w){for(var y=w;y>0;y--)C.pop()}(o,a.length),String.fromCharCode.apply(String,o)+"~>"},n=function(i){var a,o,A,c,d,f=String,p="length",g=255,B="charCodeAt",b="slice",C="replace";for(i[b](-2),i=i[b](0,-2)[C](/\s/g,"")[C]("z","!!!!!"),A=[],c=0,d=(i+=a="uuuuu"[b](i[p]%5||5))[p];d>c;c+=5)o=52200625*(i[B](c)-33)+614125*(i[B](c+1)-33)+7225*(i[B](c+2)-33)+85*(i[B](c+3)-33)+(i[B](c+4)-33),A.push(g&o>>24,g&o>>16,g&o>>8,g&o);return function(w,y){for(var N=y;N>0;N--)w.pop()}(A,a[p]),f.fromCharCode.apply(f,A)},r=function(i){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),a.test(i)===!1)return"";for(var o="",A=0;A<i.length;A+=2)o+=String.fromCharCode("0x"+(i[A]+i[A+1]));return o},s=function(i){for(var a=new Uint8Array(i.length),o=i.length;o--;)a[o]=i.charCodeAt(o);return i=(a=W2(a)).reduce(function(A,c){return A+String.fromCharCode(c)},"")};t.processDataByFilters=function(i,a){var o=0,A=i||"",c=[];for(typeof(a=a||[])=="string"&&(a=[a]),o=0;o<a.length;o+=1)switch(a[o]){case"ASCII85Decode":case"/ASCII85Decode":A=n(A),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":A=e(A),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":A=r(A),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":A=A.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":A=s(A),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[o]+'" is not implemented')}return{data:A,reverseChain:c.reverse().join(" ")}}}(Ft.API),function(t){t.loadFile=function(e,n,r){return function(s,i,a){i=i!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(A,c,d){var f=new XMLHttpRequest,p=0,g=function(B){var b=B.length,C=[],w=String.fromCharCode;for(p=0;p<b;p+=1)C.push(w(255&B.charCodeAt(p)));return C.join("")};if(f.open("GET",A,!c),f.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(f.onload=function(){f.status===200?d(g(this.responseText)):d(void 0)}),f.send(null),c&&f.status===200)return g(f.responseText)}(s,i,a)}catch{}return o}(e,n,r)},t.loadImageFile=t.loadFile}(Ft.API),function(t){function e(){return(Pt.html2canvas?Promise.resolve(Pt.html2canvas):To(()=>Promise.resolve().then(()=>hb),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function n(){return(Pt.DOMPurify?Promise.resolve(Pt.DOMPurify):To(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var o=Bn(a);return o==="undefined"?"undefined":o==="string"||a instanceof String?"string":o==="number"||a instanceof Number?"number":o==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":o==="object"?"object":"unknown"},s=function(a,o){var A=document.createElement(a);for(var c in o.className&&(A.className=o.className),o.innerHTML&&o.dompurify&&(A.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)A.style[c]=o.style[c];return A},i=function a(o){var A=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),c=a.convert(Promise.resolve(),A);return c=(c=c.setProgress(1,a,1,[a])).set(o)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(a,o){return a.__proto__=o||i.prototype,a},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(a,o){return this.then(function(){switch(o=o||function(A){switch(r(A)){case"string":return"string";case"element":return A.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(n).then(function(A){return this.set({src:s("div",{innerHTML:a,dompurify:A})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},i.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function A(c,d){for(var f=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),p=c.firstChild;p;p=p.nextSibling)d!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||f.appendChild(A(p,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(f.width=c.width,f.height=c.height,f.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(f.value=c.value),f.addEventListener("load",function(){f.scrollTop=c.scrollTop,f.scrollLeft=c.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var A=Object.assign({},this.opt.html2canvas);return delete A.onrendered,o(this.prop.container,A)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var A=this.opt.jsPDF,c=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,A.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,A.context2d.posX=this.opt.x,A.context2d.posY=this.opt.y,A.context2d.margin=this.opt.margin,A.context2d.fontFaces=c,c)for(var p=0;p<c.length;++p){var g=c[p],B=g.src.find(function(b){return b.format==="truetype"});B&&A.addFont(B.url,g.ref.name,g.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,A.context2d.save(!0),o(this.prop.container,f)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(a,o,A){return(A=A||"pdf").toLowerCase()==="img"||A.toLowerCase()==="image"?this.outputImg(a,o):this.outputPdf(a,o)},i.prototype.outputPdf=function(a,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,o)})},i.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},i.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(a){if(r(a)!=="object")return this;var o=Object.keys(a||{}).map(function(A){if(A in i.template.prop)return function(){this.prop[A]=a[A]};switch(A){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[A]=a[A]}}},this);return this.then(function(){return this.thenList(o)})},i.prototype.get=function(a,o){return this.then(function(){var A=a in i.template.prop?this.prop[a]:this.opt[a];return o?o(A):A})},i.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},i.prototype.setPageSize=function(a){function o(A,c){return Math.floor(A*c/72*96)}return this.then(function(){(a=a||Ft.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:o(a.inner.width,a.k),height:o(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},i.prototype.setProgress=function(a,o,A,c){return a!=null&&(this.progress.val=a),o!=null&&(this.progress.state=o),A!=null&&(this.progress.n=A),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(a,o,A,c){return this.setProgress(a?this.progress.val+a:null,o||null,A?this.progress.n+A:null,c?this.progress.stack.concat(c):null)},i.prototype.then=function(a,o){var A=this;return this.thenCore(a,o,function(c,d){return A.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(f){return A.updateProgress(null,c),f}).then(c,d).then(function(f){return A.updateProgress(1),f})})},i.prototype.thenCore=function(a,o,A){A=A||Promise.prototype.then,a&&(a=a.bind(this)),o&&(o=o.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),d=A.call(c,a,o);return i.convert(d,this.__proto__)},i.prototype.thenExternal=function(a,o){return Promise.prototype.then.call(this,a,o)},i.prototype.thenList=function(a){var o=this;return a.forEach(function(A){o=o.thenCore(A)}),o},i.prototype.catch=function(a){a&&(a=a.bind(this));var o=Promise.prototype.catch.call(this,a);return i.convert(o,this)},i.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},i.prototype.error=function(a){return this.then(function(){throw new Error(a)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Ft.getPageSize=function(a,o,A){if(Bn(a)==="object"){var c=a;a=c.orientation,o=c.unit||o,A=c.format||A}o=o||"mm",A=A||"a4",a=(""+(a||"P")).toLowerCase();var d,f=(""+A).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+o}var g,B=0,b=0;if(p.hasOwnProperty(f))B=p[f][1]/d,b=p[f][0]/d;else try{B=A[1],b=A[0]}catch{throw new Error("Invalid format: "+A)}if(a==="p"||a==="portrait")a="p",b>B&&(g=b,b=B,B=g);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",B>b&&(g=b,b=B,B=g)}return{width:b,height:B,unit:o,k:d,orientation:a}},t.html=function(a,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(eB):null;var A=new i(o);return o.worker?A:A.from(a).doCallback()}}(Ft.API),Ft.API.addJS=function(t){return lI=t,this.internal.events.subscribe("postPutResources",function(){lg=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(lg+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),AI=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+lI+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){lg!==void 0&&AI!==void 0&&this.internal.out("/Names <</JavaScript "+lg+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=n.outline.render().split(/\r\n/),i=0;i<s.length;i++){var a=s[i],o=r.exec(a);if(o!=null){var A=o[1];n.internal.newObjectDeferredBegin(A,!1)}n.internal.write(a)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,d=[];for(i=0;i<c;i++){var f=n.internal.newObject();d.push(f);var p=n.internal.getPageInfo(i+1);n.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var g=n.internal.newObject();for(n.internal.write("<< /Names [ "),i=0;i<d.length;i++)n.internal.write("(page_"+(i+1)+")"+d[i]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+g+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,s,i){var a={title:s,options:i,children:[]};return r==null&&(r=this.root),r.children.push(a),a},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var s=0;s<r.children.length;s++)this.genIds_r(r.children[s])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<r.children.length;i++){var a=r.children[i];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),i>0&&this.line("/Prev "+this.makeRef(r.children[i-1])),i<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[i+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var A=n.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+A.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,s){for(var i=0;i<s.children.length;i++)r.count++,this.count_r(r,s.children[i]);return r.count}}])}(Ft.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,s,i,a,o){var A,c=this.decode.DCT_DECODE,d=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=a||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(A=function(f){for(var p,g=256*f.charCodeAt(4)+f.charCodeAt(5),B=f.length,b={width:0,height:0,numcomponents:1},C=4;C<B;C+=2){if(C+=g,e.indexOf(f.charCodeAt(C+1))!==-1){p=256*f.charCodeAt(C+5)+f.charCodeAt(C+6),b={width:256*f.charCodeAt(C+7)+f.charCodeAt(C+8),height:p,numcomponents:f.charCodeAt(C+9)};break}g=256*f.charCodeAt(C+2)+f.charCodeAt(C+3)}return b}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:n,width:A.width,height:A.height,colorSpace:o,bitsPerComponent:8,filter:c,index:r,alias:s}}return d}}(Ft.API);var Fu,cg,cI,uI,dI,Dz=function(){var t,e,n;function r(i){var a,o,A,c,d,f,p,g,B,b,C,w,y,N;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(a=this.readUInt32(),B=(function(){var R,V;for(V=[],R=0;R<4;++R)V.push(String.fromCharCode(this.data[this.pos++]));return V}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),c=this.readUInt16()||100,f.delay=1e3*d/c,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(B==="fdAT"&&(this.pos+=4,a-=4),i=(f!=null?f.data:void 0)||this.imgData,w=0;0<=a?w<a:w>a;0<=a?++w:--w)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(A=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>A)throw new Error("More transparent colors than palette size");if((b=A-this.transparency.indexed.length)>0)for(y=0;0<=b?y<b:y>b;0<=b?++y:--y)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":p=(C=this.read(a)).indexOf(0),g=String.fromCharCode.apply(String,C.slice(0,p)),this.text[g]=String.fromCharCode.apply(String,C.slice(p+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(N=this.colorType)===4||N===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(i){var a,o;for(o=[],a=0;0<=i?a<i:a>i;0<=i?++a:--a)o.push(this.data[this.pos++]);return o},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(i){var a=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*a),A=0,c=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function d(f,p,g,B){var b,C,w,y,N,R,V,j,U,I,Q,D,S,_,T,K,oe,le,se,z,Ae,ee=Math.ceil((c.width-f)/g),we=Math.ceil((c.height-p)/B),k=c.width==ee&&c.height==we;for(_=a*ee,D=k?o:new Uint8Array(_*we),R=i.length,S=0,C=0;S<we&&A<R;){switch(i[A++]){case 0:for(y=oe=0;oe<_;y=oe+=1)D[C++]=i[A++];break;case 1:for(y=le=0;le<_;y=le+=1)b=i[A++],N=y<a?0:D[C-a],D[C++]=(b+N)%256;break;case 2:for(y=se=0;se<_;y=se+=1)b=i[A++],w=(y-y%a)/a,T=S&&D[(S-1)*_+w*a+y%a],D[C++]=(T+b)%256;break;case 3:for(y=z=0;z<_;y=z+=1)b=i[A++],w=(y-y%a)/a,N=y<a?0:D[C-a],T=S&&D[(S-1)*_+w*a+y%a],D[C++]=(b+Math.floor((N+T)/2))%256;break;case 4:for(y=Ae=0;Ae<_;y=Ae+=1)b=i[A++],w=(y-y%a)/a,N=y<a?0:D[C-a],S===0?T=K=0:(T=D[(S-1)*_+w*a+y%a],K=w&&D[(S-1)*_+(w-1)*a+y%a]),V=N+T-K,j=Math.abs(V-N),I=Math.abs(V-T),Q=Math.abs(V-K),U=j<=I&&j<=Q?N:I<=Q?T:K,D[C++]=(b+U)%256;break;default:throw new Error("Invalid filter algorithm: "+i[A-1])}if(!k){var X=((p+S*B)*c.width+f)*a,Z=S*_;for(y=0;y<ee;y+=1){for(var H=0;H<a;H+=1)o[X++]=D[Z++];X+=(g-1)*a}}S++}}return i=pz(i),c.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),o},r.prototype.decodePalette=function(){var i,a,o,A,c,d,f,p,g;for(o=this.palette,d=this.transparency.indexed||[],c=new Uint8Array((d.length||0)+o.length),A=0,i=0,a=f=0,p=o.length;f<p;a=f+=3)c[A++]=o[a],c[A++]=o[a+1],c[A++]=o[a+2],c[A++]=(g=d[i++])!=null?g:255;return c},r.prototype.copyToImageData=function(i,a){var o,A,c,d,f,p,g,B,b,C,w;if(A=this.colors,b=null,o=this.hasAlphaChannel,this.palette.length&&(b=(w=this._decodedPalette)!=null?w:this._decodedPalette=this.decodePalette(),A=4,o=!0),B=(c=i.data||i).length,f=b||a,d=p=0,A===1)for(;d<B;)g=b?4*a[d/4]:p,C=f[g++],c[d++]=C,c[d++]=C,c[d++]=C,c[d++]=o?f[g++]:255,p=g;else for(;d<B;)g=b?4*a[d/4]:p,c[d++]=f[g++],c[d++]=f[g++],c[d++]=f[g++],c[d++]=o?f[g++]:255,p=g},r.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var s=function(){if(Object.prototype.toString.call(Pt)==="[object Window]"){try{e=Pt.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),t=function(i){var a;if(s()===!0)return n.width=i.width,n.height=i.height,n.clearRect(0,0,i.width,i.height),n.putImageData(i,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(i){var a,o,A,c,d,f,p,g;if(this.animation){for(g=[],o=d=0,f=(p=this.animation.frames).length;d<f;o=++d)a=p[o],A=i.createImageData(a.width,a.height),c=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(A,c),a.imageData=A,g.push(a.image=t(A));return g}},r.prototype.renderFrame=function(i,a){var o,A,c;return o=(A=this.animation.frames)[a],c=A[a-1],a===0&&i.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?i.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&i.putImageData(c.imageData,c.xOffset,c.yOffset),o.blendOp===0&&i.clearRect(o.xOffset,o.yOffset,o.width,o.height),i.drawImage(o.image,o.xOffset,o.yOffset)},r.prototype.animate=function(i){var a,o,A,c,d,f,p=this;return o=0,f=this.animation,c=f.numFrames,A=f.frames,d=f.numPlays,(a=function(){var g,B;if(g=o++%c,B=A[g],p.renderFrame(i,g),c>1&&o/c<d)return p.animation._timeout=setTimeout(a,B.delay)})()},r.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},r.prototype.render=function(i){var a,o;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,a=i.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(o=a.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),a.putImageData(o,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function jz(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,s=t[e++],i=s>>7,a=1<<(7&s)+1;t[e++],t[e++];var o=null,A=null;i&&(o=e,A=a,e+=3*a);var c=!0,d=[],f=0,p=null,g=0,B=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,B=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((S=t[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var b=t[e++];f=t[e++]|t[e++]<<8,p=t[e++],!(1&b)&&(p=null),g=b>>2&7,e++;break;case 254:for(;;){if(!((S=t[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var C=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,N=t[e++]|t[e++]<<8,R=t[e++],V=R>>6&1,j=1<<(7&R)+1,U=o,I=A,Q=!1;R>>7&&(Q=!0,U=e,I=j,e+=3*j);var D=e;for(e++;;){var S;if(!((S=t[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}d.push({x:C,y:w,width:y,height:N,has_local_palette:Q,palette_offset:U,palette_size:I,data_offset:D,data_length:e-D,transparent_index:p,interlaced:!!V,delay:f,disposal:g});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return B},this.frameInfo=function(_){if(_<0||_>=d.length)throw new Error("Frame index out of range.");return d[_]},this.decodeAndBlitFrameBGRA=function(_,T){var K=this.frameInfo(_),oe=K.width*K.height,le=new Uint8Array(oe);hI(t,K.data_offset,le,oe);var se=K.palette_offset,z=K.transparent_index;z===null&&(z=256);var Ae=K.width,ee=n-Ae,we=Ae,k=4*(K.y*n+K.x),X=4*((K.y+K.height)*n+K.x),Z=k,H=4*ee;K.interlaced===!0&&(H+=4*n*7);for(var Y=8,ue=0,ie=le.length;ue<ie;++ue){var ce=le[ue];if(we===0&&(we=Ae,(Z+=H)>=X&&(H=4*ee+4*n*(Y-1),Z=k+(Ae+ee)*(Y<<1),Y>>=1)),ce===z)Z+=4;else{var be=t[se+3*ce],Fe=t[se+3*ce+1],ne=t[se+3*ce+2];T[Z++]=ne,T[Z++]=Fe,T[Z++]=be,T[Z++]=255}--we}},this.decodeAndBlitFrameRGBA=function(_,T){var K=this.frameInfo(_),oe=K.width*K.height,le=new Uint8Array(oe);hI(t,K.data_offset,le,oe);var se=K.palette_offset,z=K.transparent_index;z===null&&(z=256);var Ae=K.width,ee=n-Ae,we=Ae,k=4*(K.y*n+K.x),X=4*((K.y+K.height)*n+K.x),Z=k,H=4*ee;K.interlaced===!0&&(H+=4*n*7);for(var Y=8,ue=0,ie=le.length;ue<ie;++ue){var ce=le[ue];if(we===0&&(we=Ae,(Z+=H)>=X&&(H=4*ee+4*n*(Y-1),Z=k+(Ae+ee)*(Y<<1),Y>>=1)),ce===z)Z+=4;else{var be=t[se+3*ce],Fe=t[se+3*ce+1],ne=t[se+3*ce+2];T[Z++]=be,T[Z++]=Fe,T[Z++]=ne,T[Z++]=255}--we}}}function hI(t,e,n,r){for(var s=t[e++],i=1<<s,a=i+1,o=a+1,A=s+1,c=(1<<A)-1,d=0,f=0,p=0,g=t[e++],B=new Int32Array(4096),b=null;;){for(;d<16&&g!==0;)f|=t[e++]<<d,d+=8,g===1?g=t[e++]:--g;if(d<A)break;var C=f&c;if(f>>=A,d-=A,C!==i){if(C===a)break;for(var w=C<o?C:b,y=0,N=w;N>i;)N=B[N]>>8,++y;var R=N;if(p+y+(w!==C?1:0)>r)return void Sn.log("Warning, gif stream longer than expected.");n[p++]=R;var V=p+=y;for(w!==C&&(n[p++]=R),N=w;y--;)N=B[N],n[--V]=255&N,N>>=8;b!==null&&o<4096&&(B[o++]=b<<8|R,o>=c+1&&A<12&&(++A,c=c<<1|1)),b=C}else o=a+1,c=(1<<(A=s+1))-1,b=null}return p!==r&&Sn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Vy(t){var e,n,r,s,i,a=Math.floor,o=new Array(64),A=new Array(64),c=new Array(64),d=new Array(64),f=new Array(65535),p=new Array(65535),g=new Array(64),B=new Array(64),b=[],C=0,w=7,y=new Array(64),N=new Array(64),R=new Array(64),V=new Array(256),j=new Array(2048),U=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],I=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Q=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],S=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],_=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],K=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],oe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function le(k,X){for(var Z=0,H=0,Y=new Array,ue=1;ue<=16;ue++){for(var ie=1;ie<=k[ue];ie++)Y[X[H]]=[],Y[X[H]][0]=Z,Y[X[H]][1]=ue,H++,Z++;Z*=2}return Y}function se(k){for(var X=k[0],Z=k[1]-1;Z>=0;)X&1<<Z&&(C|=1<<w),Z--,--w<0&&(C==255?(z(255),z(0)):z(C),w=7,C=0)}function z(k){b.push(k)}function Ae(k){z(k>>8&255),z(255&k)}function ee(k,X,Z,H,Y){for(var ue,ie=Y[0],ce=Y[240],be=function(ke,pe){var Pe,De,ze,Ye,dt,Je,_t,St,yt,Dt,et=0;for(yt=0;yt<8;++yt){Pe=ke[et],De=ke[et+1],ze=ke[et+2],Ye=ke[et+3],dt=ke[et+4],Je=ke[et+5],_t=ke[et+6];var bn=Pe+(St=ke[et+7]),Gt=Pe-St,or=De+_t,$t=De-_t,cn=ze+Je,Qr=ze-Je,Se=Ye+dt,Et=Ye-dt,ot=bn+Se,nt=bn-Se,mt=or+cn,xt=or-cn;ke[et]=ot+mt,ke[et+4]=ot-mt;var Ve=.707106781*(xt+nt);ke[et+2]=nt+Ve,ke[et+6]=nt-Ve;var st=.382683433*((ot=Et+Qr)-(xt=$t+Gt)),Zt=.5411961*ot+st,qt=1.306562965*xt+st,On=.707106781*(mt=Qr+$t),Ar=Gt+On,ft=Gt-On;ke[et+5]=ft+Zt,ke[et+3]=ft-Zt,ke[et+1]=Ar+qt,ke[et+7]=Ar-qt,et+=8}for(et=0,yt=0;yt<8;++yt){Pe=ke[et],De=ke[et+8],ze=ke[et+16],Ye=ke[et+24],dt=ke[et+32],Je=ke[et+40],_t=ke[et+48];var zr=Pe+(St=ke[et+56]),Pr=Pe-St,er=De+_t,Xn=De-_t,ye=ze+Je,$e=ze-Je,lt=Ye+dt,zt=Ye-dt,Vt=zr+lt,bt=zr-lt,Bt=er+ye,Wr=er-ye;ke[et]=Vt+Bt,ke[et+32]=Vt-Bt;var lr=.707106781*(Wr+bt);ke[et+16]=bt+lr,ke[et+48]=bt-lr;var Xs=.382683433*((Vt=zt+$e)-(Wr=Xn+Pr)),ha=.5411961*Vt+Xs,fa=1.306562965*Wr+Xs,pa=.707106781*(Bt=$e+Xn),Ga=Pr+pa,qa=Pr-pa;ke[et+40]=qa+ha,ke[et+24]=qa-ha,ke[et+8]=Ga+fa,ke[et+56]=Ga-fa,et++}for(yt=0;yt<64;++yt)Dt=ke[yt]*pe[yt],g[yt]=Dt>0?Dt+.5|0:Dt-.5|0;return g}(k,X),Fe=0;Fe<64;++Fe)B[U[Fe]]=be[Fe];var ne=B[0]-Z;Z=B[0],ne==0?se(H[0]):(se(H[p[ue=32767+ne]]),se(f[ue]));for(var ve=63;ve>0&&B[ve]==0;)ve--;if(ve==0)return se(ie),Z;for(var Re,Ce=1;Ce<=ve;){for(var re=Ce;B[Ce]==0&&Ce<=ve;)++Ce;var pt=Ce-re;if(pt>=16){Re=pt>>4;for(var He=1;He<=Re;++He)se(ce);pt&=15}ue=32767+B[Ce],se(Y[(pt<<4)+p[ue]]),se(f[ue]),Ce++}return ve!=63&&se(ie),Z}function we(k){k=Math.min(Math.max(k,1),100),i!=k&&(function(X){for(var Z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],H=0;H<64;H++){var Y=a((Z[H]*X+50)/100);Y=Math.min(Math.max(Y,1),255),o[U[H]]=Y}for(var ue=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ie=0;ie<64;ie++){var ce=a((ue[ie]*X+50)/100);ce=Math.min(Math.max(ce,1),255),A[U[ie]]=ce}for(var be=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Fe=0,ne=0;ne<8;ne++)for(var ve=0;ve<8;ve++)c[Fe]=1/(o[U[Fe]]*be[ne]*be[ve]*8),d[Fe]=1/(A[U[Fe]]*be[ne]*be[ve]*8),Fe++}(k<50?Math.floor(5e3/k):Math.floor(200-2*k)),i=k)}this.encode=function(k,X){X&&we(X),b=new Array,C=0,w=7,Ae(65496),Ae(65504),Ae(16),z(74),z(70),z(73),z(70),z(0),z(1),z(1),z(0),Ae(1),Ae(1),z(0),z(0),function(){Ae(65499),Ae(132),z(0);for(var De=0;De<64;De++)z(o[De]);z(1);for(var ze=0;ze<64;ze++)z(A[ze])}(),function(De,ze){Ae(65472),Ae(17),z(8),Ae(ze),Ae(De),z(3),z(1),z(17),z(0),z(2),z(17),z(1),z(3),z(17),z(1)}(k.width,k.height),function(){Ae(65476),Ae(418),z(0);for(var De=0;De<16;De++)z(I[De+1]);for(var ze=0;ze<=11;ze++)z(Q[ze]);z(16);for(var Ye=0;Ye<16;Ye++)z(D[Ye+1]);for(var dt=0;dt<=161;dt++)z(S[dt]);z(1);for(var Je=0;Je<16;Je++)z(_[Je+1]);for(var _t=0;_t<=11;_t++)z(T[_t]);z(17);for(var St=0;St<16;St++)z(K[St+1]);for(var yt=0;yt<=161;yt++)z(oe[yt])}(),Ae(65498),Ae(12),z(3),z(1),z(0),z(2),z(17),z(3),z(17),z(0),z(63),z(0);var Z=0,H=0,Y=0;C=0,w=7,this.encode.displayName="_encode_";for(var ue,ie,ce,be,Fe,ne,ve,Re,Ce,re=k.data,pt=k.width,He=k.height,ke=4*pt,pe=0;pe<He;){for(ue=0;ue<ke;){for(Fe=ke*pe+ue,ve=-1,Re=0,Ce=0;Ce<64;Ce++)ne=Fe+(Re=Ce>>3)*ke+(ve=4*(7&Ce)),pe+Re>=He&&(ne-=ke*(pe+1+Re-He)),ue+ve>=ke&&(ne-=ue+ve-ke+4),ie=re[ne++],ce=re[ne++],be=re[ne++],y[Ce]=(j[ie]+j[ce+256>>0]+j[be+512>>0]>>16)-128,N[Ce]=(j[ie+768>>0]+j[ce+1024>>0]+j[be+1280>>0]>>16)-128,R[Ce]=(j[ie+1280>>0]+j[ce+1536>>0]+j[be+1792>>0]>>16)-128;Z=ee(y,c,Z,e,r),H=ee(N,d,H,n,s),Y=ee(R,d,Y,n,s),ue+=32}pe+=8}if(w>=0){var Pe=[];Pe[1]=w+1,Pe[0]=(1<<w+1)-1,se(Pe)}return Ae(65497),new Uint8Array(b)},t=t||50,function(){for(var k=String.fromCharCode,X=0;X<256;X++)V[X]=k(X)}(),e=le(I,Q),n=le(_,T),r=le(D,S),s=le(K,oe),function(){for(var k=1,X=2,Z=1;Z<=15;Z++){for(var H=k;H<X;H++)p[32767+H]=Z,f[32767+H]=[],f[32767+H][1]=Z,f[32767+H][0]=H;for(var Y=-(X-1);Y<=-k;Y++)p[32767+Y]=Z,f[32767+Y]=[],f[32767+Y][1]=Z,f[32767+Y][0]=X-1+Y;k<<=1,X<<=1}}(),function(){for(var k=0;k<256;k++)j[k]=19595*k,j[k+256>>0]=38470*k,j[k+512>>0]=7471*k+32768,j[k+768>>0]=-11059*k,j[k+1024>>0]=-21709*k,j[k+1280>>0]=32768*k+8421375,j[k+1536>>0]=-27439*k,j[k+1792>>0]=-5329*k}(),we(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Wi(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function fI(t){function e(I){if(!I)throw Error("assert :P")}function n(I,Q,D){for(var S=0;4>S;S++)if(I[Q+S]!=D.charCodeAt(S))return!0;return!1}function r(I,Q,D,S,_){for(var T=0;T<_;T++)I[Q+T]=D[S+T]}function s(I,Q,D,S){for(var _=0;_<S;_++)I[Q+_]=D}function i(I){return new Int32Array(I)}function a(I,Q){for(var D=[],S=0;S<I;S++)D.push(new Q);return D}function o(I,Q){var D=[];return function S(_,T,K){for(var oe=K[T],le=0;le<oe&&(_.push(K.length>T+1?[]:new Q),!(K.length<T+1));le++)S(_[le],T+1,K)}(D,0,I),D}var A=function(){var I=this;function Q(u,m){for(var x=1<<m-1>>>0;u&x;)x>>>=1;return x?(u&x-1)+x:u}function D(u,m,x,F,M){e(!(F%x));do u[m+(F-=x)]=M;while(0<F)}function S(u,m,x,F,M){if(e(2328>=M),512>=M)var G=i(512);else if((G=i(M))==null)return 0;return function(q,$,J,te,he,Ee){var _e,xe,Me=$,Te=1<<J,fe=i(16),me=i(16);for(e(he!=0),e(te!=null),e(q!=null),e(0<J),xe=0;xe<he;++xe){if(15<te[xe])return 0;++fe[te[xe]]}if(fe[0]==he)return 0;for(me[1]=0,_e=1;15>_e;++_e){if(fe[_e]>1<<_e)return 0;me[_e+1]=me[_e]+fe[_e]}for(xe=0;xe<he;++xe)_e=te[xe],0<te[xe]&&(Ee[me[_e]++]=xe);if(me[15]==1)return(te=new _).g=0,te.value=Ee[0],D(q,Me,1,Te,te),Te;var je,Ke=-1,Oe=Te-1,ut=0,tt=1,Tt=1,it=1<<J;for(xe=0,_e=1,he=2;_e<=J;++_e,he<<=1){if(tt+=Tt<<=1,0>(Tt-=fe[_e]))return 0;for(;0<fe[_e];--fe[_e])(te=new _).g=_e,te.value=Ee[xe++],D(q,Me+ut,he,it,te),ut=Q(ut,_e)}for(_e=J+1,he=2;15>=_e;++_e,he<<=1){if(tt+=Tt<<=1,0>(Tt-=fe[_e]))return 0;for(;0<fe[_e];--fe[_e]){if(te=new _,(ut&Oe)!=Ke){for(Me+=it,je=1<<(Ke=_e)-J;15>Ke&&!(0>=(je-=fe[Ke]));)++Ke,je<<=1;Te+=it=1<<(je=Ke-J),q[$+(Ke=ut&Oe)].g=je+J,q[$+Ke].value=Me-$-Ke}te.g=_e-J,te.value=Ee[xe++],D(q,Me+(ut>>J),he,it,te),ut=Q(ut,_e)}}return tt!=2*me[15]-1?0:Te}(u,m,x,F,M,G)}function _(){this.value=this.g=0}function T(){this.value=this.g=0}function K(){this.G=a(5,_),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Jr,T)}function oe(u,m,x,F){e(u!=null),e(m!=null),e(2147483648>F),u.Ca=254,u.I=0,u.b=-8,u.Ka=0,u.oa=m,u.pa=x,u.Jd=m,u.Yc=x+F,u.Zc=4<=F?x+F-4+1:x,ue(u)}function le(u,m){for(var x=0;0<m--;)x|=ce(u,128)<<m;return x}function se(u,m){var x=le(u,m);return ie(u)?-x:x}function z(u,m,x,F){var M,G=0;for(e(u!=null),e(m!=null),e(4294967288>F),u.Sb=F,u.Ra=0,u.u=0,u.h=0,4<F&&(F=4),M=0;M<F;++M)G+=m[x+M]<<8*M;u.Ra=G,u.bb=F,u.oa=m,u.pa=x}function Ae(u){for(;8<=u.u&&u.bb<u.Sb;)u.Ra>>>=8,u.Ra+=u.oa[u.pa+u.bb]<<ou-8>>>0,++u.bb,u.u-=8;Z(u)&&(u.h=1,u.u=0)}function ee(u,m){if(e(0<=m),!u.h&&m<=au){var x=X(u)&iu[m];return u.u+=m,Ae(u),x}return u.h=1,u.u=0}function we(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function k(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function X(u){return u.Ra>>>(u.u&ou-1)>>>0}function Z(u){return e(u.bb<=u.Sb),u.h||u.bb==u.Sb&&u.u>ou}function H(u,m){u.u=m,u.h=Z(u)}function Y(u){u.u>=nh&&(e(u.u>=nh),Ae(u))}function ue(u){e(u!=null&&u.oa!=null),u.pa<u.Zc?(u.I=(u.oa[u.pa++]|u.I<<8)>>>0,u.b+=8):(e(u!=null&&u.oa!=null),u.pa<u.Yc?(u.b+=8,u.I=u.oa[u.pa++]|u.I<<8):u.Ka?u.b=0:(u.I<<=8,u.b+=8,u.Ka=1))}function ie(u){return le(u,1)}function ce(u,m){var x=u.Ca;0>u.b&&ue(u);var F=u.b,M=x*m>>>8,G=(u.I>>>F>M)+0;for(G?(x-=M,u.I-=M+1<<F>>>0):x=M+1,F=x,M=0;256<=F;)M+=8,F>>=8;return F=7^M+ks[F],u.b-=F,u.Ca=(x<<F)-1,G}function be(u,m,x){u[m+0]=x>>24&255,u[m+1]=x>>16&255,u[m+2]=x>>8&255,u[m+3]=x>>0&255}function Fe(u,m){return u[m+0]<<0|u[m+1]<<8}function ne(u,m){return Fe(u,m)|u[m+2]<<16}function ve(u,m){return Fe(u,m)|Fe(u,m+2)<<16}function Re(u,m){var x=1<<m;return e(u!=null),e(0<m),u.X=i(x),u.X==null?0:(u.Mb=32-m,u.Xa=m,1)}function Ce(u,m){e(u!=null),e(m!=null),e(u.Xa==m.Xa),r(m.X,0,u.X,0,1<<m.Xa)}function re(){this.X=[],this.Xa=this.Mb=0}function pt(u,m,x,F){e(x!=null),e(F!=null);var M=x[0],G=F[0];return M==0&&(M=(u*G+m/2)/m),G==0&&(G=(m*M+u/2)/u),0>=M||0>=G?0:(x[0]=M,F[0]=G,1)}function He(u,m){return u+(1<<m)-1>>>m}function ke(u,m){return((4278255360&u)+(4278255360&m)>>>0&4278255360)+((16711935&u)+(16711935&m)>>>0&16711935)>>>0}function pe(u,m){I[m]=function(x,F,M,G,q,$,J){var te;for(te=0;te<q;++te){var he=I[u]($[J+te-1],M,G+te);$[J+te]=ke(x[F+te],he)}}}function Pe(){this.ud=this.hd=this.jd=0}function De(u,m){return((4278124286&(u^m))>>>1)+(u&m)>>>0}function ze(u){return 0<=u&&256>u?u:0>u?0:255<u?255:void 0}function Ye(u,m){return ze(u+(u-m+.5>>1))}function dt(u,m,x){return Math.abs(m-x)-Math.abs(u-x)}function Je(u,m,x,F,M,G,q){for(F=G[q-1],x=0;x<M;++x)G[q+x]=F=ke(u[m+x],F)}function _t(u,m,x,F,M){var G;for(G=0;G<x;++G){var q=u[m+G],$=q>>8&255,J=16711935&(J=(J=16711935&q)+(($<<16)+$));F[M+G]=(4278255360&q)+J>>>0}}function St(u,m){m.jd=u>>0&255,m.hd=u>>8&255,m.ud=u>>16&255}function yt(u,m,x,F,M,G){var q;for(q=0;q<F;++q){var $=m[x+q],J=$>>>8,te=$,he=255&(he=(he=$>>>16)+((u.jd<<24>>24)*(J<<24>>24)>>>5));te=255&(te=(te=te+((u.hd<<24>>24)*(J<<24>>24)>>>5))+((u.ud<<24>>24)*(he<<24>>24)>>>5)),M[G+q]=(4278255360&$)+(he<<16)+te}}function Dt(u,m,x,F,M){I[m]=function(G,q,$,J,te,he,Ee,_e,xe){for(J=Ee;J<_e;++J)for(Ee=0;Ee<xe;++Ee)te[he++]=M($[F(G[q++])])},I[u]=function(G,q,$,J,te,he,Ee){var _e=8>>G.b,xe=G.Ea,Me=G.K[0],Te=G.w;if(8>_e)for(G=(1<<G.b)-1,Te=(1<<_e)-1;q<$;++q){var fe,me=0;for(fe=0;fe<xe;++fe)fe&G||(me=F(J[te++])),he[Ee++]=M(Me[me&Te]),me>>=_e}else I["VP8LMapColor"+x](J,te,Me,Te,he,Ee,q,$,xe)}}function et(u,m,x,F,M){for(x=m+x;m<x;){var G=u[m++];F[M++]=G>>16&255,F[M++]=G>>8&255,F[M++]=G>>0&255}}function bn(u,m,x,F,M){for(x=m+x;m<x;){var G=u[m++];F[M++]=G>>16&255,F[M++]=G>>8&255,F[M++]=G>>0&255,F[M++]=G>>24&255}}function Gt(u,m,x,F,M){for(x=m+x;m<x;){var G=(q=u[m++])>>16&240|q>>12&15,q=q>>0&240|q>>28&15;F[M++]=G,F[M++]=q}}function or(u,m,x,F,M){for(x=m+x;m<x;){var G=(q=u[m++])>>16&248|q>>13&7,q=q>>5&224|q>>3&31;F[M++]=G,F[M++]=q}}function $t(u,m,x,F,M){for(x=m+x;m<x;){var G=u[m++];F[M++]=G>>0&255,F[M++]=G>>8&255,F[M++]=G>>16&255}}function cn(u,m,x,F,M,G){if(G==0)for(x=m+x;m<x;)be(F,((G=u[m++])[0]>>24|G[1]>>8&65280|G[2]<<8&16711680|G[3]<<24)>>>0),M+=32;else r(F,M,u,m,x)}function Qr(u,m){I[m][0]=I[u+"0"],I[m][1]=I[u+"1"],I[m][2]=I[u+"2"],I[m][3]=I[u+"3"],I[m][4]=I[u+"4"],I[m][5]=I[u+"5"],I[m][6]=I[u+"6"],I[m][7]=I[u+"7"],I[m][8]=I[u+"8"],I[m][9]=I[u+"9"],I[m][10]=I[u+"10"],I[m][11]=I[u+"11"],I[m][12]=I[u+"12"],I[m][13]=I[u+"13"],I[m][14]=I[u+"0"],I[m][15]=I[u+"0"]}function Se(u){return u==hv||u==fv||u==Zp||u==pv}function Et(){this.eb=[],this.size=this.A=this.fb=0}function ot(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function nt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Et,this.f.kb=new ot,this.sd=null}function mt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function xt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ve(u){return alert("todo:WebPSamplerProcessPlane"),u.T}function st(u,m){var x=u.T,F=m.ba.f.RGBA,M=F.eb,G=F.fb+u.ka*F.A,q=Bi[m.ba.S],$=u.y,J=u.O,te=u.f,he=u.N,Ee=u.ea,_e=u.W,xe=m.cc,Me=m.dc,Te=m.Mc,fe=m.Nc,me=u.ka,je=u.ka+u.T,Ke=u.U,Oe=Ke+1>>1;for(me==0?q($,J,null,null,te,he,Ee,_e,te,he,Ee,_e,M,G,null,null,Ke):(q(m.ec,m.fc,$,J,xe,Me,Te,fe,te,he,Ee,_e,M,G-F.A,M,G,Ke),++x);me+2<je;me+=2)xe=te,Me=he,Te=Ee,fe=_e,he+=u.Rc,_e+=u.Rc,G+=2*F.A,q($,(J+=2*u.fa)-u.fa,$,J,xe,Me,Te,fe,te,he,Ee,_e,M,G-F.A,M,G,Ke);return J+=u.fa,u.j+je<u.o?(r(m.ec,m.fc,$,J,Ke),r(m.cc,m.dc,te,he,Oe),r(m.Mc,m.Nc,Ee,_e,Oe),x--):1&je||q($,J,null,null,te,he,Ee,_e,te,he,Ee,_e,M,G+F.A,null,null,Ke),x}function Zt(u,m,x){var F=u.F,M=[u.J];if(F!=null){var G=u.U,q=m.ba.S,$=q==Yp||q==Zp;m=m.ba.f.RGBA;var J=[0],te=u.ka;J[0]=u.T,u.Kb&&(te==0?--J[0]:(--te,M[0]-=u.width),u.j+u.ka+u.T==u.o&&(J[0]=u.o-u.j-te));var he=m.eb;te=m.fb+te*m.A,u=Tn(F,M[0],u.width,G,J,he,te+($?0:3),m.A),e(x==J),u&&Se(q)&&vi(he,te,$,G,J,m.A)}return 0}function qt(u){var m=u.ma,x=m.ba.S,F=11>x,M=x==Xp||x==Jp||x==Yp||x==dv||x==12||Se(x);if(m.memory=null,m.Ib=null,m.Jb=null,m.Nd=null,!eh(m.Oa,u,M?11:12))return 0;if(M&&Se(x)&&Ge(),u.da)alert("todo:use_scaling");else{if(F){if(m.Ib=Ve,u.Kb){if(x=u.U+1>>1,m.memory=i(u.U+2*x),m.memory==null)return 0;m.ec=m.memory,m.fc=0,m.cc=m.ec,m.dc=m.fc+u.U,m.Mc=m.cc,m.Nc=m.dc+x,m.Ib=st,Ge()}}else alert("todo:EmitYUV");M&&(m.Jb=Zt,F&&Be())}if(F&&!_b){for(u=0;256>u;++u)Y3[u]=89858*(u-128)+tm>>em,tQ[u]=-22014*(u-128)+tm,eQ[u]=-45773*(u-128),Z3[u]=113618*(u-128)+tm>>em;for(u=lh;u<wv;++u)m=76283*(u-16)+tm>>em,nQ[u-lh]=hn(m,255),rQ[u-lh]=hn(m+8>>4,15);_b=1}return 1}function On(u){var m=u.ma,x=u.U,F=u.T;return e(!(1&u.ka)),0>=x||0>=F?0:(x=m.Ib(u,m),m.Jb!=null&&m.Jb(u,m,x),m.Dc+=x,1)}function Ar(u){u.ma.memory=null}function ft(u,m,x,F){return ee(u,8)!=47?0:(m[0]=ee(u,14)+1,x[0]=ee(u,14)+1,F[0]=ee(u,1),ee(u,3)!=0?0:!u.h)}function zr(u,m){if(4>u)return u+1;var x=u-2>>1;return(2+(1&u)<<x)+ee(m,x)+1}function Pr(u,m){return 120<m?m-120:1<=(x=((x=D3[m-1])>>4)*u+(8-(15&x)))?x:1;var x}function er(u,m,x){var F=X(x),M=u[m+=255&F].g-8;return 0<M&&(H(x,x.u+8),F=X(x),m+=u[m].value,m+=F&(1<<M)-1),H(x,x.u+u[m].g),u[m].value}function Xn(u,m,x){return x.g+=u.g,x.value+=u.value<<m>>>0,e(8>=x.g),u.g}function ye(u,m,x){var F=u.xc;return e((m=F==0?0:u.vc[u.md*(x>>F)+(m>>F)])<u.Wb),u.Ya[m]}function $e(u,m,x,F){var M=u.ab,G=u.c*m,q=u.C;m=q+m;var $=x,J=F;for(F=u.Ta,x=u.Ua;0<M--;){var te=u.gc[M],he=q,Ee=m,_e=$,xe=J,Me=(J=F,$=x,te.Ea);switch(e(he<Ee),e(Ee<=te.nc),te.hc){case 2:Vp(_e,xe,(Ee-he)*Me,J,$);break;case 0:var Te=he,fe=Ee,me=J,je=$,Ke=(it=te).Ea;Te==0&&(cv(_e,xe,null,null,1,me,je),Je(_e,xe+1,0,0,Ke-1,me,je+1),xe+=Ke,je+=Ke,++Te);for(var Oe=1<<it.b,ut=Oe-1,tt=He(Ke,it.b),Tt=it.K,it=it.w+(Te>>it.b)*tt;Te<fe;){var un=Tt,gn=it,on=1;for(rh(_e,xe,me,je-Ke,1,me,je);on<Ke;){var tn=(on&~ut)+Oe;tn>Ke&&(tn=Ke),(0,oA[un[gn++]>>8&15])(_e,xe+ +on,me,je+on-Ke,tn-on,me,je+on),on=tn}xe+=Ke,je+=Ke,++Te&ut||(it+=tt)}Ee!=te.nc&&r(J,$-Me,J,$+(Ee-he-1)*Me,Me);break;case 1:for(Me=_e,fe=xe,Ke=(_e=te.Ea)-(je=_e&~(me=(xe=1<<te.b)-1)),Te=He(_e,te.b),Oe=te.K,te=te.w+(he>>te.b)*Te;he<Ee;){for(ut=Oe,tt=te,Tt=new Pe,it=fe+je,un=fe+_e;fe<it;)St(ut[tt++],Tt),Hl(Tt,Me,fe,xe,J,$),fe+=xe,$+=xe;fe<un&&(St(ut[tt++],Tt),Hl(Tt,Me,fe,Ke,J,$),fe+=Ke,$+=Ke),++he&me||(te+=Te)}break;case 3:if(_e==J&&xe==$&&0<te.b){for(fe=J,_e=Me=$+(Ee-he)*Me-(je=(Ee-he)*He(te.Ea,te.b)),xe=J,me=$,Te=[],je=(Ke=je)-1;0<=je;--je)Te[je]=xe[me+je];for(je=Ke-1;0<=je;--je)fe[_e+je]=Te[je];mi(te,he,Ee,J,Me,J,$)}else mi(te,he,Ee,_e,xe,J,$)}$=F,J=x}J!=x&&r(F,x,$,J,G)}function lt(u,m){var x=u.V,F=u.Ba+u.c*u.C,M=m-u.C;if(e(m<=u.l.o),e(16>=M),0<M){var G=u.l,q=u.Ta,$=u.Ua,J=G.width;if($e(u,M,x,F),M=$=[$],e((x=u.C)<(F=m)),e(G.v<G.va),F>G.o&&(F=G.o),x<G.j){var te=G.j-x;x=G.j,M[0]+=te*J}if(x>=F?x=0:(M[0]+=4*G.v,G.ka=x-G.j,G.U=G.va-G.v,G.T=F-x,x=1),x){if($=$[0],11>(x=u.ca).S){var he=x.f.RGBA,Ee=(F=x.S,M=G.U,G=G.T,te=he.eb,he.A),_e=G;for(he=he.fb+u.Ma*he.A;0<_e--;){var xe=q,Me=$,Te=M,fe=te,me=he;switch(F){case $p:Ds(xe,Me,Te,fe,me);break;case Xp:Es(xe,Me,Te,fe,me);break;case hv:Es(xe,Me,Te,fe,me),vi(fe,me,0,Te,1,0);break;case gb:ro(xe,Me,Te,fe,me);break;case Jp:cn(xe,Me,Te,fe,me,1);break;case fv:cn(xe,Me,Te,fe,me,1),vi(fe,me,0,Te,1,0);break;case Yp:cn(xe,Me,Te,fe,me,0);break;case Zp:cn(xe,Me,Te,fe,me,0),vi(fe,me,1,Te,1,0);break;case dv:AA(xe,Me,Te,fe,me);break;case pv:AA(xe,Me,Te,fe,me),Fn(fe,me,Te,1,0);break;case wb:no(xe,Me,Te,fe,me);break;default:e(0)}$+=J,he+=Ee}u.Ma+=G}else alert("todo:EmitRescaledRowsYUVA");e(u.Ma<=x.height)}}u.C=m,e(u.C<=u.i)}function zt(u){var m;if(0<u.ua)return 0;for(m=0;m<u.Wb;++m){var x=u.Ya[m].G,F=u.Ya[m].H;if(0<x[1][F[1]+0].g||0<x[2][F[2]+0].g||0<x[3][F[3]+0].g)return 0}return 1}function Vt(u,m,x,F,M,G){if(u.Z!=0){var q=u.qd,$=u.rd;for(e(dA[u.Z]!=null);m<x;++m)dA[u.Z](q,$,F,M,F,M,G),q=F,$=M,M+=G;u.qd=q,u.rd=$}}function bt(u,m){var x=u.l.ma,F=x.Z==0||x.Z==1?u.l.j:u.C;if(F=u.C<F?F:u.C,e(m<=u.l.o),m>F){var M=u.l.width,G=x.ca,q=x.tb+M*F,$=u.V,J=u.Ba+u.c*F,te=u.gc;e(u.ab==1),e(te[0].hc==3),Kp(te[0],F,m,$,J,G,q),Vt(x,F,m,G,q,M)}u.C=u.Ma=m}function Bt(u,m,x,F,M,G,q){var $=u.$/F,J=u.$%F,te=u.m,he=u.s,Ee=x+u.$,_e=Ee;M=x+F*M;var xe=x+F*G,Me=280+he.ua,Te=u.Pb?$:16777216,fe=0<he.ua?he.Wa:null,me=he.wc,je=Ee<xe?ye(he,J,$):null;e(u.C<G),e(xe<=M);var Ke=!1;e:for(;;){for(;Ke||Ee<xe;){var Oe=0;if($>=Te){var ut=Ee-x;e((Te=u).Pb),Te.wd=Te.m,Te.xd=ut,0<Te.s.ua&&Ce(Te.s.Wa,Te.s.vb),Te=$+O3}if(J&me||(je=ye(he,J,$)),e(je!=null),je.Qb&&(m[Ee]=je.qb,Ke=!0),!Ke)if(Y(te),je.jc){Oe=te,ut=m;var tt=Ee,Tt=je.pd[X(Oe)&Jr-1];e(je.jc),256>Tt.g?(H(Oe,Oe.u+Tt.g),ut[tt]=Tt.value,Oe=0):(H(Oe,Oe.u+Tt.g-256),e(256<=Tt.value),Oe=Tt.value),Oe==0&&(Ke=!0)}else Oe=er(je.G[0],je.H[0],te);if(te.h)break;if(Ke||256>Oe){if(!Ke)if(je.nd)m[Ee]=(je.qb|Oe<<8)>>>0;else{if(Y(te),Ke=er(je.G[1],je.H[1],te),Y(te),ut=er(je.G[2],je.H[2],te),tt=er(je.G[3],je.H[3],te),te.h)break;m[Ee]=(tt<<24|Ke<<16|Oe<<8|ut)>>>0}if(Ke=!1,++Ee,++J>=F&&(J=0,++$,q!=null&&$<=G&&!($%16)&&q(u,$),fe!=null))for(;_e<Ee;)Oe=m[_e++],fe.X[(506832829*Oe&4294967295)>>>fe.Mb]=Oe}else if(280>Oe){if(Oe=zr(Oe-256,te),ut=er(je.G[4],je.H[4],te),Y(te),ut=Pr(F,ut=zr(ut,te)),te.h)break;if(Ee-x<ut||M-Ee<Oe)break e;for(tt=0;tt<Oe;++tt)m[Ee+tt]=m[Ee+tt-ut];for(Ee+=Oe,J+=Oe;J>=F;)J-=F,++$,q!=null&&$<=G&&!($%16)&&q(u,$);if(e(Ee<=M),J&me&&(je=ye(he,J,$)),fe!=null)for(;_e<Ee;)Oe=m[_e++],fe.X[(506832829*Oe&4294967295)>>>fe.Mb]=Oe}else{if(!(Oe<Me))break e;for(Ke=Oe-280,e(fe!=null);_e<Ee;)Oe=m[_e++],fe.X[(506832829*Oe&4294967295)>>>fe.Mb]=Oe;Oe=Ee,e(!(Ke>>>(ut=fe).Xa)),m[Oe]=ut.X[Ke],Ke=!0}Ke||e(te.h==Z(te))}if(u.Pb&&te.h&&Ee<M)e(u.m.h),u.a=5,u.m=u.wd,u.$=u.xd,0<u.s.ua&&Ce(u.s.vb,u.s.Wa);else{if(te.h)break e;q!=null&&q(u,$>G?G:$),u.a=0,u.$=Ee-x}return 1}return u.a=3,0}function Wr(u){e(u!=null),u.vc=null,u.yc=null,u.Ya=null;var m=u.Wa;m!=null&&(m.X=null),u.vb=null,e(u!=null)}function lr(){var u=new ru;return u==null?null:(u.a=0,u.xb=Bb,Qr("Predictor","VP8LPredictors"),Qr("Predictor","VP8LPredictors_C"),Qr("PredictorAdd","VP8LPredictorsAdd"),Qr("PredictorAdd","VP8LPredictorsAdd_C"),Vp=_t,Hl=yt,Ds=et,Es=bn,AA=Gt,no=or,ro=$t,I.VP8LMapColor32b=Au,I.VP8LMapColor8b=Gp,u)}function Xs(u,m,x,F,M){var G=1,q=[u],$=[m],J=F.m,te=F.s,he=null,Ee=0;e:for(;;){if(x)for(;G&&ee(J,1);){var _e=q,xe=$,Me=F,Te=1,fe=Me.m,me=Me.gc[Me.ab],je=ee(fe,2);if(Me.Oc&1<<je)G=0;else{switch(Me.Oc|=1<<je,me.hc=je,me.Ea=_e[0],me.nc=xe[0],me.K=[null],++Me.ab,e(4>=Me.ab),je){case 0:case 1:me.b=ee(fe,3)+2,Te=Xs(He(me.Ea,me.b),He(me.nc,me.b),0,Me,me.K),me.K=me.K[0];break;case 3:var Ke,Oe=ee(fe,8)+1,ut=16<Oe?0:4<Oe?1:2<Oe?2:3;if(_e[0]=He(me.Ea,ut),me.b=ut,Ke=Te=Xs(Oe,1,0,Me,me.K)){var tt,Tt=Oe,it=me,un=1<<(8>>it.b),gn=i(un);if(gn==null)Ke=0;else{var on=it.K[0],tn=it.w;for(gn[0]=it.K[0][0],tt=1;tt<1*Tt;++tt)gn[tt]=ke(on[tn+tt],gn[tt-1]);for(;tt<4*un;++tt)gn[tt]=0;it.K[0]=null,it.K[0]=gn,Ke=1}}Te=Ke;break;case 2:break;default:e(0)}G=Te}}if(q=q[0],$=$[0],G&&ee(J,1)&&!(G=1<=(Ee=ee(J,4))&&11>=Ee)){F.a=3;break e}var Nn;if(Nn=G)t:{var Cn,Kt,yr,js=F,Br=q,Os=$,wn=Ee,ti=x,ni=js.m,Lr=js.s,Yr=[null],Is=1,xi=0,Ea=j3[wn];n:for(;;){if(ti&&ee(ni,1)){var Rr=ee(ni,3)+2,oo=He(Br,Rr),zl=He(Os,Rr),hu=oo*zl;if(!Xs(oo,zl,0,js,Yr))break n;for(Yr=Yr[0],Lr.xc=Rr,Cn=0;Cn<hu;++Cn){var hA=Yr[Cn]>>8&65535;Yr[Cn]=hA,hA>=Is&&(Is=hA+1)}}if(ni.h)break n;for(Kt=0;5>Kt;++Kt){var nr=vb[Kt];!Kt&&0<wn&&(nr+=1<<wn),xi<nr&&(xi=nr)}var vv=a(Is*Ea,_),Sb=Is,Fb=a(Sb,K);if(Fb==null)var rm=null;else e(65536>=Sb),rm=Fb;var ch=i(xi);if(rm==null||ch==null||vv==null){js.a=1;break n}var sm=vv;for(Cn=yr=0;Cn<Is;++Cn){var Gi=rm[Cn],fu=Gi.G,pu=Gi.H,Tb=0,im=1,Ub=0;for(Kt=0;5>Kt;++Kt){nr=vb[Kt],fu[Kt]=sm,pu[Kt]=yr,!Kt&&0<wn&&(nr+=1<<wn);s:{var am,yv=nr,om=js,uh=ch,aQ=sm,oQ=yr,Bv=0,fA=om.m,AQ=ee(fA,1);if(s(uh,0,0,yv),AQ){var lQ=ee(fA,1)+1,cQ=ee(fA,1),Qb=ee(fA,cQ==0?1:8);uh[Qb]=1,lQ==2&&(uh[Qb=ee(fA,8)]=1);var Am=1}else{var Pb=i(19),Lb=ee(fA,4)+4;if(19<Lb){om.a=3;var lm=0;break s}for(am=0;am<Lb;++am)Pb[k3[am]]=ee(fA,3);var xv=void 0,dh=void 0,Rb=om,uQ=Pb,cm=yv,kb=uh,bv=0,pA=Rb.m,Db=8,jb=a(128,_);r:for(;S(jb,0,7,uQ,19);){if(ee(pA,1)){var dQ=2+2*ee(pA,3);if((xv=2+ee(pA,dQ))>cm)break r}else xv=cm;for(dh=0;dh<cm&&xv--;){Y(pA);var Ob=jb[0+(127&X(pA))];H(pA,pA.u+Ob.g);var mu=Ob.value;if(16>mu)kb[dh++]=mu,mu!=0&&(Db=mu);else{var hQ=mu==16,Mb=mu-16,fQ=L3[Mb],Hb=ee(pA,P3[Mb])+fQ;if(dh+Hb>cm)break r;for(var pQ=hQ?Db:0;0<Hb--;)kb[dh++]=pQ}}bv=1;break r}bv||(Rb.a=3),Am=bv}(Am=Am&&!fA.h)&&(Bv=S(aQ,oQ,8,uh,yv)),Am&&Bv!=0?lm=Bv:(om.a=3,lm=0)}if(lm==0)break n;if(im&&R3[Kt]==1&&(im=sm[yr].g==0),Tb+=sm[yr].g,yr+=lm,3>=Kt){var hh,Cv=ch[0];for(hh=1;hh<nr;++hh)ch[hh]>Cv&&(Cv=ch[hh]);Ub+=Cv}}if(Gi.nd=im,Gi.Qb=0,im&&(Gi.qb=(fu[3][pu[3]+0].value<<24|fu[1][pu[1]+0].value<<16|fu[2][pu[2]+0].value)>>>0,Tb==0&&256>fu[0][pu[0]+0].value&&(Gi.Qb=1,Gi.qb+=fu[0][pu[0]+0].value<<8)),Gi.jc=!Gi.Qb&&6>Ub,Gi.jc){var um,Ao=Gi;for(um=0;um<Jr;++um){var mA=um,gA=Ao.pd[mA],dm=Ao.G[0][Ao.H[0]+mA];256<=dm.value?(gA.g=dm.g+256,gA.value=dm.value):(gA.g=0,gA.value=0,mA>>=Xn(dm,8,gA),mA>>=Xn(Ao.G[1][Ao.H[1]+mA],16,gA),mA>>=Xn(Ao.G[2][Ao.H[2]+mA],0,gA),Xn(Ao.G[3][Ao.H[3]+mA],24,gA))}}}Lr.vc=Yr,Lr.Wb=Is,Lr.Ya=rm,Lr.yc=vv,Nn=1;break t}Nn=0}if(!(G=Nn)){F.a=3;break e}if(0<Ee){if(te.ua=1<<Ee,!Re(te.Wa,Ee)){F.a=1,G=0;break e}}else te.ua=0;var Ev=F,Vb=q,mQ=$,_v=Ev.s,Iv=_v.xc;if(Ev.c=Vb,Ev.i=mQ,_v.md=He(Vb,Iv),_v.wc=Iv==0?-1:(1<<Iv)-1,x){F.xb=z3;break e}if((he=i(q*$))==null){F.a=1,G=0;break e}G=(G=Bt(F,he,0,q,$,$,null))&&!J.h;break e}return G?(M!=null?M[0]=he:(e(he==null),e(x)),F.$=0,x||Wr(te)):Wr(te),G}function ha(u,m){var x=u.c*u.i,F=x+m+16*m;return e(u.c<=m),u.V=i(F),u.V==null?(u.Ta=null,u.Ua=0,u.a=1,0):(u.Ta=u.V,u.Ua=u.Ba+x+m,1)}function fa(u,m){var x=u.C,F=m-x,M=u.V,G=u.Ba+u.c*x;for(e(m<=u.l.o);0<F;){var q=16<F?16:F,$=u.l.ma,J=u.l.width,te=J*q,he=$.ca,Ee=$.tb+J*x,_e=u.Ta,xe=u.Ua;$e(u,q,M,G),ur(_e,xe,he,Ee,te),Vt($,x,x+q,he,Ee,J),F-=q,M+=q*u.c,x+=q}e(x==m),u.C=u.Ma=m}function pa(){this.ub=this.yd=this.td=this.Rb=0}function Ga(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function qa(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function zc(){this.Yb=function(){var u=[];return function m(x,F,M){for(var G=M[F],q=0;q<G&&(x.push(M.length>F+1?[]:0),!(M.length<F+1));q++)m(x[q],F+1,M)}(u,0,[3,11]),u}()}function Ko(){this.jb=i(3),this.Wc=o([4,8],zc),this.Xc=o([4,17],zc)}function Wc(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function ma(){this.ld=this.La=this.dd=this.tc=0}function ga(){this.Na=this.la=0}function Ri(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function za(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Xd(){this.uc=this.M=this.Nb=0,this.wa=Array(new ma),this.Y=0,this.ya=Array(new za),this.aa=0,this.l=new Wa}function Nl(){this.y=i(16),this.f=i(8),this.ea=i(8)}function $c(){this.cb=this.a=0,this.sc="",this.m=new we,this.Od=new pa,this.Kc=new Ga,this.ed=new Wc,this.Qa=new qa,this.Ic=this.$c=this.Aa=0,this.D=new Xd,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,we),this.ia=0,this.pb=a(4,Ri),this.Pa=new Ko,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Nl),this.Hd=0,this.rb=Array(new ga),this.sb=0,this.wa=Array(new ma),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new za),this.L=this.aa=0,this.gd=o([4,2],ma),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Wa(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Sl(){var u=new $c;return u!=null&&(u.a=0,u.sc="OK",u.cb=0,u.Xb=0,Ah||(Ah=Xc)),u}function Pn(u,m,x){return u.a==0&&(u.a=m,u.sc=x,u.cb=0),0}function Fl(u,m,x){return 3<=x&&u[m+0]==157&&u[m+1]==1&&u[m+2]==42}function Tl(u,m){if(u==null)return 0;if(u.a=0,u.sc="OK",m==null)return Pn(u,2,"null VP8Io passed to VP8GetHeaders()");var x=m.data,F=m.w,M=m.ha;if(4>M)return Pn(u,7,"Truncated header.");var G=x[F+0]|x[F+1]<<8|x[F+2]<<16,q=u.Od;if(q.Rb=!(1&G),q.td=G>>1&7,q.yd=G>>4&1,q.ub=G>>5,3<q.td)return Pn(u,3,"Incorrect keyframe parameters.");if(!q.yd)return Pn(u,4,"Frame not displayable.");F+=3,M-=3;var $=u.Kc;if(q.Rb){if(7>M)return Pn(u,7,"cannot parse picture header");if(!Fl(x,F,M))return Pn(u,3,"Bad code word");$.c=16383&(x[F+4]<<8|x[F+3]),$.Td=x[F+4]>>6,$.i=16383&(x[F+6]<<8|x[F+5]),$.Ud=x[F+6]>>6,F+=7,M-=7,u.za=$.c+15>>4,u.Ub=$.i+15>>4,m.width=$.c,m.height=$.i,m.Da=0,m.j=0,m.v=0,m.va=m.width,m.o=m.height,m.da=0,m.ib=m.width,m.hb=m.height,m.U=m.width,m.T=m.height,s((G=u.Pa).jb,0,255,G.jb.length),e((G=u.Qa)!=null),G.Cb=0,G.Bb=0,G.Fb=1,s(G.Zb,0,0,G.Zb.length),s(G.Lb,0,0,G.Lb)}if(q.ub>M)return Pn(u,7,"bad partition length");oe(G=u.m,x,F,q.ub),F+=q.ub,M-=q.ub,q.Rb&&($.Ld=ie(G),$.Kd=ie(G)),$=u.Qa;var J,te=u.Pa;if(e(G!=null),e($!=null),$.Cb=ie(G),$.Cb){if($.Bb=ie(G),ie(G)){for($.Fb=ie(G),J=0;4>J;++J)$.Zb[J]=ie(G)?se(G,7):0;for(J=0;4>J;++J)$.Lb[J]=ie(G)?se(G,6):0}if($.Bb)for(J=0;3>J;++J)te.jb[J]=ie(G)?le(G,8):255}else $.Bb=0;if(G.Ka)return Pn(u,3,"cannot parse segment header");if(($=u.ed).zd=ie(G),$.Tb=le(G,6),$.wb=le(G,3),$.Pc=ie(G),$.Pc&&ie(G)){for(te=0;4>te;++te)ie(G)&&($.vd[te]=se(G,6));for(te=0;4>te;++te)ie(G)&&($.od[te]=se(G,6))}if(u.L=$.Tb==0?0:$.zd?1:2,G.Ka)return Pn(u,3,"cannot parse filter header");var he=M;if(M=J=F,F=J+he,$=he,u.Xb=(1<<le(u.m,2))-1,he<3*(te=u.Xb))x=7;else{for(J+=3*te,$-=3*te,he=0;he<te;++he){var Ee=x[M+0]|x[M+1]<<8|x[M+2]<<16;Ee>$&&(Ee=$),oe(u.Jc[+he],x,J,Ee),J+=Ee,$-=Ee,M+=3}oe(u.Jc[+te],x,J,$),x=J<F?0:5}if(x!=0)return Pn(u,x,"cannot parse partitions");for(x=le(J=u.m,7),M=ie(J)?se(J,4):0,F=ie(J)?se(J,4):0,$=ie(J)?se(J,4):0,te=ie(J)?se(J,4):0,J=ie(J)?se(J,4):0,he=u.Qa,Ee=0;4>Ee;++Ee){if(he.Cb){var _e=he.Zb[Ee];he.Fb||(_e+=x)}else{if(0<Ee){u.pb[Ee]=u.pb[0];continue}_e=x}var xe=u.pb[Ee];xe.Sc[0]=mv[hn(_e+M,127)],xe.Sc[1]=gv[hn(_e+0,127)],xe.Eb[0]=2*mv[hn(_e+F,127)],xe.Eb[1]=101581*gv[hn(_e+$,127)]>>16,8>xe.Eb[1]&&(xe.Eb[1]=8),xe.Qc[0]=mv[hn(_e+te,117)],xe.Qc[1]=gv[hn(_e+J,127)],xe.lc=_e+J}if(!q.Rb)return Pn(u,4,"Not a key frame.");for(ie(G),q=u.Pa,x=0;4>x;++x){for(M=0;8>M;++M)for(F=0;3>F;++F)for($=0;11>$;++$)te=ce(G,G3[x][M][F][$])?le(G,8):V3[x][M][F][$],q.Wc[x][M].Yb[F][$]=te;for(M=0;17>M;++M)q.Xc[x][M]=q.Wc[x][q3[M]]}return u.kc=ie(G),u.kc&&(u.Bd=le(G,8)),u.cb=1}function Xc(u,m,x,F,M,G,q){var $=m[M].Yb[x];for(x=0;16>M;++M){if(!ce(u,$[x+0]))return M;for(;!ce(u,$[x+1]);)if($=m[++M].Yb[0],x=0,M==16)return 16;var J=m[M+1].Yb;if(ce(u,$[x+2])){var te=u,he=0;if(ce(te,(_e=$)[(Ee=x)+3]))if(ce(te,_e[Ee+6])){for($=0,Ee=2*(he=ce(te,_e[Ee+8]))+(_e=ce(te,_e[Ee+9+he])),he=0,_e=M3[Ee];_e[$];++$)he+=he+ce(te,_e[$]);he+=3+(8<<Ee)}else ce(te,_e[Ee+7])?(he=7+2*ce(te,165),he+=ce(te,145)):he=5+ce(te,159);else he=ce(te,_e[Ee+4])?3+ce(te,_e[Ee+5]):2;$=J[2]}else he=1,$=J[1];J=q+H3[M],0>(te=u).b&&ue(te);var Ee,_e=te.b,xe=(Ee=te.Ca>>1)-(te.I>>_e)>>31;--te.b,te.Ca+=xe,te.Ca|=1,te.I-=(Ee+1&xe)<<_e,G[J]=((he^xe)-xe)*F[(0<M)+0]}return 16}function Ul(u){var m=u.rb[u.sb-1];m.la=0,m.Na=0,s(u.zc,0,0,u.zc.length),u.ja=0}function Jc(u,m){if(u==null)return 0;if(m==null)return Pn(u,2,"NULL VP8Io parameter in VP8Decode().");if(!u.cb&&!Tl(u,m))return 0;if(e(u.cb),m.ac==null||m.ac(m)){m.ob&&(u.L=0);var x=nm[u.L];if(u.L==2?(u.yb=0,u.zb=0):(u.yb=m.v-x>>4,u.zb=m.j-x>>4,0>u.yb&&(u.yb=0),0>u.zb&&(u.zb=0)),u.Va=m.o+15+x>>4,u.Hb=m.va+15+x>>4,u.Hb>u.za&&(u.Hb=u.za),u.Va>u.Ub&&(u.Va=u.Ub),0<u.L){var F=u.ed;for(x=0;4>x;++x){var M;if(u.Qa.Cb){var G=u.Qa.Lb[x];u.Qa.Fb||(G+=F.Tb)}else G=F.Tb;for(M=0;1>=M;++M){var q=u.gd[x][M],$=G;if(F.Pc&&($+=F.vd[0],M&&($+=F.od[0])),0<($=0>$?0:63<$?63:$)){var J=$;0<F.wb&&(J=4<F.wb?J>>2:J>>1)>9-F.wb&&(J=9-F.wb),1>J&&(J=1),q.dd=J,q.tc=2*$+J,q.ld=40<=$?2:15<=$?1:0}else q.tc=0;q.La=M}}}x=0}else Pn(u,6,"Frame setup failed"),x=u.a;if(x=x==0){if(x){u.$c=0,0<u.Aa||(u.Ic=iQ);e:{x=u.Ic,F=4*(J=u.za);var te=32*J,he=J+1,Ee=0<u.L?J*(0<u.Aa?2:1):0,_e=(u.Aa==2?2:1)*J;if((q=F+832+(M=3*(16*x+nm[u.L])/2*te)+(G=u.Fa!=null&&0<u.Fa.length?u.Kc.c*u.Kc.i:0))!=q)x=0;else{if(q>u.Vb){if(u.Vb=0,u.Ec=i(q),u.Fc=0,u.Ec==null){x=Pn(u,1,"no memory during frame initialization.");break e}u.Vb=q}q=u.Ec,$=u.Fc,u.Ac=q,u.Bc=$,$+=F,u.Gd=a(te,Nl),u.Hd=0,u.rb=a(he+1,ga),u.sb=1,u.wa=Ee?a(Ee,ma):null,u.Y=0,u.D.Nb=0,u.D.wa=u.wa,u.D.Y=u.Y,0<u.Aa&&(u.D.Y+=J),e(!0),u.oc=q,u.pc=$,$+=832,u.ya=a(_e,za),u.aa=0,u.D.ya=u.ya,u.D.aa=u.aa,u.Aa==2&&(u.D.aa+=J),u.R=16*J,u.B=8*J,J=(te=nm[u.L])*u.R,te=te/2*u.B,u.sa=q,u.ta=$+J,u.qa=u.sa,u.ra=u.ta+16*x*u.R+te,u.Ha=u.qa,u.Ia=u.ra+8*x*u.B+te,u.$c=0,$+=M,u.mb=G?q:null,u.nb=G?$:null,e($+G<=u.Fc+u.Vb),Ul(u),s(u.Ac,u.Bc,0,F),x=1}}if(x){if(m.ka=0,m.y=u.sa,m.O=u.ta,m.f=u.qa,m.N=u.ra,m.ea=u.Ha,m.Vd=u.Ia,m.fa=u.R,m.Rc=u.B,m.F=null,m.J=0,!zp){for(x=-255;255>=x;++x)_r[255+x]=0>x?-x:x;for(x=-1020;1020>=x;++x)io[1020+x]=-128>x?-128:127<x?127:x;for(x=-112;112>=x;++x)oh[112+x]=-16>x?-16:15<x?15:x;for(x=-255;510>=x;++x)du[255+x]=0>x?0:255<x?255:x;zp=1}lu=Ja,so=qo,sh=Ql,_s=mn,gi=Xa,cr=$a,cu=Zo,qp=Mi,ih=tA,Vl=Ml,Kl=eA,lA=Za,Gl=nA,uu=Ba,ql=Ya,cA=Zs,ah=Er,wi=nu,Ki[0]=pi,Ki[1]=Jd,Ki[2]=va,Ki[3]=Zd,Ki[4]=eu,Ki[5]=$o,Ki[6]=Js,Ki[7]=Ll,Ki[8]=Jo,Ki[9]=Xo,uA[0]=wa,uA[1]=Yd,uA[2]=Di,uA[3]=zo,uA[4]=Ln,uA[5]=Zc,uA[6]=Pl,ao[0]=Oi,ao[1]=Yc,ao[2]=tu,ao[3]=ji,ao[4]=dn,ao[5]=Rl,ao[6]=kl,x=1}else x=0}x&&(x=function(xe,Me){for(xe.M=0;xe.M<xe.Va;++xe.M){var Te,fe=xe.Jc[xe.M&xe.Xb],me=xe.m,je=xe;for(Te=0;Te<je.za;++Te){var Ke=me,Oe=je,ut=Oe.Ac,tt=Oe.Bc+4*Te,Tt=Oe.zc,it=Oe.ya[Oe.aa+Te];if(Oe.Qa.Bb?it.$b=ce(Ke,Oe.Pa.jb[0])?2+ce(Ke,Oe.Pa.jb[2]):ce(Ke,Oe.Pa.jb[1]):it.$b=0,Oe.kc&&(it.Ad=ce(Ke,Oe.Bd)),it.Za=!ce(Ke,145)+0,it.Za){var un=it.Ob,gn=0;for(Oe=0;4>Oe;++Oe){var on,tn=Tt[0+Oe];for(on=0;4>on;++on){tn=K3[ut[tt+on]][tn];for(var Nn=yb[ce(Ke,tn[0])];0<Nn;)Nn=yb[2*Nn+ce(Ke,tn[Nn])];tn=-Nn,ut[tt+on]=tn}r(un,gn,ut,tt,4),gn+=4,Tt[0+Oe]=tn}}else tn=ce(Ke,156)?ce(Ke,128)?1:3:ce(Ke,163)?2:0,it.Ob[0]=tn,s(ut,tt,tn,4),s(Tt,0,tn,4);it.Dd=ce(Ke,142)?ce(Ke,114)?ce(Ke,183)?1:3:2:0}if(je.m.Ka)return Pn(xe,7,"Premature end-of-partition0 encountered.");for(;xe.ja<xe.za;++xe.ja){if(je=fe,Ke=(me=xe).rb[me.sb-1],ut=me.rb[me.sb+me.ja],Te=me.ya[me.aa+me.ja],tt=me.kc?Te.Ad:0)Ke.la=ut.la=0,Te.Za||(Ke.Na=ut.Na=0),Te.Hc=0,Te.Gc=0,Te.ia=0;else{var Cn,Kt;if(Ke=ut,ut=je,tt=me.Pa.Xc,Tt=me.ya[me.aa+me.ja],it=me.pb[Tt.$b],Oe=Tt.ad,un=0,gn=me.rb[me.sb-1],tn=on=0,s(Oe,un,0,384),Tt.Za)var yr=0,js=tt[3];else{Nn=i(16);var Br=Ke.Na+gn.Na;if(Br=Ah(ut,tt[1],Br,it.Eb,0,Nn,0),Ke.Na=gn.Na=(0<Br)+0,1<Br)lu(Nn,0,Oe,un);else{var Os=Nn[0]+3>>3;for(Nn=0;256>Nn;Nn+=16)Oe[un+Nn]=Os}yr=1,js=tt[0]}var wn=15&Ke.la,ti=15&gn.la;for(Nn=0;4>Nn;++Nn){var ni=1&ti;for(Os=Kt=0;4>Os;++Os)wn=wn>>1|(ni=(Br=Ah(ut,js,Br=ni+(1&wn),it.Sc,yr,Oe,un))>yr)<<7,Kt=Kt<<2|(3<Br?3:1<Br?2:Oe[un+0]!=0),un+=16;wn>>=4,ti=ti>>1|ni<<7,on=(on<<8|Kt)>>>0}for(js=wn,yr=ti>>4,Cn=0;4>Cn;Cn+=2){for(Kt=0,wn=Ke.la>>4+Cn,ti=gn.la>>4+Cn,Nn=0;2>Nn;++Nn){for(ni=1&ti,Os=0;2>Os;++Os)Br=ni+(1&wn),wn=wn>>1|(ni=0<(Br=Ah(ut,tt[2],Br,it.Qc,0,Oe,un)))<<3,Kt=Kt<<2|(3<Br?3:1<Br?2:Oe[un+0]!=0),un+=16;wn>>=2,ti=ti>>1|ni<<5}tn|=Kt<<4*Cn,js|=wn<<4<<Cn,yr|=(240&ti)<<Cn}Ke.la=js,gn.la=yr,Tt.Hc=on,Tt.Gc=tn,Tt.ia=43690&tn?0:it.ia,tt=!(on|tn)}if(0<me.L&&(me.wa[me.Y+me.ja]=me.gd[Te.$b][Te.Za],me.wa[me.Y+me.ja].La|=!tt),je.Ka)return Pn(xe,7,"Premature end-of-file encountered.")}if(Ul(xe),me=Me,je=1,Te=(fe=xe).D,Ke=0<fe.L&&fe.M>=fe.zb&&fe.M<=fe.Va,fe.Aa==0)e:{if(Te.M=fe.M,Te.uc=Ke,ba(fe,Te),je=1,Te=(Kt=fe.D).Nb,Ke=(tn=nm[fe.L])*fe.R,ut=tn/2*fe.B,Nn=16*Te*fe.R,Os=8*Te*fe.B,tt=fe.sa,Tt=fe.ta-Ke+Nn,it=fe.qa,Oe=fe.ra-ut+Os,un=fe.Ha,gn=fe.Ia-ut+Os,ti=(wn=Kt.M)==0,on=wn>=fe.Va-1,fe.Aa==2&&ba(fe,Kt),Kt.uc)for(ni=(Br=fe).D.M,e(Br.D.uc),Kt=Br.yb;Kt<Br.Hb;++Kt){yr=Kt,js=ni;var Lr=(Yr=(nr=Br).D).Nb;Cn=nr.R;var Yr=Yr.wa[Yr.Y+yr],Is=nr.sa,xi=nr.ta+16*Lr*Cn+16*yr,Ea=Yr.dd,Rr=Yr.tc;if(Rr!=0)if(e(3<=Rr),nr.L==1)0<yr&&cA(Is,xi,Cn,Rr+4),Yr.La&&wi(Is,xi,Cn,Rr),0<js&&ql(Is,xi,Cn,Rr+4),Yr.La&&ah(Is,xi,Cn,Rr);else{var oo=nr.B,zl=nr.qa,hu=nr.ra+8*Lr*oo+8*yr,hA=nr.Ha,nr=nr.Ia+8*Lr*oo+8*yr;Lr=Yr.ld,0<yr&&(qp(Is,xi,Cn,Rr+4,Ea,Lr),Vl(zl,hu,hA,nr,oo,Rr+4,Ea,Lr)),Yr.La&&(lA(Is,xi,Cn,Rr,Ea,Lr),uu(zl,hu,hA,nr,oo,Rr,Ea,Lr)),0<js&&(cu(Is,xi,Cn,Rr+4,Ea,Lr),ih(zl,hu,hA,nr,oo,Rr+4,Ea,Lr)),Yr.La&&(Kl(Is,xi,Cn,Rr,Ea,Lr),Gl(zl,hu,hA,nr,oo,Rr,Ea,Lr))}}if(fe.ia&&alert("todo:DitherRow"),me.put!=null){if(Kt=16*wn,wn=16*(wn+1),ti?(me.y=fe.sa,me.O=fe.ta+Nn,me.f=fe.qa,me.N=fe.ra+Os,me.ea=fe.Ha,me.W=fe.Ia+Os):(Kt-=tn,me.y=tt,me.O=Tt,me.f=it,me.N=Oe,me.ea=un,me.W=gn),on||(wn-=tn),wn>me.o&&(wn=me.o),me.F=null,me.J=null,fe.Fa!=null&&0<fe.Fa.length&&Kt<wn&&(me.J=aA(fe,me,Kt,wn-Kt),me.F=fe.mb,me.F==null&&me.F.length==0)){je=Pn(fe,3,"Could not decode alpha data.");break e}Kt<me.j&&(tn=me.j-Kt,Kt=me.j,e(!(1&tn)),me.O+=fe.R*tn,me.N+=fe.B*(tn>>1),me.W+=fe.B*(tn>>1),me.F!=null&&(me.J+=me.width*tn)),Kt<wn&&(me.O+=me.v,me.N+=me.v>>1,me.W+=me.v>>1,me.F!=null&&(me.J+=me.v),me.ka=Kt-me.j,me.U=me.va-me.v,me.T=wn-Kt,je=me.put(me))}Te+1!=fe.Ic||on||(r(fe.sa,fe.ta-Ke,tt,Tt+16*fe.R,Ke),r(fe.qa,fe.ra-ut,it,Oe+8*fe.B,ut),r(fe.Ha,fe.Ia-ut,un,gn+8*fe.B,ut))}if(!je)return Pn(xe,6,"Output aborted.")}return 1}(u,m)),m.bc!=null&&m.bc(m),x&=1}return x?(u.cb=0,x):0}function Rs(u,m,x,F,M){M=u[m+x+32*F]+(M>>3),u[m+x+32*F]=-256&M?0>M?0:255:M}function Go(u,m,x,F,M,G){Rs(u,m,0,x,F+M),Rs(u,m,1,x,F+G),Rs(u,m,2,x,F-G),Rs(u,m,3,x,F-M)}function tr(u){return(20091*u>>16)+u}function Cs(u,m,x,F){var M,G=0,q=i(16);for(M=0;4>M;++M){var $=u[m+0]+u[m+8],J=u[m+0]-u[m+8],te=(35468*u[m+4]>>16)-tr(u[m+12]),he=tr(u[m+4])+(35468*u[m+12]>>16);q[G+0]=$+he,q[G+1]=J+te,q[G+2]=J-te,q[G+3]=$-he,G+=4,m++}for(M=G=0;4>M;++M)$=(u=q[G+0]+4)+q[G+8],J=u-q[G+8],te=(35468*q[G+4]>>16)-tr(q[G+12]),Rs(x,F,0,0,$+(he=tr(q[G+4])+(35468*q[G+12]>>16))),Rs(x,F,1,0,J+te),Rs(x,F,2,0,J-te),Rs(x,F,3,0,$-he),G++,F+=32}function $a(u,m,x,F){var M=u[m+0]+4,G=35468*u[m+4]>>16,q=tr(u[m+4]),$=35468*u[m+1]>>16;Go(x,F,0,M+q,u=tr(u[m+1]),$),Go(x,F,1,M+G,u,$),Go(x,F,2,M-G,u,$),Go(x,F,3,M-q,u,$)}function qo(u,m,x,F,M){Cs(u,m,x,F),M&&Cs(u,m+16,x,F+4)}function Ql(u,m,x,F){so(u,m+0,x,F,1),so(u,m+32,x,F+128,1)}function mn(u,m,x,F){var M;for(u=u[m+0]+4,M=0;4>M;++M)for(m=0;4>m;++m)Rs(x,F,m,M,u)}function Xa(u,m,x,F){u[m+0]&&_s(u,m+0,x,F),u[m+16]&&_s(u,m+16,x,F+4),u[m+32]&&_s(u,m+32,x,F+128),u[m+48]&&_s(u,m+48,x,F+128+4)}function Ja(u,m,x,F){var M,G=i(16);for(M=0;4>M;++M){var q=u[m+0+M]+u[m+12+M],$=u[m+4+M]+u[m+8+M],J=u[m+4+M]-u[m+8+M],te=u[m+0+M]-u[m+12+M];G[0+M]=q+$,G[8+M]=q-$,G[4+M]=te+J,G[12+M]=te-J}for(M=0;4>M;++M)q=(u=G[0+4*M]+3)+G[3+4*M],$=G[1+4*M]+G[2+4*M],J=G[1+4*M]-G[2+4*M],te=u-G[3+4*M],x[F+0]=q+$>>3,x[F+16]=te+J>>3,x[F+32]=q-$>>3,x[F+48]=te-J>>3,F+=64}function ki(u,m,x){var F,M=m-32,G=ei,q=255-u[M-1];for(F=0;F<x;++F){var $,J=G,te=q+u[m-1];for($=0;$<x;++$)u[m+$]=J[te+u[M+$]];m+=32}}function Jd(u,m){ki(u,m,4)}function Yc(u,m){ki(u,m,8)}function Yd(u,m){ki(u,m,16)}function Di(u,m){var x;for(x=0;16>x;++x)r(u,m+32*x,u,m-32,16)}function zo(u,m){var x;for(x=16;0<x;--x)s(u,m,u[m-1],16),m+=32}function Wo(u,m,x){var F;for(F=0;16>F;++F)s(m,x+32*F,u,16)}function wa(u,m){var x,F=16;for(x=0;16>x;++x)F+=u[m-1+32*x]+u[m+x-32];Wo(F>>5,u,m)}function Ln(u,m){var x,F=8;for(x=0;16>x;++x)F+=u[m-1+32*x];Wo(F>>4,u,m)}function Zc(u,m){var x,F=8;for(x=0;16>x;++x)F+=u[m+x-32];Wo(F>>4,u,m)}function Pl(u,m){Wo(128,u,m)}function Lt(u,m,x){return u+2*m+x+2>>2}function va(u,m){var x,F=m-32;for(F=new Uint8Array([Lt(u[F-1],u[F+0],u[F+1]),Lt(u[F+0],u[F+1],u[F+2]),Lt(u[F+1],u[F+2],u[F+3]),Lt(u[F+2],u[F+3],u[F+4])]),x=0;4>x;++x)r(u,m+32*x,F,0,F.length)}function Zd(u,m){var x=u[m-1],F=u[m-1+32],M=u[m-1+64],G=u[m-1+96];be(u,m+0,16843009*Lt(u[m-1-32],x,F)),be(u,m+32,16843009*Lt(x,F,M)),be(u,m+64,16843009*Lt(F,M,G)),be(u,m+96,16843009*Lt(M,G,G))}function pi(u,m){var x,F=4;for(x=0;4>x;++x)F+=u[m+x-32]+u[m-1+32*x];for(F>>=3,x=0;4>x;++x)s(u,m+32*x,F,4)}function eu(u,m){var x=u[m-1+0],F=u[m-1+32],M=u[m-1+64],G=u[m-1-32],q=u[m+0-32],$=u[m+1-32],J=u[m+2-32],te=u[m+3-32];u[m+0+96]=Lt(F,M,u[m-1+96]),u[m+1+96]=u[m+0+64]=Lt(x,F,M),u[m+2+96]=u[m+1+64]=u[m+0+32]=Lt(G,x,F),u[m+3+96]=u[m+2+64]=u[m+1+32]=u[m+0+0]=Lt(q,G,x),u[m+3+64]=u[m+2+32]=u[m+1+0]=Lt($,q,G),u[m+3+32]=u[m+2+0]=Lt(J,$,q),u[m+3+0]=Lt(te,J,$)}function Js(u,m){var x=u[m+1-32],F=u[m+2-32],M=u[m+3-32],G=u[m+4-32],q=u[m+5-32],$=u[m+6-32],J=u[m+7-32];u[m+0+0]=Lt(u[m+0-32],x,F),u[m+1+0]=u[m+0+32]=Lt(x,F,M),u[m+2+0]=u[m+1+32]=u[m+0+64]=Lt(F,M,G),u[m+3+0]=u[m+2+32]=u[m+1+64]=u[m+0+96]=Lt(M,G,q),u[m+3+32]=u[m+2+64]=u[m+1+96]=Lt(G,q,$),u[m+3+64]=u[m+2+96]=Lt(q,$,J),u[m+3+96]=Lt($,J,J)}function $o(u,m){var x=u[m-1+0],F=u[m-1+32],M=u[m-1+64],G=u[m-1-32],q=u[m+0-32],$=u[m+1-32],J=u[m+2-32],te=u[m+3-32];u[m+0+0]=u[m+1+64]=G+q+1>>1,u[m+1+0]=u[m+2+64]=q+$+1>>1,u[m+2+0]=u[m+3+64]=$+J+1>>1,u[m+3+0]=J+te+1>>1,u[m+0+96]=Lt(M,F,x),u[m+0+64]=Lt(F,x,G),u[m+0+32]=u[m+1+96]=Lt(x,G,q),u[m+1+32]=u[m+2+96]=Lt(G,q,$),u[m+2+32]=u[m+3+96]=Lt(q,$,J),u[m+3+32]=Lt($,J,te)}function Ll(u,m){var x=u[m+0-32],F=u[m+1-32],M=u[m+2-32],G=u[m+3-32],q=u[m+4-32],$=u[m+5-32],J=u[m+6-32],te=u[m+7-32];u[m+0+0]=x+F+1>>1,u[m+1+0]=u[m+0+64]=F+M+1>>1,u[m+2+0]=u[m+1+64]=M+G+1>>1,u[m+3+0]=u[m+2+64]=G+q+1>>1,u[m+0+32]=Lt(x,F,M),u[m+1+32]=u[m+0+96]=Lt(F,M,G),u[m+2+32]=u[m+1+96]=Lt(M,G,q),u[m+3+32]=u[m+2+96]=Lt(G,q,$),u[m+3+64]=Lt(q,$,J),u[m+3+96]=Lt($,J,te)}function Xo(u,m){var x=u[m-1+0],F=u[m-1+32],M=u[m-1+64],G=u[m-1+96];u[m+0+0]=x+F+1>>1,u[m+2+0]=u[m+0+32]=F+M+1>>1,u[m+2+32]=u[m+0+64]=M+G+1>>1,u[m+1+0]=Lt(x,F,M),u[m+3+0]=u[m+1+32]=Lt(F,M,G),u[m+3+32]=u[m+1+64]=Lt(M,G,G),u[m+3+64]=u[m+2+64]=u[m+0+96]=u[m+1+96]=u[m+2+96]=u[m+3+96]=G}function Jo(u,m){var x=u[m-1+0],F=u[m-1+32],M=u[m-1+64],G=u[m-1+96],q=u[m-1-32],$=u[m+0-32],J=u[m+1-32],te=u[m+2-32];u[m+0+0]=u[m+2+32]=x+q+1>>1,u[m+0+32]=u[m+2+64]=F+x+1>>1,u[m+0+64]=u[m+2+96]=M+F+1>>1,u[m+0+96]=G+M+1>>1,u[m+3+0]=Lt($,J,te),u[m+2+0]=Lt(q,$,J),u[m+1+0]=u[m+3+32]=Lt(x,q,$),u[m+1+32]=u[m+3+64]=Lt(F,x,q),u[m+1+64]=u[m+3+96]=Lt(M,F,x),u[m+1+96]=Lt(G,M,F)}function tu(u,m){var x;for(x=0;8>x;++x)r(u,m+32*x,u,m-32,8)}function ji(u,m){var x;for(x=0;8>x;++x)s(u,m,u[m-1],8),m+=32}function Ys(u,m,x){var F;for(F=0;8>F;++F)s(m,x+32*F,u,8)}function Oi(u,m){var x,F=8;for(x=0;8>x;++x)F+=u[m+x-32]+u[m-1+32*x];Ys(F>>4,u,m)}function Rl(u,m){var x,F=4;for(x=0;8>x;++x)F+=u[m+x-32];Ys(F>>3,u,m)}function dn(u,m){var x,F=4;for(x=0;8>x;++x)F+=u[m-1+32*x];Ys(F>>3,u,m)}function kl(u,m){Ys(128,u,m)}function Yo(u,m,x){var F=u[m-x],M=u[m+0],G=3*(M-F)+uv[1020+u[m-2*x]-u[m+x]],q=Wp[112+(G+4>>3)];u[m-x]=ei[255+F+Wp[112+(G+3>>3)]],u[m+0]=ei[255+M-q]}function Dl(u,m,x,F){var M=u[m+0],G=u[m+x];return yi[255+u[m-2*x]-u[m-x]]>F||yi[255+G-M]>F}function jl(u,m,x,F){return 4*yi[255+u[m-x]-u[m+0]]+yi[255+u[m-2*x]-u[m+x]]<=F}function Ol(u,m,x,F,M){var G=u[m-3*x],q=u[m-2*x],$=u[m-x],J=u[m+0],te=u[m+x],he=u[m+2*x],Ee=u[m+3*x];return 4*yi[255+$-J]+yi[255+q-te]>F?0:yi[255+u[m-4*x]-G]<=M&&yi[255+G-q]<=M&&yi[255+q-$]<=M&&yi[255+Ee-he]<=M&&yi[255+he-te]<=M&&yi[255+te-J]<=M}function Ya(u,m,x,F){var M=2*F+1;for(F=0;16>F;++F)jl(u,m+F,x,M)&&Yo(u,m+F,x)}function Zs(u,m,x,F){var M=2*F+1;for(F=0;16>F;++F)jl(u,m+F*x,1,M)&&Yo(u,m+F*x,1)}function Er(u,m,x,F){var M;for(M=3;0<M;--M)Ya(u,m+=4*x,x,F)}function nu(u,m,x,F){var M;for(M=3;0<M;--M)Zs(u,m+=4,x,F)}function ya(u,m,x,F,M,G,q,$){for(G=2*G+1;0<M--;){if(Ol(u,m,x,G,q))if(Dl(u,m,x,$))Yo(u,m,x);else{var J=u,te=m,he=x,Ee=J[te-2*he],_e=J[te-he],xe=J[te+0],Me=J[te+he],Te=J[te+2*he],fe=27*(je=uv[1020+3*(xe-_e)+uv[1020+Ee-Me]])+63>>7,me=18*je+63>>7,je=9*je+63>>7;J[te-3*he]=ei[255+J[te-3*he]+je],J[te-2*he]=ei[255+Ee+me],J[te-he]=ei[255+_e+fe],J[te+0]=ei[255+xe-fe],J[te+he]=ei[255+Me-me],J[te+2*he]=ei[255+Te-je]}m+=F}}function $r(u,m,x,F,M,G,q,$){for(G=2*G+1;0<M--;){if(Ol(u,m,x,G,q))if(Dl(u,m,x,$))Yo(u,m,x);else{var J=u,te=m,he=x,Ee=J[te-he],_e=J[te+0],xe=J[te+he],Me=Wp[112+((Te=3*(_e-Ee))+4>>3)],Te=Wp[112+(Te+3>>3)],fe=Me+1>>1;J[te-2*he]=ei[255+J[te-2*he]+fe],J[te-he]=ei[255+Ee+Te],J[te+0]=ei[255+_e-Me],J[te+he]=ei[255+xe-fe]}m+=F}}function Zo(u,m,x,F,M,G){ya(u,m,x,1,16,F,M,G)}function Mi(u,m,x,F,M,G){ya(u,m,1,x,16,F,M,G)}function eA(u,m,x,F,M,G){var q;for(q=3;0<q;--q)$r(u,m+=4*x,x,1,16,F,M,G)}function Za(u,m,x,F,M,G){var q;for(q=3;0<q;--q)$r(u,m+=4,1,x,16,F,M,G)}function tA(u,m,x,F,M,G,q,$){ya(u,m,M,1,8,G,q,$),ya(x,F,M,1,8,G,q,$)}function Ml(u,m,x,F,M,G,q,$){ya(u,m,1,M,8,G,q,$),ya(x,F,1,M,8,G,q,$)}function nA(u,m,x,F,M,G,q,$){$r(u,m+4*M,M,1,8,G,q,$),$r(x,F+4*M,M,1,8,G,q,$)}function Ba(u,m,x,F,M,G,q,$){$r(u,m+4,1,M,8,G,q,$),$r(x,F+4,1,M,8,G,q,$)}function eo(){this.ba=new nt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new xt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function rA(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function to(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function sA(){this.ua=0,this.Wa=new re,this.vb=new re,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new K,this.yc=new _}function ru(){this.xb=this.a=0,this.l=new Wa,this.ca=new nt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new k,this.Pb=0,this.wd=new k,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new sA,this.ab=0,this.gc=a(4,to),this.Oc=0}function Hi(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Wa,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function xa(u,m,x,F,M,G,q){for(u=u==null?0:u[m+0],m=0;m<q;++m)M[G+m]=u+x[F+m]&255,u=M[G+m]}function iA(u,m,x,F,M,G,q){var $;if(u==null)xa(null,null,x,F,M,G,q);else for($=0;$<q;++$)M[G+$]=u[m+$]+x[F+$]&255}function ls(u,m,x,F,M,G,q){if(u==null)xa(null,null,x,F,M,G,q);else{var $,J=u[m+0],te=J,he=J;for($=0;$<q;++$)te=he+(J=u[m+$])-te,he=x[F+$]+(-256&te?0>te?0:255:te)&255,te=J,M[G+$]=he}}function aA(u,m,x,F){var M=m.width,G=m.o;if(e(u!=null&&m!=null),0>x||0>=F||x+F>G)return null;if(!u.Cc){if(u.ga==null){var q;if(u.ga=new Hi,(q=u.ga==null)||(q=m.width*m.o,e(u.Gb.length==0),u.Gb=i(q),u.Uc=0,u.Gb==null?q=0:(u.mb=u.Gb,u.nb=u.Uc,u.rc=null,q=1),q=!q),!q){q=u.ga;var $=u.Fa,J=u.P,te=u.qc,he=u.mb,Ee=u.nb,_e=J+1,xe=te-1,Me=q.l;if(e($!=null&&he!=null&&m!=null),dA[0]=null,dA[1]=xa,dA[2]=iA,dA[3]=ls,q.ca=he,q.tb=Ee,q.c=m.width,q.i=m.height,e(0<q.c&&0<q.i),1>=te)m=0;else if(q.$a=$[J+0]>>0&3,q.Z=$[J+0]>>2&3,q.Lc=$[J+0]>>4&3,J=$[J+0]>>6&3,0>q.$a||1<q.$a||4<=q.Z||1<q.Lc||J)m=0;else if(Me.put=On,Me.ac=qt,Me.bc=Ar,Me.ma=q,Me.width=m.width,Me.height=m.height,Me.Da=m.Da,Me.v=m.v,Me.va=m.va,Me.j=m.j,Me.o=m.o,q.$a)e:{e(q.$a==1),m=lr();t:for(;;){if(m==null){m=0;break e}if(e(q!=null),q.mc=m,m.c=q.c,m.i=q.i,m.l=q.l,m.l.ma=q,m.l.width=q.c,m.l.height=q.i,m.a=0,z(m.m,$,_e,xe),!Xs(q.c,q.i,1,m,null)||(m.ab==1&&m.gc[0].hc==3&&zt(m.s)?(q.ic=1,$=m.c*m.i,m.Ta=null,m.Ua=0,m.V=i($),m.Ba=0,m.V==null?(m.a=1,m=0):m=1):(q.ic=0,m=ha(m,q.c)),!m))break t;m=1;break e}q.mc=null,m=0}else m=xe>=q.c*q.i;q=!m}if(q)return null;u.ga.Lc!=1?u.Ga=0:F=G-x}e(u.ga!=null),e(x+F<=G);e:{if(m=($=u.ga).c,G=$.l.o,$.$a==0){if(_e=u.rc,xe=u.Vc,Me=u.Fa,J=u.P+1+x*m,te=u.mb,he=u.nb+x*m,e(J<=u.P+u.qc),$.Z!=0)for(e(dA[$.Z]!=null),q=0;q<F;++q)dA[$.Z](_e,xe,Me,J,te,he,m),_e=te,xe=he,he+=m,J+=m;else for(q=0;q<F;++q)r(te,he,Me,J,m),_e=te,xe=he,he+=m,J+=m;u.rc=_e,u.Vc=xe}else{if(e($.mc!=null),m=x+F,e((q=$.mc)!=null),e(m<=q.i),q.C>=m)m=1;else if($.ic||Be(),$.ic){$=q.V,_e=q.Ba,xe=q.c;var Te=q.i,fe=(Me=1,J=q.$/xe,te=q.$%xe,he=q.m,Ee=q.s,q.$),me=xe*Te,je=xe*m,Ke=Ee.wc,Oe=fe<je?ye(Ee,te,J):null;e(fe<=me),e(m<=Te),e(zt(Ee));t:for(;;){for(;!he.h&&fe<je;){if(te&Ke||(Oe=ye(Ee,te,J)),e(Oe!=null),Y(he),256>(Te=er(Oe.G[0],Oe.H[0],he)))$[_e+fe]=Te,++fe,++te>=xe&&(te=0,++J<=m&&!(J%16)&&bt(q,J));else{if(!(280>Te)){Me=0;break t}Te=zr(Te-256,he);var ut,tt=er(Oe.G[4],Oe.H[4],he);if(Y(he),!(fe>=(tt=Pr(xe,tt=zr(tt,he)))&&me-fe>=Te)){Me=0;break t}for(ut=0;ut<Te;++ut)$[_e+fe+ut]=$[_e+fe+ut-tt];for(fe+=Te,te+=Te;te>=xe;)te-=xe,++J<=m&&!(J%16)&&bt(q,J);fe<je&&te&Ke&&(Oe=ye(Ee,te,J))}e(he.h==Z(he))}bt(q,J>m?m:J);break t}!Me||he.h&&fe<me?(Me=0,q.a=he.h?5:3):q.$=fe,m=Me}else m=Bt(q,q.V,q.Ba,q.c,q.i,m,fa);if(!m){F=0;break e}}x+F>=G&&(u.Cc=1),F=1}if(!F)return null;if(u.Cc&&((F=u.ga)!=null&&(F.mc=null),u.ga=null,0<u.Ga))return alert("todo:WebPDequantizeLevels"),null}return u.nb+x*M}function v(u,m,x,F,M,G){for(;0<M--;){var q,$=u,J=m+(x?1:0),te=u,he=m+(x?0:3);for(q=0;q<F;++q){var Ee=te[he+4*q];Ee!=255&&(Ee*=32897,$[J+4*q+0]=$[J+4*q+0]*Ee>>23,$[J+4*q+1]=$[J+4*q+1]*Ee>>23,$[J+4*q+2]=$[J+4*q+2]*Ee>>23)}m+=G}}function O(u,m,x,F,M){for(;0<F--;){var G;for(G=0;G<x;++G){var q=u[m+2*G+0],$=15&(te=u[m+2*G+1]),J=4369*$,te=(240&te|te>>4)*J>>16;u[m+2*G+0]=(240&q|q>>4)*J>>16&240|(15&q|q<<4)*J>>16>>4&15,u[m+2*G+1]=240&te|$}m+=M}}function ae(u,m,x,F,M,G,q,$){var J,te,he=255;for(te=0;te<M;++te){for(J=0;J<F;++J){var Ee=u[m+J];G[q+4*J]=Ee,he&=Ee}m+=x,q+=$}return he!=255}function de(u,m,x,F,M){var G;for(G=0;G<M;++G)x[F+G]=u[m+G]>>8}function Be(){vi=v,Fn=O,Tn=ae,ur=de}function Qe(u,m,x){I[u]=function(F,M,G,q,$,J,te,he,Ee,_e,xe,Me,Te,fe,me,je,Ke){var Oe,ut=Ke-1>>1,tt=$[J+0]|te[he+0]<<16,Tt=Ee[_e+0]|xe[Me+0]<<16;e(F!=null);var it=3*tt+Tt+131074>>2;for(m(F[M+0],255&it,it>>16,Te,fe),G!=null&&(it=3*Tt+tt+131074>>2,m(G[q+0],255&it,it>>16,me,je)),Oe=1;Oe<=ut;++Oe){var un=$[J+Oe]|te[he+Oe]<<16,gn=Ee[_e+Oe]|xe[Me+Oe]<<16,on=tt+un+Tt+gn+524296,tn=on+2*(un+Tt)>>3;it=tn+tt>>1,tt=(on=on+2*(tt+gn)>>3)+un>>1,m(F[M+2*Oe-1],255&it,it>>16,Te,fe+(2*Oe-1)*x),m(F[M+2*Oe-0],255&tt,tt>>16,Te,fe+(2*Oe-0)*x),G!=null&&(it=on+Tt>>1,tt=tn+gn>>1,m(G[q+2*Oe-1],255&it,it>>16,me,je+(2*Oe-1)*x),m(G[q+2*Oe+0],255&tt,tt>>16,me,je+(2*Oe+0)*x)),tt=un,Tt=gn}1&Ke||(it=3*tt+Tt+131074>>2,m(F[M+Ke-1],255&it,it>>16,Te,fe+(Ke-1)*x),G!=null&&(it=3*Tt+tt+131074>>2,m(G[q+Ke-1],255&it,it>>16,me,je+(Ke-1)*x)))}}function Ge(){Bi[$p]=W3,Bi[Xp]=xb,Bi[gb]=$3,Bi[Jp]=bb,Bi[Yp]=Cb,Bi[dv]=Eb,Bi[wb]=X3,Bi[hv]=xb,Bi[fv]=bb,Bi[Zp]=Cb,Bi[pv]=Eb}function rt(u){return u&-16384?0>u?0:255:u>>J3}function h(u,m){return rt((19077*u>>8)+(26149*m>>8)-14234)}function E(u,m,x){return rt((19077*u>>8)-(6419*m>>8)-(13320*x>>8)+8708)}function P(u,m){return rt((19077*u>>8)+(33050*m>>8)-17685)}function W(u,m,x,F,M){F[M+0]=h(u,x),F[M+1]=E(u,m,x),F[M+2]=P(u,m)}function ge(u,m,x,F,M){F[M+0]=P(u,m),F[M+1]=E(u,m,x),F[M+2]=h(u,x)}function Ie(u,m,x,F,M){var G=E(u,m,x);m=G<<3&224|P(u,m)>>3,F[M+0]=248&h(u,x)|G>>5,F[M+1]=m}function qe(u,m,x,F,M){var G=240&P(u,m)|15;F[M+0]=240&h(u,x)|E(u,m,x)>>4,F[M+1]=G}function jt(u,m,x,F,M){F[M+0]=255,W(u,m,x,F,M+1)}function en(u,m,x,F,M){ge(u,m,x,F,M),F[M+3]=255}function Ot(u,m,x,F,M){W(u,m,x,F,M),F[M+3]=255}function hn(u,m){return 0>u?0:u>m?m:u}function In(u,m,x){I[u]=function(F,M,G,q,$,J,te,he,Ee){for(var _e=he+(-2&Ee)*x;he!=_e;)m(F[M+0],G[q+0],$[J+0],te,he),m(F[M+1],G[q+0],$[J+0],te,he+x),M+=2,++q,++J,he+=2*x;1&Ee&&m(F[M+0],G[q+0],$[J+0],te,he)}}function Vi(u,m,x){return x==0?u==0?m==0?6:5:m==0?4:0:x}function Xr(u,m,x,F,M){switch(u>>>30){case 3:so(m,x,F,M,0);break;case 2:cr(m,x,F,M);break;case 1:_s(m,x,F,M)}}function ba(u,m){var x,F,M=m.M,G=m.Nb,q=u.oc,$=u.pc+40,J=u.oc,te=u.pc+584,he=u.oc,Ee=u.pc+600;for(x=0;16>x;++x)q[$+32*x-1]=129;for(x=0;8>x;++x)J[te+32*x-1]=129,he[Ee+32*x-1]=129;for(0<M?q[$-1-32]=J[te-1-32]=he[Ee-1-32]=129:(s(q,$-32-1,127,21),s(J,te-32-1,127,9),s(he,Ee-32-1,127,9)),F=0;F<u.za;++F){var _e=m.ya[m.aa+F];if(0<F){for(x=-1;16>x;++x)r(q,$+32*x-4,q,$+32*x+12,4);for(x=-1;8>x;++x)r(J,te+32*x-4,J,te+32*x+4,4),r(he,Ee+32*x-4,he,Ee+32*x+4,4)}var xe=u.Gd,Me=u.Hd+F,Te=_e.ad,fe=_e.Hc;if(0<M&&(r(q,$-32,xe[Me].y,0,16),r(J,te-32,xe[Me].f,0,8),r(he,Ee-32,xe[Me].ea,0,8)),_e.Za){var me=q,je=$-32+16;for(0<M&&(F>=u.za-1?s(me,je,xe[Me].y[15],4):r(me,je,xe[Me+1].y,0,4)),x=0;4>x;x++)me[je+128+x]=me[je+256+x]=me[je+384+x]=me[je+0+x];for(x=0;16>x;++x,fe<<=2)me=q,je=$+Ib[x],Ki[_e.Ob[x]](me,je),Xr(fe,Te,16*+x,me,je)}else if(me=Vi(F,M,_e.Ob[0]),uA[me](q,$),fe!=0)for(x=0;16>x;++x,fe<<=2)Xr(fe,Te,16*+x,q,$+Ib[x]);for(x=_e.Gc,me=Vi(F,M,_e.Dd),ao[me](J,te),ao[me](he,Ee),fe=Te,me=J,je=te,255&(_e=x>>0)&&(170&_e?sh(fe,256,me,je):gi(fe,256,me,je)),_e=he,fe=Ee,255&(x>>=8)&&(170&x?sh(Te,320,_e,fe):gi(Te,320,_e,fe)),M<u.Ub-1&&(r(xe[Me].y,0,q,$+480,16),r(xe[Me].f,0,J,te+224,8),r(xe[Me].ea,0,he,Ee+224,8)),x=8*G*u.B,xe=u.sa,Me=u.ta+16*F+16*G*u.R,Te=u.qa,_e=u.ra+8*F+x,fe=u.Ha,me=u.Ia+8*F+x,x=0;16>x;++x)r(xe,Me+x*u.R,q,$+32*x,16);for(x=0;8>x;++x)r(Te,_e+x*u.B,J,te+32*x,8),r(fe,me+x*u.B,he,Ee+32*x,8)}}function Ca(u,m,x,F,M,G,q,$,J){var te=[0],he=[0],Ee=0,_e=J!=null?J.kd:0,xe=J??new rA;if(u==null||12>x)return 7;xe.data=u,xe.w=m,xe.ha=x,m=[m],x=[x],xe.gb=[xe.gb];e:{var Me=m,Te=x,fe=xe.gb;if(e(u!=null),e(Te!=null),e(fe!=null),fe[0]=0,12<=Te[0]&&!n(u,Me[0],"RIFF")){if(n(u,Me[0]+8,"WEBP")){fe=3;break e}var me=ve(u,Me[0]+4);if(12>me||4294967286<me){fe=3;break e}if(_e&&me>Te[0]-8){fe=7;break e}fe[0]=me,Me[0]+=12,Te[0]-=12}fe=0}if(fe!=0)return fe;for(me=0<xe.gb[0],x=x[0];;){e:{var je=u;Te=m,fe=x;var Ke=te,Oe=he,ut=Me=[0];if((it=Ee=[Ee])[0]=0,8>fe[0])fe=7;else{if(!n(je,Te[0],"VP8X")){if(ve(je,Te[0]+4)!=10){fe=3;break e}if(18>fe[0]){fe=7;break e}var tt=ve(je,Te[0]+8),Tt=1+ne(je,Te[0]+12);if(2147483648<=Tt*(je=1+ne(je,Te[0]+15))){fe=3;break e}ut!=null&&(ut[0]=tt),Ke!=null&&(Ke[0]=Tt),Oe!=null&&(Oe[0]=je),Te[0]+=18,fe[0]-=18,it[0]=1}fe=0}}if(Ee=Ee[0],Me=Me[0],fe!=0)return fe;if(Te=!!(2&Me),!me&&Ee)return 3;if(G!=null&&(G[0]=!!(16&Me)),q!=null&&(q[0]=Te),$!=null&&($[0]=0),q=te[0],Me=he[0],Ee&&Te&&J==null){fe=0;break}if(4>x){fe=7;break}if(me&&Ee||!me&&!Ee&&!n(u,m[0],"ALPH")){x=[x],xe.na=[xe.na],xe.P=[xe.P],xe.Sa=[xe.Sa];e:{tt=u,fe=m,me=x;var it=xe.gb;Ke=xe.na,Oe=xe.P,ut=xe.Sa,Tt=22,e(tt!=null),e(me!=null),je=fe[0];var un=me[0];for(e(Ke!=null),e(ut!=null),Ke[0]=null,Oe[0]=null,ut[0]=0;;){if(fe[0]=je,me[0]=un,8>un){fe=7;break e}var gn=ve(tt,je+4);if(4294967286<gn){fe=3;break e}var on=8+gn+1&-2;if(Tt+=on,0<it&&Tt>it){fe=3;break e}if(!n(tt,je,"VP8 ")||!n(tt,je,"VP8L")){fe=0;break e}if(un[0]<on){fe=7;break e}n(tt,je,"ALPH")||(Ke[0]=tt,Oe[0]=je+8,ut[0]=gn),je+=on,un-=on}}if(x=x[0],xe.na=xe.na[0],xe.P=xe.P[0],xe.Sa=xe.Sa[0],fe!=0)break}x=[x],xe.Ja=[xe.Ja],xe.xa=[xe.xa];e:if(it=u,fe=m,me=x,Ke=xe.gb[0],Oe=xe.Ja,ut=xe.xa,tt=fe[0],je=!n(it,tt,"VP8 "),Tt=!n(it,tt,"VP8L"),e(it!=null),e(me!=null),e(Oe!=null),e(ut!=null),8>me[0])fe=7;else{if(je||Tt){if(it=ve(it,tt+4),12<=Ke&&it>Ke-12){fe=3;break e}if(_e&&it>me[0]-8){fe=7;break e}Oe[0]=it,fe[0]+=8,me[0]-=8,ut[0]=Tt}else ut[0]=5<=me[0]&&it[tt+0]==47&&!(it[tt+4]>>5),Oe[0]=me[0];fe=0}if(x=x[0],xe.Ja=xe.Ja[0],xe.xa=xe.xa[0],m=m[0],fe!=0)break;if(4294967286<xe.Ja)return 3;if($==null||Te||($[0]=xe.xa?2:1),q=[q],Me=[Me],xe.xa){if(5>x){fe=7;break}$=q,_e=Me,Te=G,u==null||5>x?u=0:5<=x&&u[m+0]==47&&!(u[m+4]>>5)?(me=[0],it=[0],Ke=[0],z(Oe=new k,u,m,x),ft(Oe,me,it,Ke)?($!=null&&($[0]=me[0]),_e!=null&&(_e[0]=it[0]),Te!=null&&(Te[0]=Ke[0]),u=1):u=0):u=0}else{if(10>x){fe=7;break}$=Me,u==null||10>x||!Fl(u,m+3,x-3)?u=0:(_e=u[m+0]|u[m+1]<<8|u[m+2]<<16,Te=16383&(u[m+7]<<8|u[m+6]),u=16383&(u[m+9]<<8|u[m+8]),1&_e||3<(_e>>1&7)||!(_e>>4&1)||_e>>5>=xe.Ja||!Te||!u?u=0:(q&&(q[0]=Te),$&&($[0]=u),u=1))}if(!u||(q=q[0],Me=Me[0],Ee&&(te[0]!=q||he[0]!=Me)))return 3;J!=null&&(J[0]=xe,J.offset=m-J.w,e(4294967286>m-J.w),e(J.offset==J.ha-x));break}return fe==0||fe==7&&Ee&&J==null?(G!=null&&(G[0]|=xe.na!=null&&0<xe.na.length),F!=null&&(F[0]=q),M!=null&&(M[0]=Me),0):fe}function eh(u,m,x){var F=m.width,M=m.height,G=0,q=0,$=F,J=M;if(m.Da=u!=null&&0<u.Da,m.Da&&($=u.cd,J=u.bd,G=u.v,q=u.j,11>x||(G&=-2,q&=-2),0>G||0>q||0>=$||0>=J||G+$>F||q+J>M))return 0;if(m.v=G,m.j=q,m.va=G+$,m.o=q+J,m.U=$,m.T=J,m.da=u!=null&&0<u.da,m.da){if(!pt($,J,x=[u.ib],G=[u.hb]))return 0;m.ib=x[0],m.hb=G[0]}return m.ob=u!=null&&u.ob,m.Kb=u==null||!u.Sd,m.da&&(m.ob=m.ib<3*F/4&&m.hb<3*M/4,m.Kb=0),1}function th(u){if(u==null)return 2;if(11>u.S){var m=u.f.RGBA;m.fb+=(u.height-1)*m.A,m.A=-m.A}else m=u.f.kb,u=u.height,m.O+=(u-1)*m.fa,m.fa=-m.fa,m.N+=(u-1>>1)*m.Ab,m.Ab=-m.Ab,m.W+=(u-1>>1)*m.Db,m.Db=-m.Db,m.F!=null&&(m.J+=(u-1)*m.lb,m.lb=-m.lb);return 0}function su(u,m,x,F){if(F==null||0>=u||0>=m)return 2;if(x!=null){if(x.Da){var M=x.cd,G=x.bd,q=-2&x.v,$=-2&x.j;if(0>q||0>$||0>=M||0>=G||q+M>u||$+G>m)return 2;u=M,m=G}if(x.da){if(!pt(u,m,M=[x.ib],G=[x.hb]))return 2;u=M[0],m=G[0]}}F.width=u,F.height=m;e:{var J=F.width,te=F.height;if(u=F.S,0>=J||0>=te||!(u>=$p&&13>u))u=2;else{if(0>=F.Rd&&F.sd==null){q=G=M=m=0;var he=($=J*Nb[u])*te;if(11>u||(G=(te+1)/2*(m=(J+1)/2),u==12&&(q=(M=J)*te)),(te=i(he+2*G+q))==null){u=1;break e}F.sd=te,11>u?((J=F.f.RGBA).eb=te,J.fb=0,J.A=$,J.size=he):((J=F.f.kb).y=te,J.O=0,J.fa=$,J.Fd=he,J.f=te,J.N=0+he,J.Ab=m,J.Cd=G,J.ea=te,J.W=0+he+G,J.Db=m,J.Ed=G,u==12&&(J.F=te,J.J=0+he+2*G),J.Tc=q,J.lb=M)}if(m=1,M=F.S,G=F.width,q=F.height,M>=$p&&13>M)if(11>M)u=F.f.RGBA,m&=($=Math.abs(u.A))*(q-1)+G<=u.size,m&=$>=G*Nb[M],m&=u.eb!=null;else{u=F.f.kb,$=(G+1)/2,he=(q+1)/2,J=Math.abs(u.fa),te=Math.abs(u.Ab);var Ee=Math.abs(u.Db),_e=Math.abs(u.lb),xe=_e*(q-1)+G;m&=J*(q-1)+G<=u.Fd,m&=te*(he-1)+$<=u.Cd,m=(m&=Ee*(he-1)+$<=u.Ed)&J>=G&te>=$&Ee>=$,m&=u.y!=null,m&=u.f!=null,m&=u.ea!=null,M==12&&(m&=_e>=G,m&=xe<=u.Tc,m&=u.F!=null)}else m=0;u=m?0:2}}return u!=0||x!=null&&x.fd&&(u=th(F)),u}var Jr=64,iu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],au=24,ou=32,nh=8,ks=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];pe("Predictor0","PredictorAdd0"),I.Predictor0=function(){return 4278190080},I.Predictor1=function(u){return u},I.Predictor2=function(u,m,x){return m[x+0]},I.Predictor3=function(u,m,x){return m[x+1]},I.Predictor4=function(u,m,x){return m[x-1]},I.Predictor5=function(u,m,x){return De(De(u,m[x+1]),m[x+0])},I.Predictor6=function(u,m,x){return De(u,m[x-1])},I.Predictor7=function(u,m,x){return De(u,m[x+0])},I.Predictor8=function(u,m,x){return De(m[x-1],m[x+0])},I.Predictor9=function(u,m,x){return De(m[x+0],m[x+1])},I.Predictor10=function(u,m,x){return De(De(u,m[x-1]),De(m[x+0],m[x+1]))},I.Predictor11=function(u,m,x){var F=m[x+0];return 0>=dt(F>>24&255,u>>24&255,(m=m[x-1])>>24&255)+dt(F>>16&255,u>>16&255,m>>16&255)+dt(F>>8&255,u>>8&255,m>>8&255)+dt(255&F,255&u,255&m)?F:u},I.Predictor12=function(u,m,x){var F=m[x+0];return(ze((u>>24&255)+(F>>24&255)-((m=m[x-1])>>24&255))<<24|ze((u>>16&255)+(F>>16&255)-(m>>16&255))<<16|ze((u>>8&255)+(F>>8&255)-(m>>8&255))<<8|ze((255&u)+(255&F)-(255&m)))>>>0},I.Predictor13=function(u,m,x){var F=m[x-1];return(Ye((u=De(u,m[x+0]))>>24&255,F>>24&255)<<24|Ye(u>>16&255,F>>16&255)<<16|Ye(u>>8&255,F>>8&255)<<8|Ye(u>>0&255,F>>0&255))>>>0};var cv=I.PredictorAdd0;I.PredictorAdd1=Je,pe("Predictor2","PredictorAdd2"),pe("Predictor3","PredictorAdd3"),pe("Predictor4","PredictorAdd4"),pe("Predictor5","PredictorAdd5"),pe("Predictor6","PredictorAdd6"),pe("Predictor7","PredictorAdd7"),pe("Predictor8","PredictorAdd8"),pe("Predictor9","PredictorAdd9"),pe("Predictor10","PredictorAdd10"),pe("Predictor11","PredictorAdd11"),pe("Predictor12","PredictorAdd12"),pe("Predictor13","PredictorAdd13");var rh=I.PredictorAdd2;Dt("ColorIndexInverseTransform","MapARGB","32b",function(u){return u>>8&255},function(u){return u}),Dt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(u){return u},function(u){return u>>8&255});var Vp,mi=I.ColorIndexInverseTransform,Au=I.MapARGB,Kp=I.VP8LColorIndexInverseTransformAlpha,Gp=I.MapAlpha,oA=I.VP8LPredictorsAdd=[];oA.length=16,(I.VP8LPredictors=[]).length=16,(I.VP8LPredictorsAdd_C=[]).length=16,(I.VP8LPredictors_C=[]).length=16;var Hl,Ds,Es,AA,no,ro,lu,so,cr,sh,_s,gi,cu,qp,ih,Vl,Kl,lA,Gl,uu,ql,cA,ah,wi,vi,Fn,Tn,ur,_r=i(511),io=i(2041),oh=i(225),du=i(767),zp=0,uv=io,Wp=oh,ei=du,yi=_r,$p=0,Xp=1,gb=2,Jp=3,Yp=4,dv=5,wb=6,hv=7,fv=8,Zp=9,pv=10,P3=[2,3,7],L3=[3,3,11],vb=[280,256,256,256,40],R3=[0,1,1,1,0],k3=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],D3=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],j3=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],O3=8,mv=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],gv=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ah=null,M3=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],H3=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],yb=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],V3=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],K3=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],G3=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],q3=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],uA=[],Ki=[],ao=[],z3=1,Bb=2,dA=[],Bi=[];Qe("UpsampleRgbLinePair",W,3),Qe("UpsampleBgrLinePair",ge,3),Qe("UpsampleRgbaLinePair",Ot,4),Qe("UpsampleBgraLinePair",en,4),Qe("UpsampleArgbLinePair",jt,4),Qe("UpsampleRgba4444LinePair",qe,2),Qe("UpsampleRgb565LinePair",Ie,2);var W3=I.UpsampleRgbLinePair,$3=I.UpsampleBgrLinePair,xb=I.UpsampleRgbaLinePair,bb=I.UpsampleBgraLinePair,Cb=I.UpsampleArgbLinePair,Eb=I.UpsampleRgba4444LinePair,X3=I.UpsampleRgb565LinePair,em=16,tm=1<<em-1,lh=-227,wv=482,J3=6,_b=0,Y3=i(256),Z3=i(256),eQ=i(256),tQ=i(256),nQ=i(wv-lh),rQ=i(wv-lh);In("YuvToRgbRow",W,3),In("YuvToBgrRow",ge,3),In("YuvToRgbaRow",Ot,4),In("YuvToBgraRow",en,4),In("YuvToArgbRow",jt,4),In("YuvToRgba4444Row",qe,2),In("YuvToRgb565Row",Ie,2);var Ib=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],nm=[0,2,8],sQ=[8,7,6,4,4,2,2,2,1,1,1,1],iQ=1;this.WebPDecodeRGBA=function(u,m,x,F,M){var G=Xp,q=new eo,$=new nt;q.ba=$,$.S=G,$.width=[$.width],$.height=[$.height];var J=$.width,te=$.height,he=new mt;if(he==null||u==null)var Ee=2;else e(he!=null),Ee=Ca(u,m,x,he.width,he.height,he.Pd,he.Qd,he.format,null);if(Ee!=0?J=0:(J!=null&&(J[0]=he.width[0]),te!=null&&(te[0]=he.height[0]),J=1),J){$.width=$.width[0],$.height=$.height[0],F!=null&&(F[0]=$.width),M!=null&&(M[0]=$.height);e:{if(F=new Wa,(M=new rA).data=u,M.w=m,M.ha=x,M.kd=1,m=[0],e(M!=null),((u=Ca(M.data,M.w,M.ha,null,null,null,m,null,M))==0||u==7)&&m[0]&&(u=4),(m=u)==0){if(e(q!=null),F.data=M.data,F.w=M.w+M.offset,F.ha=M.ha-M.offset,F.put=On,F.ac=qt,F.bc=Ar,F.ma=q,M.xa){if((u=lr())==null){q=1;break e}if(function(_e,xe){var Me=[0],Te=[0],fe=[0];t:for(;;){if(_e==null)return 0;if(xe==null)return _e.a=2,0;if(_e.l=xe,_e.a=0,z(_e.m,xe.data,xe.w,xe.ha),!ft(_e.m,Me,Te,fe)){_e.a=3;break t}if(_e.xb=Bb,xe.width=Me[0],xe.height=Te[0],!Xs(Me[0],Te[0],1,_e,null))break t;return 1}return e(_e.a!=0),0}(u,F)){if(F=(m=su(F.width,F.height,q.Oa,q.ba))==0){t:{F=u;n:for(;;){if(F==null){F=0;break t}if(e(F.s.yc!=null),e(F.s.Ya!=null),e(0<F.s.Wb),e((x=F.l)!=null),e((M=x.ma)!=null),F.xb!=0){if(F.ca=M.ba,F.tb=M.tb,e(F.ca!=null),!eh(M.Oa,x,Jp)){F.a=2;break n}if(!ha(F,x.width)||x.da)break n;if((x.da||Se(F.ca.S))&&Be(),11>F.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),F.ca.f.kb.F!=null&&Be()),F.Pb&&0<F.s.ua&&F.s.vb.X==null&&!Re(F.s.vb,F.s.Wa.Xa)){F.a=1;break n}F.xb=0}if(!Bt(F,F.V,F.Ba,F.c,F.i,x.o,lt))break n;M.Dc=F.Ma,F=1;break t}e(F.a!=0),F=0}F=!F}F&&(m=u.a)}else m=u.a}else{if((u=new Sl)==null){q=1;break e}if(u.Fa=M.na,u.P=M.P,u.qc=M.Sa,Tl(u,F)){if((m=su(F.width,F.height,q.Oa,q.ba))==0){if(u.Aa=0,x=q.Oa,e((M=u)!=null),x!=null){if(0<(J=0>(J=x.Md)?0:100<J?255:255*J/100)){for(te=he=0;4>te;++te)12>(Ee=M.pb[te]).lc&&(Ee.ia=J*sQ[0>Ee.lc?0:Ee.lc]>>3),he|=Ee.ia;he&&(alert("todo:VP8InitRandom"),M.ia=1)}M.Ga=x.Id,100<M.Ga?M.Ga=100:0>M.Ga&&(M.Ga=0)}Jc(u,F)||(m=u.a)}}else m=u.a}m==0&&q.Oa!=null&&q.Oa.fd&&(m=th(q.ba))}q=m}G=q!=0?null:11>G?$.f.RGBA.eb:$.f.kb.y}else G=null;return G};var Nb=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(I,Q){for(var D="",S=0;S<4;S++)D+=String.fromCharCode(I[Q++]);return D}function d(I,Q){return(I[Q+0]<<0|I[Q+1]<<8|I[Q+2]<<16)>>>0}function f(I,Q){return(I[Q+0]<<0|I[Q+1]<<8|I[Q+2]<<16|I[Q+3]<<24)>>>0}new A;var p=[0],g=[0],B=[],b=new A,C=t,w=function(I,Q){var D={},S=0,_=!1,T=0,K=0;if(D.frames=[],!function(X,Z,H,Y){for(var ue=0;ue<Y;ue++)if(X[Z+ue]!=H.charCodeAt(ue))return!0;return!1}(I,Q,"RIFF",4)){for(f(I,Q+=4),Q+=8;Q<I.length;){var oe=c(I,Q),le=f(I,Q+=4);Q+=4;var se=le+(1&le);switch(oe){case"VP8 ":case"VP8L":D.frames[S]===void 0&&(D.frames[S]={}),(ee=D.frames[S]).src_off=_?K:Q-8,ee.src_size=T+le+8,S++,_&&(_=!1,T=0,K=0);break;case"VP8X":(ee=D.header={}).feature_flags=I[Q];var z=Q+4;ee.canvas_width=1+d(I,z),z+=3,ee.canvas_height=1+d(I,z),z+=3;break;case"ALPH":_=!0,T=se+8,K=Q-8;break;case"ANIM":(ee=D.header).bgcolor=f(I,Q),z=Q+4,ee.loop_count=(we=I)[(k=z)+0]<<0|we[k+1]<<8,z+=2;break;case"ANMF":var Ae,ee;(ee=D.frames[S]={}).offset_x=2*d(I,Q),Q+=3,ee.offset_y=2*d(I,Q),Q+=3,ee.width=1+d(I,Q),Q+=3,ee.height=1+d(I,Q),Q+=3,ee.duration=d(I,Q),Q+=3,Ae=I[Q++],ee.dispose=1&Ae,ee.blend=Ae>>1&1}oe!="ANMF"&&(Q+=se)}var we,k;return D}}(C,0);w.response=C,w.rgbaoutput=!0,w.dataurl=!1;var y=w.header?w.header:null,N=w.frames?w.frames:null;if(y){y.loop_counter=y.loop_count,p=[y.canvas_height],g=[y.canvas_width];for(var R=0;R<N.length&&N[R].blend!=0;R++);}var V=N[0],j=b.WebPDecodeRGBA(C,V.src_off,V.src_size,g,p);V.rgba=j,V.imgwidth=g[0],V.imgheight=p[0];for(var U=0;U<g[0]*p[0]*4;U++)B[U]=j[U];return this.width=g,this.height=p,this.data=B,this}(function(t){var e=function(){return typeof W2=="function"},n=function(p,g,B,b){var C=4,w=a;switch(b){case t.image_compression.FAST:C=1,w=i;break;case t.image_compression.MEDIUM:C=6,w=o;break;case t.image_compression.SLOW:C=9,w=A}p=r(p,g,B,w);var y=W2(p,{level:C});return t.__addimage__.arrayBufferToBinaryString(y)},r=function(p,g,B,b){for(var C,w,y,N=p.length/g,R=new Uint8Array(p.length+N),V=d(),j=0;j<N;j+=1){if(y=j*g,C=p.subarray(y,y+g),b)R.set(b(C,B,w),y+j);else{for(var U,I=V.length,Q=[];U<I;U+=1)Q[U]=V[U](C,B,w);var D=f(Q.concat());R.set(Q[D],y+j)}w=C}return R},s=function(p){var g=Array.apply([],p);return g.unshift(0),g},i=function(p,g){var B,b=[],C=p.length;b[0]=1;for(var w=0;w<C;w+=1)B=p[w-g]||0,b[w+1]=p[w]-B+256&255;return b},a=function(p,g,B){var b,C=[],w=p.length;C[0]=2;for(var y=0;y<w;y+=1)b=B&&B[y]||0,C[y+1]=p[y]-b+256&255;return C},o=function(p,g,B){var b,C,w=[],y=p.length;w[0]=3;for(var N=0;N<y;N+=1)b=p[N-g]||0,C=B&&B[N]||0,w[N+1]=p[N]+256-(b+C>>>1)&255;return w},A=function(p,g,B){var b,C,w,y,N=[],R=p.length;N[0]=4;for(var V=0;V<R;V+=1)b=p[V-g]||0,C=B&&B[V]||0,w=B&&B[V-g]||0,y=c(b,C,w),N[V+1]=p[V]-y+256&255;return N},c=function(p,g,B){if(p===g&&g===B)return p;var b=Math.abs(g-B),C=Math.abs(p-B),w=Math.abs(p+g-B-B);return b<=C&&b<=w?p:C<=w?g:B},d=function(){return[s,i,a,o,A]},f=function(p){var g=p.map(function(B){return B.reduce(function(b,C){return b+Math.abs(C)},0)});return g.indexOf(Math.min.apply(null,g))};t.processPNG=function(p,g,B,b){var C,w,y,N,R,V,j,U,I,Q,D,S,_,T,K,oe=this.decode.FLATE_DECODE,le="";if(this.__addimage__.isArrayBuffer(p)&&(p=new Uint8Array(p)),this.__addimage__.isArrayBufferView(p)){if(p=(y=new Dz(p)).imgData,w=y.bits,C=y.colorSpace,R=y.colors,[4,6].indexOf(y.colorType)!==-1){if(y.bits===8){I=(U=y.pixelBitlength==32?new Uint32Array(y.decodePixels().buffer):y.pixelBitlength==16?new Uint16Array(y.decodePixels().buffer):new Uint8Array(y.decodePixels().buffer)).length,D=new Uint8Array(I*y.colors),Q=new Uint8Array(I);var se,z=y.pixelBitlength-y.bits;for(T=0,K=0;T<I;T++){for(_=U[T],se=0;se<z;)D[K++]=_>>>se&255,se+=y.bits;Q[T]=_>>>se&255}}if(y.bits===16){I=(U=new Uint32Array(y.decodePixels().buffer)).length,D=new Uint8Array(I*(32/y.pixelBitlength)*y.colors),Q=new Uint8Array(I*(32/y.pixelBitlength)),S=y.colors>1,T=0,K=0;for(var Ae=0;T<I;)_=U[T++],D[K++]=_>>>0&255,S&&(D[K++]=_>>>16&255,_=U[T++],D[K++]=_>>>0&255),Q[Ae++]=_>>>16&255;w=8}b!==t.image_compression.NONE&&e()?(p=n(D,y.width*y.colors,y.colors,b),j=n(Q,y.width,1,b)):(p=D,j=Q,oe=void 0)}if(y.colorType===3&&(C=this.color_spaces.INDEXED,V=y.palette,y.transparency.indexed)){var ee=y.transparency.indexed,we=0;for(T=0,I=ee.length;T<I;++T)we+=ee[T];if((we/=255)===I-1&&ee.indexOf(0)!==-1)N=[ee.indexOf(0)];else if(we!==I){for(U=y.decodePixels(),Q=new Uint8Array(U.length),T=0,I=U.length;T<I;T++)Q[T]=ee[U[T]];j=n(Q,y.width,1)}}var k=function(X){var Z;switch(X){case t.image_compression.FAST:Z=11;break;case t.image_compression.MEDIUM:Z=13;break;case t.image_compression.SLOW:Z=14;break;default:Z=12}return Z}(b);return oe===this.decode.FLATE_DECODE&&(le="/Predictor "+k+" "),le+="/Colors "+R+" /BitsPerComponent "+w+" /Columns "+y.width,(this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),(j&&this.__addimage__.isArrayBuffer(j)||this.__addimage__.isArrayBufferView(j))&&(j=this.__addimage__.arrayBufferToBinaryString(j)),{alias:B,data:p,index:g,filter:oe,decodeParameters:le,transparency:N,palette:V,sMask:j,predictor:k,width:y.width,height:y.height,bitsPerComponent:w,colorSpace:C}}}})(Ft.API),function(t){t.processGIF89A=function(e,n,r,s){var i=new jz(e),a=i.width,o=i.height,A=[];i.decodeAndBlitFrameRGBA(0,A);var c={data:A,width:a,height:o},d=new Vy(100).encode(c,100);return t.processJPEG.call(this,d,n,r,s)},t.processGIF87A=t.processGIF89A}(Ft.API),Wi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:r,blue:n,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Wi.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){Sn.log("bit decode error:"+n)}},Wi.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var i=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*s*4,o=0;o<8&&8*s+o<this.width;o++){var A=this.palette[i>>7-o&1];this.data[a+4*o]=A.blue,this.data[a+4*o+1]=A.green,this.data[a+4*o+2]=A.red,this.data[a+4*o+3]=255}n!==0&&(this.pos+=4-n)}},Wi.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<t;s++){var i=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*s*4,o=i>>4,A=15&i,c=this.palette[o];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*s+1>=this.width)break;c=this.palette[A],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},Wi.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+4*r;if(s<this.palette.length){var a=this.palette[s];this.data[i]=a.red,this.data[i+1]=a.green,this.data[i+2]=a.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}t!==0&&(this.pos+=4-t)}},Wi.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(i&e)/e*255|0,o=(i>>5&e)/e*255|0,A=(i>>10&e)/e*255|0,c=i>>15?255:0,d=r*this.width*4+4*s;this.data[d]=A,this.data[d+1]=o,this.data[d+2]=a,this.data[d+3]=c}this.pos+=t}},Wi.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,A=(a>>5&n)/n*255|0,c=(a>>11)/e*255|0,d=s*this.width*4+4*i;this.data[d]=c,this.data[d+1]=A,this.data[d+2]=o,this.data[d+3]=255}this.pos+=t}},Wi.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=i,this.data[a+1]=s,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},Wi.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=r,this.data[o+3]=a}},Wi.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,s){var i=new Wi(e,!1),a=i.width,o=i.height,A={data:i.getData(),width:a,height:o},c=new Vy(100).encode(A,100);return t.processJPEG.call(this,c,n,r,s)}}(Ft.API),fI.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,s){var i=new fI(e),a=i.width,o=i.height,A={data:i.getData(),width:a,height:o},c=new Vy(100).encode(A,100);return t.processJPEG.call(this,c,n,r,s)}}(Ft.API),Ft.API.processRGBA=function(t,e,n){for(var r=t.data,s=r.length,i=new Uint8Array(s/4*3),a=new Uint8Array(s/4),o=0,A=0,c=0;c<s;c+=4){var d=r[c],f=r[c+1],p=r[c+2],g=r[c+3];i[o++]=d,i[o++]=f,i[o++]=p,a[A++]=g}var B=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:B,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Ft.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Fu=Ft.API,cg=Fu.getCharWidthsArray=function(t,e){var n,r,s=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:s.metadata.Unicode.widths,A=o.fof?o.fof:1,c=e.kerning?e.kerning:s.metadata.Unicode.kerning,d=c.fof?c.fof:1,f=e.doKerning!==!1,p=0,g=t.length,B=0,b=o[0]||A,C=[];for(n=0;n<g;n++)r=t.charCodeAt(n),typeof s.metadata.widthOfString=="function"?C.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(r))+a*(1e3/i)||0)/1e3):(p=f&&Bn(c[r])==="object"&&!isNaN(parseInt(c[r][B],10))?c[r][B]/d:0,C.push((o[r]||b)/A+p)),B=r;return C},cI=Fu.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return Fu.processArabic&&(t=Fu.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,s)/n:cg.apply(this,arguments).reduce(function(i,a){return i+a},0)},uI=function(t,e,n,r){for(var s=[],i=0,a=t.length,o=0;i!==a&&o+e[i]<n;)o+=e[i],i++;s.push(t.slice(0,i));var A=i;for(o=0;i!==a;)o+e[i]>r&&(s.push(t.slice(A,i)),o=0,A=i),o+=e[i],i++;return A!==i&&s.push(t.slice(A,i)),s},dI=function(t,e,n){n||(n={});var r,s,i,a,o,A,c,d=[],f=[d],p=n.textIndent||0,g=0,B=0,b=t.split(" "),C=cg.apply(this,[" ",n])[0];if(A=n.lineIndent===-1?b[0].length+2:n.lineIndent||0){var w=Array(A).join(" "),y=[];b.map(function(R){(R=R.split(/\s*\n/)).length>1?y=y.concat(R.map(function(V,j){return(j&&V.length?`
`:"")+V})):y.push(R[0])}),b=y,A=cI.apply(this,[w,n])}for(i=0,a=b.length;i<a;i++){var N=0;if(r=b[i],A&&r[0]==`
`&&(r=r.substr(1),N=1),p+g+(B=(s=cg.apply(this,[r,n])).reduce(function(R,V){return R+V},0))>e||N){if(B>e){for(o=uI.apply(this,[r,s,e-(p+g),e]),d.push(o.shift()),d=[o.pop()];o.length;)f.push([o.shift()]);B=s.slice(r.length-(d[0]?d[0].length:0)).reduce(function(R,V){return R+V},0)}else d=[r];f.push(d),p=B+A,g=C}else d.push(r),p+=g+B,g=C}return c=A?function(R,V){return(V?w:"")+R.join(" ")}:function(R){return R.join(" ")},f.map(c)},Fu.splitTextToSize=function(t,e,n){var r,s=(n=n||{}).fontSize||this.internal.getFontSize(),i=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/s;i.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=n.lineIndent;var o,A,c=[];for(o=0,A=r.length;o<A;o++)c=c.concat(dI.apply(this,[r[o],a,i]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},s=0;s<e.length;s++)n[e[s]]="0123456789abcdef"[s],r["0123456789abcdef"[s]]=e[s];var i=function(f){return"0x"+parseInt(f,10).toString(16)},a=t.__fontmetrics__.compress=function(f){var p,g,B,b,C=["{"];for(var w in f){if(p=f[w],isNaN(parseInt(w,10))?g="'"+w+"'":(w=parseInt(w,10),g=(g=i(w).slice(2)).slice(0,-1)+r[g.slice(-1)]),typeof p=="number")p<0?(B=i(p).slice(3),b="-"):(B=i(p).slice(2),b=""),B=b+B.slice(0,-1)+r[B.slice(-1)];else{if(Bn(p)!=="object")throw new Error("Don't know what to do with value type "+Bn(p)+".");B=a(p)}C.push(g+B)}return C.push("}"),C.join("")},o=t.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,g,B,b,C={},w=1,y=C,N=[],R="",V="",j=f.length-1,U=1;U<j;U+=1)(b=f[U])=="'"?p?(B=p.join(""),p=void 0):p=[]:p?p.push(b):b=="{"?(N.push([y,B]),y={},B=void 0):b=="}"?((g=N.pop())[0][g[1]]=y,B=void 0,y=g[0]):b=="-"?w=-1:B===void 0?n.hasOwnProperty(b)?(R+=n[b],B=parseInt(R,16)*w,w=1,R=""):R+=b:n.hasOwnProperty(b)?(V+=n[b],y[B]=parseInt(V,16)*w,w=1,B=void 0,V=""):V+=b;return C},A={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:A,"Courier-Bold":A,"Courier-BoldOblique":A,"Courier-Oblique":A,Helvetica:A,"Helvetica-Bold":A,"Helvetica-BoldOblique":A,"Helvetica-Oblique":A,"Times-Roman":A,"Times-Bold":A,"Times-BoldItalic":A,"Times-Italic":A}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(f){var p=f.font,g=d.Unicode[p.postScriptName];g&&(p.metadata.Unicode={},p.metadata.Unicode.widths=g.widths,p.metadata.Unicode.kerning=g.kerning);var B=c.Unicode[p.postScriptName];B&&(p.metadata.Unicode.encoding=B,p.encoding=B.codePages[0])}])}(Ft.API),function(t){var e=function(n){for(var r=n.length,s=new Uint8Array(r),i=0;i<r;i++)s[i]=n.charCodeAt(i);return s};t.API.events.push(["addFont",function(n){var r=void 0,s=n.font,i=n.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(r=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Ef(o)),a.metadata=t.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(s,r)}}])}(Ft),function(t){function e(){return(Pt.canvg?Promise.resolve(Pt.canvg):To(()=>import("./index.es-C3qnYtWF.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}Ft.API.addSvgAsImage=function(n,r,s,i,a,o,A,c){if(isNaN(r)||isNaN(s))throw Sn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(a))throw Sn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=i,d.height=a;var f=d.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,d.width,d.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return e().then(function(B){return B.fromString(f,n,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(B){return B.render(p)}).then(function(){g.addImage(d.toDataURL("image/jpeg",1),r,s,i,a,A,c)})}}(),Ft.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var s=0;s<this.internal.pages[r].length;s++)this.internal.pages[r][s]=this.internal.pages[r][s].replace(e,n);return this},Ft.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,s,i,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),A=[],c=0,d=0,f=0;function p(B,b){var C,w=!1;for(C=0;C<B.length;C+=1)B[C]===b&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var g=o.length;for(f=0;f<g;f+=1)n[o[f]].value=n[o[f]].defaultValue,n[o[f]].explicitSet=!1}if(Bn(t)==="object"){for(s in t)if(i=t[s],p(o,s)&&i!==void 0){if(n[s].type==="boolean"&&typeof i=="boolean")n[s].value=i;else if(n[s].type==="name"&&p(n[s].valueSet,i))n[s].value=i;else if(n[s].type==="integer"&&Number.isInteger(i))n[s].value=i;else if(n[s].type==="array"){for(c=0;c<i.length;c+=1)if(r=!0,i[c].length===1&&typeof i[c][0]=="number")A.push(String(i[c]-1));else if(i[c].length>1){for(d=0;d<i[c].length;d+=1)typeof i[c][d]!="number"&&(r=!1);r===!0&&A.push([i[c][0]-1,i[c][1]-1].join(" "))}n[s].value="["+A.join(" ")+"]"}else n[s].value=n[s].defaultValue;n[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var B,b=[];for(B in n)n[B].explicitSet===!0&&(n[B].type==="name"?b.push("/"+B+" /"+n[B].value):b.push("/"+B+" "+n[B].value));b.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+b.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),A=unescape(encodeURIComponent("</x:xmpmeta>")),c=i.length+a.length+o.length+s.length+A.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(s+i+a+o+A),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(Ft.API),function(t){var e=t.API,n=e.pdfEscape16=function(i,a){for(var o,A=a.metadata.Unicode.widths,c=["","0","00","000","0000"],d=[""],f=0,p=i.length;f<p;++f){if(o=a.metadata.characterToGlyph(i.charCodeAt(f)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=i.charCodeAt(f),A.indexOf(o)==-1&&(A.push(o),A.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(c[4-o.length],o)}return d.join("")},r=function(i){var a,o,A,c,d,f,p;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,A=[],f=0,p=(o=Object.keys(i).sort(function(g,B){return g-B})).length;f<p;f++)a=o[f],A.length>=100&&(d+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar`,A=[]),i[a]!==void 0&&i[a]!==null&&typeof i[a].toString=="function"&&(c=("0000"+i[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),A.push("<"+a+"><"+c+">"));return A.length&&(d+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(a){var o=a.font,A=a.out,c=a.newObject,d=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,p=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),g="",B=0;B<p.length;B++)g+=String.fromCharCode(p[B]);var b=c();d({data:g,addLength1:!0,objectId:b}),A("endobj");var C=c();d({data:r(o.metadata.toUnicode),addLength1:!0,objectId:C}),A("endobj");var w=c();A("<<"),A("/Type /FontDescriptor"),A("/FontName /"+Ku(o.fontName)),A("/FontFile2 "+b+" 0 R"),A("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),A("/Flags "+o.metadata.flags),A("/StemV "+o.metadata.stemV),A("/ItalicAngle "+o.metadata.italicAngle),A("/Ascent "+o.metadata.ascender),A("/Descent "+o.metadata.decender),A("/CapHeight "+o.metadata.capHeight),A(">>"),A("endobj");var y=c();A("<<"),A("/Type /Font"),A("/BaseFont /"+Ku(o.fontName)),A("/FontDescriptor "+w+" 0 R"),A("/W "+t.API.PDFObject.convert(f)),A("/CIDToGIDMap /Identity"),A("/DW 1000"),A("/Subtype /CIDFontType2"),A("/CIDSystemInfo"),A("<<"),A("/Supplement 0"),A("/Registry (Adobe)"),A("/Ordering ("+o.encoding+")"),A(">>"),A(">>"),A("endobj"),o.objectNumber=c(),A("<<"),A("/Type /Font"),A("/Subtype /Type0"),A("/ToUnicode "+C+" 0 R"),A("/BaseFont /"+Ku(o.fontName)),A("/Encoding /"+o.encoding),A("/DescendantFonts ["+y+" 0 R]"),A(">>"),A("endobj"),o.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(a){var o=a.font,A=a.out,c=a.newObject,d=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,p="",g=0;g<f.length;g++)p+=String.fromCharCode(f[g]);var B=c();d({data:p,addLength1:!0,objectId:B}),A("endobj");var b=c();d({data:r(o.metadata.toUnicode),addLength1:!0,objectId:b}),A("endobj");var C=c();A("<<"),A("/Descent "+o.metadata.decender),A("/CapHeight "+o.metadata.capHeight),A("/StemV "+o.metadata.stemV),A("/Type /FontDescriptor"),A("/FontFile2 "+B+" 0 R"),A("/Flags 96"),A("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),A("/FontName /"+Ku(o.fontName)),A("/ItalicAngle "+o.metadata.italicAngle),A("/Ascent "+o.metadata.ascender),A(">>"),A("endobj"),o.objectNumber=c();for(var w=0;w<o.metadata.hmtx.widths.length;w++)o.metadata.hmtx.widths[w]=parseInt(o.metadata.hmtx.widths[w]*(1e3/o.metadata.head.unitsPerEm));A("<</Subtype/TrueType/Type/Font/ToUnicode "+b+" 0 R/BaseFont/"+Ku(o.fontName)+"/FontDescriptor "+C+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),A("endobj"),o.isAlreadyPutted=!0}})(i)}]);var s=function(i){var a,o=i.text||"",A=i.x,c=i.y,d=i.options||{},f=i.mutex||{},p=f.pdfEscape,g=f.activeFontKey,B=f.fonts,b=g,C="",w=0,y="",N=B[b].encoding;if(B[b].encoding!=="Identity-H")return{text:o,x:A,y:c,options:d,mutex:f};for(y=o,b=g,Array.isArray(o)&&(y=o[0]),w=0;w<y.length;w+=1)B[b].metadata.hasOwnProperty("cmap")&&(a=B[b].metadata.cmap.unicode.codeMap[y[w].charCodeAt(0)]),a||y[w].charCodeAt(0)<256&&B[b].metadata.hasOwnProperty("Unicode")?C+=y[w]:C+="";var R="";return parseInt(b.slice(1))<14||N==="WinAnsiEncoding"?R=p(C,b).split("").map(function(V){return V.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(R=n(C,B[b])),f.isHex=!0,{text:R,x:A,y:c,options:d,mutex:f}};e.events.push(["postProcessText",function(i){var a=i.text||"",o=[],A={text:a,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(a)){var c=0;for(c=0;c<a.length;c+=1)Array.isArray(a[c])&&a[c].length===3?o.push([s(Object.assign({},A,{text:a[c][0]})).text,a[c][1],a[c][2]]):o.push(s(Object.assign({},A,{text:a[c]})).text);i.text=o}else i.text=s(Object.assign({},A,{text:a})).text}])}(Ft),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Ft.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var s,i,a,o,A,c,d,f=e,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],B={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},b={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},C=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),y=!1,N=0;this.__bidiEngine__={};var R=function(S){var _=S.charCodeAt(),T=_>>8,K=b[T];return K!==void 0?f[256*K+(255&_)]:T===252||T===253?"AL":w.test(T)?"L":T===8?"R":"N"},V=function(S){for(var _,T=0;T<S.length;T++){if((_=R(S.charAt(T)))==="L")return!1;if(_==="R")return!0}return!1},j=function(S,_,T,K){var oe,le,se,z,Ae=_[K];switch(Ae){case"L":case"R":y=!1;break;case"N":case"AN":break;case"EN":y&&(Ae="AN");break;case"AL":y=!0,Ae="R";break;case"WS":Ae="N";break;case"CS":K<1||K+1>=_.length||(oe=T[K-1])!=="EN"&&oe!=="AN"||(le=_[K+1])!=="EN"&&le!=="AN"?Ae="N":y&&(le="AN"),Ae=le===oe?le:"N";break;case"ES":Ae=(oe=K>0?T[K-1]:"B")==="EN"&&K+1<_.length&&_[K+1]==="EN"?"EN":"N";break;case"ET":if(K>0&&T[K-1]==="EN"){Ae="EN";break}if(y){Ae="N";break}for(se=K+1,z=_.length;se<z&&_[se]==="ET";)se++;Ae=se<z&&_[se]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(z=_.length,se=K+1;se<z&&_[se]==="NSM";)se++;if(se<z){var ee=S[K],we=ee>=1425&&ee<=2303||ee===64286;if(oe=_[se],we&&(oe==="R"||oe==="AL")){Ae="R";break}}}Ae=K<1||(oe=_[K-1])==="B"?"N":T[K-1];break;case"B":y=!1,s=!0,Ae=N;break;case"S":i=!0,Ae="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":y=!1;break;case"BN":Ae="N"}return Ae},U=function(S,_,T){var K=S.split("");return T&&I(K,T,{hiLevel:N}),K.reverse(),_&&_.reverse(),K.join("")},I=function(S,_,T){var K,oe,le,se,z,Ae=-1,ee=S.length,we=0,k=[],X=N?g:p,Z=[];for(y=!1,s=!1,i=!1,oe=0;oe<ee;oe++)Z[oe]=R(S[oe]);for(le=0;le<ee;le++){if(z=we,k[le]=j(S,Z,k,le),K=240&(we=X[z][B[k[le]]]),we&=15,_[le]=se=X[we][5],K>0)if(K===16){for(oe=Ae;oe<le;oe++)_[oe]=1;Ae=-1}else Ae=-1;if(X[we][6])Ae===-1&&(Ae=le);else if(Ae>-1){for(oe=Ae;oe<le;oe++)_[oe]=se;Ae=-1}Z[le]==="B"&&(_[le]=0),T.hiLevel|=se}i&&function(H,Y,ue){for(var ie=0;ie<ue;ie++)if(H[ie]==="S"){Y[ie]=N;for(var ce=ie-1;ce>=0&&H[ce]==="WS";ce--)Y[ce]=N}}(Z,_,ee)},Q=function(S,_,T,K,oe){if(!(oe.hiLevel<S)){if(S===1&&N===1&&!s)return _.reverse(),void(T&&T.reverse());for(var le,se,z,Ae,ee=_.length,we=0;we<ee;){if(K[we]>=S){for(z=we+1;z<ee&&K[z]>=S;)z++;for(Ae=we,se=z-1;Ae<se;Ae++,se--)le=_[Ae],_[Ae]=_[se],_[se]=le,T&&(le=T[Ae],T[Ae]=T[se],T[se]=le);we=z}we++}}},D=function(S,_,T){var K=S.split(""),oe={hiLevel:N};return T||(T=[]),I(K,T,oe),function(le,se,z){if(z.hiLevel!==0&&d)for(var Ae,ee=0;ee<le.length;ee++)se[ee]===1&&(Ae=C.indexOf(le[ee]))>=0&&(le[ee]=C[Ae+1])}(K,T,oe),Q(2,K,_,T,oe),Q(1,K,_,T,oe),K.join("")};return this.__bidiEngine__.doBidiReorder=function(S,_,T){if(function(oe,le){if(le)for(var se=0;se<oe.length;se++)le[se]=se;o===void 0&&(o=V(oe)),c===void 0&&(c=V(oe))}(S,_),a||!A||c)if(a&&A&&o^c)N=o?1:0,S=U(S,_,T);else if(!a&&A&&c)N=o?1:0,S=D(S,_,T),S=U(S,_);else if(!a||o||A||c){if(a&&!A&&o^c)S=U(S,_),o?(N=0,S=D(S,_,T)):(N=1,S=D(S,_,T),S=U(S,_));else if(a&&o&&!A&&c)N=1,S=D(S,_,T),S=U(S,_);else if(!a&&!A&&o^c){var K=d;o?(N=1,S=D(S,_,T),N=0,d=!1,S=D(S,_,T),d=K):(N=0,S=D(S,_,T),S=U(S,_),N=1,d=!1,S=D(S,_,T),d=K,S=U(S,_))}}else N=0,S=D(S,_,T);else N=o?1:0,S=D(S,_,T);return S},this.__bidiEngine__.setOptions=function(S){S&&(a=S.isInputVisual,A=S.isOutputVisual,o=S.isInputRtl,c=S.isOutputRtl,d=S.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var s=r.text;r.x,r.y;var i=r.options||{};r.mutex,i.lang;var a=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,n.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var o=0;for(a=[],o=0;o<s.length;o+=1)Object.prototype.toString.call(s[o])==="[object Array]"?a.push([n.doBidiReorder(s[o][0]),s[o][1],s[o][2]]):a.push([n.doBidiReorder(s[o])]);r.text=a}else r.text=n.doBidiReorder(s);n.setOptions({isInputVisual:!0})}])}(Ft),Ft.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new wl(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new eW(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new Oz(this.contents),this.head=new Hz(this),this.name=new zz(this),this.cmap=new _3(this),this.toUnicode={},this.hhea=new Vz(this),this.maxp=new Wz(this),this.hmtx=new $z(this),this.post=new Gz(this),this.os2=new Kz(this),this.loca=new Zz(this),this.glyf=new Xz(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,A,c;for(c=[],a=0,o=(A=this.bbox).length;a<o;a++)e=A[a],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(s=this.post.italic_angle),32768&(n=s>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var s,i,a,o;for(a=0,i=0,o=(e=""+e).length;0<=o?i<o:i>o;i=0<=o?++i:--i)s=e.charCodeAt(i),a+=this.widthOfGlyph(this.characterToGlyph(s))+r*(1e3/n)||0;return a*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var da,wl=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,s;for(s=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)s.push(this.writeByte(e.charCodeAt(n)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,s,i,a,o,A;return e=this.readByte(),n=this.readByte(),r=this.readByte(),s=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),A=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^s)+16777216*(255^i)+65536*(255^a)+256*(255^o)+(255^A)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*s+16777216*i+65536*a+256*o+A},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,s,i;for(i=[],r=0,s=e.length;r<s;r++)n=e[r],i.push(this.writeByte(n));return i},t}(),Oz=function(){var t;function e(n){var r,s,i;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,s,i,a,o,A,c,d,f,p,g,B,b;for(b in g=Object.keys(n).length,A=Math.log(2),f=16*Math.floor(Math.log(g)/A),a=Math.floor(f/A),d=16*g-f,(s=new wl).writeInt(this.scalarType),s.writeShort(g),s.writeShort(f),s.writeShort(a),s.writeShort(d),i=16*g,c=s.pos+i,o=null,B=[],n)for(p=n[b],s.writeString(b),s.writeInt(t(p)),s.writeInt(c),s.writeInt(p.length),B=B.concat(p),b==="head"&&(o=c),c+=p.length;c%4;)B.push(0),c++;return s.write(B),r=2981146554-t(s.data),s.pos=o+8,s.writeUInt32(r),s.data},t=function(n){var r,s,i,a;for(n=I3.call(n);n.length%4;)n.push(0);for(i=new wl(n),s=0,r=0,a=n.length;r<a;r=r+=4)s+=i.readUInt32();return 4294967295&s},e}(),Mz={}.hasOwnProperty,Ka=function(t,e){for(var n in e)Mz.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};da=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var Hz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ka(e,da),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new wl).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),pI=function(){function t(e,n){var r,s,i,a,o,A,c,d,f,p,g,B,b,C,w,y,N;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(A=0;A<256;++A)this.codeMap[A]=e.readByte();break;case 4:for(g=e.readUInt16(),p=g/2,e.pos+=6,i=function(){var R,V;for(V=[],A=R=0;0<=p?R<p:R>p;A=0<=p?++R:--R)V.push(e.readUInt16());return V}(),e.pos+=2,b=function(){var R,V;for(V=[],A=R=0;0<=p?R<p:R>p;A=0<=p?++R:--R)V.push(e.readUInt16());return V}(),c=function(){var R,V;for(V=[],A=R=0;0<=p?R<p:R>p;A=0<=p?++R:--R)V.push(e.readUInt16());return V}(),d=function(){var R,V;for(V=[],A=R=0;0<=p?R<p:R>p;A=0<=p?++R:--R)V.push(e.readUInt16());return V}(),s=(this.length-e.pos+this.offset)/2,o=function(){var R,V;for(V=[],A=R=0;0<=s?R<s:R>s;A=0<=s?++R:--R)V.push(e.readUInt16());return V}(),A=w=0,N=i.length;w<N;A=++w)for(C=i[A],r=y=B=b[A];B<=C?y<=C:y>=C;r=B<=C?++y:--y)d[A]===0?a=r+c[A]:(a=o[d[A]/2+(r-B)-(p-A)]||0)!==0&&(a+=c[A]),this.codeMap[r]=65535&a}e.pos=f}return t.encode=function(e,n){var r,s,i,a,o,A,c,d,f,p,g,B,b,C,w,y,N,R,V,j,U,I,Q,D,S,_,T,K,oe,le,se,z,Ae,ee,we,k,X,Z,H,Y,ue,ie,ce,be,Fe,ne;switch(K=new wl,a=Object.keys(e).sort(function(ve,Re){return ve-Re}),n){case"macroman":for(b=0,C=function(){var ve=[];for(B=0;B<256;++B)ve.push(0);return ve}(),y={0:0},i={},oe=0,Ae=a.length;oe<Ae;oe++)y[ce=e[s=a[oe]]]==null&&(y[ce]=++b),i[s]={old:e[s],new:y[e[s]]},C[s]=y[e[s]];return K.writeUInt16(1),K.writeUInt16(0),K.writeUInt32(12),K.writeUInt16(0),K.writeUInt16(262),K.writeUInt16(0),K.write(C),{charMap:i,subtable:K.data,maxGlyphID:b+1};case"unicode":for(_=[],f=[],N=0,y={},r={},w=c=null,le=0,ee=a.length;le<ee;le++)y[V=e[s=a[le]]]==null&&(y[V]=++N),r[s]={old:V,new:y[V]},o=y[V]-s,w!=null&&o===c||(w&&f.push(w),_.push(s),c=o),w=s;for(w&&f.push(w),f.push(65535),_.push(65535),D=2*(Q=_.length),I=2*Math.pow(Math.log(Q)/Math.LN2,2),p=Math.log(I/2)/Math.LN2,U=2*Q-I,A=[],j=[],g=[],B=se=0,we=_.length;se<we;B=++se){if(S=_[B],d=f[B],S===65535){A.push(0),j.push(0);break}if(S-(T=r[S].new)>=32768)for(A.push(0),j.push(2*(g.length+Q-B)),s=z=S;S<=d?z<=d:z>=d;s=S<=d?++z:--z)g.push(r[s].new);else A.push(T-S),j.push(0)}for(K.writeUInt16(3),K.writeUInt16(1),K.writeUInt32(12),K.writeUInt16(4),K.writeUInt16(16+8*Q+2*g.length),K.writeUInt16(0),K.writeUInt16(D),K.writeUInt16(I),K.writeUInt16(p),K.writeUInt16(U),ue=0,k=f.length;ue<k;ue++)s=f[ue],K.writeUInt16(s);for(K.writeUInt16(0),ie=0,X=_.length;ie<X;ie++)s=_[ie],K.writeUInt16(s);for(be=0,Z=A.length;be<Z;be++)o=A[be],K.writeUInt16(o);for(Fe=0,H=j.length;Fe<H;Fe++)R=j[Fe],K.writeUInt16(R);for(ne=0,Y=g.length;ne<Y;ne++)b=g[ne],K.writeUInt16(b);return{charMap:r,subtable:K.data,maxGlyphID:N+1}}},t}(),_3=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ka(e,da),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,s,i;for(n.pos=this.offset,this.version=n.readUInt16(),i=n.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)r=new pI(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var s,i;return r==null&&(r="macroman"),s=pI.encode(n,r),(i=new wl).writeUInt16(0),i.writeUInt16(1),s.table=i.data.concat(s.subtable),s},e}(),Vz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ka(e,da),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),Kz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ka(e,da),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,s;for(s=[],r=0;r<10;++r)s.push(n.readByte());return s}(),this.charRange=function(){var r,s;for(s=[],r=0;r<4;++r)s.push(n.readInt());return s}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,s;for(s=[],r=0;r<2;r=++r)s.push(n.readInt());return s}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),Gz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ka(e,da),e.prototype.tag="post",e.prototype.parse=function(n){var r,s,i;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var a;for(s=n.readUInt16(),this.glyphNameIndex=[],a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],i=[];n.pos<this.offset+this.length;)r=n.readByte(),i.push(this.names.push(n.readString(r)));return i;case 151552:return s=n.readUInt16(),this.offsets=n.read(s);case 196608:break;case 262144:return this.map=(function(){var o,A,c;for(c=[],a=o=0,A=this.file.maxp.numGlyphs;0<=A?o<A:o>A;a=0<=A?++o:--o)c.push(n.readUInt32());return c}).call(this)}},e}(),qz=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},zz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ka(e,da),e.prototype.tag="name",e.prototype.parse=function(n){var r,s,i,a,o,A,c,d,f,p,g;for(n.pos=this.offset,n.readShort(),r=n.readShort(),A=n.readShort(),s=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)s.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+A+n.readShort()});for(c={},a=f=0,p=s.length;f<p;a=++f)i=s[a],n.pos=i.offset,d=n.readString(i.length),o=new qz(d,i),c[g=i.nameID]==null&&(c[g]=[]),c[i.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),Wz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ka(e,da),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),$z=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ka(e,da),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,s,i,a,o,A,c;for(n.pos=this.offset,this.metrics=[],r=0,A=this.file.hhea.numberOfMetrics;0<=A?r<A:r>A;r=0<=A?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,f;for(f=[],r=d=0;0<=i?d<i:d>i;r=0<=i?++d:--d)f.push(n.readInt16());return f}(),this.widths=(function(){var d,f,p,g;for(g=[],d=0,f=(p=this.metrics).length;d<f;d++)a=p[d],g.push(a.advance);return g}).call(this),s=this.widths[this.widths.length-1],c=[],r=o=0;0<=i?o<i:o>i;r=0<=i?++o:--o)c.push(this.widths.push(s));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),I3=[].slice,Xz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ka(e,da),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,s,i,a,o,A,c,d,f,p;return n in this.cache?this.cache[n]:(a=this.file.loca,r=this.file.contents,s=a.indexOf(n),(i=a.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+s,o=(A=new wl(r.read(i))).readShort(),d=A.readShort(),p=A.readShort(),c=A.readShort(),f=A.readShort(),this.cache[n]=o===-1?new Yz(A,d,p,c,f):new Jz(A,o,d,p,c,f),this.cache[n]))},e.prototype.encode=function(n,r,s){var i,a,o,A,c;for(o=[],a=[],A=0,c=r.length;A<c;A++)i=n[r[A]],a.push(o.length),i&&(o=o.concat(i.encode(s)));return a.push(o.length),{table:o,offsets:a}},e}(),Jz=function(){function t(e,n,r,s,i,a){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=s,this.xMax=i,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Yz=function(){function t(e,n,r,s,i){var a,o;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new wl(I3.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),Zz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ka(e,da),e.prototype.tag="loca",e.prototype.parse=function(n){var r,s;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,a;for(a=[],s=0,i=this.length;s<i;s+=2)a.push(2*n.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],s=0,i=this.length;s<i;s+=4)a.push(n.readUInt32());return a}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var s=new Uint32Array(this.offsets.length),i=0,a=0,o=0;o<s.length;++o)if(s[o]=i,a<r.length&&r[a]==o){++a,s[o]=i;var A=this.offsets[o],c=this.offsets[o+1]-A;c>0&&(i+=c)}for(var d=new Array(4*s.length),f=0;f<s.length;++f)d[4*f+3]=255&s[f],d[4*f+2]=(65280&s[f])>>8,d[4*f+1]=(16711680&s[f])>>16,d[4*f]=(4278190080&s[f])>>24;return d},e}(),eW=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,s,i;for(n in s=this.font.cmap.tables[0].codeMap,e={},i=this.subset)r=i[n],e[n]=s[r];return e},t.prototype.glyphsFor=function(e){var n,r,s,i,a,o,A;for(s={},a=0,o=e.length;a<o;a++)s[i=e[a]]=this.font.glyf.glyphFor(i);for(i in n=[],s)(r=s[i])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(i in A=this.glyphsFor(n))r=A[i],s[i]=r;return s},t.prototype.encode=function(e,n){var r,s,i,a,o,A,c,d,f,p,g,B,b,C,w;for(s in r=_3.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),g={0:0},w=r.charMap)g[(A=w[s]).old]=A.new;for(B in p=r.maxGlyphID,a)B in g||(g[B]=p++);return d=function(y){var N,R;for(N in R={},y)R[y[N]]=N;return R}(g),f=Object.keys(d).sort(function(y,N){return y-N}),b=function(){var y,N,R;for(R=[],y=0,N=f.length;y<N;y++)o=f[y],R.push(d[o]);return R}(),i=this.font.glyf.encode(a,b,g),c=this.font.loca.encode(i.offsets,b),C={cmap:this.font.cmap.raw(),glyf:i.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(C["OS/2"]=this.font.os2.raw()),this.font.directory.encode(C)},t}();Ft.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,s,i,a;if(Array.isArray(n))return"["+function(){var o,A,c;for(c=[],o=0,A=n.length;o<A;o++)r=n[o],c.push(e.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(s in i=["<<"],n)a=n[s],i.push("/"+s+" "+e.convert(a));return i.push(">>"),i.join(`
`)}return""+n},e}();const tB=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:Uz,AcroFormAppearance:wt,AcroFormButton:Nr,AcroFormCheckBox:Nf,AcroFormChoiceField:yc,AcroFormComboBox:xc,AcroFormEditBox:_f,AcroFormListBox:Bc,AcroFormPasswordField:Sf,AcroFormPushButton:If,AcroFormRadioButton:bc,AcroFormTextField:ol,GState:pp,ShadingPattern:jA,TilingPattern:hc,default:Ft,jsPDF:Ft},Symbol.toStringTag,{value:"Module"}));async function tW(t){const e={...t,remaining:t.quantity,status:"PENDIENTE",createdAt:Ut.now()};return is(At(Ue,"inventory_batches"),e)}async function N3(t,e){await $n(Nt(Ue,"inventory_batches",t),{status:"PAGADO",paidAmount:null,paidAt:Ut.now()})}async function nW(t,e){const n=Xt(At(Ue,"batch_allocations"),pn("saleDate",">=",t),pn("saleDate","<=",e)),r=await Qt(n),s={};return r.forEach(i=>{const a=i.data(),o=a.batchId;s[o]||(s[o]={batchId:a.batchId,batchDate:a.batchDate,productName:a.productName,quantity:0,amountCharged:0}),s[o].quantity+=Number(a.quantity||0),s[o].amountCharged+=Number(a.amountCharged||0)}),Object.values(s)}async function rW(t){const e=Nt(Ue,"salesV2",t),n=await Il(e);if(!n.exists())throw new Error("La venta no existe.");const r=n.data(),s=Array.isArray(r.allocations)?r.allocations:[];return await gc(Ue,async i=>{var A;const a=s.filter(c=>(c==null?void 0:c.batchId)&&(c==null?void 0:c.qty)).map(c=>Nt(Ue,"inventory_batches",c.batchId)),o=await Promise.all(a.map(c=>i.get(c)));for(let c=0;c<a.length;c++){const d=a[c],f=o[c];if(!f.exists())continue;const p=f.data(),g=Number(p.remaining??0),B=Number(((A=s[c])==null?void 0:A.qty)||0),b=Number((g+B).toFixed(3));i.update(d,{remaining:b})}i.delete(e)}),{restored:s.reduce((i,a)=>i+(Number(a.qty)||0),0)}}const $i=t=>Math.round((Number(t)||0)*100)/100,ug=t=>Math.round((Number(t)||0)*1e3)/1e3,Rh=t=>Number(t??0).toFixed(2),Ky=t=>Number(t??0).toFixed(3),mI=(t,e)=>{var r;const n=t.date??((r=t.timestamp)!=null&&r.toDate?Jt(t.timestamp.toDate(),"yyyy-MM-dd"):void 0);return n?{id:e,productName:t.productName??"(sin nombre)",quantity:Number(t.quantity??0),amount:Number(t.amount??t.amountCharged??0),amountSuggested:Number(t.amountSuggested??0),date:n,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:t.allocations,avgUnitCost:t.avgUnitCost,cogsAmount:t.cogsAmount}:null};function sW({role:t}){const[e,n]=L.useState([]),[r,s]=L.useState([]),[i,a]=L.useState(null),[o,A]=L.useState(!0),[c,d]=L.useState(""),[f,p]=L.useState("ALL"),[g,B]=L.useState(null),[b,C]=L.useState(0),[w,y]=L.useState(0),[N,R]=L.useState(""),[V,j]=L.useState(0),[U,I]=L.useState("0"),Q=Jt(new Date,"yyyy-MM-dd"),D=L.useRef(null);L.useEffect(()=>{const H=Xt(At(Ue,"salesV2"),pn("date","==",Q)),Y=y2(H,ue=>{const ie=[];ue.forEach(ce=>{const be=mI(ce.data(),ce.id);be&&ie.push(be)}),n(ie),A(!1)});return()=>Y()},[Q]),L.useEffect(()=>{const H=Xt(At(Ue,"salesV2"),pn("status","==","FLOTANTE")),Y=y2(H,ue=>{const ie=[];ue.forEach(ce=>{const be=mI(ce.data(),ce.id);be&&ie.push(be)}),s(ie)});return()=>Y()},[]),L.useEffect(()=>{(async()=>{const Y=Xt(At(Ue,"daily_closures"),pn("date","==",Q)),ue=await Qt(Y);if(ue.empty)a(null);else{const ie=ue.docs[0];a({id:ie.id,...ie.data()})}})()},[Q]);const S=Co.useMemo(()=>{if(f==="FLOTANTE"){const H=[...e,...r],Y=new Map;for(const ue of H)ue.status==="FLOTANTE"&&Y.set(ue.id,ue);return Array.from(Y.values())}if(f==="ALL"){const H=[...e,...r],Y=new Map;for(const ue of H)Y.set(ue.id,ue);return Array.from(Y.values())}return e.filter(H=>H.status==="PROCESADA")},[f,e,r]);$i(S.reduce((H,Y)=>H+(Y.amountSuggested||0),0));const _=$i(S.reduce((H,Y)=>H+(Y.amount||0),0)),T=ug(S.reduce((H,Y)=>H+(Y.quantity||0),0)),K=$i(S.reduce((H,Y)=>H+Number(Y.cogsAmount??0),0)),oe=$i(_-K),le={};S.forEach(H=>{const Y=H.productName||"(sin nombre)";le[Y]||(le[Y]={totalQuantity:0,totalAmount:0}),le[Y].totalQuantity=ug(le[Y].totalQuantity+(H.quantity||0)),le[Y].totalAmount=$i(le[Y].totalAmount+(H.amount||0))});const se=Object.entries(le).map(([H,Y])=>({productName:H,totalQuantity:Y.totalQuantity,totalAmount:Y.totalAmount})),z=async()=>{try{const H=S.filter(ne=>ne.status==="FLOTANTE"),Y=H.length>0?H:e.filter(ne=>ne.status!=="PROCESADA");if(Y.length===0){d("No hay ventas para procesar.");return}const ue={totalCharged:$i(Y.reduce((ne,ve)=>ne+(ve.amount||0),0)),totalSuggested:$i(Y.reduce((ne,ve)=>ne+(ve.amountSuggested||0),0)),totalUnits:ug(Y.reduce((ne,ve)=>ne+(ve.quantity||0),0)),totalCOGS:$i(Y.reduce((ne,ve)=>ne+Number(ve.cogsAmount??0),0))},ie=$i(ue.totalCharged-ue.totalSuggested),ce=$i(ue.totalCharged-ue.totalCOGS),be=await is(At(Ue,"daily_closures"),{date:Q,createdAt:Ut.now(),totalCharged:ue.totalCharged,totalSuggested:ue.totalSuggested,totalDifference:ie,totalUnits:ue.totalUnits,totalCOGS:ue.totalCOGS,grossProfit:ce,products:Y.map(ne=>({productName:ne.productName,quantity:ne.quantity,amount:ne.amount})),salesV2:Y.map(ne=>({id:ne.id,productName:ne.productName,quantity:ne.quantity,amount:ne.amount,amountSuggested:ne.amountSuggested,userEmail:ne.userEmail,clientName:ne.clientName,amountReceived:ne.amountReceived,change:ne.change,status:ne.status,cogsAmount:ne.cogsAmount??0,avgUnitCost:ne.avgUnitCost??null,allocations:ne.allocations??[],date:ne.date})),productSummary:Object.entries(Y.reduce((ne,ve)=>{const Re=ve.productName||"(sin nombre)";return ne[Re]||(ne[Re]={totalQuantity:0,totalAmount:0}),ne[Re].totalQuantity=ug(ne[Re].totalQuantity+(ve.quantity||0)),ne[Re].totalAmount=$i(ne[Re].totalAmount+(ve.amount||0)),ne},{})).map(([ne,ve])=>({productName:ne,totalQuantity:ve.totalQuantity,totalAmount:ve.totalAmount}))}),Fe=Ww(Ue);Y.forEach(ne=>{Fe.update(Nt(Ue,"salesV2",ne.id),{status:"PROCESADA",closureId:be.id,closureDate:Q})}),await Fe.commit(),d(` Cierre guardado. Ventas procesadas: ${Y.length}.`)}catch(H){console.error(H),d(" Error al guardar el cierre.")}},Ae=async H=>{if(window.confirm("Revertir esta venta? Esta accin no se puede deshacer."))try{await $n(Nt(Ue,"salesV2",H),{status:"FLOTANTE",closureId:null,closureDate:null}),d(" Venta revertida a FLOTANTE.")}catch(Y){console.error(Y),d(" No se pudo revertir la venta.")}},ee=H=>{B(H),C(H.quantity),y(H.amount),R(H.clientName),j(H.amountReceived),I(H.change)},we=async()=>{if(g)try{await $n(Nt(Ue,"salesV2",g.id),{quantity:b,amount:w,amountCharged:w,clientName:N,amountReceived:V,change:U}),B(null),d(" Venta actualizada.")}catch(H){console.error(H),d(" No se pudo actualizar la venta.")}},k=async H=>{if(window.confirm("Eliminar esta venta? Se restaurar el stock en los lotes asignados."))try{const{restored:Y}=await rW(H);d(` Venta eliminada. Stock restaurado: ${Number(Y).toFixed(2)}.`)}catch(Y){console.error(Y),d(" No se pudo eliminar la venta.")}},X=async()=>{if(D.current){D.current.classList.add("force-pdf-colors");try{const Y=(await db(D.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),ue=new Ft;ue.addImage(Y,"PNG",10,10,190,0),ue.save(`cierre_${Q}.pdf`)}finally{D.current.classList.remove("force-pdf-colors")}}},Z=!t||t==="admin";return l.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded shadow",children:[l.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Cierre de Ventas - ",Q]}),l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx("label",{className:"text-sm",children:"Filtrar:"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:f,onChange:H=>p(H.target.value),children:[l.jsx("option",{value:"ALL",children:"Todas"}),l.jsx("option",{value:"FLOTANTE",children:"Venta Flotante"}),l.jsx("option",{value:"PROCESADA",children:"Venta Procesada"})]})]}),o?l.jsx("p",{children:"Cargando ventas..."}):l.jsxs("div",{ref:D,children:[l.jsxs("table",{className:"min-w-full border text-sm mb-4",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Estado"}),l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Libras - Unidad"}),l.jsx("th",{className:"border p-2",children:"Monto"}),l.jsx("th",{className:"border p-2",children:"Fecha venta"}),l.jsx("th",{className:"border p-2",children:"Vendedor"}),l.jsx("th",{className:"border p-2",children:"Acciones"})]})}),l.jsxs("tbody",{children:[S.map(H=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${H.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:H.status})}),l.jsx("td",{className:"border p-1",children:H.productName}),l.jsx("td",{className:"border p-1",children:Ky(H.quantity)}),l.jsxs("td",{className:"border p-1",children:["C$",Rh(H.amount)]}),l.jsx("td",{className:"border p-1",children:H.date}),l.jsx("td",{className:"border p-1",children:H.userEmail}),l.jsx("td",{className:"border p-1",children:H.status==="FLOTANTE"?l.jsxs("div",{className:"flex gap-2 justify-center",children:[Z&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>ee(H),className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",children:"Editar"}),l.jsx("button",{onClick:()=>k(H.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]}),!Z&&l.jsx("span",{className:"text-gray-400 text-xs",children:""})]}):H.status==="PROCESADA"?l.jsx("div",{className:"flex gap-2 justify-center",children:Z?l.jsx("button",{onClick:()=>Ae(H.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Revertir"}):l.jsx("span",{className:"text-gray-400 text-xs",children:""})}):l.jsx("span",{className:"text-gray-400 text-xs",children:"No options"})})]},H.id)),S.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:9,className:"p-3 text-center text-gray-500",children:"Sin ventas para mostrar."})})]})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm mb-2",children:[l.jsxs("div",{children:["Total unidades: ",l.jsx("strong",{children:Ky(T)})]}),l.jsxs("div",{children:["Total cobrado: ",l.jsxs("strong",{children:["C$",Rh(_)]})]})]}),(K>0||oe!==_)&&l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm mb-6",children:[l.jsxs("div",{children:["Calculo a Precio compra:"," ",l.jsxs("strong",{children:["C$",Rh(K)]})]}),l.jsxs("div",{children:["Ganancia antes de gasto:"," ",l.jsxs("strong",{children:["C$",Rh(oe)]})]})]}),l.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),l.jsxs("table",{className:"min-w-full border text-sm mb-2",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),l.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),l.jsxs("tbody",{children:[se.map(H=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:H.productName}),l.jsx("td",{className:"border p-1",children:Ky(H.totalQuantity)}),l.jsxs("td",{className:"border p-1",children:["C$",Rh(H.totalAmount)]})]},H.productName)),se.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500",children:"Sin datos para consolidar."})})]})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:z,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Cerrar ventas del da"}),l.jsx("button",{onClick:X,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Descargar PDF"})]}),c&&l.jsx("p",{className:"mt-2 text-sm",children:c}),g&&l.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-4 space-y-3",children:[l.jsx("h4",{className:"font-semibold text-lg",children:"Editar venta"}),l.jsxs("div",{className:"text-sm text-gray-500",children:[g.productName,"  ",g.userEmail]}),l.jsx("label",{className:"text-sm",children:"Cantidad"}),l.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:b,onChange:H=>C(parseFloat(H.target.value||"0"))}),l.jsx("label",{className:"text-sm",children:"Monto cobrado"}),l.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:w,onChange:H=>y(parseFloat(H.target.value||"0"))}),l.jsx("label",{className:"text-sm",children:"Cliente"}),l.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:N,onChange:H=>R(H.target.value)}),l.jsx("label",{className:"text-sm",children:"Paga con"}),l.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:V,onChange:H=>j(parseFloat(H.target.value||"0"))}),l.jsx("label",{className:"text-sm",children:"Vuelto"}),l.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:U,onChange:H=>I(H.target.value)}),l.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[l.jsx("button",{onClick:()=>B(null),className:"px-3 py-1 border rounded",children:"Cancelar"}),l.jsx("button",{onClick:we,className:"px-3 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",children:"Guardar cambios"})]})]})})]})}const bi=t=>Number(t??0).toFixed(2),Tu=t=>Number(t??0).toFixed(3);function iW(){var y,N,R,V;const t=async j=>{if(!window.confirm(`Eliminar el cierre del ${j.date}?`))return;const U=window.confirm("Tambin quieres reabrir (revertir a FLOTANTE) las ventas vinculadas a este cierre?");try{if(U){const I=await Qt(Xt(At(Ue,"salesV2"),pn("closureId","==",j.id)));if(!I.empty){const Q=Ww(Ue);I.forEach(D=>{Q.update(Nt(Ue,"salesV2",D.id),{status:"FLOTANTE",closureId:null,closureDate:null})}),await Q.commit()}}await xs(Nt(Ue,"daily_closures",j.id)),(c==null?void 0:c.id)===j.id&&d(null),await B(),p(` Cierre eliminado${U?" y ventas reabiertas.":"."}`)}catch(I){console.error(I),p(" No se pudo eliminar el cierre.")}},[e,n]=L.useState(Jt(SV(new Date),"yyyy-MM-dd")),[r,s]=L.useState(Jt(new Date,"yyyy-MM-dd")),[i,a]=L.useState(!0),[o,A]=L.useState([]),[c,d]=L.useState(null),[f,p]=L.useState(""),g=L.useRef(null),B=async()=>{try{a(!0);const j=Xt(At(Ue,"daily_closures"),pn("date",">=",e),pn("date","<=",r)),U=await Qt(j),I=[];U.forEach(Q=>I.push({id:Q.id,...Q.data()})),I.sort((Q,D)=>Q.date<D.date?1:Q.date>D.date?-1:0),A(I)}catch(j){console.error(j),p(" Error cargando el historial.")}finally{a(!1)}};L.useEffect(()=>{B()},[]);const b=async j=>{j.preventDefault(),B()},C=L.useMemo(()=>{if(!c)return{units:0,sug:0,chg:0,diff:0,cogs:0,profit:0};const j=Number(c.totalUnits??0),U=Number(c.totalSuggested??0),I=Number(c.totalCharged??0),Q=Number(c.totalDifference??(isFinite(I-U)?I-U:0)),D=Number(c.totalCOGS??0),S=Number(c.grossProfit??(isFinite(I-D)?I-D:0));return{units:j,sug:U,chg:I,diff:Q,cogs:D,profit:S}},[c]),w=async()=>{if(!g.current||!c)return;const j=g.current;j.classList.add("force-pdf-colors");try{const[{default:U},{jsPDF:I}]=await Promise.all([To(()=>Promise.resolve().then(()=>hb),void 0),To(()=>Promise.resolve().then(()=>tB),void 0)]),D=(await U(j,{backgroundColor:"#ffffff",onclone:T=>{const K=T.defaultView;T.body.querySelectorAll("*").forEach(le=>{const se=K.getComputedStyle(le);se.color&&(le.style.color=se.color),se.backgroundColor&&se.backgroundColor!=="rgba(0, 0, 0, 0)"&&(le.style.backgroundColor=se.backgroundColor),se.borderColor&&(le.style.borderColor=se.borderColor)})}})).toDataURL("image/png"),{jsPDF:S}=await To(async()=>{const{jsPDF:T}=await Promise.resolve().then(()=>tB);return{jsPDF:T}},void 0),_=new S;_.addImage(D,"PNG",10,10,190,0),_.save(`cierre_${c.date}.pdf`)}finally{j.classList.remove("force-pdf-colors")}};return l.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded shadow",children:[l.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Histrico de cierres"}),l.jsxs("form",{onSubmit:b,className:"flex flex-wrap items-end gap-3 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:e,onChange:j=>n(j.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:j=>s(j.target.value)})]}),l.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Aplicar"})]}),i?l.jsx("p",{children:"Cargando..."}):o.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"Sin cierres en el rango seleccionado."}):l.jsxs("table",{className:"min-w-full border text-sm mb-6",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Fecha"}),l.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),l.jsx("th",{className:"border p-2",children:"Monto de venta"}),l.jsx("th",{className:"border p-2",children:"Monto al costo"}),l.jsx("th",{className:"border p-2",children:"Ganancia sin gastos"}),l.jsx("th",{className:"border p-2",children:"Acciones"})]})}),l.jsx("tbody",{children:o.map(j=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:j.date}),l.jsx("td",{className:"border p-1",children:Tu(j.totalUnits)}),l.jsxs("td",{className:"border p-1",children:["C$",bi(j.totalCharged)]}),l.jsxs("td",{className:"border p-1",children:["C$",bi(j.totalCOGS)]}),l.jsxs("td",{className:"border p-1",children:["C$",bi(j.grossProfit??Number(j.totalCharged??0)-Number(j.totalCOGS??0))]}),l.jsx("td",{className:"border p-1",children:l.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[l.jsx("button",{className:"text-xs bg-gray-800 text-white px-2 py-1 rounded hover:bg-black",onClick:()=>d(j),children:"Ver detalle"}),l.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>t(j),children:"Eliminar"})]})})]},j.id))})]}),c&&l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsxs("h2",{className:"text-xl font-semibold",children:["Detalle ",c.date]}),l.jsx("button",{onClick:()=>d(null),className:"text-sm px-2 py-1 border rounded",children:"Cerrar"}),l.jsx("button",{onClick:w,className:"ml-auto bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 text-sm",children:"Descargar PDF"})]}),l.jsxs("div",{ref:g,className:"space-y-4",children:[l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:l.jsxs("div",{children:["Total unidades: ",l.jsx("strong",{children:Tu(C.units)})]})}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm",children:[l.jsxs("div",{children:["Monto al costo:"," ",l.jsxs("strong",{children:["C$",bi(C.cogs)]})]}),l.jsxs("div",{children:["Ganancia sin gastos:"," ",l.jsxs("strong",{children:["C$",bi(C.profit)]})]})]}),(y=c.salesV2)!=null&&y.length?l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Cantidad"}),l.jsx("th",{className:"border p-2",children:"Monto de ventas"}),l.jsx("th",{className:"border p-2",children:"Monto al costo"}),l.jsx("th",{className:"border p-2",children:"Fecha venta"}),l.jsx("th",{className:"border p-2",children:"Vendedor"})]})}),l.jsx("tbody",{children:c.salesV2.map((j,U)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:j.productName??"(sin nombre)"}),l.jsx("td",{className:"border p-1",children:Tu(j.quantity)}),l.jsxs("td",{className:"border p-1",children:["C$",bi(j.amount)]}),l.jsxs("td",{className:"border p-1",children:["C$",bi(j.cogsAmount)]}),l.jsx("td",{className:"border p-1",children:j.date??""}),l.jsx("td",{className:"border p-1",children:j.userEmail??""})]},U))})]})]}):(N=c.sales)!=null&&N.length?l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Cantidad"}),l.jsx("th",{className:"border p-2",children:"Monto"}),l.jsx("th",{className:"border p-2",children:"Vendedor"}),l.jsx("th",{className:"border p-2",children:"Cliente"}),l.jsx("th",{className:"border p-2",children:"Paga con"}),l.jsx("th",{className:"border p-2",children:"Vuelto"})]})}),l.jsx("tbody",{children:c.sales.map((j,U)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:j.productName??"(sin nombre)"}),l.jsx("td",{className:"border p-1",children:Tu(j.quantity)}),l.jsxs("td",{className:"border p-1",children:["C$",bi(j.amount)]}),l.jsx("td",{className:"border p-1",children:j.userEmail??""}),l.jsx("td",{className:"border p-1",children:j.clientName??""}),l.jsxs("td",{className:"border p-1",children:["C$",bi(j.amountReceived)]}),l.jsx("td",{className:"border p-1",children:typeof j.change=="number"?bi(j.change):j.change??"0"})]},U))})]})]}):(R=c.products)!=null&&R.length?l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"font-semibold",children:"Productos en el cierre"}),l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Cantidad"}),l.jsx("th",{className:"border p-2",children:"Monto"})]})}),l.jsx("tbody",{children:c.products.map((j,U)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:j.productName}),l.jsx("td",{className:"border p-1",children:Tu(j.quantity)}),l.jsxs("td",{className:"border p-1",children:["C$",bi(j.amount)]})]},U))})]})]}):l.jsx("p",{className:"text-sm text-gray-500",children:"Sin detalle de ventas en este cierre."}),(V=c.productSummary)!=null&&V.length?l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"font-semibold",children:"Consolidado por producto"}),l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),l.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),l.jsx("tbody",{children:c.productSummary.map((j,U)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:j.productName}),l.jsx("td",{className:"border p-1",children:Tu(j.totalQuantity)}),l.jsxs("td",{className:"border p-1",children:["C$",bi(j.totalAmount)]})]},U))})]})]}):null]})]}),f&&l.jsx("p",{className:"mt-3 text-sm",children:f})]})}function aW(){const[t,e]=L.useState(""),[n,r]=L.useState(""),[s,i]=L.useState("vendedor"),[a,o]=L.useState(""),[A,c]=L.useState([]),[d,f]=L.useState(!0),[p,g]=L.useState(null),[B,b]=L.useState("vendedor"),C=async()=>{f(!0);const j=await Qt(At(Ue,"users")),U=[];j.forEach(I=>{const Q=I.data();U.push({id:I.id,email:Q.email??"",role:Q.role??"vendedor"})}),c(U),f(!1)};L.useEffect(()=>{C()},[]);const w=async j=>{j.preventDefault(),o("");try{const U=ox(),I=ax(U.options,"Secondary"),Q=JF(I),D=await jj(Q,t,n);await $T(Nt(At(Ue,"users"),D.user.uid),{email:t,role:s}),await OF(Q),await PD(I),c(S=>[{id:D.user.uid,email:t,role:s},...S]),o(" Usuario creado correctamente."),e(""),r(""),i("vendedor")}catch(U){console.error(U),o(" Error al crear el usuario: "+U.message)}},y=j=>{g(j.id),b(j.role||"vendedor")},N=()=>{g(null),b("vendedor")},R=async()=>{if(!p)return;const j=Nt(Ue,"users",p);await $n(j,{role:B}),c(U=>U.map(I=>I.id===p?{...I,role:B}:I)),N()},V=async j=>{confirm("Eliminar este usuario del listado?")&&(await xs(Nt(Ue,"users",j)),c(I=>I.filter(Q=>Q.id!==j)))};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("form",{onSubmit:w,className:"max-w-md mx-auto bg-white p-8 shadow-lg rounded-lg space-y-6 border border-gray-200",children:[l.jsxs("h2",{className:"text-2xl font-bold mb-4 text-purple-700 flex items-center gap-2",children:[l.jsx("span",{className:"inline-block bg-purple-100 text-purple-700 rounded-full p-2",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Registrar nuevo usuario"]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Correo electrnico"}),l.jsx("input",{type:"email",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:t,onChange:j=>e(j.target.value)})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Contrasea"}),l.jsx("input",{type:"password",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:n,onChange:j=>r(j.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm",children:"Rol"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:s,onChange:j=>i(j.target.value),children:[l.jsx("option",{value:"vendedor",children:"Vendedor"}),l.jsx("option",{value:"admin",children:"Admin"})]})]}),l.jsx("button",{type:"submit",className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 w-full",children:"Crear usuario"}),a&&l.jsx("p",{className:"text-sm mt-2",children:a})]}),l.jsxs("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto mt-6",children:[l.jsx("h3",{className:"text-lg font-semibold p-2",children:"Usuarios"}),l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Email"}),l.jsx("th",{className:"p-2 border",children:"Rol"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:d?l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"p-4 text-center",children:"Cargando"})}):A.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"p-4 text-center",children:"Sin usuarios"})}):A.map(j=>{const U=p===j.id;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:j.email}),l.jsx("td",{className:"p-2 border",children:U?l.jsxs("select",{className:"w-full border p-1 rounded",value:B,onChange:I=>b(I.target.value),children:[l.jsx("option",{value:"vendedor",children:"Vendedor"}),l.jsx("option",{value:"admin",children:"Admin"})]}):l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${j.role==="admin"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:j.role})}),l.jsx("td",{className:"p-2 border space-x-2",children:U?l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:R,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:N,children:"Cancelar"})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>y(j),children:"Editar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>V(j.id),children:"Eliminar"})]})})]},j.id)})})]})]})]})}const oW=t=>`C$${(Number(t)||0).toFixed(2)}`;function AW(){const[t,e]=L.useState(""),[n,r]=L.useState(0),[s,i]=L.useState(""),[a,o]=L.useState(""),[A,c]=L.useState(""),[d,f]=L.useState([]),[p,g]=L.useState(!0),[B,b]=L.useState(!1),[C,w]=L.useState(null),[y,N]=L.useState(""),[R,V]=L.useState(""),[j,U]=L.useState(""),[I,Q]=L.useState(0),D=async()=>{g(!0);const z=await Qt(At(Ue,"products")),Ae=[];z.forEach(ee=>{const we=ee.data();Ae.push({id:ee.id,name:we.name??"",price:Number(we.price??0),category:we.category??"",measurement:we.measurement??"",active:we.active!==!1})}),f(Ae),g(!1)};L.useEffect(()=>{D()},[]);const S=async z=>{if(z.preventDefault(),i(""),!t||n<=0||!A){i(" Completa nombre, precio vlido y unidad de medida");return}try{const Ae={name:t,price:parseFloat(n.toFixed(2)),category:a,measurement:A,active:!0},ee=await is(At(Ue,"products"),Ae);f(we=>[{id:ee.id,...Ae},...we]),i(" Producto registrado con exito."),e(""),r(0),c(""),o("")}catch(Ae){i(" Error: "+Ae.message)}},_=z=>{w(z.id),N(z.name),V(z.category),U(z.measurement),Q(z.price)},T=()=>{w(null),N(""),V(""),U(""),Q(0)},K=async()=>{if(!C)return;const z=Nt(Ue,"products",C);await $n(z,{name:y,category:R,measurement:j,price:parseFloat((I||0).toFixed(2))}),f(Ae=>Ae.map(ee=>ee.id===C?{...ee,name:y,category:R,measurement:j,price:parseFloat((I||0).toFixed(2))}:ee)),T()},oe=async z=>{const Ae=Nt(Ue,"products",z.id),ee=z.active===!1;await $n(Ae,{active:ee}),f(we=>we.map(k=>k.id===z.id?{...k,active:ee}:k))},le=async z=>{const Ae=Xt(At(Ue,"inventory_batches"),pn("productId","==",z),zT(1));if(!(await Qt(Ae)).empty){alert(`No se puede eliminar: hay lotes asociados a este producto.
Sugerencia: desactvalo para ocultarlo.`);return}confirm("Eliminar este producto definitivamente?")&&(await xs(Nt(Ue,"products",z)),f(k=>k.filter(X=>X.id!==z)))},se=B?d:d.filter(z=>z.active!==!1);return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("form",{onSubmit:S,className:"max-w-md mx-auto bg-white p-8 shadow-lg rounded-lg space-y-6 border border-gray-200",children:[l.jsxs("h2",{className:"text-2xl font-bold mb-4 text-green-700 flex items-center gap-2",children:[l.jsx("span",{className:"inline-block bg-green-100 text-green-700 rounded-full p-2",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Registrar producto"]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Categora"}),l.jsxs("select",{value:a,onChange:z=>o(z.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[l.jsx("option",{value:"",children:"Selecciona"}),l.jsx("option",{value:"pollo",children:"Pollo"}),l.jsx("option",{value:"cerdo",children:"Cerdo"}),l.jsx("option",{value:"huevo",children:"Huevos"}),l.jsx("option",{value:"ropa",children:"Ropa"}),l.jsx("option",{value:"otros",children:"Otros"})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre del producto"}),l.jsx("input",{type:"text",className:"w-full border p-2 rounded",value:t,onChange:z=>e(z.target.value)})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Tipo de unidad de medida"}),l.jsxs("select",{value:A,onChange:z=>c(z.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[l.jsx("option",{value:"",children:"Selecciona"}),l.jsx("option",{value:"lb",children:"Libra"}),l.jsx("option",{value:"kg",children:"Kilogramo"}),l.jsx("option",{value:"unidad",children:"Unidad"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm",children:"Precio por unidad (ej: 55.50)"}),l.jsx("input",{type:"number",step:"0.01",className:"w-full border p-2 rounded",value:Number.isNaN(n)?"":n,onChange:z=>r(parseFloat(z.target.value)),onFocus:z=>z.target.value==="0"?r(NaN):null})]}),l.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",children:"Agregar producto"}),s&&l.jsx("p",{className:"text-sm mt-2",children:s})]}),l.jsxs("div",{className:"flex items-center justify-between mt-6 mb-2",children:[l.jsx("h3",{className:"text-lg font-semibold p-2",children:"Productos"}),l.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[l.jsx("input",{type:"checkbox",checked:B,onChange:z=>b(z.target.checked)}),"Mostrar inactivos"]})]}),l.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Nombre"}),l.jsx("th",{className:"p-2 border",children:"Categora"}),l.jsx("th",{className:"p-2 border",children:"Unidad"}),l.jsx("th",{className:"p-2 border",children:"Precio"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:p?l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):se.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin productos"})}):se.map(z=>{const Ae=C===z.id,ee=z.active!==!1;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:Ae?l.jsx("input",{className:"w-full border p-1 rounded",value:y,onChange:we=>N(we.target.value)}):z.name}),l.jsx("td",{className:"p-2 border",children:Ae?l.jsxs("select",{className:"w-full border p-1 rounded",value:R,onChange:we=>V(we.target.value),children:[l.jsx("option",{value:"",children:"Selecciona"}),l.jsx("option",{value:"pollo",children:"Pollo"}),l.jsx("option",{value:"cerdo",children:"Cerdo"}),l.jsx("option",{value:"huevo",children:"Huevos"}),l.jsx("option",{value:"ropa",children:"Ropa"}),l.jsx("option",{value:"otros",children:"Otros"})]}):z.category}),l.jsx("td",{className:"p-2 border",children:Ae?l.jsxs("select",{className:"w-full border p-1 rounded",value:j,onChange:we=>U(we.target.value),children:[l.jsx("option",{value:"",children:"Selecciona"}),l.jsx("option",{value:"lb",children:"Libra"}),l.jsx("option",{value:"kg",children:"Kilogramo"}),l.jsx("option",{value:"unidad",children:"Unidad"})]}):z.measurement}),l.jsx("td",{className:"p-2 border",children:Ae?l.jsx("input",{type:"number",step:"0.01",className:"w-full border p-1 rounded text-right",value:Number.isNaN(I)?"":I,onChange:we=>Q(parseFloat(we.target.value))}):oW(z.price)}),l.jsx("td",{className:"p-2 border",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ee?"bg-green-100 text-green-700":"bg-gray-200 text-gray-700"}`,children:ee?"Activo":"Inactivo"})}),l.jsx("td",{className:"p-2 border space-x-2",children:Ae?l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:K,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:T,children:"Cancelar"})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>_(z),children:"Editar"}),l.jsx("button",{className:`px-2 py-1 rounded ${ee?"bg-gray-600 hover:bg-gray-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,onClick:()=>oe(z),children:ee?"Desactivar":"Activar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>le(z.id),children:"Eliminar"})]})})]},z.id)})})]})})]})}const Zr=[];for(let t=0;t<256;++t)Zr.push((t+256).toString(16).slice(1));function lW(t,e=0){return(Zr[t[e+0]]+Zr[t[e+1]]+Zr[t[e+2]]+Zr[t[e+3]]+"-"+Zr[t[e+4]]+Zr[t[e+5]]+"-"+Zr[t[e+6]]+Zr[t[e+7]]+"-"+Zr[t[e+8]]+Zr[t[e+9]]+"-"+Zr[t[e+10]]+Zr[t[e+11]]+Zr[t[e+12]]+Zr[t[e+13]]+Zr[t[e+14]]+Zr[t[e+15]]).toLowerCase()}let Gy;const cW=new Uint8Array(16);function uW(){if(!Gy){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Gy=crypto.getRandomValues.bind(crypto)}return Gy(cW)}const dW=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),gI={randomUUID:dW};function hW(t,e,n){var s;if(gI.randomUUID&&!t)return gI.randomUUID();t=t||{};const r=t.random??((s=t.rng)==null?void 0:s.call(t))??uW();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,lW(r)}async function fW(t,e,n,r=!1){if(n<=0)return{allocations:[],avgUnitCost:0,cogsAmount:0};const s=At(t,"inventory_batches"),i=Xt(s,pn("productName","==",e)),A=(await Qt(i)).docs.map(c=>({id:c.id,data:c.data()})).sort((c,d)=>{var b,C;const f=c.data.date??"",p=d.data.date??"";if(f!==p)return f<p?-1:1;const g=((b=c.data.createdAt)==null?void 0:b.seconds)??0,B=((C=d.data.createdAt)==null?void 0:C.seconds)??0;return g-B}).map(c=>Nt(t,"inventory_batches",c.id));return gc(t,async c=>{let d=Number(n);const f=[],p=await Promise.all(A.map(C=>c.get(C)));for(let C=0;C<A.length&&d>0;C++){const w=A[C],y=p[C];if(!y.exists())continue;const N=y.data(),R=Number(N.quantity??0),V=Number(N.remaining??R??0),j=Number(N.purchasePrice??0);if(V<=0)continue;const U=Math.min(V,d),I=Number((V-U).toFixed(3));c.update(w,{remaining:I}),f.push({batchId:w.id,qty:U,unitCost:j,lineCost:Number((U*j).toFixed(2))}),d=Number((d-U).toFixed(3))}if(d>0&&!r)throw new Error(`Stock insuficiente para "${e}". Faltan ${d} unidades.`);const g=Number(f.reduce((C,w)=>C+w.lineCost,0).toFixed(2)),B=f.reduce((C,w)=>C+w.qty,0),b=B>0?Number((g/B).toFixed(4)):0;return{allocations:f,avgUnitCost:b,cogsAmount:g}})}const S3=3,pW=.5*10**-S3;function ws(t){const e=Number(t??0);return Number(e.toFixed(S3))}function wI(t,e){return ws((t??0)+(e??0))}function dg(t,e){return ws(t)+pW>=ws(e)}async function mW(t,e){const n=await Qt(At(Ue,"inventory_batches")),r=t.trim().toLowerCase();let s=0;for(const i of n.docs){const a=i.data();(a.productName||"").trim().toLowerCase()===r&&a.productId!==e&&(await $n(Nt(Ue,"inventory_batches",i.id),{productId:e}),s++)}return s}function vI({user:t}){const[e,n]=L.useState([]),[r,s]=L.useState(""),[i,a]=L.useState(0),[o,A]=L.useState(0),[c,d]=L.useState(!1),[f,p]=L.useState(0),[g,B]=L.useState("0"),[b,C]=L.useState(""),[w,y]=L.useState([]),[N,R]=L.useState(""),[V,j]=L.useState(Jt(new Date,"yyyy-MM-dd")),U=K=>Math.round(K*100)/100,I=e.find(K=>K.id===r),Q=((I==null?void 0:I.measurement)||"").toLowerCase()!=="lb",D=async K=>{if(!K)return 0;const oe=Xt(At(Ue,"inventory_batches"),pn("productId","==",K)),le=await Qt(oe);let se=0;return le.forEach(z=>{const Ae=z.data();se=wI(se,Number(Ae.remaining||0))}),ws(se)},S=async K=>{if(!K)return 0;const oe=await Qt(At(Ue,"inventory_batches"));let le=0;return oe.forEach(se=>{const z=se.data();(z.productName||"").trim().toLowerCase()===K.trim().toLowerCase()&&(le=wI(le,Number(z.remaining||0)))}),ws(le)};L.useEffect(()=>{async function K(){const oe=await Qt(At(Ue,"products")),le=[];oe.forEach(se=>{const z=se.data();(z==null?void 0:z.active)!==!1&&le.push({id:se.id,productName:z.name??z.productName??"(sin nombre)",price:Number(z.price??0),measurement:z.measurement??"(sin unidad)",category:z.category??"(sin categora)"})}),n(le)}K()},[]),L.useEffect(()=>{async function K(){const oe=await Qt(At(Ue,"users")),le=[];oe.forEach(se=>{const z=se.data();le.push({id:se.id,email:z.email??"(sin email)",role:z.role??"USER"})}),y(le)}K()},[]),L.useEffect(()=>{d(!1)},[r]),L.useEffect(()=>{const K=e.find(le=>le.id===r);if(!K){A(0);return}const oe=Number(i)||0;if(!c){const le=U(K.price*oe);A(le)}},[r,i,e,c]),L.useEffect(()=>{const K=Number(f)||0,oe=Number(o)||0,le=(K-oe).toFixed(2);B(le)},[f,o]);const _=K=>{K.key===","&&(K.preventDefault(),K.target.value+=".")},T=async K=>{var Ae,ee;K.preventDefault(),C("");const oe=e.find(we=>we.id===r),le=Number(i)||0,se=Q?Math.max(0,Math.round(le)):ws(le),z=Number(o)||0;if(!oe||se<=0){C("Selecciona un producto y una cantidad vlida.");return}try{const we=await D(oe.id);if(!dg(we,se)){const H=await S(oe.productName);if(dg(H,0)&&!dg(we,0)){const Y=await mW(oe.productName,oe.id),ue=await D(oe.id);if(dg(ue,se))C(` Lotes corregidos (${Y}). Continuando con la venta`);else{const ie=ws(se-ue);C(` Stock insuficiente tras corregir ${Y} lote(s). Faltan ${ie.toFixed(3)} unidades.`);return}}else{const Y=ws(se-we);C(` Stock insuficiente para "${oe.productName}". Faltan ${Y.toFixed(3)} unidades.`);return}}const{allocations:k,avgUnitCost:X,cogsAmount:Z}=await fW(Ue,oe.productName,se,!1);await is(At(Ue,"salesV2"),{id:hW(),productId:r,productName:oe.productName,price:oe.price,quantity:se,amount:z,amountCharged:z,amountReceived:Number(f)||0,change:g,clientName:N.trim(),timestamp:Ut.now(),date:V,userEmail:((Ae=w[0])==null?void 0:Ae.email)??"sin usuario",vendor:((ee=w[0])==null?void 0:ee.role)??"sin usuario",status:"FLOTANTE",allocations:k,avgUnitCost:X,cogsAmount:Z}),C(" Venta registrada y asignada a inventario (FIFO)."),s(""),a(0),d(!1),A(0),p(0),B("0"),R(""),j(Jt(new Date,"yyyy-MM-dd"))}catch(we){console.error(we),C(` ${(we==null?void 0:we.message)||"Error al registrar la venta."}`)}};return l.jsxs("form",{onSubmit:T,className:`w-full mx-auto bg-white rounded-2xl shadow-2xl
                 p-4 sm:p-6 md:p-8
                 max-w-md sm:max-w-lg md:max-w-xl lg:max-w-2xl
                 space-y-4`,children:[l.jsxs("h2",{className:"text-xl sm:text-2xl font-bold mb-2 sm:mb-4 text-blue-700 flex items-center gap-2",children:[l.jsx("span",{className:"block bg-blue-100 text-blue-700 rounded-full p-2",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 sm:h-6 sm:w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 10c-4.41 0-8-1.79-8-4V6c0-2.21 3.59-4 8-4s8 1.79 8 4v8c0 2.21-3.59 4-8 4z"})})}),"Registrar venta"]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Producto | Precio por Libra/Unidad"}),l.jsxs("select",{className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-blue-400",value:r,onChange:K=>s(K.target.value),children:[l.jsx("option",{value:"",disabled:!0,children:"Selecciona un producto"}),e.map(K=>l.jsxs("option",{value:K.id,children:[K.productName," - C$ ",K.price]},K.id))]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Fecha de la venta"}),l.jsx("input",{type:"date",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-blue-400",value:V,onChange:K=>j(K.target.value)})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Libras - Unidad"}),l.jsx("input",{type:"number",lang:"eng",step:Q?1:.01,inputMode:Q?"numeric":"decimal",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-blue-400",value:i===0?"":i,onKeyDown:_,onFocus:K=>{K.target.value==="0"&&(K.target.value="")},onChange:K=>{const oe=K.target.value.replace(",","."),le=oe===""?0:parseFloat(oe);if(Q){const se=Number.isFinite(le)?Math.max(0,Math.round(le)):0;a(se)}else a(Number.isFinite(le)?le:0)},disabled:!r,placeholder:r?"":"Selecciona un producto primero",title:r?"":"Selecciona un producto para habilitar"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:" Monto total"}),l.jsx("input",{type:"number",step:"0.01",readOnly:!0,inputMode:"decimal",className:"w-full border border-gray-300 p-2 rounded bg-gray-100",value:o===0?"":o.toFixed(2),onKeyDown:_})]}),l.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white px-4 py-3 sm:py-2 rounded-lg font-semibold shadow hover:bg-blue-700 transition",children:"Guardar venta"}),b&&l.jsx("p",{className:`text-sm mt-2 ${b.startsWith("")?"text-green-600":b.startsWith("")?"text-yellow-600":"text-red-600"}`,children:b})]})}const kr=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function gW(){const[t,e]=L.useState([]),[n,r]=L.useState([]),[s,i]=L.useState(!0),[a,o]=L.useState(""),[A,c]=L.useState(Jt(Op(new Date),"yyyy-MM-dd")),[d,f]=L.useState(Jt(jp(new Date),"yyyy-MM-dd")),[p,g]=L.useState(""),[B,b]=L.useState(""),[C,w]=L.useState(0),[y,N]=L.useState(0),[R,V]=L.useState(0),[j,U]=L.useState(Jt(new Date,"yyyy-MM-dd")),[I,Q]=L.useState(0),[D,S]=L.useState(0),[_,T]=L.useState(""),[K,oe]=L.useState(null),[le,se]=L.useState(""),[z,Ae]=L.useState(0),[ee,we]=L.useState(0),[k,X]=L.useState(0),[Z,H]=L.useState(""),[Y,ue]=L.useState(0),[ie,ce]=L.useState(0);L.useEffect(()=>{(async()=>{const pe=await Qt(At(Ue,"products")),Pe=[];pe.forEach(dt=>{const Je=dt.data();Pe.push({id:dt.id,name:Je.name??Je.productName??"(sin nombre)",category:Je.category??"(sin categora)",measurement:Je.measurement??"lb",price:Number(Je.price??0)})}),e(Pe);const De=Xt(At(Ue,"inventory_batches"),di("date","desc")),ze=await Qt(De),Ye=[];ze.forEach(dt=>{const Je=dt.data();Ye.push({id:dt.id,productId:Je.productId,productName:Je.productName,category:Je.category,unit:Je.unit,quantity:ws(Number(Je.quantity||0)),remaining:ws(Number(Je.remaining||0)),purchasePrice:Number(Je.purchasePrice||0),salePrice:Number(Je.salePrice||0),invoiceTotal:Number(Je.invoiceTotal||0),expectedTotal:Number(Je.expectedTotal??(Number(Je.quantity||0)*Number(Je.salePrice||0)||0)),date:Je.date,createdAt:Je.createdAt,status:Je.status,notes:Je.notes,paidAmount:Number(Je.paidAmount||0),paidAt:Je.paidAt})}),r(Ye),i(!1)})()},[]),L.useEffect(()=>{const pe=t.find(Pe=>Pe.id===B);pe&&V(Number(pe.price||0))},[B,t]),L.useEffect(()=>{Q(Math.floor(C*y*100)/100)},[C,y]),L.useEffect(()=>{S(Math.floor(C*R*100)/100)},[C,R]);const be=pe=>{const Pe=(pe||"").toLowerCase();return/(^|\s)(lb|lbs|libra|libras)(\s|$)/.test(Pe)||Pe==="lb"},Fe=L.useMemo(()=>n.filter(pe=>!(A&&pe.date<A||d&&pe.date>d||p&&pe.productId!==p)),[n,A,d,p]),ne=L.useMemo(()=>{const pe=Fe.reduce((St,yt)=>St+(yt.invoiceTotal||0),0),Pe=Fe.reduce((St,yt)=>St+(yt.expectedTotal||0),0);let De=0,ze=0,Ye=0,dt=0;for(const St of Fe)be(St.unit)?(De+=St.quantity,ze+=St.remaining):(Ye+=St.quantity,dt+=St.remaining);const Je=Fe.reduce((St,yt)=>St+yt.quantity,0),_t=Fe.reduce((St,yt)=>St+yt.remaining,0);return{lbsIng:De,lbsRem:ze,udsIng:Ye,udsRem:dt,qty:Je,rem:_t,totalFacturado:pe,totalEsperado:Pe}},[Fe]),ve=async pe=>{pe.preventDefault();const Pe=t.find(De=>De.id===B);if(!Pe||C<=0||y<=0){o("Completa producto, cantidad y costo.");return}try{const De=ws(C),ze=await tW({productId:Pe.id,productName:Pe.name,category:Pe.category,unit:Pe.measurement,quantity:De,purchasePrice:y,salePrice:R,invoiceTotal:I,expectedTotal:D,date:j,notes:_});r(Ye=>[{id:ze.id,productId:Pe.id,productName:Pe.name,category:Pe.category,unit:Pe.measurement,quantity:De,remaining:De,purchasePrice:y,salePrice:R,invoiceTotal:I,expectedTotal:D,date:j,createdAt:Ut.now(),status:"PENDIENTE",notes:_},...Ye]),o(" Lote creado"),b(""),w(0),N(0),V(Pe.price||0),Q(0),S(0),T("")}catch(De){console.error(De),o(" Error al crear lote")}},Re=async pe=>{confirm(`Marcar PAGADO el lote del ${pe.date} (${pe.productName})?`)&&(await N3(pe.id),r(De=>De.map(ze=>ze.id===pe.id?{...ze,status:"PAGADO"}:ze)))},Ce=pe=>{oe(pe.id),se(pe.date),Ae(ws(pe.quantity)),we(pe.purchasePrice),X(pe.salePrice),H(pe.notes||""),ue(Number((pe.quantity*pe.purchasePrice).toFixed(2))),ce(Number((pe.quantity*pe.salePrice).toFixed(2)))},re=()=>{oe(null),se(""),Ae(0),we(0),X(0),H(""),ue(0),ce(0)};L.useEffect(()=>{K&&ue(Math.floor(z*ee*100)/100)},[K,z,ee]),L.useEffect(()=>{K&&ce(Math.floor(z*k*100)/100)},[K,z,k]);const pt=async()=>{if(!K)return;const pe=n.find(Ye=>Ye.id===K);if(!pe)return;const Pe=ws(pe.quantity-pe.remaining),De=Math.max(0,ws(z-Pe)),ze=Nt(Ue,"inventory_batches",K);await $n(ze,{date:le,quantity:ws(z),purchasePrice:ee,salePrice:k,invoiceTotal:Y,expectedTotal:ie,notes:Z,remaining:De}),r(Ye=>Ye.map(dt=>dt.id===K?{...dt,date:le,quantity:ws(z),purchasePrice:ee,salePrice:k,invoiceTotal:Y,expectedTotal:ie,notes:Z,remaining:De}:dt)),re(),o(" Lote actualizado")},He=async pe=>{confirm(`Eliminar el lote del ${pe.date} (${pe.productName})?`)&&(await xs(Nt(Ue,"inventory_batches",pe.id)),r(De=>De.filter(ze=>ze.id!==pe.id)),o(" Lote eliminado"))},ke=()=>{const pe=(A?`Desde ${A}`:"Desde inicio")+"  "+(d?`Hasta ${d}`:"Hasta hoy"),Pe=Fe.map(Ye=>`
      <tr>
        <td>${Ye.date}</td>
        <td>${(Ye.category||"").toUpperCase()}</td>
        <td>${Ye.productName}</td>
        <td>${(Ye.unit||"").toUpperCase()}</td>
        <td style="text-align:right">${Ye.quantity.toFixed(3)}</td>
        <td style="text-align:right">${Ye.remaining.toFixed(3)}</td>
        <td style="text-align:right">${kr(Ye.purchasePrice)}</td>
        <td style="text-align:right">${kr(Ye.salePrice)}</td>
        <td style="text-align:right">${kr(Ye.invoiceTotal||0)}</td>
        <td style="text-align:right">${kr(Ye.expectedTotal||0)}</td>
        <td>${Ye.status}</td>
      </tr>`).join(""),De=`
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Inventario por Lotes</title>
 <style>
  * { font-family: Arial, sans-serif; }
  h1 { margin: 0 0 4px; }
  .muted { color: #555; font-size: 12px; margin-bottom: 12px; }

  table { width: 100%; border-collapse: collapse; font-size: 12px; }
  th, td { border: 1px solid #ddd; padding: 6px; }
  th { background: #f5f5f5; text-align: left; }

  .totals {
    margin: 10px 0 16px;
    font-size: 12px;
    display: grid;
    grid-template-columns: repeat(2, max-content);
    column-gap: 32px;
    row-gap: 6px;
    align-items: center;
  }
  .totals span {
    margin: 0;
    white-space: nowrap;
  }

  @media print {
    @page { size: A4 landscape; margin: 15mm; }
    button { display: none; }
  }
</style>

</head>

<body>
  <button onclick="window.print()">Imprimir</button>
  <h1>Inventario por Lotes</h1>
<div class="muted">${pe}</div>
<div class="totals">
  <span><strong>Libras ingresadas:</strong> ${ne.lbsIng.toFixed(3)}</span>
  <span><strong>Libras restantes:</strong> ${ne.lbsRem.toFixed(3)}</span>

  <span><strong>Unidades ingresadas:</strong> ${ne.udsIng.toFixed(3)}</span>
  <span><strong>Unidades restantes:</strong> ${ne.udsRem.toFixed(3)}</span>

  <span><strong>Total esperado a ganar:</strong> ${kr(ne.totalEsperado)}</span>
  <span><strong>Total facturado:</strong> ${kr(ne.totalFacturado)}</span>
  <span><strong>Ganancia sin gastos:</strong> ${kr(Number((ne.totalEsperado-ne.totalFacturado).toFixed(2)))}</span>
</div>

  <table>
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Tipo</th>
        <th>Producto</th>
        <th>Unidad</th>
        <th>Ingresado</th>
        <th>Restantes</th>
        <th>Precio Compra</th>
        <th>Precio Venta</th>
        <th>Total factura</th>
        <th>Total esperado</th>
        <th>Estado</th>
      </tr>
    </thead>
    <tbody>
      ${Pe||'<tr><td colspan="11" style="text-align:center">Sin lotes</td></tr>'}
    </tbody>
  </table>
</body>
</html>`,ze=window.open("","_blank");ze&&(ze.document.open(),ze.document.write(De),ze.document.close())};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Inventario Productos"}),l.jsxs("form",{onSubmit:ve,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:B,onChange:pe=>b(pe.target.value),children:[l.jsx("option",{value:"",children:"Selecciona un producto"}),t.map(pe=>l.jsxs("option",{value:pe.id,children:[pe.name,"  ",pe.category,"  ",pe.measurement,"  Precio:"," ",kr(pe.price)]},pe.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del lote"}),l.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:j,onChange:pe=>U(pe.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (Lo que esta ingresando)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:C===0?"":C,onChange:pe=>{const Pe=pe.target.value.replace(",","."),De=parseFloat(Pe),ze=Number.isFinite(De)?parseFloat(De.toFixed(3)):0;w(ze)},disabled:!B,placeholder:B?"":"Selecciona un producto primero",title:B?"":"Selecciona un producto para habilitar"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Precio de compra (compra)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:y===0?"":y,onChange:pe=>{const Pe=pe.target.value.replace(",","."),De=parseFloat(Pe),ze=Number.isFinite(De)?parseFloat(De.toFixed(2)):0;N(ze)},disabled:!B,placeholder:B?"":"Selecciona un producto primero",title:B?"":"Selecciona un producto para habilitar"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (venta)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:R===0?"":R,onChange:pe=>{const Pe=pe.target.value.replace(",","."),De=parseFloat(Pe),ze=Number.isFinite(De)?parseFloat(De.toFixed(2)):0;V(ze)},disabled:!B,placeholder:B?"":"Selecciona un producto primero",title:B?"":"Selecciona un producto para habilitar"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Total factura (auto)"}),l.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:kr(I),readOnly:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Total esperado (auto)"}),l.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:kr(D),readOnly:!0})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Notas"}),l.jsx("input",{className:"w-full border p-2 rounded",value:_,onChange:pe=>T(pe.target.value)})]}),l.jsx("div",{className:"md:col-span-2",children:l.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar lote"})})]}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:A,onChange:pe=>c(pe.target.value)})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:pe=>f(pe.target.value)})]}),l.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[l.jsx("label",{className:"font-semibold",children:"Producto"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:p,onChange:pe=>g(pe.target.value),children:[l.jsx("option",{value:"",children:"Todos"}),t.map(pe=>l.jsxs("option",{value:pe.id,children:[pe.name,"  ",pe.category]},pe.id))]})]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{c(""),f(""),g("")},children:"Quitar filtro"}),l.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:ke,children:"Imprimir PDF"})]}),l.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-base",children:l.jsxs("div",{className:"grid grid-cols-3 gap-y-2 gap-x-8",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",ne.lbsIng.toFixed(3)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",ne.udsIng.toFixed(3)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," C$"," ",ne.totalEsperado.toFixed(2)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",ne.lbsRem.toFixed(3)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",ne.udsRem.toFixed(3)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total facturado:"})," C$"," ",ne.totalFacturado.toFixed(2)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," C$"," ",(ne.totalEsperado-ne.totalFacturado).toFixed(2)]})]})}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Tipo"}),l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Unidad"}),l.jsx("th",{className:"p-2 border",children:"Ingresado"}),l.jsx("th",{className:"p-2 border",children:"Restantes"}),l.jsx("th",{className:"p-2 border",children:"Precio Compra"}),l.jsx("th",{className:"p-2 border",children:"Precio Venta"}),l.jsx("th",{className:"p-2 border",children:"Total factura"}),l.jsx("th",{className:"p-2 border",children:"Total esperado"}),l.jsx("th",{className:"p-2 border",children:"Total ganancia"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:s?l.jsx("tr",{children:l.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):Fe.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin lotes"})}):Fe.map(pe=>{const Pe=K===pe.id;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:Pe?l.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:le,onChange:De=>se(De.target.value)}):pe.date}),l.jsx("td",{className:"p-2 border",children:pe.category.toUpperCase()}),l.jsx("td",{className:"p-2 border",children:pe.productName}),l.jsx("td",{className:"p-2 border",children:pe.unit.toUpperCase()}),l.jsx("td",{className:"p-2 border",children:Pe?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(z)?"":z,onChange:De=>{const ze=De.target.value.replace(",","."),Ye=parseFloat(ze),dt=Number.isFinite(Ye)?parseFloat(Ye.toFixed(3)):0;Ae(Math.max(0,dt))}}):pe.quantity.toFixed(3)}),l.jsx("td",{className:"p-2 border",children:Pe?pe.remaining:pe.remaining.toFixed(3)}),l.jsx("td",{className:"p-2 border",children:Pe?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(ee)?"":ee,onChange:De=>{const ze=De.target.value.replace(",","."),Ye=parseFloat(ze),dt=Number.isFinite(Ye)?parseFloat(Ye.toFixed(2)):0;we(Math.max(0,dt))}}):kr(pe.purchasePrice)}),l.jsx("td",{className:"p-2 border",children:Pe?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(k)?"":k,onChange:De=>{const ze=De.target.value.replace(",","."),Ye=parseFloat(ze),dt=Number.isFinite(Ye)?parseFloat(Ye.toFixed(2)):0;X(Math.max(0,dt))}}):kr(pe.salePrice)}),l.jsx("td",{className:"p-2 border",children:kr(Pe?Y:pe.invoiceTotal||0)}),l.jsx("td",{className:"p-2 border",children:kr(Pe?ie:pe.expectedTotal||0)}),l.jsx("td",{className:"p-2 border",children:kr(Pe?ie-Y:(pe.expectedTotal||0)-(pe.invoiceTotal||0))}),l.jsx("td",{className:"p-2 border",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${pe.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:pe.status})}),l.jsx("td",{className:"flex space-x-2 justify-center",children:Pe?l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:pt,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:re,children:"Cancelar"})]}):l.jsxs(l.Fragment,{children:[pe.status==="PENDIENTE"&&l.jsx("button",{onClick:()=>Re(pe),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Pagar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Ce(pe),children:"Editar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>He(pe),children:"Borrar"})]})})]},pe.id)})})]})}),a&&l.jsx("p",{className:"mt-2 text-sm",children:a})]})}const ho=t=>`C$${(Number(t)||0).toFixed(2)}`;function wW(){const t=FV(new Date),[e,n]=L.useState(Jt(t,"yyyy-MM")),[r,s]=L.useState([]),[i,a]=L.useState(!1),[o,A]=L.useState(""),c=L.useRef(null),d=L.useMemo(()=>{const[C,w]=e.split("-").map(R=>parseInt(R,10)),y=Jt(Op(new Date(C,w-1,1)),"yyyy-MM-dd"),N=Jt(jp(new Date(C,w-1,1)),"yyyy-MM-dd");return{from:y,to:N}},[e]),f=async()=>{a(!0);try{const C=await nW(d.from,d.to),w=[];for(const y of C){const N=Nt(Ue,"inventory_batches",y.batchId),R=await Il(N);if(!R.exists())continue;const V=R.data();w.push({batchId:y.batchId,batchDate:y.batchDate,productName:y.productName,soldQty:Number(y.quantity||0),soldAmount:Number(y.amountCharged||0),status:V.status??"PENDIENTE",purchasePrice:Number(V.purchasePrice||0),salePrice:Number(V.salePrice||0),supplier:V.supplier})}s(w)}catch(C){console.error(C),A(" Error al cargar liquidaciones")}finally{a(!1)}};L.useEffect(()=>{f()},[e]);const p=async C=>{confirm("Marcar este lote como PAGADO?")&&(await N3(C),s(y=>y.map(N=>N.batchId===C?{...N,status:"PAGADO"}:N)))},g=L.useMemo(()=>{const C=r.reduce((R,V)=>R+V.soldQty,0),w=r.reduce((R,V)=>R+V.soldAmount,0),y=r.reduce((R,V)=>R+V.soldQty*V.purchasePrice,0),N=w-y;return{q:C,amt:w,cogs:y,profit:N}},[r]),B=L.useMemo(()=>{const C=new Map;for(const w of r){const y=w.productName||"(sin nombre)";C.has(y)||C.set(y,{productName:y,qty:0,revenue:0,cogs:0,profit:0});const N=C.get(y);N.qty+=w.soldQty,N.revenue+=w.soldAmount;const R=w.soldQty*w.purchasePrice;N.cogs+=R,N.profit=N.revenue-N.cogs}return Array.from(C.values()).sort((w,y)=>w.productName.localeCompare(y.productName))},[r]),b=async()=>{if(!c.current)return;const C=c.current;C.classList.add("force-pdf-colors");try{const[{default:w},{jsPDF:y}]=await Promise.all([To(()=>Promise.resolve().then(()=>hb),void 0),To(()=>Promise.resolve().then(()=>tB),void 0)]),R=(await w(C,{backgroundColor:"#ffffff",scale:2})).toDataURL("image/png"),V=new y("p","mm","a4"),j=190,U=V.getImageProperties(R),I=j,Q=U.height*I/U.width;V.addImage(R,"PNG",10,10,I,Q),V.save(`liquidaciones_${e}.pdf`)}catch(w){console.error(w),alert("No se pudo generar el PDF")}finally{C.classList.remove("force-pdf-colors")}};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Liquidaciones por lote"}),l.jsx("button",{onClick:b,className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:"Descargar PDF"})]}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-center gap-3",children:[l.jsx("label",{className:"text-sm font-semibold",children:"Mes:"}),l.jsx("input",{type:"month",className:"border rounded px-2 py-1",value:e,onChange:C=>n(C.target.value)}),l.jsx("button",{onClick:f,className:"bg-gray-800 text-white px-3 py-1 rounded",children:"Aplicar"})]}),l.jsxs("div",{ref:c,children:[l.jsx("div",{className:"bg-white p-3 rounded shadow border mb-3 text-sm",children:l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total vendido (cantidad):"})," ",g.q]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Monto vendido:"})," ",ho(g.amt)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Costo (COGS):"})," ",ho(g.cogs)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Utilidad:"})," ",ho(g.profit)]})]})}),l.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto mb-6",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Lote (fecha)"}),l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Proveedor"}),l.jsx("th",{className:"p-2 border",children:"Vendido"}),l.jsx("th",{className:"p-2 border",children:"Monto vendido"}),l.jsx("th",{className:"p-2 border",children:"COGS"}),l.jsx("th",{className:"p-2 border",children:"Utilidad"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:i?l.jsx("tr",{children:l.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando"})}):r.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin datos"})}):r.map(C=>{const w=C.soldQty*C.purchasePrice,y=C.soldAmount-w;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:C.batchDate}),l.jsx("td",{className:"p-2 border",children:C.productName}),l.jsx("td",{className:"p-2 border",children:C.supplier||"-"}),l.jsx("td",{className:"p-2 border",children:C.soldQty}),l.jsx("td",{className:"p-2 border",children:ho(C.soldAmount)}),l.jsx("td",{className:"p-2 border",children:ho(w)}),l.jsx("td",{className:`p-2 border ${y>=0?"text-green-700":"text-red-700"}`,children:ho(y)}),l.jsx("td",{className:"p-2 border",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${C.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:C.status})}),l.jsx("td",{className:"p-2 border",children:C.status==="PENDIENTE"&&l.jsx("button",{onClick:()=>p(C.batchId),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Marcar pagado"})})]},C.batchId)})})]})}),l.jsx("h3",{className:"font-semibold mb-2",children:"Utilidad por producto"}),l.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Cantidad vendida"}),l.jsx("th",{className:"p-2 border",children:"Ingreso"}),l.jsx("th",{className:"p-2 border",children:"COGS"}),l.jsx("th",{className:"p-2 border",children:"Utilidad"})]})}),l.jsx("tbody",{children:B.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin datos"})}):B.map(C=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:C.productName}),l.jsx("td",{className:"p-2 border",children:C.qty}),l.jsx("td",{className:"p-2 border",children:ho(C.revenue)}),l.jsx("td",{className:"p-2 border",children:ho(C.cogs)}),l.jsx("td",{className:`p-2 border ${C.profit>=0?"text-green-700":"text-red-700"}`,children:ho(C.profit)})]},C.productName))})]})})]}),o&&l.jsx("p",{className:"mt-2 text-sm",children:o})]})}const fo=t=>`C$${Number(t??0).toFixed(2)}`,vW=()=>Jt(new Date,"yyyy-MM-dd");function yW(){const[t,e]=L.useState(()=>{const p=new Date,g=new Date(p.getFullYear(),p.getMonth(),1);return Jt(g,"yyyy-MM-dd")}),[n,r]=L.useState(vW()),[s,i]=L.useState(!0),[a,o]=L.useState([]),[A,c]=L.useState([]);L.useEffect(()=>{(async()=>{i(!0);const g=Xt(At(Ue,"salesV2"),pn("date",">=",t),pn("date","<=",n)),B=await Qt(g),b=[];B.forEach(N=>{const R=N.data();b.push({id:N.id,date:R.date??"",productName:R.productName??"(sin nombre)",quantity:Number(R.quantity??0),amount:Number(R.amount??R.amountCharged??0),allocations:Array.isArray(R.allocations)?R.allocations:[],avgUnitCost:Number(R.avgUnitCost??0)})}),o(b);const C=Xt(At(Ue,"expenses"),pn("date",">=",t),pn("date","<=",n)),w=await Qt(C),y=[];w.forEach(N=>{const R=N.data();y.push({id:N.id,date:R.date??"",category:R.category??"(sin categora)",description:R.description??"",amount:Number(R.amount??0),status:R.status??"PAGADO",createdAt:R.createdAt})}),c(y),i(!1)})()},[t,n]);const d=L.useMemo(()=>{const p=a.reduce((w,y)=>w+(y.amount||0),0);let g=0;a.forEach(w=>{if(w.allocations&&w.allocations.length>0){const y=w.allocations.reduce((N,R)=>N+Number(R.lineCost||0),0);g+=y}else w.avgUnitCost&&w.quantity&&(g+=Number(w.avgUnitCost)*Number(w.quantity))});const B=p-g,b=A.reduce((w,y)=>w+(y.amount||0),0),C=B-b;return{revenue:p,cogsReal:g,grossProfit:B,expensesSum:b,netProfit:C}},[a,A]),f=L.useMemo(()=>{var g;const p=new Map;for(const B of a){const b=B.productName||"(sin nombre)";p.has(b)||p.set(b,{productName:b,units:0,revenue:0,cogs:0,profit:0});const C=p.get(b);C.units+=Number(B.quantity||0),C.revenue+=Number(B.amount||0);let w=0;(g=B.allocations)!=null&&g.length?w=B.allocations.reduce((y,N)=>y+Number(N.lineCost||0),0):B.avgUnitCost&&(w=Number(B.avgUnitCost)*Number(B.quantity||0)),C.cogs+=w,C.profit=C.revenue-C.cogs}return Array.from(p.values()).sort((B,b)=>B.productName.localeCompare(b.productName))},[a]);return l.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded shadow ",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Finanzas"}),l.jsxs("div",{className:"flex flex-wrap items-end gap-2 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-3 py-2",value:t,onChange:p=>e(p.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-3 py-2",value:n,onChange:p=>r(p.target.value)})]})]}),s?l.jsx("p",{children:"Cargando"}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 mb-6 text-3xl font-bold",children:[l.jsx(kh,{title:"Ventas Totales",value:fo(d.revenue)}),l.jsx(kh,{title:"Costo de Mercaderia",value:fo(d.cogsReal)}),l.jsx(kh,{title:"Ganancia antes de Gastos",value:fo(d.grossProfit),positive:!0}),l.jsx(kh,{title:"Gastos del Negocio",value:fo(d.expensesSum)}),l.jsx(kh,{title:"Ganancia despues de Gastos",value:fo(d.netProfit),positive:!0})]}),l.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),l.jsxs("table",{className:"min-w-full border text-sm mb-6",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Producto"}),l.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),l.jsx("th",{className:"border p-2",children:"Ingreso"}),l.jsx("th",{className:"border p-2",children:"Costo"}),l.jsx("th",{className:"border p-2",children:"Utilidad"})]})}),l.jsxs("tbody",{children:[f.map(p=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:p.productName}),l.jsx("td",{className:"border p-1",children:p.units}),l.jsx("td",{className:"border p-1",children:fo(p.revenue)}),l.jsx("td",{className:"border p-1",children:fo(p.cogs)}),l.jsx("td",{className:`border p-1 ${p.profit>=0?"text-green-700":"text-red-700"}`,children:fo(p.profit)})]},p.productName)),f.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-3 text-center text-gray-500",children:"Sin datos en el rango seleccionado."})})]})]}),l.jsx("h3",{className:"font-semibold mb-2",children:"Gastos del periodo"}),l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Fecha"}),l.jsx("th",{className:"border p-2",children:"Categora"}),l.jsx("th",{className:"border p-2",children:"Descripcin"}),l.jsx("th",{className:"border p-2",children:"Monto"}),l.jsx("th",{className:"border p-2",children:"Estado"})]})}),l.jsxs("tbody",{children:[A.map(p=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:p.date}),l.jsx("td",{className:"border p-1",children:p.category}),l.jsx("td",{className:"border p-1",children:p.description}),l.jsx("td",{className:"border p-1",children:fo(p.amount)}),l.jsx("td",{className:"border p-1",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${p.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:p.status})})]},p.id)),A.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-3 text-center text-gray-500",children:"Sin gastos en el rango seleccionado."})})]})]})]})]})}function kh({title:t,value:e,positive:n}){return l.jsxs("div",{className:"border rounded-lg p-3",children:[l.jsx("div",{className:"text-xs text-gray-500",children:t}),l.jsx("div",{className:`text-xl font-bold ${n?"text-green-700":""}`,children:e})]})}const BW=t=>`C$${Number(t??0).toFixed(2)}`;function xW(){const[t,e]=L.useState([]),[n,r]=L.useState(!0),[s,i]=L.useState(Jt(new Date,"yyyy-MM-dd")),[a,o]=L.useState("Varios"),[A,c]=L.useState(""),[d,f]=L.useState(0),[p,g]=L.useState("PENDIENTE"),[B,b]=L.useState(""),[C,w]=L.useState(null),[y,N]=L.useState(""),[R,V]=L.useState(""),[j,U]=L.useState(""),[I,Q]=L.useState(0),D=async()=>{const se=Xt(At(Ue,"expenses"),di("createdAt","desc")),z=await Qt(se),Ae=[];z.forEach(ee=>Ae.push({id:ee.id,...ee.data()})),e(Ae)};L.useEffect(()=>{(async()=>(r(!0),await D(),r(!1)))()},[]);const S=async()=>{try{await is(At(Ue,"expenses"),{date:s,category:a,description:A,amount:Number(d)||0,status:p,createdAt:Ut.now()}),b(" Gasto registrado."),i(Jt(new Date,"yyyy-MM-dd")),o("Varios"),c(""),f(0),g("PENDIENTE"),await D()}catch(se){console.error(se),b(" No se pudo registrar el gasto.")}},_=async se=>{confirm("Eliminar gasto?")&&(await xs(Nt(Ue,"expenses",se)),e(z=>z.filter(Ae=>Ae.id!==se)))},T=async se=>{if(se.status==="PAGADO")return;const z=Nt(Ue,"expenses",se.id);await $n(z,{status:"PAGADO",paidAt:Ut.now()}),e(Ae=>Ae.map(ee=>ee.id===se.id?{...ee,status:"PAGADO",paidAt:Ut.now()}:ee))},K=se=>{w(se.id),N(se.date||""),V(se.category||"Varios"),U(se.description||""),Q(Number(se.amount||0))},oe=()=>{w(null),N(""),V("Varios"),U(""),Q(0)},le=async()=>{if(!C)return;const se=Nt(Ue,"expenses",C);await $n(se,{date:y,category:R,description:j,amount:Number(I)||0}),e(z=>z.map(Ae=>Ae.id===C?{...Ae,date:y,category:R,description:j,amount:Number(I)||0}:Ae)),oe()};return l.jsxs("div",{className:"max-w-4xl mx-auto bg-white p-6 rounded shadow",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Gastos"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-2 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Fecha"}),l.jsx("input",{type:"date",className:"border rounded px-3 py-2 w-full",value:s,onChange:se=>i(se.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Categora"}),l.jsx("input",{className:"border rounded px-3 py-2 w-full",value:a,onChange:se=>o(se.target.value)})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Descripcin"}),l.jsx("input",{className:"border rounded px-3 py-2 w-full",value:A,onChange:se=>c(se.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Monto"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"border rounded px-3 py-2 w-full",onKeyDown:se=>{se.key===","&&(se.preventDefault(),se.target.value+=".")},value:d===0?"":d,onChange:se=>f(parseFloat((se.target.value||"0").replace(",",".")))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Estado"}),l.jsxs("select",{className:"border rounded px-3 py-2 w-full",value:p,onChange:se=>g(se.target.value),children:[l.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),l.jsx("option",{value:"PAGADO",children:"Pagado"})]})]})]}),l.jsx("button",{onClick:S,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Registrar gasto"}),B&&l.jsx("p",{className:"mt-2 text-sm",children:B}),l.jsx("h3",{className:"font-semibold mt-6 mb-2",children:"Listado"}),n?l.jsx("p",{children:"Cargando"}):l.jsxs("table",{className:"min-w-full border text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border p-2",children:"Fecha"}),l.jsx("th",{className:"border p-2",children:"Categora"}),l.jsx("th",{className:"border p-2",children:"Descripcin"}),l.jsx("th",{className:"border p-2",children:"Monto"}),l.jsx("th",{className:"border p-2",children:"Estado"}),l.jsx("th",{className:"border p-2",children:"Acciones"})]})}),l.jsxs("tbody",{children:[t.map(se=>{const z=C===se.id;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"border p-1",children:z?l.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:y,onChange:Ae=>N(Ae.target.value)}):se.date}),l.jsx("td",{className:"border p-1",children:z?l.jsx("input",{className:"border rounded px-2 py-1 w-full",value:R,onChange:Ae=>V(Ae.target.value)}):se.category}),l.jsx("td",{className:"border p-1",children:z?l.jsx("input",{className:"border rounded px-2 py-1 w-full",value:j,onChange:Ae=>U(Ae.target.value)}):se.description}),l.jsx("td",{className:"border p-1",children:z?l.jsx("input",{type:"number",step:"0.01",className:"border rounded px-2 py-1 w-full text-right",value:Number.isNaN(I)?"":I,onChange:Ae=>Q(parseFloat(Ae.target.value||"0"))}):BW(se.amount)}),l.jsx("td",{className:"border p-1",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${se.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:se.status})}),l.jsx("td",{className:"border p-1 space-x-1",children:z?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:le,className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",children:"Guardar"}),l.jsx("button",{onClick:oe,className:"text-xs bg-gray-200 px-2 py-1 rounded hover:bg-gray-300",children:"Cancelar"})]}):l.jsxs(l.Fragment,{children:[se.status==="PENDIENTE"&&l.jsx("button",{onClick:()=>T(se),className:"text-xs bg-green-600 text-white px-2 py-1 rounded hover:bg-green-700",children:"Pagar"}),l.jsx("button",{onClick:()=>K(se),className:"text-xs bg-yellow-600 text-white px-2 py-1 rounded hover:bg-yellow-700",children:"Editar"}),l.jsx("button",{onClick:()=>_(se.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]})})]},se.id)}),t.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Sin gastos an."})})]})]})]})}function X0(t){return(t||"").trim().toLowerCase()}async function F3(){const t=await Qt(At(Ue,"products")),e=new Map;return t.forEach(n=>{const r=n.data(),s=X0(r.name??r.productName);s&&e.set(s,n.id)}),e}async function bW(t=!1){const e=await F3(),n=await Qt(At(Ue,"inventory_batches")),r={checked:0,fixed:0,alreadyOk:0,missingName:0,withoutMatch:0,details:[]};for(const s of n.docs){r.checked++;const i=s.data(),a=X0(i.productName);if(!a){r.missingName++,r.details.push({batchId:s.id,productName:i.productName??"",oldProductId:i.productId,status:"missingName"});continue}const o=e.get(a);if(!o){r.withoutMatch++,r.details.push({batchId:s.id,productName:i.productName??"",oldProductId:i.productId,status:"withoutMatch"});continue}if(i.productId===o){r.alreadyOk++,r.details.push({batchId:s.id,productName:i.productName??"",oldProductId:i.productId,newProductId:o,status:"alreadyOk"});continue}t||await $n(Nt(Ue,"inventory_batches",s.id),{productId:o}),r.fixed++,r.details.push({batchId:s.id,productName:i.productName??"",oldProductId:i.productId,newProductId:o,status:"fixed"})}return console.group("[fixAllBatchProductIds] Resultado"),console.log("checked:",r.checked),console.log("fixed:",r.fixed),console.log("alreadyOk:",r.alreadyOk),console.log("missingName:",r.missingName),console.log("withoutMatch:",r.withoutMatch),console.groupEnd(),r}async function CW(t,e=!1){const n=X0(t),s=(await F3()).get(n);if(!s)throw new Error(`No existe un producto activo con nombre "${t}".`);const i=await Qt(At(Ue,"inventory_batches"));let a=0;for(const o of i.docs){const A=o.data();X0(A.productName)===n&&A.productId!==s&&(e||await $n(Nt(Ue,"inventory_batches",o.id),{productId:s}),a++)}return console.log(`[fixBatchesByProductName] "${t}" fixed: ${a} lote(s)`),a}function EW(){const[t,e]=L.useState(!1),[n,r]=L.useState(""),s=async()=>{try{e(!0),r("");const A=await bW(!1);r(` Hecho. Revisados: ${A.checked}, Corregidos: ${A.fixed}, Ok: ${A.alreadyOk}, Sin nombre: ${A.missingName}, Sin match: ${A.withoutMatch}. (Mira consola para detalles)`)}catch(A){r(" Error: "+((A==null?void 0:A.message)||A))}finally{e(!1)}},[i,a]=L.useState(""),o=async()=>{if(!i.trim()){r(" Escribe el nombre del producto.");return}try{e(!0),r("");const A=await CW(i.trim(),!1);r(` Hecho. Corregidos ${A} lote(s) para "${i}".`)}catch(A){r(" Error: "+((A==null?void 0:A.message)||A))}finally{e(!1)}};return l.jsxs("div",{className:"max-w-xl mx-auto bg-white p-6 rounded shadow border space-y-4",children:[l.jsx("h1",{className:"text-xl font-bold",children:"Herramienta de Migracin de Lotes"}),l.jsxs("p",{className:"text-sm text-gray-600",children:["Corrige los ",l.jsx("code",{children:"inventory_batches.productId"})," basndose en el nombre del producto. salo una sola vez para limpiar datos viejos. Revisa la consola para un log detallado."]}),l.jsx("div",{className:"space-y-2",children:l.jsx("button",{onClick:s,disabled:t,className:"bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo":"Corregir TODOS los lotes"})}),l.jsx("hr",{}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-sm font-medium",children:"Corregir por nombre:"}),l.jsx("input",{className:"border p-2 rounded w-full",placeholder:'Ej: "Pierna Entera"',value:i,onChange:A=>a(A.target.value)}),l.jsx("button",{onClick:o,disabled:t,className:"bg-indigo-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo":"Corregir lotes de ese producto"})]}),n&&l.jsx("p",{className:"text-sm",children:n})]})}const po=t=>`C$ ${Number(t||0).toFixed(2)}`,Dh=t=>Number(t||0).toFixed(3);function _W(){var f,p,g,B,b;const[t,e]=L.useState([]),[n,r]=L.useState(!0),[s,i]=L.useState(null),a=L.useRef(null);L.useEffect(()=>{(async()=>{r(!0);const C=Xt(At(Ue,"invoices"),di("date","desc")),w=await Qt(C),y=[];w.forEach(N=>{const R=N.data();y.push({id:N.id,...R,batches:R.batches||[],expenses:R.expenses||[],totals:R.totals||{lbs:R.totalLbs||0,units:R.totalUnits||0,amount:R.totalAmount||0,expenses:R.totalExpenses||0,finalAmount:R.finalAmount||0}})}),e(y),r(!1)})()},[]);const o=async C=>{const w=C.status==="PAGADA"?"PENDIENTE":"PAGADA";await $n(Nt(Ue,"invoices",C.id),{status:w}),e(y=>y.map(N=>N.id===C.id?{...N,status:w}:N)),(s==null?void 0:s.id)===C.id&&i({...C,status:w})},A=async C=>{if(window.confirm(`Eliminar factura del ${C.date}?`))try{const w=Nt(Ue,"invoices",C.id),y=await Il(w),N=y.exists()?y.data():null,R=Ww(Ue),V=(N==null?void 0:N.batches)||[];for(const j of V){const U=j.batchId||j.id;if(!U)continue;const I=Nt(Ue,"inventory_batches",U);R.update(I,{invoiceId:null,invoiceNumber:null,invoiceTotal:null})}R.delete(w),await R.commit(),e(j=>j.filter(U=>U.id!==C.id)),(s==null?void 0:s.id)===C.id&&i(null)}catch(w){console.error(w),alert("No se pudo eliminar la factura por completo.")}},c=async()=>{if(!a.current||!s)return;const C=a.current,w=await db(C,{backgroundColor:"#ffffff"}),y=w.toDataURL("image/png"),N=new Ft("p","mm","a4"),R=N.internal.pageSize.getWidth(),V=w.height*R/w.width;N.addImage(y,"PNG",0,0,R,V),N.save(`factura_${s.number||s.date}.pdf`)},d=C=>C.totals||{lbs:C.totalLbs||0,units:C.totalUnits||0,amount:C.totalAmount||0,expenses:C.totalExpenses||0,finalAmount:C.finalAmount||0};return l.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded shadow",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Facturacin"}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-4",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"N factura"}),l.jsx("th",{className:"p-2 border",children:"Descripcin"}),l.jsx("th",{className:"p-2 border",children:"Libras"}),l.jsx("th",{className:"p-2 border",children:"Unidades"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Gastos"}),l.jsx("th",{className:"p-2 border",children:"Monto final"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:n?l.jsx("tr",{children:l.jsx("td",{colSpan:10,className:"p-4 text-center",children:"Cargando"})}):t.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:10,className:"p-4 text-center",children:"Sin facturas"})}):t.map(C=>{const w=d(C);return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:C.date}),l.jsx("td",{className:"p-2 border",children:C.number||""}),l.jsx("td",{className:"p-2 border",children:C.description||""}),l.jsx("td",{className:"p-2 border",children:Dh(w.lbs)}),l.jsx("td",{className:"p-2 border",children:Dh(w.units)}),l.jsx("td",{className:"p-2 border",children:po(w.amount)}),l.jsx("td",{className:"p-2 border",children:po(w.expenses)}),l.jsx("td",{className:"p-2 border",children:po(w.finalAmount)}),l.jsx("td",{className:"p-2 border",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${C.status==="PAGADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:C.status})}),l.jsx("td",{className:"p-2 border",children:l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx("button",{className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",onClick:()=>i(C),children:"Ver"}),l.jsx("button",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",onClick:()=>o(C),children:C.status==="PAGADA"?"Marcar PENDIENTE":"Marcar PAGADA"}),l.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>A(C),children:"Eliminar"})]})})]},C.id)})})]})}),s&&l.jsxs("div",{ref:a,className:"bg-white p-4 rounded shadow border",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsxs("h3",{className:"text-lg font-semibold",children:["Detalle ",s.date," ",s.number?` ${s.number}`:""]}),l.jsx("button",{className:"ml-auto px-3 py-1 border rounded",onClick:()=>i(null),children:"Cerrar"}),l.jsx("button",{onClick:c,className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 text-sm",children:"Imprimir PDF"})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm mb-3",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Estado:"})," ",s.status]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Libras:"})," ",Dh(((f=s.totals)==null?void 0:f.lbs)||0)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades:"})," ",Dh(((p=s.totals)==null?void 0:p.units)||0)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Monto:"})," ",po(((g=s.totals)==null?void 0:g.amount)||0)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Gastos:"})," ",po(((B=s.totals)==null?void 0:B.expenses)||0)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Monto final:"})," ",po(((b=s.totals)==null?void 0:b.finalAmount)||0)]})]}),l.jsx("h4",{className:"font-semibold mb-1",children:"Lotes"}),l.jsxs("table",{className:"min-w-full text-sm mb-4",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Unidad"}),l.jsx("th",{className:"p-2 border",children:"Cantidad"}),l.jsx("th",{className:"p-2 border",children:"Precio venta"}),l.jsx("th",{className:"p-2 border",children:"Total esperado"})]})}),l.jsx("tbody",{children:s.batches&&s.batches.length>0?s.batches.map((C,w)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:C.productName||"(sin nombre)"}),l.jsx("td",{className:"p-2 border",children:(C.unit||"").toUpperCase()}),l.jsx("td",{className:"p-2 border",children:Dh(C.quantity)}),l.jsx("td",{className:"p-2 border",children:po(C.salePrice)}),l.jsx("td",{className:"p-2 border",children:po(C.amount)})]},w)):l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-3 text-center text-gray-500",children:"Sin items"})})})]}),l.jsx("h4",{className:"font-semibold mb-1",children:"Gastos"}),l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Descripcin"}),l.jsx("th",{className:"p-2 border",children:"Monto"})]})}),l.jsx("tbody",{children:s.expenses&&s.expenses.length>0?s.expenses.map((C,w)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:C.date}),l.jsx("td",{className:"p-2 border",children:C.description}),l.jsx("td",{className:"p-2 border",children:po(C.amount)})]},w)):l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500",children:"Sin gastos"})})})]})]})]})}const Uu=t=>`C$${Number(t||0).toFixed(2)}`,qy=t=>Number(t||0).toFixed(3),IW=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase());function NW({paidBatches:t=[],onClose:e,onCreated:n}){const r=Array.isArray(t)?t:[],[s,i]=L.useState(Jt(new Date,"yyyy-MM-dd")),[a,o]=L.useState(()=>`FAC-${Date.now().toString().slice(-6)}`),[A,c]=L.useState(""),[d,f]=L.useState(r.map(_=>_.id)),[p,g]=L.useState([]),[B,b]=L.useState([]),[C,w]=L.useState(!1),[y,N]=L.useState(!1),[R,V]=L.useState("");L.useEffect(()=>{(async()=>{try{w(!0);const _=Xt(At(Ue,"expenses"),di("date","desc")),T=await Qt(_),K=[];T.forEach(oe=>{const le=oe.data();K.push({id:oe.id,date:le.date,description:le.description,amount:Number(le.amount||0)})}),g(K)}catch(_){console.error(_)}finally{w(!1)}})()},[]);const j=L.useMemo(()=>r.filter(_=>d.includes(_.id)),[r,d]),U=L.useMemo(()=>{let _=0,T=0,K=0;for(const se of j){IW(se.unit)?_+=Number(se.quantity||0):T+=Number(se.quantity||0);const z=se.expectedTotal??Number((Number(se.quantity||0)*Number(se.salePrice||0)).toFixed(2));K+=Number(z||0)}const oe=p.filter(se=>B.includes(se.id)).reduce((se,z)=>se+Number(z.amount||0),0),le=K-oe;return{totalLbs:_,totalUnits:T,totalAmount:K,totalGastos:oe,finalAmount:le}},[j,p,B]),I=(_,T)=>{f(K=>T?[...new Set([...K,_])]:K.filter(oe=>oe!==_))},Q=(_,T)=>{b(K=>T?[...new Set([...K,_])]:K.filter(oe=>oe!==_))},D=_=>{f(_?r.map(T=>T.id):[])},S=async()=>{if(V(""),j.length===0){V("Selecciona al menos 1 lote pagado.");return}try{N(!0);const _={number:a.trim(),date:s,description:A.trim(),status:"PENDIENTE",createdAt:Ut.now(),totalLbs:Number(U.totalLbs.toFixed(3)),totalUnits:Number(U.totalUnits.toFixed(3)),totalAmount:Number(U.totalAmount.toFixed(2)),totalExpenses:Number(U.totalGastos.toFixed(2)),finalAmount:Number(U.finalAmount.toFixed(2)),batches:j.map(T=>{var K;return{id:T.id,productId:T.productId,productName:T.productName,unit:T.unit,quantity:Number(Number(T.quantity||0).toFixed(3)),salePrice:Number(Number(T.salePrice||0).toFixed(2)),amount:Number((Number(T.quantity||0)*Number(T.salePrice||0)).toFixed(2)),batchDate:T.date,paidAt:(K=T.paidAt)!=null&&K.toDate?Jt(T.paidAt.toDate(),"yyyy-MM-dd"):null}}),expenses:p.filter(T=>B.includes(T.id)).map(T=>({id:T.id,date:T.date||null,description:T.description||"",amount:Number(Number(T.amount||0).toFixed(2))}))};await is(At(Ue,"invoices"),_),V(" Factura creada."),n()}catch(_){console.error(_),V(` Error al crear factura: ${(_==null?void 0:_.message)||"desconocido"}`)}finally{N(!1)}};return l.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/40 flex items-center justify-center p-3",children:l.jsxs("div",{className:"bg-white w-full max-w-5xl rounded-xl shadow-xl p-4 md:p-6 max-h-[90vh] overflow-auto",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Crear factura"}),l.jsx("button",{onClick:e,className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",children:"Cerrar"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium",children:"Fecha"}),l.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:s,onChange:_=>i(_.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium",children:"Nmero"}),l.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:a,onChange:_=>o(_.target.value),placeholder:"FAC-001"})]}),l.jsxs("div",{className:"md:col-span-1",children:[l.jsx("label",{className:"block text-sm font-medium",children:"Descripcin"}),l.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:A,onChange:_=>c(_.target.value),placeholder:"Comentarios de la factura"})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("h4",{className:"font-semibold",children:"Lotes pagados"}),l.jsxs("label",{className:"text-sm flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",checked:r.length>0&&d.length===r.length,onChange:_=>D(_.target.checked)}),"Seleccionar todos"]})]}),r.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"No hay lotes pagados disponibles en el filtro actual."}):l.jsx("div",{className:"border rounded",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Sel"}),l.jsx("th",{className:"p-2 border",children:"Fecha lote"}),l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Unidad"}),l.jsx("th",{className:"p-2 border",children:"Cantidad"}),l.jsx("th",{className:"p-2 border",children:"Precio venta"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Fecha pago"})]})}),l.jsx("tbody",{children:r.map(_=>{var oe;const T=d.includes(_.id),K=_.expectedTotal??Number((Number(_.quantity||0)*Number(_.salePrice||0)).toFixed(2));return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:l.jsx("input",{type:"checkbox",checked:T,onChange:le=>I(_.id,le.target.checked)})}),l.jsx("td",{className:"p-2 border",children:_.date}),l.jsx("td",{className:"p-2 border",children:_.productName}),l.jsx("td",{className:"p-2 border",children:(_.unit||"").toUpperCase()}),l.jsx("td",{className:"p-2 border",children:qy(_.quantity)}),l.jsx("td",{className:"p-2 border",children:Uu(_.salePrice)}),l.jsx("td",{className:"p-2 border",children:Uu(K)}),l.jsx("td",{className:"p-2 border",children:(oe=_.paidAt)!=null&&oe.toDate?Jt(_.paidAt.toDate(),"yyyy-MM-dd"):""})]},_.id)})})]})})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("h4",{className:"font-semibold",children:"Gastos a incluir (opcional)"}),C&&l.jsx("span",{className:"text-xs text-gray-500",children:"Cargando"})]}),p.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"No hay gastos registrados o no estn disponibles."}):l.jsx("div",{className:"border rounded max-h-48 overflow-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Sel"}),l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Descripcin"}),l.jsx("th",{className:"p-2 border",children:"Monto"})]})}),l.jsx("tbody",{children:p.map(_=>{const T=B.includes(_.id);return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:l.jsx("input",{type:"checkbox",checked:T,onChange:K=>Q(_.id,K.target.checked)})}),l.jsx("td",{className:"p-2 border",children:_.date||""}),l.jsx("td",{className:"p-2 border",children:_.description||""}),l.jsx("td",{className:"p-2 border",children:Uu(Number(_.amount||0))})]},_.id)})})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-sm mb-4",children:[l.jsxs("div",{children:["Total libras: ",l.jsx("strong",{children:qy(U.totalLbs)})]}),l.jsxs("div",{children:["Total unidades: ",l.jsx("strong",{children:qy(U.totalUnits)})]}),l.jsxs("div",{children:["Total monto: ",l.jsx("strong",{children:Uu(U.totalAmount)})]}),l.jsxs("div",{children:["Total gastos: ",l.jsx("strong",{children:Uu(U.totalGastos)})]}),l.jsxs("div",{className:"md:col-span-2",children:["Monto final (monto - gastos):"," ",l.jsx("strong",{children:Uu(U.finalAmount)})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{disabled:y,onClick:S,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",children:y?"Creando":"Crear factura"}),l.jsx("button",{onClick:e,className:"px-4 py-2 border rounded",children:"Cancelar"}),R&&l.jsx("span",{className:"text-sm ml-2",children:R})]})]})})}const Xl=t=>`C$ ${Number(t||0).toFixed(2)}`,Qu=t=>Number(t||0).toFixed(3),SW=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase());function FW(){const[t,e]=L.useState([]),[n,r]=L.useState(!0),[s,i]=L.useState(Jt(new Date(new Date().getFullYear(),new Date().getMonth(),1),"yyyy-MM-dd")),[a,o]=L.useState(Jt(new Date,"yyyy-MM-dd")),[A,c]=L.useState(""),[d,f]=L.useState(!1);L.useEffect(()=>{(async()=>{r(!0);const C=Xt(At(Ue,"inventory_batches"),pn("status","==","PAGADO"),di("date","desc")),w=await Qt(C),y=[];w.forEach(N=>{const R=N.data();y.push({id:N.id,productId:R.productId,productName:R.productName,category:R.category,unit:R.unit,quantity:Number(R.quantity||0),remaining:Number(R.remaining||0),purchasePrice:Number(R.purchasePrice||0),salePrice:Number(R.salePrice||0),invoiceTotal:Number(R.invoiceTotal||0),expectedTotal:Number(R.expectedTotal||Number(R.quantity||0)*Number(R.salePrice||0)),date:R.date,status:R.status,paidAt:R.paidAt})}),e(y),r(!1)})()},[]);const p=L.useMemo(()=>t.filter(C=>!(s&&C.date<s||a&&C.date>a||A&&C.productId!==A)),[t,s,a,A]),g=L.useMemo(()=>{let C=0,w=0,y=0,N=0,R=0,V=0;for(const j of p)SW(j.unit)?(C+=j.quantity,w+=j.remaining):(y+=j.quantity,N+=j.remaining),R+=Number(j.expectedTotal||0),V+=Number(j.invoiceTotal||0);return{lbsIng:C,lbsRem:w,udsIng:y,udsRem:N,totalEsperado:R,totalFact:V,gross:R-V}},[p]),B=async C=>{window.confirm(`Marcar PENDIENTE el lote ${C.productName} (${C.date})?`)&&(await $n(Nt(Ue,"inventory_batches",C.id),{status:"PENDIENTE"}),e(w=>w.map(y=>y.id===C.id?{...y,status:"PENDIENTE"}:y)))},b=L.useMemo(()=>{const C=new Map;return t.forEach(w=>C.set(w.productId,{id:w.productId,name:w.productName})),Array.from(C.values())},[t]);return l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Inventarios Pagados"}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:s,onChange:C=>i(C.target.value)})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:C=>o(C.target.value)})]}),l.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[l.jsx("label",{className:"font-semibold",children:"Producto"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:A,onChange:C=>c(C.target.value),children:[l.jsx("option",{value:"",children:"Todos"}),b.map(C=>l.jsx("option",{value:C.id,children:C.name},C.id))]})]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{i(""),o(""),c("")},children:"Quitar filtro"}),l.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>f(!0),children:"Crear factura"})]}),l.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-base",children:l.jsxs("div",{className:"grid grid-cols-3 gap-y-2 gap-x-8",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",Qu(g.lbsIng)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",Qu(g.udsIng)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",Xl(g.totalEsperado)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",Qu(g.lbsRem)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",Qu(g.udsRem)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",Xl(g.totalFact)]}),l.jsxs("div",{className:"col-span-3",children:[l.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",Xl(g.gross)]})]})}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Tipo"}),l.jsx("th",{className:"p-2 border",children:"Producto"}),l.jsx("th",{className:"p-2 border",children:"Unidad"}),l.jsx("th",{className:"p-2 border",children:"Ingresado"}),l.jsx("th",{className:"p-2 border",children:"Restantes"}),l.jsx("th",{className:"p-2 border",children:"Precio Compra"}),l.jsx("th",{className:"p-2 border",children:"Precio Venta"}),l.jsx("th",{className:"p-2 border",children:"Total factura"}),l.jsx("th",{className:"p-2 border",children:"Total esperado"}),l.jsx("th",{className:"p-2 border",children:"Fecha pago"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:n?l.jsx("tr",{children:l.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):p.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin lotes pagados"})}):p.map(C=>{var w;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:C.date}),l.jsx("td",{className:"p-2 border",children:(C.category||"").toUpperCase()}),l.jsx("td",{className:"p-2 border",children:C.productName}),l.jsx("td",{className:"p-2 border",children:(C.unit||"").toUpperCase()}),l.jsx("td",{className:"p-2 border",children:Qu(C.quantity)}),l.jsx("td",{className:"p-2 border",children:Qu(C.remaining)}),l.jsx("td",{className:"p-2 border",children:Xl(C.purchasePrice)}),l.jsx("td",{className:"p-2 border",children:Xl(C.salePrice)}),l.jsx("td",{className:"p-2 border",children:Xl(C.invoiceTotal||0)}),l.jsx("td",{className:"p-2 border",children:Xl(C.expectedTotal||0)}),l.jsx("td",{className:"p-2 border",children:(w=C.paidAt)!=null&&w.toDate?Jt(C.paidAt.toDate(),"yyyy-MM-dd"):""}),l.jsx("td",{className:"p-2 border",children:l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>B(C),children:"Marcar PENDIENTE"})})]},C.id)})})]})}),d&&l.jsx(NW,{paidBatches:p,onClose:()=>f(!1),onCreated:()=>f(!1)})]})}const Dr=t=>`C$ ${(Number(t)||0).toFixed(2)}`,TW=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function hg(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function UW(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function QW(t){const e="ROP",n=hg(t.subcat).slice(0,3)||"GEN",r=UW(t.gender),s=hg(t.color).slice(0,3)||"COL",i=hg(t.size)||"TLL",a=hg(t.brand).slice(0,4)||"BRD",o=Date.now().toString(36).toUpperCase().slice(-4);return`${e}-${n}-${r}-${s}-${i}-${a}-${o}`}const jh=/^[A-Za-z0-9._-]{0,32}$/;function PW(){const[t,e]=L.useState([]),[n,r]=L.useState([]),[s,i]=L.useState(!0),[a,o]=L.useState(""),[A,c]=L.useState(Jt(Op(new Date),"yyyy-MM-dd")),[d,f]=L.useState(Jt(jp(new Date),"yyyy-MM-dd")),[p,g]=L.useState(""),[B,b]=L.useState(""),[C,w]=L.useState(Jt(new Date,"yyyy-MM-dd")),[y,N]=L.useState(0),[R,V]=L.useState(0),[j,U]=L.useState(0),[I,Q]=L.useState(0),[D,S]=L.useState(0),[_,T]=L.useState(""),[K,oe]=L.useState(""),[le,se]=L.useState(""),[z,Ae]=L.useState(""),[ee,we]=L.useState(""),[k,X]=L.useState(""),[Z,H]=L.useState(""),[Y,ue]=L.useState(!1),[ie,ce]=L.useState(""),[be,Fe]=L.useState("Camisa"),[ne,ve]=L.useState(null),[Re,Ce]=L.useState(""),[re,pt]=L.useState(0),[He,ke]=L.useState(0),[pe,Pe]=L.useState(0),[De,ze]=L.useState(0),[Ye,dt]=L.useState(0),[Je,_t]=L.useState(""),[St,yt]=L.useState(""),[Dt,et]=L.useState(""),[bn,Gt]=L.useState(""),[or,$t]=L.useState(""),[cn,Qr]=L.useState(""),[Se,Et]=L.useState(""),[ot,nt]=L.useState(null),[mt,xt]=L.useState({x:0,y:0});L.useEffect(()=>{const ye=()=>nt(null),$e=lt=>lt.key==="Escape"&&nt(null);return document.addEventListener("click",ye),document.addEventListener("keydown",$e),()=>{document.removeEventListener("click",ye),document.removeEventListener("keydown",$e)}},[]);const Ve=(ye,$e,lt=192,zt=160)=>{let bt=ye;ye+lt+8>window.innerWidth&&(bt=ye-lt),bt=Math.max(8,Math.min(bt,window.innerWidth-lt-8));let Bt=$e;return $e+zt+8>window.innerHeight&&(Bt=window.innerHeight-zt-8),Bt=Math.max(8,Math.min(Bt,window.innerHeight-zt-8)),{x:bt,y:Bt}},st=(ye,$e)=>{ye.stopPropagation();const lt=ye.currentTarget.getBoundingClientRect(),zt=lt.right,Vt=lt.bottom,bt=Ve(zt,Vt);xt(bt),nt(Bt=>Bt===$e?null:$e)};L.useEffect(()=>{const ye=()=>nt(null),$e=lt=>{lt.key==="Escape"&&nt(null)};return document.addEventListener("click",ye),document.addEventListener("keydown",$e),()=>{document.removeEventListener("click",ye),document.removeEventListener("keydown",$e)}},[]),L.useEffect(()=>{if(!ot)return;const ye=()=>nt(null);return window.addEventListener("scroll",ye,!0),window.addEventListener("resize",ye),()=>{window.removeEventListener("scroll",ye,!0),window.removeEventListener("resize",ye)}},[ot]),L.useEffect(()=>{(async()=>{const ye=await Qt(At(Ue,"products_clothes")),$e=[];ye.forEach(bt=>{const Bt=bt.data();$e.push({id:bt.id,name:Bt.name??"(sin nombre)",category:Bt.category??"(sin categora)",measurement:Bt.measurement??"unidad",price:Number(Bt.price??0),sku:Bt.sku||"",size:Bt.size||"",color:Bt.color||"",gender:Bt.gender||"",brand:Bt.brand||""})}),e($e);const lt=Xt(At(Ue,"inventory_clothes_batches"),di("date","desc")),zt=await Qt(lt),Vt=[];zt.forEach(bt=>{const Bt=bt.data();Vt.push({id:bt.id,productId:Bt.productId,productName:Bt.productName,category:Bt.category,unit:Bt.unit,quantity:Number(Bt.quantity||0),remaining:Number(Bt.remaining??Bt.quantity??0),purchasePrice:Number(Bt.purchasePrice||0),salePrice:Number(Bt.salePrice||0),invoiceTotal:Number(Bt.invoiceTotal??Number(Bt.quantity||0)*Number(Bt.purchasePrice||0)),expectedTotal:Number(Bt.expectedTotal??Number(Bt.quantity||0)*Number(Bt.salePrice||0)),date:Bt.date,createdAt:Bt.createdAt,status:Bt.status,notes:Bt.notes||"",sku:Bt.sku||"",size:Bt.size||"",color:Bt.color||"",gender:Bt.gender||"",brand:Bt.brand||"",clientCode:Bt.clientCode||""})}),r(Vt),i(!1)})()},[]),L.useEffect(()=>{const ye=t.find($e=>$e.id===B);ye&&(U(Number(ye.price||0)),ye.sku&&oe(ye.sku),ye.size&&se($e=>$e||ye.size),ye.color&&Ae($e=>$e||ye.color),ye.gender&&we($e=>$e||ye.gender),ye.brand&&X($e=>$e||ye.brand))},[B,t]),L.useEffect(()=>{Q(Math.floor(y*R*100)/100)},[y,R]),L.useEffect(()=>{S(Math.floor(y*j*100)/100)},[y,j]),L.useEffect(()=>{const ye=t.find(zt=>zt.id===B);if(ye!=null&&ye.sku){oe(ye.sku);return}const $e=Y&&be?be:(ye==null?void 0:ye.category)||"";if(!$e&&!ee&&!z&&!le&&!k){oe("");return}const lt=QW({subcat:$e,gender:ee||"",color:z||"",size:le||"",brand:k||""});oe(lt)},[Y,be,B,ee,z,le,k,t]);const Zt=L.useMemo(()=>n.filter(ye=>!(A&&ye.date<A||d&&ye.date>d||p&&ye.productId!==p)),[n,A,d,p]),qt=L.useMemo(()=>{const ye=Zt.reduce((Vt,bt)=>Vt+(bt.invoiceTotal||0),0),$e=Zt.reduce((Vt,bt)=>Vt+(bt.expectedTotal||0),0),lt=Zt.reduce((Vt,bt)=>Vt+bt.quantity,0),zt=Zt.reduce((Vt,bt)=>Vt+bt.remaining,0);return{udsIng:lt,udsRem:zt,totalFacturado:ye,totalEsperado:$e}},[Zt]),On=async ye=>{ye.preventDefault(),o("");const $e=!!B&&!Y,lt=t.find(Bt=>Bt.id===B),zt=$e?(lt==null?void 0:lt.name)||"":ie||"",Vt=$e?(lt==null?void 0:lt.category)||"":be||"General",bt=$e&&(lt==null?void 0:lt.measurement)||"unidad";if(!zt||y<=0||R<=0){o("Completa nombre/cantidad/costo.");return}if(Z&&!jh.test(Z)){o("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}try{const Bt=await is(At(Ue,"inventory_clothes_batches"),{productId:$e?lt.id:"",productName:zt,category:Vt,unit:bt,quantity:y,remaining:y,purchasePrice:R,salePrice:j,invoiceTotal:I,expectedTotal:D,date:C,createdAt:Ut.now(),status:"PENDIENTE",notes:_||"",sku:K||"",size:le||"",color:z||"",gender:ee||"",brand:k||"",clientCode:Z||""});r(Wr=>[{id:Bt.id,productId:$e?lt.id:"",productName:zt,category:Vt,unit:bt,quantity:y,remaining:y,purchasePrice:R,salePrice:j,invoiceTotal:I,expectedTotal:D,date:C,createdAt:Ut.now(),status:"PENDIENTE",notes:_||"",sku:K||"",size:le||"",color:z||"",gender:ee||"",brand:k||"",clientCode:Z||""},...Wr]),o(" Lote de ropa creado"),b(""),w(Jt(new Date,"yyyy-MM-dd")),N(0),V(0),U(0),Q(0),S(0),T(""),oe(""),se(""),Ae(""),we(""),X(""),H(""),ue(!1),ce(""),Fe("Camisa")}catch(Bt){console.error(Bt),o(" Error al crear lote")}},Ar=async ye=>{confirm(`Marcar PAGADO el lote del ${ye.date} (${ye.productName})?`)&&(await $n(Nt(Ue,"inventory_clothes_batches",ye.id),{status:"PAGADO"}),r(lt=>lt.map(zt=>zt.id===ye.id?{...zt,status:"PAGADO"}:zt)))},ft=ye=>{ve(ye.id),Ce(ye.date),pt(ye.quantity),ke(ye.purchasePrice),Pe(ye.salePrice),ze(Number((ye.quantity*ye.purchasePrice).toFixed(2))),dt(Number((ye.quantity*ye.salePrice).toFixed(2))),_t(ye.notes||""),yt(ye.sku||""),et(ye.size||""),Gt(ye.color||""),$t(ye.gender||""),Qr(ye.brand||""),Et(ye.clientCode||"")},zr=()=>{ve(null),Ce(""),pt(0),ke(0),Pe(0),ze(0),dt(0),_t(""),yt(""),et(""),Gt(""),$t(""),Qr(""),Et("")};L.useEffect(()=>{ne&&ze(Math.floor(re*He*100)/100)},[ne,re,He]),L.useEffect(()=>{ne&&dt(Math.floor(re*pe*100)/100)},[ne,re,pe]);const Pr=async()=>{if(!ne)return;const ye=n.find(Vt=>Vt.id===ne);if(!ye)return;const $e=Math.max(0,ye.quantity-ye.remaining),lt=Math.max(0,re-$e);if(Se&&!jh.test(Se)){o("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}const zt=Nt(Ue,"inventory_clothes_batches",ne);await $n(zt,{date:Re,quantity:re,purchasePrice:He,salePrice:pe,invoiceTotal:De,expectedTotal:Ye,notes:Je,remaining:lt,sku:St,size:Dt,color:bn,gender:or||"",brand:cn||"",clientCode:Se||""}),r(Vt=>Vt.map(bt=>bt.id===ne?{...bt,date:Re,quantity:re,purchasePrice:He,salePrice:pe,invoiceTotal:De,expectedTotal:Ye,notes:Je,remaining:lt,sku:St,size:Dt,color:bn,gender:or||"",brand:cn||"",clientCode:Se||""}:bt)),zr(),o(" Lote actualizado")},er=async ye=>{confirm(`Eliminar el lote del ${ye.date} (${ye.productName})?`)&&(await xs(Nt(Ue,"inventory_clothes_batches",ye.id)),r(lt=>lt.filter(zt=>zt.id!==ye.id)),o(" Lote eliminado"))},Xn=()=>{const ye=(A?`Desde ${A}`:"Desde inicio")+"  "+(d?`Hasta ${d}`:"Hasta hoy"),$e=bt=>(bt||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),lt=Zt.map(bt=>`
      <tr>
        <td>${bt.date}</td>
        <td>${(bt.category||"").toUpperCase()}</td>
        <td>${$e(bt.productName)}</td>
        <td>${$e(bt.sku||"")}</td>
        <td>${$e(bt.size||"")}</td>
        <td>${$e(bt.color||"")}</td>
        <td>${$e(bt.clientCode||"")}</td>
        <td>${$e(bt.gender||"")}</td>
        <td>${(bt.unit||"").toUpperCase()}</td>
        <td style="text-align:right">${bt.quantity.toFixed(0)}</td>
        <td style="text-align:right">${bt.remaining.toFixed(0)}</td>
        <td style="text-align:right">${Dr(bt.purchasePrice)}</td>
        <td style="text-align:right">${Dr(bt.salePrice)}</td>
        <td style="text-align:right">${Dr(bt.invoiceTotal||0)}</td>
        <td style="text-align:right">${Dr(bt.expectedTotal||0)}</td>
        <td>${$e((bt.notes||"").slice(0,120))}</td>
        <td>${bt.status}</td>
      </tr>`).join(""),zt=`
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Inventario de Ropa por Lotes</title>
  <style>
    * { font-family: Arial, sans-serif; }
    h1 { margin: 0 0 4px; }
    .muted { color: #555; font-size: 12px; margin-bottom: 12px; }
    table { width: 100%; border-collapse: collapse; font-size: 11px; }
    th, td { border: 1px solid #ddd; padding: 6px; }
    th { background: #f5f5f5; text-align: left; }
    .totals { margin: 10px 0 16px; font-size: 12px; display: grid; grid-template-columns: repeat(2, max-content); column-gap: 32px; row-gap: 6px; align-items: center; }
    @media print { @page { size: A4 landscape; margin: 12mm; } button { display: none; } }
  </style>
</head>
<body>
  <button onclick="window.print()">Imprimir</button>
  <h1>Inventario de Ropa por Lotes</h1>
  <div class="muted">${ye}</div>
  <div class="totals">
    <span><strong>Unidades ingresadas:</strong> ${qt.udsIng.toFixed(0)}</span>
    <span><strong>Unidades restantes:</strong> ${qt.udsRem.toFixed(0)}</span>
    <span><strong>Total esperado a ganar:</strong> ${Dr(qt.totalEsperado)}</span>
    <span><strong>Total facturado:</strong> ${Dr(qt.totalFacturado)}</span>
    <span><strong>Ganancia sin gastos:</strong> ${Dr(Number((qt.totalEsperado-qt.totalFacturado).toFixed(2)))}</span>
  </div>
  <table>
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Subcat.</th>
        <th>Producto</th>
        <th>SKU</th>
        <th>Talla</th>
        <th>Color</th>
        <th>Cdigo Cliente</th>
        <th>Gnero</th>
        <th>Unidad</th>
        <th>Ingresado</th>
        <th>Restantes</th>
        <th>Precio Compra</th>
        <th>Precio Venta</th>
        <th>Total factura</th>
        <th>Total esperado</th>
        <th>Comentario</th>
        <th>Estado</th>
      </tr>
    </thead>
    <tbody>${lt||'<tr><td colspan="17" style="text-align:center">Sin lotes</td></tr>'}</tbody>
  </table>
</body>
</html>`,Vt=window.open("","_blank");Vt&&(Vt.document.open(),Vt.document.write(zt),Vt.document.close())};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Inventario de Ropa"}),l.jsxs("form",{onSubmit:On,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Producto de ropa"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:B,onChange:ye=>b(ye.target.value),children:[l.jsx("option",{value:"",children:"(Opcional) Selecciona un producto"}),t.map(ye=>l.jsxs("option",{value:ye.id,children:[ye.name,"  ",ye.category,"  ",ye.sku?`SKU: ${ye.sku}`:""]},ye.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del lote"}),l.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:C,onChange:ye=>w(ye.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (pzas)"}),l.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-full border p-2 rounded",value:y===0?"":y,onChange:ye=>N(Math.max(0,parseInt(ye.target.value||"0",10))),placeholder:""})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Precio de compra (pza)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:R===0?"":R,onChange:ye=>V(Math.max(0,parseFloat(ye.target.value||"0")))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (pza)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:j===0?"":j,onChange:ye=>U(Math.max(0,parseFloat(ye.target.value||"0")))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),l.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:K,readOnly:!0,placeholder:"Se genera automticamente o se carga del producto",title:"Si el producto tiene SKU, se usa tal cual; si no, se genera por subcat/gnero/talla/color/marca."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),l.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:le,readOnly:!0,onChange:ye=>se(ye.target.value),placeholder:"XS/S/M/L/XL/10/12"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),l.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:z,readOnly:!0,onChange:ye=>Ae(ye.target.value),placeholder:"Negro, Azul, Rojo"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),l.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:ee,readOnly:!0,onChange:ye=>we(ye.target.value),placeholder:"Masculino, Femenino, Otro"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Marca / Origen (opcional)"}),l.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:k,onChange:ye=>X(ye.target.value),placeholder:"Shein, Usado, Otro"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo del cliente (opcional)"}),l.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: LOTE-SHEIN-SEP-01",value:Z,onChange:ye=>{const $e=ye.target.value;jh.test($e)&&H($e)},title:"Solo letras, nmeros, punto, guion y guion_bajo (mx 32)"}),!jh.test(Z)&&Z.length>0&&l.jsx("div",{className:"text-xs text-red-600 mt-1",children:"Formato invlido"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:_,onChange:ye=>T(ye.target.value),maxLength:500,placeholder:"Ej: Camisita veranera, tela delgada, tirantes"}),l.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[_.length,"/500"]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Total factura (auto)"}),l.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:Dr(I),readOnly:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Total esperado (auto)"}),l.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:Dr(D),readOnly:!0})]}),l.jsx("div",{className:"md:col-span-2",children:l.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar lote"})})]}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:A,onChange:ye=>c(ye.target.value)})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:ye=>f(ye.target.value)})]}),l.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[l.jsx("label",{className:"font-semibold",children:"Producto"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:p,onChange:ye=>g(ye.target.value),children:[l.jsx("option",{value:"",children:"Todos"}),t.map(ye=>l.jsxs("option",{value:ye.id,children:[ye.name,"  ",ye.category]},ye.id))]})]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{c(""),f(""),g("")},children:"Quitar filtro"}),l.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:Xn,children:"Imprimir PDF"})]}),l.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-base",children:l.jsxs("div",{className:"grid grid-cols-3 gap-y-2 gap-x-8",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",qt.udsIng.toFixed(0)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",qt.udsRem.toFixed(0)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",Dr(qt.totalEsperado)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",Dr(qt.totalFacturado)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",Dr(Number((qt.totalEsperado-qt.totalFacturado).toFixed(2)))]})]})}),l.jsx("div",{className:"bg-white rounded shadow border",children:l.jsx("div",{className:"w-full overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-xs md:text-sm",children:[l.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Fecha"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden sm:table-cell",children:"Subcat."}),l.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Producto"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"SKU"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Talla"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Color"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Cdigo Cliente"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Gnero"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Unidad"}),l.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Ingresado"}),l.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Restantes"}),l.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Compra"}),l.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Venta"}),l.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total factura"}),l.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total esperado"}),l.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Comentario"}),l.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Estado"}),l.jsx("th",{className:"p-2 md:p-3 border text-center",children:"Acciones"})]})}),l.jsx("tbody",{className:"whitespace-nowrap",children:s?l.jsx("tr",{children:l.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Cargando"})}):Zt.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Sin lotes"})}):Zt.map(ye=>{const $e=ne===ye.id;return l.jsxs("tr",{className:"text-left",children:[l.jsx("td",{className:"p-2 md:p-3 border align-top",children:$e?l.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:Re,onChange:lt=>Ce(lt.target.value)}):ye.date}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden sm:table-cell",children:(ye.category||"").toUpperCase()}),l.jsx("td",{className:"p-2 md:p-3 border align-top max-w-[220px] md:max-w-[320px]",children:l.jsx("span",{className:"block truncate",title:ye.productName,children:ye.productName})}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell max-w-[220px]",children:$e?l.jsx("input",{className:"w-full border p-1 rounded",value:St,onChange:lt=>yt(lt.target.value)}):l.jsx("span",{className:"block truncate",title:ye.sku||"",children:ye.sku||""})}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:$e?l.jsx("input",{className:"w-full border p-1 rounded",value:Dt,onChange:lt=>et(lt.target.value)}):ye.size||""}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:$e?l.jsx("input",{className:"w-full border p-1 rounded",value:bn,onChange:lt=>Gt(lt.target.value)}):ye.color||""}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[200px]",children:$e?l.jsx("input",{className:"w-full border p-1 rounded",value:Se,onChange:lt=>{const zt=lt.target.value;jh.test(zt)&&Et(zt)},placeholder:"Ej: LOTE-SHEIN-SEP-01",title:"AZ 09 . _ - (mx 32)"}):l.jsx("span",{className:"block truncate",title:ye.clientCode||"",children:ye.clientCode||""})}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:$e?l.jsx("select",{className:"w-full border p-1 rounded",value:or,onChange:lt=>$t(lt.target.value),children:TW.map(lt=>l.jsx("option",{value:lt,children:lt||""},lt))}):ye.gender||""}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:(ye.unit||"").toUpperCase()}),l.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:$e?l.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-20 border p-1 rounded text-right",value:Number.isNaN(re)?"":re,onChange:lt=>pt(Math.max(0,parseInt(lt.target.value||"0",10)))}):ye.quantity.toFixed(0)}),l.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:$e?ye.remaining:ye.remaining.toFixed(0)}),l.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:$e?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(He)?"":He,onChange:lt=>ke(Math.max(0,parseFloat(lt.target.value||"0")))}):Dr(ye.purchasePrice)}),l.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:$e?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(pe)?"":pe,onChange:lt=>Pe(Math.max(0,parseFloat(lt.target.value||"0")))}):Dr(ye.salePrice)}),l.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:Dr($e?De:ye.invoiceTotal||0)}),l.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:Dr($e?Ye:ye.expectedTotal||0)}),l.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[280px]",children:$e?l.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:Je,onChange:lt=>_t(lt.target.value),maxLength:500}):l.jsx("span",{className:"block truncate",title:ye.notes||"",children:ye.notes||""})}),l.jsx("td",{className:"p-2 md:p-3 border align-top",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] md:text-xs ${ye.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:ye.status})}),l.jsx("td",{className:"p-2 md:p-3 border align-top",children:$e?l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Pr,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:zr,children:"Cancelar"})]}):l.jsx("button",{type:"button",className:"inline-flex items-center justify-center w-8 h-8 rounded border border-gray-200 hover:bg-gray-100",title:"Acciones",onClick:lt=>st(lt,ye.id),children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor",children:[l.jsx("circle",{cx:"12",cy:"5",r:"1.6"}),l.jsx("circle",{cx:"12",cy:"12",r:"1.6"}),l.jsx("circle",{cx:"12",cy:"19",r:"1.6"})]})})})]},ye.id)})})]})})}),ot&&MS.createPortal(l.jsxs(l.Fragment,{children:[l.jsx("div",{onClick:()=>nt(null),className:"fixed inset-0 z-[60]"}),l.jsx("div",{className:"fixed z-[61] w-44 rounded-md border border-gray-200 bg-white shadow-xl",style:{left:mt.x,top:mt.y},onClick:ye=>ye.stopPropagation(),role:"menu","aria-orientation":"vertical",children:l.jsxs("div",{className:"py-1 text-sm",children:[(()=>{const ye=Zt.find($e=>$e.id===ot);return(ye==null?void 0:ye.status)==="PENDIENTE"?l.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-green-50",onClick:()=>{nt(null),Ar(ye)},children:" Pagar"}):null})(),l.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-yellow-50",onClick:()=>{const ye=Zt.find($e=>$e.id===ot);ye&&(nt(null),ft(ye))},children:" Editar"}),l.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-red-50 text-red-600",onClick:()=>{const ye=Zt.find($e=>$e.id===ot);ye&&(nt(null),er(ye))},children:" Borrar"})]})})]}),document.body),a&&l.jsx("p",{className:"mt-2 text-sm",children:a})]})}const LW=["Camisa","Blusa","Vestido","Jean","Pantaln","Short","Falda","Conjunto","Abrigo","Suter","Accesorio"],RW=["Negro","Blanco","Azul","Rojo","Verde","Gris","Beige","Rosa","Amarillo","Marrn","Morado","Naranja"],kW=["XS","S","M","L","XL","2XL"],DW=["2","4","6","8","10","12","14"],jW=["26","28","30","32","34","36","38"],OW=["Shein","Usado","Otro"],MW=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function fg(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function HW(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function VW(t){const e="ROP",n=fg(t.subcat).slice(0,3)||"GEN",r=HW(t.gender),s=fg(t.color).slice(0,3)||"COL",i=fg(t.size)||"TLL",a=fg(t.brand).slice(0,4)||"BRD";return`${e}-${n}-${r}-${s}-${i}-${a}`}const zy=/^[A-Za-z0-9._-]{0,32}$/;function KW(){const[t,e]=L.useState(""),[n,r]=L.useState("Camisa"),[s,i]=L.useState(""),[a,o]=L.useState(""),[A,c]=L.useState("Shein"),[d,f]=L.useState(""),[p,g]=L.useState(""),[B,b]=L.useState(""),[C,w]=L.useState(""),[y,N]=L.useState([]),[R,V]=L.useState(!0),[j,U]=L.useState(""),I=L.useMemo(()=>n.toLowerCase()==="jean"?jW:d==="NINO"||d==="NINA"?DW:kW,[n,d]);L.useEffect(()=>{b(VW({subcat:n,gender:d,color:a,size:s,brand:A}))},[n,d,a,s,A]),L.useEffect(()=>{(async()=>{const _=Xt(At(Ue,"products_clothes"),di("createdAt","desc")),T=await Qt(_),K=[];T.forEach(oe=>{const le=oe.data();K.push({id:oe.id,name:le.name??"(sin nombre)",category:le.category??"",measurement:le.measurement??"unidad",sku:le.sku??"",size:le.size||"",color:le.color||"",brand:le.brand||"",gender:le.gender||"",clientCode:le.clientCode||"",notes:le.notes||"",createdAt:le.createdAt??Ut.now()})}),N(K),V(!1)})()},[]);const Q=()=>{e(""),r("Camisa"),i(""),o(""),c("Shein"),f(""),g(""),w("")},D=async _=>{if(_.preventDefault(),U(""),!t.trim()){U("Ingresa el nombre del producto.");return}if(p&&!zy.test(p)){U("Cdigo del cliente invlido (AZ 09 . _ - , mx 32).");return}try{const T=await is(At(Ue,"products_clothes"),{name:t.trim(),category:n,measurement:"unidad",sku:B,size:s||"",color:a||"",brand:A||"",gender:d||"",clientCode:p||"",notes:C||"",createdAt:Ut.now()});N(K=>[{id:T.id,name:t.trim(),category:n,measurement:"unidad",sku:B,size:s||"",color:a||"",brand:A||"",gender:d||"",clientCode:p||"",notes:C||"",createdAt:Ut.now()},...K]),Q(),U(" Producto de ropa creado")}catch(T){console.error(T),U(" Error al crear producto")}},S=async _=>{confirm(`Eliminar el producto "${_.name}"?`)&&(await xs(Nt(Ue,"products_clothes",_.id)),N(K=>K.filter(oe=>oe.id!==_.id)))};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Productos de Ropa"}),l.jsxs("form",{onSubmit:D,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del producto"}),l.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Blusa floral manga corta",value:t,onChange:_=>e(_.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Subcategora"}),l.jsx("select",{className:"w-full border p-2 rounded",value:n,onChange:_=>r(_.target.value),children:LW.map(_=>l.jsx("option",{value:_,children:_},_))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Gnero (opcional)"}),l.jsx("select",{className:"w-full border p-2 rounded",value:d,onChange:_=>f(_.target.value),children:MW.map(_=>l.jsx("option",{value:_,children:_||""},_))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Talla (opcional)"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:s,onChange:_=>i(_.target.value),children:[l.jsx("option",{value:"",children:""}),I.map(_=>l.jsx("option",{value:_,children:_},_))]}),l.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Sugeridas por subcategora/gnero"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Color (opcional)"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:_=>o(_.target.value),children:[l.jsx("option",{value:"",children:""}),RW.map(_=>l.jsx("option",{value:_,children:_},_))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Marca / Origen (opcional)"}),l.jsx("select",{className:"w-full border p-2 rounded",value:A,onChange:_=>c(_.target.value),children:OW.map(_=>l.jsx("option",{value:_,children:_},_))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),l.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:B,readOnly:!0,placeholder:"Se genera automticamente",title:"Se genera de subcategora, gnero, talla, color y marca"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo del cliente (opcional)"}),l.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: LOTE-SHEIN-SEP-01",value:p,onChange:_=>{const T=_.target.value;zy.test(T)&&g(T)},title:"Solo letras, nmeros, punto, guion y guion_bajo (mx 32)"}),!zy.test(p)&&p.length>0&&l.jsx("div",{className:"text-xs text-red-600 mt-1",children:"Formato invlido"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:C,onChange:_=>w(_.target.value),maxLength:500,placeholder:"Ej: Camisita veranera, tela delgada, tirantes"}),l.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[C.length,"/500"]})]}),l.jsx("div",{className:"md:col-span-2",children:l.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Crear producto"})})]}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Subcat."}),l.jsx("th",{className:"p-2 border",children:"Nombre Producto"}),l.jsx("th",{className:"p-2 border",children:"SKU"}),l.jsx("th",{className:"p-2 border",children:"Talla"}),l.jsx("th",{className:"p-2 border",children:"Color"}),l.jsx("th",{className:"p-2 border",children:"Marca"}),l.jsx("th",{className:"p-2 border",children:"Gnero"}),l.jsx("th",{className:"p-2 border",children:"Cdigo Cliente"}),l.jsx("th",{className:"p-2 border",children:"Comentario"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:R?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:11,children:"Cargando"})}):y.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:11,children:"Sin productos"})}):y.map(_=>{var T,K;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:(T=_.createdAt)!=null&&T.toDate?_.createdAt.toDate().toISOString().slice(0,10):""}),l.jsx("td",{className:"p-2 border",children:_.category||""}),l.jsx("td",{className:"p-2 border",children:_.name}),l.jsx("td",{className:"p-2 border",children:_.sku||""}),l.jsx("td",{className:"p-2 border",children:_.size||""}),l.jsx("td",{className:"p-2 border",children:((K=_.color)==null?void 0:K.toUpperCase())||""}),l.jsx("td",{className:"p-2 border",children:_.brand||""}),l.jsx("td",{className:"p-2 border",children:_.gender||""}),l.jsx("td",{className:"p-2 border",children:_.clientCode||""}),l.jsx("td",{className:"p-2 border",children:l.jsx("span",{title:_.notes||"",children:(_.notes||"").length>40?(_.notes||"").slice(0,40)+"":_.notes||""})}),l.jsx("td",{className:"p-2 border",children:l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>S(_),children:"Borrar"})})]},_.id)})})]})}),j&&l.jsx("p",{className:"mt-2 text-sm",children:j})]})}async function GW(t){const{productId:e,quantity:n,saleDate:r,saleId:s}=t,i=Math.max(0,Math.floor(Number(n||0)));if(!e||i<=0)throw new Error("Parmetros invlidos para allocateSaleFIFOClothes");const a=Xt(At(Ue,"inventory_clothes_batches"),pn("productId","==",e)),c=(await Qt(a)).docs.map(f=>({id:f.id,data:f.data()})).sort((f,p)=>{var w,y;const g=String(f.data.date||""),B=String(p.data.date||"");if(g!==B)return g<B?-1:1;const b=((w=f.data.createdAt)==null?void 0:w.seconds)??0,C=((y=p.data.createdAt)==null?void 0:y.seconds)??0;return b-C}).map(f=>Nt(Ue,"inventory_clothes_batches",f.id)),d=[];return await gc(Ue,async f=>{const p=await Promise.all(c.map(B=>f.get(B)));let g=i;for(let B=0;B<c.length&&g>0;B++){const b=c[B],C=p[B];if(!C.exists())continue;const w=C.data(),y=Math.max(0,Math.floor(Number(w.quantity||0))),N=Number.isFinite(Number(w.remaining))?Math.max(0,Math.floor(Number(w.remaining||0))):y;if(N<=0)continue;const R=Math.min(N,g),V=Math.max(0,N-R);f.update(b,{remaining:V}),d.push({batchId:b.id,qty:R,batchDate:String(w.date||""),productName:String(w.productName||"")}),g-=R}if(g>0)throw new Error(`Inventario insuficiente. Faltan ${g} unidades.`);if(s)for(const B of d)await is(At(Ue,"batch_clothes_allocations"),{saleId:s,saleDate:r,productId:e,productName:B.productName??"",batchId:B.batchId,batchDate:B.batchDate??"",quantity:B.qty,createdAt:Ut.now()})}),{allocations:d}}async function yI(t){const e=Nt(Ue,"sales_clothes",t),n=await Il(e);if(!n.exists())throw new Error("La venta no existe.");const r=n.data(),s=r.item||{},i=String(s.productId||r.productId||""),a=Math.max(0,Math.floor(Number(s.qty??r.quantity??0))),o=Array.isArray(r.allocations)?r.allocations.map(B=>({batchId:String(B.batchId),qty:Math.max(0,Math.floor(Number(B.qty||B.quantity||0)))})):[];if(!i||a<=0)return await gc(Ue,async B=>{B.delete(e)}),{restored:0};if(o.length>0)return await gc(Ue,async b=>{const C=o.map(y=>Nt(Ue,"inventory_clothes_batches",y.batchId)),w=await Promise.all(C.map(y=>b.get(y)));for(let y=0;y<C.length;y++){const N=C[y],R=w[y];if(!R.exists())continue;const V=R.data(),j=Math.max(0,Math.floor(Number(V.remaining||0))),U=Math.max(0,Math.floor(Number(o[y].qty))),I=j+U;b.update(N,{remaining:I})}b.delete(e)}),{restored:o.reduce((b,C)=>b+C.qty,0)};const A=Xt(At(Ue,"inventory_clothes_batches"),pn("productId","==",i)),d=(await Qt(A)).docs.map(B=>{const b=B.data(),C=Math.max(0,Math.floor(Number(b.quantity||0))),w=Number.isFinite(Number(b.remaining))?Math.max(0,Math.floor(Number(b.remaining||0))):C;return{id:B.id,date:String(b.date||""),quantity:C,remaining:w}}).sort((B,b)=>B.date.localeCompare(b.date)),f=[];let p=a;for(const B of d){if(p<=0)break;const b=Math.max(0,B.quantity-B.remaining);if(b<=0)continue;const C=Math.min(b,p);f.push({id:B.id,addBack:C}),p-=C}for(const B of d){if(p<=0)break;const b=Math.min(p,a);f.push({id:B.id,addBack:b}),p-=b}return await gc(Ue,async B=>{const b=f.map(w=>Nt(Ue,"inventory_clothes_batches",w.id)),C=await Promise.all(b.map(w=>B.get(w)));for(let w=0;w<b.length;w++){const y=b[w],N=C[w];if(!N.exists())continue;const R=N.data(),V=Math.max(0,Math.floor(Number(R.remaining||0))),j=Math.max(0,Math.floor(Number(f[w].addBack)));B.update(y,{remaining:V+j})}B.delete(e)}),{restored:f.reduce((B,b)=>B+b.addBack,0)}}const BI=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],Pu=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function pg(t){const e="+505 ";if(!t.startsWith(e)){const r=t.replace(/\D/g,"");return e+r.slice(0,8)}const n=t.slice(e.length).replace(/\D/g,"");return e+n.slice(0,8)}async function xI(t){const e=Xt(At(Ue,"ar_movements"),pn("ref.saleId","==",t)),n=await Qt(e);await Promise.all(n.docs.map(r=>xs(Nt(Ue,"ar_movements",r.id))))}function qW(){const[t,e]=L.useState(""),[n,r]=L.useState("+505 "),[s,i]=L.useState(""),[a,o]=L.useState(""),[A,c]=L.useState("ACTIVO"),[d,f]=L.useState(0),[p,g]=L.useState([]),[B,b]=L.useState(!0),[C,w]=L.useState(""),[y,N]=L.useState(null),[R,V]=L.useState(""),[j,U]=L.useState("+505 "),[I,Q]=L.useState(""),[D,S]=L.useState(""),[_,T]=L.useState("ACTIVO"),[K,oe]=L.useState(0),[le,se]=L.useState(!1),[z,Ae]=L.useState(null),[ee,we]=L.useState(!1),[k,X]=L.useState([]),[Z,H]=L.useState({saldoActual:0,totalAbonado:0,totalCargos:0}),[Y,ue]=L.useState(!1),[ie,ce]=L.useState(0),[be,Fe]=L.useState(new Date().toISOString().slice(0,10)),[ne,ve]=L.useState(""),[Re,Ce]=L.useState(!1),[re,pt]=L.useState(null),[He,ke]=L.useState(""),[pe,Pe]=L.useState(0),[De,ze]=L.useState("");L.useEffect(()=>{(async()=>{const Se=Xt(At(Ue,"customers_clothes"),di("createdAt","desc")),Et=await Qt(Se),ot=[];Et.forEach(nt=>{const mt=nt.data();ot.push({id:nt.id,name:mt.name??"",phone:mt.phone??"+505 ",place:mt.place??"",notes:mt.notes??"",status:mt.status??"ACTIVO",creditLimit:Number(mt.creditLimit??0),createdAt:mt.createdAt??Ut.now(),balance:0})});for(const nt of ot)try{const mt=Xt(At(Ue,"ar_movements"),pn("customerId","==",nt.id)),xt=await Qt(mt);let Ve=0;xt.forEach(st=>Ve+=Number(st.data().amount||0)),nt.balance=Ve}catch{nt.balance=0}g(ot),b(!1)})()},[]);const Ye=()=>{e(""),r("+505 "),i(""),o(""),c("ACTIVO"),f(0)},dt=async Se=>{if(Se.preventDefault(),w(""),!t.trim()){w("Ingresa el nombre.");return}const Et=pg(n);if(Et.length<6){w("Telfono incompleto.");return}try{const ot=await is(At(Ue,"customers_clothes"),{name:t.trim(),phone:Et,place:s||"",notes:a||"",status:A,creditLimit:Number(d||0),createdAt:Ut.now()});g(nt=>[{id:ot.id,name:t.trim(),phone:Et,place:s||"",notes:a||"",status:A,creditLimit:Number(d||0),createdAt:Ut.now(),balance:0},...nt]),Ye(),w(" Cliente creado")}catch(ot){console.error(ot),w(" Error al crear cliente")}},Je=Se=>{N(Se.id),V(Se.name),U(Se.phone||"+505 "),Q(Se.place||""),S(Se.notes||""),T(Se.status||"ACTIVO"),oe(Number(Se.creditLimit||0))},_t=()=>{N(null),V(""),U("+505 "),Q(""),S(""),T("ACTIVO"),oe(0)},St=async()=>{if(!y)return;const Se=pg(j);if(!R.trim()){w("Ingresa el nombre.");return}try{await $n(Nt(Ue,"customers_clothes",y),{name:R.trim(),phone:Se,place:I||"",notes:D||"",status:_,creditLimit:Number(K||0)}),g(Et=>Et.map(ot=>ot.id===y?{...ot,name:R.trim(),phone:Se,place:I||"",notes:D||"",status:_,creditLimit:Number(K||0)}:ot)),_t(),w(" Cliente actualizado")}catch(Et){console.error(Et),w(" Error al actualizar")}},yt=async Se=>{if(confirm(`Eliminar al cliente "${Se.name}"?
Se devolvern al inventario todas las prendas de sus compras y se borrarn sus movimientos.`))try{b(!0);const ot=Xt(At(Ue,"sales_clothes"),pn("customerId","==",Se.id)),nt=await Qt(ot);for(const Ve of nt.docs){const st=Ve.id;try{await yI(st)}catch(Zt){console.warn("restoreSaleAndDeleteClothes error",Zt);try{await xs(Nt(Ue,"sales_clothes",st))}catch{}}await xI(st)}const mt=Xt(At(Ue,"ar_movements"),pn("customerId","==",Se.id)),xt=await Qt(mt);await Promise.all(xt.docs.map(Ve=>xs(Nt(Ue,"ar_movements",Ve.id)))),await xs(Nt(Ue,"customers_clothes",Se.id)),g(Ve=>Ve.filter(st=>st.id!==Se.id)),w(" Cliente eliminado y prendas devueltas al inventario")}catch(ot){console.error(ot),w(" No se pudo eliminar el cliente.")}finally{b(!1)}},Dt=async Se=>{Ae(Se),X([]),H({saldoActual:0,totalAbonado:0,totalCargos:0}),se(!0),ue(!1),ce(0),Fe(new Date().toISOString().slice(0,10)),ve(""),pt(null),we(!0);try{const Et=Xt(At(Ue,"ar_movements"),pn("customerId","==",Se.id)),ot=await Qt(Et),nt=[];ot.forEach(mt=>{var Ve,st;const xt=mt.data();nt.push({id:mt.id,date:xt.date??((st=(Ve=xt.createdAt)==null?void 0:Ve.toDate)!=null&&st.call(Ve)?xt.createdAt.toDate().toISOString().slice(0,10):""),type:xt.type??"CARGO",amount:Number(xt.amount||0),ref:xt.ref||{},comment:xt.comment||"",createdAt:xt.createdAt})}),nt.sort((mt,xt)=>{var Zt,qt;if(mt.date!==xt.date)return mt.date.localeCompare(xt.date);const Ve=((Zt=mt.createdAt)==null?void 0:Zt.seconds)||0,st=((qt=xt.createdAt)==null?void 0:qt.seconds)||0;return Ve-st}),X(nt),et(nt)}catch(Et){console.error(Et),w(" No se pudo cargar el estado de cuenta")}finally{we(!1)}},et=Se=>{const Et=Se.reduce((mt,xt)=>mt+(Number(xt.amount)||0),0),ot=Se.filter(mt=>Number(mt.amount)<0).reduce((mt,xt)=>mt+Math.abs(Number(xt.amount)||0),0),nt=Se.filter(mt=>Number(mt.amount)>0).reduce((mt,xt)=>mt+Number(xt.amount)||0,0);H({saldoActual:Et,totalAbonado:ot,totalCargos:nt})},bn=async()=>{if(!z)return;w("");const Se=Number(ie||0);if(!(Se>0)){w("Ingresa un monto de abono mayor a 0.");return}const Et=parseFloat(Se.toFixed(2));if(!be){w("Selecciona la fecha del abono.");return}try{Ce(!0);const ot={customerId:z.id,type:"ABONO",amount:-Et,date:be,comment:ne||"",createdAt:Ut.now()},mt={id:(await is(At(Ue,"ar_movements"),ot)).id,date:be,type:"ABONO",amount:-Et,comment:ne||"",createdAt:Ut.now()},xt=[...k,mt].sort((Ve,st)=>{var On,Ar;if(Ve.date!==st.date)return Ve.date.localeCompare(st.date);const Zt=((On=Ve.createdAt)==null?void 0:On.seconds)||0,qt=((Ar=st.createdAt)==null?void 0:Ar.seconds)||0;return Zt-qt});X(xt),et(xt),g(Ve=>Ve.map(st=>st.id===z.id?{...st,balance:(st.balance||0)-Et}:st)),Ae(Ve=>Ve&&{...Ve,balance:(Ve.balance||0)-Et}),ce(0),ve(""),Fe(new Date().toISOString().slice(0,10)),ue(!1),w(" Abono registrado")}catch(ot){console.error(ot),w(" Error al registrar el abono")}finally{Ce(!1)}},Gt=Se=>{pt(Se.id),ke(Se.date||new Date().toISOString().slice(0,10)),Pe(Math.abs(Number(Se.amount||0))),ze(Se.comment||"")},or=()=>{pt(null),ke(""),Pe(0),ze("")},$t=async()=>{if(!re)return;const Se=k.findIndex(mt=>mt.id===re);if(Se===-1)return;const Et=k[Se],ot=Number(pe||0);if(!(ot>0)){w("El monto debe ser mayor a 0.");return}const nt=Et.type==="ABONO"?-parseFloat(ot.toFixed(2)):+parseFloat(ot.toFixed(2));try{await $n(Nt(Ue,"ar_movements",re),{date:He,amount:nt,comment:De||""});const mt=[...k];mt[Se]={...Et,date:He,amount:nt,comment:De||""},mt.sort((Ve,st)=>{var On,Ar;if(Ve.date!==st.date)return Ve.date.localeCompare(st.date);const Zt=((On=Ve.createdAt)==null?void 0:On.seconds)||0,qt=((Ar=st.createdAt)==null?void 0:Ar.seconds)||0;return Zt-qt}),X(mt),et(mt);const xt=mt.reduce((Ve,st)=>Ve+(Number(st.amount)||0),0);g(Ve=>Ve.map(st=>st.id===(z==null?void 0:z.id)?{...st,balance:xt}:st)),Ae(Ve=>Ve&&{...Ve,balance:xt}),or(),w(" Movimiento actualizado")}catch(mt){console.error(mt),w(" Error al actualizar movimiento")}},cn=async Se=>{var ot,nt;if(confirm(`Eliminar este movimiento (${Se.type==="ABONO"?"Abono":"Compra"}) del ${Se.date}?${Se.type==="CARGO"&&((ot=Se.ref)!=null&&ot.saleId)?`
Se devolvern al inventario las prendas de esa venta.`:""}`))try{if(b(!0),Se.type==="CARGO"&&((nt=Se.ref)!=null&&nt.saleId)){try{await yI(Se.ref.saleId)}catch(Ve){console.warn("restoreSaleAndDeleteClothes error",Ve),b(!1),w(" No se pudo devolver inventario de la venta.");return}await xI(Se.ref.saleId)}else await xs(Nt(Ue,"ar_movements",Se.id));const mt=k.filter(Ve=>{var st,Zt;return Se.type==="CARGO"&&((st=Se.ref)!=null&&st.saleId)?((Zt=Ve.ref)==null?void 0:Zt.saleId)!==Se.ref.saleId:Ve.id!==Se.id});X(mt),et(mt);const xt=mt.reduce((Ve,st)=>Ve+(Number(st.amount)||0),0);g(Ve=>Ve.map(st=>st.id===(z==null?void 0:z.id)?{...st,balance:xt}:st)),Ae(Ve=>Ve&&{...Ve,balance:xt}),w(" Movimiento eliminado")}catch(mt){console.error(mt),w(" Error al eliminar movimiento")}finally{b(!1)}},Qr=L.useMemo(()=>[...p].sort((Se,Et)=>{var ot,nt;return Se.status!==Et.status?Se.status==="BLOQUEADO"?1:-1:(((ot=Et.createdAt)==null?void 0:ot.seconds)||0)-(((nt=Se.createdAt)==null?void 0:nt.seconds)||0)}),[p]);return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Clientes (Ropa)"}),l.jsxs("form",{onSubmit:dt,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),l.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:t,onChange:Se=>e(Se.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),l.jsx("input",{className:"w-full border p-2 rounded",value:n,onChange:Se=>r(pg(Se.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:s,onChange:Se=>i(Se.target.value),children:[l.jsx("option",{value:"",children:""}),BI.map(Se=>l.jsx("option",{value:Se,children:Se},Se))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:A,onChange:Se=>c(Se.target.value),children:[l.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),l.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:d===0?"":d,onChange:Se=>f(Math.max(0,Number(Se.target.value||0))),placeholder:"Ej: 2000"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:a,onChange:Se=>o(Se.target.value),maxLength:500,placeholder:"Notas del cliente"}),l.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[a.length,"/500"]})]}),l.jsx("div",{className:"md:col-span-2",children:l.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})})]}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Nombre"}),l.jsx("th",{className:"p-2 border",children:"Telfono"}),l.jsx("th",{className:"p-2 border",children:"Lugar"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Lmite"}),l.jsx("th",{className:"p-2 border",children:"Saldo"}),l.jsx("th",{className:"p-2 border",children:"Comentario"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:B?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):Qr.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin clientes"})}):Qr.map(Se=>{var ot;const Et=y===Se.id;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:(ot=Se.createdAt)!=null&&ot.toDate?Se.createdAt.toDate().toISOString().slice(0,10):""}),l.jsx("td",{className:"p-2 border",children:Et?l.jsx("input",{className:"w-full border p-1 rounded",value:R,onChange:nt=>V(nt.target.value)}):Se.name}),l.jsx("td",{className:"p-2 border",children:Et?l.jsx("input",{className:"w-full border p-1 rounded",value:j,onChange:nt=>U(pg(nt.target.value))}):Se.phone}),l.jsx("td",{className:"p-2 border",children:Et?l.jsxs("select",{className:"w-full border p-1 rounded",value:I,onChange:nt=>Q(nt.target.value),children:[l.jsx("option",{value:"",children:""}),BI.map(nt=>l.jsx("option",{value:nt,children:nt},nt))]}):Se.place||""}),l.jsx("td",{className:"p-2 border",children:Et?l.jsxs("select",{className:"w-full border p-1 rounded",value:_,onChange:nt=>T(nt.target.value),children:[l.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),l.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Se.status==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:Se.status})}),l.jsx("td",{className:"p-2 border",children:Et?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(K)?"":K,onChange:nt=>oe(Math.max(0,Number(nt.target.value||0)))}):Pu(Se.creditLimit||0)}),l.jsx("td",{className:"p-2 border font-semibold",children:Pu(Se.balance||0)}),l.jsx("td",{className:"p-2 border",children:Et?l.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:D,onChange:nt=>S(nt.target.value),maxLength:500}):l.jsx("span",{title:Se.notes||"",children:(Se.notes||"").length>40?(Se.notes||"").slice(0,40)+"":Se.notes||""})}),l.jsx("td",{className:"p-2 border",children:l.jsx("div",{className:"flex gap-2 justify-center",children:Et?l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:St,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:_t,children:"Cancelar"})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Je(Se),children:"Editar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>yt(Se),children:"Borrar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>Dt(Se),title:"Ver compras y abonos",children:"Estado de cuenta"})]})})})]},Se.id)})})]})}),C&&l.jsx("p",{className:"mt-2 text-sm",children:C}),le&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(z==null?void 0:z.name)||""]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{ce(0),Fe(new Date().toISOString().slice(0,10)),ve(""),ue(!0)},children:"Abonar"}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>se(!1),children:"Cerrar"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-3",children:[l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),l.jsx("div",{className:"text-xl font-semibold",children:Pu(Z.saldoActual)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),l.jsx("div",{className:"text-xl font-semibold",children:Pu(Z.totalAbonado)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),l.jsx("div",{className:"text-xl font-semibold",children:Pu(Z.saldoActual)})]})]}),l.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Tipo"}),l.jsx("th",{className:"p-2 border",children:"Referencia"}),l.jsx("th",{className:"p-2 border",children:"Comentario"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:ee?l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):k.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):k.map(Se=>{var ot;const Et=re===Se.id;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:Et?l.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:He,onChange:nt=>ke(nt.target.value)}):Se.date||""}),l.jsx("td",{className:"p-2 border",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Se.amount>=0?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:Se.amount>=0?"COMPRA (CARGO)":"ABONO"})}),l.jsx("td",{className:"p-2 border",children:(ot=Se.ref)!=null&&ot.saleId?`Venta #${Se.ref.saleId}`:""}),l.jsx("td",{className:"p-2 border",children:Et?l.jsx("input",{className:"w-full border p-1 rounded",value:De,onChange:nt=>ze(nt.target.value),placeholder:"Comentario"}):l.jsx("span",{title:Se.comment||"",children:(Se.comment||"").length>40?(Se.comment||"").slice(0,40)+"":Se.comment||""})}),l.jsx("td",{className:"p-2 border font-semibold",children:Et?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(pe)?"":pe,onChange:nt=>{const mt=Number(nt.target.value||0),xt=Number.isFinite(mt)?Math.max(0,parseFloat(mt.toFixed(2))):0;Pe(xt)},placeholder:"0.00",title:Se.type==="ABONO"?"Se guardar como negativo":"Se guardar como positivo"}):Pu(Se.amount)}),l.jsx("td",{className:"p-2 border",children:Et?l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:$t,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:or,children:"Cancelar"})]}):l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Gt(Se),children:"Editar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>cn(Se),children:"Borrar"})]})})]},Se.id)})})]})})]})}),Y&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[l.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(z==null?void 0:z.name)||""]}),l.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),l.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:be,onChange:Se=>Fe(Se.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Monto del abono"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:ie===0?"":ie,onChange:Se=>{const Et=Number(Se.target.value||0),ot=Number.isFinite(Et)?Math.max(0,parseFloat(Et.toFixed(2))):0;ce(ot)},placeholder:"0.00"}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se guarda con 2 decimales (se registrar como ABONO negativo)."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:ne,onChange:Se=>ve(Se.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),l.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[ne.length,"/250"]})]})]}),l.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[l.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ue(!1),disabled:Re,children:"Cancelar"}),l.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:bn,disabled:Re,children:Re?"Guardando...":"Guardar abono"})]})]})})]})}const Lu=t=>`C$ ${(Number(t)||0).toFixed(2)}`,zW=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"];async function WW(t){if(!t)return 0;const e=Xt(At(Ue,"inventory_clothes_batches"),pn("productId","==",t)),n=await Qt(e);let r="0000-00-00",s=-1,i=0;return n.forEach(a=>{const o=a.data(),A=String(o.date||"0000-00-00"),c=Number(o.salePrice||0),d=o.createdAt,f=((d==null?void 0:d.seconds)??0)*1e3+((d==null?void 0:d.nanoseconds)??0)/1e6;A>r?(r=A,s=f,i=c):A===r&&f>s&&(s=f,i=c)}),Number(i||0)}async function bI(t){if(!t)return 0;const e=Xt(At(Ue,"inventory_clothes_batches"),pn("productId","==",t)),n=await Qt(e);let r=0;return n.forEach(s=>r+=Number(s.data().remaining||0)),r}function CI(t){const e="+505 ";if(!t.startsWith(e)){const r=t.replace(/\D/g,"");return e+r.slice(0,8)}const n=t.slice(e.length).replace(/\D/g,"");return e+n.slice(0,8)}function $W(){const[t,e]=L.useState([]),[n,r]=L.useState([]),[s,i]=L.useState("CONTADO"),[a,o]=L.useState(""),[A,c]=L.useState(""),[d,f]=L.useState(new Date().toISOString().slice(0,10)),[p,g]=L.useState(""),[B,b]=L.useState([]),C=L.useMemo(()=>B.reduce((ne,ve)=>ne+(ve.qty||0),0),[B]),w=L.useMemo(()=>{const ne=B.reduce((ve,Re)=>{const Ce=Math.max(0,(Number(Re.unitPrice)||0)*(Re.qty||0)-(Number(Re.discount)||0));return ve+Ce},0);return Math.floor(ne*100)/100},[B]),[y,N]=L.useState(0),[R,V]=L.useState(""),[j,U]=L.useState(!1),[I,Q]=L.useState(!1),[D,S]=L.useState(""),[_,T]=L.useState("+505 "),[K,oe]=L.useState(""),[le,se]=L.useState(""),[z,Ae]=L.useState("ACTIVO"),[ee,we]=L.useState(0),k=()=>{S(""),T("+505 "),oe(""),se(""),Ae("ACTIVO"),we(0)};L.useEffect(()=>{(async()=>{const ne=Xt(At(Ue,"customers_clothes"),di("createdAt","desc")),ve=await Qt(ne),Re=[];ve.forEach(He=>{const ke=He.data();Re.push({id:He.id,name:ke.name??"",phone:ke.phone??"+505 ",place:ke.place??"",status:ke.status??"ACTIVO",creditLimit:Number(ke.creditLimit??0),balance:0})});for(const He of Re)try{const ke=Xt(At(Ue,"ar_movements"),pn("customerId","==",He.id)),pe=await Qt(ke);let Pe=0;pe.forEach(De=>Pe+=Number(De.data().amount||0)),He.balance=Pe}catch{He.balance=0}e(Re);const Ce=Xt(At(Ue,"products_clothes"),di("createdAt","desc")),re=await Qt(Ce),pt=[];re.forEach(He=>{const ke=He.data();pt.push({id:He.id,name:ke.name??"(sin nombre)",sku:ke.sku??""})}),r(pt)})()},[]);const X=L.useMemo(()=>t.find(ne=>ne.id===a),[t,a]),Z=(X==null?void 0:X.balance)||0,H=s==="CREDITO"?Z+Math.max(0,Number(w||0))-Math.max(0,Number(y||0)):0,Y=async ne=>{if(!ne)return;if(B.some(pt=>pt.productId===ne)){g("");return}const ve=n.find(pt=>pt.id===ne);if(!ve){g("");return}let Re=await WW(ne);Re||(Re=Number((ve==null?void 0:ve.price)||0));const Ce=await bI(ne),re={productId:ne,productName:ve.name||"",sku:ve.sku||"",unitPrice:Number(Re)||0,available:Number(Ce)||0,qty:0,discount:0};b(pt=>[...pt,re]),g("")},ue=(ne,ve)=>{b(Re=>Re.map(Ce=>{if(Ce.productId!==ne)return Ce;if(ve==="")return{...Ce,qty:0};const re=Math.max(0,Math.floor(Number(ve)));return{...Ce,qty:re}}))},ie=(ne,ve)=>{b(Re=>Re.map(Ce=>{if(Ce.productId!==ne)return Ce;if(ve==="")return{...Ce,discount:0};const re=Math.max(0,Math.floor(Number(ve)));return{...Ce,discount:re}}))},ce=ne=>b(ve=>ve.filter(Re=>Re.productId!==ne)),be=async()=>{if(!d)return"Selecciona la fecha.";if(B.length===0)return"Agrega al menos un producto.";const ne=B.filter(ve=>(ve.qty||0)>0);if(ne.length===0)return"Debes ingresar cantidades (> 0) en al menos un producto.";if(!(w>0))return"El total debe ser mayor a cero.";if(s==="CONTADO"){if(!A.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!a)return"Selecciona un cliente (crdito).";if(y<0)return"El pago inicial no puede ser negativo.";if(y>w)return"El pago inicial no puede superar el total.";if((X==null?void 0:X.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede facturar a crdito."}for(const ve of ne){const Re=await bI(ve.productId);if(ve.qty>Re)return`Inventario insuficiente para "${ve.productName}". Disponible: ${Re} unidades.`;const Ce=(Number(ve.unitPrice)||0)*(ve.qty||0),re=Number(ve.discount)||0;if(!Number.isInteger(re)||re<0)return`El descuento en "${ve.productName}" debe ser entero y  0.`;if(re>Ce)return`El descuento en "${ve.productName}" no puede exceder C$ ${Ce.toFixed(2)}.`}return null},Fe=async ne=>{ne.preventDefault(),V("");const ve=await be();if(ve){V(" "+ve);return}try{U(!0);const Re=B.filter(He=>(He.qty||0)>0).map(He=>{const ke=(Number(He.unitPrice)||0)*(He.qty||0),pe=Math.max(0,Math.floor(Number(He.discount)||0)),Pe=Math.max(0,ke-pe);return{productId:He.productId,productName:He.productName,sku:He.sku||"",qty:He.qty,unitPrice:Number(He.unitPrice)||0,discount:pe,total:Math.floor(Pe*100)/100}}),Ce={type:s,date:d,createdAt:Ut.now(),itemsTotal:Number(w)||0,total:Number(w)||0,quantity:Number(C)||0,items:Re};s==="CONTADO"?Ce.customerName=A.trim():(Ce.customerId=a,Ce.downPayment=Number(y)||0);const re=await is(At(Ue,"sales_clothes"),Ce);if(s==="CREDITO"&&a){const He={customerId:a,date:d,createdAt:Ut.now(),ref:{saleId:re.id}};await is(At(Ue,"ar_movements"),{...He,type:"CARGO",amount:Number(w)||0}),Number(y)>0&&await is(At(Ue,"ar_movements"),{...He,type:"ABONO",amount:-Number(y)})}const pt={};for(const He of Re)if(He.qty>0){const{allocations:ke}=await GW({productId:He.productId,quantity:He.qty,saleDate:d,saleId:re.id});pt[He.productId]={productId:He.productId,allocations:ke}}await $n(Nt(Ue,"sales_clothes",re.id),{allocationsByItem:pt}),i("CONTADO"),o(""),c(""),f(new Date().toISOString().slice(0,10)),b([]),N(0),s==="CREDITO"&&a&&e(He=>He.map(ke=>ke.id===a?{...ke,balance:(ke.balance||0)+(Number(w)||0)-(Number(y)||0)}:ke)),V(" Venta registrada")}catch(Re){console.error(Re),V(" Error al guardar la venta")}finally{U(!1)}};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas (Ropa)"}),l.jsxs("form",{onSubmit:Fe,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:s,onChange:ne=>i(ne.target.value),children:[l.jsx("option",{value:"CONTADO",children:"Contado"}),l.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),s==="CONTADO"?l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del cliente (contado)"}),l.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Cliente Mostrador",value:A,onChange:ne=>c(ne.target.value)})]}):l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("select",{className:"flex-1 border p-2 rounded",value:a,onChange:ne=>o(ne.target.value),children:[l.jsx("option",{value:"",children:"Selecciona un cliente"}),t.map(ne=>l.jsxs("option",{value:ne.status==="ACTIVO"?ne.id:"",disabled:ne.status==="BLOQUEADO",children:[ne.name," | ",ne.phone," | Saldo: ",Lu(ne.balance||0)]},ne.id))]}),l.jsx("button",{type:"button",className:"px-20 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>Q(!0),children:"Crear Cliente"})]}),l.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:[l.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),l.jsx("div",{className:"text-lg font-semibold",children:Lu(Z)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:y===0?"":y,onChange:ne=>N(Math.max(0,Number(ne.target.value||0))),placeholder:"0.00"})]}),l.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),l.jsx("div",{className:"text-lg font-semibold",children:Lu(H)})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),l.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:d,onChange:ne=>f(ne.target.value)})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:p,onChange:async ne=>{const ve=ne.target.value;g(ve),await Y(ve)},children:[l.jsx("option",{value:"",children:"Selecciona un producto"}),n.map(ne=>{const ve=B.some(Re=>Re.productId===ne.id);return l.jsxs("option",{value:ve?"":ne.id,disabled:ve,children:[ne.name," ",ne.sku?` ${ne.sku}`:""," ",ve?" (seleccionado)":""]},ne.id)})]}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Los productos ya aadidos quedan bloqueados para evitar duplicados."})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsxs("div",{className:"border rounded overflow-hidden",children:[l.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 px-3 py-2 text-xs font-semibold border-b",children:[l.jsx("div",{className:"col-span-4",children:"Producto"}),l.jsx("div",{className:"col-span-2 text-right",children:"Precio"}),l.jsx("div",{className:"col-span-2 text-right",children:"Existencias"}),l.jsx("div",{className:"col-span-1 text-right",children:"Cantidad"}),l.jsx("div",{className:"col-span-1 text-right",children:"Descuento"}),l.jsx("div",{className:"col-span-1 text-right",children:"Monto"}),l.jsx("div",{className:"col-span-1 text-center",children:"Quitar"})]}),B.length===0?l.jsx("div",{className:"px-3 py-4 text-sm text-gray-500",children:"No hay productos agregados."}):B.map(ne=>{const ve=Math.max(0,(ne.available||0)-(ne.qty||0)),Re=(Number(ne.unitPrice)||0)*(ne.qty||0),Ce=Math.max(0,Re-(Number(ne.discount)||0));return l.jsxs("div",{className:"grid grid-cols-12 items-center px-3 py-2 border-b text-sm gap-x-2",children:[l.jsx("div",{className:"col-span-4",children:l.jsxs("div",{className:"font-medium",children:[ne.productName,ne.sku?`  ${ne.sku}`:""]})}),l.jsx("div",{className:"col-span-2 text-right",children:Lu(ne.unitPrice)}),l.jsx("div",{className:"col-span-2 text-right",children:ve}),l.jsx("div",{className:"col-span-1",children:l.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(ne.qty)||ne.qty===0?"":ne.qty,onChange:re=>ue(ne.productId,re.target.value),inputMode:"numeric",placeholder:"0",title:"Cantidad de piezas"})}),l.jsx("div",{className:"col-span-1",children:l.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(ne.discount)||ne.discount===0?"":ne.discount,onChange:re=>ie(ne.productId,re.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento entero (C$)"})}),l.jsx("div",{className:"col-span-1 text-right",children:Lu(Ce)}),l.jsx("div",{className:"col-span-1 text-center",children:l.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 hover:bg-red-200",onClick:()=>ce(ne.productId),title:"Quitar producto",children:""})})]},ne.productId)})]}),B.length>0&&l.jsxs("div",{className:"flex justify-end gap-6 mt-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Piezas totales: "}),l.jsx("span",{className:"font-semibold",children:C})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Total: "}),l.jsx("span",{className:"font-semibold",children:Lu(w)})]})]})]}),l.jsx("div",{className:"md:col-span-2",children:l.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",disabled:j,children:j?"Guardando...":"Registrar venta"})})]}),R&&l.jsx("p",{className:"mt-2 text-sm",children:R}),I&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-xl p-4",children:[l.jsx("h3",{className:"text-lg font-bold mb-3",children:"Nuevo cliente"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),l.jsx("input",{className:"w-full border p-2 rounded",value:D,onChange:ne=>S(ne.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),l.jsx("input",{className:"w-full border p-2 rounded",value:_,onChange:ne=>T(CI(ne.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:K,onChange:ne=>oe(ne.target.value),children:[l.jsx("option",{value:"",children:""}),zW.map(ne=>l.jsx("option",{value:ne,children:ne},ne))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:z,onChange:ne=>Ae(ne.target.value),children:[l.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),l.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:ee===0?"":ee,onChange:ne=>we(Math.max(0,Number(ne.target.value||0))),placeholder:"Ej: 2000"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:le,onChange:ne=>se(ne.target.value),maxLength:500})]})]}),l.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[l.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{k(),Q(!1)},children:"Cancelar"}),l.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:async()=>{if(V(""),!D.trim()){V("Ingresa el nombre del nuevo cliente.");return}const ne=CI(_);try{const ve=await is(At(Ue,"customers_clothes"),{name:D.trim(),phone:ne,place:K||"",notes:le||"",status:z,creditLimit:Number(ee||0),createdAt:Ut.now()}),Re={id:ve.id,name:D.trim(),phone:ne,place:K||"",status:z,creditLimit:Number(ee||0),balance:0};e(Ce=>[Re,...Ce]),o(ve.id),k(),Q(!1),V(" Cliente creado")}catch(ve){console.error(ve),V(" Error al crear cliente")}},children:"Guardar cliente"})]})]})})]})}var T3={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},EI=Co.createContext&&Co.createContext(T3),XW=["attr","size","title"];function JW(t,e){if(t==null)return{};var n=YW(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function YW(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function J0(){return J0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},J0.apply(this,arguments)}function _I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Y0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_I(Object(n),!0).forEach(function(r){ZW(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_I(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZW(t,e,n){return e=e$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e$(t){var e=t$(t,"string");return typeof e=="symbol"?e:e+""}function t$(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function U3(t){return t&&t.map((e,n)=>Co.createElement(e.tag,Y0({key:n},e.attr),U3(e.child)))}function n$(t){return e=>Co.createElement(r$,J0({attr:Y0({},t.attr)},e),U3(t.child))}function r$(t){var e=n=>{var{attr:r,size:s,title:i}=t,a=JW(t,XW),o=s||n.size||"1em",A;return n.className&&(A=n.className),t.className&&(A=(A?A+" ":"")+t.className),Co.createElement("svg",J0({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,a,{className:A,style:Y0(Y0({color:t.color||n.color},n.style),t.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),i&&Co.createElement("title",null,i),t.children)};return EI!==void 0?Co.createElement(EI.Consumer,null,n=>e(n)):e(T3)}function s$(t){return n$({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(t)}function i$({onClick:t,loading:e,className:n=""}){return l.jsxs("button",{onClick:t,disabled:e,className:`flex items-center gap-2 px-3 py-1.5 rounded border 
        bg-white hover:bg-gray-100 text-sm font-medium shadow-sm
        disabled:opacity-50 disabled:cursor-not-allowed ${n}`,title:"Refrescar datos",children:[l.jsx(s$,{className:`w-4 h-4 ${e?"animate-spin text-blue-500":""}`}),e?"Actualizando...":"Refrescar"]})}function a$(){const[t,e]=L.useState(0),n=L.useCallback(()=>e(r=>r+1),[]);return{refreshKey:t,refresh:n}}const jr=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function zg(t){var n;const e=t==null?void 0:t.date;return e||((n=t==null?void 0:t.createdAt)!=null&&n.toDate?Jt(t.createdAt.toDate(),"yyyy-MM-dd"):"")}function o$(t,e){const n=zg(t);if(!n)return null;if(Array.isArray(t.items))return{id:e,date:n,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??0),items:t.items.map(a=>({productId:String(a.productId||""),productName:String(a.productName||""),sku:a.sku||"",qty:Number(a.qty||0),unitPrice:Number(a.unitPrice??(Number(a.total||0)/Math.max(1,Number(a.qty||0))||0)),discount:Number(a.discount||0)})),customerId:t.customerId||void 0};const r=t.item||{},s=Number(t.quantity??r.qty??0),i=Number(t.total??t.itemsTotal??r.total??0);return{id:e,date:n,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??i??0),items:[{productId:String(r.productId||t.productId||""),productName:String(r.productName||t.productName||""),sku:r.sku||t.sku||"",qty:s,unitPrice:Number(r.unitPrice??(i&&s?i/s:0)),discount:Number(r.discount||0)}],customerId:t.customerId||void 0}}function A$(t,e,n,r){const s={};for(const o of t)s[o.productId]||(s[o.productId]={productName:o.productName,lots:[]}),s[o.productId].lots.push({date:o.date,qtyLeft:Number(o.quantity||0),cost:Number(o.purchasePrice||0)});for(const o of Object.keys(s))s[o].lots.sort((A,c)=>A.date.localeCompare(c.date));const i=[...e].sort((o,A)=>o.date.localeCompare(A.date));let a=0;for(const o of i)for(const A of o.items||[]){const c=s[A.productId];if(!c)continue;let d=Number(A.qty||0);if(!(d<=0))for(const f of c.lots){if(d<=0)break;if(f.qtyLeft<=0)continue;const p=Math.min(f.qtyLeft,d);o.date>=n&&o.date<=r&&(a+=p*f.cost),f.qtyLeft-=p,d-=p}}return a}function l$(){const{refreshKey:t,refresh:e}=a$(),[n,r]=L.useState(Jt(Op(new Date),"yyyy-MM-dd")),[s,i]=L.useState(Jt(jp(new Date),"yyyy-MM-dd")),[a,o]=L.useState([]),[A,c]=L.useState([]),[d,f]=L.useState([]),[p,g]=L.useState([]),[B,b]=L.useState([]),[C,w]=L.useState([]),[y,N]=L.useState(!0),[R,V]=L.useState(""),[j,U]=L.useState(!1),[I,Q]=L.useState(null),[D,S]=L.useState([]),[_,T]=L.useState(!1),[K,oe]=L.useState({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});L.useEffect(()=>{(async()=>{N(!0),V("");try{const ee=await Qt(At(Ue,"sales_clothes")),we=[],k=[];ee.forEach(ne=>{const ve=ne.data(),Re=o$(ve,ne.id);Re&&(Re.date<=s&&we.push(Re),Re.date>=n&&Re.date<=s&&k.push(Re))}),c(we),o(k);const X=await Qt(At(Ue,"inventory_clothes_batches")),Z=[];X.forEach(ne=>{const ve=ne.data(),Re=zg(ve);!Re||Re>s||Z.push({id:ne.id,productId:ve.productId,productName:ve.productName||"",date:Re,quantity:Number(ve.quantity||0),remaining:Number(ve.remaining||0),purchasePrice:Number(ve.purchasePrice||0)})}),f(Z);const H=await Qt(At(Ue,"expenses_clothes")),Y=[];H.forEach(ne=>{const ve=ne.data(),Re=zg(ve);Re&&Re>=n&&Re<=s&&Y.push({id:ne.id,date:Re,category:ve.category||"",description:ve.description||"",amount:Number(ve.amount||0),status:ve.status||""})}),g(Y);const ue=await Qt(At(Ue,"ar_movements")),ie=[],ce={};ue.forEach(ne=>{const ve=ne.data(),Re=zg(ve);if(!Re)return;const Ce=ve.customerId,re=Number(ve.amount||0);Ce&&(ce[Ce]=(ce[Ce]||0)+re),ve.type==="ABONO"&&Re>=n&&Re<=s&&ie.push({id:ne.id,customerId:Ce,type:"ABONO",amount:re,date:Re})}),b(ie);const be=await Qt(At(Ue,"customers_clothes")),Fe=[];be.forEach(ne=>{const ve=ne.data();Fe.push({id:ne.id,name:ve.name||"",balance:ce[ne.id]||0})}),w(Fe)}catch(ee){console.error(ee),V(" Error cargando datos del dashboard.")}finally{N(!1)}})()},[n,s,t]);const le=L.useMemo(()=>{try{return A$(d,A,n,s)}catch(ee){return console.error(ee),0}},[d,A,n,s]),se=L.useMemo(()=>{const ee=a.reduce((ce,be)=>ce+(be.total||0),0),we=p.reduce((ce,be)=>ce+(be.amount||0),0),k=ee-le,X=k-we,Z=B.reduce((ce,be)=>ce+Math.abs(be.amount||0),0),H=C.filter(ce=>(ce.balance||0)>0),Y=H.reduce((ce,be)=>ce+(be.balance||0),0);let ue=0,ie=0;for(const ce of a){const be=(ce.items||[]).reduce((Fe,ne)=>Fe+(Number(ne.qty)||0),0);ce.type==="CONTADO"?ue+=be:ie+=be}return{ventasTotales:ee,costoMercaderia:le,gastosPeriodo:we,gananciaAntes:k,gananciaDespues:X,abonosRecibidos:Z,saldosPendientes:Y,clientesConSaldo:H.length,prendasCash:ue,prendasCredito:ie}},[a,p,B,C,le]),z=L.useMemo(()=>{const ee={};for(const we of a){if(we.type!=="CREDITO"||!we.customerId)continue;const k=(we.items||[]).reduce((X,Z)=>X+(Number(Z.qty)||0),0);ee[we.customerId]=(ee[we.customerId]||0)+k}return C.filter(we=>(we.balance||0)>0).map(we=>({customerId:we.id,name:we.name,prendasCredito:ee[we.id]||0,saldo:we.balance||0})).sort((we,k)=>k.saldo-we.saldo)},[C,a]),Ae=async ee=>{U(!0),Q({id:ee.customerId,name:ee.name}),S([]),T(!0),oe({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});try{const we=[];let k=0,X=0,Z=0;for(const ie of a)if(!(ie.type!=="CREDITO"||ie.customerId!==ee.customerId))for(const ce of ie.items||[]){const be=Number(ce.qty||0),Fe=Number(ce.unitPrice||0),ne=be*Fe,ve=Math.max(0,Number(ce.discount||0)),Re=Math.max(0,ne-ve);we.push({saleId:ie.id,date:ie.date,productName:ce.productName,sku:ce.sku||"",qty:be,unitPrice:Fe,lineTotal:ne,discount:ve,lineFinal:Re}),k+=ne,X+=ve,Z+=Re}let H=0;for(const ie of B)ie.customerId===ee.customerId&&(H+=Math.abs(ie.amount||0));const Y=C.find(ie=>ie.id===ee.customerId),ue=(Y==null?void 0:Y.balance)||0;S(we),oe({totalBruto:k,totalDescuento:X,totalFiado:Z,saldoActual:ue,abonadoPeriodo:H})}catch(we){console.error(we),V(" No se pudo cargar el detalle del cliente.")}finally{T(!1)}};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas (Ropa)"}),l.jsx(i$,{onClick:e,loading:y})]}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:n,onChange:ee=>r(ee.target.value)})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:s,onChange:ee=>i(ee.target.value)})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 gap-3 mb-4",children:[l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),l.jsx("div",{className:"text-xl font-semibold",children:jr(se.ventasTotales)}),l.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Cash + Crdito del periodo."})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),l.jsx("div",{className:"text-xl font-semibold",children:jr(se.costoMercaderia)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia antes de Gastos"}),l.jsx("div",{className:"text-xl font-semibold text-green-600",children:jr(se.gananciaAntes)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Gastos del Negocio"}),l.jsx("div",{className:"text-xl font-semibold",children:jr(se.gastosPeriodo)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia despus de Gastos"}),l.jsx("div",{className:"text-xl font-semibold text-green-600",children:jr(se.gananciaDespues)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),l.jsx("div",{className:"text-xl font-semibold",children:jr(se.abonosRecibidos)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),l.jsx("div",{className:"text-xl font-semibold",children:jr(se.saldosPendientes)}),l.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),l.jsx("div",{className:"text-xl font-semibold",children:se.clientesConSaldo})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Cash"}),l.jsx("div",{className:"text-xl font-semibold",children:se.prendasCash})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Crdito (vendidas)"}),l.jsx("div",{className:"text-xl font-semibold",children:se.prendasCredito})]})]}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado por cliente"}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Cliente"}),l.jsx("th",{className:"p-2 border",children:"Prendas Crdito (periodo)"}),l.jsx("th",{className:"p-2 border",children:"Saldo actual"})]})}),l.jsx("tbody",{children:y?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Cargando"})}):z.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Sin clientes con saldo"})}):z.map(ee=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:ee.name}),l.jsx("td",{className:"p-2 border",children:l.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Ae({customerId:ee.customerId,name:ee.name}),title:"Ver piezas fiadas del periodo",children:ee.prendasCredito})}),l.jsx("td",{className:"p-2 border font-semibold",children:jr(ee.saldo)})]},ee.customerId))})]})}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Gastos del periodo"}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Categora"}),l.jsx("th",{className:"p-2 border",children:"Descripcin"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Estado"})]})}),l.jsx("tbody",{children:y?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):p.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):p.sort((ee,we)=>ee.date.localeCompare(we.date)).map(ee=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:ee.date}),l.jsx("td",{className:"p-2 border",children:ee.category||""}),l.jsx("td",{className:"p-2 border",children:ee.description?l.jsx("span",{title:ee.description,children:ee.description.length>40?ee.description.slice(0,40)+"":ee.description}):""}),l.jsx("td",{className:"p-2 border",children:jr(ee.amount)}),l.jsx("td",{className:"p-2 border",children:ee.status||""})]},ee.id))})]})}),R&&l.jsx("p",{className:"mt-2 text-sm",children:R}),j&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("h3",{className:"text-lg font-bold",children:["Detalle del cliente  ",(I==null?void 0:I.name)||""]}),l.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>U(!1),children:"Cerrar"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-3",children:[l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Total Bruto (periodo)"}),l.jsx("div",{className:"text-xl font-semibold",children:jr(K.totalBruto)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Descuento (periodo)"}),l.jsx("div",{className:"text-xl font-semibold",children:jr(K.totalDescuento)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Monto Total Fiado (periodo)"}),l.jsx("div",{className:"text-xl font-semibold",children:jr(K.totalFiado)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),l.jsx("div",{className:"text-xl font-semibold",children:jr(K.saldoActual)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Abonado (periodo)"}),l.jsx("div",{className:"text-xl font-semibold",children:jr(K.abonadoPeriodo)})]})]}),l.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha compra"}),l.jsx("th",{className:"p-2 border",children:"Pieza"}),l.jsx("th",{className:"p-2 border",children:"SKU"}),l.jsx("th",{className:"p-2 border",children:"Cant."}),l.jsx("th",{className:"p-2 border",children:"P. Unit"}),l.jsx("th",{className:"p-2 border",children:"Monto"})," ",l.jsx("th",{className:"p-2 border",children:"Descuento"})," ",l.jsx("th",{className:"p-2 border",children:"Monto final"})," "]})}),l.jsx("tbody",{children:_?l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Cargando"})}):D.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Sin piezas fiadas en el periodo."})}):D.sort((ee,we)=>ee.date.localeCompare(we.date)).map((ee,we)=>l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:ee.date}),l.jsx("td",{className:"p-2 border",children:ee.productName}),l.jsx("td",{className:"p-2 border",children:ee.sku||""}),l.jsx("td",{className:"p-2 border",children:ee.qty}),l.jsx("td",{className:"p-2 border",children:jr(ee.unitPrice)}),l.jsx("td",{className:"p-2 border",children:jr(ee.lineTotal)}),l.jsx("td",{className:"p-2 border",children:jr(ee.discount)}),l.jsx("td",{className:"p-2 border",children:jr(ee.lineFinal)})]},`${ee.saleId}-${we}`))})]})})]})})]})}const II=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal"],mg=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function c$(){const[t,e]=L.useState(Jt(Op(new Date),"yyyy-MM-dd")),[n,r]=L.useState(Jt(jp(new Date),"yyyy-MM-dd")),[s,i]=L.useState(Jt(new Date,"yyyy-MM-dd")),[a,o]=L.useState(""),[A,c]=L.useState(""),[d,f]=L.useState(0),[p,g]=L.useState("PENDIENTE"),[B,b]=L.useState(""),[C,w]=L.useState([]),[y,N]=L.useState(!0),[R,V]=L.useState(""),[j,U]=L.useState(null),[I,Q]=L.useState(""),[D,S]=L.useState(""),[_,T]=L.useState(""),[K,oe]=L.useState(0),[le,se]=L.useState("PENDIENTE"),[z,Ae]=L.useState("");L.useEffect(()=>{(async()=>{N(!0);try{const ie=Xt(At(Ue,"expenses_clothes"),di("date","desc")),ce=await Qt(ie),be=[];ce.forEach(Fe=>{const ne=Fe.data();be.push({id:Fe.id,date:ne.date||Jt(new Date,"yyyy-MM-dd"),category:ne.category||"",description:ne.description||"",amount:Number(ne.amount||0),status:ne.status||"PENDIENTE",notes:ne.notes||"",createdAt:ne.createdAt??Ut.now()})}),w(be)}catch(ie){console.error(ie),V(" Error al cargar gastos")}finally{N(!1)}})()},[]);const ee=L.useMemo(()=>C.filter(ie=>!(t&&ie.date<t||n&&ie.date>n)),[C,t,n]),we=L.useMemo(()=>{const ie=ee.reduce((Fe,ne)=>Fe+(ne.amount||0),0),ce=ee.filter(Fe=>Fe.status==="PAGADO").reduce((Fe,ne)=>Fe+(ne.amount||0),0),be=ie-ce;return{total:ie,pagado:ce,pendiente:be}},[ee]),k=()=>{i(Jt(new Date,"yyyy-MM-dd")),o(""),c(""),f(0),g("PENDIENTE"),b("")},X=async ie=>{if(ie.preventDefault(),V(""),!a){V("Selecciona una categora.");return}if(!A.trim()){V("Ingresa una descripcin.");return}if(!d||d<=0){V("Ingresa un monto vlido.");return}try{const ce=await is(At(Ue,"expenses_clothes"),{date:s,category:a,description:A.trim(),amount:Number(d.toFixed(2)),status:p,notes:B||"",createdAt:Ut.now()});w(be=>[{id:ce.id,date:s,category:a,description:A.trim(),amount:Number(d.toFixed(2)),status:p,notes:B||"",createdAt:Ut.now()},...be]),k(),V(" Gasto registrado")}catch(ce){console.error(ce),V(" Error al guardar gasto")}},Z=ie=>{U(ie.id),Q(ie.date),S(ie.category||""),T(ie.description||""),oe(Number(ie.amount||0)),se(ie.status||"PENDIENTE"),Ae(ie.notes||"")},H=()=>{U(null),Q(""),S(""),T(""),oe(0),se("PENDIENTE"),Ae("")},Y=async()=>{if(j){if(!D){V("Selecciona una categora.");return}if(!_.trim()){V("Ingresa una descripcin.");return}if(!K||K<=0){V("Ingresa un monto vlido.");return}try{await $n(Nt(Ue,"expenses_clothes",j),{date:I,category:D,description:_.trim(),amount:Number(K.toFixed(2)),status:le,notes:z||""}),w(ie=>ie.map(ce=>ce.id===j?{...ce,date:I,category:D,description:_.trim(),amount:Number(K.toFixed(2)),status:le,notes:z||""}:ce)),H(),V(" Gasto actualizado")}catch(ie){console.error(ie),V(" Error al actualizar gasto")}}},ue=async ie=>{confirm(`Eliminar el gasto "${ie.description}"?`)&&(await xs(Nt(Ue,"expenses_clothes",ie.id)),w(be=>be.filter(Fe=>Fe.id!==ie.id)),V(" Gasto borrado"))};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Ropa)"}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:ie=>e(ie.target.value)})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:n,onChange:ie=>r(ie.target.value)})]}),l.jsxs("div",{className:"ml-auto text-sm",children:[l.jsx("div",{className:"font-semibold",children:"Totales del rango"}),l.jsxs("div",{children:["Total: ",mg(we.total)]}),l.jsxs("div",{children:["Pagado: ",mg(we.pagado)]}),l.jsxs("div",{children:["Pendiente: ",mg(we.pendiente)]})]})]}),l.jsxs("form",{onSubmit:X,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),l.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:s,onChange:ie=>i(ie.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:ie=>o(ie.target.value),children:[l.jsx("option",{value:"",children:"Selecciona"}),II.map(ie=>l.jsx("option",{value:ie,children:ie},ie))]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),l.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:A,onChange:ie=>c(ie.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:d===0?"":d,onChange:ie=>f(Math.max(0,Number(ie.target.value||0))),placeholder:"0.00"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),l.jsxs("select",{className:"w-full border p-2 rounded",value:p,onChange:ie=>g(ie.target.value),children:[l.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),l.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),l.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:B,onChange:ie=>b(ie.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),l.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[B.length,"/500"]})]}),l.jsx("div",{className:"md:col-span-2",children:l.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),l.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Categora"}),l.jsx("th",{className:"p-2 border",children:"Descripcin"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Estado"}),l.jsx("th",{className:"p-2 border",children:"Comentario"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:y?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):ee.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):ee.slice().sort((ie,ce)=>ie.date.localeCompare(ce.date)).map(ie=>{const ce=j===ie.id;return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:ce?l.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:I,onChange:be=>Q(be.target.value)}):ie.date}),l.jsx("td",{className:"p-2 border",children:ce?l.jsxs("select",{className:"w-full border p-1 rounded",value:D,onChange:be=>S(be.target.value),children:[l.jsx("option",{value:"",children:"Selecciona"}),II.map(be=>l.jsx("option",{value:be,children:be},be))]}):ie.category||""}),l.jsx("td",{className:"p-2 border",children:ce?l.jsx("input",{className:"w-full border p-1 rounded",value:_,onChange:be=>T(be.target.value)}):l.jsx("span",{title:ie.description,children:ie.description.length>40?ie.description.slice(0,40)+"":ie.description})}),l.jsx("td",{className:"p-2 border",children:ce?l.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(K)?"":K,onChange:be=>oe(Math.max(0,Number(be.target.value||0)))}):mg(ie.amount)}),l.jsx("td",{className:"p-2 border",children:ce?l.jsxs("select",{className:"w-full border p-1 rounded",value:le,onChange:be=>se(be.target.value),children:[l.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),l.jsx("option",{value:"PAGADO",children:"Pagado"})]}):l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ie.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:ie.status})}),l.jsx("td",{className:"p-2 border",children:ce?l.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:z,onChange:be=>Ae(be.target.value),maxLength:500}):l.jsx("span",{title:ie.notes||"",children:(ie.notes||"").length>40?(ie.notes||"").slice(0,40)+"":ie.notes||""})}),l.jsx("td",{className:"p-2 border",children:l.jsx("div",{className:"flex gap-2 justify-center",children:ce?l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Y,children:"Guardar"}),l.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:H,children:"Cancelar"})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Z(ie),children:"Editar"}),l.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>ue(ie),children:"Borrar"})]})})})]},ie.id)})})]})}),R&&l.jsx("p",{className:"mt-2 text-sm",children:R})]})}const EA=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function u$(t){var e;return t!=null&&t.date?t.date:(e=t==null?void 0:t.createdAt)!=null&&e.toDate?Jt(t.createdAt.toDate(),"yyyy-MM-dd"):""}function d$(t,e){const n=u$(t);if(!n)return null;const r=t.item||{},s=Number((r==null?void 0:r.qty)??t.quantity??0)||0,i=Number((r==null?void 0:r.total)??t.total??0)||0,a=Number((r==null?void 0:r.unitPrice)??(s>0?i/s:0))||0;return{id:e,date:n,type:t.type||"CONTADO",total:Number(t.total||0),quantity:Number(t.quantity||s||0),customerId:t.customerId||void 0,customerName:t.customerName||void 0,downPayment:Number(t.downPayment||0),item:{productId:String((r==null?void 0:r.productId)||t.productId||""),productName:String((r==null?void 0:r.productName)||t.productName||""),sku:(r==null?void 0:r.sku)||t.sku||"",qty:s,unitPrice:a,total:s*a}}}async function h$(t,e){if(e<=0)return;const n=Xt(At(Ue,"inventory_clothes_batches"),pn("productId","==",t)),r=await Qt(n),s=[];r.forEach(a=>{const o=a.data();s.push({id:a.id,productId:o.productId,date:o.date||"",quantity:Number(o.quantity||0),remaining:Number(o.remaining||0)})}),s.sort((a,o)=>a.date.localeCompare(o.date));let i=e;for(const a of s){if(i<=0)break;if(a.remaining<=0)continue;const o=Math.min(a.remaining,i);i-=o,await $n(Nt(Ue,"inventory_clothes_batches",a.id),{remaining:Math.max(0,Number((a.remaining-o).toFixed(0)))})}i>0&&console.warn("consumeFIFO: falt inventario",i)}async function NI(t,e){if(e<=0)return;const n=Xt(At(Ue,"inventory_clothes_batches"),pn("productId","==",t)),r=await Qt(n),s=[];r.forEach(a=>{const o=a.data();s.push({id:a.id,productId:o.productId,date:o.date||"",quantity:Number(o.quantity||0),remaining:Number(o.remaining||0)})}),s.sort((a,o)=>a.date.localeCompare(o.date));let i=e;for(const a of s){if(i<=0)break;const o=Math.max(0,a.quantity-a.remaining);if(o<=0)continue;const A=Math.min(o,i);i-=A,await $n(Nt(Ue,"inventory_clothes_batches",a.id),{remaining:Number((a.remaining+A).toFixed(0))})}i>0&&console.warn("restoreFIFO: no se devolvi todo",i)}async function Q3(t){const e=Xt(At(Ue,"ar_movements"),pn("ref.saleId","==",t)),n=await Qt(e);await Promise.all(n.docs.map(r=>xs(Nt(Ue,"ar_movements",r.id))))}async function f$(t,e,n){if(await Q3(t.id),t.type!=="CREDITO"||!t.customerId)return;const r={customerId:t.customerId,date:t.date,createdAt:Ut.now(),ref:{saleId:t.id}},{addDoc:s}=await To(async()=>{const{addDoc:a}=await Promise.resolve().then(()=>gH);return{addDoc:a}},void 0);await s(At(Ue,"ar_movements"),{...r,type:"CARGO",amount:Number(e)||0});const i=Math.max(0,Number(n??t.downPayment??0));i>0&&await s(At(Ue,"ar_movements"),{...r,type:"ABONO",amount:-i})}function p$(){const[t,e]=L.useState(Jt(new Date,"yyyy-MM-01")),[n,r]=L.useState(Jt(new Date,"yyyy-MM-dd")),[s,i]=L.useState([]),[a,o]=L.useState([]),[A,c]=L.useState(!0),[d,f]=L.useState(""),[p,g]=L.useState(""),[B,b]=L.useState(""),[C,w]=L.useState(null),[y,N]=L.useState(!1),[R,V]=L.useState(null),[j,U]=L.useState(0),I=15,[Q,D]=L.useState(1),S=L.useMemo(()=>{const H={};return s.forEach(Y=>H[Y.id]=Y.name),H},[s]);L.useEffect(()=>{(async()=>{c(!0),f("");try{const H=await Qt(At(Ue,"customers_clothes")),Y=[];H.forEach(ce=>Y.push({id:ce.id,name:ce.data().name||""})),i(Y);const ue=await Qt(Xt(At(Ue,"sales_clothes"),di("createdAt","desc"))),ie=[];ue.forEach(ce=>{const be=d$(ce.data(),ce.id);be&&be.date>=t&&be.date<=n&&ie.push(be)}),o(ie.sort((ce,be)=>be.date.localeCompare(ce.date))),D(1)}catch(H){console.error(H),f(" Error cargando transacciones.")}finally{c(!1)}})()},[t,n]);const _=L.useMemo(()=>a.filter(H=>!(p&&H.customerId!==p||B&&H.type!==B)),[a,p,B]),T=L.useMemo(()=>{let H=0,Y=0,ue=0,ie=0;for(const ce of _)ce.type==="CONTADO"?(H+=ce.item.qty,ue+=ce.total):(Y+=ce.item.qty,ie+=ce.total);return{piezasCash:H,piezasCredito:Y,montoCash:ue,montoCredito:ie}},[_]),K=Math.max(1,Math.ceil(_.length/I)),oe=L.useMemo(()=>{const H=(Q-1)*I;return _.slice(H,H+I)},[_,Q]),le=H=>{w(null),V(H),U(H.item.qty||0),N(!0)},se=async H=>{if(w(null),!!window.confirm("Eliminar esta venta? Esta accin no se puede deshacer."))try{c(!0),await NI(H.item.productId,H.item.qty),await Q3(H.id),await xs(Nt(Ue,"sales_clothes",H.id)),o(Y=>Y.filter(ue=>ue.id!==H.id)),f(" Venta eliminada")}catch(Y){console.error(Y),f(" No se pudo eliminar la venta.")}finally{c(!1)}},z=async()=>{if(!R)return;const H=Number(R.item.qty||0),Y=Math.max(1,Math.floor(Number(j)||0));if(Y===H){N(!1);return}const ue=Number(R.item.unitPrice||0),ie=Number((ue*Y).toFixed(2));try{c(!0);const ce=Y-H;ce>0?await h$(R.item.productId,ce):ce<0&&await NI(R.item.productId,-ce);const be=Nt(Ue,"sales_clothes",R.id);await $n(be,{quantity:Y,total:ie,itemsTotal:ie,"item.qty":Y,"item.total":ie,updatedAt:Ut.now()});const Fe=Math.min(Number(R.downPayment||0),ie);await f$(R,ie,Fe),o(ne=>ne.map(ve=>ve.id===R.id?{...ve,quantity:Y,total:ie,item:{...ve.item,qty:Y,total:ie},downPayment:Fe}:ve)),f(" Venta actualizada"),N(!1)}catch(ce){console.error(ce),f(" No se pudo actualizar la venta.")}finally{c(!1)}},Ae=()=>{const H=`Reporte de transacciones (Ropa)  ${t} a ${n}`,Y=be=>(be||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),ue=_.map(be=>{const Fe=be.customerName||(be.customerId?S[be.customerId]:"")||"Nombre cliente";return`<tr>
          <td>${be.date}</td>
          <td>${Y(Fe)}</td>
          <td>${be.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${be.item.qty}</td>
          <td style="text-align:right">${EA(be.total)}</td>
        </tr>`}).join(""),ie=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${Y(H)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${Y(H)}</h1>
      <div class="kpis">
        <div><b>Piezas Cash:</b> ${T.piezasCash}</div>
        <div><b>Piezas Crdito:</b> ${T.piezasCredito}</div>
        <div><b>Monto Cash:</b> ${EA(T.montoCash)}</div>
        <div><b>Monto Crdito:</b> ${EA(T.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Piezas</th><th>Monto</th>
      </tr></thead><tbody>
      ${ue||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,ce=window.open("","_blank");ce&&(ce.document.open(),ce.document.write(ie),ce.document.close())},ee=()=>D(1),we=()=>D(H=>Math.max(1,H-1)),k=()=>D(H=>Math.min(K,H+1)),X=()=>D(K),Z=()=>{const H=[];if(K<=7)for(let ue=1;ue<=K;ue++)H.push(ue);else{const ue=Math.max(1,Q-2),ie=Math.min(K,Q+2);H.push(1),ue>2&&H.push(-1);for(let ce=ue;ce<=ie;ce++)ce!==1&&ce!==K&&H.push(ce);ie<K-1&&H.push(-2),H.push(K)}return l.jsxs("div",{className:"flex items-center gap-1 justify-between mt-3",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ee,disabled:Q===1,children:" Primero"}),l.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:we,disabled:Q===1,children:" Anterior"}),H.map((ue,ie)=>typeof ue=="number"?l.jsx("button",{className:`px-3 py-1 border rounded ${ue===Q?"bg-blue-600 text-white":""}`,onClick:()=>D(ue),children:ue},ie):l.jsx("span",{className:"px-2",children:""},ie)),l.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:k,disabled:Q===K,children:"Siguiente "}),l.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:X,disabled:Q===K,children:"ltimo "})]}),l.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",Q," de ",K,"  ",_.length," transaccin(es)"]})]})};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Reporte de transacciones (Ropa)"}),l.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap gap-3 items-end text-sm",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Desde"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:H=>{e(H.target.value),D(1)}})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Hasta"}),l.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:n,onChange:H=>{r(H.target.value),D(1)}})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),l.jsxs("select",{className:"border rounded px-2 py-1 min-w-[220px]",value:p,onChange:H=>{g(H.target.value),D(1)},children:[l.jsx("option",{value:"",children:"Todos"}),s.map(H=>l.jsx("option",{value:H.id,children:H.name},H.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block font-semibold",children:"Tipo"}),l.jsxs("select",{className:"border rounded px-2 py-1",value:B,onChange:H=>{b(H.target.value),D(1)},children:[l.jsx("option",{value:"",children:"Todos"}),l.jsx("option",{value:"CONTADO",children:"Cash"}),l.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),l.jsx("button",{className:"ml-auto px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:Ae,children:"Exportar PDF"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Cash"}),l.jsx("div",{className:"text-xl font-semibold",children:T.piezasCash})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Crdito"}),l.jsx("div",{className:"text-xl font-semibold",children:T.piezasCredito})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Monto Cash"}),l.jsx("div",{className:"text-xl font-semibold",children:EA(T.montoCash)})]}),l.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Monto Crdito"}),l.jsx("div",{className:"text-xl font-semibold",children:EA(T.montoCredito)})]})]}),l.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[l.jsxs("table",{className:"min-w-full w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border",children:"Fecha"}),l.jsx("th",{className:"p-2 border",children:"Cliente"}),l.jsx("th",{className:"p-2 border",children:"Tipo"}),l.jsx("th",{className:"p-2 border",children:"Piezas"}),l.jsx("th",{className:"p-2 border",children:"Monto"}),l.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),l.jsx("tbody",{children:A?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Cargando"})}):oe.length===0?l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Sin transacciones en el rango."})}):oe.map(H=>{const Y=H.customerName||(H.customerId?S[H.customerId]:"")||"Nombre cliente";return l.jsxs("tr",{className:"text-center",children:[l.jsx("td",{className:"p-2 border",children:H.date}),l.jsx("td",{className:"p-2 border",children:Y}),l.jsx("td",{className:"p-2 border",children:H.type==="CREDITO"?"Crdito":"Cash"}),l.jsx("td",{className:"p-2 border",children:H.item.qty}),l.jsx("td",{className:"p-2 border",children:EA(H.total)}),l.jsxs("td",{className:"p-2 border relative",children:[l.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>w(ue=>ue===H.id?null:H.id),title:"Acciones",children:""}),C===H.id&&l.jsxs("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:[l.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100",onClick:()=>le(H),children:"Editar"}),l.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>se(H),children:"Eliminar"})]})]})]},H.id)})})]}),Z()]}),d&&l.jsx("p",{className:"mt-2 text-sm",children:d}),y&&R&&l.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-md p-4",children:[l.jsx("h3",{className:"text-lg font-bold mb-2",children:"Editar venta"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Producto"}),l.jsxs("div",{className:"font-semibold",children:[R.item.productName," ",R.item.sku?` ${R.item.sku}`:""]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (piezas)"}),l.jsx("input",{type:"number",step:"1",min:1,className:"w-full border p-2 rounded",value:j,onChange:H=>U(Math.max(1,Math.floor(Number(H.target.value||0))))})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"P. Unit"}),l.jsx("div",{className:"text-lg font-semibold",children:EA(R.item.unitPrice)})]}),l.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Nuevo total"}),l.jsx("div",{className:"text-lg font-semibold",children:EA(Number(R.item.unitPrice)*Number(j||0))})]})]})]}),l.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[l.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{N(!1),V(null)},children:"Cancelar"}),l.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:z,children:"Guardar cambios"})]})]})})]})}function m$(){const[t,e]=L.useState(null),[n,r]=L.useState(""),[s,i]=L.useState(!0);return L.useEffect(()=>{const a=jF($w,async o=>{if(i(!0),o){e(o);const A=Nt(Ue,"users",o.uid),c=await Il(A);r(c.exists()?c.data().role:"")}else e(null),r("");i(!1)});return()=>a()},[]),s?l.jsx("div",{className:"p-6 text-center",children:"Cargando..."}):l.jsx(sk,{children:l.jsxs(LR,{children:[l.jsx(kn,{path:"/",element:l.jsx(vH,{})}),l.jsxs(kn,{path:"/admin",element:l.jsx(dr,{allowedRoles:["admin","vendedor"],children:l.jsx(yH,{role:n})}),children:[l.jsx(kn,{index:!0,element:l.jsx(H1,{to:"bills",replace:!0})}),l.jsx(kn,{path:"bills",element:l.jsx(dr,{allowedRoles:["vendedor","admin"],children:l.jsx(sW,{})})}),l.jsx(kn,{path:"fix",element:l.jsx(dr,{allowedRoles:["admin"],children:l.jsx(EW,{})})}),l.jsx(kn,{path:"salesV2",element:l.jsx(dr,{allowedRoles:["vendedor","admin"],children:l.jsx(vI,{user:t})})}),l.jsx(kn,{path:"billhistoric",element:l.jsx(dr,{allowedRoles:["admin"],children:l.jsx(iW,{})})}),l.jsx(kn,{path:"users",element:l.jsx(dr,{allowedRoles:["admin"],children:l.jsx(aW,{})})}),l.jsx(kn,{path:"products",element:l.jsx(dr,{allowedRoles:["admin"],children:l.jsx(AW,{})})}),l.jsx(kn,{path:"batches",element:l.jsx(dr,{allowedRoles:["admin"],children:l.jsx(gW,{})})}),l.jsx(kn,{path:"transactionclose",element:l.jsx(dr,{allowedRoles:["admin"],children:l.jsx(wW,{})})}),l.jsx(kn,{path:"financialDashboard",element:l.jsx(dr,{allowedRoles:["admin"],children:l.jsx(yW,{})})}),l.jsx(kn,{path:"TransactionsReportClothes",element:l.jsx(dr,{allowedRoles:["admin"],children:l.jsx(p$,{})})}),l.jsx(kn,{path:"expenses",element:l.jsx(dr,{allowedRoles:["admin"],children:l.jsx(xW,{})})}),l.jsx(kn,{path:"billing",element:l.jsx(dr,{allowedRoles:["admin"],children:l.jsx(_W,{})})}),l.jsx(kn,{path:"paidBatches",element:l.jsx(dr,{allowedRoles:["admin"],children:l.jsx(FW,{})})}),l.jsx(kn,{path:"inventoryClothesBatches",element:l.jsx(dr,{allowedRoles:["admin"],children:l.jsx(PW,{})})}),l.jsx(kn,{path:"productsClothes",element:l.jsx(dr,{allowedRoles:["admin"],children:l.jsx(KW,{})})}),l.jsx(kn,{path:"CustomersClothes",element:l.jsx(dr,{allowedRoles:["admin"],children:l.jsx(qW,{})})}),l.jsx(kn,{path:"salesClothes",element:l.jsx(dr,{allowedRoles:["admin"],children:l.jsx($W,{})})}),l.jsx(kn,{path:"financialDashboardClothes",element:l.jsx(dr,{allowedRoles:["admin"],children:l.jsx(l$,{})})}),l.jsx(kn,{path:"ExpensesClothes",element:l.jsx(dr,{allowedRoles:["admin"],children:l.jsx(c$,{})})})]}),l.jsx(kn,{path:"/salesV2",element:l.jsx(dr,{allowedRoles:["vendedor","admin"],children:l.jsx(vI,{user:t})})}),l.jsx(kn,{path:"*",element:l.jsx(H1,{to:"/"})})]})})}Wy.createRoot(document.getElementById("root")).render(l.jsx(Co.StrictMode,{children:l.jsx(m$,{})}));export{Bn as _,g$ as c,gQ as g};
